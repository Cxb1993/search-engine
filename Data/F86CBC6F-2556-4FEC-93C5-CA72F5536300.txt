                                                                             2 
Mechanical subsystem
Arms, Hands, Actuators, Wrists, 
Joints, Brakes, Vehicles, Tendons, 
Gears
Process subsystem
The task the robot performs, 
the environment in which it is 
placed, and the interaction 
between it and environment
Electrical subsystem
Motors, Computers, Interfaces, 
Communication link, Sensor, 
Power pupplies
Sensor subsystem
    Internal            External
    Position             Vision
    Velocity             Touch
    Torque               Chemical
    Force                  Voice
Control subsystem
Models of mechanics
Process models
Coordinate transforms
Control loops
Planning subsystem
Perception, Sensor fusion
World modeling
Task modeling and planning
Trajectory planning
Collision avoidance
Grasp planning
 
圖一：機器人系統組成圖 
在處理路徑規劃問題，有關地圖資訊的部
份，主要可分為向量式資料結構 (Vector Data 
Structure)及網格式資料結構(Raster Data Structure)
兩大類。由於使用的資料結構不同，相對用來找尋
最短路徑的演算法，也將會完全不相同。由於網格
式資料結構以有系統之固定間距的抽樣來表示地
面資訊，適於空間複雜、變化性高之環境。地理資
訊的取得有許多種方式，如加裝於機器人之上的感
測器(Sensor)，所得到的資訊是屬於區域性範圍的
資料，而全域性資料的擷取則是使用空拍圖的方式
來處理，能夠通盤考量整個環境影響因素。機器人
的型態又可分為單一網格機器人(Single-Cell Robot)
與 Robot Domain (Multi-Cell Robot)，其中的分別在
於網格圖上所包含的範圍以及與環境的互動。在地
圖上根據不同的特性，我們可以將網格分為可通行
與不可通行的區域。以各又可分為靜態、可移動、
可轉動與可變形的區域，在自然環境影響的方面還
包含重力(Gravity)、風速(Wind)、水流(Water flow)
等。在外形方面單一網格機器人則是將佔有區域，
化簡至單一網格，不需考慮外在形態的問題，而能
專注於路徑的規劃。為了考慮到多樣化的環境，過
去的路徑規劃提出過不同的研究[1][4][8]，其中包
括可移動和靜態的障礙物與權重區[19][20][27]，本
文將加入探照燈 (Searchlight)利用兩點間通視
(Light of Sight)的原理建構出光區 (Illuminated 
Region) [3]，不斷來回照射，外型會隨著時間點的
不同而有所改變，是一種大範圍的移動與阻擋。 
在路徑規劃的研究上對於機器人外型與複雜
的環境因素的實際模擬為了便於研究，通常必須做
出簡化性的假設。一般地圖架構在網格圖上的機器
人常用單一網格機器人來簡化機器人的實際外
型。在多變的環境下，地圖上存在的不只是自由空
間和靜止不動的障礙物。在真實環境下，還有可移
動的障礙物或是不易通過的區域，以及各種自然影
響因素，例如風速，水流與重力等。 
因機器人外在形態在環境中佔有多個網格的
關係，為了具體模擬機器人與環境的互動關係，除
了規劃最短路徑的同時還必須考慮在穿越狹窄道
路時還必須具備旋轉的能力，此問題被定義為
Piano mover’s Problem [21][22][23]。而在路徑規劃
的場景環境，一般而言會作假設性的簡化，但是在
真實的自然環境並非如此，如障礙物、風速、水流、
重力等自然因素的影響。本文以可移動與不可移動
的障礙物與權重區域再加入探照燈所建構的場
景，減少簡化性的假設，機器人必須在此場景中規
劃出能夠閃避探照燈、障礙物與權重區域由起始點
至終點的越獄路徑。我們將此問題定義為 Prison 
Break’s Problem。 
本文所建構的 Prison Break’s Problem是以空
拍圖的方式取得地理資訊並且以二維的網格式資
料結構儲存環境資料，在機器人物的設定方面，本
文將以單一網格機器人為例，規劃出越獄路線。環
境方面除了有可通行的自由空間還包含了權重區
域、障礙物、探照燈光區等影響因素，其特性以表
一所示。在此問題中的單一網格機器人具有觀察全
局的能力，在出發之前蒐集探照燈的照射週期，分
辨出可供躲避探照燈的掩護區。在規劃越獄路徑時
遭受探照燈光區的全面攔阻時，必須將安全的掩護
區當作中繼點，並且等待適當時機繼續規劃通往終
點的路徑。其時間複雜度為 O(dN+qN)，其中 N為
地圖的網格數目，d 為探照燈來回轉動週期，q 是
為了達到動態規劃的目的由起始點至終點(假如可
到達終點)含等待所需的時間，其值大於等於路徑
總長度。若是存在一條越獄路徑，在我們的方法
中，機器人能夠規劃出一條閃避探照燈光區、障礙
物、或是高權重區域。 
越獄路線規劃問題可分解為兩部份：建立環
境模型與動態環境下的路徑規劃，將會在本文第二
節來介紹，其中包括地圖基本架構、過去所提出過
的各類型障礙物與探照燈光區及核心 HGMR 
(Higher Geometry Maze Router)演算法[9]的改進，
包括演算法本身與其變數定義、時間與空間複雜度
的分析。第三節將結合權重區域、障礙物，探照燈
光區模擬越獄環境並且展示程式模擬範例的過程
與結果；最後在第四節總結並提出未來研究方向。 
二、動態環境中的各種影響因素 
本節將介紹在動態環境下所包含的各種型態
障礙物，其中包括權重區域、障礙物與光區，並且
在場景內加入時間的觀念以 HGMR為核心發展出 
表一：地圖環境特性 
 靜態 移動 轉動 變形 
可通行 自由空間     
權重區域 v v   
不可 
通行 
障礙物 v v   
探照燈光區 v  v v 
                                                                             4 
終點位置。 
h 整數 Single-Cell Robot行
進路徑的移動起始
點。範圍：0≦h≦ 
H-1 
H 整數 Single-Cell Robot由
路徑起點到終點網
格數。 
index 整數 LL串列指標陣列的
索引值，0 < index < 
Max_Cir(t)。 
ISOi,j(t) 整數 Illuminated / 
Shadow /Other 
Region，觀察探照燈
光區移動後標示出
每個時間點 t，網格
的三種狀態。
Illuminated代表光
區所在位置，
Shadow表示遮蔽
區，其他非光區所
在位置或遮蔽區則
以 Other表示。 
LLBacktrackingPath 
鏈結串列 紀錄回溯後所得路
徑上網格的串列。 
)(tLLindex  鏈結串列 表歸類排序後的相
鄰網格串列。 
Max_Cir(t) 整數 Circulate，LL 串列
指標陣列的 Bucket
數目，t表時間點。 
N 整數 地圖的網格數目。 
q 整數 由起始點至終點(假
如可到達終點)含等
待所需的時間。 
( ),li jRW t  浮點數 Regional Weight，
( ),li jRW t  = ∞，表示
Ci,j(t)為障礙物，
( ),li jRW t  = 1，表可
通行且平滑的自由
空 間 區 域 ， 若
( ),li jRW t 大於 1 的
正值，表各種不同
權重的自由空間區
域，t表時間點，考
慮動態時適用，l變
數用於多組權重區
域的分組。 
S 整數 Source，表示網格中
Single-Cell Robot之
起始位置。 
TL 鏈結串列 暫存串列。 
(a)
(c)
(b)
：searchlight
：non-illuminated region
：shadow region
：obstacle
：illuminated region
 
圖四：探照燈光區的模擬。(a)由光源處發射出三角
形的光區。(b)光區在移動時因照射位置的不同，
其涵蓋範圍也不相同。(c)當光區照射到一般障礙物
時，會和現實狀況一樣產生遮蔽的效果。 
在地圖上探照燈光區的模擬，是採用通視演
算法(Light of sight)，假設平面空間有光源 R(xr,yr)
與照射標的 M(xm,ym)兩點，以 R 點及 M 點作一線
段，稱此線段為 LRM，位於在 LRM之上任何點(x,y) 
都能以直線參數式方程式來決定，其表示式如方程
式一所示。 
( )
( )
r m r
r m r
x x t x x
y y t y y
= + −
= + −
       (1) 
再利用座標轉換，光區標的點為 M，繞著光源 R
點移動任意角度 θ，利用下列座標轉換方程式二求
得光區照射標的點 M1(x1,y1)，由旋轉過後求得的
M1點與光源 R點兩點可得出一直線方程式，此直 
 
( ) ( )
( ) ( )
1
1
cos sin
sin cos
m r m r r
m r m r r
x x x y y x
y x x y y y
θ θ
θ θ
= − − − +
= − + − +
 (2) 
線方程式與 LRM和地圖邊界所涵蓋的範圍，再利用
通視演算法，偵測障礙物，將障礙物後的非光區照
射範圍還原回自由空間，即為光區真正涵蓋的範
圍，如圖五所示。 
演算法的一開始，機器人必須先觀察光區障
礙物的移動走向與位置以及蒐集可供躲避光區的
安全區域，如圖六所示。接下來呼叫由 HGMR 所
修改而來的” 障礙物避碰路經規劃”來計算出最短
的路徑(STEP 3)。由”障礙物避碰路經規”所回傳的
資訊有二：到達終點與無法到達終點。若是傳回到
達終點的訊息時代表在往終點的路上可以順利躲
                                                                             6 
的情況其 AT值必須增加一個單位。本範例在圖九
表示在 B6位置等待了三個單位時間再執行障礙物
避碰路徑規劃而能夠到達終點，此路徑即為能躲避
光區與固定障礙物的路徑並且考慮權重區域的不
同的結果。在針對移動的權重區域障礙物方面，只
要經過每一次路徑的重新計算，依照規劃的結果能
成功躲避探照燈光區以及可移動障礙物。 
演算法 1：探照燈光區迴避路線規劃 
BEGIN 
STEP 1：將預定的起始點與終點、障礙物、定
點式可旋轉的探照燈光區起始位置和邊界的二
維地圖等參數輸入至”障礙物避碰路徑規劃”。 
STEP 2：將光區一個週期內所行經的 cell 依時
間與不同屬性存入 ISOi,j(t)。 
STEP 3：呼叫 HGMR。 
STEP 4：判斷是否傳回”已到達終點”訊息。 
STEP 4.1：若傳回”已到達終點”訊息，由最短
路徑 LLBacktracking Path繼續往終點前進。未達終
點前再返回 STEP 3繼續規劃路徑。 
STEP 4.2：若傳回”未到達終點”訊息，則尋找”
中繼點”。 
STEP 4.3：找出離終點最近的掩護區，而且
是 STEP 3執行後，由起點所能到達的範圍。 
STEP 4.4：執行 HGMR找出由起點到 STEP 
4.3所找出的掩護區，並儲存由起點往中繼點
的路徑。 
STEP 5：到達中繼點後繼續執行 HGMR並且將
起點改為剛抵達的中繼點，終點變更回預定的
終點。 
STEP 5.1：若傳回”未到達終點”訊息則返回
STEP 5.2，更進一步如果找到的中繼點與現
階段的起點是相同位置的話，則在原地等待
一個單位時間，ATi,j(t)值加 1 再返回 STEP 
4.2，直到抵達先前預定的終點，傳回規劃的
路徑。 
END{探照燈光區迴避路線規劃} 
關於探照燈光區避碰路線規劃是架構於
HGMR，有關空間複雜度，基本上使用了 1個 I×J
的二維陣列 Ci,j(t)來儲存網格中 N個節點的狀態。
所佔的空間複雜度為 O(N)。本文所提出的移動光
區，使用了 ATi,j(t) 、Visi,j(t)、ISOi,j(t)、 ( ),li jRW t 等
參數來表示 N 個網格狀態，所佔的空間複雜度為
O(N)。 
時間複雜度方面，探照燈光區避碰路線規劃
中，STEP 2將儲存移動光區的資訊到 ISOi,j(t)，其
時間複雜度為一個週期內每一次移動所涵蓋的網
格數，若一個週期內所觀察到探照燈光區移動的時
間點 d次，則為 O(dN)。STEP 3啟動 HGMR，其
時間複雜度為 O(N)。STEP 4及 STEP 5皆隨著地
圖更新 q次，而呼叫障礙物避碰路經規劃 q次直到
Single-Cell Robot抵達終點，時間複雜度為 O(qN)。 
 
(a)                  (b) 
 
(c)                   (d) 
圖十：固定障礙物與探照燈構成模擬場景。(a)起始
場景 S為起始點，D為終點，探照燈光區由右上角
照射，其餘皆為固定式障礙物。(b)往固定障礙物
後的安全區域躲避。(c)抵達躲避位置。(d)成功躲
避光區，抵達終點。 
總時間複雜度為 O(dN+qN)。 
程式模擬結果首先以固定障礙物與探照燈構
成模擬場景如圖十(a)所示，其中 S為起始點，D為
終點，探照燈由右上角照射出來，其餘物體為固定
是障礙物。在圖十(b)中其路徑的規劃並不是直接
的往終點 D 移動，而是往固定障礙物背後探照燈
無法照射到的遮蔽區前進，避免被光區照射到。圖
十(c)，抵達安全區域避免由障礙物上方探照燈光區
經過的區域行走。在圖十(d)光區離開後路徑的規
劃便以最短的路徑抵達終點，完成了本次的模擬。
由路徑歷史軌跡可以看出，此次的規劃深受探照燈
光區所影響，考慮的不僅是固定障礙物的避碰，還
有光區的因素才能規劃出一條能夠順利抵達終點
的路徑。 
三、越獄路線規劃 
越獄路線規劃中包含探照燈所造成的探照燈
光區以及各種可移動和靜態的障礙物。為了使本文
的路徑規劃能針對光區與各種不同地形做處理，以
HGMR 演算法為核心，將其擴充發展。在處理隨
時間不斷的變化的光區、權重區域與障礙物時，每
一固定時間間距內取得環境的網格圖，經由每一次
計算出的最佳路徑來決定下一時間點的移動方向
與位置直到抵達終點為止。 
(一)演算法 
演算法的一開始以 2.3 節探照燈光區迴避路
線規演算法為主軸，配合呼叫由 HGMR 修改而來
                                                                             8 
 
(a)                   (b) 
 
(c)                   (d) 
 
(e)                   (f) 
 
(g)                   (h) 
 
(i)                    (j) 
 
(k)                   (l) 
圖十一：越獄路線規劃的場景。(a)起始點為 S，終
點為 D，兩可移動障礙物 a與 b，四塊權重區域，
其權重值以數字標示，其中權重為六的區域可移
動，探照燈的光區由右上角照射，其餘為固定障礙
物。(b)經過權重區域的路徑。(c)閃避可移動權重
區域。(d)與障礙物 a 同步移動躲避光區。(e)~(h)
閃避光區的經過。(i),(j)閃避障礙物 a。(k),(l)路徑
規劃順利到達終點。 
原因在行走於權重為五的區域過於耗費單位時間
成本，而繞過此區。解決權重區域的問題後，在圖
十一(c)離開權重區域繼續往終點前進。在下一階段
為了躲避光區，此時計算的結果是往下方障礙物後
的掩護區移動如圖十一(d)所示。此時圖十一(e)至
圖十一(h)，可移動障礙物 a的經過，將光區遮蔽，
形成出了一塊可通行的區域，此時利用此區塊往終
點前進。障礙物 a移動的過程單一網格機器人必須
閃避，如圖十一(i)、(j)，通過障礙物 a後繼續往終
點前進，完成本次的路徑規劃，如圖十一(k)、(l)。 
四、結論與未來研究 
本文所探討的越獄路線規劃，主要是利用不
同類型的障礙物，與探照燈光區來模擬情境。其中
處理的不只是靜態環境下的路徑規劃，在有包含探
照燈光區的動態環境之下，機器人不只是單純的依
照單一次路徑規劃的結果來行走，而是必須根據障
礙物的移動，在每一次的時間點重新規劃路徑，藉
此躲避各種移動的障礙物。在效能方面，對於處理
不同的地形環境。為了達到動態規劃的目的，與躲
避探照燈光區，所花費時間複雜度為 O(dN+qN)。 
在未來的研究方向，空間環境方面將可朝向
三度空間的發展。在三維空間將會帶來許多額外的
因素影響其動作行為，例如重力、障礙物的攀爬。
在機器人的擬態，可發展成飛行器的行為模式。不
同於在地面上行走的機器人，在三度空間中飛行器
可飛越障礙物與更多不受地面因素影響的各種行
為。探照燈方面可以由固定光源的探照燈改變成移
動式，模擬警衛巡邏的環境，更接近真實情況。 
 
                                                                             10 
 
 2 
 
98 年度專題研究計畫研究成果彙整表 
計畫主持人：詹景裕 計畫編號：98-2221-E-305-002- 
計畫名稱：智慧型越獄問題之研究 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 1 100% 已上傳國科會 
研討會論文 0 1 100% 
篇 本文以投稿於本
年度全國計算機
會議 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 2 50%  
博士生 0 1 50%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 1 100% 
英文稿部分’’
On the prison 
breaker's 
problem’’已投
稿 於 IEEE 
Transactions on 
Systems, Men and 
Cybernetics, 
Part B, 
Cybernetics. 
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 2 50%  
博士生 0 1 50%  
國外 
參與計畫人力 
（外國籍） 
博士後研究員 0 0 100% 
人次 
 
 
