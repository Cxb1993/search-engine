1以變動焦距方式來增加影像解析度及線上檢測
網路攝影機影像品質之方法
計劃編號：NSC-96-2221-E-155-059
執行期限：96 年 8 月 1 日 97 年 7 月 31 日
主持人： 林啟芳 元智大學資訊工程系 教授
計畫參與人員：張揚政、徐士涵、唐峻德 元智大學資訊工程研究所
一、摘要（關鍵詞：超高解析度、動態資料
庫、影像比對、馬可夫網路）
本計畫利用傳統的內插法，將單張的原始
影像縮小，來模擬出較低解析度的影像。接著
再將低解析度影像分解成許多小區塊，並建立
小區塊與原始影像的對應關係。經由這些對應
關係來獲得動態影像資料庫，如此可以解決傳
統比對式超高解析度方法所必須要面對龐大
資料庫問題。此外，本計畫採用了漸進式的放
大流程，配合前述動態影像資料庫的自我成
長，藉此可以獲得更多的檢索資訊，同時漸進
式放大可以減少影像中出現鋸齒與糢糊的缺
點。
二、計畫緣由與目的
在許多的數位影像的技術與應用之
中，畫面的解析度往往決定了其成果的好
壞。例如臉部辨識、監控系統、與醫療診斷
等，都經常因為數位化後的影像解析度不夠
高，而導致錯誤的判斷。所以增加解析度在
影像處理中是個重要的課題。而提高數位影
像解析度的方法，可以透過更換數位攝影機
中的感光元件，或利用演算法運算來獲得更
高採樣率的影像資料，例如內插法，包括最
近鄰居內插法(nearest interpolation)、雙線性
內插法(bilinear interpolation) 、與雙立方內
插法(bicubic interpolation)等都是經常被拿來
使用的演算法。這些軟體放大的方法雖然可
以無限制地提高解析度，但是其產生的影像
卻會隨著解析度的提高，導致影像中出現鋸
齒(blocky effect)與糢糊(blur effect)的效果，
使得影像的品質下降。本計畫使用超高解析
度(super resolution)[1-5]的方法來解決上述
問題。所謂的超高解析度，就是利用演算
法，把低解析度的影像推論出高解析度之影
像。在過去文獻中所提出超高解析度的方
法，大致上可分為兩種方式：（1）集合眾
多低解析度之影像，然後運算出一張較高解
析度之影像；及（2）利用低解析度之影像，
尋找高解析度影像資料庫中，最相似之區
塊，藉此合成出高解析度影像。本計畫針對
比對式的超高解析度，提出了一種動態產生
影像資料庫的方法。其原理便是利用傳統的
內插法，將單張的原始影像縮小，來模擬出
較低解析度的影像。接著再將這張低解析度
影像分解成許多小區塊，並建立小區塊與原
始影像的對應關係。經由這些程序後，就可
以獲得一個動態的影像資料庫，如此一來就
可以解決原始的比對式超高解析度方法所
必須要面對龐大資料庫問題。此外，本論文
還採用了漸進式的放大流程，亦即原始影像
將被用很小的放大倍率，慢慢地增加解析度
到最後的目標。而在這個過程之中，前述的
動態影像資料庫便會慢慢地成長，藉此獲得
更多的檢索資訊。再者，漸進式放大可以減
少影像中出現鋸齒與糢糊的效果。
三、研究方法與結果
(一)方法
本計畫所提出的方法，主要是根據比
對式的超高解析度方法來設計的。而不同
於傳統的比對式超高解析度方法，我們捨
棄了建構龐大的靜態資料庫，並利用內插
3係。其中 i代表資料庫中配對出的低解析
度區塊
iy 與高解析度區塊 ix 的關連強
度。而 ij 則是用來計算相鄰高解析度區塊
ix 的關連程度。
然而因為相鄰節點彼此之間會產生重疊，於
是對每一個查詢出來的高解析度區塊
ix 而
言，重疊區域的相似度也必須納入考量。
因此下列公式便是利用相空間上的關聯
性，來計算出鄰近節點之間的相似程度：
   

 ,,,1| 
i
iii
ij
jiij yxxxZ
yxP  (1)
其中 Z 是一個正規化的常數， i代表著從
資料庫中配對出的
ix 和 iy 的關連強度。而
ij 則是用來計算相鄰節點中高解析度區塊
相似程度的函式：
   .
2
,
exp, 2 


 
jiij
jiij
xxd
xx (2)
上式中 ijd 將已知區塊中產生重疊的像素差
相加總，就可用來測量節點之間的差異
值，而則是一個參數，用來降低雜訊所帶
來的影響。
因此可以得知最佳的 Markov network
解答，便是在讓所有的
ix 在算式(1)中獲得
最大的可能值。但是因為
ix 是交叉影響的，
要取得最佳解答必須付出相當大的計算成
本。所以一個名為 belief-propagation的演算
法[6]，便用來逼近Markov network模型：
     .,, 


ik
iiikkijiijjij yxxmxxxm  (3)
而算式(3)在經歷過數次的運算過後，對所有
的
iy 而言，其對應的 ix 會漸漸達到一個收
斂的狀態。而這個過程之中，對每一個節點
而言，其相似性為：
  .,
k
iiiikiii yxxmxb  (4)
根據以上的公式，便可以在數次運算後，快
速地尋找的近似於最佳解答的高解析度區
塊。
前文我們利用快速的演算法匹配出很
接近最佳解答的高解析度區塊。接著，這些
高解析度區塊會被用來合成出一張超高解
析度的影像。
對於最後要得到的放大影像
^
Z而言，
^
Z
中的每一個像素 ],[
^
nmZ ，都會包含在多個高
解析度區塊 ix 中。因此，在集合這些與
],[
^
nmZ 重疊的區塊後在，就可以利用下面的
這個公式來計算出 ],[
^
nmZ ：
,],[],[],[],[
1
^
],[
^^



 

  

k
i
iiinm nmYnmxnmYnmZ  (5)
其中
^
Y代表放大過後的原始影像， ],[ iii nmx
則是該高解析度區塊中，對應於 ],[
^
nmZ 的像
素。 ],[ nm 是一個權重值，決定了回饋的強
度，而且
knm
1
0 ],[  。在經過這個的步驟
之後，一張超高解析度的影像就會被計算出
來。
在本計畫中，我們只要使用單張影像就
可以快速地計算出一張高解析度影像。而整
個計算過程可以分成兩大部分，其中一部分
是先產生一個動態資料庫，另一部分則是先
將這張影像做一次線性放大後，再分割成許
多 NN 的區塊，接著利用這些區塊匹配出
最適合的對應高解析度影像。如下圖所示：
圖三：將影像切割成區塊，並在資料庫中
檢索出相似的高解析度區塊的範例。(a)原
5References
[1] H. Ur and D. Gross, “Improved 
resolution from subpixel shifted
pictures,” CVGIP: Graphical Models
and Image Processing, vol. 54, pp.
181-186, Mar.1992.
[2] Sina Farsiu, and M. Dirk Robinson,
“Fast and Robust Multiframe Super 
Resolution,” IEEE Trans. Image
Processing, Vol. 13, No. 10, Oct. 2004.
[3] Moshe Ben-Ezra, and Assaf Zomet,
"Video super-resolution using controlled
subpixel detector shifts," IEEE Trans.
Pattern analysis and machine
intelligence, Vol.27, No 6, pp. 977–987,
June. 2005.
[4] Sina Farsiu, and Michael Elad,
"Video-to-video dynamic
super-resolution for grayscale and color
sequences," EURASIP Journal. Applied
signal processing, Article ID 61859, pp.
1-15, 2006.
[5] M. Elad and A. Feuer, “Restoration of a 
single superresolution image from
several blurred, noisy, and undersampled
measured images,” IEEE Trans. Image
Process., Vol. 6, No. 12, pp. 1646–1658,
Dec. 1997.
