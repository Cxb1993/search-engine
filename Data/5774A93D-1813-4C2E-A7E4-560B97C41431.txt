                                    2
摘   要 
本研究主要目的在發展一套多重偵測器資料融合系統，以提供無人地面
載具自主導航控制所需狀態精確資訊。就無人地面載具自主控制而言，定位
準確是無人載具自主導航控制之首要條件。但是一般而言定位精度極易受使
用環境及感測器種類及精度影響。目前整合式導航結合卡曼濾波器理論，為
目前能有效整合多種類型偵測器的方法，並常結合衛星定位系統及慣性量測
單元應用於無人載具的定位。為增加導航精度及可靠性，本研究另考慮結合
電子羅盤、編碼器以及地貌特徵導航法以發展為一多類型偵測器系統，增加
定位精確性及可用性，並用於無人車導航控制。最後將所發展系統實際應用
於實驗載台，以驗證其實用性。 
關鍵字: 多重感測器、資訊融合，卡曼濾波、影像辨識、導航控制 
 
ABSTRACT 
The purpose of this research is to develop a multi sensor fusion system to 
provide the necessary localization informations for autonomous ground vehicle 
navigation. It is the utmost requirement of high precision localization to provide 
reliable autonomous control of unmanned vehicle. However, the performances of 
sensors employed on the vehicle are rather restricted to environment and noise 
attributions. The integrated navigation method, combining the Kalman filter 
theorem, is currently widely used for GPS and INS integration. To further increase 
the precision and reliability quality for navigation, we will development a 
multi-sensor fusion system to provide the precision and availiability of navigation. 
The developped system will futher be implemented on the experiment UGV 
plaform for evaluation. 
Key word: Multisensor, Data fusion, Kalman filter, Image processing, Guidance 
and control
                                    4
料，固不需仰賴外來訊號的修正，所以 INS 具有不受外界干擾之自主特性。
相反全球定位系統就短時間所提供量測值誤差較大，但誤差不會擴大，長時
間來說仍屬可參考定位資訊，可是全球定位系統訊號準確度易受天候及環境
建築物高度影響造成訊號中斷(Outage)[7]。電子羅盤雖可提供準確相對正北及
磁北絕對角度，並提供載具姿態角精確校正，但易受磁場或高壓線圈影響準
確性[8]。在高科技的使用條件下，任何單一的導航系統往往都難以滿足於各
類無人載具的自主導航定位強健需求。 
    目前整合式導航是一種較新的技術，它結合了兩個或兩個以上的導航系
統，結合感測器各自的優勢，以互補並提高整體導航定位之性能。目前一般
常見為 INS 及 GPS 整合導航，在應用上便可將兩套系統結合起來，以發揮其
互補之特性來對地面載具進行定位，相較於僅使用單一系統，除可提高精度，
另一主要特點為可使用成本及準確較低之感測器，同時達成相同精度的高價
感測器[9-14]。 
    但就無人載具地面導航而言，前述感測器之整合導航，仍有可能在多重
感測器失效時無法提供載具之精確定位，特別是在 GPS 長時間無法提供正確
資料時，將造成導航精度的嚴重偏移。因此近年來有所謂地貌特徵導航法
(Tarrain Navigation Mehtods)提出[15-17]，也就是指藉由量測載具與某已知精
確定位點之相對距離及方位，藉以修訂定位精度。一般就使用感測器可區分
為主動式感測器，如雷射測具儀[18-20 ]或微波發射器[21]，提供與特定地標(反
光鏡、標籤站)之距離及方位資訊，但此類方法需事先設立特定地標及設定校
正，另有使用攝影機擷取特定地貌特徵(建築或符號)，並使用影像處理方法如
特徵比對或萃取，再與預先輸入特徵之地貌資料相比對以修正導航資料
[22 ]，這種方法的優點在於不受限特定地標物也無須事先校正，可依導航環
境需求隨時修訂，但本法最大的限制在於影像分析技術及理論發展及標的物
測距的估測方式，因此在發展上仍有改善空間。 
但是當多類型偵測器應用於整合式導航時有兩個主要的問題，首先是選
                                    6
[25]運用RTK-GPS、GDS(Geometric Direction Sensor)及Machine Vision對載具
進行定位及控制，同時其運算法則亦是以卡曼濾波器為主並搭配4種的控制策
略來對載具進行控制，其研究結果顯示載具之側向定位誤差可由20公分修正
至10公分以下之精度。 
Kurth D.等人[26]利用車輪編碼器、陀螺儀作為相對定位之感測器，以及
使用無線電波的信標台作為絕對定位之感測器來對載具進行定位之研究，同
時亦搭配了卡曼濾波器為其估測演算法則，研究結果顯示經過整合後之系統
其定位誤差也減少了甚多。Guo L.等人[27]在發展一農業用牽引機之位置估測
系統時，是選用光纖式慣性導航系統及GPS並搭配卡曼濾波器來進行牽引機
之位置估測，研究結果顯示經過整合後之系統其位置估測與單獨以GPS進行
位置估測兩者在位置上之誤差約相差1公尺，亦即整合後之系統有較佳之估測
能力。最後Roumeliotis S.等人[28]欲發展一定位系統能運用於火星上進行探勘
作業之載具，其所採用之相對定位感測器為車輪編碼器、電位計、陀螺儀而
絕對定位感測器為太陽感測器(Sun Sensor)，由於在外星球缺乏GPS及磁場等
訊號，因此才選用太陽感測器來獲得載具之絕對定位訊號。並同時搭配卡曼
濾波器來進行運算，其研究結果指出太陽感測器在修正相對定位訊號的同
時，若太陽感測器之測量值進入卡曼濾波器之頻率減少時，則估測的正確性
將會大大地降低。另外經過卡曼濾波器運算之後其位置誤差約可從45-55公分
減少至20-30公分。 
  在國內研究部分，有盛中德等人[29]運用超音波感測器及電子羅盤來對自
動導引車於農田作業時進行控制。利用超音波感測器來感測兩旁的植物並進
行路線校正，並加裝電子羅盤測量導引車之車身角度作為控制之參考。其研
究結果顯示在導引車無加裝電子羅盤時其行走路徑之平均誤差為 5.3~17.1 公
分，而加裝電子羅盤之後其行走路徑之平均誤差可降至 4.7 公分之內，但唯獨
當轉彎角度過大時，電子羅盤將無充裕時間可將車體修正回正確的方向。及
陳令錫等人[30]利用電子羅盤、慣性導航系統、編碼器（檢測履帶驅動輪的旋
                                    8
覺伺服控制(Visual Servo Control)概念，Gregory，Hager 等曾對實際的理論與
做法有完整的介紹[34]，主要可分為影像特徵擷取及影像座標與實際座標轉
換。藉由以上概念， Chroust 將其與慣性元件結合作為 3D 攝影機運動姿態估
測[35]，Ma 等將其應用於三輪車的循跡導航[36]。由以上可知各類研究多偏
重於固定類型感測器整合資訊，而有關結合多重定位感測器與地貌特徵導航
資料融合並應用於無人自主車導航研究則不多見。 
在無人車自主導航控制上，目前以國外研究較為廣範[37]，特別在 2005
及 2007 年美國國防部計劃管理署(DARP)舉辦自主式無人載具競賽[38]，其成
果顯示相關車量自主控制已相當成熟，控制方法上以適應性控制及古典 PID
使用較廣泛[39]，至於在國內方面則較缺乏相關整合性研究，目前以足球機器
人研究較為廣泛[40]。 
 
1.3 研究架構 
因此本研究主要目的即是結合擴展卡曼濾波器估測理論，發展一套多類型
偵測器資料融合估測，經過整合導航計算之導航解，即可用於地面載具之定
位，提供無人地面載具自主導航控制所需狀態精確資訊。本研究主要流程為
首先介紹慣性量測單元及定位座標在不同座標系統之轉換方式，而後介紹擴
展式卡曼濾波器理論並發展具四輪前輪轉向車之非線性運動及動力數學模
型。其次分兩階段建立如圖 1 所示之資料融合系統。 
第一階段藉由非線性擴展式卡曼濾波器理論建立 GPS、INS、電子羅盤及
車輪編碼器之訊號融合系統，將絕對及相對定位感測器資料藉由座標轉換全
部轉換至北東下(NED, North East Down)之慣用導航座標系，並由此比較系統
在不同之感測器資料及雜訊特性下之資料準確性，並藉由擴展型卡曼濾波器
建立導航系統在選用不同感測器下之量測數據融合，並將此系統應用於實驗
平台車之位置導航控制，藉由設定 GPS 導航定位點，分析載台定位點至定位
點之導航控制效果。 
                                    10
 
圖 2. 大型無人地面載具 
 
2.1 系統架構 
本系統為四輪傳動設計，下載台為 1.5 米長，1 米寬，並可負重 100 公斤. 
動力輸出為後輪馬達變速驅動並具有斷電時電子煞車，電力為兩顆 12 伏特串
聯之鉛酸電池，最高車速可達每小時 20 公里。系統主要控制器為工業級電腦
(IPC)，以節省空間及增加系統。  
為具有實際監偵能力，上載台為遙控砲塔設計，為了建立三自由度機械臂
視覺伺服定向控制之硬體平台，利用 Intelitek 公司生產的 SCORBOT ER-5+
機械臂為藍本進行修改。並加裝 CCD 及雷射測距儀，傳統視覺伺服定向追蹤
大多使用方位及仰度二自由度之伺服控制，在機構設計分析上較為簡易，但
在控制效能及可調整範圍上相對缺乏彈性。 
 
圖3 自由度機構平台 
                                    12
   
 
圖5 運動控制卡及無線影像模組 
圖 6 所示為 2 維雷射掃瞄器，主要使用目的在提供其正前方 30 公尺內，
正負 90 度方位角之 2 維距離資訊，掃描率為每秒 37 張/秒. 其距離資訊後續
可作為障礙迴避及配合攝影機做路況偵測使用。 
 
 
圖 6. 雷射雷達 圖 7. 無線調節器 
圖 7所示為無線串列調解器(SRM6000.). 使用頻率為 902-928 MHz波段之
跳展頻技術，可確保資料安全及有效之傳輸。傳輸直線距離使用 5db 高增益
天線可達 40 公里。 
圖 8 所示為 6 自由度慣性量測單元(IMU300)，可提供三維 X/Y/Z 軸直線
加速度及三維 roll/pitch/yaw 角速度，圖 9 為 TCM2-50A 精密 3 軸電子羅盤，
同樣可提供相對磁北或正北 roll/pitch/yaw 方位之角度，可作為姿態儀使用。
兩者結合可作為無人載具之導航及定位。 
                                    14
3. 整合導航系統架構介紹 
前述已說明了本研究是利用感測器互補特性來組成一整合導航系統以對
地面載具進行導航定位，如圖 11。以下將對本研究所使用之絕對及相對定位
整合的過程中須考量的問題做一概要說明。 
圖 11. 路面特徵辨識 
 
3.1 導航之基本原理 
3.1.1 GPS之概述及應用 
  GPS是利用接收衛星軌道資料求解出衛星所在位置，再計算出接收機本
身與衛星間的距離，以求得接收器的位置。GPS從1973年代發展至今性能已
相當優異，所以GPS之應用範圍可說是相當廣泛，凡是需要導航或定位的領
域都可以採用GPS。雖然GPS是一種全球性全天候的導航系統，但是在使用上
導航感測器 
1. 位置 
2. 方向 
3. 車身姿態 
載具動態模型 
1. 載具運動模型 
2. 載具動力模型 
載具姿態 
導航規劃(相對及絕對定位) 
1. 點對點位置追蹤 
2. 路徑追隨 
3. 路經追蹤 
4. 碰撞迴避 
定位資訊 運動及動力姿態 
載具運動控制 
1. 開路控制 
2. PID 閉迴路控制 
3. PID 前聵閉迴路控制
4. 適應性控制 
載具速度及轉向 
定位資訊 運動及動力姿態 
                                    16
指的是國際海洋電子協會(National Marine Electronics Association, NMEA)，該
協會提供 GPS 之相關溝通規格。而 GPS 之傳輸格式就是 NMEA-0183 的封包
格式，一般 NMEA-0183 封包格式是以<$>作為開頭，接著是各種封包的訊息
及其所對應之內容，最後再以<CR> <LF>做結尾。本研究所採用之 DGPS 接
收機共有七種輸出格式，各種輸出及相關資料內容如表 1 所示。再者，本研
究係使用 GPVTG 兩種格式，格式圖 13 所示。以獲得地面載具之經度、緯度、
高度、方位角（相對於北方）及速度來作為後續整合導航計算之用。 
表 1 NMEA-0183 輸出格式及資料內容 
輸出格式 資料內容 
GPGGA Position, Altitude, UTC, etc. 
GPZDA Date/Time 
GPGLL Position, UTC, etc. 
GPGSA Position Status 
GPGSV Satellite Details 
GPVTG Course, Speed 
GPRMC UTC, Position, Course, Speed, etc. 
 
 
 
 
 
 
 
圖 13 GPVTG 輸出格式[33] 
3.1.4 GPS 軟體 
  本研究在為 GPS 撰寫軟體時選用的是 LabVIEW 8.0 程式語言，相關程式
如附錄壹。選用之原因是因為 LabVIEW 軟體在與儀器之通訊上較為方便。撰
                                    18
航系統的原因之一。 
  但INS在使用上可以不依賴外部任何訊息，獨立性高以及在惡劣環境下仍
能繼續運作，這些優點使得INS在軍事及民用領域上也越來越重要。 
 
3.2.2 INS 系統架構 
目前應用中的 INS 主要分為兩類：環架平台式及固裝式。下面將分述兩者的
差別[44]： 
  (1)環架平台式：環架平台式的慣性感測元件是安裝在一穩定平台上，利
用平台上陀螺儀輸出的角速度值並透過伺服馬達來穩定平台，使載具
在運動過程中平台仍能與地球表面保持水平，因此加速儀的測量值便
可直接進行積分得到速度和位置。 
  (2)固裝式：固裝式的慣性感測元件是直接裝在載具上，因此其測量值是
沿著載具體軸方向的加速度及角速度，因此在使用前要先經過座標轉
換後才能得到所需要的導航參數。 
   
3.2.3 INS 硬體 
  本研究所使用之 INS 如圖 15 所示，其型號為 IMU300CC，採用的是微機
電(Micro Electro Mechanical Systems, MEMS)的技術發展而成，總共具有 6 個
自由度，內含 3 個加速儀及 3 個陀螺儀，分別可量測 3 個正交軸的加速度及
圍繞此 3 軸旋轉的角速度（旋轉方向以右手定則決定之）。其亦是透過 RS-232
介面與電腦進行連接，操作電壓可從 9V~30V。當此硬體固裝於地面載具上
後，即可獲得沿著載具體軸之加速度值及角速度值。但 INS 之精度會受其內
部感測元件的偏差(Bias)及比例因子(Scale Factor)所影響，因此其誤差會隨著
時間而累積，一般可結合卡曼濾波器估測理論並搭配 GPS 來抑制其誤差。 
 
 
 
                                    20
3.3 座標轉換[45] 
  座標系統在導航系統中扮演非常重要的角色，亦即在進行整合導航之前
必須先進行座標轉換，將GPS之座標系統及INS之座標系統轉至同一座標系統
後始可進行整合導航之工作。以下將簡要的介紹相關之座標系統。 
3.3.1 常用之座標系統 
(1)地心地固座標系(e系) 
      地心地固座標系統(Earth Centered Earth Fixed, ECEF)是固定在地球上
隨著地球旋轉的座標系，此座標為直角座標系統，原點固定在地球球心，其
定義為： 
座標原點：地球球心 
Xe軸：指向地球赤道面與本初子午線之交點 
Ye軸：垂直於Xe軸及Ze軸，由右手定則決定方向 
Ze軸：指向北極 
  而GPS所採用之WGS-84(World Geodetic System)座標系也是屬於地心地
固座標系之一，不同的是其所採用的是橢圓球體來定義。圖17顯示了ECEF與
WGS-84之關係，表2為WGS-84之相關參數。 
 
 
 
 
 
 
 
 
 
圖17ECEF與WGS-84之關係 
 
地球
球心
Xe
Ye
Ze
λ
ϕ
h
P
xe
ye
ze
                                    22
Zb軸：垂直於Xb軸及Yb軸，由右手定則決定方向，指向地面 
由以上之座標可知INS之輸出( xa 、 ya 、 za )分別就是沿著Xb軸、Yb軸、Zb軸方
向之加速度，而( xω ：Roll Rate、 yω ：Pitch Rate、 zω ：Yaw Rate)分別就是繞
著Xb軸、Yb軸、Zb軸旋轉之角速度。 
 
 
 
 
 
圖2.9 載體座標系示意圖 
(3)當地切平面座標系(l系) 
  當地切平面座標系(Local Tangent Plane)可以直接提供載體位置、航向等
資訊，故此座標系常用在導航上。也可稱做導航座標系，其定義為： 
座標原點：載體中心 
Xl軸：指向大地北 
Yl軸：指向大地東 
Zl軸：指向地面，由右手定則決定方向 
此一座標系又可稱為NED座標系(North East Down, NED)。 
 
3.3.2 各座標系統間之轉換 
  以本研究而言，GPS 之測量值是表示在地心地固座標系的橢球座標系
(WGS-84)，而 INS 之測量值則是表示在載體座標系，因此在進行整合導航定
位之前必須先將兩種不同之座標系皆轉至當地切平面座標系中，以利整合導
航定位運算之進行。 
(1)載體座標系轉至當地切平面座標系 
  不同座標系之旋轉可用三次獨立轉動的轉角來確定。這三個獨立的角度
稱為尤拉角，而尤拉角亦表示了載體座標系相對於當地切平面座標系在空間
Xb
Zb
Yb
 圖 18 載 示意圖 
                                    24
座標軸後便需如同INS一般，再轉至當地切平面座標系，其轉換公式如下： 
 
  
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
=
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
e
e
e
le
l
l
l
Z
Y
X
Z
Y
X
2C                                               (9) 
  
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
−−−
−
−−
=
ϕλϕλϕ
λλ
ϕλϕλϕ
sinsincoscoscos
0cossin
cossinsincossin
2leC                          (10) 
  在轉換式(10)的時候有一點需要特別注意的就是，當地面載具由初始點
( 1λ 、 1ϕ 、 1h )走到第二點( 2λ 、 2ϕ 、 2h )的時後，第二點所得之經緯度仍然是需
要先轉至 e 系再轉至 l 系，但在轉換 l 系的過程中要注意式(10)中之λ及ϕ值
要用初始點之( 1λ 、 1ϕ )代入，這樣才能確保第二點也是在對初始點之座標軸進
行轉換，之後的各點以此類推也都是對初始點之( 1λ 、 1ϕ )做轉換。 
3.3.3 載具初始方位角的測定 
  載具在機動中所需的導航訊息為：載具的當前的位置(NE座標)，載具的
運動方向（方位角），載具到達目的地距離和目的地相對於載具之方向。一
般而言，載具的運動方向是用方位角來表示，而方位角指的是在NE座標系中
由北方順時針旋轉到載具行進方向之車身軸線的夾角，如圖19所示。而載具
之初始方位角( 0ψ )可由GPS在載具移動時測出。同時需注意INS在安裝時其軸
線方向應與載具之軸線方向重合，則在經GPS提供初始方位角之後，INS亦可
同時測量出載具之方位角。 
 
 
 
 
 
 
圖19載具方位角關係圖 
載
具
N
0ψ
載具行進方向北方
                                    26
圖20卡曼濾波器的計算流程 
 
  整合導航系統在進行整合運算時最重要的就是要搭配估測法則及載具系
統模型，才能使整合導航系統發揮出較佳之性能，待整合導航系統完成之後，
便可對地面載具進行導航定位，但在進行導航之過程中式必須要配合一套控
制理論才可以使導航之過程能對載具進行較佳之控制。 
4.2 估測理論 
  所謂估測(Estimation)係根據一系列的觀測值或測量值試圖取得這些測量
值關連性、模式或物理行為之方法。許多工程或科學之領域常常採用估測理
論以對訊號之變化、物理之現象來進行分析及預測[48]。在導航定位應用上，
常常得根據一系列之觀測量以決定定位時之相關訊息如位置、速度和時間
等。在許多導航定位應用上，往往所估算之參數或狀態會是時間的變數。更
同時，相鄰兩時刻間之狀態具一定之關係。在此情況下，可採用卡曼濾波器
來進行參數或狀態之估算。 
 
固裝式INS
GPS接收機加速儀、陀螺儀觀測量
積分運算、
座標轉換
座標轉換
時間比對
1、狀態初始條件輸入
2、依據系統數學模型及INS導航解進行狀態之估測
3、計算估測誤差協方差
4、計算卡曼增益
5、藉由加入GPS導航解來更新估測之狀態值
6、更新估測誤差協方差
系統數學模型、
感測器誤差
雜訊特性
GPS導航解INS導航解
整合後之導航解  
                                    28
111 )ˆ(~ −−− +−+≈ kkkkk WwxxAxx ,  
kkkkk VvxxHzz +−+≈ )~(~  
kk Zx , : 實際系統狀態及量測向量 
kk Zx
~,~ : 估測系統狀態及量測向量 
A矩陣為賈科比(Jacobian)矩陣，也就是非線性方程式 f 相對各變數 x 之偏微
分， 
)0,,ˆ( 1
][
][
],[ kk
j
i
ji uxx
f
A −∂
∂=  
W 矩陣為賈科比(Jacobian)矩陣，也就是非線性方程式 f 相對各變數w之偏微
分， 
)0,,ˆ( 1
][
][
],[ kk
j
i
ji uxw
f
W −∂
∂=  
H 矩陣為賈科比(Jacobian)矩陣，也就是非線性方程式 f 相對各變數 h 之偏微
分， 
)0,,ˆ( 1
][
][
],[ kk
j
i
ji uxh
f
H −∂
∂=  
V 矩陣為賈科比(Jacobian)矩陣，也就是非線性方程式 f 相對各變數 v之偏微
分， 
)0,,ˆ( 1
][
][
],[ kk
j
i
ji uxv
f
V −∂
∂=  
4.2.2 卡曼濾波器的估測運算過程 
  首先定義預測誤差及量測誤差 
  kkx xxe k ~~ −≡                                                   (13) 
kkz zze k
~~ −≡                                                      
kkkx xxAe k ε+−≈ −− )ˆ(~ 11  
kxz kk
eHe η+≈ ~~  
kε , kη 為新的獨立隨機變數，且具有平均值E( kε )=0，E( kη )=0統計特性，斜方
                                    30
個時間。而測量值更新方程式主要是依據真實的測量值來調整先前預估的估
測值，例如：加入一個新的測量值到先驗的估測值以獲得改善過的歸納的估
測值( kx~ 及 kp~ )。時間更新方程式可被當成是一種預測器方程式(Predictor 
Equation)，而測量值更新方程式亦可被當成一種修正器方程式(Corrector 
Equation)。確實，估測的演算法則就像是「預測-修正」的演算法則，持續的
進行，如圖21所示。 
 
 
 
 
 
 
圖21持續進行的卡曼濾波器循環 
將式(15)至(16) kx~ 以 −kxˆ 取代可獲得時間更新方程式(預測)如下： 
)0,,ˆ(ˆ 11 −−
− = kkk uxfx ,                                            (17) 
  TkkkTkkkk WQWAPAP 11 −−− +=                                        (18) 
時間更新方程式推估 −kxˆ 及 −kP 從時間k-1到時間k。 
測量值更新方程式(修正)如下： 
1)( −−− += TkkkTkkkTkkk VRVHPHHPK                                   (19) 
 ))0,ˆ((ˆˆ −− −+= kkkkk xhzKxx                                         (20) 
 −−= kkkk PHKIP )(                                               (21) 
測量值更新第一步就是計算卡曼增益 kK ，然後經過測量來獲得 kz ，接著便可
產生歸納的狀態估測值 kx ，最後一步便是藉由式子(21)來獲得歸納的估測誤差
協方差 kP 。 
  圖22即代表了卡曼濾波器的完整操作圖，開始時需先估測一個 kx 及 kP（初
始條件），然後代入時間更新方程式之後，便可持續進行卡曼濾波器的運算，
Time Update
（“Predict” ）
Measurememt Update
（“Correct” ）
 
                                    32
及程序雜訊變異量之關係找出最佳之程序雜訊變異量之值為 0.1。 
Kalman 估測理論中的 Kalman 增益值與系統模式(System Mode)中之程序雜
訊變異量成正比；但與量測雜訊變異量成反比，即 K ∝ Zw /SS 。如果程序雜訊
變異量增加，則 Kalman 增益值將隨頻寬而增加，其暫態追蹤能力較快(佳)，
但相對的其量測雜訊會被放大而導致更多更強的振盪；同樣的，當量測雜訊
變異量變小，亦會導致上述相同結果。 
 
5 地面載具運動學模型推導 
5.1 載具運動分析[50] 
小型無人地面載具的運動方式有幾種數學模型可建構出數學運動方程
式，並可以預測載具的運動及動力模式。 
 
 
 
 
 
 
 
 
 
 
圖 23 載體運動座標示意圖  
系統運動方程式可表示為 
θsinvx =& ， θcosvy =&                                           (22) 
θsin1 lxx += ， θcos1 lyy +=                                        (23) 
θθ cos1 &&& lxx += ， θθ sin1 &&& lyy −=                                      (24) 
假設前輪無滑動，則可獲得限制式如下： 
θπψ −=
2
l
v  
x  
y  
N 
E
θ
),( 11 yx
φ
φ : 轉向角 
θ : 軸向角 
ψ : 正北角 
l  : 前後輪軸長  
                                    34
        
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
ΔΔ
ΔΔ−
ΔΔ
=
10000
01000
)tan()(sec100
cos0sin)(10
sin0cos)(01
1
2
1
1
tltv
ttv
ttv
k
k
k
kk
φφ
θθ
θθ
              (31) 
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
Δ
Δ
=
⎥⎥
⎥⎥
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎢
⎣
⎡
∂
∂
∂
∂
∂
∂
∂
∂
=∂
∂=
t
t
v
f
v
f
v
f
v
f
u
fkB
k
0
0
00
00
00
)(
3
5
2
5
3
1
2
1
MM                              (32) 
假設模型誤差彼此不相關，則可表示為 
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
=
)(0000
0)(000
00)(00
000)(0
0000)(
)(
55
44
33
22
11
kq
kq
kq
kq
kq
kQ                         (33) 
5.2定位變數資料融合 
  應用卡曼濾波器作為不同感測器之資料融合，最重要的關鍵即在於在作
修正流程時，感測器量測值需與估測值在相同之座標系統。因此在程序上需
先確認使用之感測器共可得到哪幾種不同之觀測量。由於整合導航系統在最
後進行導航定位時是在當地切平面座標系(NED座標系)， 
 
 
 
 
 
 
 
 
圖24幾何關係圖 
載具
N
E
aX：是由INS獲
得，積分後可得vx
此值正好可等於
GPS所量得之v
由於載具是簡單之運動學
模型所以ay為0
ψ
此處之 可直接
由GPS量得
ψ
載具行進
方向
ψ
ψ
cos
cos
xn
xn
vv
aa
=
=
ψ
ψ
sin
sin
xe
xe
vv
aa
=
=
                                    36
型(k及k-1表示取離散化後之時段)： 
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
ΔΔ
ΔΔ−
ΔΔ
=
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
−
−
−
−
−
1
1
1
1
1
1
2
1
1
10000
01000
)tan()(sec100
cos0sin)(10
sin0cos)(01
k
k
k
k
k
k
k
k
kk
k
k
k
k
k
v
e
n
tltv
ttv
ttv
v
e
n
φ
ψφφ
θθ
θθ
φ
ψ              (36) 
  由於式(36)中之n, E, Ψ各值是表示在NED座標系，所以式中的值並不是直
接由感測器如GPS或INS的測量值就可以用的，而是要將GPS或INS之測量值
經過座標轉換後才可得到，NE平面上GPS及INS之測量值如下。 
1
1
1
1
1
1
1
2
1
1
10000
01000
)tan()(sec100
cos0sin)(10
sin0cos)(01
−
−
−
−
−
−
+
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
ΔΔ
ΔΔ−
ΔΔ
=
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
k
k
k
k
k
k
k
k
k
kk
k
k
k
k
k
W
v
e
n
tltv
ttv
ttv
v
e
n
φ
ψφφ
θθ
θθ
φ
ψ          (37) 
 
5.3 感測器來源資料融合量測模型 
(1)當選用GPS及INS作為資料融合模型 
  式(37)再加上程序雜訊 kw 即可成為卡曼濾波器中之狀態方程式，而測量
方程式的獲得只需將GPS之測量值同樣轉換成NED座標（同樣只取NE平面），
再加上測量雜訊 kv 即可獲得，如式(38)，當兩個方程式都獲得之後即可進行
卡曼濾波器的估測運算了。 
系統量測矩陣如下 
  k
GPS
k
GPS
k
GPS
k
GPS
k
GPS
k
GPS
k
GPS
k
GPS
k
v
e
n
v
e
n
v+
⎥⎥
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢⎢
⎢
⎣
⎡
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎣
⎡
=
⎥⎥
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢⎢
⎢
⎣
⎡
ψψ
1000
0100
0010
0001
                               (38)  
(2)當選用電子羅盤及編碼器作為資料融合模型 
  測量方程式的獲得只需將電子羅盤測量值同樣轉換成NED座標（同樣只
取NE平面），再加上測量雜訊 kv 即可獲得，如式(39)，當兩個方程式都獲得
                                    38
6. 影像處理與檢測理論[51] 
影像是光強度的函數，其關係式為 ),( yxf 表示，即指在空間座標 ),( yx 的振
幅 f 就是該點影像的光強度。在座標上 ),( yx 的單色影像 f 的強度用該點影像的
灰階值 l來度量，也叫作該點影像的灰階值。 l的範圍為0-255，［0 , 255］灰
階値在我們使用中當 l = 0時為黑色，當 l = 255時為白色。 
 
6.1 影像尖銳化 
影像尖銳化：如果要求增強影像中特徵的邊緣，需採用所謂尖銳化的方法
來進行處理，微分法就是影像尖銳法之一，微分尖銳化的處理方法中最常見
的就是梯度法。 ),( yxf 影像函數的 f∇ 為ㄧ向量，它的表達式為式(41)：  
T
y
yxf
x
yxff ⎥⎦
⎤⎢⎣
⎡
∂
∂
∂
∂=∇ ),(),(                                         (41) 
由梯度的性質，可得知 f∇ 有兩個特點： 
  (1)向量 f∇ 是指向 ),( yxf 最大增加率的方向 
  (2)梯度的模型為
2/122 ),(),(
⎥⎥⎦
⎤
⎢⎢⎣
⎡
⎟⎟⎠
⎞
⎜⎜⎝
⎛
∂
∂+⎟⎠
⎞⎜⎝
⎛
∂
∂=∇
y
yxf
x
yxff  
它等於在梯度 f∇ 的方向上，單位距離 ),( yxf 的變化值。 
在數位影像處理過程中，應將上述算式離散化。最簡單的是離散空間差分
法，它是模擬連續空間微分運算而產生。 
  在影像中的邊緣區塊，必有灰度差存在，因此首先對一階灰度差與二階
灰度差進行定義。一階灰度差可定義為近鄰像素灰度值的差分。例如： 
  計算沿著y軸方向的邊緣，可用下式(42)產生差分輸出 
),1(),(),(),( jifjifjifjig x −−=Δ=                                 (42) 
式中 ),( jig 表示為差分輸出影像 ),( yxg 在 ),( ji 的像素灰度； ),( jifxΔ 表示為影像
),( yxf 中， ),( ji 點上沿x方向的灰度差分。 
  計算沿著x軸方向的邊緣，可用下式(43) 
                                    40
式(50)中： 
);1,1(),(1 ++−=Δ jifjif                                         (49) 
);1,1(),1(2 ++−+=Δ jifjif                                       (50) 
(c)、Laplacian演算法 
  連續空間函數的Laplacian演算法定義為，式(51)： 
2
2
2
2
2 ),(),(
y
yxf
x
yxff ∂
∂+∂
∂=∇                                        (51) 
對於數位影像，Laplacian演算法的離散形式是，式(52)： 
),(),(),( 222 jifjifyxfL yx Δ+Δ=∇=                                  (52) 
x方向與y方向二階灰度差之和，應用二階灰度差的定義，則可以寫成下式(53)： 
)],(4)1,()1,(),1(),1([ jifjifjifjifjifL −−+++−++=                    (53) 
(d)、Sobel演算法 
2/122 )( yx ddS +=                                                 (54) 
式(54)中： 
    −−++−+−−= )]1,1()1,(2)1,1([ jifjifjifd x                             
 )]1,1()1,(2)1,1([ ++++++− jifjifjif                          (55) 
    −+++++−+= )]1,1(),1(2)1,1([ jifjifjifd y                        
        )]1,1(),1(2)1,1([ +−+−+−− jifjifjif                           (56) 
 運用上述四種演算法的計算值，都表示 ),( ji 點的灰度差。影像每點經過
同樣的計算，便把各處的邊緣顯現出來，收到銳化的效果。 
 
6.2 邊緣檢測 
  邊緣偵測是採用某種演算法擷取影像中特徵與背景間的灰階值變化，對
於一個獨立的目標來說，這一交界線是ㄧ閉合曲線，它所包圍的空間即為影
像平面中該特徵所佔據空間。 
 邊緣偵測是影像處理中較為活用的一個部分，並有多種檢測方法，本節
將描述上一章節在工程上運用於邊緣偵測的演算法。 
                                    42
所示： 
 
      xG ：           yG ： 
 
 
來對影像做摺積，這種對 ),( jif 取權值為0的作法，說明在取中心的差分。也
可以取 f 在 °45 、 °135 方向的變化，其方程式為(式60)： 
⎩⎨
⎧
+−+=Δ
−++=Δ
),1()1,(),(
),()1,1(),(
jifjifjif
jifjifjif
β
α                                    (60) 
式中α 表示為 °45 的方向、 β 表示為 °135 的方向 
上式用核心(kernel)表示是： 
 
     xG ：          yG ： 
 
對影像做摺積，這也就是Roberts演算法。 
  爲了找梯度訊息，Laplacian演算法也是常用的一種方法。Laplacian是一
個二階差分運算，其式如(61)： 
2
2
2
2
2 ),(
y
f
x
fyxf ∂
∂+∂
∂=∇                                           (61) 
對數位影像，對於x方向來說， ),( jif 兩側的兩個ㄧ次差分各為： 
),1( jif + － ),( jif 、 ),( jif － ),1( jif − 因此， ),( jif 的二階差分為： 
)],1(),([),(),1(),(2),(2
2
jifjifjifjifjif
x
f
xji −−−−+=Δ=∂
∂             
),(2),1(),1( jifjifjif −−++=                              (62) 
同理可得 
),(2)1,()1,(),(2),(2
2
yxfjifjifjif
y
f
yji −−++=Δ=∂
∂                        (63) 
因此Laplacian演算法為： 
-1 0 1 
-1 
0 
1 
1 0 
0 -1 
0 -1 
1 0 
                                    44
(6) 濾波器：濾波器之功能，可改進二值化後之影像，去除雜訊，平滑化、
尖銳化等影像變換。 
(7) 二值化影像反轉：使二值化的兩個顏色正反對調。 
(8) 質心分析：計算出質心點，(X,Y)座標並輸出參考點進行控制。 
 
6.5 影像分析整合導航模型 
由前節所獲得系統之考慮用一矩陣方程式來描述一離散時間動態系統，其狀
態方程式為： 
),,( 111 −−−= kkkk wuxfx ,  nx ℜ∈                                     (69) 
測量方程式為： 
  ),( kkk vxhz = ,   mz ℜ∈                                        (70) 
考慮系統無雜訊系統 
)0,,ˆ(~ 11 −−= kkk uxfx ,  nx ℜ∈  , kxˆ : posteriori 狀態估測     
)0,(~ kk xhz = ,   mz ℜ∈      
E( kx )= kxˆ ,    
非線性方程式(69)(70)可再經由線性化簡化為 
111 )ˆ(~ −−− +−+≈ kkkkk WwxxAxx ,  
kkkkk VvxxHzz +−+≈ )~(~  
kk zx , : 實際系統狀態及量測向量 
kk zx ~,~ : 估測系統狀態及量測向量 
⎥⎥
⎥⎥
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎢
⎣
⎡
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
∂
=∂
∂=
=
k
k
vvk
v
fff
y
f
x
f
v
fff
y
f
x
f
v
fkA
k
1
55555
1
11111
)(
φθ
φθ
MMMMM ，
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
=
1v
y
x
x
φ
θ           (71) 
                                    46
6.6 影像分析實驗設置 
本部份實驗部份將運用上載台變焦鏡頭作為與特定地標物相對距離估
測，架構如下圖所示。特定地標物可平置於載具自主導航時可能經過之地面，
或者吊掛於附近路邊標示牌。當CCD擷取影像後經過質心分析後，可得到目
標物的質心位置，利用調整距焦位置獲得目標影像最為清楚時之像距值，並
計算與目標物之相對距離。  
 
圖26 CCD攝影機位置及視角範圍 
目標物之影像處理流程如圖27所示，全部程式將以NI公司LabVIEW開
發，以期減化系統開發時之複雜性。[52] 
 
圖 27. 影像分析架構圖 
 
 
 
 
                                    48
出雜訊為高斯分佈，並使用 LabVIEW 工具計算陀螺儀及加速規的輸出雜訊的
標準差。量測結果如表 3、表 4。  
表3、 三軸陀螺儀及加速規靜態量測資料 
 
 
表4 三軸陀螺儀及加速規靜態量測資料 
 
 
依據卡曼濾波器工作流程進行計算，由於載具開始時為靜止狀態，故以
加速規量測之姿態角為系統姿態初始值。並對載具姿態進行估測。實驗結果
載具俯仰角為圖 29、載具滾轉角如圖 30。紅色資料為加速規推測載具姿態輸
出，綠色資料為與陀螺儀經過 Kalman Filter 資料融合後輸出。在圖中可以看
到當加速規受到外力影響時，其角度偏差量可以到達 20 度以上。但實際上載
具是水平狀態，透過 Kalman Filter 進行資料融合時，則可以將外力影響降低
以獲得較正確的姿態輸出。  
 
                                    50
礙之用。其設置場地示意圖如圖 31：  
 
圖31 載具自主導航場地及導航點設定示意圖 
 
導航點座標如下表 
表5 導航點座標 
 
在實驗中，導航點 0 設定為 NED 座標原點，其導航點座標轉換至 NED
座標為下表 
表 6 座標之導航點設定（單位：m） 
 
 
                                    52
參考文獻 
[1] 楊獻東，自動飛行控制原理與實務，全華，臺北，第1-8 - 7-25頁，2002。 
[2] Hugn, D. W. “A critical Review of the State-of-the-Art in autonomous land 
vehicles system and technology,” Sandia National Laboratories. 2001. 
[3] M. Montemerlo, S. Strohband, “Winning the DARPA Grand Challenge with an 
AI Robot,” Journal of Field Robotics, 2005. 
[4] R. Grabowski, et. al Mitre Metero, “An Off-Road Autonomous Vehicle for 
DARPA's Grand Challenge ” Journal of Field Robotics, 2005. 
[5] Kornhauser,L., Collins,B., Franken,G. et al. “Princeton Uninversity Entry in 
the 2005 DARPA Grand Challenge,” Journal of Field Robotics, 2005. 
[6] Cremeam,L. B., Foote,T. B. et al, “Alice: An Information Rich Autonomous 
Vehicle for High Speed Desert Navigation.” Journal of Field Robotics, 2005. 
[7] BALAZADEGAN, Y., HOSSEINI, S., RAJABI, M., “GPS/INS Integration 
Using Kalman Filtering for Navigation,” University of Tehran, Iran, p. 1, 
2006. 
[8] Abbott, E., Powell, D.”Land-Vehicle Navigation Using GPS,”, Proceedings of 
The IEEE,” Vol. 87, No. 1, 1999.  
[9] G. Podnar, K. Dowling, M. Blackwell, “A Functional Vehicle for Autonomous 
Mobile Robot Research,” CMU-RI-TR-84-28, Robotics Institute, Carnegie 
Mellon University, November, pp.1-13 1984. 
[10]L. Pedersen, “Robotic Rock Classification and Autonomous Exploration,” 
Robotics Institute, Carnegie Mellon University, November, pp6-11 2000. 
[11]K. Dowing, R. Guzikowskl, J. Ladd, et. al. NAVLAB: “Autonomous 
Navigation Testbed,” Tech. Report CMU-RI-TR-87-24, Robotics Institute, 
Carnegie Mellon University, November, 1987. 
[12]L. Lin, T. Mitchell, A. Phllips, R. Simmons, “A Case Study in Robot 
Exploration,” Tech. Report CMU-RI-TR-89-1, Robotics Institute, Carnegie 
Mellon University, 1989. 
[13]B. Barshan , W. Durrant, “Inertial Navigation Systems for Mobile Robots,” 
                                    54
Control of Farm and Construction Vehicles,” Standford University, U.S.A, 
1995. 
[25]Noguchi, N., Reid, J. F., Will, J., Benson, E. R., “VEHICLE AUTOMATION 
SYSTEM BASED ON MULTI-SENSOR INTEGRATION,” An ASAE 
Meeting Presentation, U.S.A, Paper No.983111. 
[26]Kurth, D., “Range-Only Robot Localization and SLAM with Radio,” Carnegie 
Mellon University, U.S.A, CMU-RI-TR-04-29, 2004. 
[27]Guo, L., He, Y., Zhang, Q., Han, S., “Real-Time Tractor Position Estimation 
System Using a Kalman Filter,” Transactions of the CASE, Vol. 18, No. 5, 
2002. 
[28] Roumeliotis, S. I., Bekey, G. A., “An Extended Kalman Filter for frequent 
local and infrequent global sensor data fusion,” University of Southern 
California, Los Angeles, CA 90089-0781. 
[29] 盛中德、莊士良、李春壽，“方位感測器於農用履帶車導引之應用”，農
業機械學刊，第八卷，第一期，第39-48頁，1999。 
[30] 陳令錫、林聖泉，“方位感測器於農用履帶車導引之應用”，臺中區農業
改良場研究彙報，第七十三期，第31-41頁，2001。 
[31] 陳鐿仁，“全球定位系統輔助六加速儀式慣性導航系統技術之研究”，碩
士論文，中正理工學院，桃園，1995。 
[32] 趙益生，“基於二維微機電慣性元件定位系統之初步研究”，碩士論文，
國立成功大學，臺南，2004。 
[33] 何慶雄，“全球定位及慣性導航系統”，成功大學航太系，臺南，2004。 
[34] Hager, G. D., Corke, P. I.,”A Tutorial on Visal Servo Control,” IEEE 
Transactions on Robotic and Automation, Vol. 12, No. 5, 1996. 
[35]Chroust, S. G., Vince, M., “Fusion of Vision and Inertial Data for Motion and 
Structure Estimation,” Journal of Robotic Systems, Vol 21, No. 2, p73-p83, 
2004. 
[36]Ma, Y., Kosecha, J. et al., “Vision Guided Navigation for a Nonholonomic 
