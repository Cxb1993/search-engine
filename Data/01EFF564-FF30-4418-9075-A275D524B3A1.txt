 1 
一、前言 
With the rapid advance of wireless networking technologies, end-host networking devices 
have been equipped with various network interfaces. Thus, it becomes possible for a wireless 
mobile host to improve its transmission efficiency by transmitting data through multiple network 
interfaces at the same time. In this project, we focus on the mobility issues of SCTP multi-path 
transmission. M2-SCTP (Mobile Multipath - Stream Control Transmission Protocol) is proposed 
to allow a host to perform (multi-)path handover when multi-path transmission is adopted in 
wireless mobile networks. Relevant mobility issues of M2-SCTP are also investigated. We define 
three conditions under which the M2- SCTP host can select the paths for multi-path data 
transmission. Since the paths used in M2-SCTP may differ at each time paths are re-selected, the 
path handover problem must be tackled. Three concerns related to path handover that are 
addressed and resolved in this project include (1) spurious retransmissions due to failed SACK 
(Selective Acknowledgement) transmission at the old path, (2) retransmissions of data lost before 
path handover and unnecessary CWND (Congestion Window) reductions, and (3) the reordering 
problem due to path handover. Based on the mechanisms devised to solve the path handover 
problem, the M2-SCTP multi-path handover mechanism is also devised. Finally, a scheme that 
adopts the DDNS (Dynamic DNS) technique is proposed to resolve the locating issue of an 
M2-SCTP host.  
 
二、研究目的 
In this project, we focus on the mobility issues of SCTP when multi-path transmission is 
adopted in wireless mobile networks. M2-SCTP (Mobile Multipath - Stream Control 
Transmission Protocol), which allows an SCTP host to achieve multi-path transmission and 
(multi-)path handover in wireless mobile networks, is proposed. Three mobility issues related to 
M2-SCTP, i.e., (i) path selection conditions, (ii) handover management, and (iii) location 
management, are investigated. An M2-SCTP host can concurrently transmit new data across 
multiple paths to its M2-SCTP peer host. When an M2-SCTP host moves in wireless mobile 
networks, the accessible wireless networks may change. The M2-SCTP host should be able to 
(re)select the paths used for transmitting data to its M2-SCTP peer host. Consequently, the paths 
used by a multihomed M2-SCTP host may be changed at each time it reselects paths. Thus, a path 
handover mechanism for M2-SCTP is exploited for resolving the problem. As for the handover 
management issue of M2-SCTP, three concerns that are caused by path handover are (1) the 
spurious retransmissions due to failed SACK transmission at the old path, (2) the retransmissions 
of data lost before path handover and unnecessary CWND (Congestion Window) reductions, and 
(3) the reordering problem due to path handover. For concern (1), when path handover occurs, 
spurious retransmissions are caused when the SACKs (Selective Acknowledgement) transmitted 
through the old path are lost. The unnecessary retransmission traffic and CWND reduction should 
be prevented. For concern (2), retransmissions of the data that are lost at the old path before path 
handover are very likely to be failed again if the retransmissions are transmitted through the same 
 3 
idea of [9] is to separate the association flow control from the congestion control. LS-SCTP uses 
a new “ASN (Association Sequence Number)” along with PSN, the path assignment module, and 
the path monitoring mechanism to transmit data through multiple paths. Westwood SCTP is 
proposed in [10]. The authors propose a bandwidth-aware source scheduling mechanism to avoid 
out-of-sequence delivery when using SCTP to do load balancing over multiple paths. In [11], two 
transmission modes using SCTP, i.e., single-path transmission mode and multi-path transmission 
mode are proposed for a mobile host. The main idea of [11] is to transmit the same data through 
multiple paths to achieve end-to-end seamless handover. On the other hand, only one path is used 
for transmission in normal condition in order to save the wireless network bandwidth. An 
algorithm based on transmission error counting is also proposed to enable a mobile host to switch 
between the two transmission modes. 
 In summary, the base SCTP and mSCTP only use one primary path to transmit new data, 
whereas SCTP CMT and M2-SCTP can transmit new data through more than one primary paths. 
Base SCTP has very limited support for mobility. In base SCTP, an association cannot 
dynamically add, delete, and change paths in runtime, whereas mSCTP uses the ADDIP 
extension to handle it. mSCTP defines a handover procedure. However, it does not consider the 
path handover issues, which is to be discussed and resolved in this project. Most of the SCTP 
CMT-relevant works put emphasis on improving transmission throughput and do not mention the 
mobility issues, i.e., the path handover and location management issues covered in M2-SCTP.  
  
四、研究方法 
 In this Section, we first introduce the functional scenario of our proposed work. The related 
issues, mechanisms, and algorithms used to achieve our goal are then depicted in detail. 
 
4.1 Functional Scenario 
Figure 1 illustrates the functional scenario of M2-SCTP, in which (i) an M2-SCTP MN 
(Mobile Node) is assumed to be equipped with a 3G/UMTS cellular network interface and a 
WLAN network interface and (ii) Router-1 and Router-2 belong to different service providers. 
Before the host enters into the coverage of AP-1’s WLAN, the multihomed host communicates 
with the server using the 3G/UMTS cellular network, which can be regarded as the primary path 
of the association established between the multihomed host and the server. When the multihomed 
host is entering into the coverage of AP-1’s WLAN, it can automatically configure its address 
when receiving the Router Advertisement (RA) broadcasted by Router-1 via AP-1 or using 
DHCP (Dynamic Host Configuration Protocol). After the address is successfully configured, the 
corresponding IP address is added into the SCTP association using SCTP ADDIP Extension’s 
ASCONF chunk. Therefore, including the transmission path over the 3G/UMTS cellular network, 
there are two transmission paths within the SCTP association. However, the base SCTP uses one 
primary path to transmit new data, while an alternate path (if it exists) can only be used as the 
path for retransmission. Thus the resource aggregated by the multihomed feature over the 
wireless networks cannot be fully utilized when adopting the base SCTP.  
 5 
laptop does not care the power consuming issue and wants to utilize all wireless network 
interfaces on the laptop, it means that two of the three 802.11b/g wireless network ARs and one 
of the two 3G/UMTS cellular network BSs should be chosen as transmission paths of M2-SCTP. 
Thus, a mechanism is needed for the selection of accessible wireless networks. It is worthy noting 
that the scenario given above lays stress on the multihoming at the mobile node’s (MN) side. It is 
possible that the corresponding node (CN) is also multihomed.  
When the total number of available transmission paths is larger than the number of 
paths/network interfaces that needs to be used in M2-SCTP, a path selection mechanism is needed 
to select which paths should be used. The path selection mechanism can be triggered in the 
following conditions: 
1) Association initiation: the initial setup of an association in a multihomed host to start the data 
transmission. 
2) New path added: a new path is discovered as available and added into the association. 
3) Path inactive (failover): a path that is used by M2-SCTP is determined as “inactive” by the 
association. 
In condition “association initiation”, when the multihomed host is going to setup an 
association, the multihomed host connects to its peer endpoint using one of its available addresses. 
Then the multihomed host exchanges the information of all available IP addresses with its peer 
endpoint in initialization. When the initialization is complete, M2-SCTP triggers the path 
selection mechanism to select the paths to use for the following transmission. Condition “new 
path added” occurs when the multihomed host moves and discovers a new AP/AR of a different 
domain that is accessible. Therefore, the multihomed host can obtain a new address via DHCP or 
IPv6 address auto-configuration [12] and add the new transmission path into the association. In 
order to aggressively improve transmission throughput, the path selection mechanism can be 
triggered to determine whether the newly added transmission path is better than the one/ones that 
is/are currently used. Condition “path inactive” occurs when one of the transmission paths that is 
used in M2-SCTP repeatedly fails in transmitting data and determined as “inactive” by the 
association. Thus, M2-SCTP triggers the path selection mechanism to select another transmission 
path to replace the failed one.  
 
4.3 Architecture of M2-SCTP 
According to the aforementioned functional scenario and the path selection conditions 
mentioned before, some modifications are made on base SCTP to support the capabilities, i.e., 
mobile multi-path transmission and path selection, of M2-SCTP. Figure 2 depicts the architecture 
of M2-SCTP. Modifications made on base SCTP are (1) a data dispatcher at the sender, (2) a path 
selector at the sender, and (3) virtual buffers at both the sender and the receiver. The 
data dispatcher at the sender is responsible for the assignments of striped data that are to be 
transmitted to the paths selected by the path selector in an M2-SCTP association. As it is defined 
in RFC2960 [1], CWND (Congestion Window), SSTHRESH (Slow-start Threshold), and RTO 
(Retransmission Timeout) of M2-SCTP are maintained on a per-destination address basis. The 
data that are to be transmitted through a specific path will be assigned to the virtual buffer of the 
 7 
path-2 new path-2, ...]” to denote the relationship between path handover pairs. For example, in 
the previously given example, the path handover pair can be “PHP = [path-1 path-3, path-2 
path-4]”, or “PHP = [path-1  path-4, path-2  path-3]”. “PHP = [path-1  path-3, path-2  
path-4]” denotes that after the multi-path handover, path-3 will replace path-1 and path-2 will 
replace path-4 to transmit data. In M2-SCTP, each path is represented with a source-destination 
address pair. Thus one clearer example for the multi-path handover relationship can be “PHP = 
[(addr s1, addr d1)  (addr s3, addr d3), (addr s2, addr d2)  (addr s4, addr d4)]”. 
 
Figure 3. (a) Multi-path transmission before path handover; (b) path handover between path-2 
and path-3. 
 
B. Issues Related to Path Handover 
Main issues related to multi-path handover are (1) spurious retransmission problem due to 
failed SACKs at the old path, (2) retransmissions of the lost data before path handover, and (3) 
the reordering problem after path handover, which are depicted as follows. 
1) Spurious Retransmissions due to Failed SACK Transmission at the Old Path: Figure 4-(a) 
illustrates an example of PHP = [(ip0, ip1)  (ip0, ip2)], in which the IP address “ip0” belongs to 
CN (Corresponding Node) while “ip1” and “ip2” belong to the MN (Mobile Node). (For the 
convenience of explanation, we assume that each packet carries one data chunk in the following 
illustrated examples.) Before path handover occurs at the sender, a packet (tsn1) is transmitted 
through the path (ip0, ip1) and not yet acknowledged when the path handover between (ip0, ip1) 
and (ip0, ip2) occurs. According to RFC2960, which states “An endpoint SHOULD transmit 
reply chunks (e.g., SACK, HEARTBEAT ACK, etc.) to the same destination transport address 
from which it received the DATA or control chunk to which it is replying.” and “When its peer is 
multi-homed, the SCTP endpoint SHOULD always try to send the SACK to the same destination 
address from which the last DATA chunk was received.”, CN should transmit the SACK for tsn1 
to ip1, that is, through the old path. However, after sender’s path handover, SACKs may not be 
transmitted through the old path successfully due to two reasons, i.e., (a) the network interface is 
bound to the new path after path handover (currently most of the 802.11 NICs cannot connect to 
two Access Points to transmit data at the same time), and (b) the status of the old path may 
 9 
handover. 
 
 
Figure 5. Path handover occurs at the receiver: (a) SACK transmission failure at the old path after 
path handover; (b) M2-SCTP: SACK transmitted from a new source address after path handover. 
 
2) Retransmissions of Data Lost Before Path Handover and Unnecessary CWND 
Reductions: Figure 6-(a) illustrates another example of PHP = [(ip0, ip1)  (ip0, ip2)]. Notation 
“sackX(Y-Z)” denotes that a SACK with a cumulative acknowledgement of X indicates a gap 
beginning at tsnY and ending at tsnZ. Let the packet (tsn1) be originally transmitted through the 
old path and be lost, and then a path handover occur at the receiver. Then, the CN starts to 
transmit further data (tsn2, tsn3, ...) through the new path. When the retransmission timer expires 
without receiving the SACK for tsn1, tsn1 should be retransmitted. After path handover, due to 
the same two reasons depicted before, i.e., (a) the network interface is bound to the new path after 
path handover and (b) the status of the old path may become too bad to transmit data, the data 
that were lost before the path handover may not be retransmitted successfully through the same 
(old) path.  
In [12], the authors investigate the performance of different retransmission policies for their 
proposed CMT SCTP. The retransmission policies include “RTX-SAME” (retransmissions are 
sent to the same destination), “RTX-ASAP” (a retransmission is sent to any destination for which 
the sender has CWND space available at the time the retransmission needs to be sent), 
“RTX-CWND” (a retransmission is sent to the destination for which the sender has the largest 
CWND), “RTX-SSTHRESH” (a retransmission is sent to the destination for which the sender has 
the largest SSTHRESH), and “RTX-LOSSRATE” (a retransmission is sent to the destination 
with the lowest loss rate path). For the conclusion of their simulation results, “RTX-SAME” is 
also not the recommended retransmission policy for their CMT SCTP. The authors recommend 
the “RTX-SSTHRESH” retransmission policy for CMT.  
In our design, RTO-triggering retransmissions for the packets that are transmitted through 
the old paths before path handover are sent through new paths after path handover. We also adopt 
the conclusion of [12]. The “RTX-SSTHRESH” policy is used to select one from the new paths 
for the retransmissions after path handover. Figure 6-(b) depicts the retransmission sent through 
the new path destination ip-2 after path handover (assuming it has the largest SSTHRESH).  
Figure 7 illustrates an example similar to Figure 6. The difference is that the path handover 
 11 
 
3) The Reordering Problem After Path Handover: One essential idea of M2-SCTP is to 
replace the congested/high-delay path with the path that has better transmission efficiency. Thus, 
the data that are transmitted through the old path before path handover may arrive at the receiver 
later than the data that are transmitted through the new path after path handover, which causes the 
reordering problem. The reordering problem then causes further negative side effect, e.g., 
unnecessary fast retransmissions at the sender due to the 4-SACK rule.  
Figure 8-(a) illustrates an example in which three packets (tsn1, tsn2, and tsn3) are 
transmitted from MN to CN through a seriously congested path (ip0, ip1) before the path 
handover PHP = [(ip0, ip1) ! (ip0, ip2)] occurs. After the path handover, the MN transmits further 
packets (tsn4 and tsn5) through the new path (ip0, ip2), of which the status is much better than 
the old path (ip0, ip1). Therefore, packets carrying tsn4 and tsn5 arrived at CN sooner than 
packets carrying tsn1, tsn2, and tsn3 did, which will cause the reordering problem. Four 
consecutive SACKs sent by MN to report the GAP information will then cause MN to fast 
retransmit the three tsns (tsn1, tsn2, and tsn3) immediately and also reduce the CWND as a result. 
However, since the gaps are resulted from the transmission through the old path before the path 
handover, the GAP report should not cause the reduction to the CWND of the new path. In 
M2-SCTP, the missing report count updating mechanism is modified to prevent the unnecessary 
CWND reductions that may possibly be caused by the reordering problem induced by path 
handover.  
Figure 8-(b) illustrates an example similar to Figure 8-(a). The difference is that the path 
handover occurs at the receiver in Figure 8-(b). Since the resulted problem and the solution are 
similar to that of the path handover at the sender, the explanation is not repeated here.  
 
Path 
Handover
CN(ip0)MN(ip1) MN(ip2)
tsn1
tsn2
sack0(4-7)
.
.
sack0(4-4)
tsn3
tsn4
.
tsn7 4-SACK
rule
tsn1 (rtx)
tsn2 (rtx)
tsn3 (rtx)
(a) (b)
Path 
Handover
CN(ip0)MN(ip1) MN(ip2)
tsn1
tsn2
sack0(4-7)
.
.
sack0(4-4)
tsn3
tsn4
.
tsn74-SACK
rule
tsn1 (rtx)
tsn2 (rtx)
tsn3 (rtx)
 
Figure 8. The reordering problem caused by path handover when: (a) path handover occurs at the 
sender. (b) path handover occurs at the receiver. 
 
C. New ASCONF Chunk and Algorithms for Resolving Issues 
On the basis of the aforementioned issues and design, some modifications must be made to 
SCTP to solve the problems and support the new features of M2-SCTP. When path handover 
occurs at MN, MN must inform its CN of the relationship of the path handover pair because of 
 13
tsns are transmitted before path handover and yet not acknowledged when path handover occurs, 
and (b) modified CWND updating and missing report count updating algorithms, are needed. 
Figure 10 depicts the modified algorithms used in M2-SCTP. In part (1) of Figure 10, the sender 
marks all outstanding tsns using the additional variable “ph_outstanding” defined by M2-SCTP 
when it receives a Path Handover ASCONF/ASCONF-ACK chunk. Part (2) of Figure 10 depicts 
the modified CWND updating algorithm used by M2-SCTP to avoid unfair growth of CWND 
when receiving a SACK. Variable “num_acked_tsn” is used to calculate the amount of tsns that 
are transmitted to a specific destination and acknowledged by the current SACK. Variable 
“num_pho_tsn” is used to calculate how many of the outstanding tsns, which are transmitted to a 
specific destination before path handover occurs, are acknowledged by the the current SACK. 
Then, since there are num_pho_tsn tsns transmitted successfully through the old path of which 
the acknowledgements should not be used to credit the growth of CWND, the sender should 
increment CWND with either “num_acked_tsn – num_pho_tsn” or path MTU, whichever is less. 
Part (3) of Figure 10 modifies the actions taken by M2-SCTP when the retransmission timer 
expires. When the retransmission timer expires, prior to applying the rules stated in RFC2960, 
M2-SCTP checks whether all of the outstanding tsns are transmitted before path handover occurs 
or not. Then a new variable “ph rto” is used to label whether the retransmission timer expiration 
is “exactly” caused by the earliest tsns that are transmitted through the old path before path 
handover occurs or not. If “ph rto” is TRUE, only retransmissions of the outstanding tsns are 
done; other rules stated in RFC2960 to handle RTO are skipped. On the other hand, if “ph_rto” is 
FALSE, it means (ano)other tsn(s) is/are missing at the new path after path handover occurs. 
All the rules stated in RFC2960 will be applied. Part (4) of Figure 10 tackles the missing report 
count updating of M2-SCTP. When the sender receives a SACK containing GAP reports, it 
checks each tsn that is reported as missing to see if the tsn was transmitted through the old path 
before path handover occurs, and then decides whether to increment the missing report for the tsn 
or not. In this way, possibly unnecessary fast retransmissions and consequently unnecessary 
CWND reductions can thus be avoided.  
 
 
Figure 9. “Path Handover” ASCONF chunk 
 
 15
into the M2-SCTP association. 
3) The M2-SCTP host triggers the path selection mechanism to select new paths for transmission. 
4) The M2-SCTP host sends the modified ASCONF chunks to its peer host, and receives the 
ASCONF-ACKs from its peer host. 
5) For each path handover pair, the path handover mechanism of M2-SCTP along with our 
proposed algorithms are executed between the sender and receiver. 
6) The M2-SCTP host deletes the old path(s) from the association if it (they) is (are) determined 
as inactive by the association. 
The multi-path handover procedure for condition “Path inactive” is as follows. 
1) The M2-SCTP association determines one or more specific path(s) as inactive. 
2) The M2-SCTP host triggers the path selection mechanism to select new paths for transmission. 
3) The M2-SCTP host sends the modified ASCONF chunks to its peer host, and receives the 
ASCONF-ACKs from its peer host. 
4) For each path handover pair, the path handover mechanism of M2-SCTP along with our 
proposed algorithms are executed between the sender and receiver. 
5) The M2-SCTP host deletes the old path(s) that is(are) determined as inactive from the 
association. 
 
4.5 Location Management 
The other main issue of IP mobility is location management. Since SCTP was not originally 
designed for mobile use, a location management scheme is needed for a host to locate the peer 
host that it wants to set up an association with. However, unlike Mobile IP, since the ADDIP 
Extension of SCTP allows an SCTP host to dynamically add, delete, and set a new primary path 
without terminating the ongoing association, and use the ASCONF chunks to notify the remote 
endpoint, SCTP does not need its location management scheme to provide binding update 
mechanisms. SCTP only needs the location management scheme to provide the locating service 
on SCTP association initiation. In this Section, a location management scheme that adopts the 
DDNS (Dynamic DNS) technique is designed for the proposed M2-SCTP. DDNS is a service that 
maps Internet domain names to IP addresses. DDNS serves a similar purpose to DNS: DDNS 
allows a host to advertise a public name to prospective users. Unlike DNS that only works with 
static IP addresses, DDNS works with dynamic IP addresses, such as those assigned by an ISP or 
other DHCP servers. For the following reasons, we select DDNS as the location 
management scheme for the proposed M2-SCTP. 
 DNS is a popular technique. It is straight-forward for a host to initialize its connection by 
sending a domain name query to locate its peer host. 
 Similar to DNS, multiple addresses can be mapped to a single domain name. Thus DDNS 
can handle the location information of a multihomed host without introducing extra 
identifier for the host. 
 DDNS is a matured, simple, and easy-to-deploy method. 
DDNS is only used to locate the peer host on association initialization because after the 
association is setup, M2-SCTP itself can manipulate the addition, deletion, and change of the used 
 17
cellular network interface, is assumed to be in the coverage of two 802.11b WLANs and an 
UMTS cellular network. Referring to Figure 11, at the beginning, MN is within the coverage of 
AR-1’s 802.11b WLAN and the UMTS cellular network. MN establishes an association with CN 
and moves towards to AR-2’s 802.11b WLAN. MN then enters the intersected area covered by 
AR-1’s and AR-2’s WLANs. In the intersected area, MN adds a new path, i.e., the path through 
AR-2, into the association and then performs path handover between the old path that is through 
AR-1, and the new path that is through AP-2. After path handover, MN keeps moving and leaves 
the intersected area to AR-2’s WLAN.  
The experiments for the simulation scenario described above is based on Network 
Simulation version 2 (NS-2) [13] with the SCTP module [14] developed by University of 
Delaware. The SCTP module is modified to implement M2-SCTP and our proposed algorithms. 
The Path Handover ASCONF chunk introduced is also implemented to enable the path handover 
messaging between MN and CN.  
The settings of the simulation experiments are as follows. The NS-2 IEEE802.11 WLAN 
model is used to support the MAC layer. The bandwidths are set to be 384 kbps for the 
3G/UMTS link and 11 Mbps for the WLANs. The delay of both 802.11b WLANs is 15ms and 
the delay between AR-1 and CN is 15ms. The delay between AR-2 and CN is changed from 
20ms to 80ms for each round of the experiments for performance comparisons. The time line of 
the simulation is as follows. For the initial 15 seconds, MN is within the coverage of AR-1’s 
WLAN; for the following 30 seconds, MN is within the intersected area; for the last 15 seconds 
of the simulation, MN is within the coverage of AR-2’s WLAN. The path handover is triggered at 
the 30th second of the simulation. In the intersection area, according to the moving direction of 
MN, the loss rate of AR-1’s WLAN increases linearly (from 0% to 100%), while the loss rate of 
AR-2’s WLAN decreases linearly (from 100% to 0%). Throughout the entire simulation, MN 
transmits 320kbps of data to CN through its 802.11b WLAN interface to evaluate the 
performance of M2-SCTP when path handover occurs at the sender. Retransmissions of lost data 
can be transmitted through either the 802.11b WLAN or the UMTS network whichever has the 
larger slow start threshold. 
 
Figure 11. The testing network configuration of the experiment. 
 
B. Simulation Results 
Figure 12-(a) illustrates the throughput(bps) of the old path (the path used before path 
 19
To examine the factors contributing to the throughput improvement from mSCTP to 
M2-SCTP that can be observed in Figure 12-(b), we perform the following experiments. Three 
main features of M2-SCTP are as follows: (1) SACKs are transmitted through the NEW path after 
path handover (to solve the spurious retransmission problem), (2) data that are lost in the old path 
will NOT cause CWND reduction to the new path (to solve the unnecessary CWND 
reduction problem due to RTO), and (3) the reordering problem caused by the old path will NOT 
cause the CWND reduction to the new path (to solve the unnecessary CWND reduction problem 
due to fast retransmission). We use “SACK NEW”, “CWND RTO”, and “CWND FRTX” to 
denote feature (1), feature (2), and feature (3) respectively. Three other configurations of 
M2-SCTP, namely M2-SCTP-α, M2-SCTP-β, and M2-SCTP-°, are evaluated. M2-SCTP-α, 
M2-SCTP-β, and M2-SCTP-° correspond to the three main features of M2-SCTP. That is, only the 
first feature, i.e., “SACK NEW”, is enabled in M2-SCTP-α, and the other two features are left 
disabled. Accordingly, only the “CWND RTO” feature is enabled in M2-SCTP-β, whereas only 
the “CWND FRTX” feature is enabled in M2-SCTP-°. The experiments depicted in Figure 12 are 
performed for M2-SCTP-α, M2-SCTP-β, and M2-SCTP-°, and the throughput are compared in 
conjunction with mSCTP and M2-SCTP.  
Figure 13 illustrates the throughput comparison of mSCTP, M2-SCTP-α, M2-SCTP-β, 
M2-SCTP-γ, and M2-SCTP, from the 30th to 35th seconds. Referring to Figure 13, it can be 
observed that, in addition to M2-SCTP, both M2-SCTP-α and M2-SCTP-β achieve obvious 
throughput improvements. In our experiment, the throughput of M2-SCTP-α is better than that of 
M2-SCTP-β. It is because that “CWND RTO” can only be benefitted from when the data 
transmitted through the old path before path handover gets lost. Let’s remind that in our 
experiment, the loss rate of the old path is around 50% when the path handover occurs. It means 
that there is a 50% chance to gain a throughput improvement when “CWND RTO” is enabled in 
our experiment. Referring to Figure 13, it can also be observed that M2-SCTP-γ has almost the 
same throughput as mSCTP does. It is because that during the path handover processing period, 
there are no fast retransmissions caused by the reordering data transmitted through the old path in 
our experiment when delay equals 20 ms. Thus, from the experimental results, it can be 
concluded that the throughput improvement made by M2-SCTP when delay equals 20 ms is 
mainly benefitted from “SACK NEW” and “CWND RTO”.  
 
 
 21
average number of retransmission of mSCTP and M2-SCTP. 
 
 
Figure 15. (a) Path throughput comparison of mSCTP and M2-SCTP (delay = 20/50ms); (b) path 
throughput of mSCTP and M2-SCTP (delay = 60ms). 
 
To examine the throughput improvement of higher delay values, we perform the same 
experiments as that is depicted in Figure 13 for delay = 50 ms and delay = 60 ms. Figure 16-(a) 
and Figure 16-(b) illustrate the throughput comparison of mSCTP, M2-SCTP-α, M2-SCTP-β, 
M2-SCTP-γ, and M2- SCTP with delay = 50 ms and delay = 60 ms respectively. Referring to 
Figure 16-(a) and Figure 16-(b), it can be observed that both M2-SCTP-α and M2-SCTP-β achieve 
similar throughput improvement as it is shown in Figure 13. It can also be observed that, unlike 
the throughput that is achieved when delay = 20 ms (referring to Figure 13), M2-SCTP-γ achieves 
an obvious throughput improvement when delay = 50 ms (referring to Figure 16-(a)) and delay = 
60 ms (referring to Figure 16-(b)). Referring to the experimental results, it can be proven and 
concluded that if a high-delay old path is present, M2-SCTP’s can gain extra throughput from 
“SACK NEW”, “CWND RTO”, and “CWND FRTX” when it is compared with mSCTP, which 
does not consider the handover issues referred in this research.  
 
 
 23
六、計畫成果自評 
原計畫相符程度：本研究計畫目標為探討使用 SCTP 在多重定址的無線行動網路中，使用
多路徑資料傳輸以達到多路徑頻寬加乘。因此，我們提出 M2-SCTP ，解決 SCTP 應用多路
徑資料傳輸時，會因換手問題而造成的效能低落的狀況，而達到最佳的頻寬利用率。 
 
達成預期目標情況：在本計畫中，我們利用 Duplicate 及 Stripping Mode 的方式，解決了 
SCTP 應用多路徑資料傳輸在無線行動網路中會碰到的換手動作而造成的資料遺失的問
題。並提出相對應的演算法，充份運用多路徑資料傳輸的特性，來降低資料在傳輸失序的
狀況，以提高整體在換手時的輸傳效能。 
 
研究成果學術及應用價值：本研究計畫成果充份及有效地利用多路徑資料傳輸的特性，讓
行動節點可以透過多個網路傳輸介面進行資料傳輸。而且不會因為在進行換手動作時，而
造成傳輸層 (Transport Layer) 因資料遺失引發的效能低落等問題。因此，未來的配有多重
網路介面行動裝置，如 PDA、NB 及 Smart Phone 等， 將可以充份利用本計畫的研究成果，
大大地提升傳輸效能。 
 
期刊發表： 
  
本計畫研究成果已發表在： 
 
Chung-Ming Huang and Ching-Hsien Tsai, “The Handover Control Mechanism for 
Multi-path Transmission using Stream Control Transmission Protocol (SCTP),” accepted by 
Computer Communications, June 2007. 
 
七、參考文獻 
[1] R. Stewart, Q. Xie et. al., “Stream Control Transmission Protocol,” RFC 2960, IETF, October 2000. 
[2] R. Stewart, M. Ramalho, and Q. Xie et. al., “Stream Control Transmission Protocol (SCTP) Dynamic Address 
Reconfiguration,” draft-ietf-tsvwgaddip-sctp-15.txt, May 2006. 
[3] M. Riegel, M. Tuexen, “Mobile SCTP,” draft-riegel-tuexen-mobile-sctp-07.txt, October 2006. 
[4] S. J. Koh, et al., “Architecture of Mobile SCTP for IP Mobility Support”, 
http://www.watersprings.org/pub/id/draft-sjkoh-mobilesctp-mobileip-04.txt, June 2004 
[5] S. J. Koh, M. J. Chang, and M. J. Lee, “mSCTP for Soft Handover in Transport Layer,” IEEE Communications 
Letters, VOL 8, NO. 3, March 2004. 
[6] W. Xing, H. Karl, and A. Wolisz, “M-SCTP: Design and Prototypical Implementation of an End-to-End Mobility 
Concept,” Proceedings of 5th Intl Workshop: The Internet Challenge - Technology and Applications, Berlin, 
Germany, October 2002. 
[7] J. R. Iyengar, K. C. Shah, and P. D. Amer, “Concurrent Multipath Transfer Using SCTP Multihoming Over 
Independent End-to-End Paths,” J. Iyengar, P. Amer, and R. Stewart, IEEE/ACM Transactions on Networking (in 
press). 
[8] G. Ye, T. N. Saadawi, and M. Lee, “IPCC-SCTP: An Enhancement to the Standard SCTP to Support 
 25
可供推廣之研發成果資料表 
■ 可申請專利  □ 可技術移轉                                      日期：97 年 10 月 12 日 
國科會補助計畫 
計畫名稱：在無線行動網路下使用 SCTP 通訊協定之多路徑資料傳
輸機制 
計畫主持人： 黃崇明 
計畫編號：NSC 95－2221－E－006－094－MY2          
學門領域：資訊學門一 
技術/創作名稱  
發明人/創作人 黃崇明、蔡競賢 
技術說明 
中文： 
隨著各種無線網路科技的發展，多重定址之行動網路(Multihomed 
Mobile Networks)環境已經愈來愈普遍，因此配備多無線網路介面
卡之行動節點(Mobile Node)，便可以選擇連接到多重定址行動網路
中的一個或是多個無線網路連線。本計畫主要目的在於使用支援多
重定址的 Stream Control Transmission Protocol(SCTP)通訊協定，於
多重定址行動網路(Multihomed Mobile Networks)下設計多路徑的
資料傳輸(CMT, Concurrent Multipath Transfer)機制，使得配備多無
線網路介面卡之行動節點可以同時使用多個連線傳輸資料，以達到
充分利用多重定址行動網路(Multihomed Mobile Networks)的資
源、並增加行動節點資料傳輸量(Throughput)的目的。本專利主要
研究成果”M2-SCTP”(Mobile Multi-path Transmission using SCTP)，
包含：(一) 傳輸路徑選擇(Path Selection)之情境：我們探討並定義
一個多路徑傳輸節點在多重定址網路中可能需要重新選擇傳輸路
徑的情境。(二) 傳輸路徑換手(Path Handover)機制：當傳輸路徑重
新選擇之後，便可能與原先使用的傳輸路徑相異，在這種狀況下，
便需要傳輸路徑換手機制的作用，在本專利中，我們探討了多路徑
傳輸節點的傳輸路徑換手時的相關課題，並修改 RFC2960 中的相
關機制及演算法已達成更好的換手效率。 (三)多路徑傳輸節點的定
位管理(Location Management)機制：一個定位機制使得其他節點可
以快速的與之建立通訊 
附件二 
The Handover Control Mechanism for Multi-path Transmission
using Stream Control Transmission Protocol (SCTP) *
Chung-Ming Huang and Ching-Hsien Tsai
Laboratory of Multimedia Mobile Networking (LMN)
Dept. of Computer Science and Information Engineering
National Cheng Kung University
Tainan, Taiwan, 70101, R.O.C.
Correspondence: huangcm@locust.csie.ncku.edu.tw
Abstract
With the rapid advance of wireless networking technologies, end-host networking devices have been
equipped with various network interfaces. Thus, it becomes possible for a wireless mobile host to
improve its transmission efficiency by transmitting data through multiple network interfaces at the
same time. In this paper, we focus on the mobility issues of SCTP multi-path transmission. M2-SCTP
(Mobile Multipath - Stream Control Transmission Protocol) is proposed to allow a host to perform
(multi-)path handover when multi-path transmission is adopted in wireless mobile networks. Relevant
mobility issues of M2-SCTP are also investigated. We define three conditions under which the M2-
SCTP host can select the paths for multi-path data transmission. Since the paths used in M2-SCTP
may differ at each time paths are re-selected, the path handover problem must be tackled. Three
concerns related to path handover that are addressed and resolved in this paper include (1) spurious
retransmissions due to failed SACK (Selective Acknowledgement) transmission at the old path, (2)
retransmissions of data lost before path handover and unnecessary CWND (Congestion Window)
reductions, and (3) the reordering problem due to path handover. Based on the mechanisms devised
to solve the path handover problem, the M2-SCTP multi-path handover mechanism is also devised.
Finally, a scheme that adopts the DDNS (Dynamic DNS) technique is proposed to resolve the locating
issue of an M2-SCTP host.
Keywords: Multi-path Transmission, Multi-Path Handover, Stream Control Transmission Pro-
tocol (SCTP), Multihoming, Mobility.
* This research is supported by the National Science Council of the Republic of China, Taiwan under the contract number NSC
95-2221-E-006-094.
3
mobile networks, is proposed. Three mobility issues related to M2-SCTP, i.e., (i) path selection
conditions, (ii) handover management, and (iii) location management, are investigated. An M2-SCTP
host can concurrently transmit new data across multiple paths to its M2-SCTP peer host. When an
M2-SCTP host moves in wireless mobile networks, the accessible wireless networks may change.
The M2-SCTP host should be able to (re)select the paths used for transmitting data to its M2-SCTP
peer host. Consequently, the paths used by a multihomed M2-SCTP host may be changed at each
time it reselects paths. Thus, a path handover mechanism for M2-SCTP is exploited for resolving
the problem. As for the handover management issue of M2-SCTP, three concerns that are caused
by path handover are (1) the spurious retransmissions due to failed SACK transmission at the old
path, (2) the retransmissions of data lost before path handover and unnecessary CWND (Congestion
Window) reductions, and (3) the reordering problem due to path handover. For concern (1), when path
handover occurs, spurious retransmissions are caused when the SACKs (Selective Acknowledgement)
transmitted through the old path are lost. The unnecessary retransmission traffic and CWND reduction
should be prevented. For concern (2), retransmissions of the data that are lost at the old path before
path handover are very likely to be failed again if the retransmissions are transmitted through the
same (old) path. Therefore, these kinds of retransmissions should be done through the new path after
path handover occurs. Furthermore, the retransmission timer expiration of the data that are transmitted
through the old path may cause the unnecessary CWND reductions to the new path, which should also
be prevented. For concern (3), serious reordering of packets that are transmitted before and after path
handover will cause fast retransmissions and CWND reductions, which are not necessary and should
be avoided. In this paper, the correspondent mechanisms and algorithms are designed to tackle the
aforementioned three problems. Then, multi-path handover based on different path selection conditions
is proposed. Finally, a location management scheme adopting DDNS (Dynamic DNS) is devised to
locate an M2-SCTP host in wireless mobile networks.
The rest of the paper is organized as follows. In Section II, preliminary of SCTP and related works
of M2-SCTP are given. In Section III, the functional scenario of our proposed M2-SCTP is described;
possible conditions for selecting the appropriate links used in M2-SCTP are investigated and then the
architecture of M2-SCTP is introduced. In Section IV, the multi-path handover problem and related
issues are defined. Mechanisms adopted by M2-SCTP to tackle the multi-path handover problem are
also proposed. In Section V, a location management scheme designed for M2-SCTP is introduced. In
Section VI, performance evaluation of M2-SCTP is presented. Section VII has conclusion remarks.
II. Preliminary of SCTP and Related Works
SCTP is a transport layer protocol operating on top of a potentially unreliable connectionless
packet service, e.g., IP. An SCTP association is composed of two SCTP endpoints and protocol
state information. The support of multihoming allows each endpoint of an SCTP association to use
multiple IP addresses, which are regarded as transmission paths. The primary path is the source and
destination addresses that will be put into a packet outbound to the peer endpoint by default. The
primary path is used to send new data, while another path can be specified for data retransmission.
Chunk is an information unit within an SCTP packet. A chunk consists of a chunk header and chunk-
specific content. There are 13 chunk types defined in RFC 2960 [3]. When SCTP data are going to be
transmitted, each chunk containing user data will be attached a Transmission Sequence Number (TSN).
A TSN is a 32-bit sequence number used internally by SCTP. After the receiving endpoint receives
the data, Selective Acknowledgement (SACK) is used to be sent to the peer endpoint to acknowledge
received DATA chunks, and to inform the peer endpoint of gaps in the received subsequences of
5SCTP mSCTP SCTP CMT M2-SCTP
Transmission Single path Single path Multi-path Multi-path
Mobility Very ADDIP Not (Multi-)Path handover
support limited Extension mentioned & location management
TABLE I. The comparison between base SCTP, mSCTP, SCTP CMT-relevant works, and M2-SCTP.
along with PSN, the path assignment module, and the path monitoring mechanism to transmit data
through multiple paths. Westwood SCTP is proposed in [22]. The authors propose a bandwidth-aware
source scheduling mechanism to avoid out-of-sequence delivery when using SCTP to do load balancing
over multiple paths. In [23], two transmission modes using SCTP, i.e., single-path transmission mode
and multi-path transmission mode are proposed for a mobile host. The main idea of [23] is to transmit
the same data through multiple paths to achieve end-to-end seamless handover. On the other hand,
only one path is used for transmission in normal condition in order to save the wireless network
bandwidth. An algorithm based on transmission error counting is also proposed to enable a mobile
host to switch between the two transmission modes.
Table I shows the comparisons between base SCTP, mSCTP, SCTP CMT-relevant works, and M2-
SCTP (our proposed work) with respect to transmission and mobility support. The base SCTP and
mSCTP only use one primary path to transmit new data, whereas SCTP CMT and M2-SCTP can
transmit new data through more than one primary paths. Base SCTP has very limited support for
mobility. In base SCTP, an association cannot dynamically add, delete, and change paths in runtime,
whereas mSCTP uses the ADDIP extension to handle it. mSCTP defines a handover procedure.
However, it does not consider the path handover issues, which is to be discussed and resolved in this
paper. Most of the SCTP CMT-relevant works put emphasis on improving transmission throughput and
do not mention the mobility issues, i.e., the path handover and location management issues covered
in M2-SCTP.
III. M 2-SCTP and Path Selection Conditions
In this Section, a scenario is illustrated to explain the functionalities and issues of M2-SCTP. The
path selection issue is investigated and three conditions that may cause the M2-SCTP host to do path
selection are defined. Then, the architecture of M2-SCTP is introduced.
A. Functional Scenario
Figure 1 illustrates the functional scenario of M2-SCTP, in which (i) an M2-SCTP MN (Mobile
Node) is assumed to be equipped with a 3G/UMTS cellular network interface and a WLAN network
interface and (ii) Router-1 and Router-2 belong to different service providers. Before the host enters
into the coverage of AP-1’s WLAN, the multihomed host communicates with the server using the
3G/UMTS cellular network, which can be regarded as the primary path of the association established
between the multihomed host and the server. When the multihomed host is entering into the coverage
of AP-1’s WLAN, it can automatically configure its address when receiving the Router Advertisement
(RA) broadcasted by Router-1 via AP-1 or using DHCP (Dynamic Host Configuration Protocol). After
the address is successfully configured, the corresponding IP address is added into the SCTP association
using SCTP ADDIP Extension’s ASCONF chunk. Therefore, including the transmission path over the
7
B. Path Selection Conditions
Let’s consider the following scenario. A laptop computer is equipped with a built-in 802.11b wireless
network interface, a PCMCIA 802.11g wireless network interface, and a PCMCIA 3G/UMTS cellular
network interface. The laptop is in a region of three 802.11b/g wireless network ARs’ and two
3G/UMTS cellular network BSs’ coverage, and all of these wireless networks are assumed accessible
and available. Hence, each of the ARs and BSs can be regarded as a transmission path of SCTP after
the association between peers is setup. If the user of the laptop does not care the power consuming
issue and wants to utilize all wireless network interfaces on the laptop, it means that two of the
three 802.11b/g wireless network ARs and one of the two 3G/UMTS cellular network BSs should be
chosen as transmission paths of M2-SCTP. Thus, a mechanism is needed for the selection of accessible
wireless networks. It is worthy noting that the scenario given above lays stress on the multihoming
at the mobile node’s (MN) side. It is possible that the corresponding node (CN) is also multihomed.
When the total number of available transmission paths is larger than the number of paths/network
interfaces that needs to be used in M2-SCTP, a path selection mechanism is needed to select which
paths should be used. The path selection mechanism can be triggered in the following conditions:
1) Association initiation: the initial setup of an association in a multihomed host to start the data
transmission.
2) New path added: a new path is discovered as available and added into the association.
3) Path inactive (failover): a path that is used by M2-SCTP is determined as “inactive” by the
association.
In condition “association initiation”, when the multihomed host is going to setup an association,
the multihomed host connects to its peer endpoint using one of its available addresses. Then the
multihomed host exchanges the information of all available IP addresses with its peer endpoint in
initialization. When the initialization is complete, M2-SCTP triggers the path selection mechanism to
select the paths to use for the following transmission. Condition “new path added” occurs when the
multihomed host moves and discovers a new AP/AR of a different domain that is accessible. Therefore,
the multihomed host can obtain a new address via DHCP or IPv6 address auto-configuration [24] and
add the new transmission path into the association. In order to aggressively improve transmission
throughput, the path selection mechanism can be triggered to determine whether the newly added
transmission path is better than the one/ones that is/are currently used. Condition “path inactive”
occurs when one of the transmission paths that is used in M2-SCTP repeatedly fails in transmitting
data and determined as “inactive” by the association. Thus, M2-SCTP triggers the path selection
mechanism to select another transmission path to replace the failed one.
C. Architecture of M2-SCTP
According to the aforementioned functional scenario mentioned in Section III-A and the path
selection conditions mentioned in Section III-B, some modifications are made on base SCTP to support
the capabilities, i.e., mobile multi-path transmission and path selection, of M2-SCTP. Figure 2 depicts
the architecture of M2-SCTP. Modifications made on base SCTP are (1) a data dispatcher at the sender,
(2) a path selector ar the sender, and (3) virtual buffers at both the sender and the receiver. The data
dispatcher at the sender is responsible for the assignments of striped data that are to be transmitted
to the paths selected by the path selector in an M2-SCTP association. As it is defined in RFC2960
[3], CWND (Congestion Window), SSTHRESH (Slow-start Threshold), and RTO (Retransmission
Timeout) of M2-SCTP are maintained on a per-destination address basis. The data that are to be
9Data
dispatcher
Virtual
buffer
Path
#1
Path
#2
Association
buffer
Data
Virtual
buffer
Path
#1
Path
#3
Path
#2
Association
buffer
Data
(a) (b)
Path
selector
Path
selector
Data
dispatcher
Fig. 3. (a) Multi-path transmission before path handover; (b) path handover between path-2 and
path-3.
the selected two paths are both other than path-1 and path-2, i.e., path-3 and path-4, both path-1 and
path-2 have to handover to path-3 and path-4. In this paper, we define this condition as “Multi-path
Handover”. A new term “Multi-path Handover Pair” is defined as the handover relationship of the
path that is originally used, and the path that is newly selected by the path selection mechanism. In
this paper, we use “PHP = [original path-1 → new path-1, original path-2 → new path-2, ...]” to
denote the relationship between path handover pairs. For example, in the previously given example,
the path handover pair can be “PHP = [path-1 → path-3, path-2 → path-4]”, or “PHP = [path-1
→ path-4, path-2 → path-3]”. “PHP = [path-1 → path-3, path-2 → path-4]” denotes that after the
multi-path handover, path-3 will replace path-1 and path-2 will replace path-4 to transmit data. In
M2-SCTP, each path is represented with a source-destination address pair. Thus one clearer example
for the multi-path handover relationship can be “PHP = [(addr s1, addr d1) → (addr s3, addr d3),
(addr s2, addr d2) → (addr s4, addr d4)]”.
B. Issues Related to Path Handover
Main issues related to multi-path handover are (1) spurious retransmission problem due to failed
SACKs at the old path, (2) retransmissions of the lost data before path handover, and (3) the reordering
problem after path handover, which are depicted as follows.
1) Spurious Retransmissions due to Failed SACK Transmission at the Old Path: Figure 4-(a)
illustrates an example of PHP = [(ip0, ip1) → (ip0, ip2)], in which the IP address “ip0” belongs to CN
(Corresponding Node) while “ip1” and “ip2” belong to the MN (Mobile Node). (For the convenience of
explanation, we assume that each packet carries one data chunk in the following illustrated examples.)
Before path handover occurs at the sender, a packet (tsn1) is transmitted through the path (ip0, ip1)
and not yet acknowledged when the path handover between (ip0, ip1) and (ip0, ip2) occurs. According
11
Path
Handover
CN(ip0)MN(ip1) MN(ip2)
tsn1
tsn2
sack2
.
.
sack1
.
Path
Handover
CN(ip0)MN(ip1) MN(ip2)
tsn1
tsn2
sack1
.
.
sack1
.
X
RTO
tsn1 (rtx)
(a) (b)
Fig. 5. Path handover occurs at the receiver: (a) SACK transmission failure at the old path after path
handover; (b) M2-SCTP: SACK transmitted from a new source address after path handover.
Path
Handover
CN(ip0)MN(ip1) MN(ip2)
X
tsn1
tsn2
tsn3
sack0(2-2)
sack0(2-3)
.
.
.
tsn1 (rtx)
RTO
Path
Handover
CN(ip0)MN(ip1) MN(ip2)
X
tsn1
tsn2
tsn3
sack0(2-2)
sack0(2-3)
.
.
.
tsn1 (rtx)
RTO
X
(a) (b)
Fig. 6. Path handover occurs at the receiver: (a) retransmission failure at the old path after path
handover; (b) M2-SCTP: Retransmission sent successfully to a new destination address.
sent through the new path (ip2, ip0) after path handover should not be used to credit the CWND growth
of the path destination (ip0), or the CWND of the path destination (ip0) may overgrow if there are a
lot of outstanding packets transmitted before the path handover occurs. This side effect exists when
the path handover occurs at the sender side. Thus, in M2-SCTP, the CWND updating mechanism is
also modified to prevent the CWND overgrowth problem that may possibly be caused by the SACKs
of the data that are transmitted through the old path before path handover.
2) Retransmissions of Data Lost Before Path Handover and Unnecessary CWND Reductions:
Figure 6-(a) illustrates another example of PHP = [(ip0, ip1) → (ip0, ip2)]. Notation “sackX(Y-Z)”
denotes that a SACK with a cumulative acknowledgement of X indicates a gap beginning at tsnY and
ending at tsnZ. Let the packet (tsn1) be originally transmitted through the old path and be lost, and
then a path handover occur at the receiver. Then, the CN starts to transmit further data (tsn2, tsn3, ...)
through the new path. When the retransmission timer expires without receiving the SACK for tsn1,
tsn1 should be retransmitted. After path handover, due to the same two reasons depicted in Section
IV-B.1, i.e., (a) the network interface is bound to the new path after path handover and (b) the status
13
Path
Handover
CN(ip0)MN(ip1) MN(ip2)
tsn1
tsn2
sack0(4-7)
.
.
sack0(4-4)
tsn3
tsn4
.
tsn7 4-SACK
rule
tsn1 (rtx)
tsn2 (rtx)
tsn3 (rtx)
(a) (b)
Path
Handover
CN(ip0)MN(ip1) MN(ip2)
tsn1
tsn2
sack0(4-7)
.
.
sack0(4-4)
tsn3
tsn4
.
tsn74-SACK
rule
tsn1 (rtx)
tsn2 (rtx)
tsn3 (rtx)
Fig. 8. The reordering problem caused by path handover when: (a) path handover occurs at the
sender. (b) path handover occurs at the receiver.
However, in the circumstance of Figure 7-(b), since tsn1 is transmitted through the old path, the loss
of tsn1 should not cause the reduction of CWND after path handover occurs. In M2-SCTP, when path
handover occurs at the sender, the mechanisms applied on retransmission timer expiration are modified
to prevent the unnecessary CWND reduction which may cause serious degradation to transmission
efficiency.
3) The Reordering Problem After Path Handover: One essential idea of M2-SCTP is to replace the
congested/high-delay path with the path that has better transmission efficiency. Thus, the data that are
transmitted through the old path before path handover may arrive at the receiver later than the data
that are transmitted through the new path after path handover, which causes the reordering problem.
The reordering problem then causes further negative side effect, e.g., unnecessary fast retransmissions
at the sender due to the 4-SACK rule.
Figure 8-(a) illustrates an example in which three packets (tsn1, tsn2, and tsn3) are transmitted from
MN to CN through a seriously congested path (ip0, ip1) before the path handover PHP = [(ip0, ip1) →
(ip0, ip2)] occurs. After the path handover, the MN transmits further packets (tsn4 and tsn5) through
the new path (ip0, ip2), of which the status is much better than the old path (ip0, ip1). Therefore,
packets carrying tsn4 and tsn5 arrived at CN sooner than packets carrying tsn1, tsn2, and tsn3 did,
which will cause the reordering problem. Four consecutive SACKs sent by MN to report the GAP
information will then cause MN to fast retransmit the three tsns (tsn1, tsn2, and tsn3) immediately
and also reduce the CWND as a result. However, since the gaps are resulted from the transmission
through the old path before the path handover, the GAP report should not cause the reduction to the
CWND of the new path. In M2-SCTP, the missing report count updating mechanism is modified to
prevent the unnecessary CWND reductions that may possibly be caused by the reordering problem
induced by path handover.
Figure 8-(b) illustrates an example similar to Figure 8-(a). The difference is that the path handover
occurs at the receiver in Figure 8-(b). Since the resulted problem and the solution are similar to that
15(II) The sender’s CWND should not grow when receiving the acknowledgements of the tsns that are
transmitted through the old path before the path handover occurs at the sender (referring to Section
IV-B.1).
(III) The retransmissions of the tsns that are transmitted before path handover should be transmitted
through the new paths according to a specific policy, e.g., the “RTX-SSTHRESH” policy suggested
in [19] (referring to Section IV-B.2).
(IV) In the circumstance that path handover occurs at the sender, the retransmission timer expiration
of the data that are transmitted through the old path before path handover should not cause the CWND
reduction to the path destination after path handover occurs (referring to Section IV-B.2).
(V) The missing report count updating mechanism should be modified to prevent the consequently
unnecessary CWND reduction caused by fast retransmissions due to the packet reordering problem
after path handover (referring to Section IV-B.3).
The use of the newly introduced Path Handover ASCONF chunk can resolve problems (I) and
(III), in conjunction with the standard ASCONF chunks of the SCTP ADDIP Extension. To resolve
problems (II), (IV) and (V), (a) a mechanism which enables the sender to know which tsns are
transmitted before path handover and yet not acknowledged when path handover occurs, and (b)
modified CWND updating and missing report count updating algorithms, are needed. Figure 10
depicts the modified algorithms used in M2-SCTP. In part (1) of Figure 10, the sender marks all
outstanding tsns using the additional variable “ph outstanding” defined by M2-SCTP when it receives
a Path Handover ASCONF/ASCONF-ACK chunk. Part (2) of Figure 10 depicts the modified CWND
updating algorithm used by M2-SCTP to avoid unfair growth of CWND when receiving a SACK.
Variable “num acked tsn” is used to calculate the amount of tsns that are transmitted to a specific
destination and acknowledged by the current SACK. Variable “num pho tsn” is used to calculate how
many of the outstanding tsns, which are transmitted to a specific destination before path handover
occurs, are acknowledged by the the current SACK. Then, since there are num pho tsn tsns transmitted
successfully through the old path of which the acknowledgements should not be used to credit the
growth of CWND, the sender should increment CWND with either “num acked tsn - num pho tsn”
or path MTU, whichever is less. Part (3) of Figure 10 modifies the actions taken by M2-SCTP when
the retransmission timer expires. When the retransmission timer expires, prior to applying the rules
stated in RFC2960, M2-SCTP checks whether all of the outstanding tsns are transmitted before path
handover occurs or not. Then a new variable “ph rto” is used to label whether the retransmission
timer expiration is “exactly” caused by the earliest tsns that are transmitted through the old path
before path handover occurs or not. If “ph rto” is TRUE, only retransmissions of the outstanding tsns
are done; other rules stated in RFC2960 to handle RTO are skipped. On the other hand, if “ph rto”
is FALSE, it means (ano)other tsn(s) is/are missing at the new path after path handover occurs. All
the rules stated in RFC2960 will be applied. Part (4) of Figure 10 tackles the missing report count
updating of M2-SCTP. When the sender receives a SACK containing GAP reports, it checks each tsn
that is reported as missing to see if the tsn was transmitted through the old path before path handover
occurs, and then decides whether to increment the missing report for the tsn or not. In this way,
possibly unnecessary fast retransmissions and consequently unnecessary CWND reductions can thus
be avoided.
17
D. Multi-path Handover Procedure
As it is mentioned in Section III-B, the path selection mechanism is triggered in three kinds of
situations. Except condition “association initiation”, in which the multihomed host selects transmission
paths while the association is startup, both condition “new path added” and condition “path inactive”
may be accompanied with a path handover, or multi-path handover if multiple paths have to be changed
according to the result of the host’s path selection mechanism. For condition “new path added”, the
M2-SCTP multi-path handover procedure is as follows.
1) The M2-SCTP host obtains new address(es) from the new AP/AR, e.g., through IPv6 stateless
auto-configuration or DHCP.
2) The host adds the newly formed transmission paths, i.e., the source-destination address pairs,
into the M2-SCTP association.
3) The M2-SCTP host triggers the path selection mechanism to select new paths for transmission.
4) The M2-SCTP host sends the modified ASCONF chunks to its peer host, and receives the
ASCONF-ACKs from its peer host.
5) For each path handover pair, the path handover mechanism of M2-SCTP along with the algo-
rithms depicted in Section IV-C are executed between the sender and receiver.
6) The M2-SCTP host deletes the old path(s) from the association if it (they) is (are) determined
as inactive by the association.
The multi-path handover procedure for condition “Path inactive” is as follows.
1) The M2-SCTP association determines one or more specific path(s) as inactive.
2) The M2-SCTP host triggers the path selection mechanism to select new paths for transmission.
3) The M2-SCTP host sends the modified ASCONF chunks to its peer host, and receives the
ASCONF-ACKs from its peer host.
4) For each path handover pair, the path handover mechanism of M2-SCTP along with the algo-
rithms depicted in Section IV-C are executed between the sender and receiver.
5) The M2-SCTP host deletes the old path(s) that is(are) determined as inactive from the associa-
tion.
V. Location Management
The other main issue of IP mobility is location management. Since SCTP was not originally designed
for mobile use, a location management scheme is needed for a host to locate the peer host that it
wants to set up an association with. However, unlike Mobile IP, since the ADDIP Extension of SCTP
allows an SCTP host to dynamically add, delete, and set a new primary path without terminating
the ongoing association, and use the ASCONF chunks to notify the remote endpoint, SCTP does not
need its location management scheme to provide binding update mechanisms. SCTP only needs the
location management scheme to provide the locating service on SCTP association initiation. In this
Section, a location management scheme that adopts the DDNS (Dynamic DNS) technique is designed
for the proposed M2-SCTP.
DDNS is a service that maps Internet domain names to IP addresses. DDNS serves a similar purpose
to DNS: DDNS allows a host to advertise a public name to prospective users. Unlike DNS that only
works with static IP addresses, DDNS works with dynamic IP addresses, such as those assigned by an
ISP or other DHCP servers. For the following reasons, we select DDNS as the location management
scheme for the proposed M2-SCTP.
19
AR-1
AR-2
MN
CN UMTS384kbpsMN
MN
10 Mbps
15ms
10 Mbps
20~80ms
802.11b
11 Mbps
15ms
802.11b
11 Mbps
15ms
15s
15s
30s
Fig. 11. The testing network configuration of the experiment.
complicated network layer protocol, which needs the cooperation of HAs (Home Agents) and FAs
(Foreign Agents). Furthermore, Since M2-SCTP does not need the binding update function provided
by the Mobile IP, using Mobile IP as the location management scheme seems not to be a cost-
effective option. When SIP is adopted, MN can send a SIP Register to the SIP Registrar server to
update its location. The SIP proxy server can then locate the MN and relay the SIP INVITE message
to the visiting SIP proxy server for a CN to initiate the association with the MN. However, SIP is an
application layer protocol of which the support of location management needs the cooperation of SIP
Register servers and SIP Proxy servers. Using SIP as the location management scheme of M2-SCTP
may cause extra overhead to the deployment.
VI. Performance Evaluation
In this Section, performance of M2-SCTP is evaluated. The path handover throughput using M2-
SCTP algorithms and the base SCTP will be compared.
A. Simulation Setting
Figure 11 illustrates the simulation testing network configuration of M2-SCTP path handover. A
multihomed mobile node, which has one 802.11b wireless network interface and one UMTS cellular
network interface, is assumed to be in the coverage of two 802.11b WLANs and an UMTS cellular
network. Referring to Figure 11, at the beginning, MN is within the coverage of AR-1’s 802.11b
WLAN and the UMTS cellular network. MN establishes an association with CN and moves towards to
AR-2’s 802.11b WLAN. MN then enters the intersected area covered by AR-1’s and AR-2’s WLANs.
In the intersected area, MN adds a new path, i.e., the path through AR-2, into the association and then
performs path handover between the old path that is through AR-1, and the new path that is through
AP-2. After path handover, MN keeps moving and leaves the intersected area to AR-2’s WLAN.
The experiments for the simulation scenario described above is based on Network Simulation version
2 (NS-2) [28] with the SCTP module [29] developed by University of Delaware. The SCTP module
is modified to implement M2-SCTP and the algorithms depicted in Section IV-C. The Path Handover
21
missing report count updating algorithms of base SCTP to transmit data. Referring to Figure 12-(a),
it can be observed that the throughput of the old path begins to decrement gradually at around the
15th second in the simulation due to the increasing loss rate of AR-1’s WLAN as MN moves. Let’s
remind that the path handover occurs at the 30th second in our simulation. In our simulation, the loss
rates of both AR-1’s and AR-2’s WLANs are identical when path handover occurs at MN. Thus, the
throughput achieved at the old path and the new path should be similar during path handover occurs.
However, referring to Figure 12-(a), it can be observed that in the initial seconds after path handover,
the throughput of the new path is smaller than that of the old path before path handover occurs. It
is because the data that are transmitted and lost at the old path cause reduction to CWND after path
handover occurs. (Referring to Section IV-B.2 for detail.) In mSCTP, when a retransmission timer
expires, the slow start threshold will be set to 1/2 the value of CWND or 2 MTU whichever is more,
and CWND will be set 1 MTU. Thus throughput degradation is caused after path handover occurs as
a result.
The same simulation is done for 10 rounds on both mSCTP and our proposed M2-SCTP, which
adopts modified CWND updating, RTO handling and missing report counting algorithms depicted in
Figure 10. The path throughput (kbps) of mSCTP and M2-SCTP are calculated from the 10 rounds
of experiments. Figure 12-(b) illustrates the path throughput of mSCTP and M2-SCTP with the same
delay (20ms), from the 30th second to the 42th second. Referring to Figure 12-(b), it can be observed
that, right after path handover (30–32 seconds), the algorithms adopted by M2-SCTP achieve an
obvious throughput improvement when it is compared with the throughput of mSCTP.
To examine the factors contributing to the throughput improvement from mSCTP to M2-SCTP that
can be observed in Figure 12-(b), we perform the following experiments. Referring to Section IV,
three main features of M2-SCTP are as follows: (1) SACKs are transmitted through the NEW path
after path handover (to solve the spurious retransmission problem), (2) data that are lost in the old
path will NOT cause CWND reduction to the new path (to solve the unnecessary CWND reduction
problem due to RTO), and (3) the reordering problem caused by the old path will NOT cause the
CWND reduction to the new path (to solve the unnecessay CWND reduction problem due to fast
retransmission). We use “SACK NEW”, “CWND RTO”, and “CWND FRTX” to denote feature (1),
feature (2), and feature (3) respectively. Three other configurations of M2-SCTP, namely M2-SCTP-α,
M2-SCTP-β, and M2-SCTP-γ, are evaluated. M2-SCTP-α, M2-SCTP-β, and M2-SCTP-γ correspond
to the three main features of M2-SCTP. That is, only the first feature, i.e., “SACK NEW”, is enabled in
M2-SCTP-α, and the other two features are left disabled. Accordingly, only the “CWND RTO” feature
is enabled in M2-SCTP-β, whereas only the “CWND FRTX” feature is enabled in M2-SCTP-γ. The
experiments depicted in Figure 12 are performed for M2-SCTP-α, M2-SCTP-β, and M2-SCTP-γ,
and the throughput are compared in conjunction with mSCTP and M2-SCTP.
Figure 13 illustrates the throughput comparison of mSCTP, M2-SCTP-α, M2-SCTP-β, M2-SCTP-
γ, and M2-SCTP, from the 30th to 35th seconds. Referring to Figure 13, it can be observed that, in
addition to M2-SCTP, both M2-SCTP-α and M2-SCTP-β achieve obvious throughput improvements.
In our experiment, the throughput of M2-SCTP-α is better than that of M2-SCTP-β. It is because that
“CWND RTO” can only be benefitted from when the data transmitted through the old path before path
handover gets lost. Let’s remind that in our experiment, the loss rate of the old path is around 50%
when the path handover occurs. It means that there is a 50% chance to gain a throughput improvement
when “CWND RTO” is enabled in our experiment. Referring to Figure 13, it can also be observed
that M2-SCTP-γ has almost the same throughput as mSCTP does. It is because that during the path
23
20 30 40 50 60 70 80
0
20
40
60
80
100
120
140
160
180
200
 
 
T
h
r
o
u
g
h
p
u
t
 
(
k
b
p
s
)
Delay (ms)
 mSCTP
 M
2
-SCTP
(a)
20 30 40 50 60 70 80
20
25
30
35
40
45
50
55
60
65
70
 
 
A
v
g
.
 
N
u
m
b
e
r
 
o
f
 
R
e
t
r
a
n
s
m
i
s
s
i
o
n
s
Delay (ms)
 mSCTP
 M
2
-SCTP
(b)
Fig. 14. (a) Average path throughput during path handover of mSCTP and M2-SCTP; (b) average
number of retransmissions of mSCTP and M2-SCTP
60ms of delay, also shows a similar result. The higher delay of the old path used before path handover
does not affect the throughput of the new path used after handover when M2-SCTP is adopted for
transmitting data.
To examine the throughput improvement of higher delay values, we perform the same experiments
as that is depicted in Figure 13 for delay = 50 ms and delay = 60 ms. Figure 16-(a) and Figure 16-(b)
illustrate the throughput comparison of mSCTP, M2-SCTP-α, M2-SCTP-β, M2-SCTP-γ, and M2-
SCTP with delay = 50 ms and delay = 60 ms respectively. Referring to Figure 16-(a) and Figure 16-(b),
it can be observed that both M2-SCTP-α and M2-SCTP-β achieve similar throughput improvement as
it is shown in Figure 13. It can also be observed that, unlike the throughput that is achieved when delay
= 20 ms (referring to Figure 13), M2-SCTP-γ achieves an obvious throughput improvement when
delay = 50 ms (referring to Figure 16-(a)) and delay = 60 ms (referring to Figure 16-(b)). Referring
to the experimental results, it can be proven and concluded that if a high-delay old path is present,
M2-SCTP’s can gain extra throughput from “SACK NEW”, “CWND RTO”, and “CWND FRTX”
when it is compared with mSCTP, which does not consider the handover issues referred in this paper.
VII. Conclusion
In this paper, M2-SCTP has been proposed to resolve the multi-path handover problem for the
mobile host that wants to transmit data through multiple paths in wireless mobile networks. Three
basic conditions under which an M2-SCTP host may trigger the path selection mechanism are defined.
Since the paths used for transmission may differ after the path selection mechanism is triggered,
(multi-)path handover may also occur. In this paper, relevant issues of (multi-)path handover, i.e., (a)
spurious retransmissions due to failed SACK transmission at the old path, (b) retransmissions of data
lost before path handover and unnecessary CWND reductions, and (c) the reordering problem after
path handover, are investigated from two perspectives, i.e., path handover occurs at the sender or path
25
30 31 32 33 34 35
0
50
100
150
200
250
 
 
T
h
r
o
u
g
h
p
u
t
 
(
k
b
p
s
)
Time (sec)
 mSCTP
 M
2
-SCTP-
 M
2
-SCTP-
 M
2
-SCTP-
 M
2
-SCTP
(a)
30 31 32 33 34 35
0
50
100
150
200
250
 
 
T
h
r
o
u
g
h
p
u
t
 
(
k
b
p
s
)
Time (sec)
  mSCTP
 M
2
-SCTP-
 M
2
-SCTP-
 M
2
-SCTP-
 M
2
-SCTP
(b)
Fig. 16. Path throughput comparison of different configurations with (a) delay = 50ms and (b) delay
= 60ms
[7] R. Stewart and C. Metz, “SCTP: New transport protocol for TCP/IP,” IEEE Internet Computing, VOL. 5, NO. 6, pp. 64-69,
November/December 2001.
[8] S. J. Fu and M. Atiquzzaman, “SCTP: State of the Art in Research, Products, and Technical Challenges,” IEEE Communications
Magazine, VOL. 42, NO. 4, pp. 64-76 April 2004.
[9] J. Andreas, et al., “SCTP- A Multi-Link End-to-End Protocol for IP-Based Networks,” AEU -The International Journal of
Electronics and Communications, pp. 46-54, February 2002.
[10] A. Jungmaier, M. Schopp, and M. Tuxen, “Performance Evaluation of the Stream Control Transmission Protocol,” Proceedings
of the 2000 IEEE Conference on High Perfomance Switching and Routing, Heidelberg, German, pp. 141-148, June 2000.
[11] A. Jungmaier, E.P Rathgeb, and M. Tuxen, “On the Use of SCTP in Failover Scenarios,” Proceedings of the SCI 2002,
Mobile/Wireless Computing and Communication Systems II, VOL. X, Orlando, USA, pp. 363-368, July 2002.
[12] Chung-Ming Huang, Ching-Hsien Tsai, and Ming-Chi Tsai, “Design and Implementation of Video Streaming Hot-plug between
Wired and Wireless Networks Using SCTP,” The Computer Journal, VOL. 49, NO. 4, pp. 400-417, July 2006.
[13] M. Allman, V. Paxson, and W. Stevens, “TCP Congestion Control,” RFC 2581, IETF, April 1999.
[14] R. Stewart, M. Ramalho, and Q. Xie et. al., “Stream Control Transmission Protocol (SCTP) Dynamic Address Reconfiguration,”
draft-ietf-tsvwgaddip-sctp-15.txt, May 2006.
[15] M. Riegel, M. Tuexen, “Mobile SCTP,” draft-riegel-tuexen-mobile-sctp-07.txt, October 2006.
[16] S. J. Koh, et al., “Architecture of Mobile SCTP for IP Mobility Support”, http://www.watersprings.org/pub/id/draft-sjkoh-mobile-
sctp-mobileip-04.txt, June 2004
[17] S. J. Koh, M. J. Chang, and M. J. Lee, “mSCTP for Soft Handover in Transport Layer,” IEEE Communications Letters, VOL 8,
NO. 3, March 2004.
[18] W. Xing, H. Karl, and A. Wolisz, “M-SCTP: Design and Prototypical Implementation of an End-to-End Mobility Concept,”
Proceedings of 5th Intl Workshop: The Internet Challenge - Technology and Applications, Berlin, Germany, October 2002.
[19] J. R. Iyengar, K. C. Shah, and P. D. Amer, “Concurrent Multipath Transfer Using SCTP Multihoming Over Independent End-to-End
Paths,” J. Iyengar, P. Amer, and R. Stewart, IEEE/ACM Transactions on Networking (in press).
[20] G. Ye, T. N. Saadawi, and M. Lee, “IPCC-SCTP: An Enhancement to the Standard SCTP to Support Multi-homing Efficiency,”
IEEE International Conference on Performance, Computing, and Communications, pp. 523-530, April 2004.
[21] A. Abd EI AI, T. Saadawi, M. Lee, “LS-SCTP: A Bandwidth Aggregation Technique for Stream Control Transmission Protocol,”
Computer Communications, VOL 27, NO. 10, pp. 1012-1024, 2004.
[22] C. Casetti and W. Gaiotto, “Westwood SCTP: Load Sharing over Multipaths using Bandwidth-aware Source Scheduling,” IEEE
60th Vehicular Technology Conference, VOL 4, pp. 3025-3029, September 2004.
[23] S. Kashihara, K. Iida, H. Koga, Y. Kadobayashi, and S. Yamaguchi, “Multi-Path Transmission Algorithm for End-to-End Seamless
