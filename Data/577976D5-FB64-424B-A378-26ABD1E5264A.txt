 2
理器核心架構，IC 製造商並整合週邊控制或特殊硬
體加速電路於一顆單晶片中，常見的廠牌如
Samsung、TI、Intel、Motorola、ATMEL、CirrusLogic
與 Contexant 等。本研究使用 Samsung ARM 7 
S3C4510B 晶片，搭配 uClinux 作業系統。因此本研
究計劃發展一內嵌式系統研究環境，並以無線電資
料傳輸將判斷結果傳至主控設備端，或於各控制板
之間進行資料傳送，這是因為考量往後實際於路口
測試與監控時，路口各方向來車之狀況需做一整合
與計算，方能得到最佳之即時控制。因此於控制板
上規劃無線電傳輸模組，除了可即時相互傳輸資訊
外，更可避免繁複之接線問題，提高使用之方便性。 
因此本研究可針對單一車輛或全路口進行模擬與
分析，並進行智慧型影像即時控制軟體移植內嵌至
智慧型交通監控器之初步分析，因為相較於一般電
腦控制除可縮小體積，並能降低成本，同時才能具
有路口實際長時間同步蒐集資料之能力，以增加未
來商品化之實用性。 
 
三、文獻探討 
 
本研究原預計延續第（Ⅰ）期及第（Ⅱ）期研
究計畫，再分兩年進行，目前因只能執行第一年計  
畫，主要為內嵌式系統實驗環境之開發，於系統程
式方面，計劃將累積差值影像與傅立葉轉換之頻域
分析追蹤即時交通影像，並建立移動軌跡資料庫。
嵌入式系統[1]普遍被認定為控制、監視或輔助設
備、機器或甚至工廠運作的裝置。與一般泛用型系
統不同，系統包含電腦軟體與硬體，並可特別針對
某一種特殊用途所開發，也就是所謂的客制化
(Customize)。在新興的嵌入式系統產品中，常見
的有手機、PDA、GPS 或是嵌入式伺服器（embedded 
server）及精簡型終端設備（thin client）等。 
與 PC 作業系統比較，嵌入式作業系統並不要
求具備廣泛的功能，但必須能夠依據系統設計規
格，有效率的發揮出硬體的運算能力，使得產品達
到效率與價格比的最佳化。較普遍使用的作業系統
包括 Palm OS、Windows CE、Nucleus Plus、MITRON
與 Linux 等。在硬體設備上，嵌入式系統所需之處
理器及晶片組要求體積小、散熱佳、省電等功能，
微處理器核心架構則通常屬於 RISC 架構，透過多
個高速站存器來儲存運算資料，如 ARM 與 MIPS 皆
屬這類架構。現今嵌入式系統產品已廣泛使用 ARM
處理器核心架構，IC 製造商並整合週邊控制或特殊
硬體加速電路於一顆單晶片中，常見的廠牌如
Samsung、TI、Intel、Motorola、ATMEL、CirrusLogic
與 Contexant 等，本研究使用 Samsung ARM 9 
S3C2410 晶片[2][3]，並搭配 linux 作業系統核心
2.4 版。 
 
 
四、研究方法 
 
本研究所使用之方法可分別依設計系統說明
如下： 
1. 交通行為偵測與紀錄嵌入式系統開發： 
本研究所研發之嵌入式系統採用平台的核心是
Samsung 公司 S3C4510B 系列中央處理單元
(CPU)[2,3,4]，此 CPU 是以 Advanced RISC 
Machines 公司 32-bit ARM7TDMI 為核心，採
用低功率 32 位元的 RISC 架構，混和 Thumb 的
16 位元壓縮的指令集所組成。晶片內嵌可組態
的 8K 位元快取/SRAM 及 10100BaseT 乙太網路
控制晶片，大部分整合的功能區塊都是用 HDL
語言所描述，利用電路合成的方式所製作，並
通過 Samsung 公司 ASIC 測試環境驗證。                   
2. 無線電資料傳輸控制介面： 
無線電資料傳輸主要目的是將判斷結果傳至主
控設備端，或於各控制板之間進行資料傳送。
由於考量往後實際於路口測試與監控時，路口
各方向來車之狀況需做一整合與計算，方能得
到最佳之即時控制。因此於內嵌式系統控制板
上規劃無線電傳輸模組，除了可即時相互傳輸
資訊外，更可避免繁複之接線問題，提高使用
之方便性。 
3.電源供應與控制背板之研發： 
控制背板主要提供各子卡穩定電源、系統標準
時間控制與對外輸出輸入控制單元，12V 直流
電源供應可由交流電經變壓器轉換或直接由電
瓶提供，經控制背板內穩壓及變壓器，提供
12V、5V 與 3.3V 電壓，系統標準時間控制使用
MAXIM DS1672 即時時鐘晶片與石英震盪器計算
日期與時間，DS1672 內部具有電源失效偵測功
能，一但外部電源消失，就會立刻切換到備用
電池電源，以確保日期與時間計算的精準度。
輸出輸入控制可利用指示燈提供系統運行資
訊，也可利用控制開關切換所需之運行模式，
各子卡所連接之匯流排皆提供標準電壓，各晶
片相互間之通訊可利用 I2C(Inter-IC)2 線串
列通訊作為溝通媒介，最高可達 400K BPS，也
可利用 I/O 點建立並列傳輸介面，更可利用
UART 串列傳輸介面與網路介面互相溝通。背板
設計時將盡量保留各子卡跳線機制，於實驗測
試時可更加彈性化。 
4. 連續影像中移動偵測分析： 
如何從連續影像中分離出移動物件特徵，為交
通影像分析中主要的課題之一，一般交通影像
中移動物件數量多且頻繁，研究有效且快速的
方法建立影像背景參考圖，對交通行為的分析
有很大的幫助。 
考慮發生於時間 ti 和 tj 的影像 f(x,y,ti)與
f(x,y,tj)之間的變化，影像差值可定義如下： 
 4
速度分量 1v 與 Y 軸速度分量 2v 。 
 
 
五、交通行為偵測與紀錄嵌入式模組程式分析 
 
本期研究所採用平台的 ARM 核心 CPU 是韓國
Samsung公司以ARM920T為核心所製成的RISC微處
理器，主要設計應用於有低功率，高效能且體積小
等要求的手持式裝置或應用產品。晶片提供 16kb
指令 cache，16KB 資料 cache，實體記憶體管理
MMU，LCD 控制器，NAND Flash Boot Loader，3 組
UART 通道，4 組 DMA 通道，4 組計時器 (含 PWM 功
能) ，I/O 阜，8 組 ADC 通道(10-bit) ，IIC 匯流
排介面，IIS 匯流排介面，USB Host，USB device，
SD Host & MMC介面等功能。圖1為 Samsung S3C2410
功能方塊圖。 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
圖 1 Samsung S3C2410 功能方塊圖 
 
    交通行為偵測與紀錄系統程式設計主要利用
S3C2410 晶片提供之 USB Host 介面驅動 USB 攝影
機，影像資料載入記憶體後，利用軟體壓縮將影像
資料轉換成 JPEG 格式，再經由 SD(MMC)介面儲存至
外部儲存設備。以一張 320X 240 之彩色影像為例，
影像載入記憶體後佔有 230400 位元組，經 JPEG 壓
縮後約只剩 6000~8000 位元組，除提高儲存效率為
並藉此增加儲存空間。 
    基於實際使用考量，本研究取像間隔設為 2
秒，以 512 Mega 容量之 MMC 卡，約可存放 35 小時
影像資料。圖 2 為程式流程圖、圖 3 為模組實體圖。 
 
 
資料儲存
擷取影像
系統
啟動
影像壓縮
JPEG格式
掛載外部
儲存設備
驅動USB
攝影機
 
圖 2  內嵌式影像處理程式流程圖 
 
     
 
 
 
 
 
 
 
 
圖 3  內嵌式影像處理模組實體圖 
     
六、交通行為偵測與記錄嵌入式模組建置 
本研究所建立交通行為偵測與紀錄系統中之
無線電模組提供使用者透過無線介面推動外部負
載，主控晶片選用 ATMEGA48(ATMEL)8-bit 微控
器[4][5]，晶片提供 4K Bytes Flash，256Bytes 
EEPROM(Endurance: 100000 Write/Erase 
Cycles) ，512 Bytes internal SRAM，2 組計時器，
6 組 PWM 通道，8 組 10 bit ADC 通道，Master/Slave 
SPI 介面，On-chip 類比比較器，23 組 I/O 控制等
功能。 
編碼器使用 HT-12E(HOLTEK)，提供 8-bit 定址，
4-bit 資料，1 組觸發(Trigger) ，解碼器使用
HT-12D(HOLTEK)，提供 8-bit 定址，4-bit 資料
[6][7]。無線電收發模組使用 315MHz，發射端利用
主控晶片之串列阜，連接電位轉換晶片 MAX232，提
供與個人電腦通訊之介面。 訊號輸入方面，利用
主控晶片之中斷控制腳位，接上光耦合器 PC817 隔
離，可選擇輸入端點帶電與否，並提供跳線腳位。
訊號輸出方面，利用繼電器隔離輸出端電流與實際
