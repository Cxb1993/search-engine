Therefore, we propose the speed estimation system 
that consists of three main modules: vehicle 
detection, image motion estimation and the actual 
speed of transformation. Preliminary results show 
that using optical flow information to estimate the 
speed presents feasibility. 
英文關鍵詞： Pattern recognition, Optical flow technology 
 
摘要 
 
車速的估測在交通監控系統中扮演著非常重要的角色，例如行車速度上之違規偵測
或其他交通參數的估計等。傳統上，最常用的車速估測系統是根據雷達探測器，它們經
由從目標車輛反射出之信號來估測出速度值。不過，雷達的速度估測系統有其缺點，例
如價格昂貴或是無法同時估測多台車輛等問題，因此有其使用上的限制。在本計畫中，
我們提出了一個基於視覺式的車輛速度估測系統，其中的速度估測核心為光流技術。由
於光流估測的準確性高度影響車速估計的結果，而傳統的光流演算法並不令人滿意，因
此，我們設計一個新的基於特徵的光流方法，並利用多張影像資訊來增加準確度。由於
大多數車輛皆為剛體，我們只需要找到一個稀疏的高準確性光流場加上準確的影像與世
界座標之對應關係，即可得到良好的車速估測結果。因此，我們提出一個包含包含三個
主要模組的車速估測系統：車輛偵測，影像運動估計和實際速度轉換。初步的研究成果
顯示，利用光流資訊估計車速具有高度之可行性。 
 
關鍵字：影像辨識、光流偵測 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
前言 
本計畫開發出一套利用視訊技術估測車速之系統。此系統可應用於智慧型交通監控，例如行車速
度上之違規偵測或估計交通參數等。傳統上，最常用的估測車輛的速度系統是根據雷達探測器經由從
目標車輛反射出之信號來觀察。不過，雷達的速度估測系統有幾個缺點。首先，雷達傳感器比被動相
機的成本較昂貴。其次，估計精確度在很大的程度上取決於的雷達傳感器方向和機動車輛的方向之角
度。第三，根據雷達系統之車速估計不能安裝在附近有大型物體的環境，如大的交通指示牌，或是一
台固定在路邊停放之卡車，或大型建設，因為他們會影響雷達的反射波。此外，雷達為基礎的系統無
法同時估測所有行進車輛的速度。本計畫的目標即為建構一個以純視覺為基礎之車速估測系統，其優
點包含準確車輛偵測結果、同時估計多輛車的速度以及處理環境的改變能力。 
研究目的： 
在本計畫所提出的測速系統中，首先會偵測畫面中是否有車輛的存在。如果車輛出現在偵測區域
時，車速的估計系統即會觸發。整個系統分為三個主要模組：車輛偵測，影像運動估計和實際速度的
轉換。首先，在車輛偵測的模組部分，包括背景建模，消除錯誤偵測，與特徵點的選擇。在影像運動
估計的部分，我們採用一個結合多張影像的光流演算法並套用在選擇出來的特徵點上，計算出影像速
度。最後在實際速度的轉換模組部分，我們將計算影像平面與真實路面的 Homography 轉換，而求得
光流值通過該轉換所計算出之真實速度。 
文獻探討： 
在過去的相關工作方面， 1999年，Suzuki和 Kanade提出了一個使用光流的測量方法估計汽車運動和
方位 [1]。在此方法中，一個攝影機頭安裝在移動的車輛，並且使用延伸式卡爾曼濾波器用於解決運動
和方位參數。此方法用於自動控制和障礙物檢測。近期，He和 Yung [3]提出由兩個連續影像估計車速
的算法。該方法從圖像轉換到汽車運動速度接近[2] 所提出之方法。在大多數的速度估算方法，車輛偵
測，影像運動估計，與實際速度轉換是三個主要問題。 
除了行駛中的車輛檢測，另一項重要工作，是需要執行的估計車輛在影像中的速度。我們知道，光流
估計是廣泛被採用的一種運動估計法。在過去有名的光流估測文獻有[4][5][6][7][8]。從過去文獻的討
論，雖然孔徑問題(aperture problem)可能發生在許多地方，在良好的特徵點仍然可以取得可以接受的光
流結果。我們採用研發之多圖像光流法，它是一種基於特徵點的方法並可以滿足高精確度的需求。利
用金字塔的階層式實作方式也納入我們的估計模型。 
從車輛影像運動的轉變為實際車速是系統要執行的的最後一個任務，它可以通過建構圖像坐標映射到
二、影像運動估測 
光流場的估測對於車速計算的準確性有決定性的影響。車速的估測會非常敏感於光流估測的準確度，
因此我們設計一個新的利用結合多張影像資訊的方法來解決這個問題。在本計劃中我們採用結合多張
影像的新方法，以 Lucas-Kanade為基礎再延伸至多張影像，並使用階層式建立模型方式來實作以增加
準確度。本方法之數學模型如下： 
( ) ( )[ ]∑ ∑−
−= Ω∈
−−−−+− ++−++++=
1 2111111 )1()1()(
T
Tj k
L
r
L
ik
jL
r
L
ik
jL
r
i
jjIjjI vvxvvxvε
 
其中，vL 代表第 L 階層之光流估測值。當光流由 vL 傳回至 vL-1 時，使用式子
LL
i vv 2
1 =− 。Ij為時間 j
之影像函數，xk為該影像上之第 k 個點。此方法雖然有著平滑度不夠的缺點，但是實作容易並且在好
的特徵點能達到高度的準確度，非常適合用在車速偵測，因此本計劃將採用此方法來進行光流估測，
並且持續改進其不足之處。 
 
三、真實速度轉換 
我們假設影像與路面之轉換為一個 Homography變換。在我們的應用中，我們建構 Homography關係如
圖四所示。在兩平面上給定 p1 = (x1, y1,1)T 與 p2 = (x2, y2,1)T ，則 Homography 矩陣 H 可以由下式所
定義[12][13]： 
λp2 = H p1 
其中 ⎥
⎥⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
=
13231
232221
131211
hh
hhh
hhh
H
 是一個具有八個未知數的 3 乘 3 矩陣。因此，我們需要至少平面上四組對
應點才能解出 H。所以我們必須要實際測量道路幾何，以求得這些對應坐標。 
 
圖四：影像座標系與世界座標系(路面)之轉換 
迭代 Lucas-Kanade方法，以及本計畫所使用的Multi-frame方法。列在表 3.2的平均估計誤差的三種方
法的數值數據。 
 
表 1.不同光流法在車促估測問題上的誤差 
 平均估測誤差(pixels)
Lucas-Kanade 0.2289 
迭代 Lucas-Kanade 0.0984 
Multi-frame 0.0005 
 
在現實中，我們很難獲得影像中的每個車輛的實際速度。從實驗中我們發現，如果我們手動標記車身
的特徵點，所計算出車輛速度將會非常接近真實的車輛行駛速度。因此我們採用此方法來做為
groundtruth 的車速資料。對於每個序列中的影象，系統會自動的找出畫面中的所有車輛並標記出特徵
點然後估計其速度。我們比較了傳統的 Lucas-Kanade方法和迭代的 Lucas-Kanade方法以及Multi-frame
方法所估測的速度，如圖六所示。平均車速則是用各畫面所計算的車速加以平均，這大約是車輛的實
際速度。我們發現提出的Multi-frame方法其結果與真實車速最為接近。 
 
圖六:不同光流法的速度估測比較圖 
 
事實上，由於車身高度的影響，在不同位置的特徵點的速度估計結果會稍有不同。為了觀察在不同的
位置對速度估計的影響，我們做了一個實驗。我們採取了車頂、車身和車輪的特徵點，並手動建立這
[13] B. McCane and K. Novins, “On Benchmarking Optical Flow”, Computer Vision and Image 
Understanding, Vol. 84, pp.126-143, 2001. 
 
99 年度專題研究計畫研究成果彙整表 
計畫主持人：莊暢 計畫編號：99-2622-E-238-011-CC3 
計畫名稱：以光流資訊為基礎之視覺式車速估測系統 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 1 1 100% 新型專利申請中 專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 1 1 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
