 可供推廣之研發成果資料表 
■ 可申請專利 ■可技術移轉                                        日期：100 年 5 月 30 日 
國科會補助計畫 
計畫名稱：自由造型軟性產品之即時性客製化設計 
計畫主持人：瞿志行 
計畫編號：NSC99-2628-E-007-026 
學門領域：工業工程與管理 
技術/創作名稱 基於人臉三維幾何之呼吸罩大量客製化設計 
發明人/創作人 瞿志行、黃思皓、蔡尤英、楊智凱、曾浚洋 
技術說明 
本研究針對三維呼吸罩設計，提出一項以機器學習為基礎的
客製化設計方法。過往方法需以精密的三維掃描儀器，擷取使用
者顏面幾何資訊方能進行設計，本研究的方法僅需使用量測少量
的使用者參數，即可產生高擬真的三維人臉幾何模型。此方法先
從人臉幾何資料庫中擷取建模資訊，包含 495 筆三維模型，採用
主成份分析及線性迴歸方法，來建構人臉量測參數與三維幾何間
的對應關係。接著 AdaBoost.R 演算法大量預先定義的量測參數
中，自動挑選少量相關的參數，僅需使用者輸入四個參數值，即
可合成出近似之三維人臉幾何。最後採用大規模的 10 折交叉驗
證過程本研究於自動大量客製化設計上的效能。 
This work presents a learning-based design customization 
system for respiration mask product. Traditional works adjust the 
product model according to the on-line 3D body scan. In order to 
realize the mass customization, our proposed method can 
automatically generate a synthesized 3D face model from a small set 
of measurable facial parameters. The parameters of each customer 
can be estimated by simple instruments, such as calipers and 
compasses. The learning stage in our proposed system applied several 
statistical methods to acquire the modeling information from the 
learning dataset, which is composed of 495 scanned 3D geometric 
data. The principal component analysis and linear regression are 
adopted to construct the relationship between measurable facial 
parameters and synthesized 3D model. A parameter selection 
algorithm based on AdaBoost.R is proposed to extract few important 
parameters, which are highly relevant to 3D geometry, from 7,176 
parameters candidate pool. For each customer, the on-line product 
附件二 
 一、中英文摘要 
面對經濟全球化的競爭，以生產、製造或成本為競爭利基的傳統思維，已逐漸轉變為產
品設計與服務創新。因應消費個人化的趨勢，產品除了滿足功能需求之外，更應強調使用者
品味與風格的展現，特別是所謂的軟性產品，著重與穿戴者的整體搭配感，具有高度客製化
的設計特性。現今虛擬產品評估大多基於 CAD 或 AR/VR 技術，前者之互動環境不佳，整合
異質資訊支援不足；後者則缺乏幾何建模功能，無法進行即時性設計修改。有鑑於此，本計
畫將針對自由造型之軟性產品，結合跨領域知識，建構創新之即時性客製化設計技術。於輕
量化的擴充實境中，以三維眼鏡為標的，將虛擬模型融入使用者的實際視訊中，藉此評估自
身與產品設計的搭配程度；結合人臉掃描儀與影像辨識技術，提供無標記之瞳孔追蹤功能，
透過擬真的產品試戴過程，準確掌握個人化設計的需求。將發展自由幾何的參數化設計方法，
使用者可即時調整產品外型、顏色與材質，克服以往產品評估的限制。本計畫以人為為核心
媒介，實現前瞻性的大量客製化服務，賦予軟性產品嶄新的設計模式。於學理創新方面，則
突破了以往三維網格變形的限制，並結合CAD與AR技術的優勢，改善產品與人的互動功能。
期望透過本計畫的執行，應用資訊技術於產品設計創新，開啟一系列嶄新的研究議題。 
關鍵字:產品客製化、自由造型、參數化設計、軟性產品、擴充實境 
 
Due to global competition in economics, the traditional thought that the core competence of a 
company is focused on production, manufacturing, and cost has gradually transformed into the 
niche based on product design and service innovation. In addition to functional requirements, 
modern products emphasize even more on manifestation of the taste and styling of the end users. 
Especially soft products such as glasses, ornaments, apparels, and wigs are characterized with high 
design customization that matches between product styling and the appearance of people wearing 
the products. The current practice of virtual product evaluation is mostly based on either CAD or 
VR/AR technologies. The former cannot offer good interaction with the end users and support 
integration of the data of heterogeneous formats. The latter is lack of geometric modeling functions 
and thus cannot allow real-time design modifications. To overcome these problems, with a focus on 
freeform soft products, this research will develop innovative technologies of real-time design 
customization by integrating multiple disciplines. Virtual product models will be merged into 
realistic video stream of the product user in a light-weighted augmented environment. Using 3D 
glasses frame as an example, the prototyping system proposed by this work aims at facilitating 
assessment of the match between product design and the end-user itself. A new marker-less tracking 
function will be developed to identify the eyes in a human face. This helps dynamically simulate the 
wearing process of the glasses frame. The design customization based on this method allows the 
user to change the appearance, color, and texture of the product in a real-time manner. This work 
will realize advanced mass customization services for human-centric product design. It opens a new 
design approach for soft products. The technical merits include novelty in parametric design of 
freeform geometry and improvement of human-product interaction by complementing CAD and 
VR/AR. A series of new research topics will be generated by the stimulus offered by this work. 
Keywords: Product customization, freeform geometry, parametric design, soft product, augmented 
reality
除了適用於工業產品的參數化 CAD 模型之外，爲了符合美學或功能的需求，自由造
型(freeform)幾何也已被廣泛使用於產品造型。然而自由造型之建模過程複雜，其客製化設
計的相關研究相當缺乏，大多侷限於 FFD(Free Form Deformation)的延伸應用，通常無法以
工程參數控制幾何，限制其實際應用價值。 
 
2. 研究方法 
本研究將專注於眼鏡及呼吸罩兩項與人臉相關的產品，主要開發的技術包含一套基於
擴增實境的虛擬眼鏡試戴系統，以及另一套自動產生客製化呼吸罩的大量客製化演算法。
以下的研究方法介紹，將著重於兩個系統的架構簡介，以及描述系統裡的關鍵技術開發。 
 
眼鏡試戴系統 
這個研究將整合多項先進技術，包含擴增實境、機器視覺、電腦圖學、幾何建模…等，
這裡面包含多項關鍵的核心功能組，圖一描述整體系統架構。使用者在使用本系統前，需
先進行人臉三維掃描，並在 on-line learning stage 中自動產生眼角、嘴角在不同角度下的投
影影像，接著使用 AdaBoost 演算法產生眼角、嘴角偵測器。第二部份的 on-line augmented 
reality system 使用 ARToolKits™為基礎，結合人臉位移、角度判斷方法，再加上參數模型
產生的眼鏡三維幾何模型，即可產生即時試戴的影像，此系統最大的特徵是不需使用任何
marker，即可追踨人臉並繪製虛擬眼鏡。 
 
 
圖 1 眼鏡試戴系統架構圖 
 
 
 Input : sequence of N labeled examples〈(x1,y1),…,(xn,yn)〉 
      Distribution D over N examples 
      Weak learning algorithm WeakLearn 
      integer T specifying number of iterations 
Initialize the weight vector 1 ( )  for i=1...Niw D i=  
Do for t = 1,2,…,T 
1. Set 
1
t
t
N t
ii
wp
w=
= ∑  
2. Call WeakLearn, providing it with the distribution pt; get back a hypothesis ht: 
X→[0,1] 
3. Calculate the error of ht : 1 ( )
N t
t i t i ii
p h x y== −∑ε  
4. Set /(1 )t t t= −β ε ε  
5. Set the new weight s vector to be 1 ( )1 t i ih x yt tt i tw w
− −+ = β  
Output the hypothesis 
1 1
1 1 11 (log ) ( ) log
2( )
0
T T
tt t
t tf
if h x
h x
otherwise
= =
⎧ ≥⎪= ⎨⎪⎩
∑ ∑β β  
圖 4 AdaBoost 學習演算法 
 
人臉位移、旋轉參數判別系統 
接著可以利用眼角、嘴角偵測器設計出一套不需要 marker 的自動人臉位移、旋轉參數
判別系統，將頭部運動定義為一連串的三維位移、旋轉運動，每一個動作將可用六個參數
來描述（包含三維空間中位移三參數、旋轉三參數），計算最適參數組合將是一個最佳化的
過程。首先，利用圖 4AdaBoost 演算法中的分類結果，定義單一眼角、嘴角的配適程度指
標如下： 
1
1
1(log ) ( )
1log
T
tt
t
T
t
t
h x
Fitness
=
=
=
∑
∑
β
β
 
接著，針對每一種旋轉、位移參數組合，皆可投影產生六個特徵點在圖像中的位置，
分別計算此六個特徵點的配適程度指標並加總，最後求得具有最大加總值參數組合為所求，
如圖 5 所示，左圖為此影像的最適人臉位移、旋轉設定。 
 
 圖 7 不同角度下試戴眼鏡的結果 
 
大量客製化呼吸罩設計架構 
首先透過學習演算法，找出與人臉三維幾何高度相關的量測參數，並建立參數與幾何
間的統計對應模型。如圖 8 所示，第一個步驟為收集大量三維人臉掃描資料，並在每筆資
料上點選 24 個特徵點。接著根據特徵點產生大量的長度及角度的量測值。接著，採用基於
AdaBoost.R [2] 演算法開發的特徵組選取方法，找出與三維幾何高度相關的量測參數。最
後，整合主成份分析與線性迴歸模型，建構量測參數與三維模型間的對應關係。。 
 
 
圖 8 學習系統架構圖 
 
在客製化設計上，將運用使用者輸入的四個量測參數值，配合及學習演算法輸出的模
型，自動合成近似的人臉幾何模型。將呼吸罩接合面的二維座標投影於人臉三維模型上，
24 landmarks labeling 3D Head  
Database 
Principal Component 
Analysis (PCA) 
Facial features 
calculation
Eigen-head 
coefficients AdaBoost.R algorithm 
7,176 parameters
Correlated parameters
持原始資料裡的資訊量，以供進一步辨識、偵測、合成等應用。對於人臉影像、幾何相關
研究，已經存在多種機器學習演算法來解決各種不同的應用，諸如：主成份分析 PCA [5], 支
援向量機 support vector machines (SVMs) [6]，類神經網路 artificial neural networks (ANNs) 
[7]，以及本論文採用的 AdaBoost 演算法 [8]。 
 
 
圖 10 AdaBoost.R 參數組選取演算法 
w୧,୷
ଵ ൌ
Dሺiሻ|y െ y୧|
Z
 
Z ൌ ෍ Dሺiሻ
N
୧ୀଵ
න |y െ y୧|dy
ଵ
଴
 
p୲ ൌ
w୲
∑ ׬ w୧,୷
୲ dy
ଵ
଴
N
୧ୀଵ
 
ε୨ ൌ ෍ ቤන p୧,୷
୲
୦ౠሺ୶౟ሻ
୷౟
dyቤ
N
୧ୀଵ
 
S୲ ൌ arg min୨
ε୨ 
w୧,୷
୲ାଵ ൌ ቊ
w୧,୷
୲
w୧,୷
୲ β୲
      
if y୧ ൑ y ൑ hSTሺx୧ሻor hSTሺx୧ሻ ൑ y ൑ y୧
otherwise
 
Input:  
Sequence of N learning samples ൏ ሺxଵ, yଵሻ, … , ሺxN, yNሻ ൐ where xi is the measurable parameters and 
y୧ א Y ൌ ሾ0,1ሿis the each coordinates value in PCA space 
Distribution D over the examples 
Integer T specifying the number of selected parameters 
Initialize: 
For each i=1,…,N and y א Y ,  set 
where 
Iterative Learning: 
Do for t = 1,2,…,T 
1. Set 
2. Call weighted linear regression function to generate a finite series of hypotheses, providing 
each hypothesis with the weight matrix wt and data ൏ ൫xଵ,୨, yଵ൯, … , ൫xN,୨, yN൯ ൐ where xi,j 
denotes the j-th parameters in i-th sample 
3. Define the weighted error of hypothesis hj(x)as: 
4. Select the best hypothesis with respect to the minimum weighted error: 
5. Set β୲ ൌ
εS౪
ሺ1 െ εS౪ሻ
൘  
6. For each i=1,…,N and y א Y , set the new weight vector to be 
Output 
The selected parameter indices: S1,S2,…,ST   
 系統測試結果 
儘管精準產生三維人臉模型，似乎能產生精確的客製化呼吸罩，然而仍需要探討產品
在實際配戴，包含漏氣程度評估及舒適度分析。本節將模擬試戴的過程，將產生的客製化
呼吸罩，與該研究樣本的真實掃描人臉疊合，以三維位移與旋轉共六個自由度的改變，進
行呼吸罩位置的調整，找出最適配戴呼吸罩的角度與位置。 
在此最佳化過程中，需先定義一個目標函式，以評估配戴的適合程度。此目標函式結
合兩種不同的設計缺失：(1)漏氣空隙：呼吸罩邊緣與人臉間的空隙，將會造成呼吸罩內外
的氣體交換，影響呼吸罩的阻絕功能。(2)配戴壓力：呼吸罩與人臉幾何交疊部份的深度，
可用來描述佩戴時的下壓力，交疊越深代表配戴時壓迫感越重，可描述配戴時的舒適度，
尤其針對需要長時間配戴的呼吸罩。 
藉由呼吸罩空隙面積與呼吸罩及人臉幾何交疊面積，可定義出不適性評估值（單位
mm2），透過虛擬配戴過程，可求得不適性評估最小的呼吸罩位置。表一為 10 折交叉驗證
實驗中各組的平均不適性評估值。實驗結果顯示三種不同的設定，第一種為目前市售的單
一尺寸呼吸罩，第二種為使用專家參數的客製化結果，最後則為本研究方法所設計的呼吸
罩。相較於市售產品，以提出的設計方法配合專家參數將有 9.28%的提昇，自動選取參數
更進一步有 26.32%的配適度提昇。分析各組間的差異性，除了第 10 組專家參數最好外，
其餘各組皆由 AdaBoost.R 選取參數獲得最好的結果，不論哪一組客製化參數設定，相較於
單一尺寸呼吸罩，皆能得到更佳的合適度評估值。 
 
表 1. 三種不同呼吸罩配戴後的不適性評估值 
 固定尺寸呼吸罩 專家參數 客製化呼吸罩
自動選取參數 
客製化呼吸罩 
Group 1 55343 63191 51172 
Group 2 77619 72018 53119 
Group 3 80116 75610 55476 
Group 4 69497 57319 49932 
Group 5 87446 63343 52062 
Group 6 71875 77600 55257 
Group 7 82268 67309 55530 
Group 8 64780 64296 54751 
Group 9 82041 65603 48995 
Group 10 72404 68098 71424 
Average 74338.9 67438.7 54771.8 
 
圖 12 展示一個真實的範例，以比較市售呼吸罩與客製化呼吸罩的差異，圖 12(a)為客
製化結果最適配戴時的側面圖，圖 12(b)為市售呼吸罩實際配戴的側面圖，可明顯看出下巴
處因曲面不合而產生大量漏氣。圖 12(c)則顯示市售呼吸罩在最適配戴時，仍有許多幾何疊
合壓力與漏氣空隙。 
 
參考文獻 
1. Y.H. Yang, The Establishment of 3D Labor’s Craniofacial Database and the Application of the 
Design of Craniofacial Protective Devices, 2002. 
2. Y. Freund and R. E. Schapire, “A decision-theoretic generalization of on-line learning and an 
application to boosting.” Computational Learning Theory. Eurocolt, pp.23 -37, 1995 
3. C.H. Chu , Y.T. Tsai , C.C.L. Wang, and T.H. Kwok , “Exemplar-based statistical model for 
semantic parametric design of human body,” Computers in Industry, Vol. 61, pp. 541–549, 
2010. 
4. T.M. Mitchell, Machine Learning, MIT Press and McGraw-Hill, New York, 1997. 
5. K.K. Sung and T. Poggio, ”Example-Based Learning for View-Based Human Face Detection,” 
IEEE Trans. Pattern Analysis and Machine Intelligence, vol. 20, no. 1, pp. 39-51, 1998. 
6. E. Osuna, R. Freund, and F. Girosi, “Training support vector machines: an application to face 
detection,” Proc. IEEE Conf. Computer Vision and Pattern Recognition, pp. 130-136, 1997. 
7. H.A. Rowley, S. Baluja, and T. Kanade, “Neural Network-Based Face Detection,” IEEE 
Trans. Pattern Analysis and Machine Intelligence, vol. 20, no. 1, pp. 23-38, 1998. 
8. P. Viola and M. Jones “Roust Real-Time Face Detection,” Int’l Journal of Computer Vision, 
vol. 57, pp 137-154, 2004. 
9. K. Tieu and P. Viola, “Boosting Image Retrieval,” Int’l Journal of Computer Vision, vol. 56, 
pp 17-36, 2004. 
10. S.H. Huang, Y.H. Chu, S.H. Lai, and C.L. Novak, “Learning-based Vertebra Detection and 
Iterative Normalized-Cut Segmentation for Spinal MRI,” IEEE Transactions on Medical 
Imaging, vol. 28, no. 10, pp. 1595-1605, 2009. 
 
  
國科會補助計畫衍生研發成果推廣資料表
日期:2011/05/31
國科會補助計畫
計畫名稱: 自由造型軟性產品之即時性客製化設計
計畫主持人: 瞿志行
計畫編號: 99-2628-E-007-026- 學門領域: 資訊系統
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
舉辦 2010 Mass Customization and Personalization Conference，擔任
Program Chair 
正與財團法人鞋技中心洽談產學合作 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
