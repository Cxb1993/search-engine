  2 
解決問題的對策。Aamodt建構一套案例式推理的運作流程，其中包含了四個重要的週期
（CBR cycle），包括：擷取（retrieve）:挑選出最相似的個案或個案集；校正（revise）：
針對所提出問題來挑整原案例中的解決方式；再利用（reuse）：嘗詴應用這些相似個
案的資訊和知識來解決問題；保留（retain）：紀錄問題解決方式的經驗以供未來使用
(Aamodt,1994)。 
事實上，過去已經有學者提出結合案例推理與基因演算法的觀念，但就我們蒐集相
關文獻所得，尚未有將此結合技術應用至網路服務組合方面的研究；然而，根據Oman和
Pádraig並非所有問題皆適合的論點(Oman and Pádraig,1997)，此一問題便值得進行探
討。因此，本計畫將嘗詴應用在解決網路服務組合問題上。藉由案例式推理和基因演算
法的技術的結合，以期能夠提昇或改善雲端(網路)服務組合的品質與效率。 
 
3.一般化網路服務組合模式 
本計畫主要是進行使用者的需求分析之後，在網路伺服端來篩選符合條件的網路服
務，再利用五個非功能屬性來當作評選標準，最後則找到並整合相關的服務。 
    網路服務評選則是透過計算其評選值，從中挑選出具有最佳評選值者 
 
 
                                                                        (1) 
 
 
 
 
其中 Qi,p是指第 i 個候選網路服務的 p 品質屬性，Qpmax為候選服務中品質屬性 p 的最大
值，Qpmin為候選服務中品質屬性 p的最小值；若 Qpmax與 Qpmin值相等時，則定義正規化的
結果為 1。其中 Wp 是品質屬性 p 的權重，在本計畫中採計五種各非功能品質屬性
(p=1,…,5)，包括了執行價格(W1)、執行時間(W2)、可靠度(W3)、可取用度(W4)及聲譽(W5)。 
在網路服務候選元件較少的情況下，經由上述公式計算出各單一服務的評選值，再
搭配層級分析法所求得使用者的非功能性需求偏好權重，即可依據動態規劃法中的後推
式解法(backward approach)找尋網路服務最佳組合路徑，其中還必頇考量組合限制，
而不是全由評選值加總來做為網路服務組合的依據。  
    在真實情況下，由於服務組合數過多，無法以非常耗時的動態規劃方式來求解，所
以就有學者嘗詴使用各種最佳化技術，尤其基因演算法來求取最佳組合(Huang et 
al.,2009; Li et al.,2010；Liang and Huang,2009)，其主要原因就在於基因演算法
之效率的確可呈現大幅的改善；再加上如果使用者不耐久待，基因演算法演化過程當中
任一階段的結果，皆可視為良好組合(近似解)先行被採用，而在同時系統持續尋求最佳
服務組合，以提供使用者後續更佳的服務組合的選擇；這是絕大部份其他最佳化方法所
無法提供的功能。不幸的是，由於基因演算法本身的高隨機性，導致不能保證一定會收
斂到問題的最佳解。此外，不難發現在網路服務伺服器端，會累積存有許多之前不同使
用者需求之類似網路服務組合的案例可供使用。因此結合了這些觀點，本計畫則提出了
案例式推理結合基因演算法，來找尋網路服務最佳組合之運作方式。主要是將案例資料
庫中的相似案例，加入至基因演算流程中，以作為初始染色體的值，再進行具有限制性
條件的基因繁衍過程，以提昇基因演算法運算的收斂品質及收斂速度，藉以達到找尋網
    
    
  11,0
5
1
5
3
minmaxmin
,
2
1
minmax
,
max
max
























p
pp
p
pppppi
p
ppppip
WW
WQQQQ
WQQQQ
MaxTQ
且
  4 
 
圖 2.本計畫定義之案例格式 
                   
 
 
       
                                                                        (2) 
 
根據本計畫定義的案例格式，當新的使用者需求產生時，我們會先轉換求出其相對
應的「網路服務元件壓縮表示」及「使用者非功能性需求」，再嘗詴利用此兩種表示資
料，來檢索出案例資料庫中與此一新使用者需求相近的案例，再將相近案例的「最佳網
路服務組合」，作為後續限制性基因演算法運作的初始狀態。然而，相近案例的檢索並
非那麼直覺即可進行，我們認為應該依序考慮到幾點： 
(一) 考量到當前網路服務狀態與參考案例間的異動不能過大，可利用「網路服務元件摘
要資訊」來進行初步篩選，先行排除部份不可參照的案例。 
(二) 在整個網路服務系統運行過程當中，每當網路服務提供者向伺服器要求更新服務品
質參數或組合限制條件，或是 UDDI伺服器不定時主動地偵測出網路服務條件有所變
更時，本系統將採取三個動作：變更該網路服務識別代碼，將舊網路服務識別代碼
刪除，及案例資料庫中包含該舊網路服務識別代碼之案例，亦一併刪除。這些動作
的目的在確保登錄網路服務的可使用性及相關品質參數的正確性。 
(三) 針對使用者非功能性需求則進行較為寬鬆的比對：原則上非功能性需求中，案例中
同一品質屬性的限制條件，應該較新使用者的條件嚴格或相等下(以數線觀點來看，
滿足條件的點集合呈現被完全包含的關係)，案例方具有參考性。故採用的比對方式
為：案例的五項非功能屬性限制條件，同時滿足較新使用者的條件嚴格或相等。 
依據公式(3)，將目前使用者的需求權重與案例的需求權重經過計算後，
其差異總和不得大於設置的門檻值 T，否則將不得作為參考案例。 
   
  ,51,2,i , 0 h subject to
max
i 
 
i
ii
W
WhPTQFN
  
   


 

otherwise
WhifWh
WhP iiiiii
0
02
  6 
4.1. 實驗環境、資料暨特性分析 
    後續描述的實驗數據，皆是在硬體配備 CPU-Intel Core 2 Quad Q8200@2.33GHz、
和4G記憶體的個人電腦下執行，在 Microsoft Windows 7作業系統下，撰寫Visual Basic 
6.0程式，並使用了 Microsoft Access 2007 作為網路服務及案例之資料庫建置軟體。 
    由於目前的(雲端)網路服務環境尚未完全成熟，研究者尚未能收集到實際數據來進
行方法的測詴。所以我們以一致化(uniform distribution)隨機亂數來產生三階段，每
階段 200個服務之五項服務品質數值、服務類別和組合限制條件。此外，為了加強尋找
最佳服務組合的過程的困難度，我們將具有較佳品質的服務比例降低到 1/5，以降低隨
機產生良好服務組合的機率。 
由於在本實驗測詴的問題當中，相較於使用動態規劃法執行一次約需 8小時，基因
演算法整個演化過程所需的時間，隨著收斂的世代不同，一般約需 40 秒~2 分鐘左右。
由於目前案例資料庫不大，所以計算相似案例和存取所需的時間極短，故在後續進行處
理所需時間比較時，我們直接觀察演化所需世代數目即可。另外，關於收斂結果的好壞，
我們將收斂時的適應值，除以動態規劃法所找到該問題最佳解的適應值，以百分比值的
方式來呈現；亦即如果最後可以收斂到最佳解，其值應為 100%。 
 
4.2.實驗數據分析 
針對相同的服務組合問題，亦即相同的使用者品質偏好，我們嘗詴觀察幾種最佳化
的處理效果，包括了過濾組合限制型的基因演算法和參考不同比例的案例式基因演算
法。在過濾組合限制型的基因演算法運作時，從初代染色體開始，就額外淘汰了不符合
組合限制條件的染色體；如此一來，相較於原始的基因演算法，顯然就會大幅降低演化
收斂所需的時間(減少演化世代)。至於參考不同比例的案例式基因演算法中，考量到問
題的複雜度，我們嘗詴採用了 6%、12%、24%、30%和 36%不同比例的案例，亦即在初代
50個染色體中，分別加入 3、6、12、15和 18 個案例，以作為初代染色體來參與後續演
化。各個基因演算法的實驗結果，都是在相同的演算參數下運作：包括每個世代染色體
數目為 50個、每代保留菁英比例為 30%、染色體交配比例最高為 60%、剩餘為可進行突
變的染色體，基本比例為 10%；也就是尚未交配的染色體間，若皆因受到組合限制條件
的影響而無法順利進行交配時，就會將可突變的染色體比率提昇，以保持演化過程足夠
的變異性。 
實驗結果顯示，採用案例數目佔第一代染色體比例為 6%之案例式基因演算法，在初
代族群中，還夾雜著多種的染色體組合，但包括了 3個具有超高適應函數值的案例染色
體。演化至第 41 代，適應函數值已出現 100%者，代表已找到最佳組合；並且在第 45
代時，所有染色體的適應函數值都已指向 100%，演化已達完整收斂。 
至於採用案例數目佔第一代染色體比例為 12%之案例式基因演算法的演化過程中，
初代的特色就是包括了 6 個具有超高適應函數值的案例染色體；演化至第 33 代已找到
最佳組合，並且在第 40 代已達完整收斂。故相較於 6%之案例式基因演算法，不管是找
到最佳解或達到完整收斂狀態，都有明顯縮短了演化過程(世代)。 
    至於採用案例數目佔第一代染色體比例為 24%之案例式基因演算法的演化過程，雖
然初代包括了 12 個具有超高適應函數值的案例染色體，演化至第 6 代，適應函數值也
已出現 20 個 99.99%的染色體，似乎呈現與採用 12%個案之案例式基因演算法相彷彿的
演化效果；不幸的是，必需一直要到第 50代時，才能找到最佳組合；並且到第 55代時，
才能達到完整收斂。經仔細檢查實驗數據，發覺雖然採用的案例數目增多，但都尚未出
現與最佳組合中第三階段的服務相同之染色體片段，所以反而造成參與演化的染色體多
樣性下降，導致延遲了找尋到最佳解的時機。 
  8 
組合相關的基因，則反而會造成染色體多樣性下降，導致效率下降。(3)採用案例比例
從 24%升至 30%及 36%，由於涵蓋了具有最佳組合相關基因片段的案例，即可非常快速地
找尋到最佳組合。如同直覺，從我們嘗詴的更多實驗中顯示，只要採用案例比例超過 30%
者，都可以同樣地快速找尋到最佳組合和收斂。換言之，只要服務伺服器蒐集到的案例
數量夠多、涵蓋的類型夠廣，的確皆能夠達到快速找尋到最佳組合的目的。重要的是，
雖有效率好壞的區別，案例的使用皆能協助找尋到最佳服務組合，避免了落入局部次佳
解的窘境。 
此外，觀察整個實驗過程，公式(3)當中的門檻值 T 的選擇，只要設定的不會過小
即可；這是因為在案例選取的過程，我們是將案例和現狀中使用者偏好權重的距離排
序，亦即優先選用越相似的案例，所以門檻值 T 變成影響性較小的參數。在本實驗中，
皆將其設為 0.25即可順利運作。 
 
5.結論 
  本計畫主要是結合了限制性的基因演算法與案例式推理觀念，依循整體服務品質的
評分標準，來找尋網路服務及其近似最佳的組合方式，以期協助進行網路服務的管理和
應用。本計畫與之前相關研究最大的不同處在於成功結合了案例式推理的技術，運作當
中可根據使用者的需求，先去搜尋相似需求的案例，來改善基因演算法的初始狀態值；
實驗數據顯示，只要服務伺服器蒐集到的案例數量夠多、涵蓋的類型夠廣，確實可以有
效地提升整個基因演化過程的效率和效能：從動態規劃法需時 8 小時，到基因演算法 2
分鐘找到近似解，到所提方法的數秒間可找到最佳解。因此，若能搭配良好的案例庫管
理和程式設計，應可協助使用者在極短時間內，找尋到最適合個人所需的網路服務元件
和組合，進而提昇雲端服務的可接受性。 
    未來除了可以加大案例資料庫和網路服務的數量，或尋求更為真實的網路服務品質
資料庫進行驗證外，尚可加入考量更多網路服務元件間功能性的組合限制(Wang et al., 
2011)，以期整體實驗設計能更趨向使用者所遭遇的真實環境。 
 
參考文獻 
[1]李維哲，「網路服務組合模式之研究」，國立彰化師範大學資訊管理學研究所未出版
之碩士論文，民國 95 年。 
[2]Aamodt, A., E. Plaza, Case-Based Reasoning: Foundational Issues, Methodological 
Variations, and System Approaches,Artificial Intelligence Communications, Vol. 7, No.1, 
1994, pp.39-59. 
[3] Booth, D., Web Services Architecture: 1.4 What is a Web service?, W3C, 11 Feb., 2004, 
online source: accessible in July 2011, 
http://www.w3.org/TR/2004/NOTE-ws-arch-20040211/#whatis。 
[4]Holland, H. J., Adaptation in natural and artificial systems: An introductory analysis with 
applications to biology, control, and artificial intelligence, University of Michigan 
Press/ESL, 1975. 
 [5]Huang, C. C. , Liang, W. Y., Lee, W. C., and Lai, Y. H., Constrained Evolutionary 
Computing Approach to Web Services Composition , International Journal of Systems 
Science, 2009, pp.56-67. 
[6]Li, L., Cheng, P., Ou, L. and Zhang, Z., Applying Multi-objective Evolutionary Algorithms 
to QoS-Aware Web Service Composition, Advanced Data Mining and Applications: 
Lecture Notes in Computer Science, 2010, Vol. 6441, 2010, pp.270-281. 
[7]Liang W. Y. and Huang C. C., The Generic Genetic Algorithm incorporates with Rough Set 
Theory - An Application of the Web Services, Expert Systems With Applications, Vol.36, 
國科會補助計畫衍生研發成果推廣資料表
日期:2011/10/10
國科會補助計畫
計畫名稱: 雲端服務組合最佳化之研究-使用基因演算法與層級分析法
計畫主持人: 陳鴻文
計畫編號: 99-2221-E-130-017- 學門領域: 計算機網路與網際網路
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
