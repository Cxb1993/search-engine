1 Introduction
Run-to-run (R2R) process control techniques have been widely developed and applied in
semiconductor manufacturing communities ([3]-[11]). Among them, the model-based expo-
nentially weighted moving average (EWMA) R2R control scheme has received great atten-
tion. Considering a first-order single-input and single-output (SISO) system, [7] proposed
a procedure for adjusting the process by a single EWMA controller. The stability condi-
tions are derived and it further demonstrated that the process output would be off-target
if the process has a linear drift. Accordingly, [2] showed how a double EWMA controller
eliminates the off-target of the process output. Recently, [5] and [11] also investigated the
stability conditions, long-term behavior, the transient performance and the determination of
the optimal discount factor for a double EWMA controller. However, results of the above-
mentioned studies are obtained only when the predicted model and process parameters are
precisely known. The predicted model is typically constructed during an off-line DOE/RSM
stage, based on a random sample from the I-O variables. Therefore, the sample size and
the strength of linear relationship between I-O variables play major roles in determining the
stability of the process. Recently, [12] derived a formula for the minimum sample size (which
is explicitly expressed in terms of the correlation structure of process I-O variables) so that
the desired stability probability can be guaranteed.
All aforementioned models are restricted to the case that the process I-O relationship
follows a static model. In practical applications, the effects of the input recipe on the output
response can be carried over several periods. Reference [9] investigated the identification and
fine tuning of closed-loop dynamic models under discrete EWMA and PI adjustments. The
stability conditions of single EWMA controller are derived and the optimal discount factor
can be obtained by using asymptotic mean square deviation (AMSD) criteria after identifying
and estimating unknown parameters in the controlled output model. The results are practical
and interesting. However, it was restricted to the case that the process disturbance follows
an IMA(1,1) series. For a general ARIMA process disturbance, we are more interested in
knowing whether the process output of single EWMA controller will be stable or not.
Focusing on a SISO first-order dynamic model and assuming that the process disturbance
follows a general ARIMA series, we first derive the stability conditions of a single EWMA
controller. Furthermore, when the process parameters are unknown, we propose a formula
to determine an adequate sample size (during an off-line DOE stage) so that the resulting
EWMA controller will be asymptotically stable with a guaranteed probability. The rest of
this paper is organized as follows. First, Section 2 states the problem formulation. Section
3 states the stability conditions of single EWMA controller for a first-order dynamic model.
Section 4 shows the minimum sample size determination that ensures the resulting EWMA
controller will be stable with a guaranteed probability. Finally, some concluding remarks are
addressed at the end of this paper.
1
A key concern in process I-O model (1) is that it is only a static model. In practice, the
input recipe of process may carry over several periods on the process output. Hence, transfer
function has been proposed in [1] and [4] for a general dynamic model. In the following, we
focus on a subclass of parsimonious models:
(1âˆ’ Î´B)Yt = Î± + Î²xtâˆ’1 + Î³xtâˆ’2 + Î·t, (7)
where |Î´| < 1 and |Î³| < |Î²| are two dynamic parameters, and B is a backward-shift opera-
tor. In addition, we assume that the process disturbance Î·t in (7) follows a non-stationary
ARIMA(p,d,q) series, that is,
Ï†p(B)(1âˆ’ B)
dÎ·t = Î¸q(B)t, (8)
where
Ï†p(B) = 1âˆ’ Ï†1B âˆ’ Â· Â· Â· âˆ’ Ï†pB
p, (9)
Î¸q(B) = 1âˆ’ Î¸1B âˆ’ Â· Â· Â· âˆ’ Î¸qB
q, (10)
and {t} is a white series with mean 0 and variance Ïƒ
2.
At the beginning (that is, t = 1), before implementing a feedback controller, (7) reduces
to a static model as (1). Hence, a reasonable predicted model can be built as (2). Reference
[9] has addressed the stability of single EWMA controller under some specific process I-O
models (which can be suitably expressed by various combinations of (Î´, Î³) in (7)). However,
the results are restricted on IMA (1, 1) series. For a general ARIMA process disturbance,
we focus on the following fundamental questions.
(1) Under what conditions will a single EWMA controller still achieve the asymptotic
stability?
(2) What is the number of off-line experimental runs which guarantees that the controlled
process (with arbitrarily choosing a discount factor) will be stable with at least prob-
ability P âˆ—?
3 Stability conditions for first-order dynamic models
From (3) and (4), we obtain
xt âˆ’ xtâˆ’1 = âˆ’
Ï‰
b
(Yt âˆ’ Ï„) . (11)
Substitute into (7) iteratively, we have
Yt âˆ’ Ï„ =(1 + Î´ âˆ’
Î²
b
Ï‰)(Ytâˆ’1 âˆ’ Ï„) + (âˆ’Î´ âˆ’
Î³
b
Ï‰)(Ytâˆ’2 âˆ’ Ï„) + (Î·t âˆ’ Î·tâˆ’1)
=
[
(1 + Î´ âˆ’
Î²
b
Ï‰)2 + (âˆ’Î´ âˆ’
Î³
b
Ï‰)
]
(Ytâˆ’2 âˆ’ Ï„) + (1 + Î´ âˆ’
Î²
b
Ï‰)(âˆ’Î´ âˆ’
Î³
b
Ï‰)(Ytâˆ’3 âˆ’ Ï„)
+ (Î·t âˆ’ Î·tâˆ’1) + (1 + Î´ âˆ’
Î²
b
Ï‰)(Î·tâˆ’1 âˆ’ Î·tâˆ’2).
3
In the following, two well-known special cases are considered.
Case A: short-tailed dynamic I-O model.
As Î´ = 0 and Î³ 6= 0, (7) reduces to
Yt = Î± + Î²xtâˆ’1 + Î³xtâˆ’2 + Î·t. (18)
For such a short-tailed dynamic I-O model, if b/Î² > 0, then the feasible region reduced to:
R =
{
Ï‰|0 < Ï‰ < min{
b
|Î³|
;
2b
Î² âˆ’ Î³
; 1}
}
. (19)
Note that the above result holds for a general process disturbance, which is more general
than that of [9], where an IMA process disturbance is adopted.
Case B: long-tailed dynamic I-O model.
As Î´ 6= 0 and Î³ = 0, (7) reduces to
Yt = Î´Ytâˆ’1 + Î± + Î²xtâˆ’1 + Î·t. (20)
Similarly, if b/Î² > 0, then the feasible region of a long-tailed dynamic I-O model is
R =
{
Ï‰|0 < Ï‰ < min{(2Î´ + 2)
b
Î²
; 1}
}
. (21)
Again, the above result is more general than that of [9]. Let us consider the following exam-
ple.
Example 1:
Assume that the true process I-O model is described as:
Yt = Î´Ytâˆ’1 + 0.2927 + 0.0282xtâˆ’1 + Î³xtâˆ’2 + Î·t. (22)
For illustrative purpose, if the process true parameters are setting as Î´ = âˆ’0.4 and Î³ =
0.0113. Assume that the predicted model of process I-O model is built as follows:
YË† = 0.2342 + 0.01x0. (23)
Then, from (16), the feasible region is R = [0, 0.709]. It means that a single EWMA controller
with a discount factor Ï‰(â‰¤ 0.709) will achieve stability conditions for the dynamic models
with a general ARIMA (p, d, q) process disturbance, where d â‰¤ 1.
The process true parameters Î², Î³ and Î´, in general, are unknown to the process engineers.
Hence, it is impossible to determine a set of feasible region of discount factor as in the above
example. In practice, since the predicted model is built based on a set of random sample from
the process I-O variables in the off-line stage, the sample size and the strength of correlation
between I-O variables play an important role in determining the stability of system. In the
following two sections, for arbitrarily choosing a discount factor Ï‰ âˆˆ [0, 1], we are interested
in deriving a suitable sample size so that the single EWMA controller defined in (3-4) will
be asymptotically stable with a guaranteed probability.
5
Figure 3, it is seen that b/Î² is a parabolic function of Î´ under âˆ’0.2 â‰¤ Î´ â‰¤ 0.2 for a long-tailed
dynamic I-O model. Again, the minimum point occurs at Î´ = 0.2, not at Î´ = 0.
Figure 1: Contour plot of global stability region for b/Î² under various combinations of Î³/Î²
and Î´.
0.35
0.35
0.35
0.35 0.4
0.4
0.4
0.4
0.4
0.4
0.45
0.45
0.45
0.45
0.45
0.5
0.5
0.5
0.5
0.55
0.55
0.55
0.55
0.6
0.6
0.6
0.65
0.65
0.65
0.7
0.7
0.75
0.8
Î´
Î³ /
 Î²
âˆ’0.2 âˆ’0.15 âˆ’0.1 âˆ’0.05 0 0.05 0.1 0.15 0.2
âˆ’0.4
âˆ’0.3
âˆ’0.2
âˆ’0.1
0
0.1
0.2
0.3
0.4
5 Concluding remarks
For a general process disturbance in R2R control, Theorem 1 stated the results about the
stability conditions of single EWMA controller for a first-order dynamic I-O process. For
two specific dynamic models as (18-20), the stability conditions are exactly the same as [9]
if the process disturbance follows a ARIMA (p,d,q) series with d â‰¤ 1. Furthermore, from
Figures 2 and 3, it also demonstrated that both short-tail and long-tail dynamic terms may
have moderate effects on the global stability conditions of single EWMA controller.
References
[1] G. E. P. Box, W. G. Jenkins and G. C. Reinsel, Time Series Analysis, Forecasting and
Control, Third Edition, Prentice-Hall: Englewood Cliffs, 1994.
7
