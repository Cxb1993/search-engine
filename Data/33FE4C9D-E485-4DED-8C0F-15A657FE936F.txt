 I
一、 中英文摘要 
視覺是最重要的感知系統，人類也最相信視覺所提供的訊息；電腦視覺技術在智慧型
環境建構中，扮演了重要的角色。本研究著重在臉部區域之偵測、追蹤以及行人注視焦點
的判定；而電子看板內容的吸引力分析，以及廣告排程機制，則是研發成果的重要應用。
本研究開發之技術主要可分成三個部份，第一部份是進行臉部區域之偵測，可處理人體重
疊但臉部分離的情況；第二部分是將臉部區域做局部影像放大，並進行移動人臉之追蹤與
遮蔽狀況之判定與修復，同時根據移動特性進行[駐足型]與[未停歇型]之軌跡分離與判定。
第三部分則根據[駐足型]與[未停歇型]之狀態，分別利用眼球位置判定與臉部範圍比例計算
方式，進行注視焦點之判斷與記錄。 
關鍵詞：臉部偵測與追蹤、局部影像放大、注視程度判定 
 
 
Of all the sense organs, the images obtained by the eyes are the most reliable and substantial 
for humans. Computer-vision techniques play a key role in the construction of a vision-based 
intelligent environment. This research project focuses on developing techniques about 
face-region detection, tracking, and Focal attention determination of each pedestrian. The 
attraction evaluation and the scheduling of advertisements in a digital advertising board is the 
main application in this research. The technologies developed by this research are mainly 
divided into three parts, the first part is to detect face region by analyzing the distribution of 
skin colors; the second part is to track moving people-faces by extraction and matching both 
steady features and unstable ones. The recorded movement trajectory of each pedestrian is 
separated and classified into stopping or non-stopping types. The third part of this research is 
to judge pedestrian's focus of watching attentively by calculating the proportion of face to 
head and eyeball position in different moving types. 
Keywords: Face detection and tracking; Partial image enlargement; Focal attention determination 
 
 2
差異法(temporal differencing)以及光流分析法(optical flow analysis)。背景相減法[8]會將目前
畫面與事先訓練的背景模型影像做相減，利用各位置之差異值來判定哪些為前景像素點，
再組合成前景物體。由於此種方式需要建構背景模型，因此較適合用在背景變動不大的穩
定環境中。而時間差異法[9]則將兩張連續畫面間的相異點，視為可能的前景像素，過濾掉
鬼影像素後，即可利用剩餘之前景像素組成物體。此種方法並不需事先訓練，適合使用在
背景變動頻繁的環境中。最後，當一張畫面平順地轉變成另一張畫面時，各像素點在兩張
畫面產生的速度場(velocity field)，即是所謂的光流(optical flow)。利用光流分析法[10]來偵
測前景物體，就是將兩張連續畫面中，移動不一致的像素點視為前景像素，再組合成前景
物體。此種方法的計算較複雜、速度較慢，也較適合用在追蹤單一移動物體上。 
移動物體的追蹤，則是透過記錄並比對連續畫面間前景物體的特性來完成；主要的研
究方向，則是如何利用適當的物體特徵，來與追蹤目標進行比對。常用的追蹤方式有下列
幾類不同方法，首先是區域式追蹤法[11]，將影像變動的區域視為有移動物體的存在；藉由
比對這些變動區域的特徵，達到追蹤的目的。再來是輪廓式追蹤法[12]，將移動物體以輪廓
線(contour)來表示，並賦予輪廓線影像空間的特性，再利用每張影像的資訊作輪廓的更新，
用以追蹤物體。還有是特徵追蹤法[13]，萃取影像中形成目標物的各種成分，再將這些成分
集合成較高階的特徵資訊，藉由比對連續影像間的特徵資訊來追蹤目標物。 
欲從畫面影像中擷取出人臉區域，主要的人臉偵測方法可分為下列幾類：首先是特徵
區分法[14]，以人臉上的眼睛、眉毛、嘴巴、鼻子等特徵，作為偵測人臉的參考。雖然這些
人臉上的特徵，會受到人臉的表情所影響，但較不受環境變化所影響。再來是膚色區分法
[15]，主要是利用了膚色在色彩空間上，會聚集在特定的範圍內。在畫面影像中，先將所有
的膚色像素擷取出來，再連結成為可能的人臉區域。還有主成份分析法(principal component 
analysis, PCA)[16]，找出可表示人臉的主要特徵。所謂主要特徵，即是將人臉影像投射在此
主要特徵空間時，不會產生太大的變化；若將非人臉的影像投射到此特徵空間時，會產生
較大的差異。最後，就是樣版比對法[17, 18]，事先定義好一個標準的人臉樣版，輸入畫面
影像則與此樣版比對，找到可能的人臉所在位置。 
欲決定人眼的注視方向，可利用判定眼珠在眼部範圍的出現位置；因此，當系統從畫
面中確定臉部位置後，即要從臉部範圍內找出眼睛位置，再細部判定眼珠方位。偵測眼睛
位置的方法，可利用可變形樣版(deformable template)[19]比對方式，它是一種可自行調整的
比對技巧，因其彈性使其不僅可以應用於幾何外形的比對，亦能進一步限制符合條件之影
像特徵。例如單隻眼睛的樣版便可用二條拋物線及一個圓形來各自代表眼眶與眼珠。而投
影分析法[20, 21]是使用一種分析臉部亮度投影的方法，在前置作業中也是以色相和彩度分
離出膚色，以橢圓樣版將頭部定位。接著，由於在一般情況下，臉部特徵諸如眉毛、瞳孔、
鼻孔、嘴唇、下巴，會有較低的亮度，並且這些器官或部位都是對稱的。所以，依其 X 方
向及 Y 方向之投影分析，可找出眉毛、瞳孔、鼻孔、嘴唇等相關位置。 
 
丁、 研究方法 
本研究利用可無線傳輸畫面的 Wireless IP Camera 來當作視訊擷取設備，將 IP Camera
安裝在電子廣告看板上方，來拍攝看板前的固定區域(控制範圍與角度)。當畫面透過無線網
路，傳輸至視訊處理伺服器後，即可利用伺服器中本研究所開發之視訊處理系統，來進行
人員臉部擷取以及注視焦點判定。由於採用的是固定式攝影機，而注視焦點判定又以人臉
及眼睛部位的特徵為依據；因此，本研究利用背景相減法，來偵測並追蹤畫面中的人臉區
(a). 畫面影像 (b). 背景模型影像 (c). 差異圖 (d). 偵測結果
圖 3. 前景物體偵測 
 
由於畫面中的人臉區域不只一個，為了可在連續畫面間統計並分析各行人對廣告看板
注視程度，需對每一個人臉區域抽取特徵並進行追蹤。本研究針對人臉追蹤的需求，分別
抽取靜態與移動兩類特徵，靜態特徵包括重心位置與顏色平均值；而移動特徵則包括了臉
部區域之移動速度與方向。為求更精準地抽取出較小物體的靜態特徵，畫面中偵測出的人
臉區域需先放大並強化；本研究利用雙線性內插(bilinear interpolation)法，先將太小的標的
區域進行局部放大，再利用區域內邊緣點位置及方向，以原圖的鄰近像素顏色做細部之調
整，可讓局部強化的區域影像更佳平順(如圖 4 所示)，所擷取出每位人員之臉部特徵可更為
精確，以提升追蹤時比對的效果。 
(b). 局部放大效果 (a). 原始人臉區域 
圖 4. 畫面影像之局部放大 
 
人臉追蹤時，即是將目前畫面偵測到的人臉區域Oi，擷取出靜態特徵後，與目前追蹤
中的人臉標的TGj配對；再計算出移動特徵後，連同靜態特徵，求出兩個臉部物件各特徵的
差異度 。然後，每個特徵差異值利用事先設定好的門檻值Tfea，來判定兩物
件是否相似。若目前畫面偵測到的兩個人臉區域(O1和O2)，均與某追蹤標的TG1很像，每項
特徵的差異度均小於相對的門檻值；則先將各特徵差異值做正規化，再給予不同權重後，
進行各特徵的加權累計，當作最終的特徵差異，並決定最相近的一組(O1, TG1)或(O2, TG2)。
視訊畫面中移動物體的追蹤，要考慮幾個常見情況，例如新物體進入、追蹤物體離開、物
體發生遮蔽、遮蔽物體分離等；因此，本研究利用目前畫面偵測到的物體數量#Oi與追蹤標
的數量#TGj，分成「完全對應」、「新物體進入or遮蔽分離」以及「物體離開or遮蔽發生」
三大類情況，再根據監控範圍與物體特性，細部區分成屬於五種狀況之何者；然後，各種
狀況再利用不同的特徵更新方式進行持續地追蹤(如圖5所示)。 
)( jifea ,TGODist
 4
(C). 利用眼睛偵測判定注視方向 
由於人的眼睛位於臉部，而且眼睛之主要顏色通常與臉部之膚色有所不同。對於畫面
中一個夠大且邊界長寬符合比例限制之人臉區域，欲從此區域中找出人眼位置；本研究先
針對非膚色像素進行相連元件偵測，再利用眼睛在人臉的特性，將偵測出的多個相連元件
挑選最適當的一對元件，視為眼睛的組合。眼睛必在人臉上半部，因此可先將位居人臉下
半部的相連元件去除；再來，眼睛在臉部會有明顯的大小，可根據人臉寬度 Wface 與高度
Hface，定義眼睛寬度與高度的門檻值 TEyeWidth 和 TEyeHeight，對於寬度或高度小於此兩門檻值
者，視為非眼睛，予以捨棄。 
針對距離攝影機較近且移動速度緩慢之駐足者，本系統先從人臉影像資料庫中擷取出
所有人眼中的眼珠影像，如同人臉上膚色與之統計方式，統計所有眼珠像素之 YCbCr 各分
量之分佈。針對每個抽取出之人眼區域，檢查所有像素顏色，先將可能的眼珠像素(顏色均
落於變動範圍內)抽取出之後，再利用 Sobel 運算方式只留下邊緣點。眼珠偵測的最後步驟，
即是利用霍夫轉換(Hough transform)，從上述擷取之可能眼珠邊緣點中，找出符合限制之圓
形元件(如圖 7 所示)，並據以判定該行人之注視方向。 
(a). 眼睛區域影像 (b). 可能之眼珠像素 
(d). 圓形眼珠偵測結果 (c). 邊緣點擷取 
圖 7. 利用 Hough Transform 偵測眼珠位置 
 
當眼睛注視不同方向時，眼珠位置在眼睛區域之九等分格之特性有所不同，本研究將
利用眼珠在各格中所佔比例，先將注視方向分成[上看]、[左看]、[右看]與[平視或下看]四組
(如圖 8 所示)。其中，平視與下看情況下，眼珠位置特性接近，不容易區分。但是，同一個
人平視或下看時，其眼睛的高度略有不同：往下看時，眼睛區域高度會較平視時明顯地縮
小。因此，當眼珠位在眼睛區域之中間位置時，需再利用眼睛的高度，來區分平視與下看
兩種不同情況。在訓練階段，本研究根據所收集之人臉影像，先統計出臉部區域中非膚色
之可能顏色(如眼睛、眼珠、眉毛、嘴唇等位置)在 YCbCr色彩空間的分佈範圍。當系統進行
眼睛位置的偵測時，會僅針對臉部區域中，找出其顏色屬於這些範圍內的像素，以組成可
能的眼睛區域，並可避免有色鏡框眼鏡對眼睛偵測可能造成的錯誤。 
(a). 眼睛區域的九等分格 
(e). 平視 (f). 右看 
(c). 下看 
(d). 左看 
1 2 3
4 5 6
7 8 9
人眼 
(b). 上看
圖 8. 依照眼珠方位判定注視方向 
 
 6
況，並分別針對各畫面中的臉部偵測、臉部追蹤與注視焦點判定效果進行測試。本實驗總
共拍攝約 3 分鐘的視訊，以每 0. 5 秒鐘擷取一張畫面方式，從中擷取 360 張畫面影像。各
畫面中的行人數量在一至五人之間，並自由採行[駐足型]或[未停歇型]移動方式；若模擬注
視看板，則要求以[正視] 方式觀看超過一秒鐘以上。 
在測試畫面中的臉部區域偵測效果部分，則以比較系統偵測出之區域 Rgnsys 和人工框
選正確區域 Rgnman 之相似程度，來計算正確性。假設 Rgnsys和 Rgnman之面積分別為 Areasys
與 Areaman，而兩者重疊區域之面積為 Areaovlap。本實驗中必須
sys
ovlap
Area
Area 與
man
ovlap
Area
Area 兩種比
率值均大於 85%，才會被視為該人臉位置偵測正確。而針對正確偵測的前景物體，經過與
追蹤標的物比對後，利用人工觀看來評估系統對每個移動物體之追蹤效果的準確性。最後，
正確追蹤之移動人臉，再透過本研究提出之注視焦點判定方法，判定各行人在每個畫面是
否注視看板內容，並與人工方式判定之效果作比較。表 1 顯示本研究針對臉部偵測、追蹤
與注視判定的實驗結果。 
表 1. 臉部偵測、追蹤與注視判定實驗結果 
測試標的 正確率 
臉部偵測 95.6% 
移動追蹤 93.1% 
注視焦點判定 85.9% 
己、 結論 
本研究提出視訊畫面中之臉部偵測與追蹤技術，並根據移動速度與位置，將移動軌跡
區分為「駐足型」與「未停歇型」兩類，再利用不同移動方式觀看特定方位標的物的臉部
與眼部特性，進行各行人在畫面中的注視焦點判定，以統計特定時段內，廣告看板內容對
行人的吸引程度。 
首先，先利用背景相減法，將目前畫面與背景模型做比較，找出所有前景像素點；再
根據膚色像素在 YCbCr 色彩空間的分佈範圍，擷取出畫面中的所有膚色像素。將相近之像
素合併形成膚色區域後，再以大小或寬高比特性做臉部區域的判定。針對連續畫面所擷取
的臉部區域，本研究分別抽取重心位置與顏色平均值的靜態特徵，以及移動速度與方向的
移動特徵，進行追蹤標的之比對，並記錄移動軌跡。在抽取靜態的顏色平均值特徵時，對
於過小的臉部區域，本系統會採用邊緣補強式的雙線性內插法，進行局部放大與強化，以
取得較精確的特徵值。最後，針對每個移動行人進行注視焦點判定之前，每人的移動軌跡
會先根據移動速度分成「駐足型」與「未停歇型」兩類；駐足型行人可利用局部放大之臉
部影像中，擷取眼睛區域影像，並以圓形眼球所在方位，判定其注視焦點。對於未停歇型
行人，則利用臉部相對頭部之比例，來判定其是否觀看著看板方向。本研究之實驗是從約
3 分鐘的視訊中擷取 360 張畫面影像，各畫面的行人數量在一至五人間，並自由採行[駐足
型]或[未停歇型]移動方式；利用本系統進行之臉部偵測、追蹤與注視焦點判定之測試結果
分別為 95.6%、93.1%與 85.9%。 
 8
 10
eye-feature extraction and description. Pattern Recogn., 30(3), 403-419. 
[20]. Baskan, S., M. M. Bulut, and V. Atalay (2002) Projection based method for segmentation 
of human face and its evaluation. Pattern Recogn. Lett., 23(14), 1623-1629. 
[21]. Zhou, Z. H. and X. Geng (2004) Projection functions for eye detection. Pattern Recogn., 
37(5), 1049-1056. 
 
四、 計畫成果自評 
本研究計畫原本希望執行三年之持續研究，經審查後僅核可一年；還是利用有限的時
間與經費，由主持人與數位參與之研究生合作開發相關技術。茲將原計畫書之第一年成果
預估與實際達成狀況，如表 4 所示；與本研究計畫相關之成果發表，條列於表 5。 
表 4. 計畫執行情形表 
計畫書中預計
完成工作項目 實際執行內容 達成率 學術或應用價值 
背景模式建
立與膚色區
域偵測 
 以一段訓練用視訊，擷取多張不
必特別挑選的畫面，訓練背景模
型 
 統計膚色像素在 YCbCr 色彩空間
之分佈，來決定膚色在各色彩分
量值的變動範圍 
 以背景相減法進行前景像素之
偵測，並利用 opening 消除雜訊
後，以相連元件偵測法找出並將
破碎元件合併成前景物體 
100%
 利用不特別挑選之多
張畫面影像，進行背景
模型訓練；並統計膚色
像素的色彩分佈後，用
以進行前景膚色區域
之偵測，既實用且效果
佳，有其應用價值 
臉部區域之
局部放大與
強化 
 利用雙線性內插法，先將臉部區
域進行局部地放大，再利用邊緣
點的方向性，以鄰近像素顏色做
細部之調整，可讓放大後的區域
影像更佳平順 
100%
 畫面之特定區域擷取
後進行局部放大與強
化，可提升對部分區域
的 細 部 特 徵 抽 取 效
果，對辨識與追蹤應用
均有實用性 
人臉追蹤與
移動軌跡記
錄 
 抽取前景臉部區域之靜態及移
動特徵，進行移動臉部之追蹤，
並記錄移動軌跡 
 處理各種追蹤狀況，包括臉部進
入、追蹤臉部離開、多臉部重疊
100%
 此技術可用以追蹤任
意前景物體，並不限臉
部，應用性極大 
移動人員之
特性分類 
 根據臉部追蹤時所記錄的移動
特性，可將移動軌跡區分為「未
停歇型」與「駐足型」兩類狀態
100%
 善加分析人員移動與
注視之相關特性，從注
視判定之需求，針對移
動軌跡加以分類，學術
上尚稱創新 
各類移動狀  「未停歇型」以及較遠的「駐足 90%  根 據 移 動 特 性 的 不
 12
可供推廣之研發成果資料表 
□ 可申請專利  ■ 可技術移轉                                      日期：98 年 10 月 09 日 
國科會補助計畫 
計畫名稱：利用廣告看板上的固定式攝影機進行多移動人員之注視
焦點判定研究 
計畫主持人：大葉大學 資訊管理學系 曾逸鴻 助理教授 
計畫編號：NSC 97-2221-E-212 -031-     學門領域：圖形辨識 
技術/創作名稱 多移動人員之注視焦點判定 
發明人/創作人 曾逸鴻、蔡仁智、林彥男 
技術說明 
中文： 
視覺是最重要的感知系統，人類也最相信視覺所提供的訊息。
為建構以電腦視覺技術為基礎之智慧型環境，本技術著重移動行人
之注視焦點判定。本技術主要分成三個部份，第一部份是透過膚色
像素之色彩分佈，偵測臉部所在區域；第二部份是抽取臉部區域之
穩定特徵與移動特徵，進行移動人臉之追蹤；第三部份則是將記錄
的移動軌跡區分成「駐足型」與「未停歇型」兩類，並分別以頭臉
比例與眼球方位，判定行人在各畫面之注視焦點。 
英文： 
Of all the sense organs, the images obtained by the eyes are the 
most reliable and substantial for humans. Computer-vision techniques 
play a key role in the construction of a vision-based intelligent 
environment. This technology is mainly divided into three parts, the 
first part is to detect face region by analyzing the distribution of skin 
colors; the second part is to track moving people-faces by extraction 
and matching both steady features and unstable ones. The recorded 
movement trajectory of each pedestrian is separated and classified 
into stopping or non-stopping types. The third part of this research is 
to judge pedestrian's focus of watching attentively by calculating the 
proportion of face to head and eyeball position in different moving 
types. 
可利用之產業 
及 
可開發之產品 
可利用之產業：數位監控相關產業、電子廣告行銷產業 
可開發之商品：移動行人數量統計系統、電子看板內容排程與定價
系統、… 
技術特點 
 透過膚色像素之色彩分佈，偵測臉部所在區域 
 抽取臉部區域之穩定特徵與移動特徵，進行移動人臉之追蹤 
 記錄的移動軌跡區分成「駐足型」與「未停歇型」兩類，並分
別以頭臉比例與眼球方位，判定行人在各畫面之注視焦點 
推廣及運用的價值  提升視訊監控硬體產業與智慧型視覺軟體系統的整合  人臉之偵測、追蹤與軌跡分類後，利用不同移動特性的觀看特
