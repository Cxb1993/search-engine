2 
(Commuter Bus Routing Problem, CBRP)在學術
文獻上的探討甚少，亦未發展出可供實務應用
之方法。故本研究針對 CBRP 進行深入研究。 
在我國以及其他開發中國家，公司提供其
員工上下班通勤之交通車服務，都是很普通的
現象。單以新竹科學園區某科技大廠為例，為
維持其 24 小時生產線之連續作業，每天皆要提
供早晚兩班交通車服務，每班人數均至 2000 人
以上，約有 550 個停靠站，使用大巴、中巴與
小巴三種不同車型的路線超過 40 條以上。其通
勤交通車的服務為：每個員工於公司訂定好之
停靠站上車，所屬之工作廠區下車，通勤交通
車必須於上班前將員工從停靠站運送至工作廠
區。此與傳統學校交通車路線問題(School Bus 
Routing Problem, SBRP) 在一學區內之各級學
校，於每個時段內指派校車至所屬停靠站牌搭
載學童在該時段內上學或放學的校車服務類
似，但 CBRP 除了需增加考量多車種的因素外，
CBRP 亦有多廠區(迄點)之特性，故 CBRP 可視
為 SBRP 之延伸。 
學校交通車路線問題(SBRP)雖至 1970 年
代初期即開始有研究文獻，但並未受到與其他
車輛路線問題(Vehicle Routing Problem, VRP)相
同的重視，至今仍未有完整的求解方法論。就
SBRP 問題特性而言，SBRP 屬 VRP 之衍生性問
題，但與 VRP 並不完全相同。SBRP 其車容量、
路線時間限制和需求不允許分割的特性與 VRP
相同；但 SBRP 由於校車不會由場站(學校)出
發，故路線型態為單向的路徑(Hamiltonian path)
狀與 VRP 之路線呈現迴路(cycle)狀並不相同。 
本研究探討之 CBRP 雖屬於 SBRP 之延
伸，其路線型態與 SBRP 相同，但 CBRP 在起
迄點和車種的特性方面與 SBRP 仍有不同，其
問題複雜度更甚於 SBRP。原因在於隨著我國工
業區與科學園區之發展，一個公司在其區域範
圍內常有多個工作廠區(Multiple Campus)以利
公司業務/廠務之進行和營運管理，故 CBRP 具
有同一個起點的乘客會有「多迄點」的特性。
然而 CBRP 多迄點的特性與多場站車輛路線問
題(Multiple Depot VRP, MDVRP)並不相同，其
相異處如下： 
1. MDVRP 中的每個場站屬分開地設置，且每
個場站提供相同的服務，故均可滿足所有
顧客之需求；而 CBRP 中的各個廠區則會
因位於工業園區的區域範圍內而採就近設
置，且由於 CBRP 之顧客需求點，由於不
同起迄對(即每位員工所要上班的廠區不同)
之緣故，其廠區(迄點)不能被另一個廠區所
取代。 
2. MDVRP 的服務範圍可劃分成數個區域由
其中單一個場站負責配送，故可視為數個
VRP 的子問題來求解；CBRP 則會因為其
廠區位置相近和顧客需求迄點不同的因
素，無法分割成數個單廠區的 CBRP 子問
題。 
因此，CBRP 不易延用 MDVRP 的相關方
法進行求解。此外，許多公司亦會利用不同車
容量之車輛進行交通車服務，使每條路線依據
乘載人數選擇適當規模之車輛，以減少成本浪
費，故 CBRP 也同時擁有「多車種」的特性。 
有鑑於此，本研究著重在多廠區(迄點)及多
車種之通勤交通車路線設計，以混合整數規劃
法建構合理之通勤交通車路線問題數學模式；
且設計小型測試例題求取最佳解(exact solution)
來驗證 MIP 模式之正確性並當作啟發式解法之
比較基礎；另外，由於 CBRP 屬於 NP-hard 問
題，大規模問題將無法有效率求解。故本研究
根據通勤交通車之特性，以總營運成本最小為
目標構建一啟發式解法；並利用小型例題測試
啟發式解法之結果，再與 MIP 模式之最佳解對
照進行比較分析，以作為本研究啟發式解法之
客觀評量指標；最後並以一實例研究對象來測
試啟發式解法對於大規模問題之成效。 
二、 文獻回顧 
通勤交通車路線問題(CBRP)為傳統校車路
線問題(SBRP)之延伸，但目前似無針對 CBRP
進行相關研究，絕大部份的相關文獻為針對
SBRP 進行探討。故本研究將 SBRP 的相關文獻
整理回顧如下。 
國外文獻關於 SBRP 之研究，源自 1970 年
代即有學者進行研究(Angel 等人[1]、Bennett and 
Gazis[2]和 Bodin and Berman[3])。其問題背景為：
在一學區內之各級學校，其上學與放學之時間
是固定的，且皆有一組所屬站牌供學童上下
車；校車服務為政府所提供與統籌管理，於每
個時段內指派校車至該時段內上學或放學之學
校；故 SBRP 即是針對學區之行駛路線進行規
劃，以確保學童在規定時間內上學與放學，並
期望營運成本、旅行時間最小化或路線長度與
承載量平衡等目標。 
在 SBRP 的相關文獻中，學者大多針對多
4 
三、 員工交通車路線問題模式 
3.1 問題描述 
員工通勤交通車路線問題(CBRP)即是在已
知員工上車的停靠站(起點)、上班的工作廠區
(迄點)和不同車容量的車型，在路線(長度)時間
的限制下，求總營運成本最小的通勤交通車路
線組合。本研究 CBRP 的相關假設如下： 
1. 通勤交通車路線問題，其上/下班屬對稱型
態，故本研究 CBRP 只考慮純上班的問題。 
2. 員工上車的停靠站，是由所屬公司根據上班
員工住家位置訂定而成，本研究假設為起
點；上班的工作廠區假設為迄點。由於員工
上班的工作廠區皆在工業園區的範圍內，皆
是公司行號或工廠，並無一般住戶，故本研
究 CBRP 的起、迄點分開，假設其各個工作
廠區(迄點)之間並無員工上車停靠站(起點)
的存在，即迄點間不載客。 
3. 本研究 CBRP 的車輛變動成本為($/車公
里)，其成本與承載量無關。 
4. 各起迄對間的需求不可分割。 
3.2 數學列式 
CBRP 之混合整數規劃模式的相關符號、決
策變數、目標式、限制式敘述如下： 
 
1. 相關符號 
N ：表所有節點之集合； {1,  2, N}= KN ，其
中N表節點數 
R ：表所有路線之集合； {1,  2, R}= KR ，其中
R 表路線數 
V ：表車輛型態之集合； {1,  2, V}= KV ，其中
V 表車輛型態數 
M：表起迄對之集合； {1,  2, M}= KM ，其中M  
表起迄對之數量 
mq ：表第m 個起迄對之需求量，其中m∈M  
ms ：表第m 個起迄對之起點，其中m∈M  
mt ：表第m 個起迄對之迄點，其中m∈M  
vc ：表 v型車輛之固定成本 
v
ijd ：表 v型車輛經過節線 ij 的變動成本 
vk ：表 v型車輛之車容量 
ijt ：為節線 ij 的旅行時間和 i點服務時間之總和 
0T ：表每條路線所允許之車輛最大旅行時間 
,i mg ：表起點標示參數，即節點 i為起迄對m 之
起點( mi s= )時， , 1i mg = ；否則 , 0i mg =  
,i mh ：表迄點標示參數，即節點 i為起迄對m 之
迄點( mi t= )時， , 1i mh = ；否則 , 0i mh =  
2. 決策變數 
決策變數有 6 類，分述如下所示： 
k
my ：表起迄對需求量指派變數，為0-1變數。若
指派 mq 至路線 k，則 1=kmy ；否則 0=kmy 。 
kvδ ：表車型指派變數，為0-1變數。若路線 k 使
用 v型車輛，則 1=kvδ ；否則 0=kvδ 。 
kz ：表路線啟動變數，為0-1變數。若路線 k 有
使用，則 1=kz ；否則 0=kz 。 
k
ijp ：表路線指派變數，為0-1變數。若路線 k 經
過節線 ij ，則 1=kijp ；否則 0=kijp 。 
km
ijx ：為路線流量變數，代表指派至路線 k 之起
迄對m 所經過節線 ij 的流量。 
kv
ijη ：以 kvijη 來替代 kij kvp δ⋅ 之非線性轉線性的 0-1
變數。若路線 k 經過節線 ij 且路線 k  使用
v型車輛，即 1kijp = 且 1kvδ = ，則 1kvijη = ；
否則 0kvijη = 。 
依據上述之數學符號，通勤交通車路線問
題可定義為如下之混合整數規劃模式： 
Min  
v v kv
kv ij ij
k v i j k v
c dδ η
∈ ∈ ∈ ∈ ∈ ∈
⋅ + ⋅∑∑ ∑∑∑∑
R V N N R V
    (1)
s.t.    
0 ,   
k
j k
j
p z k
∈
= ∀ ∈∑
N
R                     (2)
0 ,   
k
j k
j
p z k
∈
= ∀ ∈∑
N
R                     (3) 
,   ,  k kij ji k
j j
p p z i k
∈ ∈
= ≤ ∀ ∈ ∀ ∈∑ ∑
N N
N R        (4)
1,    km
k
y m
∈
= ∀ ∈∑
R
M                      (5)
,   ,  km ky z k m≤ ∀ ∈ ∀ ∈R M                 (6)
,   ,  
m
k k
m s j
j
y p k m
∈
≤ ∀ ∈ ∀ ∈∑
N
R M             (7)
,  ,  
m
k k
m it
i
y p k m
∈
≤ ∀ ∈ ∀ ∈∑
N
R M              (8)
,   k kv
v
z kδ
∈
= ∀ ∈∑ R
V
                     (9)
6 
表 1  小型測試例題最佳化求解結果 
路網型態 例題標號 目標值 求解時間 
CC1 1752.7 1 小時 14 分 15 秒 
CC2 1752.7 2 小時 23 分 16 秒 
CC3 1524.5 6 分 26 秒 
CC4 1524.5 7 分 49 秒 
CC5 1705.4 3 分 1 秒 
CC6 1705.4 6 小時 3 分 59 秒 
CC7 2328.2 2 天 18 小時 6 分 25 秒 
走廊型 
CC8 1791 21 分 53 秒 
CR1 1683.7 2 小時 15 分 39 秒 
CR2 1683.7 6 小時 13 分 6 秒 
CR3 1599.8 21 小時 28 分 33 秒 
CR4 1355 44 分 09 秒 
CR5 1772.4 19 分 54 秒 
完全性 
路網 
 
(變數: 6,060 個 
限制式: 3,985 條) 
非走廊型
CR6 1772.4 10 小時 28 分 08 秒 
IC1 1677.45 15 分 
IC2 1677.45 6 分 26 秒 
IC3 1617.47 11 分 57 秒 
IC4 1617.47 16 分 38 秒 
IC5 1959.32 17 分 19 秒 
IC6 1870.33 18 分 14 秒 
走廊型 
IC7 1870.33 29 分 37 秒 
IR1 1682.05 10 分 5 秒 
IR2 1586.19 1 小時 11 分 42 秒 
非完全 
性路網 
 
(變數: 16,548 個 
限制式: 7,723 條) 
非走廊型
IR3 1586.19 41 分 27 秒 
 
四、 啟發式解法 
由於員工通勤交通車問題 (CBRP)屬於
NP-hard 問題且本研究數學模式為一混合整數
規劃模式，求解小型問題尚可於有效時間內求
解，但對於大規模之問題則無法於有效率的時
間內求解出最佳解。故本節根據 CBRP 之特性，
以總營運成本最小為目標構建一啟發式解法求
解大規模問題，以便實務上之應用。 
4.1 啟發式解法架構 
本研究針對多對多起迄點及多車種之通勤
交通車路線問題特性構建啟發式解法，期能有
效率地求解 CBRP。本研究首先建構路線起始
解，接著進行路線改善，以求得較佳之結果。
整個啟發式解法包含 2 個模組：起始解構建模
組和路線改善模組。 
 
1. 起始解構建模組 
此模組主要分為二部分，第一個部份進行
起始路線構建，先搜尋種子點，並以最近鄰點
法為基礎將各節點插入路線中；第二個部份則
針對各路線實際乘載人數進行車型調整 (縮
小)，使得各路線都能利用最適合其乘載人數之
車種型態進行服務，避免成本浪費。 
2. 路線改善模組 
起始解構建完成後，接著進行路線改善。
首先，考量起始解之各路線剩餘時間與剩餘容
量，對起始解進行「路線間節點移轉改善」，以
降低成本。路線間節點移轉改善後，必須再次
確認路線內節點順序，以確保經過路線內各節
點所需之距離最短，故進行「路線內節點交換
改善」。整個啟發式解法的執行架構如圖 1所示。 
8 
本階段主要針對路線之剩餘車容量來考量
可否進行節點之移轉，而使車型變小。首先以
圖 3 說明剩餘容量(SC)與可移轉量(P)之定義。 
 
圖 3  路線剩餘容量(SC)與可移轉量(P)示意圖 
圖 3 中三個長方形代表三種車型，有顏色
的部份代表車輛乘載人數，白色部份代表車輛
剩餘容量 SC，有顏色之斜線部份代表大車換成
較小車所需移轉人數 P。在起始解構建完成後，
每條路線即可計算出該路線之 SC，使用大車之
路線可將實際乘載量減去中車之車容量計算出
該路線之 P，即 1 1 2-P L C= ，使用中車之路線亦
可將實際乘載量減去小車之車容量計算出該路
線之 P，即 2 2 3-P L C= ；接著根據各路線 SC 與
P 進行節點移轉之檢查與移轉。例如：假定大車
之車容量有 40 人，中車之車容量有 25 人，路
線 1 使用大車，乘載人數共有 30 人，則路線 1
之剩餘容量 SC 有 10 個座位，可移轉量 P 則有
5 人，故若路線 1 可將 5 人移轉至其他路線，則
可將路線 1 使用之車型更改為中車。路線間節
點移轉改善之執行架構如圖 4，說明如下： 
步驟一：計算起始解中每條路線之剩餘車容量
SC、剩餘路線時間 ST 與可移轉量 P。 
步驟二：計算各路線將其 P 移轉至其他路線所
能減少之車輛固定成本 fΔ ，選擇
P/fΔ 最大之路線 k 開始。 
步驟三：檢查路線 k 可移轉量 P 是否小於其他
路線之剩餘車容量總和。若是，則進行
下一步驟；若否，則跳至步驟九。 
步驟四：選擇路線 k 離迄點最近之起點 j。 
步驟五：檢查路線 k 以外之路線是否皆檢查完
畢。若是，則 1+= jj ，並回到步驟四；
若否，則選擇最靠近 j 之路線 l。 
步驟六：檢查路線 l 之剩餘車容量 SC 是否大於
0。若是，則進行下一步驟；若否，則
回到步驟五。 
步驟七：檢查將 j 點插入路線 l 是否滿足路線 l
之剩餘車容量 SC 與剩餘路線時間
ST。若是，則將 j 點選擇距離增加最少
之位置插入，並更新路線 l 之 SC、ST
與 P，以及路線 kl之 SC、ST 與 P；若
否，則回到步驟五。 
步驟八：檢查路線 k 之可移轉量 P 是否小於或
等於 0。若是，則將路線 k 之使用車輛
變更為較小車型之車輛；若否，則
1+= jj ，並回到步驟四。 
步驟九：檢查所有路線是否檢查完畢。若是，
節點移轉完成；若否，回到步驟二。 
    圖 4  路線間節點移轉改善之執行架構 
