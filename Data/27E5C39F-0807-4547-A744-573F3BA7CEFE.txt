i 
摘  要 
 
在奈米製程中，功率消耗已成為一項主要的限制因素。除了動態功率外，
而由於元件尺寸縮小，靜態漏電流之效應亦日漸顯著。若想要用可接受的功率
消耗水準來達到足夠的性能，電路本身須提供先進的功率管理機制。因此，近
年來已有許多低功率設計技術被提出，其中較廣泛使用者包括多重電源電壓、
多重電晶體臨界電壓、及休眠模式等。為了實現這些技術，電路中必須加入一
些多餘的元件，其目的在降低功率消耗，而非提供計算功能。這些低功率設計
使用的特殊電路可能會造成可測試性的問題，因此有必要詳加研究。 
正常操作模式下所定義的功率限制往往遠低於測試模式中所產生的功率消
耗。目前文獻中已有許多低功率測試的技術；然而這些技術幾乎都未使用到電
路本身之低功率設計來減低測試功率消耗。如果吾人能夠整合可測試設計電路
與用於正常操作模式之降低功率電路於一體，將可同時達到提高可測試性及降
低功率消耗之目的。低功率自動測試圖樣產生亦為降低測試功率之有效方法，
而此方法無須增加額外的硬體。 
文獻中已有許多低功率測試的技術，然而這些技術幾乎都未使用到電路本
身之低功率設計來減低測試功率消耗。如果吾人能夠整合可測試設計電路與用
於正常操作模式之降低功率電路於一體，將可同時達到提高可測試性及降低功
率消耗之目的。在本研究計劃中，我們以掃瞄測試設計為基礎，探討低功率測
試及可測試之低功率設計這兩方面的問題。在本計畫中，我們完成了數個具備
掃瞄測試、電位轉換、休眠模式及資料回復等功能的掃除細胞設計，並比較其
性能。 
 
關鍵詞：低功率設計、低功率測試、掃瞄測試、測試資料壓縮 
iii 
目  錄 
第一章  前言 ................................ 4 
第二章  研究目的 ............................ 5 
第三章  文獻探討 ............................ 8 
3.1.  MULTIPLE SUPPLY VOLTAGE .......................................................................................................... 8 
3.2.  SLEEP MODE ............................................................................................................................. 9 
3.3.  LOW‐POWER TESTING ................................................................................................................. 9 
3.3.1.  LOW‐POWER ATPG ................................................................................................................. 10 
3.3.2.  STRUCTURED LOW‐POWER SCAN DESIGN ..................................................................................... 10 
第四章  研究方法 ........................... 11 
4.1.  LEVEL‐CONVERTING SCAN FLIP‐FLOPS .......................................................................................... 11 
4.1.1.  LEVEL CONVERTERS ................................................................................................................... 11 
4.1.2.  DESIGN OF LEVEL‐CONVERTING SCAN FLIP‐FLOPS ........................................................................... 11 
4.1.2.1.  LCMSSFF‐I ....................................................................................................................... 12 
4.1.2.2.  LCMSSFF‐II ...................................................................................................................... 12 
4.1.2.3.  LCHLSFF ........................................................................................................................... 13 
4.1.2.4.  CAPACITORS IN LCSFFS ......................................................................................................... 14 
4.2.  LOW PEAK POWER ATPG AND TEST COMPACTION FOR N‐DETECTION TEST ......................................... 15 
4.2.1.  NECESSARY ASSIGNMENT CALCULATION ........................................................................................ 15 
4.2.2.  MULTIPLE INDEPENDENT FAULT SETS ............................................................................................ 16 
4.2.3.  DYNAMIC FAULT ORDERING ........................................................................................................ 16 
4.2.4.  TEST PATTERN GENERATION ........................................................................................................ 17 
4.2.5.  FAULT‐DETECTION COUNT‐DIRECTED LOW POWER CLUSTERING ........................................................ 19 
4.3.  REDUCING TEST POWER IN LINEAR TEST COMPRESSION SCHEMES ...................................................... 20 
4.3.1.  LINEAR TEST DATA COMPRESSION ................................................................................................ 21 
4.3.1.1.  LOW‐POWER TEST ARCHITECTURE .......................................................................................... 21 
4.3.1.2.  LOW‐POWER DECOMPRESSOR ............................................................................................... 22 
4.3.2.  LOW‐POWER TEST .................................................................................................................... 22 
4.3.2.1.  PROPOSED LOW‐POWER LINEAR DECOMPRESSOR ...................................................................... 22 
4.3.2.2.  SCAN CELLS PARTITIONING .................................................................................................... 23 
4.3.2.3.  TEST SYNTHESIS FLOW .......................................................................................................... 24 
第五章  結果與討論 ......................... 28 
5.1.  LEVEL‐CONVERTING SCAN FLIP‐FLOPS .......................................................................................... 28 
5.2.  LOW PEAK POWER ATPG AND TEST COMPACTION FOR N‐DETECTION TEST ......................................... 31 
5.3.  LOW CAPTURE POWER TEST GENERATION FOR LOC TRANSITION TEST BASED ON DON’T‐CARE FILLING .... 35 
參考文獻 ................................... 37 
 
5 
第二章 研究目的 
Power consumption has emerged as an important design constraint in nano-technology. The 
advance in technology makes it possible to put more and more devices in the same silicon area 
while at the same time pushes the clock rate even higher; as a result, the power consumed by a 
chip increases significantly. Excessive power translates into extra heat, which not only increases 
the packaging and cooling costs but also reduces the life span of integrated circuits (ICs). Thus, 
advanced power management mechanisms are necessary to achieve acceptable level of power 
consumption. The second source of requirement for low power design comes from mobile 
applications, in which the lifetime of battery can be extended if the power is reduced. 
 
CMOS is currently the dominant technology in digital VLSI. Two components contribute to 
the power dissipation in CMOS circuits [1]. The static dissipation is due to leakage current, while 
dynamic power dissipation is due to switching transient current as well as charging and 
discharging of load capacitances. 
 
In the past, the major source of power dissipation in CMOS circuits is the dynamic power 
dissipation. Dynamic power dissipation appears only when a CMOS gate switches from one 
stable state to another. In the dynamic power dissipation, the component due to the charging and 
discharging of load capacitance is usually the dominant factor. Thus the average dynamic 
dissipation of a CMOS gate is: 
NfVCP pDDLavg  22
1  (1) 
where CL is the load capacitance, VDD is the power supply voltage, fp is the clock frequency, and 
N is the average number of gate output transition, or switching activity, in a clock cycle. The 
advance in processing technology continuously scales down the feature size of a device, which in 
turn makes in possible to integrate more devices in a single chip and reduces propagation delay 
and the operation frequency fp also increases. The power consumption can be kept in check when 
the power supply voltage VDD is also scaled, as Eq. (1) indicates. 
 
Unfortunately, the impressive improvement in circuit performance stops in recent years. 
With VDD now reaches around 1V, it is very difficult to further reduce the supply voltage. The 
processing technology still keeps on scaling down transistor sizes as predicted by Moore’s Law, 
which implies the operation frequency can be further increased as the propagation delay 
decreases theoretically. However, higher frequency will surely increase power consumption, since 
VDD probably won’t scale down in the future. As a result, it is infeasible to push operation 
frequency higher due to power constraint, and further performance has to come from more 
refined design techniques. For example, to counter the loss in performance while improving the 
power efficiency, multiple supply voltages (MSV’s, a.k.a. multiple VDD) [2] and multiple 
threshold voltage CMOS transistors (MTCMOS) [3] techniques have been proposed. The gates 
7 
techniques and testing. The first topic is how to effectively test low-power features in a 
low-power design. Most low-power designs introduce extra circuits that are used only for power 
reduction and thus it may be difficult to test such circuits, as we shall discuss in the later section. 
Also, modern low-power designs often try to trade performance for reduced power, and thus the 
manufactured chips are susceptible to delay defects. As a result, sophisticated delay testing 
schemes may be necessary to determine the operation conditions of a VLSI chip. The second 
topic is low-power testing is scan-based design-for-testability (DFT). Many low-power test 
techniques have already proposed in recent years. However, an optimized test schemes really 
have to take into account many different issues, including testing power, test data volume, test 
application time, and routing length of the scan structure. The ultimate goal of this research is to 
include the automatic test pattern generation (ATPG) and the physical design parts into an 
integrated environment such that all these issues can be treated in the same time. 
9 
3.2. Sleep Mode 
Sleep transistors or “supply gating” [32] is a technique similar to clock gating that 
selectively shuts off power supply to functional units during standby mode to save leakage power. 
This scheme is outlined in Fig. 2. The “virtual” VDD and GND are connected to regular VDD and 
GND rails during normal active-mode operation. During standby mode, the Sleep/Sleep# signal is 
activated, disconnecting the virtual rails from their regular supplies, thus preventing a leakage 
current path between VDD and GND. Studies on a 32-bit static CMOS adder with 0.13mm 
technology show 1450X standby leakage reduction for a 5.1% sleep transistor size and 60mV 
virtual supply bounce [33]. Sleep transistor size is typically large to minimize stack performance 
penalty, and therefore, turning them on/off consumes dynamic power. The leakage power savings 
should be carefully weighed against the dynamic power penalty, by evaluating the number of 
idle/standby cycles for which leakage power is saved. 
 
 
Fig. 2. Sleep transistor 
 
The state of sequential circuits is stored in latches or flip-flops; therefore, to resume circuit 
operation after returning from the standby mode, the state of all latches or flip-flops needs to be 
restored. Saving and restoring the state of latches during the power-down mode in sequential 
circuits can be achieved by duplicating every regular latch or flip-flop in the circuit with a 
shadow (or “balloon”) latch, and providing a path to move data from the regular flip-flop to the 
shadow and back [34],[35]. 
 
 
3.3. Low-Power Testing 
The power constraints defined under normal operations are usually much lower than the 
power consumed in the test mode, as the goal of reduced test application time is usually achieved 
Virtual VDD 
Functional 
Unit 
Virtual VSS 
Sleep Transistor
Sleep Transistor
11 
第四章 研究方法 
We will focus on three topics in this chapter: (1) level-converting scan flip-flops, (2) low 
peak power ATPG and test compaction for n-detection test, and (3) reducing test power in linear 
test compression schemes. 
 
4.1. Level-Converting Scan Flip-Flops 
In MSV designs, components with the same supply voltage are usually placed in the same 
voltage island. The problem MSV is that when an island with lower supply voltage (VDDL) is 
connected to an island with higher supply voltage (VDDH), the static current of the latter island 
increases [63]. To solve this problem, level converters (LC) [64]-[66] or level converting 
flip-flops (LCFF) [67],[68] are used to convert VDDL to VDDH at the boundary of the voltage 
islands. 
 
 
4.1.1. Level Converters 
The first level converter design is a cross-coupled PMOS pair (CCLC) [63] as shown in 
Figure 1(a). Many other level converters have been proposed, including STR5 [64], multi-Vth 
level converter [65], and capacitive based level converter (CBLC) [66]. 
In order to determine the best level converter design for level-converting scan flip-flop 
(LCSFF), we combine the hybrid latch flip-flop (HLFF) [69] with the above single-Vth level 
converter designs (that is, excluding MTV level converter [65] as it requires transistors with 
multiple Vth) to construct various LCFF designs. The designs are SPICE simulated with TSMC 
0.18m technology, and the results are shown in Table I. According to the simulation results, 
CBLC provides the lowest propagation delay and power consumption. Hence, CBLC is used in 
the proposed LCSFF designs. 
 
TABLE I 
Comparison of various LC designs. 
 CCLC [63] STR5 [64] CBLC [66]
power 54.34μw 49.90μw 20.15μw 
rise delay 317.08ps 266.30ps 133.36ps 
fall delay 307.47ps 136.44ps 90.91ps 
 
 
4.1.2. Design of Level-Converting Scan Flip-Flops 
We have developed three level converting scan flip-flops (LCSFF) that also support 
sleep-mode operation and data retention. The first two designs are based on master-slave flip-flop 
13 
 
Clk  
Clk
 
Clk Clk
Clk 
Q 
VDDL
 VDDH 
 
1C
Clk
Clk
x
y C
M1 
M2 
DI  
SI 
SO 
Clk  
Clk
SO
Sleep Area
Retention Latch 
mode 
1I  2I
Sleep
VDDL
Sleep
Sleep 
Clk
 
Fig. 4. Level Converting Master-Slave Scan FF, Type II (LCMSSFF-II). 
 
4.1.2.3. LCHLSFF 
The third design is based on the hybrid latch FF with scan-retention [70], as shown in Fig. 5. 
The Retention Latch and CBLC in Fig. 5 are the same as those appearing in the previous LCSFFs. 
The HLFF is a precharged circuit, in which node a is precharged when Clk is 0. The three 
inverters in the bottom-left corner produced an inverted and delayed version of Clk, denoted as 
Clk’. The transistors in the sleep area act as a 3-input NAND gate. This 3-input NAND gate 
allows data input DI to be loaded into the latch when both Clk and Clk’ are 1, which is a narrow 
pulse at the positive edge of Clk. The output of the NAND gate is then stored in the latch formed 
by the CBLC and the inverter below it. The transistors shown in dotted lines are for input control. 
When both mode and Clk signals are 1, data from either SI or SO can be loaded into the latch, 
depending on the value of Sleep. When Sleep is asserted, data from the Retention Latch is 
selected. Otherwise, scan input SI is selected. 
 
15 
4.2. Low Peak Power ATPG and Test Compaction for 
n-Detection Test 
Power consumption in the scan-based tests comes from two sources: shift power in the scan 
shifting, and capture power in the capture cycle. While scan shifting consumes most power, the 
capture cycle is the time when a test is actually applied, and the peak power often appears in the 
capture cycle as ATPG patterns tend to generate more switching activity in the circuit under test. 
An excessive capture power may invalidate a test, as the temporarily lower supply voltage and 
IR-drop are both troubling. X-filling is a very useful technique to generate low power test patterns. 
Both low shift power (LSP) X-filling and low capture power (LCP) X-filling [71]-[76] methods 
have been studied. 
 
In this part, we propose an LCP ATPG method for n-detection test set that achieves both low 
peak power and small set size. The rational is that, since we have more test patterns in an 
n-detection test set, it is easier to manage the peak power by equalizing switching activity across 
patterns. Experimental results show that the peak power indeed becomes lower as n is larger, 
while the growth in set size is less than linear. 
 
The overall procedure is divided into two major parts: (1) low-power test pattern generation, 
and (2) power-aware test compaction. In the first part, test patterns satisfying the given capture 
power constraints are generated for all faults. The major components in this part are discussed in 
Subsections A to D. The test compaction procedure discussed in subsection E is then used to 
reduce the test set size and peak power consumption. 
 
 
4.2.1. Necessary Assignment Calculation 
In order to determine the maximal independent fault set, first it is crucial to know the 
necessary assignments [77] for the detection of each fault. In general, a set of necessary 
assignments can be calculated for each member in the D-frontier (i.e., each fault propagation 
path), which significantly increases the memory space requirement. In this paper, we only keep 
the necessary assignments that are absolutely required for the detection of a fault regardless of the 
propagation path. Fig. 7 shows the example of necessary assignments of m stuck-at-1 fault in s27, 
the smallest circuit in the ISCAS’89 suite. 
 
17 
to the sequence in the ordered fault list. Once a test pattern is generated and fault simulated, the 
detected faults will be removed from the fault list, and the independent fault sets are updated as 
well. The fault list will be ordered again according to the new independent fault sets. 
 
 
4.2.4. Test Pattern Generation 
The objective of our test pattern generation (TPG) procedure is to generate patterns that 
cover as many faults as possible, while at the same time satisfying the low-power goal. A fault is 
selected for TPG if it appears earlier in the ordered fault list and is detected less than n times. The 
initial test pattern is obtained by generating m test cubes for the fault and selecting the one with 
the lowest capture power. The constant m (m1) is a predetermined number. The reason for 
selecting low testability faults first is that test patterns for such faults usually cover many other 
faults but not vice versa. Thus, generating test patterns for these faults first usually leads to a 
smaller test set. 
 
Once the test pattern for the initially selected fault is obtained, we try to make this pattern 
detect as many other faults as possible. Therefore, the fault with the lowest testability on the 
X-paths is selected for TPG. This process is repeated until either the capture power exceeds a 
given upper limit, or no X-bits exiting in PPI or PPO. Two capture power constraints are used in 
the TPG process: the power growth limit (cpgrwoth_limit) and the pattern power limit (cppattern_limit). 
Whenever a test pattern is updated, it is necessary to make sure that the growth in capture power 
due to PPI/PPO assignment is less than cpgrwoth_limit, and the total capture power is lower than 
cppattern_limit. 
 
This procedure is illustrated by s27 shown in Fig. 9, where 12 faults are considered. A fault 
denoted as fi/0 indicated that fault fi is a stuck-at-0 fault on the corresponding line. The ordered 
fault list is F = {{f5, f11}, {f8, f9}, f12, f3, f10, f4, f6, f7, f1, f2}, where {f5, f11}, {f8, f9} are two larger 
independent fault sets. The other fault sets contain only one fault each. The capture power limits 
are cppattern_limit = 2 and cpup_limit = 1. The (PPI, PPO) pairs of the scan cells are (C, H), (D, I), (G, 
K). In other words, PPO H is the input of a scan cell, whose output is PPI C. The testability of 
each fault is shown in the parenthesis under the line, and a larger number implies lower testability. 
In this example, f5 is the most difficult fault to detect and it is the first in the fault list; thus m test 
cubes are generated for f5. 
 
19 
4.2.5. Fault-Detection Count-Directed Low Power Clustering 
The best known test compaction results are obtained by MinTest [80]; however, MinTest 
employs a brute-force search, which is very time-consuming. We apply a fault-detection count 
directed clustering technique [81]. Let t be a test pattern of a fault f. The atomic component [81] 
of t with respect to f is a maximally expanded cube of t such that fault f is still detected by this 
cube. For example, assume that a test pattern t = (000011) detects 11 different faults: {f0, f4, f5, f8, 
f14, f17, f18, f19, f22, f26, f31}. After atomic components extraction with respect to fault f0, the 
expanded test cube is t’ = (xxx0x1), and only f0 is detectable by this test cube. The reason for 
finding atomic components is that they represent minimal assignments required for the detection 
of a given fault, and the large amount of X-bits left in the cube renders it easier to compact such 
cubes with other valid components. Besides, multiple test patterns can be derived from the same 
atomic component, which makes it easier to generate n-detection patterns. Atomic components 
can be efficiently found by the test relaxation [82] technique. 
 
Examples of test patterns and their associated atomic components are given in Tables I and 
II for the circuit s27. Table II gives test patterns generated by the proposed LCP ATPG, and the 
faults detected by each fault are given in the last column. The atomic components extraction is 
then carried out for each fault, and the results are illustrated in Table III. The second column in 
Table III gives the detection number of each fault (i.e., how many times this fault is detected in 
the initial test set). The last column gives the unique atomic component for each fault. 
 
Table II 
TEST PATTERNS FOR S27. 
Test pattern Fault detected 
v1 0000011 f0, f4, f5, f8, f14, f17, f18, f19, f22, f26, f31 
v2 0111000 f1, f2, f9, f10, f12, f15, f17, f18, f20, f22, f23, f27, f28, f30 
v3 1101011 f1, f2, f9, f10, f12, f13, f16, f18, f25, f27, f31 
v4 1001010 f0, f3, f6, f8, f21, f22, f24, f26, f28, f29 
v5 0000000 f1, f2, f9, f11, f12, f15, f17, f21, f22, f23, f27, f28, f29 
v6 1001100 f1, f2, f7, f16, f21, f25, f27, f28, f29 
 
After atomic components extraction, the faults are sorted according to their detection 
numbers in ascending order. The compaction process starts with the smallest detection number; 
thus, this procedure is referred to as a fault-detection count directed clustering [81]. Compatible 
sets are then generated according to the ordered fault list as follows. First, compatible sets are 
generated for essential faults (i.e., faults that are detected only once) and faults that are detected 
less than n times. The result is a set of test cubes. The unspecified bits in each test cube are then 
assigned by an X-filling procedure to reduce capture power and shift power. The final pattern is 
fault simulated to remove other detected faults. The process is then repeated for all remaining 
non-essential faults. 
21 
testing techniques for linear test compression based systems have been presented recently 
[89],[90]. 
 
In this research, a low test power scheme for circuits with linear decompressor is proposed. 
In the proposed method, a refined low-power decompressor that can prohibit switching activities 
during shift operations and achieves higher compression rate is developed. A scan cells 
partitioning scheme is proposed to further reduce the bit transitions. Experimental results on of 
applying to proposed method to ISCAS’89 benchmark circuits show that the proposed scheme 
can achieve higher compression rates and power reduction at the same time. 
 
 
4.3.1. Linear Test Data Compression 
The on-chip sequential linear decompressor architecture is shown in Fig. 10. An encoded 
word is loaded from the automatic test equipment (ATE) into the LFSR or ring generator [88], 
which can run autonomously for several cycles before reseeding. The LFSR (ring generator) is 
followed by a XOR network (phase shifter) [86] to expand the outputs to fill the scan chains. 
 
 
Fig. 10. Decompressor architecture of linear compression schemes. 
 
 
4.3.1.1. Low-Power Test Architecture 
The test architecture shown in Fig. 11 was proposed to reduce test power in linear 
compression based scan test schemes [89]. The input of each scan chain is fed by an AND gate 
whose inputs include a datum from the decompressor and a control signal decoded by an XOR 
network. In the shift mode, a scan chain receives a decompressed datum when the control signal 
is 1; otherwise, the scan input is 0. In this way, the probability of receiving a decompressed bit is 
50%. The probability of sending 0 to scan chains can be increased to 75% by employing an AND 
gate to general a control signal, where the two inputs of the AND gate are coming from the XOR 
network. 
C
om
pa
ct
or
 
ATE 
LF
SR
 o
r 
R
in
g 
G
en
er
at
or
 
Ph
as
e 
Sh
ift
er
 
…
…
 
…
…
 
23 
(test/shift=1). Therefore, the data source of a scan chain is determined by the control signal 
applied to the first cell in this chain. 
 
 
Fig. 12. Proposed low-power test architecture. 
 
When the control signal is 1, the scan chain receives data from the decompressor; otherwise, 
the bit in the first scan cell will be loaded. Since this cell will not change value in this period, 
shift power in this scan chain will be reduced. The first scan slice behaves as the shadow register. 
 
If a control signal becomes 0 in the capture cycle (i.e., test/shift=0), the corresponding scan 
chain will be disabled as a whole. In other words, the test response will not be captured in this 
chain. In this way, capture power can be reduced if errors do not appear in some chains. 
 
This test architecture provides three advantages over the previous method. (1) The shadow 
register is not required. (2) Capture power can also be reduced. (3) In most cases, only a few scan 
chains have to be applied by new values when reseeding is required. In other words, only a few 
bits in the decompressor outputs are specified. Therefore, the reseeding vectors can be shorter, 
which improves the test data compression rate. 
 
 
4.3.2.2. Scan Cells Partitioning 
One way to conduct low power testing is to reduce bit transitions in the scan shift process, 
and this goal can be achieved by scan cells partitioning [91]. It was reported in [91] that 
partitioned scan chains can improve code-based test data compression rate by reducing entropy in 
Se
qu
en
tia
l D
ec
om
pr
es
so
r 
clk
clk
test/shift 
CLK Gating 
clk
test/shift 
…
…
…
…
Control 
Block 
reseeding 
vector 
control 
cube
clk
25 
 
1. ATPG 
2. Scan chain partitioning [91] 
3. Low-power state compression 
4. X-filling 
5. Reseeding vector derivation 
 
In the first step, a test set with X-bits is generated. The scan chain is partitioned accordingly. 
The next three steps are explained next. 
 
1) Low-Power State Compression 
Once the scan chains architecture is known, the next step is to determine the decompressed 
states that will be loaded into scan chains. The procedure is illustrated by the example shown in 
Fig. 14, where 91 scan cells are arranged in 10 equal-length scan chains with three test vectors 
(V1, V2, and V1) applied. Each row corresponds to a scan chain, and a dummy cell, illustrated by 
red a circle, is added at the end of a scan chain whenever necessary. A column vector is referred 
to as a scan slice. In the proposed test architecture, a slice of data loaded into scan chains can be 
either fed by the decompressor or simply the data held in the first slice. 
 
 
Fig. 14. State compression. 
 
In order to reduce the number of reseedings and bit transitions, neighboring slices should be 
assigned to the same vector, and this can be done by grouping consecutive slices as follows. 
Starting from the rightmost slice, a slice is merged with its preceding slice with the two slices are 
compatible. The procedure is repeated until a conflicting slice is met. A group of slices obtained 
in the above procedure is referred to as a slice group (SG). If a group obtained from the procedure 
spans two vectors, the group is further divided into two groups at the vector boundary. For 
example, the first group obtained in Fig. 14 includes all slices in SG1 and SG2. However, since 
the initial group spans V1 and V2, it is thus divided into two groups. There are five slice groups in 
Fig. 14, where SG5 consists of the leftmost slice. All slices in a group are merged into a single 
state, and the five states corresponding to the five slice groups in Fig. 14 are shown in Fig. 15(a), 
where the rightmost column represents the state of SG1. 
 Decompressed Vectors 
 V3 V2 V1 
   
 
27 
positions in the second state have to be set by the decompressor. This condition is illustrated by 
solid circles in Fig. 15(b). For example, states of SG2 and SG3 conflicts in the second and third 
rows, so the second and third scan chains have to be assigned a new value when SG3 is to be 
shifted into scan chains. The second type of positions includes scan cells in the header slice that 
have captured a response, and those positions are indicated by dotted circles in Fig. 15(b). 
 
In this work, the low-power decompressor consists of a ring generator and a phase shifter. 
The present state and next state of a ring generator can be computed accordingly [89],[90]. 
 
29 
TABLE V 
COMPARISON OF SCAN FLIP-FLOPS. 
 MSSFF-I MSSFF-II HLSFF 
T(C-Q)LH 94.76ps 96.59ps 129.34ps 
T(C-Q)HL 84.59ps 86.19ps 46.06ps 
avg. T(C-Q) 89.68ps 91.39ps 87.70ps 
Scan T(C-Q)LH 94.86ps 64.97ps 286.42ps 
Scan T(C-Q)HL 84.59ps 82.50ps 88.48ps 
Scan avg. T(C-Q) 89.72ps 73.73ps 187.45ps 
Total power 14.48μW 10.83μW 15.11μW 
PDP 12.99 9.90 13.25 
 
TABLE VI 
COMPARISON OF LCSFFS. 
 LCMSSFF-I LCMSSFF-II LCHLSFF 
T(C-Q)LH 89.62ps 132.54ps 142.64ps 
T(C-Q)HL 127.96ps 105.69ps 65.67ps 
Avg. T(C-Q) 108.78ps 119.11ps 104.50ps 
scan T(C-Q)LH 88.92ps 132.42ps 339.26ps 
scan T(C-Q)HL 127.97ps 105.69ps 90.83ps 
Scan avg. T(C-Q) 103.16ps 119.06ps 215.04ps 
Total power 15.70μW 15.88μW 22.79μW 
PDP 16.09 18.91 23.73 
 
Results of the post-layout simulation are presented next. To determine the exact amount of 
the power and delay overhead of the scan and level converting mechanisms, we developed the 
layouts for the proposed LCSFFs separately and ran simulations on the extracted netlists. Table 
VII summarizes results of the simulations. The correctness of the circuits is illustrated by the 
simulated waveforms plotted in Fig. 16, where Q1, Q2, and Q3 are the outputs of LCMSSFF-I, 
LCMSSFF-II, and LCHLSFF, respectively. 
 
31 
 
Fig. 16.  Post-layout simulation waveforms of the proposed LCSFFs. 
 
In summary, we presented three different ways to design level converting scan flip-flops. 
The flip-flops provide sleep-mode operation and level conversion at the output ports, which make 
them useful for low-power applications. 
 
If a simple flip-flop is needed, HLFF is the best candidate as it provides the lowest PDP. 
This design is faster and the power consumption is not much larger. However, once the scan, data 
retention, and level converting mechanisms are included, the power consumed in the HLFF based 
design increases rapidly. It is interesting to note that the one with the worst result as a simple 
flip-flop (i.e., MSFF-I) turns out to be the best LCSFF design in terms of PDP. 
 
 
5.2. Low Peak Power ATPG and Test Compaction for 
n-Detection Test 
We have implemented the proposed LCP n-detection ATPG, and the method is evaluated by 
several ISCAS’89 benchmark circuits. The statistics of the experimented circuits are listed in 
Table VIII. All experiments were performed on a PC with 2.0GHz Intel Core 2 Duo CPU 
processor and 2.0GB memory. The number of faults in each circuit is listed in column two, while 
the number of independent fault sets in the same circuit is given in column three. The last column 
shows the run time. 
 
33 
Table IX 
RESULTS OF LCP N-DETECTION ATPG (BACKTRACK LIMIT = 20). 
circuit n #PAT Nor. FC (%)
Capture power 
T_WSA 
Power Cons.
Peak Avg. Total PL GL
s5378 
1 163 1.00 99.13 97 31.87 5194 333107 97 - 
2 303 1.86 99.13 89 33.32 10095 549421 89 60 
3 460 2.82 99.13 88 33.43 15376 765451 88 45 
4 610 3.74 99.13 88 31.50 19213 1012955 88 40 
5 749 4.60 99.13 82 31.56 23640 1134864 82 30 
s9234 
1 255 1.00 93.48 85 36.25 9245 1046753 85 - 
2 455 1.78 93.46 72 36.33 16532 1711425 72 50 
3 664 2.60 93.48 71 37.77 25081 2383791 71 40 
4 865 3.39 93.45 70 35.83 30993 2879685 70 30 
5 1115 4.37 93.45 68 37.54 41860 3822698 68 20 
s13207 
1 341 1.00 98.46 212 45.80 15619 1765047 212 - 
2 644 1.89 98.46 212 49.03 31575 3035550 212 60 
3 945 2.77 98.46 206 51.67 48831 4266441 206 50 
4 1261 3.70 98.46 204 53.89 67953 5163438 204 40 
5 1587 4.65 98.46 199 54.62 86689 6396551 199 30 
s15850 
1 201 1.00 96.68 160 47.52 9552 968759 160 - 
2 356 1.77 96.68 159 49.02 17450 1463837 159 50 
3 473 2.35 96.68 158 49.55 23437 1992889 158 34 
4 676 3.36 96.68 156 48.87 33035 2604365 156 32 
5 910 4.53 96.68 142 46.67 42470 3226971 142 30 
s38417 
1 489 1.00 99.47 626 123.11 60199 3667272 626 - 
2 835 1.71 99.47 571 121.21 101213 6016639 571 150
3 1328 2.72 99.47 542 116.83 155146 8263573 542 130
4 1661 3.40 99.47 515 121.11 201171 10628134 515 80 
5 2174 4.45 99.47 511 108.95 236859 13127520 511 70 
 
35 
5.3. Low Capture Power Test Generation for LOC Transition 
Test Based on Don’t-Care Filling 
We have conducted experiment to show the efficiency of the proposed method. Eight 
ISCAS’89 benchmark circuits are used in the experiment, and statistics of the circuits, including 
the number of scan cells (#Cells) and test vectors (#TV), are summarized in Table XI. Note that 
no test compaction techniques have been applied. 
 
TABLE XI. 
CIRCUIT STATISTICS STATISTICS 
Circuit #Cells #TV 
S1423 91 473 
s5378 214 1474 
s9234 247 1954 
s13207 700 3273 
s15850 611 3645 
s35932 1763 10150 
s38417 1664 8316 
s38584 1464 13383 
 
Four set of experiments have been carried out, where scan cells in each benchmark circuits 
are divided into 10, 20, and 30 40 scan chains, respectively. In each case, both partitioned and 
non-partitioned scan chains have been tried. In order to show the efficiency of the proposed 
method, the compression results are compared to the test architecture in [90]. In order to achieve 
fair comparison, the same ring generator and phase shifter are used in both cases. 
 
Table XII & XIII show experimental results for circuits with 10 and 20 scan chains. 
Columns 2 and 3 give the number of scan cells in a scan chain and the total number of slices. The 
next four columns are results of non-partitioned scan chains. Columns 4 and 5 give the number of 
seeds obtained by [90] and the proposed method (Prop.), and column 6 gives the reduction of 
seeds achieved by the proposed method compared with [90]. Column 7 gives the weighted 
switching activity (WSA) of the scan shift process. Columns 8 to 11 provide the same set of data 
for partitioned scan chains, and the last column compares the WSA of the partitioned scan chains 
to non-partitioned scan chains. The results show that the proposed test architecture achieves much 
better test data compression rate than the test architecture in [90], and the proposed scan cells 
partitioning method can further reduce shift power (WSA). 
 
37 
參考文獻 
 
[1] J. Rabaey, A. Chandrakasan, and B. Nikolic, Digital Integrated Circuits: A Design 
Perspective, 2nd Ed., Prentice Hall, NJ, 2003. 
[2] K. Usami and M. Horowitz, “Clustered voltage scaling techniques for low-power design,” 
in Proc. Int. Symp. on Low Power Electronics and Design, pp. 3-8, 1995. 
[3] Q. Wang and S.Vrudhula, “Algorithms for minimizing standby power in deep submicron, 
dual-Vt CMOS circuits,” IEEE Transactions on CAD, Vol. 21, pp. 306-318, 2002. 
[4] S. Tyagi et al, “A 130 nm generation logic technology featuring 70nm transistors, dual Vt 
transistors and 6 layers of Cu interconnects,” in Proc. Int. Electron Devices Meeting 
(IEDM), pp. 567-570, 2000. 
[5] R.K. Krishnamurthy, A. Alvandpour, S. Mathew, M. Anders, V. De, and S. Borkar, “High- 
performance, low-power, and leakage-tolerance challenges for Sub-70nm microprocessor 
circuits,” in Proc. European Solid State Circuit Conf. (ESSCIRC), pp. 315-322, 2002. 
[6] R.K. Krishnamurthy et al, “High-performance and low-voltage challenges for sub-45nm 
microprocessor circuits,” in Proc. Int. ASIC Conf., pp. 283-286, 2005. 
[7] S. Shigematsu et al, “A 1-V high-speed MTCMOS circuit scheme for power-down 
application circuits,” IEEE J. Solid-State Circuits, Vol. 32, pp. 861-869, June 1997. 
[8] K. Roy, L. Wei, and Z. Chen, “Multiple-Vdd Multiple-Vth (MVCMOS) for lower power 
applications,” in Proc. Int. Symp. Circuits and Syst., pp. 366-370, 1999. 
[9] V. Kursun and E. G. Friedman, Multi-Voltage CMOS Circuit Design, John Wiley & Sons 
Ltd., 2006. 
[10] K.R. Gandhi and N.R. Mahapatra, “Exploiting data-dependent slack using dynamic 
multi-VDD to minimize energy consumption in datapath circuits,” in Proc. DATE, 2006. 
[11] K, Choi, R. Soma, and M. Pedram, “Dynamic voltage and frequency scaling based on 
workload decomposition,” in Proc. Int. Symp. on Low Power Electronics and Design, pp. 
174-179, 2004. 
[12] K, Choi, R. Soma, and M. Pedram, “Fine-grained dynamic voltage and frequency scaling 
for precise energy and performance trade-off based on the ratio of off-chip access to 
on-chip computation times,” in IEEE Trans. CAD, Vol. 24, No. 1, pp. 18-28, 2005. 
[13] D. Zhu and H. Aydin, “Energy management for real-time embedded systems with 
reliability requirements,” in Proc. Int. Conf. Computer-Aided Design, pp. 528-534, 2006. 
[14] R. Mukherjee, S.O. Memik, “Physical aware frequency selection for dynamic thermal 
management in multi-core systems,” in Proc. Int. Conf. Computer-Aided Design, pp. 
547-552, 2006. 
[15] J. Donald, M. Martonosi, “Techniques for multicore thermal management: classification 
and new exploration,” in Proc. Int. Conf. Computer-Aided Design, pp. 78-88, 2006. 
[16] Y. Gu, S. Chakraborty, Wei Tsang Ooi, Games are up for DVFS, in Proc. Design 
Automation Conf., pp. 598-603. 
[17] K. Usami et al, “Automated low-power technique exploiting multiple supply voltages 
39 
2001. 
[34] S. Shigematsu et al., “A 1-v high-speed MTCMOS circuit scheme for power-down 
application circuits,” IEEE J. Solid-State Circuits, Vol. 32, No. 6, pp. 861-869, June 1997. 
[35] V. Zyuban and S.V. Kosonocky, “Low power integrated scan-retention mechanism,” in 
Proc. Int. Symp. on Low Power Electronics and Design, pp. 98-102, 2002. 
[36] R.M. Chou, K.K. Saluja, and V.D. Agrawal, “Scheduling tests for VLSI systems under 
power constraints,” IEEE Trans. on VLSI Systems, vol. 5 , no. 2, pp. 175-185, Jun. 1997. 
[37] T. Schuele and A.P. Stroele, “Test scheduling for minimal energy consumption under 
power constraints,” in Proc. VLSI Test Symp., pp. 312-318, 2001. 
[38] P. Girard, L. Guiller, C. Landrault, and S. Pravossoudovitch, “A test vector inhibiting 
technique for low energy BIST design,” in Proc. VLSI Test Symp., pp. 407-412, 1999. 
[39] S. Gerstendorfer and H.-J. Wunderlich, “Minimized power consumption for scan-based 
BIST,” in Proc. Int. Test Conf., pp. 77 -84, 1999. 
[40] S. Wang and S.K. Gupta, “LT-RTPG: a new test-per-scan BIST TPG for low heat 
dissipation,” in Proc. Int. Test Conf., pp. 85-94, Oct. 1999. 
[41] N.Z. Basturkmen, S.M. Reddy, and I. Pomeranz, “A low power pseudo-random BIST 
technique,” in Proc. Computer Design: VLSI in Computers and Processors, pp. 468-473, 
Sept. 2002. 
[42] N.Z. Basturkmen, S.M. Reddy and I. Pomeranz, “Pseudo random patterns using Markov 
sources for scan BIST,” in Proc. Int. Test Conf., pp. 1013-1021, Oct. 2002. 
[43] N.-C. Lai and S.-J. Wang, “Low power BIST with smoother and scan-chain reorder under 
optimal cluster size,” IEEE Trans. on Computer-Aided Design, Vol. 25, No. 11, pp. 
2586-2594, Nov. 2006. 
[44] V. Dabholkar, S. Chakravarty, I. Pomeranz, and S. Reddy, “Techniques for minimizing 
power dissipation in scan and combinational circuits during test application,” IEEE Trans. 
on Computer-Aided Design of Integrated Circuits and Systems, vol. 17, no. 12, pp. 
1325-1333, Dec. 1998. 
[45] R. Sankaralingam, R.R. Oruganti, and N.A. Touba, “Static compaction techniques to 
control scan vector power dissipation,” in Proc. IEEE VLSI Test Symp., pp. 35-40, 2000. 
[46] T.-C. Huang and K.-J. Lee, “Reduction of power consumption in scan-based circuits during 
test application by an input control technique,” IEEE Trans. CAD, vol. 20, no. 7, pp. 
911-917, July 2001. 
[47] A. Chandra and K. Chakrabarty, “Combining low-power scan testing and test data 
compression for system-on-a-chip,” in Proc. IEEE/ACM Design Automation Conf., pp. 
166-169, 2001. 
[48] R. Sankaralingam, B. Pouya, and N.A. Touba, “Reducing power dissipation during test 
using scan chain disable,” in Proc. VLSI Test Symp., pp. 319-324, May 2001. 
[49] R. Sankaralingam and N.A. Touba, “Inserting test points to control peak power during scan 
testing,” in Proc. DFT in VLSI Systems, pp. 138 -146, Nov. 2002. 
[50] S. Kajihara, K. Ishida, and K. Miyase, “Test vector modification for power reduction during 
scan testing,” in Proc. VLSI Test Symp., pp. 160 -165, May 2002. 
41 
May 2007. 
[69] N. Nedovic and V.G. Oklobdzija, “Hybrid latch flip-flop with improved power efficiency,” 
in Proc. 13th Symp. Integrated Circuits and Systems Design, pp 211–215, Sep. 2000. 
[70] V. Zyuban and S.V. Kosonocky, “Low power integrated scan-retention mechanism,” in 
Proc. Int. Symp. Low Power Electronics and Design, pp.98–102, Aug. 2002. 
[71] X. Wen, Y. Yamashita, S. Kajihara, L.-T. Wang, K.K. Saluja, and K. Kinoshita, “On 
Low-Capture-Power Test Generation for Scan Testing,” in Proc. VTS, pp. 265-270, May 
2005. 
[72] X. Wen et. al, “A New ATPG Method for Efficient Capture Power Reduction During Scan 
Testing,” in Proc. VTS, 2006. 
[73] X. Wen et. al, “Critical-Path-Aware X-Filling for Effective IR-Drop Reduction in At-Speed 
Scan Testing,” in Proc. DAC, pp. 527-531, 2007. 
[74] M.-F. Wu, K.-S. Hu, and J.-L. Huang, “An Efficient Peak Power Reduction Technique for 
Scan Testing,” in Proc. ATS, pp. 111-114, 2007. 
[75] N.-C. Lai and S.-J. Wang, “Low-Capture-Power Test Generation by Specifying a Minimum 
Set of Controlling Inputs,” in Proc. ATS, pp. 413-418, 2007. 
[76] J. Li, Q. Xu, Y. Hu, and X. Li, “On Reducing Both Shift and Capture Power for 
Scan-Based Testing,” in Proc. ASPDAC, pp. 653-658, 2008. 
[77] I. Pomeranz and S. M. Reddy, “Generalization of Independent Faults for Transition Faults,” 
in Proc. VTS, pp. 7-12, 1992. 
[78] S. Kajihara, I. Pomeranz, K. Kinoshita, and S.M. Reddy, “Cost-Effective Generation of 
Minimal Test Sets for Stuck-at Faults in Combinational Logic Circuits,” IEEE Trans. CAD, 
Vol. 14, No. 12, pp. 1496-1504, Dec. 1995. 
[79] L. H. Goldstein and E. L. Thigpen, “SCOAP: Sandia Controllability/ Observability 
Analysis Program,” in Proc. DAC, pp. 190-196, 1980. 
[80] I. Hamzaoglu and J. H. Patel, “Test Set Compaction Algorithms for Combinational 
Circuits,” in Proc. ICCAD, pp. 283-289, Nov. 1998. 
[81] A. El-Maleh and S. Khursheed, “Efficient Test Compaction for Combinational Circuits 
Based on Fault Detection Count-Directed Clustering,” IET Computers & Digital 
Techniques, vol. 1, No. 4, pp.364-368, July 2007. 
[82] A. El-Maleh and A. Al-Suwaiyan, “An Efficient Test Relaxation Technique for 
Combinational & Full-Scan Sequential Circuits,” in Proc. VTS, pp. 53-59, 2002. 
[83] I. Bayraktaroglu and A. Orailoglu, “Concurrent application of compaction and compression 
for test time and data volume reduction in scan designs,” IEEE Trans. on Comput., vol. 52, 
no. 11, pp. 1480-1489, Nov. 2003. 
[84] B. Köenemann, C. Barnhart, and B. Keller, “Real-time decoder for scan test patterns,” U.S. 
Patent No. 6,611,933, Aug. 26, 2003.  
[85] B. Köenemann, et al, “A SmartBIST variant with guaranteed encoding,” in Proc. Asian 
Test Symp., pp. 325-330, Nov. 2001.  
[86] C.V. Krishna, A. Jas, and N.A. Touba, “Test vector encoding using partial LFSR 
reseeding,” in Proc. ITC, pp. 885-893, Oct. 2001. 
國科會補助計畫衍生研發成果推廣資料表
日期:2010/11/24
國科會補助計畫
計畫名稱: 測試低功率設計與低功率測試：測試中功率問題之研究
計畫主持人: 王行健
計畫編號: 97-2221-E-005-087-MY2 學門領域: 積體電路及系統設計
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
