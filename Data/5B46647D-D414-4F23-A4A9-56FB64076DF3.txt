2行政院國家科學委員會專題研究計畫成果報告
整合類神經網路與層級貝氏方法建構網路線上消費模式
A Bayesian Neural Model of Online Purchasing Behavior
Using Clickstream Data
計 畫 編 號：NSC 95-2221-E-027-066MY3
執 行 期 限：95 年 8 月 1 日 至 98 年 7 月 31 日
主 持 人：邱志洲 台北科技大學商業自動化與管理研究所
計畫參與人員：邱芳榆、鄭佩欣、洪健儀 台北科技大學商管所
中文摘要
隨著資訊科技的日新月異，電子商務營運模式已成為實體企業的殺手級應用，故在虛擬
的交易平台裡，企業為了彌補無法面對面互動交易所造成的資訊缺乏，必須盡可能的搜集並
分析顧客所留下來的歷史交易資訊；此外電子商務營業額以及商品銷售量的蓬勃與否與商品
本身的性質有絕對的相關，假設商品屬於鑑賞性的商品而並非消耗性的商品，則消費週期便
會拉長、重覆購買的現象也會減少，因此整體的消費頻率以及購買數量便會降低，使得單純
的敘述統計分析無法有效地反映少量交易資料背後所隱含的決策性意義。
本研究針對 B2C 之電子商務網站，利用層級貝氏模型的分析方法，建構會員的異質性消
費模型。相關的顧客資訊，包含了 RFM 模型中的購買頻率 (Frequency)以及購買金額
(Monetary)、會員本身的人口統計變數資訊。在分析的方法方面，運用馬可夫鏈蒙地卡羅法
(Markov Chain Monte Carlo, MCMC)技術進行模式中參數係數的估計；不同於以往關於消費模
式建構的研究假設購買頻率與購買金額為相互獨立，本研究將購買頻率與購買金額假設為相
依變數，透過層級貝氏法搭配 MCMC 技術來了解顧客消費偏好，本研究之方法除了可增加模
型解釋維度的彈性之外，亦可進行延伸性的行銷分析，如加入異質性的分群機制、或品牌選
擇模型等，來強化整體消費模式的參考價值，達到一對一行銷的目的。
關鍵詞：網路點閱資料、瀏覽行為、RFM 模型、關聯式規則、序列型樣
4本研究以 B2C 交易型態的電子商務網站為研究對象，針對其網路會員之基本人口統計變
數，以及歷史交易資訊，嘗試建構一層級貝式模型；將來店次數(Frequency)與消費金額
(Monetary)設定為相互影響的行銷變數外，更利用層級貝氏方法透過 MCMC 模擬估計單一顧
客或族群對於產品功能屬性以及價格資訊的偏好程度，以解決分析 B2C 網站資料所面臨少量
交易資料的困難。本研究的研究目的簡單的描述如下：
1. 探討產品價格區間以及產品功能別變數對於購買頻率的關係，以解讀並預測異質性顧客
的購買頻率。
2. 探討產品折扣以及顧客購買頻率變數對於購買金額的關係，以解讀並預測異質性顧客的
購買金額。
3. 利用顧客人口統計變數解讀顧客對於產品折扣的偏好(邊際效應)。
本研究採用台灣某休閒旅遊服飾公司從 2004 年 4 月 9 日至 2006 年 9 月 18 日所累積之網
路交易記錄進行分析，另外再加入 2006 年 9 月 19 日至 2007 年 5 月 2 日的會員交易記錄做為
測試期的觀測資料，並針對一特定產品(頭巾)，擷取該產品的定價和行銷活動等屬性，以作為
顧客偏好的參考項目。
貳、文獻回顧
2.1 電子購物市場概況
2.1.1 消費者應用電子購物趨勢
在整體購物環境趨於成熟，消費者對於虛擬通路信任度提高的情形下，根據台灣網路使
用調查[1][2]可知，不論是線上購物之比重或者是使用電視購物之比重均有逐年提昇之跡
象；如表 2.1 呈現出 2002 年～2005 年間選擇線上購物為其最主要進行活動的比重，幾乎每年
呈現倍數增加。
表 2.1 2002 年～2005 年台灣網路應用各項活動比重
活動 2002 年 2003 年 2004 年 2005 年
收發 E-mail 17% 20.0% 30.0% 22.5%
使用搜尋引擎搜尋資料 28% 27.0% 23.0% 20.0%
閱覽新聞/雜誌/各種網路資訊內容 13% 18.0% 13.0% 18.2%
下載軟體
8%
5.0% 6.0% 3.3%
下載 mp3 1.0% 1.0% 1.0%
聊天、交友 7% 5.0% 6.0% 5.3%
玩線上遊戲 5% 6.0% 6.0% 4.7%
6賣之熱門類別。預估 2007 年網購市場規模可達 1,438 億元，網拍市場可達 794 億元；屆 2010
年時，網購市場規模將達 2,417 億元。
由表 2.2 可以進一步觀察網路購物產品區隔的分布與成長狀況，2006 年網路購物產品區
隔比重中最高為旅遊產品(63%)，其次是 3C（9%）及票務（7%），至於旅遊產品比重較外國
結構高出許多的原因是台灣線上購物市場發展較晚，而旅遊商品具有單價高及方便的特性，
因此在其他產品金額仍小的情況下，相對佔總體比重逾六成以上；而本研究所關注的服飾精
品類則佔了 3%。
表 2.2 2006 年各產品區隔分布與成長率
產品區隔 2006 年區隔 2006 年成長率
旅遊產品 63% 53%
美容保養 6% 90%
3C 9% 63%
電腦/影音光碟 3% 45%
書籍雜誌 2% 33%
票務 7% 24%
服飾精品 3% 90%
其他 7% 62%
整體市場 -- 54.5%
資料來源：資策會 MIC，2006 年 10 月
註：「其他」包含花卉藝品、食品、運動用品、家庭用品、汽車用品、文具用品、綜合商城、雜貨
2006 年成長率最高的產品區隔為美容保養以及服飾精品，成長率皆高達 90%，顯示近年
來因為網友線上購物經驗度提升、C2C 網拍平台發展成熟、虛實通路交互影響下促進了網路
購物市場的成長動力，尤其是服飾精品類別對於網路購物的市場更具有極高的發展空間。
2.1.3 EC 服飾零售業現況
根據近年來研究統計報告[4][5]中可以發現成衣服飾業的 e 化程度，仍屬低度開發，如圖
2.2 所示：
8的 8%，此外，網站訪客轉換為客戶的比率仍低，僅為 3%左右，而有半數以上的客戶會中途
放棄購物。換句話說，網路服飾業者可以努力的空間還是很大。整體而言，去年網路銷售成
長 25%，達 2,220 億美元，其中包含旅遊相關產品。不過，扣除旅遊套裝行程和機票後，網
路銷售僅占美國去年所有消費的 6%。
2.1.5 對於線上購物業者導入電子商務之建議
事實上，產業的 e 化程度與其接觸資訊軟硬體的時間早晚有相關。通常愈早開始接觸資
訊軟硬體的產業(如 3C 產品流通業)，相較於其他產業愈早開始導入資訊化，因此對於電子商
務的接受度也相對高。而電子商務導入的成功與否，與經營者是否為商品本業出身較無關；
先前不具備商品販售經驗的經營者，小如拍賣網站的賣家，大如 PChome 購物、東森購物網
等，都是以公司高度 e 化的背景，搶進各類商品的網購市場，建構網路販售通路。反觀擁有
經營經驗的實體廠商，由於未做好 e 化的學習而貿然搶進電子商務市場，常會面臨到發展上
的瓶頸與挫折。
此外，由於網路平台與工具的便利，個人與小型業者也能藉由線上購物增加能見度，但
線上購物由於進入門檻較低，同時又容易被模仿，因此在經營線上購物時需明確定位商店的
客群，此外亦須提供消費者良好的購物環境，例如網頁展示清晰、文案、售後服務等。簡言
之，鎖定客群以及創造差異化將為線上購物業者之重要課題。
2.2 RFM 模型
RFM 模型是對顧客進行市場區隔的方式之一，通常 RFM 模型的指標皆是以消費者行為
變數為基礎進行區隔，其中指標 R 表示最近購買日(Recency)、F 表示購買頻率(Frequency)，
M 表示購買金額(Monetary)。
依據 Hughes (1994)[37]對 RFM 指標的定義如下：
1. 最近購買期間(Recency)：顧客最近一次購買時點距離分析時點的天數。
2. 購買頻率(Frequency)：顧客在一定期間內購買該企業產品的次數。
3. 購買金額(Monetary)：在一段期間內，顧客購買該企業產品的總金額。
一般的分析型 CRM 著重在對於客戶貢獻度的分析，RFM 模型則強調以客戶的「行為」
來區分客戶。RFM 模型非常適用於生產多種商品的企業，而且這些商品單價相對不高，如消
費品、化妝品、小家電、錄影帶店、超市等；它也適合在一個企業內只有少數耐久商品，但
是該商品中有一部分屬於消耗品，如複印機、印表機、汽車維修等消耗品；RFM 對於加油站、
10
Model)，應用在顧客購買頻率的估計上。Hardie, Fader 和 Wisniewski(1998)[36]結合了指數分
配以及 Gamma 分配進行顧客購買間隔時間的推估。Colombo 和 Jiang (1999)[29]則提出一個隨
機 RFM 模型，利用負二項分配捕捉顧客購買時間以及 Gamma-Gamma 混合模型(Mixture
Model)捕捉購買金額分布。其他國外學者如 McCulloch and Allenby, 1995[42]; Allenby, Leone
and Jen, 1999[26]; Fader and Hardie, 2002 [32]; Jen, Chou, Allenby, 2003[38]等也曾充分利用
RFM 指標作為行銷策略的參考依據。
有關 RFM 技術應用的相關文獻，可整理如下：
搭配啟發式演算法進行分群
Bauer (1988)[28]將 RFM 指標用於郵寄時的目標顧客選擇；Ha & Park(1998)[35]由旅館免
稅商店資料市集(data mart)中萃取出 RFM 值，用資料探勘演算法如決策樹、自我組織圖(SOM)
等，分析旅館免稅商店顧客的消費行為以及顧客的購買特徵：張雅幀(2003)[22]透過 K-means
對顧客的 RFM 指標進行分群，再使用分類迴歸樹 CART(Classification and Regression Tree)觀
察出目標顧客群的特徵。
顧客價值指標計算
Pfeifer 和 Carraway(2000)[45]利用馬可夫鏈推估顧客購買行為，並且進行顧客價值之分
析；洪雨平(2002)[11]結合 RFM 模型與馬可夫鏈進行顧客終身價值的計算；楊清潭(2003)[16]
將 RFM 屬性轉換成三度空間向量，計算絕對距離做為顧客價值指標，再透過類神經網路模型
學習，並對未來顧客價值指標進行預測。
解讀顧客偏好以及預測 RFM 指標
Ehrenberg(1959)[31]提出負二項分配模型(Negative Binomial Distribution, NBD)結合卜瓦
松分配以及 Gamma 分配而成的混合型模型(Mixture Model)，應用在估計顧客購買頻率上；
Hardie, Fader 和 Wisniewski(1998)[36]結合了指數分配以及 Gamma 分配的模型用來捕捉顧客
購買時間間隔的分配；Colombo 和 Jiang (1999)[29]利用負二項分配捕捉顧客購買頻率以及
Gamma-Gamma 混合型模型(Mixture Model)捕捉購買金額的分布。
除了直接利用 RFM 指標進行分群等分析的文獻外，針對 F 與 M 指標之間的相關性模型
亦有許多的研究在進行。鐘振聲(2004)[21]將常被假設為獨立的 FM 指標設計成彼此交互相
關，並用 NBD 迴歸模式來解釋並預測顧客的購買頻率和購買數量。呂玉敏(2005)[19]則是建
12
訊息使用
利用估計出的
判定係數來判
別迴歸模式中
變數的解釋能
力。
只利用個人訊息
(小樣本估計 )或
只利用總體訊息
(大樣本估計)，若
為群體則假設群
體內成員皆具同
質性，而忽略個
體間異質性的特
徵。
結合個人訊息與總
體訊息 (掌握個體
之間的異質性)。
層級貝氏模型是以貝氏
理論的條件機率為基
礎，運用在樣本母體之
參數估計上，將具有行
銷意涵的行為變數再做
一次層級的模型配適，
進而建構出如階梯般的
層級概念。
資料來源：本研究整理；(陳靜怡，2005)[18]
2.4.2 層級貝氏模型的概念
層級貝氏模型(Hierarchical Bayesian Model, HBM)是 Good 在 1980 年所提出來的一種模式
參數的估計方法，其基本原理是以貝氏模型(Bayesian Model)為基礎，並加入顧客異質性的模
型特徵。貝氏模型的機制為先假設資料符合某種分配型態，並推導出各參數隸屬的完全條件
分配(Full Conditional distribution)或稱為後驗分配(Posterior distribution)後，再依據馬可夫鏈蒙
地卡羅(Markov Chain Monte Carlo, MCMC)模擬方法，針對分配中的參數進行遞迴(Recursive)
式的重複抽樣進而取得估計結果。由於重複抽樣的過程使估計參數的期望值模擬為後期參數
收斂的穩態狀況，所以這樣的模擬方法可以避免在進行 MLE 估計時需將參數預設為特定分配
(如常態分配、Poisson 分配)。此外，層級貝氏模型能將建構模型中的重要變數再做延伸模型
的展開，進而了解個別顧客對於行銷變數的偏好程度。
2.4.3 層級貝氏模型於行銷上的應用
Ehrenberg(1998)[31]與 Schmittlein et. al,(1987)[46]曾針對大型的消費者資料庫進行顧客異
質性的辨識模式建構，根據其分析結果顯示，層級貝氏模型方法在模式預估的準確度上較傳
統的統計方法高出 20％以上。Shepard(1995)[47]曾以顧客平均購買時間資料為基礎，以層級
貝氏方式預測下次顧客的訂購時間點。Allenby, Leone 和 Jen(1999)[26]首次提出了以一般化伽
瑪(Generalized Gamma, GG)分配來處理顧客的平均購買期間，以及以反一般化伽瑪(Inverse.
Generalized Gamma，IGG)分配來處理顧客異質性的想法。除了國外的研究文獻外，國內學者
也曾就 HBM 方法進行廣泛的應用。例如：柳慧琴(1997)[10]運用層級貝氏模型對企業對企業
(Business to Business)和直銷公司的交易資料進行模型的預測與比較，分析結果顯示層級貝氏
模型在預測企業體最終消費者的購買行為上，較傳統假設資料分配為卜瓦松和負二項分配之
模型更為準確。王仕茹(1998)[10]證明了層級貝氏模型應用於市場區隔分析中，其預測成效優
14
本研究採取兩組負二項分配迴歸模式搭配一組 Inverse Gamma 分配迴歸模式來呈現整個
消費反應模式，其中第一層模式是與購買次數有關，第二層模式是與購買金額有關，而兩模
式間的互動是將第一層的每二週平均購買次數 it 作為第二層負二項分配迴歸式中的自變
數，第三組則是將個別顧客的人口統計變數納入考量，跟第二組 NBD 模式的自變數迴歸係數
做一模型的鏈結。
【購買頻率模型配適】
依據 Jen、Chou 和 Allenby(2002) [38]針對購買頻率服從 NBD 分配的假設，我們也假設
購買次數服從負二項分配， )(~ itit NBDFreq  ，其中頻率的計算是以兩週為區間來進行計算，
而其機率密度函數則可表示如下：
( )
Pr( | ) * *
( ) ( 1)
m
it
it it
it it
m
Freq m
m
  
    
                
         (3.1)
其中 itFreq ：第 i 位顧客於第 t 期(每兩週)的總購買次數
it：第 i 位顧客於第 t 期(每兩週)的平均購買次數
：為 over-dispersed 參數，符合 gamma(c,d)分配
根據上述的假設，我們可將購買頻率模型表示如下：
)'exp(]|[ iitititit xxyE   (3. 2)
iiiiiiiiitiiit SSSSBundle 4534231210)ln(       (3. 3)
itBundle ：第 i 位顧客於第 t 期(每兩週)購買商品時是否有使用 Bundle 促銷優惠。
iS1 ：第 i 位顧客於第 t 期(每兩週)的消費是否屬於季節 S1(一、二、三月)
iS2 ：第 i 位顧客於第 t 期(每兩週)的消費是否屬於季節 S2(四、五、六月)
iS3 ：第 i 位顧客於第 t 期(每兩週)的消費是否屬於季節 S3(七、八、九月)
iS4 ：第 i 位顧客於第 t 期(每兩週)的消費是否屬於季節 S4(十、十一、十二月)
16
),0(~  VN
),(~ 100
GfIWV
整體而言，本研究藉由兩組負二項分配迴歸模式來表現消費者行為變數與行銷變數之間
的關聯以及因果關係，主要是希望能觀察出消費者購買的次數是否會受到產品的促銷活動與
季節的影響，其次並希望能觀察出消費者的購買金額是否會受到產品折扣與消費者購買次數
的影響。而在消費者對於折扣和購買金額的偏好上，我們則是用人口統計變數及一組 Inverse
Gamma 分配迴歸模式來解讀人口統計變數對於商品折扣和購買頻率等偏好的影響。
由於層級貝氏模型的優點為考量到顧客與顧客之間的異質性，所以即使兩位顧客擁有相
同的人口統計變數，也不見得有相同的購買行為；換言之，是以個別基礎的觀點而非總體層
次的觀點來進行顧客行為的分析，因此模式的應用將更能貼近每一位顧客的消費特質，更增
加推估個別顧客消費行為的準確性。
3.2 資料結構
爲了能清楚的了解前節中模式的應用，我們將各模式中的資料結構彙整如下。
一、有關購買次數模式之迴歸式，我們假設 i 為顧客編號；t 為期數；顧客總人數為 N；交易
筆數為 R。而其資料結構如下：
1342,5
42,4
42,3
42,2
42,1
42,0
,5
,4
,3
,2
,1
,0
1,5
1,4
1,3
1,2
1,1
1,0
242,442,342,242,142,
,4,3,2,1,1
2,42,32,22,12,1
1,41,31,21,11,1
1
1
1
1
1
][












































Nt
t
t
t
t
t
RN
ttttt
Rit
SSSSCoupon
SSSSCoupon
SSSSCoupon
SSSSCoupon

































二、有關異質性部分 i Z    ，我們假設 i 為顧客編號；N 為顧客總人數。而其資料結
構如下：
33,2,1,
3,22,21,2
3,12,11,1
344,24,14,0
3,23,13,0
2,22,12,0
1,21,11,0
4,3,2,1
1,32,22,1
1,31,21,1
3,2,11,0
2,22,11,0
1,21,11,0
1
1
1
























































NNNNNNNNNNN
ZZZ
ZZZ
ZZZ







18
在貝氏統計中後驗分配的抽樣，若採用積分的方式便會面臨到複雜的高維度求解問題，
對此馬可夫鏈蒙地卡羅法(Markov chain Monte Carlo, MCMC)的模擬抽樣方法可以做為不錯
的方式，MCMC 的運作機制是對後驗機率的分配進行多次的抽樣，當抽樣值達穩定的收斂狀
態時，抽樣的平均值便會非常逼近積分的計算值。在本論文中我們將應用 MCMC 的技術來進
行層級貝氏模式中複雜參數的完全條件分配估計，由於在真正執行 MCMC 模擬時，使用者可
根據處理問題的不同而採用不同的 MCMC 抽樣方法。在本模式中所需估計的參數共有 7 個，
其中由於 , , , ,P v 這五個參數的後驗分配並不具 Closed form，所以我們採用 Random-walk
Metropolis-Hastings 的模擬演算法對其進行參數的推估，MH 抽樣方法是由 Metropolis et al. [43]
根據馬可夫鏈理論所發展出來的一種方法，並由 Muller[44]和 Tierney[48]進一步討論其後驗分
配的推估；吉氏抽樣法（Gibbs Sampling）方法則是 MH 技術的一種特例，該理論適用於抽樣
樣本必須符合循序的完全條件限制分配。Allenby and Lenk[24]，Rossi and McCulloch[42]，
Allenby and Ginter[25]等皆曾成功的使用 Gibbs 或 MH 抽樣方法來估計層級貝氏模型中貝氏後
驗機率。而另外兩個參數 ,V 由於其後驗分配具 Closed form，所以我們採用吉氏抽樣法進行
參數的推估。有關本論文中各參數後驗分配的推導可彙整如下：
1.  採用 Random-walk Metropolis-Hastings 模擬演算法 (3.11)
3[ ] ~ ( , )MN Z V 
1 '
NBD
i t
i t
1 '
[ | the Rest] P ( | , , , )*exp[( ) ( ) ]
( )
* * *
( ) * ( 1)
exp[( ) ( ) ]
it
it it
Q
it it
it it it
Q P V
Q
Q
V



    
  
    
 


  
                   
 


2.  採用 Random-walk Metropolis-Hastings 模擬演算法 (3.12)
[ ] ~ ( , )N V 
1 '
NBD
i t
i t
1 '
[ | the Rest] P ( | , , ) *exp[( ) ( ) ]
( )
* * *
( )* ( 1)
exp[( ) ( ) ]
it
it it
v Freq
it it
it it it
Freq v V
v Freq v
v Freq v
V


      

  
   


  
                   
 


20
km 0[ ] ~ N ( | , )V 
 *mm m n km 0
' ' -1
n n n
mm n n
' -1 * -1
n n 0
' -1
n
[ |the Rest] = N |[Z I ]* , I * N ( | , )
exp ( -u ) V ( -u )
N (u ,V )
u =V [(Z )]* +
V =(Z Z
V V
V
V






    
    

 

其中
-1 -1+ )V
7. V 採用吉氏抽樣法（Gibbs Sampler） (3.17)
-1
m 0 0[ ]~IW ( | ,G )V V f 
n
* -1
nm n m 0 0
-( +m+1)/2 -1 -1
n
-1
m n n
n 0
-1
n
[ |the Rest] = N ( |Z , I ) * IW ( | ,G )
1
| | *exp{- * tr( *G )}
2
IW ( | ,G )
=n+
G =( -Z
f
V V V f
V V
V f
f f
  
 



 


其中
' -1
0) *( -Z )+G 
肆、實證分析
4.1 資料描述
本研究針對台灣某休閒旅遊服飾公司的電子商務網站實際資料進行實證分析。採用的資
料期間為 2004 年 4 月 9 日至 2006 年 9 月 18 日內所有之會員交易資料。該項資料原始共有
2591 筆購買紀錄與 371 位會員資料。在選擇研究標的部分產品，經過初步的敘述統計分析後，
我們可觀察到頭巾為總購買次數最多的產品，故本研究將以頭巾做為實證研究的產品標的。
4.2 層級貝氏模式分析
本研究根據費者的購買次數、購買金額，以及消費者採用 Bundle 促銷方案的次數與折扣
金額等資訊來建構消費反應模式，透過模式的解讀來提供該線上旅遊休閒服飾業者未來實施
一對一行銷、市場區隔以及制定行銷策略時的參考資訊。
22
本研究利用 MCMC 模擬法進行參數估計，其中 , , , ,P v 這五個參數採用 Random-walk
Metropolis-Hastings 模擬演算法對其後驗分配進行抽樣；另外兩個參數 ,V 則是採用吉氏抽
樣法對其後驗分配進行抽樣。由於在參數估計進行之前必須先針對各先驗分配內的參數進行
初始值的設定，因此我們將本研究中所使用之參數先驗機率假設值如表 4.7。在設定模擬次數
為 1500 的情況下，我們可觀查出所有參數其估計值已達收斂之狀態，我們最後選取最後 500
個參數模擬平均結果作為模式參數的估計值。
表 4.7 各參數先驗機率設定值
參數
[ ] ~ ( , )N V 
 V
初始值設定 6×1 大小的矩陣, 所有元素皆為 0.02 6×6 大小的矩陣, 所有元素皆為 0.5
參數 3
[ ] ~ ( , )MN Z V 
Z V
初始值設定 4×3 大小的矩陣, 所有元素皆為 0.1 3×3 大小的矩陣, 所有元素皆為 0.5
參數
[ ] ~ ( , )gamma a b
a b
初始值設定 1 2
參數
[ ] ~ ( , )v gamma c d
c d
初始值設定 1 2
參數 km 0
[ ] ~ N ( | , )V 
0 V
初始值設定 12×1 大小的矩陣, 所有元素皆為 0.5
0.0001×I12×12
(12×12 的矩陣, 對角元素為 0.0001)
參數
-1
m 0 0[ ]~IW ( | ,G )V V f 
0f
-1
0G
初始值設定 3
1×I3×3
(3×3 的矩陣, 對角元素為 1)
在β參數方面，每位消費者都有 3 個β估計參數(β0,β1,β2)的收斂圖；9 個θ參數（θ01...
θ03, θ11...θ13, θ21...θ23）；9 個V參數(Vβ11...Vβ13, Vβ21...Vβ23, Vβ31...Vβ33)；參數方面，每
位消費者都有 6 個φ參數(φ1,φ2,φ3,φ4,φ5,φ6)；而參數 , ,P v則是用來描述所有消費者的
共同行為。有關各參數的收斂圖形可整理如圖 4.5 到圖 4.10。
24
圖 4.7 Vβ估計值之收斂圖
圖 4.8 △估計值之收斂圖
26
果。本研究分析的重點著重在探討消費模式中個別消費者行為的異質性，並透過層級貝式模
型掌握每位消費者的消費偏好。
表 4.8 部分消費者的β參數估計結果
參數
( i)
第 11 位顧客 i 19 第 9 位顧客 i 25
估計值 變異數 估計值 變異數
0 0.1985578 0.04526185 0.5110885 0.5110885
1 0.4758888 0.05086205 0.4781526 0.09514098
2 0.1919198 0.04836067 0.5119329 0.09026665
根據表 4.8 中之數據，我們發現 0為截距項， 1為折扣金額與平均購買金額之間的關係，
2為平均購買次數與平均購買金額之間的關係，其中第 11 位顧客在購買頭巾時，對於折扣
金額的偏好(係數為 0.4758888)會比過去購買次數的影響來得大；此外第 9 位顧客的係數則
顯示該顧客在購買頭巾時，相較於折扣金額的刺激，過去購買次數的影響則較高(係數為
0.5119329)。故藉由觀察每一位顧客不同的消費行為與消費偏好，本研究所提出的消費者行為
模式可以在相同的行銷環境下呈現出消費者的異質性。
此外本研究可再根據參數估計的結果得到個別消費者的反應函數，進而可推估出未來顧
客購買次數 (如第 4.1 式)及購買金額(如第 4.2 式)之機率。
211t11,1,11 Season0.03045847Season0.02913087Bundle0.027882720.03078197)ln(  t
43 Season0.03027685Season0.02991102 
211t11,1,11 Season0.03045847Season0.02913087Bundle0.027882720.03078197exp(  t
)Season0.03027685Season0.02991102 43 
  )|Pr( 1,111,11 tt mFreq 
m
t















 1t11,
1,11
0.02677082
1t11, 0.026770820.02677082
0.02677082
1)(m2)(0.0267708
)m0.02677082(



(4.1)
以第 11 顧客為例，其購買金額的消費反應函數如下：
1t11,1t11,2,11 0.1919198Discount0.47588880.1985578)ln(    t
28
表 4.10 顧客偏好異質性的解釋效果-Δ的估計結果
參數Δ 截距項
1Z
年齡
2Z
居住地
3Z
性別
0(截距項) 0.005979893
(0.00009607)
0.005667914
(0.000103)
0.005720745
(0.00010147)
0.008274739
(0.00010147)
1(折扣金額) 0.007585998
(0.0001044)
0.007896
(0.00010126)
0.00699254
(0.00010258)
0.006757779
(0.000102898)
2(平均購買次數) 0.006868401
(0.00009922)
0.006442038
(0.00010052)
0.00589031
(0.00009847)
0.00621804
(0.000104369)
備註：未括號數值為平均數，括號數值為變異數
根據表 4.10 中之數據，我們發現當消費者年齡越大時，對於業者所採行的折扣策略會越
敏感(係數為 0.00789、0.006442)，換言之當產品大降價時，將會直接刺激具有經濟能力且中
年的顧客。業者可將該類會員設為重要客戶群，針對其對折扣的偏好推出系列促銷活動。
此外我們也觀察到居住地離台北愈遠的顧客對於折價促銷的敏感度也呈現正向的關係
(係數為 0.00699254、0.00589031)，這是因為中南部的觀光地區氣候炎熱較適合頭巾的休閒搭
配。至於促銷活動的正相關則可建議業者在折扣期間針對中南部會員寄發折扣訊息，更可針
對中南部的會員設定專屬的優惠活動，來刺激其購買慾。
在性別方面，女性對於折價的敏感度較高，可能是因為女性對於裝飾性用品的購物經驗
較多，且較具有耐心去搜集產品的價格資訊，所以當有折扣活動發生時，女性較能把握住促
銷折價的機會；相反地，男性在購買頭巾時，個人的偏好與蒐集的興趣會比價格的變動來得
重要，所以行銷上可建議業者針對不同性別佩帶的頭巾制定不同的定價策略，以便能吸引更
多女性顧客的購買，和節省不必要折價成本。
表 4.11 β的共變異矩陣
 0 1 2
0 0.4096154 0.2028675 0.2038332
1 - 0.4069696 0.2012406
2 - - 0.4029908
表 4.11 為V的估計值，它代表係數間的共同變動關係，由表中可發現 1和 2的共變
異數大於 0，代表兩變數呈現正相關的關係。我們可以藉此推論出對折扣較敏感的消費者也
會常來消費。
根據以上的實證研究可知，層級貝式模型可成功的透過消費行為變數(如購買次數、購買
30
Create
Time
Product Name Quantity
Actual
Price
Discount
OrderItemType
ID
2005/6/17 運動風-黑領巾 1 480 0.8125 5：組合品
2005/6/17 純色-鋅白灰領巾 1 480 0.8125 5：組合品
2005/6/17 少年遊-頭巾帽 1 690 1 1：正常品
2005/7/15 象形文字領巾 1 480 0.8125 5：組合品
2005/7/15 長頸鹿頭巾(領巾) 1 480 0.8125 5：組合品
2006/5/19 和風采錄 COOLMAX 頭巾帽 1 880 1 1：正常品
2006/10/13 Hello Kitty~美好一刻~頭領巾 1 550 1 6：零碼品
顧客 A 的購買區間(灰底代表有消費，灰底加粗框代表為測試期間)：
2005 年月份
1 2 3 4 5 6 7 8 9 10 11 12
2006 年月份
1 2 3 4 5 6 7 8 9 10 11 12
2007 年月份
1 2 3 4
顧客 B 的購買日區間(灰底代表有消費，灰底加粗框代表為測試期間)：
2005 年月份
1 2 3 4 5 6 7 8 9 10 11 12
2006 年月份
1 2 3 4 5 6 7 8 9 10 11 12
2007 年月份
1 2 3 4
且兩位顧客的模型係數如下所示：
顧客 A、B 的 FI 係數：
截距 有無 Bundle Season1 Season2 Season3 Season4
顧客 A 0.029715 0.03406091 0.025631 0.029795 0.030508 0.03101581
顧客 B 0.026863 0.03178855 0.02934 0.030227 0.036108 0.03004422
32
伍、結論與建議
本研究針對非消耗性商品建構一層級貝式模型，利用模擬的機制對個別消費行為的活動
估計其偏好，模型作法為將購買次數與購買金額互設為相互影響的變數，再根據其歷史交易
紀錄，利用模式的推估來解釋個別顧客的消費行為。論文中所提之模型可依照需求加入不同
的行銷變數進行觀察，如產品組合促銷、產品折扣、會員 VIP 資格等，來鏈結不同行銷策略
對於消費者購買頻率的影響強度；在應用層面上則可以透過動態的推估來掌握顧客偏好的變
化。對於偏好則納入人口統計變數為顧客對於商品折扣以及購買頻率的偏好進行解讀。
在模型的實證分析上，本研究以一線上休閒旅遊服飾業為例進行模式研究。根據實證結
果可知，透過層級貝式模型的模擬機制可以同時估計屬於顧客總體和個別的參數，這樣的結
果將有助於業者瞭解不同顧客的需求，並主動提供更客製化的服務；此外在解讀人口統計變
數方面，我們也發現女性對於折扣的敏感度較高，中壯年的顧客也偏好具有折扣的促銷活動，
而中南部的消費者則會因網路購物的便利性誘因，使得其購買頻率明顯高於北部之消費者，
因此針對判讀的結果便能做進一步的市場區隔，也可做為一對一行銷的參考依據。
本研究的行銷意涵如下：
模型層面
1. 我們透過持續動態地估計行為變數下，能協助企業追蹤個別顧客對於商品屬性的異質性
偏好。
2. 經過適度的模式修改以及顧客長期消費資料的累積下，企業可以透過負二項迴歸模式進
一步預測顧客個別的行銷變數，包含購買次數、購買金額、或是最近購買時間的機率。
3. 對於模式所估計之顧客的個別偏好結果，企業可以再予以分群命名，進行精確的市場區
隔與行銷活動。
行銷策略建議
1. 業者可多增加頭巾的 Bundle 促銷方案，並利用促銷方案搭配新款頭巾，不僅可以增加新
商品的能見度，也可以持續刺激有收集頭巾偏好的會員們購買；此外也可規劃不同功能
別頭巾的搭配，如魔術頭巾搭配頭巾帽、保暖頭巾搭配特別紀念款頭巾等，或是不同種
類的旅遊商品，如太陽眼鏡、帽子、T-恤等。
2. 除了進口國外知名品牌的頭巾商品外，廠商也可嘗試推出多樣化的特別紀念款產品，例
34
者行為變數的差異因素之外，也期望在做參數估計的同時能夠針對偏好進行分群，如此對於
個別消費者的行為分析能提供參數估計與分群的同步調整，以抓住顧客消費行為的微妙變化。
購買金額的模型設定上：
一般消費行為模型皆假設購買金額服從 Gamma 分配，本研究則嘗試同樣屬於指數家族但
為離散分配的負二項分配來配適購買金額的分配，由於本研究產品的特性為，消費者購物通
常一次會購買量為一件，且產品的價位變異不大，所以本研究可以將購買金額解讀為價位區
間的選擇機率，提供具有單次購買量不高，且定價穩定的商品之顧客購買金額變數另一個模
式配置的選擇。
本研究的研究限制與假設歸納如下：
1. 若要針對產品生命週期較長的產品觀察每一位顧客的異質性消費行為，本研究所蒐集的
樣本數可能仍需要再持續累積，如此便可以發揮模型推估的效力。
2. 本研究觀測的是單一頭巾類產品的網路購買行為偏好，原因為頭巾產品是該網站購買頻
率最高的產品，且單價相對於其他產品也比較低；此外業者所推出的促銷方案基本上仍
是以同一類產品的 Bundle 促銷為主；本研究並針對購買頭巾的交易記錄做關聯分析的驗
證後，發現頭巾與宅配、郵局限掛的消費項目或同類別的關聯性較強，故本研究假設頭
巾產品與其他類別的產品並無明顯的關聯性存在。
參考文獻
中文部份：
[1] 劉家妙，2006 我國產業生命力之新契機研討會摘要及會後訪問－線上購物趨勢分析，TIE
產業分析
[2] 劉家妙，電子購物業景氣動態報告- 2006 年第二季，2006 年 4 月 13 日。
[3] 經濟部商業司-電子商務環境整備及 B2C 推動計畫，資策會 ACI，2005 年 11 月。
[4] 台灣網路購物市場發展趨勢前瞻，周文卿，資策會 MIC，2006 年 11 月。
[5] 電子商務年鑑，經濟部商業司，2003-2004 年
[6] 網路購物-衣片榮景，經濟日報，2007 年 5 月 15 日
[7] 布疋衣著服飾品批發基本資料，台灣經濟研究院產經資料庫，2007 年 3 月
36
[23]陳薏棻，應用層級貝式理論於跨商品類別之顧客購買期間預測模型，國立台灣大學商學研
究所碩士論文，2006。
英文文獻：
[24] Alenby, Greg M. and Lenk, Peter J. (1994), “Modeling Household Purchase Behavior with 
Logistic Normal Regression,” Journal of American Statistical Association, vol.89,
pp.1218-1231.
[25] Allenby, Greg M. and Ginter, James L. (1995), “Using Extremes to Design Products and 
Segment Markets,” Journal of Marketing Research, vol.32, pp.392-403.
[26] Alenby, Greg M. and Leone, Robert P., and Jen, Lichung (1999), “A Dynamic Model of 
Purchase Time With Application to Direct Marketing,” Journal of American Statistical 
Association, vol.94 (446), pp.365-373
[27] Bart Baesens, Stijn Viaene (2002), Dirk Van den Poel, Jan Vanthienen and Guido
Dedene, ”Bayesian Neural Learning for Repeat Purchase Modeling in Direct Marketing,” 
European Journal of Operational Research, vol.138, pp.191-211.
[28] Bauer, C. LA, (1988),“Direct Mail Customer Purchase Model”, Journal of Direct Marketing, 
vol.2, pp.16-24.
[29] Colombo & Jiang (1999) Colombo, Richard & Weina Jiang, 1999. "A Stochastic RFM Model,
“Journal of Interactive Marketing, vol.13: pp.2-12.
[30] David Shepard Association (1995),” The New Direct Marketing: How to Implement a 
Profit-Driven Database Marketing Strategy,” New York, Richard D. Irwin, Inc.
[31] Ehrenberg, A.S.C, (1959). ”The Patern of Consumer Purchases,” Applied Statistics, vol.8 (1):
pp.26-41.
[32] Fader, P. S. and Bruce G.S. Hardie (1999), “Modeling the Evolution of Repeat Buying,” 
Wharton Marketing Department Working paper.
[33] Good, I.J. (1983), “The robustness of a hierarchical model for Multinomials and contingency
tables,” Statistical Inference, Data Analysis, and Robustness (G. Box, T. Leonard, C.-F.Wu, eds),
New York: Academic Press, pp.191-211.
[34] Gupta, Sunil (1991), “Stochastic Models of Inter-purchase Time with Time-Dependent
Covariates,” Journal of Marketing Research, Vol.38, pp.1-15.
[35] Ha, Sung Ho and Sang Chan Park (1998),“Application of data mining tools to hotel data mart 
on the Intranet for database marketing,” Expert Systems with Applications, vol.15(1), pp.1-31.
[36] Hardie, Bruce G.S., Peter S. Fader, and Michael Wisniewski (1998), “An Empirical Comparison 
