2一、摘要報告內容
1. 中文摘要
在行動隨意網路(Mobile ad hoc network，MANETs)中，行動節點將擷取過的資料暫存於
行動節點上的暫存記憶體中，以減短行動節點擷取所需資料的資料存取時間。但是，行動
節點的暫存記憶體空間有限，難以將所有擷取過的資料都暫存於行動節點上的暫存記憶體
中。因此，學界提出使用合作暫存(Cooperative caching)來克服此一困難。本計畫在合作暫
存的策略上同時考慮行動節點擷取所需資料的存取效能與能源效率，而提出一個應用節點
群集且具有能源效率的合作暫存方法。本論文首先使用行動節點的存取樣型的相似度與一
次跳躍能夠傳送資料的最大距離將行動節點區分為若干個合作暫存群組，設計一個考慮節
點剩餘能源多寡、暫存空間大小與暫存資料活躍程度的具有能源效率的合作暫存方法。模
擬實驗以我們所提出的方法 ECC 方法與現存的兩個合作暫存方法 Energy 方法與 SAF
方法進行比較。結果顯示，本論文所提出的合作暫存方法在行動節點一次跳躍範圍稍大時
與網路中節點存取樣型種類較少時，其暫存資料命中率與節點能源消耗都優於 Energy 方
法與 SAF 方法。
關鍵詞：隨意網路、合作暫存、合作暫存群組、能源效率。
2. 英文摘要
In mobile ad hoc networks (MANETs), a mobile node caches its accessed data on its cache
to reduce the access time of next queries. However, the mobile node is hard to cache all its
accessed data due to the limitation of its cache size. Researchers, therefore, proposed a method
which uses multiple mobile nodes to cache their accessed data, that is, cooperative caching, to
solve the problem. In this project, we consider both the similarity of access pattern and the
distance of one hop among nodes to divide nodes into several groups. In a group, we further
consider (1) the energy of the node, (2) the available cache space of the node, and (3) the
activation degree of cached data to develop our energy-efficient cooperative caching method. We
compare our proposed method, ECC, with other two methods, Energy and SAF, in term of cache
hit rate and energy consumption. The simulation results show that ECC excels Energy and SAF
in cache hit rate and energy consumption.
Keywords: MANET, cooperative caching, energy efficient.
4覆的資料項做分配與取代的工作，讓行動節點與周遭行動節點的合作暫存記憶體空間中的
資料項儘量不重覆，使得 MANET 能夠運作較長的時間，這個研究以 MANET 中行動節
點的存活時間作為效能指標。
3. 應用節點群集且具有能源效率的合作暫存方法
在本節中，將介紹我們改良的合作暫存方法，稱之為「應用節點群集且具有能源效率
的合作暫存方法(Energy-efficient Cooperative Caching Based on Clustering)」。我們所提出的
方法，其運作可以分為二個階段。第一個階段為以節點群集方式進行節點配置，我們根據
行動節點的存取樣型與地理位置，將行動節點區分成若干合作暫存群組。第二個階段是根
據第一階段所配置的合作暫存群組進行具有能源效率的合作暫存。以下我們將詳述此二階
段的進行方式。
3.1 節點群集
在本節中我們將分成群集條件與群集方法來說明我們如何進行節點群集。
3.1.1 群集條件
在過去行動隨意網路的合作資料暫存研究中，學者並未針對如何進行節點群集進行深
入的探討。我們認為考慮行動節點間是否進行合作暫存，不僅應考慮節點間的相對位置(一
次跳躍的距離)，還應該考慮節點的存取樣型相似度。我們希望分出的合作暫存群組滿足兩
個條件：
1. 合作暫存群組內行動節點的存取樣型是相似的。
2. 合作暫存群組內任兩個行動節點均可透過一次跳躍進行通訊。
針對第一個條件，我們假設在行動隨意網路中有一個編號為 i 的行動節點，我們稱為
行動節點 i，並以符號 Ni 表示。假設網路中一共有 l 個資料項可被查詢，其各資料項編
號依序為 1,2,…, l，我們以 dn 表示編號為 n 的資料項，n = 1,2,…, l。則網路上任一節點 Ni
擷取資料項 dn 的機率以符號 pn,i 表示，因此行動節點 Ni 的存取樣型，可以向量 APi 表
示為
APi = <p1,i, p2,i,…, pl,i>。
同樣的，行動隨意網路中另一個行動節點 Nj ，其存取樣型同樣可以使用向量 APj 表示為
APj = <p1,j, p2,j,…, pl,j>。
而存取樣型 APi 與存取樣型 APj 的相似度則使用餘弦相似度(cosine similarity)[12]來
衡量，其定義如下：







l
n jn
l
n in
l
n jnin
ji
ji
ji
pp
pp
APAP
APAP
APAPsim
1
2
,1
2
,
1 ,,),(
餘弦相似度以兩個同維度向量的角度差異來度量該向量間的距離，所得數據介於 0 與 1
之間，當兩向量角度越相近時，所求出的餘弦距離越接近 1；反之，則越接近 0。為了便
於決定存取樣型 APi 與 APj 是否相似，我們令δ表示一個介於 0 與 1 之間的常數，表
示任兩個節點存取樣型的相似程度界限值，若任兩個存取樣型 APi 與存取樣型 APj 的相
似度 sim(APi, APj) 在使條件式
),( ji APAPsim
為真時，我們說存取樣型 APi 與存取樣型 APj 是相似的。
63.2.1 領導節點
在本論文中，每個資料暫存群組都有一個領導節點(Leader)，領導節點負責資料暫存群
組中大部分的運算、記錄與暫存許可控制，同時還需廣播暫存許可控制資訊至群組內的所
有節點。因此，領導節點相較於其他節點將會消耗較多的能源，為了避免領導節點能源迅
速耗盡，在合作暫存過程中，每經過 L 秒，現任領導節點會搜尋目前群組內能源最高的行
動節點擔任下一任的領導節點。
領導節點每隔 L 秒會發出廣播訊息給群組內的所有行動節點以控管合作暫存群組。當
合作暫存群組內的行動節點收到廣播訊息時會回傳目前的位置、電力給領導節點，領導節
點會計算所有回傳的任兩個行動節點間的距離，將資料暫存許可控制資訊更新為目前合作
暫存群組內的行動節點擁有暫存資料的狀態後，發給合作暫存群組內所有的行動節點。當
行動節點在 L 秒時離開原本的合作暫存群組時，行動節點會廣播向one hop內的鄰近合作
暫存群組的領導節點詢問是否加入該合作暫存群組，決定此節點應加入哪個合作暫存群
組，或是自己獨立為一合作暫存群組。
3.2.2 資料暫存許可控制
暫存資料許可控制(Cache admission control)主要是用來決定對於剛自資料來源取得的
資料項、向合作暫存群組內的行動節點或是一次跳躍距離內的其他行動節點要求並取得的
資料項是否要進行資料暫存。在合作暫存方法中，資料暫存可以分為區域暫存與合作暫存。
區域暫存是節點將自己需求機率較高的資料暫存於自己的區域暫存記憶體中。而合作暫存
則是將節點需要但是需求機率較低的資料暫存於群組內節點的合作暫存記憶體中。
3.2.2.1 區域暫存
針對區域暫存，我們的想法是節點應該區域暫存最常為節點查詢的資料項，如果節點
不暫存高活動性資料(需求機率高者)的資料項，此節點將可能需要經常向其他節點拿取資料
項，這不但會使得節點本身耗費能源在要求此一資料項，也可能造成其它節點耗費能源在
回應此節點的要求。因此我們認為節點應該區域暫存對節點本身而言需求機率較高的資料
項。因此，對區域暫存記憶體大小為 SLC 的節點 Ni ，其區域暫存的資料項為將節點 Ni 對
所有資料項的存取機率由大到小排列後，排序前 SLC 大的資料項即為節點 Ni 區域暫存的
高活動性資料項。然而，當節點 Ni 的區域暫存記憶體仍有空間時，無論此資料項是否為
存取機率為前 SLC 大的資料項，節點 Ni 都會區域暫存此一資料項。
當節點 Ni 需要區域暫存資料項，但自身區域暫存空間都放滿資料時，此時節點 Ni 將
此資料項的存取機率與區域暫存資料中最小存取機率的資料項比較，若資料項的存取機率
比區域暫存資料中最小存取機率的資料項高時，將此資料項替換該存取機率最小的資料
項，反之，則不暫存此資料項。
當節點區域暫存資料項時，會傳訊息給領導節點，領導節點會代節點廣播資料暫存許
可控制資訊給群組內的所有行動節點，讓合作暫存群組內的所有節點知道資料在群組內的
分佈情形，作為資料暫存的依據。
3.2.2.2 合作暫存
當節點 Ni 決定不區域暫存自資料來源取得的資料項 e 時。此時表示資料項 e 對節點
Ni 而言並非高活動性資料，此時節點 Ni 將是否要合作暫存與如何合作暫存資料項 e 交由
領導節點決定。對於合作暫存的進行方式。我們的想法是資料項應該合作暫存於剩餘能源、
84.1 實驗設計與變數
在本節中，將針對我們的應用節點群集且具有能源效益的合作暫存方法(為了便於本論
文的敘述，簡稱此方法為 ECC)、Hara 的 SAF 方法[8]與台科大呂永和老師研究團隊所提出
的「隨意網路中節省能源的協同資料快取方法」(為了便於本論文的敘述，簡稱此方法為
Energy)[11]等三種方法進行實驗，以做效能評估與分析。這些實驗的系統模擬程式在
Windows XP 工作平台上，使用 C 語言進行開發。實驗中所使用的模擬參數設定如表 1 所
示。在本實驗中，路由協定使用 MFR[10]。每個行動節點都 Random Walk[6]的方式移動，
而所有行動節點對於資料項 e 的需求機率服從 Zipf-like 分佈，而θ為 Zipf-like 分佈的參
數，用來表示資料項需求機率的分配偏斜程度。
4.2 效能分析
我們根據 表 1 中的參數設定，進行兩個實驗，分別為一次跳躍最大通信距離對效能
的影響與存取樣型種類對效能的影響。
4.2.1 一次跳躍最大通信距離對效能的影響
在本實驗中，將針對行動節點一次跳躍最大通信距離的大小對本論文所提出 ECC 方法
與 SAF 方法、Energy 方法在行動節點一次跳躍最大通信距離為 150、200、250、300、350
的條件下進行實驗。實驗結果如圖 1 至圖 2。
0
20
40
60
80
100
150 200 250 300 350
C
ac
he
H
itR
at
io
(%
)
Maximum Distance of One-hop(m)
ECC Energy SAF
圖 1 一次跳躍最大通信距離對資料暫存命中率的影響
圖 1 是行動節點在不同的一次跳躍最大通信距離的條件下，行動節點中暫存資料命中
率的變化情形。其中 X 軸為一次跳躍最大通信距離，Y 軸則為行動節點資料暫存命中率。
在圖 1 中我們可以觀察到除了一次跳躍最大通信距離為 150 外，ECC 方法的資料暫存命中
率最高、其次為 Energy 方法、SAF 命中率最低。其原因為儘管 ECC 的區域暫存命中率為
最低，但是 ECC 的合作暫存方法效果最好，因此 ECC 的合作暫存命中率最高，當同時考
量區域暫存資料命中率與合作暫存資料命中率的共同影響(暫存資料命中率)時，ECC 方法
的資料暫存命中率最高、其次為 Energy 方法、SAF 命中率最低。而隨著一次跳躍最大通信
距離由小到大的變化過程中，ECC 與 SAF 的暫存資料命中率亦隨著一次跳躍最大通信距離
由小到大變化，而 Energy 則是由大到小變化，其主要原因為 Energy 的區域暫存命中率變
化不大，而合作暫存命中率則是隨著一次跳躍最大通信距離由大到小變化，因此 Energy 的
暫存資料命中率亦隨著一次跳躍最大通信距離大到小變化。而當一次跳躍最大通信距離為
10
首先，我們先來透過圖 3 觀察行動任意網路中，行動節點在網路中存取樣型分為 2、5、
10、25、50、100 等種類的存取樣型下，暫存資料命中率的變化情形。其中 X 軸為存取樣
型種類，Y 軸則分別為為行動節點執行查詢的暫存資料命中率。在圖 3 中我們可以觀察到
在存取樣型種類為 2 到 50 種時，ECC 方法的資料暫存命中率最高、其次為 Energy 方法、
SAF 命中率最低。存取樣型種類為 100 種時，Energy 方法的資料暫存命中率最高、其次為
ECC 方法、SAF 方法命中率最低。而隨著存取樣型種類由小到大的變化過程中，Energy 方
法的暫存資料命中率亦隨著種類的增加緩慢上升、SAF 方法的暫存資料命中率則隨著存取
樣型種類增加緩慢遞減，ECC 方法的暫存資料命中率對存取樣型種類而言並不敏感。相對
而言，此三種方法針對存取樣型種類的變化，對其區域暫存命中率變化並不敏感，因此資
料暫存命中率的變化，主要是受到合作暫存命中率的影響。而形成圖 3 的結果。
0
1
2
3
4
5
2 5 10 25 50 100A
ve
ra
ge
Po
w
er
C
on
su
m
pt
io
n(
J)
Number of Access Pattern
ECC Energy SAF
圖 4 存取樣型種類對節點平均消耗能源的影響
圖 4 是在不同的存取樣型種類中行動節點平均消耗能源的變化圖。其中 X 軸為存取
樣型種類，Y 軸為行動節點的平均消耗能源。在圖 4 中，我們觀察到在存取樣型種類的變
化過程中，ECC 方法的平均消耗能源較少、其次為 Energy 方法、SAF 方法的平均消耗能源
最多。而隨著存取樣型種類由少至多的變化過程中，ECC 方法與 Energy 方法的平均消耗能
源會隨著下降，其原因為 ECC 方法的區域暫存命中率隨著存取樣型種類由小到大變化而上
升、Energy 方法的合作暫存命中率隨著存取樣型種類由小到大變化而上升，因此，ECC 方
法與 Energy 方法的平均消耗能源會隨著存取樣型種類由小到大變化而下降。
5. 結論
在行動隨意網路中有關節點合作暫存的研究中，多數學者多將研究目的放於減少節點
擷取所需資料項的反應時間或是增加暫存記憶體的命中率的前提下，對合作暫存方法中的
相關議題進行探討。不同於其他學者的研究，我們將研究重點放於如何找出適當的合作暫
存群組及能源效益，提出以節點相對位置、存取樣型的合作暫存群組分群方法並結合能源
效率的資料合作暫存方法。我們所提出的這個合作暫存方法可以分為二個階段。第一個階
段為根據行動節點的存取樣型與地理位置，為行動隨意網路找出適當的合作暫存群組。第
二個階段是根據第一階段所分出的合作暫存群組進行具有能源效率的合作資料暫存。而實
驗則以我們所提出的 ECC 方法與現存的兩個合作暫存方法 － Energy 方法與 SAF 方法
進行比較。結果顯示，本論文所提出的合作暫存方法在行動節點一次跳躍範圍稍大(>200m)
時與網路中節點存取樣型種類較少(<100)時，其暫存資料命中率與節點能源消耗都優於
Energy 方法與 SAF 方法。而 Energy 方法在行動節點一次跳躍範圍較小與網路中節點存
取樣型種類較多(=100)時，其暫存資料命中率優於 ECC 方法與 SAF 方法。
致謝
本論文由國科會資助(研究計畫編號 NSC-97- 2221-E-216-043)，謹表謝忱。
參考文獻
12
可供推廣之研發成果資料表
□ 可申請專利 □ 可技術移轉 日期：98 年 10 月 15 日
國科會補助計畫
計畫名稱：在行動隨意網路中應用節點群集且具有能源效率的合作
暫存方法
計畫主持人：中華大學資訊管理系助理教授李之中
計畫編號：NSC 97－2221－E －216 －043－學門領域：資訊二
技術/創作名稱 在行動隨意網路中應用節點群集且具有能源效率的合作暫存策略
發明人/創作人 李之中
中文：在行動隨意網路(Mobile ad hoc network，MANETs)中，行動
節點將擷取過的資料暫存於行動節點上的暫存記憶體中，以減短行
動節點擷取所需資料的資料存取時間。但是，行動節點的暫存記憶
體空間有限，難以將所有擷取過的資料都暫存於行動節點上的暫存
記憶體中。因此，我們使用合作暫存(Cooperative caching)來克服此
一困難。本計畫在合作暫存的策略上同時考慮行動節點擷取所需資
料的存取效能與能源效率，而提出一個應用節點群集且具有能源效
率的合作暫存方法。本計畫首先使用行動節點的存取樣型的相似度
與一次跳躍能夠傳送資料的最大距離將行動節點區分為若干個合
作暫存群組，接著設計一個考慮節點剩餘能源多寡、暫存空間大小
與暫存資料活躍程度的具有能源效率的合作暫存方法。技術說明
英文：In mobile ad hoc networks (MANETs), a mobile node caches its
accessed data on its cache to reduce the access time of next queries.
However, the mobile node is hard to cache all its accessed data due to
the limitation of its cache size. Researchers, therefore, proposed a
method which uses multiple mobile nodes to cache their accessed data,
that is, cooperative caching, to solve the problem. In this project, we
consider both the similarity of access pattern and the distance of one
hop among nodes to divide nodes into several groups. In a group, we
further consider (1) the energy of the node, (2) the available cache
space of the node, and (3) the activation degree of cached data to
develop our energy-efficient cooperative caching method.
可利用之產業
及
可開發之產品
行動通訊產業中隨意任意網路應用相關產品或系統。
技術特點
在行動隨意任意網路上設計節點合作暫存策略時，同時考慮行動節
點擷取所需資料的存取效能與能源效率，而提出一個應用節點群集
且具有能源效率的合作暫存方法。
使用行動節點的存取樣型的相似度與一次跳躍能夠傳送資料的最
大距離將行動節點區分為若干個合作暫存群組，設計一個考慮節點
附件二
