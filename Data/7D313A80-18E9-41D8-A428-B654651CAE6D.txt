 2
 
圖 2 正視圖(θ <φ 時) 
當 θ <φ 時，正面內，雙足機器人繞其腳底邊緣
C 點(瞬心)轉動之運動方程式可推導如( 2 )式所示： 
( ) ( , ) ( ) 0M C Gθ θ θ θ θ+ + =                 ( 2 )  
其中 
    
2 2( ) 2 cos
( , ) 0,  ( ) ( sin( ) sin )
t t t f t f
t f
M I m a m R m aR
C G m g R a
θ φ
θ θ θ φ θ θ
= + + −
= = − +  
碰撞時(impact phase)雙足速度變換方程式推導： 
如圖 3、4，當碰撞發生時(θ =0)，瞬心由 C 點換
為 A 點，假設衝量只發生在 A 點，衝力通過 A 點，C
點離開地面不受衝量影響，故繞 A 點的角衝量為零，
可由角動量守恆原理求碰撞前後角速度的變化。 
 
圖 3 碰撞前示意圖      圖 4 碰撞後示意圖 
由圖 3、4，可推導出碰撞前後之角動量分別為： 
2( cos(2 ))A t t fI m r kθ α− −= +H
K ， A AI kθ+ +=H
K ， 
其中 2A t t fI I m r= + ， ( )1 22 2( cos ) ( cos )f f fr R a Rφ φ= − +        
( )12 tan ( sin sin )f fR R aα φ φ−= − ，由 A A+ −=H H ，可
得碰撞時速度轉換方程式如下： 
2 1 2sin( cos(2tan ( ))) /( )
sin
f
t t f t t f
f
R
I m r I m r
R a
φθ θ φ
+ − −= + +−
   (3)             
選 擇 適 當 的 初 始 條 件 ( )0 0.4 radθ = − ，
( )0 0 rad/sθ = ，及參數值 2 kgtm = ， 0.5 mfR = ，
0.2 ma = ， 20.08 kg-mtI = ， 29.8 m sg = ，經由
Runge-Kutta 數值積分，可得到如圖 5、6 所示的模擬
結果，因碰撞時的能量損失，以致左右擺盪的幅度逐
漸減小。 
 
圖 5 θ 角度變化圖      圖 6  vs θ θ 變化過程 
 
2.2.2 側面之混合系統模式建立 
圖 1 之動態步行機器人在單點支撐行走時，運動
方程式可分為三個過程分別推導： 
相一 (phase 1)：遊動腳(swing leg)經過碰撞，剛變成
站立腳(stance leg)，此時瞬心在站立
腳之腳跟。 
相二 (phase 2)：瞬心沿著站立腳底部之圓弧移動。 
相三 (phase 3)：瞬心在站立腳之腳尖。 
單點支撐行走時(swing phase)雙足系統動力學模式： 
參考圖 7、8 和 9，使用 Lagrange 方程式進行推
導，整體雙足系統於三個過程的動力模式可以下列矩
陣方程式表示： 
11 12 11 12 1
21 22 21 22 2
0st st
sw sw
M M C C G
M M C C G
θ θ
θ θ
⎡ ⎤ ⎡ ⎤⎡ ⎤ ⎡ ⎤ ⎡ ⎤+ + =⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦ ⎣ ⎦⎣ ⎦ ⎣ ⎦
 
   (4) 
 
  圖 7 瞬心在站立腳之腳跟 
相一時，矩陣各元素如下所示：  
2 2 2
11
12
21
2
22
2 2 ( ) cos
( )( cos( ) cos( ))
( )( cos( ) cos( ))
( )
s s
s sw st sw st
s sw st sw st
M I mb md mR mR b d
M m b d R d
M m b d R d
M I m b d
β
θ θ β θ θ
θ θ β θ θ
= + + + − +
= − − − − + −
= − − − − + −
= + −
11
12
21
22
0
( )( sin( ) sin( ))
( )( sin( ) sin( ))
0
s sw st sw st sw
s sw st sw st st
C
C m b d R d
C m b d R d
C
θ θ β θ θ θ
θ θ β θ θ θ
=
= − − − − −
= − − − − + −
=


1
2
(2 sin( ) ( )sin( ))
( )sin
s st st
sw
G mg R b d
G mg b d
θ β θ
θ
= − − − + −
= −  
其中m 、 I 分別為各腿的質量和繞其質心的慣性矩；
sR 為腳底圓弧的半徑； β 為腳底圓弧的半角； d 為
關節至腳底圓弧圓心的距離；b 為各腿質心至圓心的
距離； stθ 為重力方向至站立腳對稱軸的角度； swθ 為
重力方向至遊動腳對稱軸的角度。 
相二時，矩陣各元素如下所示： 
2 2 2
11
12
21
2
22
2 2 ( )cos( )
( )( cos( ) cos( ))
( )( cos( ) cos( ))
( )
s s st
st sw s sw
st sw s sw
M I mb md mR mR b d
M m b d d R
M m b d d R
M I m b d
θ γ
θ θ γ θ
θ θ γ θ
= + + + − + −
= − − − −
= − − − −
= + −
 
11 22
12
21
( )sin( ) ,   0
( )( sin( ) sin( ))
( )( sin( ))
s st st
st sw s sw sw
st sw st
C mR b d C
C m b d d R
C m b d d
θ γ θ
θ θ γ θ θ
θ θ θ
= + − =
= − − − −
= − − −



 
 4
參考Asano [ 6 ]， 如圖15所示，使用等效力矩的
概念，我們可把在斜坡上穩定的被動動態步行轉成在
平面上主動式的控制，此方式稱作虛擬重力(virtual 
gravity)法。將圖14左上角的各個向量除以 cosγ ，可
得到如圖15所示的結果，將 g 視為一與斜面垂直之虛
擬重力，亦即可把斜面當成一水平面，於第一相至第
三相時，走平面所需之控制力矩分別為： 
2 cos( ) ( ) cos( )
tan
( )cos
s st st
vg
sw
R b d
mg
b d
θ β θ γθ
− − − + −⎡ ⎤= ⎢ ⎥− −⎣ ⎦
Su
2 ( )cos
sin
( ) cos( )
s st
vg
sw
R b d
mg
b d
θ γθ
− +⎡ ⎤= ⎢ ⎥− − −⎣ ⎦
Su            (7)        
2 cos( ) ( ) cos
tan
( ) cos( )
s st st
vg
sw
R b d
mg
b d
θ β θ γθ
− − +⎡ ⎤= ⎢ ⎥− − −⎣ ⎦
Su  
能量限制控制法： 
事先規劃讓能量的時間變率為一正值λ ： 
 
圖 14 相一(phase 1)之等效   圖 15 第一相(phase 1)  
     力矩推導示意圖          之虛擬重力示意圖 
 
1 2  st sw st swE u uθ θ λ θ θ λ⎡ ⎤= = ⇒ + =⎣ ⎦ Su                            
再假設 1 2,u u 之間呈一比例關係： 1 2u uμ= ，則 
2 1 1st sw st sw st sw
u u
μλ μλ λ
μθ θ μθ θ μθ θ
⎛ ⎞⎡ ⎤= = =⎜ ⎟⎢ ⎥+ + + ⎣ ⎦⎝ ⎠
Su     , , 。               
st swθ θ在平衡點( = =0)時，由(7)式之 vgSu 可分別
求得三個運動過程的 1μ ， 2μ 和 3 μ 為： 
( ) ( )1 2 cos( ) ( ) ( ) 2.67sR b d b dμ β− − + − − = −=  
( ) ( )2 2 ( ) ( ) 8 3sR b d b dμ − + − − = −=            (8) 
( ) ( )3 2 cos( ) ( ) ( ) 2.67sR b d b dμ β− − + − − = −=  
其中 0.5sR = m， 0.06d = m， 0.3b = m， 3β = D。 
運用此方法只須選擇λ 和 μ，但要如何合理與適
當的選擇，可將相一至相三能量的變率轉換成以重心
變率( X g )來表示，如下所示： 
tanE MgX g γ= 　                     (9) 
其中 2  M m= 。相一至相三的重心表示式分別為： 
( )( 2 sin( ) ( )sin( ) ( )sin )  g s st st swX m R b d b d Mθ β θ θ= − − − + + − − −  
(2 ( )sin ( )sin( ))g s st st swX m R b d b d Mθ θ θ= − + + − −  
(4 2 sin( ) ( )sin ( )sin( ))g s s st st swX m R R b d b d Mβ θ β θ θ= + − − + + − −  
 
具有強健性的能量追蹤控制法： 
前述控制設計方法，其強健性較低。所以本節利
用前面的能量模式，探討一參考能量軌跡追蹤控制
法。由能量改變率方程式，對其積分可得到參考能量
方程式： 
0tand g gE X MgX Eγ +( )＝                 (10)             
0 0gE X =其中 是當重心座標 時之能量。選定能量誤差
的微分式，如下所示： 
( ) ( )d g d g
d E E X E E X
dt
ζ− = − −( ) ( )         (11) 
0ζ >其中 為回授控制增益。代入前述公式，可得： 
( ) tan
tan ( )
d g d g
g d g
d E E X E E MgX
dt
E MgX E E X
θ φ γ
θ φ γ ζ
⎡ ⎤− = − = −⎣ ⎦
⎡ ⎤= = − −⎣ ⎦
   
  
( )
( )
Su
Su
(12)      
故可設計有效控制力矩 Su的計算策略如下： 
tan ( )
1
g d gMgX E E Xγ ζ μ
μθ φ
⎛ ⎞− − ⎡ ⎤= ⎜ ⎟ ⎢ ⎥⎜ ⎟+ ⎣ ⎦⎝ ⎠
Su

 
( )
    (13)            
上式為一具有追蹤誤差回授訊號的控制力矩計算策
略，可根據回授訊號，調整控制力矩，提昇其強健性。 
類神經適應控制器設計： 
因前述之仿被動式控制方法，須選擇適當的初始
條件，本節使用Lyapunov穩定理論推導雙足機器人之
穩定適應控制器，其中含一類神經網路函數近似器，
用以補償不確定性。 
輻射基底類神經網路(Radial Basis Neural Network)
函數近似器設計： 
本研究使用兩個輸入、隱藏層九個神經元與兩個
輸出的網路架構，如圖16所示，定義兩個輸入變數，
分別為站立腳和遊動腳的角度追蹤誤差 1 2,x x ，隱藏層
九個神經元的活化(activation)函數為高斯(輻射基底)
函數[15]，輸出為站立腳與遊動腳所須之補償力矩，
因此，機器人雙足不確定性補償的映射函數為： 
( )
9 2 2
,
1
9 2 2
1
exp( )
( , ) ( ),   1, 2
exp
j i i i
Ti
j j
i i
i
w
F x j
γ
γ
=
=
− −
= = =
− −
∑
∑
x c
x θ w ζ
x c
 (14) 
其中 ic 為第 i 個中心點位置， iγ 為高斯函數寬度，
i−x c 表示 x與 ic 之間的歐幾里德(Eucledian)距離；
,1 ,2 ,9  
T
j j j jw w w⎡ ⎤= ⎣ ⎦w " ，因此，雙足不確定性的補償
向量可表示為： 
ℑ =ns ( )T xw ζ                          (15)  
其中 [ ]1 2 ,=w w w ， [ ]1 2  ℑ = Tns F F 。 
直接式適應類神經控制設計：  
考慮雙足系統搖動相時的動力學模式：            
θ θ τ+ + = M C G                       (16) 
可先將各係數矩陣和向量分別以一公稱值加上一變
動 量 表 示 為 ： n= + ΔM M M ， n= + ΔC C C ，
n= + ΔG G G；其中 nM 、 nC 、 nG 為公稱矩陣和向量，
ΔM 、 ΔC 、 ΔG為未知之變動矩陣和向量，經過整
理之後可得： 
  n n nθ θ τ+ + + = M C G D                     (17) 
其中定義模式不確定性： θ θ= Δ + Δ + Δ D M C G 。 
隨意軌跡追蹤之公稱控制律推導： 
    使用反向步進 (backstepping)設計法 [15]，以
 6
有界，亦即 ( )T W− ≤w ζ x D ，可得： 
( ) ( ) ( )
( )
( )
2
0 0
1 1 1 1 2 2 2 2
2
1 1 1 2 2 2
0 0
1 1 1 1 1
0 0
2 2 2 2 2
2
ˆ ˆ      ( ) ( )
   2 4 1 2 1 2
      1 2 ( ) ( )
      1 2 ( ) ( )                          (40)
T T
a s
T T
T T
s
T
T
V kV W
kV W
η
σ σ
η σ σ
σ
σ
≤ − − +
− − − −
≤ − + − −
+ − −
+ − −
e Pβ e Pβ
w w w w w w
w w w w
w w w w
w w w w

 
   
令 ( ) ( )2 0 01 1 1 1 14 1 2 ( ) ( )Td W η σ≡ + − −w w w w    
  ( ) 0 02 2 2 2 21 2 ( ) ( )Tσ+ − −w w w w  ， 
因為 
1 2
( ) ( )e s ee V eγ γ≤ ≤ ，其中選 1 2( ) ( )e eγ γ=e e  
( )1 2 T= e Pe ，
1e
γ 和
2e
γ 為Class K∞− 函數，以及
1
( )s eV γ− ≤ − e ，可得 
( ) ( )
1 1 1 1 2 2 2
2 ( ) 1 2 1 2T Ta eV k dγ σ σ≤ − − − +e w w w w         (41) 
所以，當  
( )
1
1( 2 )e d kγ −≥e 或 1 12d σ≥w 或 2 22d σ≥w  (42)                  
時， 0aV ≤ ，故整體適應控制系統為有界穩定。 
 
4. 模擬結果 
4.1 能量追蹤控制法模擬結果 
使用能量追蹤控制法，當回授控制增益選為零
( 0ζ = )時之電腦模擬結果，其能量隨重心變化的關
係，如圖 14(a)所示，可知在沒有回授控制增益下，
要經過一段較長時間才會達到穩定的步伐(極限循
環。當回授控制增益選為 10ζ = 時，結果如圖 14 (b)
所示，要達到穩定的步伐所需的時間較短。 
4.2 類神經適應控制法模擬結果 
當有不確定性時，使用適應類神經補償控制的模
擬結果如圖 15(a)(b)所示，分別為站立腳與遊動腳在
有無加入補償時，角度追蹤誤差比較圖，在步行四步
之後，進入穩態過程，站立腳及遊動腳在有補償的狀
況 下 ， 角 度 追 蹤 誤 差 分 別 在 0.000374 rad± 和
0.00049 rad± 範圍內，與無補償的情況比較，誤差明
顯減小。所需控制力矩 1u 、 2u 如圖 15 (c)所示。圖 15 
(d)、(e)為函數近似器參數 1 2,w w 線上自調過程。由模
擬結果可知，使用類神經適應控制策略去補償不確定
性項，可有效降低追蹤誤差。 
5. 雙足步行機器人設計與製作  
本研究參考[16]設計的雙足步行機器人，如圖 16
所示，主要分為四大部分：髖部、大腿、小腿，以及
足部。髖部與大腿連接之股關節有 3 個自由度，大腿
與小腿連接之膝關節簡化為一個自由度，小腿與足部
連接之踝關節也簡化為 2 個自由度，並且不考慮足部
之腳指頭的自由度。故本文雙足機器人總共有 12 個
自由度，每個自由度皆由獨立的旋轉關節所構成。12
個旋轉關節依其作用又可分為三種旋轉關節：俯仰
(pitch)關節、擺動(roll)關節、轉動(yaw)關節，其中俯
仰關節控制步伐大小、抬腿高度，擺動關節控制上半
身與地面方向姿態，轉動關節可控制步伐前進方向。 
髖部與大腿連接之髖關節為一 3 自由度之球關
節，由於要設計致動器能同時控制 3 個自由度實屬不
易，大部分之作法便是使用 3 個轉動關節，並且使這
些旋轉軸能交於一點進而等同於球關節效果。 
髖部之轉動(yaw)關節主要由馬達、電位計、軸
承等零組件所組成。如圖 17 所示，馬達利用公差配
合使用銷與零件 1 接合，馬達軸直接與電位計接合，
然後再與軸 1、軸 2 連接，軸 1、軸 2 間安置一軸承
來減少轉動磨擦，此軸承藉由零件 2、零件 3 來固定。
假設軸 2 有一軸向力傳遞過來，可經由零件 2 將其大
部分軸向力吸收，只有極小部份之軸向力傳遞至電位
計、馬達，以避免因軸向負載而損壞。 
髖部擺動關節接於轉動(yaw)關節之軸 2 上，其
傳動機構的設計如同上述之轉動(yaw)關節設計。 
髖部之俯仰關節動力源原本考慮裝於擺動連桿
上，但是基於前述目的以及機構干涉問題，故將動力
源置於大腿連桿上。馬達軸的轉動運動透過齒形時規
皮帶來傳遞並驅動皮帶輪帶動大腿連桿的俯仰轉動。
並且將電位計放置於皮帶輪上，可感測連桿的實際轉
動角度，不會受到因皮帶長度公差或齒隙影響造成回
授角度的不正確，當然電位計也有防止軸向負載的機
構設計，如前所述。 
膝關節為一俯仰關節，將膝關節致動器置於大腿
連桿上，其機構與傳動系統設計如前髖部轉動(yaw)
關節所述。 
踝關節由一俯仰與一擺動關節所構成。俯仰關節
的設計與髖部之俯仰關節設計相同。為了讓兩旋轉軸
相交，其機構設計採用上述髖關節 3 個旋轉軸相交於
一點的方法。基於此目的，故將其擺動關節動力源直
接置於足部上，由相對運動原理來轉動足部連桿。 
腳底板的設計則根據 ZMP 理論，藉由搭配適當的
足部軌跡後，希望能儘量的增加腳底與地面的接觸面
積，使穩定邊際(stability margin)能儘量的大，故設計
平面的腳底板，此外平面加工比曲面加工容易。 
考慮髖部之俯仰關節、膝關節、足部之俯仰關節
的致動器擺放位置，藉由將馬達儘量往中心線擺放，
使大腿、膝部、小腿整體重心往中心線靠近，並將足
部擺動關節與髖部擺動關節的致動器軸心垂直對
齊，如圖 18(a)所示。藉由上述的考慮，髖部轉動關
節在轉動時能減少所須的驅動扭矩，並且在建立運動
學模式時，能使運動學方程式較為簡單。 
實際加工製作並組裝完成的雙足機器人，如圖
18(b)所示。 
 
6. 結論 
本研究針對雙足被動式步行機器人，根據其自然
走下斜坡的特性，探討了平地步行時所需的相關主動
式控制策略。並對於仿被動式設計方法的缺點，考慮
模式不確定性的影響，提出一穩定類神經適應控制策
略。經由電腦模擬結果，驗證所提控制策略的有效
性。本研究最後亦實際設計製作一類似 e-nuvo 的雙足
機器人 
 
