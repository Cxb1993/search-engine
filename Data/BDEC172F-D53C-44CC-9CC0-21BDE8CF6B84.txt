 2
行政院國家科學委員會補助一般型研究計畫成果報告 
 
嵌入式污水處理廠監控器 
 
Embedded Supervisory Controller Design for Wastewater 
Treatment Plant 
 
計畫編號：NSC 98-2221-E-168 -010 - 
執行期限：98 年 8 月 1 日至 99 年 7 月 31 日 
主持人：童淑珠副教授   崑山科技大學 環境工程系 
 
一、中文摘要 
 
本計畫設計製作嵌入式污水處理廠
監控器，在硬體方面，採市售的單板電腦
及資料擷取模組，在軟體部分，採開放源
Linux 操作業系統，軟硬兩者都在市場上
歷練多年，提供嵌入式控制器穩定的基礎。 
本研究的嵌入式污水處理廠監控器
採集中式控制，將大樓污水處理系統的感
測及驅動訊號帶入嵌入式控制器，讓其可
以讀入系統所有感測及驅動的訊號，讓嵌
入式控制器也可驅動系統的所有驅動器。 
監控器主程式為 Java 應用程式，將
自動控制的分部功能元件化，有輸入、輸
出、階級圖設計，構成控制迴路，以進行
控制。嵌入式監控器上的網頁伺服器及伺
服端程式，與控制器主程式溝通，作為嵌
入式監控器的人機界面。 
由於嵌入式監控器的主程式是 Java 
應用程式，整個程式的發展及執行測試，
可完全在開發的個人電腦（Host）上完成，
大幅縮短嵌入式控制器的開發時間。 
本監控器的設計讓其一方面可附加
於現有的污水處理系統，以增加其透過全
球資訊網監控的能力，另一方面也可用於
取代舊式的污水處理系統控制方式，提供
功能更強、價格更便宜的污水處理系統網
際監控器選擇。 
 
關鍵詞：污水處理廠、嵌入式控制器、
Linux、Embedded Java 
 
Abstract 
 
This research designs supervisory 
embedded controller for wastewater 
treatment plant. The embedded controller 
uses on-shell single board computer and 
data acquisition modules in hardware and 
Linux operation system in software. All of 
them are in market for many years such that 
they provide a stable foundation for our 
embedded controller.  
The embedded controller is a central 
controller for the whole plant. All input and 
driving signals are read into the controller 
such that it knows the statuses of the whole 
plant and can control every motor of the 
plant.  
The control program in the controller is 
a Java application. The control program is 
componentized. There are input, output, 
ladder design. User can choose or combine 
these components to form control loop to 
implement control actions. Furthermore, the 
controller uses web server and server-side 
programs as human interface of the 
 4
處,新創公司或個人可發揮創意,據以抗衡
大公司。嵌入式控制器正是在這種時空背
景下,趁勢而起,充分利用開放源的軟體架
構及個人電腦的硬體架構,在現有的基礎
上,直接切入控制應用。 
本研究的「嵌入式污水處理廠監控器」
設計，希望以一個嵌入式電腦統整所有污
水處理單元的控制，除了降低成本外，可
有統整的效易，令各單元彼此配合。本監
控器並且可以附加在現有的污水處理廠
上，以取代或並行現有的傳統污水處理系
統的控制器，而成為新世代的污水處理系
統網際監控器。 
 
三、研究方法 
 
污水處理系統 
 
圖一. 一般污水處理系統配置圖 
事業廢水及生活污水的處理大致如上
兩圖所示，污水進流先經過攔污柵、沈砂
池等物理處理設施去除水中較大懸浮微
粒、砂礫、雜物等，再進入調勻池調勻污
水水質並調節水量，以提高處理效率。調
勻池泵出之污水引入生物處理單元，於生
物旋轉盤或接觸氧化池中曝氣，輸氧進入
水中以供微生物繁殖生長，並附著於接觸
濾材形成生物膜，藉微生物吸收分解廢水
中有機物質，有效去除污水中之生化需氧
量（Biochemical Oxygen Demand, BOD5）
及化學需氧量（Chemical Oxygen Demand, 
COD）。經生物處理後的污水，進入化學處
理單元中利用混凝劑、助凝劑等，進行混
凝、膠凝，使污水中懸浮微粒（Suspended 
Solid, SS）形成較大膠羽增加沈澱效率，
藉沈澱方式去除之。經妥善處理後符合國
家放流水標準之放流水經水溝排走。各處
理單元產生之污泥，經污泥濃縮池濃縮、
脫水機脫水後之污泥餅運送衛生掩埋場掩
埋或再利用製磚原料。 
就自動控制的層面來說，污水處理系
統的控制，其感測為液位量測(浮球)、水
質量測、流量量測、及餘氯量測，驅動器
為各式的泵、鼓風機、加藥機等，以控制
各個污水處理池的水位，讓水質達到國家
制定的標準； 
放流水質標準： 
COD < 100mg/L 
BOD < 30mg/L 
SS < 30mg/L 
油脂 < 10mg/L 
PH: 6~9 
大腸菌類 < 2000 CFU/100mL 
回收水質標準： 
氫離子濃度指數（pH）  6.8 ~ 8.5 
生化需氧量（BOD5）     < 10 mg/L 
大腸菌類      不能檢出 
臭味及外觀    無不舒適 
色度       < 40 
餘氯     介於 0.5 ~ 1.5 mg/L 之間 
目前使用中的控制系統，主要在控制
 6
 
圖五. Puppy Linux 
 
FTP 伺服器，用於資料傳輸。 
Telnet/SSH 伺服器，用於系統管理。 
Java 虛擬機器，用於執行 Java 程式。 
Tomcat servlet/jsp 容器，用為網頁伺
服器，同時執行伺服端程式。 
Hypersonic 資料庫，開放源 Java 資料
庫，用於儲存系統的操作資料。 
 
本研究尋求便宜可靠而又可以執行
Java 程式的嵌入式控制器，研華 PCM-9375
單板電腦，採用 AMD LX800 500MHz 的中央
處理器，配備 512MB 的動態記憶體，以今
日市面一般產品視之，算是低檔的單板電
腦，如果採用一般 Windows XP（Windows XP 
embedded）或是 Fedora Linux 操作系統，
電腦的整個效能，會完全被拖垮。而另一
普遍使用的 Windows CE 則不支援 Java 虛
擬機器。 
經一番測試搜尋，Puppy Linux 有很
好的表現;系統小（大約 100MB），可以安
裝 Java 執行環境（Java 1.6），操作系統
本身及使用者的程式與資料，可以放進一
個 2G 的隨身碟。用隨身碟一開機，操作系
統及檔案系統都載入動態記憶體（DRAM），
開機快，Java 程式執行流暢。因其不需要
傳統硬碟，更符合耐震動的控制器要求。 
 
水位控制程式： 
 
圖六. 水位控制示意圖 
 
水位控制是污水處理廠內最主要的
控制，本研究專門對污水處理廠的水位控
制，製作控制元件。一般污水處理廠槽池
的水位控制，如圖五所示，水槽內，設有
超高水位、高水位、低水位、超低水位等
感測器，上游污水斷續地流進水槽。現有
一般的污水處理廠的水位控制，採用傳統
電氣迴路控制，即以電氣元件（繼電器、
計時器…）組成的電路控制，當水槽的水
滿到高水位時，馬達開始打水，將水排出，
水一直排到低水位時，馬達關閉，為了增
加打水的可靠性及延長馬達壽命，採雙馬
達配置，雙馬達是輪流打水，即這一次 A
馬達打水，則下一次 B馬達打水。 
上述的控制系統，在設備（馬達）及
感測器正常時，可以正常運作，污水水位
保持在高低水位之間。然而，東西總會損
壞，如感測器可能故障、操作狀態也可能
改變，如突然的大量進污水，如果超高水
位或是超低水位發生時，就必須緊急處
置，傳統的控制迴路無法因應，只能發出
警告聲，叫人立即處理。超高水位可能造
成污水溢出，破壞環境衛生，支出處理成
本，超低水位可能造成馬達空轉，不但浪
費能源，也可能燒毀馬達。 
本研究的監控器將水位訊號及馬達
運轉訊號帶上網路，異常狀況發生時，一
方面執行可做的緊急處理，一方面簡訊通
知負責人。在原有的系統，加上網路監控
功能，同時增添控制智慧。 
水位控制元件的輸入有水槽超高水
 8
圖時選用。 
受監控系統名稱的下面是工具列，有
配線工具及電氣元件工具。配線工具是各
種的連線方式，協助使用者連接電氣元
件，形成階梯圖（電氣迴路圖）。電氣元
件工具列提供繼電器、計時器、計數器等
元件，供使用者選用。 
視窗的左邊，工具列的下面，是電氣
迴路設計圖面，使用者點選各式配線、電
氣元件接點、輸入輸出接點，以構成迴路
設計。迴路設計完成後，點選右上角的模
擬按鈕，程式即進入模擬模式。 
在模擬模式時，程式將設計的迴路
圖，轉為可程式控制器指令，並啟動一執
行緒，不斷循環地執行該可程式控制器指
令碼，以模擬該電氣迴路控制結果。在模
擬模式時，並沒有實際的讀寫資料擷取模
組狀態，使用者可以點按輸入元件，以切
換輸入元件狀態，用以模擬輸入狀態的改
變。模擬中，各元件的狀態改變，可以在
視窗中動態顯示，藉以觀察設計的正確
性。點按右上角的停止按鈕，可以結束模
擬模式，回到編輯模式。此時可以根據模
擬，修改設計，再模擬，再修改，直到正
確為止。設計完成按右上角存到資料庫按
鈕，將迴路設計存到監控器。 
監控器開機時，會自動讀取階梯圖設
計圖檔，執行可程式控制器功能。監控器
運行期間，如果有人上存迴路設計，監控
器會停止目前的可程式控制器碼，載入新
的可程式控制器碼，執行新的階梯圖控制。 
Host（開發電腦）與 Target（目標板） 
嵌入式系統上的軟硬體資源有限，所
以其開發過程往往不是在嵌入式系統
（Target）上直接進行，而是在另一台電腦
（Host）上進行，程式撰寫完後灌入測試
板上測試，有錯的話再於 host 上修改，再
灌入測試板測試，如此周而復始，直到沒
有錯誤。在一般的情況下，由於 target 與
host 的中央處理單元（CPU）不同，host
上的程式必須先用 cross-compiler 編譯成
target 可以執行的程式碼，再灌入 target 執
行。 
本監控器的 Java 程式，可以完全在個
人電腦（採 Windows 或 Linux 操作系統）
上使用，因為監控器的硬體界面只用到
Ethernet 網路界面，所以，只要個人電腦
有安裝 Java 虛擬機器及 Java 程式發展工
具，嵌入式控制器上所需的控制程式，可
以先在個人電腦上撰寫、執行、測試、修
改，直到正確後，再到嵌入式監控器
（Target）上最後測試。 
 
四、結果 
本研究設計製作嵌入式污水處理廠監
控器，主要包括下述幾項工作； 
 
1. 嵌入式控制器及資料擷取系統選
用； 
本研究採用研華科技的 PCM9375 單板
電腦及 Adam6050 遠端資料擷取模組，
Adam6050 是數位輸入輸出模組，讀取感測
器及驅動器狀態，可驅動改變驅動器狀態。 
PCM9375 單板電腦是一個擁有兩個
TCP/IP 埠的控制器，其中一個 TCP/IP 埠用
以連接資料擷取模組（內部網路），另一個
TCP/IP 埠則用以連結中央監控電腦（外部
網路）。 
 
2. 嵌入式控制器操作系統選用； 
 
圖八. 監控器軟體安裝 
 10
電氣迴路（階梯圖）的控制方式，一
般比較適合用於順序控制的設計，使用這
種方式的控制，有利於引導習於可程式控
制器的使用者，使用本嵌入式網際監控
器。然而，控制法則的設計有很多種，如
PID 控制、類神經控制、模糊控制等，各有
其優缺點及適用時機，本監控器應可再整
合其他控制法則的使用。 
 
五、 結論 
    本文設計製作嵌入式污水處理廠
監控器，採市售的單板電腦及資料擷取模
組，執行 Puppy Linux 作業系統，軟硬兩
者都在市場上歷練多年，提供嵌入式控制
器穩定的基礎。 
本文的監控程式包括水位控制程式、
網頁伺服程式、及瀏覽器上的 Applet 監控
程式，都是以 Java 語言發展，利用其跨平
台的特性，加速整個開發過程。 
本文的污水處理廠監控著重在污水處
理廠的主要水位控制，進一步的研究將整
合水質監控。 
電氣迴路（階梯圖）的控制方式，常
用於順序控制，對於其他如設定點控制，
可再整合其他控制法則進來。 
 
六、計畫成果自評 
 
本計畫的研究成果與原計畫的預計
目標符合，有相當高的教育及應用價值，
本研究的嵌入式污水處理廠監控器，可實
際供環境工程公司，用於對污水處理系統
的監控。 
 
 
七、參考文獻 
1. 新竹科學工業園區管理局污水處理
廠網站, 
http://pavo.sipa.gov.tw/wastewater/. 
2. Karim Yaghmour,”Building Embedded 
Linux Systems.”,O’REILLY, 2003. 
3. Christopher Hallinan 原著，林昭宏翻
譯，徐千洋審閱，"Embedded Linux
開發實務徹底研究"，旗標，2008 年
九月． 
4. Linux, http://www.linux.org  
5. MontaVista Software, "Powering The 
Embedded Revolution", 
http://www.mvista.com/ 
6. TimeSys, http://www.timesys.com/.  
7. linuxdevice, 
http://www.linuxdevice.com/.  
8. Qplus, 
http://sourceforge.net/projects/qplus/. 
9. Ted Neward,”Server-based Java 
Programming”,Manning Publications 
Co.,2000.  
10. Bruce Eckel,”Thinking in Java”, 2nd 
edition,http://www.mindview.net/Book
s/TIJ/. 
11. Jason Hunter and William 
Crawford”Java Servlet Programming”, 
2nd edition, 2001, 
http://www.amazon.com/. 
12. Servlet 引擎，Tomcat, 
http://jakarta.apache.org/.  
13. Michael Mathews, MontaVista; Marc 
R. Erickson, IBM OTI,” Embedded 
Linux & Java -- made for each 
other”,http://www.linuxdevices.com/ar
ticles/AT6624052896.html, (May 25, 
2001) 
14. Eclipse, http://www.eclipse.org/. 
15. JControl, http://www.jcontrol.org/. 
16. 李武鉦, "順序控制電腦設計與模擬
軟體", 技術學刊, Vol.10, No.1, 
pp.11-18 (1995). 
17. Chiaming Yen and Wu-Jeng Li,“A 
Web-based Computer-aided Pneumatic 
Circuit Design Software”, Simulation 
Modelling Practice and Theory, Vol. 
11, Issues 3-4, pp. 285-295, 15 July 
2003 (EI) (NSC 89-2212-E-150-036) 
 12
國科會補助專題研究計畫成果報告自評表 
請就研究內容與原計畫相符程度、達成預期目標情況、研究成果之學術或應用
價值（簡要敘述成果所代表之意義、價值、影響或進一步發展之可能性）、是
否適合在學術期刊發表或申請專利、主要發現或其他有關價值等，作一綜合評
估。 
1. 請就研究內容與原計畫相符程度、達成預期目標情況作一綜合評估 
●達成目標 
□ 未達成目標（請說明，以 100 字為限） 
□ 實驗失敗 
□ 因故實驗中斷 
□ 其他原因 
說明： 
2. 研究成果在學術期刊發表或申請專利等情形： 
論文：□已發表 ●未發表之文稿 □撰寫中 □無 
專利：□已獲得 □申請中 □無 
技轉：□已技轉 □洽談中 ●無 
其他：（以 100 字為限） 
 
1. 童淑珠、李武鉦, "基於 Puppy Linux 的污水系統網際監控器",中國機械工程學會 CSME 第 27 屆全國學術
研討會, 國立臺北科技大學(2010/12/10-11) 
2. 童淑珠、李武鉦, "嵌入式網際監控器控制邏輯的線上設計與更新",中國機械工程學會 CSME 第 27 屆全國
學術研討會, 國立臺北科技大學(2010/12/10-11) 
 
3. 請依學術成就、技術創新、社會影響等方面，評估研究成果之學術或應用價
值（簡要敘述成果所代表之意義、價值、影響或進一步發展之可能性）（以
500 字為限） 
 
嵌入式污水處理廠監控器在監控器的設計上是創新的，網頁上即時
設計更新控制法則也是創新的，本設計完全利用台灣廠商市面上的硬
體，有鏈狀效率。 
 
 
 
 
 
 
 14
 
國科會補助專題研究計畫成果報告自評表 
請就研究內容與原計畫相符程度、達成預期目標情況、研究成果之學術或應用價
值（簡要敘述成果所代表之意義、價值、影響或進一步發展之可能性）、是否適
合在學術期刊發表或申請專利、主要發現或其他有關價值等，作一綜合評估。
1. 請就研究內容與原計畫相符程度、達成預期目標情況作一綜合評估 
■達成目標 
□未達成目標（請說明，以 100字為限） 
□實驗失敗 
□因故實驗中斷 
□其他原因 
說明： 
2. 研究成果在學術期刊發表或申請專利等情形： 
論文：□已發表 □未發表之文稿 ■撰寫中 □無 
專利：□已獲得 □申請中 ■無 
技轉：□已技轉 □洽談中 ■無 
其他：（以 100字為限） 
專利申請考慮中 
"基於 Puppy Linux 的污水系統網際監控器","嵌入式網際監控器控制邏輯的線上設計與更
新" 
投稿中國機械工程學會 CSME 第 27 屆全國學術研討會(2010/12) 
3. 請依學術成就、技術創新、社會影響等方面，評估研究成果之學術或應用價
值（簡要敘述成果所代表之意義、價值、影響或進一步發展之可能性）（以
500字為限） 
嵌入式污水處理廠監控器在監控器的設計上是創新的，網頁上即時設計更新控制法則也是
創新的，本設計完全利用台灣廠商市面上的硬體，有鏈狀效率。 
