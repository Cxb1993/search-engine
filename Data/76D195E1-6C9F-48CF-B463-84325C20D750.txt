 - 2 -
■ 中、英文摘要及關鍵詞(keywords)：（此部分的頁碼編寫請用羅馬字 I 、II、 III…標在
每頁下方中央） 
■ 目錄：（此部分的頁碼編寫請用羅馬字 I 、II、 III…標在每頁下方中央） 
■ 報告內容：（「報告內容」至「附錄」部分請以阿拉伯數字 1.2.3.…順序標在每頁下方中
央） 
 
●計畫緣由及目的 
●研究方法 
●結果與討論：含結論與建議 
●參考文獻 
※若該計畫已有論文發表者，可以 A4 紙影印，作為成果報告內容或附錄，並請註明發
表刊物名稱、卷期及出版日期。 
※若有與執行本計畫相關之著作、專利、技術報告、或學生畢業論文等，請在參考文獻
內註明之，俾可供進一步查考。 
 
■ 計畫成果自評：請就研究內容與原計畫相符程度、達成預期目標情況、研究成果之學術
或應用價值、是否適合在學術期刊發表或申請專利、主要發現或其他有關價值等，作一
綜合評估。 
■ 可供推廣之研發成果資料表：凡研究性質屬應用研究及技術發展之計畫，請依國科會提
供之表格，每項研發成果填寫一份。 
■ 附錄（或附件） 
 - II -
Abstract 
Rapid deployment of broadband services in the residential and small business 
area has played an important role in the evolution of access networks. Currently, 
Ethernet passive optical networks (EPON) are being considered as a promising 
solution for the next generation access network, due to the convergence of low-cost 
Ethernet equipment and low-cost of fiber infrastructure. In addition, the growing 
demand of broadband services such as IP telephony, video on demand has urged the 
network operator to accelerate the deployment of full-service access networks. So, we 
proposed a delay-considered scheduling scheme for real-time services, i.e. voice and 
video service, and two fairness-considered scheduling schemes, i.e. Hybrid LQF-QLP 
scheme and Hybrid EQL-QLP scheme, to support non-real-time data service. The 
goal of the scheduling algorithm is to meet the delay bound of voice service, and to 
simultaneously maintain the fairness of both packet delay and packet blocking 
probability for non-real-time data service. In addition, we also proposed a 
prediction-based scheduling method, in which we adopt a Moving Average technique. 
We find that by implementing a predictor, the maximum cycle time can be extended 
and the system throughput can be improved. Simulation results show that the 
proposed scenario can improve performance well. 
In the meantime, we propose a QoS-promoted dynamic bandwidth allocation 
(Q-DBA) method to support transmitting delay-constrained voice and video packets, 
and starvation-considered data packets. The goal of the Q-DBA method is to meet 
delay requirement of voice service when the voice dropping probability is set to zero, 
to meet delay requirement, and to meet dropping probability of video probability. 
Simultaneously the goal is also to maintain the delay of data packets. The data packets 
should not endure a long delay time although they do not have strict delay 
requirement. When the QoS requirement of real-time service can be satisfied, the 
performance of non-real-time service should be improved. 
The transmission capacity of an optical network largely increases because of the 
development and application of wavelength division multiplexing (WDM) 
technologies. However the required bandwidth of a traffic stream is also much smaller 
than the bandwidth capacity of a wavelength. Thus, in order to efficiently utilize the 
network resources, many lower-speed traffic streams can be multiplexed onto a 
high-speed wavelength by traffic-grooming technique. We consider the traffic 
grooming problem, which the property of the traffic is dynamic and nonuniform 
traffic. Our objective is to effectively reduce the new call blocking rate and maximize 
the utilization efficiency of the wavelengths which are used by the system. Integer 
linear problem (ILP) methodology is applied to formulate for this problem. And, in 
 - IV -
Agenda 
I. Introduction............................................................1 
II. Approach, Conclusion and Discussion................. 7 
II.1. Fair Scheduling Schemes for Non-Real-Time Service in 
EPON Access Network............................................. 7 
II.2. QoS-Promoted Dynamic Bandwidth Allocation (Q-DBA) 
for Ethernet Passive Optical Networks...................... 23 
II.3. Computation-Efficient Algorithms for Dynamic Traffic 
Grooming in Metro-Access Ring Network..................35 
III. Reference................................................................47 
IV. Comment ............................................................... 51 
2 
addresses of incoming packets. In contrast, all ONUs have to share a common 
resource to transmit packets to OLT in the upstream direction (i.e., from ONU to 
OLT). Therefore, the network requires a multiple access scheme to prevent ONUs 
from packet collisions. Several multiple access schemes have been proposed for the 
upstream channel access in EPON, which include wavelength division multiple access 
(WDMA)-based schemes [1], contention-based multiple access schemes [1], optical 
code division multiple access (OCDMA)-based schemes [2], and time division 
multiple access (TDMA)-based schemes [3]. Among them, the TDMA-based scheme 
seems to be the most cost-effective solution for EPON because it requires only one 
transceiver in the OLT and is easy to implement. Hence, the TDMA-based approach is 
adopted herein. 
Kramer, Mukherjee, and Pesavento [3] proposed a TDMA-based scheme that 
allocates a fixed-duration timeslot to each ONU for its upstream packet transmission. 
The authors further proposed an Interleaved Polling with Adaptive Cycle Time 
(IPACT) scheme [4] to improve the bandwidth utilization of their TDMA-base 
scheme. In IPACT, the timeslot is dynamically allocated to ONUs according to their 
traffic loading. The authors investigated performance of IPACT with several 
scheduling algorithms (e.g., fixed, limited, gated, constant credit, linear credit, and 
elastic) and found that IPACT with limited scheduling exhibits the best performance. 
In IPACT with limited scheduling, OLT allocates the time duration to each ONU 
according to its requested data volume unless an upper bound is exceeded. This 
approach is simple but lack of flexibility since an overloaded ONU cannot get extra 
resource even if the network is under-utilized. Several scheduling schemes were 
proposed to be used in conjunction with IPACT to support IP-based multimedia traffic 
with diverse quality-of-service (QoS) requirements [5]. In [6], the authors adopted 
IPACT with limited-service scheme to support different class of service in EPON. It 
adopts the gated transmission mechanism provided by the multi-point control protocol 
(MPCP) [7]. Other proposals [8-10] also employed a TDMA-based approach and 
dynamically allocate bandwidth to end users according to their QoS requirements. 
Most of the aforementioned schemes aim to guarantee the bandwidth or delay 
requirements for real-time services. However, the performance of non-real-time 
services is not addressed. Hence, it would be helpful to take the fairness of both 
average packet delay and average packet blocking probability of non-real-time 
services as another performance metric in EPON. Previous studies had demonstrated 
that queue length proportional (QLP) scheme and longest queue first (LQF) scheme 
favor the fairness in packet delay and blocking probability, respectively [11-12]. 
 
 
4 
message polling scheme. It not only reallocated surplus bandwidth to the heavily 
loaded ONUs to improve the under utilized problems in [16] but also provided a QoS 
guarantee to delay sensitive services. However, it did not individually allocate 
bandwidth to each class, and resulted the longest delay to non-delay sensitive services 
if the traffic load was heavy and the ONU did not arrange the transmission well. 
To find another solution to make high bandwidth utilization after the QoS is 
satisfied, some people proposed ”threshold-based” mechanisms referring to queue 
occupancy or number of packets in the ONU [18], [19], [20]. The authors ([18]) 
consider the tradeoff between the bandwidth efficiency and the delay characteristics to 
make the bandwidth be fully utilized while the packet delay and delay variation 
increased. The authors ([19]) take a completed packet and the threshold into account 
and their method achieves a nearly optimal bandwidth utilization. However, the report 
message was not large enough to contain all information about packets’ size, so the 
improvement was still limited. Dynamic credit distributed (D-CRED) based 
mechanism [20] proposed a dynamic queue management for the weighted fair 
allocation to reach a higher efficiency, but the delay variation increases with the 
increasing of traffic load, especially of the low priority traffic. 
 
I.3. Computation-Efficient Algorithms for Dynamic Traffic 
Grooming in Metro-Access Ring Network 
 
In recent years, synchronous optical network (SONET) ring networks have been 
widely deployed for the optical network infrastructure. The progresses of optical 
networks evolve with time; meanwhile, the carried traffic streams surge. The 
transmission capacity of an optical network largely increases because of the 
development and application of wavelength division multiplexing (WDM) 
technologies which allow multiple wavelengths to be delivered in a single fiber at the 
same time [21].  
A traffic stream is normally assigned in one wavelength. However, the required 
bandwidth of a traffic stream, called lower-speed traffic stream, is much smaller than 
the bandwidth capacity of a wavelength. If every lower-speed traffic stream occupies 
an individual wavelength, bandwidth waste is an obvious and serious drawback. In 
order to efficiently utilize the network resources, many lower-speed traffic streams 
can be multiplexed onto a high-speed wavelength by traffic-grooming technique. An 
overview of the traffic-grooming technique and survey of some typical works were 
reported in [22]. 
In the design of traffic-grooming, three issues to be considered: network 
configuration, traffic characteristics, and cost function. For the network configuration 
6 
proposed for minimization of the total cost of electronic equipment. In [26], both nui- 
and bi-directional ring were considered and two kinds of traffic are considered. One 
was static and uniform traffic and the other was static and non-uniform traffic. For 
minimizing number of wavelengths, the greedy heuristic algorithm was employed for 
two kinds of traffic. The author also proposed another heuristic algorithm for static 
and non-uniform traffic according to the same objective. In [26], the ring network was 
considered with static and uniform traffic. The author proposed the heuristic 
algorithm for minimizing number of wavelengths and also considered computational 
complexity. 
Although the ring network has been studied by many researchers, dynamic and 
non-uniform traffic has not considered yet. Therefore, we are motivated to study the 
traffic grooming problem in metro-access ring network with dynamic and 
non-uniform traffic. In the paper, the metro-access ring network has nodes in 
WDM-PON architecture connecting to end-users. We investigate the node 
architecture from the current equipments and propose the node architecture which is 
equipped in metro-access ring network and have the ability of traffic grooming. The 
objective of this work is to effectively reduce the new call blocking rate and maximize 
the utilization efficiency of the wavelength used. 
8 
≈
≈
≈
≈
 
Fig. 2. IPACT-based polling procedure 
 
The interaction between OLT and ONUs is similar to the polling mechanism 
defined by IPACT. As in IPACT, there is no need to synchronize the ONUs to a 
common reference clock. Every ONU executes the same procedure driven by the 
GATE messages sent from OLT. Figure 2 illustrates an example of the polling 
mechanism. In the example, OLT calculates the granted data volume Gij (i=1,…,N, 
j=1,…,3) for the j-th queue of the i-th ONU and then generates the Grant Table at time 
t1. Gij is determined based on the proposed scheduling algorithm. At time t1, the OLT 
sends a GATE message to ONU 1 carrying G11, G12, and G13. The ONU 1 should 
immediately transmit packets from the j-th queue up to G1j after receiving the GATE 
message, and piggybacks a REPORT message notifying OLT the remaining data 
volume of each queue after transmission. In the meantime, OLT further sends a GATE 
message to ONU 2 at time t2 to schedule its transmission. Note that t2 is properly 
chosen to ensure that ONU 2’s packets will arrive at OLT right after receiving ONU 
1’s packets (i.e., time t4) plus a predetermined guard time b (unit: second). As 
illustrated in Fig. 2, the scheduler in OLT always schedule the packet transmissions of 
ONUs at the beginning of the each transmission cycle (i.e., t1, t5) according to the 
information carried by all REPORT messages collected during the previous 
transmission cycle. The transmission cycle is the time interval between adjacent 
GATE messages sent to ONU 1. The length of each transmission cycle is varied with 
time since it depends on the granted data volumes for all N ONUs. 
 
¾ Prediction-based 
In the prediction-based system model, the EPON network still remain the same as 
the one for the non-prediction-based EPON network model, but the scheduler is 
replaced by the prediction-based scheduler, as shown in Figure1. There are still one 
OLT and N ONUs supported in the prediction-based EPON architecture. Also, each 
10 
ii. Scheduling Algorithm 
 
¾ Hybrid EQL-QLP Scheme and Hybrid LQF-QLP Scheme 
The proposed scheduling algorithm is a gated-based scheme, where the scheduler 
only utilizes the information obtained before the scheduling time. The information 
received after scheduling time will be used by the next scheduling operation. The goal 
of the proposed scheduling algorithms is to meet the delay bound of voice service and, 
in addition, to simultaneously maintain the fairness of both packet delay and packet 
blocking probability for the non-real-time data service. The delay bound of voice 
service is defined as 
 max ,d d≤                                                 (1) 
where d  and maxd   are the average delay and the delay bound of voice service, 
respectively. The overall fairness index, F for non-real-time data service is defined as 
 (1 ) ,D BF x I x I= ⋅ + − ⋅                                       (2) 
where x  is a weighting factor ranging form 0 to 1; DI and BI  are the fairness 
indices for average packet delay and average packet blocking probability, respectively. 
The DI and BI  are defined as [13] 
 ( )
2
2
1 1
,
N N
D i i
i i
I D N D
= =
⎡ ⎤ ⎡ ⎤= ×⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦∑ ∑                               (3) 
 ( )2 2, ,
1 1
,
N N
B B i B i
i i
I P N P
= =
⎡ ⎤ ⎡ ⎤= ×⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦∑ ∑                           (4) 
where iD  and ,B iP  are the average packet delay and the average packet 
blocking probability of ONU ,i  respectively. Note that DI , BI , and F are all in the 
range from 0 to 1. The parameters used in the proposed scheduling algorithms are first 
defined and are listed below. 
Assume that the reported and the granted data volumes (in bytes) for the the j-th 
queue of the i-th ONU are denoted as and ,ij ijQ G respectively, where 1,..., ,i N= and 
1,2,3.j =  The resource is first allocated to real-time services to guarantee their delay 
bound. The remaining resource is then fairly allocated to the non-real-time services in 
each ONU. As in IPACT, the aggregated granted data volumes of real-time services 
for each ONU may not exceed an upper bound max ,L  within which, the capacity is 
first allocated to voice services.  Hence, the granted data volumes for voice and 
video services of ONU i, denoted by 1iG  and 2iG , respectively, are given by 
 1 max 1
2 max 1 2
min( , ),
min( , ),
i i
i i i
G L Q
G L G Q
=⎧⎨ = −⎩
                                   (5) 
12 
 ,3
1
.
j
n
k
j
avg Q R n
=
⎛ ⎞= −⎜ ⎟⎝ ⎠∑  (11) 
Then the granted data volumes are given by 
 33 13 23 3
, ,
( , , ,..., )
0, .
i
i a N
Q avg i K
G f R Q Q Q
i K
− ∈⎧= = ⎨ ∉⎩  (12) 
Equation (12) indicates that OLT does not allocate resource to ONUs that have 
queue lengths less than .avg  The allocated resource to each of the remaining ONUs 
is proportional to the difference between its queue length and .avg  
B. Hybrid LQF-QLP Scheme 
Although the EQL method is excellent in balancing the queue sizes of data 
services, it may result in high blocking probabilities for ONUs with long queue 
lengths. This problem could be alleviated by adopting a longest queue first (LQF) 
method to replace EQL. Hence, a hybrid LQF-QLP scheme is further proposed. The 
hybrid LQF-QLP scheme differs than hybrid EQL-QLP scheme when either one of 
the requested volumes is greater than Qth. Under this condition, the LQF method is 
adopted and thus, 3iG  are determined by 
 
3 3
1
3
3 3 13 23 3
1
3
1
13 23 3 3 13 23 3
1
, ,                                                     (13)
, , max{ , ,... } ,          (14)
( , , ,... ), , max{ , ,... } .       
N
i j
j
N
i
i j N thN
j
j
j
N
b N j N th
j
Q Q R
QG R Q R Q Q Q Q
Q
f R Q Q Q Q R Q Q Q Q
=
=
=
=
≤
= × > ≤
> >
∑
∑∑
∑    (15)
⎧⎪⎪⎪⎪⎪⎨⎪⎪⎪⎪⎪⎩
 
In the hybrid LQF-QLP scheme, Eq. (15) is used to replace Eq. (9) defined in the 
hybrid EQL-QLP scheme when the total requested data volume is higher than R and 
the requested data volume of at least one ONU is higher than .thQ  
Define an integer permutation function :[1, ] [1, ],N Nπ → such that 
(1),3 (2),3 ( ),3... NQ Q Qπ π π≥ ≥ ≥ . Note that π  is an index set with descent order of queue 
length which is mapped from the original index. Then the granted data volumes of 
data service queues are defined by 
 
( )
( )
( ),3 13 3
( ),3 ( )
1
( ),3 ( ),3 ( )
1
( , ,..., )
min max ,0 , , 1 ,
min max ,0 , , 2,..., ,
i b N
i th i
i
i th j i
j
G f R Q Q
Q Q R R P i
Q Q R G R P i N
π
π π
π π π
−
=
=
⎧ ⎡ ⎤ ′− + ⋅ =⎣ ⎦⎪⎪= ⎨ ⎡ ⎤ ′− − + ⋅ =⎪ ⎢ ⎥⎪ ⎣ ⎦⎩ ∑
 (16) 
14 
When OLT receives a REPORT message, it will generate the predicted queue 
occupancy for each class of service and store them in RAM. Then, at scheduling time 
t0, the scheduler can use the predicted queue occupancies to fairly assign the resource. 
 
 
iii.  SIMULATION RESULTS 
A. Simulation Environment 
Simulations are conducted to verify the effectiveness of the proposed scheduling 
mechanism. In the simulations, the traffic models presented in [6] are adopted. The 
constant bit rate (CBR) traffic model is chosen to emulate a T1 link carrying voice 
packets. Each voice packet is generated every 125 μs and consists of 24 bytes of data, 
8 bytes of UDP header, 20 bytes of IP header, and 18 bytes of Ethernet header, which 
result in a row data rate of 4.48 Mbps. The self-similar traffic model [14] is used to 
mimic the behavior of video and data services. The parameters used in the simulation 
are summarized in Table 1. 
 
Parameter Description Value 
N Number of ONUs 16 
n Number of queues in each ONU 3 
Ru Line rate of user-to-ONU link 100 Mbps 
RN Line rate between OLT and ONU 1000 Mbps 
Q The buffer size reserved for each type of service 1 Mbytes 
Lmax 
Maximum data volume of real-time service an ONU 
can transmit during one cycle 5000 bytes 
tmax Maximum slot size of real-time traffic 0.04 ms 
b Guard time between adjacent slots 5 μs 
Tmax Maximum cycle time 0.72 ms 
dmax The delay bound of voice service 1.5 ms 
x Waiting factor of overall fairness index 0.5 
Table 1. System parameters used in the simulation 
In the simulations, the maxd  and maxT  are chosen according to the delay bound 
of voice service specified by ITU G.114 as in [6]. Figure 4 demonstrates an example 
illustrating the packet arrivals and departures in ONU i . The ONU i  reports the 
amount of data volumes accumulated during the first cycle to the OLT at the 
beginning of the second cycle. Then, OLT sends a GATE message to the ONU i  
indicating the granted data volume. Generally, the requested data volume of voice 
service reported in second cycle can be completely allowed to transmit in third cycle. 
Hence, the average packet delay of voice service, d , is given by 
16 
   
(a) Hybrid LQF-QLP                        (b) Hybrid QLP-QLP 
 
Fig. 5. Average packet delay of voice service. 
   
(a) packet blocking probability                           (b) packet delay 
 
Fig. 6. Fairness index of data service by adopting hybrid EQL-QLP scheme 
 
   
(a) packet blocking probability                       (b) packet delay 
 
Fig. 7. Fairness index of of data service by adopting hybrid LQF-QLP scheme 
Figures 6(a) and 6(b) show the fairness indices in packet blocking probability and 
in packet delay for data service by adopting hybrid EQL-QLP scheme, respectively. 
Note that 0α =  and 1α =  are equivalent to EQL and QLP scheme, respectively. In 
these two figures, we see the effect while adjusting the constant α  from 0 to 1. It is 
found in Fig. 5(a) that the fairness index of packet blocking probability in EQL 
scheme is higher than that in QLP scheme. It is because EQL scheme allocates more 
resource to heavy-loaded ONUs which results in similar packet blocking probabilities 
18 
Table 2 shows the overall fairness index of the two proposed hybrid schemes (i.e., 
which is defined in Eq. (2) with 0.5x = ). Table 2(a) shows the overall fairness index 
of hybrid EQL-QLP scheme, which is compared with QLP ( 1α = ) and EQL ( 0α = ) 
schemes. It is found that hybrid EQL-QLP with 0.9α =  results in the best overall 
fairness index. Table 2(b) shows the overall fairness index of hybrid LQF-QLP 
scheme, in which 0.7α =  provides the best overall fairness index. 
In general, it can be found in Table 2 that the overall fairness index of the 
proposed hybrid schemes is better than that of QLP, LQF, or EQL scheme. The reason 
is that the proposed hybrid schemes simultaneously consider the packet delay and 
packet blocking probability. It is also found in Table 2 that hybrid LQF-QLP scheme 
performs slightly better than hybrid EQL-QLP scheme because the increment of 
fairness in packet blocking probability is faster than the decrement of fairness in 
packet delay if hybrid LQF-QLP scheme is adopted. 
C. Performance of Fairness 
 
In the simulation, the queue length threshold Qth is chosen to be 0.7thQ =  for the 
Hybrid PLQF-PQLP scheme and 0.9thQ = for the Hybrid PEQL-PQLP scheme, 
respectively, according to the best performance of each algorithm. First of all, we 
want to see the effect of adding a predictor in our scheduler, compare with the case 
that no predictor implemented in it. Figure 8 shows the system throughput of these 
two proposed scheduling schemes. For each scheme, the prediction-based scheme is 
compared with the non-prediction-based scheme. We can see that the system 
throughput in prediction-based schemes is a little bit worse than the 
non-prediction-based scheme. It is because that the prediction results in a prediction 
error. In other words, the moving average prediction method can not perfectly match 
the behavior (variance) of self-similar traffic. 
 
 
Figure 8: The system throughput (Tmax = 0.66ms) 
 
And then, the difference of the average packet queueing delay of voice service 
between the prediction-based scheme and the non-prediction-based scheme is shown 
in Figure 9. The result shows that the average packet queueing delay in 
20 
 
Figure 10: Packet blocking probability fairness index of data service (Tmax = 0.66ms) 
 
Figure 11: Packet delay fairness index of data service (Tmax = 0.66ms) 
According to the IPACT, we know that if the overhead, such as control messages 
and guard times, remain fixed during every cycle, the throughput will increase with 
the maximum cycle time (Tmax) under high-loading conditions. However, the queueing 
delay for the voice service will also increase with Tmax in the meanwhile. As a result, 
with the lower queueing delay as shown in Figure 9, the maximum cycle time can be 
carefully extended to improve the performance of system throughput while the 
increasing queueing delay for the voice service can still satisfy the delay criterion. 
Now we extend the maximum cycle time Tmax from 0.66ms to 2ms, and evaluate 
the performance difference compared with the Tmax = 0.66ms. The simulation results 
are illustrated in Figure 12 and Figure 13. In Figure 12, we can see that for both of the 
proposed prediction-based scheduling algorithms, the average packet queueing delay 
indeed increases with the Tmax, but still maintains lower than the specified delay 
bound (1.5ms). Meanwhile, as the result shown in Figure 13 where the performance 
of system throughput is observed, we can find that by adopting prediction-based 
schemes, the throughput can be improved 7% more than non-prediction-based 
schemes. The reason is that by using prediction-based schemes, the Tmax can be 
extended to a longer value than the non-prediction-based schemes and thus the 
percentage of the overhead, such as control messages and guard, will be smaller. 
Therefore, the data transmission throughput can be greatly improved under 
high-loading conditions. Besides, we can see that the Hybrid (P)LQF-(P)QLP scheme 
22 
II.2. QoS-Promoted Dynamic Bandwidth Allocation (Q-DBA) 
for Ethernet Passive Optical Networks 
 
i. System Model 
A. System Architecture 
An EPON architecture is shown in Fig. 14. It is a point-to-multipoint 
configuration following the multi-point control protocol (MPCP). There are an ( M ) 
OLT (ONUs) with line rate uR  ( ER ) (bps) between OLT (ONU) and each ONU (its 
own end users) to serve downstream (upstream) traffic. The A splitter is used to 
broadcast packets from OLT to all ONUs and each OUN takes its own packets. Each 
OUN transmits packets to OLT bytes by bytes until the end of its timeslot. The guard 
time is used to distinguish packets from the different ONUs. The total upstream 
bandwidth is shared by all ONUs’ real-time and non-real-time packets. A Q-DBA 
scheme processes ONUs’ demands and determines the timeslot as well as the volume 
of bandwidth for ONUs to transmit packets.  
 
  
 Figure 14: The system architecture of EPON 
In ONU 1i i M, ≤ ≤ , three classes of queues, 0 iQ , , 1 iQ , , and 2 iQ ,  , are provided 
to store real-time voice, real-time video, and non-real-time data packets and their 
queue size are denoted as 0 iQ ,| | , 1 iQ ,| | , and 2 iQ ,| | , respectively. The packets 
controller puts them into the different queue depending on their types when packets 
arrive at the ONU, and it drops some type of packets if their queue is full. Also, the 
packets controller drops real-time packets as well if their delay criteria is violated. 
The queue manager takes charge of generating the report message and the 
transmission between OLT and the ONUs, transmits packets to the OLT at its granted 
24 
ii. Q-DBA METHOD 
 
Table 3. THE NOTATIONS OF Q-DBA METHOD 
 
Table 3 defines the notations of QoS-guaranteed dynamic bandwidth allocation 
(Q-DBA) method in this paper. The Q-DBA assumes that ONU 1i i M, ≤ ≤ , sends the 
report message including six kinds of information of queues, 0 iL , , 1 iL , , 2 iL , , dp iL , , 
d iL , , and w iL , , where dp iL ,  and d iL ,  , and w iL ,  are used to ensure the QoS 
guarantee, just like ip  [35] and δ  [36] are used according to the conception of the 
"earliest deadline first" (EDF). For video packets in 1 1iQ i M, , ≤ ≤ ,  at the present 
26 
The allocated bandwidths are individually sent to each ONU by the gate message 
which includes 0 iG , , 1 iG , , and 2 iG , . The gate message tells ONUi  the amount 
bandwidth which it can transmit. As soon as ONUs receive their gate message, they 
prepare to transmit the packets in themselves time slot.  
The Q-DBA method allocates bandwidth in unit of bytes to all ONUs from the 
service of the highest priority to that of the lowest one successively until all the 
bandwidths are used up. In order to guarantee QoS requirements (the Q-DBA 
classifies the packets of all services into six priorities, voice packets, video packets 
with problem of delay constraint, video packets with problem of dropping probability 
constraint, data packets considering waiting bound, video packets, and data packets 
from the highest to the lowest in order) and they are defined as 0 iL , , dp iL , , d iL , , w iL , , 
1 iL , , and 2 iL ,  in order. The voice packets are first allocated the bandwidth and the 
video packets which will be dropped if they are not transmitted at the next timeslot 
are secondly allocated. Next, the Q-DBA continues to allocate the bandwidth to the 
data packets whose waiting times exceed the waiting bound. Data packets do not be 
dropped but the starvation, means the data packets wait for a long time in the queue, 
may occur. To avoid the starvation, the Q-DBA raises the priority of data packets 
(whose waiting bound are violated) higher than the video packets with a non-violating 
delay time. It is due to the video packets which will be dropped have already been 
processed, and the QoS requirement of residual video packets is satisfied. Also, the 
Q-DBA allocates the bandwidth to the unallocated video and data packets in order. 
Finally, the voice and video packets proportionally share the residual bandwidth based 
on their queue occupancy to use up the bandwidth and guarantee QoS in further.  
The Q-DBA method is described in detail as follows:  
 
Step 1: [Bandwidth Allocation to Voice]  
The allocated bandwidth to voice, 0 iG
′
, , is given by  
 
 
0 0
1
 
0 0
0
1
if
elsewhere
M
i i
i
i i
M
i
i
L L B
G L
B
L
, ,
=
′
, ,
,
=
⎧ , ≤ ,⎪⎪⎪= ⎨ × , .⎪⎪⎪⎩
∑
∑
                             (25) 
 
Step 2 : [Bandwidth Allocation to Voice Packets with the second and the third 
priorities]  
28 
 
Step 6 : [Residual Bandwidth Allocation]  
Finally, according to 0 iL , , 1 iL , , and the residual bandwidth, the 
 
0 iG
′′
,  and 1 iG
′′′
,  
are given by  
0      
0 0 1 1 2 2
1
0 1
1
1      
1 0 1 1 2 2
1
0 1
1
( [ ])
( )
( [ ])
( )
M
i
i i i i i i M
i
i i
i
M
i
i i i i i i M
i
i i
i
L
G B G G G G G
L L
L
G B G G G G G
L L
′′ ′ ′ ′′ ′ ′′ ,+
, , , , , ,
=
, ,
=
′′′ ′ ′ ′′ ′ ′′ ,+
, , , , , ,
=
, ,
=
⎧ = − + + + + × ,⎪⎪ +⎪⎪⎨⎪⎪ = − + + + + × .⎪ +⎪⎩
∑ ∑
∑ ∑
            (30) 
 
Step 7 : [Gate Message Generation]  
The granted bandwidths , 0 iG , , 1 iG , , and 2 iG ,  are given by  
 
  
0 0 0
   
1 1 1 1
   
2 2 2 2
i i i
i i i i
i i i i
G G G
G G G G
G G G G
′ ′′
, , ,
′ ′′ ′′′
, , , ,
′ ′′ ′′′
, , , ,
⎧ = + ,⎪ = + + ,⎨⎪ = + + .⎩
                                           (31) 
 
The 0 iG , , 1 iG , , and 2 iG ,  are included in the gate message which is sent by the 
OLT to the ONUs. When the ONUs receive the gate message, they transmit packets 
combining OLT’s grants and queue conditions at that time. If there is some bandwidth 
left at some queues, the left can be reallocated to other queues in the same ONU. It 
not only decreases delay and dropping probability but also uses bandwidth more 
efficiently. 
iii. Simulation Results and Discussions 
A. Simulation Environment 
An event-driven packet-based simulation is developed the performance of the 
proposed Q-DBA and the DBAM [16]. We consider an EPON architecture with 32 
OUNs connected in a tree topology. The length of the fiber between the OLT (each 
ONU) and the splitter is 20 (5) km, and the line rate is 1 Gbps (100 Mbps). The cycle 
time is set to 0.72 ms. Each ONU supports three priority queues with the same 
buffering space of size 1 Mbytes. The guard time separating two consecutive 
transmission windows is set to 1 μ s.  
Three kinds of traffic, voice, video, and data, are considered in the system. The 
voice traffic is transmitted with the highest priority, and is generated by a two-level 
MMDP. To emulate 1T  connection, in a ONU, there are 24 channels in a 1T  link. 
The ONU aggregates the traffic of each channel. During ON state, the generate rate is 
30 
improved 100%. 
 
Figure 15. Average video dropping probability versus system load in EPON 
 
Fig. 16 illustrates the blocking probability of data packets versus system load in 
EPON. The blocking probabilities both in Q-DBA and DBAM are zero when the 
traffic load is less than 0.8. However, when the system load is larger than 0.8, the 
blocking probability in DBAM increases greatly than that in Q-DBA. It is due to that 
the data burst arrival cannot be served within a short time in DBAM and the allocated 
bandwidth is not limited and the data packets which reach the waiting bound would be 
sent early in Q-DBA. It is shown that when the system load is 0.8, the blocking 
probability in Q-DBA is improved 100% whether in case one or case two. 
Fig. 17 illustrates the starvation ratio of data packets versus traffic load in EPON. 
It is shown that when the system load is less than 0.7, the starvation in both Q-DBA 
and DBAM do not occur, but, when the system load is larger than 0.9, the starvation 
occurs due to that the burst arrival of data packets may not be instantly supported as 
both video and data packets arrival rate increases. However, the starvation ratio is still 
60% improved by Q-DBA in case one, and it also 60% improved by Q-DBA in case 
two due to raising the priority of data packets which will reach their waiting bound in 
Q-DBA. Therefore, the starvation in DBAM happens earlier than that in Q-DBA. 
Fig. 18 shows the average voice delay time versus system load in EPON. It can be 
seen that the average voice delay in DBAM increases with the increasing of system 
load and one in Q-DBA does not increase obviously. It is due to the Q-DBA allocates 
total bandwidth to all ONUs by the step of residual bandwidth allocation, and the 
voice packets have sufficient bandwidth to transmit the reported voice packets and 
new arrival voice packets. However, when system load is larger than 0.8, the average 
voice delay in DBAM is less than that in Q-DBA. Since the report message in DBAM 
includes prediction, the requirement can be satisfied as much as possible. Under this 
circumstances, the voice delay in Q-DBA is large than DBAM, but the voice delay 
requirement and the dropping probability are still satisfied. 
32 
 
Figure 18 Average voice delay time versus system load in EPON 
 
 
Figure 19 Average video delay time versus system load in EPON 
 
 
Figure 20 Average data delay time versus system load in EPON 
 
 
Fig. 20 shows the average packet delay time versus system load in EPON. The 
average data delay in case one is less than that in case two due to the less data arrival 
rate. Since the Q-DBA allocates bandwidth based on the requirement of queue 
occupancy and the burst arrival can be transmitted more easily, and thus the delay of 
34 
Fig. 21 illustrates the fairness index of average data delay versus system load in 
EPON. It can be found that the fairness index of average data delay in Q-DBA and 
DBAM is bear to 1. It is due to the Q-DBA consider all ONUs’ condition to allocated 
bandwidth. Furthermore, in DBAM, all ONUs have their maximum window to 
transmit packets according to the SLA. In this way, the fairness index of average data 
delay whether in Q-DBA or in DBAM is close to zero. It also can be found that the 
fairness index of average data delay in case two of DBAM varies greatly because the 
packet arrival rates are not the same, and the maximum window cannot suitably 
support the different traffic load. 
Fig. 22 illustrates the overall fairness index of data packets versus system load in 
EPON. The fairness index of data packets in both Q-DBA and DBAM is close to 1. 
due to the DBAM uses a maximum window to allocate packets according to the SLA, 
and the Q-DBA allocates packets based on the requirement of all ONU. The overall 
fairness index of data packets in Q-DBA decreases with the increasing of traffic load 
when the traffic load is larger than 0.7. Since the data packets in Q-DBA are allocated 
in two different priority, the overall fairness is little small than 1 when the traffic load 
is high. In DBAM, the overall fairness index in case one is independent of different 
system loads. Although the DBAM in case one has a maximum window to allocate 
packets, the burst in high priority cannot be always processed quickly to result 
packets’ blocking and long delay time. 
Fig. 23 shows the system utilization versus system load in EPON. It can be found 
that the bandwidth utilization in Q-DBA is better than that in DBAM. It is because the 
bandwidth in Q-DBA is allocated step by step to difference class rather than set a 
maximum window to each class in advance. In addition, because the dropping 
probability of video packets is high, and the maximum window does not always meet 
the actual traffic condition, the bandwidth utilization in DBAM is limited. It also can 
be found that when system load is in 0.6, the case one of Q-DBA improves the system 
utilization 4.4%, and the case two improves 7.3%. 
 
II.3. Computation-Efficient Algorithms for Dynamic Traffic 
Grooming in Metro-Access Ring Network 
i. SYSTEM MODEL 
A. Network Architecture 
 
The network topology is a WDM metro access ring architecture consisting of of N 
nodes, labeled as 1, 2, …, N counterclockwise. Each node provides several PONs with 
tree topology to building users (BUs). Only one fiber exists between node i and node 
i+1 and is labeled as i, 1 ≤ i ≤ N-1, and the fiber between node N and node 1 is labeled 
36 
C. Source Model  
 The traffic source model is a dynamic and non-uniform. The capacity of a 
wavelength is OC-192. The bandwidth request of a new call, R, is categorized into 
four types: OC-1 (type-1), OC-3 (type-2), OC-12 (type-3), and OC-48 (type-4). The 
probability of the type of the new call request is pk and 
4
1
1k
k
p
=
=∑ . Arrival process of 
the new call requests from each node is Poisson with mean arrival rate λ (1/sec). The 
traffic model is traffic streams from any source and destination (s, d) arrive and leave 
according to Poisson process. The service time is exponentially distributed with mean 
service time 1/μk (sec) for type k traffic. The destination of a traffic stream uniformly 
locates among all the nodes. As a result, the traffic streams will arrive one by one and 
the arrival time of next new call request is not known in advance.  
ii. PROBLEM FORMULATION 
A. Notations 
Table 4 (5) (6) defines the notations (the sets used to define the problem) (the 
variables of the problem formulation). 
 
Notation Definition 
(i, j, k) A lightpath which traverses from node i to node j through wavelength k without optical-electric 
conversion. , {1, 2..., }i j N∈ , i j≠  and 1 k W≤ ≤ . 
(s, d) The node pair represents source node s and destination node d for an end-to-end traffic which 
traverses through a single or multiple lightpaths. , {1, 2..., }s d N∈  and s d≠ . 
l The fiber link between node l and node l+1. {1,2,..., }l N∈ . l = N, if node N to node 1. 
Table 4: The notations of mathematical formulation 
 
 
Set Definition 
B (l) ( ) {( ,  ,  ) |  lightpath ( ,  ,  ) passes through fiber link , ,  .}B l i j k i j k l i j= ∀  
L' (s, d) '( ,  ) {( ,  ,  ) |  lightpath ( ,  ,  ) forms a complete path  to ,  where  is for 
             the first lightpath,  is the last one, and  could be different for various one.}
L s d i j k i j k s d i s
j d k
= =
=  
Table 5: The sets of mathematical formulation
38 
B. Generalized Problem Formulation 
The dynamic traffic grooming is formulated as an integer linear programming problem 
(ILP), where the goal is to maximize the utilization efficiency of the wavelength used. This ILP 
problem is expressed as 
 ,
, 1 ,
'
 
* '
N
i j
i j i j
i j
t
Maximize
C b=≠
∑ ,                             (32) 
subject to three constraints : 
 , ,' ' *i j i jt b C≤ , for ( , )i j∀ ,                           (33) 
 
( ) ( ) ,,
'i j
i j B l
b W
∈
≤∑ , for l∀ ,                             (34) 
 
( ) ( ) ( , , ),
1i j k
i j B l
c
∈
≤∑ , for ,l k∀ ,                           (35) 
 ,'i j
j
b m≤∑ , for i∀ ,                                  (36) 
 ,'i j
i
b m≤∑ , for j∀ ,                                  (37) 
Eq. (33) is the traffic constraint and indicates that the total traffic load from (i, j) 
must be less than the total capacity. Eq. (34) and Eq. (35) are the wavelength 
constraints. Eq. (34) the former expresses the bound imposed by the number of 
wavelengths available while Eq. (35) ensures that no wavelength clash is allowed. Eq. 
(36) and (37) are the transceiver constraints and they ensure that the number of 
lightpaths from node i to node j is less than or equal to the number of transmitters and 
receivers, respectively. 
Since the ILP problem is NP-complete [23] and some time-consuming 
optimization algorithms are not feasible to deal with dynamic traffic model, we 
propose a SA-based method for optimal solution and a heuristic-based method for 
suboptimal solution to solve this problem.
40 
where  
,
, ,
, 1 ,
'
,  '  is an entry of ' ,   or .
* '
N
i j
k i j i j k
i j i j
i j
t
U b b k p q
C b=≠
⎡ ⎤= =⎣ ⎦∑  
y Annealing 
 If the number of iteration at a temperature level reaches Lmax, then the 
temperature will decrease by the decrement rate γ until the temperature reaches the 
final temperature Tmin.  
max min max( ,  ,  ,  )T T Lγ
  
Figure 25. Flowchart of the Simulated Annealing-based Traffic Grooming algorithm 
 
B. Heuristic-based Traffic Grooming Algorithm (HTGA) 
 
The STGA describes the dynamic model as a static model to obtain optimal 
solution according to the snapshot approach. However, the computational complexity 
remains unsolved. Thus, we proposed a heuristic algorithm, called a heuristic-based 
traffic grooming algorithm (HTGA), to reduce the complexity. The heuristic ideas of 
HTGA states are described that traffic grooming or wavelength assigned into a new 
lightpath is performed for new call requests, and traffic grooming and re-arrangement 
are performed when some lightpaths are under-utilized. Therefore the HTGA will 
solve the ILP problem by solving the three subproblems : (a) traffic grooming 
42 
x Step 1.3: Check free wavelengths 
 If there are unused wavelengths from (s, d), the HTGA will establish the new 
lightpath for the new call and go to Step 1.4. Otherwise, the new call is blocked and the 
algorithm ends. 
x  Step 1.4: Sort the utilization 
The algorithm will decreasingly sort the utilization efficiency of the current 
lightpaths according to the value of utilization of lightpaths, and then ends. 
 
When event 2 occurs, the HTGA will work as follows. 
x Step 2.1: Check the lightpath of released call 
 If utilization efficiency of the lightpaths of departure call is small than θ, the 
HTGA will reroute lightpaths and groom traffic onto the other lightpath. Otherwise, the 
algorithm ends. 
 
Figure 26. Flowchart of the HTGA algorithm 
 
iv. SIMULATION RESULTS 
Simulation parameters are introduced first. Then, we evaluate the performance of 
HTGA and STGA in a fixed network configuration. In order to reveal the performance 
of the algorithms with respects to various parameters, three kinds of scenario cases 
were simulated; Scenario 1 is that the number of nodes N is varied, but the other 
parameters are the same, Scenario 2 is that the mean service time 1/μk is varied, but 
44 
 
Figure 27. The utilization efficiency of the used wavelengths in two algorithms 
 
 
Figure 28. Number of rearranged lightpaths per call in two algorithms 
 
Fig. 28 illustrates two curves of the number of rearranged lightpaths for the two 
algorithms. As shown in the figure, the number of rearranged lightpaths in the STGA 
is larger than that in the HTGA. The reason is that, when a call is allowed to enter the 
network or departures from the network, the STGA rearranges all serving calls 
whereas the HTGA just rearranges parts of serving calls. However, the network has to 
take more time to establish the varied lightpaths if lightpaths are rearranged frequently. 
Lower number of rearranged lightpaths is preferable from the system’s point of view. 
In this aspect, the HTGA is more practical than the STGA obviously.  
 
The overall computation complexity of STGA is 3( ( * )* * * )O ln N W N Wχ  and 
the complexity of the HTGA is 2( * )O N W , where χ is the number of current served 
call. The STGA requires very large computation power although it can attain optimal 
solution. However, the HTGA can attain acceptable system utilization close to the 
STGA while its computation complexity is extremely low. Moreover, the HTGA only 
has to change a small portion of lightpaths, compared to the STGA. Thus, the HTGA 
effectively reduces the computation complexity without severely suffering the system 
46 
 
Figure 30. The utilization efficiency of the used wavelengths in Scenario 2 
 
Figure 31. The utilization efficiency of the used wavelengths in Scenario 3 
 
48 
Mag., vol. 40, no2, pp. 74–80, Feb. 2002.  
[15] Y. Yang, J. Nho and B. Ahn, “An enhanced burst-polling based delta dynamic 
bandwidth allocation scheme for QoS over E-PONs,” NRBC’04, pp.31–36, Oct. 
2004.  
[16] Y. Luo and N. Ansari, “Bandwidth allocation for multiservice access on 
EPONs,” IEEE Opt. Commun., vol. 43, pp. s16–s21, Feb. 2005.  
[17] Y. Yang, J. Nho, N. P. Mahalik, K. Kim and B. Ahn, “QoS provisioning in the 
EPON systems with traffic-class burst-polling based delta DBA,” IEICE Trans. 
Commun., vol. 89, pp.419–426, Feb. 2006.  
[18] D. Nikolova, B. V.Houdt and C. Blondia, “Dynamic bandwidth allocation 
algorithms in EPON: a simulation study,” Proc. of SPIE vol. 5285, pp. 369–380, 
2003,  
[19] “Dynamic bandwidth allocation algorithms for Ethernet Passive Optical 
Networks with threshold reporting,” Telecommun. Sys., vol. 28, pp. 31–52, 
2005.  
[20] H. Miyoshi, T. Inoue and K. Yamashita, “QoS-aware dynamic bandwidth 
allocation scheme in gigabit-Ethernet Passive Optical Networks,”  IEEE 
International Commun. Conference, vol. 1, pp. 90–94, June 2004. 
[21] B. Mukherjee, S. Ramamurthy, D. Banerjee, and A. Mukherjee, “Some principles 
for designing a wide-area optical network,” Proc. of IEEE INFOCOM ‘94, vol. 1, 
pp. 110 – 119, June 1994. 
[22] E. Modiano and P. J. Lin, “Traffic grooming in WDM networks,” IEEE Comm. 
Mag., vol. 39, no. 7, pp. 124 – 129, July 2001. 
[23] R. Dutta, and G.. Rouskas, “On optimal traffic grooming in WDM rings,” IEEE 
Journal on Selected Areas in Communications, vol. 20, no. 1, pp. 110 – 121, Jan. 
2002. 
[24] B. Chen, G. Rouskas, and R. Dutta “Traffic grooming in WDM ring networks 
with the min-max objective,” Proceedings of Networking 2004,  pp. 174 – 185, 
May. 2004. 
[25] E. H. Modinao, and A. L. Chiu “Traffic grooming algorithms for reducing 
electronic multiplexing costs in unidirectional WDM ring network,” Journal of 
Lightwave Technology , vol.18, no. 1, pp. 2-12, Jan. 2000. 
[26] X. Zhang, and C. Qiao “An effective and comprehensive solution to traffic 
grooming and wavelength assignment in SONET/WDM rings,” IEEE/ACM 
Transactions Journal on Networking, vol. 8, no. 5, pp. 608-617, Oct. 2000. 
[27] Moon-Gil Yoon “Traffic grooming and light-path routing in WDM ring networks 
with hop-count constraint,” IEEE International Conference on Communications, 
vol. 3, pp. 731-737, June 2001. 
50 
Traffic Grooming in Metro-Access Ring Network（都會擷取環形光網路之低運
算複雜度動態訊務彙集機制）,” M.S. thesis（碩士論文）, Department of 
Communication Engineering, National Chiao Tung University, Taiwan, 2005. 
[41] Chin-Ya Huang（黃琴雅）, “QoS-Promoted Dynamic Bandwidth Allocation 
(Q-DBA) for Ethernet Passive Optical Networks（以太被動光纖網路下改善服
務 品 質 的 動 態 頻 寬 分 配 ） ,” M.S. thesis（ 碩 士 論 文 ） , Department of 
Communication Engineering, National Chiao Tung University, Taiwan, 2006. 
52 
 QoS-Promoted Dynamic Bandwidth Allocation (Q-DBA) for 
Ethernet Passive Optical Networks 
 
In this field, we proposed a Q-DBA method to allocate bandwidth with three 
classes of packets, voice, video, and data based on the priorities from the highest to 
the lowest step by step. Thus, Q-DBA sets the voice packets to be the first priority, 
and the video packets’ priority is changed from the fifth priority into the third priority 
when the video packets’ delay criterion will be violated at the end of next cycle. To 
sustain the video dropping probability, the priority of video packets can be raised to 
the second priority in further. Although data packets do not have any delay constraint, 
they still should not be sacrificed. The Q-DBA also raises the priority of data packets, 
which is from the sixth priority to the fourth priority when the waiting time of data 
packet exceeds the waiting bound. It can avoid the data packets from being in the 
starvation condition. Furthermore, the bandwidth of the fiber link is totally allocated 
to make the system fully utilized.  
The simulation results show that the Q-DBA has a better performance than 
DBAM and the QoS of voice packets are also fully guaranteed. The delay time of 
video packets is almost below the video delay criterion and the dropping probability 
of video packets is also guaranteed. Besides, the data packets are transmitted without 
being in the starvation condition. Above that, the Q-DBA can support most of the 
system load without violating the QoS requirements. In addition, with the 
development of WDM, the proposed Q-DBA method may be adapted to manage the 
resource in the EPONs, and customers can get the most benefits. 
 
 Computation-Efficient Algorithms for Dynamic Traffic 
Grooming in Metro-Access Ring Network 
 
In this field, we want to solve the problem of dynamic traffic grooming and 
wavelength assignment in metro-access ring network. The goal is to effectively 
maximize the utilization efficiency of the wavelength used and reduce the new call 
blocking rate. We present the ILP formulation for the problem. In order to solve this 
problem, we propose STGA algorithm to obtain the optimal solution. However, the 
STGA algorithm is infeasible due to its computation complexity. Alternatively, we 
propose a heuristic algorithm-based HTGA algorithm. Although the HTGA algorithm 
is a suboptimal solution, the computation complexity of the HTGA is much lower 
than that of the STGA.  
From the simulation comparisons between the two algorithms in the same 
environment, we can summarize the pros and cons of the STGA and HTGA algorithm. 
For STGA algorithm, the advantage is that it can attain an optimal solution while the 
