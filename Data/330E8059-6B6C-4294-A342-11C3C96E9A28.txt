來說，主要困難點來自如何達成整個網路
的時間同步[25]；就 CDMA 而言，主要是
傳輸碼的管理機制。然而，分散式的多重
擷取機制，如 CSMA/CA，亦有頻譜利用
率不佳 [26]和尺度性 (Scalability)[1]的問
題。有學者指出，混合使用這幾種多重擷
取機制是較為理想的設計，不過也是設計
上的挑戰[1]。
在以延伸 IEEE 802.11 網路服務範圍為
設計目標的 WMN 中，均使用 CSMA/CA
機制。當使用 CSMA/CA 來進行 Multihop
傳輸時，需避免相鄰連結的同頻干擾
(Co-channel Interference) 現象，所以佈建
此類 WMN 需進行通道配置 (Channel
Assignment)的工作。通道配置的目的在於
利用有限的頻道數目(IEEE 802.11 b/g 只
有 3 個完全不互相干擾的頻道， IEEE
802.11a則有 12個)盡量避免同頻干擾的現
象，以提高整體的資料產出量。
根據無線裝置所使用的無線介面數
目 ， WMN 可 分 為 單 一 無 線 介 面
(Single-Radio) 與 多 重 無 線 介 面
(Multi-Radio)兩種類型。根據每個無線介
面是使用固定頻道還是會在多個可用頻道
中切換， WMN 又可分為單一通道
(Single-channel)與多重通道(Multi-channel)
兩種類型。當 WMN 使用多重無線介面或
者使用單一無線介面但此介面可在多個頻
道中切換時，此 WMN 即是架構在多重通
道的架構上。目前 WMN 系統大都採用多
重無線介面的設計。
擁有多重無線介面的好處是允許節點
同時發送與接收資料(Full Duplex)，而使用
多重通道的好處是對頻譜有較佳的利用
率，可提高整體產出量。如同時使用一個
以上的無線介面，尚可避免掉可能的傳輸
干擾，進一步提高整體產出量。
雖然多重無線介面可提高整體產出
量，但也增加了通道配置工作的複雜度
[27,28]。為了簡化問題，IEEE 802.11s 個
別考慮使用同一通道的節點，將這些節點
用一個 Unified Channel Graph (UCG)來呈
現。因此，使用多重通道的 WMN 將被視
為由多個各自獨立的 UCG 所聯集而成。
WMN 網路層的研究議題
WMN 在網路層有兩項主要的研究議題：
IP 位址組態(Address Configuration)與路由
(Routing)。IP 位址組態方式可分為 Stateful
和 Stateless 兩類。前者假設由某個裝置集
中維護目前的位址配置資訊，並負責分配
唯一的 IP 位址給其他未組態的節點。
Dynamic Host Configuration Protocol
(DHCP)[13]即是常見的 Stateful 位址組態
方式。在 Stateless 的位址組態方法中，節
點允許自行選擇位址，並透過 Duplicate
Address Detection (DAD)[17]的程序驗證
表一：一些現有的 WMN 系統與標準
Product/System
Name Company/Organization
Radio
Technology
Routing
protocol
Roofnet [11] MIT IEEE802.11b/g Srcr (open)
MetroMesh® [12] Tropos IEEE802.11b/g
PWRP
(proprietary)
MeshBoxes [24] LocustWorld IEEE802.11b/g AODV (open)
IEEE 802.11s [36] IEEE IEEE802.11a/b/g HWMP (open)
定針對 WMN 內 Peer-to-Peer 的 Traffic 與
WMN 與有線網路間的 Traffic，分別定義
了 On-Demand 與 Tree-Based 兩種路由方
式。On-Demand 路由是建立在 AODV[4]
的機礎上。Tree-Based 路由則與我們之前
所提出的路由機制[37]類似。不過 IEEE
802.11s 將路由與位址組態視為獨立議
題，我們想做的則是使路由成為位址組態
協定所能達成的功能之ㄧ。
本計畫的目的，在於設計一個具有自
我組態(Self-Configuration)能力的無線網
狀網路。計畫當初規畫的內容分為兩部
分，分別為資料鏈結層的自我組態與網路
層的自我組態。不過在計畫進行過程中，
我們逐漸將研究重心放在網路層的自我組
態，範圍包含了位址空間管理、位址組態、
以及路由機制。當初規劃的資料鏈結層的
自我組態研究，只指出並修改了其它學者
所提出的研究成果的缺點，使得我們提出
的路由機制可以有較佳的資料產出量
(Troughtput)。這樣的內容調整主要是因為
我們又花時間將網路層自我組態的研究成
果研伸到並非以 IEEE 802.11 技術為基礎
的 ZigBee/IEEE 802.15.4 網路中去。因此，
本文以下敘述將以網路層自我組態這部份
的內容為主，資料鏈結層部分的內容為輔。
二.研究目的
在 WMN 網路層的自我組態方面，研
究範圍包含了位址空間管理、位址組態、
以及路由機制。這部分主要的核心工作是
位址組態。
IP 位址組態方式可分為 Stateful 和
Stateless 兩類。前者假設由某個裝置集中
維護目前的位址配置資訊，並負責分配唯
一的 IP 位址給其他未組態的節點。
Dynamic Host Configuration Protocol
(DHCP)[13]即是常見的 Stateful 位址組態
方式。在 Stateless 的位址組態方法中，節
點允許自行選擇位址，並透過 Duplicate
Address Detection (DAD)[17]的程序驗證
其唯一性。
由於目前文獻中並未有針對 WMN
的位址組態研究，這方面我們的研究工作
將會是先驅。我們要求 WMN 的位址組態
協定須滿足下列性質：
位址唯一性(Uniqueness)：WMN 中
任何裝置的通訊介面要求到的位址不能與
其他裝置的通訊介面衝突。
效能(Effiency)：位址組態協定的額外
負擔應該越小越好。例如，要確保位址唯
一性時，不應以全域廣播為手段來達成。
強固性(Robutness)：此協定須能在裝
置中途退出、加入、關機、斷線、移動時
仍能運作正常。
位 址 空 間 利 用 率 (Space
Utilization)：此協定須能有效利用位址空
間，不會有空間漏洞(Space Leakage)。
網 際 網 路 連 結 性 (Internet
Connectivity)：此協定分配之位址應與網
際網路的位址分配相容，即 WMN 中的裝
置可以所配置到的位址與網際網路上其他
主機通訊。
在路由功能(Routing)方面，網際網路
上的位址階層(Address Hierarchy)特性使
得位址本身具有路由資訊，然而傳統
MANET 的研究視位址組態與路由為獨立
議題。我們認為既然已經明瞭 WMN 中的
Traffic 特性，應該可以在位址組態時即將
路由功能考慮進去。這項特性已在 IEEE
802.15.4/ZigBee 的網路設計中顯示出來。
在 IEEE 802.15.4/ZigBee 的網路中，節點
[18]。此方法由 MANET 中動態選出的某
個節點負責維護位址組態資訊，包含已分
配的 IP 位址與對應的 MAC 位址以及位址
的使用週期。此節點定期 Flood 此份組態
資訊給網路中所有的節點。已組態完成的
節點須回覆確認收到的訊息。未組態的節
點則必須等到收到此份組態資訊後才能提
出位址組態的請求訊息。若未組態的節點
在一定時間內未收到此份組態資訊，則它
假設與維護組態資訊節點間的連線已斷
裂，於是會自己成為新的組態資訊維護節
點。
MANETconf [19] 是另一個 Stateful
的位址組態機制。它假設每個已進行位址
組態的主機皆會維護一份尚未分配出去的
IP 位址列表。當未組態的節點要求 IP 位
址時，會向其已組態位址的鄰居尋求幫
助。鄰居節點則挑選一個尚未分配的 IP 位
址，並向所有其他已組態的主機發出訊
息，確認此位址尚未被分配出去也並未被
其他節點挑選出來等待確認，就可將此位
址配置給未組態的節點。此方法實際上依
賴一個分散式互斥存取協定 (Distributed
Mutual Exclusion Protocol)來保證配置 IP
位址的唯一性。當執行此協定的訊息可能
會遺失時，此機制的正確性即遭破壞。
在 ZigBee 樹狀網路[21]中，ZigBee
裝置必須向鄰近的 ZigBee Router 取得網
路位址並加入 ZigBee 網路中。此取得的網
路位址即代表新加入的裝置在 ZigBee 網
路中的位置，亦即 ZigBee 網路中的其他節
點可以不用路由表便可計算得出到此裝置
的封包傳送路徑。因此，ZigBee 網路中的
位址組態設計即具有路由功能。不過這樣
做需付出的代價是位址空間分配是固定式
的，無法彈性調配，而在某些情況下會導
致位址空間的浪費。
在WMN的路由協定方面，因為Mesh
Router 與傳統 MANET 擁有一些共同的特
性，所以很多現有的系統將 MANET 的路
由機制用於無線網狀網路的無線骨幹上。
例如 Firetide Networks 使用 Reverse-Path
Forwarding (TBRPF)協定 [8]；Microsoft
Research 實驗性質的網狀網路[9,10]是建
立在 Dynamic Source Routing (DSR)[3]的
基礎上；另外還有 LocustWorld [24]的
MeshBoxes 以及其他業者的產品使用
AODV 協定[4]。
傳統 Multi-hop 路由協定評估路徑優
劣的標準不外乎 Hop-count, Lifetime, 或
電源耗用情形。Microsoft Research 的研究
人員曾針對擁有多個無線介面的無線網狀
網路提出新的路由選擇規則[9]。此協定建
立在 DSR[3]的基礎上，但在選擇路徑時優
先選擇期望傳遞時間最短的路徑，以提高
網路產出量。每個路徑期望傳遞時間的預
測則是以該路徑封包遺失率與連結頻寬求
得。Hsiao 等人[20]則提出應以負載分散作
為選擇路徑的準則。
Tropos 的 MetroMesh 系 統 使 用
Predictive Wireless Routing Protocol
(PWRP)作為路由協定。PWRP 以傳輸的產
出量來作為選擇路徑的依據，據稱效能是
其他 WMN 系統的兩倍以上，而且同時擁
有低傳輸延遲的特性。Tropos 公司指出
PWRP 同時擁有尺度性(Scalability)良好的
性質，可以支援到上千個的 Mesh Client。
不過由於 PWRP 是未公開的設計，我們無
法一探其設計特性並具體評估其性能。
Hyacinth [6] 為每個 WNM 中的裝置
找到一條至網際網路的資料傳送路徑。這
些路徑集合起來成為一個以 Gateway
Mesh Router 為根節點的樹。為了避免形成
迴 圈 ， Hyacinth 使 用 了 類 似 802.1d
我們接著研讀了文獻中 MANET 相
關的位址組態協定。在 MANET 環境中，
由於網路拓樸邏輯動態變化，Stateless 的
位址組態方式是較為適當的設計。不過這
種方式在執行 DAD 程序時的成本很高，
並且網路合併／分割時的處理也很複雜
[7]。在 WNM 中，由於 Mesh Router 的移
動性不高，同時也連接有線的骨幹網路，
使用 Stateful 的位址組態方式似乎是可行
的策略。MANET 與 WMN 在位址組態的
另一個差異，是 WMN 要求節點必須配置
IP 位址，因為 WMN 會與網際網路相連
接，而 MANET 則無此限制，每個節點所
配置的位址（或邏輯編號）只要滿足在
MANET 中的唯一性即可。
接下來我們對 IEEE 802.11s 的草案
標準與目前實際運作的 WMN 系統進行瞭
解。目前實際運作的 WMN 多採用以下做
法進行位址組態。每一個 Mesh Router 皆
為 DHCP 伺服器，可配置私有 IP 位址給
與其連接的 Mesh Client，而以 NAT (Net
Address Translation)技術讓配置私有 IP 位
址的 Mesh Client 與網際網路上的其他裝
置通訊。這種做法節省了公開 IP 位址空間
(Address Space)的使用。不過在某些應用
中，Mesh Client 須以公開的 IP 位址與網
際網路上的其他裝置通訊，上述做法顯然
無法滿足這類應用的要求。
我們瞭解到使用 Stateful 的位址組態
方式還要考慮位址空間的管理問題。如果
整個 WMN 由單一 DHCP 伺服器分配所有
可分配 IP 位址，位址空間的管理較為單
純。當使用多個 DHCP 伺服器時，有限的
可用位址空間如何分割使用，是個必須解
決的議題。
經過上述過程，我們將位址組態的研
究重點放在將原本使用廣播 (Broadcast)
方式傳送訊息的 DHCP 協定延伸到 WMN
中。DHCP 客戶端由於沒有任何關於
DHCP 伺服器的資訊，因此是以本地端廣
播 (Local Broadcast) 的方式發出請求訊
息給伺服器。在 WMN 中，DHCP 客戶端
（在此為 Mesh Router 或 Mesh Client）和
DHCP 伺服器並不在同一廣播區域中
(Broadcast Domain)，因此 DHCP 客戶端以
廣播方式所發出的請求訊息，並不能使
DHCP 伺服器收到。我們對此問題考慮了
數種解決方案：
1. 每個 Mesh Router/Client 均轉發
（廣播）收到的 DHCP 請求訊息，使得
WMN 形成一個大型的廣播區域。Mesh
Router/Client 在 WMN 中所扮演的角色就
如 同 區 域 網 路 中 的 信 號 增 益 器
(Repeater)。此種方法將無可避免地產生廣
播風暴 [14]，使得網路的整體效能下降。
這是屬於實體層 (Physical Layer) 的解決
方案。
2. Mesh Router/Client 根據訊框的
MAC 位址選擇性地轉發收到的 DHCP 請
求訊息，如同區域網路中的橋接器
(Bridge) 所扮演的角色。WMN 雖仍形成
一個大型的廣播區域，但對網路整體效能
的影響較第 1 種方法為輕。此種方法的缺
點是 Mesh Router/Client 選擇轉發訊息的
規則無法如橋接器般單純以訊框 (Frame)
DHCP DISCOVER
(giaddr = n.1,chaddr=z)
DHCP Server BOOTP RelayAgent DHCP Client
DHCP DISCOVER
(giaddr = 0,chaddr= z)
MAC Addr.= z
DHCP OFFER DHCP OFFER
DHCP REQUEST
(giaddr = 0,chaddr= z)
DHCP REQUEST
(giaddr = n.1,chaddr= z)
DHCP ACK (n.2) DHCP ACK (n.2)
IP Addr. = n.1IP Addr.= m.1
圖二: BOOTP Relay Agent 之運作
機制，如此將有助於簡化 Mesh Client 的設
計，且加速無線網狀網路的普及時程。
利用樹狀路由結構傳送封包並不能
保證是最短傳送路徑，不過由於 WMN 中
的節點收到／送出的通訊封包大部分將會
是來自／至網際網路，樹狀路由結構正好
反映出這樣的通訊需求。
當 WMN 節點具備多重網路介面
時，我們要求每一介面均具備獨立的位
址，且各自建立到達有線骨幹網路的路由
路徑。如此一來，每個節點可能擁有多個
到達有線骨幹網路的路由路徑。
WMN 底層的頻道配置機制並不保證
對每個頻道所建立的 UCG 均可連通所有
節點。因此，有可能發生某個節點的某個
介面在它所配置的頻道送出的位址組態訊
息無法送至DHCP伺服器而導致無法獲得
位址組態。為了避免這個問題的發生，我
們讓節點在它的某個介面成功收到 DHCP
伺服器所送出的 DHCP Offer 訊息時，會
為位於同一節點的其他介面代為要求位
址。如果其他介面可自行使用所配置的頻
道成功聯繫上DHCP伺服器並獲得位址組
態，則向伺服器歸還此代為要求的位址。
如果其他介面因頻道配置不當的原因無法
自行獲得位址組態，則可直接使用此代為
要求的位址。在此情形下，兩個介面到達
DHCP 伺服器的路由路徑完全相同。
另外，在建立路由路徑的過程中，如
果個別考慮每個連結的成本（如 Airtime
Cost），或者固定由接收到資料封包的無線
介面再度轉發至路由路徑的下一個節點，
則可能選取到會產生頻道競爭或傳輸碰撞
的連續兩條連結成為路徑的一部份。要克
服這個問題，我們選擇很簡單的頻道輪替
(Channel Alternation)原則。即某節點若由
某個無線介面接收到資料封包，則經由其
他的介面轉送至下一個節點。
我們使用 Qualnet 模擬器，分別在單
一頻道與多重頻道環境下探討我們所提出
機制的效能。使用單一頻道時除 GMR 外
總共使用 16個節點，其網路拓樸(Topology)
如圖四所示。
GMR
Node 2 Node 3
Node 4 Node 5
Node 6
Node 7
Node 8 Node 9 Node 10
Node 11 Node 12 Node 13
Node 14
Node 16
Node 15
Wireless link
圖四: 單一頻道中的網路拓樸
我們使用 IEEE 802.11a 作為實體層
傳輸協定。IEEE 802a 支援多重傳輸速率，
節點間的傳輸速率會隨著節點間的訊號強
弱（在模擬器中的影響因素是訊號傳遞距
離）而改變。因此圖四中並非每個無線連
結都使用相同傳輸速率。我們用 RA-OLSR
的 Airtime Link Metric 來計算連結的成
本，讓每個節點找尋到 GMR 的最佳傳輸
路徑，其結果如圖五所示。
GMR
Node 2 Node 3
Node 4 Node 5
Node 6
Node 7
Node 8 Node 9 Node 10
Node 11 Node 12 Node 13
Node 14
Node 16
Node 15
Wireless link
圖五: HMWP 之以 GMR 為樹根的樹狀節構
圖九: 多頻道環境下 Traffic 送至 GMR 的資料產出
量
我們測試了節點往 GMR 傳送 CBR
Traffic 的效能。其實驗環境與第一個實驗
相同。圖九顯示了實驗所得的結果。可以
看到在此情況下，我們方法的產出量平均
比 HWMP 高百分之十四左右，比 ADOV
多百分之十七左右，比 Bellman-ford 多百
分之三十左右。這是因為我們使用了頻道
輪替規則。
我們以圖八中節點 5 到 GMR 的路徑
為例。AODV 會選擇跳躍次數最少的路
徑，所以路徑是為節點 5節點 3GMR。
HWMP 會以 Airtime Link Metric 選擇路
徑，我們在每個節點之間傳送測試封包，
取得每個節點之間的空中時間花費，得到
的結果也是節點 5節點 3GMR。我們
的方法為接受與傳送資料使用不同的頻
道，所以我們的方法會選取節點 5節點
3節點 1GMR。雖然此路徑有較多的跳
躍次數，但是節點 1 接收與傳送的頻道不
同，所以節點 1 可以同時進行接收與傳送
資料的動作而不會有頻道競爭或傳輸衝撞
產生。反觀 AODV 與 HWMP 所選的路徑
在節點 3 中不能同時進行接收與傳送資料
的動作。所以我們的方法可以有效提高資
料產出量。
另外，我們在研究過程發現到 IEEE
802.15.4/ZigBee 網 路 位 址 組 態 機 制
Distributed Address Assignment Mechanism
(DAAM)也支援樹狀路由結構並具有路由
功能，不過其位址空間利用率較差。因此
我們便嘗試在 IEEE 802.15.4/ZigBee 網路
上實現我們的 WMN 位址組態與路由機
制，並與 DAAM 做比較。最後我們總共
提出了三個可能的位址組態機制：
 將前述 WMN 位址組態與路由機制
直接套用的作法。ZigBee 網路中的
ZigBee Coordinator 扮 演 DHCP
Server 的角色，其餘 ZigBee Router
扮演 BOOTP Relay Agent 的角色。
 調適性 (Adaptive)作法：預設用
DAAM，當 DAAM 分配位址無法
配置給新加入節點時，才改用第一
種作法進行位址組態。
 區塊式配置：配置給每個加入的
ZigBee Router 一個區塊的位址，這
樣當 ZigBee End Device 加入時，可
以直接向鄰近的 ZigBee Router 要
求位址組態，而不必將請求訊息送
至 ZigBee Coordinator。
經過模擬實驗結果發現，就位址空間
利用率而言，在位址空間尚未飽和之前，
前兩種方式均高於區塊式配置，而區塊式
配置又高於 ZigBee 原先的 DAAM。就路
由表大小而言，以 DAAM 最佳，可以完
全不用任何路由表資訊，其次為調適性作
法與區塊式配置，而以第一種作法為最
差。最壞的狀況下，第一層節點的路由表
中需要的資訊可以高達到網路節點數目的
四分之ㄧ。
IEEE Infocom 2002, June 2002.
[20] P. H. Hsiao, A. Hwang, H. T. Kung, and D. Vlah, “Load-balancing routing for wireless access
networks,”Proc. of Infocom 2001.
[21] Y. C. Tseng and M.S. Pan, “Quick Convergecast in ZigBee/IEEE 802.15.4 Tree-Based Wireless Sensor
Networks”, ACM Int’l Workshop on Mobility Management and Wireless Access, 2006.
[22] ZigBee Alliance, Network Specification, Version 1.0[r13], Dec. 2006.
[23] 蔡威霆, 嚴力行, 王俊鑫, “樹狀 ZigBee 無線感測網路的位址配置協定”, 第十三屆行動計算研討
會, 民 96 年三月.（本計劃成果）
[24] LocustWorld Inc., http://www.locustworld.com/.
[25] L. Huang and T.-H. Lai, “On the scalability of IEEE 802.11 ad hoc networks,”Proc. MobiHoc,
Switzerland, 2002.
[26] A. Acharya, A. Misra, S. Bansal, “High performance architecture for IP-based multihop 802.11
networks,”IEEE Wireless Networks, vol. 10, no. 5, pp. 22-28, 2003.
[27] Ashish Raniwala, Kartik Gopalan, and Tzi-cker Chiueh, “Centralized Channel Assignment and Routing 
Algorithms for Multi-Channel Wireless Mesh Networks,” Mobile Computing and Communications
Review, vol. 8, no. 2, pp. 50-65, Apr. 2004.
[28] Ashish Raniwala and Tzi-cker Chiueh, “Architecture and Algorithms for an IEEE 802.11-Based
Multi-Channel Wireless Mesh Network,” Proc. Infocom, 2005.
[29] A. Nasipuri, J. Zhuang, and S. R. Das, “A multichannel CSMA MAC protocol for multihop wireless
networks,”in Proc. IEEE WCNC, Sep. 1999.
[30] A. Nasipuri, and S. R. Das, “Multichannel CSMA with signal power-based channel selection for
multihop wireless networks,”in IEEE VTC, Sep. 2000.
[31] N. Jain, S. R. Das, and A. Nasipuri,“A multichannel CSMA MAC protocol with receiver-based channel
selection for multihop wireless networks,”in IEEE Int’l Conf. on Computer Communications and
Networks , Oct. 2001.
[32] V. Bahl, A. Adya, J. Padhye, A. Wolman, “Reconsidering the wireless LAN platform with multiple
radios,”FDNA Workshop in SIGCOMM 2003.
[33] Shih-Lin Wu, Chih-Yu Lin, Yu-Chee Tseng, and Jang-Ping Sheu, “A new multi-channel MAC protocol
with on-demand channel assignment for multi-hop mobile ad hoc networks,”I-SPAN, 2000, pp.
232-237.
[34] W.-C. Hung, K. L. E. Law, and A. Leon-Garcia, “A dynamic multi-channel MAC for ad hoc LAN,”in
21st Biennial Symp. on Communications, June 2002, pp. 31-35.
[35] Michael Bahr, “Proposed routing for IEEE 802.11s WLAN mesh networks,”Proc. WICON, 2006.
[36] IEEE,“Draft amendment: ESS mesh networking,”IEEE P802.11s Draft 1.00, Nov. 2006.
[37] Li-Hsing Yen and Chih-Syuan Jian, “Mobile IP extension to ad hoc wireless networks,”Journal of
Internet Technology, Vol. 8, No. 1, pp. 109-119, Jan. 2007.
[38] Li-Hsing Yen and Wei-Ting Tsai,“Flexible address configurations for tree-based ZigBee/IEEE 802.15.4
wireless networks,”The 22nd IEEE Int'l Conf. on Advanced Information Networking and Applications
計畫成果自評
本計畫成果已有一部份（無線網狀網路中的位址分配與路由協定）發表於第三屆無線隨
意及感測網路研討會[39]。至於 ZigBee 無線感測網路的位址配置協定方面的工作，除
發表在國內的第十三屆行動計算研討會[23]，也在第 22 屆的 AINA 國際研討會發表
[38]。我們已經加強了這部份的內容，修改後的版本目前已投稿到國際期刊審稿中。總
結而言，此研究計畫只有在網路層這部分的成果算是符合原先規劃的，原先規劃在資料
鏈結層的自我組態機制（頻道配置）最後並沒有成果產出。這部份除了自我努力不夠之
外，計畫主持人個人轉換工作環境所造成研究人力與經驗傳承上的斷層亦是主要的原
因。
此研究成果具有一定之應用價值，我們在投稿到國際期刊審稿的版本亦加強了效能部分
的理論分析，使其更具有學術價值。在申請專利方面，目前評估並不適合。除此之外，
此研究計畫的經費支持了四位碩士班學生完成碩士論文，謹此致謝。
於West Chester University的 Zhen Jiang教授。我也見到了國內交通大學資工系曾煜棋教
授與淡江大學張志勇教授所指導的博士班學生，他們在這次會議分別有現場展示與論文
報告的任務。
此次會議的最佳論文獎頒給了加州理工學院的研究團隊。他們的論文題目是
Opportunistic Source Coding for Data Gathering in Wireless Sensor Networks。主要是在無線
感測網路中應用 Network Coding與 Lempel-Ziv資料壓縮方法以降低資料傳輸量，並進而
達到省電的目的。Network Coding是這幾年很熱門的研究題目，這次除了獲得最佳論文
獎這篇以外，也有好幾篇論文應用了 Network Coding的技術。我們幾個對 Network Coding
還不很熟悉的幾位與會者，也趁隙交換了彼此對此技術內容與應用遠景的瞭解。
我個人覺得這次會議中讓有趣的研究，是同被列入最佳論文候選者但未獲獎的 On
Intelligent Mobile Target Detection in a Mobile Sensor Network這篇論文。論文題目看似無
奇，作者卻是用“貓捉老鼠”的例子來探討在無線感測網路中偵測者的最佳移動策略與被
偵測者的最佳逃避法則。透過模擬實驗的動畫展示，全場觀眾彷彿一起欣賞了一部“貓捉
老鼠”的卡通動畫片。事實上他們的研究很紮實深入，但活潑有趣的簡報過程更令人印象
深刻。這也是光研讀論文而未親臨現場所無法感受到的經驗。
總而言之，這次與會的過程雖然曲折，收穫卻是豐富的。親眼見到全世界同一領域
的其他學者大膽的創意和紮實的成果呈現，也激起了個人在這個領域繼續鑽研的動力。
我期許自己未來還要繼續參與同樣類型的會議。
nodes. In this paper, we are interested in these two metrics:
• The survivor function Pr{κ ≥ k}, i.e., the probability
that a graph is k-connected.
• The expected connectivity, i.e., the mean of the con-
nectivity computed over all the possible graph in-
stances.
Our contribution is an analytical framework for evaluating
how the key ring size K and the key pool size P influence
the above two metrics. In particular, we provide close for-
mulae for the two metrics that depend on K and P . To
the best of our knowledge, we are the first to address se-
cure k-connectivity of WSNs using the random key pre-
distribution scheme, which is widely adopted in the liter-
ature. Finally, simulations results confirm our analytical
findings.
The rest of this paper is organized as follows. Section 2
introduces the reference model. Section 3 discusses our
analytic results. Simulation results are given in Section 4.
Section 5 discusses related work. Finally, some concluding
remarks are reported in Section 6.
2. The reference model
We begin by describing Eschenauer et al.’s random key
pre-distribution scheme [7]. In this scheme, each sensor is
pre-assigned a key ring of K secret keys randomly drawn
from a common pool of P keys. The sensor nodes are
then randomly deployed in the field. Two sensors share a
secure communication link if they lie within each other’s
communication range and if they share at least a common
pre-assigned key. A fundamental challenge is to choose K
and P such that the network is connected with secure links
alone.
The underlying theory of this scheme is best studied
from two perspectives – from a random graphical perspec-
tive, and from a combinatorial perspective. A random graph
G(n, ps) is a graph of n vertices (sensor nodes) for which
the probability that an edge (a secure link) exists between
any two vertices is independently determined by a coin flip
of probability ps [2]. If ps is zero, then the graph is dis-
connected, and if ps is one, the graph is fully connected, so
there must exist a certain value of ps such that the graph is
almost surely connected. For a graph that is connected with
probability Pc, Erdo¨s et al. [6] show that
ps =
lnn− ln(− lnPc)
n
(1)
From a combinatorial viewpoint, the probability that any
two nodes share at least one key is given by
ps = 1−
(
P−K
K
)(
P
K
) (2)
Combining Equation 1 and Equation 2, and fixing n and the
intended Pc, we can determine P fromK, which is usually
fixed by hardware contraints.
However, the random graph model used by Eschenauer
et al. does not capture the real nature of a WSN, in par-
ticular, because the model does not take into account the
distance metric between each pair of nodes. A model that
has been proved to be more appropriate is the kryptograph
model, introduced by Di Pietro et al. [5]. In the following,
we give the definition of a random geometric graph (also
called unit disk graph), and then the definition of a krypto-
graph.
Definition 1 (Penrose [12]) A random geometric graph
G(Vn; r) is an undirected graph with vertex set Vn uni-
formly distributed in a d-dimensional unit cube, and with
undirected edges connecting all the pairs vi, vj ∈ Vn that
satisfy Lp(vi, vj) ≤ r, where Lp is a Lebesgue metric.
Note: Lebesgue metric can be thought of as a “universal”
metric [3]. Both the Euclidean distance and the toroidal
distance are Lebesgue metrics.
Definition 2 A kryptograph G(Vn; r, ps) is a subgraph of
a random geometric graph G(Vn; r), with edge set E =
{e|e ∈ G(Vn; r); Both ends of e share at least a key, sub-
jected to a probability of ps}.
It is important to note that the notion of a k-connected kryp-
tograph, and the notion of a securely k-connected random
geometric graph are equivalent. We will use these defini-
tions to derive the k-connectivity properties of kryptographs
in the next section.
3. k-Connectivity of kryptographs
In the following, we will study these two metrics: (1)
the survivor function Pr{connectivity ≥ k}; and (2) the
expected connectivity.
3.1. Survivor function Pr{connectivity ≥ k}
The problem is formulated as such: given the key ring
size K, what should the key pool size P be to achieve k-
connectivity? We attack the problem by applying Theo-
rem 1, which is in turn based on Theorem 2. Although both
of these theorems are originally formulated for random ge-
ometric graphs, we will prove in Proposition 1 that they are
also applicable to kryptographs. Table 1 summarizes the
notation used in this paper.
Theorem 1 (Bettstetter [1]) For n 1,
Pr{G(Vn; r) is k-connected} ≈ Pr{dmin ≥ k}
Proposition 1 If given α ∈ R, it is possible to find a se-
quence (rn)n≥1 satisfying Equation 7 for G(Vn; r), then
for G(Vn; r, ps), given β ∈ R, it is also possible to find a
sequence satisfying
lim
n→∞E (k, n, rn) = e
−β
Proof. Following Penrose, we replace Vn by a Poisson
processPn of rate n on the unit cube C. Furthermore, for
each value of k, we denote the corresponding α by αk. By
the definition of E (k, n, r),
E (k, n, r) = n
∫
C
(
N∑
i=k
e−nvr(x)
[nvr(x)]i
i!
(
i
k
)
pksq
i−k
s
)
dx
= pksq
−k
s
N∑
i=k
(
i
k
)
qisn
∫
C
(
e−nvr(x)
[nvr(x)]i
i!
)
dx
Taking limit on both sides,
lim
n→∞E (k, n, r) = p
k
sq
−k
s
N∑
i=k
(
i
k
)
qise
−αi
Since the RHS of the above equation is a positive linear
combination of e−αi , there must exist β ∈ R such that the
RHS equals e−β . 
3.2. Expected connectivity
The expected connectivity can be expressed as:
E[κ] =
N∑
k=1
kPr{κ = k}
The problem reduces to determining Pr{κ = k}, i.e. the
probability of getting a graph with connectivity that is ex-
actly k. Theorem 2 and Proposition 1 imply that provided
n→∞, as r reaches the (k + 1)-nearest neighbor distance
ρ(Vn; δ ≥ k+1),G(Vn; r, ps) becomes (k+1)-connected.
During the time before r reaches ρ(Vn; δ ≥ k+1) and after
r leaves ρ(Vn; δ ≥ k), G(Vn; r, ps) remains k-connected.
During this time, there are probably n, n − 1, ..., 1 nodes
with degree k, while the rest of the nodes have a degree of
at least k + 1. Let xk = Pr{d = k} and yk+1 = Pr{d ≥
k + 1}, then
Pr{κ = k}
= xnk +
(
n
n− 1
)
xn−1k yk+1 + ...+
(
n
1
)
xky
n−1
k+1
= (xk + yk+1)n − ynk+1
Therefore,
E[κ] =
N∑
k=1
k[(Pr{d = k}+Pr{d ≥ k})n−Pr{d ≥ k}n]
(9)
4. Simulation results
Our simulations are performed using Mathematica∗,
with the following parameters: n = 100, n′ = 20,
K = 4†, A = 1, r =
√
(n′ + 1)/(npi). Figure 1 to 6
compare the simulated and theoretical survivor functions
Pr{connectivity ≥ k} for P ∈ {4, 10, 15, 20, 25, 30}. Note
that when P = 4 = K, every pair of nodes share all keys –
this degenerate case is equivalent to using a network-wide
key. For each case, 50 network topologies are randomly
generated and the connectivities of these topologies are cal-
culated using toroidal distances.
Note that the root mean square errors (RMSEs) of the
predictions using Theorem 1, and the RMSEs of our pre-
dictions using Theorem 3 are mostly in the same order of
magnitude. This reinforces the validity of Theorem 3 for
kryptographs.
15 20 25 30
P
0.2
0.4
0.6
0.8
1
Pr8connectivity ³ k<
k=6
k=5
k=4
k=3
k=2
Figure 7. Pr{connectivity ≥ k} vs P
Figure 7 plots Pr{connectivity ≥ k} as a function of P .
As an example of the usefulness of this plot, say a network
is required to have a connectivity of 4, then P should at
most be 27 where Pr{connectivity ≥ 4} is slightly larger
than 0.5. At P = 27, the expected connectivity is 3.53
according to Equation 9.
Table 2. Expected connectivities E[κ] from
simulation and from Equation 9.
P =
4 10 15 20 25 30
E[κ] (simulation) 11.60 10.48 7.48 5.24 3.66 3.06
E[κ] (Eq. 9) 11.40 10.07 7.36 5.34 3.96 2.99
Table 2 compares the average connectivities obtained
from simulations and the expected connectivities calculated
from Equation 9. In rounded figures, these estimations are
nearly perfect.
∗Mathematica finds the vertex connectivity of graph by first calculat-
ing the maximum flows between every two vertices, and then taking the
minimum of these maximum flows.
†If the cipher is Skipjack, four pairwise keys after expansion cost
38×4=152 bytes of storage, or a reasonable 3.7% of a 4 KB RAM [10].
nectivity (APC), defined as the average connectivity among
all pairs of nodes in the network [15]. The problem with this
metric is that an APC of a topology might not be the same as
the APC of another topology, so it makes more sense to cal-
culate the average APC. The real problem is that Sun et al.
estimate the APC using the expectation of the upperbound
of the connectivity between any node pair, when there is
still no theoretical basis for such an estimation.
6. Conclusion
We model WSNs that implement the random key pre-
distribution scheme as “kryptographs”. Based on this defi-
nition, we successfully quantify the k-connectivity of kryp-
tographs, by extending some relevant theorems in random
geometric graphs to kryptographs. In particular, we derive
analytical formulae that describe the asymptotic probabil-
ity of k-connectivity, as well as the expected k-connectivity
of kryptographs. Our theoretical findings are supported by
simulation results. A practical application of our results is
determining the key pool size that provides, on average, a
certain k-connectivity guarantee, for a given key ring size
that usually represents the hardware constraint. Finally, we
are currently further refining our model.
References
[1] C. Bettstetter. On the minimum node degree and connectiv-
ity of a wireless multihop network. In MobiHoc ’02: Pro-
ceedings of the 3rd ACM international symposium on Mo-
bile ad hoc networking & computing, pages 80–91. ACM
Press, 2002.
[2] B. Bolloba´s. Random Graphs. Academic Press Inc., 1985.
[3] M. Capinski and P. E. Kopp. Measure, Integral and Proba-
bility. Springer-Verlag, 2nd edition, 2004.
[4] R. Di Pietro, L. Mancini, A. Mei, A. Panconesi, and J. Rad-
hakrishnan. Connectivity properties of secure wireless sen-
sor networks. In 2nd ACM workshop on Security of ad hoc
and sensor networks, pages 53–58. ACM Press, 2004.
[5] R. Di Pietro, L. V. Mancini, A. Mei, A. Panconesi, and
J. Radhakrishnan. How to design connected sensor networks
that are provably secure. In Proceedings of the 2nd IEEE In-
ternational Conference on Security and Privacy for Emerg-
ing Areas in Communication Networks (SecureComm 2006).
IEEE Press, 2006.
[6] P. Erdo¨s and A. Re´nyi. On the evolution of random graphs.
Publ. Math. Inst. Hungar. Acad. Sci., 5:17–61, 1960.
[7] L. Eschenauer and V. Gligor. A key-management scheme
for distributed sensor networks. In Proc. 9th ACM confer-
ence on Computer and communications security, pages 41–
47. ACM Press, 2002.
[8] D. Ganesan, R. Govindan, S. Shenker, and D. Estrin. Highly
resilient, energy efficient multipath routing in wireless sen-
sor networks. Mobile Computing and Communications Re-
view (MC2R), 1(2), 2002.
[9] M. Huson and A. Sen. Broadcast scheduling algorithms for
radio networks. In Military Communications Conference
(MILCOM ’95), volume 2, pages 647–651. IEEE, 1995.
[10] Y. Law, J. Doumen, and P. Hartel. Survey and benchmark of
block ciphers for wireless sensor networks. ACM Transac-
tions on Sensor Networks, 2(1):65–93, Feb. 2006.
[11] T. Łuczak. Size and connectivity of the k-core of a random
graph. Discrete Math., pages 61–68, 1991.
[12] M. Penrose. Random Geometric Graphs. Oxford University
Press, 2003.
[13] M. D. Penrose. The longest edge of the random minimal
spanning tree. The Annals of Applied Probability, 7(2):340–
361, May 1997.
[14] M. D. Penrose. On k-connectivity for a geometric random
graph. Random Struct. Algorithms, 15(2):145–164, 1999.
[15] F. Sun and M. Shayman. On the average pairwise connec-
tivity of wireless multihop networks. In Global Telecommu-
nications Conference (GLOBECOM ’05), volume 3, pages
1762–1766. IEEE, 2005.
Appendix A. Derivation of Equation 5
Pr{d ≥ k}
=Pr{d ≥ 1} −
k−1∑
i=1
Pr{d = i}
=1− (1− pps)N −
(
N
1
)
pqN−1
[
ps
]
−
(
N
2
)
p2qN−2
[(
2
1
)
psqs + p2s
]
− ...
−
(
N
k − 1
)
pk−1qN−k+1
[(
k − 1
1
)
psq
k−2
s + ...+ p
k−1
s
]
−
(
N
k
)
pkqN−k
[(
k
1
)
psq
k−1
s + ...+
(
k
k − 1
)
pk−1s qs
]
− ...
−
(
N
N
)
pN
[(
N
1
)
psq
N−1
s + ...+
(
N
k − 1
)
pk−1s q
N−k+1
s
]
=1− (1− pps)N −
(
N
1
)
pqN−1[1− qs]
−
(
N
2
)
p2qN−2[1− q2s ]− ...
−
(
N
k − 1
)
pk−1qN−k+1[1− qk−1s ]
−
(
N
k
)
pkqN−k
[
k−1∑
i=1
(
k
i
)
pisq
k−i
s
]
− ...
−
(
N
N
)
pN
[
k−1∑
i=1
(
N
i
)
pisq
N−i
s
]
Simplifying the above gives us Equation 5.
思考，並讓學生領會你的思考過程，而不是直接給學生答案。又譬如 Computer Science
和 Computer Engineering有什麼差異? 他的定義是
Computer Science is to understand computers.
Computer Engineering is to build computers.
不管你同不同意他的定義，你不得不承認他的說法有些道理。又如他談到我們這一
行的工作性質: “We are paid to teach and think, which means to understand problems.”看似
老生常談，卻點出了瞭解問題本身在教學及研究工作上的重要性。至於如何解決問題，
他引用了愛因斯坦的話 “Make it as simple as possible… but no more.”來提醒我們永遠尋
找最簡單（而非最複雜）的答案。
另外有幾位國內的知名研究學者，如淡江大學的施國琛教授，成功大學的黃崇明與
朱延平教授，都是我在 AINA 才第一次見到面的。至於會場上見到的熟悉面孔那就更多
了，就我印象所及至少有真理大學的游國忠教授、成功大學的張燕光教授、中華大學的
許慶賢教授、梁秋國教授、王俊鑫教授等。另外還遇到中研院資訊所何建明博士、臺科
大賴源正教授、海洋大學丁培毅教授、淡江大學的許輝煌教授以及中華電信的研究員黃
德勝博士等。算是我在國外參加研討會，遇到最多國內學者的一次。
也與我個人以往參加的國外研討會主題較為集中，總覺得 AINA 涵蓋的主題太廣以
致於無法聚焦在個人所感興趣的研究主題。所以很多在會場口頭發表的論文題目並沒有
辦法吸引我的注意。以後還是選擇較為主題較為集中的研討會較不枉我千里迢迢來赴
會。另外，國內有些老師會讓博士生上台報告，這是一個很好的英文口語表達訓練機會。
不過，老師應該在行前充分教導學生該有的能力及態度，學生也應該有充分的準備及訓
練，才不會在國際場合失禮。以上是我的一點小小感想。
the tree is not the shortest (in terms of hop count) among all
potential ones, extra transmission is demanded by that path,
which wastes precious bandwidth and energy resource.
In this paper, we propose three alternatives to allevi-
ate the unaddressing and routing detour problems. The
first approach, Centralized Stateful Address Configuration
(CSAC), adapts conventional stateful addressing method to
ZigBee trees. As CSAC creates no static binding between
addresses and node locations in the tree, every available ad-
dress is assignable to any node and the unaddressing prob-
lem occurs only for address exhaustion. The weakness of
CSAC is the need for additional storage in every ZC/ZR
to keep a routing table. The second approach is a hy-
brid method that utilizes DAAM with priority and applies
CSAC only when needed. This approach is called Hybrid
Address Configuration (HAC). The third approach, Router-
Based Address Configuration (RBAC), partitions address
space into chunks and assigns one chunk to each ZR on
demands. A ZR then allocates available addresses from its
chunk to its child ZEDs.
2. Preliminaries
Since ZigBee is a particular type of mobile ad hoc net-
works (MANETs), let us start with MANET addressing pro-
tocols. MANETconf [7] treated the problem of dynamically
allocating a unique address to each node as a distributed
agreement problem and proposed adapting a distributed mu-
tual exclusion algorithm to MANET address configuration.
Some approach partitions address space (using binary split)
among nodes so that each node can configure new node in-
dependently [6]. These schemes are designed to deal with
problems like node failure, message loss, node mobility,
network partitioning and merge, and multiple concurrent
initiations of the protocol. The ultimate goal is to ensure
address uniqueness in despite of these problems, as well as
to minimize the amount of unaddressed nodes. Refer to [3]
for a comprehensive survey of current development of ad-
dress configuration in MANETs.
Conventionally, MANET addressing methods view rout-
ing as an independent issue. They are not designed to assist
routing tasks except for the guarantee of address unique-
ness. In contrast, DAAM in ZigBee networks provides not
only unique identification to every device, but also adequate
routing information for every possible packet delivery path.
The last property eliminates the need for an independent
routing protocol.
Address space in [4] is defined by an n-dimensional co-
ordinate system. Each coordinate, expressed as an n-tuple
of integers, is considered a logical address. Once config-
ured, a parent node assigns to a child node joining the net-
work an unallocated logical address such that addresses of
these two nodes differ in only one element in the tuple: the
/* d(P ) denotes the depth value of P */
/* A(P ) denotes the network address of P */
/* Nr(P ) denotes the number of P ’s children that are ZRs */
/* Nc(P ) denotes the number of P ’s children that are ZEDs */
/* Cskip(d) =
{
1 + Cm× (Lm− d− 1) if Rm = 1,
1+Cm−Rm−Cm×RmLm−d−1
1−Rm otherwise.
*/
if D is an FFD and d(P ) < Lm− 1 and Nr(P ) < Rm then
Nr(P )← Nr(P ) + 1 // accommodating D as a ZR
allocate D the following address
A(P ) + Cskip(d(P ))× (Nr(P )− 1) + 1
else if d(P ) ≤ Lm− 1 and Nc(P ) < Cm then
Nc(P )← Nc(P ) + 1 // accommodating D as a ZED
allocate D the following address
A(P ) + Cskip(d(P ))× Rm +Nc(P )
else
// D cannot be accommodated
end if
Figure 1. DAAM: The procedure for ZC/ZR P
to allocate an address to a device D
element in the child’s address is one larger than that in the
parent’s. In this manner, the number of children nodes that
each node can have is limited by n. Each node should also
inform neighboring nodes which addresses have already
been assigned by it, as multiple nodes may be eligible to
assign the same address. The issue with this approach is
that it imposes an n-dimensional mesh structure on the net-
work, which is too complicated for some PAN applications.
We focus on tree structure in the rest of this paper.
The topological parameter associated with DAAM is a
collection of three integer variables:
• Lm: the maximum depth value of the tree.
• Cm: the maximum number of children of a ZC/ZR.
• Rm: the maximum number of children of a ZC/ZR that
can be ZRs.
According to ZigBee specification, the ZC is at depth 0 and
devices at depth Lm can only be ZEDs, not ZRs. Although
Lm, Cm, and Rm are all ranged from 0 to 14, their val-
ues are not independent as some value combinations are
meaningless and some others require more addresses than
allowed.
When operating in beacon-enabled mode, a ZC/ZR pe-
riodically broadcasts beacon frames to announce its pres-
ence and disclose related information. Any device should
first scan for beacons before joining a PAN. The collected
beacon information is used to build a neighbor table. The
396
Table 1. Possible sources of unconfigured
device sets
FFD density P1 P2
S1 Yes No No
S2 No Yes No
S3 No No Yes
the only source of S3. For each device d ∈ S2 and each
e ∈ NF (d), we have either e ∈ ZED or e ∈ UnC. The
condition e ∈ ZED is due to property P1. The other condi-
tion e ∈ UnC is equivalent to e ∈ S1 ∪ S2 ∪ S3, implying
that any possible cause of addressing failure is also an in-
direct source of S2. Table 1 summarizes possible sources
of unconfigured device sets (S1, S2, and S3), excluding the
indirect source of S2.
The routing detour problem also relates to the aforemen-
tioned protocol properties. To explain, we define a potential
path for a device d to be a series of potential links between
FFDs,
(d, f1), (f1, f2), · · · (fn−1, fn),
where F = {f1, f2, . . . , fn−1} is a set of FFDs and fn is
the ZC. Such a potential path is not necessarily the routing
path from d to the ZC; it becomes that only if (1) all the
involved FFDs are ZRs and (2) each potential link ends up
with an association. The routing detour problem occurs to d
when neither of d’s shortest potential paths is able to serve
as a routing path from d to the ZC. For each such path, the
following condition holds when d requests association with
the network
∃fi ∈ F : fi ∈ ZED ∨ fi ∈ UnC ∨ (fi ∈ ZR ∧ fi ∈ ZRe).
The source of the condition fi ∈ ZED∨fi ∈ UnC is exactly
that of S2 while fi ∈ ZR ∧ fi ∈ ZRe comes from the same
reason why S3 exists.
3. Flexible Address Configuration
The goal of this research is to devise alternative address-
ing methods for ZigBee networks. These methods are re-
quired to guarantee address uniqueness and, as an integrated
part of the addressing scheme, form a tree structure for rout-
ing as well while alleviating addressing failure and routing
detour problems.
Our proposal assumes that ZC acts as an address config-
uration server (ACS), which manages an address pool for
entire network. An ACS is functionally equivalent to and
can be implemented as a conventional DHCP server. It as-
signs unallocated addresses to devices on an on-demand ba-
sis. Each ZC/ZR is required to have adequate storage space
to keep its routing table.
3.1. Centralized Stateful Address Configu-
ration (CSAC)
Since ZC is the ACS, any one-hop neighbor of the ZC
can acquire an address directly from the ZC on its asso-
ciation without difficulty (assuming no address shortage).
A device that does not have a direct link to the ZC, how-
ever, cannot obtain an address directly from the ZC. When
such a device attempts to associate with some ZR, the ZR
should request an address from the ZC on behalf of the de-
vice. CSAC introduces two message types for this purpose:
Address Request and Address Response. Detailed proce-
dure follows.
• A ZigBee device attempts association with the network
by sending Association Request to a neighboring ZR.
• On receiving the request, the ZR becomes the proxy
ZR of the device. The proxy ZR then sends an Address
Request message to the ZC on behalf of the device re-
questing association.
• The request message is delivered hop-by-hop to the ZC
(We will discuss how to realize such a upward routing
shortly.)
• The ZC allocates an unused address from the address
pool and sends it to the proxy ZR by responding with
an Address Response message.
• The response is delivered hop-by-hop to the proxy ZR
(The issue concerning this downward routing will be
addressed later.)
• The proxy ZR extracts the address from Address Re-
sponse and sends it to the device attempting associa-
tion by replying an Association Response.
Note this procedure is compliant to ZigBee’s association
procedure from the end device’s point of view. With CSAC,
FFDs are all ZRs while RFDs are all ZEDs. In contrast,
FFDs may be degraded to ZEDs with DAAM.
We shall now discuss how a tree-based routing can be
achieved. This relies on the following three properties.
Property 1 Each ZR/ZED keeps a routing entry for its par-
ent, which serves for the ZR/ZED’s default route.
Property 2 Each ZC/ZR keeps one routing entry for each
of its descendants (i.e., a host-specific route for each de-
scendant). This entry points to the right next-hop device
on the unique path that connects the ZC/ZR with the corre-
sponding descendant.
Property 3 Each device contains no other routing entry.
398
RBAC is similar to CSAC. It partitions the whole ad-
dress space into fixed-size blocks. The size of each block
is a power of two. When a proxy ZR receives an associ-
ation request, the proxy ZR sends Address Request to the
ACS if (and only if) the association request is issued by an
FFD. When the ACS receives the address request, it al-
locates an address block instead of a single address to the
proxy ZR. The proxy ZR then informs the FFD of the block.
The first address in the block is for the FFD and the rest
are spares. After the association is completed, the FFD be-
comes a proxy ZR and can locally allocate spare addresses
to RFDs that request associations with it.
As all ZEDs associated with the same ZR share an ad-
dress block and the block size is known to every ZR, only
ZRs need to initiate the route update procedure after their
associations. ZEDs need not perform the procedure. As a
result, each ZC/ZR keeps routing records only for ZRs re-
siding in the subtree rooted at it. In contrast, a ZC/ZR with
CSAC needs store addresses of all devices (both ZRs and
ZEDs) in the same subtree.
Since the block size is a power of two, we can define a
bit mask that indicates which bit in the address field should
agree for two addresses being in the same address block.
This notion is exactly the same as subnet mask used in sub-
netting IP networks. With this bit mask, a ZC/ZR can eas-
ily determine whether the destination address of a received
packet is a ZR or ZED. If the destination is a ZED, the
ZC/ZR can also determine the address of the ZR with which
the ZED associates. The packet can then be forwarded to
the destination ZR by consulting routing tables.
3.4. Analyses of Addressing Failure and
Routing Detour
We shall now analyze whether these three protocols suf-
fer from addressing failure and routing detour problems.
FFDs can only be ZRs with CSAC or RBAC, so these two
protocols do not have property P1. Unfortunately, HAC in-
herits P1 from DAAM since it uses DAAM with priority.
CSAC neither has property P2, since it does not limit the
number of devices associated with a ZC/ZR. HAC does not
inherit P2 from DAAM due to the introduction of CSAC
as a remedy. P2 holds for RBAC since the address block
size confines the number of ZEDs (but not ZRs) allowed to
associate with a ZC/ZR. Table 2 summarizes protocol prop-
erties.
From Tables 1 and 2, possibilities of unconfigured de-
vice sets (S1, S2, and S3) with each protocol can be ob-
tained (Table 3). It turns out that both the addressing failure
and routing detour problems are most serious with DAAM
and least with CSAC. The behaviors of HAC and RBAC
should be in-between. In particular, the routing detour prob-
lem may arise with either DAAM, HAC, or RBAC, but not
Table 2. Summary of Protocol Properties
DAAM CSAC HAC RBAC
Forcing FFDs to Yes No Yes No
be ZEDs? (P1)
Limiting associable Yes No No Yes
devices? (P2)
Table 3. Possibilities of unconfigured device
sets (S1, S2, and S3) with each protocol
DAAM CSAC HAC RBAC
S1 Yes Yes Yes Yes
S2 Yes No Yes No
S3 Yes No No Yes
with CSAC.
4. Empirical Results
We conducted extended simulations to investigate the
performance of proposed schemes. We assumed an 1000×
1000 m2 deployment field, within which 200 to 1000 Zig-
Bee devices were uniformly deployed at random. An ad-
ditional device acting as the ZC was placed at the center
of the deployment field. All devices had a communication
range of 100 m. The ratio of FFDs to RFDs was one to one.
We considered three settings for the topological parameter,
which respectively stand for tall (Cm=4, Rm=2, Lm=14),
regular (Cm=12, Rm=4, Lm=7), and flat (Cm=14, Rm=8,
Lm=5) trees. For HAC, the topology setting was fixed to
(Cm=12, Rm=5, Lm=6) for a fixed address-space partition
between DAAM and CSAC. The block size for RBAC was
set to 8. Each parameter setting was repeated 100 times to
obtain average results.
4.1. Percentage of configured devices
The first metric we measured is the percentage of devices
that were successfully configured with addresses. Both
CSAC and RBAC performed the best, followed by HAC
and then DAAM. Fig. 4 shows the result.
Since S1 is the only source of configuration failure with
CSAC, the curve of CSAC here also indicates a relative
amount of S1 devices. We found that FFD density did not
suffice for an 100% configuration ratio until over 400 de-
vices were deployed (note only half of them were FFDs).
Besides S1, only S3 contributes to RBAC’s addressing
failures. Therefore, the performance gap between CSAC
and RBAC can be regarded as the degree of S3’s impact on
RBAC’s performance. Since RBAC’s performance is hardly
400
