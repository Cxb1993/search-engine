行政院國家科學委員會專題研究計畫成果報告 
 
計畫名稱：低成本高精度微型工具機關鍵技術與精度提升系統之研究與開發－機上影像
監控與切削參數決策支援系統之整合研究 
計畫編號：    NSC 96-2221-E-033 -062 
執行期限：    96 年 8 月 1 日至 97 年 7 月 31 日 
計畫主持人：  中原大學機械系 劉益宏  助理教授 
計畫參與人員：中原大學機械系 林昌誠 馬晨榮 研究生
中文摘要 
本計畫發展了一個基於二維影像的智慧型機
上工件表面粗糙度量測系統。首先利用單支
CCD 攝影機擷取表面影像，經由所發展的區
域自動選取演算法抓到可量測粗糙度的區
域，接著，在這些區域中分別進行影像處理及
統計紋理特徵的抽取，計算不同的紋理值，來
呈現粗糙度的特性。此外，本計畫也利用類神
經網路學習及分類的特性，經由不同紋理值的
輸入，來自動判別在同一個切削表面上，不同
區域的粗糙度等級，提供工程師有用的資訊。
在本計畫所利用的神經網路為基於統計學習
理論所發展的支持向量機(SVM)。由真實表面
切削影像所做的實驗結果證明，其可以得到非
常高之表面粗糙度分類率。 
關鍵詞: 表面粗糙度、影像處理、類神經網
路、紋理、統計學習、支持向量機。 
 
Abstract 
A 2-dimensional image based intelligent 
on-machine surface roughness measurement 
system has been developed in this project. First, 
a single CCD camera is used for capturing the 
surface image. The texture-measurable region 
on the surface can be detected automatically by 
the proposed automatic region selection 
algorithm. Further, image processing methods 
and texture extraction are performed on the 
detected regions. The properties of roughness 
can be represented with various textures. In 
addition, by using the extracted textures, this 
project also adopts the classification property of 
neural network to automatically judge the 
degree of roughness on the cutting surface. It 
can provide useful information to engineers. The 
neural network used in this project is the 
statistical learning based support vector machine 
(SVM). Experimental results, carried out on real 
surface images, show that it can achieve a high 
roughness classification rate. 
Keywords: surface roughness, image processing, 
neural network, texture, statistical learning, 
support vector machine. 
 
一、 前言及背景介紹 
A. 計畫緣起 
加工後最重要的量測問題之ㄧ是粗糙度的量測。
一般之表面粗糙度，由刀具形狀和進給計算得到之理
論粗糙度，加上許多非常複雜之外來因素予以組合而
成。銑床加工所得到之加工面，除了切刃痕跡（tooth 
mark）和回轉痕跡（revolution mark）以外，通常都包
括顫動、扭曲、抓傷、熔著等各種因素所造成之影響。
理論粗糙度為各切刃依序在工件表面所留下之軌跡的
幾何形狀。各種銑刀的刀尖形狀及理論粗糙度都有其
光的原因，造成加工物表面局部反光而影響紋理的計
算。特別是對於金屬加工物，這樣的情形特別嚴重，
如圖 2 所示，表面因光源的因素，有些區域無法順利
擷取到有清晰紋路的影像，如此一來，就會造成粗糙
度誤判的情況。所以必須先利用影像處理的技巧，先
發展一個流程，將具有紋理的區域，也就是可量測的
範圍自動偵測出來。 
 
圖 1：表面粗糙度量測及分佈分析之流程方塊
圖 
 
 
圖 2 因打光不均勻造成金屬加工物表面有部
份會反光的情形 
 
    首先，因為每次加工的物件材質不見得都一樣，
呈現出來的灰階度分佈都會有所不同，所以不可能利
用嘗試錯誤法去做重新設定，一方面不見得是最佳門
檻值，一方面也浪費時間。為了達到自動化的需求，
這裡採用 Otsu 演算法來自動搜尋最佳的二值化門檻
值，找到之後將灰階影像進行二值化。由圖 2 可知，
反光區的灰階直都非常大，接近 255 左右，相反的，
飛反光區，顏色較深，灰階值都較小，所以利用二值
化可將反光區都變成白色，有紋理的區域將會變成黑
色。在有紋理的區域內，因為刀紋的波峰跟波谷因打
光角度的關係，也會有呈現碎形的反光區域。所以第
二個步驟，對於二值化影像再進行膨脹(dilation)運算，
就可以將非常小、呈現碎狀的小反光區域填滿。藉由
這兩個動作，就可以找出非大區域反光區域，也就是
可量測紋理值的區域。後面在對於這些區域去利用灰
階影像抽取有用的特徵值。 
 
C. 統計紋理特徵抽取 
在抓取可量测區域後，接下來就要針對這些區域
去抽取小區塊的紋理特徵值。圖 3 為一張可利用影像
量测粗糙度、或是說具有明顯紋理的區域影像。將這
張影像兩個刀紋不同的影像分別抓取出來後放大，如
圖 4 所示。很明顯的圖 4(a)及圖 4(b)用肉眼觀察後發
現，因為有不同的粗糙度，造成有不同的紋理值。或
是到過來說，因為有不同的紋理分佈，造成粗糙度不
是直方圖歪斜的量測，而四階矩則是相對平坦度的量
測。五階或更高階矩並不容易和直方圖形狀有關係，
但是它們的確提供更進一步紋理內容的定量辨別。建
立在直方圖上有用的其他紋理方法包括了「均勻度」
的測量，表示成 
 
( )∑−
=
= 1
0
2
L
i
izpU                                 （4） 
 
和一個平均熵（average entropy）量測 
 
( ) ( )iL
i
i zpzpe ∑−
=
= 1
0
2log                           （5） 
 
因為 p 在範圍[0 , 1]有值，而且它們的和為 1，所以當
所有的灰階都相等時（最均勻），量測 U 對一影像是最
大值，之後從該處開始減少。熵是變異性的量測，因
而對常數影像為零。 
對加工物件的粗糙度量測及分析來說，較重要的
是紋路的組織所構成的紋理特性，所以必須將像素間
的關係納入考量。也就是說，將這類資訊納入紋理分
析過程的一個方法是不僅考慮灰階的分布，還要考慮
具有相等灰階或相近的灰階之像素的位置。所以本計
劃利用了「灰階共生矩陣」（gray-level co-occurrence 
matrix）來計算這些紋理特徵，以下簡單介紹此矩陣。 
 假設矩陣 C 被稱為灰階共生矩陣，因為 C 取決於
p，所以可以透過選擇適當的位置運算子來檢測指定的
紋理模式的出現。分析一個給定的 C 矩陣，以便對計
算 C 上的區域的紋理進行分類。為了可以有效地抽取
具有鑑別度的紋理特徵，本計劃找出灰階共生矩陣
後，也就是正規化之後的灰階共生矩陣 C，利用它來
計 算每一個 掃描視窗 的兩個特 徵值，均 勻度
(homogeneity)及熵(entropy)，如下表示： 
 
均勻性：∑∑                               (6) 
i j
ijc
2
熵：                            (7) ∑∑−
i j
ijij cc log
 
基本想法是透過描述子來表徵 C 的內容。例如，均勻
性在當 全部一樣時是最高的。熵是隨機性的測量，
當 C 所有的元素為最大隨機時，可達到最大值。使用
這些描述子的一個方法是教導一個系統如何處理一組
不同的紋理的描述子值。一個未知區域的紋理是透過
它們的描述子與已儲存在系統記憶中的描述子匹配的
接近程度決定的。 
ijc
 
D. 粗糙度分佈分析 
在抽取每一個小區域的紋理特徵值之後，它們的
特徵分布可以藉由散開圖 (scatter plot)來觀察。將
entropy 為 x 軸，homogeneity 為 y 軸，畫在一個 2D 平
面上，或加工物件表面粗糙度非常均勻，則 scatter plot
上面的特徵分佈將會非常密集，反之，若加工物表面
的粗糙度分佈不均勻，則在 scatter plot 上的分佈將會
分散，也就是說，聚集度(compactness)變差。為了可以
量化分析，本計畫發展了分佈模型來描述紋理特徵的
分佈，例如兩個隨機變數的高斯分配模型，利用變異
數的大小來描述粗糙度的分佈情形，若變異數越大，
代表加工不均勻。 
 
三、 表面粗糙度之區域分類 
若事前已知加工物表面的紋理分佈，則可以取得用
來比對的樣本(template)，這些樣本組成的集合在圖形
識別 (pattern recognition)中，叫做訓練集合 (training 
set)。當加工完成之後，我們關心的問題是，加工表面
的紋理值，是否與期望的一樣。我們從加工物表面每
一個小區域抽取紋理特徵，與訓練集合作比對，這形
成了分類問題(classification problem)。對於以上所描述
的問題，只有兩個類別，一個類別是正常，一個類別
是不正常，所以是屬於一個二元分類的問題(binary 
classification problem)。 
在本計劃中，一個新穎的神經網路分類器將被用
來解決粗糙度好壞的分類問題，叫做support vector 
machine (SVM)。SVM比傳統的多層感知機，例如到傳
遞類神經網路(back-propagation neural network, BPNN)
 圖 7 利用非線性二次多項式 SVM 對粗糙度做即時分
類所得到的非線性分離平面 
 
 
圖 8 利用非線性 RBF SVM 對粗糙度做即時分類所得
到的非線性分離平面 
 
圖 6 至圖 8 呈現出利用不同 SVM 學習過的最佳分
離平面結果。由結果可知，利用 SVM 可以對粗糙度的
好壞，學習出一個分類率極高的決策函數。此外。本
計畫亦已利用此演算法，發展了一個利用影像判別粗
糙度的即時量測系統。 
 
五、 討論及結論 
本計畫有別於傳統粗度儀量测粗糙度的方法，發展了
一個以影像輸入之平面粗糙度分析及分類系統，實驗
結果證明此系統可以精確地將加工表面的粗糙度作有
效的分類。以下將本計畫所補助之研究所發展的系統
優點做一結論： 
1. 速度快且具全面性：粗度儀的量测方式採用 1D 的
量測，無法對整個加工物件的表面做整體的量測，
但本計劃利用影像量測，可以對整個物件表面量
測，所以可以更快，而且更具全面性。 
2. 可在機上直接量测：因為本計劃針對微細加工平台
的加工物件作粗糙度的量测，所以平台上的 CCD
攝影機直接可以拍攝物體表面，不用將加工後的物
件卸下平台，更具有方便性，且達到即時性。 
3. 可以做粗糙度分佈的分析：粗度儀對一個加工表面
來說，基本上是採用抽檢的方式，無法得知整個加
工物件表面的粗糙度分佈，然而，本計劃所發展的
系統，由於利用一張影像來做分析，所以可以得知
表面每個區域的粗糙度，進而得知加工物件表面是
否為均勻加工，或是得之刀具之加工情況。 
4. 粗操度指標更具代表性：粗度儀傳統例用一維的
profile 來量测粗度指標，例如 RA 值。而本計劃所
發展的系統利用統計紋理的特徵值，包括 entropy
跟 homogeneity，來作為粗糙度的量化指標，更具
有亂度及均勻度的實際意義。 
5. 功能更多：除了以上二微影像的粗操度量測，本系
統更可以將加工表面哪個區域的紋理結果做進一
步的分類，利用比傳統類神經網路更好的統計式神
經網路 support vector machines (SVM)，來達到分類
精度高，且速度快的目標，讓工程師可以在即時就
知道剛加工完的物件表面，哪些區域是屬於切削不
正常。 
6. 較安全：本計劃採用的系統是非接觸式的影像量测
方式，相較於傳統的粗度儀量测粗糙度的方法，更
不會破壞加工物表面，對於微米級的加工更有好
處。 
 
參考文獻 
[1] 卓君翰, “探針式表面粗度儀之量測不確定度分析,” 
國立台灣科技大學機械工程學系。 
[2] 陳政忠, “應用機器視覺於切削加工件之表面粗糙
度分析,＂ 元智大學工業工程系。 
[3] N. Otsu, “A threshold selection method from 
gray-level histograms,” IEEE Trans. System Man and 
Cybernetics, vol. 9, no. 1, pp. 62-69, 1979. 
[4] 鍾國亮，影像處理與電腦視覺，東華書局， 中華
民國九十三年二月二版。 
[5] Ramesh Jain, Rangachar Kasturi, Brain G. Schunck, 
