(2) Then the complete code can be provided for free based on the 
spirit of open source. 
(3) Focus on the issue of optimal wide-angle image correction, in 
order to provide image processing technique suitable for cell phones 
and raise its additional worth. 
 
第一步先假設 DIS 的扭曲中心在(uc’,vc’)，CIS 的扭曲中心在(uc,vc)。其計算每個 DIS 中的像
素點(u’,v’)的 ρ’和 θ’公式如下： 
22 )  ()  ( cc v-vu-u   






c
c
uu
vvarctan
 
同理可知經過扭曲後，在 CIS 中的像素點(u,v)可用同樣的公式表示出 CIS 的 ρ 和 θ。其計算
公式如下： 
22 )  ()  ( cc v-vu-u   






c
c
uu
vvarctan
 
在這個方法中從 DIS 到 CIS 的轉換，ρ 會根據廣角修正轉換模型改變長度，而因為是放射
狀扭曲的關係 θ 並不會發生改變，計算公式如下： 



N
n
n
na
1
)(
 
    
其中 an 是廣角鏡修正參數，可經由軟體方式取得。在最小平方法測量中，參數的取得是根
據一張具有格子點的實驗圖，經過廣角鏡扭曲後，格子點會產生歪斜，這些歪斜的格子點
可以大致表示出未扭曲的影像空間 CIS 與經過扭曲的影像空間 DIS 之間的關係。因此把經
過扭曲的格子點，經過最小平方測量法的運算，轉成一張能產生最小平方和的直線格子點
(因為兩點間直線的距離為從點到點的最短距離)。產生 an 的多項式以後，可以根據上面的
公式把 DIS 的 ρ’轉成 CIS 的 ρ，而 DIS 的 θ’和 CIS 的 θ 相同，因此最後的(u,v)座標可以經
由以下的公式算出： 
 cos cuu  
 sin cvv  
A.2 Back Mapping 研究 
    在 forward mapping 的步驟中，可以發現，當把 DIS 空間映射到 CIS 空間的時候，會留
下許多沒有被對應到的空白像素點。然而，這些 CIS 的空白像素點如果經過 an 多項式的反
函數，bn 多項式，去對應到 DIS 空間，則可以找到對應點，這個動作稱作 Back Mapping，
公式如下： 
2 
 
 ρ
θ θ
μ
ν ),( vul
ρ

 
圖 3.1：系統架構圖 
 
 Step 1:  
Cartesian to Polar 
Coordinate 
Step 2:  
Back 
Mapping 
Step 3: 
Polar to Cartesian 
Coordinate 
Step 4:  
Linear 
Interpolation 
Inputs ),( vu ,  ),( cc vu ),(  , Nbb ~1 ),(   , ),( cc vu   ),( vu   
Outputs 
2)(2)( cvvcuu 
)arctan(
c
c
uu
vv


 



N
n
n
nb
1

 
   
  coscuu    sincvv  
),( vuI  
表 3.1：廣角鏡扭曲修正方法中的 Input 和 output 方程式. 
 
    從表中可看出前後兩次 CORDIC 模組所完成的工作。第一次 CORDIC 模組，把笛卡兒
座標分離成長度與角度；第二次 CORDIC 模組，合併長度和角度以換成笛卡兒座標。我們
可以發現，第一階段取得角度 θ 和長度 ρ，只是為了計算第二階段三角函數的 cos 和 sin。
因此，我們利用放射狀扭曲的基本特性：扭曲前後只有距離改變（ρ，ρ’不相同），而角度
維持不變（θ，θ’相同）。在這樣的情況下，用邊長比例的方式，將 cos θ’和 sin θ’換成斜邊
和對邊以及斜邊和鄰邊的比例。消去三角函數後，我們就可以不需要角度。因此我們將四
個區塊的 input 和 output 從表 3.1 化簡成表 3.2。 
 
 Step 1:  
Cartesian to Polar 
Coordinate 
Step 2:  
Back 
Mapping 
Step 3: 
Polar to Cartesian 
Coordinate 
Step 4:  
Linear 
Interpolation
Inputs ),( vu , ),( cc vu   , Nbb ~1  
 ,  , ),( cc vu  , 
)(),( cc vvuu   
),( vu   
Outputs 22 )()( cc vvuu  
N
n
n
nb
1
 
 cc uuuu 
 

c
c
vvvv 
 
),( vuI  
表 3.2：廣角鏡扭曲修正方法中消去角度的 Input 和 output 方程式. 
4 
 
2.  IAS (Image Adjust Subsystem, 影像校正子系統) 
IAS 的輸入端是 ICS，對於輸入的影像，先經過 Back Mapping 步驟找出對應點。當
Back Mapping 計算出 DIS 空間的新座標之後，需要做內插的動作以取得比較精確的
值。如下圖所示： 
影像展示
子系統廣角鏡頭修正模組
影像擷取
子系統
3.  IDS (Image Display Subsystem, 影像展示子系統) 
IDS 的輸入端是 IAS，對於輸入的影像，將影像資訊編碼成一般標準格式的影像檔案，
再將影像資訊依序傳遞到監視器上顯示出正確的影像。 
廣角鏡頭手機
影像串流RGB格式輸出影像校正子系統 影像生成
 
本計畫的系統實作環境如下表所示： 
SAMSUNG GALAXY S Wi-Fi 5.0 
CPU SAMSUNG S5PC111, 1GHz
OS Android 2.2 
Memory 5 2MB RAM 1 
軟體開發平台 
CPU Intel E8300 2.83GHz
Android SDK Android 2.2 
Java SE SDK JDK 6 
Eclipse Eclipse 3.5  
 
本系統的主介面如右圖所示，此系統內建於
我們實作測試用的 Android 手機，可即時拍
攝廣角影像與轉正。按鈕由上至下分別為： 
 「拍攝廣角影像」 
 「開啟舊檔」 
 「影像轉正」 
 「儲存檔案」 
 「結束」 
 
6 
 
  
  
本系統已達成需求規格書所列之所有功能，如下所示：  
1. 整個系統的需求規格完成度(100%) 
(1) 系統能擷取出廣角鏡頭的影像 
(2) 系統能修正廣角鏡頭造成的影像扭曲 
(3) 系統能將修正結果顯示在手機螢幕上 
2. 影像擷取子系統的需求規格完成度(100%) 
(1) 即時接收影像資料 
(2) 擷取出廣角鏡頭的影像 
(3) 將影像化成 RGB 影像資料 
3. 影像校正子系統的需求規格完成度(100%) 
(1) 讀取影像資訊 
(2) 將扭曲的影像修正回來 
(3) 正確傳送修正後的影像資訊 
4. 影像展示子系統的需求規格完成度(100%) 
(1) 系統將修正後資訊編碼成一般標準格式的影像檔案 
(2) 系統能將修正結果顯示在顯示手機螢幕上 
技術方案優越性 
    本計畫乃發展出適合嵌入式系統使用的較低運算複雜度(low-complexity)之廣角鏡頭修
正技術，並 porting 到 Google Android 平台上。核心的低運算複雜度的廣角鏡頭修正技術
可推廣應用於許多具有價格考量的消費性電子產品上。 
8 
 
國科會補助專題研究計畫項下出席國際學術會議心得報告 
                                     日期：100年04月20日 
計畫編號 NSC99－2220－E－151－002－ 
計畫名稱 應用於 Google Android 平台的廣角影像修正系統 
(嵌入式系統軟體技術開發分項) 
出國人員
姓名 連志原 
服務機構及
職稱 
國立高雄應用科技大學 
電子工程系助理教授 
會議時間 100 年 04 月 10 日至 
100 年 04 月 15 日 
會議地點 中國上海 
會議名稱 
(中文) 第 30 屆計算機通信 IEEE 國際研討會 
(英文)  The 30th IEEE International Conference on Computer 
Communications (IEEE INFOCOM 2011) 
發表論文
題目 無 
一、參加會議經過 
2011 第 30 屆計算機通信 IEEE 國際研討會(The 30th IEEE International Conference on 
Computer Communications (IEEE INFOCOM 2011))於 100 年 4 月 10 日至 100 年 4 月 15
日在中國上海舉行，總共有數百位來自世界各地的學界及業界的專家學者參與。會議
論文主要討論的議題有計算機通訊、有線網路和無線網路的通訊協定與溝通機制、多
媒體網路通訊等等。議程表如下所示： 
 
 1
3 
 
 5
二、與會心得 
 今年在中國上海舉行的 IEEE INFOCOM 2011 相當盛大，會議總共長達六天，議
題相當廣泛，有數百位來自世界各地相關的學者與會，大家參與會議時的討論亦非
常熱烈，讓個人有相當多的收穫。雖然此次會議以網路通訊為主，但其中仍有一些
關於多媒體通訊的技術與應用，是個人最感興趣的，本人亦與數位學者交換研究相
關經驗，此行實在收益良多。 
  經由這次國際會議的實際參與，不但得以認識一些相關領域之學者專家，互相交
換研究心得，更吸收到許多關於多媒體通訊的最新技術與資訊，對日後在研究上與
計畫執行上，將大有所助益。個人非常感謝國科會的補助，才能夠出席參加此次國
際性會議。 
 
三、考察參觀活動(無是項活動者略) 
 略 
四、建議 
 無 
五、攜回資料名稱及內容 
 研討會論文集光碟、摘要論文集 
六、其他 
 無 
 
 
 
 
99 年度專題研究計畫研究成果彙整表 
計畫主持人：連志原 計畫編號：99-2220-E-151-002- 
計畫名稱：應用於 Google Android 平台的廣角影像修正系統(嵌入式系統軟體技術開發分項) 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 3 3 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
