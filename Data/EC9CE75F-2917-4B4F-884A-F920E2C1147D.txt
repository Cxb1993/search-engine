1行政院國家科學委員會專題研究計畫成果報告
應用人工智慧於胰臟癌輔助鑑別診斷之研究(II)
計畫編號： NSC95-2221-E-150-002
執行期間： 95 年 08 月 01 日至 96 年 07 月 31 日
計畫主持人：張俊郎
計畫參與人員：徐銘遠
一 中文摘要
近年來醫學研究指出，胰臟癌占國人十大癌症死因的第八位，台灣每年因此癌死亡人
數亦達 800 人，且有逐年增加的趨勢。因為大部分胰臟癌早期之症狀多不具特異性，醫師
的人為判斷因每個人的經驗和認知有所不同及當時的精神狀況影響，難免有診斷上的誤差
而導致了後續的檢驗變的沒有幫助，不僅造成了醫療資源的浪費更嚴重的延誤了病患的病
情，錯失了「早期診斷，早期治療」的時間。本研究以人工智慧方法中的類神經網路與基
因演算法及統計方法中的邏輯斯迴歸建構三種鑑別模式，用以鑑別胰臟癌與急性胰臟炎。
並以 ROC 曲線對此三種模式的鑑別能力作比較與分析。本研究使用 234 筆病例資料作為訓
練樣本另以 117 筆病例資料作為測試資料，從成對比較分析的結果顯示，三種模式之 AUC
值，除了 GALR 模式有明顯優於 SLR 模式之外，無論是 SLR 模式與 BPN 模式的成對比較或
BPN 模式與 GALR 模式的成對比較結果，均無明顯的差異，但若在三種模式的最佳門檻值的
要求之下，GALR 模式之敏感度和特異度為 96.7%和 82.5%優於 SLR 模式之敏感度和特異度
為 96.7%和 73.7%優於 BPN 模式之敏感度和特異度為 88.3%和 84.2%，結果顯示，GALR 模式
的表現結果較佳。最後，未來如果有更龐大更完整之資料庫及更精確的運算方法，人工智
慧方法將會有更佳的預測效果。
關鍵字：人工智慧、類神經網路、基因演算法、邏輯斯迴歸、胰臟癌
二、Abstract
In Recent medical report, pancreas cancer has reached the 8th in leading cause of cancer
death in Taiwan. Based on the epidemiology study, there is a high incidence of the pancreatic
cancer in Euramerica, almost one out of ten thousands in morbidity. About 800 people die of this
cancer each year in Taiwan, and the figure is up trending. Most of the prognosis for pancreas
cancer is not specificity, such as in appetence, abdominal distension or pains are some
demonstrations of characteristic clinical signs. Many clinicians treat patients with gastro duodenal
or gallstone disease. It was not until the increase in pains or the pains extended to the dorsal that
the tumor was found to invade the nearby organ, result in the lost of treatment in time.
When dealing with the abdominal disease, clinicians have to infer the related organ that
causes the symptoms, physical examination and lab test were further taken. However, the
characteristic of non specificity of the prognosis for pancreas cancer, clinical judgments vary with
individual experience and perception or mental conditions usually causes the diagnosis bias.
3四、研究目的
截至目前為止，仍然沒有一個針對早期胰臟癌有效的篩檢方法，或單一特異性
及敏感度夠的診斷工具。因此，本研究希望能夠利用人工智慧方法來建構胰臟癌之
輔助鑑別診斷模式，此鑑別診斷模式主要是為了要輔助臨床醫師在面對腹腔疾病的
病人時，可從病人的症狀、理學檢查及實驗檢驗資訊，利用電腦的強大運算技術與
資料庫中所儲存的大量資料來建構適用之診斷模式並將此研究提供作為臨床醫師再
進一步採取後續內視鏡診斷、影像學診斷或血清腫瘤標記診斷等等之參考指引系
統，以減少人為判斷的失誤及醫療資源的浪費。並利用實際案例進行模式之測試，
期望得到具推廣性的疾病診斷指引模式，給予醫師在疾病診斷上的協助，藉以減少
醫師主觀判斷所產生的偏差，進而提昇醫療服務品質。
五、文獻探討
胰臟癌相關研究
近年來各種影像學的進展以及對於胰臟癌的基因突變知識漸趨成熟，使得我們更有可能對
於胰臟癌做到早期診斷 [3]。一般常見之影像學檢查包括腹部超音波掃描、電腦斷層掃描、
逆行性內視鏡膽道及胰臟攝影檢查(ERCP)等：
1. 腹部超音波掃描(abdominal ultrasonography)
是最快速而簡便的腫瘤篩檢工具，尤其對於實質性器官(如甲狀腺、肝臟、胰臟、脾臟，
甚至腎臟)，腹部超音波更是首選；但在診斷胰臟癌方面仍有些不足。由於胰臟躲在胃
及大小腸後面，因此照超音波時，影像經常會受到腸道內的游離空氣所干擾，而看不
見真切胰臟的實際情況。尤其是身材比較肥胖或腸管脹氣的患者，也可能出現「假陰
性」的情形。
2. 電腦斷層掃描(computerized tomography, CT)
利用電腦斷層掃描偵測胰臟腫瘤，可以避開超音波掃描的障礙，很清楚的看到胰臟外
觀及其鄰近器官的影像，包括胰管或總膽管是否腫大；甚至可以進一步了解是否有淋
巴腺轉移，準確的提供外科醫師做為手術步驟的參考依據，但這種方法價錢相較昂貴
了許多，所以不適合做為常規篩檢的方法。
3. 逆 行 性 內 視 鏡 膽 道 及 胰 臟 攝 影 檢 查 (Endoscopic Retrograde
Cholangiopancreaticography, ERCP)
主要是以胃十二指腸纖維內視鏡檢查，先直接觀察骨肉部或十二指腸，了解是否受到
壓迫，十二指腸乳頭部位有無病灶；然後注入顯影劑攝影，倘若發現胰管及其分支有
狹窄、阻塞、變形甚至阻斷的表徵，表示有胰臟癌病灶。但美中不足的是，此種方法
是侵入式的檢查，在檢查過程中，病患的感覺比較不舒服，也不能做為早期診斷[4]。
臨床醫師面對病人時，通常會依據病人的症狀、病史及危險因子來判斷病人疾病，但
由於胰臟癌的症狀多不具特異性，加上上述影像檢查方法仍有些許之不足以至於臨床
醫師在判斷上相當不容易。然而若能發展一種適當且有效的輔助診斷指引工具，不但
對於醫師可以提供診斷時的參考亦可讓病患獲得即時的診斷治療。
六、研究方法
6.1 逐步邏輯斯迴歸(SLR 模式)
5SLR model(train data)
0 20 40 60 80 100
100-Specificity
100
80
60
40
20
0
Se
ns
iti
vi
ty
圖 1 SLR 模式訓練資料之 ROC 曲線
6.2 類神經倒傳遞網路(BPN 模式)
以下將說明本研究實證模型的網路架構設計方法與原則，本研究以軟體「Matlab 6.5
Neural Network Toolbox」做為分析工具，進行鑑別胰臟癌與急性胰臟炎模式之倒傳遞類
神經網路分析。輸入變數是先經逐步邏輯斯迴歸篩選出具解釋能力的變數，共有 3 項(X2：
年齡、X28：Jaundice、X40：Amylase)， 輸出變數“1“代表罹患胰臟癌，“0“代表罹患
急性胰臟炎，分析流程如下：
1. 對輸入自變數中的連續變數執行正規化( Normalized)，正規化之公式為：
oldMinoldMax
oldMinlueoriginalVa
newValue

 (4.1)
其中oldMax 與oldMin 分別代表問題中各屬性的最大值與最小值， lueoriginalVa 代表自變
數的原始值。
2. 建構倒傳遞網路架構，網路的參數設定如下表 4.2 所示：
表 4.2 BPN 參數設定表
設定之參數 參數值
層數(含輸入與輸出層) 3 (單一隱臟
層)
隱臟層神經元個數 2
輸出層神經元個數 1
隱藏層神經元活化函數 線性函數
輸出層神經元活化函數 Sigmoid 函數
學習速率 0. 1
Sensitivity：97.0
Specificity：100.0
Criterion：0.443
SLR model (training data)
70.999，及最佳準則值(Criterion)，以此點做為切點(Cutoff)可計算對於訓練資料網
路的敏感度及特異度，訓練資料的敏感度為 97%而特異度達到 100%，顯示 BPN 模式對
訓練資料的配適能力良好。
6.3 基因-邏輯斯模式(GALR 模式)
經過逐步分析後得到具有解釋能力的三個自變數為：年齡(age;X2)、黃疸
(Jaundice;X28)、脂肪脢(Amylase;X40)，接著使用改良式基因演算法進行參數估計，其中
改良式基因演算法的適合度函數(Fitness function)即為邏輯斯迴歸之對數概率函數
(log-likelihood function)期望目標是讓適應函數值(Fitness Value)儘可能達到最大。
以下將說明基因-邏輯斯模式的設計方法與原則，分析流程如下：
1. 建立適應函數之數學模型：
(4.2)
2. 建構改良式基因演算法之架構，參數設定如下表 4.3 所示：
表 4.3 GALR 模式參數設定表
設定之參數 參數值
編碼範圍
每一世代 N=300
選擇方式 輪盤法
菁英基因個數 5組
交配方式 單點交配
交配率 0.7**
突變率(最大-最小值法)* (0.5-0.01)
演化世代 50
* 蘇木春、張孝德[12]
** Michael Negnevitsky[49]
3. 輸入訓練資料依據改良式基因演算法之運算流程開始建構模式，每一世代
(Generations)之適應函數值為此一世代中適應函數值最大的一組解。圖 4.4 為演化
50 個世代後之適應函數值的收斂情形。
 
     
 


n
i
n
i
ei
e
xxxxxxY
L
1 1
403282210403282210
3210
exp1log
,,,log


1515  i
9GALR model(train data)
0 20 40 60 80 100
100-Specificity
100
80
60
40
20
0
Se
ns
iti
vi
ty
圖 4.5 GALR 模式訓練資料之 ROC 曲線
6.4 驗證模式推廣性
三種鑑別模式都完成模式訓練之後，藉由輸入測試資料(test data)，以期望經過訓練
後的三種模式能具有良好的推廣性(Generalization)。所謂的「推廣性」是指已經訓練完
成的分類器，除了對訓練資料的分類效果良好之外，對於在訓練過程中未曾見過的的輸入/
輸出資料一樣具有良好的分類能力。因此在本小節中，使用未投入到模式中做訓練的 117
筆測試資料，作為驗證本研究所建立之三種鑑別模式的推廣性比較。
圖 4.6 是三種模式(SLR、BPN、GALR) 經由驗證測試資料的推廣性所得到的之 ROC 曲
線。在表 4.5 中，則是三種模式對訓練資料與測試資料之 AUC 值，對訓練資料而言，SLR
模式之 AUC 為 0.993、BPN 模式為 0.999 而 GALR 模式為 0.992，而驗證推廣性使用測試資
料，三種模式所獲得曲線下面積分別為，0.882，0.895 與 0.921。由表 4.5 可看出三種模
式對於訓練資料的配適能力都是相當不錯，但對於測驗資料的鑑別能力都略有些許的下降。
Sensitivity：97.0
Specificity：100.0
Criterion：0.4968
GALR model (training data)
11
示愈能有效正確的偵測到疾病發生，即正陽性的機率愈大。
但若要合理的比較三種模式之敏感度與特異度，就要先找到具有最高準確性(最小偽陽
性和偽陰性的結果)之最佳準則值(Criterion)作為切點(Cutoff) [7]、[8]。表 4.7 所列
是三種模式在其最佳準則值之下的敏感度和特異度的比較，在 SLR 模式中，其準則值為
0.4013，其敏感度和特異度為 96.7%和 73.7%，BPN 模式之準則值為 0.9033，敏感度和特異
度為 88.3%和 84.2%，GALR 模式之準則值為 0.7006，敏感度和特異度為 96.7%和 82.5%。從
表 4.7 的比較 GALR 模式和 LR 模式敏感度(sensitivity)相同都為 96.7%，優於 BPN 模式的
88.3%。因此，對三種模式之比較從表 4.6 與表 4.7 獲得之結果可知，使用 GALR 模式是能
同時具有推廣性佳及較高敏感度的方法。
表 4.7 模式測試結果比較表
Model Criterion value sensitivity specificity
SLR Model 0.4013 96.7 73.7
BPN Model 0.9033 88.3 84.2
GALR Model 0.7006 96.7 82.5
七、結果與討論
本研究比較了傳統統計方法中的逐步邏輯斯迴歸(SLR)模型與人工智慧方法中的倒傳
遞神經網路(BPN)模型和整合人工智慧方法和統計方法所建構之基因邏輯斯迴歸(GALR)模
型等三種方法，目的就是希望能客觀提供一個有效的輔助工具，提供作為臨床醫師再進一
步採取後續內視鏡診斷、影像學診斷或血清腫瘤標記診斷等等的參考指引系統，以減少人
為判斷的失誤及醫療資源的浪費，而此僅止於提供診斷時的參考，須再加入專業醫師的詳
細檢驗才能做出最後判斷。
從研究結果得到胰臟癌與急性胰臟炎的鑑別診斷模式，病患年齡(X2)、病患有無出現
黃疸(X10)症狀及病患之脂肪脢(X40)指數高低乃鑑別診斷模式之重要性的指標。究竟胰臟
癌與急性胰臟炎的鑑別診斷模式，以往研究顯示大部分只限於影像學診斷、血清腫瘤標記
及基因突變…等，很少有針對人口統計資料、臨床症狀與理學檢查、實驗檢驗變數或疾病
史等作為研究變項。本研究之鑑別診斷模式，就人口統計資料與臨床症狀表現而言，病患
年齡(X2)有顯著的預測性且與胰臟癌之發生是呈現正相關，此外，黃疸(X10)症狀的出現也
胰臟癌的發生也是呈現了正相關，除了人口統計資料與臨床症狀表現的因子之外，同時發
現實驗室檢驗變數中的脂肪脢(X40)指數高低與胰臟癌之發生呈現負相關，具備公共衛生及
預防醫學之意義。本研究的鑑別診斷模式，經由實驗的過程中發現，使用人工智慧方建立
胰臟癌輔助鑑別診斷模式具有不錯的鑑別能力，其中基因邏輯斯迴歸模式 AUC 值為 0.921，
倒傳遞神經網路模式之 AUC 值為 0.895，且基因邏輯斯迴歸模式更有顯著的優於傳統統計
方法的逐步邏輯斯迴歸模式之 AUC 為 0.882；雖然從 AUC 值之比較結果並無法看出倒傳遞
神經網路模式與基因邏輯斯迴歸模式或逐步邏輯斯迴歸模式之間統計上的顯著差異，但若
對三種模式取一最佳門檻值後，所獲得之敏感度與特異度作比較則顯示基因邏輯斯迴歸模
式的鑑別能力最佳其次是逐步邏輯斯迴歸模式最後才是倒傳遞神經網路模式。
