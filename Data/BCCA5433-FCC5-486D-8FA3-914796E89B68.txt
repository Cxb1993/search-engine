 2 
應用螞蟻演算法於求解考慮時間窗、多車種與多場站貨運業的
最適車輛指派與收、卸貨路徑規畫問題之研究 
Applying Ant Colony algorithm to solve Multi Vehicle 
Truckload and Deport Pickup and Delivery Problem with 
Time Windows 
計劃編號: NSC 95-2221-E-216-017 
執行期限：95年8月1日至96年7月31日止 
主持人:賀力行 副教授  中華大學科技管理研究所 
 
一、中文摘要 
 
本研究利用螞蟻演算法求解考慮時間
窗、多車種與多場站情況下之車輛最適指派
與收、卸貨路線規劃問題(MPDPTW)。過去
學者之研究重點多為單一車種考慮時窗限
制時的收、卸貨問題(PDPTW)，且由於多場
站問題中，各場站車輛不一定只服務所屬場
站的需求作業，完成服務後亦不一定必須回
到其出發的場站，再加入多車種的考量，各
車種的車容載貨量不同，因此是一個複雜度
相當高的問題，研究亦相對較少。本研究延
伸應用本研究團隊過去所設計，應用於求解
PCB 插、取件作業有相當良好績效的
MMACS 演算法，配合門檻接受法(TA)求解
MPDPTW，測試例題產生方式為利用國際
標準題庫 VRPTW 轉換產生具有相同最適
解的 MPDPTW 例題 15 題進行測試，問題
規模皆為 100 個節點。測試分析結果顯示
MMACS 求得之近似最佳解平均值與最適
解間的平均差異僅 0.93%，求解績效良好。 
 
關鍵詞： 收卸貨路線規劃問題、螞蟻演算
法、門檻接受法 
 
Abstract 
 
This research extend MMACS and 
combine with Threshold Algorithm (TA) for 
salve Multi Vehicle Truckload and Deport 
Pickup and Delivery Problem with Time 
Windows (MPDPTW), which is effective in 
Printed Circuit Board automation fabricating 
components system. In MPDPTW, every 
truck not necessarily to go back to the 
threshold depot, and they can service all 
demands even though that isn’t belong itself 
Depot. The problem complexity of MMACS 
are highest, there are less relevant results, and 
no benchmark problems. We propose a 
standard transform procedure to conversion 
from VRPTW to MPDPTW with the same 
optimal solution, and succeed producing 15 
problems that have 100 nodes. Testing result 
shows MMACS can be found and differed by 
0.93% of the solution with optimal solution on 
average. 
 
Keywords:  MPDPTW, ACS, TA 
 
二、計畫背景及目的 
 
考慮時間窗限制的車輛指派與收、卸貨
路徑路線規劃問題(Multi Vehicle Truckload 
and Deport Pickup and Delivery Problem with 
Time Windows, MPDPTW)，主要在求解當
存在 m 項收、卸貨需求時，應如何指派有
限的車輛 n 輛進行服務可使總成本最少。其
中必須特別考慮每一需求的服務作業必為
成對出現，一為收貨作業，另一為卸貨作
業，收貨與卸貨作業有其各自的服務地點，
服務時間各有限制，屬於同一需求的卸貨作
業必不可以在收貨作業前先行服務，必須由
同一輛車進行服務，且一個需求也只需由一
輛車服務，然而一輛車子在作業期間內可以
 4 
動式的禁忌演算法[8]，以最小旅行成本為車
輛指派與路徑規劃目標，其中利用懲罰成本
函數機制，考量車輛超載與違反時間窗限制
等狀況，其利用所羅門國際題庫VRPTW問
題經修改後進行測試，有不錯成效，同年該
作者續提出利用反應式禁忌演算法
(Reactive Tabu Search Approach) 以求解
PDPTW問題，首先利用貪心法找出一可行
解後，再利用三階段步驟(RTSA)進行改
善，首先考量單一一對需求加入現有路徑的
狀況，接著考慮現有路徑之間任兩對需求的
交換，最後進行路徑中的路線更佳化。 
 
3.2門檻接受法 
門檻接受法[2,13](TA)Dueck和Scheuer
所言，是當在解題和運算之前，先行決定起
始解以及起始門檻，再根據接受法執行核心
交換法決定是否接受鄰近的新解，最後再依
據門檻的數列值決定何時終止運算。 
 
4、研究方法 
 
本研究針對MPDPTW，應用MMACS
配合TA，設計車輛指派與最適路線規劃模
式，再提出標準轉換作業具有標竿解之
VRPTW國際題庫轉換產生具有相同標竿解
的MPDPTW進行演算法求解績效測試。 
 
4-1 MPDPTW問題定義[12] 
 
本研究問題有以下內容的研究目標、假
設條件和條件限制: 
(一) 目標追求總成本最小，各成本值利用權
重以線性方式組合，分別為； 
1. 總指派車輛數最小，車輛固定成本
與車容量成正比關係； 
2. 總旅行距離最短； 
3. 總服務延遲時間最小，服務延遲懲
罰成本與延遲時間呈正比關係。 
(二) 需求假設 
1. 每一項需求必存在成對的作業，分
別為收貨作業(pickup job)，與卸貨
作業(delivery job)。 
2. 同一需求中的收、卸貨作業點有其
各自的服務地點，時間窗限制也不
盡相同。 
3. 同一需求中收貨作業貨物載量為
q，成對的卸貨作業卸貨量必定為q。 
4. 同一需求中的成對作業必須由同一
車輛在各作業所要求的時間窗內完
成服務。 
5. 同需求中的收貨作業必須在卸貨作
業前先行完成服務，但可與其他需
求中的作業交錯服務，假設P1為需
求1收貨作業、D1為需求1卸貨作
業、P2為需求2 中的收貨作業、D2
為需求2中的卸貨作業時，服務順序
可 能 是 P1->P2->D2->D1 、
P1->P2->D1->D2 、 P1-> 
D1->P2->D2、或 P2->P1->D1->D2
等，但決不可以是P1-> D2->P2 
->D1 或P2->D1->D2->P1等。 
(三) 車輛與服務限制 
1. 可使用車輛數不限； 
2. 依車容量區分車種； 
3. 車輛服務作業時間可小於但不可超
過每日作業時間上限； 
4. 不同場站間之車輛可以相互支援其
他場站之需求作業，但車輛完成每
日服務作業後必須回到所屬場站； 
5. 車輛在服務過程中絕對不可超載。 
 
4.2 啟發式演算法設計 
 
過去學者求解PDPTW問題時多利用兩
階段方式求解，首先針對需求與車輛搜尋可
行的解，然後再利用啟發式改善法針對需求
交換以及路線最適規劃作業進行改善，本研
究求解MPDPTW問題亦沿用相似的方式，
但由於各場站擁有各自的車輛以及不同的
需求，而各需求同時存在一組收、卸貨作
業，各作業的服務點可能與其他場站較為相
近等因素，造成問題相形複雜，條列敘述如
下所示：  
(一) 首先在進行車輛指派作業時先進行訂
單分群與合併的前置作業 
    1. 需求依收、卸貨作業地點分群會先
 6 
業交換時，需考慮每組收、卸貨作業以及時
間窗，車容量和服務順序的限制。路徑間1-0
交換法之目的在減少車子必須的車輛數；在
1-1節線交換法，將目前路徑的一組需求和
其他路徑中的一組需求交換，加入路徑成本
增量最小的位置，重覆執行1-0，1-1路線間
節線交換法，至滿足條件產生為止。 
(五) 應用MMACS機制[10，15] 
MMACS是將ACS與MMAS演算法的
概念而得，當螞蟻演算法在反覆回合開始
時，利用隨機方式產生螞蟻皆不同的起始節
點，尋覓的路徑利用費洛蒙濃度和意念函數
組成，求出該隻螞蟻尚未經過之各節點預先
行走的機率值，根據機率的值尋求下一隻螞
蟻欲前往的節點，直到所有節點皆經過才算
完成路徑，在進行費洛蒙更新制度並導引後
續路徑搜尋機制找到優質解，又由於
MMACS是由ACS機制中考慮AS及Ant-Q演
算基礎得來，故會使用狀態轉移法則，費洛
蒙的濃度和路徑的成本可能會侷限在局部
最佳解，所以在機制上有開發和探索兩種情
況，導入行走路徑較短的螞蟻來更新，降低
多隻螞蟻搜尋時產生停滯不前的狀態，同時
將費洛蒙限制在特定範圍內更新，沿途設置
極大值和極小值的沿途費洛蒙留下的密度
值，針對螞蟻優劣作為更新。 
 
五、績效測試與分析 
 
5.1MPDPTW 問題產生 
 
本研究利用VRP國際題庫中具有標竿
解的問題進行修改，利用VRP例題之最適解
加入MPDPTW問題假設條件，產生出具有
相同最適解的MPDPTW問題，產生方法與
步驟條例如下： 
 
 
圖 1 行徑路徑圖形 
 
(一) 在每條路徑上隨機選擇一個作業點，設
為虛擬的中介場站如圖1所示。 
(二) 每個虛擬場站最多可利用車輛數為兩
輛，針對各路口隨機設定可利用的車輛
數為0、1、2輛三種情況。 
(三) 統計原場站 (CD)可利用的總車輛數
(Ctotal)，設總車輛數為兩倍的原VRP路
線數，其計算方式如下式，針對每個虛
擬場站(D’)中的可用車輛隨機選取行
進路徑(A或B)。 
     Ctotal= Ctotal-∑
=
2
0
'
i
iDC  
(四) 針對於原場站計算出可用的車輛數 
(五) 對於每條行駛路線中的作業點進行收
卸貨需求配對[12]，計算最小車容量，
並設為服務該路線車輛之車容量限制。 
(六) 對於每條路線計算所需行駛的時間
(T)，由已知ㄧ天的工時為(Γ)與路線間
各作業點所需的服務時間(Ttour)，路線
的行駛距離(Distour)和行駛的速度(S)，
路線旅行中包含的作業點(Xtour)，原服
務的時間(Ti)求得，計算方式如下。 
    Ttour=
S
Distour ，T= Ti+−Γ
Xtour
Ttour)(
 
 
5.2 測試結果分析 
 
本研究利用國際標準題庫VRPTW例題
中C1型態問題之C101、C102、C103、C104、
與C105，各轉換產生3題具有相同最適解的
MPDPTW例題，共15題進行測試，問題規
