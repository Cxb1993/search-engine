parallel cameras and a tunable depression-angle 
auxiliary camera need three ears period, but it only 
allowed to one year execution time. So we switch to a 
heterogeneous TACS including a 3D camera and a Kinect 
that Kinect has an off-the-shelf IR-projector and RGB 
color camera. Although Kinect can simply offer the 
depths, the use of Kinect are problematic due to the 
limitations of detection-distance, detection-
resolution and IR-insensible light-reflected surfaces 
as well as heavy IR noises. However, the available 
IR-captured depths are more faithful in general over 
the stereo-matching yielded depths. The binocular 3D-
camera will become a widely adopted apparatus for 
stereoscopic photography in future because of its 
easy calibration and price-popularization 
possibility. Therefore, our proposed heterogeneous 
TACS has the commercialization potential if IR-
projector image refinement and image registration can 
be effectively resolved. Up to now, our TACS has 
achieved efficient refinement of IR-projector images 
and simple registration. By TACS, the refined IR-
projector image can offer valuable reference to 
localize the stereo-matching searching. Thus, to 
improve depth qualities especially error-prone 
texture-sparse regions and speed up depth 
computations can be simultaneously obtained for 
stereo-matching. According to this, the virtual-view 
synthesis by adopting TACS will be better than by 
purely using paired cameras. 
英文關鍵詞： Stereo-video photography, Depth map/image, Stereo 
matching, Kinect Camera. 
 
I 
 
摘要 
近年來立體視訊製作及壓縮技術蓬勃發展，發展及設計未來立體視訊廣播系
統越顯重要。為了配合總計畫投入下一代 3D 電視之研究，本子計劃旨在研究能
普及化立體視訊攝影技術，開發三聯攝影機系統能比兩台平行攝影機達到更快更
正確景深圖之完成，讓立體視訊拍攝在成本限制下，保有堪用率而提昇其普及
化。原先提案我們提出兩台平行及一台可調俯角輔助攝影機來組合三聯攝影機系
統，以大幅提昇畫面作立體匹配時關鍵區景深之正確度。但自動判斷是否為關鍵
區隨可變拍攝角度及攝影機距離顯得相當困難，其關鍵區之深度估計錯誤會導致
明顯違反視覺自然性的失真，所以必須有長期研究，但此子計劃僅通過一年，就
必須修正原規劃，所以我們的系統改以 3D 雙眼鏡頭攝影機及一台 Kinect 攝影機
組成異質三聯相機拍攝系統。 
Kinect 配備一個紅外線投射機(IR-projector)與一個彩色攝影機，由於其價格
便宜容易取得，迄今，Kinect 攝影機成為廣為採用之深度估測器。但有拍攝距離
限制、雜訊多、且對金屬物、鏡面或玻璃等物體無法判斷等問題，但一般而言其
可判斷的區域可信度相對立體匹配就較高。3D 雙眼鏡頭攝影機校正容易，未來
亦可有平價性可能，所以我們所提之異質三聯相機拍攝系統可有潛力商業化。要
達此、其關鍵在於紅外線投射深度圖(IR-projection depth image)之修正及不同攝
影機影像之對位(image registration)，本計畫異質三聯相機拍攝系統已完成快速修
正紅外線投射深度圖，藉此深度圖提供深度當立體匹配在搜尋運作時的重要參
考，令搜尋範圍限縮在立體匹配較無錯誤處，以解決立體匹配於紋理不明顯區域
易錯之問題，來提升立體匹配深度圖之正確性及計算速度。以此低成本攝影技術
得到之深度圖，亦可在視角擴充 (virtual views extension)時、產生更好之虛擬視
角視訊。 
 
關鍵詞： 立體視訊、深度圖、立體匹配、Kinect 攝影機。 
 
III 
 
目錄 
摘要................................................................................................................................ I 
Abstract ......................................................................................................................... II 
目錄.............................................................................................................................. III 
圖目錄.......................................................................................................................... IV 
(一)  前言................................................................................................................ 1 
(二)  研究目的........................................................................................................ 2 
(三)  文獻探討........................................................................................................ 2 
3.1 Kinect 深度攝影機 .......................................................................................... 2 
3.1.1 Kinect 擷取資訊之簡介 ....................................................................... 2 
3.1.2 利用 Kinect 深度攝影機所進行的研究 .............................................. 4 
3.2 特徵點檢測..................................................................................................... 4 
3.2.2 加速穩健特徵 (SURF) ........................................................................ 4 
3.3 立體匹配(Stereo-Matching) ............................................................................ 5 
3.3.1 局部匹配(Local-based Matching) ........................................................ 5 
3.3.2 全域匹配(Global-based Matching) ...................................................... 6 
(四)  研究方法........................................................................................................ 6 
4.1 雙眼攝影機與 Kinect 深度攝影機影像對齊 ................................................. 6 
4.1.1 雙眼攝影機與 Kinect 深度攝影機影像對齊 ...................................... 7 
4.2   Kinect 深度攝影機深度修正 .................................................................... 7 
4.2.1 Kinect 彩色影像與深度圖之間的校正 ............................................... 8 
4.2.2 無法偵測區域之深度分配................................................................... 8 
4.2.3 邊緣保持與去除雜訊........................................................................... 9 
4.3 立體匹配........................................................................................................ 10 
4.3.1 匹配方式............................................................................................. 10 
4.3.2 透過 Kinect 對應有效支援立體匹配 ................................................ 11 
(五)  結果與結論.................................................................................................. 11 
(六)  參考文獻...................................................................................................... 13 
 
V 
 
表目錄 
表 4.1：深度圖經由左右一致性檢測的效果比較.................................................... 11 
 
2 
 
(二) 研究目的 
 
對於多視角影像來說，如何產生出準確的深度圖是非常重要的問題，立體匹
配(Stereo-Matching)技術主要是透過立體視覺的特性，透過在不同視角拍攝下遠
物 與 近 物 其 位 移 量 大 小 會 不 同 ， 對 兩 個 不 同 的 視 角 做 區 塊 匹 配
(Block-Matching)，在不同的兩視角上找出對應點以求得視差(Disparity)，求得物
體的相對距離，因此立體匹配技術的關鍵點在於如何找出正確的對應點，但同一
景物圖像在不同視角上有很大差異，如光線變化、影像雜訊、幾何形狀等，造成
其發展困難。此外，不同視角下所拍攝景物會造成遮蔽(Occlusion)的問題產生，
這是由於在不同的視角下前景的位移量較大，可能因此令背景部分出現新出現的
區域，使其在另一個視角下找不到其對應點，造成深度計算錯誤；而對於紋理平
坦區域的立體匹配，由於紋理平坦區域其紋理相似度極高，因而造成對應點判斷
困難，也會造成深度計算錯誤。 
本一年計劃所規劃”三聯相機拍攝系統”方向是以透過整合 Kinect 深度攝影機降
低立體匹配尋找對應點的困難度，透過 Kinect 給定物體的粗略卻是實際幾何深
度，輔助立體匹配在運作時的參考位置設定、搜尋視窗大小、搜尋位置的決定，
令搜尋範圍縮小以改善演算法複雜度，並改善紋理平坦區域的深度錯誤問題。 
 
(三) 文獻探討 
 
3.1 Kinect 深度攝影機 
 
3.1.1 Kinect 擷取資訊之簡介 
Kinect 總共可產生三種影像，彩色影像、紅外線影像以及深度圖，其中圖 3.2
是 RGB 彩色影像、圖 3.3 是紅外線影像，影像中的斑點就是前述所提到的近紅
外線、而圖 3.4 則是經由計算後得到的深度圖，Kinect 深度攝影機所測得的深度
跟一般的深度相反，比較靠近攝影機的位置，深度值顯示為比較暗(深度值較
小)，而比較遠的地方則比較亮(深度值較大)，對於深度圖無法確定的區域會以黑
色做為表示。 
 
4 
 
在物體的側面邊界處，另一個原因是物體本身的材質，例如透明材質和會反射的
材質(金屬、鏡子…等)，所以如何改進 Kinect 的深度圖加強其信心指數是很重要
的工作。 
 
3.1.2 利用 Kinect 深度攝影機所進行的研究 
 
文獻[5]利用原本 Kinect 的彩色影像，加上各自的權重，讓彩色影像相似於紅
外線影像，在對修改後的彩色影像和紅外線影像作立體匹配，來改進深度圖，但
由於 Kinect 無法同時開啟紅外線影像與彩色影像，因此只可改善靜態之物體。 
文獻[4]則是同時利用了時間和空間上的資訊，來改進 Kinect 的深度圖，他們
先對 Kinect 中得到影像作雙向濾波器(Bilateral Filtering)，目的是為了減少空間上
物件邊界的雜訊。這些做過濾波後的影像接著被用於重複地建立一張深度圖模
型，這可用於減少深度測量的時間波動，在這個模型中包含更可靠的深度值，可
以用於推導出沒有測量到資訊的像素，也就是先前所提及的黑色區塊部分。 
 
3.2 特徵點檢測 
 
Kinect 深度攝影機與雙眼攝影機之間由於其相機之間的差異性，如何透過影
像校對將像素對齊便是很大的挑戰，我們必須透過特徵點檢測找出雙攝影機特徵
點之對應，來達到雙攝影機像素對齊(registration)的效果。 
3.2.2 加速穩健特徵 (SURF) 
 
加速穩健特徵(Speeded Up Robust Features, SURF)[1]是根據”尺度不變特徵
轉換(Scale Invariant Feature Transform, SIFT)[8]的方法進行修正的加速演算法，
SURF 使用了積分影像(Integral Image)的技術來加速運算速度，只需取矩形周圍
四個頂點的值來做計算就可得到區域內像素之和，對於大尺度的影像更能突顯其
優勢，而 SURF 在尋找特徵時使用海森矩陣(Hessian Matrix)來尋找特徵點，SURF
同樣須建構尺度空間，不同於 SIFT 的每層圖像需依賴於前一層圖像，SURF 則
是不改變圖像尺寸而是改變濾波器大小，因而節省大量運算時間，而 SURF 在決
定特徵點方向時使用了哈爾小波(Haar Wavelet)來進行梯度運算來維持圖像旋轉
的不變性。SURF 是本計劃用以作點對點 registration 時，建立 homograph transform 
matrix 所選擇之特徵。 
 
6 
 
(1) 絕對差值和(Sum of Absolute Difference, SAD) 
(2) 平方差值和(Sum of Squared Differences, SSD)  
(3) Census 轉換(Census Transform) 
 
3.3.2 全域匹配(Global-based Matching) 
 
全域匹配的方法會將問題做為一個能量最小化的問題，在參數中會加入一個
平滑參數，考慮與周圍像素的關係，找出視差最優解，常見的作法有動態規劃
(Dynamic Programming)、可信度傳遞(Belief Propagation)、圖形分割(Graph-Cut)
等。 
 
(四) 研究方法 
 
因本子計畫原定以三個同質 CCD 攝影機組成三聯相機拍攝系統，其中一台
拍攝角度可調，提升立體匹配時深度計算正確度之，因原提案三年僅通過一年，
原規劃必須修正，所以我們的系統改以 3D 攝影機及一台 Kinect 攝影機組成異質
三聯相機拍攝系統，我們使用 Kinect 來輔助 3D 攝影機，藉此改善立體匹配時的
速度以及精確度。 
立體匹配最大的困難點在於對於低紋理地區與紋理相似的區域難以判別其
真正的對應點，而透過 Kinect 深度攝影機可簡易的測得物體的真實深度，利用
Kinect 深度攝影機給定物體初始深度以改善立體匹配對應點搜尋不易的問題，對
於深度圖的產生，本研究透過架設雙眼攝影機與 Kinect 深度攝影機來完成，其
系統架構圖如圖 4.1 所示。 
 
4.1 雙眼攝影機與 Kinect 深度攝影機影像對齊 
 
要透過雙眼攝影機與 Kinect 深度攝影機來改善深度圖的準確性，其最大的
困難點在於如何讓兩解析度與規格皆不同的攝影機進行像素之間的對齊，Kinect
深度攝影機可同時捕捉彩色影像與其對應的深度圖影像，這對兩攝影機的對齊提
供了很大的幫助，具體來說，我們可以透過 Kinect 彩色影像與雙眼攝影機其中
一個視角的影像進行對齊，便可使其對應到 Kinect 的深度圖影像。為了使兩攝
影機圖像之間有良好的對齊效果，為此在拍攝時，我們需先透過手動調整攝影機
的方式盡量讓兩攝影機之間所拍攝到的視野差異縮小，之後我們便可透過特徵點
分析技術，找出兩影像中重要的特徵點對應。 
8 
 
精化，加強其使用的信心指數。 
 
4.2.1 Kinect 彩色影像與深度圖之間的校正 
 
對於 Kinect 的彩色影像與深度圖，我們可以簡單地透過 OpenNI 裡面的函數
直接進行校正對齊，經由校正之後我們才可將深度圖拿出來使用。 
 
 
圖 4.3：Kinect 的彩色影像與校正後的深度圖 
 
在經由校正後，深度圖的外圍區域會變成無法判讀，因此我們會先將外圍無
資訊的區域進行裁切，保留影像中有用途的部分，這是為了避免之後深度圖的填
補處理產生影響，最後其結果如圖 4.5 部分所示。 
 
 
圖 4.4：裁切過後的彩色影像與其深度圖 
 
4.2.2 無法偵測區域之深度分配 
 
為了給予 Kinect 無法偵測到的區域部分給定深度值，本論文提出了對於靜
10 
 
4.3 立體匹配 
立體匹配用於對雙眼攝影機所產生的兩個視角影像進行比對找出對應點求
得視差(Disparity)，以求得物體之間的相對距離。 
 
4.3.1 匹配方式 
立體匹配採用絕對差值和的方法可簡單又快速的找到初始深度，視差修正採
用常見的左右一致性檢測(Left-Right Consistency Check)，其概念為左右視角的對
應位置其視差應該是相同的，透過左右一致性檢測可以找出影像中遮蔽的點與匹
配錯誤的點，主要有以下三個步驟。 
 
(1) 左右一致性檢測 
首先必須有左視角與右視角的影像與視差圖，而對於左視角的一點(x,y)其視
差為 d，在右視角的對應位置上(x-d,y)的視差值也應為 d，若其視差差異大於 1
的話則將其標記起來，表示此點為有問題的區域，如圖 4.7 所示。 
 
  
(a) 左視角深度圖               (b)遮蔽與錯誤區域標記 
圖 4.6：左右一致性檢測示意圖 
 
(2) 遮蔽填補(Occlusion Filling) 
 
遮蔽填補的方法為先由水平往左與往右找到第一個非標記區域的點，由於遮
蔽處應為背景處，因此比較兩點的視差值，將視差值較小的值填入。 
 
(3) 中值濾波(Median Filtering) 
 
通過遮蔽填補後，可以給定較好的視差，但由於只考慮水平方向的貼補，因
此深度圖的垂直性結合較差，透過一個中值濾波器可以改善此問題。 
12 
 
們可以看出藉由 Kinect 做強化立體匹配在背景區域改善了不少的結果。 
 
  
(a)左眼影像                           (b)右眼影像 
  
(c)立體匹配結果             (d) Kinect 強化立體匹配結果 
圖 5.1：針對低紋理區域進行比較 
 
結論 
 
本研究透過提出一套以 Kinect 深度攝影機來強化立體匹配的系統，透
過 Kinect 的初始深度做參考，可提供立體匹配時良好的搜尋方向，透過實
驗結果我們可以看出此套系統的確對立體匹配的運作有著很大的幫助，對於
紋理相似地區的視差搜尋準確性提升了不少。經 3D 攝影機大幅降價，或進
一步用兩分離低價一對相機取代，將我們三聯式相機拍攝系統推廣普及化，
則讓一般收入使用者就能購買。隨身攜帶作即時拍攝後，很快就能利用三聯
式相機拍攝系統得到比純用立體匹配所得更正確深度，再由其 3D 攝影機所
拍出 two views 加上所產生無不合理深度錯誤深度圖，去合成品質不錯僅需
少計算量修正之 virtual views，來完成至少五個 views 之裸眼立體視訊。 
14 
 
images,” Journal of Display Technology, pp.125-140, Sep. 2005. 
[15] R. Zabih, J. Woodfill, “Non-Parametric Local Transforms for Computing Visual 
Correspondence,” Proc. Third European Conf. Computer Vision, pp. 151-158, 
1994. 
間，重建管子影像；這些像水管之管子，有橫有豎有前有後、有不同角度、還有
由近至遠(管徑會有由粗而漸細之透視效果)，…，等等穿越雜錯充斥於此房間；
使用者以此機器在每個管子選兩點拍，得兩個半橢圓環或半圓環形影像(另半邊
在另一側遮住拍不到)，先依所存plate模型建回兩橢圓環或圓環形影像，再用平
滑內插預估驗算法重建整根管子影像，進而重建整個房間管子的影像，此影像亦
可於3D立體顯示器顯示。此種組合機器不但便宜，需要儲存資料不多，拍攝完
時間又不長。如果進一步把拍到兩個半橢圓環或半圓環形影像、以幾何特徵或其
對到幾何模型index作儲存則儲存資料量又更低，此研究提供低價位、低深度解析
度 Kinect一個很有價值、簡單又創新實用方式，讓人對日本大多工程師和學者偏
好踏實作實務研究很佩服。 
100年度專題研究計畫研究成果彙整表 
計畫主持人：章定遠 計畫編號：100-2221-E-415-014- 
計畫名稱：應用於未來 3D 電視系統之立體視訊壓縮與內容生成技術--子計畫三：應用於 3D 廣播攝影
機之高精度景深估測與立體視訊壓縮技術之研發 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 5 5 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 4 4 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 2 2 100%  
研究報告/技術報告 0 0 100%  
研討會論文 3 3 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
