在高密度印刷電路板設計下的匯流排導向繞線系統開發 
“Development of Bus-oriented Routing System in Dense PCB Designs” 
計畫編號：NSC99-2221-E-216-054 
執行期間：99 年 8 月 1 日 至 100 年 7 月 31 日 
主持人：顏金泰 中華大學資訊工程學系教授 
 
一、 中文摘要 
在高密度的印刷電路板設計，所有電路元
件被擺置在電路板上，並且所有的連線的連接
藉由跳脫繞線和匯流排繞線來完成。本計劃完
成滿足匯流排長度限制並達成最少繞線層數
與面積的繞線自動化設計系統部份，為了滿足
匯流排長度限制限制，並且可利用較少的繞線
層完成匯流排的繞線，此階段的繞線自動化設
計系統大致分為考量繞線層數最少化的匯流
排分層配置、單層有次序的跳脫繞線、完整印
刷電路板的跳脫繞線、已知障礙物之最長繞線
格路徑生成與符合長度限制的匯流排繞線等
五個主要部份。在高密度印刷電路板繞線設計
自動化中，首先在考量繞線層數最少化的匯流
排分層配置過程，利用較少的繞線層將所有匯
流排配置在這些繞線層上。根據已知的連線順
序，在單層有次序的跳脫繞線過程，將這些連
線由腳位跳脫連接到元件邊緣位置。進一步使
用有次序跳脫繞線的結果，在完整印刷電路板
的跳脫繞線過程，高密度的印刷電路板上的連
線將完成所有跳脫連接，以符合單層匯流排繞
線的目的。在已知障礙物之最長繞線格路徑生
成過程，已知具有障礙物繞線格內的一對端
點，一條具有避開障礙物能力的最長路徑將可
產生。最後基於具有避開障礙物能力最長路徑
得的結果，在符合長度限制的匯流排繞線過
程，高密度的印刷電路板上的所有連線將完成
符合長度限制的繞線。 
英文摘要 
In dense PCB designs, all the circuit 
components are placed and all the nets are 
connected by escape routing and bus routing. To 
satisfy the length-matching constraints in buses 
and minimize the number of routing layers in 
PCB designs, the PCB routing system includes 
the following parts: Layer minimization and 
assignment of routing buses for PCB designs、
Ordered escape routing 、 Full-board escape 
routing、Obstacle-aware longest-path generation 
in routing grids and Length-matching bus 
routing. In layer minimization and assignment of 
routing buses for PCB designs, all the routing 
buses are assigned onto a minimal set of routing 
layers. According to the ordered sequence of a 
given set of routing nets, all the nets can be 
escaped from pins to the component boundary in 
ordered escape routing. Furthermore, based on 
the concept of ordered escape routing, all the 
nets in a given PCB can be escaped for 
single-layer bus routing in full-board escape 
routing. In obstacle-aware longest-path 
generation in routing grids, given a pair of a start 
terminal and a target terminal in routing grids 
with obstacles, the longest path with obstacle 
avoidance can be generated. Finally, based on 
the result of an obstacle-aware longest-path, all 
the nets in a given PCB can be further routed to 
satisfy the length-matching constraints in 
length-matching bus routing. 
 
二、 計畫的緣由與目的 
隨著晶片內部的複雜度之提升，代表著單一
晶片 I/O 的接腳數漸漸變多，使得在固定面積下，
PCB 板上的連線數驟增[1-3]，近年來因為單晶片
的 I/O 接腳數持續的增加且系統複雜度的提升，
隨之而來的連線的擁擠度與可繞度問題，造成 PCB
板上繞線的問題愈加困難。現今晶片層次的輔助
設計(CAD) 繞線工具並不適用於電路板層次，因
此電路板層次的繞線設計，必須邁向自動化，進
一步發展電路板層次的繞線自動化系統是必要
的。對於電路板層次繞線而言，可切分成繞線層
設定、跳脫繞線和匯流排繞線。針對繞線層設定，
一般以匯流排線導向設定[4]為主，利用最大共同
序列的方法找到分配相同繞線層的匯流排，使得
循序完成繞線層設定，但是這樣的處理方式使得
線。全域繞線的繞線路徑可以藉由搜尋節點的最
短路徑來取得，節點對應到腳位的資訊，即是跳
脫腳位到邊界腳位或是中繼點到邊界腳位的繞線
路徑。根據最小寬度與空間規則，相鄰腳位之間
的繞線通道可以切割成許多的繞線格線，如果給
定一個陣列裡的繞線區塊的話，則每個繞線區塊
的細部繞線可分成兩個步驟，跨越點的設定和實
際路徑的設定。在跨越點的設置中，全域繞線的
線段利用跨越點來連接到不同的繞線區塊，在全
域繞線中，這些跨越點可以有彈性的設置在繞線
格線上，只要滿足在單繞線層中線段不相交，給
定一陣列的基本繞線區塊之後，依序將每個繞線
區塊的跨越點設置完畢。設置完所有繞線區塊的
跨越點之後，在繞線區塊上所有的連線皆不能相
交。在實際路徑的設定中，所有繞線區塊內的連
線皆可以被分類成 型態的連線和 型態的連線來
完成實際路徑設定。如圖二所示，24 條可繞度為
導向的連線其全域繞線可以有彈性的分布在陣列
的繞線通道中做完全域繞線，做完跨越點的設定
與實際路徑的設定之後，有次序的跳脫繞線的細
部繞線已完成。 
 
圖二單層有次序的跳脫繞線結果 
 
C. 完整印刷電路板的跳脫繞線 
對完整印刷電路板的跳脫繞線，給定一個二
維腳位矩陣集合，包含 n 條要做跳脫繞線的連線，
由每個二維的腳位繞線到矩陣的邊緣使得確保執
行單層匯流排繞線。因為跳脫繞線在單繞線層中
進行，所以要確保在繞線的過程中任兩條連線都
不能有相交的情形，而且兩相鄰的腳位間的空間
是有限的，所以根據給定的空間限制來做繞線。
完整印刷電路板的跳脫繞線分成四個主要步驟：
匯流排繞線順序選取、腳位編號轉換、有次序的
跳脫繞線和腳位編號恢復。 
對於匯流排繞線順序選取，匯流排兩邊元件
間的各列腳位，依序建立連接關連圖，為了維
持單繞線層完成匯流排繞線，適度將腳位順序
調整使得匯流排沒有發生相交的現象，所得之匯
流排繞線順序做為跳脫繞線之繞線順序。依據選
取的匯流排繞線順序，依序重新編排連線號碼為， 
，進一步將相關 個腳位編號轉換為相對
連線號碼。經過所有匯流排連線腳位重新編排，
匯流排兩邊元件間的跳脫繞線可視為兩個單邊的
有次序的跳脫繞線，依據先前所提出的有次序的
跳脫繞線解法，即可完成兩邊元件間有次序的跳
脫繞線，也就是完成整個匯流排兩邊元件間的跳
脫繞線。當所有匯流排連線已完成兩邊的有次序
的跳脫繞線，確定維持單繞線層的匯流排繞線，
便將先前重新命名的連線編號，回復成其原始的
編號。如圖三所示，依照兩元件間的跳脫繞線，
可以建立各列腳位之連接關連圖，進一步完成
13 條連線最後的同時跳脫繞線結果。 
 
7
5
11
8 109
43
21
12
6
11
8
10
9 4
2
1 
12
3
7 
6
6
13
13 
 
圖三兩元件同時的跳脫繞線結果 
D. 已知障礙物之最長繞線格路徑生成 
單層的繞線平面可視為繞線格的集合，線段
的長度則是路徑經過的格數，線段在格子內可以
走水平或垂直，如果將格子視為障礙物，則將格
子變成黑色的，任何繞線平面上都可以將四周圍
都設成障礙物，線段的路徑經由走水平或垂直的
方式通過格子並連接起點和終點。要確保在有障
礙物條件找尋最長繞線格路徑，根據給定的空間
與障礙物限制，已知障礙物之最長繞線格路徑生
成分成三個主要步驟：無障礙物之矩形繞道連
線、內部矩形繞線區域切割和最長路徑產生。 
    將一塊具有障礙物的內部矩形繞線區域上切
割出多個互不相交且沒障礙物的矩形小區塊。此
一分割步驟由分割遞迴以及邊界遞迴完成。一開
始將角落格加進佇列，對於佇列裡面的每個角落
格，利用掃描線方法屏除障礙物，可以找到包含
該角落格且面積最大的矩形區域，而每當產生一
個矩形區域，新的角落格會隨之產生並加入佇列
中，一直做到佇列中的所有角落格都被用來產生
矩形區域，則分割遞迴在此結束。利用分割遞迴
產生的結果，再度形成新的外部邊界，並呼叫分
割遞迴，如此循環至沒有外部邊界為止，至此所
有矩形區域將包含所有的繞線格子，則邊界遞迴
結束。基於分割區塊所產生的相鄰關係圖，最長
路徑的產生分成初始路徑、額外繞道路徑及內部
繞道。初始路徑：基於 RS和 RT兩頂點在圖形中的
位置，利用廣度搜尋來決定初始路徑，對應到相
鄰關係圖形中，決定兩相鄰的區域中的連接點來
減少無法經過的格子數目，並且初始路徑的繞道
行政院國家科學委員會補助國內專家學者出席國際學術會議報告 
                                                                 99 年 12 月 6 日 
報告人姓名 顏金泰 服務機構
及職稱 
資訊工程學系 
教授 
     時間 
會議 
     地點 
99/10/3-99/10/6 
荷蘭阿姆斯特丹 
本會核定
補助文號
 
會議 
名稱 
 (中文) 2010 年第二十八屆國際電機電子工程師協會國際電腦設計會議 
 (英文) 2010 28nd IEEE International Conference on Computer Design 
發表 
論文 
題目 
 (中文) 針對降低時序功率所設計的可繞性導向的正反器整合程序 
  
(英文) Routability-Driven Flip-Flop Merging Process for Clock Power Reduction 
報告內容應包括下列各項： 
一、參加會議經過 
10/3 由桃園國際機場搭荷蘭航空 KL0878 班機抵達阿姆斯特丹。10/5 早上發表論文於發表論文於
Session 3.1: Advances in Physical Design and Synthesis。10/9 由德國法蘭克福轉阿姆斯特丹搭荷蘭
航空 KL0877 班機回臺灣桃園國際機場。 
 
二、與會心得 
ICCD 首次在歐洲荷蘭阿姆斯特丹舉行，對於電腦設計研究，國內各大學也積極投入研究，台灣電
子工業的發展須由製造為導向轉型研究為導向來發展，才能在電子產業開創新的局面，因此投入
電子電路與系統的研究發展應為台灣電子業轉型的關鍵。 
 
三、考察參觀活動(無是項活動者省略) 
無 
 
四、建議 
國內大學研究團隊應多了解電腦設計之研究成果，政府單位應多補助經費鼓勵大學研究成果多多
發表於國際學術研討會，以提升國內研究成果。 
 
五、攜回資料名稱及內容 
ICCD 論文光碟片 
 
六、其他 
 
 
 
 
 
99 年度專題研究計畫研究成果彙整表 
計畫主持人：顏金泰 計畫編號：99-2221-E-216-054- 
計畫名稱：在高密度印刷電路板設計下的匯流排導向繞線系統開發 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 2 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 4 4 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 3 3 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
