 2
中如何完成無碰撞之路徑規劃問題。Jiang
等人[7]提出於凸狀多邊形障礙物的 3D 空
間中，利用 visibility graph 技巧完成最短
路徑規劃。Saleh 等人[8]討論路徑最佳化
，路徑的選取將有效地縮短路徑行程，並
藉由遺傳基因演算法遞迴排序獲得整體
最短路徑，有效解決 3D 環境中之路徑規
劃問題。謝宛霖等人[9]探討三度空間中任
意形狀飛行器之最佳路徑規劃問題，提出
運用單球、多球模型來模擬飛行器，藉虛
擬障礙物擴張法簡化飛行器與障礙物的
複雜關係，並利用平移及旋轉技巧順利完
成路徑規劃。然而，上述研究僅針對單一
飛行器做探討，接續之前研究，本計畫針
對多組飛行器於三度有限空間中的路徑
規劃問題進行研究，並於含權重區域之有
限空間提出新的演算法來完成路徑規劃
。由於單一飛行器完成路徑規劃過程，僅
需考慮與障礙物間的避碰，而多組飛行器
尚需避免飛行器之間的碰撞發生，故本計
畫所提出含避碰程序的最佳路徑規劃方
法將能確實達到多組飛行器避碰之目的
。此方法仍以之前研究結果為基礎，運用
球狀模型簡化模擬飛行器，先藉虛擬障礙
物擴張法將飛行器與障礙物的複雜關係
簡化，再以 HGMR 為核心理論，並利用有
限空間最短路徑演算法[10]為核心核演算
法進行路徑規劃。重要的是，本計畫在處
理多組飛行器避碰問題時，特別加入碰撞
偵測技巧，藉兩兩飛行器間之安全距離判
斷是否發生碰撞，並以飛行器領域
(Aircraft Domain) [11]的觀念進行避碰處
理，解決多組飛行器間可能發生碰撞的危
機。 
另外，為了讓飛行器能在不同的地形
上完成最佳路徑規劃，於是利用權重區域
(Weighted Regions, WR)的觀念來表現不
同的地形。權重區域的問題敍述如下：假
設 3D 有限空間存在多組區域，而每一區
域都有其權重值，此權重值代表著移動機
器人通過此區域所需花費的成本(即每單
位距離)，若由起點至終點規劃移動機器人
路徑時，即需找尋總成本最低的路徑。有
關權重區域的研究也很多，如 Mitchell 等
人[12, 13]提出類似光學模式的論據，即在
區域邊界按照 Snell’s Law of Refraction 可
得到局部最佳路徑。Ning 等人[14]藉利用
模糊集合理論，描述推論不確定的區域，
使自主車通過權重區域到達終點時，藉由
建立決策函數來決定可接受的通過成本
。Hughes 等人 [15]利用 Wavefront-Like 
Propagation Method 來決定移動機器人於
權重區域中之次佳路徑。Reif 等人[16]則
利用有效率的近似方法來解決權重區域
的最短路徑問題。Rowe 等人[17]提出通過
權重區域需找尋最佳路徑地圖來完成路
徑規劃。Szczerba 等人[18]則提出於 2D 或
3D 含權重區域的環境，如何計算兩點明
確位置間之最短路徑，並以 frame- 
subspace 資料結構為基礎。而本計畫為解
決權重區域的問題，考慮不同權重值的自
由空間及相互關聯的加重權值關係，特別
加入一組參數值來表示各種不同權重值
的空間區域，使飛行器通過權重區域時，
將考量通過此區域所需花費成本，俾便順
利完成路徑規劃。 
有關本計畫其餘章節編排架構說明
如下：第二章節針對所使用的資料結構及
參數、變數做介紹，並探討運用的避碰方
法。第三章節探討多組飛行器含避碰程序
之路徑規劃。有關飛行器於三度有限空間
含權重區域應如何完成路徑規劃，將於第
四章節提出有效方法解決。最後，對本計
畫做結論並針對未來研究方向提出具體
建議。 
 
三、資料結構及避碰方法 
本計畫探討有限空間中多組飛行器
之路徑規劃，由於飛行器組數增多，因而
任意兩組飛行器發生碰撞之機率亦隨之
增加，為了避免發生碰撞情形，即需進行
避碰處理，於是提出多組飛行器含避碰程
序之最佳路徑規劃演算法。另外，針對飛
行器於含權重區域的路徑規劃，藉由考量
不同區域權重值(Regional Weight)的影響
，提出了含權重值之有限空間最佳路徑規
劃演算法。基本理論與先前研究[9]類似，
先將工作空間方塊化，並對飛行器進行球
狀模型之模擬(如圖 1 所示)，俾便求出障
礙物需擴張的範圍，再利用有限空間最短
路徑演算法，求出飛行器在工作空間中經
由起點到終點的最佳路徑。詳細過程不再
累述，僅就本計畫欲探究問題所提出演算
法相關做介紹。 
 
(a) 對每一時間點計算其安全距離 
 
 4
(b) 若Distance ≦ r1 + r2 表示有碰撞發生 
圖2 多組飛行器之碰撞偵測圖解 
3.2.2 避碰 
    多組飛行器進行路徑規劃時，若先偵
測出會在某一時間點產生碰撞，此時，即
需藉飛行器領域的觀念進行避碰處理。首
先，在此一時間點擴張出飛行器領域並視
為一個安全避碰空間；其次，將其他須讓
路之飛行器於此一時間點的方塊集合均
視為不可通行的方塊；最後重新計算其最
佳路徑。本計畫將提出多組避碰副程式藉
以避開碰撞點並達到避碰目的，進而安全
到達終點完成最佳路徑規劃。目前，僅假
設各組飛行器均在同一固定速度下完成
最佳路徑規劃，尚未考慮各組飛行器之速
度差異性問題。 
四、多組飛行器含避碰程序路徑規劃 
相較單組飛行器最佳路徑規劃演算
法[9]，由於需對多組飛行器計算其最佳路
徑，故飛行器發生碰撞的機會就有可能產
生。為順利完成多組飛行器於有限空間的
路徑規劃，最簡單且直接的解決方案就是
對每一組飛行器分別做最佳路徑處理。然
而隨著飛行器組數增多，任意兩組飛行器
發生碰撞之機率亦隨之增加，由於無法讓
各組飛行器在其規劃路徑上彼此不發生
碰撞，為避免碰撞發生，即需進行避碰處
理。而本計畫將提出多組飛行器含避碰程
序之最佳路徑規劃演算法解決路徑規劃
問題，並藉程式模擬來說明演算法的正確
性。本演算法的時間複雜度，僅多花費計
算多組飛行器的路徑規劃時間，故以單球
或多球模型模擬飛行器完成路徑規劃，整
體時間複雜度分別為 O(lN)及 O(lsN)，其
中，l 表示飛行器的組數，s 表示判斷點數
目，N 為方塊圖上之方塊數。 
Distance_ Check 4.1 多組飛行器含避碰程序之最佳路徑規
劃演算法 
為順利完成本演算法，將增加兩組副
程式：多組碰撞偵測及避碰。主要功能係
於路徑規劃過程先偵測多組飛行器間是
否產生碰撞危機及進行避碰處理。 
Distance ≦ r1 + r2 
副程式：多組碰撞偵測 
STEP 1：對每組飛行器做最佳路徑規劃並
求得 。 lpathLL
STEP 2：計算每組飛行器間的碰撞點 
 STEP 2.1：從 及 中，分別取
出一個 Vi,j,k 和 。 
l
pathLL
'l
pathLL
'',', kjiV
 STEP 2.2：針對同一時間點，兩兩比較相
互距離，若 Dist( , )kjiV ,, '',', kjiV 'll rr +≤
，表示將發生碰撞並紀錄下碰撞點。 
END {多組碰撞偵測副程式} 
副程式：多組避碰 
STEP 1：對發生碰撞的 Vi, j, k擴張出安全
避碰空間。 
 STEP 1.1：比較碰撞的飛行器經單球模型
求出之半徑，若 ，則對
Vi, j, k 向外洪汎至自由空間每
一方塊並更新其 。 
'll rr ≥
l
kjiAT ,,
STEP 1.2：根據 值，則lr ⎣ ⎦l kjiAT ,, ≦ 之
方塊即為安全避碰空間。 
lr
END {多組避碰副程式} 
演算法 1：多組飛行器含避碰程序之最佳
路徑規劃 
STEP 1：獲得每組飛行器之最佳路徑。 
     對每組飛行器從起點 到終點 利
用有限空間最短路徑演算法進行路徑
規劃並獲得每組最佳路徑，l 表示飛行
lS lD
STEP 2：更新方塊 Vi, j, k的 AT 值。 
        若 new_ <  l kjiAT ,, kjiRW ,,× l kjiAT ,,
則 = new_  l kjiAT ,, l kjiAT ,, kjiRW ,,×
END {Update_AT＆Vis_With_WR( )副程式} 
演算法 2：含權重值之有限空間最佳路徑
規劃 
BEGIN 
STEP 1：初始值設定 
設定所有方塊的旗標參數 = 
FALSE、到達時間參數 = ∞。設定
index = 0，取得起點 S 和終點 D 座標位
置。將起點座標存入 並設定起點 S
的 = TRUE 及 = 0。若為障礙
物則 RWi, j, k = ∞，反之，若為可通行區
域的空間則 RWi, j, k = 1，若屬不同權重
值的權重區域則以 RWi,j,k大於 1 的正值
表示。 
l
kjiVis ,,
l
kjiAT ,,
l
indexLL
l
kjiVis ,,
l
kjiAT ,,
STEP 2：計算 AT 值 
 STEP 2.1：從 取出方塊 Vi, j, k的座標
(i, j, k)。 
l
indexLL
 STEP 2.2：設定(i, j, k)的 = TRUE
並取得 Vi,j,k 的所有相鄰方塊
座標(i’, j’, k’)。 
l
kjiVis ,,
 6
 STEP 2.3：對(i, j, k)之所有相鄰方塊座標
(i’, j’, k’)更新其 AT 值及 Vis
值。 
CASE 1: 當 1''' 222 =−+−+− kkjjii ， 
則 Update_AT＆Vis_With_WR ( , 
+ ) 
'',', kjiV
l
kjiAT ,, )1( ',',' kjiRW×
CASE 2: 當 2''' 222 =−+−+− kkjjii ， 
則 Update_AT＆Vis_With_WR ( , 
+
'',', kjiV
l
kjiAT ,, )2( ',',' kjiRW× ) 
CASE 3: 當 3''' 222 =−+−+− kkjjii ， 
則 Update_AT＆Vis_With_WR ( , 
+
'',', kjiV
l
kjiAT ,, )3( ',',' kjiRW× ) 
 STEP 2.4：重複 STEP 2.1 直到 裡無
任何方塊的座標。 
l
indexLL
STEP 3：歸類排序 
 STEP 3.1：從 TL 取出座標：(i’, j’, k’)。 
 STEP 3.2：將(i’, j’, k’)存入  ⎣ ⎦l AT kjiLL 2mod',','
 STEP 3.3：設定 = TRUE l kjiVis ,,
 STEP 3.4：重複 STEP 3.1 直到 TL 裡無任
何方塊的座標。 
STEP 4：處理下一層之方塊 
        index = ( index + 1 ) mod 2 
STEP 5：重複 STEP 2 直到 中都沒有
方塊座標。 
l
indexLL
END {含權重值之有限空間最佳路徑規劃
演算法} 
5.2 模擬結果 
    為驗證本計畫所提出演算法之正確
性，經由程式且讀入含權重區域的 3D 地
理環境，如圖 5 所示從起點 S 至終點 D 所
求路徑即為模擬結果。圖 5(a)深灰色區塊
為含權重值較重的危險區域(RW 值設為
500)，圖 5(b)中，將原本含權重值較重的
權重區域，改變其 RW 值，使此區域變為
含權重值較輕(RW 值設為 1.2)且不至於強
烈影響 AT 值，藉由含權重值之有限空間
最佳路徑規劃演算法進行路徑規劃，比較
不同區域權重值對飛行器的影響，可得知
飛行器將會選擇直接穿越含權重值較輕
而不影響安全的區域，而含權重值較重的
區域將被視為危險區域，故會繞道避開。 
 
S 
RW = 500 
D 
(a) 飛行器避開權重值較重之權重區域
(RW = 500) 
 
S 
RW = 1.2 
(b) 降低權重區域權重值(RW = 1.2)，則選
擇直接穿越 
D 
圖5 飛行器通過不同權重區域之最佳路
徑規劃 
 8
[15] K. Hughes, A. Tokuta and N. 
Ranganathan, “Trulla: An Algorithm 
For Path Planning Among Weighted 
Regions By Localized Propagations,” 
Proceedings of the lEEE/RSJ Inter- 
national Conference on Intelligent 
Robots and Systems, Vol. 1, pp. 469- 
476, July 1992. 
[16] J. Reif and Z. Sun, “An Efficient 
Approximation Algorithm for 
Weighted Region Shortest Path 
Problem,” In Proceedings of the 4th 
Workshop on Algorithmic Foundations 
of Robotics, March 2000. 
[17] N. C. Rowe and R. S. Alexander, 
“Finding Optimal-Path Maps for Path 
Planning Across Weighted Regions,” 
International Journal of Robotics 
Research, Vol. 19, No. 2, pp. 83-95, 
2000. 
[18] R. J. Szczerba, D. Z. Chen and J. J. 
Uhran, “Planning Shortest Paths 
Among 2D and 3D Weighted Regions 
using Framed-Subspaces,” Internation- 
al Journal of Robotics Research, Vol. 
17, pp. 531-546, May 1998. 
 
