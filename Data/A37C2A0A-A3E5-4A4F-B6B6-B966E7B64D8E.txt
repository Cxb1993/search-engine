NSC 
2 
?? ???? 
?????????????????????????????????????
???????????????????????????(NSC93-2215-E009-050)??
????????????????????[1,2]???????????? IEEE Tran. 
VLSI systems ? Journal of Electronic Testing: Theory and Applications (JETTA)
????[3,4]? 
?????????????(NSC94-2215-E009-081)??????????????
???????????????????????????????????????
???(ISSCC 2006)?? 2.5 ????????????????? IEEE Journal of 
Solid-State Circuits (JSSC) [5]?????????????? IEEE ATS [6]???????
??????????Σ−∆ ADC ?????????????????? 13.3K gates ?
??? 76 dB???????????(Signal to noise and distortion ratio??? SNDR)? 
????????????????????? signal conditioning circuit ????
??????????????????????????? (track-and-hold)?????
??????????????????? 0.9V ? 8-bit ??????????????
???(SA ADC) ?? TSMC 0.18µm CMOS???????? ADC?????????
? sensor????????? signal conditioning circuit?????????? CIC???
? ADC?????????????????????????????(single-ended)
??? 
HSPICE???????????? 111KS/s???????????? peak SNDR
?? 48.23dB????????(Effective resolution bandwidth??? ERBW)??????
????Nyquist bandwidth???? ADC??????? 1.76µW? 
 
 
?????????????????????????? 
NSC 
4 
 
?? ???????? 
?????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
????????????????MEMS????????????????????
????????? 
?????????????????????????????????????
??????(signal conditioning circuit)?????????????????? 
?????????????????????????????????????
???????????????????????????????????????
????????? ADC?????????????????????? ADC???
????? 
??????????????????? ADC????????????????
?????????? ADC??????????????[5,7-10]??? SA ADC??
??????????????(single-ended)????????????????? 
?????????????????????????????????????
???????????????????????????????????????
???????????????? PMOS? NMOS????????????????
VDD??????????????????????MOSFET???????????
???????????????????? (sub-threshold) ??????(cut-off) ??
????? (triode)???????????????????????? cascoding ?
gain-boosting??????? 
???????????8-bit?????????????????????? 1 ?
?[11]???????????????????????????????????
?transmission gates??????????????????????????? VDD?
0.9?????????? 0.45??????? ADC????????????????
?????? RESET??????????????????????????????? 
NSC 
6 
 
 ? ADC ??????????????????????????????? DAC
???????????????????????????????????clock 
feed-through?????????charge injection????? 
???????????????????????????????S0boost ? S8boost
???????????????????????????????(boosted)????
???????? 
????????? Sp? Sn? S0 ?????? S0boost?????? 2VDD?????
?? Cs?????????????? Vinp ? Vinn? 
???????(bit-cycling phases)???? Sp? Sn ? ?????? Scm???
????? S8boost??????????? CS?????? Vcom???????????
???? Vinp--Vinn.+ Vcom?????????????? 
?? DAC????????Vref ? VSS??? Vref ????VDD??? DAC?????
???????????????????? PMOS ??? Vref????????????
NMOS ??? VSS??? 1 ????????????????????????????
?????????????????ADC ??????????????? 
 
A. ??????(T/H) 
 
? 3. T/H?? 
 
? 3 ???????????????????????????????????
?? NMOS ???????????? PMOS ??????? PMOS ????????
???? VDD??????????????? NMOS??????????????
?? 
?????????????????????????????????????
???Vb2?????? 2VDD?????? Sp ? Sn??? Vb1?? 0??????? Scm
????????????? Vb2?? 0??? Vb1?????? 2VDD??? Scm???
Vb1? Vb2?????????????????????????????? 
B. ?????????? 
NSC 
8 
SAR????? CMOS????????????????? 
           ( ) 2DDcktclkinD VCfVP φ=      (2) 
?? Cckt ?? SAR ???????Φ(Vin) ??????[5]??? (2) ??????
??????????MOS??????????????????MOSFETs? 
 
?? ???? 
 
? 5. SA ADC??? 
 
? ADC???? TSMC 1P6M 0.18µm CMOS????????????????? 5
??? 
 
A. ?????? 
? 6?? 7??? HSPICE????????(differential nonlinearity?DNL)????
??(integral nonlinear?INL) ?????? DNL? 0.44LSB???? INL?-0.42LSB? 
0 50 100 150 200 250
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.4
Output code
D
N
L 
(L
S
B
)
 
? 6. DNL 
NSC 
10 
0 10 20 30 40 50
0
10
20
30
40
50
Input Frequency (KHz)
S
N
D
R
 (d
B
)
 
? 9. SNDR???????? 
 
C. ???? 
? 1??????????????? SA ADC?????? 111 KHz???????
?? 1.76 µW?????????????????? 10??? 
 
? 1. SA ADC???? 
Parameter
Mean 
power (µW)
P(AVDD) 0.78 
P(DVDD) 0.5 
P(Vref) 0.46 
Total 
power 
1.76 
 
0 50 100 150 200 250
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
x 10-6
Output Code
P
ow
er
 (W
) DVDD Power
Vref Power
 
? 10. ????????????? 
 
NSC 
12 
(NSC-93-2215-E-009-050) (SCI, EI) 
[5] Hao-Chiao Hong and Guo-Ming Lee, “A 65-fJ/Conversion-Step 0.9-V 200-KS/s Rail-to-Rail 8-bit Successive Approximation 
ADC,” IEEE JSSC, to appear. (NSC-94-2215-E-009-081 and NSC-94-2215-E-009-056) (SCI, EI) 
[6] H.-C. Hong and S.-C. Liang, " A Cost Effective Output Response Analyzer for Σ−∆ Modulation Based BIST Systems,'' in Proc.15th IEEE 
Asian Test Symp. (ATS), Fukuoka, Nov. 2006, pp.255-261. (EI) (NSC94-2215-E009-081 and 94-EC-17-A-01-S1-002) 
?????? 
[7] Sauerbrey J., Schmitt-Landsiedel D. and Thewes R., ?A 0.5-V 1-µW successive approximation ADC”, IEEE JSSC, vol. 38(7), pp. 1261-1265, 
2003. 
[8] M. D. Scott, B. E. Boser, and K. S. J. Pister, “An ultralow-energy ADC for smart dust,” IEEE JSSC, vol. 38, no. 7, pp. 1123–1129, Jul. 2003. 
[9] E. Culurciello and A. Andreou, “An 8-bit, 1mW successive approximation ADC in SOI CMOS,” Proceedings of IEEE ISCAS, vol. 1, pp. 
301–304, June 2003. 
[10] S. Mortezapour and E. K. F. Lee, “A 1-V, 8-bit Successive Approximation ADC in standard CMOS process,” IEEE J. Solid-State Circuits, vol. 
35, no. 4, pp. 642–646, April 2000. 
[11] A. S. Sedra and K. C. Smith, Microelectronic Circuits, 4th Ed., Oxford University Press, 1998 
[12] J. Crols and M. Steyaert, ?Switched-opamp: An approach to realize full CMOS switched-capacitor filters at very low power supply,? 
IEEE JSSC, vol. 29, pp. 936?942, Aug. 1994. 
[13] A. Baschirotto and R. Castello, ?A 1-V 1.8-MHz CMOS switched-opamp SC filter with rail-to-rail output swing,? IEEE JSSC, vol. 32, pp. 
1979?1986, Dec. 1997. 
[14] A. Abo and P. Gray, ?A 1.5-V, 10-bit, 14.3-MS/s CMOS pipeline analog-to-digital converter,? IEEE JSSC, vol. 34, pp. 599?606, May 
1999. 
[15] S. Rabii and B. A. Wooley, "A 1.8-V digital-audio sigma-delta modulator in 0.8-?m CMOS," IEEE JSSC, Vol.32, No.6, pp.783-796, June 
1997. 
 
???????????? 
                                                             
???? ???: NSC95?2221?E?009?344? 
???: NSC95?2221?E?009?331? 
???? ??????????????????(I) 
?????? 
??????? 
??? 
?????? 
????????????? 
?????? 95? 11? 20? ? 95? 11? 23???????? 
???? IEEE Asian Test Symposium 2006 
?????? 
H.-C. Hong and S.-C. Liang, " A Cost Effective Output Response Analyzer for 
Σ−∆ Modulation Based BIST Systems,'' in Proc.15th IEEE Asian Test Symp. 
(ATS), Fukuoka, Nov. 2006, pp.255-261. (EI) 
 
???????? 
???? IEEE ATS’06?????????????????????????????
????????????????????????????????????????
????????????????????????????????????????
????????????????????????????????????????
?????????????????????????? 
???????????? Tutorial???????????????????????
?????????????????????????????????????????
?????????????????????????????????????? 
 
?????? 
???????????????????????????????????????
????????????????????????????????????????
????????????????????????????????????????
????????????????????????????????????????
????????????????????????????????????????
???????????? 
????????????????????????????????????????
????????????????????????????????????????
???? 
???????????????????????????????????????
?????????????????????? 
????????????SOC?????????????????????????
????????????????????????????????????????
????????????????????????????????????????
A Cost Effective Output Response Analyzer for Σ-∆ Modulation Based BIST
Systems
Hao-Chiao Hong and Sheng-Chuan Liang
Department of Electrical and Control Engineering
National Chiao Tung University
Hsin-Chu, Taiwan 300
Email: hchong@cn.nctu.edu.tw
Abstract
A cost effective output response analyzer (ORA) for Σ-
∆ modulation based BIST systems is presented. Instead of
using Fast Fourier Transform (FFT) to derive the signal-to-
noise-and-distortion ratio (SNDR) in frequency domain, the
proposed ORA using the modified controlled sine wave fit-
ting procedure to calculate the signal power and the total-
harmonic-distortion-and-noise power in time domain sep-
arately. It requires neither parallel multiplier nor complex
CPU/DSP and bulky memory thus has a low cost. A second-
order design-for-digital-testability Σ-∆ modulator is used
as the circuit under test example. Simulation results show
that the SNDR differences between conventional FFT anal-
ysis and the proposed ORA have a mean and standard de-
viation of 0.64 dB and 0.36 dB respectively. The cost effec-
tiveness and satisfying accuracy features make it suitable
for embedded BIST applications.
1 Introduction
Traditional mixed-signal tests are expensive and trouble-
some because of the requirements of high-end mixed-signal
automatic test equipment, a long test time, and an ultra-low
noise testing environment [1]. The expensive testing cost
and testability issue are more severe for complex SoC de-
vices.
To solve these issues, design-for-digital-testability
(DfDT) and build-in-self-test (BIST) techniques may help.
Σ-∆ modulation based (SDMB) BIST scheme is a good ex-
ample [2, 3]. It has the advantages of having a low analog
circuit overhead, high fault coverage, high measurement ac-
curacy and the capability to perform at-speed tests. The
BIST scheme has been successfully applied to a switched-
capacitor filter [3] as well as a second-order Σ-∆ ADC [4].
In additional to the analog parts, a complete SDMB
BIST system still requires a cost effective bit-stream gen-
erator (BSG) and an embedded output response analyzer
(ORA).
Several state-of-the-art BSGs have been published [5,6].
Basically, they are made of a digital resonator. To reduce
the hardware cost, a single-bit Σ-∆ modulator with a signal
transfer function of a unit delay is inserted to eliminate the
need of any parallel multiplier.
Conventional ORAs analyze the dynamic output re-
sponses in frequency domain [1, 7]. By deriving the out-
put spectra of the circuit under test (CUT), various mea-
surement results can be obtained. However, it requires a
CPU/DSP as well as a bulky memory. Its applicability de-
pends on the availability of such resources.
Instead of using frequency domain analysis, a controlled
sine wave fitting (CSWF) method that performs the SNDR
analysis in time domain has been proposed [8]. The idea
is that the signal and total-harmonic-distortion-and-noise
(THD+N) powers can be calculated separately, since the
output response contains the stimulus tone, noises, distor-
tions, and offset parts. By subtracting the stimulus tone and
offset parts from the output response, the remaining signal
is purely made of the noises and distortions; consequently,
the THD+N power can be obtained.
The proposed scheme in [8] is for testing general ADCs.
The stimulus generation is achieved by controlling a digital
pulse width modulated signal following a RC low-pass fil-
ter. The scheme also requires multiplication when estimates
the output amplitude of the stimulus tone.
This paper presents two ways to further save the hard-
ware overhead of the CSWF method for SDMB BIST ap-
plications. First, the area-efficient oscillator circuit in [5] in-
corporated with the SDMB DfDT technique in [4] serves as
the controlled stimulus generator. Second, a cost effective
ORA exerting the modified CSWF procedure to make itself
multiplication free except for the power estimation is used
to obtain the amplitude response, offset, and THD+N power
15th Asian Test Symposium (ATS'06)
0-7695-2628-4/06 $20.00  © 2006
because no multiplier is needed.
2.2 Module Under Test
YMUT
YMUT
YMUT
YMUT
YMUT
YMUT
YMUT
YMUT
YMUT
YBSG
YBSG
YBSG
YBSG
+
−
Control logic
comp
ph1’
p
h
1
p
h
2
’
ph1’
p
h
1
p
h
2
’
ph1’
p
h
1
p
h
2
’
ph1’
p
h
1
p
h
2
’
ph2
ph2
−
+
opamp
−
+
opamp
C6
C7
C8
C9
CA
CB
+
− −
+
p
h
1
p
h
2
’
SA SC
ph1’
p
h
1
p
h
2
’
Cp
S1
p
h
1
ph1’
p
h
1
p
h
2
’
Cn
SB ph
2
’
SD
−Vref
S2 S4
+Vref
−Vref
S3
ph2&
Tb&ph1’
T&ph1’
Tb&ph1’
T&ph1’
ph2&
+Vref
+Vin
−Vin
ph2&
CIp
CIn
Crn
Crp
ph2&
ph2&
ph2&
ph2&
ph2&
ph2&
ph2&
ph2&
ph2&
Figure 3. Schematic of the DfDT second-
order Σ-∆ modulator [4].
In general SDMB BIST systems, the MUT is made of the
CUT followed by a Σ-∆ ADC to convert the analog output
into its digital form. To simplify our discussion, the second-
order DfDT Σ-∆ modulator proposed in [4] itself is used as
the MUT. The normalized I/O relationship of the MUT is
derived to be
YMUT (z) = z
−1STFMUT (z)Amp ·XBIST (z)
+STFMUT (z)NTFBSG(z)EBSG(z)
+NTFMUT (z)EMUT (z)
+THDNMUT (z) +OSMUT ,
(2)
where YMUT (z) is the digital output, STFMUT (z) and
NTFMUT (z) are the signal transfer function and noise
transfer function of the MUT respectively. EMUT (z),
THDNMUT (z), and OSMUT correspond to the quantiza-
tion noise, the harmonic distortions and circuit noise, and
the offset generated by the MUT.
2.3 Decimation Filter
Since both quantization noise sources in (2) are shaped
by the corresponding noise shaping terms; consequently,
most of the quantization noise power is out of the passband.
A decimation filter is used to remove the out-of-passband
noise then down-samples the output to the Nyquist rate. A
simple implementation of the decimation filter is using a
comb filter [9] whose transfer function is
HDEC(z) = (
2
OSR
1− z−OSR/2
1− z−1
)k+1. (3)
OSR and k above stand for the oversampling ratio and the
order of the MUT. In our design, an additional compensa-
tion filter is used to compensate the droop of the comb filter
around the passband edge such that |HDEC(z)| ∼= 1 in the
passband.
After passing through the decimation filter, most of the
out-of-passband noises in (2) will be removed. As a result,
the output of the decimation filter can be expressed as
YDEC(z
′) '
STFMUT (z
′
S)HDEC(z
′
S)Amp ·XBIST (z
′)
+THDNMUT (z
′)HDEC(z
′) +OSMUT .
(4)
The notation z′ indicates that the outputs of the decimation
filter have been down-sampled. The offset of the MUT di-
rectly appears at YDEC(z′) due to the DC gain of the deci-
mation filter is one.
2.4 Offset, Amplitude, and Power Estima-
tors
Let T and N be the master clock period and the to-
tal sample number of YDEC(z′) for analysis, and the N
samples of YDEC(z′) contain integer cycles of the stimu-
lus tone. [8] suggests that the offset can be calculated by
YOS =
1
N
N∑
n′=1
yDEC(n
′). (5)
Meanwhile, the amplitude of the offset free output response
Y ′RES(z
′) is estimated by
1
Acnst
1
N
N∑
n′=1
|y′RES(n
′)| (6)
where
Acnst =
1
N
N∑
n′=1
| sin(2pifinOSR · T · n
′)| ∼=
2
pi
. (7)
Eq. (6) requires an undesirable multiplication. Thanks to
the modified CSWF procedure, the function of the ampli-
tude estimator can be made as simple as
YAmp =
1
N
N∑
n′=1
|y′RES(n
′)| (8)
in our design. Detailed discussion about the procedure will
be made in Sec. 3.
Finally, the power of a signal y”RES(n′) is computed by
PTHDN =
1
N
N∑
n′=1
y”RES(n
′)2. (9)
Eq. (9) demands the only multiplication in the BIST sys-
tem. Because its inputs have been down-sampled, a simple
sequential multiplier is sufficient to serve the calculation.
15th Asian Test Symposium (ATS'06)
0-7695-2628-4/06 $20.00  © 2006
BSG1
Y        (z)
12
a
 21
−a
Decimation
Filter
H        (z)
DEC
Offset
Estimator
OS
Y
DEC
Y      (z’)
1
MUT
Y       (z)
STF        (z)
MUT
MUT
BSG1
Amp=0
1
2
M
U
X
Figure 4. First step operation: Calculating the offset of the MUT.
Amplitude
Estimator
BSG1
Y’       (z)
12
a
 21
−a
Amp
Y
 bsg
W
Decimation
Filter
H        (z)
DEC
Offset
Estimator
OS
Y
 dec
W
Σ
+
RES
Y’     (z’)
DEC
Y’     (z’)
1
MUT
Y’      (z)
STF        (z)
MUT
Amplitude
Response
Decision Maker
MUT
BSG2
BSG1
Pass/Fail
1
2
M
U
X
Register 2
Amp=A0/Acnst
Figure 5. Second step operation: Estimating the amplitude of the output response.
been successfully cut down from −62 dBFS to be less than
−115 dBFS. On the other hand, the residue stimulus tone
in Y ”RES(z′) is less than −122 dBFS which is on the ther-
mal noise floor. The proposed ORA gives an peak SNDR of
75.6 dB while the FFT analysis gives an peak SNDR of 76
dB.
Fig. 8 shows and compares the SNDR results of the
ORA and FFT analysis with the input amplitude ranging
from −60 to −4 dBFS. The ORA’s results are very close
to those of FFT analysis. The SNDR differences between
them have a maximum value of 1.33 dB and a minimum
value of 0.02 dB in the simulations. The mean and stan-
dard deviation of the differences are 0.64 and 0.36 dB re-
spectively. Their differences come from several factors.
First, the derivation of (15) ignores the quantization noise
parts. It is true only if THDNMUT (z′) is much larger than
the quantization noise left in the passband. In the simu-
lation example, the assumption may not be valid. Reex-
amining (14), there is an additional quantization noise term
NTFBSG(z)(STFMUT (z)EBSG1(z)−EBSG2(z)). Since
no change has been made on the decimation filter, the dec-
imation filter may not be able to completely eliminate the
additional quantization noise. Consequently, the estimated
results may be somewhat degraded. Second, the possible
stimulus tone left in Y ”RES(z′) increases the estimated
THD+N power, too. Finally, the digital signals’ finite res-
olution also results in non-vanished offset as well as addi-
tional quantization errors.
Fig. 9 depicts the output spectra of the decimated
Y ”MUT (z
′) and Y ”RES(z′) of the test having the largest
SNDR difference. The cumulative THD+N power of
the decimated Y ”MUT (z′) and the cumulative power of
Y ”RES(z
′) are shown to find out why the SNDR results
have a difference as large as 1.33 dB.
Due to using window in FFT the analysis, the cumula-
tive power lines have large differences around DC to the
stimulus frequency since the cumulative THD+N power of
Y ”MUT (z
′) does not count the frequency bins belonging
to the stimulus tone and DC part. After accumulating more
frequency bins, two lines approach each other. The lines
begin to separate after 15 KHz and finally reach 1.33 dBFS
difference at the end of the passband. Note that the quanti-
zation noises are high-pass shaped thus they are more sig-
nificant in high frequency range. This interprets why the
lines separate at a high frequency and and the major reason
of the SNDR difference.
15th Asian Test Symposium (ATS'06)
0-7695-2628-4/06 $20.00  © 2006
