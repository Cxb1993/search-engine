 2 
值形成大小不同的群組，當 K=1則節點就和鄰居節點形成群組，K=2則節點和鄰居以及鄰
居的鄰居節點形成群組。MCL演算法則是透過節點流量來形成群組，此方式將流量相當的
節點分成同一個群組。與大多數既有的分群演算法相似，K-path與MCL演算法都假設整個
網路的相關資訊都已經儲存在某一個中央伺服器，儲存的資訊包括節點個數、連接節點間
的路徑總數與各個節點連通性。如前面所述，由於使用單一伺服器來儲存共用的資訊可能
會造成許多問題，因此目前大部份在點對點網路的研究都著重於不使用單一伺服器的研
究。在本計畫中，我們針對分散式節點分群策略進行研究，並且提出一個能夠處理節點動
態的分群演算法，我們所設計的演算法具有以下兩個特點： 
 節點彼此間只需要交換少量的訊息，不需要整個網路的節點資訊就能夠執行精確
有效的分群。 
 網路中如果有節點新增或離開，只需要讓被影響到的節點重新交換資訊就能分出
新的群組，而不需要全部的節點重新計算，降低網路的負載。 
 
三、文獻探討 
基於連通性的分散式節點分群策略(Connectivity-based Distributed Node Clustering 
Scheme，簡稱CDC) [3] 是既有方法中少數以連通性為基礎進行分群的策略。在CDC方法
中，節點一開始交換少量的資訊，讓彼此知道鄰居是誰，以及鄰居的分支度為多少，每一
個節點交換完資訊，等待一個隨機時間，如果收到鄰居寄來訊息要當出發節點，自己本身
就不能當出發節點。如果等待一個隨機時間後沒有收到鄰居寄來訊息要當出發節點，則節
點利用鄰居以及自己的分支度來計算一個值，這個值稱為兩次跳躍機率(Two Hop 
Probability，簡稱THP)。如果鄰居中沒有節點是出發節點，而自己的THP值超過門檻值就決
定當出發節點，並且發送自己要當出發節點的訊息給鄰居，如果節點的THP過低，就不能
當出發節點。對於節點Vl
∑
∈ ×
=
)(
)
)()(
1()(
li VNbrV il
l VDegreeVDegree
VTHP
而言，其THP的計算方式如下式所示： 
. 
每一個出發節點Ｖl
1
( )l
weight
Degree V
=
會送出訊息至所有的鄰居節點，也就是與自己直接相連接的節點，
訊息中會包含出發節點識別碼、訊息識別碼、訊息權重值(weight)與存活時間(Time to Live，
簡稱TTL)等欄位。其中訊息權重植的初始值為 
. 
而訊息的TTL欄位的初始值則會被設定為某一個較小的數字，但是所有的出發節點必須
設定為同一個數值。除了出發節點外的每一個節點Vi則會記錄所有收到由某一個出發節點
Vl出發的權重值總合。當某一個訊息傳送至Vi後，Vi首先以訊息的權重值更新目前所累計的
 4 
 錯誤負集合(False Negative Set)代表與節點Vi相鄰的節點，但不與Vi
})()(|{),( ikikki VClustVVNbrVVClViveFalseNegat ∉∧∈=
屬於同一個群
組所構成的集合，亦即 
. 
接下來我們就可以定義圖形G的一個分群Cl對於節點Vi
   
)()(
),(),(
-1    ),(
i
ii
i VClustViNbr
ClViveFalseNegatClViveFalsePosit
ClVSCM
∪
+
=
的SCM值計算方式： 
. 
最後，圖形 G的分群結果 Cl的準確度(accuracy)即是所有節點的 SCM值的平均值，亦
即 
V
ClVSCM
ClGacyClustAccur VV
i
i
∑ ∈=
),(
),( . 
基於 SCM的觀察與分析後，我們發現計算公式可以改寫為下式： 
( ) ( ) 1
( , )        =
( ) ( )
i
i
Vi
i
i V
gNbr Vi Clust V
SCM V Cl
Nbr Vi Clust V a
∩ +
=
∪
 .......................................  (1) 
如果一個節點Ｖi能儲存相同群組中其他節點Vj的aＶj與gＶj，當有某一個節點欲加入此
群組時，Ｖi
提出之分群協定 
可以在不需要詢問其他群組節點的情況下，就能計算出此欲加入之節點對於整
個群組SCM值的影響，用以協助欲加入之節點判斷是否加入此群組。 
在我們所提出的分群協定中，每一個節點在新加入網路時皆自成一個群組，而每一群
組皆具有唯一的群組識別碼。節點可能發出的訊息包括下列數種： 
 探測訊息：每一個新加入網路的節點首先會送出此訊息給相鄰的節點，此訊息包
含節點識別碼與群組識別碼，而收到此訊息的節點會回傳自己的節點識別碼與群
組識別碼。透過此訊息，新加入節點可以取得相鄰節點與群組的資訊。 
 分群請求訊息：當一個節點Vi欲進行重新分群時，則會傳送此訊息給與自己相鄰但
屬於不同群組的節點，此訊息除包含節點識別碼與群組識別碼外，尚包含節點的
相鄰節點清單，而接收到此訊息的節點會計算Vi加入自己所屬群組對 SCM值的影
響。由於每一個節點會儲存同一群組其他節點Ｖ j的aＶj與gＶj值，因此利用公式(1)
可以直接計算出節點Ｖ j的原始SCM值，並且根據下列方式計算節點Vi加入群組後
節點Ｖj
 若節點Ｖ
的新SCM值： 
j不在分群請求訊息之節點Vi相鄰節點清單中，則節點Ｖj的新SCM值
為與gＶj/ (aＶj
 反之，節點Ｖ
+1)。 
j的新SCM值為與(gＶj+1)/ aＶj。 
 6 
 評估新加入節點造成 SCＭ變化值的計算方式簡單，因此節點花費於處理分群協定
的時間極短。 
 
五、結果與討論 
本節將透過模擬的方式評估我們所提出方法的效能，我們針對分群方法在不同種類網
路下的分群準確度與所產生的訊息量進行比較。我們利用 ns-2 [5]撰寫模擬程式，模擬實驗
的參數如表 1所示，網路節點個數介於 200於 2000個節點之間。為了測試分群方法在不同
網路結構的效能，我們使用隨機拓撲(random topology) [6]與冪率拓撲(power-law topology) 
[7]兩種網路拓撲。在產生隨機拓撲時，我們設定節點的平均分支度為 10；而在產生冪率拓
撲時，節點的平均分支度為 4，最大分支度為 22。為了獲得較穩定的結果，對於同一個參
數設定，實驗數據都是經過重覆執行 10次後所取得的平均值。 
表 1 模擬參數表 
網路環境 
節點個數 200, 400, 800, 2000 
網路結構 隨機拓樸和冪率拓撲 
執行次數 10 
方法 參數名稱 參數值 參數用途 
CDC 
THP門檻值 0.0005  
決定節點能否成為
出發節點 
權重值門檻值 0.0001 
決定節點是否加入
群組 
權重值封包存活時間 3 
權重值封包經過節
點的次數 
Proposed 
Protocol 
詢問封包存活時間 3  
詢問封包經過節點
的次數 
圖 1與圖 2分別為 CDC與我們所提出之方法在隨機拓撲與冪率拓撲的網路，於不同節
點個數的網路下的分群結果準確度。由實驗結果可以看出，我們所提出的方法不論在隨機
拓撲或是冪率拓撲的網路均能具有比 CDC較高的分群準確度。另外，不論 CDC或是我們
所提出的方法在冪率拓撲的網路均有較高的分群準確度，原因在於雖然冪率拓撲網路的平
均分支度為 4，但是由於大多數的分支度分配在少數節點上，因此網路結構本身即具有高
SCM的特性。對於分群協定而言，此類網路比較容易得到高準確度的分群結果，因此相較
於隨機拓撲網路，我們所提出的方法在冪率拓撲網路的準確度提升上也比較少。 
就實驗數據來看，我們所提出的分群協定確實能提高分群的準確度，而由於欲進行分
群的節點不需要將分群要求訊息在自己所屬的群組與欲加入的群組內廣播傳遞，因此我們
提出的分群協定所產生的分群訊息也較少。 
 8 
http://www.cc.gatech.edu/fac/Ellen.Zegura/gt-itm/gt-itm.tar.gz, 1996. 
[6] A. Medina, A. Lakhina, I. Matta, and J. Byers, “Brite: Universal Topology Generation from 
a User’s Perspective,” Proc. Of the International Workshop on Modeling, Analysis and 
Simulation of Computer and Telecommunications Systems (MASCOTS’01), October 2001. 
[7] ns-2, http://isi.edu/nsnam/ns/. 
98 年度專題研究計畫研究成果彙整表 
計畫主持人：李春良 計畫編號：98-2221-E-182-033- 
計畫名稱：改善無結構式點對點網路服務品質之研究 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 2 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
