 2
coarse-to-fine manner is developed in this project.  
 
Keywords:  Motion capture, motion retrieval, spherical harmonic functions  
一、 前言 
近年來隨著數位幾何處理(Digital Geometry Processing)技術不斷地成長與進步，電腦動畫在電影產
業扮演越來越重要的腳色，我們能夠在電影中看到一些人物動畫表現出相當生動且真實的行為，通常
是利用動作擷取器捕捉角色行為產生的動作資料來製作角色動畫，然而製作一個新的動作資料是相當
耗費時間、金錢與人力，因此將已錄製好的動作資料拿來再利用是很重要的議題與研究方向。隨著現
有 的 動 作 資 料 的 增 長 ， 動 作 資 料 庫 也 越 來 越 龐 大 ， 動 作 資 料 使 用 在 動 作 目 標 轉 換 (Motion 
Retargeting)[BI06]與動作合成(Motion Synthesis)[ PB02, LWS02, KGP02, LCR*02, HG07]的應用上需要
一個精準且有效率的動作資料檢索系統，因此一個精準且有效率的動作資料檢索系統亦越顯重要。在
[FF05]論文中，作者為了降低計算兩個畫格之間差異的時間，利用主成分分析法(Principle Component 
Analysis)找出動作資料庫中每一個畫格的特徵，將動作資料降低維度後才進行比對，但是在比對兩筆
動作資料時，為了正確比較時間扭曲的資料，必須使用時間複雜度為 O(n2)的動態時間扭曲法(Dynamic 
Time Warping)將兩個資料進行時間軸對應或對齊，因此檢索速度無法有顯著的提升。在[DRM*06]論文
中，作者利用骨架關節點之間的相互關係，預先定義了許多二元幾何特徵(Geometry Feature)，把動作
資料轉換成幾何特徵向量序列，藉由標準的資料檢索方式可做到有效率的搜尋，幾何特徵向量序列具
有時間不變性，因此可以免去時間對齊的步驟，然而該系統檢索之前要求使用者選擇一些幾何特徵，
幾何特徵的選擇會影響檢索結果的好壞，但是幾何特徵的挑選並不直覺，此外需要真實的動作資料才
能進行檢索，因此該方法仍不適用在我們的系統架構。 
二、 研究目的 
本研究提出利用球諧波函數來描述人物關節點在動作中的移動軌跡，藉由一個基於球諧波函數的
軌跡比對方式，找出類似的動作資料並且依照相似度加以排序。利用本研究計畫所提出的方法，可以
做到三維動畫產生的應用，我們讓使用者輸入多個代表不同動作的二維線條和關鍵姿態(前一年計畫內
容)，個別從資料庫當中找出相符合的動作資料，再從中挑選適當的資料加以串連，做出一個內容豐富
的三維人物動畫。動作擷取系統的整體流程主要分成兩大部分：動作資料編碼(Motion Encoding)與動作
資料檢索(Motion Retrieval)。首先，我們對在資料庫內的動作資料及查詢資料都找出人物關鍵姿態
(Turning Pose Determination)，接著使用球諧波函數將關節軌跡從空間域轉換到頻率域，以少量的係數
描述一段動作資料，如此可大量減少資料的複雜度並加快資料比較。在本研究計畫，我們提出以關節
移動軌跡來描述動作，代替記錄動作資料每個畫格的關節角度變化的表述方法，在比較動作資料時可
以不需使用費時的動態時間扭曲法作時間對齊[KG03, CCW*04, KG04, FF05]，最後我們計畫實做一項
應用，以多個代表不同動作的筆繪輸入，將資料庫中取出的不同動作串連，如此可以很容易的將使用
者在二維平面上所繪畫的靜態二維卡通故事，轉變成一段豐富有趣的三維人物動畫，不需要畫出大量
的關鍵姿態來產生出動畫[DAC*03]。 
三、 文獻探討 
動作資料是由一個人物骨架和多個畫格組成，每一個畫格記錄著骨架關節角度的變化。動作資料
庫內包含了許多由動作擷取器捕捉下來的人物動作，所有的動作資料都有著相同的人物骨架。動作資
料檢索通常以一個簡單的動作資料範例做為輸入，從資料庫當中找出與輸入相似的動作資料片段，並
 4
球諧波函數形成一個正交函數的完整集合。在單位球上，任何二皆可微分的函數可以由球諧波函數作
為基底函數的線性組合來表示。 
),(),(
0 1
 ml
l
l
m
m
l Yaf 
 
                                              (3) 
假設存在一球座標上的函數，我們擁有一組函數 ),( f 的取樣點，在給定最大度數(maximum degree)
為 lmax 的情況下，可以利用下面的式子解一個最小二乘擬合(least-square fitting) [BGK95]來得到每個球
諧波函數對應的係數： 

























nkknnn
k
k
f
f
f
a
a
a
yyy
yyy
yyy





2
1
2
1
,2,1,
,22,21,2
,12,11,1
                          
               (4) 
式子中  kn 的矩陣每個元素  ),(, iimlji Yy  ， 12  mllj ，而 2)1(  maxlk 。利用 k 個球諧波函數
 ),( ii
m
lY  和對應的係數 mla ，可以重構出近似的函數 ),( f  ： 
),(),(),(
0 1
 fYaf ml
l
l
l
m
m
l
max   
 
                       (5) 
4.2 動作資料編碼 
在上一節當中，我們已經知道如何利用球諧波函數來表達函數，此節將說明如何將它用來對動作
資料編碼以及使用球諧波函數的優點。為了以比對關節點軌跡的方式來做動作資料檢索，我們可以將
軌跡曲線視為一個函數，利用球諧波函數將軌跡曲線轉換到頻率域上表示，藉此減少比對的時間複雜
度。然而，曲線資料是以連續的點資料所構成，每個點是以三維卡式直角座標(x, y, z)來表示，因此我
們需要一個球參數化的程序來建立卡式座標和單位球座標之間的映射。原先每個軌跡的表示法為
3
1 },~{)(  vvvnt n ，而一個單位球則為 ),( S 。我們利用一個簡單的線性映射將 n 對應到 ]2,0[:  、
],0[:  ，則 domain 轉換到單位球座標後的軌跡表示為 )),(),,(),,((),(  zyxt  ，其中 ),( x 、
),( y 、 ),( z 分別表示軌跡 t 的 x、y、z 函數。接下來就可以將軌跡函數表示成球諧波函數的線性組
合，利用前一節的解最小二乘擬合(least-square fitting)的方法，求得每個球諧波函數對應的係數。每個
係數都是一個三維向量 ),,( mlzmlymlxml aaaa  ，其中 mlxa 、 mlya 、 mlza 是分別從軌跡 t 的 x、y、z 函數解最小二
乘擬合求得，如此就可以將軌跡從原先以多個點的表達方式轉變成以球諧波函數的係數來表示。以球
諧波函數的線性組合重構函數時，依照球諧波函數的階層不同，所能夠重構成的近似程度有差別。利
用較多的球諧波函數與其係數可以重構出較精準的函數；反之，以較少的球諧波函數與係數重構出的
函數就會與原來的函數有較大的誤差。當我們以低階的球諧波函數重構軌跡時，其重構出的曲線會類
似將原來的曲線作平滑化的效果(如圖 1)。 
 
(a)                 (b)                (c)                 (d) 
圖 1 球諧波函數的階層式表示法。(a)為原始曲線，(b)為 lmax = 2 的重構，(c)為 lmax = 9 的重構，(d)為
lmax = 29 的重構。 
 6
 
圖 4 曲線推測結果。左圖：動作筆觸，其餘圖：推測出來的三維曲線。 
 
 
圖 5 曲線推測結果。左圖：動作筆觸，其餘圖：推測出來的三維曲線。 
 
圖 6 動作資料檢索結果。 
 
圖 7 動作資料檢索結果。 
 
 8
 
圖 10 動作資料串連結果。上圖:2D 動作筆觸；下圖是 3D 動作串連結果，人物依序做出轉身、迴旋踢、
倒立旋轉以及後空翻。 
 
本研究提出了一個新的動作資料檢索方式，利用手繪動作筆觸作為檢索輸入。我們為動作資料檢索
設計了一個自然的手繪介面，以簡單的二維線條描述三維動作，對動作資料庫進行搜尋。使用者從單
一視角下，在特定的人物姿態上畫出動作筆觸，系統藉由參考橢圓球推測出適當的三維曲線作為關節
點軌跡，與動作資料中的軌跡比較。為了快速的從資料庫當中搜尋出相似的動作資料，我們在前處理
階段以球諧波函數對軌跡進行編碼，利用球諧波函數重構具有的特性降低額外資料的儲存量，以及提
升資料比對的速度。此外，我們利用此系統架構，以多張手繪的連環漫畫建立出有趣的三維人物動畫。 
參考資料 
[BGK95] Brechbühler, C., Gerig, G., and Kübler, O.: Parameterization of closed surfaces for 3-d 
shape description. Comput. Vis. Image Underst. 61, 2, pp.154-170, 1995. 
[BI06] Baciu, G., and Iu, B. K. C.: Motion retargeting in the presence of topological variations: 
Research articles. Comput. Animat.Virtual Worlds 17, 1, 41-57, 2006. 
[CCW*04] Chiu, C.-Y., Chao, S.-P., Wu, M.-Y., Yang, S.-N. and Lin, H.-C.: Content-based retrieval 
for human motion data. Journal of Visual Communication and Image Representation, 15, 
3, pp. 446-466, 2004. 
[DAC*03] Davis, J., Agrawala, M. Chuang, E., Popović, Z., and Salesin D.: A sketching interface for 
articulated figure animation. In SCA '03: Proceedings of the 2003 ACM 
SIGGRAPH/Eurographics symposium on Computer animation, pp. 320-328, 2003. 
[DRM*06] Demuth, B., Roder, T., Müller, M. and Eberhardt, B.: An information retrieval system for 
motion capture data, Advances in Information Retrieval, Lecture Notes In Computer 
Science 3936, pp. 373-384, 2006. 
[FF05] Forbes, K., and Fiume, E.: An efficient search algorithm for motion data using weighted 
pca. In SCA '05: Proceedings of the 2005 ACM SIGGRAPH/Eurographics symposium on 
Computer animation, 2005. 
[HG07] Heck, R., and Gleicher, M.: Parametric motion graphs. In I3D ’07: Proceedings of the 
2007 symposium on Interactive 3D graphics and games, pp. 129-136, 2007. 
[KPZ*04] Keogh, E. J., Palpanas, T., Zordan, V. B., Gunopulos, D. and Cardle, M.: Indexing large 
human-motion databases. In VLDB ’04: Proceedings of the Thirtieth international 
出席國際學術會議報告 
                                                       100年 5月 31日 
報告人姓名 林昭宏 成功大學測量及資訊空間學系 副教授 
會議名稱 The 24
th International Conference on Computer Animation and 
Social Agents 
會議時間 2011/5/26~2011/5/28 
會議地點 大陸成都—電子科技大學 
一、 目的 
Computer Animation and Social Agents為電腦圖學領域一年一度國際研討會，此研
討會相關學校系所、研究單位及公司研發單位都會派人與會，參加本次會議目的
除了發表了兩篇由國科會所補助之論文外 (Efficient Camera Path Planning 
Algorithm for Human Motion Overview、A Graph-based Shape Matching Scheme for 
3D Articulated Objects)，還可了解學術界與業界最新研究與相關科技發展，特別
是與執行計畫相關(使用手繪介面之3D動作資料檢索)的議題，以幫助計畫順利執
行及提升研究能量。 
二、 參加會議經過 
本次會議從 2011/5/26至 2011/5/28，會場座落在大陸成都電子科技大學校園內的
國際會議中心，本人(計畫主持人)於 2011/5/25 從高雄小港機場搭港龍航空飛機
與會，並於 2011/5/30返國。此次會議有來自全世界大約 200位老師、學生與研
究人員參加，是國際中型會議，與會者大部分皆有文章發表，今年供有 305篇文
章投稿，70 篇文章被接受，接受率約為 23%，由接受率可知競爭激烈，被接受
文章品質高，在這 3 天的會議當中，除了學界研究人員發表各自的研究成果之
外，還有業界的研發人員展出最新的科技與產品，不論是論文發表或是科技產品
這次會議舉辦非常成功，接受的論文品質高，吸引與會的學者自然就多，成功大
學要提升國際上的知名度，有效的辦法之一是常舉辦知名的國際研討會議，最後
筆者參加此次會議帶回了論文光碟一份，並由衷感謝補助筆者參加 CASA2011
國際研討會。 
 
99年度專題研究計畫研究成果彙整表 
計畫主持人：林昭宏 計畫編號：99-2221-E-006-192- 
計畫名稱：使用手繪介面之 3D 動作資料檢索 (2/2) 
量化 
成果項目 
實際已達
成數（被
接受或已
發表）
預期總達
成數(含實
際已達成
數) 
本計畫
實際貢
獻百分
比 
單位
備註（質化說明：如數個計畫
共同成果、成果列為該期刊之
封面故事...等） 
期刊論文 0 0 100%  
研究報告/技術報
告 0 0 100%  
研討會論文 4 0 100% 
篇
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 0 100%  
博士生 1 0 100%  
博士後研究員 0 0 100%  
國
內 
參與計畫人
力 
（本國籍） 
專任助理 0 0 100% 
人次
 
其他成果 
(無法以量化表達
之成果如辦理學
術活動、獲得獎
項、重要國際合
作、研究成果國際
影響力及其他協
助產業技術發展
之具體效益事項
等，請以文字敘述
填列。) 
本研究計畫之主要研究成果已被電腦圖學之重要國際期刊(IEEE Trans. on Compuer 
Graphics and Visualization)所接受。 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
