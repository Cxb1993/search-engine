 1 
中文摘要 
  撞球是一門屬於運動科學(Sport Science)的休閒活動，它是一個需要高思
維與高技巧的休閒運動，不論是對於球局(Inning)的全盤規劃，對於擊球、做球
(Setup)、杆法(Position play)等都需要仔細地思考，當然還需要經常地去練習打球
的力道、準度及學習各種技巧，球才會準確地進袋(Pocket)，而本研究的目的是
設計並製作一部可以模仿人類打撞球的撞球機器人。 
撞球機器人，是一部具有視覺〝看〞的能力與仿效人類〝學習〞能力的撞球
控制器，配合機構設計(Mechanical Design)製作完成撞球機器人的機電整合，對
機器人作自動或半自動控制，再加上影像處理技術，正確地得到球桌上所要撞擊
子球的相對位置，並利用具有學習法則的倒傳遞類神經演算法(Neural Network 
Algorithms)和模糊理論(Fuzzy Logic Theory)等智慧型演算法(Intelligent 
Algorithms)來學習並推論出，如何將子球打進球袋及作球，形成撞球決策
(Decision-Making)，最後將控制命令(Control Command)送到撞擊機構來執行撞擊
母球的動作。 
研究中整合既有的研究成果，其中包括有以灰色理論、模糊理論、可拓理論
和倒傳遞類神經演算法發展出的各種攻擊以及防守方式。令撞球機器人能分別對
需要採取攻擊和防守的球局以多種技巧和不同決策進行擊球進袋或是解球的動
作，並在人工智能進行各項決策之後，搭配氣壓控制閥等硬體設備完整呈現。 
研究範圍包括了智慧型決策(Decision Making)及機電系統整合
(Electromechanical System Integration)。也藉由這三個領域的結合使得本機構具備
機械結構的穩定、協調地控制、快速地辨識和智慧型的推論與學習等優點來仿效
人類打撞球的效果，並期待有朝一日能實現人機對打的目標。 
 
 
關鍵詞： 撞球機器人(Billiard Robot)、倒傳遞類神經演算法(Neural Network 
Algorithms)、倒傳遞類神經演算法(Neural Network Algorithms)、灰色理論(Grey 
Theory)、可拓理論(Extension Theory) 
 
 
 
 
 
 
 
 
 
 
 3 
Key words: Billiard Robot, Neural Network Algorithms, Neural Network Algorithms, 
Grey Theory, Extension Theory 
 
前言與研究目的 
撞球是一項非常普及且風行多年的運動，每年受矚目的世界性撞球賽事更是
不勝枚舉。尤其今年於 2007 於日本舉辦的世界盃撞球錦標賽中，台灣選手吳珈
慶、張舒涵為我國奪下二面金牌[1]，更是令國人對撞球運動之發展及推廣有更
進一步的了解與奪牌期待。因此，除了現今已有一定發展規模的足球型機器人比
賽( FIRA ISI-Robot Soccer Championship 及 RoboCup )之外，撞球機器人勢必將
會是運動機器人之新潮流，而且國際電腦遊戲聯盟(ICGA , International Computer 
Game Association)，也已將撞球 8 號球納入比賽項目之中，所以撞球機器人的發
展也將會得到世人更多的重視。 
       本研究團隊順著國內研究機器人的潮流，已成功建立出擁有學習與判斷能力
的智慧型撞球機器人控制器，並將過去的研究成果繼續延伸加強，為國內研究智
慧型機器人領域貢獻一份心力。到目前為止已完成的成果包括有擊球力量控制
(Strength control)、跳球(Jump shot)、曲球(Masse shot)、顆星球(Cushion shot)、灌
球(Bank shot)、聯擊(Kiss)球等技術杆法、並以類神經網路訓練來做進球角度誤
差補償、於球局中作防守決策、在 9 號球局中以可拓理論決策做出於障礙球局中
做出解球、進攻作球，可順利一杆掃完三顆子球(Clean table)，前後共有八本碩
士論文[2-9]與國內外研討會論文[15-22]發表。目前各個研發成果為針對撞球運動
中個別項目的機構控制與個別獨立球局做決策研究，本研究目前加入了新的撞球
技巧以及決策，使撞球機器人具有更多元化的進攻及防守功能。(淡江撞球機器
人，TKU-BR)(圖 1)，使它能逐步實現人機對打比賽之目標。 
 5 
文獻探討 
在國內做出機械撞球機構的有台灣科技大學機械系林其禹教授[10] ，其撞
擊機構的移動和瞄準都需要人的操作，機構的控制是屬於半自動化，就像人類在
撞球時將球杆擺在適當位置，以撞球機構代替人類的手，將母球撞擊出去。美國
的麻省理工學院在 1997 年也發展出一套戴在頭上的電腦瞄準裝置(Wearable 
computer)[11]，利用 3D 虛擬視覺環境輔助人類在撞球時，母球撞擊子球角度的
多種選擇。。馬來西亞的團隊[12-13]則以電腦虛擬環境，利用模糊理論來建立簡
易的撞球決策。而在日本則曾發表在撞球檯上以自走車承載 XYZ 移動平台來模
擬撞球時球杆的瞄準與撞擊機構[14]。綜觀國內外相關文獻，尚無任何研究團隊
或個人實現撞球機器人的軟硬體整合與比賽，本團隊可謂到目前為止第一組真正
進行撞球機器人軟硬體整合研究，並且已經發表多篇國內外論文，與發表多本碩
士論文[2-9]。 
. 
 
研究方法 
1.機構設計：平台定位精準，氣壓缸出力適當，重現性佳 
    撞球機器人 XYZ平台的改良，與結合高穩定性氣壓缸之精密撞擊機構，撞球
機器人的撞擊機構設計首重提高定位精度，確定子球的位置後，從決策機制立刻
判斷最容易進球的球袋、母球碰撞子球的撞擊角及力道，撞擊機構隨即接受控制
命令移動到適當的打擊位置，並將升降機構下降到母球中心線的高度，氣壓缸以
適當的壓力出杆撞擊母球，當撞擊動作完成後迅速升貣撞擊機構以避免造成犯規
問題，此研究項目重點為平台定位精準，氣壓缸出力適當，機構重現性佳。 
 
2.影像處理辨識：物件顏色辨識，球心與袋口坐標定位精確 
    CCD 影像的快速擷取與準確的搜尋出撞球桌上不同顏色的母球與三顆子球
影像並做球心分析及座標定位，我們可以利用紅、藍、綠三原色(R G B)各八位
元來作為不同顏色子球的判斷依據，再計算各球袋間與子球的相對位置座標。 
 
3.學習與決策系統：智慧型學習法則，智慧型演算法，控制方法實現 
    改良後球檯的調整以及決策機制與機構控制的系統整合。智慧型演算法可使
得撞球機器人可以不斷地學習與推論出撞球的力道和撞擊的角度，其智慧型演算
法我們使用可拓理論來推算出要撞擊的力道和撞擊角度，並使用模糊理論建立撞
球機器人的力道控制器及誤差補償器，使得撞球機器人能在任何情況下輕易的判
斷該使用的力道。。 
 7 
 
圖三、撞球機器人程式控制介面(各球 RGB 的上下限) 
 
3. 學習與決策系統： 
本研究以球袋及子球的關係來決定所要撞擊的角度，並以子球與母球距離決
定擊球力道。以 CCD 所擷取到的母球與子球的距離和擊球角為輸入變數，
而擊球力道以及擊球誤差角為輸出變數建立模糊規則庫。在子球與球袋選擇
決策方面，利用 CCD 擷取(1)球袋與子球距離( 1d )，(2)球袋、子球與母球三
者之間的相對角度( )，(3)母球與子球之距離( 2d )，來做為衡量條件，再藉
由可拓關聯函數與優化評比的運算式，判斷出所要撞擊的子球與要進的球
袋。在圖四中，由 CCD 影像擷取出母球、子球和擊球角的參數，利用可拓
關聯函數計算出各個進攻球袋的優度值，選擇各顆子球應進攻的最佳球袋，
再利用可拓理論，計算每顆子球的進球率，加以排列進攻的先後順序。 
 9 
[8]  鐘武傑，撞球機器人在障礙球局決策之應用，淡江大學機電與機械工程學
系碩士論文，民國95 年6 月. 
[9]  劉家孝，撞球機器人之攻守決策系統設計(暫定)，淡江大學機電與機械工程
學系碩士論文，96 年6 月. 
[10] 林其禹，機械撞球員(VCD)，台灣科技大學，民國 89 年 6 月。 
[11] T. Jebara, C. Eyster, “Augmenting the Billiards Experience with Probabilistic 
Vision and Wearable Computers,” IEEE Wearable Computers, Oct  
1997 ,Vol.13 pp. 138 – 145. 
[12] S. C. Chua, E. K. Wong, Alan W. C. Tan, and V. C. Koo, “Decision Algorithm for 
Pool using Fuzzy System, ” Proceedings of the International Conference on 
Artificial Intelligence in Engineering & Technology(ICAIET 2002), 17-18 June 
2002,  Kota Kinabalu, Malaysia, pp. 370-375. 
[13] S. C. Chua, E. K. Wong and V. C. Koo, “Pool Balls Identification and Calibration 
for a Pool Robot,” Proceedings of the International Conference on Robotics, 
Vision, Information and Signal Processing (ROVISP 2003), 22-24 January 2003, 
Penang, Malaysia, pp 312-315. 
[14] H. Nakama, I. Takaesu and H. Tokashiki, “Basic Study on Development of 
Shooting Mechanism for Billiard Robot”, JSME, Robotic Workshop, 2001, 
1A1F8. 
[15] 許家欣，楊智旭， “撞球機器人之模糊誤差補償器設計，” 2004中華民國自  
動控制研討會，大葉大學，3/26~3/27，2004. 
[16] 王添毅，楊智旭，楊棧雲，“可拓理論在撞球機械人球袋選擇應用，” 中國
人工智能學會2003 全國學術大會，廣州，11/19~11/21，2003，pp.1160-1165. 
[17] 王添毅，楊智旭，“智慧型撞球機器人＂，中國大陸航空太空研討會，9/1，
2004，pp.373-381. 
[18] 盧彥宏，鍾武傑，楊智旭，“灰色理論在撞球機器人球局防守決策之應用＂，
2005 年中華民國自動控制研討會，南台科技大學，民國94 年11 月18 日. 
[19] B. R. Cheng, J. T. Li, J. S. Yang, “Design of the neural-fuzzy”compensator for a 
billiard robot,” Networking, Sensing andControl,2004; IEEE International 
Conference on Volume 2, 2004. 
[20] J. S. Yang, Z. M. Lin and C. Y. Yang, “Grey decision-making for abilliard 
robot,” IEEE International Conference on Systems, Man &Cybernetics 
(SMC’04), October 10-13, Hague, Netherlands, 2004. 
[21] J. S. Yang and Y. S. Chang, “Standing control of a four-link robot, ” IEEE 
International Conference on Systems, Man & Cybernetics (SMC’05), October 
10-12, Hawaii, USA, 2005. 
[22] J. S. Yang, J. T. Li, C.Y. Yang, “Offensive strategy of a billiard robot,” (AROB 
11th ’06), Beppu, Oita, Japan, January 23-25, 2006. 
類別標籤模糊化支持向量機 
楊棧雲 
北台灣科學技術
學院 機械系 
cyyang.research 
@gmail.com 
楊智旭 
淡江大學 
機電系 
jrsyu@ tedns. 
te.tku.edu.tw 
周峰毅 
淡江大學 
機電系 
drivebytk@ 
hotmail.com  
戴信良 
北台灣科學技術
學院 機械系 
a124231624@ 
yahoo.com.tw 
 
 
摘要 
本研究從學習樣本的類別標籤軟化的角度，導
入一個基本的模糊概念，用以改變學習樣本在組態
支持向量機的決策函數時的二元化對峙態度。模糊
化的類別標籤可兼容一個足以表達學習樣本在群
體中因各種原因而導致的學習態度不一致。本研究
同時提出一個二階段的樣本態度評估方法，用以指
定類別標籤模糊值，其大小正相關於其對於支持向
量機的決策函數的影響，是為一類別標籤模糊化支
持向量機。經第一階段檢視的學習樣本，依計算所
得的樣本間隔大小，在第二階段重新賦予大小不一
的樣本態度，以助於支持向量機在訓練時因而獲取
一較大間隔的決策邊界。也因這個大間隔的決策邊
界，本研究進而獲得最值得注意的結果，一個較佳
的泛化性能的決策函數。 
關鍵詞：支持向量機, 模糊, 模式辨識, 泛化性能 
1. 動機 
現今系統的泛化能力已經成為選擇學習演算
法時無法忽視的課題，起源於統計學習理論的支持
向量機，基於統計學習理論的基礎，在泛化能力分
析方面近年來引起相當多的關注[1]。在支持向量
機中，我們可以觀察到分類間隔(Margin)與泛化能
力具有十分直接的關聯，因為分類間隔距離分類超
平面 2/|w|寬度並包圍著分類超平面 (Separating 
Hyperplane)，代表在此間隔中無論超平面處在任何
位置皆能正確的劃分所分類的訓練點，而支持向量
機的目標即是將分類間隔最大化，在實際應用的意
義上，現實環境取得的訓練樣本往往具有較多的雜
訊及干擾，最大化分類間隔即能在正確分類的情形
下允許較大的擾動。在考慮到當所輸入的樣本具有
擾動的情形產生時又需具備將分類間隔最大化與
誤差最小化的能力，於是乎軟間隔支持向量機[2]
被設計出來應付這樣的情況。 
.
2
1
min
1
,



n
i
i
T C 

ww
w
 (1) 
這個軟間隔模型能在產生決策函數讓間隔與誤差
取得一個平衡，在公式中導入了一個鬆弛變數i ( i 
= 1, 2, …, n)，將損失函數(Loss Function)表逹成訓
練誤差的一個函數關係，這樣的表逹，軟間隔模型
被允許在訓練時產生誤差，對於隱含干擾的訓練樣
本，不再硬性堅持畫分乾淨。相反地，軟間隔模型
允許這些樣本被錯分。藉著包容可能因干擾輸入產
生的誤差進而增進系統的泛化能力。因此，損失函
數是軟間隔支持向量機一個重要調控的主角，其原
型給定如下： 
)}.(1 ,0max{))(,( iiii fyfy xx   (2) 
根據上述的損失函數，當樣本被正確地分類時，我
們可以得到正值的間隔 yif(xi)，相對的負值的間隔
yif(xi)則為沒有被正確地分類的部份，而從(1)中可
以看出支持向量機訓練的目的是為了產生最大的
正值間隔，因此損失函數在分類過程中扮演著一個
懲罰產生負值間隔的樣本大於產生正值間隔樣本
的腳色[3]。也由於損失函數在此類最佳化問題中
的重要性，基於不同的需求，許多具不同類型的損
失函數的分類器也因此被提出[4-5]。 
本研究啟於伊始須先研究訓練集中具干擾的
訓練樣本的影響力與上述損失函數的最小化的關
係。為了連結具干擾的訓練樣本的影響力與損失函
數，一個隱函在經驗風險(Empirical Risk)中的衡量
方式的被提出以計算其影響力。經驗風險，是分類
學習中一個主要的假設之一，一般進行分類時，我
們擁有的只是有限樣本，實際上無法知到這些樣本
的真實分佈，當然也無從得到期望風險(Expected 
Risk)。經驗風險 Remp 取代期望風險用以計算分類
器的最佳化並用來推估其效能。通常，在學習演算
法中，我們期許能將經驗風險最小化： 
-1 -0.8 -0.6 -0.4 -0.2 0 0.5 1
0
0.2
0.4
0.6
0.8
1
 = 1
 = 8
 = 128
y
i
 f(x
i
)
s
i
sign(f(x
i
)) = y
i
sign(f(x
i
))  y
i
 
 (b) 線性隸屬函數 
圖 1 本研究不同的隸屬函數 
由於將 yi 轉換成 zi 的關係，我們也可以將原
本 SVM 的限制式關係從 yi(<w, xi>+b) ≥ 1 轉換成  
. ..., 2, 1,     ,1),( nibz ii xw  (10) 
其中，來自於 zi的 w 與 b 用來描述權重與偏移量
與先前在 SVM 中所定義者意義相同，<·, ·>表示
為一核函數關係，接著可以將 zi以 yi或 si取代來重
新建立不等式(10)使其轉換成： 
. ..., 2, 1,     ,1),( nibsy iii xw  (11) 
在標籤 yi只能以+1 或-1 表示的條件下，我們也可
將不等式分開表示為下面兩個式子 
.1for      /1,
and ,1for      /1,


iii
iii
ysb
ysb
xw
xw
 (12) 
對照原本標準的 SVM ： 
,1for      1,
and ,1for      1,


ii
ii
yb
yb
xw
xw
 (13) 
在(12)式中，因為導入了 si所以我們可以將限制式
實數化，si 為一模糊值，故其倒數必定會大於 1。
而在實際的應用上不等式(12)中的也改變了原始
的式子中的限制式，概括而言，以 zi來代替 yi 能影
響原始限制的邊界條件，使其從“±1”延伸為
“±1/si”，比較原始的 SVM，si 在最佳化的過程中
所具有一個最重要的價值即在於讓我們能以係數
變化的方式來調整對應每一限制式的可行區域
(Feasible Region)。 
仿上述模糊化標籤 zi的影響，我們重新修正了
軟間隔支持向量機，具i 的限制式改變如下： 
     ibz iii      1),( ,xw  (14) 
透過結合限制式(14)與目標函數(1)，在經過 yi 與 zi
轉換及仿的原始 SVM 推演過程，我們可以得到一
個與原始 SVM 類似的式子，最後經由類似的步驟
轉換成一個以對偶變數表逹的的二次最佳化問題： 
,,
2
1
)( max
11 1

 


n
i
i
n
i
n
j
jijiji
d
zz
J
 xx
α
 (15) 
限制式 
.0 Ci   (16) 
觀察(15-16)，這裡提出的模糊化類別標籤支
持向量機與原始的支持向量機[1]幾近相同，差別
只在於將 yi以 zi做取代。同時也與先前 Lin與 Wang
所提出的模糊支持向量機(FVM)不同[8-9]，FSVM
引用了外部的模糊值來推演其關係，在最佳化的過
程中以外部的模糊值做為調整鬆弛變數i 的權重
因子。 
3. 訓練架構 
以模糊化標籤支持向量機為基礎，我們建立
了一個串聯的訓練模型用來測試由模糊化類別標
籤所帶來的影響。模型中包含了一個過濾階段
(Filtering Stage) 及一個分類階段 (Classification 
Stage)，兩者透過 zi 連接(圖 2)，在上層的過濾階段，
僅僅利用一個標準原始的 SVM 用以篩選出具負
值間隔的樣本，再利用隸屬函數賦予間隔負值越大
的樣本一個較小的 zi值，由於 zi可以是一個介於[-1, 
1]間的任意值，我們用以反映具干擾樣本在分類器
中減低的影響力，以此 zi值代入下層的模糊化類別
標籤支持向量機進行分類，在此，我們可以了解下
層的第二階段方才是真正的分類階段。也因此我們
更為了解串聯起兩個階段間的 zi，不但包含著樣本
本身有價值的訊息，同時在建立一個大間隔分類器
中亦扮演著關鍵的腳色。  
力較好，太激烈的減低影響力反而使得分類器學習
不足(Under-fitting)，導致泛化性能降低。圖 4b 及
圖 4d 二子圖則繪出隨變化率係數 θ 及 τ 增加的間
隔變化趨勢，相對於交叉驗證誤差或多或少的隨變
化率係數增加而減少，圖 4b 及圖 4d 表逹一個一致
的間隔增加趨勢，間隔持續地增加直到其到逹一個
高界，雖然此高界在使用常數隸屬函數的模型中因
參數值尚未到逹飽和而無從觀察(圖 4b)，但在使用
線性隸屬函數的模型就可明顯觀察到(圖 4d)。然而
事實上，在此高界所有的具干擾樣本的影響力被消
滅殆盡，反而如前所述因過度減低影響力而造成學
習不足。觀察圖 4 的四個子圖，其行為相當符合統
計學習理論[1, 4]中的論述，即適度的間隔減低 VC
維度的複雜度並使得所導致的分類器有較高的泛
化能力。總而言之，我們可以確認間隔得以適度的
增加是模糊化轉換後模型發展的一個最重要性質。 
0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1
20
21
22
23
24
25
26
27
28
29
30
C
la
s
s
if
ic
a
ti
o
n
 E
rr
o
r 
(%
)

Constant MF (C' = 1e2)
Standard SVM (C
0
 = 1e2)
Constant MF (C' = 1e3)
Standard SVM (C
0
 = 1e3)
Constant MF (C' = 1e4)
Standard SVM (C
0
 = 1e4)
 
(a) 使用常數隸屬函數的交叉驗證誤差 
0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1
0
0.02
0.04
0.06
0.08
0.1
0.12
0.14
0.16
0.18
0.2
M
a
rg
in

Constant MF (C' = 1e2)
Standard SVM (C
0
 = 1e2)
Constant MF (C' = 1e3)
Standard SVM (C
0
 = 1e3)
Constant MF (C' = 1e4)
Standard SVM (C
0
 = 1e4)
 
(b) 使用常數隸屬函數的間隔 
0 2 4 6 8 10 12
18
20
22
24
26
28
30
C
la
s
s
if
ic
a
ti
o
n
 E
rr
o
r 
(%
)
log
2
()
Linear MF (C' = 1e2)
Standard SVM (C
0
 = 1e2)
Linear MF (C' = 1e3)
Standard SVM (C
0
 = 1e3)
Linear MF (C' = 1e4)
Standard SVM (C
0
 = 1e4)
 
(c) 使用線性隸屬函數的交叉驗證誤差 
0 2 4 6 8 10 12
0
0.05
0.1
0.15
0.2
0.25
M
a
rg
in
log
2
()
Linear MF (C' = 1e2)
Standard SVM (C
0
 = 1e2)
Linear MF (C' = 1e3)
Standard SVM (C
0
 = 1e3)
Linear MF (C' = 1e4)
Standard SVM (C
0
 = 1e4)
 
(d) 使用線性隸屬函數的間隔 
圖 4 交叉驗證的泛化性能 
5. 結論 
肇因於具有高泛化能力潛力的重要性質，我
們發展了樣本類別標籤模糊化的支持向量機，並成
功地驗證了預期的性能，透過交叉驗證檢驗其分類
誤差及分類間隔的改變來證明其高泛化能力，以兩
階段訓練模型，一步步將樣本以隸屬函數重新詮釋
其各自不同影響力，賦予不同的模糊值，藉模糊化
的技術使分類器能逹到高的泛化能力。本研究所敘
述的是一種基本的變型，事實上，可以將同樣的概
念應用到不同的分類器上，在不與原始模型衝突的
情形下，更廣泛的用以打造出不同的類別標籤模糊
化分類器以符合需求是可行的。 
誌謝 
本研究之完成，曾獲得國科會專題研究計畫補
助(編號 NSC 95-2221-E-149-016)，特此誌謝。 
參考文獻 
[1]  V.N. Vapnik, The Nature of Statistical Learning 
Theory, Springer-Verlag, New York, 1995. 
[2]  C. Cortes and V.N. Vanik, “Support vector net-
works,” Machine Learning, Vol. 20, 1995, pp 
273-297. 
[3]  T. Hastie, R. Tibshirani, and J. Friedman, The 
Eelements of Statistical Learning, Sprin-
ger-Verlag, New York, 2001. 
[4]  J.D. McAuliffe, M.I. Jordan and P.L. Bartlett, 
“Convexity, classification, and risk bounds,” 
Tech. Report 638, Dept. of Statistics, UC Berke-
ley, 2003, CA. 
出國心得 
 
 
 
（出國類別：參加ISPMM2008國際研討會）  
 
參加 ISPMM2008 
 
 
 
 
服務機關：淡江大學 機械工程學系  
姓名職稱：楊智旭 博士  
派赴國家：中國大陸-合肥  
出國期間：2008/8/25~8/29  
報告日期：2008/8/26 
 
 
