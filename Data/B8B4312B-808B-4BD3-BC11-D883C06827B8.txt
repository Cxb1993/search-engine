II 
 
 
(一)   中英文摘要 
摘要 
繞線資源的結構在 FPGA 設計中是最關鍵的部份。在本計畫中，我們第一個提出可重
新安排二元數交換網路(rearrangeable binary tree switching network, BTSNU)，且針對階層式的
連接架構所使用。BTSNU主要包含了數個開關區塊(switch blocks)、連接閂(crossbars)。另外
也有以 clique 架構為基礎，所衍伸的交換網路，BTSNC。既使與 BTSNU 有相同開關區塊數
量，甚至每一個開關區塊內的開關個數相同的情況，BTSNC 不會是一個可重新安排的交換
網路。而在我們所提出的交換網路中，所需要的開關個數以 N×ln(N)成比例，其中 N 為連
接端點數量。近年來，這種類型的交換網路越來越成功的使用在繞線架構上。 
關鍵詞-可重新安排、交換網路、FPGA 繞線 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
IV 
 
 
 
 
 
 
 
 
(二) 目錄 
(一)  中英文摘要 ...................................................................................................................... II 
摘要 .................................................................................................................................................. II 
Abstract ........................................................................................................................................... III 
(二)  目錄 ................................................................................................................................. IV 
(三)  報告內容 .......................................................................................................................... 1 
1.  前言 .......................................................................................................................................... 1 
1.1  交換網路 .................................................................................................................. 1 
1.2  FPGA ....................................................................................................................... 1 
2.  研究目的 .................................................................................................................................. 1 
3.  文獻探討 .................................................................................................................................. 2 
3.1  對稱式陣列架構 .................................................................................................... 2 
3.2  通用型交換區塊 .................................................................................................... 2 
3.3  可重新安排交換網路 ............................................................................................ 3 
4.  研究方法 .................................................................................................................................. 3 
4.1  二元樹交換網路 ...................................................................................................... 3 
4.1.1  TSB ................................................................................................................... 4 
4.1.2.  CB ..................................................................................................................... 4 
4.1.3.  BTSN ................................................................................................................ 4 
4.2  樹狀交換區塊 ......................................................................................................... 5 
4.3  TSBC 和 TSBU 結構 ............................................................................................... 5 
4.4  二元樹交換區塊 .................................................................................................... 6 
4.5  連線運算 ................................................................................................................. 7 
4.6  合併運算 ................................................................................................................. 7 
4.7  證明 2-BTSBU 為 TUSB ......................................................................................... 8 
4.8  證明(N+1)-BTSBU 為 TUSB .................................................................................. 9 
5.  結果與討論 .............................................................................................................................. 9 
(四)  參考文獻 ........................................................................................................................ 10 
(五)  計畫成果自評 ................................................................................................................ 11 
(六)  可供推廣之研發成果資料表 ........................................................................................ 12 
 
 
 
1 
 
(三)   報告內容 
1. 前言 
1.1 交換網路 
交換網路(Switching network)廣泛的被應用在電腦通訊(Computer Communication)、平行
處理(Parallel Processing)、FPGA Routing architecture、Field Programmable Interconnection Chip
等領域中[1]。在不同的領域中，交換網路都有不同的功能作用。例如，使用在電腦通訊上
的交換網路，其目的為傳送訊息。而我們所提出的交換網路主要是用在 FPGA Routing 
architecture，提供輸入和輸出接腳之間的連線，且為點對點的連線，圖 1 為基本的雙邊
(Two-sided)交換網路。 
Switching 
network
input port
input port
input port
output port
output port
output port
 
圖 1：基本的交換網路 
1.2 FPGA 
FPGA 主要是由可程式邏輯區塊(Logic Block; LB)、輸入/輸出埠(I/O Port)和繞線資
源(Routing resource)組成。LB 是用來放置切割後的子電路，主要是由查找表(Look-Up 
Table)為技術而成，用來實現組合邏輯和序向邏輯的電路，並且透過繞線資源(Routing 
Resource)將 LB 之間的線路連接。Routing 包含導線段和可程式化開關，大約佔 FPGA
總面積約 70%左右，此外 Routing 不僅影響了 FPGA 設計的可行性，更限制 FPGA 的
效能和影響電路延遲，所以 Routing Architecture 為 FPGA 設計中最關鍵的部份。 
2. 研究目的 
我們提出了一個二元樹交換網路(Binary Tree Switching Network; BTSNU)，如圖 2
所示。此 BTSNU 為階層式交換網路，包含有多個 TSB 及 CB 所構成，CB 位於 BTSNU
之最下層，TSB 則位於 BTSNU 之內部節點中。本計畫將證明 BTSNU 為可重新安排
(Rearrangeable)交換網路 [7]-[10]。另外也有以 Xilinx-like 架構延伸出的交換網路，
BTSNC，與 BTSNU 有相同開關區塊數量，甚至每一個開關區塊內的開關個數相同的情
況，然而 BTSNC 卻不會是一個可重新安排的交換網路。此外本計畫中提出了一個階層
式架構上使用的樹狀交換區塊(Tree Switch Block; TSBU)。當每邊節點數量為偶數時，
TSBU 為樹狀通用型交換區塊(Tree Universal Switch Block; TUSB)且使用的開關數量最
少。 
3 
 
 
圖 4：六種連線類型 
3.3 可重新安排交換網路 
可重新安排交換網路(Rearrangeable Switching Network)表示當交換網路的輸入及
輸出端有可用的埠且發生阻塞時，需要重新安排已建立的連線才可完成建立一個新連
線。假設交換網路的輸入和輸出端點集合 P，定義 connection pair (pi, j, pk ,l)為點對點的
連線才能達到可重新安排，且 pi, j, pk ,l P。此外定義節點連線分配(Assignment)為交換
網路中 connection pairs 的集合，即 AS={(pi, j, pk ,l)}，且每一個端點最多只能出現一次。
因此任給一個 AS 可以在交換網路上繞線成功，稱該交換網路為可重新安排交換網路
[5][6]。如圖 5 為 PSN(n, m, s)，當 AS ={(p1, 1, p4, 1), (p1, 2, p2, 1), (p3, 2, p3, 1), (p2, 2, p4, 2)}，
無法在 PSNC(n, m, s)繞線成功，但可以在 PSNU(n, m, s)繞線成功。 
3.4  
圖 5：AS={(p1, 1, p4, 1), (p1, 2, p2, 1), (p3, 2, p3, 1), (p2, 2, p4, 2)}(a)AS 無法在 PSN1C(2, 2, 4)上繞
線；(b)AS 可以在 PSN1U(2, 2, 4)上繞線 
4. 研究方法 
4.1 二元樹交換網路 
本計畫提出一個新的可重組之二元樹交換網路(Binary Tree Switching Network; BTSN)
是由數個樹狀交換區塊(Tree Switch Block; TSB)和連接區塊(Connection Block; CB)組成，其
中 TSB 位於 BTSN 內部節點，CB 位於最下層，如圖 6。BTSN 內部節點連線由 TSB 負責，
端點連線則由 CB 來完成。 
5 
 
邊型且負責 s 個集合連線。如圖 8 為 2-BTSN(2, 2, 4)，內、外部端點數為 2，且每一個 SB
負責三個集合連線。 
 
圖 8：2-BTSN(2, 2, 4) 
4.2 樹狀交換區塊 
樹狀交換區塊(Tree Switch Block; TSB)定義為 TSB(m, 2(s-1))，m 為每一邊的端點數；
2(s-1)則表示 TSB 為 2(s-1)邊型且負責 s 個集合連線。以圖 9(a)為例，為 TSB(2, 8)，是一個
每邊端點數為 2 的八邊型 TSB，負責五個集合連線。繞線需求向量(Routing Require Vector; 
RRV)為 SB 中連線的組合，由於 TSB(m, 2(s-1))中不同集合的兩邊之間會有連線，則表示
TSB(m, 2(s-1))的 RRV 為(3s-4)(s-1)/2 種連線組合，且 RRV r =(r1,2, r1,3,…, r1,2(s-1), r2,3, r2,4, …, 
r2,2(s-1), …, r s -1,2(s-1))，其中 ri,j表示第 i 邊和第 j 邊經由 TSB 連接的接線數量。以圖 9(b)為例，
為 TSB(2, 8)的 RRV r =(r1,2, r1,3,…, r1,8, r2,3, r2,4, …, r2,8, …, r 4,8)，共 22 種連線的組合。 
,
1
,
2
,
3
,
4
,5 ,
6
,
7 ,
8
1,
11,
2
2,
1
2,
2
3,
1
3,
2
4,
1
4,
2
(a
)  
圖 9：(a) TSB(2, 8)；(b) TSB(2, 8)的 RRV 
4.3 TSBC 和 TSBU 結構 
已知 TSBU(m, 2(s-1))是以 SBU做為基礎，且 TSBU(m, 2(s-1))等同於 SBU(m, s)扣除同一集
合(TP)的節點連線，以圖 10 為例，TSBU(2, 8)等同於 SBU(2, 8)扣除 TP 節點連線[6]。因此
TSBU(m, 2(s-1))為 SBU(m, s)的一部份，且 TSBU(m, 2(s-1))是一個 TUSB。TSBU(m, 2(s-1)) 提
供 s 個集合繞線 T = T1∪T2∪...∪Ts-1∪TP，又 Ti={ti,1, ti,2, …, ti,m}，1 i (s-1)，TP={ti,1, ti,2, …, 
ti,m×(s-1)}，以 T1 和 T2 集合內端點連線為例，為 1,21,1 tt , 2,22,1 tt , …, mmtt ,2,1 ，其繞線演算法如圖
11 所示，使用該演算法可以建構一個使用在 L-BTSNU上的 TSBU(m, 2(s-1))。 
7 
 
 
 
圖 12：(a)2-BTSBU(4, 4)；(b)和(c)2-BTSBU (2, 4) 
4.5 連線運算 
BTSN 為可重新安排交換網路，採用無方向性的點對點連線。將 BTSN 的連線分成開關
連線(Programmable Connection)和實體連線(Physical Connection)兩種，且使用“+”表示聯
集。假設 a、b 為交換網路中的兩端點，其定義如下： 
 Definition 1. 
1. 開關連線：若 a、b 間存在一個以上的開關(Programmable Switches; PS)讓兩端點連
接，定義為ab，並稱此連線為開關連線，即圖 8 中，ti,j和 tk,l之間有經過虛線的連
線。 
2. 實體連線：若 a、b 兩點不需透過開關(PS)即可連接，為實際存在的金屬連線，定
義為ab且稱實體連線，即 BTSN 中，兩個 SB 之間的連線，如圖 8 中，tPR,4和 tR,1
間的連線。 
 Operation 1. 
由於 BTSN 的連線為無方向性的點對點連線，則 BTSN 的連線具有下列特性： 
1. baab   and baab  。 
2. ababab   and abcdcdab  ，其中“+”為聯集運算。 
3. abab  0 。 
4.6 合併運算 
假設將兩個 TSB(TSB1、TSB2)合併，首先必須找出 TSB1 和 TSB2 間連線的實體連線
及節點，透過消除該節點，將 TSB1 和 TSB2 合併成一個新的 TSB。以下為合併 L-BTSB(m, 
2(s-1))所需的定義以及運算式： 
 Definition 3. 分類開關連線 
定義 D、S 兩集合為一個 TSB 的節點集合和開關連線集合。假設 TSB1、TSB2 的節
點集合為 D1、D2，開關連線集合為 S1、S2，並定義集合 R 為 TSB1 和 TSB2 間連接的節
點，即 R= D1∩D2。此外 S 由兩個子集合(SC、SC )組成，S=SC∪ SC，其定義如下所示： 
9 
 
 
圖 14：TSBR和 TSBP合併後的結構 
tP,1
tP,2
tP,3 tP,4 tP,5 tP,6
tP,7
tP,8
t1,1
t1,2
t2,1t2,2t3,1
t3,2
t4,1
t4,2
1,pt
2,pt
3,pt 4,pt

5,pt
6,pt
7,pt
8,pt
1,1t
2,1t
1,2t
2,2t1,3t2,3t

1,4t
2,4t
 
圖 15：(a) 2-BTSBU(2, 4)合併後的結構；(b) TSBU(2, 8)的結構 
4.8 證明(N+1)-BTSBU 為 TUSB 
經由上述的證明得知 2-BTSBU(2, 4)是 TUSB，因此我們將使用數學歸納法來證明
L-BTSBU(2, 4)也是一個 TUSB。假設 N-BTSBU(2, 4)是 TUSB， ZN ，證明(N+1)-BTSBU(2,4)
也是 TUSB。(N+1)-BTSBU(2, 4)由兩個 N-BTSBU(2, 4)(TSBL、TSBR)和一個 TSBU(2N+1, 4)(TSBP)
組成，如圖 14 為(N+1)-BTSBU(2, 4)的結構。透過上述的合併運算我們可以將(N+1)-BTSBU(2, 
4)合併成 )2 (2, 2 NUBTS ，又 )2 (2, 2 NUBTS 和 TSBU(2, 2N+2)兩結構邏輯上同等，則表示合併
後的 )2 (2, 2 NUBTS 為 TUSB，所以(N+1)-BTSBU(2, 4)也是 TUSB。 
5. 結果與討論 
本計畫提出一個二元樹交換網路(BTSNU)做為 FPGA 繞線資源的架構，屬於階層式
架構，不僅提出二元樹交換網路，更是提出一個適用在階層式架構上的樹狀交換區塊
(TSBU)，為 BTSNU 內部的交換區塊，並且 TSBU 為樹狀通用型交換區塊(TUSB) ，使用
的開關數量最少。 
 
 
 
 
11 
 
 
(五) 計畫成果自評 
1. 將 TSB 分成了 TSBC 和 TSBU兩種結構，且 TSBC和 TSBU分別是以 Xilinx-like 架構和
s-sided Switch Block 為基礎，證明由 TSBC組成的 BTSNC不是一個可重新安排交換網
路，而 TSBU(m, 2(s-1))是一個 TUSB，提供 s 個集合繞線 T。 
2. 定義 BTSN 的連線運算以及兩個 TSB(TSB1、TSB2)的合併運算。 
3. 透過兩個 TSBU (TSBL, TSBR)和一個 TSBU(TSBP)組成 2-BTSBU，來證明 2-BTSBU 為
TUSB，且(N+1)-BTSBU 亦為 TUSB。 
4. 提出一個二元樹交換網路(BTSNU)做為 FPGA 繞線資源的架構，屬於階層式架構，可以
減少電路延遲時間以及降低開關數量。 
5. 提出一個適用在階層式架構上的樹狀交換區塊(TSBU)，為 BTSNU內部的交換區塊，並
且 TSBU為樹狀通用型交換區塊(TUSB)。 
6. 提出新的交換網路和交換區塊，更訂出交換區塊合併運算式來證明及推演 BTSNU
為可重新安排的交換網路。 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
13 
 
推廣及運用的價值 
繞線資源的結構在 FPGA 設計中是最關鍵的部份。本計畫所
提出的二元樹交換網路(BTSNU)做為 FPGA 繞線資源的架構，屬
於階層式架構，可以減少電路延遲時間以及降低開關數量。近
年來，這種類型的交換網路越來越成功的使用在繞線架構上。 
※ 1.每項研發成果請填寫一式二份，一份隨成果報告送繳本會，一份送 貴單位
研發成果推廣單位（如技術移轉中心）。 
※ 2.本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。 
※ 3.本表若不敷使用，請自行影印使用。 
晚上有設置晚宴恭迎所有各國佳賓蒞臨交流。
(二)、 與會心得：
此次指導教授嚴茂旭老師因故不克前來，所以指定其研究生林俊良本人代為
參加 2010 International Conference on Machine Learning and Cybernetics (ICMLC
2010)。本次我們的教授所投稿的論文摘要如後：
Paper ID:
3653
Title:
An Adaptive PID Controller
Abstract:
This paper proposes and adaptive proportional-integral-derivative (PID)
controller which integrates the fuzzy sets with the Cerebella Method Articulation
Controller (CMAC). Three gain parameters of PID controller, constructed by three
fuzzy CMAC (FCMAC) models, are real-time modified in the sense of adaptation to
solve the tracking control problem of a class of nonlinear systems. The proposed PID
controller is the first used to approximate an ideal control, and then based on the
estimated approximation error bound an appended controller is designed to assure the
system stability. Both controller are derived from the Lyapunov stability analysis, so
that the system tracking ability and the error convergence can be guaranteed in the
closed-loop control system. Finally, we apply the proposed control scheme to two
nonlinear systems to show the satisfactory performances.
此次探究機器學習及智慧型控制會議所包涵的主題相當廣泛，除了有提出演
算法跟硬體式計算架構外，還有如何將計算機的能力應用在實際問題上面，例如：
Data Mining, Learning Algorithm, Bioinformatics, Education。而在大會上研究討論
的方式分成兩種，一種是口頭報告，另一種是張貼報告。此外，大陸在英文會話
以及純學術理論上的研究較為傑出，而我國在實際問題的應用與解決上較為優秀，
值得我國學生學習。
(三)、 建議與期待：
感謝指導教授嚴茂旭老師給與此次機會，以及校方在經費的補助，讓本人得
以參加此次的國際研討會會議，使本人能夠親自蒞臨論文發表現場。
(四)、 攜回資料名稱及內容：
本人在此次國際研討會中所攜回之資料包括：
A. 研討會會議議程及摘要集一本（如圖一）。
B. 研討會會議論文全文一冊（如圖二）。
圖二 研討會會議論文全文
圖三 研討會會議論文全文光碟片
