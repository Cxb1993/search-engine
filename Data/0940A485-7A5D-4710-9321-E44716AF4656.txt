行政院國家科學委員會專題研究計畫成果報告
三次元座標測量機空間動態綜合誤差建模及應用研究
A Study on Modeling and Application of Dimensional Synthetic Dynamic Measuring
Errors of Coordinate Measuring Machines
一、中文摘要
三次元座標測量機為通用性強，自動化程度高的高精度量測系統，在先進製造技術與科學研究中有極
其廣泛的應用和廣闊的發展前景。在現代製造業的迅速發展要求下，三次元座標測量機更必須配合在高速
量測狀態下仍然能實現其高精度、高可靠性之量測需求。
本研究在利用貝葉斯原理等數學方法，建立三次元座標測量機所有動態誤差源引起的測量機空間三維
綜合動態誤差數學模型，並建立測量機空間三維綜合動態誤差實驗系統進行動態誤差分離與修正，以提高
測量機動態量測精度。為了獲得全面的座標測量機全誤差資訊，設計了座標測量機空間動態全誤差資訊實
驗裝置，並進行了實驗原理與方法的探討與確定。
為提高三次元座標測量機誤差修正後的動態量測精度和評價量測資料的可靠性，必須對測量機進行動
態不確定度評定。同時為了使測量機的不確定度評定與測量機的實際使用狀態一致，並及時跟蹤國際計量
學指南聯合委員會（JCGM）確定的最新規範，本研究利用貝葉斯原理和 Monte Carlo 方法對三次元座標測
量機動態不確定度進行評定。
關鍵字：三次元座標測量機，空間結構，綜合動態誤差模型，動態誤差修正，動態不確定度，評定方法, 貝
葉斯理論，蒙特卡羅方法。
ABSTRACT:
As a universal and highly-automated high precision measuring system,CMM has very broad application and wide
developing prospect in advanced manufacturing technology and scientific research. Considering the development
demand of modern manufacturing industry, CMM should achieve high-precision and high-reliability measurement in
the high-speed measurement state.
This project will establish mathematic model of CMM’s three dimensional synthetic dynamic error caused by all
the dynamic error sources by the mathematical method of Bayes, and establish the experimental system of three
dimensional synthetic dynamic error to carry out dynamic error separation and correction so as to increase dynamic
measuring accuracy of CMM. Besides, at the aim of attaining more full-scale errors of CMM, there designed a tester to
attain the dynamic synthetic errors of CMM, and discussed the principle and method of the experiment.
In order to increase dynamic measuring accuracy after error correction and the evaluation reliability of measuring
data, it is necessary of evaluate the dynamic uncertainty of CMM. In order to make the uncertainty evaluation
consistent with the actual usage condition of CMM and timely follows the newest document issued by JCGM, this
project will evaluate the dynamic uncertainty of CMM by the method of Bayes and Monte Carlo.
Keywords: Coordinate measuring machine, Space structure, Model of synthetic dynamic error, Dynamic error
correction, Dynamic uncertainty, Evaluation method, Bayes theory, Monte Carlo method
不確定度傳播等問題列為未來 GUM 的研究內容[21] [22]。由此可以看出將現有的不確定度評定指南擴展到包
容動態測量不確定度的評定，已被國際學術界所共識。2004 年 9 月 6～8 日,在法國巴黎召開了三次元座標
測量機驗收檢測和複檢檢測 ISO 標準制定工作組會議，中國代表提交的有關探測誤差、動態誤差應在標
準有關條款中展現等一系列建議[23] [24] [25]，得到與會專家的認可。在此次會議上，美國代表提出用 Monte Carlo
方法進行座標測量機動態誤差評定的建議，已在會議紀要中列為 2005 年 1 月在美國召開的 ISO 標準制定
工作組會議討論議題之一。2005 年 9 月，國際標準化組織（ISO）座標測量機工作組在日本召開會議，建
議各個國家將貝葉斯原理和 Monte Carlo 方法應用於不確定度的評定方法研究中[26]。將貝葉斯原理應用於
測量機動態不確定度的評定方法，能充分利用所獲得的資訊（包括總體資訊、樣本資訊和先驗資訊），從
而使動態不確定度的評定更合理、可靠。綜上所述，本研究在根據國際標準化組織關於不確定度評定的最
新規範，研究基於貝葉斯原理和 Monte Carlo 方法，將靜、動態融於一體的三次元座標測量機不確定度評
定方法，使三次元座標測量機的不確定度評定更加合理、可靠。
四、研究方法
1. 測量機綜合動態誤差建模、分離及修正
本研究在充分收集資料及研究的基礎上，建立高精度實驗系統獲得測量機測頭在不同空間位置及量測
速度狀態下進行測量機的動態量測誤差，利用貝葉斯原理等數學方法建立測量機在整個量測空間內的空間
三維綜合動態誤差模型；並運用該模型對測量機的量測資料進行修正。
不同類型的三次元座標測量機的動態特性不同；現以目前最常用的移動橋式測量機（如圖 1 所示）為
研究物件進行分析。測量機整個橋形框架沿 x 方向氣浮導軌移動，滑塊在橫樑上沿 y 方向移動，安裝在滑
架上的立柱帶動測頭沿 z 方向移動。通過軟體可以設置不同的量測速度，由運動控制系統控制三軸移動。
各軸由空氣軸承結構聯結，移動橋結構是單邊驅動，測頭為觸發式測頭。經過分析可以得到測量機主要動
態誤差源有：機體結構變形、導軌支承系統特性、量測系統的動態回應、測頭系統的動態特性及其控制系
統的動態回應等。這些誤差因素與測量機的量測速度有關，彼此之間不獨立，相互作用綜合影響量測結果
動態精度。它們之間的關係如圖 2 所示。
圖 1 移動橋式測量機的結構示意圖
從上述分析可以看出，要提高三次元座標測量機的動態量測精度，準確可靠地進行動態誤差修正與評
定，必須考慮上述的幾個動態誤差源的綜合影響以及測頭動態特性的影響，高精度地分離其綜合動態誤
差。現擬採用圖 3 所示的實驗裝置以雷射干涉議作為量測基準分離測量機 Z 軸在量測空間內不同位置及不
Y 向滑塊
橋架
右支撐
x
y
z
橫樑
工作臺
測頭
左支撐
Z 向立柱
為了按照上述方法達到的三次元座標測量機空間三維綜合動態誤差模型，能高精度地反映座標測量機
實際三維動態量測誤差，以此為依據進行誤差修正可以達到高精度的量測結果。但根據實際量測結果，如
何獲得高精度的三維綜合動態誤差模型將成為關鍵問題，這是本計畫的研究重點與難點之一。
測量機的綜合動態量測誤差序列包含多項不同性質、不同特徵和不同規律的誤差，不只是含有一種變
化規律，可能既有週期性，又有其他非線性變化的趨勢，還存在隨機雜訊。利用貝葉斯原理建立的空間三
維綜合動態模型有多種結構，如常量模型、多項式模型、季節模型、回歸模型、雜訊模型等，這些模型可
以通過疊加原理組合起來表示一複雜序列，所以貝葉斯建模對資料沒有平穩性限制，非常適合具有動態量
測非平穩的誤差序列特徵的三次元座標空間綜合動態誤差的建模預測。同時貝葉斯原理能夠方便而有效利
用人們在實驗之前或實驗過程中對研究物件掌握的主觀資訊和客觀資訊幹預並修正模型，提高動態誤差模
型預測精度。還能夠處理異常情況的發生，按照例外管理原則來主觀幹預模型，使誤差模型更符合實際變
化情況，因此，貝葉斯原理非常適合三次元座標測量機的空間綜合動態誤差模型的建立。下面簡述本計畫
擬採用貝葉斯原理中的多項式趨勢模型、季節模型和回歸模型作為模型分量的建模過程。
設由多項式趨勢模型、季節模型和回歸模型作為模型分量，則分量模型為
},,,{ itit GF 3,2,1i
狀態向量為 it， 3,2,1i
其中， 11 nt EF  ，





qpEE
qpEE
F t 2),1,',,'(
12),',,'(
'
22
22
2 

， tF3 是回歸變數；
)1(
11 nt JG  ， 







qpGGdiag
qpGGdiag
G
q
q
t 2),1,,,(
12),,,(
11
11
2 

其中， 





rr
rr
G r 

cossin
sincos
， 1,,2,1  qr  ， nt IG 3
記
)',','('
],,[
)',','('
321
321
321
tttt
tttt
tttt
GGGdiagG
FFFF
 


則疊加合成後的總模型為 },,,{ tt GF 。
具體建模步驟：
（1） 通過誤差分離，獲得動態誤差序列 ty ),2,1( nt  ；
選用適當的方法對動態誤差進行分解，確定主要誤差分量以及各誤差分量的性質與特徵；
根據誤差分解的結果，確定動態誤差模型的基本形式，即確定各模型分量的類別。
（2） 初始先驗資訊假設（給定 0D 的條件下）,初始信息 0D 包括現有資訊、歷史資料和過去的
經驗。確定模型分量的先驗均值：
當 1t 時，估計常均值 1,1m 、回歸均值 2,1m 、季節效應 ),( 1,10,11  l  ，並加以約束，
即 0
1
0
,1 


l
j
j ；
（2）對概率分佈進行抽樣，抽樣樣本容量為 M ，即首先產生偽亂數，然後對分量的概率分佈進
行抽樣，獲得各誤差分量的隨機抽樣 )(kxi ， Mk ,,2,1  。
（3）由誤差分量的隨機抽樣計算量測總誤差的隨機抽樣值，即
)(...)()( 2
2
1
1
kx
x
f
kx
x
f
kx
x
f
y n
n
k 





其中，偏導數
ix
f


是誤差 ix 的傳遞係數或靈敏係數
（4）對量測誤差 ky 進行統計模擬和分析，確定量測總誤差Y 的概率分佈函數，
分別計算其均值的估計值：
}{YEy 
和標準差的估計值：
}{YVary 
則量測結果的合成標準不確定度為
yyc uu 
類比隨機變數的概率分佈類型可通過模擬值 Myyy ,,, 21  的直方圖進行初步估計，然後用 d 檢驗法
進行驗證。
將模擬誤差值 Myyy ,,, 21  按從小到大進行排序，得到 )()2()1( ,...,, Myyy ，根據給定的置信概率，得
到 Y 的置信區間為： 
)
2
)1(
()
2
)1(
(
, MpyMpy yy    ；也可以利用所估計的分佈函數，根據置信概率，
求 Y 的置信區間。
五、主要研究專案
1．三次元座標測量機氣浮導軌和電機單邊驅動對測量機動態定位精度的影響
移動橋式三次元座標測量機三軸的運動導軌採用空氣靜壓氣浮導軌，使用交流伺服馬達單邊驅動，避
免了雙邊驅動的高精度同步控制和複雜的結構。但是單邊驅動存在不足，由於橋架的質心隨著滑架 Y 向
移動和主軸 Z 向伸長而改變，驅動力不通過質心，這樣測量機沿 X 向移動時將產生不對稱得慣性力，而
氣浮導軌的剛度有限，因此會使橋架出現振動、變形和傾斜等，這些振動、變形和傾斜等會通過滑架、主
軸、其他氣浮導軌和測頭等部件影響測量機的動態測量精度。現假設測量機的滑架位置和主軸伸出長度確
定，由於單邊驅動和氣浮導軌有限剛度引起的振動、變形和傾斜傳遞到測頭的振動模型建立過程如圖 4。
測量機在X向單邊驅動力的作用下，產生的振動和變形是發生在它的作用面，即 xy平面內。對於X向橋
架在氣浮導軌上的整體振動，因為氣浮導軌的阻尼很小，因此可以用圖4（a）所示的模型來描述。對於測
量機橋架，其中橫樑部分受到 y 向滑架和自身慣性力的作用而且跨度很大，橫樑的X向變形在高精度的要
求下很可能產生很大的誤差，因此在此把 x向變形振動也考慮進去，用圖4(b)所示的兩端受扭轉力矩作用
的柔性模型來描述。x向橋架的振動將通過中間橫樑上的Y向滑架傳給測頭，因此它可用圖4(c)所示的模型
來描述。
由於 X 向橋架相對於支撐它的氣浮導軌作微米級小振動，這必定會產生氣隙的變化從而引起氣膜剛
選擇-129、-350、-500、-600mm 四個量測座標位置，組合成在整個量測空間
內如圖 5 所示的 32 個量測位置分別量測測量機量測系統 X、Y 方向的動態
測量誤差。X 向座標量測範圍選擇 0 至 780mm，Y 軸座標量測範圍選擇為 0
至 580mm。
（2）考察測量機各軸移動速度對量測結果的影響。雷射干涉儀設為 1mm
觸發資料記錄一次，設置單軸移動速度從 4mm/sec 每 4mm/sec 遞增到
20mm/sec，共 5 個速度值，量測測量機量測系統動態誤差值。
（3）每軸往復移動 5 次，考察動態誤差的重複性和各軸往復移動情況；
（4）利用 ISO230/2 標準評定測量機量測系統動態測量精度
和動態誤差重複性；
（5）利用軟體功能保存動態誤差值和誤差曲線圖；
（6）為了建立和驗證後面研究的在不同空間狀態下測量機量測系統動態誤差模型建模結果，在 X
（0mm）、Z（-200mm）空間位置處進行了量測 Y 向量測系統的速度為 12mm/s 的動態誤差分離實驗，量
測範圍為 0 至 780mm。在 Y（480mm）、Z（-500mm）進行了量測 X 向量測系統的速度為 12mm/s 的動態
誤差分離實驗，量測範圍為 0 至 580mm。
（7）利用干涉儀時間觸發模式量測測量機在各個速度下的速度和加速度變化情況，並保存速度和加
速度值和變化曲線圖，以便進行處理。
本研究實驗較多，總共得到 32 幅數據圖。從所有誤差圖上評定結果中能夠看出測量機動態誤差的重
複性較好，這是該誤差可以修正的基礎。
由量測數據中選取 100 個誤差值，根據貝葉斯動態誤差多步預測組合建模方法，並根據等間隔插入標
準量貝葉斯組合建模方法建立的模型如圖 6 所示。
根據上面建模結果進行分析，得出的結論
敍述如下：
a.利用雷射干涉儀量測的動態資料和貝葉斯一步預
測原理建立的模型與實際誤差曲線精確吻合，可以高精
度建立量測系統的動態誤差模型。該模型完全符合量測
系統動態誤差的各分量的影響結果，可以精確獲得各個
量測位置的動態誤差值。
b.從圖 6 可以看出，如果只利用前 100 個誤差值直接
預測後面量測位置的動態誤差值，預測的步數越大，其
偏離的結果越偏離實際誤差值。
c.為了提高所建立的誤差模型精度，我們分析實際誤
差曲線的變化趨勢，找出誤差曲線的奇異點，然後有選擇性地在誤差奇異點處插入標準量，這種方法建立
的模型精度較高。
z
y
x
圖5 空間量測位置 
1. 貝葉斯多步預測結果 2. 實際誤差曲線
3.貝葉斯等間隔插入標準量建模結果 4.等間隔插入點
圖 6 貝葉斯建模結果比較
0 100 200 300 400 500 600
-5
0
5
10
15
20
25
30
(mm)
(u
m
)
1 2
3
4
利用上述實驗裝置分離出來的不同空間結構狀態下移動橋式三次元座標測量機 X 向量測系統動態誤
差所有資料（主軸 Z 向位置-500mm,Y 向量測位置 0、200、400、600、800mm, 量測速度 12mm/s）和 Y 向
量測系統動態誤差所有資料（移動橋架 X 向位置 0mm，主軸量測位置-129、-350、-500、-600mm, 量測速
度 12mm/s），應用雙三次樣條曲面建模方法建立測量機的動態誤差模型，繪製的三維圖形如圖 9 和 10 所
示。
同樣為了驗證上述三種二維動態誤差建模效果，選擇與上面相同的測量機 Y 向量測系統的量測位置
（移動橋架 X 向位置 0mm，立柱 Z 向位置-200mm，量測速度 12mm/s）的動態誤差資料來驗證各種建模方
法的驗證效果。將上述 Y 向量測系統的量測位置座標分別代入上面建立的動態誤差模型裏，獲得模型的
輸出與量測得到的真實動態誤差資料進行比較，得到的誤差曲線的建模誤差曲線分別如圖 10 所示。
從圖 7 和 8 中可以看出 BP 神經網路的最大建模誤差大約為 1.5um，而支持向量機的最大建模誤差為
0.75um。從圖 10 中可以看出利用雙三次樣條曲面建立的測量機 Y 向量測系統動態誤差的模型最大誤差大
約為 4.5um。三者比較支援向量機的建模精度最高，BP 神經網路次之，而雙三次樣條最差。雙三次樣條曲
面建模效果不理想。這主要是由於建模資料量少，而雙三次樣條曲面建模需要大樣本，因此造成了較大的
建模誤差。而利用神經網路建模也存在著許多待解決的問題，如神經網路的訓練問題和局部最小值問題以
及神經網路拓撲結構的確定問題。神經網路的訓練是基於傳統的統計學，網路權值是在樣本趨於無窮大假
設下的訓練結果，但在實際生產過程中得到的資料是有限的。根據傳統統計學，神經網路的訓練目標是最
小化經驗風險。而且隱層神經元個數的設計目前沒有一套完整的理論，一般是通過經驗來試湊。而支持向
量機作為一種在 90 年代中期發展起來的基於統計學習的機器學習方法，通過尋求結構化風險最小，實現
經驗風險和置信範圍最小化，在樣本較少的情況下，也可以獲得良好的函數估計能力。支援向量機演算法
是一個二次優化問題，能得到全局最優解。與神經網路相比，它的優點是訓練演算法中不存在局部極小問
題，可以自動實際模型複雜度（如隱層節點數），不存在維數災問題，泛化能力強，因此其建模精度較高，
可以用於測量機四維綜合動態誤差模型的建立中。
圖9不同空間結構狀態下測量機X向量測系統
動態誤差建模結果（雙三次樣條）
圖10不同空間結構狀態下測量機Y向量測系統動
態誤差建模結果（雙三次樣條）
為了分離測頭系統的誤差，將測頭觸發信號引出，經過適當的信號處理電路來觸發雙頻雷射干涉儀進行同
步讀數，則其讀數即包含了測頭系統的誤差。而同步得到的光柵讀數，也就是測量機的讀數，則為包含了
量測系統空間動態全誤差的輸出值。即，雙頻雷射干涉儀的讀數與塊規標稱長度修正值的差即為測頭系統
所產生的誤差值；座標測量機讀數與塊規標稱長度修正值的差即為整個座標量測系統總的動態誤差。
數學建模與結果分析方法同前面實驗相似。
七、結論
本研究工作及創新點如下：
1. 研究了移動橋式測量機動態誤差源及相互關係。對引起測量機橋架振動的原因進行了原理性探
討，得出了測量機 X 向單邊驅動引起振動的主要激勵是驅動力與慣性力形成的力偶，振幅大小與橋架驅
動馬達所選取的加速度曲線緊密相關的結論。（1）在深入分析目前商用三次元座標測量機技術特點的基
礎上，比較國內外座標測量機動態特性和動態誤差研究方法的優缺點，確定以測量機主要動態誤差源分析
為理論基礎，以測量機動態特性分析實驗為依據，對測量機在不同速度和空間位置時動態誤差建模。（2）
在對動態誤差實測和建模的基礎上，採用軟體和硬體相結合的方法，對動態誤差進行修正，以提高測量機
動態量測精度。
2. 利用雙頻雷射干涉儀和輔助的夾具設計移動橋式測量機動態誤差分離實驗裝置，分離了不同空間
結構狀態下的測量機 X、Y 向量測系統的動態誤差，利用貝葉斯一步預測、多步預測、等間隔插入標準量
和有選擇性插入標準量方法建立測量機動態誤差一維模型，得出了可以利用有選擇性插入標準量高精度建
立測量機動態誤差模型的結論，可以大大減少所需量測的誤差資料量。利用雙三次樣條曲面建模、BP 神
經網路和支援向量機三種建模方法建立不同空間結構狀態下的測量機量測系統動態誤差模型，進行建模效
果驗證與比較，得出了支援向量機可以應用於測量機多維動態誤差高精度建模的結論。
3.研製了能充分反映座標測量機空間動態全誤差資訊的實驗裝置，並對其量測原理以及實驗方法作了
一定的分析設計，為了充分獲取測量機在量測空間範圍內不同位置的全誤差資訊，將整個三維量測空間規
劃 9 個最佳位置，選用不同速度並改變量塊尺寸，對座標測量機的動態誤差進行即時量測。此種實驗方法，
能更加全面地量測與分離座標測量機的動態誤差，充分反映測量機各個動態誤差源對量測精度的影響，因
此更加符合生產應用實際，用此方法量測分離出的誤差將為誤差修正工作提供全面可靠的依據。
圖12三次元座標測量機空間動態全誤差資訊實驗裝置
a.實驗裝置在測量機上的安裝 b.實驗裝置用於測量機動態誤差測試
[17] Zhang G. et al.(1998), "Error compensation of coordinate measuring machine. "Ann. CIPR, 1985,
Vol.34,P445~448
[18] Shetakov A.L.(1996), "Dynamic error correction method. "IEEE Trans. Instrumn and Measmt,
1996, Vol.45(1),P250~255
[19] Soons,J.A.(1993), "Accuracy analysis of multi-axis machines. "PHD Thesis, Eindheven
University of Technology, 1993
[20] Ma Xiushui，Fei Yetai，Chen Xiaohuai, Zhao Jing, Wang Hongtao(2005), " Dynamic Measurement
Accuracy Evaluation for Touch-trigger Probe of CMMs Based Monte Carlo Method.
"ISMTII’2005，UK，Sep.9，2005
[21] 馬修水，費業泰，陳曉懷，李桂華，權繼平(2006), "光柵納米測量的研究與進展". 儀
錶技術與感測器，2006， No.4
[21] 董晨松(1999), " 三座標測量機動態誤差補償的研究"，天津大學博士學位論文 1999.2
[22]林洪樺(1995), "動態測試資料處理"，北京理工大學出版社，1995.
[23]B.A.格拉諾夫斯基傅烈堂鮑建忠譯(1998), "動態測量"北京中國計量出版社 1989
[24]馬修水，費業泰(2004), "New measuring scale of CMMs"．ISIST’2004, 哈爾濱工業大
學出版社，Vol.1，PP906~910
[25] 馬修水，費業泰等(2004), "ISO10360—2 標準若干問題的探討"．合肥工業大學學報，
No.10，2004
[26] ISO/DTS 15530-2.2:(2005), "Geometrical product specifications (GPS) – Techniques for
determining the uncertainty of measurement – Part2:Use of multiple measurements strategies in
calibration of artifacts"
[27] 馬修水，費業泰等(2005), "接觸探測系統 CMM 驗收檢測和複檢檢測標準的探討". 工具
技術，No5，2005，P80-82
[28]費業泰，盧榮勝(2001), " 動態測量誤差修正原理與技術" 中國計量出版社 2001
[29] C. Dong, et al(2002), "Prediction and Compensation of Dynamic errors for Coordinate Measuring Machines
"ASME Transactions, 2002 Vol.124 No.3
[30] Pereira P H, (2005), "Dynamic Error Characteristic on Scanning Probe CMMs", Ph.D.Thesis,
University of North Carolina at Charlotte.
[31] James D. Destefani, (2001), "CMMs, Manufacturing engineering", 2001,Vol.9
[32] 趙靜，費業泰(2003), " 三座標測量機動態誤差研究現狀與發展" 第八次全國誤差理論
及應用學術與教學研討會論文集 2003.10
[33] 許楨英, 費業泰, 陳曉懷(2001), " 動態精度理論研究與發展". 儀器儀錶學報, 2001,
22(4):70~71,74.
[34] 費業泰(2002), "精度理論若干問題的研究進展與未來". 中國機械工程，
2002,11(3):255~256.
