具人機互動學習能力之智慧型銀髮族行動輔助器(I) 
計畫編號： NSC 96-2221-E-194-063 
執行期限： 96 年 08 月 1 日至 97 年 10 月 31 日 
主持人：黃國勝 國立中正大學電機工程學系 
Email: hwang@ee.ccu.edu.tw, URL: http://www.eis.ee.ccu.edu.tw/~hwang/ 
 
 
中文摘要 
傳統的行動輔具如手杖、四腳仗等，雖提供使用者
攙扶的平台，但卻無法靈活且隨使用者身體移動，甚至
對身體造成不必要的負擔。為此，本系統設計一台智慧
型行動輔具。系統的處理核心為嵌入式開發板
PXA270，並用模糊速度調適器控制速度，以適應使用
者的移動速度與位於斜坡時所需的重力補償，進而達到
平順化的運動控制與人機安全機制。此外，還提供室內
定位系統與遠端監控的功能。事先在已知環境的天花板
佈置 landmark，由監控端主機透過無線網路擷取行動輔
具攝影機所拍攝的影像。透過定位演算法辨識出攝影機
所拍攝的 landmark 字元，再比對事先佈置的 landmark
字元，即可以得到使用者座標位置。將資料透過無線網
路傳至行動輔具，可經由行動輔具與監控端主機的 GUI
介面，顯示座標資訊，以完成遠端監控。最後，行動輔
具提供一個能夠升降的攙扶平台以適應不同使用者高
度。 
I. 前言 
A. 動機與背景 
根據聯合國定義，當65歲以上老年人達到該國人口
比率之7%時，即達到高齡化社會門檻。如圖1所示，根據
內部政統計[1]，近十年老年人口比例，每年以0.2個百分
點持續增加，到2007年底為止，台灣老年人口共計約220
萬人，老年人口約佔台灣總人口為數9.77％，超過全世界
平均的7％甚多，觀察未來台灣人口變化，據經建會預估
[2]，至2025年將增加至19%，到了2050年更將高達37%，
也就是每10個人口中，近4個是老人，這對台灣的生產力
及社會結構將有很大衝擊。 
 
     圖1 國內65歲以上人口占總人口比率[1] 
世界各國包括美國、日本、歐洲等也都面臨著高齡
化社會的到來[3]，如圖 2 所示、為各國 2000 年與預估
2025 年各國的老年人口佔該國人口之比率圖。也因如
此，各國近幾年紛紛投入老人服務相關研究[4-10]，期盼
能提高老年人的生活品質、培育照護老人的醫護人力、
落實居家照護與降低社會成本的支出。  
    為此，本系統設計一台智慧型行動輔具，其不但能
順服使用者移動與攙扶使用者在任何路面，並能在室內
環境中，由監控端主機透過攝影機抓取天花板之
landmark，進而辨識出使用者之座標位置，達到居家看
護之目的。 
 
圖2 世界60歲(含)以上人口2000年至2025年之估計[3] 
B. 計畫架構 
本系統先以前言闡述研究動機與背景，藉以分析與
比較。再者為系統分析設計，在分析相關研究後，規劃
出本行動輔具的研究重點。並以系統硬體設計實現與系
統軟體設計實現兩章節來闡述機構的設計、硬體實現、
硬體架構流程、模糊速度調適器與定位系統演算法等。
接著為系統整合與測試，規劃本系統所設計之智慧型行
動輔具在室內與室外的實測。在室內以 L 形與 S 形路徑
做測試，以驗證本系統所設計的定位演算法效能。在室
外則測試行動輔具於上下坡的移動控制，藉以觀察本系
統所設計的模糊速度調適器效能。最後為實驗結論，探
討實驗結果分析。 
 
II. 系統分析設計 
A. 使用者需求與分析 
根據上述所提出的研究背景與動機，來歸納出使用
者的各項需求與分析，如圖 3 所示，對於遠端看護者而
言，能時時刻刻得知使用者的座標位置是相當重要的，
倘若有意外的發生，將可第一時間給予協助。對於使用
者而言，行動輔具不只提供步行攙扶的功能，更需提供
簡單圖形化介面，讓使用者操作時能更為簡便、安全與
舒適。根據上述的需求，我們可以歸納出系統的需求如
下所示。 
看護者需求： 
 遠端監控 
 4
網路回傳至行動輔具。行動輔具的訊號處理是採用分散
式系統的觀念，以微控制 Basic Stamp 2 作為訊號的接收
與處理，其目的是為了降低 PXA270 的負擔。Basic Stamp 
2 主要工作為接收感測器的訊號包括 Joystick 的 X 軸與
Y 軸的偏移量、雙軸加速度計 Memsic_2125 傾斜角度，
超音波所測得的人機距離與判斷煞車系統是否啟動等，
透過 UART 界面，將各訊號傳至嵌入式開發板
PXA270。當 PXA270 接收到完成後，會根據 Joystick 的
X 軸與 Y 軸的偏移量作基本的行為判斷，包括前進、後
退、左前進、右前進，左轉與右轉，六個基本行為的判
斷，接著，模糊速度調適器將根據超音波與雙軸加速度
計所得到的人機距離與傾斜角度作為輸入，透過模糊推
論出行動輔具的速度。在此，使用六個基本行為的判斷，
主要是要降低模糊推論所需的運算量，降低 PXA270 運
算的負擔。 
遠端看護方面，看護者可經由監控端主機監看使用
者的座標位置，並透過無線網路將位置資訊傳至遠端的
行動輔具。如圖 5 所示，攝影機不斷地擷取天花板的影
像，而監控端主機透過無線網路擷取攝影機所拍攝的影
像，以定位演算法辨識出 landmark 字元，並比對事先在
已知環境天花板佈置的 landmark，即可得知目前行動輔
具與使用者的座標資訊，並顯示在監控端主機上的圖形
化介面，此圖形化介面包含了攝影機所抓取的影像、內
建已知的環境地圖、所辨識出的 landmark 資料與無線網
路連線狀況等訊息。圖 6 為行動輔具裝置示意圖。 
 
圖 5 行動輔具系統架構示意圖 
 
圖 6 行動輔具各裝置位置示意圖 
 
III. 系統硬體設計與實現 
A. 機體設計與製作  
本系統根據前述的系統需求設計出行動輔具的各
部位機構。設計流程與 3D 機構圖，如圖 7 所示。首先，
先參考相關文獻與市面上販售的助行器，根據我們所參
考的內容與需求，決定出適合機體的基本架構。以繪圖
軟體 Pro/ENGINEER 繪製 3D 機構圖，決定好機體的基
本架構後，訂購機體組裝所需的元件與材料，最後組裝
完成，並測試其機動性。 
 
圖 7 機體設計流程圖與 3D 機構圖 
B. 系統硬體架構設計與實現 
本系統硬體架構如圖 8 所示，分為感測器訊號處
理、智慧型控制與遠端監控三區塊來說明。 
在感測器訊號處理方面，主要由 Basic Stamp 2 做
訊號的收集與處理，包括 Joystick、超音波與雙軸加速
度計 Memsic_2125，並透過 UART 界面傳送計算得到的
X 軸與 Y 軸偏移量、人機距離與傾斜角度至 PXA270 做
智慧型控制。此外，煞車裝置啟動與否也是由 Basic 
Stamp 2 進行判斷，當行動輔具在無移動狀態時，Basic 
Stamp 2 透過煞車控制電路，啟動煞車裝置。而升降邏
輯電路以兩組機械式彈簧開關作為觸發器，決定上升或
下降，升降裝置的動力來源為線性制動器 LAM-01-12。 
在智慧型控制方面，嵌入式開發板 PXA270 接收
Basic Stamp 2 的訊號，透過模糊速度調適器推論出速
度，進而控制伺服馬達。 
在遠端監控方面，分為行動輔具(區塊 1)與監控端
主機(區塊 2)兩部分的硬體架構，在行動輔具上裝有無線
基 地 台 (WL-300g) 、 IP Camera(DCS-900) 與
HUB(ES-105A)，HUB 用以連接 PXA270、無線基地台
與 IP Camera，在監控端主機方面，遠端主機透過無線網
卡(AWL400)與行動輔具上的無線基地台建立無線網路
連線，作資料傳輸與抓取 IP Camera 影像。 
圖 8 系統硬體架構圖 
(1)Joystick 電路設計 
 6
計、製作後，圖 13 表示行動輔具之正視圖、側視圖與斜
視圖。 
   
圖 13 行動輔具之正視圖、側視圖與斜視圖 
 
IV. 系統軟體設計與實現 
在此章節中，先簡介本系統所使用的嵌入式作業系
統 Windows CE，並與其它嵌入式作業系統比較其優缺
點。並且介紹作業系統開發工具 Platform Builder，與闡
述為何選用 C＃作為監控端主機與開發板 PXA270 的應
用程式開發工具。接著，介紹本系統的系統軟體架構，
分為嵌入式開發板 PXA270 軟體架構、Basic Stamp 2 軟
體架構與監控端主機軟體架構三部份說明。最後，闡述
我們所設計的模糊速度調適器與室內定位系統。 
A. 嵌入式作業系統：Windows CE 
(1)Windows CE 簡介 
Windows CE 為微軟最先進的嵌入式即時作業系統
（Real Time OS,RTOS），可快速開發 32 位元的智慧型、
具連接性與精巧的裝置，並非由桌上型電腦的 Windows
修改縮小而來，而是使用一套完全重新設計的核心，所
以可在功能非常有限的硬體上執行。其優點有：模組化
元件及擴充性佳、即時功能強大、通訊能力優良、優越
多媒體功能與支援多種 CUP，並提供高度的 Win32 API
軟體開發介面的相容性，包括：記憶體管理、檔案操作、
多執行緒與網路功能等。 
(2)作業系統開發工具 
本系統作業系統開發工具為 Platform Builder，其 
用來建立基於 Microsoft Windows® CE .NET 作業系統
中的自訂嵌入式平台的整合式開發環境  (Integrated 
Development Environment, IDE)。也就是可以在 Platform 
Builder 提供的開發環境中加入之後所要使用到的應用
程式、硬體驅動程式掛載或修改、系統設定，以及量身
訂作之後所要提供的功能如：網路、VOIP…等，達到快
速開發的效能。 
(3)應用程式開發工具 
由於 C#的易上手，又有 C++/JAVA 的物件導向的
強大支援，本身雖沒有自己的標準函式庫或類別庫，但
擁有.Net Framework 類別庫可供使用，倘若在.Net 所提
供的三四千個類別庫內中找不到合適的類別可供使用
時，還是可以照以前一樣仰賴 Win32 API(透過 PlateForm 
Invoke 機制), 呼叫我們要的系統服務。綜合來說，C#
有著 VB6 的易學性，又完全支援物件導向的三大特色，
封裝，繼承和多型，在軟體的重用性方面大大提升了程
式開發的效率，另外一方面，由於.Net Framework 本身
完全都是用 C#語言下去開發的，所以要發揮.Net 的所有
特色和功能，用 C#搭配.Net Framework 來開發您的應用
程式等，所以我們選擇以 C#作為監控端主機與行動輔具
的開發應用程式軟體。 
B. 系統設計軟體流程 
本系統軟體流程分為三部份加以說明，分別為嵌入
式開發板 PXA270 軟體流程圖、Basic Stamp 2 軟體流程
圖與監控端主機軟體流程圖。 
嵌入式開發板 PXA270 的軟體流程圖，如圖 14 所
示。當啟動應用程式後，將會執行無線網路連線、視窗
系統與模糊速度調適器三道執行緒。在無線網路連線執
行緒中，PXA270 會等待監控端主機連線，當監控端主
機發出請求連線時，則建立網路連線機制，最後此執行
緒將不斷的接收與更新由監控端主機傳送的位置資訊。
在視窗系統執行緒中，PXA270 提供ㄧ個圖形化介面，
包含了無線網路的連線狀況與使用者座標位置，並內建
已知的環境地圖，以顯示使用者位置等資訊，其目的是
為了方便使用者容易操作，在系統啟動後，圖形化介面
將不斷更新系統的環境資訊。最後在模糊速度調適器執
行緒方面，我們設計一模糊速度調適器，並實現在嵌入
式開發板 PXA270 上，當系統啟動時，PXA270 將開啟
與 Basic Stamp 2 溝通的 UART 介面，接收自 Basic Stamp 
2 所傳送的資料，包括 Joystick 的 X 軸與 Y 軸偏移量、
由超音波測得的人機距離與雙軸加速度計的傾斜角度，
首先，根據 Joystick 的 X 軸與 Y 軸偏移量做基本行為的
判斷，接著，先將超音波測得的人機距離與雙軸加速度
計由卡爾曼濾波器做雜訊的濾除，並且送至模糊速度調
適器中，推論出行動輔具所需移動的速度，最後結合基
本行為做速度的調適，控制移動平台。模糊速度調適器
細節的部份，將在後續章節中詳細敘述之。 
圖 14 嵌入式開發板 PAX270 軟體流程圖 
Basic Stamp 2 的軟體流程圖，如圖 15 所示。Basic 
Stamp 2 主要是負責收集感測器的訊號與煞車機制的判
斷，當系統啟動時，Basic Stamp 2 先初始化各 IO 腳位，
 8
      輪速 
 
方向控制 
左右輪速 
左輪速度(VL) 右輪速度(VR) 
 
 
 
 
方向 
前進 VL=speed*(1) VR=speed*(1) 
後退 VL=speed*(-1) VR=speed*(-1) 
左前 VL=speed*(0.5) VR=speed*(1) 
右前 VL=speed*(1) VR=speed*(0.5) 
左轉 VL=speed*(-0.5) VR=speed*(0.5) 
右轉 VL=speed*(0.5) VR=speed*(-0.5) 
停止 VL=坡度所需支撐力 VR=坡度所需支撐力
表 1 基本行為速度乘積表 
(3) 模糊速度調適器之設計 
由卡爾曼濾波器濾除雜訊後的人機距離 D 與傾斜
角度 θ，將送至模糊速度調適器中。在說明本系統設計
的模糊速度調適器之前，先說明 θ代表的涵意。如圖 18
所示，為行動輔具於斜坡分力示意圖，由示意圖可知，
一般而言，行動輔具在斜坡時，有一 α向量的力，經由
公式的推導，可將 α向量的力分成 θ與 β兩個垂直向量
的分力取代。由於我們設計的行動輔具，其重心位置在
於前端馬達處，且移動平台為固定式的兩輪差速機構，
所以在 β方向分力影響並不大，因此我們只須對 θ向量
分力作考量。 
αsinmgA =
θγα sincossin mgmgB ==
βαα sinsinsin mgmgC ==
 
圖 18 行動輔具於斜坡分力示意圖 
在說明傾斜角 θ涵意後，接下來說明本系統所設計
的人機順服控制-模糊速度調適器。本系統所設計的模糊
速度調適器，目的提供使用者一個主動式的攙扶平台，
並提供速度調適與重力補償兩大功能。 
所謂的速度調適是根據使用者與行動輔具的之間
的距離作速度的調整，這樣的設計對於使用者而言，不
但可適應使用者的移動速度，更增加了安全的考量。而
重力補償的功能則是針對不同坡度的路面，提供所需的
補償力給馬達，使行動輔具在任何路面都能像平地一
樣，跟隨使用者緩和的移動，並可防止斜坡滑落現象的
產生。以下為我們模糊速度調適器的步驟流程。 
步驟一：確定模糊速度調適器的架構 
 在本系統中採用二維模糊速度調適器架構，兩個輸入
變數為超音波所測得的人機距離 D 與雙軸加速度計
所測得的傾斜角度 θ，輸出變數則為行動輔具要移動
的速度 Speed。 
步驟二：定義輸入輸出模糊集合 
 人機距離 D = { 太近了, 近, 有些近, 適當, 有些遠, 
遠, 太遠了} = { 3NS, 2NS, 1NS, ZS, 1PS, 2PS, 3PS } 
 傾斜角度 θ= { 往下傾太多了, 往下傾, 稍微往下
傾, 往下傾很少,正常, 稍微往上傾, 往上傾, 往上傾太
多了} = { 4NM, 3NM, 2NM, 1NM, ZM, 1PM, 2PM, 
3PM } 
 輸出速度 Speed = {負速度 7, 負速度 6,  負速度 5,  
負速度 4,  負速度 3,  負速度 2,  負速度 1, 適中,
正速度 1 , 正速度 2, 正速度 3, 正速度 4, 正速度 5, 
正速度 6, 正速度 7, 正速度 8 } = { 7NV, 6NV, 5NV, 
4NV, 3NV, 2NV, 1NV, ZV, 1PV, 2PV, 3PV, 4PV, 5PV, 
6PV, 7PV, 8PV } 
步驟三：定義歸屬函數 
 因考慮到此系統的硬體平台，故挑選計算複雜度較低
的三角形歸屬函數來使用。圖 19 輸入變數 D 的歸屬
函數。圖 20 輸入變數 θ 的歸屬函數圖。21 輸入變
數 Speed 的歸屬函數。 
 
圖 19 輸入變數 D 的歸屬函數 
 
圖 20 輸入變數 θ的歸屬函數 
 
圖 21 輸入變數 Speed 的歸屬函數 
步驟四：建立模糊規則庫 
 此部份是針對人機距離 D 傾斜角度 θ 這兩個輸入的
所有情況做出適當的控制法則(Speed)。其大部份跟
人類的思維很類似，當使用者與行動輔具距離過近
時，則必須加快速度，以保持適當的距離。反之，當
距離過遠時，則必須減緩速度，來調適出適合的距
離，而當行動輔具於下坡時，必須考量下坡面的下心
力，所以須減緩速度，甚至給予逆向的速度來調適。
反之，當行動輔具於爬坡時，則必須考量爬坡時的重
心吸引力，故須給予較大的速度，藉以保持行動輔具
的行走速度。表 2 為本系統根據 D 和 θ 兩個輸入歸
屬函數對應到 Speed 輸出歸屬函數，所訂定出的 56
個規則，這樣的輸入與輸出的關係是根據我們不斷的
測試所調適出來的控制法則。 
 
 
傾斜角 θ 
4NM 3NM 2NM 1NM ZM 1PM 2PM 3PM
 
人
機
距
離
D
 
3NS 5NV 3NV 1NV 1PV 3PV 4PV 6PV 8PV
2NS 5NV 4NV 1NV 1PV 3PV 3PV 6PV 7PV
1NS 5NV 4NV 1NV ZV 2PV 3PV 5PV 6PV
ZS 6NV 4NV 1NV ZV 2PV 3PV 5PV 5PV
1PS 6NV 5NV 2NV ZV 2PV 3PV 5PV 4PV
2PS 7NV 6NV 3NV ZV 2PV 2PV 5PV 4PV
3PS 7NV 6NV 3NV ZV ZV 2PV 4PV 4PV
表 2 模糊速度調適器的輸入與輸出對應規則表 
 
 10
 
圖 25  PXA270 視窗操作介面 
 
V. 系統整合與實測 
在上述兩個章節中，我們已介紹整個系統所需的軟
硬體元件並且實現，所有的功能皆由友善的圖形化介面
提供使用者使用，不論是在行動輔具上，或是監控端主
機。 
本系統所完成的主要功能有： 
 圖形化介面： 
 在行動輔具 PXA270 與監控端主機上，我們以 C#
開發應用程式，提供一個友善的圖形化介面，包括
了所有的系統資訊、定位資訊與辨識結果等， 
 定位資訊： 
 由監控端主機透過無線網路抓取行動輔具上攝影
機所拍攝的影像，透過室內定位演算法辨識出行動
輔具位置，以提供行動輔具的座標位置，並在行動
輔具上的 PXA270 與監控端主機的圖形化介面，內
建環境地圖並顯示。 
 速度調適： 
 我們以模糊速度調適器完成行動輔具的速度調適
功能，使行動輔具可適應使用者的移動速度做調
適。 
 重力補償 
 我們以模糊速度調適器完成行動輔具的重力補償
功能，以抵銷行動輔具在任何坡度路面所造成的重
力吸引力，使行動輔具能在任何路面上平順移動，
不至於有滑落的情況產生。 
 人機安全機制 
 我們以模糊速度調適器作為行動輔具的運動控
制，當使用者在任何路面上使用時，行動輔具能配
合使用者速度作順服移的動，增加使用者的人機安
全。 
A. 系統測試 
在此章節中，將以四個實驗，分別為 L 形路徑測
試、S 形路徑測試、爬坡測試與下坡測試，藉以驗證我
們所設計的模糊速度調適與定位系統的效果。 
(1)L 形路徑測試 
在一般環境中，以行動輔具提供使用者攙扶功能，
並規劃一條 L 形路徑，藉以測試模糊速度調適器在直線
行走與室內定位效果。如圖 26 所示，分為三部份，監控
端主機操作介面、行動輔具操作介面與使用者當前位
置。在圖 26 中，我們可以發現當使用者沿著我們所規劃
的 L 形路徑移動時，在監控端介面與行動輔具操作介面
會同時更新使用者的座標位置，並顯示在內建定圖上。 
(2)S 形路徑測試 
我們在一般環境中，以行動輔具對使用者提供攙扶
功能，並規劃一條 S 形路徑，藉以測試模糊速度調適器
在轉彎的路線與室內定位效果，如圖 27 所示。ㄧ樣分為
監控端主機操作介面、行動輔具操作介面與使用者當前
位置三部份闡述，在表中，我們可以發現當使用者沿著
我們所規劃的 S 形路徑移動時，行動輔具不但可以很平
順的攙扶使用者作轉彎的移動，並且在監控端介面與行
動輔具操作介面會同時更新使用者的座標位置，並顯示
在內建地圖上。 
 
(3)爬坡測試 
在爬坡測試方面，如圖 28 與圖 29 所示，主要測試
行動輔具位於上坡路面時，模糊速度調適器效果，驗證
我們所設計的模糊速度調適器是否達成了速度的調適與
重力的補償，進而達到人機安全的機制。 
(4)下坡測試 
在下坡測試方面，如圖 30 與圖 31 所示，主要測試
行動輔具位於下坡路面時，模糊速度調適器效果，驗證
我們所設計的模糊速度調適器是否達成了速度的調適與
重力的補償，進而達到人機安全的機制。 
 
 
圖 26 行動輔具於 L 形路徑與測試結果 
 12
International Conference on Mechatronics and 
Automation, China, pp.13-18, 2006. 
[9] Y. Hirata, A. Hara and K. Kosuge, “Motion Control 
of Passive Intelligent Walker Using Servo Brakes”, 
IEEE Transactions on Robotics, pp.981-990, 2007. 
[10] Y. Hirata, T. Baba and K. Kosuge, “Motion control 
of omni-directional type walking support system 
"Walking Helper"” , Proc. of IEEE International 
Workshop on Robot and Human Interactive 
Communication, Millbrae, California, USA, 
pp.85-90, 2003 
 
