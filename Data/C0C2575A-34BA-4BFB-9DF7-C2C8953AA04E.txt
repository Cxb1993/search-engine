研究摘要(500 字以內)： 
本計劃提出具有向量控制之無量測器直流無刷馬達的驅動控制技術，其由量測直流無
刷馬達的相電壓與相電流，應用磁交鏈增量與反電勢來估測轉子位置增量。接著，應用估
測的轉子位置來建立解耦合轉子磁場導向控制之無量測器直流無刷馬達驅動系統，並利用
根軌跡法來調適控制器之參數。本計畫使用 dspPIC30F6010A 開發驅動控制卡，再透過
SDIP-IPM IM23400發展功率級板輸出 PWM信號驅動直流無刷馬達進行實作驗證。所完成
的硬軟體架構，非常適合於相關產業界所採用。 
 
人才培育成果說明： 
本計畫在執行期間，主持人與參與學生和配合廠商互動性良好，感謝廠商提供諸多實際測
試協助。參與計畫之人員，從計畫執行過程中，可總結以下之培育成果: 
1. 以 dspPIC30F6010A 開發無量測器向量控制直流無刷馬達之驅動控制卡，以解決相關
產業界有關無量測器直流無刷馬達驅動控制系統所遭遇問題。 
2. 建立控制器設計的正確程序與方法，以改善產業界經常以試誤法所帶來人為誤差。 
3. 針對硬體驅動電路的研製提出系統化設計程序的解決方案。 
4. 培育寧茂企業有限公司研發人員有關磁場導向控制與控制器設計技術。 
5. 參與研究人員可獲得機電控制之硬軟體設計、模擬與實驗過程的嚴格訓練，並學會動
手實作技術，可立即投入產業界以提昇產業的研發素質。 
 
技術研發成果說明： 
    無刷馬達早期因磁極所需永磁材料取得不易，造成價格高昂，因而無法受工業界廣泛
採用，近年來由於高導磁材料與應用技術不斷的開發，使其價格降低。至於其它馬達因原
物料售價快速竄升造成其價格飆升迅速，又加以運轉效率無法和直流無刷馬達匹敵，使得
直流無刷馬達驅動器逐漸形成工業界寵兒。   
    被應用於一般速度或定位控制的直流無刷馬達驅動器，經常需要使用編碼器(encoder)
或轉速器(tachometer)來回授直流無刷馬達的轉速或位置，但加裝了編碼器或轉速器等感測
裝置，除會破壞直流無刷馬達本身機械結構的強健性以外，還會增加成本，對已處於微利
競爭的生產廠商造成極大的價格壓力，而且也不適合於高污染與惡劣環境中的應用。 
    本計畫的技術研發成果有： 
 ◎以 dspPIC30F6010A開發直流無刷馬達之驅動控制卡。 
 ◎以 SDIP-IPM IM23400發展功率級板輸出 PWM信號驅動馬達。 
 ◎由直流無刷馬達的相電壓與相電流計算磁交鏈增量與反電勢，建立轉速估測技術。 
 ◎建立控制器設計的正確程序與方法。 
 ◎建立解耦合向量控制直流無刷馬達驅動器的系統化設計步驟。 
 
1. 直流無刷馬達的驅動原理 
    直流無刷馬達採用電子換相方式的電源功率級就如圖 1 所示，其為了驅動馬達的三相
繞組，共需使用 6個功率半導體開關。 
  
 圖 1 直流無刷馬達的電源功率級 
 1
個相對位置。之後，將取自霍爾元件的轉子位置資訊，再配合 120°矩形波驅動方法，由適
當的改變功率晶體之導通或截止，使得相電流能與反電勢形成同步。但是裝設霍爾元件卻
會使得馬達的體積增加，而且在工作環境的溫度過高時也會造成霍爾元件無法正確動作。 
2. 直流無刷馬達的轉子位置估測 
    直流無刷馬達的定子電壓方程式可表示為： 
 
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
+
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
+
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
=
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
cs
bs
as
cs
bs
as
cs
bs
as
s
s
s
cs
bs
as
E
E
E
i
i
i
dt
d
L
L
L
i
i
i
R
R
R
v
v
v
00
00
00
00
00
00
 (1) 
式中： 、 、 為定子相電壓， 為定子電阻， 、 、 為定子相電流， 為等效電
感( ， 為定子自感、 為互感)， 、 、 為定子反電勢。又定子反電勢可
表示成： 
sav bsv csv sR asi bsi csi L
ms L-LL  = sL mL asE bsE csE
 
⎥⎥
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎣
⎡
−
+=
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
=
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
)
3
2sin(
)
3
2sin(
)sin(
)(
)(
)(
πθω
πθω
θω
θω
θω
θω
ere
ere
ere
ecsre
ebsre
easre
cs
bs
as
K
K
K
eK
eK
eK
E
E
E
 (2) 
式中： 為反電勢常數，eK rω 轉子角速度， )( ease θ 、 )( ebse θ 、 )( ecse θ 反電勢函數， eθ 轉子位置
角，如式(3)所示： 
 
dt
d
P
dtP erre
θωωθ 2        
2
=⇒= ∫  (3) 
式中 P為磁極數。 
    將式(2)與式(3)代入式(1)，可獲得 
 
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
+
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
+
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
=
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
)(
)(
)(
2
00
00
00
00
00
00
ecs
ebs
eas
ee
cs
bs
as
cs
bs
as
s
s
s
cs
bs
as
e
e
e
dt
d
P
K
i
i
i
dt
d
L
L
L
i
i
i
R
R
R
v
v
v
θ
θ
θθ  (4) 
令 tfdtdf ∆∆= ，可將式(4)整理成： 
 
⎥⎥
⎥⎥
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎢
⎣
⎡
∆
∆
∆
=
⎥⎥
⎥⎥
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢⎢
⎢⎢
⎢
⎣
⎡
∆−∆−
∆−∆−
∆−∆−
=
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
∆
∆
∆
)(
)(
)(
2
)(
)(
)(
)(
)(
)(
2
ecs
cs
ebs
bs
eas
as
e
ecs
cscscs
ebs
bsbssbs
eas
asassas
e
ce
be
ae
e
e
e
K
P
e
iLtRiv
e
iLtiRv
e
iLtiRv
K
P
θ
ψ
θ
ψ
θ
ψ
θ
θ
θ
θ
θ
θ
 (5) 
式中： 為取樣區間， 、 、 為取樣區期內的電流增量，t∆ sai∆ sbi∆ sci∆ saψ∆ 、 sbψ∆ 、 scψ∆ 為取樣
區間內的磁通增量。式(5)的平均值為： 
 
3
cebeae
e
θθθθ ∆+∆+∆=∆  (6) 
將轉子位置角以離散化處理，可得到 
 ...3,2,1)1()( =∆+−= kkk eee θθθ  (7) 
將式(5)中的第 1至第 3列分別乘上 )( ease θ 、 )( ebse θ 、 )( ecse θ ，可獲得 
 
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
∆
∆
∆
=
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
∆−∆−
∆−∆−
∆−∆−
=
⎥⎥
⎥
⎦
⎤
⎢⎢
⎢
⎣
⎡
∆
∆
∆
cs
bs
as
e
cscsscs
bsbssbs
asassas
e
ecsce
ebsbe
easae
K
P
iLtiRv
iLtiRv
iLtiRv
K
P
e
e
e
ψ
ψ
ψ
θθ
θθ
θθ
2
)(
)(
)(
2
)(
)(
)(
 (8) 
將式(8)中第 1 至第 3 列分別乘上 )( ebse θ 、 )( ecse θ 、 )( ease θ ，並將此三方程式相加整理之後，
再利用式(6)關係，可獲得估測轉子位置角的增量為 
 
)()()()()()(
)()()(
2 ∧∧∧∧∧∧
∧∧∧
∧
++
∆+∆+∆=∆
easecsecsebsebseas
eascsecsbsebsas
e
e
eeeeee
eee
K
P
θθθθθθ
θψθψθψθ  (9) 
    圖 5 所示為無量測測器轉子位置估測的方塊圖，其利用量測馬達的相電壓與相電流經
由磁交鏈計算方塊而獲得磁交鏈增量，再將磁交鏈增量與反電勢透過轉子位置估測方塊可
 3
方塊圖。 
 
e
dsv
sL
1
ss LRs +
1
sL
sL
e
qsv
sL
1
ss LRs +
1
×
×
×
×
4
3P
mm BsJ +
1
2
P
+ +
e
dsi
e
qsi
Fψ ′
eT+ L
T
-
eω
rmω+
-
-
 
 圖 6 在轉子磁場導向控制之直流無刷馬達方塊圖 
式(20)中的 軸與 軸定子電壓耦合量分別為 與 ，將它們從式(20)提出可表示成 ed eq eqseiω edsei-ω
 ⎥⎥⎦
⎤
⎢⎢⎣
⎡
′
++⎥⎥⎦
⎤
⎢⎢⎣
⎡
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎣
⎡
=⎥⎥⎦
⎤
⎢⎢⎣
⎡
Fe
e
dsse
e
qs
e
qsse
e
ds
s
e
qs
e
ds
s
s
s
s
e
qs
e
ds
-ωiLω-v
iLωv
Li
i
L
R-
L
R-
i
i
p ψ 
1
0
0
 (22) 
為了消除 軸與 軸定子電壓的耦合量，定義兩軸的定子電壓命令分別為： ed eq
  (23) eqssedseds iL-ωvv ′=∗
  (24) Feeqsseqseqs ωiLωvv ψ ′++′=∗
上兩式中 與 分別為 軸與 軸定子電流控制器的輸出，將式(23)與(24)分別代入式(22)
中的 與 可獲得： 
dsv′ qsv′ ed eq
e
dsv
e
qsv
 ⎥⎦
⎤⎢⎣
⎡
′
′+⎥⎥⎦
⎤
⎢⎢⎣
⎡
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎣
⎡
=⎥⎥⎦
⎤
⎢⎢⎣
⎡
qs
ds
s
e
qs
e
ds
s
s
s
s
e
qs
e
ds
v
v
Li
i
L
R-
L
R-
i
i
p 1
0
0
 (25) 
式(25)為理想轉子磁場導向控制情況下，直流無刷馬達之解耦合兩軸模式，圖 7 為其方塊
圖。在圖 7 中，可看出在轉子磁場導向控制與電壓解耦合情況下，採用前饋補償的直流無
刷馬達之 軸與 軸定子電流，將分別單獨由 軸與 軸定子電壓來控制。 ed eq ed eq
 
sL
1
ss LRs +
1
sL
1
ss LRs +
1
F22
3 ψ ′P ×
mm BsJ +
1eT
LT
-+ rmωdsv′
qsv′
e
dsi
e
qsi
 
 圖 7 在轉子磁場導向控制之直流無刷馬達的解耦合方塊圖 
    圖 8 所示為無量測器直流無刷馬達在轉子磁場導向控制架構下之完整控制方塊圖，其
利用量測的定子電壓與定子電流經由轉子位置角估測方塊取得轉軸估測位置，而對轉軸估
測位置微分則可獲得轉軸估測速度。由於其轉子為永久磁鐵，使得磁通為定值，所以令 軸
定子電流命令 為零，因此可由單獨控制 軸定子電流來控制馬達轉矩。在圖 8中的無量
測器直流無刷馬達轉子磁場導向控制架構中共包括速度控制器、 軸與 軸定子電流控制
器以及電壓解耦合單元。 
ed
*e
deI
eq
ed eq
 5
6.無量測器直流無刷馬達驅動器系統架構驗證 
   本系統使用MATLAB/SIMULINk套裝軟體建立如圖 11所示架構進行模擬驗證，其中包
含直流無刷馬達模型、座標轉換、速度估測器、d-軸定子電流控制器、q-軸定子電流控制器、
速率控制器。 
BLDC
v a
v b
v c
ia
ib
ic
theta
theta^
wrms-wrm Tes
piv
iq* v q
piq
id* v d
pid wrm1
ias
in
t
wrm
a
b
c
TL
ia
ib
ic
wrm
we
iqse vqs
we
idse vqs
Te iqs
Repeating
Sequence
-K-
2/P
-K-
-K-
du/dt
Derivative
0
0
Clock
a
b
c
theta
q
d
3s-2e
vq
vd
theta
v a
vb
v c
2e-3s
 
圖 11無量測器轉子磁場導向控制直流無刷馬達模擬方塊圖。 
    圖 12所示為本計畫研製的驅動系統架構，包含：使用SDIP-IPM IM23400發展的功率
級板、由dspPIC30F6010A開發的驅動控制卡，以及受控直流無刷馬達。 
  
 圖 12本計畫研製的驅動系統架構 
    本系統的實驗架構，先以 C語言編寫控制程式並經由 MPLAB IDE配合 ICD2在所開
發的 dsPIC30F6010A驅動控制卡進行燒入與除錯，再經由以 SDIP-IPM IM23400所發展的
功率級板輸出 PWM 信號來驅動直流無刷馬達，執行無量測器向量控制直流無刷馬達驅動
控制實驗驗證。 
    圖 13 所示為本系統所量測的 A 相與 B 相之上臂與下臂的 PWM 觸發信號，其中上臂
採用獨立模式，下閉採用開關模式。而圖 14所示為本系統所量測的馬達之三相線電壓波形。 
  
圖 13  A相與 B相之上臂與下臂的 PWM觸發信號。CH1為 A相上臂，CH3為 A相下臂，CH2為 B相上臂，
CH43為 B相下臂。 
 7
 
0 1 2
0.0
0.5
1.0
1.5
0 1 2
0
500
1000
1500
time(s)
  (a)
sp
ee
d(
rp
m
)
time(s)
  (c)
sp
ee
d(
rp
m
)
0 1 2
0.0
0.5
1.0
1.5
0 1 2
0
500
1000
1500
is
(A
)
is
(A
)
time(s)
  (b)
time(s)
  (d)  
圖 17 在轉速命令為 1000 rpm時的模擬與實驗之轉速與定子電流。（a）模擬轉速、（b）實驗轉速、（c）模擬
定子電流、（d）實驗定子電流。 
  
 圖 18在轉速命令為 1000 時由示波器量測的相電流。A相(CH1)、B相(CH2)的相電流。 rpm
 
0.0 1.0 2.0
0.0
0.5
1.0
1.5
2.0
2.5
3.0
0.0 1.0 2.0
0
500
1000
1500
2000
2500
time(s)
  (a)
sp
ee
d(
rp
m
)
time(s)
  (c)
sp
ee
d(
rp
m
)
0.0 1.0 2.0
0.0
0.5
1.0
1.5
2.0
2.5
3.0
0.0 1.0 2.0
0
500
1000
1500
2000
2500
is
(A
)
is
(A
)
time(s)
  (b)
time(s)
 (d)  
圖 19 在轉速命令為 2000 rpm時的模擬與實驗之轉速與定子電流。（a）模擬轉速、（b）實驗轉速、（c）模擬
定子電流、（d）實驗定子電流。 
 9
