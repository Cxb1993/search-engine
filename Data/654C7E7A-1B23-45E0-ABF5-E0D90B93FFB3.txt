  2
行政院國家科學委員會補助專題研究計畫成果報告 
 
數位廣播之電腦軟體接收機 
 
 計畫編號： NSC 97-2221-E-216-041 
 執行期間： 97年08月01日至98年07月31日 
 計畫主持人： 陳棟洲  中華大學通訊工程學系 
 
 
 
摘要 
 
隨著影像壓縮技術之進步、半導體科技之快速發展、無線通訊技術與數位傳送輸技術
之快速進步，使電視節目製作到傳收機的整個系統都得以數位化實現，使電視廣播技術繼
黑白類比電視廣播、彩色類比電視廣播之後，進入第三代之數位電視廣播。另一方面，由
於無線行動通訊產業蓬勃發展，使行動電話的功能日益多樣化並朝向廣義的個人行動(手持
式)裝置演變，諸如接收數位電視節目等多媒體服務預期都將是未來行動裝置的主要功能之
一。本計畫希望善用大家身邊的個人電腦以及可隨身攜帶之筆記型電腦的強大 CPU 運算能
力以及大的螢幕終端，用其來開發行動電視之電腦軟體接收系統。由於 DVB-H 系統是以
DVB-T 系統為基礎，本計畫第一年便先針對技術已經比較成熟以及台灣也已開播之 DVB-T
數位視訊廣播，先進行 DVB-T 數位電視電腦軟體接收系統之數位基頻信號處理程式的建
構。在前端射頻信號部分，我們先以 Signal Analyzer (Rohde&Schwarz FSQ)配合市面上可買
到之專用天線，直接將 DVB-T 射頻訊號轉至中頻，在由類比/數位轉換器將中頻類比訊號
轉為數位信號，再由所建構之 DVB-T 數位電視電腦軟體接收系統之數位基頻信號處理程
式，將台灣無線電視台實際所發送訊號之傳輸參數 TPS 解出，以驗證其可行性。 
 
 
 
關鍵詞：數位廣播、軟體無線電、電腦 
 
  4
出一個不一樣的 DVB-H 行動電視「軟體」無線電接收系統的概念，善加利用筆記型電腦的
普及率、超強計算能力、較長之電源續航力、以及攜帶移動方便性，來取代軟體無線電所
利用之可程式化硬體，處理 DVB-H 行動電視的基頻數位訊號，以不一樣的軟體無線電思維
來善用電腦功能以及發揮電腦的應用價值。 
由於 DVB-H 系統是以 DVB-T 系統為基礎，本計畫第一年便針對技術已經比較成熟以
及台灣也已開播之 DVB-T 數位視訊廣播，先進行 DVB-T 數位電視電腦軟體接收系統之數
位基頻信號處理的研究。第二年起再將第一年之 DVB-T 系統延伸到 DVB-H 系統。本計畫
規劃以三年的時間來進行 DVB-H 行動電視之電腦軟體無線電接收系統概念雛型之研究。 
本年度之計畫著重於數位視訊廣播 DVB-T 之基頻接收模擬平台(台灣參數規格)的建
立。我們先以 Signal Analyzer (Rohde&Schwarz FSQ)配合市面上可買到之專用天線，直接將
DVB-T 射頻訊號中頻，在由 ADC 轉為數位信號，再由所建構之 DVB-T 數位電視電腦軟體
接收系統之數位基頻信號處理平台，將台灣無線電視台實際所發送訊號之傳輸參數 TPS 解
出，以驗證其可行性。 
 
  6
Sync
1 Byte
MPEG-2 transport MUX data
187 byte
(0x47)  
圖 2.2、MPEG-2 TS 封包結構圖 
此系統之通道編碼(Channel Coding)包含有亂碼器(data randomizer)、外編碼(outer 
coding)、外間插(outer interleaving)、內編碼(inner coding)、內間插(inner interleaving)，如圖
2.3 所示。 
Channel Coding
Randomizer OuterCoder
Outer
Interleaver
Inner
Coder
Inner
Interleaver
 
圖 2.3、通道編碼系統方塊圖 
MPEG-2 TS 進入通道編碼後，經由亂碼器將資料打亂，目的是讓傳送的資料近似於亂
數排列，這是因為資料源所傳送的資料，產生各符號機率不相同，因此會有能量不均勻及
接收時時序判斷不易等問題產生。所以大多數的通訊系統都會在訊號源後接一個攪拌器
(scrambler)將資料以亂數的形式送出，在此是用亂碼器(randomizer)將封包中非同步位元以
外的資料打亂。DVB-T 亂碼器的產生多項式為 g(x)=1+x14+x15，其結構為圖 2.4。亂碼器主
要是由 15 個位元的移位暫存器以及 1 個 XOR 邏輯閘所組成的攪拌器，並配合 1 個 AND
邏輯閘與 1 個 XOR 邏輯閘達到同步位元組(Sync. Byte)不會被打亂，而非同步位元組能被打
亂的功能。其打亂方式是以 8 個 TS 封包(188 × 8 = 1504 Bytes)為週期，每個週期開始攪拌
器的初始值為 10010101000000」，每一週期攪拌器將重新作初始化動作。每週期中 8 個 TS
封包的第一個封包的同步位元組的值 0x47 作反轉為 0xB8，以利接收端判別之用，資料經
由亂碼器後封包結構如圖 2.5 所示。 
  8
1SYNC
nSYNC
 
圖 2.6、經過外編碼後之封包結構圖，取材自[1] 
nSYNC
1SYNC
nSYNC
1SYNC
nSYNC
1SYNC
 
圖 2.7、經過外間插後之封包結構圖 
 
圖 2.8、Interleaver 與 deinterleaver 之結構圖，取材自[1] 
DVB-T 系統的 inner coding 是採用 punctured convolutional code，其母碼(Mother Code)
為(2, 1, 6) convolutional code，架構如圖 2.9。依環境產生多重路徑干擾及頻率選擇性之衰落
變動多寡的需求，調整其編碼率(Code Rate)為 1/2、2/3、3/4、5/6 或 7/8，以因應各國各環
境不同的需求。Inner coding 也搭配一 inner interleaving，主要在於避免 OFDM 系統中在頻
域上連續錯誤的發生。內間插是由位元間插 (bit-wise interleaver)和符元間插 (symbol 
interleaver)所組成，內間插的位元間插與符元間插都是採用區塊間插模式 (block 
interleaving)。 
  10
Pilots &
TPS
Signals
Guard
interval
insertion
OFDMFrame AdaptionMapper
 
圖 2.10、調變系統方塊圖 
 
圖 2.11、IFFT 輸入輸出排列 
導引信號可以分為兩種，分別為連續導引 (Continual Pilots)及分散導引 (Scattered 
Pilots)，導引信號目的是提供接收機作為圖框同步(Frame Synchronization)、頻率同步
(Frequency Synchronization)、時間同步(Time Synchronization)、頻道傳輸特性估測(Channel 
Estimation)和追蹤相位雜訊(Phase Noise)等功能。連續導引載波(CPC)採用 BPSK 調變，並
將其振幅大小調至 4/3，即提高其發射功率大小，比一般資料載波功率高 16/9 倍，比一般
的訊號強故容易偵測，而連續導引載波所傳送的資料，是由一規定的隨機擾亂之二進位數
列(PRBS: 11 2 1x x  )多項式產生器所產生，其 PRBS 多項式產生器如圖 2.12 所示。連續
導引載波在 8k 模式傳輸模式下，共有 701 個導引載波，其中有 177 個為連續導引載波，
而連續導引載波在每個符元中的子載波位置是隨機的，但是在各符元中安排位置是一樣
  12
解 TPS 時同步之用，而奇數訊框(frame)與偶數訊框的同步字元並不相同。而 S54～S67 表
錯誤更正碼，採用 BCH(67,53,2)，為 BCH(127,113,2)的縮短碼。其 Code generator polynomial 
為 14 9 8 7 6 5 4 2( ) 1h x x x x x x x x x x          。完整的 TPS 存在於一個訊框(frame)內，
即 68 個 OFDM 符元表一個完整的 TPS 訊號，即一個 OFDM 符元只用於傳送一個位元的
TPS 訊號。以 8K 傳輸模式為例，一個 OFDM 符元用 68 個子載波來傳送相同的位元資訊。
OFDM 符元使用固定位置的子載波來傳送 TPS，如表 2.2 所示。TPS 訊號採用 DBPSK 
(Differential Binary Phase Shift Keying)調變，用連續兩個 OFDM 符元間之差異來表示一位元
的 TPS 訊號。在一個訊框內共有 68 個 OFDM 符元，若將其編號為 0～67 號，而編號 0 的
OFDM 符元中用於傳送 TPS 訊號的子載波，傳送的資料是由 PRBS 提供的初始值。而編號
1 的 OFDM 符元中用於傳送 TPS 訊號子載波，其傳送的資料則是由 TPS 訊號 S1 所決定，
若 S1 為 0 則傳送前一 OFDM 符元(編號 0)中 TPS 子載波資料;若 S1 為 1 則傳送反向的前一
OFDM 符元(編號 0)中 TPS 子載波資料，以此方式傳輸 TPS 訊息。故解碼的時候只要利用
連續 2 個 OFDM 符元的 68 個載波之差值做多數決投票，就能解出 TPS 的 1 位元。其中
提供傳輸參數信號初始值的 PRBS 與導引訊號所使用的 PRBS 相同，產生多項式皆為
g(x)= 11 2 1x x  。 
在 DVB-T 的設計中，連續 68 個 OFDM 符元構成一個訊框(Frame)，四個訊框構成一個
超碼框(Super Frame)，其階層關係如圖 2.14。 
表 2.1、傳輸參數信號格式 
 
  14
3. DVB-T 電腦軟體接收系統之 Simulink 數位基頻信號處理平台 
依據歐洲電信標準組織(ETSI)所制定的 DVB-T 標準，我們首先使用 Simulink 軟體建構
出 DVB-T 傳收系統之模擬平台，如圖 3.1。此 DVB-T 傳收系統之模擬平台的系統參數是依
照台灣無線電視台所採用的參數為依據，如表 3.1 所示。我們模擬 DVB-T 系統產生具同步
位元組、導引信號、TPS 信號之訊框資料，再將此訊框資料經由我們所建構之 Simulink 模
擬平台進行傳送與接收，經模擬驗證確認此 Simulink 傳收系統模擬平台正確無誤。 
 
圖 3.1、DVB-T 傳收系統之 Simulink 模擬平台 
表 3.1、DVB-T Simulink 模擬平台使用現行台灣無線電視台所選用之參數 
 
接著，我們便先建構一個擷取 DVB-T 訊號的硬體接收環境。我們使用羅德史瓦茲的向
量信號分析儀(ROHDE&SCHWARZ FSQ26 Signal Analyzer，如圖 3.2 所示) 來接收 DVB-T
之射頻訊號，此向量信號分析儀可接收訊號的頻帶為 20Hz 至 26.5GHz，而我們所擷取的台
視(TTV)無線訊號，其中心頻率為 581MHz、頻寬為 6MHz，如圖 3.3。接著我們使用 LYRTECH 
  16
 
                            圖 3.6、實驗室環境 
DVB-T 軟體接收機之基頻信號處理系統分三個階段來處理信號：「數位前端處理」、「訊
號同步」、「傳輸參數信號解碼」。數位前端處理主要是做 I/Q 解調變以及取樣頻率的轉換
[17]-[18]，其架構方塊圖與建構之 Simulink 系統模型分別如圖 3.7 與圖 3.8 所示。我們利用
Spectrum Scope 方塊觀察經數位前端處理後之 I/Q-channel 基頻訊號頻譜。首先利用
MATLAB 的 Filter Design Tool 設計一個帶通濾波器 BPF (Band-Pass Filter)來濾除雜訊使訊
號更乾淨。接著我們再將訊號分離成 I/Q channel 之訊號，其方式為將接收到的訊號分別與
cosine 及 sine 函數相乘，然後再經過低通濾波器 LBF1(Low-Pass Filter)，即可還原出擷取訊
號之 I-channel 與 Q-channel 的部份。由於訊號源之數位中頻訊號，其取樣頻率為 120MHz，
而 DVB-T 傳送端所使用的基頻取樣頻率為 48
7
MHz，故在此要作取樣頻率轉換，將
I/Q-channel 訊號升 2 倍頻，使得取樣頻率變為 240MHz 後，通過低通濾波器 LPF2，再降
35 倍頻使其取樣頻率恰好為 48
7
MHz，才算完成數位前端處理的部份，處理完成後之訊號
頻譜如圖 3.9。 
48Fs = MS/s
7
 
圖 3.7、數位前端處理之架構方塊圖 
  18
 
圖 3.10、訊號同步之 Simulink model 
 
圖 3.11、延遲相關器 
  20
 
圖 3.14、OFDM 有效子載波信號(左)與資料載波信號(右)星狀圖 
 
 
圖 3.15、連續導引載波 CPC(左)與分散導引載波 SPC(右)信號星狀圖 
 
 
圖 3.16、傳輸參數載波信號 TPS 星狀 
