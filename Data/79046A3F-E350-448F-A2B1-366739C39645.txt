  
 
第一章 緒論 ........................................................ 0 
1.1  文獻回顧...................................................... 2 
1.2  研究目的...................................................... 6 
1.3  章節概要...................................................... 7 
第二章 群組機器人 .................................................. 8 
2.1  群組機器人之簡介.............................................. 9 
2.2  群組機器人之分析............................................. 10 
第三章 群組機器人隊型控制 ......................................... 14 
3.1  隊型控制簡介................................................. 14 
3.2  隊型控制之分析............................................... 18 
第四章 隊型控制之基本行為設計 ..................................... 24 
4.1  實驗平台..................................................... 24 
4.2  隊型設計..................................................... 27 
4.3  直線行為..................................................... 28 
4.4  控制法則..................................................... 31 
第五章 隊型控制之複雜行為設計 ..................................... 34 
5.1  過門行為..................................................... 34 
5.2  避障行為..................................................... 37 
第六章 實驗與成果 ................................................. 40 
6.1  直線行為實驗結果............................................. 40 
6.2  複雜行為實驗結果............................................. 56 
6.2.1  過門行為 ................................................ 56 
6.2.2  避障行為 ................................................ 59 
6.2.3  過門行為、避障行為與指定路徑比較 ........................ 62 
第七章 結論 ....................................................... 66 
研究成果……………………………………………………………………………… 68 
參考文獻……………………………………………………………………………… 70 
  2
用合適的人工智慧，完成控制目的，是這項競賽的主要用意。 
 
觀察或發現已有的演算法及控制法則，套用至機器人身上，透過模擬、實驗
以測試其可行性，及對環境的適應性，是每個研發人工智慧的人員，所致力的目
標，本研究觀察常用的控制法則，以實際可能發生的情況，設計實驗平台來驗証
各法則的適用性，並提出驗証過程中的差異，期望透過此研究過程，研發一套較
適用某些特定情況的演算法，期能在 roobt 遭遇此情況下，可有較合理的解決方式。 
 
1.1  文獻回顧 
 
研究機器員的隊型控制相當具有趣味性，由於電腦運算進步，使得此領域的
研究能更進一步發展，Peter Stone 為 RoboCupSoccer 模擬競賽組世界冠軍的作者
之一，由 Peter Stone 所著 Layered Learning in Multagent Systems[ 7 ]一書中，提出
所謂以階層式的演算法(Layerd Learning)，分配任務及隊型，針對 RoboCup 比賽，
其所提出的階層式學習2，是個很好的做法；該方式較適用某些複雜且須集中操作
的場合，因為階層式的特性，是在分層管理後讓整個複雜系統能有效率的運作；
另外，由於階層式學習須大量資料，卻限制單純僅須移動的隊型控制，反而減低
了效率。 
 
在分散式(Decentralized Approach)的研究中，Jonatha 運用「雙向迴路邏輯中的
相對位置方式」、「以被動技術加入機器員的阻尼方式」及「計算機械構造之飽和
方式」，提出三種控制法則，並驗証出結果為可行，且三者差異不大[ 1 ]；在 Lawton
的方法中，僅以三部機器人來驗証，雖以三部機器人為基礎的實驗結果是可行的，
但針對較複雜的控制時，如五部以上的機器人，其可行性有待探討。另外，在文
中提及的方法皆可推展至 n 部機器人，但在模擬中發現，當機器人數量愈多時，
編號愈高的機器人，誤差有逐步增加的情況，換言之，可能無法預期完成任務。 
 
除了上述外，Lawton 方法並沒有針對時間項做討論，考慮機器人比賽的情況，
這是個重要的決勝點，因此，研究時間與設定的距離、完成的路徑及機器人的數
量……等的關係，是值得探討的。 
                                                 
2. 階層式學習(Layered Learning)：Learning an Individual Skill，Learning a Multiagent Behavior，
Learning a Team Behavior 
  4
 
 
圖 1. 2 Das 以三部機器人實現隊型控制 
 
，卻不易實現。Das 提出解決這情況的方法，即以單一感測、自主思考來實現群組
機器人的隊型控制。 
 
Desai[ 8 ]使用 graph theory 的方式，控制 nonholonomic 機器人能維持隊型及在
需要時能切換隊型，如圖 1. 4、圖 1. 5 所示，其依據三項指標：(1)各機器人相對
於 leader 位置的誤差，(2)各機器人間隊型的誤差，(3)描述機器人在各隊型中的行
為控制來完成，結果可在所列舉的障礙環境下，達成避障並切換隊型。 
 
Stipanovic[ 6 ]將原本複雜的互聯系統(interconnected system)，分割成幾個簡單 
 
圖 1. 3 Das 運用 SBC、SCC 方法控制 
  6
          
圖 1. 6 Stipanovic 提出互聯系統改良方式 
 
1.2  研究目的 
 
為使機器人更接近人類的思考，研究人員常將自身的想法加諸在機器人上，
大部分的情況下，問題皆可獲得解決，然而，諸如此設計方向，其實會受限在人
類有限的本能上，舉例來說，人類無法以時速 100 公里移動，而機器人則能達成；
人們無法在極短時間內，做大量計算，機器人與電腦配合後卻可輕易完成；因此，
強加人類思考於機器人身上不見得行得通，最好的方式應是設計良好的演算法，
佐以電腦計算速度快的優點，以及機器精密度高的可靠性，更有效實現任務才是。 
 
本論文研究群組機器人的隊型控制，目的在於使複數個機器人，同時具備「保
持隊型」及「移動」功能；保持隊型的意義在於讓整個群組機器人，在由起點出
發至終點的過程中，不論給予任何行為動作，在終點處，它仍能依照所給的隊型
排列，這關係到二個層面：單部機器人在起終點間的行為以及保持與各部機器人
距離的行為，若二層面妥善調合，方能完成，此外，當機器人數量增加時，整體
行為將複雜許多，也增加了額外的運算，平順並有效的切換隊型，這也是研究子
題之一。 
 
在完成初略的隊型控制後，本研究針對一些常用的隊型及行為，規劃了一連
串的實驗，並經由這樣的方式將控制法的缺點表現出來，當然，研究中也將這些
缺點做詳細說明，並將缺點改良後，提出實驗後的結果。 
 
在某些隊型無法適應的環境下，能做適當的隊型調整，這道理和人與人之間
在許多場合會自動與他人或障礙物保持距離是同樣道理，該方法除可應用在
RoboCup[ 17 ]競賽外，在未來，當機器人成為生活中的一部分時，其與人或與其
他機器人調整距離時，將成為很好的解決方式。 
 
  8
第二章 群組機器人 
 
早期大部分的研究團隊多以研究單一機器人為主，甚至僅是機器人上的某個
機構，如工廠常用的機械手臂，也是在累積經驗與時間後的產物，演變至今，機
械手臂已接近成熟的發展，緊接著是研究擬人的系統。 
 
所謂擬人的系統，指結合幾項人類或動物的某項行為特徵，如雙足、雙手或
頭部…等，這比研究單一機構要複雜得多。以雙足為例，人的足部包括了數個關
節，如要模擬走路行為，須兩腳各關節搭配得宜，方能完成，此搭配得宜的方式，
在分析時就比單一機構來的複雜，事後的搭配，更是如此，因此，為獲得一個較
合理的解決方法，利用足夠能力的電腦配合運算，似乎是必須的。 
 
上述所提供的一些方法，已有許多研究學者發展出很好的機器人，如可行走、
跑步，原地跳動的機器人，已不再是稀有名詞，伴隨加工技術的進步，以及電腦
運算速度的提升，有極大關聯；下一步要談的，則是複數個機器人的合作與溝通
的方式。 
 
群組機器人與複數個機器人的意思其實差異不大，共同處是以複數個機器人
完成工作，未來將有更多的場合，須要各獨立的機器人合作完成，以電影第五元
素 1 為例，未來的交通系統，很有可能以機器人去運作，不須人為操控，交通工具
自然會妥善的把人運送至某地點，然而，完成這項動作須各個獨立的機器人（機
器車）間，能維持適當行車距離，並且在切換道路的過程中，不致使機器人（機
器車）受到碰撞，對於整個交通系統，可以看成是個大型的群組機器人系統。 
 
本文所有主題，皆是基於群組機器人所做之控制，包括分析、設計與模擬，
其能對即將須要的未來，有所貢獻。 
 
 
 
 
 
                                                 
1 . 第五元素：電影，The Fifth Element，導演：Luc Besson，1997 
  10
與人類比賽，因此球員與球員間的協調、互動，得運用群組思考的概念，如進攻
時，持球的球員盡情地將球運至前方，而其他隊員，該以何種隊型，前進至前場
才能兼顧與持球者的互動，避開敵方球員，完成進攻的目的……等，目前比賽，
仍維持以每隊四部機器人為主，也就是四對四的競賽；因此，研究人員仍可應用
群組的觀念，將二部一組、三部一組或者是四部一組的方式來進行比賽對局。 
 
2.2  群組機器人之分析 
 
常見的群組機器人，在設計時有以下幾種思考方式： 
（１）隊型中心參考（Unit-center-referenced） 
（２）隊長參考（Leader-referenced） 
（３）鄰近參考（Neighborhood-referenced） 
 
以下就這三種參考方式做個討論。 
 
（１）隊型中心參考（Unit-center-referenced） 
隊型中心參考如圖 2. 1 所示，其中三角型代表機器人，黑色圓點代表中心參
考點，以該圖為例，整體隊型安排像是個倒 V，而在群組做任何動作時，也須維
持這個隊型；這種參考方式對各部機器人來說是獨立的，換句話說，機器人僅須
維持與中心參考點相對的 x 位置、y 位置、以及方位，即可保持隊型，無須考慮所
有的機器人的位置與方位，優點是這對機器人的運算負擔較小，整個路徑的規劃
也僅須考慮中心點即可。 
 
 
圖 2. 1 隊型中心參考 
 
（２）隊長參考（Leader-eferenced） 
隊長參考的方式如圖 2. 2，所有的機器人（除隊長外）須考慮與隊長機器人
的相對位置與方位，並在維持隊型的考量下，調整本身的速度配合隊長；隊長在
  12
 
圖 2. 4 Das 將二部鄰近參考方式推展至三部 
 
次，其餘的僅考慮一次，減低了計算量，也不致造成太大的誤差，此法有點類似
鏈結的方式，所有機器人只要在這個鏈結過程中，有被連結即可。 
 
另外 Das 也將兩兩配對改以三部一組的方式，當二部機器人間的距離須要調
整時，以兩兩配對的方式調整，當三部機器人間的距離需要調整時，以三部一組
的方式做調整，這樣減低了配對時的量，以簡潔的方式完成；當推展至 n 部機器
人時，仍可配合二部一組加三部一組的控制方式來實現。 
 
Lawton[ 1 ]的方法，與 Feddema[ 5 ]的相似，但 Feddema 在參考時，是從第一
部開始安排參考，至最後一部停止(如圖 2. 6 所示)，不管是二部一組或三部一組皆
是，而 Lawton 也是從第一部開始安排參考，但在到達最後一部時，會再回到參考
第一部，全都是以三部一組的方式安排(如圖 2. 5 所示)，Feddema 的好處是，最前
一組及最後一組僅需與最近者有關係即可，可略減低運算量，如再配合「切換」
機制(switching control strategy)將可使運算量更小；Lawton 的方法則較完善，算是
完整的將整個隊型群組起來，當要做細微的控制時，這是較佳的方式。 
 
 
圖 2. 5 Lawton 的參考方式 
 
圖 2. 6 Feddema 的參考方式
  15
方式，但在配合隊長參考時，如隊長位置不在中間，將導致與各個機器人的距離
有較大的誤差，可能讓某些演算法失效，甚至僅能推展至個位數的群組機器人。 
 
縱隊型（Column） 
縱隊型如圖 3. 2 所示，機器人是以縱向排列，排法同橫隊型，由上至下、或
下至上，或不按規則排列，同樣也適用上一章提及的參考方式，且仍有演算法與
機器人數目受限於誤差較大的問題。在通過障礙或狹小空間時，這個很好的解決
方式，也蠻接近人類處理的方式。 
 
鑽石隊型（Diamond） 
鑽石隊型如圖 3. 3 所示，與菱型十分類似，但無菱型邊長須成比例的限制，
排列方式有順時計、逆時針…等，以隊型中心參考來說，這是最好的方式，因為
隊型中心點可與每部機器人的距離等距，此外如應用以鄰近參考的方式，不論是
二部機器人一組，或三部一組皆可，不論是封閉的控制或開放的也可；考慮整個
隊型，因所占的面積大，較不利於通過狹小空間。 
 
1
4 2
3  
圖 3. 3 鑽石隊型 (Diamond) 
 
3 1
4 2  
 
圖 3. 4 楔型隊型 (Wedge) 
 
楔形隊型（Wedge） 
楔形隊型如 
圖 3. 4 所示，此隊型類似一個倒 V 字型，有點接近橫隊型與鑽石隊型，機器
人排列方式可沿著隊型，也可不按規則排，三種參考方式皆可適用，以鄰近參考
來說，各機器人間有較小的誤差，這減少了使用鄰近參考的限制，同時，對隊型
中心參考及隊長參考，也有較平均的誤差值。 
 
Ｖ字型 
Ｖ字型如圖 3. 5，此隊型的源由是來自鳥類在飛翔時的隊型，排列的方式並
無特別限制，唯須考慮以何種方式做為參考，再決定排列方式，此隊型可應用至
  17
另外，表格中有三個欄位，分別是 Path Ratio、Position Error、Time out of 
Formation，Path Ratio（Path length ratio）指四部機器人行走過程中，行走在直線路
徑與非規劃路徑之比，該數值愈低代表群組機器人走的路徑愈直，愈接近所規畫
的，如 Path Ratio 為 1.03 時，意指群組機器人所行走的路徑的平均值應該行走的路
徑多了 2%。Position Error 指在正常的維持隊型的路徑下，所多走的距離，如在轉
彎時，隊型無法維持整齊標準之情況，會略失去原本應維持的隊型。Time out of 
Formation 指的是當發生不穩定的情況，即非維持隊型時，佔總時間的比例。 
 
表 3. 1 Balch 右彎實驗數據 
Path Ratio Position Error Time out of Formation
Formation Type
Unit Leader Unit Leader Unit Leader 
diamond 1.03(0.08) 1.06(0.08) 6.8(0.2) m 11.4(5.9) m 20.80(0.3) % 21.60(10.8) %
wedge 1.04(0.09) 1.06(0.09) 9.4(4.5) m 9.1(6.2) m 25.60(6.0) % 17.30(9.6) % 
column 1.04(0.06) 1.16(0.02) 8.4(5.6) m 21.1(17.3) m 22.40(8.1) % 32.40(22.8) %
line 1.04(0.10) 1.05(0.06) 8.5(5.5) m 8.2(5.1) m 25.70(7.4) % 18.90(10.8) %
 
 
當考慮以 unit-center 的方式做參考時，diamond 隊型的表現相對之下較佳，不
論是 Path Ratio(1.03)、Position Error(6.8 m)及 Time out of Formation(20.8%)的成績皆是
最好的，初步推測應是以 unit-center 方式在轉向時，最外側機器人走的距離比正常
規畫路徑還要遠，該部分的誤差在實際量測後，皆在 50 公尺之內，反觀其他隊型
在轉向時，其誤差與 unit-center 中心距比較，皆大於 75 公尺以上，因此推斷在轉
向時使用 unit-center 方式是較佳的。 
 
至於在 Leader 方面，各隊型的數據差異不大，line 隊型得到最低的 position 
error(8.2m)，wedge 得到最低的 Time out of Formation(17.3%)，line 及 wedge 在轉向時
的表現幾乎相同，Leader 方式則是使隊長外的機器人在轉向時有較敏銳的表現；整
體來說，line 及 wedge 的是表現較佳的二種隊型，原因在於 line 及 wedge 兩種隊型
兩者間機器人數據的誤差，皆在 0 m~50 m 以內，而 diamond 及 column 兩種隊型，
其機器人間數據的誤差是在 100 m~150m 之間，維持愈大的誤差距將使得整體的效
率降低，因此，整個實驗的結果，column 隊型是表現最差的，因其與機器人之間
的距離是最遠的，將近 150 m 左右。 
 
  19
項在有限時間內收斂即可，誤差項的設計是門學問，當然也得參考實際情況設計，
如誤差項設為終點與起點間的距離、終點與起點間的角度差、機器人 1 與機器人 2
間的角度與距離、機器人 1 與機器人 3 的速度差與加速度差……等，皆是過去研
究學者曾提出的方式，以下，將討論這些設計的方式，以及所應用的環境。 
 
機器人的不完整限制（Non-holonomic constraint），來自於二輪的車子，受限
於本身車體的設計，無法像人類或某些動物，可隨心所欲的朝某個方向移動，因 
 
 
圖 3. 9 機器人的不完整運動限制 (non-holonomic constraint) 
 
此，得先透過某些方式，才能夠完成，如圖 3. 9 所示，機器人無法直接由位置 1
移動至位置３，須先將機器人由位置１移動至位置２，再由位置２移至位置３，
才能完成由１移至３的目標。 
 
為達數值化的目的，常用下列方式來描述車子的狀態： 
 
 
圖 3. 10 一般二輪車的運動姿態 
  21
基於以上的狀態方程，可將其拿來描述群組機器人及個別機器人的狀態。 
 
Lawton 的方法中，在狀態方程中額外加入了二項，分別是質量( im )與轉動慣
量( iJ )，這通常是為了更精確計算後的值所加入的，因此，每部機器人的描述更改
為： 
( )
( )
0 0
c o s 0 0
s i n 0 0
1 0
0
10 0
x i i i
y i i i
i
i i
i
ii
i
i
r v
r v
F
mv
J
θ
θ
θ ω τ
ω
⎛ ⎞⎜ ⎟⎛ ⎞⎛ ⎞ ⎜ ⎟⎜ ⎟⎜ ⎟ ⎜ ⎟⎜ ⎟⎜ ⎟ ⎛ ⎞⎜ ⎟⎜ ⎟⎜ ⎟ = + ⎜ ⎟⎜ ⎟⎜ ⎟⎜ ⎟ ⎝ ⎠⎜ ⎟⎜ ⎟⎜ ⎟ ⎜ ⎟⎜ ⎟ ⎜ ⎟⎝ ⎠ ⎜ ⎟⎝ ⎠ ⎜ ⎟⎝ ⎠
&
&
&
&
&
 
(3. 4) 
 
另外，誤差項的設計，包括二部分，一是整體的誤差，一是隊型誤差，前者
描述是機器人目前位置與終點位置間的誤差，後者則為機器人與機器人間的誤
差，如以距離為參考，其單位就是長度，當然，總誤差即為這二項之和，詳細關
係式如下： 
d
i i ih h h= −%  
(3. 5) 
1
N
T
g i i
i
E h h
=
= ⋅∑ % %  
(3. 6) 
( ) ( )1 1Tf i i i iE h h h h+ += − −% % % %  
(3. 7) 
( ) ( ) ( )f gE t E t E t= +  
(3. 8) 
ih  ：第 i 部機器人目前的位置 
d
ih ：為第 i 部機器人目標的位置 
  23
(3. 10)式將(3. 9)式中速度的部分移除，改以一動態狀態控制器給取代，即式中
的 ˆPAx 的部分， A 是個 Hurwitz 項， P 是 Lyapunov equation 中 T TA P PA Q+ = − 的
正定解，其中Q 為正定；這樣的方式解決原本在(3. 9)式中不易取得的速度資料的
缺點，且又能達到原本的要求。 
 
在(3. 11)式中，則是利用了 1tan− 的角度在
4
π− ～
4
π 間時，其值在-１～１之間
變動的特色，如所示，將各機器人所觀察到的位置與相對速度變化量，代入計算，
當這些變化量的值大於某個值以上時，則將以一定值做輸入量，直到修正 
 
 
圖 3. 11 1tan− 圖 
 
值在該值以內時，將慢慢遞減至零，這是個類似順滑模態的控制方式，當然，也
同樣的能達到控制的目的。 
 
 
 
 
 
 
 
 
  25
 
此模擬器的原意，是用來驗証足球機器員在比賽時的戰術，因此，每部機器員皆
具前進、後退、左右旋轉……等基本行為，且機器員發生碰撞時，可展現如推擠、
停止等動作；此外，以二輪車的方式設計機器人，並不具全向性移動的功能，因
此，在給予如原地左右移動的命令時，它須先完成90o (或 90− o )的轉向後，再給二
輪正轉(或反轉)的命令，才能完成動作。 
 
圖 4. 2 顯示資訊對話盒 
 
 
圖 4. 3 秀出 Error 對話盒 
 
  27
群組機器人是由複數個機器人所組成，因此原本用來描述單一機器人狀態的
狀態方程將改以聯立狀態方程型態表示，為這解決這問題，本研究團隊引入四階
Runge-Kutta 方法求解，因該法可在程式上實現，並有效率的解決問題，相較於二
階、三階 Runge-Kutta 方法，四階具較高的準確性，故採用之。 
 
 
4.2  隊型設計 
 
縱隊(line)部分，安排了五部機器人，每部間距 2m，以線型方式排列，橫隊
(column)同樣為五部機器人，呈橫向直線排列，每部間隔距亦為 2m，鑽石隊型
(diamond)基於考慮隊型安排，僅加入四部機器人，以菱型四個頂角來排列，各機
器人之間隔距離相同，各機器人中心在 x 方向及 y 方向的距離皆為 2m；最後一組
是倒 V 隊型；最後一組為倒 V 隊型將機器人以 V 字方式排列，各機器人中心在 x、
y 方向距離也同為 2m，可參考圖 4. 6 縱隊、 
 
圖 4. 7 橫隊、圖 4. 8 鑽石隊型及圖 4. 9 倒 V 字型，另外，各機器人編號，也
一併標註在機器人上。 
 
 
 
圖 4. 6 縱隊設計圖 
 
 
 
 
 
 
 
 
 
圖 4. 7 橫隊設計圖
  
  29
隊找出的直線行為在某距離內是完全穩定的，即可將這最大穩定的距離，應用於
切割所需移動的距離，如此一來，無論多遠的距離，研究人員僅須利用分割、規
劃路徑，便可達到直線移動的目的。 
 
為驗証該直線行為，我們規劃：直線前進、直線後退、直接左轉、直接右轉， 
並配合各演算法與隊型安排，進行測試，此測試過程中，先於起點處安置機器人，
並依所須隊型排列，為初始隊型，機器人須完成移動，維持初始隊型，到達終點，
才算完成。 
 
在基本隊型的設計上，請參考圖 4. 10 的格線圖，在這格線圖上，令中心點相
當於直角座標的原點（0,0），格線圖中心向左右延申為 x 方向，向右為正，向左為
負，格線圖中心上下延申為 y 方向，向上為正，向下為負，各機器人將配合隊型
在起點處做安排，詳細起終點的座標位置，請參考各表：表 4. 1 直線前進、表 4. 
2 直線後退、表 4. 3 直接右轉及表 4. 4 直接左轉。 
 
表 4. 1 各種隊型直線前進初始設定 
基本行為：直線前進  
 起點 終點  起點 終點 
縱隊 1 （0, - 6） （0, 14） 橫隊 1 （ 4 , -12） （ 4 , 12）
2 （0, - 8） （0, 12） 2 （ 2 , -12） （ 2 , 12）
3 （0, - 10） （0, 10） 3 （ 0 , -12） （ 0 , 12）
4 （0, - 12） （0, 8） 4 （-2 , -12） （-2 , 12）
 
5 （0, - 14） （0, 6）
 
5 （-4 , -12） （-4 , 12）
 
 起點 終點  起點 終點 
鑽石 1 （ 0 , -10） （ 0 , 14） 倒 V 1 （ 0 , -8） （ 0 , 12）
2 （ 2 , -12） （ 2 , 12） 2 （ 2 , -10） （ 2 , 10）
3 （-2 , -12） （-2 , 12） 3 （-2 , -10） （-2 , 10）
4 （ 0 , -14） （ 0 , 8） 4 （ 4 , -12） （ 4 , 8） 
 
   
 
5 （-4 , -12） （-4 , 8） 
 
 
  31
表 4. 4 各種隊型直接左轉初始設定 
基本行為：直接左轉  
 起點 終點  起點 終點 
縱隊 1 （14 , 4） （-14 , 4） 橫隊 1 （14 , 0） （ -6 , 0） 
2 （14 , 2） （-14 , 2） 2 （12 , 0） （ -8 , 0） 
3 （14 , 0） （-14 , 0） 3 （10 , 0） （-10 , 0） 
4 （14 , -2） （-14 ,-2） 4 （ 8 , 0） （-12 , 0） 
 
5 （14 , -4） （-14 ,-4） 
 
5 （ 6 , 0） （-14 , 0） 
 
 起點 終點  起點 終點 
鑽石 1 （12 , 2） （-12 , 2） 倒 V 1 （10 , 2） （-10 , 2） 
2 （14 , 0） （-10 , 0） 2 （12 , 0） （ -8 , 0） 
3 （10 , 0） （-14 , 0） 3 （ 8 , 0） （-12 , 0） 
4 （12 , -2） （-12 , -2） 4 （14 , -2） （ -6 , -2） 
 
   
 
5 （ 6 , -2） （-14 , -2） 
 
4.4  控制法則 
 
實驗引用之控制法，部分參考 Lawton 所著內容，每部機器人的狀態方程式為： 
 
( )
0 0
cos 0 0
sin( ) 0 0
1 0
0
10 0
xi i i
yi i i
i
i i
i
ii
i
i
r v
r v
F
mv
J
θ
θ
θ ω τ
ω
⎛ ⎞⎜ ⎟⎛ ⎞⎛ ⎞ ⎜ ⎟⎜ ⎟⎜ ⎟ ⎜ ⎟⎜ ⎟⎜ ⎟ ⎛ ⎞⎜ ⎟⎜ ⎟⎜ ⎟ = + ⎜ ⎟⎜ ⎟⎜ ⎟⎜ ⎟ ⎝ ⎠⎜ ⎟⎜ ⎟⎜ ⎟ ⎜ ⎟⎜ ⎟ ⎜ ⎟⎝ ⎠ ⎜ ⎟⎝ ⎠ ⎜ ⎟⎝ ⎠
&
&
&
&
&
 
(4. 1) 
 
( , )xi yir r ：機器人位置 
  33
表 4. 5 模擬參數設定值 
共同設定值 
im  10.1 kg  
iJ  0.13
2kg m  
iL  0.12 m  
 
 
表 4. 6 (3. 9)、(3. 10)、以及(3. 11)式參數設定值 
(3. 9)式 (3. 10)式 (3. 11)式 
參數 設定值 參數 設定值 參數 設定值 
gK  0.5 I  A  -5 I  gk  3.1 
gD  I  Q  I  gd  5 
fK  5 I  gK  5 I  fk  1.5 
fD  I  gD  5 I  k  0.25 
  fK  2 I  
  
 
 
 
 
 
 
 
 
 
  35
2
2
6
4
6
2
2
1
3 2
45
1
3 2
45
1
3 2
45
1
3 2
45
4
 
圖 5. 1 過門實驗設計圖 
 
 
在通過門口時，我們安排兩兩並排的方式前進，請參考圖 5. 2，這樣整個群
組在門口處停留的時間較短，效率較高，這樣的方式導致門口處所剩空間不大，
群組通過時可能發生的振盪或偏擺必須控制在某個範圍以下，否則即會產生碰
撞，適當的隊型及設定良好參數，可有效發揮控制法的優點，並順利完成過門行
為。 
 
實驗結果請參閱第六章，6.2.1 節，特別是控制法的差異以及行走的軌跡，將
有詳細的圖解說明。 
 
  37
5.2  避障行為 
 
在 RobotCup 比賽中，進球得分是贏得比賽勝利的原因，然而，球員須運用成
熟的技巧及團隊的合作，避開防守球員的截擊，才能順利將球送至球門前，也才
有射門的機會，過程中避開防守球員的動作，可想成是種避開障礙物的行為，當
然，球場上的防守球員是會移動的，當障礙物會移動而又要避開它，這時得先預
測障礙物的下個動作，基於此動作下，決定自身應該如何閃避；應用在群組機器
人時，由於須維持隊型，因此移動時須考慮隊型的面積，當遭遇障礙時，可在保
持隊型下，繞道而行，但這麼做似乎有些不合理，且在保持隊型下繞道，整個移
動面積變的相當大，不見得各種場合都有這麼好的條件，因此，得考慮是否在障
礙物前調整隊型，待通過後，再將隊型複原。 
 
如障礙物位置不固定時，得額外加入預測動作的方法，這模糊了原本驗証的
主題，因此，在本研究中僅考慮固定的障礙物，單純觀察控制法的差異性，此外
同樣採用倒 V 字型當做參考隊型，並將驗証方法，設計如下圖所示： 
 
在圖 5. 4 中，中心點正方型方塊為8 8m m× 的障礙物，起點處機器人安排成倒
V 字隊型，終點處同樣亦是倒 V 字隊型，各部間在垂直方向及水平方向距離皆為
2m ，起點處編號 1 機器人與障礙物距離為 6 2m ，終點處編號 5 機器人與障礙物
在水平方向的距離為 4m ；測試流程為群組機器人由左下角出發，當遭遇障礙時，
得以調整隊型並避開障礙，當避開障礙物，朝終點前進的過程中，得恢復成原本
應保持的隊型，並朝終點處前進。 
 
因模擬器所展示的畫面，是以格線圖為底圖，為了方便，本研究沿障礙物對
角線的延長線，規劃群組機器人的移動方向，如此在格線圖上可方便的看出隊型
誤差，省去須計算距離的麻煩；另外，由於避障行為較直線行為複雜許多，因此
在路徑的選用上，以實際可能實現、擬人思考以及最短路徑設計，實際可能實現
是指須符合二輪機器人機械構造的限制，擬人思考指當人類在遭遇同樣情況下，
會做何種處理，最短路徑則配合擬人思考，安排讓移動過程較為平順且符合常理 
  39
void SetToget()
{
switch(TogetChange){
case 0:
h1_d_x = -8;h2_d_x = -8;h3_d_x = -10;h4_d_x = -8;h5_d_x = -12;
h1_d_y = -8;h2_d_y = -10;h3_d_y = -8;h4_d_y = -12;h5_d_y = -8;break;
case 1:
h1_d_x = -7;h2_d_x = -7;h3_d_x = -9;h4_d_x = -8;h5_d_x = -10;
h1_d_y = -5;h2_d_y = -8;h3_d_y = -6;h4_d_y = -10;h5_d_y = -8;break;
case 2:
h1_d_x = -6;h2_d_x = -2;h3_d_x = -7;h4_d_x = -4;h5_d_x = -8;
h1_d_y = 0;h2_d_y = -7;h3_d_y = -2;h4_d_y = -8;h5_d_y = -4;break;
case 3:
h1_d_x = -5;h2_d_x = 6;h3_d_x = -6;h4_d_x = 5;h5_d_x = -7;
h1_d_y = 7;h2_d_y = -5;h3_d_y = 5;h4_d_y = -7;h5_d_y = 3;break;
case 4:
h1_d_x = 0;h2_d_x =  8;h3_d_x =-2;h4_d_x =  7;h5_d_x = -5;
h1_d_y = 6;h2_d_y = -2;h3_d_y = 7;h4_d_y = -5;h5_d_y = 5;break;
case 5:
h1_d_x = 4;h2_d_x = 9;h3_d_x = 2;h4_d_x =  8;h5_d_x = 0;
h1_d_y = 7;h2_d_y = 1;h3_d_y = 7;h4_d_y = -2;h5_d_y = 8;break;
case 6:
h1_d_x = 10;h2_d_x =10;h3_d_x =  7;h4_d_x =10;h5_d_x =  4;
h1_d_y = 10;h2_d_y = 8;h3_d_y = 10;h4_d_y = 6;h5_d_y = 10;break;
default:
h1_d_x = 12;h2_d_x = 12;h3_d_x = 10;h4_d_x = 12;h5_d_x = 8;
h1_d_y = 12;h2_d_y = 10;h3_d_y = 12;h4_d_y = 8;h5_d_y = 12;      }
}
 
圖 5. 5 避障行為所規劃之路徑點 
 
 
完整實驗結果，請參考第六章，6.2.2 節避障行為。 
 
 
 
 
 
 
 
  41
 
圖 6. 1 參照(3. 9)式，縱隊隊型，直線前進實驗結果 
 
圖 6. 2 參照(3. 9)式，橫隊隊型，直線前進實驗結果 
 
圖 6. 3 參照(3. 9)式，鑽石隊型，直線前進實驗結果 
 
圖 6. 4 參照(3. 9)式，倒 V 字型，直線前進實驗結果 
 
 
  43
 
圖 6. 9 參考(3. 9)式，縱隊隊型，直接左轉實驗結果 
 
圖 6. 10 參考(3. 9)式，橫隊隊型，直接左轉實驗結果 
 
圖 6. 11 參考(3. 9)式，鑽石隊型，直接左轉實驗結果 
 
圖 6. 12 參考(3. 9)式，倒 V 字型，直接左轉實驗結果 
 
 
  45
(3. 10)式的法則收斂速度是相當快的，但能實現的距離卻十分有限，且在計算過程
中，因程式計算先後差異，將導致最後一部機器人在實現時產生不穩定的現象，
該現象可比較四部與五部群組機器人實驗結果即可看出，在四部群組中，編號 4
的機器人明顯有個振盪現象產生，且在四種行為中皆是，但編號 1 至編號 3 的機
器人路徑卻正常得多；而五部機器人時，編號 5 的行走路徑更為不穩定，甚至是
實際現象中無法接受的，且編號 4 機器人在某些狀況下也有些許不穩定的現象，
直至目前，我們僅能縮短規劃距離來達到控制的要求，也就是說，如規劃的起終
點距離愈長，將導致計算時振盪愈大，且收斂時間愈長，甚至導致發散現象。 
 
經實驗後發現，這種偏擺的現象是因維持隊型所產生，即 fK 項，由於 fK 決
定了在維持隊型上的增益（gain），增加該項可加速維持隊型，反之亦然，故在調
整後發現，整體移動過程較為平順，且能滿足的部分的情況，當然，這也犧牲了
某程度的速度。此外， ˆiPAx 是取代(3. 9)式有關其他車子相對速度部分，由於實際
取得相對速度有困難，我們以一狀態控制器來取代，但該項在 Lawton 文中所設定
的值，無法符合實際須要，因此亦做了修正，基於表 4. 6 設定值，其模擬結果如
圖 6. 19~圖 6. 34，對修正參數後差異較大部分，列於圖 6. 35~圖 6. 40。 
 
 
圖 6. 17 修正圖 6. 14 參數後實驗結果 
 
圖 6. 18 修正圖 6. 16 參數後實驗結果 
  47
 
圖 6. 23 參考(3. 10)式，縱隊隊型，直線後退實驗結果 
 
圖 6. 24 參考(3. 10)式，橫隊隊型，直線後退實驗結果 
 
圖 6. 25 參考(3. 10)式，鑽石隊型，直線後退實驗結果 
 
圖 6. 26 參考(3. 10)式，倒 V 隊型，直線後退實驗結果 
 
 
  49
 
圖 6. 31 參考(3. 10)式，縱隊隊型，直接右轉實驗結果 
 
圖 6. 32 參考(3. 10)式，橫隊隊型，直接右轉實驗結果 
 
圖 6. 33 參考(3. 10)式，鑽石隊型，直接右轉實驗結果 
 
圖 6. 34 參考(3. 10)式，倒 V 隊型，直接右轉實驗結果 
  51
 
圖 6. 39 修正圖 6. 32 參數後實驗結果 
 
 
圖 6. 40 修正圖 6. 34 參數後實驗結果 
 
 
整體來說，(3. 11)式的方式能完成所有所的規劃路徑，不僅沒有過大的偏擺，
整個模擬視窗上的任何規劃幾乎都能完成，參考圖 6. 45~圖 6. 48 可看出，只有在
直線後退的行為中，由於須修正的角度較大，有些許的平移之外，其他的移動皆
很平順，因此，如欲將該法用至實際二輪機器人，是可實現的；另外，在原文獻
中設定值中，， fK 的值過大，造成移動中調整目標隊型的速度過高，在實際測試
後發現，如以完成整個過程的時間為 100％，調整隊型在前 30％的時間內就完成
了，雖同樣能完成任務，但初期移動的方式卻顯得生硬許多，行走距離也非最短；
再者， k 項決定 1tan− 斜率的大小，實際決定了開始加、減速的時機，且原文中並
非每項都給予這樣一個調整值，考慮整體及可變調整的因素下，我們在(3. 11)式中
的第四項加入 k 來使整體 1tan− 的斜率一致。綜合以上所述，在調整參數後，仍能
完成所有直線任務，且提升了效率。 
 
 
 
  53
 
圖 6. 45 參考(3. 11)式，縱隊隊型，直接後退實驗結果 
 
圖 6. 46 參考(3. 11)式，橫隊隊型，直接後退實驗結果 
 
圖 6. 47 參考(3. 11)式，鑽石隊型，直接後退實驗結果 
 
圖 6. 48 參考(3. 11)式，倒 V 隊型，直接後退實驗結果 
 
 
  55
 
圖 6. 53 參考(3. 11)式，縱隊隊型，直接右轉實驗結果 
 
圖 6. 54 參考(3. 11)式，橫隊隊型，直接右轉實驗結果 
 
圖 6. 55 參考(3. 11) 式，鑽石隊型，直接右轉實驗結果 
 
圖 6. 56 參考(3. 11) 式，倒 V 隊型，直接右轉實驗結果 
 
 
  57
出，整體誤差的收斂速度加快了許多，這讓群組可更快速的到達目標，另外，編
號 4 的機器人在也減缓了進入門前的偏擺，，編號 5 機器人在出門口時的偏擺量 
 
 
圖 6. 57 基於(3. 9)式之過門行為實驗結果 
 
圖 6. 58 基於(3. 10)式過門行為實驗結果 
 
圖 6. 59 基於(3. 11)式過門行為實驗結果 
 
  59
走路線的準確性、誤差量、以及出門口時的偏擺，表現均是最佳者，特別是收斂
的速度，(3. 11)式控制法遠比(3. 9)式控制法要快上許多，有將近一倍之普，當然，
我們仍可調整參數值來得到最佳化的結果。 
 
綜合諸多缺點，本研究規納各測試結果，配合調整參數設定，將結果列於圖 6. 
60~圖 6. 62。 
 
 
6.2.2  避障行為 
 
圖 6. 63~圖 6. 65 為針對 5.2 節設計的實驗結果，比較三圖可看出，以(3. 11)
式控制法完成任務的速度相當快，在極短的時間內即將誤差收斂至零，速度次之
的是(3. 10)式的控制法，時間大約是(3. 11)式的二倍左右，最慢完成任務的是(3. 9
式的控制法。 
 
在移動的路徑上，圖 6. 64 由於採圓弧方式移動，表現最為平順，但就效率觀
點卻是最低的，原因在於偏擺導致行走間移動了過多路程，觀察(3. 10)式發現， gK
決定起終點間誤差的增益， gD 決定了速度增益， fK 決定了起終點隊型誤差的增
益，本研究針對這三個參數做了最佳的調整，改善了各規劃點間移動時的偏擺，
同時也避免編號 1 與編號 2 在接近終點處前的碰撞，速度則與未修正前接近；修
正後結果，請參照圖 6. 67。 
 
(3. 9)式的完成任務的速度是三者中最慢的，且整體移動的路徑也並不理想，
因為其仍有過多偏擺，造成路徑上的浪費，因此須改善的地方在增加收斂的速度、
減低群組機器人的偏擺，故調整 gK 、 gD 及 fK 後，將改良後的結果，列於圖 6. 66。 
 
(3. 11)式的運算法，在避障行為中仍是較佳的，偏擺量在可接受的範圍內，收
斂速度也甚快，唯一值得挑惕應是編號 1 機器人在障礙物左上處，有個大幅度偏
擺，其實，會有這樣的情況，是統一規劃點所致；由於(3. 9)、(3. 10)二式在移動過
程中，因修正隊型會發生些微的偏擺，這也是造成非直線行走的原因，因此在規
劃路徑時，為預防機器人與障礙物碰撞，本研究多留了空間允許些微偏擺所致；
  61
能有更精確的移動，若將規畫點特別設計，應可得到更滿意的結果。 
 
 
圖 6. 66 修正圖 6. 63 參數值後實驗結果 
 
 
圖 6. 67 修正圖 6. 64 參數值後實驗結果 
 
 
 
 
 
 
 
 
 
 
  63
 
圖 6. 68 基於(3. 9)式控制法，並將參數修正後，與實際規劃路徑比較圖(過門) 
 
圖 6. 69 基於(3. 10) 式控制法，並將參數修正後，與實際規劃路徑比較圖(過門) 
  65
 
圖 6. 72 基於(3. 10) 式控制法，並將參數修正後，與實際規劃路徑比較圖(避障) 
 
圖 6. 73 基於(3. 11)式控制法，並將參數修正後，與實際規劃路徑比較圖(避障) 
  67
制，成功將隊型控制運用至現實生活，將是下一個值得努力的目標。 
 
為了集中測試的焦點，模擬器在設計時，僅考慮部份碰撞情況，也就是說，
這樣的結果仍有些變因存在，未來若要更進一步發展，可完整的將車子的物理現
象加入，如機器人與地面的磨擦力、機器人移動的慣性、以及碰撞對機器人間更
細微的現象…等，這除了讓整個模擬系統在實驗上更完整外，也減低了移植至實
體機器人上須解決細部問題的麻煩。 
 
觀察本研究的控制法，不外乎須要二項資訊，一是機器人間的距離，一是各
機器人的速度，特別是第一項資料若無法得到，這樣的控制法便無法實現，然而，
若將群組機器人的數量提升，或者將隊型的面積擴大，收集資料的勢必將受到限
制，如在戶外運用，可結合 GPS 系統來取得各機器人間的距離、或輔以計算得到
速度，若是在室內使用時，便考驗了影像的能力，若影像能截取的距離有限，或
者精確度過低，將會讓碰撞的機會提高，及減低隊型控制的成功率，因此，未來
除了精進控制法及程式外，突破影像上的限制，是急待努力的目標。 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
  69
 
[5] Kuo-Yang Tu, Chung-Ching Lin and Min-Tzung Chang Chien, “Design and 
implementation of a decision tree for pass-ball evaluation in robotics soccer,” 
13th National Conference on Fuzzy Theory and Its Applications, Sep. 30 – Oct. 1, 
2005. 
[6] Kuo-Yang Tu, “Design and Implementation of a Cheap Middle Size Soccer 
Robot with Wide Vision Scope for RoboCup,” International Conference on 
Hands-on Intelligent Mechatronics and Automation, The Grand Hotel, Taipei, 
Taiwan, July 10-12, 2005. 
[7] Kuo-Yang Tu and Shi-Chao Luo, “Design and Implementation of 
Omni-Directional Soccer Robots for RoboCup,” The Eighth International 
Conference on Automation Technology Conference, Taichung, Taiwan, May 5-6, 
2005. 
[8] Kuo-Yang Tu, Tung-Chung Wu, and Tsu-Tian Lee, “A Study of Stewart Platform 
Specifications for Motion Cueing Systems,” IEEE International Conference On 
Systems, Man and Cybernetics, October 11-14, 2004. 
[9] Kuo-Yang Tu, “Design of Fuzzy Potential Energy (FPE) for Control of a Soccer 
Robot,” 2004 International Conferece On Networking, Sensing and Control, 
March 21-23, 2004. 
 
Other Research: 
Our Middle-size soccer robot team won the second place of TaiwanRoboCup 2006. 
 
 
 
 
 
 
 
 
 
 
 
 
