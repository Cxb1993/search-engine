減低訊息的更新數目，若網路的建置偏向
主從式的傳輸架構，當使用者一增加，則
伺服器的計算負荷將是非常大的考驗，虛
擬實境的場景不應該受此限制。 
 
本論文主要是依據空間分割與興趣區域
劃分的概念，希望可以發展一個適應性強大又
有效率的系統，它除了可以有效地降低訊息更
新量外，更可以適應各種虛擬實境的場景，並
且有很高的執行效率。 
 
2. 系統架構 
 
一般現行建置虛擬實境環境的電腦網
路，有些使用點對點的分散式傳輸架構，例如
DIVE [9]與 NPSNET [10,11]，而一個用在軍事
上模擬的分散式網路虛擬環境，是第一個使用
多址傳送服務(multicast)技術所建構的多使用
者的虛擬實境系統[12]；亦有採用主從式傳輸
架構，例如 Virtual Society [13]。這兩種傳輸架
構各有優缺點，而本論文則是取兩者之優點並
除去其缺點，建構出以 Server-Group-Client 網
路所組成的金字塔型傳輸架構來作為我們網
路多人虛擬實境系統的聯通方式，且封包傳輸
量也隨之縮小。 
 
欲使金字塔型傳輸架構一樣保有伺服器
的角色，且客戶端的部分，彼此之間可以互相
接收到對方所送出的訊息，而仍具有點對點傳
輸架構的特色，其中一個重要的技術就是使用
分散式的多址傳送服務，它可以讓訊息封包傳
送的方式由硬體來負責，而非傳統的方式由伺
服器來一個一個傳送，即將封包的傳送工作交
給網路上的路由器(router)與交換器(switch)來
執行，這個對於虛擬實境技術非常重要，目前
已經被廣泛應用的即時影音傳輸，就是利用這
樣的方式傳送封包，依此，不管是在伺服器或
是客戶端的電腦負荷都會大大地降低，讓每一
台電腦都可以節省許多資源，而能專注在場景
的維護與演算法的計算，使其致力於減低封包
數量的工作上，而將封包傳送的工作交給多址
傳送服務去做。 
Computer Computer
Multicast groupMulticast groupMulticast group
Client Client Client Client Client
 Server
......
......
ClientClientClient
 
 
 
圖 1 說明了我們系統的傳輸架構，其中一
台伺服器當做管理者，它可與每個客戶端連線
作溝通，且交換訊息、取得服務、程式場景檔
案的下載等各項功能，至於客戶端之間，是藉
由加入一個群組位址，成為該群組的成員；在
取得群組別後，便有權利享有接收群組所有的
訊息，且自己也可以對群組內所有的使用者傳
送訊息，即是將訊息傳送到群組位址，使硬體
上的多址傳送服務功能啟動，查詢所屬群組
表，找到應該要收到訊息的成員，再透過封包
複製的方式，將一個封包訊息同時傳給多台電
腦，當中我們使用 UDP/IP 封包，因為這種封
包較簡短，又是非連接導向的協定，以這樣的
方式最適合傳送場景中的物件，尤其是大量而
且具有重複性質更新的訊息，它比起傳統的主
從式傳輸架構，節省了不少伺服器因傳送大量 
 圖 1 金字塔型傳輸架構：Server-Group-Client 網路。 
 
重複訊息所造成的負荷。 
 
另外，我們的傳輸架構還有一個特點，就
是並非所有客戶端都屬於同一個群組，利用這
樣的方式，可以有效地降低訊息更新量，它可
動態地分配各個客戶端的群組別，隨著使用者
分群後，訊息也跟著作分群，使其它使用者不
會接收到不相關的訊息；相反地，自己送出的
訊息也不需要傳到不相關的電腦，就可以有效
率地將訊息作分流過濾，大大減低了封包複製
的數量，不僅可降低伺服器與客戶端電腦的計
算量以及傳送訊息的工作量，又可以有效地降
低網路傳輸訊息封包的數量，比起點對點傳輸
架構以及主從式傳輸架構來說，正是集合了兩
者的優點，除去了兩者的缺點，而達到相輔相
成，相得益彰的功效。 
符合此規則的數列 iX 與數列 即擁有第
二級灰關聯度。在判定數列是否具有第二級灰
關聯度時，必須把閥值設定得很恰好，才不會
造成後續群組間多餘的訊息更新量，boundT
參數可以用來定義第二級關聯度的範圍。圖 3
即是依第一級灰關聯度與第二級灰關聯度的
條件下所獲得的分群結果。 
jX
 
 
 
 
 
 
 
 
 
 
 
 
 
圖 3 包括邊緣灰關係點的動態分群結果。 
 
4. 實驗結果 
 
本實驗共分成動態分群演算法所需參數
的最佳設定、各傳輸架構伺服器⁄客戶端傳送接
受訊息封包數量的評比，以及繪製場景所得畫
面更新率的估算三部份，全部實驗皆使用一部
個人電腦配備 AMD Athlon 1.0 GHz 中央運算
處理器，在微軟 Windows 2000 作業系統下執
行完成，其中所撰寫的模擬程式係採用 J2SE 
1.4.2 電腦語言。 
 
4.1 動態分群演算法的參數設定 
 
在我們的動態分群演算法中，曾經提到計
算灰關聯係數所用的分辨係數 ρ，另外，我們
定義的兩級灰關聯度裡也有一個閥值λ，為了
適應各種情況，我們必須調整閥值λ與 ρ 值，
因為它們會影響最後灰關聯分析的結果。 
 
人數的多寡，對於分群後的群組數有很大
的影響，基本上在大場景裡人數多與少都可以
應付得很好，這是受到灰關聯聚類法的特性影
響，但是當小場景的時候，擁擠度增加，使得
平均灰關聯度提昇不少，如果我們還是使用相
同的閥值λ，將無法獲得預期的分群結果，因
此我們必須特別關切於閥值λ的設定，它必須
隨著人數的增加而提高數值；反之，因為擁擠
度的增加，而必須縮小分辨係數 ρ，表 1 與表
2 為我們對於不同大小場景做出的實驗結果。 
 
表 1  600 平方單位長度的場景最佳參數設定 
使用人數 擁擠度 閥值 分辨係數
90 人以上(含) d>0.025% λ=0.87 ρ =0.5
70 人以上(含)
至 90 人以下 0.019%<d ≤ 0.025% λ=0.86 ρ =0.5
50 人以上(含)
至 70 人以下 0.013%<d ≤ 0.019% λ =0.85 ρ =0.5
30 人以上(含)
至 50 人以下 0.008%<d ≤ 0.13% λ =0.84 ρ =0.5
30 人以下 d ≤ 0.008% 
 λ =0.83 ρ =0.5
 
表 2  300 平方單位長度的場景最佳參數設定 
使用人數 擁擠度 閥值 分辨係數
90 人以上(含) d>0.1 % λ=0.83 ρ =0.35
70 人以上(含)
至 90 人以下 0.07%<d ≤ 0.1% λ=0.82 ρ =0.35
50 人以上(含)
至 70 人以下 0.05%<d ≤ 0.07% λ =0.80 ρ =0.35
30 人以上(含)
至 50 人以下 0.03%<d ≤ 0.05% λ =0.80 ρ =0.35
30 人以下 d ≤ 0.03% ρ =0.35λ =0.78 
 
由表 1 與表 2 可以發現：不管人數是多少
或場景的大小皆與分辨係數有密切的關係。而
閥值的訂定與人數有很直接的關係，我們特別
利用擁擠度來觀察人數的變化與閥值的關
係，當人數增加時，擁擠度或稱密度會增加，
此時我們必須提高閥值的門檻，相對地我們所
算出來的灰關聯度平均值也會提高，這時候我
們必須將閥值提高以求得更精準的分群。圖 4
說明了我們有否調整參數對於分群結果的影
響。 
 
 
 
 
 
 
 
 
 
 
 
0
2
4
6
8
10
12
14
5 15 25 35 45 55 65 75 85 95
使 用 人 數
群
組
數
群 組 數 (未 調 參 數 ) 群 組 數 (有 調 參 數 )
圖 4 使用人數與群組數的關係。 
 
4.2 傳輸訊息的封包數量   
 
    在取得最佳的參數設定值後，即可進行網
路傳輸封包的實驗，其中我們將兩種傳統的網
路傳輸架構與金字塔型傳輸架構作比較，以便
看出我們的 Server-Group-Client 網路以及動態
分群演算法的優勢所在。以下對本實驗的環境
作了一些條件設定： 
 
