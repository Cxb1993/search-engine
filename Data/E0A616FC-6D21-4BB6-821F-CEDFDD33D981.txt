2磨床；其中專注於铣刀類研磨的廠家，以
德國 Walter 及澳洲 ANCA 市場佔有率最
高，產品線從小型「再研磨」工具磨床到
大型「量產式」工具磨床。瑞士 Rollomatic
及 Schneeberger 之產品則以研磨精密小型
刀具著稱。其他較有名的大廠有瑞士
Studer 及美國 Unison，其產品線則跨足圓
筒磨床市場。綜觀各大廠的研發方向，我
們發現不外乎智慧型、高精度及高產能三
大方向，而這三大方向都與機床控制系統
息息相關。
本計畫中架構的五軸控制系統，必須兼顧
性能與彈性的要求。另外，必須能夠輕易
地在此控制器上撰寫精緻化、對話式的使
用介面。綜觀國內外，高價位的工具機都
已經高度專用化，使用者不需學習 NC 程
式即可上手操作機台。在歐美工具機市場
走向「易學易用」與「精緻化」的趨勢下，
許多國內的工具機廠商急需技術升級，但
是目前國內 PC-Based 控制器廠主攻低
價位、泛用型工具機市場，產品模仿日系
控制器之基本功能，因此，其使用者介面
精緻度、客製化彈性，及性能仍然不足。
本研究第一個目的，是以國產 IPC、LCD，
以及觸控面板硬體為平台，整合實作一套
符合高精度智慧型工具磨床規格的 CNC
五軸控制系統。我們自行研發以 FPGA 為
核心的軸控卡及其 Windows XP 驅動程
式，以低廉的成本，達到極高的開放性架
構。就筆者所知，這在國內是一個全新的
嘗試；目前國內自產工具磨床皆使用日系
(非 PC-Based)控制器，而國產 PC-Based
控制器則從未應用於工具磨床。
本研究第二個目的，是深入探討工具磨床
之運動學分析，也就是各軸之運動軌跡與
磨刀之程序。工具磨床軟體也是國內工具
磨床產業所缺少的技術，我們希望藉由學
界的投入，打下這個領域的軟體設計技術
根基，往後再透過技術轉移，協助國內廠
商達成控制系統完全自製化的目標，以完
全掌控成本與技術，有能力生產深入客製
化、精緻化的高價工具機。
三、研究方法
依據本計畫之兩個主要目的，其研究方法
可分為以下方向討論：
五軸數控電腦軟體
隨著個人電腦的快速發展，PC-Based 控制
器亦廣泛地為工業界所接受。現今量產的
PC 硬體廉價、穩定、可輕易建立網路連
線，且計算速度遠超過大部分多軸數控工
具機所需。最重要的是其擴充性與彈性；
PC 可執行整合多樣的應用軟體，這在智
慧型工具磨床特別重要，也因此，有別於
CNC 車铣加工中心，現今世界上大多數
工具磨床廠都已採用 PC-Based 架構。
在數控電腦上，即時作業系統是絕對必要
的。許多公司為 Windows 開發即時核心
(Kernel)，並提供完整的即時系統開發環
境，由於 Windows 是目前最被廣泛使用
的 PC 作業系統，擁有龐大數量的應用軟
體支援，這種組合明顯佔優勢。除了即時
核心以外，數控電腦的關鍵性技術在於其
控制軟體。所有的控制軟體可在同一顆
CPU 上執行。其概略架構如圖一所示。
圖一 數控電腦軟體架構
4工具磨床運動學分析
由於工具磨床的運動複雜，正確地選用座
標系統極為重要。設計磨削程序時可選用
合適的座標系統以簡化程式，並減少編程
時發生錯誤的機會。這個編程用的特殊座
標系統(Programming Coordinate)可以比一
般熟知的座標系統多出幾個自由度，並經
由這些自由度直接描述刀具的重要的特
徵。舉例而言，刀具通常為棒材，我們可
以 選 用 圓 柱 座 標 系 統 (Cylindrical
Coordinate)，再加上錐度角(Taper)與螺旋角
(Helix)，型成所謂的刀具座標系統(Tool
Coordinate)，如圖三所示。
圖三 刀具座標系統
另外，為了編寫程序，我們也必須定義磨
削點(Grinding Point)，注意此為理論上砂輪
與刀具之接觸點，並不一定是真正的接觸
點；真正的接觸點(通常是面)最終決定於研
磨順序與砂輪外型。磨削點之示意如圖四。
圖四 磨削點示意圖
工具磨床的控制系統，必須有即時運算的
能力，將編程者(或 CAD/CAM)所提供定義
在刀具座標系統上的數據(r,l, r, h , t)，轉
換成關節座標系統(Joint Coordinate)，意即
各軸之絕對位置(X,Y,Z,A,C)。此過程根據
不同的研磨標的外型，必須經過多次的座
標轉換。以下舉一簡單的開槽動作為例，
砂輪的原始位置假定如圖五：
圖五 砂輪的原始位置
經過四次座標轉換：
1. )0,0,(lT 沿 X 軸平移 l
2. )( rxR  繞 X 軸旋轉 r
3. )0,,0( rT 沿 Y 軸平移 r
4. )( tzR  繞 Z 軸旋轉 t
之後砂輪的定位如圖六所示。
圖六 四次座標轉換後砂輪位置
6圖九 FPGA 軸控介面核心晶片
運動控制講求平順度，為達到此要求，我
們利用特殊的 FPGA 邏輯將輸出的命令脈
衝平均分配於時間軸上，並為了避免雜訊
的影響，我們外接 Line-Driver IC 將信號轉
換成 RS422 差動格式，我們實際量測的信
號如圖十所示。命令脈衝的格式不只一
種，為求本控制器適用於大部分的工業用
驅動器，我們也開發了六種信號格式，含
蓋所有可能的狀況[4]。
圖十 RS422 位置命令脈衝輸出
控制器原型機的實體照片如圖十一所示。
圖中可清楚見到半板型的 IPC，PC104 軸
卡，LCD 背光模組的驅動變頻器電路板。
另外，從側視圖中我們可以發現，控制器
非常薄，這要歸功於 PC104 規格、觸控面
板，以及半板型 IPC 的選用。
圖十一 原型機的背面(左)與側面(右)
關於使用者介面，除了硬體介面以外，我
們也使用 VB 撰寫了精緻化的軟體觸控式
使用者界面，如圖十二所示。
圖十二 觸控式使用者界面
我們成功地使用新控制器進行多軸同動伺
服馬達控制，並獲得令人滿意的結果。有
了上述的硬體，工具磨床應用軟體還必須
建立各式刀具的數學幾何模型，並計算研
磨曲線的連結點(Spline Points)。再由砂輪
外型資料(Profile Data)，推算各軸在空間中
的靜態移動路徑。由於刀具形狀經常十分
複雜，數控工具磨床較常使用曲線連結
點，而較少依賴傳統線型及圓弧運動。這
部分仍有許多待研究的課題，也將是我們
未來的工作重點。
Encoder
Pulse CMD
High Speed I/O
Opto-isolated
General Purpose I/O
PC104 Interface ADC/DAC Data R/W
TTL
