plan a 3-year project. In the first year, we focus on 
the Femtocell technology. Because the Femtocell is 
setup by users in their home or office, it is hard 
for service provider to manage them. We will propose 
some methods to achieve time synchronization between 
base station and Femtocell and adjust the wireless 
bandwidth via backhaul network bandwidth. Then, our 
research will focus on the other indoor technology, 
Relay. Because the 3GPP just starts discussing the 
design principle of Relay, we will discuss the impact 
of the LTE/LTE-A network with Relays. Meanwhile, we 
will design methods to alleviate the affection of 
interference caused by Femtocell and Relay to improve 
the system throughput. In the third year, we will 
design the QoS and flow control mechanism. To adopt 
the existing architecture, the new QoS mapping is 
needed for Relay to guarantee the QoS requirement. 
And the flow control mechanism is to improve the 
reliability. In this project, we will use the OPNET 
network simulator and mathematical analysis to verify 
our algorithm. Finally, we hope to design suitable 
protocol to solve the problem of indoor deployment 
and utilize the system efficiency. 
英文關鍵詞： Femtocell、LTE、LTE-A、OPNET 
 
 2 
一、前言 
隨著網路的快速發展，各種寬頻資料服務已成為日趨重要的服務元素，網路頻寬的需求也日
趨增加。由於生活型態的改變，大多數人日漸習慣無所不在的寬頻存取，而且不只限於家中或辦
公室使用。為了能快速發展行動寬頻技術，第三代合作夥伴計劃（3rd Generation Partnership Project, 
3GPP）聯盟制定了長期演進（Long Term Evolution, LTE）技術以提升網路服務所需的頻寬。與 IEEE 
所提倡的全球互通微波存取（Worldwide Interoperability for Microwave Access, WiMAX）技術相比，
LTE 是一種具競爭力之無線通訊技術，以傳輸速率來為例， LTE 可以達到 375Mbps（上行最高
75Mbps，下行最高 300Mbps）的傳輸速率，相較於 IEEE 802.16e 或 802.16a 的 30Mbps 與 75Mbps 
高出非常多。使用者可以利用 LTE 數據機或 USB 收發器來取代原本固接的 DSL 與光纖數據機，
並可利用 LTE 手機來收發影片或音樂，如互動電視、行動影音部落格、高階電玩遊戲等專業服務。 
雖然頻寬不斷的提高，然而事實上在無線電鏈路(Radio link)上已經達到了極限。如圖1-1所示，
我們可以發現以 UMTS 的系統為例，每一代新技術提高的頻寬比例逐漸變低，由 GSM2 的八倍
到 HSPA 可能只剩下兩倍的提升。Qualcomm 的 CEO Paul E Jacobs 也說：「The improvement of 
wireless links that enhancing user throughput is reaching its limit …」。如果要提供更高的頻寬的話，
就必須更密集的佈建基地台，而 Femtocell 就是其中一個選擇。根據[2]研究的結果，對每個人來
說這樣的方式可以得到八倍的系統效能，然而這樣的改進等於手機從類比進入數位，是一種跨世
代的改善。 
 
圖 1-1、頻寬使用率示意圖[1] 
 4 
目前佈建 Femtocell 與 Relay 主要會遇到的幾個問題，分別為 
 時間同步(Time synchronization) 
 頻譜規畫(RF planning ) 
 干擾管理(Interference Management) 
 服務品質支援(QoS support and inter-operability) 
 流量控制(Flow control) 
 
我們首先遇到的是時間同步的問題，由於 HeNB 一般都被設置於室內，所以在第一年的研究
就 是如何做到與 DeNB 同步。而我們參考了在 IEEE 802.16 所提出時間同步的方法，並且將其修
改以符合 LTE-A 的規格。第二個問題則是頻譜規畫問題，由於 HeNB 被使用者買回家設定以後，
主要是藉 由家中有線寬頻網路連接至核心網路，然而每個 HeNB 所連接的有線網路上下行頻寬
不一，所以可 以根據後端網路的頻寬來調整 HeNB 的無線通道頻寬，經由配置互斥的頻段可以初
步減低相鄰 HeNB 之間的同頻 (co-channel) 干擾問題。由於有限的無線通道頻寬，所以無法完
全避開同頻干擾問題， 因此我們在第二年的計畫中將會研究如何考量網路拓墣而達成改善同頻
干擾缺點。除此之外，由於 Relay 也將是很重要的室內訊號延伸技術之一，在同時具有 Relay 與 
HeNB 的室內環境中，干擾的問 題將會更加嚴重，所以在我們將會利用傳送功率控制的方法來
改善干擾問題。第三年則是延續前一 年的研究，重點放在 Relay 的流量控制與服務品質保證兩個
議題。由於 Relay 的後端網路為無線通道， 而在有限的無線通道資源下，還要能夠維持 UE 的服務
品質保證則是一個重要的議題。而又由於 Relay 對 DeNB 或是 UE 的無線通道狀況不一致，所以
很可能造成緩衝區爆滿的情形，因此要做到流量控制 基卻又不失系統效能也則是第三年之研究重
點。 
 
三、文獻探討 
 
[1] Nigel Toon, President and CEO, “LTE and small cells,” picoChip. 
[2] Simon Saunders, “The Role of Cooperation in Establishing an Efficient Femto Economy,” Femto 
Forum, 2008. 
[3] Simon Saunders, “The Role of Cooperation in Establishing an Efficient Femto Economy,” Femto 
Forum, 2008. 
[4] Wimax Femtocell, “ARICENT White Paper,” www.aricent.com.  
[5] “Requirements for WiMAX Femtocell Systems, Version 1.0,” WiMAX Forum. 
[6] “Network Architecture Release 1.6-Femto cells,” WiMAX Forum. 
[7] “Architecture aspects of HNB and HeNB, Rel-9,” 3GPP TR 23.830. 
[8] “Home (e)NodeB; Network aspects, Rel-8,” 3GPP TR R3.020. 
[9] “Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Univer sal Terrestrial Radio 
Access Network (E-UTRAN); Overall description; Stage 2,” 3GPP TS 36.300. 
[10] P.E. Mogensen, T. Koivisto, K.I. Pedersen, I.Z. Kovacs, B. Raaf, K. Pajukoski, and M.J. Rinne, 
 6 
型基地台(Home eNodeB，HeNB)。HeNB 的特性為小型訊號覆蓋範圍、低功率，及低成本，如無線網
路存取點(Access Point，AP)。HeNB 可以由使用者自行在家中與辦公室中安裝，並由網路服務提供者
啟動運行。HeNB 藉由寬頻固網(Broadband Fixed Lines)與 IP 連線到網路接取提供者(Network Access 
Provider，NAP)，如 xDSL、Cable，及光纖(FTTx)。尤其在室內環境下，室外基地台無法提供高速與
穩定的資料傳輸速度，同時 HeNB 也能解決傳輸空洞(Transmission Hole)的現象，藉以提高訊號覆蓋
範圍。此外 HeNB 是由 NAP 透過後端網路進行管理與設定，多數的 HeNB 通常皆被安裝在 Macro 基
地台的訊號涵蓋範圍內，此結果會造成 Macro 基地台和 HeNB 之間有無線訊號干擾的現象發生，此干
擾會造成碰撞、封包遺失、傳輸延遲，及降低吞吐量(Throughput)等。LTE-A 標準定義 HeNB 幾個必
要的功能，包括網路接入、換手、省電模式(idle mode)，及服務品質等(Quality of Server，QoS)等。 
 
圖 4-1. HeNB 網路架構 
HeNB網路架構如圖 4-1 所示。HeNB在LTE-A有三種網路架構，其一為HeNB透過網際網路連到專屬的
HeNB閘道器(HeNB-Gateway，HeNB-GW)，以S1-MME介面接入演進式封包核心(Evolved Packet Core，
EPC)；其二為HeNB不依靠HeNB-GW直接連接到服務閘道器(Serving-Gateway，S-GW)與行動管理裝置
(Mobility Management Entity，MME)，以S1-U介面接入EPC；其三為HeNB以Control-plane從專屬的
HeNB-GW連接MME，及以User-plane連接S-GW進入EPC皆可。HeNB網路架構如圖 4-1 所示。HeNB-GW
是用來管理所有在HeNB-GW之下的HeNB，類似於MME，並提供延展性。S1-U介面為HeNB從Internet
連接到S-GW之間。S-GW以S1-U介面用來傳送UE的資料。MME經由S1-MME介面管理HeNB和
HeNB-GW，並經由S11 介面傳送控制訊息到S-GW。家庭用戶服務(Home Subscribe Server，HSS)儲存
使用者資訊和經由S6a介面傳送使用者資訊到MME。封閉型用戶群組(Closed Subscriber Group，CSG) 
ListSrv儲存CSG用戶資訊，以用來執行接入與經由C1 介面 (OMA DM/OTA)傳送CSG資訊給HeNB。 
HeNB 經由固網連接到 NAP，後端網路服務提供者可能不是同一家 NAP，造成 HeNB 無法與 EPC
進行準確地同步。因為在 HeNB 連接到 EPC 之間包含了 Internet，此 Internet 內擁有很多路由器節點，
這會造成時間同步的準確性下降。如果時間同步不準確，這會造成碰撞、封包遺失、傳輸延遲等問題。 
以 WiMAX 的 Femto BS 的時間同步為例子，在 WiMAX Forum 定義的 WiMAX Femtocell System 
文件中定義到了 Femto BS 的需求為需要與其他的 WiMAX 裝置同步，同步的方法有 GPS、IEEE 1588
協定等方法。常見的同步方法有三種： 
 GPS：GPS 雖可用於 HeNB 的時間同步，但缺點是其不支援室內環境 
 IEEE 1588 協定  
 8 
延遲。 
圖 4-3 所示，多個點到點時鐘以 mesh 的方式連接，而點到點時鐘路由規則是由其他路由協定所規
範，點到點時鐘與端點到端點時鐘的差異在於他們修正路徑延遲的方式。以下介紹點到點時鐘被設計
的目的。 
OC
1-2
EC
1-2
OC
1-1
BC
OC
1-n
EC
2-2
EC
2-1
EC
1-n
EC
2-n
EC
1-1
OC
2-n
OC
2-2
OC
2-1
~~ ~~
BC
OC
EC end-to-end transparent clock
Boundary 
clock
Ordinary 
clock
Grandmaster clock
 
圖 4-2、具有端點到端點時鐘的架構圖 
OC
1-2
PC
1-2
OC
1-1
OC
1-n
PC
2-2
PC
2-1
PC
1-n
PC
2-n
PC
1-1
~~
Grandmaster clock
BC
OC
PC Peer-to-peertransparent clock
Boundary 
clock
Ordinary 
clock
A
E
B
D
C G
~~
PC
m-1
PC
m-n
PC
m-2
~~
~~
~~
~~
 
圖 4-3、具有點到點時鐘的架構圖 
假設原本的路徑是由母時鐘經過路徑 A、B、G、E 和 D 到達普通時鐘 1-2，點到點時鐘 1-1 會在
修正欄位加入 PTP 訊息穿越透明時鐘 1-1 所需的延遲以及路徑 A 的延遲；點到點時鐘 2-1 同樣會在修
正欄位加入 PTP 訊息穿越透明時鐘 2-1 所需的延遲以及路徑 B 的延遲；以此類推，最後到達普通時鐘
1-2 並完成時間同步。 
一但網路拓樸改變後，兩個時鐘間的路徑變為 A、C 和 D，點到點時鐘 1-1 會執行與先前相同的修
正程序，但點到點時鐘 1-2 會直接將先前計算出的穿越透明時鐘 1-2 所需的延遲以及路徑 C 的延遲加
入修正欄位，如此一來可以利用先前已測量好的穿越延遲以及路徑延遲，快速的重新配置網路拓墣。
而主時鐘與從時鐘的同步方法如下： 
 10 
 
1. S.-T. Sheu, M.-S. Lee, Y.-H. Tsai and Po-Min Lin, “Long-term In-door Wireless Location Technology”, 
CHINACOM 2010, 25-27, Beijing, China, August 2010. (Invited paper) 
2. S.-T. Sheu, L.-W. Chen, “A Universal Power Saving Mechanism for Random Traffic Intensity in IEEE 
802.16e Wireless Metropolitan Area Networks”, Vehicular Technology Conference (VTC Spring), 2011 
IEEE 73rd, 2011. 
3. H.-W. Tseng; Y.-R. Chuang; S.-T. Sheu, “An Automatic Mesh Scheme for IEEE 802.11 Wireless Mesh 
Networks”, Wireless Communications and Mobile Computing Conference (IWCMC), 2011 7th 
International, 2011. 
4. S.-T. Sheu, C.-H. Huang, “Mixed P2P-CDN System for Multimedia Streaming in Mobile Environment”, 
Wireless Communications and Mobile Computing Conference (IWCMC), 2011 7th International, 2011. 
 
國科會補助專題研究計畫成果報告自評表 
請就研究內容與原計畫相符程度、達成預期目標情況、研究成果之學術或應用價
值（簡要敘述成果所代表之意義、價值、影響或進一步發展之可能性）、是否適
合在學術期刊發表或申請專利、主要發現或其他有關價值等，作一綜合評估。 
1. 請就研究內容與原計畫相符程度、達成預期目標情況作一綜合評估 
■達成目標 
□ 未達成目標（請說明，以 100 字為限） 
□ 實驗失敗 
□ 因故實驗中斷 
□ 其他原因 
說明：  
2. 研究成果在學術期刊發表或申請專利等情形： 
論文：■已發表 □未發表之文稿 ■撰寫中 □無 
專利：□已獲得 □申請中 ■無 
技轉：□已技轉 □洽談中 ■無 
其他：  
In-door Wireless Positioning Technology 
Shiann-Tsong Sheu·, Meng-Shin Li2, Yi-Hsueh Tsai3 and Po-Min Lin4 
1.2.4. Dept. Communication Engineering, National Central University, Taoyuan , Taiwan 
3 Dept. Emerging Smart Technology Institute, Institute for Information Industry, Taipei, Taiwan 
1 stsheu@Ce.ncu.edu.tw, 2 975203034@Cc.ncu.edu.tw, 3 lucas@iii.org.tw, 4985203050@cc.ncu.edu.tw 
Abstract-With the flourishing development and improvement 
of technology, the satellite-based location technique has become 
the well-known navigation system, the accuracy of 
satellite-based positioning result significantly degrades when the 
receiver is located in the non-Iine-of-sight urban area or inside 
the building. To overcome the problem, the widely deployed 
IEEE 802.11 wireless local area network (WLAN) is naturally 
considered as an alternative positioning solution. Unfortunately, 
the WLAN-based positioning technologies usually cannot derive 
accurate result. As a solution, this paper proposes a long-term 
indoor positioning solution to obtain more precise location for 
the applications such as invaluable equipment property 
monitoring, fixed wireless sensing and so on. Based on a la�e 
amount of measurement results, the proposed methodology IS 
able to solve the issue of time-variant signal strengths. 
Simulation results show that the proposed method is able to 
control the accuracy of tens of centimeters. 
Keywords -Fingerprint, Indoor Positioning, Location Estimation, 
LoS, NLoS, Signal Stregth, Signature, Wi-Fi 
I. INTRODUCTION 
The fluent development of location based service (LBS) 
requires the accurate location technique which is relying on 
satellites to acquire the position and the mobile 
communication to access the geographic information system 
(GIS). These services could be applied to the applications of 
material, aviation and navigation. However, GPS is unable to 
work well in some areas, such as indoor or basement, because 
of line-of-sight (LoS) limitation for positioning. 
In the non-line-of-Sight (NLoS) environment, positioning 
techniques with cellular networks [1]-[3], wireless network 
[4]-[7], infrared rays [8], ultrasonic [9], RPID [8], and 
Bluetooth [10][11] play the major role to improve the indoor 
location estimation, especially in the dense urban area. The 
position estimation methods of wireless location techniques 
[12][13] are classified into four categories : Received Signal 
Strength (RSS), Time of Arrival (ToA), Time Differences of 
Arrival (TDoA) and Angle of Arrival (AoA). The latest three 
of them (i.e., ToA, TDoA and AoA methods) can be easily 
jammed by movable obstacles, and lead to the inaccurate 
location. In paper [14], a location-awareness system named 
RADAR is designed for indoor positioning estimation. This 
method uses a WiFi-equipped handset device to collect the 
received signal strength and then stores the information into 
the database of the location server. Afterward, it estimates the 
position of handset device at the location server by matching 
the pattern of the means of signal strengths. 
According to existing WLAN location technique [15]-[17], 
many environmental factors, such as temperature, pressure, 
humidity, interference, and thermal noise, might significantly 
degrade the accuracy of the estimated location. In order 
words, if the access point (AP) is continuously scanned by a 
device at a fixed point, the measured received signal strength 
(RSS) indicators would vary with time. As a result, the indoor 
real-time location estimation is always inaccurate due to the 
time-variant phenomena. Previous studies of WLAN location 
techniques focused on how fast the location can be acquired, 
thus, these methods only used a small amount of the signal 
strength measurements received within a short period of time 
to estimate the location. Until now, it is still difficult to make 
great progress to refer to time-invariant measurements even 
though researchers already paid much more attentions on 
improving the accuracy of location. 
In our opinions, the indoor position estimating systems can 
be classified into two types: real-time positioning system and 
non-real-time positioning system. The real-time system 
locates and tracks user inside the building, and then the 
non-real-time system focuses on the accuracy of the 
estimated location rather than how fast the location is 
acquired. In other words, the non-real-time system is allowed 
to use a longer period of time to estimate the coordinates of 
user. For instance, such system can be used for monitoring 
precious equipments in the cooperation or fixed wireless 
sensors. This paper aims to propose the solution for 
non-real-time positioning system. 
To solve the issue caused from time-variant signal 
strengths, RSS measurements should be collected for a longer 
period of time in order to compensate the instability of the 
measurements. The experimental results show that the 
diagrams of the probability distribution functions (PDF) are 
approximate to normal distribution. By further examining the 
PDF characteristics of measurements, the environment could 
be identified as either LoS or NLoS environment. Despite of 
the LoS or NLoS environment, when the probability 
distribution of the collected measurements shows the 
characteristic of normal distribution, device could stop 
collecting information anymore. 
The organization of this paper is described as follows. In 
section II, we survey some prior arts regarding to 
non-real-time wireless positioning technology. In section III, 
analysis of the experiments for both NLoS and LoS 
environments is provided, and an algorithm for identifying 
the environment type (i.e. NLoS or LoS) is given. The 
� "  Obstacles 
WiFiA�  
CI} }� 
�) 
Mobile Device2 
(LoS) 
Mobile Device I 
SSID 
BSSID 
NLoS Signal Level I 
N LoS FreQuencv I 
NLoS Timel 
NLoS SignaiLevel2 
N LoS Frequency2 
NLoS Time2 ...... 
Mobile Device2 
SSID 
BSSID 
LoS Signal Level I 
LoS FreQuencv I 
LoS Timel 
LoS SignaiLevel2 
LoS Frequency2 
LoS Time2 
Fig. I NLoS and LoS experimental environments 
location. By analyzing the long-tenn signature of the stored 
signal strengths in database, the variations of those 
probability distributions can be studied and investigated. The 
experimental results for both LoS and NLoS environments 
show that the signal strength is changed apparently if the 
signal is attenuated by obstacles. 
B. Identification with NLoS and LoS and Post-processing 
Signal Strength Data 
For both NLoS and LoS environments, we gather statistics 
of signal strengths from the database in the location server 
and analyze the PDF of the signal strength measurements 
according to paper [20]. 
Under NLoS situation, over one hundred thousand values 
of the signal strengths are collected by a fixed mobile smart 
phone, and the corresponding probability density functions of 
the signal strength measurements are shown in Fig. 2(a). 
Since the signal strength measurements are time-variant and 
also affected by environmental factors, it is difficult to figure 
out the signature from its probability distribution diagram. If 
the location of the device is derived by using a small amount 
of measurements, the accuracy of the positioning result 
should be unacceptable, especially there is obstacle located 
between the AP and the mobile device. On the other hand, the 
probability distribution of a large amount of signal strength 
measurements is actually similar to a nonnal distribution and 
this outcome shows that the accurate location technique could 
be acquired. In other words, if the measurements are 
accumulated over a long period of time, the probability 
distribution diagram of the signal strength measurements will 
eventually converge to normal distribution with a specific 
signature and become time-invariant. 
Fig. 2(b) shows the PDF of signal strengths derived in LoS 
environment. Similarly, we also found that the more 
measurements we accumulated, the degree of time-invariant 
will become higher. It is evident that the PDF of signal 
strengths in LoS environment looks much like a nonnal 
distribution even though the number of samples is small. In 
fact, as the device collects fifty thousand measurements, the 
PDF of collected measurements is already very similar to the 
nonnal distribution. 
The characteristic of observed statistics shows that the 
accuracy of user location in the indoor space would be 
14000 
12000 
10000 
§ 8000 
0 
E 6000 
« 
4000 
2000 
0 
14000 
12000 
10000 
§ 8000 
0 
E 6000 
« 
4000 
2000 
0 
nLoS :probability d istribution:O-l 00000 
--- I OOOOO !--_______ -=-____ ---j 
-6- 50000 
--25000 
--e-- 10000 
--5000 
- 1000 
·26 ·28 ·30 ·32 ·34 ·36 ·38 ·40 ·42 ·44 ·46 ·48 ·50 ·52 ·54 ·56 ·58 ·60 
Signal level (dBm) 
(a) PDF derived from NLoS case 
LoS:probability distribution:O-SOOOO 
--50000 
-6-35000 I 
--25000 ((\� 
�� --e--10000 
� --5000 
r-I-. l\ -1000 
L� � 
-26 -28 -30 -32 -34 -36 -38 -40 -42 -44 -46 -48 -50 -52 -54 -56 -58 -60 
Signal level (dBm) 
(b) PDF derived from LoS case 
Fig. 2 PDF of signal strengths 
TABLE I S · ·  f S· IS tatIstIcs 0 Igna h NL S trengt SIn o envIronment C dB ) In m 
Amount 1000 5000 10000 25000 50000 100000 
Mean -48.34 -48.90 -48.51 -47.99 -47.31 -46.37 
Variance 4.921 4.327 3.549 3.705 9.670 22.37 
Mode -50 -50 -50 -47 -49 -50 
Max -43 -38 -37 -37 -36 -28 
Min -53 -54 -54 -54 -55 -59 
Mid -48 -46 -45.5 -45.5 -45.5 -43.5 
Mids -48.25 -47 -45.25 -45.75 -45.5 -44.5 
TABLE II Statistics of Signal Strengths in LoS environment (in dBm) 
Amount 1000 5000 10000 25000 35000 50000 
Mean -50 .23 -49.70 -49.05 -49.45 -49.76 -49.31 
Variance 0.73 1.85 2.31 1.96 2.41 5.41 
Mode -50 -50 -49 -50 -50 -50 
Max -48 -45 -45 -45 -45 -42 
Min -55 -55 -55 -55 -57 -59 
Mid -51.5 -50 -50 -50 -51 -50.5 
Mids -51.5 -49.25 -49.25 -49.75 -50.75 -50.25 
significantly improved by simply referring to a lot of signal 
strength measurements, regardless of LoS or NLoS 
en vironment. 
The analyses of observed signal strengths under NLoS case 
and LoS case are shown in Tables I and II. There are seven 
different characteristics among collected signal strengths. It 
shows the values and ranges of Mean and Variance are 
somehow proportional to the number of measurements. In 
general, the maximal signal strength (Max) and minimal 
signal strength (Min) indicate the best signal strength without 
any interference and the worst signal strength with lots of 
interference respectively. The mode value (Mode) is the most 
number of the signal strength appearing in the samples. 
E -30 
co -40 � -40--30 
� -50 
" -60 • -50--40 
e -70 • -60--50 v; '" -80 • -70--60 §, 'Vi -90 
• -80--70 
-90--80 
coordinate 
(a) API 
� -30 -40 � -40--30 
� -50 
� -60 
• -50--40 
v; -70 • -60--50 
� -80 • -70--60 -90 'Vi 
• -80--70 
-90--80 
coordinate 
(b) AP2 
E -30 
co -40 � -40--30 
� -50 • -50--40 " -60 
� -70 • -60--50 '" -80 • -70--60 §, -90 'Vi 
• -80--70 
-90--80 
coordinate 
(c) AP3 
E -30 
co 
� -40 -40--30 
� -50 • -50--40 
� -60 
v; -70 • -60--50 '" -80 • -70--60 §, 'Vi -90 
• -80--70 
-90--80 
coordinate 
(d) AP4 
Fig. 7 Comparison oDD space of signal strength distribution 
Four APs are placed in each comer of the map to offer signals 
for device to measure. By using the mobile device, the site 
survey is performed at each of 48 cross point and each point is 
represented as a coordinate (x,y). Mobile device receives 
information from the WLAN APs and then it uploads the 
collected information to the database in the location server as 
mentioned before. 
The location server adopts both Nearest Neighbor 
localization (NN) [14] and Rule-base localization method [21] 
to determine the possible location of the mobile device 
according to the input measurements and the stored 
information in the database. 
With the NN localization method, the location server 
compares the input middle signal strength and that stored in 
"-
Cl 
U 
"-
Cl 
U 
"-
Cl 
U 
"-
Cl 
U 
0.9 
O.S 
0.7 
0.6 
0.5 
0.4 
OJ 
0.2 
0.1 
I 
0.9 
O.S 
0.7 
0.6 
0.5 
0.4 
OJ 
0.2 
0.1 
I 
0.9 
O.S 
0.7 
0.6 
0.5 
0.4 
OJ 
0.2 
0.1 
0 
I 
0.9 
O.S 
0.7 
0.6 
0.5 
0.4 
OJ 
0.2 
0.1 
0 
Fig. 8 Experimental indoor space 
Jdi!ff 
I�"'" 
v�/ 
IJ("".... 
-l,'r 
� 
;......-;-- / 
.��-
10 20 30 40 50 6070 SO 90 100110120130140150160 
distance error (em) 
(a) At the (0,0) 
/I 
J Y II 
!If J� 
� 
�I 
j 
J -----
10 20 30 40 50 6070 SO 90 100110120130140150160 
distance error (em) 
(b) At the (0,7) 
y 
'I 
.........-. 
.! 
I. J. 
fJ. lL 
� V1� 
Irl flP 
!---Y 
10 20 30 40 50 60 70 SO 90 100110120130140150160 
I 
I I 
I 
distance error (em) 
(c) At the (3,3) 
........... 
J 
/77 
/' 
� �� 
./ 
� 
"""""-f 
" f 
� 
10 20 30 40 50 6070 SO 90 100110120130140150160 
distance error (em) 
(d) At the (5,0) 
---400 
---SOO 
---1200 
--1600 
-<>- 2000 
---2400 
-6- 2S00 
-e- 3200 
---400 
--- SOO 
---1200 
__ 1600 
-Q-2000 
---2400 
�2S00 
-B- 3200 
---400 
---SOO 
---1200 
--1600 
-Q-2000 
---2400 
�2S00 
-B-3200 
---400 
---SOO 
---1200 
-+-1600 
---2000 
-+-2400 
-6-2S00 
-B-3200 
Ethernet," in Proceedings of the 8th ACM International Conference on 
Mobile Computing and Networking, pp.227-238, 2002. 
[7] J. Letchner, D. Fox, and A. LaMarca, "Large-Scale Localization from 
Wireless Signal Strength," in Proceedings of in Proceedings of AAAI 
Conference On Artificial Intelligence, vol. I, pp.15-20, 2005. 
[8] M. Fleck, M. Frid, T. Kindberg, E. O'Brien-Strain, R. Rajani and M. 
Spasojevic, "Remember: A Tool for Capturing Museum Visits," in 
Proceedings ofinternational Conference on Ubiquitous Computing, pp. 
48-55, September 2002. 
[9] B. Brown, I. McColl, M. Chalmers, A. Galani, C. Randell and A. Steed, 
"Lessons from the Lighthouse: Collaboration in a Shared Mixed 
Reality System," in Proceedings of ACM, pp. 577-585, April 2003. 
[10] A. Madhavapeddy, and A. Tse, "A Study of Bluetooth Propagation 
Using Accurate Indoor Location Mapping," in Proceedings of 
International Conference on Ubiquitous Computing, vol. 3660, pp. 
105-122, August 2005. 
[II] CoY. Chang, K-P. Shih, C-H. Hsu and H-C. Chen "Location-aware 
Multicasting Protocol for Bluetooth Location Networks," Information 
Sciences, vol. 177, pp. 3161-3177,2007. 
[12] R. Roberts, "IEEE P802.l5 Wireless Personal Area Networks: Ranging 
Subcommittee Final Report," Ranging Subcommittee of TG4a, 2004 
[13] K. W. Cheung, H. C. So, W.-K. Ma, and Y. T. Chan, "A Constrained 
Least Squares Approach to Mobile Positioning: Algorithms and 
Optirnality," EURASIP Journal on Applied Signal Processing, vol. 
2006,pp. I-23,2006. 
[14] P. Bahl and V. N. Padrnanabhan, "RADAR: An In-Building 
RF-BASED User Location and Tracking System," in Proceedings of 
INFOCOM, vol. 2, pp. 775-784, April 2000. 
[15] P. Castro, P. Chiu, T. Kremenek, and R.R. Muntz, "A Probabilistic 
Room Location Service fur Wireless Networked Environments," in 
Proceedings of International Conference on Ubiquitous Computing, 
vol. 2201, pp.l8-34, 2001. 
[16] A-M. Ladd, K-E. Bekris, A. Rudys, G. Marceau, L-E. Kavraki, and 
D-S. Wallach, "Robotics-Based Location Sensing uses Wireless 
Ethernet," in Proceedings of ACM International Conference on Mobile 
Computing and Networking, pp.227-238, 2002. 
[17] J. Letchner, D. Fox, and A. LaMarca, "Large-Scale Localization from 
Wireless Signal Strength," in Proceedings of AAAI Conference On 
Artificial Intelligence, vol. I, pp. 15-20, 2005. 
[18] S. Y. Seidel and T. S. Rapport, "914 MHz path loss prediction 
Model for Indoor Wireless Communications in Multi-floored 
buildings," IEEE Transactions on Antennas and Propagation, vol. 40, 
pp. 207-217, February 1992. 
[19] "Android developers". Available: 
http://developer.android.comlsdklindex.htrnl 
[20] S. T. Sheu, M. S. Li and Y. H. Tsai, "In-Door Long-Term Positioning 
Technology," in Proceedings of CSCIST, July 2010. 
[21] Qiuxia Chen, Dik-Lun Lee and Wang-Chien Lee, "Rule-Based WiFi 
Localization Methods," in Proceedings of International Conference on 
Embedded and Ubiquitous Computing, vol. I, pp. 252-258, January 
2009. 
 
Figure 1.  Comparison of sleep patterns of PSC-I and proposed UPSM. 
Section V, followed by the conclusion remarks in Section VI, 
which completes this paper.  
II. UNIVERSAL POWER SAVING MECHANISM (UPSM) 
Since this study focuses on non-real-time service 
connection, the power saving efficiency of proposed UPSM 
will be mainly compared with that of PSC-I. For the sake of 
brevity, all the ensuing discussions apply for power savings 
occurring on single non-real-time connection only, unless 
otherwise noted. 
Whenever sleep state deems appropriate and necessary, the 
PSC-I power saving mode could be triggered by either MS or 
BS. As the packet inter-arrival time suddenly becomes longer, 
the sleeping window will fast grow from the initial sleeping 
window to the final sleeping window, as depicted in Fig. 1. 
Due to the irregular packet inter-arrival time, the drawbacks of 
PSC-I sleep pattern are twofold: 1) the frequent awakenings at 
the beginning stage of sleep state would waste much power on 
receiving the negative traffic indication messages sent from BS, 
and 2) the binary-increasing sleeping window size would 
prolong the response time of the first packet of internet 
application, such as the response time of home page browsed 
by a user. In other words, the response time of changing 
webpage from one to another would be dominated by the last 
sleeping window size. 
Due to the time-variant characteristic of data packets in real 
applications, the PSC-I seems not a well universal solution for 
all kinds of traffic intensities. Therefore, we propose a 
universal power saving mechanism (UPSM) to eliminate the 
process of dynamically adjusting sleeping window by simply 
using the constant sleeping window. It is evident that the 
proposed UPSM and the standard PSC-II are appreciable 
resemblance. In fact, the only difference of the UPSM from the 
PSC-II is the flexibility of state transition from sleep state (i.e. 
with the sleeping period and listening period) to normal state 
(i.e. with the normal period). As portrayed in Fig. 1, all 
sleeping windows in UPSM produced during an MS staying in 
sleep state have a same time length, denoted as w, and it is 
helpful to control the latency of the first coming packet, 
thereby it possesses the same advantage of PSC-II. Moreover, 
after the packet(s) arriving at BS, the MS will be woken up to 
return to normal state for receiving all data packets from the BS. 
Doubtlessly, it also possesses the same advantage of PSC-I. 
Whenever there is no more traffic to the MS in normal period, 
the BS commands the MS to enter sleep state as usual, except 
the initial/final sleeping window size is set as the constant 
sleeping window size and there is no need to update the 
sleeping window during entire session lifetime. Fig. 1 
illustrates that PSC-I may result in a deteriorated response time 
on browsing homepages than that of proposed UPSM. 
III. SYSTEM MODEL ANALYSIS 
In order to compare the performance of the legacy PSC-I, 
PSC-II and the proposed UPSM, the sleep ratio (SR), energy 
efficiency (EE) and mean packet delay (MPD) are used as  
 
Figure 2.  The two-state markov model of UPSM. 
 
Figure 3.  An example illustrating the construction of normal period 
primary metrics. In this section, we use a two-state Markov 
model to analyze the power saving capability of proposed 
UPSM. Fig. 2 portrays state transition diagram for the proposed 
UPSM, where the sleep pattern of UPSM composes of a 
constant sleeping window and a constant listening window. Let 
V denote a sleep vacation. We have  
,lwV +=                                          (1) 
where w and l are the time periods of constant sleeping window 
and constant listening window respectively. Assume the traffic 
arrivals of a session follow Poisson distribution with mean rate 
ߣ, the probability of no packet arriving during V is equal to e-ߣV. 
Therefore, we can use the following equations to portray the 
steady state probabilities of the proposed Markov model: 
⎪⎩
⎪⎨
⎧
+=
+=
−=
−
−
  1
 
)1(
NS
V
SNS
V
SN
PP
ePPP
ePP
λ
λ
,                              (2) 
where PN and PS are the steady state probabilities of an MS 
staying in normal state and sleep state respectively. From 
equation (2), we have 
⎩⎨
⎧
−=
−−=
−−
−−
    ]2[
]2[1
1
1
V
S
V
N
eP
eP
λ
λ
.                          (3) 
Now, we can further analyze three primary metrics derived 
from the proposed UPSM. 
A. Sleep Ratio (SR) 
Whenever an MS staying in sleep period, it always 
consumes less power compared to the listen period or the 
normal period. The power saving capability of UPSM will be 
improved if the sleep period occupies a high proportion of total 
simulation time. Let sleep ratio (SR) be the ratio of the total 
number of frames the MS turns off RF transceiver to the total 
number of observed frames in simulation. Thus, we have  
][ NNS
S
FEPVP
wPSR
+
=
,                            (4) 
where E[FN] is the mean number of frames when MS stays in 
normal state. The value of E[FN] is affected by the number of 
packets arrived during sleep vacation and normal period. As 
shown in Fig. 3, let ߙ1 be the first normal period where the MS 
wakes up to receive the packets arrived and buffered at BS 
during sleep vacation. Thus, ߙ1 is given by 
][1 XVEλα = ,                               (5) 
where E[X] = 1/ߤ is the mean service time of a packet which 
follows the Poisson distribution with mean service rate ߤ.  
Whenever a packet arrives at BS during normal period 
(i.e., E[FN]), the value of   E[FN] will be extended. Let ߙ2 
denote the extended period, we can derive it by the following 
equation: 
][][2 XEFE Nλα = ,                          (6) 
    
  
  
 
Figure 4.  Power saving efficiencies of standard PSC-I and UPSM under 
different traffic intensities ρ=0.01, 0.5 and 0.99. 
V. PERFORMANCE EVALUATION 
To concentrate on the performance of proposed UPSM, an 
error-free channel condition is assumed in the NS2 simulator. 
The network under investigation consists of one BS and one 
MS, and one connection is established between BS and MS. 
Moreover, suppose the BS has infinite buffer space, and thus 
always can buffer produced packets, regardless of how late the 
MS wakes up to receive them. In addition, network only 
generates the downlink traffic in order to evaluate the impact 
from varied sleep patterns.  
The initial sleeping window and the final sleeping window 
supported in standard PSC-I are set as 1 (w0=1) and 512 
(wF=512) respectively [5]. The traffic model follows Poisson 
distribution and only one packet can be served in one radio 
frame. Three extreme traffic intensities are considered for 
producing irregular packet inter-arrival gaps, that is, ρ = 0.01, 
0.5, and 0.99. To provide fair comparisons, the observed 
constant sleeping window sizes used by proposed UPSM are 
the same with PSC-I (i.e. w =1, 2, 4, 8, 16, 32, 64, 128, 256, 
and 512). As shown in the following figures, notation UPSM(w) 
is used to denote the proposed UPSM with constant sleeping 
window of length w (in frames). 
First of all, the power saving efficiencies represented by SR, 
EE and MPD metrics, which are derived from simulations and 
analyses, are depicted in Fig. 4 as a function of traffic intensity 
(ρ) for both the standard PSC-I and the proposed UPSM. As 
shown in Fig. 4(a), the light traffic load situation (ρ = 0.01) 
will result in a higher SR because the MS with PSC-I has less 
chance to wake up for packet reception. We can find that as the 
UPSM adopts a larger constant sleeping window size, a higher 
SR will be derived also. Contrarily, for heavy traffic load 
situation (ρ = 0.99), the MS with either PSC-I or UPSM 
shouldalways stay in normal state and thereby the derived SR 
becomes quite low. 
We note that, for the medium traffic load situation, the SR 
improvement achieved by UPSM is about 15% if the constant  
 
 
 
 
Figure 5.  The gap between the measured results and optimal results in terms 
of SR, EE  and MPD metrics. 
sleeping window size is large than 2 frames. It can be also 
observed that the proposed UPSM obtains a better SR than 
PSC-I when the parameter w is larger than 32 frames (1 frame) 
when ρ = 0.01 (ρ = 0.5 and 0.99). 
Fig. 4(b) further illustrates the relation between EE metric 
and traffic intensity. Evidently, the adoption of UPSM with 
almost all kinds of parameter w (except w=1 and 2) results in a 
better energy efficiency, as compared to the PSC-I. As 
mentioned before, if the packet inter-arrival time becomes 
longer, the PSC-I MS will waste much power on receptions of 
negative traffic indication messages. 
From our observations, no matter what value of ρ is, a 
larger parameter w adopted in UPSM will reduce the frequency 
of awakenings and thereby this phenomenon resembles the 
outcome of decreasing traffic intensity. Fig. 4(c) portrays the 
MDP distributions derived from the PSC-I and UPSM. 
Investigation into the stick plots of MPDs show that the UPSM 
with a large parameter w will incur a high MPD, which is 
consistent with the sleep pattern. With PSC-I, packets have a 
higher probability of arriving at the beginning of a larger 
sleeping window when ρ = 0.01, and then MPD is mainly 
contributed from the residual sleeping period. When ρ = 0.99, 
although the MS with either PSC-I or UPSM keeps busy on 
receiving subsequent packets, the heavy traffic load still may 
result in a remarkable queuing delay, as expected. 
Fig. 5 shows the derived values of σSR, σEE, and σMPD. A 
smaller value indicates that it is closer to the optimal result. It 
shows the tradeoff relationships among three metrics. Fig. 6 
portrays the final and average scores derived from the PSC-I 
and UPSM. Three weights, α, β and γ, mentioned in section IV 
are set as a same value of 1/3. The dash line shown in Fig. 6 is 
the score of PSC-I, which is used to be the benchmark for 
comparing the UPSM. We can see that the score curve of 
proposed UPSM in each Fig. 6(a), 6(b) and 6(c) is a parabola 
as a function of parameter w. Notably, the dash line intersects 
the parabola at two points and all the values within the range 
could be treated as appropriate candidates for UPSM. 
0
20
40
60
80
100
SR
 (%
)
ߩ
Simulation result
0.01               0.5                0.99
0
20
40
60
80
100
SR
 (%
)
ߩ
Numerical result
0.01               0.5                0.99
0
20
40
60
80
100
EE
 (%
)
ߩ
Simulation result
0.01               0.5               0.99
0
20
40
60
80
100
EE
 (%
)
ߩ
Numerical result
0.01 0.5 0.99
0
1
2
M
PD
 (s
)
ߩ
Simulation result
0.01               0.5               0.99
0
1
2
M
PD
 (s
)
ߩ
Numerical result
0.01               0.5               0.99
Legacy S-PSC(1) S-PSC(2) S-PSC(4)
S-PSC(8) S-PSC(16) S-PSC(32) S-PSC(64)
S-PSC(128) S-PSC(256) S-PSC(512)
-20
0
20
40
60
80
100
ߪ SR
(%
)
ߩ
Simulation result
0.01              0.5              0.99
-20
0
20
40
60
80
100
ߪ SR
(%
)
ߩ
Numerical result
0.01              0.5              0.99
0
20
40
60
80
100
ߪ E
E
(%
)
ߩ
Simulation result
0.01               0.5               0.99
0
20
40
60
80
100
ߪ E
E
(%
)
ߩ
Numerical result
0.01               0.5               0.99
-20
0
20
40
60
80
100
ߪ M
PD
(%
)
ߩ
Simulation result
0.01              0.5              0.99
-20
0
20
40
60
80
100
ߪ M
PD
(%
)
ߩ
Numerical result
0.01              0.5              0.99
Legacy S-PSC(1) S-PSC(2) S-PSC(4)
S-PSC(8) S-PSC(16) S-PSC(32) S-PSC(64)
S-PSC(128) S-PSC(256) S-PSC(512)
(a) Sleep ratio (SR) of PSC-I and UPSM 
(b) Energy efficiency (EE) of PSC-I and UPSM
(c) Mean packet delay (MPD) of PSC-I and UPSM
(a) σSR 
(b) σEE 
(c) σMPD(i) 
An Automatic Mesh Scheme for IEEE 802.11 
Wireless Mesh Networks 
Hsueh-Wen Tseng 
Cloud Computing Center for Mobile App\. 
Indu. Tech. Research Institute 
Taiwan, R.O.c. 
Yue-Ru Chuang 
Dept. of Elec. Engineering 
Fu Jen Catholic University 
Taiwan, R.O.c. 
Shiann-Tsang Sheu 
Dept. of Communication Engineering 
National Central University 
Taiwan, R.O.C. 
Email: d92005@csie.ntu.edu.tw Email: 070760@mail.fju.edu.tw Email: stsheu@ce.ncu.edu.tw 
Abstract-Wireless mesh networks (WMNs) is a promis­
ing technology that provides broadband wireless Internet 
access. It is one of the most important challenges to estab­
Iishe multiple connections among stations (STAs) in WMNs. 
In this paper, we propose a novel automatic mesh scheme 
(AMS) of layer 2 to form WMN in IEEE 802.11 wireless 
networks. AMS establishes multiple connections from a 
STA to neighbor STAs and determines proper routing 
path effectively, where three objectives are optimized, i.e., 
minimizing the average hop count, balancing traffic load 
and without modifying the communicating procedure in 
IEEE 802.11 standard. AMS owns self-organization capac­
ity, establishes multiple connections and determines routing 
path automatically. Our AMS only uses simple software 
functions without the cost of extra hardware overhead. Sim­
ulation results show that the proposed scheme significantly 
improves the system performance. Importantly, AMS that 
works very well has been implemented and exhaustively 
tested in a realistic test-bed. 
Index Terms-wireless mesh networks, IEEE 802.11, 
layer 2. 
I. INTRODUCTION 
Wireless mesh networks (WMNs) [1] have attracted 
much attention in recent years as an alternative technol­
ogy for last-mile broadband Internet access. Several ven­
dors (e.g., BelAir Networks [2], Cisco Systems [3] and 
Nortal Networks [10)) have recently offered WMN prod­
ucts, and industrial standards groups (e.g., IEEE 802.11s 
Task Group [7] and IEEE 802.16 Task Group [8)) are 
also working actively on new specifications for WMNs. 
Because of significant advantages in bandwidth, relia­
bility, scalability and flexibility, WMN technology has a 
wide application prospect. 
There have been a lot of research works about WMNs 
in recent years, and most of the works [12] on WMNs 
have focused on routing path and channel assignment. 
The routing path is defined that a path is used for 
transmission frame from source address to destination 
address. Thus, data frames can be forwarded rapidly and 
reliably from a station (STA) to the other STAs. The 
978-1-4577-9538-21111$26.00 ©20 11 IEEE 47 
n:[[ 
S02.lh 
Fig. 1. The user connection with Internet. 
problem of routing path establishment among STAs is 
like the issue of self-organization for various networks, 
and it has been discussed in literature for many years. 
In paper [9], authors proposed the distributed optimal 
self-organization in ad hoc wireless sensor networks. 
They discussed two main problems of the optimal self­
organization. One is to build an optimal network topol­
ogy, and the other is to tune network access parameters, 
such as the transmission rate. 
For users, they want to connect with Internet without 
complex procedures. In Figure I, there are four schemes 
(i.e., legacy AP, IEEE 802.1 Is, wireless distribution 
system (WDS) and repeater AP (RAP) to establish con­
nections from an user to Internet in IEEE 802.11 prod­
ucts at present. The legacy AP cannot directly connect 
with Internet because transmission distance is limited. 
It only uses wire or other wireless schemes to extend 
transmission range. IEEE 802.11s standard [7] provided 
interconnecting basic service set (BSS) of AP to form 
an extended service set (ESS) in WMN. However, IEEE 
802.11s draft is instituting so that IEEE 802.11s standard 
procedure is not popular in IEEE 802.11 product. If a 
------ ....... .... " // 
J 
/
/ �� � (po�0.:../ 
/�/ �·Ef···w·.. �.. I I  � RAP6 : \ RAP9 RAP7 : ,i. � J 
\ " . : & : e::-- .::--v- I 
+
. 
• � RAPS STA 
\ 'd RAP3 ...... 
\ �.....
.. . : I 
\ " .  f/#' f� J 
\ ... . ::::;...- � RAP2 , RAP' •••••••• STA 
',�u�e2... 
__
_ / 
Mesh Network 
Fig. 2. An AMS-w illustrative example. 
using first stage of AMS-w, the WDS connection is 
established and then forwards frame to corresponding 
RAPs. 
In the second stage of our AMS-w, AMS-w calculates 
the values of hop count and traffic load that are used 
to establish routing path from the gateway AP to all 
RAPs. When a RAP transmits frame to the gateway AP, 
it selects the minimum value of hop count for neighbor 
RAPs. If two or many neighbor RAPs have same value 
of hop count, the value of traffic load will be used. In this 
case, we will select the minimum value of traffic load 
to approach balanced traffic load. Therefore, a routing 
path is established among RAPs from multiple WDS 
connections. By using AMS-w, multiple connections are 
established and effective routing path is determined in 
WMNs. 
An example illustrates AMS-w in Fig. 2. A source 
RAP (i.e., RAPl) transmits frame to the gateway AP. 
First, the WDS connections must be established. RAPs 
obtain the MAC address of neighbor RAPs by exchang­
ing probe request frame and probe response frame. Then, 
these RAPs set the MAC address of neighbor RAPs 
to form WDS connections (i.e., dash line). Here, there 
are three connections to other RAPs (RAP2, RAP3 and 
RAP4) but RAP2 and RAP3 have same value of hop 
count to the gateway AP. A STA associates with RAP2. 
Thus, RAP} will select the routing path to RAP3 because 
it has smaller value of traffic load. In addition, a STA 
also associates with RAP5, hence the routing path is 
selected from RAP3 to RAP6. Finally, the RAP6 will 
connect with the gateway AP. A routing path (i.e., solid 
line) that is the shortest and minimum traffic load is 
established from RAP} to the gateway AP. 
Here, we present a special case. When a RAP dis­
connects with original joining network (i.e., without 
connecting to Internet), it will disconnect all RAPs to 
Internet. In Fig. 2 , RAP6 disconnects with the gateway 
AP. The frames cannot be sent to Internet, and then sends 
disassociation frame to RAP3. When RAP3 receives 
the disassociation frame, it understands that RAP6 does 
not connect with Internet and then scans channel to 
find other RAPs. RAP3 tries to connect with Internet 
via other RAPs. Similarly, RAP} will be informed by 
receiving the disassociation frame from RAP3 and then 
it will search other RAPs to connect with the gateway 
AP. 
Algorithm 1: AMS-o Initial Algorithm 
1 A gateway AP sends the probe response frame 
(including hop count and the number of node) to 
all neighbor RAPs 
2 if The neighbor RAPs receive more than one probe 
response frame then 
3 l decide to join which APIRAP by using 
4 1. hop count 
5 2. number of node 
6 else 
7 l use station mode of the neighbor RAPs joining 
network; 
8 if The AP mode of these RAPs receives probe 
request frame from new RAPs then 
9 l The AP mode of these RAPs sends the probe 
response frame (including hop count and the 
number of node) to invite new RAPs 
10 else 
11 L they are the leaf RAPs; 
49 
Algorithm 2: AMS-o New RAP Joining Algorithm 
1 Station mode of RAP listens the probe response 
frames (including the number of node and hop 
count) of APIRAPs which had connected with 
Internet 
2 if This RAP receives more than one probe response 
frames then 
3 l decides to join which AP/RAP by using 
4 1. hop count 
5 2. number of node 
6 else 
7 L uses station mode of this RAP joining network; 
8 To finish association procedure for receiving the 
probe response frame of the AP/RAP; 
B. Automatic Mesh Scheme without WDS 
If a RAP cannot support WDS, a tree-based routing 
path is established by using AMS without WDS (AMS-
, 
i 
. . 
.1
' 
.' 
11-. 
, ' � "" ,  
, 
' .. ... . .. , 
90 20 30 40 50 60 70 80 90 
RAP Number 
Fig. 4. Effects of the number of RAPs on average hop count. 
the source RAP/ AP transmits the non-real-time frame 
and the time that the frame is successfully received by 
the destination RAP/ AP. 
Figure 4 shows the effect of the number of RAPs on 
AHC for AMS-w and the distribution routing scheme. 
We can observe that AHC of AMS-w outperforms the 
distribution routing scheme. The reason is that when a 
RAP has many routing paths to connect with the gateway 
AP, it selects a routing path with small hop count. This 
figure shows the intuitive results, and the AHC increases 
as the number of RAP increases. If the number of RAP 
is fewer, a RAP cannot easy find the neighbor RAPs. 
Here, we only consider that RAP/AP can transmit frame 
to the destination RAP/ AP. If a RAP cannot find around 
RAPs, the frames are not sent and the value of AHC is 
O. When number of RAP increases, a RAP can simply 
find other neighbor RAPs. The AH C increases as the 
number of RAP increases. However, when the number 
of RAP is equal to 60, the curve of AMS-w for the 
AHC is insensitive to the number of RAP. Our AMS­
w has many connections to pass through around RAPs 
to the gateway AP and then selects proper routing path 
so that the AH C decreases. For the distribution routing 
scheme, it passes more number of RAPs and implies to 
spend more resources on transmission/reception frames. 
Figure 5 shows the M R values of AMS-w and the 
distribution routing scheme. This figure inversely shows 
that the M R values for the AMS-w and the distribu­
tion routing scheme decrease as the number of RAP 
increases. The reason is that real-time frames can easily 
find intermediate RAPs to pass through the gateway 
AP. If there is more number of RAPs to appear in this 
networks, the probability in which real-time frames are 
blocked is low. Therefore, the real-time frames do not 
miss their deadlines easily. When the number of RAP 
is less or equal to 30, the performance of the proposed 
51 
9 0 20 30 40 50 
RAP Number 
60 70 
Fig. 5. Effects of the number of RAPs on miss rate M R for the 
AMS-w and the distribution routing scheme. 
50,--�-�-�-�-�---, 
� 
E 
';;30 
" 
" 
Cl 
� 20 
::E 
10 
90 20 30 40 50 
RAP Number 
60 70 
Fig. 6. Effects of number of RAPs on delay D for the AMS-w and 
the distribution routing scheme. 
scheme, the AMS-w, and the distribution routing scheme 
are similar. 
The compared two schemes cannot meet the deadlines 
of real-time data frames mostly. The reason is that 
RAP can not find neighbor RAPs to forward real-time 
data frames easily. However, when the number of RAP 
is greater than or equal to 40, the M R of AMS-w 
significantly decreases as the number of RAP increases. 
The reason is that AMS-w use WDS to establish multiple 
connections to neighbor RAPs and then has more paths 
to forward frames to the gateway AP. AMS-w can effec­
tively reduce the delay of data transmission via multiple 
connections relaying real-time frames forward to the 
gateway AP. Hence, the proposed scheme outperforms 
the distribution routing scheme. 
Figure 6 shows the D of the AMS-w and the distribu­
tion routing scheme. This figure intuitively shows that for 
all schemes under investigation, the D value decreases as 
the number of RAP increases. If the frames cannot arrive 
to the destination, they will be retransmitted. When the 
   
Abstract—Media streaming using P2P (peer to peer) technique 
has been implemented and widely deployed in the present time. In 
the traditional P2P media streaming, each peer, while 
downloading media contents, is at the same time simultaneously 
uploading the media contents to other peers, which will contribute 
to the overall available bandwidth. Traditionally before playing 
back the information, P2P media streaming requires to download 
and reassemble media content. However, time delay occurs when 
media contents were required to receive and reassemble from 
highly dynamic and autonomous mobile peers. Until now, delay 
free playback is still a challenge for peers to playback video 
instantly. Content Distributed Network (CDN) server provides 
user with original media contents and instant playback. Although, 
CDN seems to be satisfied with media streaming; the unique 
characteristics of media steaming, such as large file size, high 
bandwidth requirement, and sustained streaming duration can 
lead to limitation of services capacity. In this paper, we proposed a 
mixture of P2P and CDN system for media streaming in mobile 
environment, which can reduce both initial and average duration 
of playback and accommodating more users, therefore scalability 
has been improved. 
 
Index Terms—Content network distribution, multimedia 
streaming, peer-to-peer. 
 
I. INTRODUCTION 
eer-to-peer technology is considered as one of the most 
effective solution for handling large-scale applications. 
Based on its nature, the more peers are joined to the system, 
the more aggregated resources are contributed to the P2P 
network. The peers in the P2P network collaborated and 
redistributed the data for a larger number of receiver (or peers). 
The multimedia streaming is able to use the P2P technique to 
stream from single source media content to a large number of 
peers over the Internet at a low cost. In addition, the peer can 
start the playback before the entire media content has been 
downloaded, which means playback can start as soon as 
enough data is buffered. Thus, long startup times before 
playback was avoided, and storage space for the entire media 
content can be eliminate. Despite the shorter startup playback 
time, this peer still needs to wait for initial buffering time. 
Initial buffering time is the period of time from the beginning of 
a peer requested for playback, to the peer buffered with first 
segment of media content been playback. The length of initial 
 
 
buffering time varies on different parameters, such as the initial 
setup time between the peer and bootstrap peer. Yet, service 
loading and network congestion of the selected streaming peers 
can also be another factor. Furthermore, due to unpredictable 
arrival time from the other peers cause by network congestion 
and service loading, media content delivery may also be a 
challenge. The situation becomes worsen with the mobile peers, 
since the peers are more highly dynamic and autonomous than 
the static peers.  
Under the normal P2P multimedia streaming situation, each 
contents was typically split into several equal sizes segments or 
chunks. Spontaneously, peers connect with one another and 
requests for the next segments of media content  while waiting 
for playback media content, The peers can exchange their 
media content segments, and contribute with uploading 
bandwidth until each peers has received the requested segments 
[1, 2]. This approach is less suitable for the peers in mobile 
environment, because it does not take in counter the limited 
upload resources in radio or the availability of the mobile peers. 
The limited upload resource and the low availability of the 
mobiles peers might cause the mobile peer to receive delay 
segment or not receive any segment at all which leads to 
sporadic playback experience by users. 
CDN (Content Distribution Networks) has been used in 
delivering web data to clients with traditional client-server 
approaches. The origin server distributed data to replica servers 
located on the edges of the network, which redirected client 
users to a nearby sever. Placing replica servers to the edges of 
the network will decrease the origin server’s services loading, 
which lower delivery and network loading. With the 
multimedia streaming using CDN method, the end client users 
will experience less jitter, fewer network congestion, and 
improved streaming quality. However, the loading on one of 
the replica servers may be extremely high, because it has one or 
several popular media content. In conclusion, the scalability is 
restricted as the increasing of peers needed, which is similar to 
linear increase of deployment cost. 
To overcome the disadvantages of the P2P and CDN 
approaches, a mixture approach been proposed. This mixture 
approach does inherit advantages from both approaches [3, 4, 5, 
6, 7, and 8], however, the problem arose when dealing with the 
collaboration of P2P and CDN. In proposed approach, the P2P  
peers in media content source is now replaced with CDN 
replica servers, which contains all of the media contents and 
stream out to the mobile peers. These mobiles now only need to  
Mixed P2P-CDN System for Media Streaming in 
Mobile Environment 
Shiann-Tsong Sheu, Chi-Hao Huang 
Department of Communication Engineering, National Central University, Taiwan, R.O.C 
E-mail: zepp@ mwnl.ce.ncu.edu.tw 
P 
978-1-4577-9538-2/11/$26.00 ©2011 IEEE 657
 Nearest 
CDN Replica peer
CDN Replica peer
1
CDN Replica peer
2
Mobile peer
Request playback media content
Response list of replica peers 
contains media content
Send Control Packet
Response segment of media 
content
Send Control Packet
CDN Replica peer
3
Fail to transmit segment
Send Control Packet
Send Control Packet
Resend Control Packet
Resend Control Packet
Response segment of media content
Measure RTT
Measure RTT
Measure RTT
Measure RTT
Request 
playback
Collect 
RTT
First
Segment
Second
Segment
 
Fig. 4.  Example of how proposed system performs media streaming. 
 
when user made request for playback media content. For each 
segment of media content, the mobile peer selects a specific 
number of candidate peers. Choose the candidate peers store 
fewer segments of requested media, will reduce the heavy 
loading of service on the replica peer when requested media 
content is popular. After the selecting step, the mobile peer 
estimates round-trip time (RTT) between itself and candidate 
peers, then it sent out control packets to those candidate peers. 
The control packet contains three fields, first RTT between the 
candidate peers and the mobile peer, second Next Segment, and 
third Request Index. The Next Segment field in the control 
packet is used to indicate which segment to request, and is also 
used in all candidate peers to determine which segment to send. 
If the requested segment does not existed, the candidate peer 
sent broadcast messages to all CDN replica peers for updating 
media content lists. The Request Index field in control packet 
indicates which candidate peer needs to send out segment. The 
Request Index field was set to candidate peer with lowest RTT, 
while the mobile sent out the control packet for requesting 
segment at the first time. When the mobile peer failed to 
received segment from the candidate peer within timeout (twice 
length of RTT) time, it will eliminate failed candidate peer from 
candidate peers list, and sent out control packet to all of the 
other candidate peers with Request Index field set to candidate 
peer with lowest RTT. At the same time, the mobile peer also 
selects a new candidate peer from original list to replace failed 
candidate peer. The process continues until the entire replica 
peer has been selected as candidate peers, then playback 
timeout signal is sent to notify the mobile peer. 
  The candidate peer uses information from control 
packet to determine if it has opportunity to send segment to the 
mobile user. When the candidate peer is unable to send out 
segment before timeout, which means no more resource can be 
service to the mobile peer at the time. The mobile peer will 
resend control packet when failed to receive segment from the 
candidate peer within timeout time; the control packets are then 
sent to all the candidate peers expect the one that failed. Even 
though the actual RTT between the candidate peer and the 
mobile peer is different from what is reported in the control 
packet, as long as all candidate peers received the same 
information contained in the control packet, they all follow the 
same decision. 
Figure 4 represents an example of how the mobile peer 
playback media content using proposed system and peer 
schedule algorithm. First of all, mobile peer sends request for 
playing media content to the nearest CDN replica peer. 
Secondly, CDN replica peer responses with a list of CDN 
replica peers that contains media content segments. Then, RTT 
value between the mobile and CDN replica peers was measured 
before selecting the candidate peers of the first segment. In this 
example only two CDN replica peer were selected as the 
candidate peers. For the first segment of media content, the 
nearest CDN replica server and CDN replica server 1 are both 
selected as the candidate peers. The lowest RTT of the selected 
candidate peer was chosen; in this example as the nearest CDN 
replica peer. The mobile peer sends control packet to the 
candidate peers and waited until a timeout occur. If the first 
segment was able to receive within timeout, the process of 
requesting second segment starts immediately. Similar to the 
process of the first segment, the mobile peer sends out control 
packet to selected candidate peers. When CDN replica peer 1 
failed to transmit segment to the mobile peer within the timeout, 
the mobile peer replace failed replica peer with a CDN replica 
peer 4 as one of the selected candidates. Control packet was 
sent out to the selected candidate peers. The CDN replica peer 2 
was selected to transmit second segment to the mobile peer 
because it has the lowest RTT among the selected candidates. 
The rest of media content segments follow the same procedures 
as previously described. 
IV. PERFORMANCE EVALUATION 
We evaluate the performance of proposed mixed CDN-P2P 
system and peer schedule algorithm by simulation. Each mobile 
peer is assumed to have download bandwidth of 40 Mbps and 
the replica peer has bandwidth of 100 Mbps for transmit media 
content. The media content is MPEG video with 4000 second 
long and each replica peer can store 50 different media content. 
The system was deployed with 20 replica peers. The media 
content was divided into 10 segments and is placed onto replica 
peer using the round-robin placement. A Poisson process are 
used as model of request arrivals and the media content 
popularities are approximated by a Zipf-like distribution with 
α= 0.733[10]. The requests are equally generated from any 
mobile peer. The highest possible request arrival rate the 
system can support is λmax = Bbandwidth of replica peer * N number of 
replica peer / L total length of media content. The actual arrival rateλin our 
simulation is set as a percentage of λmax. 
 The performance measures in initial latency and playback 
timeout rate. The initial latency is the average time between a 
mobile peer makes a request and starting time of playback. The 
playback timeout rate is the ratio of the number of segments 
659
 1 
國科會補助專題研究計畫項下出席國際學術會議心得報告 
                                   日期：100 年 8 月 4 日 
                                 
報告內容應包括下列各項： 
一、參加會議經過 
研討會共分為四天，第一天有 IWCMC大會所辦的 Tutorials，第二天晚上有 Reception，
有助於認識來自世界各地的研究學者。此篇論文的報告日期是 7月 6日早上第一場，有
一個問題被提出，為什麼必須用到額外的 802.16e系統來協助 802.11p網路，原因是競爭
式的網路需透過一個集中式的系統來協助其做免競爭之排程。報告結束後與外國學者討
論，獲得一些不同的意見，非常寶貴。 
 
二、與會心得 
計畫編號 NSC99-2221-E-008-068 
計畫名稱 以 LTE/LTE-A為基礎之下世代網路建置技術之研究－子計畫一：以
LTE/LTE-A為基礎之室內網路建置技術研究(I) 
出國人員
姓名 許獻聰 
服務機構
及職稱 國立中央大學通訊工程系 
會議時間 
2011年 7月 4日
至 
2011年 7月 11日 
會議地點 
土耳其，伊斯坦堡 
會議名稱 
(中文) 2011 年 美國電子電機工程師協會 第七屆 國際無線通訊及行
動計算研討會 
(英文) 2011 IEEE 7th International Wireless Communications and Mobile 
Computing Conference 
發表論文
題目 
(中文) 一個適用於美國電子電機工程師協會 802.11 無線網狀網路自
動網狀方法 
(英文) An Automatic Mesh Scheme for IEEE 802.11 Wireless Mesh 
Networks 
 3 
----- Original Message -----  
From: "IWCMC2011-Wireless Nets" <jalel.ben-othman@prism.uvsq.fr> 
To: "Tseng Hsueh-Wen" <d92005@csie.ntu.edu.tw> 
Cc: <mguizani@ieee.org>; <jalel.ben-othman@prism.uvsq.fr>;  
<licheng.mun@gmail.com> 
Sent: Saturday, March 12, 2011 6:31 AM 
Subject: [IWCMC2011-Wireless Nets] Your paper 'An Automatic Mesh Scheme for 
 
IEEE 802.11 Wireless Mesh Networks' has been accepted 
 
 
Dear Dr. Tseng Hsueh-Wen: 
 
Congratulations! 
 
This is to inform you that your paper #1569391107 'An Automatic Mesh Scheme 
 
for IEEE 802.11 Wireless Mesh Networks' submitted to the IEEE IWCMC 2011 
to  
be held July 5-8, 2011, in Istanbul, Turkey, is accepted to be presented in 
 
the Conference and will be included in the conference proceedings and 
appear  
in the IEEE Xplore if you register by April 12, 2011. 
 
Your manuscript in PDF format and the IEEE Copyright Form duly signed and  
scanned (with the EDAS paper number listed on top) must be submitted 
through  
EDAS as well. The paper length is limited to 6 pages with your full  
registration. Two extra pages are allowed (if need be) with an extra charge 
 
of 100 Euros per page. 
 
In preparing your camera-ready manuscript, please make sure to incorporate  
all the reviewers' comments as that will be strictly monitored. In order to 
 
secure that your paper is included in the conference proceedings and appear 
 
in the IEEE Xplore, at least one of the authors MUST register by April 12,  
2011. Please pay special attention to the strip you MUST add at the bottom  
of the first page of the camera-ready version that will include the IEEE  
 5 
論文大綱 
A Wireless mesh networks (WMNs) is a promising technology that provides broadband 
wireless Internet access. It is one of the most important challenges to establish multiple 
connections among stations (STAs) in WMNs. In this paper, we propose a novel automatic 
mesh scheme (AMS) of layer 2 to form WMN in IEEE 802.11 wireless networks. AMS 
establishes multiple connections from a STA to neighbor STAs and determines proper routing 
path effectively, where three objectives are optimized, i.e., minimizing the average hop count, 
balancing traffic load and without modifying the communicating procedure in IEEE 802.11 
standard. AMS owns self-organization capacity, establishes multiple connections and 
determines routing path automatically. Our AMS only uses simple software functions without 
the cost of extra hardware overhead. Simulation results show that the proposed scheme 
significantly improves the system performance. Importantly, AMS that works very well has 
been implemented and exhaustively tested in a realistic test-bed. 
  
 7 
土耳其伊斯坦堡是非常熱門的旅遊地點，許多遠途參加者，有眾多不同國籍的參加
者。研討會舉行於 Bahçeşehir大學，硬體設備良好，人員規畫及活動舉辦事項等都應對
的很好。從會議中可以獲得了解各國的學者及學生在研究上的想法及創新，以提升自己
的視野，此外，透過互動討論來多認識不同國家的研究學者。 
 
三、考察參觀活動(無是項活動者省略) 
無考察活動 
 
四、建議 
此項補助對於研究生了解國際研究方向及學術發表活動有極大助益，希望可以持
續。 
 
五、攜回資料名稱及內容 
攜回研討會議程簡介與參與者研究文章之光碟一份。 
 
六、其他 
 
[IWCMC2011-Invited] Your paper 'Coordinated Scheduling Scheme for IEEE 
802.11p Wireless Vehicular Networks U sing Centralized Scheduling of IEEE 
802.l6e Wireless Metropolitan Area Networks' has been accepted 
help@edas-help.com 代表 IWCMC2011-Invited (mguizani@iecc.org) 
有{句.:. ;1 WJ: 2011 仟3月 12日上午 06:51:44
d文件者 Shiann-Tsong Sheu (stsheu@ce.ncu.eclu .tw) 
前!j{王 Ping-Jung Hsieh (zachary0302@hotmai1.com); Yen-Chieh Cheng (93523048@cc.ncu.eclu.tw); Jung-
Shyr Wu (jswu@ee.ncu.eclu.tw) 
Dear Prof. Shiann一Tsong Sheu : 
Cong r atu1ations! 
This is to 工nform you that your paper #156940454 7 ' Coordinated Schedu1ing Scheme 
for 工 EEE 802. 11p Wire1ess Veh icu1ar Networks Using Centra1ized Schedu1ing of 工EEE
802 .1 6e Wire1ess Metropo1itan Area Networks ' submitted to the IEEE IWCMC 2011 to 
be he1d Ju1y 5一日， 2011 , in Istanbu1 , Turkey , i s accepted to be presented in the 
Conference and wi11 be i nc1uded in the confe rence proceedings and appear in the 
IEEE Xp10re if you r e gister by April 1 2 , 201 1. 
Your manuscript i n PDF format and the IEEE Copyright Form du1y signed and scanned 
(with t he EDAS paper n umber 1isted on top) must be subm工 tt二ed through EDAS as wel1. 
The pape r 1ength is 1imited to 6 pages wi t h your f u11 registration . Two extra 
pages are a110wed (if need be) w工th an extra charge of 10 0 Euros per page . 
In preparing your camera-ready manuscript , p 1ease make s ure to incorporate a11 the 
reviewers' comments as that wi11 be strict1y monitored. 工n order to secure that 
your paper is inc1uded in the conference proceedings and appear in t he IEEE 
Xp10re , at leas t one o f the authors MUST register by Apri 1 12 , 2 0 1 1 . Please pay 
specia1 attent 工 on t o t he st rip you MUST add at the bottom of the first page of the 
camera - ready vers ion t hat wi11 inc工ude the IEEE 工 SBN number . Make sure to 
c arefu1 l y review the 、、 Manuscript Forma.t" s e ction for this specia1 information: 
http : //iw(~mc.org/fi] 位后 IC i3.TI1.e .r.(主 . h tm .l 
1. P1ease r egister at: ll t.t::p.:._L/iwcmcll . suv isoft.net 
Registrat ion instruc七 ions a nd rates are found : 
http :l/ 工甘cmc . org/ f.il(主 s/ registration.hoιL
2 . The IEEE camera-ready paper preparation and guide1ines a主e found : 
hLt u: í/ i叫cmc. o rg/ fi les /camerô. iltml
3 . Fi1工 out the IEEE Copyright Form (MUST fi1 1 out the h ighlighted parts) : 
h ttp: !/ iwcmc.org !f 、 le .s /I E: El';j i e eecopy.r i. ghtform . pdf 
4 . 工 t is VERY important to make sure that the Tit1e of your fina1 (came :r.'a-ready ) 
manusc ript submit t e d to EDAS is EXACTLY the same as the one 1isted in t h e IEE,E 
Copyright Form. Otherwise , you risk that your paper wi1l not be included in the 
工EEE Xp10re because you have not given the proper permission to IEEE to do so by 
1isting a dif ferent 'l' i t .l e in the IEEE Copyright E'o rm. 
For more information , check the conference webs ite : http://iwcm亡: .or9
For any questions , p 1ease fee1 free to contact : info@ 斗wcmc. org
Looking fon.ra rd to meet i ng you i l1工 stanbul ， 'l'urkey . 
Re gards , 
IWCMC2011 工nvi七 ed Symp. Chair 
Review COlTh'1\ents: 
品品品且 Review 1 ======= 
99 年度專題研究計畫研究成果彙整表 
計畫主持人：許獻聰 計畫編號：99-2221-E-008-068- 
計畫名稱：以 LTE/LTE-A 為基礎之下世代網路建置技術之研究--子計畫一：以 LTE/LTE-A 為基礎之室
內網路建置技術研究(I) 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 3 3 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 4 1 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
