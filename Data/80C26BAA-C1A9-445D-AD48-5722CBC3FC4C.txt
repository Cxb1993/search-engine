 
 
一、 中英文摘要 
中文摘要 
合作式通訊（cooperative communications），能夠透過一個或多個轉送節點（relay node）
的合作，避免點對點的直接傳輸模式中因為通道（channel）品質不佳，而造成傳送失敗，
有助於提升整體無線網路的傳輸效能。合作式通訊的主要概念，為利用如時間空間等的多
樣性（diversity）特性，透過節點之間的合作傳送，來改進無線傳輸的效能，因此有助於提
升無線網路的傳輸品質。 
近年來，網路資訊服務已從單純的文字內容，轉變成視訊串流或是VoIP 等多媒體資訊
內容，例如著名的影音分享網站youtube 與網路電話skype。為了使得此類應用能有效地實
現在無線網路中，需要更完善的服務品質保證機制來達到適當的品質，而對於網路即時系
統來而言，服務品質保證的需求也同等重要。本計畫的研究重點，即為探討利用合作式通
訊有助改善網路傳輸與效能的特性，設計具有服務品質保證考量的無線網路系統的相關機
制，其中議題主要包含（1）在傳輸媒介層（MAC）的合作節點選擇與封包排程方法、（2）
具服務品質保證之節點選擇方法。 
 
關鍵詞：合作式通訊、合作式網路、服務品質保證。 
 
 
二、 報告內容 
（ㄧ）、研究目的 
近年來，網路資訊服務已從單純的文字內容，轉變成視訊串流或是 VoIP 等多媒體資訊
內容，例如著名的影音分享網站 YouTube 與網路電話 Skype。使用者資訊流量的成長速度
大於網路頻寬資源的擴充速率，使得網際網路中不時出現了資訊流壅塞問題。雖然網際網
路中的資料傳輸服務建立在封包交換（packet-switched）技術上，利用網路的剩餘頻寬會比
線路交換（circuit-switched）的網路更有效率，然而在封包交換網路中不會建立專屬的通道，
傳輸的品質不能有效地確保。 
影音串流等多媒體服務對於網路服務品質如頻寬及延遲的要求，比傳統的文字服務更
加強烈。因此，如何在有限的網路頻寬中，達到使用者滿意的網路服務品質，是相當重要
的議題。如果使用者在觀看影音串流時，若因為網路雍塞而造成影像或聲音斷斷續續，會
降低使用者的興致，於是需要更完善的服務品質保證機制來達到適當的品質。另一類需要
有服務品質要求的應用，是連結到網路上的即時系統，例如:線上竸標或下單系統，這些服
務可能被保證的固定傳輸量以確保沒有封包延遲，若是網路提供的頻寬不足或是延遲超過
一定的時間，此類服務可能會失效，所以對於即時系統來說提供服務品質的保證也是很重
要的。 
服務品質保證機制的目的，是為了使得在有限的頻寬下降低延遲時間，給使用者更好
的服務品質，藉此減緩對網路頻寬的需求，也能降低佈建網路的成本。現行服務品質保證
機制，利用不同的技術達到控制網路傳輸延遲以達到即時性的服務，或是對不同應用的需
求，提供專屬的頻寬以達到有效的服務品質。一般而言，服務品質的保證可以分為下列四
類： 
（1）、保證從發送端傳給接收端的延遲在一定的時間內； 
（2）、保證傳送端到接收端的傳輸速率； 
（3）、保證在傳輸過程中封包成功送達的比率； 
（4）、保證傳送端到接收端的時機誤差在一定的範圍內。 
（二）、文獻與背景探討 
I. 合作式通訊 
 
隨著無線傳輸技術的發展，無線接取網路（wireless access network）的傳輸速度也越來
越快，而其中傳輸速度能夠提升的主要原因，為在實體層所使用的編碼（coding）或是多
工（multiplexing）存取技術有了創新的改進和突破。近來的許多研究工作顯示，在無線網
路下，傳送端（source）藉由一個或多個轉送節點（relay node）來傳送／轉送資料給目的
端（destination），是有助於提升整體網路傳輸效能的。因為在無線網路中，點對點的直接
傳輸模式有可能會因為通道（channel）品質不佳而造成傳送失敗，所以透過轉送節點，能
夠提升傳輸的成功率。而透過一個或多個轉送節點來傳送資料的傳輸方式，我們稱為合作
式通訊（cooperative communications），如 圖一所示。 
 
 
在使用頻率多樣性的技術仍然有一些缺點。在使用頻率多樣性的過程中，訊號雖然透
過不同的載波頻率傳送出去，但是這一些訊號所走的路徑仍然是一樣的。所以如果路徑上
的通道狀況差的話，訊號很容易就受到影響，再接收端這邊也會連帶受到影響。所以在空
間多樣性的方法中，讓訊號走不同的路徑到達接收端，所以在接收端會有多個接收天線。
因為不同的天線所接收到訊號不同，也就是說接收到的訊號都是走不同路徑而來的。所以
在接收端將這一些訊號合成可以得到較大的增益。走通道狀態不好的訊號可以透過走通道
狀態好的訊號來相互不足的地方。所以便可以達到空間上的多樣性。如圖四。 
B. MIMO [2, 3] 
MIMO 系統，利用多天線來抑制通道衰落。傳統的通訊系統是單輸入單輸出（single input 
single output, SISO）。而 MIMO 基於傳送分集和接收分集分成多輸入單輸出（single input 
multiple output, MISO）方式、單輸入多輸出（single input multiple output, SIMO）的方式，
如      圖五。 
 
圖四、空間多樣性示意圖 
通道容量（capacity）隨著天線數量的增大而線性增大。可以利用 MIMO 系統倍數地提
高無線通道容量，在不增加頻寬和天線發送功率的情況下，頻譜利用率可以倍數地提高。
容量提高主要來自於兩種效益：第一種效益為增加通道容量（channel capacity），只有當傳
送端與接收端都使用兩根天線以上可獲得，因為每根傳送出去的資料是各自獨立，所以接
收天線數目不能小於傳送天線數目。第二種效益為空間多樣性增益（space diversity gain），
不會增加通道的平均容量，而是增加達到某一容量的機率，就是提高通道的可靠性來降低
錯誤機率代表的技術為 STTC（space time trellis code）與空時區塊編碼（space-time block code, 
STBC）。 
  
      圖五、多天線定義                圖六、空間多工與空間分集的差別 
MIMO 的核心概念為利用多根發射天線與多根接收天線所提供之空間自由度提升傳
輸速率與改善通訊品質；MIMO 主要有三種形式，如圖六： 
 
 
的資料後，便直接將所接收到的資料增幅（amplify）後直接轉送到節點 C。增幅的好處在
於可以讓節點 C 接收到訊號品質較好的資料以利資料的解析，但是此作法不能確保轉送節
點 B 所傳送過去的資料正確性。 
 
圖八、合作式通訊模型 
（3）Coded Cooperation: 在這一個模式中，轉送節點 B 在接收完節點 A 所傳送的資料後，
會將所收到的資料解碼出來，然後在依照自己與節點 C 之間的通道狀況來挑選一個合適的
編碼方式，然後再將此接收到的資料用這一個所挑選出來的編碼將之重新編碼（re-encoded）
後傳送到節點 C。如此作法除了擁有（1）所有的優點外，並且可以在提高傳送資料的穩定
性，因為重新編碼的方式是依照當時的通道狀況所挑選出來，可以更適應在這一通道上的
狀況。以上三種模式屬（2）最為簡單，（3）最為複雜，但以提昇系統效能考量的話選擇（3）
是最好的方式，但是相對所付出的系統成本較高。 
B. 合作式通訊之媒體存取層（MAC）技術 
在 MAC 層所探討的合作式通訊是建構在基本實體層資訊皆為可知的假設之上，在 MAC
層所探討的合作式通訊大多為 MAC/PHY cross-layer 的設計。由實體層提供關於目前通道
（channel）的相關訊息，例如通道訊號強弱品質，可做為挑選所合作節點的參考依據，因
此透過跨層次的設計可以讓實體層之上的網路設計更完善。而在在 MAC 層主要議題，除
了 MAC 協定本身的設計外，合作節點選擇（partner selection）和封包排程（packet scheduling）
等都是相當重要的研究議題。 
為了使用合作式通訊，傳送節點必須要從周遭的鄰居中挑選出適合的轉送節點。而挑選
的條件會依照本身的應用而有所不同，例如通道品質或傳輸速率等。而當選擇進行 Virtual 
MIMO 模式時，額外要考慮傳送節點傳送資料需要事先傳送到其合作節點的封包排程議
題，這當中還包含了合作節點間的同步問題。MAC 層的相關研究議題，為本計畫最主要的
研究重點，除了將涵蓋上述的兩個議題外，更額外考量了合作式通訊中，提供服務品質保
證的機制設計。此一部份，將在研究方法中有更詳盡的說明。 
（三）、研究方法 
本計畫為利用合作式網路的特性，設計相關的機制以達到或改善網路的服務品質保
證。所考慮的環境，為一單一技術具基地台之結構式（Infrastructural）無線網路系統，並
於其上設計一個具有合作式通訊概念之 MAC 層相關協定，此一部份主要包含了合作節點
選擇（Partner selection）及封包排程（Packet scheduling）兩大議題。 
本節中就考量 QoS 需求之合作式網路所提出之 MAC 相關之合作節點選擇機制，亦以
（A）集中式及（B）分散式作法分述之。 
A、考量 QoS 要求之集中式合作式網路 
在開始合作前，所必須要解決的問題是：1.如何決定合作夥伴是誰（partner selection）
 
 
2. 發送端節點到基地台的通道 狀況很差，因此降低傳輸範圍，改傳給伙伴，讓伙伴幫忙
傳遞給基地台。 
3. 若發送端節點有較高的QoS 需求，但是目前到基地台的通道無法滿足這個QoS 需求，
則發送端節點可以利用封包排程，將部分封包傳給伙伴幫忙傳遞，使得發送端節點可以
有效利用伙伴的剩餘頻寬，以達到QoS 需求。 
以上是上傳的合作，下載的合作亦很類似（如圖九）： 
1. 基地台傳送資料給發送端節點，則伙伴可以決定當他聽到發送端節點的資料時，是否要
解碼並傳遞給發送端節點。 
2. 發送端節點到基地台的通道 狀況很差，基地台只需要把資料傳給伙伴讓他幫忙傳遞就
好。 
3. 當發送端節點採用封包排程把部分資料交由伙伴幫忙傳遞，基地台也可根據下載 QoS 
需求決定是否進行分流，利用封包排程，將同樣的資料流，分開傳給發送端節點與伙伴，
再由伙伴傳遞給發送端節點 
 
圖九、上傳合作模式 
 提出的解決方法 
本計畫設計節點選擇群組及伙伴的策略時將考慮以下因素： 
 節點與基地台的通道狀況 
 節點與其他節點的通道狀況 
 QoS 需求 
 網路拓樸 
 節點位置 
 有無 RTS/CTS 機制 
 選擇伙伴的模式，可以是事先決定好，或者是傳輸時才決定 
 如果有 RTS/CTS 機制，有以下幾種情形： 
1 當 BS 沒有收到 S 發出的 RTS，可以有以下策略： 
1.1 S 重發 RTS 直到成功 
1.2 由伙伴幫忙傳送 RTS，並且幫忙傳送 CTS 
2 當 BS 有收到 S 發出的 RTS，但 S 沒有收到 BS 發出的 CTS，可以有以下策略： 
2.1 重發 RTS 直到成功 
2.2 S 重發 RTS 時，伙伴回覆 CTS 給 S 
2.3 當伙伴收到 RTS 時，就發送 HTS(Help-ready To Send)給 S 及 BS，此時又有兩
個子情景： 
2.3.1 S 收到來自伙伴的 HTS 及來自 BS 的 CTS，則伙伴也收到 CTS，代表伙
伴可以合作傳輸資料。 
 
 
若是 S 要自己送，則 MAC 標頭的部分格式為： 
Source MAC Address Destination MAC Address Helper MAC Address 
S’s MAC Address BS’s MAC Address 0x000000000000 
若是 S 要 R 幫忙轉送，則 MAC 標頭的部分格式為： 
Source MAC Address Destination MAC Address Helper MAC Address 
S’s MAC Address R’s MAC Address R’s MAC Address 
因為 Destination MAC Address 與 Helper MAC Address 都一樣是 R’s MAC Address，代表這
個封包是 S 要 R 幫忙轉送到 BS，而並非是給 R 的封包，所以 R 會知道要幫忙轉送。 
R 收到後，把此封包的 MAC 標頭改換為下列格式便可以正常傳輸 
Source MAC Address Destination MAC Address Helper MAC Address 
R’s MAC Address BS’s MAC Address 0x000000000000 
如果以整體為考量設計的話，我們在此考慮一個具有多天線的存取節點（AP），而其他網
路節點皆為單一天線，而其所涵蓋的網路節點一起共享此 AP 的所有天線，如圖十一。因
為在 802.11 的標準中，共有 11 個頻道可以存取而其中有三個頻道是完全不互相干擾的，所
以我們在此假設此一 AP 具有三支天線。定時廣播 beacon，讓底下的節點可以知道與 AP
間的通訊品質，並進而決定適合的傳輸速率。當一個新的節點進入這個網路後，AP 會配置
一個節點最少的頻道給它，這樣做的目的是為了達到負載的平衡。 
 
圖十一、多天線存取節點架構圖 
當傳送節點要跟 AP 建立一個連線時，會先發送一個 Connection Request (CR)訊息，如
圖十二（a），包含了連線 ID、與 AP 間的傳輸速率、要求的頻寬。收到 CR 的鄰居，同時
可以偵測到與傳送節點目前的通訊品質，進而決定連線速率，因此可以判斷透過合作式傳
輸是否能提高效能，若是能帶來好處，就會在一個隨機退讓(random backoff)的機制下，回
應一個 Partner Ready (PR)訊息，如圖十二（b），而且會讓與 AP 間傳輸速率為 11Mbps 的節
點有較高的優先權傳送 PR。若有多個鄰居回應 PR，則傳送節點選取一個最佳的鄰居作為
他的伙伴；反之，若沒有任何鄰居回應 PR，且傳送節點不是任何人的伙伴時，則會切換到
