 (附件 2) 
多重頻道多重介面的模擬的論文 
 (附件 3) 
多重頻道多重介面的模擬程式 
實做機會路由骨幹網路 
 
中文關鍵詞： 無線網路、骨幹網路、機會路由、標籤交換、頻道分配 
英 文 摘 要 ： This project proposed an architecture of wireless 
mesh backbone networks to provide connections between 
homogeneous and heterogenous networks. In order to 
achieve this goal, this project starts from some 
researches of wireless mesh networks. 
In the wireless backbone network, we use 
opportunistic routing, label switching and with 
multi-channel multi-interface  to provide high-speed 
routing and switching. Opportunistic routing is  a 
recently proposed technology, capable of using the 
wireless network properties, and significantly 
increasing the performance of the wireless router up 
to 100% (compared with the traditional route). Label 
switching not only provides users with more functions 
(such as VPN), but also accelerates the speed of the 
router handle packets. In addition, the use of multi-
channel multi-interface greatly increases the 
capacity of the backbone network. 
This project established a wireless backbone network 
architecture with the following important features: 
A. Connect to heterogeneous network 
B. High-speed routing and switching  
C. In consideration of multi-channel multi-interface 
(multi-channel multi-interface) 
D. Mobility  
E. Quality of service guarantee 
F. Self-configuration and self-recovery  
 
To comply with the above features, the project 
proposed wireless backbone network architecture, 
denoted as Wireless Smart Label Switching 
Architecture ( WSLS). The research results for each 
are summarized as follows: 
First year 
行政院國家科學委員會補助專題研究計畫 
■成果報告   □期中進度報告 
 
無線骨幹網路架構之研究與設計 
The study and design of the architecture of wireless mesh 
backbone networks 
 
 
計畫類別：■ 個別型計畫  □ 整合型計畫99-2221-E-030-010 
計畫編號：NSC 99－2221－E－030－010－ 
執行期間：98 年 8月 1日至  99年 10月 31日 
 
計畫主持人：劉惠英 
共同主持人： 
計畫參與人員：許哲榮、何文靖、許博文  
 
 
成果報告類型(依經費核定清單規定繳交)： □精簡報告  ■完整報告 
 
本成果報告包括以下應繳交之附件： 
□赴國外出差或研習心得報告一份 
□赴大陸地區出差或研習心得報告一份 
■出席國際學術會議心得報告及發表之論文各一份 
□國際合作研究計畫國外研究報告書一份 
 
處理方式：除產學合作研究計畫、提升產業技術及人才培育研究計畫、
列管計畫及下列情形者外，得立即公開查詢 
          □涉及專利或其他智慧財產權，□一年□二年後可公開查詢 
          
執行單位： 輔仁大學電機工程系 
 
中   華   民   國   100  年   1 月   31  日
 2 
的WiFly，在在顯示出現代人對網路的需求，
希望能夠達到隨時隨地都有網路可以用的目
標。因此，本計畫將進行無線骨幹網路相關
之研究，以期能提出高效率與容易架設的共
用骨幹網路，讓人們無論何時何處都可以透
過該無線骨幹網路取得網路資源。 
1.2 研究目的 
本計畫主要希望提出一個高效率且容易
架設之無線寬頻骨幹網路，增加網路覆蓋範
圍，以期能達到隨時都能上網的便利性。為
了達到此一目的，本計畫將進行有關於無線
網狀網路(wireless mesh network)相關之研究，
期望提出以無線網狀網路做為骨幹並加上機
會路由(opportunistic routing)與標籤交換(label 
switching)為概念之路由架構，且能讓各種不
同的實體網路能夠透過該共用的骨幹網路取
得相互或是對外的連線，加上無線網狀網路
可以自動設定自動修復的特色，該架構可以
讓網路的架設變的更簡單便利，因此可以很
輕鬆的增加網路的涵蓋範圍並促進網路之普
及，達到處處皆可存取網路資源的目的。 
 
圖一、 無線骨幹網路示意圖 
 
本計畫期望所提出的無線骨幹網路架構
能為各種不同的實體無線網路共用，概念架
構如上圖一所示。該無線骨幹網路架構將具
備下列幾項重要的功能與特性: 
A. 連結異質性(heterogeneous)網路： 
無線網路的實體網路並不只有一
種，該骨幹網路要為多種不同實體
網路所共用。 
B. 使用機會路由(opportunistic routing)： 
機會路由是近年來被提出，能有效
利用無線網路特性以提升效能的概
念。在無線網路的通訊中，無論一
對一，或是一對多，在實際上都一
樣是使用廣播(one-hop broadcast)的
方式。一般而言，此一特性只會造
成干擾而降低效率，機會路由則是
能善用此特性以提升效能的新概
念。 
C. 考慮多重頻道多重介面(multi-channel 
multi-interface)： 
無線網路中有多個頻道可以使用，
不過早期的設備只有備配一個介
面，無法有效同時利用多個通道。
近年來開始有研究考慮在設備上安
裝多個介面，善用多通道以提升效
率，不過也讓問題變的更複雜。 
D. 使用標籤交換(label switching)： 
使用標籤交換能讓無線骨幹提供高
速交換，以提升路由器的運作效率。 
1.3 本年度計畫狀態 
本年度計畫以多頻道與實做為主，模擬
以機會路由為主的骨幹在多頻道下的效果，
以及使用之前提economy實做使用機會路由
的骨幹網路。很遺憾，部分多頻道的模擬與
之前的理論不相符，而實做結果不如模擬預
期。多頻道的模擬在第3小節，第4小節說明
實作方式，第5小節是實做結果，第6與第7小
節分別說明實做中的發現與失敗的原因。 
 
2 文獻探討 
2.1 機會路由survey(詳見附件survey) 
2.1.1 機會路由基礎介紹 
早期在無線網路中，路由的概念如同有線
網路一般，封包的傳送路徑是固定的。如
[1,2]，這些研究分別採用不同的評量標準來選
擇單一最佳路徑，然而，在無線網路中，封
 4 
幾乎沒有overhead，但是需要較強大的計算能
力，因此使用上有不少限制。 
候選節點選拔在挑出適當的候選鄰近節
點並排序，一般而言最常被使用的是ETX[10]
與ETT[11]，不過有研究發現傳統的ETX不適
合機會路由[12]，因此後來有EAX[13]與
EATT[14]。由於有研究指出候選節點的數量
與增加的效能不成比例[6]，因此，除了排序
之外，還會透過虛擬連結強度(virtual link 
strength)[6]，或是連結度(connectivity)[6][9]來限
制候選節點的數量。 
2.1.3 機會路由通訊協定 
ExOR[5]使用timer做為協調機制，不過並
無法確認協調結果，也就是說仍無法避免重
複封包傳送的問題，此外，ExOR使用source 
routing，使得overhead隨著路徑長度增加，同
時也會增加協調機制的overhead，最後，ExOR
雖然有實測結果驗證其效能，但是只有一個
資料流的實測結果，如果同時有多個資料
流，對效能的影響則沒有交代。在ExOR之後
則是有SOAR[6]，SOAR的資料來源端會挑選
一個預設的路徑並附加於header中，當封包轉
送時，轉送的節點會動態自己鄰近且可以聽
到彼此的節點，因此SOAR可以透過候選節點
選拔降低重覆封包的狀態。 
MORE[7]使用network coding，不過仍是會
有多餘封包的現象，譬如接收端只需要10個
編碼後的封包就可以解碼，但仍可能收到10
個以上的編碼封包，雖然沒有重複卻一樣是
多餘的而會影響效能，此外同時也與ExOR相
同，使用source routing，並且沒有多資料流的
相關結果(最多只到4個flow)。MORE使用
network coding的做法使得傳書上必須以一個
batch為單位來編碼 /解碼，因此後續有
CodeOR[15]與SlideOR[16]解決了以batch為單
位的問題。此外，使用network coding會產生多
餘 封 包 的 問 題 ， CCACK[17] 使 用 NSB 
acknowledgement的方式，使得節點可以知道鄰
近節點的狀態，因此可以降低重複的封包。 
Economy[9]使用token為協調機制，因此可
以大幅降低機會路由當中重複封包的問題，
而且該研究結果亦顯示，從來源端發送至目
的端的封包，沿途所需要的轉送次數比傳統
路由(traditional routing)所挑出的最短路徑的
hop count還要短。 
其他的則還有GOR[18,19,20]相較於前兩
者比較特別，使用地理路由 (geographic 
routing)，無須維護路由相關資料，overhead也
較低，更多相關survey可參考研究成果[21]。 
 
3 多重頻道多重介面的模擬 
為測試以機會路由為主的骨幹網路在多
重頻道多重介面下的效能，本計畫模擬主要
的通訊協定ExOR、MORE與Economy。將之前
所完成的模擬程式從single channel移植到
multi-channel。(多重頻道多重介面的模擬的論
文請參考附件3) 
 
圖四、 多重頻道多重介面的模擬結果 
從模擬結果可以得知，只要採用正確的協
定機會路由仍可以在多重頻道多重介面的狀
況下正常運作，不過其增幅並沒有傳統路由
來的大，也就是說當環境從單通道單界面變
為雙通道雙介面時，機會路由並沒辦法如傳
統路由一樣，獲得兩倍的輸出。此外，模擬
還顯示在三通道雙介面時，機會路由的效果
反而會下降。其造成原因仍然不明。 
 
4 骨幹網路實做 
 6 
 
圖七、 實測結果TCP throughput 
 
 
圖八、 模擬結果: 
token delay對throughput的影響 
 
使用open80211s測試的結果約在5Mbps左
右，與economy的500kbps有著不小的差距。TCP 
throughput由於有flow control的關係，token週期
越長，TCP餵的封包就越少，throughput也降
低。UDP雖然沒有flow control的限制，結果卻
也沒多少，奇怪的是drop rate的部分，依照
economy的log檔，所有的frame都已經送達，不
應該有loss，而且economy所處理的frame總數
比產生出來的UDP segment量還少，表示中間
有封包在別層被丟棄了。此外圖八模擬中的
token delay對throughput有相當大的影響，可是
實測上幾乎沒有差異，反倒是每次收到token
最多能送出多少個封包(MAX_TX)有著顯著
的影響。為什麼有這樣異常的結果仍在研究
中。 
 
6 實做考量與問題 
本節列出在實做過程中的新發現，主要
是之前在模擬時所沒有考量過或是意料之外
的問題。 
 
6.1 機會路由 
A. 適合使用機會路由的frame 
因為機會路由適合處理遠距且大量的大
封包，所以小封包、廣播封包以及近距離
(one-hop)封包應該交由原本傳統路由處理。以
arp為例，arp request是broadcast，arp reply則是
小封包，若連arp都使用機會路由，那將會大
大增加啟始網路的latency。不過若一個packet
因 為 fragmentation 分 為 一大一小的兩個
frame，此狀況該如何處理目前沒有結論。 
B. 流量控制 
由於機會路由會累積多個封包一次傳送
的關係，流量控制會使得上層減少封包傳
送，導致較差的throughput。透過觀察UDP與
TCP的結果差異可以發現這個問題，這個問題
目前仍無法解決 
C. 至目的地端的Metric tree 
Economy與機會路由在動態選擇路徑
時，除了自身的cost之外，還需要知道鄰近節
點至目的端節點的cost，因此所有節點至目的
地端的cost tree需要事前建立，或是使用來源
路由(source routing)。可以使用80211s當中的
rootmode來建立cost tree，不過若mesh網路中有
N個節點，就需要分別建立N個以不同目的端
為root的cost tree，所維護的花費相當可觀。因
此機會路由比較適用於變動較小的網路(如骨
幹)，或是負載其中在某些節點的網路(如節點
!portal節點!internet，只有前往portal節點的
資料流使用機會路由)。 
 
6.2 Setup & coding 
A. 在mesh模式下的Broadcast frame 
Economy與機會路由需要使用廣播，因此
在接收端位址(receiver address, RA)會更改為
 8 
包)可能顯示在linux kernel中有其他部分會控
制流量，需要再追蹤kernel以確定發生原因。 
 
8 結果與討論 
本年度計畫以機會路由的多頻道模擬與
實做為主，不過結果多半不如預期。部分多
頻道的模擬與之前的理論不相符，而實做結
果則不如模擬預期(實做失敗原因已於第7節
討論)。不過今年度仍有以下的成果貢獻: 
• 機會路由的調查期刊論文 
(附件2) 
• 多重頻道多重介面的模擬的論文 
(附件3) 
• 多重頻道多重介面的模擬程式 
• 實做機會路由骨幹網路 
除此之外，實做時使用開發平台的經驗
與trace原始碼的結果，可以讓未來的學生擁有
平價的無線網路通訊協定開發平台(只需要
NT1000左右的AP)，亦可用於課堂教學上。而
且實際機會路由的新發現(第6節)對於未來設
計及採用機會路由仍有相當的助益。 
參考文獻 
[1] D. S. J. De Couto, D. Aguayo, J. Bicket, and R. 
Morris, "A high-throughput path metric for multi-hop 
wireless routing," in Proceeding of MOBICOM, 2003. 
[2] J. Bicket, D. Aguayo, S. Biswas, and R. Morris, 
"Architecture and evaluation of an unplanned 802.11b 
mesh network," in Proceeding of MOBICOM, 2005. 
[3] L. Chun-Pong, et al., "An Analysis of Opportunistic 
Routing in Wireless Mesh Network," in Proceedings of 
the IEEE International Conference on Communications 
(ICC), Beijing, China, 19-23 May, 2008. 
[4] K. Zeng, et al., "Capacity of opportunistic routing in 
multi-rate and multi-hop wireless networks," IEEE 
Transactions on Wireless Communications, vol. 7, no. 
12, pp. 5118-5128, 2008. 
[5] S. Biswas and R. Morris, "ExOR: opportunistic 
multi-hop routing for wireless networks," in Proceedings 
of ACM SIGCOMM, Philadelphia, Pennsylvania, USA, 
August 21-26, 2005. 
[6] E. Rozner, et al., "SOAR: Simple Opportunistic 
Adaptive Routing Protocol for Wireless Mesh 
Networks," IEEE Transactions on Mobile Computing, 
vol. 8, no. 12, pp. 1622-1635, 2009. 
[7] S. Chachulski, et al., "Trading structure for 
randomness in wireless opportunistic routing," in 
Proceeedings of ACM SIGCOMM, Kyoto, Japan, 
August 27-31, 2007. 
[8] K. Zeng, et al., "Opportunistic Routing in Multi-radio 
Multi-channel Multi-hop Wireless Networks," in 
Proceedings IEEE Conference on Computer 
Communications (INFOCOM), San Diego, CA, USA, 
March 14-19, 2010. 
[9] C.-J. Hsu, et al., "Economy: a duplicate free 
Opportunistic Routing," in Proceedings of the 6th 
International Conference on Mobile Technology, 
Application and Systems, Nice, France, September 2-4, 
2009. 
[10] D. S. J. D. Couto, et al., "A high-throughput path 
metric for multi-hop wireless routing," in Proceedings of 
the 9th Annual International Conference on Mobile 
Computing and Networking (MobiCom), San Diego, 
CA, USA, September 14-19, 2003. 
[11] R. Draves, et al., "Routing in multi-radio, multi-hop 
wireless mesh networks," in Proceedings of the 10th 
Annual International Conference on Mobile Computing 
and Networking (MobiCom), Philadelphia, PA, USA, 
September 26 - October 1, 2004. 
[12] L. Mingming and W. Jie, "Opportunistic Routing 
Algebra and its Applications," in Proceedings of the 
IEEE Conference on Computer Communications 
(INFOCOM), Rio de Janeiro, Brazil, April 19-25, 2009. 
[13] Z. Zifei and S. Nelakuditi, "On the Efficacy of 
Opportunistic Routing," in Proceedings of the 4th 
Annual IEEE Communications Society Conference on 
Sensor, Mesh and Ad Hoc Communications and 
Networks (SECON), San Diego, CA, USA, June 18-21, 
2007. 
[14] R. Laufer, et al., "Multirate Anypath Routing in 
Wireless Mesh Networks," in Proceedings of the IEEE 
Conference on Computer Communications (INFOCOM), 
Rio de Janeiro, Brazil, April 19-15, 2009. 
[15] L. Yunfeng, et al., "CodeOR: Opportunistic routing 
in wireless mesh networks with segmented network 
coding," in Proceedings of the IEEE International 
Conference on Network Protocols (ICNP), Orlando, FL, 
USA, October 19-22, 2008. 
[16] L. Yunfeng, et al., "SlideOR: Online Opportunistic 
Network Coding in Wireless Mesh Networks," in 
Proceedings of the IEEE Conference on Computer 
Communications (INFOCOM), San Diego, CA, USA, 
March 15-19, 2010. 
[17] D. Koutsonikolas, et al., "CCACK: Efficient 
Network Coding Based Opportunistic Routing Through 
Cumulative Coded Acknowledgments," in Proceedings 
of the IEEE Conference on Computer Communications 
(INFOCOM), San Diego, CA, USA, March 15-19, 
2010. 
[18] K. Zeng, et al., "On throughput efficiency of 
geographic opportunistic routing in multihop wireless 
networks," in Proceedings of the 4th International 
Conference on Heterogeneous Networking for Quality, 
Reliability, Security, and Robustness (QShine), 
Economy: A Duplicate Free Opportunistic Routing 
Che-Jung Hsu 
Fu-Jen Catholic University 
496598069@mail.fju.edu.tw 
Huey-Ing Liu 
Fu-Jen Catholic University 
hiliu@mail.fju.edu.tw 
Winston Seah 
Institute for Infocomm Research 
winston@i2r.a-star.edu.sg 
 
 
ABSTRACT 
This paper proposes ECONOMY, an Opportunistic Routing (OR) 
protocol that is free from duplicate transmission. OR utilizes 
overheard packets and takes multiple routes into consideration 
concurrently. It has been shown that OR outperforms traditional 
routing by close to 100% in term of throughput; however, 
duplicate transmissions may occur as relays cannot hear one  
another, and it consequently degrades the performance of OR. 
ECONOMY uses token passing along a path that relays can hear 
one another to eliminate duplicate transmission. When a token 
arrives, the relay is allowed to transmit unacknowledged packets 
according to the acknowledgement information within the 
received token. Therefore, ECONOMY can prevent duplicate 
transmission while keeping the advantages of OR. Simulation 
results show that while previous OR schemes suffer from 
duplicate transmission, ECONOMY can exploit the potential of 
OR and perform up to 100% better than traditional routing. 
Categories and Subject Descriptors 
C.2.2 [Computer-Communication Networks]: Network 
Protocols – routing protocols; C.2.1 [Computer-Communication 
Networks]: Network Architecture and Design – wireless 
communication 
General Terms 
Algorithms, Design, Performance 
Keywords 
Wireless networks, Opportunistic Routing 
1. INTRODUCTION 
In recent years, wireless communication has become an important 
part of our daily life. Despite extensive research efforts and the 
development of numerous wireless network applications, the 
potential of wireless medium has not been fully exploited. A 
special attribute of wireless medium is that each transmission is a 
broadcast to all neighbors within transmission range; and such a 
broadcast leads to signal interference. However, opportunistic 
routing (denoted as OR) can utilize this broadcast attribute to 
improve link reliability and system throughput by routing packets 
through multiple routes dynamically. OR can be applied to all 
kinds of wireless networks, such as ad hoc, mesh, or sensor 
networks, as long as omni-directional antennas are used. 
Moreover, both theoretical [1,2] analysis and experimental [4,8] 
results have shown that OR outperforms traditional routing by 
around 100% in term of throughput. 
Though OR is powerful, one outstanding issue remains - duplicate 
transmission. Duplicate transmissions degrades performance of 
OR when relays cannot hear one another; and the issue or the 
scenario has not been discussed nor solved in previous works 
(such as ExOR [3,4], GOR [5,6,7], MORE [8]). This paper shows 
the impact of duplicate transmissions and proposes a solution that 
can overcome this issue so as to exploit the potential of OR. 
1.1 Basic concepts of OR 
Opportunistic Routing is a concept that utilizes the overhearing of 
packets so that they are forwarded through multiple routes where 
possible. Consider the example as shown in Fig. 1. Two routes are 
available from S to D; however, OR does not pick either 
SÆXÆD or SÆYÆD. The decision is made dynamically based 
on which packet(s) the relays (X and Y in the example) have 
received. In the example, OR may work as follows: S broadcasts 
five packets; X receives packets {1,2,3}; Y receives packets 
{1,2,4,5}. After coordination, X sends packet {1,2,3} and then Y 
sends what X did not send, i.e. packets {4,5}. As a result, packets 
{1,2,3} are routed through SÆXÆD; and packets {4,5} are 
routed through SÆYÆD. 
S
X
Y
DTransmission range
 
Figure 1. An illustrated example of OR. 
To see the advantage of the concept, let us compare it with 
traditional routing. Traditional routing picks a predefined route, 
either SÆXÆD or SÆYÆD. If route SÆXÆD is selected, 
packets from S to X are also heard by Y. However, Y may happen 
to successfully receive some packets, which X failed to do. It is a 
Permission to make digital or hard copies of all or part of this work for 
personal or classroom use is granted without fee provided that copies are 
not made or distributed for profit or commercial advantage and that 
copies bear this notice and the full citation on the first page. To copy 
otherwise, or republish, to post on servers or to redistribute to lists, 
requires prior specific permission and/or a fee. 
Mobility 2009, Sep 2-4, Nice, France Copyright © 2009  
ACM 978-1-60558-536-9/00/0009……$5.00 
2. RELATED WORKS 
2.1 ETX 
ETX [9] refers to “expected transmission count”, i.e. number of 
transmission required to pass a packet from source to destination. 
For example, for a link with PRR = 50%, ETX of the link = 1/0.5 
+ 1/0.5 = 4; 2 for packet transmission and another 2 for 
acknowledgement. In other words, 4 transmissions on average are 
required to pass a packet through the link. ETX is a common 
metric for route selection. 
2.2 ExOR (Extremely Opportunistic Routing) 
ExOR [3,4] is the first implementation of OR and shows the 
potential of OR. ExOR schedules relay order and prevents 
duplicate transmission by overhearing; therefore, collision may 
occur. Regarding to relay selection, ExOR optimizes by 
simulating and excludes relays which forward traffic less than 
10%. Due to coordination overhead, ExOR uses batch 
transmission; collecting a predefined number of packets into a 
batch. When 90% of packets in the batch have been 
acknowledged, ExOR advances to the next batch. 
ExOR works as follows: First, relays are ordered by ETX to 
destination and transmission starts from high priority (lower ETX) 
to low priority relays. A relay finds out when its turn comes by 
overhearing others. In the case when relays cannot hear anything 
(such as destination), the relay schedules by assuming each of 
other relay sends 5 packets. Take Fig. 3 for example; assume that 
ETX priority is S < R2 < R1 < D. When R1 hears transmission 
from D (D sends acknowledgement), R1 schedules to start 
transmission after D is done. On the other hand, R2 cannot hear 
R1 but can hear D. Therefore, R2 assumes R1 sends 5 packets and 
schedules to start transmission when R1 is sending 6th packet. 
The main drawbacks of scheduling by overhearing are: 1) deaf 
scheduling, relays (such as D in example of Fig.3) has to guess 
when its turn comes; as a result, collision may occur. 2) 
scheduling interference, due to collision, a relay may hear packets 
from multiple sources; therefore, the relay is confused to schedule. 
Because of these unpredictable behaviors of scheduling by 
overhearing, AA ratio of ExOR is higher than ECONOMY as 
shown in table 2. 
2.3 GOR (Geographical Opportunistic 
Routing)  
GOR [5,6,7] is the OR based on geographical routing [10], where 
relay selection is according to geographical position. Its 
coordination is similar to ExOR: timer and overhearing; and the 
issue of duplicate transmission is not discussed as well. The main 
contribution is to show that giving high priority to the furthest 
link is not always the best choice and proposed another metric 
EOT (Expected One-hop Throughput) to order relays. 
2.4 MORE (MAC-independent OR & 
Encoding) 
Unlike other OR schemes, MORE [8] is the first one to adopt 
network coding [11] as the coordination method. Such solution 
bypasses the coordination issue and prevents duplicate 
transmission. The key concept is that a relay generates a random 
linear combination of collected packets rather than forwarding 
them directly; therefore, each transmission (coded packet) is 
unique. After the destination has collected enough linear 
independent coded packets, original (non-coded) packets can be 
restored by Gaussian elimination [12]. 
Though MORE can prevent duplicate transmission by network 
coding, it still has the issue of redundant packets. If a destination 
only needs m linear independent coded packets but it receives n, 
where n>m, (n-m) of them are redundant.  
3. THE DESIGN OF ECONOMY 
In order to deal with OR coordination between relays that cannot 
hear one another, ECONOMY excludes these “bad” relays by 
finding a connected candidate order. For scheduling, ECONOMY 
uses token passing. Only the token holder is allowed to transmit 
packets. With the combination of connected candidate order and 
token passing, ECONOMY can prevent duplicate transmission 
while keeping advantages of OR. 
In ECONOMY, each node maintains a packet buffer and an 
ACK manager. ACK manager records a list of acknowledged SN 
and is updated whenever a token arrives. Packet buffer keeps all 
unacknowledged overheard packets. If a packet is acknowledged, 
it will be removed from packet buffer. 
The current design of ECONOMY considers only single flow, and 
assumes that ETX of each relay to source/destination are known 
in advance. Extending the work to multiple-flow scenario is part 
of our future works. 
3.1 Packet format 
There are two kinds of packets in ECONOMY: data packet and 
token. 
ETX
(4 bytes)
SN
(4 bytes)ty
pe payload
 
(a) Data packet. 
list size
(4 bytes)
address
(4 bytes)
ACK-c
(4 bytes)ty
pe ACK-d[0]
(4 bytes)
ACK-d[1]
(4 bytes)
ACK-d[n]
(4 bytes)
discreteACK list (list_size*4 bytes)
ACK-c: cumulateACK. ACK-d: discreteACK.  
(b) Token. 
Figure 4. Packet format of ECONOMY. 
 
3S 99
To
ke
n
101 102 104
discreteACK list
(12 bytes)  
Figure 5. An example of cumulateACK and discreteACK. 
Data packet is created by adding ECONOMY header to the 
original packet from upper layer. The header includes a sequence 
number (SN) and ETX of the route from the sender to destination. 
Token is a control packet which includes source address and 
acknowledgements. There are two types of acknowledgement: 1)  
cumulateACK, all SN up to this number have already been 
acknowledged, and 2) discreteACK, a list of SN which are 
acknowledged but not in the range of cumulateACK. 
Acknowledges in a token are updated before each forwarding. 
3.5 Data packet collection & transmission 
Relays collect overheard packets. A packet is put into packet 
buffer only when 1) the packet is not acknowledged, and 2) ETX 
of the sender to destination is higher than that of the relay. 
The transmission of data packets is triggered only when a token is 
received. Once a token arrives, the relay updates ACK manager 
according to SN list in the token, and removes acknowledged data 
packets from packet buffer. Then, the relay sends all data packets 
in packet buffer. Finally, the relay forwards the token to the next 
one along the connected candidate order. 
Regarding to retransmission, a relay cannot tell if a transmission 
is successful or not with broadcasting. Once a transmission failed 
(a packet is not received by any other relay), the relay is notified 
to forward the packet at the next time a token arrives. 
Consider the topology in Fig. 7. R2 only collects data packets 
from R3 and R4 and ignores data packets from R1 because R1 is 
closer to destination. Once a token arrives, R2 updates ACK 
manager and removes data packets which have been 
acknowledged by D and R1. Then, R2 broadcast all the remaining 
data packets in its packet buffer. If a packet from R2 is received 
by neither R1 nor D; the packet will be retransmitted at the next 
time R2 receives a token. 
4. PERFORMANCE EVALUATION 
This section presents simulation results of 3 routing schemes: 
ECONOMY, ExOR, and traditional routing based on ETX 
(denoted as TR-ETX). All these schemes use the same ETX 
information. The simulation is implemented in QUALNET 
system. 
4.1 Simulation parameters 
In the simulated system, the batch size of ExOR is set to 100. 
Traditional routing selects routes according to ETX. 
At the beginning of each instance, nodes send probes to neighbors 
so as to get ETX of nearby links. Then, do route discovery and 
get ETX of routes by flooding. All these 3 schemes use the same 
ETX information. At last, traffic comes in and the program starts 
collecting statistics. The simulation results are averages of 100 
instances.  Table 3 summarizes all parameter assumptions. 
Table 3. Simulated parameter assumptions 
Simulation Parameters 
PHY 802.11b 
Power 15 dBm (32mW) 
Data rate 1Mbps 
Fading model Rayleigh 
Number of instances 100 
ETX parameters 
Probe size 1000 Bytes 
Number of probes 100 
Interval between probes 10 Sec 
Traffic parameters 
Traffic type CBR 
Packet size 1024 Bytes 
Interval between packets 0.02 Sec 
Duration 500 Sec 
 
Uniform distribution is considered in the simulation. The 
simulated environment is divided into n*n square grids with one 
node in each grid. Position of the node in a grid is randomly 
distributed. Grid size is 200(m)*200(m); PRR of a 400m-link is 
about 65%. For route length=1, there are (2^1)*2=4 nodes; for 
route length=2, there are (2^2)*4=16 nodes; for route length=3, 
there are (2^3)*6=36 nodes; for route length=4, there are 
(2^4)*8=64 nodes. A source is always at upper left corner and a 
destination is at lower right; position of destination varies as route 
length changes. 
 
S
D1
D3
D2
D4
 
Figure 8. Simulated network enviornment. 
 
4.2 AA ratio (Attempts/Arrivals) 
To understand the influence of duplicate transmission, AA metric 
is considered in the simulation.  AA ratio refers to number of 
transmission attempts required at MAC layer for a single message 
arrived at application layer of destination. Transmission only 
refers to data packets and control messages are not included. 
Transmission attempts include attempts of source and all other 
relays. In short, AA ratio is a metric to evaluate duplicate 
transmission.  For the example of Fig. 2; assume S sends 125 
packets, R1 forwards 50 packets; D receives 100 packets. Then, 
AA ratio = (125+50)/100 = 1.75. 
Calculating AA ratio of traditional routing is a little bit different 
from that of OR schemes. Because traditional routing uses unicast, 
a successful transmission is recorded as one attempt no matter 
how many retransmissions are triggered. In other words, AA ratio 
of traditional routing means hop counts of the best route selected 
by traditional routing. 
4.3 Results and discussions 
Two simulation results are presented: throughput and AA ratio.  
Survey Paper
Opportunistic routing – A review and the challenges ahead
Che-Jung Hsu a, Huey-Ing Liu b,⇑, Winston K.G. Seah c
aGraduate Institute of Applied Science and Engineering, Fu Jen Catholic University, Taipei, Taiwan, ROC
bDepartment of Electrical Engineering, Fu Jen Catholic University, Taipei, Taiwan, ROC
c School of Engineering and Computer Science, Victoria University of Wellington, Wellington 6140, New Zealand
a r t i c l e i n f o
Article history:
Received 7 January 2011
Received in revised form 30 May 2011
Accepted 17 June 2011
Available online 13 July 2011
Keywords:
Wireless networks
Routing
Opportunistic routing
Anypath routing
a b s t r a c t
Opportunistic routing (OR) is an upcoming and promising routing technique for wireless
multihop networks. The key concepts behind OR is overhearing and cooperation among
relaying nodes; therefore, OR works well in wireless multihop networks with higher node
density, such as mesh or sensor networks. OR enables multiple routes and dynamic relay
selection, thus, it obtains higher link reliability and larger transmission range. This paper
reviews the basic concepts and describes components of OR with examples. Current trends,
issues and challenges of OR are also discussed.
! 2011 Elsevier B.V. All rights reserved.
1. Introduction
In recent years, wireless networks have already become
an important part in our daily life. Though extensive re-
search has been done and new applications continue to
emerge for wireless networks, the potential of the wireless
medium has not been fully investigated. One main charac-
teristic of the wireless medium is its broadcast nature, i.e. a
unicast packet (destined for one specific node) is actually a
one-hop broadcast packet to neighbors. Previous routing
schemes treat the attribute as a disadvantage, as it induces
interference. Opportunistic routing (OR), also called any-
path routing, is a recently emerging routing technology
for wireless networks to take advantage of the broadcast
nature. By dynamically selecting from multiple routes,
OR can improve link reliability and overall system
throughput. The concept of OR can be applied to all kinds
of wireless multihop networks, such as ad hoc, mesh, or
sensor networks, as long as omni-directional antennas
are used. Moreover, the potential of OR has already been
confirmed by both theoretical analysis [1,2] and experi-
mental evaluation [3–5].
Currently, research on OR is still under development and
problems, such as channel assignment, routing and coordi-
nation, arenotwell investigated. This paper studies andana-
lyzes some existing OR schemes and explores possible
issues. It begins with an introduction of basic OR concepts,
followed by the differences between OR and other routing
approaches. Then, two primary components: coordination
and selection of OR mechanisms are discussed. This paper
extracts common solutions or improvements to these com-
ponents fromexistingORschemesanddescribes theminde-
tail. After which, several current OR protocols are
introduced. The opportunities and possible future research
directions are identified before the paper concludes.
1.1. Traditional routing
Traditional routing refers to those routing schemes,
which find a path for a given node pair according to various
metrics and forward data packets from one intermediate
relay node to the next specified relay. These schemes treat
wireless links as point-to-point wired links and ignore the
unique broadcast nature of the wireless medium. The
1389-1286/$ - see front matter ! 2011 Elsevier B.V. All rights reserved.
doi:10.1016/j.comnet.2011.06.021
⇑ Corresponding author. Address: Department of Electrical Engineering,
Fu Jen Catholic University, 510 Chung-Cheng Rd., Hsin-Chuang, Taipei
24205, Taiwan, ROC. Tel.: +886 2 29053802; fax: +886 2 29042638.
E-mail addresses: 496598069@mail.fju.edu.tw (C.-J. Hsu), hiliu@mail.
fju.edu.tw (H.-I. Liu), Winston.Seah@ecs.vuw.ac.nz (W.K.G. Seah).
Computer Networks 55 (2011) 3592–3603
Contents lists available at ScienceDirect
Computer Networks
journal homepage: www.elsevier .com/locate /comnet
replies from candidates, the sender then selects one relay
with the best quality. The objective of these selection
diversity schemes is to select thenext relay according to cur-
rent conditions. Though these schemes also have multiple
relay candidates like OR, they are not opportunistic in
nature.
Multiple relay candidates and the timing of relay selec-
tion are the two main differences between traditional rout-
ing, selection diversity and OR. A comparison is shown in
Table 1. OR selects the next relay from multiple candidates
after data transmission, i.e. a data packet is broadcast to all
candidates; therefore, among the three approaches, only
OR utilizes overheard data packets.
2. Review of opportunistic routing
This section reviews common components of current OR
schemes and describes how they work. OR differs from tra-
ditional routing in many aspects: multiple relay candidates
and dynamic relay selection after data transmission. Coordi-
nation method and candidate selection are two primary com-
ponents of OR. Generally, candidate selection schemes
determine and arrange candidates in order of priority
according to a metric; the order is called candidate order.
Then, packets are forwarded from lower priority relays
(close to source) to higher priority relays (close to destina-
tion). In other words, the candidate order is similar to rout-
ing tables in traditional routing, and it can be either global or
local depending on routing strategies. Typically, a global or-
der is maintained by a source while local orders are distrib-
uted among relays. Twoexamples are shown in Figs. 3 and 4.
When a data packet is broadcasted, a coordination method
selects the best candidate, according to the order generated
by the candidate selection scheme, to forward the packet
and stop others from transmitting. More details are given
in the following subsections.
2.1. Coordination method
From the sender’s point of view, the coordination meth-
od is used to pick the best candidate to forward packets; on
the other hand, from the candidate’s point of view,
coordination is used to determine the current status and
decide whether to forward overheard packets or not. A
good coordination method should select the best relay
without duplicate transmissions while using the smallest
cost (in terms of time and/or control overhead). Existing
coordination methods are divided into three groups based
on the mechanism used: timer, token, and network coding.
Timer-based coordination is the most straightforward ap-
proach and easy to implement, but it may lead to duplicate
transmissions. Token-based coordination is mainly used to
cope with the duplicate transmissions issue. It can totally
prevent duplicate transmissions but at a cost of higher con-
trol overheads. Unlike solutions stated above, network
coding bypasses the coordination issue, thus no coordina-
tion overhead is incurred. However, relays are unaware
of the current neighbor status and can lead to other issues
such as redundant packets, which are not duplicates but do
not carry additional useful information.
2.1.1. Timer
To pick out the best relay from a list of eligible candi-
dates, candidates in timer-based coordination method
[3,5,8] are delayed based on a predefined candidate order
before responding. The first one to respond is then selected
as the next relay. A general timer-based coordination
method behaves as follows:
All candidates are first ordered based on a predefined
metric. The order is generatedby either a source (global can-
didate order) or sender (local candidate order), and included
in the packet header. After a data packet is broadcasted, can-
didates will respond in order, i.e. ith priority candidate will
Table 1
Comparison between OR and other related schemes.
Number of relay
candidates
Type of relay
selection
Timing of relay selection Type of data
transmission
Utilize overheard
packets
Traditional
routing
Single Fixed Before each data transmission
session
Unicast No
Selection
diversity
Multiple Dynamic Before each data transmission Unicast No
Opportunistic
routing
Multiple Dynamic After each data transmission Broadcast Yes
S
R1'
DR2'
R3'
2 134
Fig. 3. Global candidate order.
S
R1'
DR2'
R3'
Transmission rage of S
12
Fig. 4. Local candidate order.
3594 C.-J. Hsu et al. / Computer Networks 55 (2011) 3592–3603
In Fig. 6, the source S is transmitting two native packets,
a and b, to the destination D through relays, R1 and R2.
First, S generates two coded packets p1 and p2, which are
linear combinations of a and b, and broadcasts them. R2
received both but R1 missed p2. However, they still gener-
ate coded packets and transmit to D without coordination.
With p3 and p4 received, D can decode and restore a and b
easily.
This approach for coordination is first proposed by
MORE [4]. The main advantage of using network coding
is that there is no coordination overhead. However, there
remain some concerns and issues, to be discussed as
follows:
2.1.3.1. Time complexity. One concern is that coding and
decoding may incur significant delays. The experiment in
[4] uses desktop computers (with Celeron 800 MHz CPU)
as nodes and can sustain a throughput of 44 Mb/s. Though
it has been shown that the combination of OR and network
coding can be implemented on low-end PCs, the current
approach may not be viable on wireless devices with lower
computational capabilities.
2.1.3.2. Batch limit. Batch is a basic unit for coding and
decoding where the next batch starts only when the cur-
rent batch has finished. Once a batch is done, a batch-
ACK is sent from the destination back to the source by uni-
cast. During this duration, the network is running idle or
transmitting redundant packets. To cope with this issue,
CodeOR [11] extends the network coding solution with
more batches in flight, which is similar to congestion con-
trol of batches. SlideOR [12] extends this idea further by
dynamically adding new native packets to encode with
previous ones so that coded packets are no longer useful
only for a specific batch. As a result, network-coding-based
OR is now free from batch limits.
2.1.3.3. Redundant packets. Redundant packets refer to
packets which are not duplicates but do not carry addi-
tional information, i.e. linearly dependent packets. Con-
sider the following examples:
In Fig. 7, a source broadcasts one coded packet. If both
two relays generate a coded packet immediately, they (p2
and p3) are obviously linearly dependent. Though they
are not duplicate packets, one of them is redundant and
does not provide any additional information to the
destination.
In Fig. 8, since only two native packets are in the batch,
only two linearly independent coded packets are required.
Without coordination, it is likely that four relays may gen-
erate and transmit four coded packets. Obviously, two of
the coded packets are linearly dependent and thus
redundant.
From the examples above, it is easy to see that the crit-
ical issue of redundant packet is the timing for a relay to
generate coded packets. MAC-independent OR and Encod-
ing (MORE) [4] solves this issue by offline prediction
according to packet delivery ratio (PDR) between relays.
Based on the prediction, relays receive credits (defined by
the source) on each packet arrival. After the credit counter
reaches a threshold, a coded packet is generated and trans-
mitted. However, the solution cannot prevent redundant
packets and the prediction is observed to be incorrect;
Koutsonikolas et al. [13] show that the actual number of
transmission is often more than twice the predicted num-
ber. To reduce redundant packets, cumulative coded
acknowledgments (CCACK) [13] utilizes a null-space based
(NSB) acknowledgement for network coding. Relays add a
hash (vector) in the packet header to disseminate its space
information to others. When a relay overhears the hash
from its neighbors, the relay can determine if it can gener-
ate linearly independent packets for its neighbors or it
should stop sending.
Considering the example in Fig. 9, the triple below each
node refers to coding vectors of collected coded packets.
Coding vectors, which are included in header of coded
packets to indicate how the packets are coded, are useful
R1
S
R2
D
a b
2a
a+b
a+b
X
a-b
2a+2b
a+b
a-b
p1
p2
p3
p4
Fig. 6. Network coding coordination method.
R1
S
R2
D
a b
One of them is redundanta+2bp1
2a+4bp2
3a+6bp3
Fig. 7. Redundant packets – scenario 1.
R2
S
R3
D
R1
R4
a b
Only two coded 
packets are needed
Fig. 8. Redundant packets – scenario 2.
3596 C.-J. Hsu et al. / Computer Networks 55 (2011) 3592–3603
transmissions. As the candidate list is generally included in
the packet header, higher candidate number means higher
overhead. Duplicate transmissions occur when candidates
are unaware of one another. Including candidates which
cannot hear one another in the list may trigger duplicate
transmissions. Besides, Zeng et al. [1,22] found that the per-
formance gain from including more candidates decreases
and becomes marginal the number of candidates increases.
Therefore, including all possible candidates is unnecessary.
The most common approach is to pick candidates based on
a metric. Using a given metric, the sender can simply filter
out candidatesworse than the sender. However, such trivial
filtering leads tohigherheaderoverheadandmoreduplicate
transmissions as aforementioned issues. Other metrics for
candidate filtering include: (a) virtual link strength, (b) can-
didate connectivity, (c) level of contribution (use in prun-
ing), and (d) duplicate probability.
2.2.2.1. Virtual link strength. Filtering by virtual link
strength [5] aims to reduce the size of the candidate list
in the packet header while achieving high performance
gain for OR. Virtual link is the combination of all links from
sender to candidates and its strength or PDR is the proba-
bility of any candidate receiving data packets. For the
example in Fig. 11, if we assume that the PDR of each link
is 80%, then PDR of the virtual link if three candidates are
included is 1 ! (1–80%)3 = 99.2%. The PDR of the virtual
link has reached 99% when three candidates are included.
Including the remaining candidates only gives minor
improvement on reliability, and as a result, those candi-
dates can be filtered out.
2.2.2.2. Candidate connectivity. To prevent coordination
failure when candidates cannot communicate with (hear)
one another, systems such as SOAR [5] and economy [9] se-
lect ‘‘connected’’ candidate sets. For any two candidates ci
and cj in a connected candidate set, PDR of the link con-
necting ci to cj must be higher than a predefined threshold.
After connected candidate sets are found, these sets are
R2S
R3
90%
R1
80%
D
=
CostS D =CostS SetC + CostSetC D
CostS SetC=defined by metric (such as EAX or EATT)
EAX  : 1/[1-(1-90%)*(1-80%)]
EATT: (packet transmission time) * EAX
Candidate order: R2>R1
(Average cost from R2 to D) + (Average cost from R1 to D)CostSetC D =
packet size
bitrate*[1-(1-90%)*(1-80%)]
=
90%*Cost(R2 D)+(1-90%)*80%*Cost(R1 D)
1-(1-90%)*(1-80%)
=
EAX*90%*Cost(R2 D) + EAX*(1-90%)*80%*Cost(R1 D)
SetC = { R1, R2 }
Fig. 10. Calculating the cost of OR for candidate order R2 > R1.
R2
S R3
R1
Rn
80%
96.00%
80.00%
2
1
PDR of 
virtual link
Number of 
candidate
99.96%
99.84%
5
4
99.20%3
99.99%6
Fig. 11. Virtual link strength.
R2
S
R3
R1
R4
X
Transmission range of R 1
R4 cannot hear R1
Fig. 12. Candidate connectivity.
3598 C.-J. Hsu et al. / Computer Networks 55 (2011) 3592–3603
" (1 ! 0.6) " 0.2 = 4.8%. However, the probability when
bothR10 andR20 failed is 2/5 = 40% fromthe table rather than
(1 ! 0.4) " (1 ! 0.6) = 24%. Under the two cases (probe-2
and probe-5), R30 has a 50% chance to succeed. Therefore,
the probability when both R10 and R20 failed but R30 suc-
ceeded is 40 " 50% = 20% if spatial correlation is taken into
consideration.
Like coordination overhead, the spatial correlation fac-
tor can be incorporated with other metrics previously
discussed.
2.2.3.3. Bit rate selection. Transmitting with higher bit rates
can increase throughput to a specific relay at a cost of high-
er error probabilities to other neighbors. In other words,
multirate selection increases link throughput but also
poses a new challenge to OR: the tradeoff between number
of candidates and link throughput. Reference [18] observes
that the distribution of optimal transmission rates is not
concentrated at any particular rate; therefore, multirate
transmission is one of necessary consideration for high
performance OR. ETT-RCA [23] models OR with Markov
chain to calculate packet error rate. Then, the expected
transmission time of a given candidate set under a given
rate can be generated; the best candidate set with the best
rate is then evaluated and picked based on the expected
transmission time. The performance gain from bit rate
selection in OR is also studied in [18], and what makes
bit selection challenging in OR is time complexity. If there
are N relays from source to destination and R possible rates
available, it is nontrivial to determine the best rate and or-
der from (N!)(RN) possible combinations. Therefore, short-
est multirate anypath first (SMAF) [18] is proposed to pick
the best order and rate for all relays to a specific destina-
tion. SMAF, similar to the Dijkstra algorithm, takes polyno-
mial-time (to number of nodes) and is proven to be
optimal.
3. Overview of current OR protocols
Before performance gain of OR drew great attention,
there were a few research efforts that adopted the same
concepts as OR but for different purposes. Contention-
based forwarding (CBF) [20] operates similar to
timer-based OR. However, the focus of CBF is to get more
accurate location information for geographic routing in
mobile ad hoc networks and the performance gain of OR
has not been discussed.
In 2005, the first OR scheme, ExOR [3], focusing on per-
formance gain is proposed and implemented. To cope with
the acknowledgement and the coordination issue, ExOR
adopts batch transmission; 10–100 packets are collected
in a batch to transfer and the next batch starts only when
the current batch has completed. One main achievement of
ExOR is to show that the concept of OR indeed works better
than traditional routing. However, without proper trans-
mission control, the pipe between source and destination
is not fully utilized, and the design also induces duplicate
transmissions.
After ExOR, another timer-based OR technique, SOAR
[5], has been proposed for better transmission control
and duplicate prevention. The main feature of SOAR is that
the candidate set is generated by both source and relays. A
source picks default candidates (by traditional routing) and
each relay dynamically adds a few local neighbors, which
do not lead to duplicate transmissions, into the candidate
set. SOAR was implemented and compared with ExOR
and the results showed that SOAR outperforms ExOR espe-
cially as the number of flows grows.
In addition to proposing a timer-based solution, MORE
[4] is the first work to adopt network coding as the coordi-
nation method in 2007. MORE has been implemented on
low-end PCs to show that network coding is feasible.
Though bypassing the coordination issue, MORE intro-
duces more issues such as batch limits and redundant
packets. Fortunately, supporting techniques, such as Co-
deOR [11] and SlideOR [12], free network-coding-based-
OR from batch limits. Due to the lack of acknowledgement
in MORE, relays do not know when to stop transmitting,
hence triggering redundant packets. CCACK [13] uses NSB
acknowledgement to give relays their neighbors’ status in
network-coding-based OR. However, the issue of when to
generate coded packet is still left open.
Economy [9] is the only OR protocol which adopts to-
ken-based coordination. The main advantage of economy
and token-based coordination is the absence of duplicates.
Observations from simulations showed that Economy uses
fewer transmissions to deliver a packet to the destination.
With benefit from OR and free from duplicates, the number
of transmissions required to deliver packets to the destina-
tion (by source and all relays) is much lower than that of
ExOR and is even lower than the number of hops of the
best route selected by traditional routing. However, econ-
omy is lacking in testbed experiment and analysis on the
token-passing path.
GOR [8,21] is used in geographic routing scenarios and
adopts timer-based coordination with local candidate or-
der. GOR improved CBF by proposing a new candidate
selection scheme, EOT, which considers the coordination
overhead. However, the issue of duplicate transmissions,
induced by timer-based coordination, is not discussed. Ta-
ble 3 summarizes the key features of the OR schemes dis-
cussed above.
4. Challenges and open issues
Despite the potential benefits that OR can bring to wire-
less networks, prevailing challenges remain and more re-
Table 2
Example of spatial correlation in OR.
R10 R20 R30
Probe-1 O O X
Probe-2 X X X
Probe-3 O O X
Probe-4 X O X
Probe-5 X X O
PDR 40% 60% 20%
R10 and R20 failed but R30 succeeded.
Independent: (1 ! 0.4) ⁄ (1 ! 0.6) ⁄ 0.2 = 4.8%; Correlated: 0.4 ⁄ 0.5 = 20%.
3600 C.-J. Hsu et al. / Computer Networks 55 (2011) 3592–3603
grades the performance of neighboring transmissions. Pre-
vious work focuses on bit-rate selection for OR [18], which
affects only the candidate set of the sender itself. Power
control in OR affects not only the sender itself, but also
changes suitable bit-rate and candidate sets of neighboring
transmissions, i.e. a tradeoff between local and global
throughput. It is desirable to have power control for OR
so that sufficient candidates are covered while interference
range is minimized.
4.5. Multi-channel scenario
Another popular solution to improve the capacity of
wireless networks is the multi-channel multi-interface
approach. OR relies on overhearing; in contrast, the
multi-channel approach improves capacity by reducing
overhearing and the resulting interference from neighbors.
In other words, fewer candidates are available for OR in a
multi-channel scenario. The pertinent question then is
whether OR can still achieve the same level of efficiency
in multi-channel scenarios. This has been addressed in a
recent study [22] that analyzed the end-to-end capacity
of OR in a multi-channel scenario using linear programing
and found that OR can indeed achieve better performance
with even lesser radio resources. Furthermore, Zubow et al.
[30] showed similar simulation results that the overall
throughput increases proportionally to the increase in
number of channels. The work also pointed out that with
multiple candidates acting as backup links, OR has the
advantage to overcome the deafness problem, where nodes
cannot communicate with each other because they operate
on different channels. Though OR in multi-channel sce-
nario is promising, the channel assignment strategy for
OR is still an open research problem.
4.6. Deployment of OR
Numerical and simulation results have shown the po-
tential of OR, but the appropriate network topology to be
adopted for deployment has not been examined yet. The
need for OR deployment can be discussed in two aspects:
(a) building a new wireless mesh network, and (b) transi-
tioning from existing wireless mesh networks.
Due to the properties of OR, traditional deployment
strategies may not achieve the best tradeoff between per-
formance and cost (number of relays), i.e. cost-perfor-
mance ratio for constructing a wireless mesh network.
Besides, even in a planned and optimized wireless network
for traditional routing, OR is still beneficial as long as link
quality is not perfect (i.e. varies over time due to changing
environmental conditions) and multiple relays are avail-
able. Therefore, it would be necessary to analyze how to
place nodes within a network to achieve higher perfor-
mance or deploy a wireless mesh network that can achieve
comparable performance with fewer nodes.
Though existing wireless mesh networks can be easily
modified to take advantage of OR by updating their firm-
ware, the main challenge is that those nodes are mostly
unmovable and therefore the network topologies may
not be easily reorganized. As a result, there is a need to
determine if it is beneficial to implement OR using the cur-
rent network deployment. Alternatively, we can also eval-
uate how the current topology can be minimally modified
(by adding or moving a few nodes) to derive performance
gains from OR. Consequently, a transition strategy is
therefore necessary to incorporate OR into existing wire-
less mesh networks.
4.7. Combination OR with selection diversity (SD)
Though SD does not benefit from overheard packets as
OR, it is possible and beneficial to put them together. SD
is shown to have great impact on performance in slow fad-
ing channel conditions with multirate support [23]. While
sending probes to detect channel quality incurs additional
overhead, adjusting to appropriate bit-rate makes the cost
worthwhile. However, in fast fading channel conditions,
the channel condition information of SD is out of date
and the performance of SD drops significantly due to prob-
ing overhead. In contrast, with multiple backup links and
without probing cost, OR outperforms SD in fast changing
channel conditions. In short, under multirate scenarios
SD is suitable for slow fading channel conditions while
OR is good for fast fading channel conditions. Naturally,
it is attractive to put OR and SD together. Hybrid opportu-
nistic routing (HOR) [23] multicasts probes to the candi-
date set and then adjusts the candidate set and bit-rate
accordingly. However, such a combination also includes
the drawbacks of OR and SD, namely, coordination cost
and probing cost, and thus the usage of this combination
is limited. Besides, only trivial one-hop throughput is eval-
uated in the work [23]. It is desirable to have further anal-
ysis on the combination of OR with SD or design an
algorithm to switch between OR and SD.
5. Conclusions
Opportunistic routing, which is a new routing paradigm
for wireless multihop networks, exploits the salient broad-
cast nature of wireless communications. In this paper, we
have provided a review of the research done on OR. Some
key challenges in OR that need to be further researched
on are addressed and we hope that this will stimulate more
research in this area.
Acknowledgments
The authors, C.-J. Hsu and H.-I. Liu, thank the National
Science Council of the ROC for financial support of this
manuscript under Project No. NSC 99-2221-E-030-010.
References
[1] K. Zeng, W. Lou, H. Zhai, Capacity of opportunistic routing in multi-
rate and multi-hop wireless networks, IEEE Transactions on Wireless
Communications 7 (2008) 5118–5128.
[2] C.-P. Luk, W.-C. Lau, O.-C. Yue, An analysis of opportunistic routing in
wireless mesh network, in: Proceedings of the IEEE International
Conference on Communications (ICC), Beijing, China, 2008.
[3] S. Biswas, R. Morris, ExOR: opportunistic multi-hop routing for
wireless networks, in: Proceedings of SIGCOMM, ACM, Philadelphia,
Pennsylvania, USA, 2005, pp. 133–144.
3602 C.-J. Hsu et al. / Computer Networks 55 (2011) 3592–3603
A Performance Study of Opportunistic Routing 
Protocols 
Che-Jung Hsu 
Graduate Institute of Applied Science and Engineering 
Fu Jen Catholic University 
Taipei, Taiwan, ROC 
496598069@mail.fju.edu.tw 
Huey-Ing Liu 
Department of Electrical Engineering 
Fu Jen Catholic University 
Taipei, Taiwan, ROC 
hiliu@mail.fju.edu.tw
 
 
Abstract²Opportunistic routing (O R) is a promising concept to 
improve throughput and reliability by utilizing the broadcast 
nature of the wireless medium. To realize the idea, several 
coordination methods as well as supporting features have been 
proposed. However , no comprehensive performance study and 
comparative analysis have been done previously. This paper 
provides a performance study of existing O Rs and supporting 
features under multi-channel scenarios. Comparisons and 
analyses are also made to give an insight into behaviors of 
existing coordination methods from diverse angles, understand 
the impacts of candidate selecting features, and pinpoint 
favorable combinations of coordination methods and supporting 
features. 
Keywords- opportunistic routing; anypath routing; multi-
channel multi-interface; simulation; coordination 
I.  INTRODUCTION 
Routing in the wireless environment is a special issue 
because of the broadcast nature. Previous traditional routing for 
wireless networks (TR) handles the routing issue as wired 
networks by finding a path for a given node pair according to 
various metrics and forwards data packets from one 
intermediate relay to the next specified relay. The unique 
broadcast attribute is treated as a disadvantage, as it induces 
interference. Opportunistic routing (OR) [1-3] is an emerging 
concept to utilize the broadcast nature so as to greatly improve 
system performances. The main idea of OR is to broadcast data 
packets to several candidates; then, dynamically select the best 
one, which is closest to the destination, to forward the data 
packets. With multiple backup links and the possibility of 
reaching further, OR improves reliability and throughput; and 
the improvement of OR has already been confirmed by both 
theoretical analyses [4-6] and experimental evaluations [7-9]. 
OR protocols are comprised of two main components [3]: 
coordination method and candidate selection, where candidate 
selection is further divided into candidate order and candidate 
filtering. Candidate selection is similar to building routing 
tables in traditional routing; it needs to keep track of all 
possible routes and marks the priority of each route for 
coordination methods. After broadcasting data packets, a 
coordination method is triggered to dynamically choose the 
best candidate from those, which have successfully received 
the data packets, to forward the data packets and prevent the 
other candidates from transmitting. Current coordination 
methods fall into three categories: timer [7, 9], network coding 
[8, 10-11], and token [12]. Candidate selection orders relays by 
metrics including ETX [13] and EAX [14]; then, removes 
useless relays by filtering, such as virtual link strength [9], 
pruning [8] and connectivity [9, 12], as more relays induce 
more coordination overheads. 
Previous performance studies on ORs are focusing on either 
general protocol-independent (i.e., without considering 
coordination methods) performance analyses [4-6] or specific 
protocol simulations and implementations [7-9, 12]. The 
general protocol-independent analysis [4] shows that packets 
can reach further per transmission with OR; in other words, OR 
is able to deliver packets to a destination with fewer costs. OR 
outperforms TR in both single channel [5] and dual-channel [6] 
by analyzing end-to-end throughput with linear programming. 
Ordering candidate by ETX is shown to be unsuitable for OR 
by opportunistic routing algebra [15]. However, advantages 
and drawbacks of each coordination method are not discussed; 
impacts of each candidate selecting features are unknown. 
Moreover, specific protocol simulations and implementations 
including ExOR [7], MORE [8], SOAR [9] and ECONOMY 
[12] are evaluated only in the single channel scenario. 
Behaviors of current coordination methods have never been 
evaluated and confirmed in multi-channel scenarios. Therefore, 
this paper attempts to bring a better understanding of 
properties, interactions, and impacts of components in ORs and 
catch the behaviors of ORs in multi-channel scenarios. 
The behavior study and comparison of this paper are 
simulation based; all the simulation settings and 
implementation details of simulated protocols are given in 
Section 2. Section 3 presents the results and observations of 
this study. Finally, Section 4 concludes this paper. 
II. DESCRIPTION OF SIMULATION STUDIES 
Through simulations over Qualnet, this paper studies the 
performances of ORs. This section describes the simulated 
environment, implementation details, and modifications to 
protocols in the simulations. Protocols are simulated under grid 
topology with multi-channel support. Each of the shown results 
is an average of 100 distinct instances. 
OR protocols are comprised of two main components: 
coordination and candidate selection, where candidate selection 
is further divided into candidate order and candidate filtering. 
The manuscript is sponsored by the National Science Council of ROC 
under Project No. NSC 99-2221-E-030-010. 
by higher priority relays, the source starts transmitting the next 
batch. The simulated batch size is 100 packets. 
Because ExOR uses source routing, a packet header may be 
too large when too many relays are included in headers. To 
cope with this issue, the simulations use virtual headers for 
ExOR, where a relay list is appended on packets but it is not 
considered as the actual data being transmitted. This 
modification helps observing the behavior of ExOR without the 
limit of source routing under scenarios without candidate 
filtering or with longer route lengths. 
2) MORE 
The main characteristics of network-coding coordination 
methods are encode/decode and transmission based on credit. 
MORE collects a batch of packets to encode. Once enough 
packets for decode are received at the destination, it sends a 
batch-ACK (by traditional routing) back to the source and 
triggers the next batch. A relay earns credits by overhearing 
data packets from lower priority relays. Once the credit counter 
reaches a threshold, a linear combination of received coded 
packets is generated and transmitted. 
For MORE, a batch of 64 packets is simulated. Besides, for 
simplicity, all received packets are assumed to be linear-
independent in the simulations. In other words, if the 
destination hears any 64 packets, the current batch is 
considered to be done and the source moves forward to the 
next batch. Though linear-independent assumption benefits 
MORE, it indicates the performance upper bound and also 
UHYHDOV WKH EHKDYLRU RI WKH ³WUDQVPLVVLRQ EDVHG RQ FUHGLW´
strategy. 
3) ECONOMY 
ECONOMY stands for the token-based coordination 
method. Tokens containing acknowledgements flow from the 
destination to source. Each token holder broadcasts all 
unacknowledged packets and then forwards the token to the 
next relay. Instead of batch transmission as ExOR and MORE, 
relays of ECONOMY simply broadcast all packets in their 
buffers. 
In the stimulations of ECONOMY, the source starts 
transmitting after collecting 25 packets; and the destination 
generates a token every 350 ms. Notably, the routing table built 
in the second phase contains routes toward the destination, 
however, token passing requires a reversed route from the 
destination to the source. Therefore, an additional procedure 
for constructing the token-passing path is needed for 
ECONOMY before data transmission. To determine the token-
passing path, the source sends a control packet to the 
destination; the control packet is forwarded according to 
minimum cost to the destination in the routing table (i.e. EAX) 
of each relay. After the control packet reaches the destination, 
the token-passing path is therefore constructed and tokens are 
passed through the reverse direction of the constructed path. In 
addition, token passing is delayed only when overhearing data 
packets from the next token holder. 
4) Pruning 
Protocols such as ExOR and MORE adopt pruning to 
remove low-contribution relays. By default, relays with 
contributions fewer than 10% are removed; however, such a 
setting is inflexible. In a larger grid environment, a fixed 
pruning threshold (10%) limits the number of relays to no more 
than 10 (1/0.1) and therefore restricts system performances due 
to insufficient relays to carry data packets to the destination. To 
overcome this issue, the pruning threshold in the simulations is 
adjusted dynamically according to the cost (ETX/EAX) from 
the source to the destination. 
5) Connectivity 
There are two types of connectivity: a) local and b) global. 
Local connectivity [9] requests that all candidates within one-
hop transmission range of the forwarding relay have to hear 
each other. In contrast, global connectivity [12] only requests 
that ith relay can hear (i+1)th relay. Global connectivity for 
ECONOMY is simulated in the performance study.  
III. RESULTS AND OBSERVATIONS 
All protocols are evaluated by the following metrics: end-
to-end throughput, delivery ratio, and AA ratio. Delivery ratio 
measures how many packets are dropped during delivery; it is 
defined as (the number of packets arrived at the 
destination)/(the number of packets sent from the source). 
Obviously, a high delivery ratio is preferred for routing 
protocols. This metric is to observe one of the major 
differences between TR and ORs. AA (attempt/arrival) ratio 
reveals how many efforts are required to deliver a packet to the 
destination; it is defined as (the number of data transmission 
attempts from the source and relays)/(the number of packets 
arrived at the destination). Duplicate transmission is one of the 
critical issues of ORs; some protocols may obtain higher 
throughput with the cost of consuming higher resources. The 
AA ratio in certain degree reveals the level of duplicate 
transmissions of an OR protocol. Besides, protocols with lower 
AA ratios consume fewer resources; thus, they work better in 
multi-flow scenarios. 
This paper provides a comparison of the OR categories as 
well as traditional routing in the following different aspects: 
x Compare the ORs over a range of network conditions 
including: network size, multiple channels, and multiple 
interfaces. 
x Disclose the conditions that each simulated OR 
outperforms and suffers. 
x Reveal the impacts of EAX, candidate pruning, and 
connectivity for ORs. 
Simulation results and observations are demonstrated in the 
following three angles: multi-channel scenario, properties of 
different ORs, and impacts of different features. 
A. Multiple-channel scenario 
Through the selected metrics, this study reveals the 
following interesting findings including: a proper coordination 
makes ORs outperform under multiple-channel condition, ORs 
consume fewer costs to deliver packets, and fewer droppings 
occur for ORs under both single and multi-channel 
environments. 
1) Can OR outperform in multi-channel scenario? 
B. Properties of coordination methods 
The global-timer coordination method (ExOR) prevents 
spatial reuse; thus, it obtains lower throughput in single-
channel condition and greatly degrades its performance in dual-
channel condition. Furthermore, lower delivery ratio as shown 
in Fig. 5 is another reason for its low performance. In ExOR, 
when 90% of a batch is received by higher priority relays (not 
the destination), the source launches a new batch. The newer 
batch flushes local buffers of relays; packets still traveling from 
relays to the destination in the previous batch are removed. The 
protocol characteristics of ExOR make it facing a similar 
situation as TR and obtain lower delivery ratios. Regarding the 
issue of high delivery efforts, with the support from EAX, the 
AA ratio of ExOR is greatly improved and closes to that of the 
token-based coordination as shown in Fig. 7. This interesting 
finding shows that duplicate transmission is not a critical issue 
of global-timer coordination methods, which is different from 
what previous study expected [9, 12]. Instead, a proper metric 
selection for global-timer coordination provides a better 
candidate order and highly reduces efforts of delivery packets.  
Bypassing the coordination issue, network coding has zero 
coordinating overhead, such as waiting time or control packet, 
and obtains good throughput. However, coordination by 
network coding is observed to have a higher AA ratio in Fig. 3. 
One reason is the lack of acknowledgements in the 
³WUDQVPLVVLRQ EDVHG RQ FUHGLW´ VWUDWHJ\; relays do not know 
when to stop transmitting. Another reason is the batch-based 
encode/decode keeps relays operating merely for few 
remaining packets. 
The token-based OR (ECONOMY) outperforms in both 
throughput and AA ratio, but the main issue is the token 
generation rate. Adjusting token generation rate is similar to 
the congestion control of TCP; a higher rate leads to 
congestions and a lower rate leads to an unsaturated pipe. It is 
observed in Fig. 6 that throughputs of different scenarios alter 
according to different generation rates because the capacities 
between the source and destination change with different route 
lengths and additional channels. Therefore, a dynamic and 
accurate generation rate is required for token-based 
coordination methods. 
 
Figure 6.  Throughput with different token generation rates 
In short, though both global-timer (with EAX) and token-
based coordination methods take additional overheads (waiting 
time and control packet) for acknowledgements, they keep 
efforts for delivering packets low. In contrast, network-coding 
coordination costs zero coordinating overhead; however, 
without effective acknowledgements, it tends to trigger more 
useless packet transmissions. Regarding to throughput, global-
timer coordination is not suitable for the multi-channel 
scenario. Both token and network coding gain from the multi-
channel scenario with good throughput, but token-based OR 
suffers from the issue of keeping pipe full. 
C . Impacts from supporting features 
Selecting proper candidate order by using EAX has great 
impacts on AA ratios as shown in Fig.7 and Fig. 8. Without 
proper order, packets may be delivered to inferior relays; then, 
extra efforts are required to move the packets to superior 
relays. However, adopting EAX solely cannot boost 
throughput; candidate filtering is required. 
Though previous studies expect filtering to reduce duplicate 
transmissions, simulation results show a different story. Figure 
8 shows that candidate-filtering feature has limited impacts on 
AA ratios while comparing to candidate order. Instead, filtering 
plays an important role in throughput. Resources, such as 
waiting time or control packets, are required for coordination in 
ORs. Keeping more relays indicates more resources are needed 
for coordination methods. Therefore, selecting an appropriate 
number of relays by candidate filtering greatly boost 
performances as shown in Fig. 9. Table III summaries the 
favorable and adverse combinations of coordination methods 
and supporting features. 
 
Figure 7.  AA ratios with different features in multi-channel  
 
Figure 8.  AA ratio improvements with different features in multi-channel 
(compared with the best case in single channel) 
表 Y04 
行政院國家科學委員會補助國內專家學者出席國際學術會議報告 
                                                         99年  10 月  30 日 
報告人姓名  
劉惠英 
 
服務機構 
及職稱 
輔仁大學 電子工程系 
副教授 
     時間 
會議 
     地點 
20-21, October, 2009 
印尼，峇厘島 
本會核定 
補助文號 
 
NSC 99-2221-E-030-010 
會議 
名稱 
 (中文)IEEE 2011電信系統、服務與應用會議 
 (英文) The 6th International Conference o Telecommunication Systems, Services, 
and Applications 2011 
發表 
論文 
題目 
 (中文)  
 (英文) Economy - A Duplicate Free Opportunistic Routing 
報告內容應包括下列各項： 
一、參加會議經過 
IEEE TSSA 2011 ，該會議由 Telematics Laboratory of Institute Teknologi 
Bandung (ITB) 主辦，並由 IEEE協會印尼分會協辦，該會議包含兩個小型研討會分
別以下一世代通訊服務(Next Generation Communication Services)與網路與服務互聯
與互通（Interworking and Interoperable networks and Services)為主題。 與會的人士大
多為亞洲地區的通訊網路的研究人員為主，期間並有許多來自新家坡、中國與台灣
地區的華人士參與。 
會議中包含兩場主題演講，分別由 Andriyan Bayu Suksmono 博士(其為
Telecommunication Engineering School of Electrical Engineering and Informatics Istitut 
Teknologi Bandung INDONISIA 的教授)與 Leo P. Lighthart FIEE FIEEE 博士,(其為
Microwaves, Radar and Remote Sensing Technology IRCTR-Delft University of Technology 
Mekelweg , The Netherlands 的教授)所主講，分別以通訊研究與網路安全為主題進
行，其主題分別為:emerging Signal Processing: Compressive Sampling and Its Applications
與 Views on Academic Research Needed for Enhanced Security in Radio and Wireless 
Communications。此外會議主要以電信、服務與應用為主題，共有六個討論會，主
題包函：Next Generation Internet Security and Services, Wireless communication 
technologies, Wireless networks and services management, 與 Multimedia and Signal 
Processing等， 會議中有許多嶄新的相關技術與想法被發表， 
二、與會心得 
此國際性會議，參與人員來自世界各地 17個國家，其有許多業界人士與學者參與。
業界的論文大多以實際系統開發經驗分享為主軸，而學術界的成果則以問題方法研
究分析為主，各有精粹之處，皆值得學習，若是能彼此相互學習各補齊短，各學所
長相信必能有研究的佳作。因此增進產學的合作應是今後的重要課題之一。此外會
議中有許多研究人員參與，其中不乏是在學的研究生，顯見其對相關國際學術活動
的重視與熱烈參與，對於研究生參與國際活動的訓練與經驗的重視，由於國際會議
須以英文為主要溝通的語言，因此研究生平時英文的訓練十分重要，應予加強。 
 
附件三
 
寄件人: TSSA 2011 <tssa2011@easychair.org> 
日期: 2011年9月26日 上午11時01分24秒格林威治標準時間+08:00 
收件人: Huey-Ing Liu <hiliu@mail.fju.edu.tw> 
標題: TSSA 2011 notification for paper 15 
 
Dear Huey-Ing Liu, sorry for the delayed notification  
 
Congratulation! Your paper number 15 titled “ Defending Systems Against Tilt 
DDoS Attacks”  is accepted to  
be publish in TSSA 2011. 
 
In order your paper (s) to be included in the proceeding, please pay the  
registration fee and register at least one of the authors at http://www.tssa- 
itb.org/tssa2011/registration.html . One of the author must also attend the  
conference to present the paper.  
 
Prepare your final manuscript (s) according to the guidelines in  
http://www.tssa-itb.org/tssa2011/guide.htm and submit them through your easy  
chair account by 8 October at the most (hard deadline; this deadline is also the  
deadline for your registration).  
 
For visa and other informations, please visit http://tssa-itb.org 
 
 
----------------------- REVIEW 1 --------------------- 
PAPER: 15 
TITLE: Defending Systems Against Tilt DDoS Attacks 
AUTHORS: Huey-Ing Liu and Kuo-Chao Chang 
 
OVERALL RATING: 3 (strong accept) 
Originality: 4 (good) 
Relevance and timeliness: 3 (fair) 
Defending Systems Against Tilt DDoS Attacks 
 
Huey-Ing Liu 
Fu Jen Catholic University 
Department of Electronic Engineering 
hiliu@mail.fju.edu.tw 
Kuo-Chao Chang 
Fu Jen Catholic University 
Department of Electronic Engineering 
a802216@yahoo.com.tw 
 
 
Abstract—How to effectively resist DoS/DDoS (Distributed Denial 
of Service) attacks is one of the primary issues for Internet 
security. This paper studies non-invasive types of DoS/DDoS 
attacks, which attacks against servers via protocol-compliant and 
legitimate application-layer requests. Attackers use some special 
service requests, which require high processing complexity, to 
overwhelm the servers’ resources. This paper presents an 
effective defense system namely DAT: Defense system Against 
Tilt DDoS attacks. Through analyzing each client’s features, such 
instant traffic volume, session behavior, and so on. DAT 
schedules requests and decides whether to activate the defense 
mechanisms or not. The DAT is capable of effectively suppressing 
DoS/DDoS attacks, so that the protected server cluster is able to 
operate normally even under attacking. Simulation results show 
that DAT concentrates to serve legitimate users instead of 
wasting resources on malicious users. 
Keywords-component: denial of service, distributed denial of 
service, network security  
I. INTRODUCTION 
When an attacker has a lot of resources, DoS/DDoS 
defence becomes relatively difficult. Attacking resources (such 
as: a large number of hosts, or attack software) have become 
fairly easy and freely to obtain. An attacker first downloads 
attacking software via the hacker’s websites, second spreads 
invasion virus, third he can easily get a large number of hosts. 
Through accessing to these hosts (i.e., zombies), a DDoS attack 
is easily activated by ordering the attacking software planted in 
these hosts. An attacker could use hard coding or IRC (Internet 
Relay Chat) to notify zombies (Note: infected hosts by DDoS 
attack software) the victim. While start a DDoS attack, all 
zombies simultaneously keep sending a large volume of 
requests to the victim so as crash its service capability or 
network bandwidth. The victim is often difficult to 
immediately repair the damage. Consequently, many 
researches focused on the defence of DDoS have been 
proposed [1-7]; however hackers have also improved their 
attacks. The technology race between DDoS attacks and 
defences keep ongoing.  
DDoS attacking behaviours shifts from the original style: 
continuously sending voluminous packets, to intermittently 
sending large packets to the victim. Inserting a number of silent 
intervals confuses the defence system and improves attacking 
effects. In defence side, threshold-wise defence system, which 
sets a threshold to activate the defence mechanism, emerges to 
overcome intermittent attacks; however, how to set proper 
threshold values is an issue. A high threshold makes a victim to 
consume resources in dealing with attacking packets; on the 
contrary, a low threshold drives a sensitive system with more 
false detections of normal clients. In addition, smart attackers 
are easily to get the threshold by gradually increasing attacking 
power to probe the defensive threshold, and then maintain a 
attacking frequency under the threshold so as to pass the 
defence system .  
Resources, such as network bandwidth, CPU time, I/O 
bandwidth and so on, of victim are the targets of attackers. 
Among them, attacking CPU time brings higher effects than 
attacking bandwidth. Through web claw [8], hackers probe and 
analyze the complexity of each service requests of a victim. 
After getting service cost information, attackers keep sending 
high-complexity requests to the victim to decrease its service 
throughput for legitimate users. This paper focus on defending 
such attacks required high service complexity, denoted as tilt 
attacks.  
This paper proposes a Defence to resist Against Tilt-DDoS 
attacks, denoted as DAT. DAT monitors a user’s features (e.g. 
request volume, instant and long-term behaviour) throughout a 
connection session to determine whether he is malicious user 
or not. For different behaved users, DAT provide differentiated 
services to them. Therefore, DAT guarantees a certain level of 
services to legitimate users even under attacking. In addition, 
this paper also designs counter-attack mechanisms such as 
filter, rate-limiter and scheduler to downgrade services to 
malicious users. The observed users’ behaviours also pass to 
scheduler as scheduling parameters. A new scheduling strategy 
is also proposed for the scheduler in DAT to further improve 
the service throughput of legitimate users. The rest of this 
paper is organized as follows. Section II surveys some existing 
DDoS defence systems. Section III presents the proposed DAT 
including the filtering, measuring mechanism and scheduling 
strategy. The performance evaluations of DAT and existing 
schemes are given in Section IV. Finally, Section V concludes 
this paper. 
II. RELATED WORKS 
As the prevalence and popularity of the Internet, the 
defence of DDoS is even more difficult and important. Many 
related DDoS defence mechanisms are proposed [1-7]. SoS 
[2,3] uses overlapping networks to hide the actual locations of 
agents (denoted as Serverlet), and limits the flows to go 
through these Servelets to enter into the protected network. If 
the client wants to access services of the protected network 
server, it must pass through an access point, which validates 
The authors would like to thank the National Science Council of the 
R.O.C. for financial support of this manuscript under Contract No. NSC-99-
2221-E-030- 010. 
The 6th International Conference on Telecommunication Systems, Services, and Applications 2011
978-1-4577-1442-9/11/$26.00 ©2011 IEEE 22
BA observes clients in many aspects including: packet per 
second sent, bit per second sent, long and short-term DbDs (see 
the next subsection) and so on. Different service requests 
consume diverse amounts of resources. For example, in a 
shopping website, ‘BuyConfirm’ operation consumes 
significant resources, whereas ‘AdminConfirm’ requires only 
few resources [6]. Tilt attackers tend to keep sending 
‘BuyConfirm’ to server to overwhelm server’s resources. Thus, 
BA analyzes a user’s DbDs according to their service requests. 
While an attacker crosses the predetermine thresholds, rate 
limiter is then trigger to limit its service request rate.  
Two different granular analyses (coarse and fine) are 
implemented in BA: coarse analysis intents to block user with 
explicit attacking behaviors (e.g., massive requests) and fine 
analysis attempts to find tilt attackers. Packets flowing through 
BA are first pass through a coarse analyzer to filter out 
attackers based on thresholds of pps and bps. If any user’s 
requests exceed these thresholds, DAT regards him as an 
attacker. A list of filtered out users at coarse analyzer is then 
sent to IF to block these attackers accordingly. Then, the fine 
analyzer is fulfilled by a DbD measure (as detailed the next 
subsection), which observes and analyzes users’ DbDs in both 
short and long-terms. For each admitted session, BA maintains 
a request queue with equal queue length l and drop-tail policy. 
All packets pass through coarse analyzer are queued in their 
session queue for further DbD measurement, rate-limiting (if 
required), and scheduling. 
C-1. DbD Measure 
The DbD measure consists of long-term and short-term 
measurement to observe users’ long-term and instant DbDs. 
BA first classifies requests into different groups according to 
the required resources and gives each group with a weight. 
Short-term measurement summarizes each user’s weights of 
requests arrived within a time period by the following equation.  
 DbDs (i, t) = w(p)
p ∈P(i,t )
∑ − DbDs
i
 (1)  α  + β  = χ. (1) (1) 
Where DbDs(i,t) denotes the short-term DbD of user i at 
time t, P(i,t) represents the set of packets issued by user i with 
tth time unit, w(p) denotes the weight of packet p, and DbDs
i
 
denotes the average short-term DbD of a legitimate user. A 
high short-term DbD would trigger the rate-limiter to regulate 
its request bursts. The long-term measurement is similar to 
short-term one and is calculate by summarized the weights of 
all queued packets of user i as shown in equation 2.  
 DbDl (i, t) = w(p)
p ∈PQ (i,t )
∑ − DbDl
i
 (2)  α  + β  = χ. (1) (1) 
Where DbDl(i,t) denotes the long-term DbD of user i at 
time t, PQ (i,t) represents the set of queued packets of user i, 
and DbDl
i
 denotes the long-term DbD of a legitimate user.  
The long-term DbD assists scheduler to schedule requests. The 
scheduler tents to exclude tilt attackers’ requests since higher 
DbDs are obtained for tilt attackers. Long-term observation is 
able to filter out attackers, which issue hybrid requests. 
Moreover, abnormal (high) long-term DbDs also trigger rate-
limiter to drop requests accordingly. 
C-2. Rate-limiter 
The primary concern of BA is to accurately identify 
attackers; however, the boundary (thresholds) is not easy to 
place. A lose boundary may falsely pass attackers as legitimate 
users, named as false negative, whereas a tight boundary may 
identify legitimate users as attackers, named as false positive. 
To avoid falsely detection, rate-limiter is an alternative. While 
the short-term measurement of a user is too high, it will trigger 
the rate-limiter to drop some requests. The system first set a 
threshold of maximum request rate, which is allowed to pass in 
a time unit for each user, denoted as Rs. The number of 
dropped packets for each group is determined by the following 
equation. 
 ),(|),(|),( tiG
R
tiPtiD skks −=  (3)  
Where Ds
k (i, t)
 denotes the number of short-term dropped 
packets of group k for user i at time t, P
k (i, t)
 denotes the set 
of received packets of group k for user i at time t, and G(i,t) 
denotes the number of groups of the received packets for user i 
at time t. The rate-limiter drops requests for those users who 
excess the maximum request rate. 
For long-term rate-limiter, the number of packets, which 
are allowed to keep in queue Rl. For long-term rate-limiter, the 
number of dropped packets for each group is determined by the 
following equation. 
 ),(|),(|),( tiG
R
tiPtiD
Q
lk
Q
k
l −=  (4)  
Where n is a constant. Dk(i,t) denotes the number of long-
term dropped packets of group k for user i at time t, PQ
k (i, t)
 
denotes the set of queued packets of group k for user i at time t, 
and GQ(i,t) denotes the number of groups of the queued packets 
for user i at time t. The rate-limiter drops requests for those 
users who excess the maximum request rate. 
C-3. Scheduler 
The scheduler of BA determines a schedule of requests, 
which are allowed to pass to the protected server cluster. The 
scheduler refers the degree of behaviour deviation of each user 
to determine the sequence. DAT system prefers well-behaved 
users, thus a lower DbD gets a quicker service. In addition, 
long-term DbDs instead of short-term DbDs are considered for 
scheduling so as to avoid smart tilt attackers. For every cycle, 
DbD measure re-analyzes each user’s long-term DbD and the 
results are the basis of scheduling strategy. Since DAT prefers 
well-behaved users, a Lowest DbD First (LDF) is applied. 
The 6th International Conference on Telecommunication Systems, Services, and Applications 2011
978-1-4577-1442-9/11/$26.00 ©2011 IEEE 24
LDF
FCFS
RR
Attackers %
 
(a) Response time vs. attacker ratio 
0
5
10
15
20
25
30
LDF
FCFS
RR
 
(b) Response time (without attack) 
Figure 4.  Response time obtained by LDF, FCFS, and RR 
 
Attackers %
DAT (RL)
DAT (NRL)
Figure 5.  The impact of rate-limiter 
 DAT 
The overall performance of DAT is compared to 
PUSHBACK and DS as shown in Fig. 7. Throughput of DAT 
and PUSHBACK under attacking is shown in Fig. 7(a). As 
shown, attackers increase throughput of PUSHBACK 
decreases. DAT system shows high robustness to attacking 
because DAT still obtains high throughput even in high 
attacking. Throughput comparisons of DAT and DS are shown 
in Fig. 7 (b). Both DS and DAT are healthy even under 
attacking; however, DAT slightly outperforms DRS in term of 
throughput. The main reason is that DS needs longer time to 
obtain legitimate users feature fro backend database. Once the 
behaviour is precisely caught, DS performs well. 
 
Threshold 
LDF
(a) Response time vs. threshold 
 
Threshold
LDF
FCFS
RR
(b) False positive ratio vs. threshold 
Figure 6.  The impact of threshold 
 
Attackers %
DAT
PUSHBACK
(a) Throughput vs. attackers 
 
DAT
DS
Attackers %
(b) Throughput vs. attacker 
The 6th International Conference on Telecommunication Systems, Services, and Applications 2011
978-1-4577-1442-9/11/$26.00 ©2011 IEEE 26
國科會補助計畫衍生研發成果推廣資料表
日期:2012/01/31
國科會補助計畫
計畫名稱: 無線骨幹網路架構之研究與設計
計畫主持人: 劉惠英
計畫編號: 99-2221-E-030-010- 學門領域: 計算機結構與計算機系統
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
另完成一實作系統，以 Linux 系統為平台之無線 AP 系統，具 OR 與 Mesh 功能。
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
