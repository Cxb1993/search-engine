行政院國家科學委員會補助專題研究計畫成果報告 
 
在耐延遲網路上以合作式定位輔助之群組同儕通訊 
 
計畫類別：■整合型計畫 
計畫編號：NSC  100－2221－E－004－007 
執行期間：  100 年 8月 1日至 101 年 9月 30日 
 
計畫主持人：蔡子傑 
共同主持人： 
計畫參與人員： 鄧偉敦、陳界誠、劉勇麟、羅文卿 
 
 
成果報告類型(依經費核定清單規定繳交)：■精簡報告  □完整報告 
 
本成果報告包括以下應繳交之附件： 
□赴國外出差或研習心得報告一份 
□赴大陸地區出差或研習心得報告一份 
■出席國際學術會議心得報告及發表之論文各一份 
□國際合作研究計畫國外研究報告書一份 
 
 
處理方式：除產學合作研究計畫、提升產業技術及人才培育研究計
畫、列管計畫及下列情形者外，得立即公開查詢 
          □涉及專利或其他智慧財產權，■一年□二年後可公開查
詢 
          
執行單位：國立政治大學 資訊科學系 
 
中   華   民   國 101  年 11 月  12  日
由於成本的考量與實際上的限制未必所有的地點都
適合架設無線的 AP，這些沒涵蓋到的部分形成了
通訊上的黑洞。特別是在一個群組出遊的活動中，
P2P 或群組通訊是重要的需求，但不一定要利用到
基地台或 AP 來作群組通訊，更有可能是出遊地點
並無法有這些無線網路的完整服務。例如登山或腳
踏車隊出遊的活動，這些登山步道/自行車步道通
常只在登山口/休息站設立無線 AP 供上網，若是 
在進行活動過程中，沿途想要上傳一些照片與朋友
分享、跟群組朋友通訊或個人化的現況詢問，只能 
由各個節點彼此合作，透過 multihop 的方式來傳
送訊息。然而，發送端到目的端之間不一定一直存
在有一條端點到端點的路徑可供路由傳送。解決在
這樣的不穩定網路架構下傳輸問題的概念，就稱為
delay tolerant networks /disruption tolerant 
networks(DTN)。 
DTN 或是 opportunistic networks，在這類的網
路架構下，無線節點之間的通訊連線並非同時存
在，而是間歇建立的。因為節點的移動、或是裝置
省電模式的運作與環境因素的影響，造成連線可能
不定時的失效。在 DTN 上採用儲存後轉發(store 
and forward)的機制來轉送訊息，也就是訊息從發
送端出去後，會先暫存在中途節點的 buffer 中，
等到遇到下一個中途節點或是目的地才將訊息傳送
出去。因此，節點之間不確定的相遇間隔是造成延
遲時間過長的主要原因。除此之外，跟傳統的網路
架構相比，DTN 還面臨許多挑戰，例如，因為節點
移動所造成網路的拓撲不斷改變、節點裝置上有限
制的儲存容量與電源供應等等。 
在 DTN 上的 routing 策略，根據訊息在網路上傳
播 的 特 性 可 以 區 分 為 兩 種 。 第 一 種 是
replication，利用複製多個訊息的方式來增加到
達接收端的成功率。利用此策略設計出來的協定，
歸類為 flooding 策略。另一種是 knowledge，利
用網路不同的狀態或特性來決定路徑的選擇，這類
的協定歸類為 forwarding 策略。但是過去 DTN 上
routing 協定的設計，通常只專注在少量的訊息、
甚至是單一封包的傳送，因此不符合實際運用上的
需 求。 Network coding，是基於 information 
theory 與 coding theory 的研究。它利用中途節
點在轉送資料的同時進行編碼的動作，來整合網路
中數個以上的 information flow。根據相關的研
究，network coding 可以有效增進整體系統的
throughput。特別是在無線傳輸的環境中，
network coding 可以降低整體系統所需要的訊息
傳輸次數，並且具有容錯與錯誤更正的功能。因
此 ， 在 DTN 的 routing 協定設計上，整合
network coding 的技術是值得研究的課題  
 
我們這一年分別完成定位演算法，並實驗於
展場上；其次完成基於位置與網路編碼用於車載耐
延遲網路之繞路方法；最後我們也設計了省電機制
的方法。 
 
接下來就分別就三篇論文/報告作成果之摘要
重點： 
 
 
1. A large scale cooperative localization method 
 
1.1  
(a)Heterogeneous Localization: 
 
 
 
Suppose a user is estimated on Lt by localization 
system at time t.  And then the user moves. The 
localization system also uses GPS, WiFi and IOT 
localization.  And they have their location possibilities.  
WiFi localization possibility is the similarity of first 
target in WiFi localization.  IOT’s possibility is 1 when 
it gets reader’s location. We select the coordinate 
which have highest possibility at time t+1 and the 
coordinate is t+1.  At the same time, the possibility of 
the original localization should be reduced, because the 
user moves from time t to t+1.  Pt’ is the reduced 
localization possibility from Pt, say 0.9 in this example.  
At the same time, we also calculate the moving speed 
by localization history. Assume the system refers 
previous 4 localizations and calculates the average 
moving speed.  Therefore, we get human movement 
capacity by multiplying moving speed and time interval 
from time t to t+1.  We can draw two human movement 
The heterogeneous localization is more accurate than 
only WiFi localization.  Furthermore, the cooperative 
localization corrects the localization by nearby paths. 
 
 
 
The figure below shows the result for indoor path 
(path 3). Again, GPS performs poorly in indoor 
environments. WiFi localization is very accurate in this 
building.  The heterogeneous localization uses human 
movement capacity and localization possibility to 
correct localization of WiFi localization.  
 
 
The figure below shows the implementation experiment 
results.  We use IOT localization, so 14% points’ error 
distance are zero meters.  In this case, we turn on GPS 
every 10~20 seconds.  Therefore, the heterogeneous 
localization can use some GPS locations to get beyond 
accuracy of WiFi localization.  Furthermore, there are 
always two people nearby, sending their GPS locations 
to the user.  The results show that the cooperative 
localization is more accurate than the other localization 
algorithms. 
 
 
 
2. Energy-aware Grouping Design by considering 
moving pattern for Delay Tolerant Networks 
2.1 Abstract 
In traditional routing protocols of DTNs, most of them 
are using redundancy messages and information 
computing to make a good relay decision. 
Due to energy limitation, too many redundant message 
transmissions or high computing will make nodes die 
off quickly. It will decrease the system lifetime and 
diminish the delivery ratio of the whole system. 
When people go on a tour, friends always form a group 
due that members have a similar moving path and 
destination. Based on the features of moving patterns, 
we design a grouping scheme, namely, Energy-aware 
Grouping, with the concept that there is only one node 
awake in a group in charge of contact and message 
transmissions. With the assistance by GPS, our method 
has reduced the numbers of redundant message 
transmissions and information computing. Simulation 
results show that it can extend the system lifetime with 
maintaining still good delivery ratio. 
 
2.2 Main Results 
The figure below is an overview of our design: 
Energy-aware Grouping (EG). Since nodes are 
equipped GPS device, a leader node will record the 
waypoints of its moving path which are predefined in 
the preinstall navigation system. A beacon message 
contains with its group identity (GID), the record of 
historical waypoints, the next waypoint, and the 
destinations of messages. Once a leader node gets it, it 
will check the path information first to recognize if they 
are suit to form a group or not. If the “join” event won’t 
happen, they will go to the step of “message relay”. 
policy. The leader node’s selection of the group is still 
considering the energy level of nodes. The higher one 
will be the leader node and the other one will be the 
member node and then turns to sleeping mode after 
buffered messages have been exchanged. The sleeping 
interval of a node is calculating by itself. Since it can 
recognize the same path when grouping, it can estimate 
how much time will take to reach the location that is the 
end of the same path. When a member node wakes up 
and cannot find its leader node, it will change its role to 
be a leader node itself. 
The rest part of the design M2 is similar to the 
design in M1. A group has only one awake node, called 
leader node, to charge with messages’ transmission and 
others turn to sleeping mode. 
[Simulation Results] 
 
The above figure shows the number of dead nodes with 
time line in scenario 2. The curves of Epidemic and 
PROPHET are similar to them in scenario 1. Because 
of some nodes will depart from its group, the effect is 
much bigger to our design. The departing nodes have 
less energy saving if they can’t meet someone to form a 
M2 group. Therefore they will die much quick than 
they in scenario 1 with M1 group. 
 
The above figure shows the delivery ratio in scenario 2. 
It has almost the same curves in scenario 1. But the 
increasing dead nodes affect our performance at the 
final part. Departing nodes may create more chances 
for delivering messages for entire system. But when 
they rejoin the M1 group, they also make the buffered 
messages highly increase to a group. A leader node has 
to cache and transmits more messages when contact 
and leader buffer exchange than it in scenario 1. It 
highly decreases the lifetime of a group and then 
reduces the overall efficiency of the system. 
 
3. "Location assisted Routing with Network 
Coding in Vehicular Delay Tolerant Networks” 
 
3.1 Abstract 
This paper proposed a routing protocol integrating the 
characteristic of flooding-based protocol and 
forwarding-based protocol. The main idea of our 
protocol is to let message would not be flooded to 
every node but to the nodes moving toward or moving 
closer to destination. When nodes contact with each 
other, our approach will use the path of node, node’s 
moving direction and its velocity to estimate the 
probability to reach the destination of message. At the 
same time, we exploit network coding to transmit coded 
block instead of message fragment in order to avoid 
sending redundant replication, make data transmit more 
reliable and more robust to packet losses or delays. 
From the result of simulation, we could see that our 
protocol have a higher performance especially in the 
bandwidth consumption compared to other protocols. 
 
3.2 Main Results 
A. System Model 
We model a DTN as a set of mobile nodes in a 
vehicular environment. And there is only allowed inter-
vehicle communication. Each node in the network 
equips GPS device. And the navigation system is 
installed on every node. The nodes use the navigation 
system to find a shortest path to destination. The 
navigation system provides three kind of primitive 
information: trajectory, moving direction and velocity. 
Based on the information provided by navigation 
system, every node can collect navigation information 
contained in beacon which is broadcasted from the 
contact neighbors during contact time and make routing 
decision accordingly. The destination of message has a 
fixed location such as the portal to internet. A node can 
deliver messages to the final recipient or via 
intermediate nodes. 
B. Delivery Probability Estimation 
We use location information to estimate the 
delivery probability. First of all, if there is a node that 
a message is decodable only if its encoding matrix is 
full rank. Therefore, the rank of message is the first 
factor we used to make scheduling decision. During 
initialization stage, a node could obtain the contact 
node’s rank map from beacon. Then the node could 
look up the rank map of contact node by message 
identifier to get the corresponding rank number. The 
second factor is the delivery probability to destination. 
We have proposed our method to estimate the 
probability if the contact node would reach the 
destination in the future. So the probability can be 
regarded as the power that delivering messages to the 
final recipient. If a node finds out that the power of its 
contact node is less than its power, this node would not 
have to transfer all the coded blocks to its contact node. 
Fig.1 is the pseudo code of our scheduling approach. 
 
After the transfer, the node which received coded 
blocks would update the rank map, or try to recover the 
original message by decoding at termination stage. If a 
node receives a coded block, it will execute Gaussian 
elimination procedure to verify the incoming coded 
blocks is innovate to the coded blocks in buffer. If the 
result of checking is true, the incoming coded block 
will be put into buffer and increase the rank counter by 
one in rank map according to the identifier. After the 
rank map updating, if the encoding matrix of message 
is full rank, in other words, the number of independent 
encoding vector equals the size of each single encoding 
vector, the Gaussian elimination will be operated on it 
to get the inverse of encoding matrix if the node is the 
destination of message. The original message will be 
recovered by encoding the inverse of encoding matrix 
and coded block.  
In DTNs, some nodes would continuously send the 
messages that have already delivered to destination 
because these nodes don’t know the messages reached 
their final recipient. To ease the kinds of redundant 
transmission and buffer occupancy, once the 
destination recovers the original message successfully 
by decoding operation, the purge table will be updated 
by adding the message identifier and the time it 
decoded. The purge table will be propagated by 
beacons over the network. After received the beacons, a 
node will purge the buffer by discarding the coded 
blocks with the same message identifier immediately 
because it is not necessary to send the coded blocks of 
this message anymore. 
We evaluate the performance of LANC using three 
metrics:  
 Message delivery ratio 
 Average delay latency. 
 Transmission overhead: The transmission 
overhead is defined as: 
 
We compare LANC with another two routing protocols: 
Epidemic Routing and PROPHET Routing. The 
Epidemic Routing is a greedy approach that duplicates 
copies of message to every contact node. The 
PROPHET Routing uses history of encounter and 
transitivity to select a better relay node. We modified 
these two protocols such that they have the ability to 
perform RLNC. 
Fig.9 shows that the performance of each protocol 
drops down with the load of flow increase. 
Once there are more flows in the network, 
congestion might occur at some bottleneck relay node. 
Our protocol uses purge table to inform other node to 
purge its buffer. This operation not only frees memory 
storage but also reduces the chance the congestion 
occurs. Moreover, LANC uses rank map to schedule 
the priority of coded blocks. If a message is already full 
rank, LANC will bypass the opportunity to next 
message. 
 At the same time, LANC views the results of 
estimation function as the probability a node would 
future move toward the destination, LANC could 
schedule coded blocks according the probability to 
deliver it to another node or not, so the responsibility 
for delivering message could be shared by a set of 
nodes. Even if a relay node would never reach the 
destination in the future, it won’t be a problem hence 
the node doesn’t have all the coded blocks. 
In Fig.10, the average delay increases with the 
trend of flow load. The LANC has a little higher delay 
time than Epidemic routing with NC. The difference is 
about 1200 seconds. For non-real time demand such as 
sending emails or uploading photos, it’s considered 
acceptable. And Epidemic routing tries every possible 
contact opportunities, the network bandwidth it wasted 
must be very large. In other words, our protocol is more 
efficient because the bandwidth consumed by LANC is 
less. 
As for PROPHET routing with NC, the estimation it 
made is based on historical encounter record, so it has a 
poor result. The method PROPHET routing used might 
be suitable for a small closed area like a concert or a 
lounge bar. Because LANC uses the future possible 
trajectory of node to predict the delivery probability, 
LANC could make more precise estimation in large 
scale outdoor environment. 
Fig.11 shows that the overhead ratio of our approach 
is much smaller than Epidemic routing with NC and 
 
 2 
netowrks了，頻譜在 100GHz，Data rate在 20Gbps。Rappaport在無線信號的傳遞
能量衰減的研究頗具盛名，所以他也作了一些實測的數據進行報告，道出目前的進
度以及挑戰。末了也提及無線與醫療之間的重要關聯與關鍵技術點，也提到感測技
術在人腦方面的應用價值等。 
第二場為 Dr. Shumin Cao主講，講題為 ICT Development in China。提到 2005-11
的產值從 1.4 trillion到 2.8trillion，ICT industry垂直整合的 eco system。提
到 smart device app platform的重要性，也提到中國在 cloud computing的近況，
以及剛開始努力的 IOT計畫，和 NITS標準化活動等。 
第三場為 Dr. Wen Tong主講，講題為 Horizon 2020: The future of Mobile Broadband 
Communications”。提到發展的趨勢由 2009的 connected individual，到 2015的
connected group, social，接下來將發展到 2020的 connected everything。提到
Gbps is required to deliver “local fell” experience.提到 Cloud-RAN, D2D, 
Wifi-direct, cooperative receive等技術。 
 
中飯過後，就開始 technical session了，很榮幸了大會邀請我擔任 session chair。
我負責的 session: vehicular networks共有四篇論文，含一篇我的論
文”Location-assisted Routing with Network Coding in Vehicular Delay Tolerant 
Networks”。第一篇為澳洲雪梨大學發表，第二篇為西安交大，我的為第三篇，第四
篇為加拿大的 U. of Victoria。聽眾有很多是中國各地大學來的，也有由美國回來
的學者和研究生。發表後，我還有另一篇 poster: A Large scale cooperative 
location method，就趕忙去張貼，並準備說明與展示成果。期間有跟幾位四川成都
 Location assisted Routing with Network Coding in  
Vehicular Delay Tolerant Networks 
 
Tzu-Chieh Tsai, Chieh-Cheng Chen  
Department of Computer Science 
National Chengchi University, 
Taiwan, Taipei,  
ttsai@cs.nccu.edu.tw, g9703@cs.nccu.edu.tw 
 
 
Abstract² This paper proposed a routing protocol 
integrating both the characteristic of the flooding-based 
protocol and forwarding-based protocol.  The basic idea of 
our protocol is to let message be forwarded to the nodes 
moving toward or closer to destination.  When nodes contact 
with each other , our approach will utilize the path of the node, 
node¶s moving direction and velocity to estimate the 
probability to reach the destination of the message.  A t the 
same time, we exploit network coding to transmit coded block 
instead of message fragment in order to avoid sending 
redundant replication.  In this way, data transport is more 
reliable and more robust to packet losses or delays.  F rom the 
results of simulation, we could see that our protocol has 
enhanced performance, especially for the bandwidth 
consumption compared to other protocols. 
Keywords-Delay tolerant networks, routing, network coding 
I . Introduction  
Delay tolerant networks (DTNs) is a kind of special 
designed network architecture. The purpose is to make 
communication possible in challenging environments. The 
main challenge is that the network lacks of stable, continued 
end-to-end route paths from source to destination. Because 
of these reasons: high node mobility, rapidly changing 
network topology, short transmission range and limited 
energy resources.  Forwarding message in DTNs often 
suffers frequent disconnection, long-time propagation delay 
and data losses. A technique called ³Store-Carry-Forward´ is 
widely used to overcome the intermittent connectivity.  
The main design principle of the routing protocols for 
DTNs is trying to make communication possible even if the 
end-to-end connectivity is never achievable. Maximizing 
message delivery ratio and minimizing delay latency is also 
important criteria needed to be considered. According to 
different strategy properties [1], these routing protocols 
could be divided into two categories: the flooding-based 
protocol and forwarding-based protocol. 
The flooding-based protocols will duplicate copies of 
message into network, with expecting at least one of them 
received by destination. However, this approach would waste 
too much bandwidth and storage resources. And the 
forwarding-based protocols require more information about 
network to make forwarding decision. But the DTNs are a 
distributed architecture; it is difficult for a node to obtain 
complete network information. 
Network coding [2] is a field of information theory and 
coding theory. With network coding, relay nodes may code 
several input packets into one or several output packets 
instead of simply forwarding the data. Network coding 
could make transmission more robustness and adaptability. 
When node and link failures occur frequently [3], it can 
increase throughput gain in wireless networks, and operate 
well without the need of central knowledge about networks 
[4].  
Exploiting network coding in delay tolerant networks is 
very useful. Because delivering messages in DTNs is often 
subject to random delay and losses, it is difficult for a node 
to select the best packet to send. With network coding, each 
node sends coded blocks without needing any global 
information about the topology. Moreover, forwarding 
random combination of blocks reduces the probability of 
sending redundant packets.   
The advantages of flooding-based protocols are exactly 
the weakness of forwarding-based protocols, and vice versa.  
Therefore, we design a routing protocol that integrates the 
concepts of the two routing families. We want the message  
not to be flooded to every node, but to the nodes moving 
toward or closer to the destination. At the same time, we 
exploit network coding to transmit coded blocks instead of 
message fragments, in order to avoid sending redundant 
replication.  Thus it makes data transmit more reliable and 
more robust to packet losses or delays. 
Therefore, We propose the Location-Assisted routing 
with Network Coding: LANC. The main idea of LANC is, 
as each contact opportunity occurs; calculate the probability 
of the contact node to check if it is suitable to relay 
messages to destination. The criteria we used to estimate 
probability are trajectory of the node, its moving direction 
and velocity. If the result of estimated probability is larger 
than the threshold, the random linear network coding 
(RLNC) operation (explained later) will be performed on 
Input: Node A, Node C, Outgoing Buffer in A 
For each message M in Outgoing buffer do 
  rank_C = rankmap_C.get(M.getID()) 
  /*Get the rank of message by looking up the rank map */ 
  rank_A = rankmap_A.get(M.getID()) 
If rank_C equals k  /*message in C is full rank*/ 
continue 
 /*bypass the transmission opportunity to next message*/ 
  End if 
If C is the destination of message M 
 f_count = min(k- rank_C, rank_A) 
/*f_count is the number of forwarding coded blocks*/ 
Else  /*C is relay node*/ 
power_A = estimate(A, M.getDestination()) 
   power_C = estimate(C, M.getDestination()) 
   f_count = min(k-rank_C, rank_A*(power_C/power_A)) 
End if 
End for 
on it to deliver messages. So we adopt the future trajectory 
of node provided by the navigation system as one of the 
estimation factors. However, the trajectory information is 
not enough to define good relay candidates. For example, a 
bus may have a fixed trajectory closer to destination but its 
moving direction is away from it. Therefore, the node¶s 
moving direction should also take into account. Finally, it is 
very intuitive to select a faster node to take the 
responsibility for delivering message. Combined with the 
three factors, the formula we used to estimate delivery 
probability is listed below: 
ܲሺܿሻ ൌ
ߙ ൈ ܲܽݐ݄ሺܿሻ ൅ ߚ ൈ ܦ݅ݎሺܿሻ ൅ ߛ ൈ ܸሺܿሻ
ߙ ൅ ߚ ൅ ߛ
ሺͳሻ 
Where c is the contact node, ߙǡ ߚǡ ߛ are predefined system 
parameters range from 0 to 1, ߙ ൅ ߚ ൅ ߛ ൌ ͳ. Path(c) is the 
ratio to reach destination range from 0 to 1. Dir(c) is ratio 
moving toward destination range from 0 to 1. V(c) is relative 
velocity ratio range from 0 to 1. If the result of P(c) is 
greater than the predefined threshold, then the contact node 
c are viewed as an appropriate relay candidate. 
C . Location-assisted routing with network 
Now we will give a full description of our proposed 
protocol. The LANC protocol executes when two nodes are 
within radio range and have discovered one another. It has 
five stages: Initialization, Probability estimation, Coding, 
Scheduling and Termination.  
When two nodes contact with each other, they will 
collect metadata during initialization stage. The metadata 
contained in beacon includes: trajectory information of node, 
node¶s moving direction, velocity, rank map and purge table. 
The first three factors are used to estimate delivery 
probability as we mentioned before. The rank map is a 
record of independent encoding vectors of each message. In 
order to distinguish a coded block belongs to which message, 
a unique identifier will be assigned to message before 
encoding process at source. The rank of message is the 
number of independent encoding vectors. After finishing 
each transmission, a node will check the rank of message, 
and record the value with corresponding message identifier. 
The purge table contains the identifier of message and the 
time that it has been decoded. If the original message is 
decoded successfully, its identifier and the time that the 
decoding process finished will be pushed into the purge table 
and propagated by beacons. Nodes receiving this beacon 
could drop coded blocks according to the same identifier, 
thus releasing memory space. 
After obtaining the metadata, the nodes will estimate the 
delivery probability using the formula (1) we mentioned in 
the previous section. The procedure works as follows: for 
each message in the buffer, if the result of P(c) is larger than 
threshold, then the node puts the message in the outgoing 
buffer for next coding stage. 
Before the transmission starts, the coding operation will 
code the blocks in the outgoing buffer. The RLNC is 
performed on the blocks with the same message identifier. 
At the source node, a message is divided into k blocks and 
one or several coded blocks will be transferred with 
corresponding encoding vectors. The source first chooses a 
set of random elements from GFሺʹ଼ሻ, then multiplies each 
block ܾ௜with the elementߙ௝௜, and adds up all the results of 
the multiplication together to produce a coded block. If a 
relay node wants to send coded blocks to another node, it 
operates similar operations as the source does. It also 
chooses a set of random elements from GFሺʹ଼ሻ, but the size 
of this set is the number of coded blocks with the same 
message identifier in its buffer. Relay node multiplies each 
element with encoding vector and finally adds up to produce 
a new encoding vector.  This operation is repeated again 
using the same set of elements to generate a new coded block. 
The original message is decodable as long as the destination 
could receive enough linear independent encoding vectors 
such that the coefficient matrix formed by encoding vectors 
is full rank. 
Before starting a transmission, we will schedule which 
coded blocks in the outgoing buffer should be transferred 
first to get better performance. As we mentioned before, a 
message is decodable only if its encoding matrix is full rank. 
Therefore, the rank of message is the first factor we used to 
make scheduling decision. During initialization stage, a node 
could obtain the contact node¶s rank map from beacon. Then 
the node could look up the rank map of contact node by 
message identifier to get the corresponding rank number. 
The second factor is the delivery probability to destination. 
We have proposed our method to estimate the probability if 
the contact node would reach the destination in the future. So 
the probability can be regarded as the power that delivers 
messages to the final recipient. If a node finds out that the 
power of its contact node is less than its power, this node 
would not have to transfer all the coded blocks to its contact 
node. Fig.1 is the pseudo code of our scheduling approach. 
   Fig. 1: The scheduling scheme of LANC 
From Fig.2, the future trajectory information of a node is 
the most significant factor for increasing delivery ratio. The 
reason is that even if the relay node couldn't reach the 
destination eventually, the other nodes around destination 
could take over the responsibility of delivering message to 
final recipient. Therefore, a message should be transferred 
to the node has the minimal distance between its future 
trajectory and the destination of message. 
We could get the same conclusion as Fig.2 from Fig.3. If 
a message is closer to destination, the less time it needs to 
destination. On the contrary, if the message is taken away 
from its destination, it has to do more efforts to get back to 
the destination which is very time-consuming. And if the 
estimation function only considers the velocity of contact 
node, it may make an inappropriate selection. The contact 
node with higher speed does not guarantee that it will reach 
the destination sooner or have higher delivery ratio.  It is 
because its moving direction might be away from the 
destination. 
From Fig.4, we can get another conclusion that the 
overhead ratio could be decreased by estimating the moving 
direction of the contact node. In Fig.5, The LANC with 
ɀ ൌ ͳ has the second large overhead ratio. Because there 
are lots of nodes in the network, and the velocity difference 
between two nodes may be very large, it results in a poor 
estimation.  
D . Two flows 
 
Fig. 5 Delivery ratio of two flows 
 
Fig. 6 Average delay of two flows 
 
Fig. 7 Overhead ratio of two flows 
 
In the two-flow scenario, we want to understand the 
effect of scheduling. The number of nodes is 80. We will 
compare our scheduling with the ordinary FIFO or Random 
scheduling. The estimation function of PROPHET routing 
with NC is based on historical records of encounter. Since 
the Epidemic routing with NC simply forward message to 
every contact node, we assign the value to 1 as the result 
after estimation. 
From Fig.5, it is clear that the schedule approach we 
proposed could increase the delivery ratio. This is because 
this scheme considers the rank map and the probability to 
the destination. If a message is with full rank, then it should 
give the transmission opportunity to the next message which 
is not full rank. Therefore, the delivery ratio is almost twice, 
compared with the ordinary FIFO scheme 
In Fig.6, the difference of delay latency between our 
schedule and the ordinary FIFO is about 200 to 250 seconds. 
According to the same reason, our schedule scheme will 
balance the responsibility of delivering message by 
estimating the probability to destination. Therefore, it would 
select proper relay candidates to take the responsibility to 
delivery coded blocks. In the FIFO scheme, it schedules 
coded blocks to send by the time which blocks arrived. 
Hence, some message may suffer starvation. 
From Fig.7, it is obvious that our schedule scheme could 
largely save bandwidth consumptions. Before sending coded 
blocks to contact node, our approach will estimate the 
delivery probability of the contact node. Hence, the result of 
overhead ratio is better than the ordinary FIFO scheme.  
Moreover, the accuracy of estimation is higher in LANC, so 
the overhead ratio is much smaller than other approaches. 
E . Multiple flows 
The final case is multiple flows. We adjust the number 
of flows from 6 to 10. Fig.9 shows that the performance of 
each protocol drops down with increasing the load of flow. 
Once there are more flows in the network, congestion 
might occur at some bottleneck relay node. Our protocol 
uses purge table to inform other node to purge its buffer. 
This operation not only frees memory storage but also 
reduces the chance of the congestion occurrence. Moreover, 
LANC uses rank map to schedule the priority of coded 
blocks. If a message is already full rank, LANC will bypass 
the opportunity to next message. 
 At the same time, LANC views the results of 
estimation function as the probability that a node would 
future move toward the destination.  LANC could schedule 
coded blocks according to the probability to deliver it to 
another node or not.  Thus, the responsibility for delivering 
message could be shared by a set of nodes. Even if a relay 
node would never reach the destination in the future, it 
ZRQ¶W be a problem hence the node GRHVQ¶W have all the 
coded blocks. 
A large scale cooperative localization method 
Tzu-Chieh Tsai 
Department of Computer Science 
National Chengchi University 
Taipei, Taiwan 
ttsai@cs.nccu.edu.tw 
Wei-Tun Teng 
Department of Computer Science 
National Chengchi University 
Taipei, Taiwan 
g9838@cs.nccu.edu.tw
 
 
Abstract²Smart phones and Location Based Services (L BSs) are 
getting very popular in recent years.  To this end, locating the 
positions of smart phones becomes inevitable.  To date, there 
exist some localization systems in some specific areas.  For 
instance, GPS can be used only in the outdoor space.  However , 
people always live in large scale environments like campus, urban 
and tourist areas, including both indoor and outdoor space.  For 
large scale environment, a single location technique is not always 
available everywhere.  Therefore, we propose a heterogeneous 
localization algorithm which combines GPS, WiF i and Internet 
Of Things (I O T) localizations. We also introduce the 
³ORFDOL]DWLRQSRVVLELOLW\´IRUHDFKORFDOL]DWLRQPHWKRG to estimate 
the PRVW ³UHOLDEOH´ SRVVLEOH RQH  Besides, the more reliable 
nearby users provide thei r localization information, the further 
enhancement of the localization accuracy will get.  By measuring 
the relative WiF i signal st rength, it helps especially those users 
who have no any available localization methods.  We call this 
concept ³FRRSHUDWLYH ORFDOL]DWLRQ´  F inally, we evaluate the 
accuracy of our algorithms by simulation.  Because signal 
strength fluctuates f rom minute to minute, we measure empirical 
data and put into the simulator to do our experiments.  F inally, 
we also verify that our idea can be implemented on smart phones 
and work feasibly. 
 
Keywords: localization; Wi F i; GPS; heterogeneous; 
cooperative; large scale 
I.  INTRODUCTION 
Personal Digital Assistants (PDA) and smart phones have 
become very powerful, e.g. Android and iphones. These 
devices always provide wireless Internet capabilities and 
Global Positioning System (GPS).  These facilitate a novel 
classes of applications, called Localization based Services 
(LBSs).  LBSs provide added values by enabling services such 
as resource tracking, finding someone or something, and 
proximity-based notification (push or pull).  So there is a need 
for a feasible localization method any time anywhere.  
For outdoor localization systems, GPS is easy to use and 
offers a good localization accuracy and reliability.  But this 
technique needs at least three line-of-sight GPS satellites.  So it 
is inefficient in indoor environments and also degrades the 
performance in urban environments.  Moreover, the energy 
consumption by GPS is significant, leading to be not always on 
unless needed. 
Indoor localization technique has become more popular in 
recent years.  It can be used for the location detection of 
products stored in a warehouse, medical personnel or 
equipment in a hospital, or firemen in a building on fire.  Radio 
Frequency Identification (RFID) and WiFi localization can be 
used in indoor space. RFID can provide good accurate 
localization. SpotON[1] and LANDMARC[2] are RFID 
localization systems.  But it requires specialized hardware like 
RFID readers and tags.  WiFi localization methods mostly 
belong to location fingerprinting methods [3,4,5,6,7,8,9,10], 
using existing wireless access points to measure their signal 
strength maps.  Many places currently are WiFi available, and 
smart phones are WiFi enabled.  In this category of localization, 
Microsoft RADAR[3] proposed the first WiFi localization 
algorithm.  However, this kind of methods is time consuming 
for building the fingerprint database, and needs a dense number 
of nearby wireless access points.  Therefore, relying only on 
WiFi localization is not practical for positioning systems in 
large outdoor space. 
There are indoor and outdoor spaces in urban environments 
or on campus. Most people are always staying, walking or 
biking in this environment. But GPS, WiFi and RFID 
localization have some drawbacks in indoor and outdoor 
environments, individually.  Therefore, we propose a 
heterogeneous localization using combined WiFi, RFID, and 
GPS for localization in the large scale environments.  We can 
imagine in the near future that there are many RFID readers in 
urban environments and on campus, like MRT payment 
systems and RFID access control systems on campus.  People 
can use RFID and Near Field Communication (NFC) devices 
WRJHWUHDGHU¶VORFDWLRQV.  Thus, a newly developed smart phone 
has all the three capabilities already.  Furthermore we introduce 
the concept of ³cooperative localization´.  If people keep WiFi 
on for their smart phones, they can scan nearby user¶s relative 
WiFi signal strength to determine their approximate distance.  
In this case, even they don¶t have any GPS or RFID systems to 
use, they still can ask the nearby user¶s location to estimate 
their ³possible´ location. 
The rest of this paper is organized as follows. Section 2 
introduces related works in WiFi localization systems and other 
localization methods. Section 3 introduces the basic idea and 
algorithm of our localization algorithm. Section 4 presents 
simulation results and the implementation experiments.  Finally, 
Section 5 concludes this paper. 
II. RELATED WORK 
There are a lot of wireless-based localization systems in 
recent years. But they are only used in some specific areas. 
UWB can be used in indoor and outdoor environments but it is 
applicable only for line-of-sight environments.  RF and IR, RF 
6) F iltering: 
Signal strength fluctuations from minute to minute, and the 
fluctuations arise also from motion of people.  It might cause 
the predicted location to be far away from the previous 
location.  Therefore we use filter to correct the location 
estimation like Collaborative localization [12]. 
B. Heterogeneous Localization 
We use WiFi localization in Nangang exhibition hall, 
because there are a lot of APs.  But in this paper we focus on 
the large scale environment, and AP is sparse in more outdoor 
space.  On the other hand, there could be a lot of RFID readers 
in urban environments and on campus.  So, we can use NFC 
or RFID tags in the smart phone to get the location from those 
readers.  Therefore, we proposed a heterogeneous localization 
algorithm to combine GPS, IOT and WiFi localizations.  
Think about which location is accuracy and reliability, if we 
can get two or three locations at the same time?  We use 
³localization possibility´ to solve this problem.  The higher 
possibility means the localization is possible to be more 
accurate.  Our method gives IOT localization possibility to be 
1, because the communication distance of the IOT reader and 
the tag is very short.  If the GPS device can get its localization, 
we set the possibility to be 0.35 by default.   We will explain 
this later in the simulation.   It is reasonable that the GPS 
localization possibility is not 1, because GPS is not always 
accurate in the outdoor space.  WiFi possibility is set to be the 
similarity of the first target point in WiFi localization 
algorithm.  Localization possibility is reset to 0 when the 
ORFDOL]DWLRQ PHWKRG FDQ¶W HVWLPDWH any location.  The 
localization possibility is used to enhance the particle filter in 
Collaborative localization[12].  The filter corrects the location 
when the location estimation exceeds the human movement 
capacity.  But if the previous location estimation is not so 
accurate, then the new location is bounded in the human 
movement capacity.  This will cause error localization 
estimation.  So our method compares the possibilities between 
the previous location estimation and the new location 
estimation.  If the possibility of new location estimation is 
higher than the previous one, then the location estimation can 
³jump´, namely using new location to filter. 
Figure 2 shows an example for the heterogeneous 
localization.  Suppose a user is estimated on Lt by localization 
system at time t.  And then the user moves. The localization 
system also uses GPS WiFi and IOT localization.  And they 
have their location possibilities.  WiFi localization possibility 
is the similarity of first target in WiFi localization.  IOT¶s 
possibility is 1 when it gets reader¶s location. We select the 
coordinate which have highest possibility at time t+1 and the 
coordinate is t+1.  At the same time, the possibility of the 
original localization should be reduced, because the user 
moves from time t to t+1.  Pt¶ is the reduced localization 
possibility from Pt, say 0.9 in this example.  At the same time, 
we also calculate the moving speed by localization history. 
Assume the system refers previous 4 localizations and 
calculates the average moving speed.  Therefore, we get 
human movement capacity by multiplying moving speed and 
time interval from time t to t+1.  We can draw two human 
movement capacities around Lt and t+1.  If there are 
intersection with the two human movement capacities and the 
localization estimation is on the middle of them.  Lt+1 is the 
localization result.  And Pt+1 inherits the higher possibility of 
Pt¶ and t+1. 
 
Figure 2: An example of heterogeneous localization. 
 
If there is no intersection of the two human movement 
capacities like in figure 3.  In case A, if Pt¶ is higher than t+1 
and we use filter to correct the location estimation to human 
movement capacity around Lt.  In case B, if Pt¶ is lower than 
t+1 and we think t+1 is more accurate.  So location estimation 
is on the human movement capacity around t+1. 
 
Figure 3: Two human movement capacities are not intersected. 
Case A is using filter.  
Case B is jumping to new location. 
 
In the heterogeneous localization, we used localization 
possibility to select a localization method from GPS, WiFi and 
IOT localization. We do not use three localization coordinates 
simultaneously.  Because we think some localization is not 
accurate.  Localization accuracy will be degraded a lot if the 
inaccurate localization is used to estimate. 
In the heterogeneous localization, we reduce localization 
possibility of the previous localization estimation as time 
passes.   Figure 4 shows how we reduce the possibility.  When 
the user moves to Lt+1 from Lt at time t+1, the possibility 
should be reduced if we use Lt for Lt+1.  We refer the 
localization estimation from Lt-3 to Lt.  First we calculate mean 
Case A. 
Case B. 
mobiles and blue line (formula: RSSI to Meter) is from 
equation 4.  We take every pair of point on red line (Meter to 
RSSI) to equation 4 and calculate n=2.94.  Therefore the red 
and blue lines are closest matched when n=2.94 in figure 9.  In 
the simulation we use figure 9 in our simulator.  And we use 
relative WiFi signal strength when distance is 25 meters 
between two Desire mobiles. 
 
Figure 9: Distance (Meter) to WiFi signal strength (RSSI) in outdoor space. X 
axis is distance between two Desire and Y axis is relative WiFi signal strength. 
 
Seventh, the simulator runs GPS, WiFi, heterogeneous and 
cooperative localization.  Finally, the simulator calculates the 
error distance between the actual location and the localization 
estimation of GPS, WiFi, heterogeneous and cooperative 
localizations. 
 
Figure 10: WiFi localization possibility and error distance in all paths. 
 
Figure 10 shows the WiFi localization possibility and error 
distance in all paths. In this figure, the y axis is WiFi 
localization possibility and the x axis is error distance of WiFi 
localization.  We set GPS possibility to be 0.35, because there 
are just a few points with error distance more than 20 meters 
when possibility is higher than 0.35.  Thus, when we use both 
GPS and WiFi localization simultaneously, our proposed 
heterogeneous and cooperative localization will select GPS 
when WiFi localization possibility is lower than 0.35. 
B. Simulation result 
We measure fifteen paths for the simulation. We will show 
four paths localization results in this section. We use 
cumulative percentage of error distance graph to show the 
results.  X axis is localization error distance and Y axis is 
cumulative percentage of error distance (%). 
Figure 11 shows the simulation result for outdoor path 
(path 1).  In this case, GPS is more accurate than WiFi 
localization.  And our heterogeneous localization indeed select 
GPS more often.  Therefore, the heterogeneous localization 
and GPS have similar accuracy.  Furthermore, if there are two 
paths nearby path1, they can correct the localization error of 
path1 by the cooperative localization. 
 
Figure 11: Simulation result in path 1 
 
Figure 12 shows the simulation result for the path from 
indoor to outdoor to indoor (path 2).  This path passes indoor 
space, so GPS performs poorly in part of the path.  We can see 
from the results that our heterogeneous localization selects 
GPS in outdoor environments and selects WiFi in indoor 
environments.  The heterogeneous localization is more 
accurate than only WiFi localization.  Furthermore, the 
cooperative localization corrects the localization by nearby 
paths. 
 
Figure 12: Simulation result in path 2 
 
Figure 13 shows the result for indoor path (path 3). Again, 
GPS performs poorly in indoor environments. WiFi 
localization is very accurate in this building.  The 
heterogeneous localization uses human movement capacity 
and localization possibility to correct localization of WiFi 
localization.  
國科會補助計畫衍生研發成果推廣資料表
日期:2012/12/25
國科會補助計畫
計畫名稱: 子計畫四：在耐延遲網路上以合作式定位輔助之群組同儕通訊
計畫主持人: 蔡子傑
計畫編號: 100-2221-E-004-007- 學門領域: 網路 
研發成果名稱
(中文) 適用於大範圍的合作式定位方法
(英文) A large scale cooperative location method.
成果歸屬機構
國立政治大學 發明人
(創作人)
蔡子傑,鄧偉敦
技術說明
(中文) 近來幾年智慧型手機和適地性服務已經變得非常熱門。 智慧型手機必須有辦法
知道使用者的位置，因此精準的定位技術就變得重要。 至今人們只能夠在特定
的環境利用某些定位方法，就像是GPS只能用於室外的空間。 但是人們總是生活
於大範圍的環境像是校園、都市和觀光區，這種大範圍的環境包含了室內和室外
的空間。 
 大範圍的環境下，單一定位技術未必到處都可用，因此我們結合了GPS、WiFi和
物聯網定位提出了一個異質式定位演算法。 我們提出“定位可能性”來選擇比
較“可靠”(可能)的定位方法。 除此之外，利用較可靠的鄰近使用者與自己之
間的WiFi訊號強度可更進一步改善定位的精準度。特別針對某些使用者在沒有任
何可用的定位方法時更有幫助。這個方法被稱為“合作式定位”。 
(英文) Location Based Services (LBSs) have become very popular in recent years. To date 
people can use some localization systems in some specific areas. However, people always 
live in large scale environments like campus, urban and tourist areas. The large scale 
environments should include indoor and outdoor space. 
 For large scale environment, a single location technique is not always available 
everywhere. Therefore, we proposed a heterogeneous localization algorithm which 
combines GPS, WiFi and Internet Of Things (IOT) localizations. We proposed 
“localization possibility” for each localization methods. Besides, the more reliable nearby 
users can further enhance the localization by measuring the relative WiFi signal strength. 
It helps especially for those users who have no any available localization methods. This 
method is called “cooperative localization”. 
產業別 資訊服務業；觀光及旅遊服務業；休閒、娛樂服務業
技術/產品應用範圍
有GPS、無線電接收信號或有IOT, NFC等能力之行動裝置，皆可利用此合作式定位技術，
以開發相關適地性的服務或應用
技術移轉可行性及
預期效益
已有Android App之demo程式以及相關實驗之驗證，技術移轉可行性極高，預期效益可迅
速達成。
註：本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
目前尚未有技術移轉的事實,不過合作式定位的技術,已完成一個 App 可供概念
展示,將來若有機會將尋求更進一步的產業合作技術發展,以提供 LBS 的技術基
礎. 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
