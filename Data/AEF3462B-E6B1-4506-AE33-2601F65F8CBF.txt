2系統上的應用，實體層由使用者自訂，資料鏈
結層的部分主要依據為 ISO 11898-1 之通訊協
定，無傳輸層及表識層，交談層及應用層系依
ISO 15765-3 之通訊協定，如圖 1所示。本計
畫所發展之 CAN-Bus 汽車故障診斷系統，主要
包括一個 CAN 介面卡及一台 PC 個人電腦，如
圖 2所示，而 CAN 介面卡的部分系採用國際半
導體 NI 出產的 CAN Card，作為 CAN-Bus 網路
系統節點的實體層，使得個人電腦 PC 可以透
過 CAN Card 的節點，與所發展之 CAN-Bus 車
用故障診斷系統連線，並執行診斷儀器所應具
有的功能。
CAN-Bus個人電腦 PC部分主要分成三部
分，分別為第一，利用 NI CAN Card 所附的驅
動程式，實現網路層及交談層，第二，實現
ISO 15765-3 有關應用層之通訊協定，使得個
人電腦 PC 所執行之 CAN-Bus 診斷儀器可以跟
汽車的網路，透過 Request Messages 及
Response Messages，做有意義的交談，因此
為正確診斷工作所需之車輛運轉參數，就可以
獲得，並達成人機介面所需之操作功能。第
三，利用模糊邏輯理論，計算並執行運算法
則，依最可能的故障之順序，求出可能的故障
原因，執行汽車故障診斷儀器之功能。
OSI 參考模型架構 故障診斷的規範
應用層 ISO 15765-3
表識層 N/A
交談層 ISO 15765-3
傳輸層 N/A
網路層 ISO 15765-2
資料鏈結層 ISO 11898-1
實體層 使用者自訂
圖 1 ISO/IEC 7498 開放性系統互連 OSI 基本
參考模型的基本架構
圖 2 CAN-Bus 車輛網路診斷儀器
四、建立故障診斷方法
建立故障診斷方法(Fault Diagnosis
Approach)，其目的乃是基於系統外在的現
象、由 CAN Card 所傳進來車輛運轉參數及量
測到的參數，以決定可能的故障原因。主要分
成五個 step，分別為：
step 1：探求故障診斷理論
當故障發生時，必定存在各種現象，定義為 X，
當系統 A 具有任何一個故障來源 i
A
時，例如
ix ，則指定 1ix ，否則 0ix 。則我們可
對故障來源 i
A
獲得一個由 1或 0 組合而成的
陣列，假如系統 A具有 m個故障現象，則系統
具有
m2 個陣列：
},.......,,{
221 m
xxxX 
如果系統具有任意 n個故障來源，
nAAA ,........., 21 ，
則
},,.........,{ 21 nAAAA 。
當故障現象
},.......,,{ 21 jj xxxX  發生
時，導致於這些故障來源 i
A
的機率有多少
哪，答案是
)( jA Xj 。萬一 iA 與 jA )( ji
都是可能的故障來源，我們應該求出那一個具
有最大的歸屬度，因此，我們可以依據由大到
小的機率做診斷，也就是說，我們應該求出最
大的歸屬度，
)(max
21
iA
j
X
im

 ， ni ,,2,1  。
(1)
step 2：
)( iA Xi 運算法則
先建立典型的故障來源 i
A
，並得到對應之故
障現象
},.......,,{ 21 p
0
j xxxX  ，從故障樹
(Fault Tree)獲得 i
A
與 j
X
的關係，若每一
個故障現象 rx 各有一個權值 r，則故障來源
iA 的機率



P
r
rrA xP i
1
0 
，
(2)
其中，每一個 ),,2,1(1 qrxr  ， r 是
故障來源 i
A
的障現象 rx 的權值。
其次，定義一組包括所有的故障現象
},,,{ ''2
'
1 qj xxxX  ，則



q
r
rrA xP i
1
''
。
CAN 介面卡
OBD
個人電腦PC
