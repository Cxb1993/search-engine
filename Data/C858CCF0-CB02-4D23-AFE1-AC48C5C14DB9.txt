 2
一、摘要 
在本計畫中，我們研究在 IEEE 802.11
無線區域網路(WLAN)中有多個工作站使用
不同傳輸速率時的吞吐量 (throughput)效
能。無線網路在實體層(PHY)使用不同的調
變 與 編 碼 技 術 (Modulation and Coding 
Schemes， MCS)支援多重傳輸速率。當某
一個工作站的通道品質變差時，它會使用較
低的傳輸速率來獲得較佳的連線品質。然
而，IEEE 802.11 媒體存取控制層(Medium 
Access Control， MAC)所使用的分散協調
式功能(Distributed Coordination Function， 
DCF)對於每一個工作站提供了相同的傳輸
機會，無論它們所使用的傳輸速率為何。這
將導致使用高速率的工作站其資料傳輸率
被限制在某一個使用中的最低速率，使得整
體系統的吞吐量下降。這種現象稱為 IEEE 
802.11 無線區域網路的傳輸效能不規則
(performance anomaly)，而這個現象在提供
高範圍傳輸速率的網路例如 IEEE 802.11g
網路中將會是更為嚴重的問題。 
本計劃於一年時間中以理論推導的方
式深入分析效能不規則現象，並且研究既有
鏈結調整 (link adaptation，LA) 演算法的效
能。我們提出我們的實體層及媒體存取控制
層的跨層最佳化鏈結調整演算法，並且評估
比較我們方法與其他文獻提出方法的效
能。我們提出的演算法考慮實體層及媒體存
取控制層之間的交互影響並進行跨層效能
最佳化，能提高系統吞吐量，並且同時維持
工作站之間使用通道的公平性。在本計畫中
所提出的理論分析以及跨層最佳化解決方
法，可作為未來無線區域網路系統設計之參
考。 
關鍵詞： IEEE 802.11 無線區域網路， 鏈
結調整演算法 
Abstract 
In this project, we investigate the throughput 
performance of IEEE 802.11 Wireless Local 
Area Networks (WLAN) with multiple 
stations using different data rates. IEEE 
802.11 WLAN PHYsical Layer (PHY) 
provides multiple data rates with different 
Modulation and Coding Schemes (MCS). If 
one station experiences bad channel 
conditions, it would degrade the data rate to 
achieve a more reliable transmission quality. 
However, 802.11 Distributed Coordination 
Function (DCF) protocol at Medium Access 
Control (MAC) layer essentially provides 
equal transmission opportunities to each 
transmitting station. Thus, the throughput of 
stations with high data rates will be restricted 
within the lowest rate used by some stations, 
resulting in the degradation of system 
throughput. Such the phenomenon is so called 
“performance anomaly” and can be an 
extremely severe problem in the network 
which provides large-scale PHY rates, e.g. 
802.11g WLAN with rates ranging from 1 
Mbps up to 54 Mbps. 
      In the past one year, we developed 
analytical models to deeply investigate the 
impact of “performance anomaly” on WLAN 
system throughput and assess the performance 
of the existing Link Adaptation (LA) schemes. 
Furthermore, we proposed our cross-layer LA 
scheme which performs the optimization 
between PHY and MAC layer, and evaluated 
the performance of the proposed method by 
 4
(transmission opportunity)，當某些個工作站
因為通道狀況變差而調降速率時，將會使得
高速率傳輸的工作站其資料傳輸率被限制
在某一個使用中的最低速率，並導致整體系
統的吞吐量下降。這種現象稱為 IEEE 
802.11 無線區域網路的傳輸效能不規則
(performance anomaly) [8]，而這個問題在提
供高範圍傳輸速率的網路例如 IEEE 
802.11g [9]網路中將會更為嚴重。所以無線
網路中的鏈結調整演算法必須考慮由於
PHY和MAC的跨層交互影響所造成之效能
不規則現象，進出以跨層最佳化的設計提升
無線網路的系統效能。 
三、國內外有關本計劃之研究情況 
在文獻[8]中的作者首度探討無線區域
網路中的傳輸效能不規則現象。透過理論推
導、實驗以及模擬的方式說明使用高速率傳
輸的工作站其資料傳輸率會被限制在同一
網路中使用的最低速率；然而作者並未於此
文獻中提出改善問題的方法。在針對無線網
路設計的鏈結調整演算法方面，有幾種方法
在文獻中相繼被提出[2] - [7]。AutoRate 
Fallback (ARF) [2] 在 1997 年由 Bell Lab 提
出，主要是透過計算回應封包(acknowledge 
frame)的數量評估目前通道狀況，以此做為
調整傳輸速率的依據。如果傳送端未接收到
回應封包(傳送失敗)連續 M 次(典型的參數
值是 2)，傳送速率會往下降一級；如果傳送
端成功接收到回應封包(傳送成功)連續 N 次
(典型的參數值是 10)，傳送速率往上升一
級。由於 ARF 演算法內容簡單並且容易實
作在 MAC 層，所以是目前少數已產品化的
演算法。然而，由於 ARF 無法分辨封包傳
送失敗是由通道狀況亦或者是碰撞發生所
造成，所以當無線網路的設備數量增加時其
效能會隨之下降。在文獻[3]中提出的方法使
用 RTS/CTS (Request-To-Send/Clear-To-Send)
的訊框交換 protocol 來辨識封包傳送失敗原
因(通道狀況或碰撞)，做為速率調整的依據
以提升系統吞吐量。由於在無線網路中傳輸
速率和連線品質無法兩者兼顧，所以在某種
通道狀態之下會有一種最佳的調變及編碼
方法產生最大的吞吐量。在[4] [5]提出的鏈
結調整演算法分析傳輸速率和訊雜比
(signal to noise ratio，SNR)的對應關係，以
此決定相鄰調變及編碼方法之間 SNR 的臨
界質(thresholds)。文獻[4]提出的方法藉由量
測接收訊號的強弱，動態調整 SNR 臨界值，
以提升吞吐量。然而，此文獻僅考慮網路中
只有單一工作站，和真實的無線網路環境有
相當的出入。在[5]的作者以理論推導的方式
分析 802.11a 無線網路的系統效能；透過分
析的結果，根據目前量測的通道狀態及封包
重傳數量，以查表(table-driven)的方式選擇
最佳的傳輸速率，提升系統的吞吐量。然
而，此方法主要也是從某一個工作站的觀點
出發，評估自身的通道狀況後選擇最佳的傳
輸速率，並未進一步深入探討因為 PHY 和
MAC 的 跨 層 作 用 造 成 之 performance 
anomaly 現象對於無線網路系統吞吐量的影
響。 
四、無線區域網路吞吐量效能之理論
分析 
所謂的 Wireless LAN 主要是提供室內
低移動率之高速率資料傳輸的區域網路系
統。為了讓 WLAN 的技術及相關產品能夠
被普遍使用，電子電機工程師學會 (the 
Institute of Electrical and Electronics 
Engineers，IEEE)在 1999 年 9 月制定了 IEEE 
802.11a 和 IEEE 802.11b 標準[1]，規範了實
 6
產品都是使用 DCF。DCF 包含兩種運作方
法，分別是 basic scheme 以及 four-way 
handshaking scheme。basic scheme 對於每一
個要傳送的封包會先行偵測目前傳輸媒介
是否忙碌中。如果是處於忙碌狀態，則必須
延緩(defer)封包傳送的程序。如果偵測到目
前傳輸媒介是空閒狀態，則再等待傳輸媒介
持 續 空 閒 達 到 DCF 訊 框 間 隔 (DCF 
inter-frame space，DIFS)。之後，為了避免
兩個以上封包馬上傳送造成碰撞，工作站必
須再等待了一段由 0 和後退間隔(backoff 
window)之間隨機選取的時間才將封包傳送
出去。這種所謂後退(backoff)演算法可以減
緩封包碰撞的情形。然而，使用後退機制無
法完全避免碰撞的情形。一旦發生碰撞時，
無線設備必須將 backoff window 加倍以降
低再次發生碰撞的機率，然後重傳封包一直
到重傳次數達到預設值。如果重傳過程中
backoff window 達到預設的最大值就不會再
增長。在封包成功傳送後或是重傳次數達到
預設值，backoff window 就會恢復為原先設
定的最小值。接收端如果成功接收到封包之
後，會傳送回覆封包(Acknowledge frame，
ACK) 給傳送端做為確認。在 four-way 
handshaking scheme 中，要傳送的封包在等
待傳輸媒介持續空閒達到 DIFS 之後會先傳
送 Request-To-Send (RTS)訊框。如果接收端
收到 RTS 訊框，在等待傳輸媒介持續空閒
達到短訊框間隔(Short IFS，SIFS)之後回覆
Clear-To-Send (CTS)訊框。如果傳送端收到
CTS 訊框，在等待傳輸媒介持續空閒達到
SIFS 之後開始傳送資料。後面的傳送接收
程序則和上述的 basic scheme 均相同。使用
RTS-CTS 的機制主要是可以有效避免隱藏
工作站問題(Hidden Terminal Problem)。 
4. 3. 802.11 WLAN 吞吐量效能分析 
802.11 無線區域網路的吞吐量效能是由
MAC層的多工存取機制以及PHY層的通道
品質與傳輸速率所共同影響的。以下我們以
數學模型分析 802.11 DCF 在多重的傳輸速
率、變動的通道品質、以及使用鏈結調整演
算法的情形之下的統計特性。接著我們以此
理論模型研究傳輸效能不規則現象並分析
其對 WLAN 系統吞吐量的影響。 
4. 3.1. 802.11 DCF 理論模型 
 考慮 K 個工作站同時在無線區域網路
中。假設每個工作站隨時都有封包要傳送
(飽和流量狀態，saturated traffic condition)。
對工作站 i (i=0~K-1)而言，令 pi,c為其傳送
之封包和別的工作站傳送之封包碰撞的機
率。則 
)1(1
1
,0
, ∏−
≠=
−−=
K
ihh
hcip τ  (1) 
其中 τh 是工作站 h (h≠i)在某個時槽裡傳送
封包的機率。對工作站 i 而言，令 pi,e 是由
於通道品質問題所造成的封包失敗率。基本
上，pi,e 是由訊雜比、使用的調變及編碼方
法、和封包大小所決定的[5]。考慮不編碼的
調變方式例如802.11b PHY標準所採用的調
變方式，並且假設位元錯誤率 (Bit Error 
Rate，BER)在整個封包傳送過程中不會改
變，那麼 pi,e可以表示成： 
8*
, )),(1(1 i
FS
iiei PHYBERp Γ−−=  (2) 
其中PHYi是使用的調變方法；Γi是訊雜比；
FSi是以位元組(byte)為單位的封包大小。 
BER(PHYi, Γi)是在訊雜比Γi時使用調變方法
PHYi所造成的位元錯誤率，可以經由理論推
導或是實驗的方法獲得。當無線網路中有多
個工作站時，封包傳送失敗除了可能是通道
品質下降造成，也有可能是多個封包發生碰
 8
有的 bi,j,l值。透過以下的正規化方程式， 
∑ ∑
=
−
=
=
retry jL
j
CW
l
ljib
0
1
0
,, 1 (8) 
最後 bi,0,0 可以表示成(9)： 
因為 backoff timer 倒數到 0 封包才會被送
出，工作站 i 傳送封包的機率 τi可以表示為： 
∑ ∑
= =
+
−
−⋅=⋅==
retry retry retryL
j
L
j fi
L
fi
ii
j
fijii p
p
bbpb
0 0 ,
1
,
0,0,0,0,,0,, 1
1τ  (9)
從(9)我們可以看出 τi 是由封包傳送錯誤率
pi,f決定(而 pi,f是由碰撞機率 pi,c 以及誤碼率
pi,e決定)。由方程式(2)，(3)，(4)，(9)以及(9)，
並且給定 K 個工作站下列參數：訊雜比(Γ0, 
Γ1…. ΓK-1)，PHY modes (PHY0, PHY1…. 
PHYK-1)，封包大小(FS0, FS1…. FSK-1)，我們
可以計算出 τi以及 pi,f 的值。 
令Ptr表示至少有一個工作站傳送封包
的機率： 
)1(1
1
0
∏−
=
−−=
K
h
htrP τ  (10)
令 Pi,single 表示在至少有一個工作站傳送封
包的情況下，僅有工作站 i 傳送封包而其他
K-1 個工作站處於閒置狀態的機率。Pi,single
可以表示為： 
))1(1/()1(
1
0
1
,0
sin, ∏∏ −
=
−
≠=
−−−⋅=
K
h
h
K
ihh
higleiP τττ  (11)
在某一個時槽，通道閒置的機率是 1-Ptr；通
道忙碌的機率是 Ptr，其中包含了以下幾種
情形：工作站 i 傳送封包成功的機率
)1( ,sin, eigleitr pPP −⋅⋅ ；其他工作站 h (h≠i) 傳送
封包成功的機率 ∑−
≠=
−⋅⋅
1
,0
,,sin )1(
K
ihh
ehglehtr pPP ；由於誤
碼造成封包傳送失敗的機率 ∑−
=
⋅⋅
1
0
,sin,
K
h
ehglehtr pPP ；
以及由於碰撞造成封包傳送失敗的機率
)1(
1
0
sin,∑−
=
−⋅
K
h
glehtr PP 。所以工作站 i 的飽和吞吐量
(saturated throughput)，thri 可以表示成(13)： 
TcPPTepPPTspPPTP
HFSpPP
thr K
h
glehtrh
K
h
ehglehtrh
K
h
ehglehtrslottr
ieigleitr
i
⋅−⋅+⋅⋅⋅+⋅−⋅⋅+⋅−
−⋅−⋅⋅=
∑∑∑ −
=
−
=
−
=
)1()1()1(
8*)()1(
1
0
,sin
1
0
,,sin
1
0
,,sin
,,sin (13)
其中 H 是標頭(header)長度(包含 PHY 及
MAC，以 bytes 為單位)；Tslot是時槽的大小；
Tsh和 Teh分別是工作站 h傳送封包成功以及
由於誤碼傳送封包失敗的時間大小；Tc 是封
包碰撞期間；Tsh，Teh和 Tc 的大小是由使用
的 MAC 多工存取機制 (basic scheme 或
four-way handshaking scheme)以及傳送速率
rh 決定。當使用 basic scheme 時分別為： 
γγ ++++⋅−++= ACKSIFSrHFSTDIFSTs hhheaderbash /8)(
γ+⋅−++= *)/8)(( hhheaderbas rHFSTDIFSTc  
而使用 four-way handshaking scheme 時
分別為：
γγγγ ++++⋅−++++++++= ACKSIFSrHFSTSIFSCTSSIFSRTSDIFSTs hhheaderRTSh /8)(
γγ +++++= CTSSIFSRTSDIFSTcRTS  
Teh 的大小和 Tsh 相同，不論是使用 basic 
scheme 或 four-way handshaking scheme。在
上述式子中，DIFS，SIFS，Theader, ACK and γ 
分別表示 DIFS，SIFS，標頭傳送時間，ACK
封包傳送時間，以及傳輸延遲(propagation 
delay)時間； *)/8)(( hh rHFS ⋅−  表示碰撞過程中
最大封包的傳送時間。 
4. 3. 2 802.11 PHY 理論模型 
⎪⎪⎩
⎪⎪⎨
⎧
>−−⋅−+−−⋅⋅−+−⋅−−−⋅⋅−⋅
−−⋅−
≤⋅⋅+⋅−−⋅−+−⋅⋅−⋅
−−⋅−
=
+−++
++
m , 
)1)(1)(21(2)1)(12)(21()1)(21()1())2(1(
)1)(1)(21(2
m , 
)4221()1()1())2(1(
)1)(1)(21(2
,
1
,,,min,
1
,,,
1
,min
,,,
,,,,
1
,,
1
,min
,,,
0,0,
retry
ci
L
fifi
mL
fi
m
fi
m
fififi
m
fi
cififi
retry
ficifici
L
fifi
L
fi
cififi
i
L
ppppCWpppppCW
ppp
L
pppppppCW
ppp
b
retryretry
retryretry
 
(12) 
 10
5.5的機率POTS(PHYi=3|Γi=γ)為0。 
Throughput in a single-host WLAN
0
1
2
3
4
5
6
7
8
123456789101112
SNR (dB)
Th
ro
ug
hp
ut
 (M
bp
s)
DBPSK (1 Mbps)
DQPSK (2 Mbps)
CCK 5.5 (5.5 Mbps)
CCK 11 (11 Mbps)
DBPSK
DQPSK
CCK 5.5
CCK 11
 
圖3：802.11b WLAN(僅有一個工作站時)的
Throughput vs. SNR(封包大小為1500 bytes) 
使用ARF時，傳輸速率的調整主要是依
據回應封包(acknowledge frame)的數量。如
果傳送端未接收到回應封包(傳送失敗)連續
m次，傳送速率往下降一級；如果傳送端成
功接收到回應封包(傳送成功)連續n次，傳送
速率往上升一級。 Lucent Technologies’ 
WaveLAN-II [2]所採用m以及n的典型值分
別是2和10。圖4呈現使用ARF時(m=2; n=10) 
802.11b PHY modes的馬可夫鏈模型。從圖4
我們可以求得下列的機率轉移方程式： 
)|2()),2(( )|1()),1(1( 2,
10
, γγγγ =Γ=⋅==Γ=⋅− iiARFfiiiARFfi PHYPpPHYPp (17)
)|3()),3(()|1()),1(1(
)|2())),2(()),2(1((
2
,
10
,
2
,
10
,
γγγγ
γγγ
=Γ=⋅+=Γ=⋅−
==Γ=⋅+−
iiARFfiiiARFfi
iiARFfifi
PHYPpPHYPp
PHYPpp
 
(18)
)|4()),4(()|2()),2(1(
)|3())),3(()),3(1((
2
,
10
,
2
,
10
,
γγγγ
γγγ
=Γ=⋅+=Γ=⋅−
==Γ=⋅+−
iiARFfiiiARFfi
iiARFfifi
PHYPpPHYPp
PHYPpp (19)
)|3()),3(1( )|4()),4(( 10,
2
, γγγγ =Γ=⋅−==Γ=⋅ iiARFfiiiARFfi PHYPpPHYPp (20)
其中pi,f(y,γ)是工作站i在SNR γ的情形下
使用 PHY mode y (y 從 1到 4分別表示
DBPSK到CCK 11)時的封包傳送錯誤率，可
由(3)獲得。首先我們可以由圖1的BER vs. 
SNR曲線，並且給定K個工作站下列參數：
SNR (Γ1, Γ2…. ΓK)，PHY modes (PHY1, 
PHY2…. PHYK) ，封包大小 (FS1, FS2…. 
FSK)，從(2)計算得到誤碼率pi,e(y,γ) ；之後
由方程式(2)，(3)，(4)，(9)以及(9)的聯立方
程式解得(3)的pi,f(y,γ)以供圖4之ARF馬可夫
鏈模型使用。 
方程式(17) - (20)的建立是基於在穩態
(steady state)時，對於任何一個狀態(或稱是
PHY mode)而言，進入速率(arrival rate)會等
同於離開速率(departure rate)。例如在(18)
中，左側的式子表示從mode 2離開到mode 1
以及mode 3的速率；而右側的式子表示從
mode 1以及mode 3進入mode 2的速率。透過
以下的正規化方程式， 
1)|(
4
1
==Γ=∑
=j
iiARF jPHYP γ  (21) 
使用ARF在SNR γ情形之下選擇PHY mode y
的條件機率，PARF(PHYi=y|Γi=γ)可以被解得。 
 
圖4：使用ARF時802.11b PHY modes的馬可夫鏈模型
(m=2; n=10) 
4. 3. 4. 傳輸效能不規則 (performance 
anomaly) 
基於上述之理論模型，我們可以分析傳
輸效能不規則現象以及其對 WLAN 系統吞
吐量的影響。考慮在 802.11b WLAN 中有 K 
(K>=2)個工作站，其中 K-1 個工作站使用最
高傳輸速率 11 Mbps，只有 1 個工作站使用
較低的傳輸速率 (1，2，5.5，或 11 Mbps)。
所使用的系統參數如表 3 所示。假設通道狀
 12
工作站 B initial window size (IWS)縮小時的
變化。如圖所示，當工作站 B 的 IWS 為 32
時，工作站 B 的吞吐量約為 1.42 Mbps，小
於使用 OTS 的值(2.96 Mbps)。當 IWS 變小
時，工作站 B 使用通道的機會增加(同時工
作站 A 使用通道的機會減少)，所以工作站
B 的吞吐量增加，並且在 IWS=11 時超過使
用 OTS 的值。尤其是系統吞吐量提昇為約
7.22 Mbps to 6.37 Mbps(當 IWS 從 32 到 8
時)，均超過使用 OTS 的值 (5.92 Mbps)。由
此說明透過 PHY 和 MAC 的跨層設計可以
提升系統吞吐量並且同時調整工作站之間
使用通道的公平性。 
Throughput
0
1
2
3
4
5
6
7
8121620242832
Initial window size of host B
Th
ro
ug
hp
ut
 (M
bp
s)
Host A (with SNR of 20 dB)
Host B (with SNR of 10.5 dB)
 
圖 6：工作站 A (20 dB SNR)和 B (10.5 dB SNR)的吞
吐量 vs.工作站 B 的 initial window size 
我們提出的跨層最佳化鏈結調整演算
法主要分成兩個部份。第一，在通道品質下
降初期階段，演算法會先減少 MAC 層多工
存取參數 IWS 取代直接調低 PHY 層傳輸速
率以避免 performance anomaly 現象造成系
統吞吐量的下降；當通道品質持續下降到設
定的臨界點而使用 IWS 無法有效提升吞吐
量時，演算法即降低工作站傳輸速率。第
二，當傳輸速率調整時，基於工作站之間有
相同的通道使用時間可以達到最大的系統
吞吐量[11] [12]，演算法會根據不同的速率
採用不同的 IWS 以提供工作站之間使用通
道時間的公平性(time-based fairness)而非吞
吐量的公平性(throughput-based fairness)。 
 
圖 7：跨層最佳化鏈結演算法流程圖(d=2) 
由於 ARF 容易實作在 MAC 層而且是
目前大部份無線區域網路產品使用的演算
法，我們提出基於 ARF 的跨層最佳化鏈結
調整演算法以增進其實用性。假設工作站一
開始的傳送速率為 PHYx， IWS 的值為
IWSx。如果傳送端成功接收到回應封包(傳
送成功)連續 n 次，和 ARF 相同將傳送速率
往上升一級；如果傳送端未接收到回應封包
(傳送失敗)連續 m 次，和 ARF 不同的是，
PHY 層傳輸速率不會立即調降而是將 IWS
的值減少 w。接著封包每傳送失敗 1 次便將
IWS 的值減少 w。當傳送失敗超過 d 次時，
傳輸速率即下降。當傳輸速率調整時
(PHYxÎPHYy)，IWS 也會從 IWSx 調整成
IWSy 以提供工作站之間使用通道時間的公
平性(time-based fairness)。圖 7 呈現此演算
法(d=2)之流程圖。由於此鏈結調整演算法
考慮了實體層及媒體存取控制層之間的交
互影響並進行跨層效能的最佳化，相較於其
他只做 PHY 層速率調整的演算法而言，預
期將能提高系統吞吐量，並且同時維持工作
站之間使用通道的公平性。本計畫之執行成
表 Y04 
大學院校出席國際學術會議報告 
                                                             98 年 9 月 21 日 
報告人姓名 
 
王嘉斌 
 
服務機構
及職稱 
國立臺灣師範大學應用電子科技
學系助理教授 
時間 
會議 
地點 
2008/12/09-2008/12/12 
Yilan, Taiwan 
核定 
補助文號 NSC 97－2218－E－003－005 
會議 
名稱 
(中文) 
(英文)  IEEE Asia-Pacific Services Computing Conference (APSCC), 2008 
發表 
論文 
題目 
(中文) 
(英文)  A cross-layer link adaptation algorithm for IEEE 802.11 WLAN with 
multiple nodes 
 
表 Y04 
大學院校出席國際學術會議報告 
                                                             99 年 01 月 07 日 
報告人姓名 
 
王嘉斌 
 
服務機構
及職稱 
國立臺灣師範大學應用電子科技
學系助理教授 
時間 
會議 
地點 
2009/08/28-2009/08/31 
Vancouver, Canada 
核定 
補助文號 NSC98-2221-E-003-009 
會議 
名稱 
(中文)  
(英文)  IEEE Computational Science and Engineering (CSE),2009. 
發表 
論文 
題目 
(中文) 
(英文)  A Cognitive Approach to Achieve Fair Uplink and Downlink Utilities 
in Wireless Networks 
 
A cross-layer link adaptation algorithm for IEEE 
802.11 WLAN with multiple nodes* 
Chiapin Wang1 and Tsungnan Lin2,3 
1 Department of Applied Electronic Technology, National Taiwan Normal University, Taipei, Taiwan 
2 Graduate Institute of Communication Engineering, National Taiwan University, Taipei, Taiwan 
3 Department of Electrical Engineering, National Taiwan University, Taipei, Taiwan 
chiapin@ntnu.edu.tw  
Abstract—IEEE 802.11 Wireless Local Area Network (WLAN) 
PHYsical Layer (PHY) offers multiple data rates. In multi-rate 
WLANs, 802.11 Distributed Coordination Function (DCF) 
presents the phenomenon so called “performance anomaly”: 
when some hosts transmit at lower data rates, throughput of 
others at high rates will be restricted within the lowest rate, 
leading to the degradation of overall performance. Therefore, 
the link adaptation scheme for 802.11 WLAN should consider 
not only throughput of the observed host but also system 
throughput in order to optimize the overall performance. In 
this paper we propose a cross-layer link adaptation algorithm 
which improves system throughput by regarding the situation 
of PHY rate degradation more thoughtfully and critically, and 
meanwhile compensates the throughput of hosts with bad link 
qualities by applying differentiated channel access parameters. 
Simulation results demonstrate the effectiveness of the propose 
algorithm.
I. INTRODUCTION 
IEEE 802.11 Wireless Local Area Networks (WLAN) 
become increasingly popular in recent years due to the wide 
deployment of infrastructure and the prevalence of 
mobile/handheld devices. The IEEE 802.11 standards [1] on 
PHYsical Layer (PHY) support multiple transmission rates 
ranging from 1 Mbps to 54 Mbps by employing different 
Modulation and Coding Schemes (MCS). Determining one 
from multiple MCSs available according to channel 
conditions is referred to as Link Adaptation (LA), which 
aims at providing the transmitting host with reliable link 
qualities and high throughput as possible. Since there is a 
tradeoff between transmission reliability and achievable data 
rates, the effectiveness of the used LA scheme can 
significantly affect the performance of system throughput. 
Some LA schemes specific to IEEE 802.11 WLANs were 
proposed in previous works [2] - [7]. AutoRate Fallback 
(ARF) [2] is a simple and heuristic LA algorithm which has 
been adopted by most commercial 802.11 WLAN products. 
It dynamically selects a PHY rate by monitoring the number 
of received and missed acknowledge frames. A threshold-
based LA scheme [3] was proposed to improve system 
throughput by dynamically adjusting the thresholds between 
adjacent MCSs with the measurement of received signal 
strength. As shown from the simulation results this scheme 
can approximate theoretically maximum throughput in a 
single-host WLAN. The authors in [4] derived a closed-form 
function to express the throughput of 802.11a WLAN 
analytically, and based on the analysis they proposed a table-
driven approach to achieve best throughput by selecting the 
PHY mode depending on frame retry counts and channel 
conditions. In [5], a cross-layer rate adaptation scheme is 
proposed which adaptively selects a data rate according to 
PHY channel variations and application-layer requirements. 
Basically, most of these LA algorithms select the PHY 
modes which can achieve best throughput performance from 
the perspective of the observed host individually. In such a 
“selfish” manner, some hosts may degrade their transmission 
rates when the channels conditions become worse. However, 
802.11 Distributed Coordination Function (DCF) protocol at 
Medium Access Control (MAC) layer presents a 
phenomenon of “performance anomaly” [8] that some hosts 
using lower rates will restrict the throughput of others using 
high rates within the lowest rate and thus leads to the 
degradation of system throughput. This problem can be 
extremely severe to the WLAN which provides large-scale 
PHY rates, e.g. 802.11g [9] supporting rates ranging from 1 
Mbps up to 54 Mbps. Thus before rashly degrading the used 
rate, a host should take considerations carefully from the 
perspective of both its individual throughput and system 
throughput to improve overall performance. 
This paper investigates the performance of aggregate 
throughput in multiple-node wireless LAN. Since throughput 
achievable actually is determined by both the used PHY 
modes and adopted MAC-layer parameters, a host can 
improve throughput not only by selecting PHY rates which 
achieve better link qualities, but also by using higher-priority 
MAC parameters such as a smaller initial contention window 
which offers more transmission opportunities. However, 
little work about 802.11 LA strategies has considered using 
access priorities of MAC protocols in addition to adjusting 
PHY modes. We thus propose in this paper a cross-layer LA 
algorithm which improves system throughput with a 
deferring manner towards the degradation of PHY rates, and 
further compensates the loss of individual throughput due to 
worsened link qualities by applying smaller MAC-layer * This work was supported in part by Taiwan National Science Council under grant 97-2218-E-003-005. 
2008 IEEE Asia-Pacific Services Computing Conference
978-0-7695-3473-2/08 $25.00 © 2008 IEEE
DOI 10.1109/APSCC.2008.136
1162
B.  An example of IEEE 802.11b WLAN with LA schemes 
In this subsection we evaluate the impact of the applied 
LA scheme on throughput performance by analyzing the 
probability Px(PHYi=j|i=) associated with scheme x. We 
use an example of IEEE 802.11b WLAN with Optimal 
Threshold Scheme (OTS) [3] and ARF [2] respectively. 
IEEE 802.11b PHY employs 4 uncoded modulations, 
Differential Binary Phase Shift Keying (DBPSK), 
Differential Quadrature Phase Shift Keying (DQPSK), 
Complementary Code Keying 5.5 (CCK 5.5), and CCK 11 to 
provide the rate of 1, 2, 5.5, and 11 Mbps respectively at the 
2.4GHz band. With OTS, one from the 4 PHY modes is 
selected with SNR thresholds which perform theoretically 
maximum throughput in a single-host WLAN. Fig. 1 shows 
the BER vs. SNR of the 4 802.11b PHY modes provided 
empirically with Intersil WLAN product called HFA3861B 
in AWGN environments [3]. With these curves and a given 
packet size, we can obtain pi,e(j,) in (5), and consequently 
derive thri|PHYi=j,i= in particular with K = 1 to evaluate 
throughput of single-host WLAN with different PHY modes 
(j is from 1 to 4 to indicate DBPSK to CCK 11 for 802.11b). 
Fig. 2 presents the results with the packet size equal to 1500 
bytes. It is shown that the thresholds with maximum 
throughput are about 3.8 dB, 7 dB, and 10.7 dB in order. 
Thus the probability POTS(PHYi=j|i=) will be 1 if  is within 
the selecting range of mode j, or 0 otherwise. For example, 
the probability of selecting CCK 5.5, POTS(PHYi=3|i=) is 1 
in case of 7 dB =<  < 10.7 dB, and 0 in case of  < 7 dB or  
>= 10.7 dB. 
With ARF, the PHY mode to be used is determined by 
monitoring the number of received and missed acknowledge 
frames (Ack). If m successive Acks cannot be received 
correctly, the transmission rate is then degraded to the lower 
rate. If the sender successfully receives n consecutive Acks, 
it will raise the current rate to the higher order for the 
subsequent transmissions. The typical value of m and n is 2 
and 10 respectively adopted by Lucent Technologies’ 
WaveLAN-II products [2]. Fig. 3 shows the Markov chain 
model for the 4 802.11b PHY modes with ARF protocol 
with parameters m = 2 and n = 10. From this model we have 
the following equations: 
(6)
(7)
(8)
(9)
)i
)|3()),3(()|1()),1(1(
)|2())),2(()),2(1((
2
,
10
,
2
,
10
,


	
	
iiARFfiiiARFfi
iiARFfifi
PHYPpPHYPp
PHYPpp
)|4()),4(()|2()),2(1(
)|3())),3(()),3(1((
2
,
10
,
2
,
10
,


	
	
iiARFfiiiARFfi
iiARFfifi
PHYPpPHYPp
PHYPpp
)|3()),3(1( )|4()),4(( 10,
2
,   iiARFfiiiARFfi PHYPpPHYPp
1)|(
4
1

j
iiARF jPHYP 
|2()),2(( )|1()),1(1( 2,
10
,   iARFfiiiARFfi PHYPpPHYPp
, where pi,f(j,) is obtained from (4). Equations (6) - (9) are 
formulated by means of the fact that in steady state for an 
observed state (mode), the arrival rate (probability) is equal 
to the departure rate. For example in equation (7), the left-
side term indicates the departure probabilities from mode 2 
to both mode 1 and mode 3 while the right-side term 
indicates the arrival probabilities from both mode 1 and 
mode 3 to mode 2. It is noticeable that the transition 
probabilities between modes are formulated with pi,f(j,) 
instead of pi,e(j,) since a failure of transmission in multi-
host WLAN can be caused by packet collision also. With 
the following normalization condition imposed, 
IEEE 802.11b BER vs. SNR
1.E-06
1.E-05
1.E-04
1.E-03
1.E-02
1.E-01
-5 0 5 10 15
SNR (dB)
B
ER
DBPSK
DQPSK
CCK 5.5
CCK 11
Fig. 1 IEEE 802.11b BER vs. SNR 
(10)
, finally the conditional probability that PHY mode j is 
selected with ARF given SNR , PARF(PHYi=j|i=) can be 
derived numerically. 
Throughput in a single-host WLAN
0
1
2
3
4
5
6
7
8
123456789101112
SNR (dB)
Th
ro
ug
hp
ut
 (M
bp
s)
DBPSK
DQPSK
CCK 5.5
CCK 11
 
Fig. 2 Throughput of single-host 802.11b WLAN with the 4 PHY modes 
respectively (The packet size is equal to 1500 bytes) 
CCK 11 
CCK 5.5 
DBPSK 
DQPSK 
 
Fig. 3 The Markov chain model for the 4 IEEE 802.11b PHY modes with
ARF protocol using parameters m = 2 and n = 10 
1164
compensates the loss of individual throughput due to 
worsened link qualities by applying smaller IWS which offer 
more transmission opportunities. The key idea of our scheme 
is to efficiently make use of access priorities associated with 
DCF for improving throughput as possible instead of rapidly 
decreasing data rates which can lead to significant 
degradation of system throughput. Our cross-layer LA 
algorithm is developed based on ARF protocol for the simple 
and heuristic characters. The proposed algorithm is described 
as follows. When m successive Acks cannot be received 
correctly, the sender host decreases IWS by a value of w 
rather than degrades the data rate to the lower rate as ARF 
does. Later if an Ack cannot be received correctly once, the 
sender continues to decrease IWS by w. When the number of 
extra missed Acks reaches d, the data rate is eventually 
degraded to the lower level. The proposed algorithm with the 
parameter d=2 is shown in Fig. 6. 
IV. PERFORMANCE EVALUTION 
We conduct experimental simulations and provide 
numerical results to demonstrate the effectiveness of our 
proposed algorithm. The simulation scenario is set up as 
follows. There are 2 hosts in an infrastructure IEEE 802.11b 
WLAN. Each host transmits a saturated traffic flow to AP 
with basic CSMA/CA scheme (without RTS/CTS 
mechanisms). Assume that one host, named ideal-channel 
(IC) host, is close to AP with an excellent SNR of 20 dB and 
always uses the highest data rate of 11 Mbps for transmitting 
packets; the other, named error-prone-channel (EC) nodes, 
moves away from AP steadily with SNR uniformly 
decreasing from 12 dB to 1 dB. The system parameters used 
are shown in Table 1. 
The performance is indexed as aggregate throughput and 
individual throughput of a host. We compare the 
performance of our proposed scheme with that of ARF and 
optimal threshold scheme (OTS) which performs 
theoretically maximum throughput in a single-host WLAN. 
For ARF, we adopt typical values of 2 and 10 to parameters 
m and n respectively. In OTS, the used thresholds are 3.8 dB, 
7 dB, and 10.7 dB in order as shown in Fig. 2. For our 
algorithm, we use parameters m = 2 and n = 10 which are the 
same as ARF, and parameters d = 2 (rate-degradation is 
deferred for the period of missing extra 2 Acks) and w = 8 
(IWS is decreased by 8 once an extra Ack is missed). 
Fig. 7 presents the numerical results of Px(PHY2=j|2=), 
the conditional probability that PHY mode j (j=1~4, 
indicating DBPSK to CCK 11) is selected for EC host (i=2) 
given SNR  with various LA schemes x (x denotes OTS, 
ARF, or the proposed scheme). It is shown in Fig. 7 that the 
probability of selecting high-rate modes with OTS is lowest 
while that with the proposed scheme is highest. For example 
when  is 9 dB, the probability of selecting mode CCK-5.5 
and CCK-11 respectively is 1 and 0 with OTS, is 65.8% and 
34.2% with ARF, and is 40.2% and 59.8% with the proposed 
scheme. The proposed scheme performs higher probabilities 
of selecting high-rate modes than both OTS and ARF due to 
its deferring manner towards the degradation of PHY rates. 
Individual throughput of IC host and EC host 
respectively with different LA schemes is derived from 
Eq. (2) and shown in Fig. 8, while aggregate throughput is 
derived from (3) and shown in Fig. 9. It is observed that 
initially when SNR of EC host  is higher than about 11 dB, 
all these schemes have approximate performance in terms of 
both individual throughput and aggregate throughput (recall 
that SNR of IC host is assumed always as high as 20 dB). As 
 gets lower than 11 dB later, these schemes present different 
performances due to their different behavior of selecting 
PHY modes presented in Fig. 7. Generally, it is shown that a 
scheme which provides higher aggregate throughput would 
in contrast perform worse performance for EC host and vice 
versa due to the tradeoff between aggregate throughput and 
throughput of EC host in adverse channel conditions. It is 
observed that OTS provides the best throughput of EC host 
 
Fig. 6 The proposed cross-layer LA algorithm with parameter d=2 
DBPSK
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
123456789101112
: SNR of EC host(dB)
Pr
ob
ab
ili
ty
Optimal threshold scheme
(for single host)
ARF                            
(m=2, n=10)
The proposed scheme
(m=2, n=10, d=2, w=8)
 
DQPSK
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
123456789101112
: SNR of EC host(dB)
Pr
ob
ab
ili
ty
(a) DBPSK: Px(PHY2=1|2=)          (b) DQPSK: Px(PHY2=2|2=) 
CCK 5.5
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
123456789101112
: SNR of EC host(dB)
Pr
ob
ab
ili
ty
CCK 11
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
123456789101112
 : SNR of EC host(dB)
Pr
ob
ab
ili
ty
 
(c) CCK 5.5: Px(PHY2=3|2=)          (d) CCK 11: Px(PHY2=4|2=) 
Fig. 7 The results of Px(PHY2=j|2=), the conditional probability that PHY
mode j (j =1~4) is selected for EC host (i=2) given SNR  with various LA
schemes (the mode selected for IC host (i=1) is always CCK 11) 
1166
A Cognitive Approach to Achieve Fair Uplink and Downlink Utilities in 
Wireless Networks* 
 
 
Chiapin Wang1 and Kueihsiang Liang2 
 1 Dep. of Applied Electronic Technology, National Taiwan Normal University, Taipei, Taiwan 
2 Graduate Institute of Industrial Education, National Taiwan Normal University, Taipei, Taiwan 
chiapin@ntnu.edu.tw 
 
 
Abstract 
 
The paper investigates on fairness of utilities 
between uplink and downlink traffic flows in IEEE 
802.11 Wireless Local Area Networks (WLAN) with an 
infrastructure mode. We propose a cognitive resource 
allocation scheme to tackle the fairness problem. The 
proposed scheme is cognitive by using neural networks 
to on-line learn the nonlinear function between the 
adopted Medium Access Control (MAC) parameters 
and the corresponding throughput. Thus, the learned 
knowledge can be exploited to adjust MAC parameters 
dynamically toward the utility fairness between uplink 
and downlink flows. Simulations results demonstrate 
that our adaptive scheme can effectively provide fair 
uplink and downlink utilities in a varying 
heterogeneous WLAN environment.  
 
Introduction 
 
IEEE 802.11 Wireless Local Area Networks 
(WLANs) [1] become increasingly popular in the 
recent years with the wide deployment of 
infrastructures and the prevalence of mobile/handheld 
devices. In general, 802.11 WLANs employ an 
infrastructure mode in which an access point (AP) is 
used to forward packets between wireless and wired 
domains. “Downlink” refers to a traffic flow 
transmitted from AP to a given mobile station, while 
“uplink” refers to a flow with a reverse direction. 
Mostly, the 802.11 Medium Access Control (MAC) 
layer employs a contention-based channel access 
mechanism, named Distributed Coordination Function 
(DCF) for its distributed and simple manner. With 
DCF, all mobile stations including AP have the same 
opportunity to access the wireless channel. Thus, the 
total channel utilization of downlink traffic flows will 
be equal to a single uplink flow, i.e. 1 / (K+1) when the 
number of station is K. This feature can cause an 
unfairness problem between uplink and downlink 
flows. This problem can be even serious when the 
number of stations increases or when the load of 
downlink traffic is much heavier than that of uplink 
traffic. 
The problem of unfair channel utilization between 
uplink and downlink flows has been largely 
investigated in previous works [2] - [12]. In [2] the 
authors proposed an approach that reduces AP’s 
channel sensing time from DCF Inter-Frame Space 
(DIFS) to PCF Inter-Frame Space (PIFS) in order to 
meet the required utilization ratio for downlink traffic 
flows. This approach grants AP the highest priority to 
transmit its data frames immediately, but may cause 
the entire channel slots occupied by AP before the 
required utilization ratio is matched. In [4] the authors 
proposed the bidirectional DCF (BDCF) which 
provides a preferential treatment to downlink traffic by 
piggybacking AP’s data packets after acknowledge 
(ACK) frames. In general the load of downlink traffic 
is heavier than uplink traffic. But this approach will 
provide a ratio of downlink and uplink throughput up 
to 1. The work [7] developed adaptive schemes to 
achieve weighted fairness between uplink/downlink 
traffic flows by dynamically adjusting the backoff 
counters of AP and stations. The authors in [10] 
applied differentiated minimum Contention Windows 
(CW) for AP and wireless stations to tune their 
channel utilization ratio. In [11] the authors proposed a 
differentiated approach which involves 
multidimensional parameters including minimum CWs, 
Arbitration Inter-Frame Space (AIFS) and 
Transmission Opportunity (TXOP), to solve the TCP 
fairness problem between uplink and downlink traffic 
flows in 802.11e WLANs. 
* This work was supported in part by Taiwan National Science 
Council under grant 97-2218-E-003-005. 
2009 International Conference on Computational Science and Engineering
978-0-7695-3823-5/09 $26.00 © 2009 IEEE
DOI 10.1109/CSE.2009.115
22
Authorized licensed use limited to: NATIONAL TAIWAN NORMAL UNIVERSITY. Downloaded on December 30, 2009 at 01:33 from IEEE Xplore.  Restrictions apply. 
denoted by 
min,ist
CW  and 
ist
AIFS  respectively; To AP, 
the minimum CW and AIFS adopted is denoted by 
min,APCW  and APAIFS  respectively. To AP and station i, 
the allocated bandwidth is APJ and istJ respectively. 
The allocated bandwidths are determined by the 
adopted parameters of AP and stations. That is, 
)  , ,.........  , ,  ,(
),.....,(
min,min,min, 11
1
KK
K
ststststAPAP
ststAP
AIFSCWAIFSCWAIFSCWf
 JJJ      ( 1 ) 
Assume that there are M uplink flows and N 
downlink flows in the network. The utility for the ith 
uplink flow and the jth downlink flow is denoted by 
iup
U and 
jdown
U  respectively. Given the corresponding 
utility functions, the achievable utilities of all uplink 
and downlink flows can be determined by the 
bandwidth distributions. That is, 
) ,.........  ,(),.....,,.....(
111 KNM ststAPdowndownupup
gUUUU JJJ            ( 2 ) 
For the simplicity of analysis, we assume that all the 
flows in the network are QoS traffic flows. Consider 
that these QoS flows are with the same normalization 
factor, 
hU  of the unit-step function. Then the 
parameters which achieve fair uplink and downlink 
utilities can be chosen based on an optimization 
approach by maximizing the Jain fairness index [6] as 
follows: 
¦ ¦
¦¦
  
  

 M
i
N
j downup
N
j down
M
i up
fairness
ji
ji
UUNM
UU
J
1 1
22
2
11
))((
)(                             ( 3 ) 
The index has a range of (0, 1] to evaluate the utility 
fairness. The index value of 1 indicates the best 
fairness among uplink and downlink traffic flows. 
To maximize the Jain fairness index, Jfairness, each 
parameter is iteratively updated based on the gradient 
of Jfairness with respect to itself. To calculate the 
gradient, the knowledge of )(f  is needed. However, 
)(f  strongly depends on the communication 
environments such as the collision probability and the 
channel conditions. For example, if one station 
experiences link quality degradation, its bandwidth 
sharing as well as that of others will be influenced, 
resulting in a change of overall bandwidth distribution. 
Hence )(f  is a nonlinear, complicated, and time-
variant function which is rather difficult to be depicted 
with a given analytical formula. We are thus motivated 
to exploit a neural network (NN) to model the 
complicated function )(f . NNs have been reported to 
be effective in modeling the complex relationship 
between the input signal and the output signal, and 
have outstanding generalization performance [22]. 
Thus we can use the learned )(ˆ f  to evaluate the 
gradient of Jfairness with respect to each parameter for 
maximizing Jfairness by the technique of the back-
propagation manner. The function-modeling and 
parameter-determining procedure of our adaptive 
scheme will be described in the following subsection. 
 
2.3. Proposed Neural Network Based Adaptive 
Algorithm 
 
We exploit multilayer perceptron (MLP) which is 
the most common representative of NNs to model the 
correlation function between the parameters and 
corresponding throughputs )(f . Fig. 2 shows the 
architecture of the exploited MLP (indicated as “the 
original neural networks for modeling the nonlinear 
function” inside the dotted line). It consists of 2(K+1)-
x-(K+1) sensory units at the input layer, the hidden 
layer, and the output layer respectively to model the 
nonlinear function from the 2(K+1) parameters to the 
corresponding K+1 throughputs. The output of the ith 
neuron at the lth layer can be described as: 
¦
 
 1 - 
1
)(  )1( )(  )(
lN
j
ijiji llallu TZ               ( 4 ) 
1,2    ;1    ))((  )(  dd lNiluhla lili              ( 5 ) 
, where Nl is the number of neuron at the lth layer; ui(l) 
and ai(l) are the activation and output values of the ith 
neuron at the lth layer. The input units are represented 
by ai(0) and the output units by ai(2). Ȧij(l) refers to the 
weight connecting the output from the jth neuron at the 
(l – 1)th layer to the input of the ith neuron at the lth 
layer. și(l) refers to the bias associated with the ith 
neuron at the lth layer. The used transferring function 
)(lh  is sigmoid at hidden layer (l=1) and is linear at 
output layer (l=2). 
The nonlinear function can be modeled with MLP 
gradually by recursively adjusting Ȧij(l) and și(l) to 
minimize the mean squares error (MSE) between the 
achievable throughput iJ  (we denote the ith throughput 
1 1
vw1
=
1 1
a1(0) a2(0)
vw2
=
a1(1) a2(1) ax-1(1) ax(1)
Targets: 
The achievable throughputs
a1(2) a2(2) aK(2) aK+1(2)
Virtual input layer ai (-1)
=1, i=1, 2..….2K+2
Virtual weight layer vwi
= backoff parameters
, i=1,2….2K+2
Input layer ai(0) : 2K+2
Hidden layer ai(1): x
Output layer ai(2) : K+1
The original neural networks for modeling the nonlinear function
The extended neural networks for adjusting the parameters 
vw2K+2
=
a2K+2(0)a2K+1(0)
¦ ¦
¦¦
  
  

 M
i
N
j downup
N
j down
M
i up
fairness
ji
ji
UUNM
UU
J
1 1
22
2
11
))((
)(
……..............................
vw2K+1
=
……..............................
……..............................
…….........................
……...............
}.....,{
1 KststAP
JJJ
iE
Kst
AIFSAPAIFSmin,APCW min,KstCW
The Jain fairness index:
 
Fig. 2. The exploited neural network architecture 
24
Authorized licensed use limited to: NATIONAL TAIWAN NORMAL UNIVERSITY. Downloaded on December 30, 2009 at 01:33 from IEEE Xplore.  Restrictions apply. 
from channel degradation with BER of 1E-5. Assume 
that uplink and downlink traffic flows are with 
different throughput demands to meet their own video 
QoS requirements. For uplink and downlink video 
traffic, the minimum throughput requirement is 200 
Kbps and 400 Kbps respectively for the basic video 
quality. The used utility functions of video traffic is a 
unit-step function [20] with respect to the allocated 
throughput (with the unit of Kbps), as depicted in Fig. 
1. The unit-step function for video traffic, UVI (r), is 
numerically with Uh = 1 and with rh = 200 or 400 for 
uplink and downlink traffic respectively, i.e. hard QoS 
with the throughput requirement of 200 Kbps or 400 
Kbps. We assume that all the flows are transmitted at 
the data rate of 1 Mbps so as to conduct a transmission 
scenario of scarce resources among flows. 
We compare the proposed adaptive scheme with the 
parameters setting specified in IEEE 802.11e 
Enhanced Distributed Coordination Function (EDCF) 
standard [21]. With EDCF, the video traffic is 
involved into AC_VI (access category of video), 
adopting prioritized parameters in the unit of slotted 
time as follows: the minimum CW, CWmin[VI] = 15, the 
maximum CW, CWmax[VI] = 31, and AIFS number, 
AIFSN[VI] = 2. In our adaptive scheme, the adaptation 
space of the minimum CW is from 3 to 31, and that of 
AIFS number is from 2 to 5, while the chosen values 
will be rounded to the closest integer. In the function-
modeling stage, the training data is five sets of most 
recently adopted parameters and the corresponding 
throughputs, and an on-line learning strategy is applied, 
i.e. NN is updated when a new training data is 
available. NN weights and biases are adjusted till MSE 
falls below 1E-12 or the training epochs are over 1000 
times. In the parameter-determining stage, the 
parameters are updated with the adjusting rate ȝ of 0.1. 
Fig. 3 shows the level of MSE varying with the 
adaptation sequences, i.e. the number of times the 
parameters being adjusted. It is shown that MSE 
continues decreasing when NN learns the function 
gradually. While the channel quality changes (as BER 
of the downlink flow deteriorates from 5E-6 to 1E-5) 
during the sequence of 10, MSE rises immediately due 
to the changes of the nonlinear function. With the 
learning capability of NN and the up-to-date teacher 
data, MSE decreases again after the adaptation 
sequence of 11. The results demonstrate that our 
adaptive algorithm can model the communication 
system in real-time under varying channel conditions. 
Fig. 4 and 5 show the adaptation trajectory of the 
minimum CW and AIFS number respectively of uplink 
and downlink traffic. It is shown that the parameters 
are adjusted adaptively and eventually converge to 
steady values while the gradients of the Jain fairness 
index with respect to them have been calculated 
accurately. The results demonstrate that our algorithm 
can effectively adjust the multidimensional parameters 
simultaneously to maximize the Jain fairness index 
under diverse and varying channel conditions. 
Fig. 6 presents throughput of a single uplink or 
downlink flow with 802.11e EDCF and the proposed 
adaptation scheme respectively. It is shown in Fig. 6 
that the downlink throughput with 802.11e EDCF is 
277 Kbps initially and comes to 254 Kbps as 
communication environments change (BER becomes 
1E-5 from 5E-6) while the corresponding utility is 0 all 
the time (with hard QoS 400 Kbps). In the meanwhile, 
the throughput of an uplink flow with 802.11e EDCF 
is 286 Kbps initially and comes to 289 Kbps as 
communication environments change, which much 
exceeds the requirement for basic video QoS (200 
Kbps) and the utility level is 1. It is observed that the 
utility fairness between uplink and downlink flows is 
Mean square error
1.E-13
1.E-12
1.E-11
1.E-10
1.E-09
1.E-08
1.E-07
1.E-06
1.E-05
1.E-04
1.E-03
1.E-02
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
Adaptation sequence
M
SE
Fig. 3. The mean squares error varying with the adaptation 
sequence 
The adaptation trajectory of minimum contention windows
8
10
12
14
16
18
20
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
Adaptation sequence
M
in
im
um
 C
W
Downlink flow Uplink flow
Fig. 4. The adaptation trajectory of minimum contention windows
of downlink and uplink flows 
The adaptation trajectory of AIFS number
1
2
3
4
5
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
Adaptation sequence
A
IF
S 
nu
m
be
r
Downlink flow Uplink flow
Fig. 5. The adaptation trajectory of AIFS numbers of downlink and 
uplink flows 
26
Authorized licensed use limited to: NATIONAL TAIWAN NORMAL UNIVERSITY. Downloaded on December 30, 2009 at 01:33 from IEEE Xplore.  Restrictions apply. 
