 -2-
models include rainfall forecasting model, tide forecasting model, and inundation forecasting 
model. Through these modules, it is possible for PIFS to model and forecast the regional flood 
inundation area, depth, and duration in the study area. The model related designed modules are 
used to control the process of modeling for inundation related models, compile the model input, 
parse the model output, and present the simulation results. By using the cluster computing 
technique, PIFS will be able to achieve high performance computing under PC cluster platform 
obviously. 
Keywords: Physiographic Inundation Forecasting System, PC Cluster, Cluster Computing. 
二、緣由與目的 
有效率的解決問題一直是科學家追求的目標，電腦的出現加速了科學發展的腳步。礙
於電子元件的物理上限，單處理器的電腦系統始終無法突破計算速度的瓶頸。不斷蓬勃發
展的平行處理技術，克服了處理器速度無法躍進式提昇的老問題。從傳算器(Transputer)，
到平行訊號處理器(Parallel DSP)的應用，再到二十世紀末的個人電腦零組件之神速進步，
使得利用個人電腦組成強大功能的分散平行處理系統，得以有機會予以實現。近幾年來，
由於高速的微處理器及記憶體元件，加上高速網路卡及智慧型網路交換器，不但降低了單
一計算節點的運作成本，也相對提昇整個分散平行處理系統所能具有的工作效能，此外，
圖形顯示元件及儲存設備性能的提升，再加上各關鍵元件之容易取得及不虞匱乏，使得將
一群個人電腦透過高速網路連接，並使用一標準介面程式，所形成之具延伸性、高效能且
可靠性強的計算平台得以實現，藉由「群策群力」的方式，達到計算能量加速的目的，得
以滿足需要巨量計算之應用程式的需求，由於其計算能力不亞於傳統的超級電腦，而且還
具有系統建置容易、價格低廉、具延伸性(Scalable)、易於客製化(Customize)、維護容易等
優點，此個人電腦高速叢集計算系統平台，儼然已成為工商應用之最佳計算平台。 
個人電腦高速叢集計算系統平台(PC Cluster Computing System Platform)，可應用在科
學與工程計算，使規模較小的實驗室，亦能擁有一高效能的平行計算環境，提升模擬的解
析力與複雜度；如原子尺度(奈米)工程之問題。其已在天文宇宙、電波解碼、星體觀測、高
能物理、氣候預報、原子分析、分子動力模擬、相似度搜尋、奈米材料、光電切割、統計
機率、結構碰撞、EDA、CAD/CAE/CAM 等領域，大幅節省較以往所需運算時間，而被證
實其為可行且有效之計算平台[1]。故而吸引並促使國內外各大研究機構，相繼投入「PC 
Farm」之叢集技術(Clustering Technology)研究與應用。因此，目前「PC Farm」已在各國蔚
為新的潮流，如何將更多的個人電腦透過網路，有效的連結在一起，組合更有效的計算平
台，藉平行處理技術與分散式計算技巧，運用有效改善且日趨複雜的處理程序，充分利用
網路平行資料處理服務的概念，形成更有創意、更大格局、更具前膽性的研究及應用環境，
已成為廣泛注目的焦點。目前，全球最快超級電腦前 500 大排行榜(www.top500.org)中，高
速運算電腦叢集系統得到愈來愈多的席位與肯定，其中國家高速電腦中心亦有兩部電腦叢
集系統列入排名，分別位居第 135 名與第 301 名(Formosa Cluster)。而且，截至 2004 年 11
月，叢集型 Intel 系統於排行榜中佔有 63.6 ﹪的席次。一年前，採用 Intel 平台的叢集系統
在排行榜中僅佔有 189 個席次(佔有 37.8 ﹪的席次)，如今迅速倍增至 318 個席次。 
臺灣地處溫帶與熱帶交界的副熱帶地區，又位於歐亞大陸與太平洋的交界地區，屬於
典型的副熱帶季風區，天氣變化明顯，故常有颱風、豪雨、乾旱與寒流等天然災害發生，
 -4-
地文性淹水模式；而管理模組是由資料前置處理模組、模式控制處理模組與資料後置處理
模組所組成，以便自模式資料庫產生模式輸入資料檔、輸入模式控制資料、控制模式啟動
及終止執行、匯入模式輸出資料檔至模式資料庫；模式輸入／輸出資料樣板檔編輯器，是
用以制定模式輸入／輸出資料樣板檔，為資料前/後置處理模組匯出/匯入資料定下準則，以
進行模式輸入相關資料匯出成模式輸入資料檔與模式輸出資料檔匯入模式資料庫等作業；
而模式資料庫內至少應包括模式相關地文及水文資料、模式參數資料、模式控制資料與模
式模擬演算成果資料。藉由管理模組可將模式資料庫內資料予以處理、分析與組合，以利
模式模擬演算，預報淹水規模、態勢及可能災情，以便提供更正確之預報資訊。 
故本計畫擬用 16 部個人電腦來建構具可延伸性效能的高速叢集計算平台，研究支援使
用及管理此一高速叢集計算平台的相關技術，並應用叢集計算、平行處理的技術與分散式
計算的技巧，開發具高速計算與預報能力之「地文性淹水預報系統」，銜接雨量預報模式、
潮位預報模式及地文性淹水預報模式，於此高速叢集計算平台，進行預報模式即時模擬演
算與淹水預報，以期更精確且更有效率的預報雨量與潮位、並能即時模擬演算各種可能之
淹水規模，預估其可能洪澇淹水態勢，提供更正確的洪澇防災預報、預警決策資訊，以有
效減免洪澇淹水災害損失。 
三、研究方法、進行步驟及執行進度 
壹. 個人電腦高速叢集計算平台 
1993 年秋天，美國航太總署的 Goddard 太空飛行中心，正式成立 Beowulf 計畫，1994
年初，計畫小組正式成立。1994 年末，第一代 Beowulf 系統架設完成，名之為 Wiglaf。從
之而後 Beowulf 系統變成個人電腦叢集的代表，個人電腦叢集雖未達全面取代超級電腦的
地步，但是，其優異的價格性能比及快速的性能與技術提升，使個人電腦叢集如野火燎原
般快速的蓬勃發展與普及。就技術面而言，叢集計算(Cluster Computing)基本上是一種平行
處理電腦系統的專業運用，透過緊密互連的網路，建構在一群獨立完整的電腦主機，同時
分工處理單一工作。此分散式平行處理系統架構很容易利用現行的個人電腦或工作站進行
整合。叢集計算系統可以視為一種區域性的運算系統，由同一網域內互連的獨立網路電腦
主機及大量儲存裝置所組成，並常藉在線式不斷電系統(On-Line UPS)，確保其電力品質，
讓叢集計算系統於市電中斷時，得以及時正常停止系統運作。這些互連的電腦主機，大都
至於同一電腦機房中，被視為一部完整的電腦系統，並由一系統主控電腦，透過電腦控制
台切換器(KVM Switch)所管控。這些電腦主機可以是單 CPU 或對稱式多 CPU 的電腦，以
高速寬頻網路互相連接於網路交換器(Switch Hub)，進行訊息與資料之交換與傳輸，並藉網
路偽裝技術，將 IP 群偽裝成唯一可供外部連繫之 IP，且以防火牆將內部網路與外部網路予
以隔離，以確保網路安全，提高系統穩定度。茲將本計劃所擬建置之 16 部個人電腦叢集計
算系統平台架構，表示如圖 4 所示，此平台擬架構於 64 位元作業系統下，並藉 MPICH2
之 64 位元平行處理程式庫，輔助建立具叢集計算能力之地文性淹水預報系統。 
貳. 地文性淹水預報模式 
由於降雨期間地表逕流、漫地流及渠流之匯聚現象與暴雨淹水氾濫過程相同，因此本
研究以此擬似二維淹水模式理論發展地文性淹水模式(Physiographic Inundation Model，PI
模式)，模擬複雜地形、地物、排水路與河系主、支流分布地區之洪水傳播態勢與洪澇淹水
情形。由於地文性淹水模式屬分布型模式(distributed model)，因此應用此模式演算區域降雨
 -6-
( ) ( )
25425400
8.02.0 2
−=
+−=
CNS
SPSPP iiei  (2) 
式中： 
iP  為累積降雨量(mm)； 
eiP  為累積有效降雨量(mm)； 
S  為潛在最大滯流量(mm)； 
CN  為 curve number 之值。 
相鄰兩分區之水流交換型式可歸納為川流連接型、堰流連接型與箱式涵洞連接型此三
種型態，各型態之分區流量律概述如下： 
a. 川流連接型：若相鄰兩分區間水流流動時無局部障礙，且可使用平均阻力係數計算流動
阻力時，其流況屬川流連接型，以曼寧公式為分區流量律。 
b. 堰流連接型：若相鄰兩分區間由道路或堤防區隔，則相鄰兩分區間之流況屬堰流連接型，
即視道路或堤防為寬頂堰，以堰流公式為格區流量律，而堰流型態可區分為自由堰流與
潛沒堰流，並依相鄰兩分區之水位與堰頂高程之關係，自動以自由堰流或潛沒堰流方式
計算溢流量。 
c. 箱式涵洞連接型：若相鄰兩分區間之分界為道路，道路下有箱式涵洞，則相鄰兩分區間
之流量關係為箱式涵洞型。此種流量關係較為複雜，至少包括堰流、閘流及管流三種流
量公式，模式將依相鄰兩分區之水位、涵洞底部高程與涵洞垂高之關係，自動以自由堰
流、潛沒堰流、閘流或管流方式計算流量。 
茲再將模式之水流連續方程式之離散方式、求解條件、演算時距與演算流程分述如下： 
(1) 水流連續方程式之離散化： 
由如圖 5 所示之分區，可知若有 N  個分區，則有 N  條如(1)式之常微分方程式。任
兩相鄰分區間流量 kiQ , ，可由此兩分區之水位 ki ZZ , ，依據流量律求得。本文應用有限差
分法離散任一分區 i  之水流連續方程式，所得之差分式如下： 
∑+=ΔΔ k kieiisi Qpt
Z
,A  (3) 
上式中 siA ， iZΔ  及 eip  各表示 i  分區由 nt  時刻至 1+nt  時刻之平均水表面積，水
位增量及單位時間之有效降雨量； nn ttt −=Δ +1 ；而 kiQ ,  為 i  分區與相鄰 k  分區間之流
量，可表示如下式： 
n
ki
n
kikikiki QQZZQQ ,
1
,,, )1())(),(( θθττ −+=≡ +  (4) 
將(4)式代入(3)式可得： 
})1({ ,
1
, ∑∑ −++=ΔΔ + k nkik nkieiisi QQpt
ZA θθ  (5) 
上式中，τ  為 nt  時刻與 1+nt  時刻間之任一時刻， 1+≤≤ nn tt τ ；θ  為加權係數； nkiQ , ，
1
,
+n
kiQ  各表示 nt  時刻與 1+nt  時刻由 k  分區流進 i  分區的流量。若取 0=θ ，則為顯
 -8-
時刻水深之 5.0±  倍。若超過，則減少演算時距，並回到前一時刻重新計算。 
c. 演算時距前後，相鄰兩分區間之水流流向不得改變。若流向改變，則須減少演算時距，
並回到前一時刻，先計算至流速為零之時刻後，再往下一時刻計算。 
d. 演算時距前後之所有分區最大水深差量不宜過小。若過小，則在不影響數值穩定考量下，
加大演算時距，以進行下一時刻計算。 
(4) 模式演算流程 
欲進行淹水規模預報，只需將暴雨事件的雨量及潮位預報結果，於地文性淹水模式演
算時適當的饋入模式分區中，讓模式演算時能取用預報資料，即可模擬該預報雨量及潮位
下可能的淹水規模，藉以進行區域洪澇預報。茲將此地文性淹水預報模式之演算流程，示
如圖 6。 
四、本年度成果與討論 
本計畫擬以三年進行研究工作，本年度計畫為之第一年度計畫。已完成 64 位元個人電
腦叢集計算平台(Gigabit 乙太網路架構)之第一期硬體(四部 64 位元個人電腦主機、主控台
螢幕、電腦控制台切換器及 Gigabit 網路交換器等)採購與建置工作，第一期建置所得計算
平台之如圖 7 所示。本年度計畫並已完成第一期運轉所需之 64 位元作業系統與 32 位元程
式語言編譯器與 32 位元科學繪圖程式庫之安裝與測試工作(原擬在第二期規劃中，採購 64
位元程式語言編譯器與 64 位元科學繪圖程式庫，以取代 32 位元版本)。茲將本年度計畫所
得之成果條列如下： 
(1) 完成個人電腦叢集計算平台建置。 
(2) 完成地文性淹水預報模式初步建置及功能測試。 
(3) 完成地文性淹水預報系統初步試做及功能測試。 
(4) 完成雨量預報模式初步研究。 
五、實例探討 
由於嘉義地區之河川流域及沿海地區常飽受淹水之苦，故本研究以高速公路以西至台
灣海峽、八掌溪以北之八掌溪集水區、朴子溪以南之朴子溪集水區與布袋沿海集水區為實
例探討區域，此區域範圍如圖 8 所示。此區域之數值高程分布狀況，如圖 9 所示，其地勢
走向大致是由東北向西南高度遞減。此區域之各類型土地利用分布情形與表土質地分布狀
況，分別如圖 10 與圖 11 所示。因為此區域曾於賀伯颱風過境期間遭受嚴重水患﹐故本研
究嘗試以地文性淹水預報系統預報賀伯颱風暴雨之淹水過程。本研究依據嘉義沿海地區之
地形､地物﹐以及排水路狀況等﹐將此區域劃分為如圖 12 所示之 317 個模式分區。若將暴
雨事件的潮位與雨量預報結果﹐於地文性淹水預報系統模式演算時適當的饋入﹐讓模式演
算時能取用預報資料﹐即可模擬於該預報潮位與雨量下的淹水規模。限於本年度計畫研究
在降雨預報模式及潮位預報模式都尚未建立之條件下，本研究以賀伯颱風期間之降雨及潮
位歷史紀錄，視為各預報時間點之降雨及潮位預報值，藉以進行區域淹水預報。經淹水預
報模式演算所得賀伯颱風暴雨之最大淹水深度分布如圖 13 所示﹐若將此模式演算結果與前
 -10-
潮位預報模式
資料前置處理 模式控制管理 資料後置處理
管理模組
地文性淹水預報系統
模式資料庫
水文資料地文資料 模式參數資料 模式控制資料
模式輸入資料樣板檔 模式輸出資料樣板檔
模式輸入/輸出資料樣板檔編輯器
雨量預報模式
模式庫
地文性淹水預報模式
模式模擬演算成果資料
 
圖 2  地文性淹水預報系統架構 
即時資料收集
資料前置處理
資料檢視資料庫
降雨資料 潮位資料
雨量預報模式 潮位預報模式
淹水規模預報
地文性淹水預報模式
潮位特性資料降雨特性資料
模
式
參
數
線
上
修
正
預報校正
流域特性資料
雨量預報 潮位預報
資料後置處理
模式輸入資料樣本檔
模式輸出資料樣本檔
模
式
控
制
管
理
 
圖 3  地文性淹水預報系統執行流程 
 -12-
 
圖 6  地文性淹水預報模式之演算流程 
 
圖 7  第一期建置所得計算平台 
 -14-
 
圖 10  嘉義沿海地區土地利用分布情形 
 
圖 11  嘉義沿海地區表土質地分布狀況 
