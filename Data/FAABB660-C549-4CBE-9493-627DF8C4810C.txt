	  I 
目錄 
前言 ..............................................................................................................................1	  
研究目的 ......................................................................................................................1	  
文獻探討 ......................................................................................................................2	  
研究方法 ......................................................................................................................2	  
1. 資料描述及前處理.....................................................................................2 
2. 共分群方法 .................................................................................................3 
3. 三階段式的分群.........................................................................................3 
4. 重複式交叉分群.........................................................................................5 
結果與討論 ..................................................................................................................6	  
1. 分群評量方法.............................................................................................6 
2. 廣告分群評量結果.....................................................................................6 
3. 使用者分群評量結果 ................................................................................7 
4. 雙維共分群評量分析 ................................................................................8 
5. 結論............................................................................................................10 
參考文獻 ....................................................................................................................10	  
	  1 
前言 
網路廣告是一種廣告行銷的形式，主要是透過網際網路來刊登廣告。Ad$Mart
則是Umatch1社群網站所推出的一個網路廣告服務，Umatch 是標榜奠基在經營自
我的Web3.0基礎上的社群網路平台，以金融理財為主的內容提供者。一方面透過
如財經奧林匹亞、全球動態資產配置、創意履歷等專業競賽聚集眾多的人才；另
一方面配合Ad$Mart社群廣告經濟平台，讓使用者主動挑選廣告放置於個人空間
中(Self-Portrait)，做為廣告的代言人。有別於Google Adsense所提供的contextual 
advertising行銷方式。Umatch服務包含社群入口、Lohas生活模式解析、Ad$Mart、
廣告連線大樂透、Self-Portrait、討論區等內容。 
Ad$Mart與Google Adsense一樣對廣告主有低廉的廣告成本，以及打破80/20定
律的長尾經濟效益優點。最大不同之處在於，透過Ad$Mart使用者可以分享利潤
為自己帶來收益。因此在Self-Portrait中同時成為廣告的代言人的同時，系統會依
據廣告每日金額提撥一定比例的利潤給使用者。由於Ad$Mart採取與使用者分享
利潤，並且由使用者挑選廣告的方式經營，在商業模式上與目前網路的廣告收費
方法已有區隔，但是如何提供廣告主更具體的流量，以及提供使用者最適合的廣
告，則是創造廣告主、使用者與平台三贏的關鍵。 
本篇論文著重在利用分群演算法對廣告及使用者進行分析。其中資料集包括
廣告特性資料、廣告與使用者鏈結資料以及使用者的Lohas生活模式問券資料。
我們提出一種基於單向分群為主的共分群(Co-clustering)演算法，透過單向分群的
方式對廣告資料及使用者Lohas資料及廣告與使用者鏈結資料進行分群，並交替
參照每一階段的廣告群和使用者群，重複交替行與列進行新階段的單向分群，希
望透過共分群呈現更好更容易解讀的結果。 
研究目的 
本篇論文的主軸主要專注在分群實驗，一方面要將不同廣告做適當的分群，
一方面也要了解使用者是否有不同族群的現象。藉以針對不同廣告主提供合適的
建議以吸引適當的使用者。讓廣告主能夠利用最低的成本以獲得最大的廣告效
益。傳統的分群架構，主要針對資料矩陣中的列，做單向分群，並將行的資料視
為資料屬性。以廣告與使用者矩陣來說，可以對廣告做分群，或是將矩陣轉置，
對使用者做分群。然而這樣分別進行分群結果，無法讓我們了解相同類型廣告和
相同類型使用者之間的關係，我們希望知道的是甚麼樣類型的廣告會被什麼樣類
型的使用者點選，而不是僅侷限於個別使用者的點選廣告模式分析。 
我們主要提出兩種不同的共分群方法：三階段式分群 (3-staged)及重複式交
叉分群(Iterative Cross Co-Clustering, ICCC)，運用於使用者相關資料集來評估效
能。為有效地評估本研究所提出的方法，我們藉由分類的方法來產生分群的依
據，並以Precision, Recall 及 F-Measure為評估標準。此外，為使驗證方式更佳完
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  
1	   http://www.morgenstern.com.tw/users2/index.php/u_match1/	  
	  3 
(N)、鏈結當日廣告的總活躍點數(select_score)。最後彙整後一共有463個廣告
與22廣告特性，構成我們的廣告資料矩陣。 
II. 使用者資料矩陣(User matrix)：針對使用者，我們建立個別資料矩陣，包含
的屬性主要依據使用者回答生活模式解析(LOHAS Game)的問卷所產生，其
中問卷主要涉及24個生活模式解析問題，每個屬性均為類別型資料。系統註
冊的使用者雖有二萬多人，但同時有做過LOHAS Game及參與廣告鏈結的使
用者有1685人。 
III. 廣告-使用者鏈結資料(Ad-user link matrix)：原始廣告與使用者鏈結資料包含
了廣告播放日期(play_date)、廣告代號(ad_id)、鏈結使用者代號(uid)、鏈結使
用者活躍積分(active_score)、使用者創建廣告鏈結的時間(create_time)。我們
將原始資料整理成使用者×廣告矩陣，稱為使用者-廣告鏈結矩陣 (user–ad 
matrix)，矩陣中的值代表使用者鏈結特定廣告的總次數。其轉置矩陣則為廣
告-使用者矩陣。 
2.  共分群方法 
本篇論文主要針對廣告資料的分析為主，使用者的資料分析為輔，主要是因
為廣告資料有了廣告特性的描述，以及廣告與使用者之間的鏈結關係(Ad-user 
link)，這部分資料比較齊全；而使用者的部分，雖有LOHAS生活模式解析資料然
而並不是所有使用鏈結廣告的使用者皆會填寫這兩份解析問卷。 
我們希望從這些資料中，去分析哪些廣告的特性是相同的，會被鏈結的；哪
些廣告特性的設定會使這隻廣告的鏈結數量變少。同樣的針對使用者部分，我們
希望藉由資料，找到是否具有相同特性的使用者，均會去鏈結相同特性的廣告，
舉例來說，會去鏈結廣告金額較高的使用者，使否也會鏈結其他高金額的廣告。 
我們分析廣告資料的工具，是利用分群的方式，來找出相似特性的廣告和使
用者。傳統的分群方式主要是單向的將資料矩陣中的列或行資料進行分群，而這
樣的分群方式，僅能看出其中一項分群的特性，如果我們同時需要對行與列兩種
資料進行分群，我們可用共分群的方式達成。 
我們首先使用傳統的分群方式，分別對廣告資料矩陣、使用者資料矩陣進行
列資料的分群，產生廣告群及使用者群；接著結合使用者-廣告鏈結矩陣調整分
群群結果。我們提出兩種分群方式，第一種是三階段式分群(3-staged)，第二種是
重複式交叉分群(Iterative Cross Co-clustering, ICCC)，透過這兩種分群方式，我們
可以同時對廣告與使用者做分群。 
3.  三階段式的分群 
關於三階段式的分群，我們分為兩個部分，一個為根據廣告資料的三階段式
分群(3-staged clustering ad based)，另一個為根據使用者資料的三階段式分群
(3-staged clustering user based)，而三階段式的分群包含了三個步驟，每一個步驟，
均使用K-means來分群，其疊代數(iteration)設為1000。底下我們將分別介紹以廣告
	  5 
群，產生初始使用者群Û0。 
第二階段：我們參考第一階段所產生的使用者群Û0，我們將廣告與使用者矩陣，
依照公式(2)，產生廣告與使用者群的矩陣，並用K-means對廣告做分群，產生廣
告群Â0。 
第三階段：我們參考第二階段的廣告群(Â0)，將使用者廣告矩陣參考公式(1)，以
產生我們的使用者與廣告群的矩陣，並將此矩陣與使用者Lohas資料矩陣合併，
對使用者進行分群，以產生我們最終的使用者群Û。 
4.  重複式交叉分群 
三階段的廣告分群只能夠單獨的對廣告資料及鏈結矩陣分群，或對使用者
Lohas資料及鏈結矩陣做分群，並未同時參照廣告資料及使用者資料。重複式交
叉分群主要是改良三階段式的分群結果，同時考慮廣告資料及使用者Lohas資料
矩陣，並交叉驗證分群結果。在進行重複式交叉分群時，我們一樣在各個階段使
用K-means做分群，我們分別對廣告資料矩陣與使用者Lohas資料矩陣做分群，分
別產生廣告群及使用者群結果。接著如同3-staged方式，分別與廣告鏈結矩陣和
使用者鏈結矩陣合併，經過重複式分群，產出我們最終的廣告群和使用者群結
果，詳細演算如圖二所示。 
 
圖二 重複式交叉分群 
第一階段：我們擁有的初始資料是廣告資料矩陣和使用者Lohas資料矩陣，首先
我們先將廣告資料矩陣，進行K-means分群，產生廣告群(Ad clusters, Â0)。對使用
者Lohas資料矩陣，我們將使用者的問卷資料，當作是目錄(categorical)資料，對使
Iterative Cross Co-clustering Algorithm 
Input: Ad feature matrix (Ad), User lohas matrix (User), and Link 
matrix (Link) 
1. Initial clustering: 
a. Apply K-means to Ad matrix to get initial ad clustering Â0 
b. Apply K-means to User matrix to get initial user grouping Û0 
c. t:=0; 
2. Ad clustering: 
a. Merge the link matrix by User groups Ût to get AL 
b.Apply K-means to Ad+AL matrix to get new ad clustering Ât+1 
3. User grouping: 
a. Merge the link matrix by Ad cluster Ât to get UL 
b.Apply K-means to User+UL matrix to get new user grouping Ût+1 
4. t:=t+1; Go to Step 2; 
	  7 
陣，而為了和單向分群結果比較，我們定義baseline即為單向分群的結果，在
baseline中，我們使用K-means對廣告特性資料及廣告鏈結矩陣分群，其疊代數設
定為1000，並將分群結果當作標準答案。 
我們以廣告特性資料矩陣和廣告鏈結矩陣(ad-user link matrix)做驗證分群的
資料，意即我們結合兩份資料利用決策樹分類，與分群結果做為標準答案。實驗
結果如圖四所示，橫軸代表不同的群數(K)，縱軸代表在分K群的狀況之下所分類
得到的F-measure。我們觀察K設定在2~5群之間的F-measure。由圖表得知，重複式
交叉分群有較佳的F-measure，而baseline卻沒有比我們提出的重複式交叉分群結果
好。 
 
圖四 以廣告特性矩陣和廣告鏈結驗證 
3.  使用者分群評量結果 
同樣的，針對1685個完成Lohas問券的使用者，及463點選的廣告鏈結矩陣，
針對使用者分群我們比較分群結果。我們同樣定義baseline為使用K-means對使用
者Lohas矩陣及使用者鏈結矩陣進行分群，其疊代數設定為1000，並將分群結果
當作標準答案。 
我們使用決策樹做為我們評估的方法，而我們將使用者Lohas矩陣及使用者
鏈結矩陣兩份資料合併當作測試資料，並且對於不同分群方法所產生的群，透過
F-measure來評估各個方法的分群效果為何。根據實驗結果顯示(圖五)，我們發現
baseline雖然使用和測試資料相同的一份資料進行分群，並將其分群結果當作標準
答案，進行分類；然而，其效果卻不如我們所提出的重複式交叉分群。 
	  9 
KL差異KLAd，同理也為每個使用者群ûj鏈結個數做正規化得p(Â|ûj)，藉以計算使
用群間的平均KL差異KLUser，如下所示。而分群結果則可透過廣告群間的平均差
異與使用群間的平均差異代表共分群的效能。 
……….. (4) 
 
圖六 K-L divergence 
圖六呈現K=5時KL divergence的結果， 橫軸分別代表KLAd、 KLUser及KL(Â, 
Û)，縱軸分別代表我們觀察在三種方法的廣告群之間的差異、使用者群之間的差
異及兩者加總起來的差異結果。我們依照各種方法產生的廣告群和使用者群，並
根據鏈結矩陣，建構廣告群鏈結使用者群的矩陣，我們固定使用者群，分別取特
定兩項廣告群計算其KL-divergence，計算所有廣告群之間差異後，我們將所有差
異值加總後取平均，反之，我們可以得到各個使用者群之間的差異。我們可以發
現，各群之間變異性很大，而且ICCC和3-staged的效果都比baseline的效果好，所
以透過我們提出的方式均能夠達到較佳的分群結果。 
綜合以上評估方式，重複式交叉分群，不僅能在廣告也能在使用者分群上，
達到較佳的分群結果。重複式交叉分群，同時考慮了廣告資訊、使用者資訊以及
鏈結資訊，綜合以上幾種資訊，並能夠同時對廣告和使用者進行分群，而且效果
比baseline的效果來的好。 
國科會補助計畫衍生研發成果推廣資料表
日期:2011/04/14
國科會補助計畫
計畫名稱: 社群網路廣告最佳配置之研究
計畫主持人: 張嘉惠
計畫編號: 98-2622-E-008-023-CC2 學門領域: WEB 技術 
研發成果名稱
(中文) 以重複式共分群配置線上廣告之研究
(英文) Aggregate Two-way Co-Clustering of Ads and User Data for Online Advertisements
成果歸屬機構
國立中央大學 發明人
(創作人)
張嘉惠,巫孟倫,范登凱
技術說明
(中文) 分群 (clustering) 於分析工作中扮演著重要基礎的角色，可用以將相似的資料
進行分組，目前已被廣泛地應用於市場資料分析。除常見的單向對資料矩陣中的
列分群之外，共分群則同時對列及行進行雙向分群(dyadic co-clustering)。本
研究主要係透過共分群機制 (co-clustering) 將廣告及使用者資料進行分群，
進而得到有利於分析的資訊。透過交替使用相關性質的資料對應變表中的行列進
行運算，使分群的表現更好。本研究提出基於重複式交叉分群 (Iterative 
clustering) 的方法來實現共分群的目的；問題本質在於如何利用廣告資料、使
用者資料及廣告使用者鏈結資料等三個矩陣，讓廣告及使用者分群的結果能反應
資料的群聚現象。同時利用此一結果提高使用者廣告點擊率。
(英文) Clustering plays an important role in data mining, as it is used by many applications as a 
preprocessing step for data analysis. Traditional clustering focuses on grouping similar 
objects, while two-way co-clustering can group dyadic data (objects as well as their 
attributes) simultaneously. In this research, we apply two-way co-clustering to the 
analysis of online advertising where both ads and users need to be clustered. The key data 
that connect ads and users are contained in the user-ad link matrix, which denotes the ads 
that a user has linked. We proposed a three-staged clustering that makes use of the three 
data matrices to enhance clustering performance. In addition, an iterative cross co-
clustering algorithm is also proposed for two-way co-clustering. 
產業別 電信業；資訊服務業；廣告業
技術/產品應用範圍
本技術可應用於Web2.0網站及社群網路平台的網路廣告配置，提高使用者對廣告的點擊
率。
技術移轉可行性及
預期效益
線上廣告是網路公司主要的收入之一，包括部落格及臉書等社群網站，都是以顯示型廣
告及文字型廣告做為其主要收入來源。
註：本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
1. 舉辦 2010 人工智慧論壇(May 21-22, 2010) 
2. 邀請南加大 Prof. Craig Knoblock (AAAI Fellow)及香港大學 Qiang Yang 
(IEEE Fellow)來台訪問. 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
                                                                
本產學合作計畫研發成果及績效達成情形自評表  
成果項目 本產學合作計畫預估研究成果及績效指標（作為本計畫後續管考之參據） 計畫達成情形 
技術移轉 預計技轉授權 0 項 完成技轉授權 0 項 
國內 預估 0 件 提出申請 0 件，獲得 0 件 
專利 
國外 預估 0 件 提出申請 0 件，獲得 0 件 
博士 2人，畢業任職於業界1人 博士 1人，畢業任職於業界1人 
碩士 8人，畢業任職於業界2人 碩士 8人，畢業任職於業界2人 人才培育 
其他 0人，畢業任職於業界0人 其他 0人，畢業任職於業界0人 
期刊論文 1 件 發表期刊論文 0 件 
研討會論文 1 件 發表研討會論文 1 件 
SCI論文 0 件 發表SCI論文 0 件 
專書 0 件 完成專書 0 件 
國內 
技術報告 0 件 完成技術報告 0 件 
期刊論文 1 件 發表期刊論文 1 件 
學術論文 0 件 發表學術論文 0 件 
研討會論文 1 件 發表研討會論文 1 件 
SCI/SSCI論文 0 件 發表SCI/SSCI論文 0 件 
專書 0 件 完成專書 0 件 
論文著作 
國外 
技術報告 0 件 完成技術報告 0 件 
其他協助產業發展
之具體績效 新公司或衍生公司 0 家 設立新公司或衍生公司(名稱)： 
