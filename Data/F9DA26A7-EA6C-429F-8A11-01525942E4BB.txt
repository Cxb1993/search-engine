Abstract 
 
This study is proposed to establish the integration technology and methodology 
for using proper drive-by-wire(DBW) control strategy and algorithm to control 
vehicle powertrain and drivetrain system dynamic response.  Vehicle powertrain and 
drivetrain control system design integration including the engine electronic ignition 
system, electronic fuel injection system, electronic throttle control system and the 
electronic transmission control system. 
    This research used electronic throttle input and output experimental data to 
identify and validate the dynamic characteristic of the DBW electronic throttle model. 
In this study, the electronic throttle and control driver plant and the corresponding 
adaptive PID controller in CAN bus transmission was established according to the 
electronic pedal command signal and the feedback signal from Throttle Position 
Sensor (TPS). It used the analog and digital signal conversion circuit and CAN bus 
board made by this study to collect the experimental data. This study used System 
Identification find the electronic throttle model and used Hardware In the Loop (HIL) 
technology to replace the real hardware, the command control signals can be varied by 
the simulation software to evaluate the corresponding response changes. The signal of 
the TPS was feedback sent into the controller to adjust the response in order to 
achieve the goal of throttle openings position control. 
    The Matlab/Simulink®/Real Time Workshop and the Embedded Coder were 
utilized to generate ANSI C program and integrate the data acquisition card as 
transmission interface for input and output data. Pulse Width Modulation (PWM) 
voltage signals are send to electronic throttle drive circuit by the human-machine 
interface, in the meantime the driver command and electronic throttle dynamic 
response data were measured. The system identification theory and Matlab/System 
Identification Toolbox were applied to establish electronic throttle dynamic model, 
which is convenient, and both time and cost for validation and testing are reduced. 
    Vehicle powertrain system performance simulator system integration provides the 
performance evaluation and the difference in priority of each subsystem and makes 
the final setting of control variables to meet the customer specifications. Engineer can 
evaluate the variation in vehicle powertrain and drivetrain system performance due to 
  ii 
 
目錄 
中文摘要......................................................................................................................... i 
Abstract .......................................................................................................................... ii 
目錄............................................................................................................................... iv 
圖目錄........................................................................................................................... vi 
一、前言................................................................................................................... - 1 - 
二、文獻回顧........................................................................................................... - 3 - 
三、研究方法與內容............................................................................................... - 9 - 
3.1 研究方法架構................................................................................. - 9 - 
3.2 動力傳輸模組建構......................................................................... - 9 - 
3.2.1 引擎模組建立 .................................................................... - 10 - 
3.2.2 離合器模組建立 .................................................................- 11 - 
3.2.3 手排變速箱與傳動軸模組建立 .........................................- 11 - 
3.2.4 最終傳動模組建立 ............................................................ - 13 - 
3.2.5 車輛行駛阻力模組之建立 ................................................ - 15 - 
3.3 離合器動態模擬........................................................................... - 16 - 
3.3.1 引擎模組參數設定 ............................................................ - 16 - 
3.3.2 乾式離合器模型參數設定 ................................................ - 17 - 
3.3.3 引擎與乾式離合器模擬測試 ............................................ - 20 - 
3.3.4 引擎與乾式離合器初步模擬結果 ................................... - 21 - 
3.4 三種離合器相對儲值表模擬車速與實車比較........................... - 24 - 
3.4.1 模擬方法 ............................................................................ - 24 - 
3.4.2 輸入模擬條件 .................................................................... - 26 - 
3.4.3 模擬結果 ........................................................................... - 29 - 
  iv 
 
圖目錄 
圖 1.1 離合器構造圖[1] ........................................................................................... - 2 - 
圖 2.1 乾式離合器動態摩擦示意圖[2] ................................................................... - 3 - 
圖 2.2 乾式離合器滑差自由體圖[5] ....................................................................... - 3 - 
圖 2.3 引擎與離合器子系統[6] ............................................................................... - 4 - 
圖 2.4 適應性PID控制器整體架構圖[7] ................................................................ - 5 - 
圖 2.5 電子節氣門控制架構圖[9] ........................................................................... - 6 - 
圖 2.6 電子節氣門各組成之零組件[18] ................................................................. - 7 - 
圖 2.7 以PC Based之DC馬達位置控制方塊圖與規則庫設定 .............................. - 7 - 
圖 2.8 簡化節氣門模型[14] ..................................................................................... - 8 - 
圖 3.1 車輛動力傳輸流程圖.................................................................................... - 9 - 
圖 3.2 引擎動態模型.............................................................................................. - 10 - 
圖 3.3 離合器動態模型...........................................................................................- 11 - 
圖 3.4 手排變速箱模組.......................................................................................... - 12 - 
圖 3.5 傳動軸動態模組.......................................................................................... - 13 - 
圖 3.6 最終傳動機構模組之建立.......................................................................... - 13 - 
圖 3.7 最終傳動模組之動力傳輸模組.................................................................. - 14 - 
圖 3.8 引擎動態模型測試...................................................................................... - 16 - 
圖 3.9 加速踏板輸入百分比.................................................................................. - 16 - 
圖 3.10 引擎轉速與引擎扭力................................................................................ - 17 - 
圖 3.11 離合器模組測試........................................................................................ - 18 - 
圖 3.12 離合器踏板踩踏百分比............................................................................ - 18 - 
圖 3.13 離合器輸出轉速與輸出扭力比較............................................................ - 19 - 
圖 3.14 離合器踏板與離合器轉速及扭力比較.................................................... - 19 - 
  vi 
 
  viii 
 
圖 4.11 Simulink Model 驗證示意圖.................................................................... - 44 - 
圖 4.12 Simulink Model 模擬結果 ....................................................................... - 45 - 
圖 4.13 PID Tuning with Actuator Constraints....................................................... - 46 - 
圖 4.14 設定各項響應之性能參數示意圖............................................................ - 46 - 
圖 4.15 設定後各項響應之性能示意圖................................................................ - 47 - 
圖 4.16 電腦控制電子節氣門示意圖.................................................................... - 48 - 
圖 4.17 Constant Input 電子節氣門TPS響應圖 ................................................... - 49 - 
圖 4.18 Step Input 電子節氣門TPS響應圖 .......................................................... - 49 - 
圖 4.19 Sine Input 電子節氣門TPS響應圖 .......................................................... - 50 - 
圖 4.20 使用定值PID控制器之輸入與輸出之響應圖 ......................................... - 51 - 
圖 4.21 電子節氣門模型模擬PID Table值示意圖 ............................................... - 52 - 
圖 4.22 不同控制器模擬比較................................................................................ - 52 - 
圖 4.23 Step Input Response................................................................................... - 53 - 
圖 4.24 Sine Input Response................................................................................... - 53 - 
圖 4.25 Focus PPS Input Response......................................................................... - 54 - 
圖 4.26 Step 100% Input實驗結果......................................................................... - 55 - 
圖 4.27 Step 50% Input 實驗結果......................................................................... - 55 - 
圖 4.28 Sine Wave Input 實驗結果 ....................................................................... - 56 - 
圖 4.29 Pulse Input 實驗結果 ............................................................................... - 56 - 
圖 4.30 節氣門平台與實車節氣門實驗照片........................................................ - 57 - 
圖 4.31 節氣門平台與實車並聯示意圖................................................................ - 58 - 
圖 4.32 節氣門平台與實車節氣門響應圖............................................................ - 59 - 
 
圖 1.1 離合器構造圖[1] 
 
對於車輛通訊系統裡，局部通訊網路包含內容越來越豐富，CAN bus、
Profibus、LON、Interbus-S、EIB、FIP 與 eBus…等。 線傳控制已經發展相當成
熟，還有其它之通訊標準也紛紛成立，這些成熟技術現在已進到將協定實行於
小型矽晶片上，而 CAN bus 在穩定性、即時性與價格整體表現在控制系統運用
上是佔有優勢的，因此局部通訊的分散式控制系統是目前的一個趨勢。 
本研究藉由線傳之技術設計電子節氣門之控制，除了依照駕駛者之命令開
啟節氣門外並搭配適應性巡航控制系統進而調節控制電子節氣門開度，同時使
車子能達到定速與跟車之目的，以減低駕駛者行駛之負擔及提高行駛時舒適
性。 
如何利用高科技來輔助人為操作，當有危險情況發生時能即時採取適當應
變措施，甚至直接介入自動操控車輛，盡量降低駕駛人行為不當或突發危險狀
況所導致意外事故，便成為 ITS 重要的研究課題之一，因此目前各汽車製造業
者正積極發展智慧型定速控制系統(Intelligent Cruise Control System, ICC)，以提
高車輛之安全性。 
 
- 2 -
    Brighenti 等[6]以引擎與乾式離合器片，構建整車動力傳輸系統，如圖 2.3
所示。 Brighenti 並說明離合器片及釋放軸承之位移量與引擎動力傳遞之關係。 
 
 
圖 2.3 引擎與離合器子系統[6] 
 
Harada 等[7]考慮到車輛及引擎本身動態特徵為非線性狀態要單純利用傳統
控制法則控制是極為不易，因此利用車輛之運動方程式去計算使用較嵌合於實
際車輛動態之模型而所採用為一階系統來表示，再經由適應性 PID 控制器作計
算並輸出信號去控制直流馬達之脈寬調變(Pulse Width Modulate, PWM)進而可控
制電子節氣門之開關，如圖 2.4 所示。 此研究討論利用各種不同爬坡之斜度作
測試，並模擬結果與實際驗證，結果顯示與實際車輛所跑出之車速值誤差不會
很大，可較穩定而達到車輛巡航之效果，但還是無法精準控制到作者所設定之
期望車速值，因此作者判斷之原因為外部干擾及信號雜訊之影響。 
- 4 -
H-Bridge 驅動器來驅動節氣門，而模型的回授為節氣門感知器訊號，並與動力
傳動系統( Powertrain )模型作結合且藉由此系統來達到節氣門定位控制，比較模
擬環境與實際輸出之差異。 架構圖如下圖 2.5 所示。 
 
 
圖 2.5 電子節氣門控制架構圖[9] 
    Contreras 等人[17]說明準確的電子節氣門控制對於車輛的燃油消耗與廢氣
排放有優秀的性能表現，並建立型號 DV-E5 電子節氣門模型與以前的研究文獻
結果做分析，以各種不同之輸入條件觀察節氣門的響應輸出。 
Kowatari 等人[18]說明在設計電子節氣門元件時，其作動響應較快時其所需
的電流較大，其電感與阻抗之元件參數有一定的相互關係，利用電腦軟體輔助
分析並設計元件參數，經由分析過後所建立之 prototype 顯示出可增加 20%的響
應時間與降低 50%的峰值電流。 Kowatari 說明電子節氣門實際建模中所需之組
成元件，如下圖 2.6 所示，此研究可提供較完整的參數調教。 
 
- 6 -
題，使用強健控制解決。 
    Carlos 等[21]建立電子節氣門動態模型，實體節氣門有許多非線性的存在
之中，取其中較重要的元件動態特性，如圖 2.8。 Carlos 建立其節氣門動態模
型，使用適應性脈衝訊號控制電子節氣門達到精確的控制，已達到控制污染和
節省燃料。 
 
圖 2.8 簡化節氣門模型[14] 
 
    Eliasson 等人[22]將各動態子系統如車輛之電子油門及煞車系統分別以一
階、二階系統表示，並利用卡爾曼濾波器來觀測前車行駛中之狀態，說明汽車
位置控制過程中，後車狀態則由轉速計來計算其行車之狀態並利用兩車之距離
與所設定之安全距離之誤差量作為控制準則，結合線性二次高斯狀態回饋法
(LQG)適應性法則作為回饋補償控制器。 並依據當時的狀況來做加速及減速的
動作，系統則自動判斷控制電子節氣門及煞車系統，使汽車速度改變而達到車
輛跟隨定速模式。 
 
 
 
 
 
 
 
 
 
- 8 -
3.2.1 引擎模組建立 
    引擎動態模型依據牛頓第二定律，故可改寫由下列方程式表示： 
∑ = NJT &                                                      (3.1) 
eeloadebe NJTTT &⋅=−−                                            (3.2) 
(3.2)式中 Te、Teb 代表引擎扭力、Tload 表示引擎本體負載扭力、Je 為曲軸及
飛輪慣量(kg-m2)， 是曲軸之角加速度(rad/sec2)。 eN&
ee NdtN =∫ &                                                     (3.3) 
ee N=× πω 260                                                  (3.4) 
iniete NN ==0                                           (3.5) 
其中：Ne 為引擎轉速(rpm) 
引擎模型依照上述所推導之動態數學模型，在模擬環境下 Matlab/Simulink®
建立，其設定引擎轉動慣量(Inertia) J 值(kg-m2)，阻尼(Damping Coefficient )C
值，再利用引擎特性曲線圖計算出制動扭力，此為引擎加速之扭力，再由制動
扭力減去外界的負荷可得到所需淨扭力。運用節氣門開度百分比、引擎扭力、
引擎轉速…等。 建立相對量測儲值表(Look-up Table)，架構可參考圖 3.2。 
 
 
圖 3.2 引擎動態模型 
 
- 10 -
效剛性旋轉之傳輸元件由(3.9)式表示： 
( )iingearegiingearegigearsprigearout NdNJTT && +=− η                       (3.9) 
式中： igear ,τ 、 igearη ：各檔位齒比數及傳動效率， iingearN& 、 ioutgearN& 分別
為變速箱輸入及輸出之角速度(rad/s)與角加速度(rad/s2)。 iingearT 、 ioutgearT 、
：分別為每檔位輸入、輸出軸動力至傳動軸輸出之扭力值(N-m)。 、
：分別為手排變速箱輸入與各檔位嵌合之等效元件阻尼與轉動慣量係數，如
圖 3.4 所示。 
sprT
egd
egJ
 
 
圖 3.4 手排變速箱模組 
傳動軸是具有扭矩彈性體特性，相對地軸之兩端作動力傳輸而產生非線性
作用，角位移在乘上其軸之本身特性並可求出實際輸出扭力並作動力傳輸之媒
介，如(3.10)式表示。 彈性係數越大，則表示軸之特性越接近於剛體元件，若
軸兩端之轉速相差越大，其表示輸出扭力也越大。 
)()( ftpfftpp NNddtNGNKT &&&& −+−= ∫                             (3.10) 
上式中： 、 ：分別為傳動軸之阻尼係數與彈簧係數； 、 ：分別
為變速箱與最終傳動之角速度與角加速度，傳動軸的動態模型，如圖(3.5)所
示。 
pK pd tN& fN&
- 12 -
(3.11)式中：Tf、Td為最終傳動與驅動軸之輸出扭力； 、 、 分別為
最終傳動轉速及輪胎模組之角速度與角加速度； 、 、 分別代表最終傳動
模組之轉動慣量，齒比數與阻尼係數。 
fN&
fd
dN wN
fJ fi
為了考慮車輛直行或轉彎時，若有一輪打滑或不轉動時能適時之自動調整
左右兩輪之轉速，使能順利之正常行駛及轉彎並能減少輪胎之磨損，因 RL TT =
可由下列(3.12)式表示及建立最終傳動模組，如圖 3.7 所示。 
 
2
)()(
2
NNNNNNN RLRLf
Δ−+Δ−=+=                           (3.12) 
 
上式中 NL、NR分別代表左右兩驅動輪之角速度。 
 
 
圖 3.7 最終傳動模組之動力傳輸模組 
 
最終傳動機構與輪胎間利用驅動軸作為動力傳遞之連接介面，與上述之傳
動軸特性相同。 因此建立兩驅動間有所產生剛性與阻尼體建構出模組，並適當
- 14 -
3.3 離合器動態模擬 
3.3.1 引擎模組參數設定 
引擎模型建構完成後在 Matlab/Simulink®模擬環境下設定引擎轉動慣量
(Inertia) J 值(kg-m2)，阻尼(Damping Coefficient )C 值，參數設定完成後進行引擎
模組動態模擬測試，如圖 3.8 所示。 在無負載情況下輸入加速踏板全開，如圖
3.9 所示。 測試引擎轉速與扭力，如圖 3.10 所示。 
 
 
圖 3.8 引擎動態模型測試 
 
 
圖 3.9 加速踏板輸入百分比 
- 16 -
 
圖 3.11 離合器模組測試 
 
 
圖 3.12 離合器踏板踩踏百分比 
 
離合器定值測試後其輸出值，如圖 3.13 所示，當離合器踏板踩下時，可看
出模型在定負載定轉速下之引擎轉速與扭力下降變化，踏板釋放時轉速與扭力
向上爬升。 
- 18 -
3.3.3 引擎與乾式離合器模擬測試 
本研究過程中車輛動態模型之乾式離合器模組，因應實車手排之乾式離合
器所需，利用乾式離合器模型與引擎動態模組做連結測試。 當模擬實車動態性
能與分析時應考慮實車動力傳遞，為實車輛行駛之安全首要，因此乾式離合器
模型可預測動力傳遞過程是否穩定快速與實車相近。 
關鍵在於當離合器踏板踩下時，油壓傳遞至釋放叉過程中，因離合器踏板
踩踏速度之快慢而影響其中，對於動力傳輸時機也隨機改變。 在預測過程中離
合器模組內建構三組各別不同之相對儲值表(Look-up Table)，並利用線性函數求
出 Table1 曲線變化，Table1 紅色模塊，曲線較為急速下降、Table2 藍色模塊曲
線較為平順下降、Table3 紫色模塊曲線較為緩慢下降。 
其中離合器可應對不同曲線接合時間下預測實車之離合器接合曲線測試，
經由離合器測試後，利用引擎模組連接測試，其值為，加速踏板百分比與離合
器踏板之踩踏百分比及 T-load 300(Nm)額定負載等輸入條件模擬離合器分離之
輸出轉速與扭力變化，如圖 3.15 所示，將各別儲值表放置各別離合器模組內。 
 
圖 3.15 三組各別乾式離合器測試圖 
- 20 -
 
圖 3.17 三組經離合器引擎轉速與未經離合器之引擎轉速變化 
 
扭力部分由圖 3.18 所示，離合器踏板連續踩踏之輸出扭力變化，水藍色線
為引擎輸出扭力，比照 Table1 為紅色線、Table2 為藍色線、Table3 深綠色線，
因 Table 曲線不同可觀測出離合器輸出扭力因而 Table 曲線不同，在時間上會有
延遲與提前之差。 
- 22 -
3.4 三種離合器相對儲值表模擬車速與實車比較 
3.4.1 模擬方法 
由先前所建立之車輛動態各別模組，其與每一動態模組在 Matlab/Simulink®
模擬環境下，組合一套車輛動力傳輸模組(Powertrain)，如圖 3.19 所示。 
 
 
圖 3.19 車輛動力傳輸之兩輪動態模型 
 
動力傳輸過程中，手排變速箱及乾式離合器之接合與分離為首要之關鍵，
離合器踏板踩下，油壓傳遞至釋放叉過程中，因離合器踏板踩踏速度之快慢而
影響其中，對於動力傳輸時機也隨機改變。 模擬過程中離合器模組內建構三組
各別不同之相對儲值表(Look-up Table)，並利用線性函數求出 Table1 曲線變
化，Table1 紅色模塊，曲線較為急速下降、Table2 藍色模塊曲線較為平順下
降、Table3 紫色模塊曲線較為緩慢下降，如圖 3.20 所示。 
 
- 24 -
 
圖 3.21 三組動力傳輸模組之離合器儲值表(Look-up Table) 
 
3.4.2 輸入模擬條件 
在 Matlab/Simulink®模擬環境下，動力傳輸模組，模擬時間 20 秒直線加速
換檔，輸入各別條件；如加速踏板、離合器踏板踩踏時間及輸出百分比、換檔
時間、煞車踏板等，加速踏板為擷取實車訊號輸入，由圖 3.22 顯示，加速踏板
在加速過程中輸出值最大為 70%，因配合離合器踩踏及檔位排定，加速踏板須
深踩快放完成直線加速需求。 
 
- 26 -
換檔過程中必須在離合器踏板踩下時，迅速排定檔位然後釋放離合器踏
板，欲使動力由選擇之檔位輸出傳動力，由圖 3.24 所示。 從時間開始就排定
第一檔位，離合器踏板位置之乾式離合片接合，使其動力輸出。 
 
 
圖 3.24 手排變速箱之換檔曲線 
 
在模擬加速過程中，車速到達一定速度時，將煞車踏板踩下，迫使車輛完
全停止，模擬時間為 20 秒，煞車踏板於 16.8 秒深踩到底，如圖 3.25 所示。 
 
- 28 -
 
圖 3.26 實車之引擎轉速與模擬轉速比較 
 
圖 3.27 為動力傳輸模組，經由各別不同之乾式離合器曲線儲值表(Look-up 
Table)輸出之引擎轉速，實線為實車之輸出引擎轉速，並由下往上對照之 Table1
為虛線、Table2 為點線、Table3 為點虛線，在 8 秒之時間軸上對照之各 Table 輸
出之引擎轉速，Table3 引擎轉速為反應最慢，轉速攀升至 6050rpm，Table1、
Table2，分別為 5800、5950rpm 。 
 
- 30 -
3.5 車輛動力傳輸模組與 Ford Focus 比較 
3.5.1 比較方法 
由實車在財團法人車輛研究測試中心(Automotive Research & Testing Center, 
ARTC)，試驗跑道高速周迴路上以時速每小時 160 高速行使，行駛條件由時速 0
公里一檔換至五檔加速到 160 公里之後在由五檔換至一檔減速至停止。 
擷取油門踏板、離合器踏板、換檔時機、引擎轉速、車速等數據，將油門
踏板、離合器踏板、換檔時機，輸入先前所建立之車輛動態模組，如圖 3.29、
3.30、3.31、3.32 所示。 
 
 
圖 3.29 模擬 Ford Focus 動力傳輸模組 
 
- 32 -
圖 3.32 Ford Focus 換檔時機曲線圖 
 
引擎轉速、車速為輸出，在與 Ford Focus 動力傳輸模組模擬之引擎轉速、
車速做驗證，如圖 3.33、3.34 所示。 
 
- 34 -
    將實際之引擎轉速、車速分別與模擬之引擎轉速與車速分析比較，如圖
3.35、3.36 所示。 
 
圖 3.35 Focus 引擎轉速與模擬引擎轉速驗證比較圖 
 
圖 3.36 Focus 引擎轉速與模擬引擎轉速驗證比較圖 
- 36 -
使用系統識別尋找電子節氣門之轉移函數，系統識別流程如圖 4.2 所示。
並比較電子節氣門轉移函數模型與實驗量測值作暫態控制性能測試以及相互驗
證並以確實能達到模擬實際電子節氣門動態響應之效能。 
 
圖 4.2 系統識別實驗流程圖 
 
電子節氣門模型建立與控制器之設計與實際之電子節氣門動態特性做相互
驗證，運用電控線傳控制技術與硬體作迴路連結，以建立整體線傳控制之架
構。 
 
4.2 電子節氣門轉移函數之建立 
一般而言建立系統轉移函數的做法有兩種，一種為利用數學公式推導，另
一方面則是利用系統識別法則( System Identification )來找出系統的轉移函數，
由輸入資料與輸出資料的比較關係利用 Matlab/System Identification Toolbox 可
快速的找出相近似之系統轉移函數。  本研究先利用輸入與輸出關係利用
Matlab/System Identification Toolbox 找出系統轉移函數，因為電子節氣門平台本
身已經有 PID 控制器參數，所以必須再藉由數學方程推導將 PID 控制器參數部
分扣除掉才是原始電子節氣門模型。 
運用系統識別尋找節氣門轉移函數其中識別法有，識別之自動回歸模型，
(ARX)、自動回歸滑動平均模型(ARMAX)、輸出誤差法(OE)等識別方式，擷取
實車腳踏板與節氣門開度電壓訊號，輸入踏板訊號及節氣門輸出回授訊號作為
資料 Input 與 Output 如圖 4.3、圖 4.4 所示，建立電子節氣門動態之數學模型。 
 
 
- 38 -
將擷取之實車腳踏板電壓訊號與節氣門電壓訊號轉換成開度百分比，作為
資料檔案載入系統識別視窗中，如圖 4.5 所示。 
 
 
圖 4.5 系統識別資料載入圖 
 
資料載入後選擇其識別法如自動回歸模型(ARX)、自動回歸滑動平均模型
(ARMAX)、輸出誤差法(OE)……等識別方法，如圖 4.6 所示。經由系統識別計
算後可顯示出，使用不同識別法所產生之不同識別率比較，如圖 4.7 所示，可
選擇識別率較高的識別法轉換成轉移函數如圖 4.8 所示。 
 
 
圖 4.6 選擇識別法 
- 40 -
在 Command Window 視窗畫面鍵入轉換指令將系統識別後之檔案轉換成轉
移函數後得到節氣門轉移函數。 由於經系統識別出之轉移函數是有控制器包含
在裡面，並不是原始的節氣門模型，因此再利用數學推導扣除控制器模型之轉
移函數如圖 4.9、4.10 所示。 
 
 
圖 4.9 系統控制流程與系統模型示意圖 
 
 
圖 4.10 線傳電子油門系統方塊化簡圖 
- 42 -
4.3 系統識別轉移函數模擬驗證比較 
將計算出之轉移函數(6)式、(7)式、(8)式分別帶入 Simulink 模擬驗證如圖
4.11 所示。 
 
 
圖 4.11 Simulink Model 驗證示意圖 
 
由圖 4.12 所示模擬結果可以看出在三種識別法找出節氣門之轉移函數與命
令輸入之結果差異，因此可在 Simulink Model 修改 PID 控制器來改善其控制效
果。 
- 44 -
 
圖 4.13 PID Tuning with Actuator Constraints 
 
 
 
圖 4.14 設定各項響應之性能參數示意圖 
- 46 -
 
圖 4.16 電腦控制電子節氣門示意圖 
 
    本階段實驗步驟第一步是利用 Matlab/Simulink® 之方塊圖形編輯命令程
式、第二步驟在 Matlab/Simulink® 環境下設定 RTW 連結測試、連接電腦與節氣
門訊號線，最後執行訊號傳送。輸入條件分別有三種不同情況下，觀察節氣門
TPS 響應再進行分析，Case1 Constant Input 目的是觀察節氣門穩態狀況及準確
性，Case2 Step Input 目的是同時觀察節氣門反應速度、超越量及準確度，Case3 
Sine Input 目的是觀察節氣門之平滑順暢啟閉作動之情形。 藍色為命令曲線、
綠色為程式修改後曲線、紅色為程式修改前曲線，實驗量測出之響應圖如圖
4.17、4.18、4.19 所示。 
 
- 48 -
 
圖 4.19 Sine Input 電子節氣門 TPS 響應圖 
 
4.6 模擬不同電子節氣門控制器比較 
由於在電子節氣門控制系統中是使用固定 PID 控制器時，要找出其控制參
數除了參考以 Try and Error 試誤經驗方法、NCD 方法之外，找出之參數並不一
定是最佳化之參數，且固定之控制參數並不一定是節氣門不同且在不同節氣門
開度下理想之控制參數也會不同。 圖 4.20 之輸出響應為使用 Try and Error 所找
出之控制參數，其輸出之響應並無法達到要求的範圍，因此本研究採用可變
PID 值控制器來做為其控制單元，其原理是利用電子踏板開度變化來改變 Kp、
Ki、Kd 值，這三種參數會隨著電子踏板開度的不同而調整參數，因此在控制器
中設計可儲存幾組 PID 值之 Table Function 讓節氣門之位置控制到所需之目標位
置，達到最佳化之控制。 
 
- 50 -
 
圖 4.21 電子節氣門模型模擬 PID Table 值示意圖 
 
 
圖 4.22 不同控制器模擬比較 
- 52 -
 0 5 10 15
0
10
20
30
40
50
60
70
80
90
100
Time (sec)
TP
S
 P
os
iti
on
 (%
)
Focus PPS
Fixed PID
Table PID
 
圖 4.25 Focus PPS Input Response 
 
由圖 4.23、4.24、4.25 可看出，節氣門在不同開度時，固定的 PID 值在節
氣門跟隨上響應較差，因此可變 PID 值在任意開度下控制效果較固定 PID 值理
想。 第二階段實驗測試條件分別使用四種情形：Step 100％，Step 50％，Sine 
Wave，Pulse 作為輸入來觀察節氣門跟隨、穩定情形與響應速度。狀況如圖
4.26、4.27、4.28、4.29 所示。 
 
- 54 -
0 5 10 15
0
20
40
60
80
100
120
Time (sec)
TP
S
 P
os
iti
on
 (%
)
Sine Input
Command
Table PID
Fixed PID
 
圖 4.28 Sine Wave Input 實驗結果 
 
0 5 10 15 20 25 30
0
20
40
60
80
100
120
Time (sec)
TP
S
 P
os
iti
on
 (%
)
Pulse Input
Command
Table PID
Fixed PID
 
圖 4.29 Pulse Input 實驗結果 
- 56 -
本實驗步驟第一步是利用 Matlab/Simulink®之方塊圖形編輯命令程式、第二
在 Matlab/Simulink®環境下設定 RTW 連結測試、連接電腦與節氣門訊號線節氣
門平台與實車節氣門訊號並聯，最後執行訊號傳送，如圖 4.31 所示。 
 
 
圖 4.31 節氣門平台與實車並聯示意圖 
 
實驗條件說明：為了測試修改完備之 PID 控制參數，其實驗方式，測試油
門踏板之踩踏頻率測試，5 秒做一次放油門，再 5 秒做一次踩油門，60 秒重複
上述動作 6 次。 
    經過實驗比較結果節氣門平台大部分跟隨的相當接近如圖 4.32 所示但與實
車節氣門響應速率有明顯延遲。 圖中 Command 代表腳踏板；RD2 代表節氣門
實驗平台模組；Focus 代表實車節氣門。 但，節氣門平台與實車節氣門相比，
響應速率有明顯延遲。 
 
- 58 -
 
圖 4.33 節氣門模型與引擎模型結合示意圖 
     
分別以三種踩踏頻率 1 rad/sec、0.5 rad/sec、0.25 rad/sec，如圖 4.34、
4.35、4.36 所示，來模擬測試引擎轉速響應為何。 
 
 
圖 4.34 Sine Input 頻率為 1（rad/sec） 
- 60 -
節氣門模擬控制 ad/sec 時，由全閉
至全
引擎結果由圖 4.34 可知在踩踏頻率為 1 r
開所需時間約 3 秒，這時對於引擎轉速有些微影響，但 6 秒之後至 60 秒引
擎轉速並無明顯的影響，這是因為每一種引擎都具有轉動慣性與旋轉阻力之影
響，所以即使是腳踏板與節氣門在瞬間開啟或關閉，因時間差而造成之開度誤
差時對於引擎轉速並不會立即上升或下降來，因此對於引擎控制並不會有太大
之影響。 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
- 62 -
六、計畫成果自評 
本研究建構「線傳電子節氣門用於適應性巡航控制技術」並建立系統識別
之實驗標準作業程序，以供學校與研究機關可迅速掌握建立系統模組之相關
性，並作為實用參考重要資訊。 
本計畫執行結果與原申請計畫內容相符，並達成預期之目標，建構出電子
節氣門線傳控制模組並加以模擬及驗證，此研究方法之建立可協助設計工程師
在開發及評估動態系統性能時可縮短研發試誤時辰及研發成本。 
預計下一目標建立將適應性巡航控制技術建立在實車上，並與現階段所研
發出之電子節氣門系統模組加以整合成為一套適應性巡航控制系統，並運用在
FORD FOCUS 實車上做初步測試及行駛動態之動力傳輸模擬以及建立車輛動力
傳輸模組預測實車與模擬之輸出性能。 利用車輛運動方程推導合理減化車輛動
態之複雜性，並比較之跟車距離作進行相互比較及驗證後，其可分析及預測線
傳電子節氣門搭載適應性巡航控制性能。  
利用線傳控制技術與適應性巡航控制結合並加以實現，使汽車可以提升行
車安全性並減輕駕駛疲勞之束縛。 依駕駛者定速或起動適應性巡航控制系統，
經由控制器之計算輸出控制信號並轉換成電之信號，透過電子電路之界面驅動
電子節氣門之位置以達到適應性巡航控制目的。 
 
 
 
 
 
 
 
- 64 -
Throttle Simulation Model with Automatic Parameter Tuning,” SAE paper, 
No.2005-01-1441. 
[15] 王朝森，“車輛定速線傳控制與硬體迴路模擬設計技術整合之研究”，大葉
大學碩士論文 2005。 
[16] R. D. Pursifull and H. Keener, “Motorized Throttle Positioning Simulation 
Model,” SAE paper, No.2003-01-0222. 
[17] A. F. Contreras, I. P. Quiroz and C. C. D. Wit, “Further Results on Modelling and 
Identification of an Electronic Throttle Body,” Proceedings of the 10th 
Mediterranean Conference on Control and Automation-MED2002 Lisbon, 
Portugal, July 9-12, 2002. 
[18] T. Kowatari, S. Tokumoto and T. Usui, “Optimization of an Electronic Throttle 
Control Actuator for Gasoline Direct Injection Engines,” SAE paper, No. 1999-
01-0542. 
[19] P. I. H. Lin, S. Hwang and J. Chou, “Comparison on fuzzy logic and PID 
Controls for a DC Motor Position Controller,” IEEE 1994, 0-7803-1993-1/94. 
[20] C. Rossi, A. Tilli and A. Tonielli, “Robust Control of a Throttle Body for Drive 
by Wire Operation of Automotive Engines,” Proceedings of the IEEE 2000, 
pp.993-1002, 2000. 
[21] C. D. Carlos, K. Ilya and S. Jing, “Adaptive Pulse Control of Electronic 
Throttle,” Proceedings of the American Control Conference Arlington, pp.2872-
2877, 2001. 
[22] A. Eliasson, “A controller for autonomous intelligent cruise control – a 
preliminary design,” Proceedings of the IEEE 1992, pp.170-175. 
[23] 林俊宏，《通訊技術概論》全華科技圖書股份有限公司，1990。 
[24] 范逸之，《Visual Basic與分散式監控系統使用RS232/RS485 串列通訊》，文
魁資訊股份有限公司，2002。 
[25] 周鵬程，《Matlab程式語言入門-智慧型計算概論》，全華科技股份有限公
司，2004。 
[26] 趙清風，“控制之系統識別,” 全華科技股份有限公司，2001。 
[27] E. Mitchel, Schultz，《電子學第二版》，美商麥格爾，希爾國際股份有限公
司，1997。 
- 66 -
Decision and Control, pp. 4715-4720. 
[45] R. Pursifull and H. Keener, “Motorized Throttle Positioning Simulation Model,” 
SAE paper, No.2003-01-0222. 
[46] H.Hanselmann, “Hardware in the Loop Simulation Testing and its Integration 
into a CACSD Tollset,” Proceedings of the IEEE International Symposium on 
Computer-Aided Control System Design, pp.152-156. 
[47] G. R. Babbitt and J. J. Moskwa, “Implementation Details and Test Results for a 
Transient Engine Dynamometer and Hardware In the Loop Vehicle Model,” 
IEEE 90 Internation Symposium on Computer-Aided Control System Design, 
Kohala Coast-Island of Hawaii, August, pp.596-574. 
[48]  R. Isermann, A. Monti and R. A. Dougal, “Hardware-in-the-Loop simulation for 
the design and testing of engine-control systems,” Control Engineering Practice, 
v 7, pp.643-653. 
[49] J. Li, Fan F and Z. Jianwu, “The Rapid Develoment of Vehicle Electronic 
Control System by Hardware in The Loop Simulation,” SAE paper, No.2002-01-
0568. 
[50] T. Kowatari, S. Tokumoto and T. Usui, “Optimization of an Electronic Throttle 
Control Actuator for Gasoline Direct In- jection Engines,” SAE paper, No. 1999-
01-0542. 
[51] 陳致成，“智慧型CAN-based汽車雷達防撞警告系統”，國立交通大學碩士論
文， 2003。 
[52] P. I. H. Lin, S. Hwang and J. Chou, “Comparison on fuzzy logic and PID 
Controls for a DC Motor Position Controller,” IEEE 1994, 0-7803-1993-1/94. 
[53] H. Winner, “Adaptive Cruise Control Systems Aspects and Development 
Trends,” SAE paper, No. 961010. 
[54] Thomas D. Gillespie, “Fundamentals of Vehicle Dynamics,” Society of 
Automotive Engineers, Inc., 1992. 
[55] Jeha Ryu, HeeSoo Kim, “Virtual Environment for Developing Electronic Power 
Steering & Steer-by-wire Systems,” Proceedings of the 1999 IEEE/RSJ. 
[56] 詹前茂，《電機驅動控制理論與實驗》，新文京開發出版股份有限公司，
2003。 
[57]  M. K. Salaani, et al., “Powertrain and Brake Modeling of the 1994 Ford Taurus 
- 68 -
