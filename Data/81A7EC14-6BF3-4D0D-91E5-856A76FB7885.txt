   
行政院國家科學委員會專題研究計畫成果報告 
智慧型H∞循軌控制系統設計與FPGA硬體實現(II) 
計畫編號：NSC 97-2221-E-231-004 
執行單位：清雲科技大學 電機工程系 
計畫主持人：彭椏富 
執行期限：97年08月01日至 98年07月31日 
計畫參與人員：李承翰、賴祥偉、郭哲誠 
摘要：小腦模型控制器 (Cerebellar Model Articulation 
Controller, CMAC)為Albus所提出的一種模仿小腦功能的神
經網路，其可視為一種使用有著重疊接受區(Receptive-Field)
部分的非全連結感知機網路，它具有良好的一般化
(Generalization)能力、較快的學習特性與較少的神經元數量
等優點，非常適用於線上即時學習的應用場合，然而它仍
屬於靜態映射，因此，本計畫將利用原始的小腦模型控制
器架構，直接在第二層加入一遞迴單元，提出一遞迴式小
腦模型控制器，並藉由此一遞迴單元來改善原始小腦模型
控制器只有靜態映射的特性，使得遞迴式小腦模型控制器
(Recurrent Cerebellar Model Articulation Controller, RCMAC)
將具備動態映射之功能，藉此獲得(留存)系統之動態特性，
而達到更佳的近似能力。本計畫將提出一結合RCMAC與
∞H 控制技巧之優點，建構一具有穩定特性及良好控制性能
的智慧型 ∞H 控制系統，此控制系統中之適應性學習法則均
使用李亞普諾穩定分析與 ∞H 控制理論加以推導，以確保閉
迴路系統之穩定性與精密定位之控制性能。 
關鍵詞：小腦模型控制器，遞迴式小腦模型控制器， ∞H 控
制，適應性控制。 
Abstract: The cerebellar model articulation controller (CMAC) 
is classified as a non-fully connected perceptron-like 
associative memory network with overlapping receptive-fields. 
Compared with neural network, the CMAC possesses the 
advantages of fast learning property, good generalization 
capability, easy for realization and simple computation. In this 
project, by adding feedback connections in the association 
memory space; the proposed dynamic structure of recurrent 
cerebellar model articulation controller (RCMAC) has superior 
capability to the conventional static CMAC in efficient 
learning mechanism and dynamic response. In this project, an 
intelligent control system using an adaptive RCMAC with 
∞H  tracking performance is proposed for a motion control 
system. The control laws of the intelligent control system are 
derived based on the Lyapunov stability theory and the ∞H  
control technique, so that the robust tracking performance can 
be achieved. 
Keywords: Cerebellar model articulation controller; recurrent 
cerebellar model articulation controller; ∞H  
control; adaptive control. 
I. INTRODUCTION 
The cerebellar model articulation controller (CMAC) is 
classified as a non-fully connected perceptron-like associative 
memory neural network proposed by Albus [1], [2]. The 
CMACs have been adopted widely for the closed-loop control 
of complex dynamical systems owing to its fast learning 
property, good generalization capability, and simple 
computation compared with the NN [3]-[6]. This network has 
been already validated that it can approximate a nonlinear 
function over a domain of interest to any desired accuracy. 
However, the major drawback of the existing CMACs is that 
their application domain is limited to static problem due to 
their inherent network structure. In this study, a recurrent 
cerebellar model articulation controller (RCMAC) is proposed, 
which includes the delayed self-recurrent units in the 
association memory space. Thus, RCMAC presents a dynamic 
CMAC. 
In the past decade, numerous backstepping control design 
procedures have been proposed in the literatures [7]-[12]. This 
control technique is a systematic and recursive design 
methodology for nonlinear systems, which offers a choice to 
accommodate the unmodelled nonlinear effects and parameter 
uncertainties. The idea of backstepping design is to select 
recursively some appropriate functions of state variables as 
pseudo-control inputs for lower dimension subsystems of the 
overall system. Each backstepping stage results in a new 
pseudo-control design, expressed in terms of the 
pseudo-control design from preceding design stages. The 
procedure terminates a feedback design for the true control 
input which achieves the original design objective by virtue of 
a final Lyapunov function which is formed by summing the 
Lyapunov functions associated with each individual design 
stage [9]. 
Since the dynamic characteristics and motor parameters of 
the linear ultrasonic motor (LUSM) are highly nonlinear and 
time varying, a RIBC system is designed based on a 
hypothetical dynamic model to achieve high-precision position 
control. The proposed control system creates a bridge between 
backstepping control design and RCMAC, which is comprised 
of an adaptive RCMAC and a robust controller. The adaptive 
   
Gaussian [5], [6], [14], or B-spline [3], [15]). The Gaussian 
function is adopted here as the receptive-field basis function, 
which can be represented as 
 ⎥⎦
⎤⎢⎣
⎡ −−=
2
2)(exp
ik
ikrik
ik v
msφ ,  for Bnk ,,2,1 L=  (4) 
where ikφ  represents the kth block of the ith input with the 
mean ikm  and variance ikv . In addition, the input of this 
block can be represented as 
 ikTikiikikirik rtsTtrtsts φφ +=−+= )()()()(  (5) 
where ikr  is the recurrent weight, ikTik Tt φφ ≡− )(  denotes 
the value of ikφ  through delay time T . It is clear that the 
input of this block contains the memory term ikTφ , which 
stores the past information of the network and presents a 
dynamic mapping. This is the apparent difference between the 
proposed RCMAC and the conventional CMAC. Figure 3 
depicts the schematic diagram of a two-dimensional RCMAC 
with 9=En  and 4=ρ  ( ρ  is the number of elements in a 
complete block). Each block in this space has three adjustable 
parameters ikm , ikv  and ikr . 
1 Variable s
2 Variable s
11φ
12φ
13φ
14φ
15φ
16φ
17φ
18φ
19φ
110φ
111φ
112φ
21φ
22φ
23φ
24φ
25φ
26φ
27φ
28φ
29φ
210φ
212φ
211φ
 
Fig. 3. Two-dimensional RCMAC with 9=En  and 4=ρ . 
3) Receptive-field space T: Areas formed by blocks, 
named as Aa, Bb and Cc are called receptive-fields. The 
number of receptive-field, Rn , is equal to Bn  in this study. 
Each location of A corresponds to a receptive-field. The 
multidimensional receptive-field function is defined as 
 ⎥⎦
⎤⎢⎣
⎡ −−== ∑∏
==
n
i ik
ikrik
n
i
ikkkkk v
msb
1
2
2
1
)(exp),,,( φrvms  (6) 
where kb  is associated with the kth receptive-field, 
T
nkikkk mmm ],,,,[ 1 LL=m , Tnkikkk vvv ],,,,[ 1 LL=v  and 
T
nkikkk rrr ],,,,[ 1 LL=r . The multidimensional receptive-field 
function can be expressed in a vector form as 
 Tnk Rbbb ],,,,[),,,( 1 LL=rvmsΓ  (7) 
where TTn
T
k
T
R
],,,,[ 1 mmmm LL= , TTnTkT R ],,,,[ 1 vvvv LL=  
and TTn
T
k
T
R
],,,,[ 1 rrrr LL= . 
In the RCMAC scheme, no receptive-field is formed by the 
combination of different layers such as “ A , B , C ” and “ d , 
e , f ”. Therefore, Dd, Ee and Ff are new receptive-fields 
resulting from different blocks. 
4) Weight memory space W: Each location of T to a 
particular adjustable value in the weight memory space can be 
expressed as 
],,,,[ 1 po wwww LL=  (8) 
where Tonkooo Rwww ],,,,[ 1 LL=w , and kow  denotes the 
connecting weight value of the oth output associated with the 
kth receptive-field. The weight kow  is initialized from zero 
and is automatically adjusted during on-line operation. 
5) Output space Y: The output of RCMAC is the 
algebraic sum of the activated weights in the weight memory, 
and is expressed as 
∑
=
== R
n
k
kko
T
oo bwy
1
),,,,( Γwrvmws ,  for po ,,2,1 L=  (9) 
The outputs of the RCMAC can be expressed in a vector 
notation as 
 ΓTTpo yyy wrvmwsy == ],,,,[),,,,( 1 LL  (10) 
In a two-dimensional case shown in Fig. 3, the output of the 
RCMAC is the sum of the value in receptive-fields Bb, Ee, Jj 
and Gg, where the input state is (3,3). 
The architecture of RCMAC used in this paper is 
designed to possess the advantage of simple structure with 
dynamic characteristics. The meaning of the recurrent is to 
consider the past value of the receptive-field basis function in 
the association memory space. Thus, the RCMAC has 
dynamic characteristics. 
IV. DESIGN OF ROBUST INTELLIGENT BACKSTEPPING 
CONTROL SYSTEM 
A. Ideal Backsteeping Control 
Assuming all system dynamics ( ),( txf , ),( txg  and 
),( txd ) of the system (1) are well known, the design of ideal 
backstepping control for the LUSM is described step-by-step 
as follows: 
Step 1: Define the tracking error 
 )()()(1 txtxte d −=  (11) 
where )(txd  is a desired trajectory specified by a reference 
model. Then the derivative of tracking error can be represented 
as 
 )()()(1 txtxte d &&& −=  (12) 
The )(tx&  can be viewed as a virtual control in above equation. 
Define the following stabilizing function 
 )()()( 11 tektxt d += &α  (13) 
where 1k  is a positive constant. The first Lyapunov function 
is chosen as 
 )()( 21211 tetV =  (14) 
Step 2: Define 
 )()()(2 txtte &−= α  (15) 
The derivative of 1V  is 
 )()()()()()( 21121111 tektetetetetV −== &&  (16) 
Then, if 0)(2 =te , 0)()( 2111 ≤−= tektV&  can be achieved with 
   
is the estimated parameter of *kb ; mmm ˆ
~ * −= ; vvv ˆ~ * −= ; 
rrr ˆ~ * −= ; Rnt ℜ∈O  is a vector of higher-order terms; m∂
∂ kb , 
v∂
∂ kb  and 
r∂
∂ kb  are defined as 
 ]0,,0,,,,0,,0[
)(1)1(
321LL321L
nknnk
k
k
k
nk
T
k
R
m
b
m
bb
×−×− ∂
∂
∂
∂=⎥⎦
⎤⎢⎣
⎡
∂
∂
m
 (31) 
 ]0,,0,,,,0,,0[
)(1)1(
321LL321L
nknnk
k
k
k
nk
T
k
R
v
b
v
bb
×−×− ∂
∂
∂
∂=⎥⎦
⎤⎢⎣
⎡
∂
∂
v
 (32) 
 ]0,,0,,,,0,,0[
)(1)1(
321LL321L
nknnk
k
k
k
nk
T
k
R
r
b
r
bb
×−×− ∂
∂
∂
∂=⎥⎦
⎤⎢⎣
⎡
∂
∂
r
 (33) 
Rewriting (28), becomes 
 t
TTT OrHvGmC ++++= ~~~ˆ* ΓΓ  (34) 
Substituting (30) and (34) into (29), yields 
 Duu R
TTTTT +−+++= )~~~(ˆˆ~~ rHvGmCww Γ  (35) 
where ε++++= tTTTTTTTD OwrHwvGwmCw *~~~~~~ . In order 
to develop the robust controller, the dynamic equation (17) can 
be expressed via (20) and (35) as 
1222 ])
~~~(ˆˆ~[)( eekDugte R
TTTTT
n −−+−+++= rHvGmCww Γ&  
  (36) 
Step 3: Define the Lyapunov function as 
 rrvvmmww
~~
2
~~
2
~~
2
~~
2
)()(
4321
23
TnTnTnTn ggggtVtV ββββ ++++=  (37) 
where 1β , 2β , 3β  and 4β  are positive constants. Taking 
the derivative of the Lyapunov function (37) and then using 
(36), it is concluded that 
)(~]ˆˆ[~]ˆˆ[  
~]ˆˆ[]ˆˆ[~)(
2
4
2
3
2
2
2
1
23
Rn
TnTT
n
TnTT
n
TnTT
n
n
n
TT
uDgeggegge
ggeggetV
−+−+−+
−+−+−=
rrHwvvGw
mmCwwwKee
&&
&&&
ββ
ββΓ
  (38) 
The RIBC system is designed as (25). If the adaptive laws of 
the RCMAC are chosen as 
 Γˆ)(ˆ 21 teβ=w&  (39) 
 wCm ˆ)(ˆ 22 teβ=&  (40) 
 wGv ˆ)(ˆ 23 teβ=&  (41) 
 wHr ˆ)(ˆ 24 teβ=&  (42) 
and the robust controller is chosen as 
 )(
2
1)(
22
2
tegu nR δ
δ +=  (43) 
where δ  is a positive constant. Form (39)-(43), equation (37) 
can be rewritten as 
 
2222
2
222222
2
23
2
1
2
1
2
1][
2
1
2
1
)()(
Dge
DDgege
uDgetV
n
n
n
T
Rn
T
δ
δδδ
+−≤
+−−−−=
−+−=
Kee
Kee&
 (44) 
Assume ],0[2 TLD∈ , ),0[ ∞∈∀T . Integrating the above 
equation from 0=t  to Tt = , yields 
 ∫∫ +−≤− TTn dttDdttegVTV 0 220 22233  )(21)(21)0()( δ  (45) 
Since 0)( ≥TV , the above inequality implies the following 
inequality 
 ∫∫ +≤ TTn dttDVdtteg 0 2230 222  )(21)0()(21 δ  (46) 
Using (37), the above inequality is equivalent to the following 
∫
∫
+++
++≤
T
n
T
n
T
n
T
n
T
n
T
n
T
dttD
ggg
ggg
dtte
0 
2
2
2
43
21
20 
2
2
 )()0(~)0(~1)0(~)0(~1
)0(~)0(~1)0(~)0(~1)0()0(1)(
δ
ββ
ββ
rrvv
mmwwee
  (47) 
If the system starts with initial conditions 0e =)0( , 0w =)0(~ , 
0m =)0(~ , 0v =)0(~  and 0r =)0(~ , the ∞H  tracking 
performance in (47) can be rewritten as 
 
nTLD gD
e δ≤
∈
2
],0[2
sup  (48) 
where ∫= T dttee 0 2222 )(  and ∫= T dttDD 0 22 )( . The 
attenuation constant δ  can be specified by the designer to 
achieve desired attenuation ratio between |||| 2e  and |||| D . If 
∞=δ , this is the case of minimum error tracking control 
without disturbance attenuation [19], [20]. Then, the desired 
robust tracking performance in (47) can be achieved for a 
prescribed attenuation level δ . 
V. LUSM DRIVE SYSTEM AND EXPERIMENTAL RESULTS 
The computer control system for the LUSM drive system is 
depicted in Fig. 5. The adopted LUSM is a HR8 motor 
manufactured by Nanomotion with maximal voltage (270 
Vrms, 39.6 kHz, sine wave), maximal current consumption 
(600 mArms), maximum allowable velocity (250 mm/s), 
dynamic stall force (30-36 N), static holding force (28 N) and 
maximal power consumption (30 W). The LSUM is driven 
using a full-bridge voltage source inverter based on unipolar 
switching technique, in which the output of RIBC system, u , 
is used as the control voltage of pulse-width-modulation 
(PWM). Both the nominal case and the parameter variation 
case are provided for experiments. The parameter variation 
case is the addition of one iron disk with 2.1 kg weight to the 
mass of the moving table. The reference model with rise time 
0.467 sec, damping ratio set at 1 is chosen as 
)(
1
0
4.1484.51
10
tx
x
x
x
x
m
v
d
v
d ⎥⎦
⎤⎢⎣
⎡+⎥⎦
⎤⎢⎣
⎡⎥⎦
⎤⎢⎣
⎡
−−=⎥⎦
⎤⎢⎣
⎡
&
&
 (49) 
where TTvd xx ]0,0[)]0(),0([ =  and )(txm  is a periodic step 
reference command with amplitude cm4 . When )(txm  is a 
sinusoidal reference command with amplitude cm4± , the 
reference model is set as unity. First, the control system 
parameters are chosen as 1.01 =β  and 01.0432 === βββ . 
The RCMAC used in this study is characterized by 4=ρ , 
5=En , 42×== RB nn . The receptive-field basis functions 
   
∞H  control approach, so that the stability of the system and 
robust tracking performance can be guaranteed. Finally, the 
effectiveness of the proposed control system is verified by 
hardware experiments of LUSM motion control under the 
occurrence of uncertainties. Experimental results show that 
high-precision tracking response can be achieved by using the 
proposed RIBC system. 
Table 
Position
Tracking Error
Control Effort  
Start
0 cm
4 cm
2 sec
Table 
Position
Start
0 cm
4 cm
2 sec
Start
0 mm
2 sec
3.2 mm Tracking Error
Start
0 mm
2 sec
3.2 mm
Start
0 V
2 sec
5 V Control Effort
Start
0 V
2 sec
5 V
(a)
(b)
(c)
(d)
(e)
(f)
-4 cm -4 cm
Reference 
Trajectory
Reference 
Trajectory
1e 1e
u u
 
Fig. 8. Trajectory responses, tracking errors, and control efforts 
of RIBC system due to sinusoidal command: (a), (b), (c) 
for .01=δ . (d), (e), (f) for 1.0=δ . 
Table 
Position
Tracking Error
Control Effort  
Start
0 cm
4 cm
4 sec
Table 
Position
Start
0 cm
4 sec
Start
0 mm
4 sec
3.2 mm Tracking Error
Start
0 mm
4 sec
3.2 mm
Start
0 V
4 sec
5 V Control Effort
Start
0 V
4 sec
5 V
(a)
(b)
(c)
(d)
(e)
(f)
-4 cm
4 cm
-4 cm
Reference 
Trajectory
Reference 
Trajectory
1e 1e
u u
 
Fig. 9. Trajectory responses, tracking errors, and control efforts of 
RIBC system due to mixed command: (a), (b), (c) for 
.01=δ . (d), (e), (f) for 1.0=δ . 
REFERENCES 
[1] J. S. Albus, “A new approach to manipulator control: The 
cerebellar model articulation controller (CMAC),” J. Dyn. 
Syst., Measurement, Contr., vol. 97, no. 3, pp. 220-227, 1975. 
[2] J. S. Albus, “Data storage in the cerebellar model articulation 
controller (CMAC),” J. Dyn. Syst., Measurement, Contr., vol. 
97, no. 3, pp. 228-233, 1975. 
[3] S. H. Lane, D. A. Handelman, and J. J. Gelfand, “Theory and 
development of higher-order CMAC neural networks,” IEEE 
Contr. Syst. Mag., vol. 12, no. 2, pp. 23-30, 1992. 
[4] C. Shang, D. Reay, and B. Williams, “Adapting CMAC 
neural networks with constrained LMS algorithm for efficient 
torque ripple reduction in switched reluctance motors,” IEEE 
Trans. Control Syst. Technol., vol. 7, no. 4, pp. 401-413, 
1999. 
[5] Y. H. Kim, and F. L. Lewis, “Optimal design of CMAC 
neural-network controller for robot manipulators,” IEEE 
Trans. Syst., Man, Cybern., C, vol. 30, no. 1, pp. 22-31, 2000. 
[6] Y. F. Peng, R. J. Wai, and C. M. Lin, “Implementation of 
LLCC-resonant driving circuit and adaptive CMAC neural 
network control for linear piezoelectric ceramic motor,” 
IEEE Trans. Ind. Electron., vol. 51, no. 1, pp. 35-48, 2004. 
[7] J. Y. Choi, and J. A. Farrell, “Adaptive observer backstepping 
control using neural networks,” IEEE Trans. Neural 
Networks, vol. 12, no. 5, pp. 1103-1112, 2001. 
[8] F. J. Lin, R. J. Wai, W. D. Chou, and S. P. Hsu, “Adaptive 
backstepping control using recurrent neural network for 
linear induction motor drive,” IEEE Trans. Ind. Electron., vol. 
49, no. 1, pp. 134-146, 2002. 
[9] M. Krstic, I. Kanellakopoulos, and P. V. Kokotovic, 
Nonlinear and Adaptive Control Design. New York: Wiley, 
1995. 
[10] K. P. Tee, and S. S. Ge “Control of fully actuated ocean 
surface vessels using a class of feedforward approximators,” 
IEEE Trans. Control Syst. Technol., vol. 14, no. 4, pp. 
750-756, 2006. 
[11] R. J. Wai, and J. D. Lee, “Robust levitation control for linear 
maglev rail system using fuzzy neural network,” IEEE Trans. 
Control Syst. Technol., vol. 17, no. 1, pp. 4-14, 2009. 
[12] H. J. Shieh, and C. H. Hsu, “An 
integrator-backstepping-based dynamic surface control 
method for a two-axis piezoelectric micropositioning stage,” 
IEEE Trans. Control Syst. Technol., vol. 15, no. 5, pp. 
916-926, 2007. 
[13] J. Zumeris, Ceramic Motor. United States Patent, 5777423, 
1998. 
[14] C. M. Lin and Y. F. Peng, “Adaptive CMAC-based 
supervisory control for uncertain nonlinear systems,” IEEE 
Trans. Syst., Man, Cybern., B, vol. 34, no. 2, pp. 1248-1260, 
2004. 
[15] S. Jagannathan, “Discrete-time CMAC NN control of 
feedback linearizable nonlinear systems under a persistence 
of excitation,” IEEE Trans. Neural Networks, vol. 10, no. 1, 
pp. 128-137, 1999. 
[16] K. J. Åström and B. Wittenmark, Adaptive Control. New York: 
Addison-Wesley, 1995. 
[17] J. J. E. Slotine, and W. Li, Applied Nonlinear Control. 
Englewood Cliffs, NJ: Prentice-Hall, 1991. 
[18] Y. G. Leu, T. T. Lee, and W. Y. Wang, “Observer-based 
adaptive fuzzy-neural control for unknown nonlinear 
dynamical systems,” IEEE Trans. Syst., Man, Cybern., vol. 
29, no. 5, pp. 583-591, 1999. 
[19] Y. C. Chang, and B. S. Chen, “A nonlinear adaptive ∞H  
tracking control design in robotic systems via neural 
networks,” IEEE Trans. Control Syst. Technol., vol. 5, no. 1, 
pp. 13-29, 1997. 
[20] W. Y. Wang, M. L. Chan, C. C. J. Hsu, and T. T. Lee, “ ∞H  
tracking-based sliding mode control for uncertain nonlinear 
systems via an adaptive fuzzy-neural approach,” IEEE Trans. 
Syst., Man, Cybern. B, vol. 32, no. 4, pp. 483-492, 2002. 
Discovery (Prof. Alexander M. Korsunsky)、Incorrect or Defective Pill Detection Using a 
Dynamic Data-Driven Application System Paradigm (Prof. Craig Douglas)、Impact of Delay 
Information and Pricing on Public Service System Subject to Congestions (Prof. Zhe George 
Zhang)、Artificial Intelligence and Software Agents: Status and Future Trends (Prof. Yee Ming 
Chen)、Designing User-friendly Safety Signs with Considerations of Cognitive Features (Dr. 
Alan Hoi-shou Chan)、Do Phishing Announcements Influence Market Value? An Analysis of 
Global Firms (Dr. Indranil Bose)、SpeedyDes3 - Speedy Des3 Encryption for Video Poker 
Game Machines Licensed in Italy (Dr. Ka Lok Man)、Amateur Radio: More than a hobby! 
(Miroslav Skoric)等多場專題演講，與會人士包含世界各地的大學教授、研究生、工程師、
研究中心及電子電機領域相關人員。 
本人論文被安排於三月十八日 9:00~10:45 之 ICAIA Session I 中發表，論
文題目為 Design of an omni-directional spherical robot: using fuzzy control，而本場次共
有 7 篇論文同時發表，而另一篇論文 Two-wheeled robot control based on self-tuning 
output recurrent CMAC 則被安排於下午 2:00~15:15 之 ICAIA Session III 中發表，
而本場次共有 5 篇論文同時發表，會中討論熱烈，其中有多位學者對本研究領
域與主題提供了一些值得參考的意見與建議。  
二、與會心得 
2009 International MultiConference of Engineers and Computer Scientists  
(IMECS2009)為電機電子重要會議之一，此會議更結合電機電子與電腦資訊相關
領域的十三個主題所聯合舉辦，會中所發表之論文嚴謹且具有創新性與突破
性，其發表論文研究領域廣泛涉及智慧型與現代控制、訊號處理、視覺與感測、
機械結構、自動化及人工智慧之工業應用等，其中智慧型控制即為本人發表論
文之主題。藉由此次會議可讓人充分了解近來智慧型系統在各領域上的發展與
應用之趨勢，進而激發更多在將來研究上的靈感；因此收穫頗為豐碩。另外一方
面，本次會議的論文內容，不僅著重於理論方面的探討更注重實際的應用層面，因此，將來
的研究方向應可朝實用化的目的來進行，以達到理論與實務並重。此外，目前國內相關領
域及其應用方面的論文數目及研究計劃持續成長，為更提高台灣於此領域之學
Design of an omni-directional spherical robot: 
using fuzzy control 
Abstract-In this study, an omni-directional spherical mobile 
robot is implemented. The key feature of this robot is it can 
move directly in any direction with no constraint. In order to 
control such a spherical robot, a fuzzy controller is proposed. 
The major advantage of the proposed fuzzy controller is it can 
deal with the unknown nonlinearities and external 
disturbances. Finally, the experimental results demonstrate the 
good performance of the whole control system. 
 
Index Terms— Omni-directional spherical mobile robot, 
fuzzy control 
I. INTRODUCTION 
In the past years, mobile robot system control has 
received many attention and lots of significant 
developments have been proposed. The robot system is high 
nonlinearity that is usually unknown and time varying, and 
it also has many uncertainty terms in its dynamic, such as 
friction, payload variation, and disturbance. It is difficult to 
establish an exact mathematical model for the design of a 
model-based control system. To dealing with such an 
unknown nonlinearities and external disturbances, many 
control strategies have been proposed, including 
sliding-model control, adaptive control, and intelligent 
control.  
Recently, the balance control of one-wheeled and 
two-wheeled platforms have been developed in robotic 
locomotion. Its features include compact size, light and 
portable, lower power consumption and convenient and 
suitable for traversing narrow spaces. The two-wheeled 
robot [1] and one-wheeled robot [2] have been demonstrated 
already. Such a wheeled robot balances in the forward and 
backward directions by moving the wheels.  
There are many similar researches in the filed of wheeled 
mobile robot such as JOE [3], Segway [4], the Personal 
riding-type wheeled Mobile Platform (PMP) [5] and RMP 
[6]…etc. Segway is a transporter consists only of two 
wheels and a steering handle. The motion control of Segway  
 
Manuscript received December 30, 2008. This work was supported by 
the National Science Council of Taiwan, R.O.C. under the Grant 
NSC96-2221-E-155-072  
Y.F. Peng is with the Electrical Engineering Department, University of 
Ching-Yun, Chung-Li, Tao-Yuan, 320, Taiwan, R.O.C. (e-mail: 
yfpeng@cyu.edu.tw). 
C.H. Chiu is with Department of Electrical Engineering, Yuan-Ze 
University, Chung-li, Taoyuan 320, Taiwan. (e-mail: 
chchiu@saturn.yzu.edu.tw).  
W.R. Tsai is with Department of Electrical Engineering, Chung Yuan 
Christian University, Chung-li, Taoyuan 320, Taiwan.  
M.H. Chou is with Department of Electrical Engineering, Yuan-Ze 
University, Chung-li, Taoyuan 320, Taiwan.  
likes a wheeled inverted pendulum by moving the wheels in 
the forward and backward directions. RMP is developed 
based on Segway. In 2005, PMP-2 was proposed in Japan [7] 
and it has only two wheels and standing platform without 
steering handle on it. Such a vehicle has two advantages: a 
reduction in total weight through its simple structure and a 
space-saving design that does not use a steering unit. 
Although the wheeled mobile robot has many advantages, 
the wheeled robot cannot immediately turn in a given 
direction without re-direct the drive wheels. In order to 
overcome this drawback, an omni-directional vehicle (B.B. 
Rider) is proposed by Tokyo University in Japan [8]. The 
B.B. Rider moves by rolling a basketball and balancing on it. 
In [9], a similar research of an omni-directional spherical 
mobile robot system (Ballbot) is proposed at Carnegie 
Mellon University in America.  
Because the wheel-based robot has some constraint in 
mechanism, they can not move around well. In this paper, 
we design and implement of an omni-directional spherical 
mobile robot control system. The mobile mechanism of 
spherical robot is different from the wheel-based one. The 
major advantage of this spherical robot is that can move for 
omni-directional with no constraint. It is obviously such a 
robot system is high nonlinearity and is always unknown. It 
is difficult to establish an exact mathematical model for the 
design of a model-based control system. To dealing with 
such an unknown nonlinearities and external disturbances, 
the technique of fuzzy logic control is introduced. The fuzzy 
logic control is a complete difference approach that does not 
require a precise mathematical model of the system.  This 
control method is based on human experience to understand 
the behavior of the system.  Thus, control design is simple 
than traditional one.  Recent years, there have been many 
researches about the intelligent control for complex 
nonlinear system [10]-[19].   
In this paper, we will propose a fuzzy logic 
self-dynamic controller for an omni-directional spherical 
mobile robot system. The fuzzy rules in fuzzy controller can 
be adjusted by user experience. So for the omni-directional 
spherical mobile robot, it is easily implementation by using 
fuzzy control technique. This system is designed around 
personal computer, and comprises some hardware 
components. Experimental results show that the present 
fuzzy self-dynamic controller with simple and intuitively 
understandable structure can control the whole system very 
well. 
II. SPHERICAL ROBOT SYSTEM 
In this paper, the spherical mobile robot is composed 
Ya-Fu Peng, Chih-Hui Chiu, Wen-Ru Tsai, and Ming-Hung Chou 
  
sub-controllers, one is for position control and the other is 
for angle control.  Then the four-input variable system 
becomes two two-input variable systems.  We call it as a 
double loop structure.  The control scheme is shown below. 
 
 
 
 
Fig.4.1 The control scheme of the stabilization controller 
 
Now, we will explain this control system as follow.  Let us 
consider this problem that we try to make the robot stand 
upright and set the position at set-point.  First, we should 
move the robot away form the set-point in order to get a 
virtual angle on the direction to the set-point.  Second, we 
must move the transporter to catch the virtual angle.  
Through such a moving process, we can make the robot 
stand upright and move it to the set-point gradually.  So, 
we first generate a virtual angle from the position controller.  
We employ two premises and one consequence and overall 
25 rules.  The structure is shown below. 
 
 
 
 
 
 
 
 
 
 
 
When receiving the virtual angle, the angle controller should 
move the transporter to catch up the virtual angle in finite 
iterative loops.  The angle controller has also 2 inputs and 
1 output. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Then, by simple fuzzy control theory, the desired result can 
obtain. 
V. EXPERIMENTAL RESULTS 
 In the section, we will implement the spherical 
mobile using the effective proposed control scheme by 
several experiment results.  
 
Balance control 
First, we will keep the spherical robot standing upright 
at the original position.  
Fig.5.1 shows the performance of spherical robot on 
the X-Y plane. Fig.5.2 shows the position trajectories of X 
and Y axes. Fig.5.3 shows the angle of body on the X-Y 
plane. The body angles of X and Y axes are shown in 
Fig.5.4. 
 NB NS ZO PS PB 
NB NVB NB PM NS  ZO 
NS NB NM  NS ZO PS 
ZO NM NS ZO PS PM 
PS NS ZO NS NM NB 
PB ZO PS PM PB  PVB 
U NB NS ZO PS PB
NB PVB PB PM ZO ZO
NS PB PM PS ZO ZO
ZO PM PS ZO NS NM
PS ZO ZO NS NM NB
PB ZO ZO NM NB NVB
Fig. 4.2 The position controller  
P 
P&  
Controller 
Feedback position op  
rθ
Virtual 
angle 
rp  
Desired 
position 
A/D 
Angle 
Position 
controller
A/D 
position 
rθ  
Angle 
controller 
System 
oθ  
Change rate of the angle error 
Fig. 4.3 The angle controller 
θ
θ&
Controller 
oθ Real angle
Virtual 
angle 
rθ
Output U
Angle error 
change rate of the angle errorθ&  
an
gl
e 
er
ro
r 
θ 
Table 2. The rule table of angle controller 
Table 1. The rule table of position controller  
rθ
change rate of the position error P&  
po
si
tio
n 
er
ro
r 
p 
 
Fig. 5.8 The angle trajectories of X and Y axes. 
 
Orientation 
In this case, we will move the spherical robot from 
origin to the goal position. We chose the goal position is 
)0,30(),( −=yx in this case.  
Fig.5.7 shows the performance of spherical robot on 
the X-Y plane. Fig. 5.8 shows the position trajectories of X 
and Y axes. Fig. 5.9 shows the angle of body on the X-Y 
plane. The body angles of X and Y axes are shown in Fig. 
5.10. 
 
Fig. 5.7 The performance of the robot on an X-Y plane. 
 
 
Fig. 5.8 The position trajectories of X and Y axes. 
 
 
Fig. 5.9  The angle of the body on X-Y plane. 
 
 
Fig. 5.10 The angle trajectories of X and Y axes. 
 
VI. CONCLUSION 
This study implemented successfully the omni- 
direction spherical mobile robot based on fuzzy control. The 
system is stabilized and controlled by a fuzzy controller at 
each axis. Finally, the experimental results show that the 
proposed control scheme can control the whole system well. 
 
VII. REFERENCE 
[1] Y.S. Ha and S. Yuta. “Trajectory tracking control for navigation of 
self-contained mobile inverse pendulum.” In Proc. IEEE/RSJ Int’l. 
Conf. on Intelligent Robots and Systems, Page(s):1875-1882, 1994. 
[2] R. Nakajima, T. Tsubouchi, S. Yuta, and E. Koyanagi. “A 
development of a new mechanism of an autonomous unicycle.” In 
Proc. IEEE/RSJ Int’l. Conf. on Intelligent Robots and Systems, 
pages 906-12, Grenoble, France, September 7-11 1997. 
[3] F. Grasser, A. D'Arrigo, S. Colombi, A.C. Rufer, “JOE: a mobile, 
inverted pendulum” IEEE Transactions on Industrial Electronics 
Vol. 49, Issue 1, Feb. 2002 Page(s):107 – 114 
[4] Segway Inc. Segway homepage, 2008. http://www.segway.com/. 
[5] M. Sasaki, N. Yanagihara, O. Matsumoto, K. Komoriya, “Forward 
and backward motion control of Personal riding-type wheeled 
Mobile Platform.” Robotics and Automation, 2004. Proceedings. 
ICRA '04. 2004 IEEE International Conference on Vol. 4, Apr 
26-May 1, 2004 Page(s):3331 - 3336 
[6] H.G. Nguyen, J. Morrell, K. Mullens, A. Burmeister, S. Miles, N. 
Farrington, K. Thomas, and D. Gage. “Segway robotic mobility 
platform.” In SPIE Proc. 5609: Mobile Robots XVII, Philadelphia, 
PA, October 2004. 
[7] M. Sasaki, N. Yanagihara, O. Matsumoto, K. Komoriya, “Steering 
control of the personal riding- type wheeled mobile platform 
(PMP).” Intelligent Robots and Systems, 2005. (IROS 2005). 2005 
IEEE/RSJ International Conference on 2-6 Aug. 2005 
Page(s):1697 – 1702 
Disturbance
 
 
 
 
Abstract—In this study, a self-tuning output recurrent 
cerebellar model articulation controller (SORCMAC) is 
investigated to control a two-wheeled robot.  Since it captures 
the system dynamics, the proposed SORCMAC has superior 
capability to the conventional cerebellar model articulation 
controller in efficient learning mechanism and dynamic 
response.  The dynamic gradient descent method is also adopted 
to online adjust the SORCMAC parameters.  Finally, the 
effectiveness of the proposed control system is verified by the 
simulations of two-wheeled robot control.  Simulation results 
show that the two-wheeled robot can be controlled stably with 
uncertainty disturbance by using the proposed SORCMAC. 
 
Index Terms— SORCMAC, two-wheeled robot, gradient 
descent method. 
I. INTRODUCTION 
 In the past several years, there are several literatures to 
study the topic “wheeled robot”.  The main topic of this 
research is how to keep the robot’s balance.  Such a system 
would become a primary tool for studying balance in active 
balancing system.  It is also to be an important precursor to 
the field of legged machines and locomotion studies for 
robotics.  There are many researches in this filed.  In [1], a 
trajectory tracking algorithm based on a linear state space 
model was proposed to control mobile robot.  Graser et al. [2] 
used Newtonian approach and linearization method to get a 
dynamic model to design a controller for a mobile.  In [3], a 
dynamic model was derived with respect to the wheel motor 
torques as input while taking the nonholonomic no-slip 
constrains into considerations.  Furthermore, two controllers 
were proposed to stabilize the vehicle’s pitch and position.   
Until now, at least one commercial product is available 
such as “Segway”. 
Modern control system often requires high-speed 
high-accuracy linear motions. These linear motions are 
usually realized using the rotary motors with a mechanical 
transmission, such as reduction gears and lead screw. These 
 
Manuscript received December 15, 2007. This work was supported by the 
National Science Council of Taiwan, R.O.C. under the Grant 
NSC96-2221-E-155-072  
C.H. Chiu is with Department of Electrical Engineering, Yuan-Ze 
University, Chung-li, Taoyuan 320, Taiwan. (e-mail: 
chchiu@saturn.yzu.edu.tw).  
W.R. Tsai is with Department of Electrical Engineering, Chung Yuan 
Christian University, Chung-li, Taoyuan 320, Taiwan.  
M.H. Chou is with Department of Electrical Engineering, Yuan-Ze 
University, Chung-li, Taoyuan 320, Taiwan.  
Y. F. Peng is with the Electrical Engineering Department, University of 
Ching-Yun, Chung-Li, Tao-Yuan, 320, Taiwan, R.O.C. (e-mail: 
yfpeng@cyu.edu.tw). 
transmission mechanisms not only significantly reduce the 
linear motion speed and dynamic response, but also introduce 
the backlash and large friction. A two-wheeled robot can 
besimply considered as an inverted pendulum on a two 
coaxial wheels which have independent drives.  This system 
is composed of a chassis carrying a dc motor coupled to a 
gearbox for each wheel.  The two dc motors are all the rotary 
motors.  It is obviously the transmission loss exists.  
Therefore, its mathematical model will be complex and the 
motor parameters are time-varying due to increasing in 
temperature and changing in motor drive operating condition 
[4,5].  For control viewpoint, the conventional control 
technologies always need a good understanding of the plant 
models. Since a two-wheeled robot dynamic model is 
difficult to obtain, it is very difficult to control a two-wheeled 
robot using the conventional control technologies. In recent 
years, many advanced control techniques have been adopted 
for a two-wheeled robot control [1-3,6]; however, most of 
these methods need the plant model and some of these design 
procedures are overly complex. 
Recently, many researches have been done on the 
applications of neural networks (NNs) for identification and 
control of dynamic systems [7-12]. Many authors have 
suggested NNs as powerful building blocks for a wide class 
of complex nonlinear system control strategies when there 
exists no complete model information or, even, a controlled 
plant is considered as a “black box” [7]. According to the 
structure, the NNs can be mainly classified as feedforward 
neural networks (FNNs) [8], [9] and recurrent neural 
networks (RNNs) [10,11]. The most useful property of NNs 
is their ability to uniformly approximate arbitrary 
input-output linear or nonlinear mappings on closed subsets. 
Based on this property, the NN-based controllers have been 
developed to compensate the effects of nonlinearities and 
system uncertainties in control system, so that the stability, 
convergence and robustness of the system can be improved. 
Moreover, RNN has capabilities superior to FNN, such as the 
dynamic response and information storing ability [10,11]. 
Since an RNN has an internal feedback loop, it captures the 
dynamic response of system with external feedback through 
delays. Thus, the RNN is a dynamic mapping and 
demonstrates good control performance in presence of 
unmodelled dynamics. However, no matter FNNs or RNNs, 
the learning is slow since all the weights are updated during 
each learning cycle. Therefore, the effectiveness of NN is 
limited in problems requiring on-line learning. 
The cerebellar model articulation controller (CMAC) has 
been adopted widely for the closed-loop control of complex 
dynamical systems owing to its fast learning property, good 
generalization capability, and simple computation [13,14]. 
Two-wheeled robot control based on self-tuning 
output recurrent CMAC 
Chih-Hui Chiu, Wen-Ru Tsai, Ming-Hung Chou, and Ya-Fu Peng 
  
 
 
 
It is obviously the transmission loss exists.  Therefore, the 
mathematical model of such a system is complex and the 
motor parameters are time-varying due to increasing in 
temperature and changing in motor drive operating condition.  
For control viewpoint, the conventional control technologies 
always need a good understanding of the plant models.  Since 
the accurate dynamic model is difficult to obtain, it is very 
difficult to control a two-wheeled robot using the 
conventional control technologies. 
In this study, a model free self-tuning output recurrent 
cerebellar model articulation controller for a two-wheeled 
robot is investigated. 
III. SORCMAC CONTROL SYSTEM 
An SORCMAC control system is proposed in this 
section. The configuration of the proposed control system is 
shown in Fig. 2, where the reference angle signal θ  is 
specified by a reference model following a command input 
*θ  and pθ  is the angle output of the two-wheeled robot 
system. Moreover, the reference signal θΔ  is specified by a 
reference model following a position command input mx  
and the position output of the robot x. Clearly, θΔ  is 
obtained from the robot’s position error. It is a virtual angle 
which is used to move the robot forward or backward to the 
target position.  In this paper, a virtual angle can be gotten as 
))()(()( NxNxkN mx −=Δθ  where xk  is a small positive 
constant.  Obviously, )(NθΔ  will be zero when )(Nx  
equals to )(Nxm .  It means that the robot moves to the target 
position already.  The inputs of SORCMAC are the mix angle 
tracking error of the robot’s body 
)()()()( NNNNe pm θθθ Δ−−=  and change-of-error 
)1()()( −−=Δ NeNeNe mmm ; the output of SORCMAC is 
the control signal u . Here, the model of the robot system is 
unknown. 
 
Fig. 2 Block diagram of two-wheeled robot control system 
3.1   Description of ORCMAC 
An output recurrent cerebellar model articulation 
controller (ORCMAC) is proposed and shown in Fig. 3a. The 
signal propagation and the basic function in each space are 
introduced as follows. 
1) Input space X: For a given nTnxxx ℜ∈= ],,,[ 21 Lx , 
each input state variable ix  must be quantized into discrete 
regions (called elements) according to given control space. 
The number of elements, En , is termed as a resolution.  
2) Association memory space A: Several elements can be 
accumulated as a block, the number of blocks, Bn , in 
ORCMAC is usually greater than two. The A denotes an 
association memory space with An  ( BA nnn ×= ) 
components. In this space, each block performs a 
receptive-field basis function, which can be defined as 
rectangular or triangular or any continuously bounded 
function (e.g., Gaussian [18], [19] or B-spline [13], [21]). 
The Gaussian function is adopted here as the receptive-field 
basis function, which can be represented as 
 
⎥⎥⎦
⎤
⎢⎢⎣
⎡ −−= 2
2)(
exp
ik
ikrik
ik v
mxφ , for Bnk L,2,1=  (8) 
where ikφ  represents the kth block of the ith input ix  with 
the mean ikm  and variance ikv . In addition, the input of this 
block for discrete time N can be represented as 
 )1()()( −+= NyrNxNx iiri  (9) 
where ir  is the recurrent weight of the recurrent unit.  It is 
clear that the input of this block contains the memory terms 
)1( −Ny , which store the past information of the network. 
This is the apparent difference between the proposed 
ORCMAC and the conventional CMAC. Figure 3b depicts 
the schematic diagram of two-dimensional ORCMAC 
operations with 9=En  and 4=ρ  ( ρ  is the number of 
elements in a complete block). 
 
 
   a 
1 variable x
A B
IHG
FED
C
a
i
h
g
f
e
d
c
b
7
1
1
2
2 3
3
4
4
6
5
65
2 variable x
layer 1
layer 1 layer 2
layer 2
layer 3
Ee
Bb
Hh
State (4,4)
7
layer 3
J K L
l
k
j
8
9
8 9
layer 4
layer 4
Jj
 
   b 
Fig. 3 a Architecture of SORCMAC, b A two-dimensional 
SORCMAC with 4=ρ  and 9=En  
3) Receptive-field space T: The number of receptive-field, 
Rn , is equal to Bn  in this study. Each location of A 
Output 
Space Y
y 
x
M
1
 
 
k1φ
nkφ
bk wk
．．．
Input 
Space 
Association Memory Space A 
Receptive-Field Space T 
Weight Memory Space W
．．． ．．．．．．
1−z
1−z
r1
．．．1r
s
rns
rn － 
＋ 
u
pδ
rv
mw
PP
PP
,
,,mm ee Δ,
mm ee Δ,
mm ee Δ,  
ikikk rvmw ΔΔΔΔ ,,,
∗∗∗∗
rvmw ββββ ,,,
∗θ
pθ
θ
me
Two-wheeled 
robot system 
On-line 
learning 
Propagation 
error term 
Optimal 
learning-rate 
Referenc
e model 
RCMAC 
Reference 
model 
mx
x 
θΔ
－ 
 
 
 
SORCMAC, several simulation conditions are adopted. 
Moreover, the external disturbance d is added and is assumed 
to be 0.0873 during the all simulations. Fig. 4 is the 
performance of the robot in the normal condition. The target 
position of the robot is 1.5m.  Also, Conditions S1 denotes 
the extra mass 5Kg is added on the robot. Conditions S2 
denotes the existence of the extra mass as S1 with the 
difference center of mass of the robot body about 3L (half 
length of the robot). The simulation results are given in Fig. 5 
to Fig. 6, respectively. These simulation results show that 
favorable control performance can be achieved by using the 
optimal learning-rates SORCMAC. Thus, this SORCMAC 
control system can satisfy the requirement of the 
two-wheeled robot control. 
0 5 10 15 20 25 30
-0.2
0
0.2
0.4
0.6
Time(s)
A
ng
le
(ra
d)
Tracking response
0 5 10 15 20 25 30
-2
0
2
4
6
Time(s)
V
el
oc
ity
 o
f a
ng
le
(ra
d/
s)
Tracking response
 
(a) 
0 5 10 15 20 25 30
0
0.5
1
1.5
2
Time(s)
P
os
iti
on
(m
)
Tracking response
0 5 10 15 20 25 30
-5
0
5
10
Time(s)
V
el
oc
ity
 o
f p
os
iti
on
(m
/s
)
Tracking response
 
(b) 
0 5 10 15 20 25 30
-4
-2
0
2
4
Time(s)
C
on
tro
l e
ffo
rt(
N
)
0 5 10 15 20 25 30
-0.6
-0.4
-0.2
0
0.2
Time(s)
Tr
ac
ki
ng
 e
rro
r
 
(c) 
Fig. 4 Tracking response, self-tuning cerebellar model 
articulation controller in normal condition for 
two-wheeled robot 
0 5 10 15 20 25 30
-0.2
0
0.2
0.4
0.6
Time(s)
A
ng
le
(ra
d)
Tracking response
0 5 10 15 20 25 30
-2
0
2
4
6
Time(s)
V
el
oc
ity
 o
f a
ng
le
(ra
d/
s)
Tracking response
 
(a) 
0 5 10 15 20 25 30
0
0.5
1
1.5
2
Time(s)
P
os
iti
on
(m
)
Tracking response
0 5 10 15 20 25 30
-5
0
5
10
Time(s)
V
el
oc
ity
 o
f p
os
iti
on
(m
/s
)
Tracking response
 
(b) 
0 5 10 15 20 25 30
-4
-2
0
2
4
Time(s)
C
on
tro
l e
ffo
rt(
N
)
0 5 10 15 20 25 30
-0.6
-0.4
-0.2
0
0.2
Time(s)
Tr
ac
ki
ng
 e
rro
r
 
(c) 
Fig. 5 Condition S1, self-tuning output recurrent cerebellar 
model articulation controller with an extra mass (5Kg) 
for two-wheeled robot 
0 5 10 15 20 25 30
-0.2
0
0.2
0.4
0.6
Time(s)
A
ng
le
(ra
d)
Tracking response
0 5 10 15 20 25 30
-2
0
2
4
6
Time(s)
V
el
oc
ity
 o
f a
ng
le
(ra
d/
s)
Tracking response
 
(a) 
