 附件二 
國科會補助提升產業技術及人才培育研究計畫成果精簡報告 
學門領域：電力學門 
計畫名稱：感應電動機直接轉矩控制之數位矽智產開發  
計畫編號：NSC 94-2622-E-182-004-CC3 
執行期間：94 年 05 月 01 日至 95 年 04 月 30 日 
執行單位：長庚大學電機系 
主 持 人：朱家齊 
 
參與學生： 
姓   名 年   級 
(大學部、碩士
班、博士班) 
已發表論文或已申請之專利 
(含大學部專題研究論文、碩博士
論文) 
工作內容 
蔡泓錡 博士班 2 年級  報告撰寫、蒐集相關文獻
資料 
黃玉麟 碩士班 2 年級  軟體開發、實驗程序之執
行 
林佳肯 碩士班 1 年級  軟體開發、實驗程序之執
行 
 
合作企業簡介 
合作企業名稱：領眾科技公司 
計畫聯絡人：莊三峰 
資本額：500 萬元 
產品簡介： SOC 發展系統，自動化設備 
電話：(02)28820836 
 
現況說明:  
  近年來由於電力電子元件、超大型積體電路及微控制器的蓬勃發展，高精密度之伺服
馬達控制技術也日興月異。此學術領域涵蓋廣泛且具有技術整合性特質，也是自動化、國
防、航太、運輸、能源、與環保等工業發展的基礎技術。結合微電子技術與電力電子相關
產業，佔有相當重要的地位，因此先進國家如美日等國均視為下一波科技競爭主要發展目
標之一。因應系統晶片時代之來臨，許多廠商投入大量的人力與財力發展消費性積體電路
4. 系統整合與軟體偵錯測試。 
有助於研究的精進。經由此機會與企業界合作，不僅可訓練學生從事相關論文之研究，並
獲得諸多的工程實務經驗的累積，且可增進面對新課題時的知識與執行力。 
 
技術研發成果說明： 
1. 以領眾科技公司之嵌入式系統為基礎，以直接轉矩控制器達到控制電動機之轉矩與磁
通之目的。 
2. 以直接轉矩理論之設計馬達控制器，不需複雜之座標轉換及電流迴路解耦計算，且不
易受馬達參數化之影響，符合工業界應用之規格。 
3. 本設計是針對感應馬達驅動器的設計者，可藉由嵌入式系統實現直接轉矩控制器，縮
短驗証時間，以達成直接控制電動機之轉矩。 
4. 使用 DTC 理論以數位矽智產概念實現感應馬達控制器，不僅可提高控制效能，更能有
效縮小控制器的大小，節省成本並提高產品的競爭力。 
 
技術特點說明： 
本報告設計之直接轉矩控制法則設計感應馬達控制器數位矽智產，可透過FPGA與
IM感應馬達連接，快速驗證功能。為加快DTC控制器之運算速度，且不影響控制性能，
必須考慮下列幾個因素： 
z 資料格式：資料為幾個位元，定點數或浮點數。 
z 數值計算方法：電流或電壓之積分方法。 
z 量化誤差。 
經過上述考慮，本矽智產設計採 16 位元定點數運算，電壓信號計算使用矩形(rectangle)
積分法；而電流信號處理採梯形(Trapezoid)積分法以加快運算速度並提高其精確度。直接轉
矩控制運算流程如圖 1 所示。 
圖 1 中，ts為取樣時間，U0 (kTs)與I(kTs)分別表示直流鏈電壓與三相電流經取樣及數位
化的值；而Uref 與Iref為縮放因數(Scale Factor)，兩者相除即為正規化(Normalized)後的值在
[-1,+1]，以U0r與Ir表示。NVsd,qr與NIsd,qr的取法分別為矩形積分與梯形積分法則，在磁通量
之計算中，為了減少乘法器之數目，將取樣時間、縮放因數、座標轉換常數與定子電阻合
成為下列四項： refs UT 03
2 、 refs UT 02
1 、 refss ITR 2
3 、 refss ITR 2
1 ，最後即可得轉矩值及磁
通量。為方便了解，將直接轉矩控制演算流程重新表示如圖 2 所示。 
x x
0
1
-1
0
1
-1
0.5
-0.5
Z-1 Z-1
Vsdr Vsqr
NVsdr NVsqr
x x
ACC
+
ACC
+
U0r
refs UT 03
2
refs UT 02
1
-
∫ sdV ∫ sqV
Z-1
Isdr Isqr
NIsdr NIsqr
x
Isar
refss ITR 2
3
-
∫ sdsIR
2S
b,
S
c3S
a,
S
b,
S c
ACC
+
+
Isbr Iscr
-
Z-1
x
refss ITR 2
1
∫ sqsIR
ACC
+
+
x x
sdϕ
x x
sqϕ
sqϕsdϕ
Isqrsdϕ sqϕIsdr
x 3
-+
2
sdϕ 2sqϕ
2
sϕ
sqrsdIϕ sdrsqIϕ3
x
2
p
[ ]sdrsqsqrsd
ref
ref IIp
I
ϕϕ 3
2
−⋅=Γ
 
圖 2  DTC 演算流程圖 
 
DTC 矽智產架構如圖 3 所示，可概分為五個模組，分別為先進先出暫存器(First In First 
Out Memory, FIFO)、平行計算單元(Parallel Computing Unit, PCU)、核心運算單元(Core 
Computing Unit, CCU)、修正單元(Correct Unit, CU)與狀態機(Finite State Machine, FSM)，以
下幾節將詳細介紹。 
FIFO
Data_in
clk
rst
Write_to_stack
Read_from_stack
Data_out
Stack_full
Stack_empty
0
Stack_width-1
Stack_height-1
0
 
圖 4 先進先出暫存器架構圖 
 
 
圖 5 先進先出暫存器讀寫旗標示意圖 
 
表 1 FIFO 腳位功能 
輸入腳位 功能描述 輸出腳位 功能描述 
data_in 資料輸入端(共 4 位元) data_out 資料輸出端(共 4 位元)
write_to_stack 為 1 時寫入 stack 的值 stack_full 為 1 時表示 stack 已滿
read_from_stack 為 1 時讀出 stack 的值 stack_empty 為 1 時表示 stack 已空
 
表 2  FIFO 波形驗證 
時間 波形變化 
10 將輸出與所有旗標歸 0，stack_empty=1(表示堆疊器是空的) 
80 write_to_stack=1，開始將 data_in 之上數之資料，依序寫入 stack 0~3，
此時 ptr_diff 的值也持續累加 
 
155 stack 0~3 均已寫入資料，故將 stack_full 設為 1 
由此架構中可以看出組成元件皆為基本運算元(如減法器、加法器與移位暫存器等等)及直接
轉矩控制之電壓、電流表。電壓暫存器與切換表經由定子側直軸電壓分量表與定子側交軸
電壓分量表，計算前一個取樣時間((k-1)Ts)的定子電壓分量，而四個暫存器分別儲存這些值
經過一個取樣時間。以ISE軟體完成之電路圖如圖 8 所示，模擬結果如圖 9 所示。 
 
 
圖 8 以 ISE 軟體完成之平行計算單元電路圖 
 
    
記憶體1 記憶體2
多工器多工器
多工器
乘法器 磁通量
運算單元
解
多
工
器
多工器 多工器
加減法器
解多工器
記憶體控制線
定子側
直軸電流
初始值定子側
電壓分量
8
多工器多工器
多工器
乘法器
解
多
工
器
定子側
電流分量
暫存器1,暫存器2,…暫存器7
轉矩
估測值
磁通
估測值
定子側
直軸磁通量
定子側
交軸磁通量
核心運
算單元
控制線
回饋線
2 2
3
2 3
 
圖 10 核心運算單元架構圖 
 
圖 12 核心運算單元模擬結果 
 
z 修正單元(CU) 
修正單元包含了兩組磁滯控制器(轉矩、磁通磁滯控制器)、磁通位置判斷器與邏輯切換
表。磁滯控制器用來比較定子磁通與轉矩估測值與參考值，而磁通位置判斷器根據定子磁
通之直、交軸分量，判斷出磁通位置，最後邏輯切換表依照前兩者輸出的信號，產生相對
應的切換狀態(SaSbSc)，其架構如圖 13 所示，以ise軟體完成之電路圖如圖 14 所示，模擬結
果如圖 15 所示，由圖 15 可看出，當第一個週期時，定子磁通命令值大於估測值(flux=1)，
轉矩命令值大於估測值時(torque=1)，此時定子磁通直軸分量大於交軸分量，故開關切換狀
態(SaSbSc)應選擇 010，由波形可知本單元功能正確。 
磁通位置
估測器 磁通量比較器 轉矩比較器
參考轉矩值
參考磁通值
向量切換表
暫存器
修正
單元
切換狀態
轉矩
估測值
磁通
估測值
定子側
直軸磁通量
定子側
交軸磁通量
3 2 2
控制線
 
圖 13 修正單元架構圖 
 
圖 17  PCU 搭配狀態機模擬結果 
 
 
圖 18 控制 CU 之狀態機 
 
 
圖 19 CU 搭配狀態機模擬結果 
 
可利用之產業及可開發之產品： 
    本研究有助於工業上精密控制之應用，為馬達控制器產業提出另一種快速簡捷高效率
的方法。本研究所設計出的控制器可利用高效能之精密工業，如風力發電機，電動車、
