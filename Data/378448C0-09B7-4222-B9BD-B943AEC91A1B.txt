I 
 
中文摘要 
雲端運算主要的概念是將軟、硬體等資源整合成服務，再透過網路以隨需的方式將各種不同型式
的服務提供給使用者，使用者可以在任何地方、經由任何終端設備，存取他們所需要的服務。由於雲
端運算技術對產業界有非常大的影響，因此不論國內外學術界或是業界都積極的投入人力與資源想要
能夠揭開雲端運算的神秘面紗。因應這樣的時勢所趨，本計畫的目的在研究雲端運算的關鍵技術來開
發一套分散式雲端運算中介軟體，我們規劃了三年的工作目標，第一年針對每個學術單位內的一台或
多台計算與儲存資源，透過虛擬化技術將其整合成虛擬叢集系統，第二年利用 P2P 的技術，整合分散
於各學術單位的虛擬叢集系統，形成一分散式的雲端運算平台，的三年透過兩個性質相異的雲端應用
來測試及驗證此一分散式雲端運算的各種效能，透過系統化的效能評估來對各元件的設計做最佳化的
調校。此外，在雲端系統設計之初，便全面的考量資訊安全相關議題，以提供安全的雲端服務環境。
此中介軟體的開發將可以讓有意從事雲端運算技術相關研究及應用的單位，能夠有一雲端運算實驗環
境，藉此帶動台灣雲端運算相關技術的研究與發展。 
在第一年的計畫中我們實作出了大學雲的系統雛形，此系統能夠將一個單位內的眾多計算、儲存
與網路資源給虛擬化，並且依據上層使用者的要求來動態且隨需的提供資源。此外我們也提供了此一
系統的入口網站，讓使用者可以透過單一登入(Single Sing On)便能使用大學雲系統中所提供的各種服
務。 
 
關鍵詞：雲端運算、虛擬化、P2P、雲端運算中介軟體、入口網站 
 
1 
 
一、 前言 
雲端運算主要的概念是將軟、硬體等資源整合成服務，再透過網路以隨需的方式將各種不同型式
的服務提供給使用者，使用者可以在任何地方、經由任何終端設備，存取他們所需要的服務。由於雲
端運算技術對產業界有非常大的影響，因此不論國內外學術界或是業界都積極的投入人力與資源想要
能夠揭開雲端運算的神秘面紗。因應這樣的時勢所趨，本計畫希望研究雲端運算的關鍵技術來開發一
套分散式雲端運算中介軟體，透過各子計畫的功能規畫與研發，將可以結合眾多分散各地的學校或是
教學單位的資源來建置雲端運算平台，並提升總體資源的使用率、可用度與容錯能力。另外，由於我
們的設計特別針對分散式的資源以及考慮資源的異質性，因此更可以將此分散式雲端平台套用到整合
多個分散式的資料中心，或擴展到整合跨國的資源來建置大型分散式的雲端運算環境。 
二、 研究目的 
本計畫的目的在研究雲端運算的關鍵技術來開發一套分散式雲端運算中介軟體，本年度我們針對
每個學術單位內的一台或多台計算與儲存資源進行虛擬化，並開發虛擬化管理系統來管理這些資源，
於其上我們提供了動態計算資源供應服務、Batch 工作提交與執行服務、分散式檔案系統、雲端資料庫
等服務，我們透過統一的 web portal 來整合這些服務，並提供安全認證與單一登入(SSO)的功能，讓使
用者可以安全的在網頁上使用這些服務。此外我們也開發了兩個 SaaS 應用並初步整合到 UniCloud 平
台之中，我們將藉此來測試及驗證 UniCloud 雛型系統的效能，以作為之後最佳化調校的依據。我們期
望此中介軟體的開發將可以讓有意從事雲端運算技術相關研究及應用的單位，能夠有一雲端運算實驗
環境，藉此帶動台灣雲端運算相關技術的研究與發展。 
三、 文獻探討 
在國內外相關研究方面，現今已有許多發展中的雲端平台計畫，以下介紹並比較國外四個較大型
的雲端計畫與我們的差異： 
 Eucalyptus [1] 
Eucalyptus是根據Amazon Web Services的APIs來實作，底層使用Xen hypervisor [2]來做虛擬
化，同時支援Amazon EC2 [3]、Amazon S3 [4] 等介面，整體來看是屬於IaaS的服務。架構上，
Eucalyptus將底下的硬體設備透過虛擬化的技術分成三個主要的部份，虛擬網路、虛擬儲存和虛擬
運算，此三部分分別以三種控制元件去管理：雲端控制、叢集控制以及節點控制。 
就其目的而言，Eucalyptus跟本計畫的目標相當類似，都著重於串起各大學的資源來達成分散
式的雲端運算環境，然而在階層上Eucalyptus著重於基礎設施層(IaaS)的相關技術，而本計畫則是
各階層都有包含。另外Eucalyptus是透過階層式架構來串起分散的資源，而本計畫是透過混合的方
式(P2P+Hierarchy)來實作。 
 Nimbus [5] 
原屬於Globus alliance的一個雲端技術計畫，目的是提供一套公開原始碼的開發工具，利用虛
擬化技術把一些基礎設備整合起來進行科學運算的工作。Nimbus相容於Amazon EC2，也支援Grid 
community的WSRF標準，透過Xen hypervisor的虛擬化技術來提供一套IaaS的雲端運算系統。 
Nimbus與Eucalyptus一樣都著重於如何在IaaS層中管理虛擬化的資源，然而Nimbus的目標著重
於科學計算領域，而本計畫則是同時考量科學計算及一般的服務提供。技術上Nimbus使用階層式
架構，而本計畫則透過混合的方式(P2P+Hierarchy)來管理。 
 OpenNebula [6] 
3 
 
主軸 A：虛擬伺服器管理系統(Virtual Server Management System) 
子計畫 A1：伺服器虛擬化(Server Virtualization) 
本計畫的目的在研究雲端運算的關鍵技術-虛擬化，研究各個設備的虛擬化技術，並進行整合各項
技術，提供更友善的介面，讓使用者更輕鬆、更自在地使用雲端的虛擬化技術，因此本計畫方法分述
如下： 
1. 伺服器的虛擬化 
伺服器虛擬化方面，不同的實體運算處理設備有可能是一個或多個 Core 或是不同的架構，也
有可能是在軟體或硬體上異質性的系統，經過虛擬化的系統，可以將所有的運算處理設備整合成
一個同質性且數量龐大的運算單元，我們的方法將同時使用 XEN 與 KVM 這兩個 Hypervisor，同
時用到兩個的原因是因為這二個不同的 Hypervisor 在不同的應用上面的 I/O 效能與計算效能有所
差異，因此系統根據使用者的用途及需求，自動提供使用的 Hypervisor 建議，或者讓使用者自己
根據自己的需求來決定要使用的 Hypervisor 保有使用者的自主性 
2. 管理系統與客製化環境的建置 
在管理系統(Management System)方面，我們首先把不同的 Hypervisor 平台分在不同機器上
面，然後透過 NFS 方式使用子計畫 C1 所提供的 storage 空間，把 VM 運作的資料放在共有的空間
上面作集中管理，另外會有一台負責控制的 server 負責管理整個平台以及提供 WEB 介面與 API
服務，我們將透過這樣的架構建立起我們整個管理平台，使用者可以直接在 WEB 介面上面直接對
虛擬機做操作與控制，使用者只要投過滑鼠的點選，就可以很輕易地對虛擬機做控制使用，以及
建立屬於使用者自己的虛擬機。 
今年度子計畫 A1 實做了一個虛擬化平台與管理系統，此系統可對實體機器設備進行伺服器虛
擬化，並可依照不同的使用請求配置所需的虛擬化環境與資源，這樣做的好處是可以去除掉了單
伺服器設備的限制，並使資源做更有效的運用。另外透過虛擬化的管理以及人性化的存取介面，
有助於與其他計畫進行整合與溝通，並為研發進階的伺服器虛擬化功能奠定基礎。 
 
子計畫 A2：動態計算資源供應系統(Dynamic Computing Resource Provision System) 
子計畫A2的目的是建構一動態計算資源供應系統，整合大學雲中的計算資源，提供使用者具有服
務品質保證 (quality of service) 的計算服務以及隨到隨選的計算服務(類似Amazon EC2)。 
子計畫A2著重於如何於單一叢集中動態的供應計算資源，因此將設計適用於一個叢集的排程演算
法，並建構適用於一個叢集的模擬環境以評估排程演算法。子計畫A2的動態計算資源供應系統具有以
下性質：負載平衡、節能計算、虛擬計算機的高效率執行、快速虛擬計算機設置。 
要使的一個運算叢集中的實體機器達到負載平衡，最簡單的辦法是使用循環排程，來安排虛擬機
器，將叢集中所有的實體機器排序，在配置虛擬機器的時候，按照此順序一一部屬，如此，每台機器
的資源使用量就會達到基本的平衡。 
更深入的說，要達到動態的省電最佳化排程，則必須利用動態遷移虛擬機器來做到動態循環排程。
在任何一個平衡的機器叢集上，只要有任何一台虛擬機器完成工作，運行該台虛擬機器的實體機器資
源，就空閒了下來，此時，只要再一次的評估所有的虛擬機器，是否有機會動態遷移到該台實體機器
上，已達到節省實體機器使用數量的效果，藉此達到動態省電最佳化排程。 
今年度本子計畫首先實作一個基本的優先符合(First-fit)排程演算法，以及循環排程(Round-robin)
演算法；接著，再利用虛擬機器的動態遷移技術，實作出動態平衡演算法，該演算法可以降低實體機
器使用量約5%，使用者可以在系統中動態的增減虛擬機器，本子計畫的演算法皆會負責動態平衡，並
保持實體機器的低用量。 
5 
 
路架構下之網路佈建的目的。 
2. 整合型虛擬化網路管理平台 
利用系統殼層指令操作(Shell Script)、開放式整合虛擬網路交換器之管理界面(Open vSwitch)
及專屬網路管理界面(Web UI)等操作界面的整合，提供設備管理人員於管理時所需之綜合資訊，降
低管理人員於操作時的負擔。 
3. 虛擬硬體管理層與軟體虛擬網路管理層之溝通設計 
改寫虛擬硬體管理層(Hypervisor)喚起虛擬硬體設備之程序，使其能與虛擬化網路交換器相互
配合運作，並完成流程自動化之設計，使主控端(Host Domain)啟動時即時監聽來自客戶端(Guest 
Domain)的各項請求，並於客戶端被喚起時連帶啟用相對應之虛擬硬體設備。將相關對應流程自動
化，提昇主控端與客戶端之間透明化程度 (Transparency)，達到真正的虛擬網路透明化之目的。 
 
今年度子計畫 B1 透過研發上述之元件要求，已完成基於橋接網路(Bridged Network)界面之系統界
面初步整合，管理者可由殼層指令操作(Shell Script)或是網頁界面操作完成簡易型虛擬化網路架構控制
與管理，未來將繼續針對更多類型的網路環境進行佈建設置，同時也將進一步發展更完善的使用者界
面，發展更多的系統整合之組合的可能性。 
 
主軸 C：虛擬儲存管理系統(Virtual Storage Management System) 
子計畫 C1：儲存虛擬化(Storage Virtualization) 
本子計畫的目的是將多個實體儲存設備抽象化成虛擬的儲存資源，藉由儲存虛擬化的技術屏蔽底
層異質性儲存設備的複雜度，達到透明化的整合存取方式。為此，本年度的工作項目為針對一般的實
體伺服器，研發儲存虛擬化的模組。我們以 kernel-level 的觀點，設計以 block-device 為主的儲存虛擬
化技術。圖 C1-1 展示我們所設計的系統架構圖，主要研發項目包含邏輯儲存位址與實體儲存位址對映
表(圖中之 Mapping Table)、透明化儲存設備的 I/O 存取介面(圖中 Application 與 File system 之間的黑線)
以及虛擬儲存資源管理(圖中 Control daemon 及 Management control)，各元件之設計與功能說明如下。 
1. 邏輯映射表 
本項目主要針對資源存取的請求，提供邏輯儲存位址與實體儲存位址的轉換功能。這些請求
可能來自於檔案系統的 IO 存取，或是資源調度的請求，透過邏輯映射表可判斷請求的資源是位於
本地端或是遠端，經由位址的轉譯可存取相對應的虛擬資源。 
2. 虛擬儲存資源存取介面 
本項目主要針對儲存資源的存取，設計透明化 I/O 存取介面。對於第三項的研究項目，設計相
對應的基本操作介面：針對實體磁碟操作，提供 physical-disk-add、physical-disk-delete 以及
physical-disk-list 等基本功能；針對虛擬磁碟操作，提供 virtual-disk-create、virtual-disk-remove 以
及 virtual-disk-list 等基本功能；針對映射關係操作，提供 map-add 以及 map-delete 等基本功能。 
3. 虛擬儲存資源管理 
本項目主要針對虛擬化的儲存資源，根據需求進行資源的管理與調度。目前已研發出基本的
資源管理功能，主要包含三大類：實體磁碟的操作，可動態的增減實體儲存裝置，藉此擴充或縮
減虛擬資源池的可用儲存空間；虛擬磁碟的操作，可動態的增減虛擬資源，有助於之後進階管理
功能的研發；映射關係操作，可修改與更新邏輯映射表，藉此管理虛擬資源與實體資源的使用情
況。 
 
今年度子計畫 C1 透過研發上述之元件實做了一虛擬磁碟儲存池的雛型系統，此系統可對實體儲存
7 
 
 
圖 C2-1、分散式檔案管理系統架構圖 
 
子計畫 C3：分散式資料管理系統(Distributed Data Management System) 
本子計畫的目的是發展類似資料庫的資料儲存及管理系統。藉由結合傳統資料庫工具的便利性與 
MapReduce 的可容錯性、延展性和異質性，並提出一個混合傳統資料管理工具與 MapReduce 的解決
方案。這個混合型的雲端資料管理系統除了能夠提供高階且容易使用的程式介面外，也能夠支援各種
不同 SQL 語法規則，本計畫針對目前常見的特殊語法規則做分析處理，讓系統能夠應用在各種主流
的關聯式資料管理與大尺度的資料分析。使用者便可很容易的撰寫資料管理程式，現存的程式在不需
要經過修改的情況下，便可在此系統上直接執行。為此我們建置 Compiler (編譯器)、Database & Indexing 
Manager (資料及索引管理系統)、Run-Time System (及時管理系統) 三大元件，各元件之設計與功能說
明如下： 
1. Compiler (編譯器)： 
本項目主要在處理語言之間的轉換，提供使用者將 SQL Code 轉換為 NoSQL Code。當使用者
下達查詢的 SQL Code 時，我們的編譯器會接收使用者的需求，並將該 SQL 轉換相對應 NoSQL 
平台的 NoSQL Code。這些 SQL 可能由網站或系統間接產生，或是使用者直接下達查詢而產生。 
2. Database & Indexing Manager (資料及索引管理系統)： 
本項目主要在管理資料的索引資料及資料表的詳細規格。當使用者下達查詢的 SQL Code 給編
譯器時，資料及索引管理系統就會根據編譯器所提供的資訊提供相對應的資訊，如資料型態、資
料所在位置、資料表資訊等等。 
3. Run-Time System (及時管理系統)： 
本項目主要在管理查詢資料的快取功能及查詢資料的使用格式。當系統執行完使用者所查詢的 
SQL Code 後，執行結果將會由資料及索引管理系統進行資料格式的重組為使用者需要的顯示方
式。另一個功能則是當使用者下達查詢的 SQL Code 的時候，及時管理系統就會檢查是否已有查
詢過的資料，若有則不用重新執行便直接將結果回傳給使用者。 
 
今年度子計畫 C3 透過研發上述之元件實做了雲端分散式資料庫管理雛型系統—SQLMR。此系統
除了能將 SQL Code 轉為 NoSQL Code、替使用者維護管理資料的格式及索引外，還能夠提供多種不
同語言的 Application Programming Interface 供使用者在不同語言平台上使用。這套系統的好處是只要
透過我們整套的系統就能夠讓使用者可以輕鬆擁有 SQL 的方便性、NoSQL 的效能擴展性、資料安全
性等好處。總結來說，我們的系統能夠提供給使用者更方便的系統環境。 
本子計畫目前成果如：發展幾項全新的優化技術，以提供一個高度優化的 MapReduce 系統。目
前本子計畫的研究成果已發表至國際會議期刊上，目前的成果比現有相關研究  ( 如：Hive、
HadoopDB、Mysql 等等 ) 的效能都更好。 
9 
 
子計畫 D2：雲端資訊安全機制(Information Security Mechanism for Cloud) 
本子計畫的目的是開發建構於雲端平台的資訊安全機制，在總計畫與主軸 A 到 E 雲端服務建置之
初先將資訊安全服務納入考量。本年度的計畫目的是(1)先完成在各主軸所開發的子雲提供 AAA 機制，
以及(2)完成多形蠕蟲之樣本的產生並分析多形蠕蟲之共同特徵。值得一提的是，本年度計畫進度超前，
除了完成各子雲 AAA 建置的年度進度外，並進一步完成了跨雲的 AAA 機制，讓大學雲內各計畫可實
現單一登入(SSO)的功能，實現大學雲雛形的運作。 
1. 子雲的 AAA 機制 
我們利用開放原碼作業系統、軟體以及程式語言來實作本項目內容。首先我們在於雲端平台
上架設一 Linux 作業系統，做為驗證伺服器，並使用 FreeRADIUS 架設 RADIUS 伺服端設備，而
且利用 PHP 動態網頁語言設計並實作前端驗證使用者介面，以達到驗證之目的。 
2. 跨雲的 AAA 機制 
使用者在任一子計畫 Web portal 中登入，經過驗證成功後，驗證系統將產生一筆一次性密碼
(OTP)給使用者，使用者可藉由此 OTP，穿梭於各子計畫間，無須使用者重覆進行驗證，藉此達到
各子計畫間的 SSO 功能。其流程如圖 D2-1 所示。 
3. 蒐集與分析多形引擎 
本項目主要針對現行許多惡意軟體偵測系統皆使用特徵值來進行惡意攻擊偵測，而攻擊者為
了規避此一系統，亦發展出許多不同的方式來避免惡意軟體被偵測發現，其中，多形就是其中一
項用以規避此類偵測系統的技術。因此，本項目旨在蒐集各式多形引擎並了解這些多形技術，以
利於共同特徵值之研究。 
4. 尋找共同特徵值 
透過已經蒐集到的多形引擎，擷取出我們所蒐集到之蠕蟲執行碼，根據 Ruby 的程式語法撰寫
新的 Payload 檔案，以便 Metaspolit 執行時可以直接於 Payload 模組下進行多形操作。接著，使用
Payload 模組並選擇欲進行多形編碼的蠕蟲樣本，再從 ENCODER 中挑選出多形引擎進行蠕蟲多形
編碼操作，並利用 Generate 指令以 Raw Data 的檔案格式出產生多形蠕蟲樣本。 
 
圖 D2-1、跨雲的 SSO 機制圖 
 
主軸 E：應用服務(Application) 
子計畫 E1：科技監測服務(Technology Monitoring Service) 
隨著科技的快速演進，造成公司之間的競爭日益激烈。公司要能基業長青，必須隨時感知新科技
所帶來的機會與威脅。若沒有資訊技術的協助，以人力來監控大量的科技演進、產品創新新聞資料是
國科會補助計畫衍生研發成果推廣資料表
日期:2011/10/05
國科會補助計畫
計畫名稱: 總計畫
計畫主持人: 鍾葉青
計畫編號: 99-2218-E-007-013- 學門領域: 資訊
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
