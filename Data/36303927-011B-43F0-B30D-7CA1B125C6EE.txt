源傳輸設計自動化平台，減少整個三維積體電路設計流程所
需耗費的時間。 
 
中文關鍵詞： 三維積體電路、異質整合系統、系統架構探索、電源傳輸規
劃 
英 文 摘 要 ： In order to integrate more circuits into a single 
chip, the 3D IC integration based on through-silicon-
via (TSV) is one of the possible approaches in the 
future. However, designers will face many new 
challenges while implementing the 3D IC systems. A 
new design methodology and corresponding CAD 
techniques are absolutely required to solve those new 
design issues in 3D ICs. Until now, not too many 
works are discussing the CAD techniques for the 
system design of 3D ICs. Therefore, in this three-
year project, we will try to develop a heterogeneous 
system exploration platform for 3D-IC systems. 
Most existing ESL analysis environments focus on the 
processor-based digital systems only. Without the 
capabilities to analyze those non-digital blocks, 
such as analog circuits, memory circuits, etc., those 
ESL analysis tools cannot deal with the heterogeneous 
systems in 3D ICs. Therefore, in this three-year 
project, we will try to use our previous experience 
on analog behavior modeling to develop automatic 
behavioral model generator for different blocks in a 
heterogeneous system. With those behavioral models, 
we can develop a fast ESL analysis platform for 
heterogeneous systems. The analysis results can help 
designers to explore different system architectures 
and perform optimization while designing 3D IC 
systems. 
The vertical integration in 3D ICs also contributes 
new challenges for the power delivery of 3D-IC 
systems. A complete planning is definitely required 
at early design stages to solve the power supply 
issues in 3D ICs. Therefore, in this three-year 
project, we will try to develop automatic 
optimization techniques for the power delivery 
architecture of 3D ICs. In order to deal with the 
power supply noise (PSN) in the new power delivery 
一、 計畫的緣由和目的 
AS VLSI technology goes into nanometer era, the power integrity problem has become one 
of the critical issues that limit the design performance [2-11]. IR-drop and simultaneous 
switching noise (SSN) are two major power supply noises leading to the power integrity problem. 
The supply current and the resistance on the non-ideal supply lines will incur a voltage drop by 
ohm’s law. (Vdrop=I*R), which is called IR-drop. SSN happens when large instantaneous current 
goes through the inductors on power lines and power pads and generates a L*(di/dt) drop on the 
supply voltage. Therefore, a time-domain supply current waveform is required to accurately 
estimate the peak and slope of supply currents and the induced power noise. 
By vertically stacking different dies in a single chip, 3D IC designs are often heterogeneous 
systems with different properties. The power supply noise induced in digital parts may have large 
impacts on the performance of analog parts. Therefore, a high-level macro current model is 
proposed in this project for logic blocks to provide quick current waveform estimation in ESL 
simulation environment for supply noise estimation. However, due to the different arrival time of 
internal signals, it is not easy to accurately model the supply current of the whole logic blocks as 
some fixed templates. Therefore, a levelized high-level current model is proposed in this work for 
macro blocks. By grouping those gates with similar arrival time as a super-gate, the current 
waveform of this super-gate can be recorded easily with less error. Then, combining all triangles 
of every super-gate in time obtains a more accurate supply current waveform, especially for 
multi-peak cases. In order to consider the different arrival time of different input patterns, a 
dynamic levelization algorithm is also proposed. As shown in the experimental results, the 
average peak error of the proposed levelized current model is improved by almost 40% compared 
to the conventional single-stage current model. The results of this research have been published 
in the top IEEE journal of this field, IEEE Trans. on CAD [25], which shows the quality of this 
work. 
A heterogeneous system is often composed of both digital and analog circuits. There is 
mature CAD infrastructure for digital circuits. However, very few systematic CAD tools are 
available for analog circuits. Therefore, the other objective of this project is to develop a fast 
considered, the searching space in SA algorithm can be reduced to speed up the convergence of 
this iterative approach. However, the required computation time is still relatively longer among 
various kinds of approaches. 
Equation-based approaches use the mathematical solvers to solve the equations of circuit 
properties and obtain the global optimal solutions, such as the geometric programming (GP) 
based approaches [17, 18]. Theoretically, the mathematical global optimal point is already the 
best solution. However, because the short-channel effects are more and more significant in 
advanced CMOS technologies, those equations often have large prediction errors in some circuit 
performance. In order to meet the target specifications, several iterations or manual adjustment 
are still required to adjust circuits obtained by this approach. 
Instead of building complex parameter models for transistor parameters, this work adopts 
the gm/Id design concept, which is an independent value to the device size, on equation-based 
optimization to solve the accuracy issue. Without the complex effects from W and L, the 
modeling accuracy of transistor parameters is significantly improved. No more iteration is 
required by using the proposed approach, which improves the efficiency as well as the accuracy. 
To the best of our knowledge, this is the first work that adopts the internal voltages instead of 
device sizes as the unknown variables to be solved. As demonstrated on several circuits with 
different objectives, both the accuracy and efficiency of circuit optimization can be improved 
significantly. The results of this research have been presented in an IEEE conference [26], which 
shows the quality of this work. 
 
  
 
Fig. 1: The different current waveforms of ALU2 at HD=3 
In our observation, the major reason of the different waveforms is the different arrival time 
of internal signals, as illustrated in Fig. 2. Even though the switched cells are the same, whose 
supply current waveforms are modeled as L1, L2 and L3 respectively, the overall supply currents 
are still quite different with different arrival time, as illustrated in the three cases (a), (b), and (c). 
Therefore, modeling the supply current waveform of the whole macro block as some fixed 
templates may not easy to improve the accuracy 
 
Fig.2: Supply current waveforms of switching cells and macro block 
 
1
0.250
C
ur
re
nt
Time 
1
0
C
ur
re
nt
Time 
1
0.50
C
ur
re
nt
Time 
1
0.50
C
ur
re
nt
Time 
1
0
C
ur
re
nt
Time 
1
10
C
ur
re
nt
Time 
1
1 20
C
ur
re
nt
Time 
1
10
C
ur
re
nt
Time 
1
0
C
ur
re
nt
Time 
1
20
C
ur
re
nt
Time 
1
1 20
C
ur
re
nt
Time 
1
1 20
C
ur
re
nt
Time 
(a)
(b)
(c)
L1 L2 L3
L3
L3
L2
L2
L1
L1
 
Fig. 3: The characteristic parameters of DCT spectrum 
,...2,1,)1(2cos)()(  k
T
kAkDkI
i
                       (1) 
In [11], the regression method is used to record the parameters of DCT waveform. Because 
the relationship between input variables and waveform parameters are too complicated, the trends 
of input data are not easy to be captured in macro-modeling. In [6], the authors propose a 
high-level power model for macro blocks using neural networks. Neural networks are popular 
approaches on non-linear system modeling. Due to the self-learning capability of neural networks, 
the trends of input data are automatically captured in the model. As demonstrated in [6], the 
neural power model can easily reach high accuracy with low complexity. Therefore, instead of 
regression equations, similar neural models are adopted in this work to record those DCT 
parameters. 
2.1.3 Levelized Current Model 
For the goal of grouping the switching current waveform with the similar arrival time, a 
dynamic levelization algorithm (DLA) is proposed to implement systematically. The main idea is 
that the arrival time of those gates in the same level is similar. Therefore, the levelization 
algorithm is used to decide the level of all gates. Then, the gates in the same level can be grouped 
in a super-gate. Due to similar arrival time, the merged current waveform of those gates in the 
same level can be modeled as a triangular waveform. In addition, the other main point is that the 
0 50 100 150 200 250
-3
-2
-1
0
1
2
3
x 10
-4
Sample index
D
C
T
 a
m
pl
itu
de
A1
A2
A3
A4 A5 A6 A7 A8 A9 A10
T1
T2
T3 T4 T5 T6
T7 T8
T9
IDC D(k)
PWL DecayCurve
T, A, D(k)
After the level of each gate is determined, the current waveforms from the same level will be 
merged into one model, as illustrated in Fig. 6. Then, after DCT transformation, each waveform 
parameter at the frequency domain will be recorded by the similar neural model in [6]. In the 
construction phase, several training patterns are randomly generated to train the neural model. By 
using the similar training strategies as in [6], the current model of each level can be obtained. In 
this work, the golden waveforms are obtained through transistor-level circuit simulation to 
increase the accuracy. If transistor-level simulation is not available at large circuits, the results 
from fast-spice or gate-level estimation can also be used. 
 
Fig. 5: The flow chart of the dynamic levelization algorithm 
For reducing the simulation time of obtaining the golden waveforms for all patterns, a 
pseudo level switcher is proposed to make the current of each cell group to its level dynamically. 
Fig.7 illustrates this structure. A Pseudo element (Gsw) is a voltage control resistor that is 
zero-resistance while Vsw is logic-1 and high-resistance while Vsw is logic-0. These elements 
those are used to connect possible supply voltage sources and the control signals (Vsw) those are 
used to switch the pseudo element. Therefore, the current of each gate can be switched to 
different voltage sources by control signals. 
Assign values to all nodes
Choose next gate that all 
input levels are known
Output 
switches
Find earliest level of 
control inputs+1
Find latest level of 
non-control inputs+1
Find earliest level of 
inputs+1
No control 
inputs
Travel all gates
Levels of 
all gates are 
confirmed
All gates 
are traveled
Done
Done
Yes
Yes
Yes
No
No
No
construction. The dynamic levelization algorithm is implemented by C++ and the neural model is 
implemented by MATLAB. While training the neural models, the number of training pattern pairs 
is 1000 and the number of test pattern pairs is 500. In order to make a fair comparison, the current 
models are built by the same neural approach. The only difference is the presence of levelization 
or not. 
The detailed experimental results of all benchmark circuits are shown in Table I. The eIP is 
the error of the peak current. The eTP is the error of the position when the peak current occurs, 
which is normalized by the width of the current waveform. The CORR is the correlation between 
the estimated current waveform and golden waveform. The avg means the average of the absolute 
value of all data. The std means the standard deviation of all data. The average error of the peak 
current without levelization is about 60%. With the dynamic levelization approach, the average 
error of peak current is reduced to 20%, and the waveform correlation is improved to 0.892. One 
of the supply current waveforms of c880 is also shown in Fig. 8 as an example. With DLA, the 
multiple-peak waveforms can still be modeled accurately with one unified model. It will be easier 
to integrate such current model into the design flow to provide early estimation of supply noise. 
The computation time of the current waveform estimation for each benchmark circuit is 
provided in Table II, which is measured on a XEON 3G machine with 2G RAM. The estimation 
speed of the proposed neural current model is faster than HSPICE simulation about 700 times. 
Therefore, the estimation speed of the neural current model is affordable for system evaluation at 
early design stages. 
Table I Experimental Result of Benchmark Circuits 
 Without Levelization Dynamic Levelization Algorithm (DLA) 
 eIP(%) eTp(%) CORR eIp(%) eTp(%) CORR 
Circuits avg std avg std avg std avg std avg std avg Std 
mux 123.66 361.76 15.21 17.29 0.840 0.171 26.25 24.71 14.94 12.88 0.841 0.151 
vdao 68.84 172.94 42.04 86.45 0.690 0.175 21.16 20.34 13.79 15.09 0.833 0.149 
c880 29.01 20.98 12.29 11.12 0.875 0.080 23.33 21.80 10.30 12.66 0.925 0.071 
c1355 35.76 26.89 18.88 12.30 0.815 0.095 17.42 15.10 4.65 7.35 0.906 0.084 
c1908 37.05 58.52 23.67 32.99 0.862 0.168 9.71 12.29 10.15 9.24 0.931 0.134 
Average 58.19 128.72 18.53 24.91 0.847 0.126 20.30 19.94 10.48 10.64 0.892 0.100 
 
 
 
Fig. 8: The design flow of GP-based approach [17] 
Because gm is related to the device size (W and L), all previous equation-based approaches 
that solve the device sizes directly have to handle the complex relationship between gm and 
device sizes. However, there is another parameter gm/Id in the basic transistor equations, which is 
a universal value that is independent to the device sizes as shown in Equations (1) and (2) [22]. 
Because an NMOS is used as an example to list these two equations, the threshold voltage of it is 
denoted as VTN. In the literature, this feature has been successfully applied on analog circuit 
designs [23]. Once the three node voltages of a transistor is determined, its gm/Id value is almost a 
constant no matter what its size is, as shown in the simulation results of Figure 9(b). If gm/Id is 
used instead of gm, the modeling issue may become easier to be solved. 
(a)
Vgs (V) Vgs (V)
g m
/I
d
g m
/I
d
(b)
 
Fig. 9: (a) gm vs. Vgs [21]  (b) gm/Id vs. Vgs with different sizes 
In this paper, this gm/Id design concept is applied on equation-based optimization to solve the 
accuracy issue with less overhead. Because the gm/Id value is determined by the node voltages of 
the transistor, the unknown variables in the performance equations are transformed to the bias 
Input specifications
Initial design point 
(W/L)
Find approximate DC 
operating point
Sized netlist
Device 
model
No
Vn’s Converged
No
Find constraints and
Solve convex problem
Converged
constraint is to check the Vgs and Vds of each transistor. Assume the voltage of the i-th transistor 
is denoted as Vx,i , the voltages range of those internal signals can be listed as Equation (3). As to 
the performance equations, they can be rewritten as Equations (4)-(7) with gm/Id and gds/Id, in 
which the suffix spec represents the given specification of this performance. The output swing 
range (OSR) is also considered as an input specification. In these equations, the unknown 
variables are the internal node voltages and Id of each transistor, not the device sizes. Since gm/Id 
and gds/Id are relatively easier to be modeled, this approach significantly reduces the modeling 
complexity and alleviates the loading of mathematical solver. 
V୥ୱ,୧ ൐ V୲,୧ ;   Vୢୱ,୧ ൏ V୲,୧                                                     (3) 
ౝౣమ
౅ౚమౝౚ౩మ
౅ౚమ ା
ౝౚ౩బ
౅ౚబ
ൈ
ౝౣల
౅ౚలౝౚ౩ల
౅ౚల ା
ౝౚ౩ళ
౅ౚళ
൐ Gainୱ୮ୣୡ                                                (4) 
ౝౣమ
౅ౚమ ൈ୍౏౏
େి ൐ GBୱ୮ୣୡ                                                            (5) 
୩ൈ୍౏౏
େిାେై ൐ SRୱ୮ୣୡ                                                             (6) 
V୆ଵ ൐ ሺV୓େ୑ ൅ ଵଶOSRୱ୮ୣୡሻ െ V୘୔                                               (7) 
In order to obtain proper tradeoff between power consumption and chip area, the objective 
function in this work provides two user-specified parameters  and , as shown in Equation (8), 
to consider area and power simultaneously and make proper normalization between them if 
necessary. If power consumption is the only goal to be optimized as in previous approaches, 
setting the area cost  to zero can achieve the same effect easily. Therefore, this objective 
function can provide more flexible optimization goal to users. 
min ( α ൈ ∑ ሺ
ౝౣ೔
౅ౚ೔ ሻൈ୍౏౏
ሺ୚ౝ౩೔ି୚౐ሻ ൅ β ൈ ሺ1 ൅ ݇ሻ ൈ Iୗୗ ൈ Vୈୈ
௡௜ୀଵ  )      (8) 
Given the node voltages of a transistor, its gm/Id value is almost a constant, no matter what 
its size is. Unlike the complex 5-variable functions proposed in [21], the models for gm/Id and 
gds/Id in the proposed approach have three variables (Vg, Vd, Vs) only. Because gm/Id and gds/Id are 
independent of device sizes, constructing these tables will not take too much simulation time 
because only a transistor is simulated without sweeping different device sizes. Once these tables 
are built, they can be reused in other cases until the technology file is changed. Therefore, 
node voltages, the corresponding Id of a unit-size transistor is recorded in a pre-built table. Then, 
multiplied by its bias current can obtain the approximate transistor size for this case. Using this 
approach, the device sizes can be obtained quickly and accurately. Since building the sizing table 
is a one-time effort that can be built in advance, this approach greatly improves the efficiency of 
circuit sizing and optimization. 
Fig. 12 shows the overall optimization flow of the proposed bias-driven approach. 
Compared to the GP-based flow in Figure 8 [17] that uses several iterations to approach the 
accurate technology parameters, the proposed optimization flow does not require any loops due to 
the increased modeling accuracy, which greatly improves the efficiency of circuit optimization. 
Finally, the transistor sizing table efficiently deals with the mapping from node voltages to device 
sizes with the consideration of deep-submicron effects. These features make the accuracy and 
efficiency of the proposed optimization flow outperform other existing approaches, as 
demonstrated in the experimental results. 
 
Fig. 12: The proposed bias-driven optimization flow 
2.2.3.  Experimental results 
In this section, the improvements of the proposed bias-driven optimization approach are 
demonstrated on two OPA circuits in TSMC 0.18μm technology with various specifications. All 
the results are measured on the same machine with Intel Core2 quad-core processor at 2.66GHz 
and 2GB memory. The adopted mathematical solver to solve those convex equations is the NLP 
(non-linear programming) solver in MATLAB. The other programs are implemented in C++. 
The first experiment demonstrates the accuracy improvements over previous GP-based 
approach. The iterative GP approach [17] is implemented in the same environment to optimize 
Setup constraints and
solve NLP problem
Input specifications
Sized netlist
Device sizing
gm/Id model
gds/Id model
C/Id model
Sizing table
End
Node voltage, Iss
According the experimental results, the prediction accuracy of the proposed approach is 
significantly improved on most of the performance metrics with a unified simple model. 
Therefore, the situations that the real simulation results do not meet the required specifications 
can be avoided in the proposed approach. Although the obtained circuit performance of the 
iterative GP approach is more and more close to the required specifications, the final results may 
still not meet the specifications after the iterative process is converged. Furthermore, the required 
number of iterations of that approach is not predictable. For this relatively easy specification, 2 
iterations can reach convergence. Under tough specifications, the number of iterations may 
increase a lot, as demonstrated in the next section. 
In the second experiment, some relatively tough cases for the two-stage OPA are studied to 
demonstrate the benefits of the proposed approach. Table IV shows the results of higher gain 
requirement. Table V shows the results of higher bandwidth requirement. The column “Spec.” 
shows the required specifications. The column “SA” shows the results of the SA-based approach 
[15]. The column “GP” shows the results of the iterative GP-based approach [17]. The column 
“bias-driven” shows the results of the proposed approach. All results are the measured 
performances of the final circuits via HSPICE simulation.  In Table IV, the goal is to minimize 
the power and area simultaneously with equal weight. In Table V, the goal is to minimize the 
power only. 
Table IV: Results comparison of the two-stage OPA (case 1) 
Perform. Spec. SA [15] GP [17] bias-driven 
Gain (dB)  80dB 80.1 77.9 81.7 
GB (MHz)  10MHz 13.6 11.6 19.8 
SR (V/s)  15V/s 17.0 17.3 15.5 
OSR (V)  1V 1.26 1.06 1.14 
PM (degree)  60 62.1 66.7 61.0 
Power (μw) minimum 220 125 105 
Area (μm2) minimum 86.8 34.2 26.9 
#iterations - 222 8 1 
Time (s) - 731 52.1 5.98 
Speedup ratio - 1 21.4 122.2 
 
 
simulation-based approach with much less computation time. The situations that the real 
simulation results do not meet the specifications can be avoided in the proposed approach due to 
accurate prediction. These results have shown that the proposed method is also applicable to the 
optimization of other analog circuits. 
 
Fig. 13: A typical folded OPA 
 
Table VI: Results comparison of the folded OPA 
Performance Spec. SA [15] GP [17] bias-driven 
Gain (dB) 75dB 76.5 71.5 75.3 
GB (MHz) 100MHz 106.5 107.8 100.6 
SR (V/s) 60V/s 81.8 72.9 66.8 
OSR (V) 0.6V 0.68 0.79 0.81 
PM (degree) 55 57.6 61.0 56.0 
Power (μw) minimum 429 364 371 
Area (μm2) minimum 448.6 234.5 227.7 
#iterations - 314 8 1 
Time (s) - 555 78.2 16.6 
Speedup ratio - 1 7.10 33.4 
 
  
future, we will keep going to study the CAD techniques for heterogeneous systems. Hope we can 
develop more useful techniques and more SOC engineers to help the whole IC industries. 
Table VII.  The publication numbers of our group during this project year 
Thesis Journal Conf. SCI EI 
6 2 8 2 2 
四、 參考文獻 
[1] Timothy Masters, “Practical neural network recipes in C+”, Boston : Academic Press, c1993 
[2] Q. Wu, Q. Qiu, M. Pedram, and C.-S. Ding, “Cycle-accurate macro-models for RT-level 
power analysis,” IEEE Trans. Very Large Scale Integr. Syst., 6(4):520-528, Dec. 1998. 
[3] A. Boliolo, L. Benini, G. de Micheli, and B. Ricco, “Gate-level power and current simulation 
of cmos integrated circuits,” IEEE Trans. Very Large Scale Inter. Syst., 5(4):473-488, Dec. 
1997. 
[4] K. Shimazaki, H. Tsujikawa, S. Kojima, and S. Hirano, “Lemings: Lsi’s emi-noise analysis 
with gate level simulator,” IEEE Intl. Symp. Quality Electronic Design, pages 129-136, Mar. 
2000. 
[5] W.-T. Hsieh, C.-C Shiue, and C.-N Liu, “ A Novel Approach for High-Level Power 
Modeling of Sequential Circuits Using Recurrent Neural Networks,” IEEE International 
Symp. on Circuits and System, pp. 3591-3594, May 2005. 
[6] W.-T. Hsieh, C.-C Shiue, and C.-N. Liu, “An Efficient Power Modeling Approach of 
Sequential Circuits Using Recurrent Neural Networks,” IEE Proc. of Computers and Digital 
Techniques, vol. 153, pp. 78-86, Mar. 2006. 
[7] G. Blakiewicz and M. Chrzanowska-Jeske, “Estimation of supply current spectrum for early 
noise evaluation,” IEEE Intl. Symp. Circuit and System, pages 21-24, May 2006. 
[8] J.-H. Wang, J.-T. Fan, and W.-S. Feng, “An accurate time-domain current waveform 
simulator for VLSI circuits,” European Design and Test Conf., pages 21-24, May 2006. 
[19] J. Kim, J. Lee, L. Vandengerghe, C. Yang, “Techniques for Improving the Accuracy of 
Geometric-Programming Based Analog Circuit Design Optimization,” in Proc. Int’l Conf. on 
Computer-Aided Design, pp. 863-870, 2004. 
[20] V. Aggarwal, U. O’Reilly, “Simulation-Based Reusable Posynomial Models for MOS 
Transistor Parameters,” in Proc. Design, Automation and Test in Europe, pp. 69-74, 2007. 
[21] W. Gao and R. Hornsey, “A Power Optimization Method for CMOS Op-Amps Using 
Sub-Space Based Geometric Programming”, in Proc. Design, Automation and Test in Europe, 
pp. 508-513, 2010. 
[22] Behzad Razavi, Design of Analog CMOS Integrated Circuits, McGraw-Hill, 2001. 
[23] F. Silveira, D. Flandre, P.G.A. Jespers, “A gm/ID Based Methodology for the Design of 
CMOS Analog Circuits and Its Application to the Synthesis of a Silicon-on-Insulator 
Micropower OTA”, IEEE J. Solid-State, vol. 31, no. 9, pp. 1314-1319, 1996.  
[24] R. J. Duffin, E. L. Peterson, and C. Zener, Geometric Programming—Theory and 
Application, New York: Wiley, 1967. 
[25] Mu-Shun Matt Lee, Wei-Ting Liao and Chien-Nan Jimmy Liu, “Levelized High-Level 
Current Model of Logic Blocks for Dynamic Supply Noise Analysis”, IEEE Transactions on 
Computer-Aided Design of Integrated Circuits and Systems, vol. 31, no. 6, pp. 845-857, June 
2012. 
[26] Ya-Fang Cheng, Li-Yu Chan, Yen-Lung Chen, Yu-Ching Liao, and Chien-Nan Jimmy Liu, 
“A Bias-Driven Approach to Improve the Efficiency of Automatic Design Optimization for 
CMOS OP-Amps”, IEEE Asia Symposium on Quality Electronic Design (ASQED), July 
2012. 
 
  
 
 
2
四、建議 
參與國際研討會可以開拓視野以及增進最新之學界及業界資訊，對於國內之發展有
正面之幫助。 
五、攜回資料名稱及內容 
會議論文之光碟片。 
六、其他 
 
 
 
 
Efficient Yield-Optimized Sizing Approach for Analog 
Circuits with Accurate Variation Consideration 
 
 Yen-Lung Chen Yi-Ching Ding Yun-Jing Lin Chien-Nan Jimmy Liu 
Dept. of Electrical Engineering, National Central University, Jung-Li City, Taiwan, ROC 
{995401004, 995201023, 100521022}@cc.ncu.edu.tw; jimmy@ee.ncu.edu.tw 
ABSTRACT   
In this paper, an efficient yield-optimized circuit sizing approach is 
proposed with accurate consideration of process sensitivity. A bias-
driven optimization approach is also proposed to improve the 
prediction accuracy of circuit performance. Compared with previous 
works, the proposed approach can further improve the design yield 
and significantly reduce the overhead. 
Keywords 
Process Variation, Yield Optimization, Analog Circuits 
1. INTRODUCTION 
Typical analog design procedure often requires simultaneous 
optimization between different specifications. Manually sizing the 
circuits to meet the requirements is often considered as a difficult 
task for analog designers, which often takes a lot of time. While the 
device size is continuously shrinking in deep submicron process, 
process variations also bring more challenges for sensitive analog 
circuits. Therefore, various design automation approaches have been 
proposed for analog circuits to solve this design bottleneck [1]. 
Besides the benefit of fast design procedure, good design automation 
algorithms also provide proper considerations between multi-
objectives. 
Because the process variation effects are often not considered, 
traditional optimization algorithms typically push the system 
performance to some corners that are vulnerable to parametric 
variation [2]. In advance process with significant process variations, 
robust analog circuit optimization becomes increasingly important for 
modern manufacturing processes. In the literature, many remarkable 
techniques are proposed based on simulation-based synthesis 
approaches [3-10]. After each device size is obtained in each iteration, 
the design yield is also evaluated while simulating the circuit 
performance. Therefore, in the following optimization process, the 
design yield can also be treated as one target to be optimized together. 
Although these approaches have accurate results, they often require 
much more computation time due to the large number of simulations 
in the optimization process. If the design yield should be evaluated 
also in each optimization iteration, the required computation time will 
be further increased. As reported in previous studies, several hours 
are often required to optimize a typical-sized circuit. 
Since equation-based optimization is much faster than simulation-
based optimization, it could be an efficient solution if the yield issue 
can also be considered in equation-based approaches. In [11-12], the 
traditional design centering concept is included in the geometric 
programming (GP) based analog circuit synthesis. By maximizing the 
distance to all boundaries, the nominal point can be put in the center 
of the feasible space, which also maximizes the volume of the 
inscribed ellipsoid in the feasible region. This approach is a simple 
yet efficient extension to solve design centering problem using GP 
solvers. However, as studied in many related researches [13], the 
center of feasible space is not necessarily the nominal point with 
maximum yield. Because the process sensitivity of different circuit 
performance could be different, the weight of the distance to each 
feasible boundary should be different, too. 
In [4, 13], the concept of worst-case distance (WCD) is introduced 
to provide a quick estimation of the design yield. The similar concept 
is also applied to performance space, which is called the process 
capability (Cpk) in [9], for yield evaluation. The key idea is to 
normalize the distance to the feasible boundary by the standard 
deviation () of its performance distribution to consider different 
process sensitivity. Using this metric to evaluate the design yield 
could be more accurate than using the row distance only, as 
illustrated in Fig. 1. However, the performance distribution and 
process sensitivity may vary at different nominal point. The 
corresponding Cpk should be recalculated also at different nominal 
point, which implies a re-evaluation of the statistical distribution at 
every possible solution. Since Cpk cannot be expressed as a fixed 
equation, it can only be used with the simulation-based optimization 
in previous approaches [3, 4, 5, 9] to guide the yield-aware analog 
circuit synthesis, which requires more computation efforts. 
Figure 1. Yield optimization with different process sensitivity 
In order to improve the prediction accuracy of equation-based 
optimization, a new yield-optimized sizing approach is proposed in 
this paper with accurate variation. As demonstrated on several analog 
circuits with different objectives, accurate prediction of performance 
distribution can effectively guide the yield-aware synthesis to a point 
that is much closer to the real optimized result with less over-design. 
The significant contributions of this work are as follows: 
 A hierarchical variation analysis method is proposed in this paper 
to calculate the Cpk of each performance without simulations. 
Therefore, Cpk can be used in equation-based optimization as well 
to improve the accuracy of yield prediction for each possible 
solution. To the best of our knowledge, this is the first work that 
considers the process sensitivity in equation-based yield 
optimization. 
 Since the design yield can be quantitatively represented as the Cpk 
in the synthesis procedure, it can also be simultaneously 
optimized with other design objectives like power or area cost to 
prevent too much over-design. As shown in the experimental 
results, the extra design overhead is significantly reduced in the 
proposed approach while optimizing the design yield. 
Yield OptimizedDesign Centering
Feasible regionNominal point
Design space Design space
This work was supported in part by R.O.C. National Science Council under 
Grant NSC99-2221-E-008-104. Their supports are greatly appreciated. 
 
 
 
 
Unlike the process parameters, the intermediate-level parameters 
are often highly correlated to each other. While calculating the 
variations of system-level performances from the intermediate-level 
variations, the correlations between those transistor parameters 
should be properly considered. Therefore, an additional correlation 
correction term (CCT) is required in the variance calculation of 
system-level performances, as shown in Eq. (4). This CCT term can 
be derived from the intermediate-level parameters that are 
functionally related to this system-level parameter Si, as shown in Eq. 
(5). Detailed reasoning can be found in [15]. Finally, the Cpk of each 
performance can be obtained by dividing the distance between the 
nominal point and its performance boundary Dk with the calculated 
performance variance. 
With the proposed variance calculation, the overall Cpk of this 
design can be calculated immediately for each possible solution 
during the optimization process, as shown in Equation (6). No 
simulations are required at all. In traditional design centering 
approaches, only the row distance from the nominal point to each 
boundary is considered as shown in Equation (7). In this work, 
Equation (6) is used instead to guide the optimization results toward 
higher design yield. The objective function of the optimization engine 
is then modified as Equation (8), in which α and β are two user-
defined parameters to represent the relative importance of the two 
costs in this design case. 
ܥ୮୩ሺV୥ୱ, Vୢୱ, I୶ሻ ൌ ∑ |୔౟ିୗ୮ୣୡ౟|୴ୟ୰୧ୟ୬ୡୣ౟௜ 		 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	ሺ6ሻ	
Row_DisሺV୥ୱ, Vୢୱ, I୶ሻ ൌ ∑ |P୧ െ Spec୧|ୗ౤୧ୀ଴ 		 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 ሺ7ሻ	
cost ൌ α ∙ Power ൅ β ∙ ܥ௣௞		 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	ሺ8ሻ	
2.3 LUT-Based Transistor Sizing  
In this step, the objective is to generate the corresponding device 
sizes. After the bias voltage and bias current for each transistor are 
identified by the NLP solver, the size of each transistor can be 
determined also under a given technology file. Because there are two 
variables in the W/L ratio to determine the MOS current, analog 
designers often fix the channel length at a proper value and leave 
only one variable (W) in the sizing flow to simplify the problem. The 
same assumption is also adopted in this work at the circuit sizing step. 
This work adopts a lookup table based approach to find the 
corresponding transistor sizes. Under different combinations of Vgs 
and Vds, the corresponding source-to-drain current (Id) of a unit-size 
transistor is recorded in a pre-built table as illustrated in Table I, 
which is obtained by simulating a transistor in HSPICE. Then, 
multiplied by its bias current can obtain the approximate transistor 
size for this case. Using this approach, the device sizes can be 
obtained quickly and accurately without complicated equations to 
consider the non-ideal effects. Since building the sizing table is a 
one-time effort that can be built in advance, this approach greatly 
improves the efficiency of circuit sizing and optimization.  
TABLE I. An example of sizing table 
0.18 μm CMOS process - PMOS 
Vgs (V) Vds (V) Ix (μA) Sx (μm / μm)
1.00 1.60 16.01 2.00 / 1.00 
1.10 1.60 21.51 2.00 / 1.00 
1.20 1.60 27.62 2.00 / 1.00 
3. EXPERIMENTAL RESULTS 
In this section, the improvements of the proposed yield-optimized 
circuit sizing flow are demonstrated on a folded OPA circuit in 
TSMC 0.18um technology with various specifications, whose 
architecture is shown in Fig. 4. The circuit simulation results are 
obtained from HSPICE. The adopted mathematical solver to solve 
those convex equations is LINGO Release 12.0 [16]. The other 
programs are implemented in C++. All the results are measured on 
the same machine with Intel Xeon quad-core processor at 2.67GHz 
and 4GB memory. 
 
Figure 4. A typical folded OPA  
3.1 Accuracy Verification 
The first experiment verifies the accuracy of the proposed 
performance model and variation analysis with different 
specifications. Case1 and Case 2 are two synthesized folded OPAs 
with two different specifications. In Table II, M and σ are the 
nominal point and its variance of each performance with the process 
variation model of TSMC 0.18um RF process. The row “Prediction” 
shows the prediction results of the proposed approach based on the 
pre-built parameter models. The row “Simulation” shows the results 
of 10000-runs Monte Carlo analysis via HSPICE with the 
synthesized netlist. In order to focus on examining the variance 
analysis results, the circuit netlist for simulation does not include the 
layout-induced parasitic devices in this experiment. The final row 
“Error” shows the error percentage between the prediction results and 
real simulation results.  
The predicted circuit performance of the proposed approach is very 
close to the HSPICE simulation results as shown in Table II. The 
error of each nominal performance is controlled within 2% compared 
to HSPICE results. It shows that the proposed bias-driven approach 
can effectively boost the prediction accuracy of the optimization 
process. The error of the predicted performance variance can also be 
controlled within 6% compared to the HSPICE Monte Carlo analysis 
results, which demonstrates the effectiveness of the proposed 
hierarchical variation analysis. With accurate prediction of 
performance distribution, the yield-aware synthesis can be guided to 
a point that is much closer to the real optimized result. 
TABLE II. Accuracy verification of performance distribution 
Performance Case 1 Case 2Mean (M) Var. (σ) Mean (M) Var. (σ)
Gain  
(dB) 
Prediction M=70.7 σ=7.62 M=77.3 σ=9.32
Simulation M=69.3 σ=7.59 M=76.8 σ=9.19
Error (%) M=2.02 σ=0.40 M=-0.65 σ=1.41
GB 
(MHz) 
Prediction M=100.5 σ=0.78 M=95.1 σ=0.93
Simulation M=100.3 σ=0.81 M=94.8 σ=0.88
Error (%) M=0.20 σ=-3.70 M=0.32 σ=5.68
SR 
(V/s) 
Prediction M=60.3 σ=0.81 M=65.7 σ=0.91
Simulation M=61.0 σ=0.79 M=64.9 σ=0.93
Error (%) M=-1.15 σ=2.53 M=-1.23 σ=-2.15
PM 
(degree)
Prediction M=56.1 σ=0.99 M=62.5 σ=1.81
Simulation M=56.7 σ=1.02 M=61.7 σ=1.73
Error (%) M=-1.06 σ=-2.94 M=1.30 σ=4.62
3.2 Comparison of Optimization Results 
For the same folded OPA, the optimization results of different 
approaches are compared in Table III with a relatively tough 
 
 
1
國科會補助專題研究計畫出席國際學術會議心得報告 
                                     日期：101 年 07 月 16 日 
一、參加會議經過 
此次之亞洲區電子設計品質研討會選在檳城市的 Eastin Hotel 舉行。開幕式約有上百人參與，
並邀請香港應用科技研究院的執行長 Dr. Nim-Kwan Cheung 做 keynote speech，介紹該院對於未來
科技及研究發展的願景與做法，隨後並邀請澳洲 iDataMap 公司的總裁 Kamran Eshraghian 談談未來
科技公司運作的挑戰，此次大會還邀請了另外兩位專家於會議的第二天早上作 keynote speech，讓
我了解了許多現今大家最重視的問題。學術論文的部分則分成十一個 parallel section 分散在兩天
當中做口頭報告。本人的論文被安排在第一天下午與其他三位設計自動化方面的專家一起報告，報告
完之後並一起交換研究心得，讓我獲益不少。此外亦於晚宴及空檔時間和各地學者交換經驗，並認識
了許多志同道合的朋友，相信對我日後的研究工作有很大的幫助。 
二、與會心得 
這次與會，可以深深感受到設計自動化這個領域進步的快速，對於目前最新的發展，以及自己正
在研究的題目方向，也都有了更清楚的認知，看過別人的作品之後，對自己的缺點也更加的了解，當
然也更加激勵我自己必需更努力。這些有形跟無形的收穫，對我來說都有相當大的幫助，因此也特別
感謝國科會的支持，日後我們將會繼續努力，爭取更好的表現。 
三、發表論文全文或摘要 
如附件 
四、建議 
參與國際研討會可以開拓視野以及增進最新之學界及業界資訊，對於國內之發展有正面之幫助，
建議國科會可盡量從優補助。 
計畫編號 NSC 100-2221-E-008 - 067 
計畫名稱 應用於三維積體電路之設計、自動化與測試關鍵技術－子計畫二：應用於三維積體電路之異質系統探索平台與電源規劃技術(I) 
出國人員
姓名 劉建男 
服務機構
及職稱 中央大學電機系 副教授 
會議時間 2012年 7月 10日~ 2012 年 7 月 11 日 會議地點 馬來西亞-檳城 
會議名稱 
(中文) 第四屆亞洲區電子設計品質研討會 
(英文) 4th Asia Symposium on Quality Electronic Design 
發表題目 
(中文) 可改善設計效率的電壓趨動運算放大器自動化設計方法 
(英文) A Bias-Driven Approach to Improve the Efficiency of Automatic 
Design Optimization for CMOS OP-Amps 
1Chien-Nan Liu
主旨: Re: Your ASQED 2012 Submission (Number 44)
From: 陳彥龍 [mailto:keith09091984@gmail.com]  
Sent: Saturday, May 26, 2012 9:34 PM 
To: 劉建男 老師; 廖于晴; 鄭雅芳; 詹立宇 
Subject: Re: Your ASQED 2012 Submission (Number 44) 
 
Dear Mr. Yen-Lung Chen: 
 
On behalf of the ASQED 2012 Program Committee, I am delighted 
to inform you that the following submission has been accepted 
as a regular paper for oral presentation at the conference: 
 
  A Bias-Driven Approach to Improve the Efficiency of 
     Automatic Design Optimization for CMOS OP-Amps 
 
The Program Committee worked very hard to thoroughly review 
all the submitted papers. I hope that you would respect these efforts by 
considering the suggestions of the reviewers when you revise your paper. 
 
To upload your final manuscript, please visit the following 
site: 
 
  https://www.softconf.com/c/asqed2012/ 
 
and, on the left-hand side of the page, enter the passcode 
associated with your submission.  Your passcode is as follows: 
 
  44X-P6P3E9P6D9 
 
Alternatively, you can click on the following URL, which will take you 
directly to a form to submit your final paper: 
 
  https://www.softconf.com/c/asqed2012/cgi-bin/scmd.cgi?scmd=aLogin&passcode=44X-P6P3E9P6D9 
 
The reviews and comments are attached below. Please try to follow 
the advice of reviewers when you revise your paper. 
 
Please note the following important dates: 
 
Camera ready papers due: June 16, 2012 
 
Conference dates: July 10-11, 2012 
 
Congratulations on your fine work. Please feel free to contact me if you have any questions. 
 
 A Bias-Driven Approach to Improve the Efficiency of Automatic Design Optimization 
for CMOS OP-Amps 
 
Ya-Fang Cheng, Li-Yu Chan, Yen-Lung Chen, Yu-Ching Liao and Chien-Nan Jimmy Liu 
Department of Electrical Engineering, National Central University, Taiwan, ROC 
{995201124, 985201027, 995401004, 100521024}@cc.ncu.edu.tw and jimmy@ee.ncu.edu.tw 
 
Abstract 
The equation-based analog design automation is getting 
popular in last decade to search the optimal solutions with 
good efficiency. However, due to the deep-submicron effects, 
significant modeling errors often exist in major transistor 
parameters like gds and gm. This often results in wrong 
prediction of circuit performance and leads to several redesign 
cycles to meet the specifications. Instead of building complex 
parameter models for gds and gm, this paper adopts the gm/Id 
design concept, which is an independent value to the device 
size, on equation-based optimization to solve the accuracy 
issue. Without the complex effects from W and L, the 
modeling accuracy of transistor parameters is significantly 
improved. No more iteration is required by using the proposed 
approach, which improves the efficiency as well as the 
accuracy. To the best of our knowledge, this is the first work 
that adopts the internal voltages instead of device sizes as the 
unknown variables to be solved. As demonstrated on several 
circuits with different objectives, both the accuracy and 
efficiency of circuit optimization can be improved 
significantly. 
Keywords 
Sizing, Analog circuits, Automatic design 
1.  Introduction 
In traditional analog design procedure, designers derive 
some rough equations about the circuit performance and adjust 
the device sizes by experience. If the resultant circuit doesn’t 
satisfy the specifications in the circuit simulation, designers 
will repeat the sizing-simulation loop again and again. Due to 
the deep-submicron effects, the predicted results are often 
quite different to the real simulation results. This significantly 
increases the number of iterations. Furthermore, because the 
circuit properties are often correlated to each other, adjusting 
one parameter may alter many performances, which requires 
simultaneous optimization between all specifications. 
Therefore, manually circuit sizing becomes a difficult task for 
analog designers, which often takes a lot of time. 
In order to shorten the design time, analog design 
automation becomes a hot research topic in recent years. 
Besides the benefit of fast design procedure, good design 
automation algorithms can provide proper considerations 
between multi-objectives. In the literature, analog design 
automation approaches can be roughly classified into three 
categories: knowledge-based approaches, simulation-based 
approaches, and equation-based approaches. 
An experienced designer may design the circuit and adjust 
its device sizes based on his background knowledge and 
intuitions. Knowledge-based optimization generalizes 
designers’ experience and obtains a design solution based on 
some pre-defined design flows and database, such as 
BLADES [1] and the step-by-step flow presented in [2]. Once 
the equations are derived, the design of each component could 
be finished in a short time. Although this method is quite fast, 
it is not easy to be extended to other circuit architectures. The 
optimality of the solution cannot be guaranteed, either. 
The general solution for the sizing problem is adopting 
circuit simulators in the sizing iterations until finding the 
relatively better design [3, 4]. Simulated annealing algorithm 
(SA) [5] is often adopted to speed up the convergence of the 
sizing iterations. This approach can obtain more accurate 
results, but often takes plenty of time. In [4], the authors 
propose a different approach to identify the bias point ranges 
that every transistor can operate in its saturation region before 
the SA iterations. Since the operating range of every transistor 
is also considered, the searching space in SA algorithm can be 
reduced to speed up the convergence of this iterative approach. 
However, the required computation time is still relatively 
longer among various kinds of approaches. 
 In order to improve the efficiency while searching the 
optimality, equation-based approaches are getting popular in 
last decade, such as those approaches based on geometric 
programming (GP) [6-10]. With the posynomial models of 
circuit properties and transistor parameters, the global optimal 
solution can be obtained by solving those equations using 
mathematical solvers. However, because the short-channel 
effects are more and more significant in advanced CMOS 
technologies, large prediction errors often exist in some 
transistor parameters, such as gds [8] and gm [9]. These 
 
Figure 1: The design flow of GP-based approach [6] 
Input specifications
Initial design point 
(W/L)
Find approximate DC 
operating point
Sized netlist
Device 
model
No
Vn’s Converged
No
Find constraints and
Solve convex problem
Converged
This work was supported in part by R.O.C. National Science Council under
Grant NSC99-2221-E-008-104. Their supports are greatly appreciated. 
  
 
reduces the modeling complexity and alleviates the loading of 
mathematical solver. 
V୥ୱ,୧ > V୲,୧ ;   Vୢୱ,୧ < V୲,୧                                                     (3) 
ౝౣమ
౅ౚమౝౚ౩మ
౅ౚమ ା
ౝౚ౩బ
౅ౚబ
×
ౝౣల
౅ౚలౝౚ౩ల
౅ౚల ା
ౝౚ౩ళ
౅ౚళ
> Gainୱ୮ୣୡ                                      (4) 
ౝౣమ
౅ౚమ ×୍౏౏
େి > GBୱ୮ୣୡ                                                               (5) 
୩×୍౏౏
େిାେై > SRୱ୮ୣୡ                                                                  (6) 
V୆ଵ > (V୓େ୑ + ଵଶOSRୱ୮ୣୡ) − V୘୔                                      (7) 
In order to obtain proper tradeoff between power 
consumption and chip area, the objective function in this work 
provides two user-specified parameters α and β, as shown in 
Equation (8), to consider area and power simultaneously and 
make proper normalization between them if necessary. If 
power consumption is the only goal to be optimized as in 
previous approaches, setting the area cost α to zero can 
achieve the same effect easily. Therefore, this objective 
function can provide more flexible optimization goal to users. 
min ( α × ∑ (
ౝౣ೔
౅ౚ೔ )×୍౏౏
(୚ౝ౩೔ି୚౐)
+ β × (1 + ݇) × Iୗୗ × Vୈୈ௡௜ୀଵ  )      (8) 
2.2  Building models and transistor sizing 
Given the node voltages of a transistor, its gm/Id value is 
almost a constant, no matter what its size is. Unlike the 
complex 5-variable functions proposed in [10], the models for 
gm/Id and gds/Id in the proposed approach have three variables 
(Vg, Vd, Vs) only. Because gm/Id and gds/Id are independent of 
device sizes, constructing these tables will not take too much 
simulation time because only a transistor is simulated without 
sweeping different device sizes. Once these tables are built, 
they can be reused in other cases until the technology file is 
changed. Therefore, HSPICE simulation results with level-49 
transistor models are adopted in this work to build the gm/Id 
and gds/Id models of NMOS and PMOS transistors respectively. 
Those accurate results significantly improve the accuracy of 
the predicted solution in the mathematical solver, as 
demonstrated in the experimental results. 
In order to accurately predict the frequency-domain 
responses of the circuits, the internal capacitors of a transistor, 
such as Cgs, Cgd, etc., have to be estimated, too. Theoretically, 
those internal capacitances of a transistor are proportional to 
its diffusion area, i.e, W*L. The Id current of a transistor is 
proportional to its W/L ratio. If L is the same value, both the 
internal capacitors and Id current are proportional to W. In 
other words, the internal capacitors of a transistor are 
proportional to its Id current, as illustrated by the simulation 
results in Figure 4.  It implies that C/Id is also a constant for a 
given L. Therefore, this work uses the similar table-based 
approach to construct the capacitor models for frequency-
domain analysis, which are functions of (Vg, Vd, Vs), too. 
After the bias voltage of each node and the Id for each 
transistor are identified, the size of each transistor can be 
determined also. Because there are two variables (W/L) that 
determine the MOS current, analog designers often fix the 
channel length (L) at a proper value and leave only one 
variable (W) in the sizing flow to simplify the problem. The 
same assumption is also adopted in this work at this step. 
 
Figure 4: Internal capacitors vs. Id current in a transistor 
In advanced technology, deriving the corresponding device 
size from the basic MOS current equation is not accurate due 
to the non-ideal second-order effects. Therefore, this work 
adopts a table-based approach to find the corresponding 
transistor sizes. Under different combinations of node voltages, 
the corresponding Id of a unit-size transistor is recorded in a 
pre-built table. Then, multiplied by its bias current can obtain 
the approximate transistor size for this case. Using this 
approach, the device sizes can be obtained quickly and 
accurately. Since building the sizing table is a one-time effort 
that can be built in advance, this approach greatly improves 
the efficiency of circuit sizing and optimization. 
2.3  Proposed bias-driven optimization flow 
Figure 5 shows the overall optimization flow of the 
proposed bias-driven approach. Compared to the GP-based 
flow in Figure 1 [6] that uses several iterations to approach the 
accurate technology parameters, the proposed optimization 
flow does not require any loops due to the increased modeling 
accuracy, which greatly improves the efficiency of circuit 
optimization. Finally, the transistor sizing table efficiently 
deals with the mapping from node voltages to device sizes 
with the consideration of deep-submicron effects. These 
features make the accuracy and efficiency of the proposed 
optimization flow outperform other existing approaches, as 
demonstrated in the experimental results. 
 
Figure 5: The proposed bias-driven optimization flow 
 
0 0.1 0.2 0.3 0.4
0.2
0.4
0.6
Current (mA)
In
te
rn
al
 c
ap
ac
ito
r (
pF
) Cdb
Cgd
Cgs
Setup constraints and
solve NLP problem
Input specifications
Sized netlist
Device sizing
gm/Id model
gds/Id model
C/Id model
Sizing table
End
Node voltage, Iss
  
 
the solutions in one iteration due to accurate prediction, two 
orders of magnitude improvement on computation time can be 
obtained with good results. For the iterative GP approach, 
those tough specifications increase the required number of 
iterations to reach convergence, as shown in the row 
“#iterations”. Even though the iterative process is converged, 
the situations that the real simulation results do not meet the 
specifications may still exist in the final circuit. Therefore, one 
order of magnitude improvement on computation time can be 
obtained by using the proposed approach. These comparisons 
have shown that the proposed bias-driven approach is indeed 
an accurate yet efficient optimization approach. 
3.3  Another case: folded-cascode OPA 
Another case, the folded-cascode OPA shown in Figure 6, 
is studied to demonstrate the proposed approach on different 
circuits. In this circuit, VB1 to VB5 are five input voltages that 
can be set by users. Vd0, Vd6, and Vd8 are the internal voltages 
that are determined by the device sizes. Therefore, there are 9 
variables in the performance equations of this circuit, 
including the current Ibias. The experimental results with 
TSMC 0.18μm process are shown in Table IV, in which the 
optimization goal is to minimize the power and area 
simultaneously. According to the experimental results, the 
proposed bias-driven approach can obtain accurate results as 
in the simulation-based approach with much less computation 
time. The situations that the real simulation results do not meet 
the specifications can be avoided in the proposed approach 
due to accurate prediction. These results have shown that the 
proposed method is also applicable to the optimization of 
other analog circuits. 
 
Figure 6: A typical folded OPA 
Table IV: Results comparison of the folded OPA 
Perform. Spec. SA [4] GP [6] bias-driven
Gain (dB) ≥75dB 76.5 71.5 75.3 
GB (MHz) ≥100MHz 106.5 107.8 100.6 
SR (V/μs) ≥60V/μs 81.8 72.9 66.8 
OSR (V) ≥0.6V 0.68 0.79 0.81 
PM (degree) ≥55° 57.6 61.0 56.0 
Power (μw) minimum 429 364 371 
Area (μm2) minimum 448.6 234.5 227.7 
#iterations - 314 8 1 
Time (s) - 555 78.2 16.6 
Speedup ratio - 1 7.10 33.4 
4.  Conclusions 
Due to the deep-submicron effects, large prediction errors 
often exist in some transistor parameters like gds and gm, which 
leads to significant prediction errors of circuit performance in 
previous equation-based optimization approaches. Instead of 
building complex parameter models, a novel approach is 
proposed in this paper that adopts the gm/Id design concept to 
solve the accuracy issue with less overhead. Since gm/Id is an 
independent value to the device size, modeling gm/Id is easier 
than modeling gm directly without the complex effects from W 
and L. Iterations are not required at all in this approach due to 
accurate prediction of transistor parameters, which greatly 
improves the efficiency of circuit optimization. As shown in 
the experimental results, the proposed bias-driven approach 
can obtain accurate results as in the simulation-based approach 
with much less computation time. The situations that the real 
simulation results do not meet the specifications can be 
avoided in the proposed approach due to accurate prediction of 
circuit performance. These results have demonstrated that the 
proposed approach is indeed an accurate yet efficient approach 
to improve the analog synthesis procedure. 
5.  Reference 
[1] F. El-Turky and E.E. Perry, “BLADES: An Artificial 
Intelligence Approach to Analog Circuit Design”, IEEE Trans. 
on Computer-Aided Design, vol. 8, no. 6, pp. 680-692, Jun. 1989. 
[2] J. Mahattanakul and J. Chutichatuporn, “Design Procedure for 
Two-Stage CMOS Op-Amp with Flexible Noise-Power 
Balancing Scheme”, IEEE Trans. on Circuits and Systems-I: 
Regular Papers, vol. 52, no. 8, pp. 1508-1514, Aug. 2005. 
[3] R. Phelps, M. Krasnicki, R. A. Rutenbar, et al., “Anaconda: 
Simulation-Based Synthesis of Analog Circuits via Stochastic 
Pattern Search”, IEEE Trans. on Computer-Aided Design, vol. 
19, no. 6, pp. 703-717, Jun. 2000. 
[4] C.-W. Lin, P.-D. Sue, Y.-T. Shyu and S.-J. Chang, “A Bias-
Driven Approach for Automated Design of Operational 
Amplifiers”, in Proc. Int’l Symp. on VLSI Design, Automation, 
and Test, pp 119-121, 2009. 
[5] S. Kirkpatrick, C. D. Gelatt Jr., and M. P. Vecchi, “Optimization 
by Simulated Annealing”, Science, vol. 220, no. 4598, pp. 671-
680, May 1983. 
[6] P. Mandal, V. Visvanathan, “CMOS Op-Amp Sizing Using a 
Geometric Programming Formulation”, IEEE Trans. on 
Computer-Aided Design, vol. 20, no. 1, pp. 22-38, Jan. 2001. 
[7] M. del M. Hershenson, S. P. Boyd, and T. H. Lee, “Optimal 
Design of a CMOS Op-Amp via Geometric Programming”, 
IEEE Trans. on Computer-Aided Design, vol. 20, no. 1, pp. 1-21, 
Jan. 2001. 
[8] J. Kim, J. Lee, L. Vandengerghe, C. Yang, “Techniques for 
Improving the Accuracy of Geometric-Programming Based 
Analog Circuit Design Optimization,” in Proc. Int’l Conf. on 
Computer-Aided Design, pp. 863-870, 2004. 
[9] V. Aggarwal, U. O’Reilly, “Simulation-Based Reusable 
Posynomial Models for MOS Transistor Parameters,” in Proc. 
Design, Automation and Test in Europe, pp. 69-74, 2007. 
[10] W. Gao and R. Hornsey, “A Power Optimization Method for 
CMOS Op-Amps Using Sub-Space Based Geometric 
Programming”, in Proc. Design, Automation and Test in Europe, 
pp. 508-513, 2010. 
[11] Behzad Razavi, Design of Analog CMOS Integrated Circuits, 
McGraw-Hill, 2001. 
[12] F. Silveira, D. Flandre, P.G.A. Jespers, “A gm/ID Based 
Methodology for the Design of CMOS Analog Circuits and Its 
Application to the Synthesis of a Silicon-on-Insulator 
Micropower OTA”, IEEE J. Solid-State, vol. 31, no. 9, pp. 
1314-1319, 1996.  
[13] R. J. Duffin, E. L. Peterson, and C. Zener, Geometric 
Programming—Theory and Application, New York: Wiley, 
1967. 
100年度專題研究計畫研究成果彙整表 
計畫主持人：劉建男 計畫編號：100-2221-E-008-067- 
計畫名稱：應用於三維積體電路之設計、自動化與測試關鍵技術--子計畫二：應用於三維積體電路之
異質系統探索平台與電源規劃技術(I) 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 1 1 100%  
研討會論文 2 2 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 3 4 100%  
博士生 2 2 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 1 1 100%  
研究報告/技術報告 0 0 100%  
研討會論文 3 4 100% 
篇 
 
論文著作 
專書 0 1 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
