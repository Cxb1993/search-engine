these cost functions, we can delegate proper number 
of location servers at proper locations so as to 
reduce the cost of location update and query. 
Simulation results justify the efficiency of the 
proposed protocol. 
英文關鍵詞： location service； location update； location query； 
vehicular ad hoc networks (VANETs) 
 
1 
 
1 簡介 
最近幾年來，汽車數量的成長與普及化，汽車已經是我們生活中常使用的交通工具之一，根據財
團法人車輛研究測試中心研究報告指出[1]，透過電腦運算來控制汽車內部各系統運作的智慧型車輛，
已經成為世界各國重要投注資源推動的重點之ㄧ。 
隨著無線通訊的傳輸技術以及半導體技術的進步，無線網路的應用愈來愈廣泛，像是無線通訊裝
置，變得愈來愈便宜。因此，幾乎每輛車子都可以裝備無線通訊裝置，而車子與車子之間可以透過車
上的無線通訊裝置來進行通訊，這樣子在道路上眾多車子之間的通訊便可以構成車載隨意網路
(Vehicular Ad-Hoc Network)。 
在車載隨意網路中，傳輸方式分為兩種，一種為車子對車子，我們表示為V2V，意思是車子與車
子之間可以透過車上的無線通訊裝置進行通訊。而另一種的表示型態為V2R，是車子對基礎通訊設施
(Road-Side Unit, RSU)，意思是車子可以與路邊的RSU來進行通訊 
車載網路設計的目的是提供網路鏈結給移動中的車輛，主要的應用像是即時車輛的位置資訊管理
或是利用具有位置知覺的路由協定[9,10]來通知緊急資訊(像是最新的路況資訊、天然災害的發生以及
突發事件...等等，都需要知道其他車子的位置資訊。目前全球定位系統(GPS)雖然普及而讓許多車子可
以知道自己的位置資訊，但是卻無法讓車子知道其他車子的位置資訊，因此，定位服務在車載網路中
扮演極重要的角色，所以設計一個良好的位置資訊服務協定(location service protocol)，讓車輛可以有效
率而且在最短的時間內知道所想要通訊之車子的位置資訊，便成了重要的研究議題。 
位置資訊服務協定的設計包括了三個主要的部份：位置資訊伺服器的配置、位置資訊的更新以及
位置資訊的查詢。設計位置資訊伺服器的配置會影響到位置資訊更新與位置資訊查詢的代價，設計較
多的位置資訊伺服器，雖然可以降低位置資訊查詢的代價，但是卻會增加置資訊更新的代價，因為要
更新所有的位置資訊伺服器，所以就會傳送較多的更新封包。相反的，設計較少的位置資訊伺服器，
雖然可以降低位置資訊更新的代價，但是卻會增加置資訊查詢的代價，因為如果位置資訊伺服器不在
鄰近範圍內，就必須傳送詢問封包到較遠的位置資訊伺服器，轉送詢問封包的次數就會變多，這樣傳
送的成本勢必會增加不少。因此，設計一個位置資訊服務協定可以同時降低位置資訊更新以及位置資
訊查詢的代價便成了一個兩難的問題。 
根據目前現存的定位服務方法，大致可分為兩類：Flooding–based[5-6]與Quorum-based[3- 4,8]這兩
種方法。 
Flooding–based：這類方法就是整個網路中所有的移動節點都需要週期性的發送更新位置資訊給鄰
居節點，並且記錄在自己的表格當中，當有一個節點要詢問某個目標節點位置資訊的時候，先尋找自
己的表格當中有沒有此目標節點的位置資訊，有的話就直接跟目標節點進行傳送，如果表格當中沒有
目標節點的位置資訊的話，便廣播詢問封包給鄰居節點，直到找到目標節點的位置資訊為止，這種廣
播式方法因為整個網路要傳送的資訊太多，導致無數個節點因為要傳送、接收的封包過多，進而產生
溢位的情形發生，所以Flooding–based並不適合在多節點的環境底下，比較限制於節點數少以及節點移
動速度較慢的環境底下，這樣才可以避免溢位的情形發生，但是因為Flooding–based的方式是大量廣播
位置資訊，所以表格中會紀錄很多節點的位置資訊，好處就是不必花太多時間去詢問目標節點的位置
資訊，這樣就可以降低等待路由的時間。 
Quorum–based：這類方法就是把整個網路切成規則的形狀，然後選定幾個區域當作位置資訊伺服
器，如圖1-3所示，每兩條道路都會有相交的地方，在相交的交叉口上設定當做位置資訊伺服器，意思
就是在這區域裡面的車子都會變成位置資訊伺服器，每台車子都會傳送位置資訊封包，或是位置資訊
更新的封包給這些被選定的區域，主要的作用就是可以用來繪製整個網路所有的移動車子的位置資訊，
當有車子要離開此區域的話就必須把所記錄的位置資訊轉交給當時還在區域裡面的車子，讓區域裡面
的車子依然保持擁有全部車子的位置資訊。 
為了克服過多的訊息傳送導致失敗的路由資訊的缺點，讓車子之間的通訊更有效率，所以要減少
3 
 
都是只考慮節點不移動的情況形。 
3.2系統環境說明 
本計畫提出位置服務的方法，先考慮到分散式的定位服務系統是將位置服務伺服器平均的散佈在
整個網路中，就是說每輛車子的附近就會有一個距離比較近的位置服務伺服器來服務，讓想要詢問的
車子可以花費較短的時間就可以找到目標車子的位置資訊，所以本計畫的機制也是參考分散式的作法，
將位置伺服器平均的散佈在整個網路中。同時，考慮到把車子當作位置伺服器的話，當車子要離開服
務區域就必須要經過換手的程式，但是因為車子的速度太快，傳輸品質比較不穩定，勢必會造成位置
資訊的傳輸不完整，間接導致無法提供正確的服務，所以，本計畫把路邊基地台(RSU)當作第一考量，
好處就是路邊基地台(RSU)固定不動，不需要經過換手，所以資料會比較完整，然而路邊基地台(RSU)
也比車子的通訊能力還要強，最重要的一點是，路邊基地台(RSU)會24小時的運作，車子隨時都可以問
的到目標車子的位置資訊，不會像車子一樣會有時間性的，畢竟人總是要休息睡覺的。 
3.3系統假設 
我們假設每台車子都裝備有GPS(Global Positioning System，全球衛星定位系統)，接著每台車子都
有數位地圖，方便紀錄道路的環境資訊。 
4 An Efficient Cost-based Location Service for VANETs(ECB) 
本計畫為了要探討如何在更新成本以及詢問成本之間取得一個平衡，位置資訊伺服器太多或太少
都不好，所以設計了一套公式，接下來所設計的位置資訊服務策略都是根據這套公式下去研究。接著，
位置資訊服務協定包含了三個主要設計的部分，分別是位置伺服器的配置、位置資訊的更新以及位置
資訊查詢，接下來介紹我們的位置資訊服務的策略。 
4.1位置資訊伺服器的配置 
位置資訊伺服器的分配策略會影響到位置資訊更新以及位置資訊查詢的成本，如果設置較多的位
置資訊伺服器，雖然可以讓來源車子(source vehicle)花比較短的時間詢問到目的車子(destination vehicle)
的位置資訊，如此卻可以降低詢問成本Cquery，但是又是因為設置較多的位置伺服器，勢必會造成位
置更新資訊需要發送給更多的位置資訊伺服器，如此反而增加了Cupdate，換句話說，如果設置較少的
位置資訊伺服器，雖然可以降低Cupdate，但是卻是因為較少的位置資訊伺服器，勢必要花比較多的時
間才可以詢問到目的車子的位置資訊，反而增加了Cquery，因此，如何挑選以及分配位置資訊伺服器
變成了設計位置資訊服務協定的主要問題。 
                                        
                  圖 4挑選策略                             圖 5挑選策略 
為了方便管理車子的位置資訊，我們將服務區域(service area)分割成許多一樣的小格子(grid)，格子
的切割設計要盡量與道路配合，讓道路盡量從格子的中間通過，以3*3的大格子為例，每九個格子當作
是一個群組，如圖4所示，原則上每一個群組，盡量由位在中心格子的路邊基地台(RSU)來擔任這個群
組的位置資訊伺服器，如果中心格子沒有路邊基地台的話，就選擇最靠近中心格子的路邊基地台當作
位置資訊伺服器，再搭配車流量較大的道路當作挑選行動位置資訊伺服器的條件，根據統計，黃色道
路是車流量較大的道路，根據以上兩個條件選出來的行動位置資訊伺服器如圖5紅色圓圈所示。 
會選擇路邊基地台當作位置資訊伺服器的原因在之前的章節已經有稍做說明了，不需要換手的動
作，然後通訊能力也比車子強，24小時服務，這些都是路邊基地台的優點。 
所以我們選定位置資訊伺服器的策略就是每台車子都會有一個區域行動位置資訊伺服器和數個特
5 
 
         
(a)                              (b) 
     圖 11二個伺服器                  圖 12(a)更新的總 hop 數  (b)詢問的 hop數 
設置3個特定行動位置資訊伺服器，如圖13所示，進入更新位置資訊的時候，需要向3個特定行動
位置資訊伺服器傳的平均hop數是18.59，詢問到特定行動位置資訊伺服器的平均hop數是2.85。 
         
(a)                              (b) 
     圖 13三個伺服器                  圖 14(a)更新的總 hop 數  (b)詢問的 hop數 
設置4個特定行動位置資訊伺服器，如圖15所示，進入更新位置資訊的時候，需要向4個特定行動
位置資訊特定伺服器傳的平均hop數是25.33，平均每輛車詢問到特定位置資訊伺服器的hop數是2.27。 
         
(a)                              (b) 
     圖 15四個伺服器                  圖 16(a)更新的總 hop 數  (b)詢問的 hop數 
根據參考文獻的統計，一次模擬時間之更新與詢問的比例是一比四，2個特定行動位置資訊伺服器
的總花費(更新花費加上詢問花費)是1047.6-bytes，3個特定行動位置資訊伺服器的總花費是987.4-bytes，
4個特定行動位置資訊伺服器的總花費是997.4-bytes，5個特定行動位置資訊伺服器的總花費是
1063-bytes，每輛車擁有3個特定行動位置資訊伺服器在更新與詢問的比例是一比四的情況下的總花費
是最低的，所以我們決定每台車擁有3個特定位置資訊伺服器。 
4.2衡量位置資訊服務協定的公式 
為了設計一套有效率的位置資訊服務協定，來降低位置資訊更新以及位置資訊詢問所付出的總成
本，首先，我們先定義一套公式來衡量位置資訊服務協定的效能，然後再依據這個公式來設計位置資
訊伺服器的選擇策略、位置資訊的更新以及位置資訊查詢的方式。 
這些公式是為了要降低成本考量的，降低成本就要從降低更新成本以及降低詢問成本方面著手。
更新成本方面就是要減少車子到每個位置資訊伺服器的距離以及減少更新位置資訊的次數。詢問成本
方面就是要減少詢問到位置資訊的距離，所以我們用公式(1)以及公式(2)的計算來配置特定位置資訊伺
7 
 
                  
                 圖 18三個伺服器                         圖 19三個伺服器 
表 3公式(6)與(7)的定義 
 
在車子進入位置資訊更新的階段，車子會先將位置資訊更新封包傳送到區域性的位置資訊伺服器，
之後再由區域的位置資訊伺服器將位置資訊更新封包以群播的方式傳送至特定的位置資訊伺服器，在
群播路徑上的路邊基地台或是車子可以順便將這個更新資訊紀錄起來，來源車子就有更多的機會就近
詢問到目的車子的位置資訊，大大的降低詢問所造成延遲的時間。 
4.4位置資訊的查詢方法 
當來源車要尋找目標車子的位置資訊的時候，先查看自己是否有目標車子的位置資訊，如果沒有
就向區域位置資訊伺服器發出詢問封包，如果區域位置資訊伺服器沒有目標車子的位置資訊，區域位
置資訊伺服器就會依據目標車子的識別碼，向距離最近的目標車子的特定位置資訊伺服器發送詢問封
包，例子如圖20、圖21以及圖22所示。 
           
  圖 20位置資訊查詢的方式        圖 21位置資訊查詢的方式        圖 22位置資訊查詢的方式 
在圖20中，上面有一輛詢問車子正要詢問同個區域的目標車子的位置資訊，第一步就是詢問車子
去詢問自己區域的區域行動位置資訊伺服器，這時如果區域行動位置資訊伺服器有目標車子的位置資
訊，便直接回應詢問車子的詢問封包。在圖21中，左邊有一輛詢問車子要詢問上面目標車子的位置資
訊，第一步就是詢問車子去詢問自己區域的區域行動位置資訊伺服器，這時如果區域行動位置資訊伺
服器沒有目標車子的位置資訊，就進入第二步，轉傳這個詢問封包到特定行動位置資訊伺服器(根據目
標車子的ID)，第三步就是特定行動位置資訊伺服器傳送回應封包給區域行動位置資訊伺服器，第四步
就由區域行動位置資訊伺服器傳送回應封包給詢問的詢問車子，最後第五步就由詢問車子傳送資料給
目標車子。如果，在送詢問封包的過程中有任何車子或位置資訊伺服器擁有目標車子的位置資訊，便
可以直接回應詢問車子，來降低Cquery，這樣也可以縮短查詢的時間，如圖22所示，因為詢問車子所
在區域的區域行動位置資訊伺服器有經過轉傳目標車子的更新封包動作，所以區域行動位置資訊伺服
器有紀錄目標車子的位置資訊，而區域行動位置資訊伺服器可以直接回應詢問車子的詢問封包。 
5 實驗模擬 
這個部份將呈現我們實驗模擬的結果，我們使用NS-2[11]以及SUMO[12]進行模擬，車輛的導航規
   
  
 
      * Dupdate + 
    
 
 
   
   
 
          
 
   
 
    (6) 
{     
 
 
   
    
 
          
 
    } / m        (7) 
9 
 
   
圖29不同網路大小的總花費   圖30不同移動速度的更新花費 
5.2 成功率 
成功率隨著車輛的增加而慢慢增加，如圖23所示，因為在車輛數少的時候，可能會發生資訊傳送
不到位置資訊伺服器的情形，所以成功率會比較低，相反的，車輛數多的時候則不會發生這種問題，
成功率會提高，相較之下，ECB的成功率跟其他兩種方法的成功率是差不多的。 
5.3平均詢問到位置資訊的 hop數 
圖24表示平均詢問到位置資訊的hop數，隨著車輛的數目增加沒有什麼變化，因為ECB跟VLS的方
法都可以就近詢問到伺服器，所以詢問位置資訊時所需要的hop數相較於Cache-Based Routing來的低，
但是，時間久了，Cache-Based Routing的伺服器越來越多，周遭可能是位置資訊伺服器，降低了詢問
位置資訊的hop數，所以平均來說，Cache-Based Routing也是可以降低平均詢問到位置資訊的hop數。 
5.4更新花費 
圖25表示的是更新的花費，隨著車輛的數目增加而增加，可以看的出來，ECB以及Cache-Based 
Routing都是比較低的，而VLS明顯的還要高，而ECB跟Cache-Based Routing是差不多低的，因為VLS
要傳送的位置資訊伺服器過多，而且每經過一個轉彎，VLS也會進入更新的程序，所以VLS的更新花
費是三種方法裡面最高的，從表8中得知，如果行駛路徑中轉彎更多次，VLS的更新成本也會增加；而
Cache-Based Routing每經過一個十字路口會交換彼此車輛的訊息，意思就是每經過一個十字路口就進
入更新的程序，所以Cache-Based Routing的更新花費會愈來愈高；ECB因為有加入路徑的資訊，一開始
會有比較高的更新花費，但是不需要每經過一個十字路口或是一個轉彎就要進行更新，所以，當時間
久了，我們的方法會減少更新的花費。 
                             表8位置伺服器數量比較 
 
5.5詢問花費 
圖26及圖27表示的是詢問的花費，不會隨著車輛數目的增加而增加，但是會隨著詢問的次數增加
而增加，可以看的出來，ECB以及VLS都是比較低的，而Cache-Based Routing是最高的，因為在詢問的
過程中，Cache-Based Routing在一開始的時候，有記錄其他車子位置資訊的並不多，所以Cache-Based 
Routing會以廣播式的方式來詢問目標車輛，這樣詢問的花費是最高的；ECB跟VLS的詢問花費都是較
低的，不管在任何時間都可以就近詢問到位置資訊伺服器，而ECB的詢問會愈來愈低，因為ECB在傳
送更新訊息的時候，轉傳這個更新封包的車輛都會順便紀錄起來，隨著時間的增加ECB會有愈來愈多
台車擁有目標車輛的位置資訊，愈能就近詢問到位置資訊，詢問花費就降低了。 
5.5總花費 
不管是隨著車輛的數目增加還是網路大小的增加，ECB形成的花費確實比其他兩種方法都還要低，
如圖28以及圖29所示。 
5.5移動速度 
圖30是車輛在不同的移動速度情況下的更新花費，可以看得出來隨著移動速度的增加而有所增加，
因為車輛移動速度加快導致更快進入更新程序，但是因為我們的方法有加入導航系統的轉彎資訊，所
以不會因為速度的增加導致更新花費快速的增加，而是慢慢的增加，所以車輛的移動速度在不同的情
國科會補助專題研究計畫項下出席國際學術會議心得報告 
                                     日期： 101年 7 月 19 日 
 
計畫編號 NSC 100-2221-E-128-001 
計畫名稱 車載隨意網路上位置資訊服務協定之設計 
出國人員
姓名 
許智舜 
服務機構
及職稱 
世新大學資訊管理系 
副教授 
會議時間 
101年 7月 12日至
101年 7月 14日 
會議地點 印度尼西亞峇里島 
會議名稱 
(中文) 
(英文) The IEEE International Conference on Communication, Networks 
and Satellite (COMNETSAT 2012) 
發表論文
題目 
(中文) 
(英文) An Efficient Cost-based Location Service Protocol for Vehicular 
Ad Hoc Networks 
第一天大會的主場地 
 
這次 COMNETSAT 2012 與  IEEE International Conference on Computational Intelligence and 
Cybernetics 2012 (Cyberneticscom 2012)共同舉辦，雖然大會宣稱上午八點可以開始報到，不過直到八點
半後才看到大會工作人員到達註冊櫃檯，補繳完註冊費差額後，工人員才發給識別證與收據。第一天
(7月 12日)，因為大會只租借一個場地，所以只安排了一場 keynote speech, plenary talk以及一個 artificial 
intelligence 的 session，晚上則是盛大舉行了歡迎晚宴(welcome dinner)，但是第二天並沒有 banquet。歡
迎晚宴是在戶外舉行的露天 buffet，具有峇里島風味的食物，味道不錯也很豐盛。另外大會還邀請了舞
者表演當地的舞蹈，十分精采，讓我留下了美好的回憶，可惜的是參加的人不多，很多桌席都是空的。 
第二天(7月 13日)大會將開會的場地移至飯店二樓的四個小會議室，共有四個 sessions 同時進行，
主題包括 Architecture, Protocols, Internet Computing, Cybernetics, Artificial Intelligence, Mobile & 
Wireless Broadband, Quality, Security, and Management, Soft Computing, Data Mining, Software 
Development, 以及 Network Planning and Policy等。個人主要是參加 Mobile & Wireless Broadband 的
session，這個 session 的 paper 最多，但是有很多報告者都沒有出席，有很多的論文都是在談論天線的
設計，另外 femtocell, cognitive radio network, cloud computing 都還算是蠻熱門的主題。個人於 7月 13
日下午 3至 5點Mobile & Wireless Broadband 的 session 發表自己的論文必回答了一個提問。 
第三天(7 月 14 日)大會只有半天的議程，上午九點至十點由 Syracuse 大學的 Varshney 教授
以”Cognitive Radio Networks: Design Issues and Security Threats”為題發表演說，個人負責主持一個Mobile 
& Wireless Broadband 的 session 並發表兩篇論文，沒想到這個 session 的作者就只有我出席發表論文，還
好還有一些聽眾，不然就變成唱單簧了。 
歡迎晚宴的場地 
國科會補助計畫衍生研發成果推廣資料表
日期:2012/10/06
國科會補助計畫
計畫名稱: 車載隨意網路上位置資訊服務協定之設計
計畫主持人: 許智舜
計畫編號: 100-2221-E-128-001- 學門領域: 計算機網路與網際網路
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
