2process. Given simulated best view
positions, the camera will be
moved around the building to
acquire necessary pictures to
reconstruct a complete simplified
3D model of a building.
A reprojection method is then
followed to combine the model and
an epipolar geometry algorithm 。
Using the camera center
information, a disparity map can be
derived within the framework of the
epipolar geometry for each pixel
in the key image. This map is then
used to calculate the 3D
coordinates and finally a full
color detail model can be
constructed.
前言
使用動態遠距感測以自動地擷取
3D 物體幾何模型，仍為開放議題[1]。
3D 物體幾何造型的取得程序，包括持
續週期性地進行四個常見步驟，例如
視角規劃，感測，登錄和整合。常用
的非模型基礎觀測方法通常可經由視
角規劃的問題領域來進行分類。例如
物體表面、物體體積或其他非物理性
之屬性。最常見的以表面為基礎的規
劃方法，利用開發遮蔽邊的方式進行
規劃〔2〕。常見的立體幾何演算法被
用於探知包括模型容積的三維物體屬
性[14]。以模型為基礎來進行觀測規
劃，擁有避免使用精確測量以進行場
景研究，由於精確測量，通常表示需
要昂貴的儀器，因此屬於一個有用的
特性[3].
第一階段取得少量的抽樣，使用
快速預編程式的掃描估算幾何物體模
型。使用這個多角形的網格粗糙模型
為如新的知識庫，其後的階段進行細
節的觀測計畫，精確物體掃描。深入
探討這方面技術的文件有[3],[6].
Tarbox 和 Gottschlich 首先提
出一個可測量矩陣資料結構，作為以
模型為基礎的觀測計劃之檢視應用
[7]。.傳統上﹐列對應到表面點，行
對應到觀測點。每個矩陣元素均為對
應觀測點能力的二元值估計。為了能
夠測量，表面的點一定要在光學發射
器 （雷射）和光學的接收器 （探測
器）兩者間皆為可視及的, 而且估計
測量精確度及抽樣調查密度必須在指
定的限制之內。
可測量矩陣為一個強大但計算昂
貴的觀測計劃工具，因此表面和觀測
點空間的抽樣調查的方案很重要。當
所需的粗略模型密度由物體形狀的複
雜度及精確度決定，實驗顯示一個非
常粗糙的粗略模型已足以用於觀測計
劃，而且程序與取得的雜訊多寡有關
[4].當它的幅員是非常高的時候 ,當
其尺寸更大時觀測點空間的適當分隔
更顯必備。
在這一個架構裡面，觀測計劃可
以如下方式繼續-由快速預編程式掃
瞄所產生的粗略模型，粗略模型分割
（可選擇的）觀測點產生,可測量矩陣
計算，接著以集合涵蓋模型繼續求解.
工業的影像檢測環境，時常面臨定位
系統的精確度降到感應器及所需模型
精確度之下，此為必須面對的額外的
問題。
如此的情形使以影像為基礎的登
記(registration)（像是標準的反覆
最靠近的點（ICP）演算法[2]） 對使
4型。
目前﹐建築物照相測量法重建程
序使用一個最佳視角運算法則，以決
定在每個拓普上相同的區域裡面(看
到同樣的可見面)共需要多少視角。
然而在每一個局部區域裡面視角的計
算係藉由繞著垂直於地面的中心軸，
旋轉 360 度照相取得。產生的視野看
不見與水平方向垂直的特徵區域。 此
視角規劃的結果是只能在單一的空間
控制變數，也就是繞著垂直地面的旋
轉軸周圍，從 0 達到 360 度逐一改
變視角。以任何的特別角度方向下，
計算出的可見面數字被而被用為函數
值以建構視角規劃圖如 Fig.4 所顯示
的曲線。該如何把有限制的視野範圍
的一維視野角度擴張到二維，以重建
整個完整的模型或數位建築，是一個
很重要的議題。我們提議藉由一個垂
直於中央軸心方向增加第二個旋轉
軸，如 Fig.6 所示的 y 軸。x 軸是建
築物或模型的物體中心中央的垂直
線。y 軸是第二個軸。 本研究提出一
掃描方案。持續地沿著二旋轉軸移動
照相機，以進行拍照。第一個步驟是
沿著 y 軸以固定的小數量旋轉照相機
角度。最大的旋轉範圍是離地面約 90
度。如 Fig.6 所示的β角度。然後在
中央的 x 軸的周圍進行第二次旋轉，
旋轉範圍從 0度達到 360 度。如 Fig.6
所示的α角度。如此會形成一個完全
地含蓋物體或建築物的半圓形屋頂。
產生的視角規劃，預期會形成如 Fig.3
一樣所顯示的，擁有許多獨立的二維
視角區塊。
為了要將最佳的視角運算法則從
1 D 延伸到 2 D，需要針對拍照程序中
多出來的旋轉度，設計特別的資料結
構以進行二維的最佳視角運算。這資
料結構從一維情形被延伸而出，並且
有對不同的類型儲存而設計的三串列
結構。第一串列結構是由指向擁有相
同的資料結構的鄰居節點的一連串的
指標所構成。第二串列結構是由獨立
區域邊界視角裡面所包含的一組可見
面整數編號所構成。第三串列結構是
由一組指向記錄二個軸的旋轉角度的
另一資料結構的指標所構成。此一目
錄結構用來儲存每一獨立區域內所有
的邊界視野角度。在此視野角度範圍
內之所有視野角度皆看得見相同的可
見面組合。給定此一目錄結構組合，
在相同拓普關係的區域內之最佳的視
角能容易地被計算獲得，以重建一完
整的 3D 立體模型。以下描述要如何使
用這資料結構以計算最佳視野角度的
運算法則。
演算法被區分為二個部份，第一
道和第二道。 第一道的目的是收集
所有可看見相同模型面的視角區域。
與附近的區域之間的關連關係也在這
一個程序期間被建立起來。每個區域
被儲存在上述紀錄區域限制角之間的
可見面的資料結構。資料結構的細節
在以下描述以供參考：
typedef struct VGPNode{
list<int> boundary;//start angle
of the visible range //可視範圍的
起始角度
list<int> visFaces;//list of model
face id.s //模型面編號的列表
list<int>bestViews;//list of best
view angles //最佳視角的列表
list< VGPNode*> neighbors;
}
演算法的第二途徑搜尋這個特別資料
6一這些投影皆發生在epipolar平面裡
面發生﹐任何的在補位再投影影像
上，可能對應於任何主位的影像點pk
之影像點，一定位於主位影像上通過
pk的epipolar線。當實體和模型在P與Q
一致的情形中﹐po被投影到P然後再投
影到pk如此會導致零對應點誤差。
P點的計算程序如下所述。首先連
接二相機中心，計算此中心線及主位
影像平面之交點，是為 epipole。從任
一給定的主位影像點 Pk，連通 epipole
計算得 epipolar line ek。在此線上
搜尋補位再投影影像對應點 qk，找到
後連結主位相機中心及 qk，延伸線交
會近似模型於 Q，連結 Q與補位相機中
心，計算此線與主位相機中心與 Pk延
伸線交點。即可獲得 P點。
在epipolar線上搜尋補位再投影
影像對應點的比對標準係採用比對像
素附近之 7x7 像素視窗，比對值之計
算採用，二個區域中之四十九像素常
態化之強度值。此二值對在二個影像
之間在光亮和對比差別方面並不敏
感，所以可以擇為一好的相配標準。
結果與討論
本研究目的為探討一自動化三維
朔模程序。可以最低成本將細部模型
重建。第一先就拍攝角規劃(view
planning)指導原則。在進行實際拍攝
前,先將 CAD 模型進行模擬，計算最佳
拍攝角，經由此指導原則可濾除一些
拍攝角度，最後以最少的像片數即可
涵蓋整體之主構面。首先將一立方體
CAD 模型主構面進行標記，如 Fig. 7
所示。再沿著 y 軸以固定的小數量旋
轉照相機角度。最大的旋轉範圍是離
地面約 90 度。如 Fig. 6 所示的β角
度。然後在中央的 x 軸的周圍進行第
二次旋轉，旋轉範圍從 0度達到 360
度。如 Fig. 6 所示的α角度。接著實
作 Fig. 1 之三維視角規劃流程圖，將
此物件之主要構面進行分群運算，找
出含最多可見面之群組。同時濾除非
主要群組，Fig. 3 為就所有二維旋轉
視角所計算之群組拓墣圖。由此圖可
觀察到共有四個佔據最大面積之主要
群組，根據此拓墣圖，進行
segmentation 運算，包括二值化，及
尋邊運算，即可獲得每一主要群組之
邊界(boundary)。給定一主要群組之
邊界視角，可計算其質心
(cnetroid)，Fig. 4 即為依此程序計
算第一主要群組之邊界及質心結果。
此一質心即為第一最佳視角。循此步
驟可求得其他主要群組之邊界及質心
結果如 Fig. 5 所示。Fig. 5 所求的
最佳視角分別為
(α=50、β=46)，(α=130、β=46)，
(α=225、β=46)，(α=320、β=46)。
將此四最佳視角針對此立方體模型之
相對方位繪出即如 Fig. 6 所示。由此
圖可看出此此四最佳視角為合理正確
的選擇。此四視角剛好可以將構面 1、
2、3、5各含蓋兩次，構面 4含蓋四次。
每一視角所能看到的構面也最多。以
此法獲得之視角規劃確能確保以最少
拍攝角度，完整重建一粗體模型。此
為本研究之演算法成功之驗證成果。
接著使用此演算法於一實體建物
之細部重建；根據 Fig. 2 之演算法首
先將一建物之構面兩側進行拍攝，如
Fig. 8、9 所示。再利用
Photogrammetry 原理求取此二影像
之中心位置及外方位，之後使用本研
究之再投影演算法，計算 epipole 並
取左影像為主影像(Fig. 8)，右
8α<=90
β=0
α=0
β<=360
α+=10 β+=10
list already exists
in other VGPs
1.Add current view
angle to the boundary
list of the existing
VGP
2.Update the
neighbor info. of this
VGP node and the
current VGP
3.Set the existing
VGP as current VGP
1.Create a new VGP and
store the vis. face list
2.Add current view angle
to the boundary list of the
new VGP
3.Update the neighbor
info. of this VGP node
and the current VGP
4.Set the new VGP as
current VGP
VFL of previous angle
== VFL of current angle
END
Y
Y
Y
Y
N
N
N
N
Fig. 1 三維視角規劃流程圖
10
z
β=46
α=130
β=46
α=225
α=320
β=46
β=46
Best view 1
Best view 2
Best view 3
Best view 4
Fig. 6 相機旋轉自由度規劃與最佳視角方位
x
y
α=50
α=0
Fig.7 立方體主構面標記
1
2
3
4
5
Fig. 9 right image
Fig. 10 細部模型網格
Fig. 8 Left image
