一. 前言 
數位化革命開啟了數位生活化的契機，最明顯的改變就是數位家庭(Digital Home)的衍生，
在數位家庭中會有需多不同的多媒體數位裝置，例如無線視訊接收盒(setup-box)、個人電腦
(PC)、數位監視器(digital camera)、藍光播放裝置(Blue-ray disc player)及電視遊樂器等，
這些裝置都是用來產生或是接收我們所要的數位視訊內容，為了因應上述的技術趨勢，由日立、
松下電器、Royal Philips 等七家國際知名家電大廠所制訂的高解析多媒體影音介面(High 
Definition Multimedia Interface; HDMI) [1]，最高頻寬可支援到 5Gbps，而目前高畫質的
HDTV需要大約 2Gbps之內，因此 HDMI已經成為未來數位視訊家電店中的主要介面。 
以以往以「運算密集度」為主的數位多媒體系統而言，現今的積體電路技術足以應付如此
龐大的資料運算量，但是對於多媒體資料的存取量而言，並沒有因為半導體製程的進步而有所
改善，主要是因為目前對於是視覺上的感受程度要求提高，而所衍生的視訊壓縮標準 H.264[2]，
也已被大幅應用在未來的高畫質數位電視產品中，而相關的學術文獻討論中指出，其中有關於
記憶體存取的 MIPS (million instructions per second)占全體的 48%[3]，如此可以看出對
於未來多媒體系統而言，其有關於資料的存取數量將會影響整體的執行效能，這個現象也出現
在一般的中央處理器架構中[4]，除此之外，對於一個 MPEG-4解碼器，其花在記憶體存取所消
耗的功率就佔據了系統功率的 60%。也就是說，對於未來高畫質的數位視訊處理技術而言，將
會由原本的「運算密集度」轉變為「記憶體頻寬密集度」為主的技術上，並且，在無線傳輸技
術上也可以藉由嵌入式壓縮技術來降低整體系統對於頻寬的需求。更重要的是，將此 content
的頻寬降至傳輸技術可以負荷的程度，也將有著於整體系統的完成與穩定。 
二. 研究目的 
 aspiring high-end的影像或畫面的品質總是本計畫需要讓顯示解析度提升的動機。從 VCD
的 480p到藍光光碟的 1080p，這影像編碼的發展走向扮演了重要的角色，近來液晶顯示器面
板產業走向 Quad Full High Definition(QFHD, 3840x2160)[5]。上述說的影像編碼系統產生
的高影像解析度會有兩個設計上的問題：龐大的計算量和龐大的記憶體頻寬。計算的問題可以
用適當的硬體架構設計和高速半導體設備來處理。無論如何，記憶體的頻寬和解析度成比例而
會成為影像編碼系統設計上的瓶頸。在 1080p的解析度，影像編碼系統的記憶體頻寬高達
878MB/S(大約 7Gbps)。這巨大記憶體頻寬不僅導致系統匯流排的雍塞還使得記憶體存取時的
功率消耗增加。 
 畫面的再壓縮技術被包涵去克服記憶體頻寬的議題。在影像編碼的系統裡，畫面暫存是非
常普遍的實現於外部記憶體儲存重建的畫面。面畫再壓縮技術被整合在影像編碼系統和外部記
憶體之間而保留了記憶體頻寬和功耗。畫面再壓縮之後，由於可變長度編碼(VLC)的原理所以
每一個的編碼佔有不同的位元數。上述導致了本計畫如何從外部記憶體存機存取重建的畫面這
個問題。結果，畫面再壓縮技術同時也需要提供隨機存取機制去存取從外部記憶體的重建畫
面。 
 這份論文，提出了自相關導向式之無失真視訊壓縮機制(Autocorrelation-based Frame 
Lossless Recompression ,ALFR)。這 AFLR 包含了兩個部分： (1) 相關性-基底預測技術。 (2) 
相關性-適應 Golomb-Rice 編碼。第一個部分是在自相關的機制上產生預測的殘值基底。第二
個部分可以轉換為效率編碼，每一個編碼都塞滿在位元串流和儲存在外部記憶體裡。並且相對
為左邊的，ACF(1,0)為上面的和 ACF(1,-1)為左上的。 
 這四個自相關的值可以產生 ACF 平面所預測的值在空間域-相關原始畫素和他自己附近三
個方針：水平的斜率，垂直的斜率，對角的斜率。這些斜率的定義如下 
_   | (0,0) - (0, -1) |
_        | (0,0) - (1,0) |
_     | (0,0) - (1, -1) |
Horizontal Slope ACF ACF
Vertical Slope ACF ACF
Diagonal Slope ACF ACF



 
 
(2) 
先前有提及到，這斜率可以被利用於觀察空間域-相關的原始畫素和他自己附近的三個畫素。
在這三個斜率之中，指出在附近畫素最小的那一個表示出對於原始畫素的最高空間域-相關。
如果水平的斜率是最小的，這左邊的被採用為原始畫素的預測。同樣地，上面和左上是把垂直
的斜率和對角線斜率當作預測，各自地。這一次預測是決然的，殘餘值如下  
  _  -  residual current pixel predictor  (3) 
 對於 8X8的方塊，如果 ACF的平面包含在其他的 8X8的方塊裡，則資料相依性會提升。此
資料相依性嚴重與每個 8X8 區塊的隨機存取功能衝突。因此，任何可能在每個 8X8區塊之間導
致資料相依性的程序需要被禁止。 
C. AFLR的自相關-適應 Golomb-Rice編碼 
 畫面或影像殘值的廣泛模擬成幾何分類[12]，殘值最好集中在 0附近。換言之，越小的殘
值比較高的殘值機率大。這 Golomb-Rice編碼可以分配高效率編碼於每個殘值作幾何分類。這
編碼是 Golomb-Rice編碼分出一位元和二位元的部分 
Unary part  : 
2
Binary part :  mod  2
k
k
r
r
  
  
 


 
(4) 
其中 r代表殘值則 k是正整數。一位元的部分和兩位元的部分，分別用一位元的編碼和兩位元
的編碼。Golomb-Rice 編碼把一位元和二位元部分串在一起編為所有的編碼。A 信號為 0 位元
插入在一位元部分和二位元部分之間來辨識出解碼的程序。 
 在 Golomb-Rice 編碼裡，k 的參數大小影響了編碼的效率。在這技術中，提出了相關-應
用 Golomb-Rice編碼運用差值去決定適當的 k的參數。差值是由原始畫素周圍分出三類，且最
小的斜率可以被決定為原始畫素的預測與差值的預測。如果水平的斜率最小，就抓左邊和左邊
的左邊的畫素相減當成差值。如果垂直的斜率最小，就抓上面和上面的上面的畫素相減當成差
值。如果對角的斜率最小，就抓左上和左上的左上的畫素當差值，為了獲得更高效率的編碼，
最小的殘值選用最小的 K 值，而最大的 K值選用最大的殘值。根據於[13]，正常的畫面使得大
部分的 K值為 3。此結果，K為 2時指定為水平層級，而 K為 3時指定為複雜層級。此結構，K
的值適合決定相對應的自相關原始畫素質的差值。 
表 1. 無失真壓縮比的計算結果 
Test 
Sequence 
[14] 
Proposed 
AFLR 
news 1.558 1.917 
paris 1.548 1.642 
table_tennis 1.726 2.001 
waterfall 1.819 2.143 
coastguard 1.713 1.953 
average 1.673  1.931  
 
表 2. 計算負擔的結果 
Normalized Execution 
Time 
[14] 
Proposed 
AFLR 
news 1 1.006 
paris 1 1.006 
table_tennis 1 1.007 
waterfall 1 1.006 
coastguard 1 1.006 
average 1 1.931  
 
 
 
 
這裡的Bn代表8X8方塊的指數，而Bn壓縮之後為CL(Bn)區段的高。註解目前單位位元是區段的全
部種類。在自然的畫素以每個8X8的方塊為開始位址(SA)如下 
1 1( ) ( ) ( )n n nSA B SA B RL B AL     (7) 
通常，RL( B n)的失真比CL(Bn)高。所以，記憶體的容量儲存在RL( B n)比存在CL(Bn)的壓縮還
高， 9位元時需要給每個8X8的方塊。用RBMA，不只每個8X8的方塊可以被作隨機存取記憶體，
不過記憶體的容量可以被減少。 
 
(三) 演算法效能比較與討論 
 提出AFLR已訂定在H.264/AVC的參考資料軟體(JM14.0)，是個詳細且普遍的影像編碼標準。
基準，包含 [14]，也拿了一些相同的參考資料軟體計算結果作比較。此計算標準包含了無失
真壓縮率(CR)和編碼步驟的計算。用6個(352X288)的CIF檔作了一連串的測詴。每一個測詴都
用100張畫面作編碼。畫面群組(GOP)是由1個I畫面和9個P畫面構成的。 
 計算無失真的結果CR列在表I裡。超過這些10個一連串的測詴， [14]顯示出平均為1.64
的CR值。比較了[14]，提出AFLR顯示出平均為1.76是較高CR值。 [14]應用在固定的預測或多
方面預測滿足可變畫面的步驟。不過，AFLR被相關-基底採納作預測技術和相關-應用
Golomb-Rice編碼容易達到畫面的壓縮。這是我為什麼提出的動機，AFLR和[14]作比較可以得
到更高的效率CR。 
 從此再壓縮畫面是外加的解碼方程式，它帶領附加計算編碼的步驟。分析這計算結果，用
這台3.1GHz 的CPU運算速度和2G記憶體的個人電腦當運算平台。表II展示出AFLR的計算結果的
平均超過[14]2%左右。 
 
(四) 結論 
 這篇論文裡，提出AFLR的儲存影像編碼系統的記憶體頻寬。AFLR應用了自相關函數空間域
相關的搜尋畫素不會超出這方塊。觀察這塊基底，相關基底預測技術可以產生高效能的預測殘
值。這預測殘值編碼要被相關適應來作Golomb-Rice編碼來取得高效能的編碼。此外，提出RBMA
使AFLR能夠做到隨機記憶體存取的功能。實驗的結果顯示出這AFLR的無失真CR為1.76指出記憶
體頻寬可以被儲存45%以上沒有任何的visual-quality。除此之外，AFLR的計算超出小於2%比
較於計算[14]。 
( ) ( )n nRL B CL B AL   (6) 
  
 
 
 
 
 
 
 
 
 
  
 
 
 
 
 
 
 
 
 
 
 
B. 硬體架構 
 圖 7為電路最上層的方塊圖，一開始 Data_In輸入畫面的 pixel值經過暫存器單元，暫存
的值再送給自相關核心裡作運算，而自相關核心裡還分為運算單元與比較單元，運算單元把運
算結果送給比較單元去選擇最小的值，搜尋該位移的值當作為預測值，再用預測值運算出殘餘
值，把結果輸出給 Golomb  rice code作編碼，而哪個時序該做哪些運算都交由控制單元去作
控制，它負責控制所有的多工器的選擇和判斷，最後 Golomb rice code作編碼輸出了一連串
的位元流。 
 圖 8為電路內部硬體架構比圖 7為更詳細的硬體架構圖，第一個方塊為暫存器單元，內部
有 9個暫存器是要為了作自相關函數而排的。第二個方塊為運算單元，內部有 12個乘法器與
4個加法器和 6個減法器，這些模組是為了要作 AFLR演算法的。第三個方塊為控制單元，內
部有 2個多工器和 1個比較單元，控制了何時該輸出哪一個位移，比較了選擇該位移作預測，
再用預測值運算出殘餘值。最後殘餘的值給 Golomb rice code作編碼，編出了一連串的位元
流。暫存器單元內部其實共有 24個暫存器，除了圖 8的 9個暫存器外，其中還有 15個暫存器，
這 15個暫存器是為了作資料排程使用，控制單元內部其實共有 7個多工器，除了圖 8的 2個
多工器外，其中還有 5個多工器，這 5個多工器是為了換 block作補 0的動作，目的是為了不
      
                                            AFLR
ALU Unit
Register 
Unit
Autocorrelation
nucleus
Data_In
Golomb 
Rice
Code
Bitstream
Control 
Unit
Comparison 
Unit
 
圖 7. 電路硬體架構最上層方塊圖 
                                                                                                      
Register Unit
DFFDFFDFF
DFFDFFDFF
DFFDFFDFF
ALU Unit
Mul_12
ADD
1
.
.
.
Control Unit
mux2
mux1
SUB_l
SUB_lt
Mul_2
Mul_1
SUB_t
SUB_t_b
SUB_l_b
SUB_lt_b
Comparison 
Unit
Control mux2
Golomb-Rice
Code
.
.
.
ADD
4
圖 8. 電路內部硬體架構 
表 3.硬體架構合成結果 
Specification 
Full-HD (1920x1080) @60 fps at clock rat of 125MHz 
Full-HD (1920x1080) @60 fps at clock rat of 62.5MHz 
Technology 
CIC IC Contest CMOS Process of Standard 0.13μm2 
CMOS1.3V core,3.3V I/O (General voltage 
specification) 
Logic Gates 17.13K 
Max. System Clock 125MHz 
Max. Processing Throughput 125Mpixels/sec 
Core Power 
 
125MHz 1.59 mW 
Consumption 62.5MHz 795.18 μW 
 
就不再送資料出去了，所以最後面顯示 XX。 
 這圖 9和圖 10為實現硬體後模擬出來的波形圖，波形圖頇要用 verdi這軟體開啟，波形
圖不僅能幫助我們清楚地了解資料的排程，還可以幫助我們對 verilog的除錯作檢測，所以輸
出波形圖對我們來說是很重要的。 
B. 硬體架構合成結果 
 所有演算法在 C語言的模擬幾乎都能實現，但是要都實現硬體卻不見得都可以做得出來，
所以實現硬體是作 IC設計的最難步驟之一。因為硬體要考慮的東西很多，首先要先知道這東
西可不可以合成，再來是考慮到面積、功率消耗、速度問題，不能太慢但是面積又不能太大，
要速度快面積就得變大，要面積小就會減低速度，功率消耗方面的話當然是越小越好，所以要
作到面積、功率消耗和速度這三項的平衡是非常困難的，所以實現硬體是作 IC設計的最難步
驟，除此之外還有許許多多的電氣特性要考慮到，所以我們現在就要把 AFLR的硬體數據呈現
出來做參考。 
 本計畫作了兩種頻率的電路模擬，分別為 125MHz和 62.5MHz。125M代表跑了 60張畫面，
則 62.5MHz跑了 30張畫面的電路模擬，我們作了這兩項模擬，結果為表 III所示。Technology
是製程的規格，本計畫使用的是 CIC教育競賽的製程，其製程為點 13 製程預計 I/O 為 3.3V，
Logic Gates也就是面積為 17.13K，最後分別作兩種頻率的功率消耗分析，各為 1.59mW 和
795.18μW，以上是模擬電路的數據。 
 面積對一個電路來說，佔其重要之首，因為面積關乎於成本問題，下一顆 IC都以上百萬
甚至千萬計，所以面積為最重要的因素之首。消耗功率對一個電路來說，也算是重要之一，期
消耗功率的大小可以判斷電路大小及好壞以及消耗能量的大小，現在地球所能利用的資源越來
越少，所以本計畫強調節能減碳，如果電路的功率消耗越小就能達到節能減碳以及省電省錢的
效果。速度的快與慢對一個電路來說也是很重要的一環。上面介紹的三項，面積、功率消耗與
速度都能考慮到而且都做到最好是不可能的，只能在這三個上面取到最佳化的平衡，就可以達
到作硬體的實際考量了。此硬體架構的效能規格可達 Full-HD，若在加入平行處理的方式
(Parallel Processing)，則執行效能可以進至 QFHD之規格。 
國科會補助計畫衍生研發成果推廣資料表
日期:2011/12/28
國科會補助計畫
計畫名稱: 適用於高畫質視訊編解碼系統之視訊再壓縮演算法及其硬體架構設計
計畫主持人: 李宇軒
計畫編號: 99-2218-E-155-012- 學門領域: 積體電路及系統設計
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
