2和線條輪廓），再以統計式學習方法得出每張臉形中最
重要的特徵組合。在比對時，計算輸入臉形和比對參考
臉形間特徵的距離差異或相似度大小。直接以一些合適
樣版來表示整個臉部，當物件結構是預先知道的，物件
大小、位置以及方向不需要固定，可變形樣版對於找出
或是表示影像中目標物件是一種有效技術，然而，如果
每一個預先儲存的影像樣版是由矩形所構成，則這種樣
版比起以三角形網格當成圖形結點，可變形的能力就會
被這種方格結構所限制。
雖然已經有很多人臉辨識的技術的提出，也有不錯
的結果，但強健(robust的人臉辨識還是不理想[20]，最
近的實驗顯示人臉辨識有兩個主要的挑戰：照明變化
(illumination variation)及臉部姿勢變化(pose variation)問
題。圖一顯示兩個人臉在不同照明下的影像這種因照明
改變所產生的差異會比個人臉上的變化來的大很多，而
造成系統的誤判。
有鑑於此，本計劃的目的在於提出一『具色彩空間
自動切換之人臉偵測與辨識系統』，適應性色彩空間切
換可在不穩定光源環境條件下，動態地選擇適當的色彩
空間模型。達到即時人臉偵測與人臉身份辨識的目的。
我們從影像資料庫擷取臉部影像並轉換至五種不
同的色彩空間，同時也使用Laws所提出的紋理分析方法
計算每張人臉影像的紋理特徵。每一個色彩空間分別使
用一個支援向量機(SVM)進行訓練，訓練資料包含色彩
空間及紋理特徵資訊。在前處理階段，使用離散小波轉
換對臉部影像作精煉及縮減維度來提升訓練資料的準
確性及運算效率。使用拔靴集成法(bootstrap)[7]對膚色
分佈的母體重新取樣獲得新的訓練資料，此方法達到統
計學上的一般性(generalization)並避免區域最小值(local
minimum)，也可避免訓練資料過度配適(over-fitting)的
問題，這類問題會造成分類器沒有推廣或預測的能力。
支援向量機器是由Cortes及Vapnik所提出[2]，其原理是
經由監督式學習以達成結構風險最小化(structural risk
minimization, SRM)並取得最佳的超平面，在核函數
(kernel function)方面，我們使用RBF核函數，將原始資
料映射到較高的維度空間以提升分類效能。我們亦提出
一個品質量測方法來評估臉部追蹤的效能，集合各個經
過訓練的支援向量機器，根據整體的分類結果適應性地
切換到最適當的色彩空間。我們希望藉由自動地選擇最
適當色彩空間的技術的發展，讓人臉在變動的環境下也
能正確地追蹤。而在人臉辨識中則採用RBF網路分
類，網路會記憶整張臉的特徵，針對每位受測者，
以不同角度拍攝三到五張的圖片，收集足夠的臉部
特徵，改善「不足夠的特徵點無法估計人臉結構」
的限制，實驗結果顯示，本系統能夠快速辨識人臉
，尋找所對應之身份。
二、研究目的
為了達到即時人臉偵測及人臉身份辨識的目的，本
系統具有下列三種特點：
1. 選擇適當的色彩空間：使用單一色彩空間沒有
足夠能力處理光線、環境的變化，而結合多個色彩空間
則需要維度簡化並找出重要的特徵維度。然而，這需要
大量的計算，為解決這個問題，我們提出適應性色彩空
間切換之人臉偵測子系統，使系統能根據環境自動的選
擇最適當的色彩空間。
2. 人臉膚色模型之建立：由於各種色彩空間的人
臉膚色分佈，無法由一般的線性分類器正確的分類，因
此，本系統建構一支援向量機委員會(support vector
committee machine, SVCM)，經由最佳化超平面分類，
及SVM於高維度空間具有良好分類能力的特性，建立不
同色彩空間的膚色分佈模型。
3. 即時人臉身份辨識：現今生活中的身份辨識系
統多半需要使用者執行輸入的動作，例如刷卡或輸入個
人密碼，此方法有可能遭盜用，也可能使用者需要記憶
多組密碼而錯誤，這些都是傳統認證模式的漏洞，造成
身份辨識上的盲點，若能結合人臉辨識，必定可使身份
確認有較高的安全性。
三、原理與分析
本計劃提出之系統主要分為二個部份，適應性色彩
空間切換之人臉偵測子系統和人臉辨識子系統。系統架
構如圖3所示。
適
應
性
色
彩
空
間
切
換
之
人
臉
偵
測
系
統
人
臉
辨
識
系
統
攝
影
機
畫
面
人
臉
身
份
圖3 系統架構
適應性色彩空間切換之人臉偵測子系統架構
由於單一支援向量機器經由訓練資料所獲得的支
援向量並不能保證其能正確地分類未知的測試資料，因
此，我們使用支援向量委員會機器來開發適應性色彩空
間切換演算法，結合數個支援向量機經由整合整體輸出
結果作為最後決定。我們提出的架構包含：離散小
波轉換 (discrete wavelet transform, DWT)、拔靴式
4理影像分別為L5E5、E5L5、S5E5、R5E5、
W5W5，如圖6所示。
 
 
 
 
 12-021-(Wave)5
14-64-1(Ripple)5
1-0201-(Spot)5
1202-1-(Edge)5
14641(Level)5





W
R
S
E
L
支援向量機委員會機器子系統 (SVCMS)：
支援向量機是屬於監督式學習的一種學
習機器，藉由最小風險函數來逼近實際函數
，經由統計學習理論找到VC dimension 的底
限並控制機器的推廣能力。經由bagging所得
到的輸入空間x 有7 個維度，包含色彩及紋
理資訊，且經由核函數 w (kernel function)
將輸入空間映射至高維度空間，藉由最小化
經驗風險 (empirical risk)函數來達成結構風
險函數最小化，經驗風險函數如下式。
 

N
i ii
emp fdN
R
1
),(
1
wx (1)
最佳化超平面的鑑別函數如下式所示。
)( o
T
o bg  xwx (2)
其中 ow 及 ob 分別為最佳化的權重向量及偏
移值。
我 們 的 目 的 在 於 使 用 一 組 訓 量 樣 本
  Niii d 1,  x 來找出最佳的超平面 (optimal
hyperplane)，此高維空間的超平面必需要符
合下列條件：
Nibd i
T
i ,...,2,1for1)( xw (3)
其中權重向量 w需使下式的成本函數 (cost
function)最小化
wwwΦ T
2
1)(  (4)
此具有限制條件的最佳化問題稱為原
始 問 題 (primal problem) ， 我 們 藉 由
Lagrangian函數，可將問題表示成primal form
如下：
  

N
i i
T
ii
T bdbJ
1
1)(
2
1
),,( xwwww  (5)
其中 i為Lagrangian multipliers，此具限制條
件 最 佳 化 問 題 的 解 於 Lagrangian 函 數
 ,,bwJ 的鞍點 (saddle point)，得下列兩個
最佳化條件


N
i iii
d
1
xw  (6)
 

N
i ii
da
1
0 (7)
由上面的條件，我們可以將primal form
重新表示成dual form 如下：
 
  

N
i
N
i
N
j
j
T
ijijii ddQ
1 1 12
1
)( xx (8)
此目標函數 (objective function)的解帶
有下列兩個限制



N
i
iid
1
0 (9)
N1,2,....,ifor0 i (10)
我們可解得最佳化權重向量 ow 及偏移
值 b 如下：



N
i
iiioo d
1
, xw  (11)
1|1 )()(  ssToo dforxwb (12)
臉部偵測
我們選用 P.Viola等學者 [7]所提出的臉
部偵測方法，其使用類似Haar基底的特徵，
此類特徵具有正交的特性，不僅能快速的計
算而且也具有低錯誤率的特性，此方法有以
下三個特點：
1.簡單且快速的特徵
使用簡單且有效的特徵，讓計算不致太
複雜，以達到即時偵測、追蹤，下圖所示為
本系統所使用的特徵，因為我們可以快速又
有效率的計算出臉部的特徵。如圖7所示。
圖7 臉部的特徵
2.使用adaboost 特徵選擇
由 於 特 徵 數 量 龐 大 ， 所 以 我 們 使 用
adaboost 來選擇特徵，經由賦予每種特徵權
重，在每次分類後其更新權重。此方法的優
點是，把問題切割成數個子問題，並且把焦
點放在分類錯誤的問題特徵上，如此可更有
效率的把問題解決。
3.串接式分類器
每一個分類器都是經由 adaboost訓練所
得到的，且設定不同閥值，每一層分類器排
除某些非人臉的樣本，而愈後面的分類器只
需對少部份的樣本分類，但相對的其門檻值
較高，也就是說，只要為 false則不會送到下
6)(
2
1
)( 2nenJ  (19)
最後， )(nJ 若小於0.1，表示網路收斂，並
停止訓練；反之，則透過下式更新網路的weight
、center、和sigma：
2
3
2
)()(},),({
)(
)()(
)()1(
)]()(}[,),({
)(
)()(
)()1(
)()()()1(
ncnxcnx
n
nwne
nn
ncnxcnx
n
nwne
ncnc
nnenwnw
kkk
k
k
kk
kkk
k
k
c
kk
w














(20)
其中     TNNcnxcnxn  ,,,...,,,,)( 11 ， w、 c
、 各為weight、center、sigma的learning rate，
預設值 1.0w 、 1.0c 和 1.0 。
四、實驗結果與比較
本計劃使用Borland C++ Builder來撰寫
相關的程式碼，系統硬體環境為Pentium 4
3.2GHz，系統記憶體為512M。系統目標在於
即時偵測人臉位置並辨識影像中人臉的身份
。將攝影機所擷取到的人臉與資料庫中的人
臉進行比對。藉由攝影機所擷取到的彩色人
臉影像，經過系統的比對之後，便能夠辨識
出攝影機人臉的身份。如圖11所示，系統可
即時偵測人臉區域，並擷取出人臉部份，再
進一步與事先登錄之合法使用者的人臉進行
比對，如為合法使用者，則會顯示識別成功
之人臉及身分。
圖11 系統介面
為了評估本系統的強健性與效能，我們
執行了兩個實驗：(1)人臉偵測色彩空間轉換
測試； (2)人臉辨識：
(1) 人臉偵測色彩空間轉換
本實驗在室內安排了一個背景複雜的環
境，有兩個光源，天花板上的日光燈用來提
供穩定的光源，書桌上可調整明亮的檯燈則
是用來模擬光源的變化。即時影片中有個人
坐在書桌前，在第二十個Frame時，將檯燈
轉強，而到第三十個Frame時，再將桌燈調
暗，此時，人臉變得較暗，最後，在第四十
個Frame時將桌燈調為較柔合的光線，而日
光燈不做任何變化。圖12(a-e)為影片中特定
畫框 (frame) 的影像，圖12(f-j)為CbCr色彩
空間所偵測到的人臉區域，圖12(k-o)則是色
彩空間切換所偵測到的人臉區域。
很明顯，在光源的變動下，這些人臉都
可以清楚的被追從，然而單一色彩空間，也
就是CbCr空間中二值化的人臉影像是較為
破碎的，尤其在於人臉膚色因光線不足而導
致變暗時，人臉影像將破碎的更為明顯；但
在本系統中，不管在任何複雜背景下，二值
化的人臉影像依然是非常完整的。也由此證
明了具有色彩空間切換所偵測到的人臉區域
比不具有色彩空間切換所得到的人臉區域有
較佳的偵測品質。。
表一顯示具有多個色彩空間切換與在單
一色彩空間下對於人臉偵測的平均效率、正
確性與靈敏度上的比較，我們可以清楚的知
道不管在任何一方面，具有色彩空間切換的
系統皆比單一色彩空間系統來得好。
圖 13 顯示 影片 中 的人臉 影 像在 不 同
Frame中效能的比較，我們不難發現，在前
十個Frame中，以xy的色彩空間的效能較好
，而在第二十個Frame時，則是CbCr的色彩
空間的效能較佳，最後到了第四十個和第五
十個Frame中，HS的色彩空間的效能較高。
因此，在前十個Frame中，本系統將自動切
換到xy的色彩空間，而在第二十個Frame時
，系統也將會切換到CbCr的色彩空間，最後
到了第四十個和第五十個Frame，又將切換
到HS的色彩空間了。
(2) 人臉辨識
在本實驗中，我們建立了 12 位合法使用
者，每個人拍攝五張不同角度的人臉影像，
並將人臉影像降維成 168 ，作為 RBF 網路
訓練的輸入。圖 16 顯示合法使用者的正面人
臉影像。
而為了測試本系統的辨識率，我們使用
了二十位受測者的人臉影像，其中十位為合
法的使用者，另外十位為非法的使用者，每
位受測者取 5 張人臉影像做為測試影像，圖
14 為合法使用者辨識率，圖 15 為辨識為非
法使用者的成功率。平均辨識率約為 80%，
辨識率的提升為第二年計畫的主要目標，對
此，本計畫未來將擷取更有效的人臉特徵，
作為人臉辨識的依據。
此外，為了測試本系統的辨識能力，本
實驗並以各種不同情況，例如：講手機、抿
嘴、做鬼臉、沒帶眼鏡、歪頭、笑等人臉進
行辨識。實驗結果如圖15所示，本系統仍然
可正確的辨識這些人臉的身分。
即時人臉偵測
擷取人臉
人臉辨識
