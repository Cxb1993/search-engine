a VSN architecture to collect and measure air quality 
for microclimate monitoring in city areas. 
英文關鍵詞： Burglarproof, IEEE 802.15.4, Surveillance, Vehicular 
Sensor Network, Vehicle Tracking, Dedicated Short 
Range Communications, License Plate Recognition, 
Vehicular Surveillance Network, Vehicle Tracking, 
Wireless Access in Vehicular Environments Micro-
climate monitoring, Opportunistic communication, 
Pervasive computing, Vehicular sensor network, 
Wireless sensor network 
 
2 
 
摘要 
 隨著無線通訊與嵌入式微感知機電裝置(MEMS)技術的快速發展，在行車環境利用無線通
訊技術來發展車載感測網路(Vehicular Sensor Network , VSN)已成為可能。一般車載感測網
路是由數個被裝載在車輛上的感測裝置，用來收集環境資訊或利用已偵測的資料來達成特
定目的，例如: 車輛追蹤、防碰撞系統、環境監測、行動監控、以及車載安全等。因此，
在第一年裡，本計畫開發一個新型車載監視與感測系統，整合各式感測裝置技術、無線通
訊技術與車間通訊功能，以達成車載安全與車輛追蹤的目的。在第二年的計畫執行中，我
們提出了在道路上的每台車輛均配備了影像攝影機並結合車牌辨識技術來識別可疑車輛
(例如贓車)，以及利用車載無線通訊介面與車間通訊方式來協同追蹤可疑車輛和快速回報
此發現給附近的警車。在第三年計畫裡，我們提出了一個VSN的網路架構，利用移動性的
車輛在微環境下來蒐集空氣的品質(micro-climate monitoring) 。 
 
 
 
 
 
 
 
 
 
 
 
 
關鍵字：汽車防盜、IEEE 802.15.4、監視系統、車載感測網路、車輛追蹤、特定短
距通訊、車牌辨識、車載監控網路、車載追蹤、車載無線存取微環境偵測、機會式通訊、
滲透式通訊、車載感測網路、無線感測網路 
 
4 
 
目錄 
一、前言…………………………………………………………………………………7 
二、研究目的…………………………………………………………………………......8 
三、研究方法…………………………………………………………………….………11 
四、研究成果實驗……………………………………………………………………….18 
五、結論與未來規劃…………………………………………………………………..…24 
六、計畫成果自評………………………………………………………..………………25 
七、參考文獻………………………………………………………..……..…………….26 
 
 
附錄：相關發表論文 
1. L.-W. Chen, K.-Z. Syue, and Y.-C. Tseng, “VS3: A Vehicular Surveillance and Sensing 
System for Security Applications”, The 6th IEEE International Conference on Mobile Ad Hoc 
and Sensor Systems (MASS 2009), Oct. 12-15, 2009. (Receipt of Outstanding Demo Award) 
2. S.-C. Hu, Y.-C. Wang, C.-Y. Huang, and Y.-C. Tseng, “A Vehicular Wireless Sensor 
Network for CO2 Monitoring”, The 8th Annual IEEE Conference on Sensors (Sensors 2009), 
Oct. 25-28, 2009. 
3. L.-W. Chen, K.-Z. Syue, and Y.-C. Tseng, “A Vehicular Surveillance and Sensing System 
for Car Security and Tracking Applications”, The 9th ACM/IEEE International Conference on 
Information Processing in Sensor Networks (IPSN 2010), Apr. 12-16, 2010. 
4. L.-W. Chen, K.-Z. Syue, and Y.-C. Tseng, “An Implementation of a Vehicular Surveillance 
and Sensing System for Car Security Applications”, The 3rd IEEE International Symposium 
on Wireless Vehicular Communications Joint Telematics Workshop (in conjunction with VTC 
2010-Spring), May 16-17, 2010. 
5. L.-W. Chen, Y.-H. Peng, Y.-C. Tseng, and D.-C. Chang, “雙層式長鏈狀車載網路之高效
率資料收集與散佈機制”, The 6th Workshop on Wireless, Ad Hoc, and Sensor Networks 
(WASN 2010), Sept. 2-3, 2010. (Recipient of Best Paper Award) 
6 
 
獲獎資料: 
1. Recipient of Outstanding Demo Award in the 6th IEEE International Conference on Mobile 
Ad-hoc and Sensor Systems, 2009. (IEEE MASS 2009 傑出展示獎) 
2. Recipient of Best Paper Award in the 6th Workshop on Wireless, Ad Hoc, and Sensor 
Networks, 2010. (WASN 2010 最佳論文獎) 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
8 
 
 
二、 研究目的 
第一年計畫: 
我們設計了一個新型車載監視與感測系統，其可以達成車載安全與車輛追蹤之目的，
針對這樣的目的，我們把系統分成兩大模式，一為安全模式，另一為追蹤模式，對於安
全模式，我們利用目前的 3G/3.5G行動通訊技術來監測與接收車輛上嵌入式系統的資
訊；對於追蹤模式，我們利用車牌辨識系統與WAVE/DSRC技術來持續追蹤可疑車輛，
並回報給相關部門。針對以上所提的兩種模式，以下是其個別分析簡述: 
1. 安全模式：在我們的設計規劃裡，當使用者停下車輛時，將會啟動此模式。對於
車內安全的應用，要發展一個監控與感測系統，一般傳統的車輛保護，通常會仰賴路邊的
攝影機來做影像記錄，對於這樣的設計，會存在兩個問題，第一，要識別目標車輛，需要
從大量的候選資料做篩選，這將造成很大的工作負荷。第二，因為目標車輛不是事先已知，
而且記錄的影像資訊又往往不夠清晰。更進一步，眾多的影像資訊，需要大量的人工勞力
來過濾與查詢。對此，我們提出一個以 3G/3.5G加強功能的VSN，稱為車載監視與感測系
統(Vehicular Surveillance and Sensing System, VS3)，在使用者端，僅需要一個 3G/3.5G行動
電話，在車輛端，要裝載CO2感測裝置、影像攝影機、3G/3.5G通訊模組和嵌入式系統開發
板。在嵌入式系統開發板上，其主要是請求命令與溝通協調各模組，VS3主要提供以下特色: 
(1) event-driven模式，主要的事件來自於各模組偵測異常。 
(2) 事件分為異常CO2空氣品質、車載防盜、異常聲音偵測。 
(3) 支援文字或多媒體的互動。 
僅當定義之異常事件發生時，影像攝影機將會被驅動來拍照或影像記錄，因此，當
沒有事件發生時，VS3可以避免不必要的影像記錄，而增進圖片/影像品質。對於應用場
景包含了異常CO2偵測、車載防盜、異常聲音偵測，可用來驅動短簡訊服務(SMS)、多媒
體簡訊(MMS)或是互動式影像電話給車主。所以，VS3描述了一個新的車載安全與車載
竊盜的模板。 
10 
 
助的。由上述前言我們可以進而推出一個構想，就是利用車載網路來監控市區內二氧化碳
的濃度。在下面的報告裡，我們利用了一個微環境偵測的架構(micro-climate monitoring)， 也
就是說把要偵測的大範圍切成一些小區域，蒐集小範圍的二氧化碳，進而推估大範圍的二
氧化碳濃度。我們希望解決下面兩項問題： 
1. 如何適當的調整車子的資料回報率(reporting rates)，以減少網路的流量。 
2. 如何有效的利用動態式通訊(opportunistic communication)來減少通訊的負載。 
 
我們提出了兩個演算法分別來解決上述的問題。 
1. 為了要解決車子回報率的問題，首先，把要蒐集二氧化碳的區域(例如:新竹市)切成許
多的小方格(grid)，每塊小方格(grid)裡的車輛都要把二氧化碳濃度回報給伺服器。此種
演算法就是要推估每塊小方格裡面每台車輛的資料回報率(reporting rates)。 
2. 由於車輛的移動具有隨機性，當一台車輛從一個小方格移動到另外一個小方格，如何
獲取當地的資料回報率？也因此我們提出了另外一個演算法來解決這個問題。 
 
 
 
 
 
 
 
 
 
 
12 
 
 
第二年計畫:(概述) 
 
 
 
圖二、可疑車輛追蹤模組與回報模組 
如圖二所示，我們針對可疑車輛追蹤與回報問題提出一個由Tracking Module和Reporting 
Module所構成的Infrastructure-less Framework，在Tracking Module方面，我們設計了Tracking 
Handoff機制和Intersection Detection 機制來持續追蹤vs；在Reporting Module方面，我們設
計了Rebroadcast Decision機制、Intersection-guiding Search機制、以及Memory-based Backoff
機制來有效率地傳送mr至附近的警車vp。 
 
 
 
 
 
 
14 
 
形成無線隨意網路(Ad hoc Network) ，這樣可以增加機會式通訊的效能。然而，每台車可
以藉由可以蒐集鄰近車輛的資訊，再把資訊傳送給二氧化碳監控中心。 
在下一個部份的核心演算法，分成DRR(Dynamic reporting rates)和TOR(time-constraint 
opportunistic relay)兩部分來介紹。下面先介紹此演算法的動機。 
 DRR(Dynamic reporting rates)：如果要預測一個都市的二氧化碳濃度，除了考慮二氧
化碳的分布之外，還必須考慮各區域的車子密度，因為車輛會隨著時間而有所變動。
DRR演算法就是要在每個小方格(grid)裡去預測此區域的資料回報率(Reporting rates) 。 
 TOR(time-constraint opportunistic relay) ：當一台車從原本的方格G1移動到另外一個
方格G2時，這台車可以幫忙G2裡面的車輛傳送資料，此時就可以降低G2方格裡的資料
回報率。 
由於二氧化碳的分布和變動是動態的，如果要精確的預估二氧化碳濃度，除了根據過去
的數據資料來做參考還必須考慮下列兩點。 
1. 當地區域的二氧化碳濃度。 
2. 當地區域的車輛數。 
下面部分開始介紹核心演算法。 
 DRR(Dynamic reporting rates)： 
DRR演算法主是要用來預估二氧化碳資料的回報率。首先，如果要預測一個大區域的
二氧化碳濃度，先把此大區域切成許多小的區域(圖四) 。為了要準確的預測資料回報
率，DRR又可再細分為兩種。 
 Variation-based scheme：以模擬情境圖(圖四)的範例來看，座標(2,4)和座標(2,5)
二氧化碳濃度偏高，因此，此地區的資料回報率會偏高；座標(1,5)和座標(2,6)的
二氧化碳濃度偏低，因此，此地區的資料回報率會偏低。所以我們提出了一個數
學式子，來推估該區域的資料回報量。 
16 
 
 Gradient-based scheme：上述的數學式子並沒有考慮到單位距離二氧化碳濃度的
變化量。假設有兩台車。他們之間距離很近，但是他們所在位置的二氧化碳濃度
差異很大，所以這兩台車的之間單位濃度變化量很大，這是一個非常重要的資訊。
因此我們提出另外一個利用梯度(gradient)的公式。 
首先，算出任意X和Y兩點的斜率(單位距離濃度的變化) ，公式如下：  
α(X,Y )=X-Y/dist(X,Y) 
再來，推算出斜率總和，Rhigh 和Rlow代表收集到高濃度和低濃度的車輛數： 
αavgi  =Σx∈Rhigh,，y∈Rlow  α(X,Y) / Rhigh×Rlow 
接下來，再用Variation-based scheme的公式重新計算每輛車的回報量： 
rigra= Sigra/ Vi 
Sigra = aigra ×αgrai +bgrai 
 
 
 TOR(time-constraint opportunistic relay) ：當一輛車子原本的小方格G1移動到另外一
個小方格G2時，可以藉由機會式通訊(opportunistic communication)來幫助G2內的車輛
傳送資料。也因此，我們定義了下面的演算法。 
1. 首先，當車輛X進入新的方格G2時，會定期廣播一個封包(HELLO Packet) 。這個
封包括目前的方格ID還有一個attx (attraction value)數值。 
attx =rndx ×wgtx 
rndx：0~1的隨機亂數 
wgtx：代表此節點需要傳到伺服器的資料量 
18 
 
四、 研究成果和實驗 
在第一年的研究成果裡，我們實做了VS3裝置間的模組區塊橋接介面(圖五)。微處理器在
VS3裝置是採用ARM9開發板(Mini2440)，配有 3.5” TFT LCD、一個 400MHz 32-bit RISC處
理器(ARM920T)、64MB SDRAM、64MB Nand Flash、2MB Nor Flash用於BIOS、三組序列
傳輸阜、10/100M Ethernet RJ-45，Mini2440(圖六)可以執行embedded Linux和WinCE發展各
式應用。 
 
圖五. VS3模組區塊橋接介面 
 
圖六. Mini2440開發板硬體圖 
 
 
20 
 
 
圖八. 平均回報延遲時間比較 
 
 
  在第三年研究成果裡，我們實做了一個偵測二氧化碳的硬體裝置(圖九)，圖的左方是監測
二氧化碳的板子，圖的右方是External unit和Central unit的裝置。圖十則是這篇論文的封包
傳輸格式。在模擬實驗方面，我們用C++和Matlab來驗證結果。表二是模擬參數，在模擬實
驗裡，假設每傳出去一個資料花費一塊錢。由圖十一我們可以發現Variation-based scheme
平均的花費會比Gradient-based scheme高，這是因為Gradient-based scheme有考慮到單位長度
的濃度變化，所以所花費會比較低一點。而在預估誤差方面，兩者則是差不多。圖十二我
們可以發現Variation-based scheme平均的花費會比Gradient-based scheme高，這是因為
Gradient-based scheme有考慮到單位長度的濃度變化，所以所花費會比較低一點。而在預估
誤差方面，兩者則是差不多。 
22 
 
 
圖十. 封包傳輸格式 
 
 
 
圖十一. GSM的花費和車輛數以及預估誤差率和車輛數的模擬圖 
 
 
 
 
24 
 
五、 結論與未來規劃 
在第一年的計畫成果中，我們已開發了新型車載監視與感測系統，並以其為基
礎發展了車載安全應用、車載防盜應用、以及車輛追蹤應用。在第二年度的計畫執行
中，我們藉由車間通訊技術設計出一個無需搭配基礎建設的車載網路追蹤機制，其中包
含追蹤換手(Tracking Handoff Scheme)、路口偵測(Intersection Detection Scheme)、決定重
廣播設計(Rebroadcast Decision Scheme)、路口導引搜尋設計(Intersection-Guiding Search 
Scheme)和記憶式 backoff設計(Memory-Based Backoff Scheme)。在這些機制的運作下，
可以充分地減少網路上控制封包的負荷量和不必要的重廣播封包量。在第三年的計畫
裡，我們把二氧化碳的硬體裝置實做出來，並且利用車輛的移動性和隨機性來蒐集二氧
化碳濃度。先針對小區域的環境來回報，進而推估整個大區域的濃度。我們並且針對 VSN
提出了一個新的網路架構來做傳輸。為了考慮網路的傳輸量和車輛的移動性，我們也提
出了新的數學式子來做效能評比和做改善。最後，透過模擬來驗證我們的演算法。在三
年計畫執行期間，我們得到以下的成果：國內外會議與國際期刊論文發表 14篇以及學術
獎項 2件，未來我們將朝向實務系統和標準開發規劃。 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
26 
 
七、參考文獻 
[1] Allred, J., Hasan, A.B., Panichsakul, S., Pisano, W., Gray, P., Huang, J., Han, R., Lawrence, 
D., Mohseni, K., 2007. Sensorflock: an airborne wireless sensor network of microair 
vehicles. In: Proc. ACM International Conference on Embedded Networked Sensor 
Systems , pp. 117–129. 
 
[2] Bai, F., Sadagopan, N., Helmy, A., 2003. Important: a framework to systematically analyze 
the impact of mobility on performance of routing protocols for adhoc networks. In: 
INFOCOM 2003. Twenty-Second Annual Joint Conference of the IEEE Computer and 
Communications. IEEE Societies, vol. 2 , pp. 825–835. 
 
[3] Cao, G., Kesidis, G., Porta, T.L., Yao, B., Phoha, S., 2006. Purposeful mobility in tactical 
sensor networks. Sensor Network Operations. 
 
[4] Chebrolu, K., Raman, B., Mishra, N., Valiveti, P.K., Kumar, R., 2007. Luster: wireless 
sensor network for environmental research. In: Proc. ACM International Conference on 
Embedded Networked Sensor Systems , pp. 103–116. 
 
[5] Chebrolu, K., Raman, B., Mishra, N., Valiveti, P.K., Kumar, R., 2008. Brimon: a sensor 
network system for railway bridge monitoring. In: Proc. ACM International Conference on 
Mobile systems, Applications, and Services , pp. 2–14. 
 
[6] Eisenman, S.B., Miluzzo, E., Lane, N.D., Peterson, R.A., Ahn, G.S., Campbell, A.T., 2009. 
Bikenet: a mobile sensing system for cyclist experience mapping. ACM Transactions on 
Sensor Networks 6, 6:1–6:39. 
 
[7] Google Maps, 2010. http://maps.google.com/. 
 
[8] Gopakumar, A., Jocob, L., January 2008. Localization in wireless sensor networks using 
particle swarm optimization. In: IET International Conference on Wireless, Mobile and 
Multimedia Networks , pp. 227–230. 
 
[9] H-550EV module, 2008. http://www.elti.co.kr/. 
 
[10] He, T., Krishnamurthy, S., Stankovic, J.A., Abdelzaher, T., Luo, L., Stoleru, R., Yan, T., Gu, 
L., Zhou, G., Hui, J., Krogh, B., 2006. VigilNet: an integrated sensor network system for 
energy-efficient surveillance. ACM Transactions on Sensor Networks 2 (1), 1–38. 
 
[11] Hull, B., Bychkovsky, V., Zhang, Y., Chen, K., Goraczko, M., Miu, A., Shih, E., 
Balakrishnan, H., Madden, S., 2006. Cartel: a distributed mobile sensor computing system. 
28 
 
monitoring. In: EURASIP Journal on Applied Signal Processing, vol. 2003, pp. 392–401. 
 
[23] Wang, Y.C., Wu, F.J., Tseng, Y.C., 2010. Mobility management algorithms and applications 
for mobile sensor networks. Wireless Commununications and Mobile Computing. 
 
[24] Werner-Allen, G., Johnson, J., Ruiz, M., Lees, J., Welsh, M., 2005. Monitoring volcanic 
eruptions with a wireless sensor network. In: Proc. European Workshop on Wireless Sensor 
Networks , pp. 108–120. Werner-Allen, G., Lorincz, K., Ruiz, M., Marcillo, O., Johnson, J., 
Lees, J., Welsh, M., 2006. Deploying a wireless sensor network on an active volcano. IEEE 
Internet Computing 10, 18–25. 
 
[25] Xu, N., Rangwala, S., Chintalapudi, K.K., Ganesan, D., Broad, A., Govindan, R., Estrin, 
D., 2004. A wireless sensor network for structural monitoring. In: Proc. ACM. 
 
[26] ARM, ARM920T. http://www.arm.com/products/CPUs/ARM920T.html. 
 
[27] C. Sharp, S. Schaffert, A. Woo, N. Sastry, C. Karlof, S. Sastry, and D. Culler. Design and 
implementation of a sensor network system for vehicle tracking and autonomous 
interception. In Proceeedings of the Second European Workshop on Wireless Sensor 
Networks, pages 93–107, 2005. 
 
[28] D. Djenouri. Preventing vehicle crashes through a wireless vehicular sensor network. In 24th 
Biennial Symposium on Communications, pages 320–323, June 2008. 
 
[29] FriendlyARM, Mini2440. http://www.friendlyarm.net. 
 
[30] H-550EV CO2 Sensor Module.  
http://www.co2sensor.co.kr/new/eng/ndirco2-sensor-module-h550ev.htm. 
[31] Jennic, JN5139. http://www.jennic.com. 
 
[32] Y.-C. Tseng, Y.-C. Wang, K.-Y. Cheng, and Y.-Y. Hsieh. iMouse: An integrated mobile 
surveillance and wireless sensor system. IEEE Computer, 40(6):60–66, 2007. 
 
[33] IEEE std. 802.11p/D4.0, Draft Amendment for Wireless Access in Vehicular 
Environments (WAVE). Mar. 2008. 
 
[34]  K. G. Aravind, T. Chakravarty, M. G. Chandra, and P. Balamuralidhar. On the architecture 
of vehicle tracking system using wireless sensor devices. In International Conference on 
Ultra Modern Telecommunications & Workshops (ICUMT 2009), pages 1–5, Oct. 2009. 
 
30 
 
2009), pp. 1–5, Apr. 2009. 
 
[46] R. Lu, X. Lin, H. Zhu, and X. Shen, “SPARK: A New VANET-Based Smart Park- ing 
Scheme for Large Parking Lots,”  in The 28th IEEE Conference on Computer 
Communications (IEEE INFOCOM 2009), pp. 1413–1421, Apr. 2009. 
 
[47] M. Li, H. Zhu, Y. Zhu, and L. M. Ni, “ANTS: Efficient Vehicle Locating Based on Ant 
Search in ShanghaiGrid,” IEEE Transactions on Vehicular Technology, vol. 58, no. 8, pp. 
4088–4097, Oct. 2009. 
 
[48] M. Li, M.-Y. Wu, Y. Li, “ShanghaiGrid: An Information Service Grid,” Concurrency and 
Computation: Practice and Experience, vol. 18, pp. 111–135, 2006. 
 
[49] IEEE std, “802.11p/D4.0, Draft Amendment for Wireless Access in Vehicular Environments 
(WAVE),” Mar. 2008. 
 
[50] IEEE P1609.4/D6.0. Draft Standard for Wireless Access in Vehicular Environments (WAVE) 
- Multi-channel Operation. Mar. 2010. 
 
[51] L.-W. Chen, Y.-H. Peng, and Y.-C. Tseng. “An Infrastructure-less Framework for Preventing 
Rear-End Collisions by Vehicular Sensor Networks.” IEEE Communications Letters, vol. 15, 
no. 3, pp. 358-360, Mar. 2011. 
 
[52] QualNet, http://www.scalable-networks.com/products/qualnet/. 
 
[53] FriendlyARM, Mini2440, http://www.friendlyarm.net. 
 
[54] ARM, ARM920T, http://www.arm.com/products/CPUs/ARM920T.html. 
 
[55] H-550EV CO2 Sensor Module, http://www.co2sensor.co.kr/new/eng/ndir-co2- 
sensor-module-h550ev.htm. 
 
[56] S. Biswas, R. Tatchikou, and F. Dion, “Vehicle-to-Vehicle Wireless Communication 
Protocols for Enhancing Highway Traffic Safety,” IEEE Communications Magazine, vol. 44, 
no. 1, pp. 74–82, Jan. 2006. 
 
[57] Jennic, JN5139, http://www.jennic.com. 
 
[58] Fastrax, uPatch300, http://www.fastrax.fi. 
 
[59] National Marine Electronics Association, http://www.nmea.org/. 
VS3: A Vehicular Surveillance and Sensing
System for Security Applications
Lien-Wu Chen†‡, Kun-Ze Syue†, and Yu-Chee Tseng†
†Department of Computer Science, National Chiao-Tung University,
Hsin-Chu, 300, Taiwan
‡Information and Communications Research Labs, Industrial Technology Research Institute,
Chu-Tung, Hsin-Chu, 310, Taiwan
Abstract—The Vehicular Surveillance and Sensing System (VS3)
is a 3G-based mobile device for car security applications. On
the car side, it consists of a CO2 sensor, a camera module, a
3G module, and a microprocessor. On the user side, only a 3G
mobile phone is needed. VS3 provides the following features:
(i) it can be triggered by events detected on car, (ii) events
can be abnormal air quality or potential burglary, and (iii) it
supports text or multimedia interaction with users. Application
scenarios include detecting an abnormal CO2 level or potential
car burglary, which triggers VS3 to transmit SMS, MMS, or
interactive video call to the vehicle owner, who can then monitor
the car situation in return. VS3 thus demonstrates a new car
security and burglarproof prototype.
Keywords: Burglarproof, IEEE 802.15.4, Surveillance, Ve-
hicular Sensor Network, Wireless Network.
I. INTRODUCTION
The rapid progress of embedded micro-sensing MEMS
and wireless communication technologies has made vehicular
sensor networks (VSNs) possible. A VSN normally consists of
a number of sensors placed on a vehicle to collect environment
data and utilizes these sensed data for various purposes. Ex-
amples include vehicle tracking, crash prevention, and mobile
surveillance [2], [3], [7].
In this work, we are interested in taking advantage of the
current 3G or 3.5G mobile systems to enrich user interaction
in a VSN. Our goal is to develop a surveillance and sensing
system for car security applications. Traditional surveillance
systems for vehicle protection rely on roadside cameras for
video recording. There are two problems associated with such
solutions. First, it requires huge efforts to distinguish targets
from many other candidates. Second, since targets are not
predefined, the recorded images are usually not clear enough.
Further, the volume of videos could be huge, thus requiring a
lot of labors.
We propose a 3G-enhanced VSN called vehicular surveil-
lance and sensing system (VS3). Only a 3G mobile phone
is needed on the user side, whereas an integrated device
with a CO2 sensor, a camera module, a 3G module, and a
Y.-C. Tseng’s research is co-sponsored by MoE ATU Plan, by NSC grants
96-2218-E-009-004, 97-3114-E-009-001, 97-2221-E-009-142-MY3, and 98-
2219-E-009-005, by MOEA 98-EC-17-A-02-S2-0048 and 98-EC-17-A-19-
S2-0052, and by ITRI, Taiwan.
Fig. 1. System architecture of VS3.
microprocessor is need on the car side. The microprocessor
is responsible for issuing commands and coordinating with
other modules. VS3 provides the following features: (i) it
can be triggered by events detected on car, (ii) events can
be abnormal air quality or potential burglary, and (iii) it
supports text or multimedia interaction with users. Only when
an event is dectected, the camera module is activated to
capture images or record videos of that event. Thus, VS3 can
avoid recording unnecessary videos when nothing happens and
improving image/video quality. Application scenarios include
detecting an abnormal CO2 level or potential car burglary,
which triggers VS3 to transmit SMS (short message service),
MMS (multimedia message service), or interactive video call
to the vehicle owner, who can then monitor the car situation
in return. VS3 thus demonstrates a new car security and
burglarproof prototype.
II. SYSTEM ARCHITECTURE
Fig. 1 shows the VS3 architecture. On the car side, it
consists of a CO2 sensor, a camera module, a 3G module,
and a microprocessor. On the user side, only a 3G mobile
phone is needed. To illustrate how VS3 works, we demonstrate
a car security and a car burglarproof applications below. In978-1-4244-5113-5/09/$25.00 c©2009 IEEE
Fig. 7. H-550EV CO2 sensor integrated with JN5139.
Fig. 8. Wavecom Q2403A module.
III. IMPLEMENTATION DETAILS
Fig. 5 shows the building blocks of the car unit. The
microprocessor in the car unit is an ARM9 board (Mini2440
[4]) with a 3.5” TFT LCD as shown in Fig. 6, which has
a 400MHz 32-bit RISC integer processor (ARM920T [1]),
64MB SDRAM, 64MB Nand Flash, 2MB Nor Flash with
BIOS, three serial ports, and a 10/100M Ethernet RJ-45. In
particular, Mini2440 can run embedded Linux and WinCE to
develop diverse applications.
The CO2 module has an H-550EV CO2 sensor [5] integrated
with Jennic JN5139 [6], which is mounted to Mini2440 via
an UART interface. Our prototype is shown in Fig. 7. The
CO2 sensor module has 0∼5,000ppm measurement range and
±30ppm accuracy. JN5139 has a 16MIPs 32-bit RISC proces-
sor, a 2.4GHz IEEE 802.15.4-compliant transceiver, 192kB of
ROM, and 96kB of RAM. In particular, JN5139 allows the
flexibility of supporting mesh networking and packet routing
inside a vehicle.
The 3G module is currently implemented by a Wavecom
Q2403A GSM/GPRS/CDMA module as shown in Fig. 8,
which is controlled by Mini2440 via AT commands. It per-
Fig. 9. CAM130 camera module.
forms SMS, MMS, and video calls as instructed by the ARM9
board.
The camera module is implemented by CAM130 as shown
in Fig. 9. It is a CMOS optical sensor. Mini2440 can send
a snapshot (record) command to CAM130. In return, a full-
resolution, single-frame still picture (video) will be transferred
to Mini2440 through the serial port.
In the CO2 monitoring application, the concentration thresh-
old is set to 1500ppm. We use AT commands to trigger the
3G module to send short messages. The car owner can return
a short message with a specific command to ask the ARM9
board to initiate a video call back.
In the burglarproof application, besides a warning short
message, a video clip is sent to the car owner as a multimedia
message. The clip can be provided to polices as evidence in
the future when needed.
IV. CONCLUSION
VS3 integrates 3G communication and CO2 sensing into
surveillance technologies to support intelligent car security
applications. The vehicle owner can be informed immediately
as unusual events are detected on car. At the same time, the
owner can remotely monitor the situation inside vehicle and
then take proper actions if necessary. VS3 can prevent vehicles
form burglar or keep evidences to catch the thief. Furthermore,
The baby or animal forgetfully left in the vehicle can be
rescued in time by the assistance of VS3. The future extension
of VS3 could be equipped more various sensors and form a
VS3 network to investigate cooperation issues and develop
novel applications.
REFERENCES
[1] ARM, ARM920T. http://www.arm.com/products/CPUs/ARM920T.html.
[2] C. Sharp, S. Schaffert, A. Woo, N. Sastry, C. Karlof, S. Sastry, and D.
Culler. Design and implementation of a sensor network system for vehicle
tracking and autonomous interception. In Proceeedings of the Second
European Workshop on Wireless Sensor Networks, pages 93–107, 2005.
[3] D. Djenouri. Preventing vehicle crashes through a wireless vehicular
sensor network. In 24th Biennial Symposium on Communications, pages
320–323, June 2008.
[4] FriendlyARM, Mini2440. http://www.friendlyarm.net.
[5] H-550EV CO2 Sensor Module. http://www.co2sensor.co.kr/new/eng/ndir-
co2-sensor-module-h550ev.htm.
[6] Jennic, JN5139. http://www.jennic.com.
[7] Y.-C. Tseng, Y.-C. Wang, K.-Y. Cheng, and Y.-Y. Hsieh. iMouse:
An integrated mobile surveillance and wireless sensor system. IEEE
Computer, 40(6):60–66, 2007.
GSM
networks
monitoring server
non-sensing vehicle
sensing vehicle
GSM
base station
wireless 
link
GSM
module
CO2
sensor
Jennic
SMS
GPS
receiver
Jennic
Fig. 1. The proposed VSN architecture for micro-climate monitoring.
We adopt GSM short message service since it is a mature
technology. It can be easily extended to 3G or 3.5G technolo-
gies. Since sending short messages incurs charges, we need
an adaptive approach to adjust sensors’ reporting rates. The
basic idea is to partition the monitoring area into grids. Each
grid has its own reporting rate according to the variance of
CO2 concentration and vehicle density in that grid. Let rmaxk
and rmink be the maximum and minimum CO2 readings of the
k-th grid, respectively, and Pmaxk and Pmink be the positions
in grid k where these two readings are reported, respectively.
We define the variance of gird k is as
ρk =
rmaxk − rmink
d(Pmaxk , P
min
k )
, (1)
where d(Pmaxk , Pmink ) is the distance between Pmaxk and
Pmink . Intuitively, ρk indicates how drastic the change of
readings is. The number of vehicular sensors in grid k can be
estimated by δk = nkµk×t , where nk is the number of sensing
reports received in grid k during an observation interval t and
μk is the current reporting rate in grid k.
Intuitively, a higher reporting rate μk should be set when the
variance ρk is higher, and vice versa. For example, in Fig. 2,
the variances in grids (2, 4) and (2, 5) are more significant,
so higher reporting rates are required. Since grid (2, 5) has
more vehicles, its rate can be slightly lower than that of grid
(2, 4). Similarly, the variances in grids (1, 5) and (2, 6) are
less significant, so lower reporting rates should be adopted to
reduce messages. Since grid (2, 6) has more vehicles, its rate
can be slightly lower than that of grid (1, 5).
Based on the above observation, our adaptive approach
works as follows. Assume that each round is of length t
minutes. Let μmax and μmin be the maximum and minimum
allowable reporting rates, respectively. Consider round i. Let
ρik, δ
i
k, and μik be the variance, the estimated number of vehi-
1
2
3
4
1 2 3 4 5 6
550 ppm
500 ppm
450 ppm
CO2
(1,5)
(2,4) (2,5) (2,6)
concentration
Fig. 2. An example of grid architecture and reporting rate adjustment.
cles, and the reporting rate at round i in grid k, respectively.
We propose to compute the reporting rate μi+1k based on the
observed results in rounds i−1 and i. Specifically, we compute
μi+1k at the beginning of round i + 1 as follows:
μi+1k =
{
min{μmax, tmp} if tmp > μik
max{μmin, tmp} otherwise , where (2)
tmp =
(
ρik
ρi−1k
× δ
i−1
k
δik
)
× μik. (3)
The value of μi+1k should be sent to vehicles at the beginning
of round i + 1.
in each grid. We have also demonstrated the prototype of a
ZigBee-based intra-vehicle wireless network.
ACKNOWLEDGEMENT
Y.-C. Tseng’s research is co-sponsored by MoE ATU Plan,
by NSC grants 96-2218-E-009-004, 97-3114-E-009-001, 97-
2221-E-009-142-MY3, and 98-2219-E-009-005, and by ITRI,
Taiwan.
REFERENCES
[1] Google Maps. [Online]. Available: http://maps.google.com/
[2] T. He, S. Krishnamurthy, J. A. Stankovic, T. Abdelzaher, L. Luo,
R. Stoleru, T. Yan, L. Gu, G. Zhou, J. Hui, and B. Krogh, “VigilNet:
an integrated sensor network system for energy-efficient surveillance,”
ACM Trans. on Sensor Networks, vol. 2, no. 1, pp. 1–38, 2006.
[3] L. E. Cordova-Lopez, A. Mason, and J. D. Cullen, “Online vehicle
and atmospheric pollution monitoring using gis and wireless sensor
networks,” in Proc. of ACM Int’l Conference on Embedded Networked
Sensor Systems (SenSys), 2007, pp. 87–101.
[4] K. Liu, M. Li, Y. Liu, M. Li, Z. Guo, and F. Hong, “Passive diagnosis
for wireless sensor networks,” in Proc. of ACM Int’l Conference on
Embedded Networked Sensor Systems (SenSys), 2008, pp. 113–126.
[5] Y.-C. Wang, F.-J. Wu, and Y.-C. Tseng, “Mobility management algo-
rithms and applications for mobile sensor networks,,” Wireless Commu-
nunications and Mobile Computing (WCMC), to appear.
[6] S. B. Eisenman, E. Miluzzo, N. D. Lane, R. A. Peterson, G. S. Ahn,
and A. T. Campbell, “The BikeNet mobile sensing system for cyclist
experience mapping,” in Proc. of ACM Int’l Conference on Embedded
Networked Sensor Systems (SenSys), 2007, pp. 87–101.
[7] U. Lee, B. Zhou, M. Gerla, E. Magistretti, P. Bellavista, and A. Corradi,
“Mobeyes: smart mobs for urban monitoring with a vehicular sensor
network,” IEEE Wireless Communications, vol. 13, no. 5, pp. 52–57,
2006.
[8] Jennic JN5139. [Online]. Available: http://www.jennic.com/
[9] “IEEE standard for information technology - telecommunications and
information exchange between systems - local and metropolitan area
networks specific requirements part 15.4: wireless medium access con-
trol (MAC) and physical layer (PHY) specifications for low-rate wireless
personal area networks (LR-WPANs)(revision of IEEE Std 802.15.4-
2003),” 2006.
[10] “ZigBee specification version 2006, ZigBee document 064112,” 2006.
[11] uPatch300 module. [Online]. Available: http://www.fastraxgps.com/
[12] H-550EV module. [Online]. Available: http://www.elti.co.kr/
[13] SIM300 module. [Online]. Available: http://www.sim.com/
Figure 2: Scenarios of security and tracking appli-
cations.
Figure 3: VS3 hardware components.
tion is beyond a dangerous threshold, VS3 will send a short
message to a predefined phone number. The user can then
activate MMS or video call with the car unit. In Fig. 2(b),
we demonstrate a burglarproof application. When a poten-
tial burglar event is detected (such as doors being opened),
VS3 will send the owner a short message. Since an imme-
diate action is needed, VS3 will directly record a video clip
and send it to the owner via MMS. More importantly, the
video clip is a critical clue and evidence in a lawsuit.
In the tracking part, Fig. 2(c) shows a surveillance sce-
nario. Through its camera, VS3 will continuously take snap-
shots on neighboring vehicles. VS3 will retrieve these license
plate numbers and compare them against a database of sus-
picious plate numbers provided by the police department
(through the Internet or nearby police cars). When a sus-
picious vehicle is identified, the on-board unit can trans-
mit a report message to the police department via 3G net-
works. The police department then can take further actions.
In addition, the on-board unit can broadcast this message
to neighboring vehicles by vehicle-to-vehicle (V2V) com-
munications (through IEEE 802.11p [1] interfaces). Thus,
the traces of suspicious vehicles can be continuously logged,
which are valuable clues to the police department. This
brings up a new challenge of how to conduct cooperative
tracking by general vehicles on the street.
3. PROTOTYPE IMPLEMENTATION
We have developed a prototype of VS3. The micropro-
cessor in the car unit is an ARM9 Mini2440 [2] with a 3.5”
TFT LCD, as shown in Fig. 3(a). It is equipped with a
CAM130 camera, which has a 400MHz 32-bit RISC inte-
ger processor (ARM920T [3]), 64MB SDRAM, 64MB Nand
Flash, Camera Interface, three serial ports, and a 10/100M
Ethernet RJ-45. Mini 2440 can issue snapshot commands to
Figure 4: Prototyping demonstration.
CAM130 for taking full-resolution pictures. To output the
captured video data to an image file, the jpeg library, lib-
jpeg, is linked to the executable program. The CO2 module
is a H-550EV CO2 sensor [4] integrated with Jennic JN5139
[5] as shown in Fig. 3(b), which has 0∼5,000 ppm measure-
ment range and ±30 ppm accuracy. The 3G module is the
Wavecom Q2403A GSM/GPRS/CDMA module as shown
in Fig. 3(c), which is controlled by Mini2440 via AT com-
mands. The GPS module is implemented by uPatch300 [6],
as shown in Fig. 3(d), which follows the NMEA (National
Marine Electronics Association) 0183 protocol.
For license plate recognition (LPR), we integrate a soft-
ware with the following functions: plate localization, plate
orientation and sizing, normalization and edge detection,
character segmentation, and optical character recognition.
For car security, we demonstrate a door-trigger scenario as
shown in Fig. 4(a) and a CO2-monitoring scenario in a model
car as shown in Fig. 4(b). For car tracking demonstrations,
Fig. 4(c) and Fig. 4(d) show our prototyping system set up
in a real car and a suspicious vehicle tracking scenario, re-
spectively.
4. ACKNOWLEDGMENTS
Y.-C. Tseng’s research is co-sponsored by MoE ATU Plan,
by NSC grants 97-3114-E-009-001, 97-2221-E-009-142-MY3,
98-2219-E-009-019, and 98-2219-E-009-005, by MOEA 98-
EC-17-A-02-S2-0048, and 98-EC-17-A-19-S2-0052, and by
ITRI, Taiwan.
5. REFERENCES
[1] IEEE std. 802.11p/D4.0, Draft Amendment for
Wireless Access in Vehicular Environments (WAVE).
Mar. 2008.
[2] FriendlyARM, Mini2440. http://www.friendlyarm.net.
[3] ARM, ARM920T.
http://www.arm.com/products/CPUs/ARM920T.html.
[4] H-550EV CO2 Sensor Module.
http://www.co2sensor.co.kr/new/eng/ndir-co2-sensor-
module-h550ev.htm.
[5] Jennic, JN5139. http://www.jennic.com.
[6] Fastrax, uPatch300. http://www.fastrax.fi.
Fig. 1. System architecture of VS3.
Fig. 3. Car security and burglarproof applications.
short messages, pictures or video clips inside the vehicle,
and interactive video calls. To illustrate how VS3 works,
we demonstrate a car security and a car burglarproof
applications below. Fig. 2 shows the VS3 flowchart.
A. Car Security Application
In Fig. 3(a), after the driver parks the vehicle and
activates the car unit, VS3 will continuously check the
CO2 concentration in the vehicle for a predefined period.
During this period, if there is no abnormal CO2 concen-
tration, it implies there is no baby or animal in the car.
So the CO2 sensor can be shut down for power-saving.
Otherwise, when it is found that the CO2 concentration
is beyond a dangerous threshold, VS3 will send a short
message to notify the predefined phone number (user
unit). On receipt of the warning message, the owner
Fig. 4. Building blocks of the car unit.
can return a command short message to VS3. According
to the command, VS3 activates the camera module and
initiates a video call to the owner. Through the live video
call, the user can monitor possible abnormal events (such
as baby or animal forgotten in the vehicle) by his/her 3G
phone. Thus, loss of lives can be avoided.
B. Car Burglarproof Application
In Fig. 3(b), VS3 notifies the owner via SMS as a
potential burglar event is detected (such as doors being
opened). Since an immediate action is needed, VS3 will
directly record a video clip and send it to the owner via
MMS. More importantly, the video clip is a critical clue
and evidence in a lawsuit.
III. PROTOTYPE IMPLEMENTATION
We have developed a prototype of the proposed car
unit. Fig. 4 shows its building blocks. There is an on-
board microphone on the control module (the red circle
in Fig. 5). The camera module is connected to the mi-
croprocessor via build-in Camera Interface, whereas the
other modules are mounted through the UART interfaces.
Below, we describe implementation details.
A. Microprocessor
The microprocessor in the car unit is an ARM9 board
(Mini2440 [4]) with a 3.5” TFT LCD as shown in Fig. 6,
which has a 400MHz 32-bit RISC integer processor
(ARM920T [1]), 64MB SDRAM, 64MB Nand Flash,
Camera Interface, three serial ports, and a 10/100M
Ethernet RJ-45. In particular, Mini2440 can run embed-
ded Linux and WinCE to develop diverse applications.
During the development stage, Linux with an arm-linux-
gcc compiler is installed first. Then, the ARM9 board is
connected to a PC through the RS-232 interface.
Fig. 7. H-550EV CO2 sensor integrated with JN5139.
Fig. 8. Wavecom Q2403A module.
send a short message, AT commands are issued to control
GSM/GPRS modem.
D. Camera Module
Fig. 9 shows the camera module CAM130, a CMOS
optical sensor. It receives snapshot commands from
Mini2440 and takes full-resolution pictures to Mini2440
through the Camera Interface. Similar to the CO2 Sensor,
a character device (such as ”/dev/camera”) in Linux must
be opened to get the video data. An array is declared to
store data from the character device. Through the Linux
framebuffer mechanism, the video data can be copy to
the mapped memory space and displayed on the TFT
screen.
To output the video data captured from the camera to
an image file, the jpeg library, libjpeg, is linked to the
Fig. 9. CAM130 camera module.
Fig. 10. VS3 prototyping system.
executable program. It also transforms the 16-bit color
images to the 24-bit color format (RGB888). Moreover,
the color compensation of RGB bytes is adopted to make
images clearer.
E. Demostration
Fig. 10 shows the VS3 prototype in a model car
and the graphical user interface (GUI) in the laptop
computer. The demo video of VS3 can be found in
http://www.cs.nctu.edu.tw/∼lwchen/VS3.avi. In the bur-
Fig. 11. Burglar door open detected by VS3.
Efficient Data Collection and Distribution in Two-tier Vehicular Long-thin 
Networks 
 
 
Lien-Wu Chen1, Yu-Hao Peng1, Yu-Chee Tseng1, and Da-Chun Chang1,2
1Department of Computer Science, National Chiao-Tung University, Hsin-Chu, 300, Taiwan 
2Emerging Smart Technology Institute, Institute for Information Industry, Taipei, 105, Taiwan 
{lwchen, yhpeng, yctseng, dcchang}@cs.nctu.edu.tw 
 
 
Abstract 
This paper investigates the optimization of data 
collection and distribution in two-tier vehicular 
long-thin networks (VLTNs). The fleet of bikers using 
smart phones with the common cycling path forms 
two-tier VLTNs, which consist of a 3G/3.5G high-tier 
interface and an IEEE 802.11-based low-tier interface. 
In a cycling fleet, it causes insufficient bandwidth and 
long delay problems as all bikers upload their data and 
download the fleet information via 3G/3.5G 
communications. To reduce the bandwidth usage and the 
transmission delay of 3G/3.5G communications, we 
propose a framework consisted of a dynamic grouping 
mechanism and a group maintenance scheme. In the 
proposed framework, bikers belonging to the same group 
exchange data with each other via ad-hoc 
communications and only the group leader needs to 
report the group member data and obtain the fleet 
information to/from the server via 3G/3.5G 
communications. Then, the group leader employs ad-hoc 
communications to broadcast the fleet information to all 
other members. Through the cooperation between 
3G/3.5G and ad-hoc communications, the high-tier 
bandwidth cost and transmission delay can be minimized. 
Simulation results show our framework outperforms 
existing works that significantly reduce the amount of 
3G/3.5G data and the number of 3G/3.5G connections. 
In addition, we use smart phones to implement a Google 
Android and Maps-based prototype for cycling fleet 
communications. 
 
 
1. Introduction 
 
近年來，愛好自行車騎乘活動的人士與日俱增，不
論在通勤、運動、或娛樂方面均有越來越受歡迎的趨
勢。另外一方面，由於高油價時代的來臨，人們逐漸
以自行車取代汽車作為上班的通勤工具。除了通勤之
外，人們更於週末假日在郊外騎自行車以達到運動或
踏青的目的，相關文獻包括建置公共自行車租用系統
[1]、設計電動自行車系統[2]、以及實作自行車感測器
系統[3]等。在本篇論文中，我們探討在雙層式網路架
構下之自行車車隊通訊效能最佳化的問題，自行車車
隊網路因具有共同騎乘路線而形成一個長鏈狀的車 
 
圖一、自行車車隊網路架構 
 
載網路，其上層網路介面為3G/3.5G，下層為IEEE 
802.11 Ad-hoc網路，圖一顯示具有三個Ad-hoc通訊群
組的自行車車隊網路。 
在移動式無線隨意網路(Mobile Ad Hoc Network, 
MANET)的研究領域中，針對群組成員通訊的群播
(Multicast)方法主要可分為三大類，第一類為樹狀群播
法(Tree-based) [4]-[8]，每個群組都需建立一個群播樹
來負責成員間的通訊；第二類為網狀群播法 
(Mesh-based) [9][10]，每個群組都需建立一個網狀拓
樸來轉送成員間的資料；第三類為雙層式群播法
[11]-[18]，每個群組都需建立一個骨幹拓樸來傳遞成
員間的資料。 
雖然樹狀群播法較易實作，但是在靠近根節點處
(Root Node)卻容易造成傳輸瓶頸，另外，當有非末端
節點(Intermediate Node)故障時，群組中某些成員便無
法與根節點保持通訊。而網狀群播法可藉由氾濫式廣
播(Flooding)將資料傳送至所有鄰居節點來提供較佳
的連通性，然而卻需消耗較多的頻寬，而且在有新成
員加入群組時，會造成整個網路的訊息氾濫式廣播。
這種方式在大型移動式無線隨意網路中可說是一種
非常耗時和浪費頻寬的方式。為了避免進行整個網路
的氾濫式廣播動作，雙層式架構的群播方法陸續在大
型移動式無線隨意網路中被提出，群組中部份成員將
被選作骨幹節點，專門負責管理群組拓樸以及決定傳
 
圖三、自行車車隊網路群組 
 
首先定義同一個群組的車隊成員必須是朝同方向
行進且可經由Ad-hoc通訊方式傳遞資料給其他成
員。然而，對於同一個群組中的成員個數必須加以限
制，因為倘若成員個數太多，將會造成資料收集與散
佈之時間過長的問題，假設ω為車隊成員個數最大值。 
圖三為一個形成車隊群組的例子，其中每台自行車
必須扮演Group Header (GH)或Group Member (GM)其
中之一的角色，且每台自行車Bi會有一個屬於自己的
Serial Number (SNi)，此SNi對於每台自行車在群組中
是唯一的數值。倘若該自行車扮演GH的角色，則必須
週期性的廣播Invitation Advertisement Beacon (IAB)，
圖四為IAB封包的格式定義，包含了Beacon Type為訊
息種類，Heading Direction為群組行進的方向、
Coordinate為Source目前所在的座標、Current Serial 
Number (SNc)為目前已使用的最大SN(即目前群組內
車隊成員的數量)、Source SN (SNs)為IAB發送者的
SN。週期性發送IAB的主要目的是通知不在群組內卻
靠近到整個群組之通訊範圍的自行車成員，若此群組
尚未達到車隊成員個數最大值，則此接近之自行車將
被允許加入群組，反之則否。 
 
 
圖四、Invitation Advertisement Beacon封包格式定義 
 
GM必須協助Relay由GH發出的IAB，Relay的方式
是以越遠收到的GM，則具有越小的Backoff Timer為
基礎，因此收到IAB且距離Source最遠的自行車將會
因Backoff Timer最小而優先Relay，在此稱為Relay 
Bike 1 (RB1)，而Relayed IAB中的Heading Direction，
Coordinate，與Source SN皆必須分別更新為RB1的行
進方向、RB1目前所在的座標，與RB1的SN。而介於
GH和RB1之間的自行車則因為收到具有相同SNc的
IAB則不再協助Relay IAB。同理，在RB1廣播出去之
後，RB1後方的車輛也必須協助RB1作Relay IAB的動
作，相對距離RB1最遠的車輛為RB2，則RB2優先Relay 
IAB，一直做到無人Relay即自動結束。 
假設θ值為一段時間區間，當一台自行車New Bike 
(NB)剛啟動車上通訊裝置時，必須先等待θ的時間，
倘若這段時間內沒有收到來自其它群組的IAB，則自
己形成一個新的群組，且自己就是GH。倘若有收到，  
 
圖五、New Bike判斷是否加入群組 
 
則必須針對IAB內容判斷自己是否要加入，判斷機制
如下所述： 
首先NB判斷行進方向是否相同，倘若方向不同，
則不予理會且繼續等待直到θ結束。倘若方向相同，
如圖五所示，則分成(1)收到的IAB來自於最後一台
車，即SNs = SNc、(2)收到的IAB來自於GH，即SNs = 
1、(3)收到的IAB來自於中間協助Relay之RB，即1 < 
SNs < SNc。 
在(1)的狀況下，即SNs = SNc，代表NB是由最後方
加入，則NB直接設定自己的SN為SNc+1，並且回傳訊
息通知GH多了一名新的成員。而在(2)的狀況下，即
SNs = 1，代表車輛是由前方加入，則情況類似(1)，設
定自己的SN為1成為新的GH，並且回傳訊息通知舊的
GH，舊的GH再以越遠收到的GM，則具有越小的
Backoff Timer的廣播機制通知群組內所有車輛將自己
的SN加1。而在(3)的狀況下，即1 < SNs < SNc，代表
收到的IAB來自於中間協助Relay之RB，代表NB是由
其他路線轉向而來並且出現在群組的中間，則此時NB
加入群組中並發出訊息要求範圍內的前後方成員回
傳IAB，且回傳的IAB等待的Backoff Timer以距離越近
越先傳送為基礎，IAB內容必須包含位置資訊與SNs，
當收到的SNs為SNi與SNi+1，則NB設定自己的SN為
SNi+1，並通知後方之成員車輛將自己的SN加1。 
 
3.2. 群組合併與分離機制 
 
前面所述為新成員如何加入群組的機制，而在群組
與群組之間，或是群組內也有許多情況造成群組成員
的變動，其原因可分成以下三種：(1)圖六顯示群組中
自行車Bj轉到別的方向行駛，而離開原本Bj所在的群 
 
 
圖六、Bj轉彎而導致群組無法傳遞位置資訊與更新SN 
Ad-hoc通訊方式傳遞至GH，然後GH將整個群組
Aggregated的位置資訊回傳至Server，Server收到各個
群組的位置資訊後，再將整個自行車車隊網路的位置
資訊傳送給各個GH，而GH收到後再以相反的順序(1, 
2,..., SNc)傳送給群組內所有的車隊成員。 
 
4. Performance Evaluation 
 
在本節中，我們使用Java模擬器來實驗Single-tier
資料收集與散佈機制以及本篇論文所設計的高效率
資料收集與散佈機制所需要傳輸之3G/3.5G資料量與
建立之3G/3.5G連線數，整個車隊網路的總Biker數設
定為50、100、200、300、與400，每秒更新一次位置
資訊，每次模擬實驗的時間為600秒，每個數值為100
次模擬實驗的平均值。圖十一和圖十二顯示在不同
Biker數的情況下，各機制的3G/3.5G資料傳輸量以及
3G/3.5G連線建立數。 
 
 
圖十一、3G/3.5G資料傳輸量之效能比較 
 
圖十一顯示當Biker數增加時，所需要傳輸之
3G/3.5G資料量則是上升的。對於Single-tier機制而
言，由於所有Biker都是透過3G/3.5G連線來傳輸其資
料而使得所需要傳輸之3G/3.5G資料量快速地上升；
我們所設計的高效率資料收集與散佈機制則有著較
低的3G/3.5G傳輸需求，而且當Biker數越大時，我們
的資料收集與散佈機制所需要之3G/3.5G傳輸量只有
Single-tier機制的三分之一。 
 
 
圖十二、3G/3.5G連線建立數之效能比較 
 
圖十二顯示在不同Biker數的情況下，各機制造成
的3G/3.5G連線建立數。其結果顯示Single-tier機制在
Biker數增加時，其3G/3.5G連線建立數呈現指數性的
增加；而我們所設計之高效率資料收集與散佈機制在
Biker增加時，其3G/3.5G連線建立數只呈現線性的成
長。在圖十二的結果中，Single-tier機制由於其指數成
長的3G/3.5G連線建立數，使得其資料傳輸延遲將遠
高於我們的機制。我們的機制由於能夠將Biker分群並
使用Ad-hoc通訊將資料透過Gateway統一發送給
Server，而使得其3G/3.5G連線建立數可降至最低。 
 
 
圖十三、維護傳輸順序對資料傳輸量之效能影響 
 
圖十三與圖十四分別顯示我們所設計之高效率資
料收集與散佈機制在持續維護傳輸順序之後，對於
3G/3.5G傳輸需求與連線建立數的效能改進幅度。這
是因為當傳輸順序未保持在最新的狀態時，GM的位
置超前GH之後，便會可能形成新的群組而造成
3G/3.5G資料傳輸量與連線建立數增加的情況。 
 
 
圖十四、維護傳輸順序對連線建立數之效能影響 
 
從圖十一至圖十四可知我們所設計之高效率資料
收集與散佈機制具有較低的3G/3.5G傳輸需求以及較
低的3G/3.5G連線建立數，換言之，在長鏈狀車載網
路中採用我們的機制可有效地預防3G/3.5G基地台因
頻寬不足，而造成資料傳輸的嚴重延遲，以及避免所
有Biker都建立3G/3.5G連線，而造成不必要的花費。 
 
Information Industry which is subsidized by the Ministry 
of Economy Affairs of the Republic of China. 
 
8. References 
 
[1] R. Luo and Y. Shen. “The Design and 
Implementation of Public Bike Information System 
Based on Google Maps,” In International Conference on 
Environmental Science and Information Application 
Technology (ESIAT’09), vol. 2, pp. 156–159, July 2009. 
 
[2] C.-Y. Liang, W.-H. Lin, and B. Chang. “Applying Fuzzy 
Logic Control to an Electric Bicycle,” In First International 
Conference on Innovative Computing, Information and 
Control (ICICIC’06), vol. 1, pp. 513–516, Aug. 2006. 
 
[3] S. B. Eisenman, E. Miluzzo, N. D. Lane, R. A. 
Peterson, G.-S. Ahn, and A. T. Campbell. “The BikeNet 
Mobile Sensing System for Cyclist Experience 
Mapping,” In Fifth ACM Conference on Embedded 
Networked Sensor Systems (SenSys’07), pp. 87–101, 
Nov. 2007. 
 
[4] M. S. Corson and S. G. Batsell, “A reservation-based 
multicast (RBM) routing protocol for mobile networks: 
Initial route construction phase,” ACM/Baltzer Wireless 
Networks, vol. 1, no. 4, pp. 427–450, Dec. 1995. 
 
[5] E. M. Belding-Royer and C. E. Perkins, 
“Transmission range effectson AODV multicast 
communication,” ACM/Kluwer Mobile Networking and 
Applications, vol. 7, no. 6, pp. 455–470, Dec. 2002. 
 
[6] J. Xie, R. R. Talpade, A. Mcauley, and M. Liu, 
“AMRoute: Ad hoc multicast routing protocol,” 
ACM/Kluwer Mobile Networking and Applications, vol. 
7, no. 6, pp. 429–439, Dec. 2002. 
 
[7] S. K. S. Gupta and P. K. Srimani, “Cored-based tree 
with forwarding regions (CBT-FR): A protocol for 
reliable multicasting in mobile ad hoc networks,” 
Journal of Parallel and Distributed Computing, vol. 61, 
no. 9, pp. 1249–1277, Sep. 2001. 
 
[8] K. Chan and K. Nahrstedt, “Effect location-guided 
tree construction algorithms for small group multicast in 
MANETs,” in Proceeding of 21st International Annual 
Joint Conference of IEEE Computer and 
Communications Society (INFOCOM’02), pp. 
1180–1189, June 2002. 
 
[9] S. J. Lee and M. Gerla, “On-demand multicast 
routing protocol in multihop wireless mobile networks,” 
ACM/Kluwer Mobile Networking and Applications, vol. 
7, no. 6, pp. 441–453, Dec. 2002. 
 
[10] J. J. Garcia-Luna-Aceves and E. L. Madruga, “The 
core-assisted mesh protocol,” IEEE Journal on Selected 
Areas in Communications, vol. 17, no. 8, pp. 1380–1394, 
Aug. 1999. 
 
[11] M. T. Thai, F.Wang, D. Liu, S. Zhu, and D. Z. Du, 
“Connected dominating sets in wireless networks with 
different transmission ranges,” IEEE Transactions on 
Mobile Computing, vol. 6, no. 7, pp. 721–730, Jul. 2007. 
 
[12] F. Dai and J. Wu, “An extended localized algorithm 
for connected dominating set formation in ad hoc 
wireless networks,” IEEE Transactions on Parallel and 
Distributed System, vol. 15, no. 10, pp. 908–920, Oct. 
2004. 
 
[13] D. Dubhashi, A. Mei, A. Panconesi, J. 
Radhakrishnan, and A. Srinivasan, “Fast distributed 
algorithms for (weakly) connected dominating sets and 
linear-size skeletons,” Journal of Computer and System 
Science, vol. 71, no. 4, pp. 467–479, Nov. 2005. 
 
[14] L. Jia, R. Rajaraman, and T. Suel, “An efficient 
distributed algorithm for constructing small dominating 
sets,” Distributed Computing, vol. 15, no. 4, pp. 
193–205, Dec. 2002. 
 
[15] I. Stojmenovic, M. Seddigh, and J. Zunic, 
“Dominating sets and neighbors elimination based 
broadcasting algorithms in wireless networks,” IEEE 
Transactions on Parallel and Distributed System, vol. 13, 
no. 1, pp. 14–25, Jan. 2002. 
 
[16] P.-J. Wan, K. M. Alzoubi, and O. Frieder, 
“Distributed construction of connected dominating sets 
in wireless ad hoc networks,” ACM/Kluwer Mobile 
Networking and Applications, vol. 9, no. 2, pp. 141–149, 
Apr. 2004. 
 
[17] M. T. Thai, R. Tiwari, and D. Z. Du, “On 
construction of virtual backbone in wireless ad hoc 
networks with unidirectional links,” IEEE Transactions 
on Mobile Computing, vol. 7, no. 9, pp. 1098–1108, Sep. 
2008. 
 
[18] C.-C. Hu, H.-K. E. Wu; G.-H. Chen, “Stable 
Backbone Hosts and Stable Multicast Routes in 
Two-Tier Mobile Ad Hoc Networks,” IEEE 
Transactions on Vehicular Technology, vol. 58, no. 9, pp. 
5020–5036, Nov. 2009. 
 
Fig. 2. Cycling group application.
Fig. 3. Flowchart of BiSeeCall.
among group members. On the web side, the biker community
site called BikeBang is built for the biker interaction, grouping,
and dedicated album. To illustrate how GoBike works, we
demonstrate a cycling group application below. As shown
in Fig. 2, the user browses the BikeBang site at home and
registers a user account for cycling grouping, which he/she
can plan a preferred cycling path and then create a new group,
or directly join an existing group. On the cycling day, bikers
go to the cycling location from different places, and one of
them will be the group leader.
During the cycling activity, all positions and status of
members can be shown on the BiSeeCall Android program. By
simply clicking member icons on the phone screen, users can
immediately make phone calls or transmit short messages to
other bikers. When users take pictures or record videos along
the cycling path, they can immediately share these files with
other members through the file sharing function in BiSeeCall.
On one hand, the group leader can announce that the group
racing will begin after a certain duration. On the other hand,
if some user encounters an emergency event (such as bicycle
crashing), he/she can send a notification message to other
Fig. 4. BikeBang community site.
members for help. Furthermore, if the leader can not do his/her
duty due to emergency events or other reasons, he/she can
pass the leadership to one of other members for keeping the
activity goes on. After the cycling activity is finished, this
cycling group owns a dedicated album on the BikeBang site
to show pictures taken along its cycling path.
Fig. 3 shows the flowchart of BiSeeCall. The time threshold
T is used to detect and recover the disconnections between
clients and the server caused by the congestion of 3G/3.5G
transmissions. To further overcome the uncertain delay prob-
lem and provide efficient group communications among bikers,
the following issues have been taken into consideration.
1) Since all members must connect to the backend server,
transmit individual status to it, and receive the collected
group information via 3G/3.5G communications, the
transmission delay is high for location updating and
data exchanging among them. For reducing the number
of 3G/3.5G connections, IEEE 802.11 ad-hoc commu-
nications are adopted to exchange information locally,
and only the selected gateways need to transmit the
aggregated data to the backend server.
2) Bikers properly ride in different speeds due to their body
strengthes and bike performance. Thus, group members
will form vehicular long-thin networks (VLTNs) along
the cycling path. The grouping mechanism is designed
to maintain a stable VLTN topology in the ad-hoc
environment.
3) During the cycling activity, group members tend to
follow the similar mobility pattern that is riding along
the predefined cycling path. The gateway selection of
VLTNs takes biker mobility patterns into account for
minimizing 3G/3.5G communications.
4) Furthermore, in a multi-rate VLTN, the shortest path
(with the smallest hop count) may not be the fastest path
(with the lowest transmission time) to share files because
the links of the shortest path have long distances and
thus low bandwidth. The route throughput estimation is
derived to find the fastest path for file sharing among
bikers.
III. PROTOTYPE IMPLEMENTATION
Fig. 4 shows main functions in the BikeBang site, which
includes the biker interaction, grouping, and dedicated al-
An Augmented Reality Based Group Communication System
for Bikers Using Smart Phones
Lien-Wu Chen, Yu-Hao Peng, and Yu-Chee Tseng
Department of Computer Science, National Chiao-Tung University, Hsin-Chu, 300, Taiwan
Email: {lwchen, yhpeng, yctseng}@cs.nctu.edu.tw
Abstract—The bicycling recently has gained a lot of popularity
in many applications, such as transportation, recreation, and
exercise. Bikers may ride in different speeds due to their body
strengthes and bike performance such that group members using
smart phones form two-tier vehicular long-thin networks along
the common cycling path, which consist of a 3G/3.5G high-tier
interface and an IEEE 802.11-based low-tier interface. In this
paper, we design a Google Android and Maps-based solution
for cycling group communications. On the handset side, an
Android program is developed for group member localization,
communication, and transmission. In addition, the augmented
reality interface is integrated to show the biker information on
real-time camera views of smart phones. On the web side, a
biker community site is built for the biker interaction, grouping,
and dedicated album. To provide efficient group communications
and reduce the transmission delay, ad-hoc communications are
adopted to locally exchange data among bikers. Also, a dynamic
grouping mechanism has been designed to maintain the stable
member connectivity in ad-hoc environments. Furthermore, the
gateway selection in a group has taken the similar mobility
pattern of members into account for minimizing 3G/3.5G com-
munications.
Keywords: Ad-hoc Communications, Android, Augmented
Reality, Cycling Group, Google Maps.
I. INTRODUCTION
The bicycling recently has gained a lot of popularity in
many applications, such as transportation, recreation, and
exercise. People tend to ride bicycles to work instead of driving
cars due to the high fuel price. In addition to transportation,
on the weekend or vacations, people enjoy riding bicycles in
natural environments for both recreation and exercise. Existing
works include constructing public bicycle rental system [10],
building electric bicycle system [4], and deploying bicycle
sensing system [11].
In this work, we are interested in taking advantage of
Google Maps APIs [6] and the Android [2] platform to enrich
user interaction in a cycling activity. In addition, the aug-
mented reality interface is integrated to show the biker infor-
mation on real-time camera views of smart phones. Our goal
is to develop an group communication system that individual
bikers who do not know each other can be organized and
maintained for bicycling together. Traditional cycling services
only provide off-line route information, cycling experiences,
and sight views of bicycling paths. For the biker grouping,
Y.-C. Tseng’s research is co-sponsored by MoE ATU Plan, by NSC grants
97-3114-E-009-001, 97-2221-E-009-142-MY3, 98-2219-E-009-019, and 98-
2219-E-009-005, by ITRI, Taiwan, by III, Taiwan, by D-Link, and by Intel.
Fig. 1. System architecture of cycling group communications.
there are two limitations associated with such services. First,
bikers must find and contact other group members by them-
selves. Second, after the cycling activity begins, there is no
effective mechanism to maintain the cycling group so that
members are easy to lose contacts with each other. Further,
communications among members are necessary to keep real-
time status of members for cycling safety.
For cycling group communications, a backend server is
installed to handle connections and exchange data among
group members. Bikers periodically upload their location data
to the server and download the collected information from the
server. Since all members must connect to the backend server,
transmit individual status to it, and receive the collected in-
formation via 3G/3.5G communications, the bandwidth usage
and transmission delay are high for location updating and data
exchanging among them.
To solve this problem, IEEE 802.11 ad-hoc communications
are adopted to exchange information locally, and only the
selected gateways need to transmit the aggregated data to
the backend server. On the other hand, bikers properly ride
in different speeds due to their body strengthes and bike
performance. Thus, group members will form two-tier vehic-
ular long-thin networks (VLTNs) along the common cycling
path. The dynamic grouping mechanism has been designed
to maintain a stable VLTN topology in ad-hoc environments.
During the cycling activity, group members tend to follow
the similar mobility pattern that is riding along the predefined
cycling path. The gateway selection of VLTNs has taken
Fig. 4. BiSeeCall-AR Android program.
III. PROTOTYPE IMPLEMENTATION
A. BikeBang Community Site
Fig. 3 shows main functions in the BikeBang site, which
includes the biker registration, grouping, forum, dedicated al-
bum, path planning, and hot groups. The planning of group cy-
cling paths in BikeBang is implemented by Google Maps APIs
[6] with detailed street and landmark information. The web
server of BikeBang is implemented by Apache version 2.2.11
[3], which is developed and maintained by an open community
of developers. Apache is available for a wide variety of
operating systems, such as Unix, FreeBSD, Linux, Solaris,
Novell NetWare, Mac OS X, and Microsoft Windows. The
database system of BikeBang is implemented by PostgreSQL
version 8.4 [9], which is an object-relational database manage-
ment system (ORDBMS). The interface between Apache and
PostgreSQL is implemented by PHP version 5.2.1 [8], which
is a server-side HTML embedded scripting language. PHP can
be embedded into HTML and generally runs on a web server
that is configured to process PHP code and create web page
content from it.
B. BiSeeCall-AR Android Program
Fig. 4 shows main functions in the BiSeeCall-AR Android
program, which includes group member localization, commu-
nication, emergency notification, leadership exchanging, speed
racing, and file sharing. The GPS and m-sensor are used
to obtain member locations and angle directions to show
biker information tags on related positions of the camera
view. A backend server is constructed to handle connections
and exchange data among group members. Each member
periodically reports his/her position and status to the server,
and the server replies the collected information of all members
in return. In addition to the periodical updating of position and
status, bikers can share files with other members on demand,
such as pictures/videos just taken/recorded. So the server is
also responsible to receive these shared files and send them to
other members.
BiSeeCall-AR is an application program running on
Android-based smart phones. Android is a software stack for
Fig. 5. Group communication demonstration.
mobile devices consisting of an operating system, middleware
and user applications. It relies on Linux version 2.6 for
core system services including security, memory management,
process management, network stack, and driver model. We use
the Java development kit (JDK) [7] and the Eclipse integrated
development environment (IDE) [5] in Android programming
and its IDE, respectively. To develop BiSeeCall-AR more
efficiently, Android Development Tools (ADT) Plugin [1] is
installed to add useful extensions to the Eclipse IDE, which
makes creating and debugging Android applications easier and
faster. The software development kit (SDK) of BiSeeCall-AR
uses the Android SDK [2], which provides the essential tools
and APIs.
C. Demonstration
For cycling group communications, Fig. 5(a) and Fig. 5(b)
show Android-based smart phones set up on bicycles and a
biker use BiSeeCall-AR to communicate with other members
as riding, respectively. We demonstrate an emergency notifi-
cation scenario as shown in Fig. 5(c) and the speed racing for
group members as shown in Fig. 5(d).
REFERENCES
[1] Android Development Tools (ADT) Plugin. http://dl-
ssl.google.com/android/eclipse.
[2] Android SDK. http://developer.android.com/sdk/index.html.
[3] Apache HTTP Server. http://www.apache.org/.
[4] C.-Y. Liang, W.-H. Lin, and B. Chang. Applying Fuzzy Logic Control
to an Electric Bicycle. In First International Conference on Innovative
Computing, Information and Control (ICICIC’06), volume 1, pages 513–
516, Aug. 2006.
[5] Eclipse IDE. http://www.eclipse.org/downloads/.
[6] Google Maps APIs. http://code.google.com/apis/maps/.
[7] Java Development Kit (JDK). http://java.sun.com.
[8] PHP: Hypertext Preprocessor. http://php.net/index.php.
[9] PostgreSQL Object-Relational Database Management System (OR-
DBMS). http://www.postgresql.org/.
[10] R. Luo and Y. Shen. The Design and Implementation of Public Bike
Information System Based on Google Maps. In International Conference
on Environmental Science and Information Application Technology
(ESIAT’09), volume 2, pages 156–159, July 2009.
[11] S. B. Eisenman, E. Miluzzo, N. D. Lane, R. A. Peterson, G.-S. Ahn,
and A. T. Campbell. The BikeNet Mobile Sensing System for Cyclist
Experience Mapping. In Fifth ACM Conference on Embedded Networked
Sensor Systems (SenSys’07), pages 87–101, Nov. 2007.
(dij < di
s
):(WJOINi ,WREPj ,WUPDi)
(dij  dis):(WLEAVEi ,WUPDi)
MEMBERINDIVIDUAL
(djk < dj
s
):(WJOINj ,WREPk)
(dij  dis,djk  djs):(WLEAVEj)
LEADER
(dij < di
s
,djk  djs):(WLEAVEj ,WUPDj)
(djk < dj
s
):(WJOINj ,WREPk ,WUPDj)
˹
Fig. 1: State transition diagram of vehicle j, where j is immediately in front of vehicle i and behind vehicle k.
A. Distributed Warning Protocol
Our scheme consists of a mutual-warning mechanism and a
self-warning mechanism. We first discuss the mutual-warning
part. Assume that vehicle i is immediately behind vehicle j
in the same lane. Let dij be the distance between i and j.
Recall the safety distance dsi . If dij ≥ dsi , no action is needed;
otherwise, we will put i and j into one warning group. When
i detects this situation, it will broadcast a WJOIN message
with its current location and ID. Based on i’s position, j can
determine that it is immediately in front of i. Then j will reply
a WREP message with the ID of its group leader and add i
into its 1-hop warning list. If there is no vehicle in front of
j or j has kept in safety distance from the vehicle in front
of it, j will form a new group and serve as the group leader;
otherwise, the group leader is the first vehicle in the chain of
vehicles not keeping in safety distances with each other. On
the other hand, if later on the safety condition dij ≥ dsi holds,
i will send a WLEAVE message to j to leave j’s group. In
response, j will remove i from its 1-hop warning list. Note that
WJOIN, WREP, and WLEAVE are local (1-hop) broadcasts,
so the control overhead should be quite low.
Let i immediately follow j and j immediately follow k in
the same lane. We summarize the states of j as follows:
• INDIV IDUAL: i keeps in safety distance from j and
so does j from k.
• LEADER: j keeps in safety distance from k, but i does
not keep in safety distance from j.
• MEMBER: j does not keep in safety distance from k.
Whenever j transits to the LEADER state, it broadcasts a
WUPD message to its group members. Whenever j is in the
LEADER/MEMBER state and performs an emergency brake,
it immediately broadcasts a WARN message to the group
members behind it. A vehicle only accepts a WUPD/WARN
message from a vehicle in front of it in the same warning
group. Both WUPD and WARN need to be rebroadcast (see
Section III-B). Fig. 1 shows the state transition diagram of
j, where the label on each transition edge is formatted as
(event):(action). For instance, (djk < dsj):(WJOINj , WREPk)
represents that as djk < dsj is detected, j broadcasts a WJOIN
message and then k replies a WREP message. Note that due
to GPS errors, some neighboring vehicles in different lanes
may incorrectly reply WREP messages to a WJOIN message.
A vehicle may thus belong to multiple warning groups at
the same time, and a warning group may include vehicles in
neighboring lanes. However, this only causes our system to
warn extra vehicles, but would not cause problems.
Next, we discuss the self-warning mechanism when i is
too close to j, which is in front of i. We define a driver’s
Needed Maneuvering Time (NMT) to be the sum of needed
reaction time η (from seeing a braking signal to taking an
emergency brake) and emergency braking time. This value
must be less than the Available Maneuvering Time (AMT).
Suppose that j takes an emergency brake at the maximum
braking acceleration aj . Then, after time interval ∆t, j will
move a distance of Bj(∆t) = sj ×∆t+ 12 × aj ×∆t2, where
sj is the current speed of j. Also, Bj(
sj
aj
) is the total moving
distance before j fully stops. To ensure a sufficient AMT when
j takes an emergency brake, dij must satisfy the following
condition for any time interval ∆t before i fully stops:
Bj(∆t)+dij >
{
si ×∆t , 0 < ∆t ≤ η
si × η +Bi(∆t− η) , η < ∆t ≤ η + siai
.
According to [8], η is about 1.5 second in average, which is
a major part of NMT. The upper part in the above inequality
is the distance before i starts to brake, while the lower is that
after i starts to brake. If the condition is violated for any ∆t,
the onboard unit of i will warn its driver to keep a longer
distance from j.
B. Location-based Backoff Scheme
To reduce the number of WUPD and WARN messages, we
design a location-based backoff scheme. It facilitates farther
receivers from the sender to rebroadcast at earlier time. Each
WARN message contains the sender’s position, group leader
ID, and a sequence number. When vehicle j receives a WARN
message, j first checks whether the message is sent from j’s
warning group (according to the group leader ID) and the
sender is in front of j. If so, j will calculate the distance dwj
between itself and the sender. A larger value of dwj will give
a smaller backoff timer BTj , as defined below:
BTj =

[0, 2τ+1 − 1] ρ−1ρ R < dwj ≤ R
[2τ+1, 2τ+2 − 1] ρ−2ρ R < dwj ≤ ρ−1ρ R
...
[2τ+ρ−1, 2τ+ρ − 1] 0 < dwj ≤ 1ρR
,
where ρ = ⌈ Rdsj ⌉, R is the transmission range, and τ is a small
integer. Thus, this gives farther receivers higher priorities to
rebroadcast.
On the other hand, an implicit inhibition strategy is adopted
to eliminate redundant WARNs. Specifically, the reception of
a WARN from a vehicle in the back of j in the same group
serves as an implicit message to prevent j from competing
again. On receiving such a rebroadcast, j will remove the mes-
sage in its waiting queue. Furthermore, to improve reliability,
Design and Implementation of a Bicycle Tour Logging System Based on 
Smart Phones 
 
Chien-Cheng Wu, Lien-Wu Chen, and Yu-Chee Tseng 
Department of Computer Science, National Chiao Tung University, Hsinchu, Taiwan 
{ccwu, lwchen, yctseng}@cs.nctu.edu.tw 
 
摘要 
 
自行車使用者出遊時常會面臨一些狀況，例如臨時想要查詢與分享旅遊記錄，或在
旅程中使用手機時發現電量不足等。在資訊科技的蓬勃發展下，行動計算可以大幅增
進騎乘自行車的便利性，而我們所設計的樂活單車通(LOHAS BikeTel)結合了智慧型手
機、感測器、GPS 定位系統、Google Map 與充電裝置，使得路徑資訊與遊記收集分享
等功能可以更方便地應用在單車旅行中。在 LOHAS BikeTel 中，自行車使用者能夠：
(1)利用語音辨識，將口述心得轉成文字上傳至所建構的 LOHAS BikeLog 部落格或
Facebook 社群網站；(2)記錄上傳旅行照片、GPS 路徑資訊，或搜尋他人的旅遊記錄；
(3)利用 GPS 省電演算法節省使用 GPS 的電力消耗，並搭配坡度資訊與充電模組來進
行充電以延長手機使用時間，LOHAS BikeTel 提供了騎士間新型的社群資訊交流平台。 
 
關鍵字：Android、GPS 省電演算法、資通訊技術、位置感知服務、智慧型手機 
 
ABSTRACT 
 
Cyclists frequently encounter some troubles during their bicycle tours, such as that 
cyclists cannot search, log or share the travel record to their friends, and the mobile phone 
sometimes is out of battery in the cycling. This paper proposes a bicycle tour logging system, 
called LOHAS BikeTel, that combines smart phones, sensors, GPS, and Google Map to 
provide the following features: (1) cyclists can upload and share their text messages by speech 
recognition to LOHAS BikeLog or Facebook by smart phones, (2) users can track their 
cycling path and show the pictures just taken during their bicycle travel tours, (3) it adopts 
GPS power-saving algorithm to prolong the battery lifetime and helps cyclists recharge their 
batteries by charging devices based on slope information. LOHAS BikeTel provides a new 
social platform for cyclists. 
 
Key Words: Android, GPS Power-saving Algorithm, Information and Communication 
Technology, Location-based Service, Smart Phone 
 
 
 
 
 
 
 
圖 1：LOHAS BikeTel 系統元件關係圖 
 
a. 網站服務端： 
 
1. 使用者可以看到自己的所有旅遊紀錄與好友公開分享的旅遊紀錄。 
2. 使用者可以針對好友傳送文字訊息，如讚美訊息。 
3. 尋找路徑服務：這項服務是針對使用個人電腦瀏覽網頁時，可以根據資料庫有
哪些路徑資料，提供訪客查詢，並配合訪客端出發時的所在位置，找出到達目
的地的路徑。 
 
b. 訪客端： 
 
1. 使用者可以看到目前自己所在位置與經過旅遊的路徑。 
2. 使用者可以和網站服務端溝通，並上傳文字訊息發布到網站上。 
3. 假如系統使用於某一景點附近，則可以輸入景點的名稱，便可以立即知道使用  
者位置與該景點附近的相關資訊。 
4. 可以觀看系統所傳來的導覽資訊例如圖片，網頁，影音資訊等，還可以回顧之
前所傳來的資料。 
 
本論文提出的系統架構如圖2 所示，騎乘者將攜帶具3G 或是Wi-Fi 功能並具有GPS 
收發器之行動裝置(Mobile Devices)。騎乘途中行動載具將不間斷地接收來自GPS 系統
之標準資料，並進行經緯度定位。定位資訊將會透過3G或者是Wi-Fi網路將騎乘者目前
相關資料回傳至網路伺服器(Web Server)。系統會員(Members)可經由登入認證來連入網
路伺服器。登入系統後可以利用景觀建築、休息站與某些地標來尋找路徑。 
 
圖 3：LOHAS BikeTel 軟體元件關係圖 
 
在 Web Server 中提供 Blog、Geo-information Map 網頁與資料庫服務，其中 Blog
網頁服務稱為 LOHAS BikeLog，LOHAS BikeLog 提供介面讓自行車騎士將旅行過程
中所拍下的照片、聲音或者是文字訊息與好友分享。另外，Geo-information Map 網頁
服務可以讓使用者查詢自己與好友過去的旅遊路線。而上述的照片、聲音、文字訊息
與路徑資料皆存放於 Web Server 資料庫中。手機(Phone)裝載於自行車上，提供自行車
騎士路徑與遊記紀錄的工具。 
 
3 GPS 省電演算法 
根據 1.2 節相關文獻探討結果可知，持續長時間地開啟 GPS 定位，會消耗大量電能
使得手機的電池快速耗盡，因此有必要動態調整 GPS 接收器開啟的時間以延長整體手
機的使用時間。在本節中，我們將設計一個 GPS 省電演算法動態地調整 GPS 接收器
開啟與定位記錄的頻率，以達到省電的效果。為了避免關閉 GPS 的時間太長影響到定
位的精度或者是漏失某些關鍵的旅程記錄，所以我們的演算法結合自行車旅行的路徑
特徵與手機內嵌式感測器的移動偵測，來做回饋調整，以期在省電模式下 LOHAS 
BikeTel 系統仍可以維持定位精度與旅遊紀錄功能，圖 4顯示省電演算法元件方塊圖。 
 
圖4：省電演算法元件方塊圖 
Compass Sensor，當確定 7..騎士沿著沒有岔路的車道上勻速前進後進入 Sleep Mode。
在進入 Sleep Mode 後關閉 GPS，改為開啟 G-Sensor 與 Compass Sensor，以維持定位
精度，避免因為 GPS Sleep 太長時間而漏失重要的位置變化記錄。如圖 6 所示，充滿
電的電池電量為 1340 mAh，GPS receiver 之電流消耗為 30 uA，G-Sensor、Compass 
Sensor 之電流消耗為 5 uA 採用省電演算法之後的手機電池使用時間延長了約 2.23 倍。 
 
圖6：電力消耗比較(只考慮GPS與Sensor電能消耗) 
 
FUNCTION Start_Active_Mode() 
BEGIN 
   GPS_log in  
defaultFrequency = 1 Hz 
Time_counter = 0 
DETERMINE the biker stayed or moved BY GPS 
signals 
Time_counter++ 
IF Time_counter > T2 THEN goto Normal Mode  
ELSE IF Time_counter > T1 THEN goto Sleep Mode 
ELSE wait,check again 
END 
FUNCTION Lazy_Mode() 
BEGIN 
GPS_log in lazyFrequency 
Time_counter = 0     
DETERMINE the biker’s route have fork path 
or  not  BY route Database 
IF  the biker’s route  have no fork path 
THEN goto Sleep Mode  
ELSE IF move Sensor THEN goto Normal  
Mode  
ELSE wait,check again 
END 
FUNCTION Normal_Mode() 
BEGIN 
Time_counter = 0 
GPS_log in normalFrequency 
DETERMINE the biker stayed or moved BY GPS 
signals 
Time_counter++ 
IF  Time_counter > T3 goto Lazy Mode  
ELSE IF the biker speed up 
goto Active Mode 
ELSE wait ,check again 
END 
FUNCTION Sleep_Mode() 
BEGIN 
  GPS_log turn off 
 Time_counter = 0 
  DETERMINE the biker’s move or stay 
IF moved THEN goto Lazy Mode,  
ELSE stay in Sleep Mode wait check again 
END 
圖7：省電演算法Pseudo code 
b. Client 端： 
  如圖10(a)進入主畫面，在Map分頁的地圖中顯示了一個藍色人型標記，代表目前
手機的實際位置在地圖上的的對應；另外人型標記會隨電子羅盤的數值而旋轉，因此
人型標記的頭部總是指向手機持有者所面對的方位。(註：地圖的正上方永遠為地理北
極)。地圖正下方的+號與-號按鈕，分別可以放大地圖的顯示層級與縮小的圖的顯示層
級。如圖10(b)根據GPS路徑資訊，畫出距離對高度的折線圖如圖10(c)，變化率即是坡
度。 
 
(a)                (b)                  (c) 
圖 10：選取記錄 Track 的模式/坡度折線圖 
 
如圖11在Blog分頁中，可用語音辨識的型式輸入文字訊息並發佈至LOHAS BikeLog
部落格或Facebook 
 
圖 11：語音辨識輸入/語音轉換成文字 
 
如圖 12 若選擇照相功能則可可選擇上傳至 Facebook 
 
圖 15：充電裝置安裝於腳踏車上 
 
我們將坡度的資訊與數位地圖結合，經過上坡與下坡路徑與皆會向使用者發出提
示，如圖 16 開啟預設路徑模式後，可顯示接下來要通過的路段是上坡以判斷是否進
行充電動作。 
 
圖 16：上坡通知 
 
5 結論 
 在本論文中，我們結合智慧型手機與位置感知服務，設計並實作了一個自動化的
自行車旅遊紀錄系統 LOHAS BikeTel，使得自行車騎士可以利用語音辨識，將口述心
得轉成文字上傳至部落格或網誌，或者是將旅途中的拍攝照片、經過的路徑資訊上傳
至系統中分享給朋友，更進一步，利用路徑資訊動態調整 GPS 使用來減少電能消耗，
也利用坡度資訊對手機電池進行充電。本系統設計了 GPS 的省電演算法，並提供了騎
士間新型的社群資訊交流平台。 
 
6 誌謝 
 Y.-C. Tseng's research is co-sponsored by MoE ATU Plan, by NSC grants, 
97-3114-E-009-001, 97-2221-E-009-142-MY3, 98-2219-E-009-019, 98-2219-E-009-005, 
and 99-2218-E-009-005, by ITRI, Taiwan, by III, Taiwan, by D-Link, and by Intel. 
 Surveillance On-the-Road: Suspicious Vehicle Tracking and 
Reporting Based on V2V Communications 
Lien-Wu Chen, Kun-Ze Syue, Yu-Chee Tseng, and Jen-Hsiang Cheng 
Department of Computer Science, National Chiao Tung University, Hsinchu, Taiwan 
{lwchen, kzsyue, yctseng, jhcheng}@cs.nctu.edu.tw
摘要 
在本篇論文中，我們提出了在道路上的每
台車輛均配備了影像攝影機並結合車牌辨識
技術來識別可疑車輛(例如贓車)，以及利用車
載無線通訊介面與車間通訊方式來協同追蹤
可疑車輛和快速回報此發現給附近的警車。我
們設計的機制不需要任何路側基礎設施之輔
助，主要元件為追蹤模組與回報模組，追蹤模
組在必要時可將追蹤任務換手至鄰車以持續
追蹤可疑車輛，並可不依賴數位地圖而偵測出
交叉路口的存在；回報模組則可在所偵測出的
交叉路口利用協同式路口導引方式來回報可
疑車輛之最新位置至附近警車。模擬實驗結果
顯示我們所提出之方法可有效地避免重廣播
不必要的訊息，並可大量地節省網路上廣播訊
息的頻寬使用。除此之外，我們還設計並實作
出一個新型車載監視與感測系統，整合了各式
感測裝置、無線通訊技術與車間通訊功能，以
達成車輛追蹤與回報的目的。 
關鍵詞：特定短距通訊、車牌辨識、車載監控
網路、車載追蹤、車載無線存取。 
一、前言 
隨著車載無線存取 /特定短距通訊標準
(Wireless Access in Vehicular Environments 
/Dedicated Short Range Communications, 
WAVE/DSRC)和嵌入式監視系統技術的快速
發展，車輛可配備車上通訊裝置與影像攝影機
來監控發生在道路上的各種事件，其應用包括
車輛安全[1]、煞車示警[2]和市區監控[3]等。
本篇論文的目標是追蹤可疑車輛並回報至附
近的警車，而且無需依賴高成本的基礎建設。
現有研究成果針對車輛追蹤與回報這兩個目
的往往都需要依賴佈建大量的路旁基礎建設
與感測器來實現[4–8]。 
在以車輛追蹤為目的之相關研究成果
中，文獻[4]利用無線感測技術設計出一個車
載追蹤系統架構，其中路旁基礎設備(Road 
Side Units, RSUs)被設置在沿途的道路上，並
週期性不間斷地追蹤道路上的車輛。此外，這
些RSUs通常會透過有線網路連接後端的基礎
設施，接收來自於中控伺服器的查詢以及回應
必要的相關資訊。文獻[5]設計以無線區域網
路(Wireless Local Area Network, WLAN)為基
礎的即時車載定位系統，提出的解決方案是使
用類神經網路搭配數位地圖資訊，並以車輛附
近 WLAN 存取點(Access Points, APs)的接收
訊號強度為特徵值，做定位訊號樣本空間的比
對訓練，使其達成車載定位與追蹤的功能。 
然而，在這兩篇文獻所提的內容中，都必
須在道路旁安裝大量的 RSUs 和 WLAN APs
來分別提供目標車輛資訊和接收來自目標車
輛的訊號。文獻[6]在車載隨意網路(Vehicular 
Ad Hoc Netowrks, VANETs)環境中提出一個
智慧型停車系統，其中包含了贓車追蹤機制，
當竊賊沿著道路行駛贓車期間，路途中所經過
的RSUs可以偵測到來自於贓車所發出的停車
訊號(Parking Beacon)，並可根據 Beacon 中夾
帶的停車場識別碼回報贓車目前的位置到停
車場處理中心。但是，如同文獻[4]和文獻[5]，
這類的處理機制都需要沿著道路上大量佈建
RSUs 來達成贓車的追蹤。 
另一方面，在以回報為目的之相關研究成
果中，文獻[7]提出一個 ANTS 機制來尋找靠
近於查詢者的特定車輛，此機制已經使用在文
獻[8]之中，ANTS 尋找方式主要是基於觀察迷
路螞蟻會用目前位置為起點以螺旋狀路徑來
尋找巢穴的現象，透過在路口設置大量的區域
節點(Local Nodes)，負責紀錄車輛往來資訊和
接受來自車輛的查詢訊息。然而，在路口佈建
Local Nodes 需要使用大量的 RFID Readers 和
WLAN APs，會造成佈建上鉅額的成本開銷，
更重要的是在郊外與鄉村地區建置 Local 
Nodes 是不符合成本效益的。 
因此，我們針對可疑車輛追蹤與回報提出
無需基礎設施的解決方案(Infrastructure-less 
Framework)，此 Framework 包括了追蹤模組
(Tracking Module) 與 回 報 模 組 (Reporting 
Module)。在追蹤模組的機制設計中，可在必
要時將追蹤任務換手至鄰近車輛以持續追蹤
可疑車輛，並可不依賴數位地圖而偵測出交叉
路口的存在；而回報模組的機制設計則是可在
所偵測出的交叉路口利用協同式路口導引方
式來回報可疑車輛之最新位置至附近警車。 
 表一、符號摘要表 
 
Framework，在 Tracking Module 方面，我們設
計了 Tracking Handoff 機制和 Intersection 
Detection 機制來持續追蹤 vs；在 Reporting 
Module 方面，我們設計了 Rebroadcast Deci-
sion 機制、Intersection-guiding Search 機制、
以及 Memory-based Backoff 機制來有效率地
傳送 mr至附近的警車 vp，表一為在本論文中
所使用到的符號摘要表。 
(一) 追蹤模組 
在車載監控網路中，藉由車上所裝備的
Video 攝影機，每台車輛 i 可以對其 vf進行拍
照的動作，接著以 LPR 技術辨識出其車牌號
碼，然後根據經由網際網路下載或附近的警車
來建立的贓車資料進行車號比對。當 vf被識別
為 vs後，i 將不斷地進行拍照辨識以持續追蹤
vs，若 i 或 vs改變行駛車道或在路口轉向，透
過我們所設計的 Tracking Handoff 機制可立即
將追蹤工作換手給鄰近車輛，以達成協同式追
蹤 vs 的目的。除此之外，為了重建 vs 的移動
軌跡以及減少不必要的位置回報，我們還設計
一個 Intersection Detection 機制，可在追蹤 vs
的期間將 vs最新經過之交叉路口回報給 vp。 
1) Tracking Handoff Scheme：車輛 i 在一
般模式 (Normal Mode) 和緊急模式 (Urgent 
Mode)將分別以 tn和 tu秒的間隔來識別 vf的車
牌號碼，其中 tn > tu，在 vf被識別為 vs之前，
i 將處於 Normal Mode 來識別 vf的車牌號碼，
一旦 vf被識別為 vs後，i 將馬上回報此發現至
附近的警車 vp，並且切換至 Urgent Mode 來識
別 vf的車牌號碼以持續追蹤 vs。如果在追蹤期
間，由於車道改變或路口轉向的緣故，導致 i
無法繼續追蹤 vs時，則 i 將會把追蹤的工作立
即換手至其鄰近車輛。 
如果當車輛 i 在 Normal Mode 偵測 vf為
vs時，i 將立即切換成 Urgent Mode 來持續追
蹤 vs。在處於 Urgent Mode 期間，一旦 i 不能
夠再偵測到 vs，i 將立即廣播(Broadcast)一個 
 
圖三、將追蹤工作換手至鄰近車輛之步驟 
 
追蹤換手訊息 mh給鄰近的車輛，當這些車輛
接收到 mh後，它們將從 Normal Mode 切換成
Urgent Mode 以快速偵測 vs，一旦鄰近車輛 j
偵測到 vs 後，便完成來自 i 的追蹤工作換手
程序，而其他未偵測到 vs 的鄰近車輛將在經
過事先給定之換手偵測時間後自動從 Urgent 
Mode 切換回 Normal Mode。同樣地，之後處
於 Urgent Mode 的 j 一旦不能偵測到 vs，j 將
重複 i 所做過的追蹤換手步驟。 
以圖三為例，A 車目前為正處於 Urgent 
Mode 來持續追蹤可疑車輛 B，一旦 A 車在
Urgent Mode 不能再偵測到 B 車，A 車將廣播
mh給 C 車和 D 車，此時，收到 mh的 C 和 D
車為了快速偵測B車，將立即從Normal Mode
切換成 Urgent Mode。一方面，當 C 車已經偵
測到 B 車後，此追蹤工作已從 A 車換手至 C
車;另一方面，在經過一段事先給定的換手偵
測時間之後，D 車將從 Urgent Mode 切換回
Normal Mode 以減少不必要的偵測工作。 
2) Intersection Detection Scheme：如圖四
所示，外圈為每台車輛 i 的訊息接受範圍，而
內圈是一個可調整參數來過濾鄰近車輛 Ni。根
據 i 的行駛方向，我們將把訊息接受範圍分割
成四個扇形區域，其分別對應為車頭區域 sH、
車尾區域 sT、車右區域 sR 和車左區域 sL。另
外，我們定義 sH、sT、sR、sL的角度分別為 θH、
θT、θR、θL、其中 θH = θT、θR = θL、θR = 180-θH，
而位置處於內圈區域的車輛將不被包含在四
個扇形區域中。由於每台車輛會週期性地廣播
包含位置資訊的 Beacon 訊息，因此 i 可以獲
得在訊息接受範圍內的 Ni 位置分佈，也就可
以判斷是否有 Ni 落在 sH、sT、sR 和 sL 中。除
了位置資訊，vp 也會不斷地宣告它的身份於
Beacon 訊息中。 
藉由檢查每個扇形區域是否存在 Ni，i 可
以偵測出它自己是否正位於路口(Intersection)
或路段(Road Segment)。偵測機制為如果沒有 
 減少回報 mr到附近的警車 vp所造成的網路控
制訊息負擔(Control Overhead)，我們設計了
Rebroadcast Decision 機制、Intersection-guiding 
Search 機制和 Memory-based Backoff 機制來
有效率地降低 mr 的重廣播 (Rebroadcast)數
量。在 mr 的訊息封包中，包含了發現車輛的
ID、vs 的位置與其車牌號碼、以及訊息序號
(Sequence Number)。 
1) Rebroadcast Decision Scheme：在此機
制中，車輛會根據自身位置與 mr 發送者
(Sender)位置及其回報方向 dr來決定是否要幫
忙重新廣播，其詳細步驟如下: 
1. 一旦車輛 i 辨識出 vf 為 vs，i 將立即發送
mr回報此發現給附近的警車 vp，當車輛 j
收到來自 i 發送的訊息 mr，j 首先根據 Nj
的位置分佈來偵測目前所在位置型態為
路口或路段。 
2. 如果 j 目前正位於路口，它將立即幫忙重
廣播 mr；相反地，如果 j 目前正位於路段，
它將檢查在 dr 方向是否有 Nj 位於對應的
扇形區域 sC中。假如有 Nj位於 dr方向的
sC，mr 將被重廣播;否則，mr 將被忽略以
避免不必要的廣播。以圖四(a)為例，由於
發送者 A 車落在 B 車的 sT，因此 dr方向
為從 j 的 sT到 sH，故在 dr方向的 sC即為
sH。 
相同地，在其它車輛接收到從 i 發送出的
訊息 mr 後，它們首先偵測目前的位置型態為
路口或路段。一方面，位於路口的車輛將廣播
mr 至所有的扇形區域;另一方面，位於路段的
車輛根據在 dr 方向的 sC是否存在鄰近車輛來
決定是否廣播 mr。如圖四為例，基於目前的
所在位置和 dr，而且沒有鄰近車輛落在 C 車
和 E 車的 sR，因此 C 車和 E 車決定不重新廣
播 mr。反之，D 車的 sT存在鄰近車輛，因此
D 車決定重新廣播 mr。 
2) Intersection-guiding Search Scheme：基
於上述的 Rebroadcast Decisions Scheme，我們
更進一步提出一個 Intersection-guiding Search 
Scheme 來導引 mr傳遞至附近的警車 vp，其處
理機制如下所述:  
1. 以圖五為例，當 A 車識別其同車道之前方
車輛 vf為可疑車輛 vs後，便會馬上發送一
回報訊息 mr通知附近的警車 vp，從 A 車
所發出的 mr 將依序以車間通訊廣播至圖
中的四個路口，其中 B 車位於第一個路
口，C 車與 D 車位於第二個路口，而 E
車位於第三個路口。 
圖五、回報可疑車輛之發現至附近警車 
2. 以圖六(a)的第一個路口為例，B 車偵測到
mr是來自於 sT (從 A 車到 B 車)，而且 B
車正位於路口的位置。另外，由於 B 車先
前被遇過警車 vp，所以 B 車決定重廣播
mr 且不指定導引方向 dg (即以“Broadcast 
to: sC”代替“sH”、“sT”、“sR”、或“sL”)。如
此一來，位於第一個路口且接收到來自 B
車重廣播 mr的車輛，將自行決定 mr的導
引方向 dg。 
3. 以圖六(b)的第二個路口為例，C 車偵測到
mr是來自於 sH (從 B 車到 C 車)，而且 C
車正位於路口。由於 C 車在 10 秒前曾遇
過警車 vp，所以根據記憶中 vp的位置，C
車將導引 mr至其 sL。如此一來，只有在 C
車的 sL 區域之鄰近車輛將試著重廣播來
至於 C 車輛所發送 mr。而對於落在其它
扇形區域的鄰近車輛，因為 mr中 dg已經
被指定(表示為“Broadcast to: sL”)，故將忽
略來自 C 車的 mr。C 車所指定的導引方
向 dg 是由 C 車目前位置往記憶中警車位
置。 
4. 以圖六(c)(d)的第三個路口為例，E 車偵測
到 mr是來自於 sH (從 D 車到 E 車)，而且
E 車正位於路口，所以根據 C 車對於警車
vp的記憶，mr應該被重廣播到 E 車的 sR。
然而，E 車在五秒前遇過 vp，其記憶資訊
比 C 車的記憶更新。所以，根據 E 車對警
車的記憶，mr將被導引更新至 sL。因此，
警車 vp 可以在下一次的重廣播收到 mr，
而不用將 mr重廣播到路口的其他路段。 
由於 mr可以經由車輛對警車 vp的記憶而
在路口被導引，重廣播 mr 的數量將可被有效
地減少，同時也能減少由於訊息碰撞(Message 
Collision)所造成的回報延遲時間，更可避免使
用氾濫式廣播造成網路控制訊息的負擔。 
 表二、EDCA 預設參數 
 
制中，mr將使用最小的 AIFSN 來獲得最大的
傳送優先權，並隨機選擇一個 Memory-based 
Backoff Timer 來減少 mr的重廣播次數。 
當車輛 i 接收 mr後，i 首先決定是否要重
廣播此 mr，如果 i 決定要重廣播此 mr，i 將根
據其遇到警車 vp 之已經過時間 ti 來決定其
Backoff Timer BTi。如果 i 之前從未遇到過
vp，則 ti將被設定為∞。因此，當車輛 i 具有
較小的 ti 時，則代表著有較高機會取得較小
的 BTi，其選擇方法如下： 
 
τ 為給定之正整數，ρ 為 Backoff Class 的數量，
T 為車輛關於 vp記憶的最大有效時間。 
如此一來，當最近遇過 vp 的車輛在幫忙
重廣播 mr 時，便有較高機率選擇到最小的
Backoff Timer 而成為第一個重廣播 mr的導引
者。此外，我們更進一步使用 Implicit Inhibition 
機制[11]來消除不必要的 mr重廣播，當車輛接
收到相同 Sequence Number 的 mr時，便代表
收到 Acknowledgement，則不需要再去幫忙重
廣播此 mr。另一方面，為了避免沒有任何重
廣播車輛成功地幫忙廣播 mr，Sender 車輛的
Backoff Timer 將被設定成 2τ+ρ，一旦 Sender
車輛倒數到 0，則重新傳送一個新 Sequence 
Number 的 mr 來與之前的 Acknowledgement
有所區分。 
四、效能評估 
在本節中，我們使用 QualNet 5.0 網路模
擬器[12]並加入必要之修改來作模擬實驗的
效能評估，如圖七所示，實驗環境拓樸為 5 km2
的城市區域，每個街區的大小為 1 km2。所有
車輛都均勻地散布在各個街道上，隨機選擇出 
 
表三、模擬實驗參數 
 
 
圖七、模擬實驗使用之曼哈頓城市拓樸 
 
一可疑車輛與一警車，每台車輛在路口隨機選
擇前進、右轉、左轉三個方向其中之一。表三
為我們所使用的模擬實驗參數，並設定 tu = 1 
s、tn = 10s、θ = 60o、τ= 1、ρ= 3、T = 30 s。 
 
 
圖八、回報訊息之發送數量比較 
 
在接下來的效能評估中，我們比較回報訊
息的發送數量以及回報至警車的傳輸時間延
遲，我們所設計的機制會與氾濫式廣播
(Flooding Scheme)和智慧型廣播 (Intelligent 
Broadcast Scheme)[16]做效能比較。圖八為在
不同的總車輛數(750、1000、1250、1500、1750)
下所測量出的回報訊息發送數量，由圖中可以
觀察到我們所提出機制有著較低的回報訊息
發送數量，這是由於 Reporting Module 可以有
效地根據警車位置的記憶在每一個路口導引
回報訊息；相反地，氾濫式廣播與智慧型廣播
會在路口的每一個路段重覆廣播回報訊息，所
以二者的回報訊息發送數量會隨著總車輛數
而增加。 
 
 
圖九、封包碰撞率比較 
 
圖九顯示在道路上不同的總車輛數所造
 (二) CO2感測器 
如圖十三(b)所示，我們使用 H-550EV 
CO2感測器[15]整合至 Jennic JN5139 [17]，並
透過 UART 介面與 Mini2440 連接，H-550EV 
CO2感測器可達到 0 ~ 5000 ppm 的量測範圍
以及±30 ppm 的精確性，JN5139 具備 16MIPs 
32-bit RISC 處理器、與 2.4GHz IEEE 802.15.4
相容之無線電收發器、192kB ROM、96kB 的
RAM，還支援 Mesh Networking 和 Packet 
Routing 的網路功能。為了取得自 CO2感測器
所偵測到的二氧化碳濃度，我們開啟 Linux
中的 Character Device (例如“/dev/ttySAC#”) 
從序列埠來讀/寫其感測資料。 
(三) 3G 模組 
如圖十三(c)所示，我們使用 Wavecom 
Q2403A GSM/GPRS/CDMA 模 組 連 接 至
Mini2440，並使用 AT commands 來加以控
制。藉由 ARM9 開發板的指令發送來執行
SMS、MMS 和 Video Calls，我們利用 AT 
commands 控制 GSM/GPRS modem 來完成傳
送簡訊的動作。 
(四) Camera 模組 
如圖十三(d)所示，我們使用 CMOS 光學
感測器CAM130接收來自Mini2440的拍照指
令以擷取 Full-resolution 照片，並透過 Camera
傳輸介面把影像資料傳送至 Mini2440。如同
CO2 感測器，我們開啟 Linux 中的 Character 
Device (例如“/dev/camera”)來取得 CAM130
的原始影像資料。我們使用 Array 來儲存讀取
自 Character Device 的資料，並藉由 Linux 
Frame Buffer 處理機制將擷取到的影像資料
複製到對應記憶體空間，使影像內容可以同
時顯示在 TFT 螢幕上。 
為了將Camera模組所擷取到的影像資料
輸出成圖檔，我們靜態連結 libjpeg 函式庫至
可執行程式以將 16-bit color 圖片資料轉換成
24-bit color格式(RGB888)，並將16-bit的RGB 
資料透過顏色補償(Color Compensation)使圖
片更清晰。 
(五) GPS 接收器 
如圖十三(e)所示，我們使用 uPatch300 
[18]來獲得 GPS 位置資訊，uPatch300 具有嵌
入式的 GPS 天線，遵循 NMEA (National 
Marine Electronics Association) 0183 協定
[19]，並使用高感度 SiRFstarIII 晶片來提供地
理位置資訊以完成車輛位置的定位。 
(六) WAVE/DSRC 通訊裝置 
如圖十三(f)所示，WAVE/DSRC 通訊裝
置是使用 ITRI  WAVE  Communication 
Unit (IWCU [20])，可直接經由 Ethernet RJ-45
埠連接至 Mini2440，IWCU 具備兩個 IEEE 
802.11p 通訊介面和一個 Ethernet 網路埠， 
Mini2440 可透過標準的 Linux Socket APIs 
(例如 bind()、sendto()和 recvfrom())來直接傳
送 UDP 封包，然後由 IWCU 將 UDP 封包轉
為車載通訊環境專用短訊息 (WAVE Short 
Message, WSM [21])。 
(七) Prototype 系統展示 
我們整合了下列 LPR 相關功能至 VS3：
車牌定位(Plate Localization)、車牌定向和縮放
(Plate Orientation and Sizing)、正規化處理
(Normalization)和邊緣偵測(Edge Detection)、
字元切割(Character Segmentation)和光學字元
識別(Optical Character Recognition)，在可疑車
輛追蹤和回報雛型系統展示方面，圖十四(a)
顯示我們在壓克力模型汽車內對一張車輛的
車牌照片進行拍照的動以及車牌辨識的處
理，圖十四(b)顯示此車輛已經被識別為可疑
車輛，圖十四(c)與圖十四(d)分別顯示 VS3 安
裝於汽車內部以及進行可疑車輛的追蹤。 
 
 
圖十四、雛型系統展示 
六、結論 
在本篇論文中，我們整合了嵌入式監視
系統技術與 WAVE/DSRC 車間通訊來達成可
疑車輛的追蹤與回報，在道路上的車輛可形
成一個車載監控網路來追蹤可疑車輛並通報
至附近的警車，並且不需要依賴建置成本高
昂的路邊基礎設施之協助。我們所設計機制
的主要元件為追蹤模組與回報模組，追蹤模
組在必要時可將追蹤任務換手至鄰車以持續
追蹤可疑車輛，並可不依賴數位地圖而偵測
Eco-Sign: A Load-Based Traffic Light Control System for
Environmental Protection with Vehicular Communications
Lien-Wu Chen
Department of Computer
Science, National Chiao-Tung
University, Hsin-Chu, Taiwan
lwchen@cs.nctu.edu.tw
Pranay Sharma
Department of Computer
Science, National Chiao-Tung
University, Hsin-Chu, Taiwan
pranay@cs.nctu.edu.tw
Yu-Chee Tseng
Department of Computer
Science, National Chiao-Tung
University, Hsin-Chu, Taiwan
yctseng@cs.nctu.edu.tw
ABSTRACT
The Eco-Sign system is a traffic light control system for
minimizing greenhouse gases emitted by idling vehicles at
intersections. Eco-Sign provides the following features: (i)
it can notify vehicles to turn on/off their engines based on
expected waiting time for green lights at intersections, (ii)
it can dynamically adjust traffic light timing to minimize
the number of vehicles stopping at an intersection based on
vehicle arrival and departure rates, and (iii) it is a fully dis-
tributed system in the sense that each intersection can learn
its local traffic condition and optimize its traffic sign setting
to prevent congestions and thus traffic jams. Eco-Sign thus
demonstrates a new traffic light control system for environ-
mental protection.
Categories and Subject Descriptors: C.2.1 [Network
Architecture and Design]: Network communications
General Terms: Algorithms, Design, Management
Keywords: Dynamic Traffic Light Control, Environmental
Protection, Ignition Control, Vehicular Communications
1. INTRODUCTION
Traffic congestion in modern cities seriously affects the
living quality and environments. Vehicles on the roads pro-
duce mass air pollution that emits greenhouse gases such as
carbon dioxide, hydrocarbons, and nitrogen oxides. Idling
vehicles caused by traffic jams and red lights at intersec-
tions waste a large amount of fuel and seriously pollute the
air. Studies show that the ratio of man-made dioxide emis-
sions from transportation systems is about 30% [1]. Efforts
have been made to increase the traffic flows in urban arterial
roads [2], to reduce the waiting time at intersections [3], and
to navigate vehicles in congested roads [4].
In this paper, we propose a load-based traffic light con-
trol system called Eco-Sign, which can help determine the
timing of engine ignition at intersections and thus minimize
greenhouse gases emitted by idling vehicles at intersections.
At an intersection, a localization unit (LU) is placed on each
road segment before the intersection to help vehicles know
where they are. In addition, a traffic control unit (TCU)
is connected to traffic lights to control their timing. Each
vehicle equips with a vehicle unit (VU) to receive from LU
the IDs of its road segment and TCU. It then controls its
engine ignition based on the traffic light timing from TCU.
Copyright is held by the author/owner(s).
SIGCOMM’11, August 15–19, 2011, Toronto, Ontario, Canada.
ACM 978-1-4503-0797-0/11/08.
Figure 1: System architecture of Eco-Sign.
In Eco-Sign, a vehicle can get the intersection information
from the first passed LU and register itself to TCU as stop-
ing at the intersection. During the registration process, the
vehicle will receive the traffic light timing from TCU and its
onboard VU can automatically turn off its engine as the re-
maining waiting time is larger than or equal to a predefined
time threshold α. If the engine is turned off by VU, it will be
automatically turned on to pass the intersection at the next
green light as the remaining waiting time is smaller than or
equal to another time threshold β. As passing the second
LU at the intersection, VU will deregister itself from TCU.
According to vehicle registration and deregistration frequen-
cies, TCU can estimate vehicle arrival and departure rates
to achieve dynamic traffic light control.
Eco-Sign can thus help turn on/off engines of vehicles to
reduce air pollution as they are waiting at intersections. On
the other hand, TCU can dynamically adjust the traffic light
timing to minimize the number of vehicles stopping at an
intersection based on the observed vehicle arrival and de-
parture rates. It is a fully distributed system in that each
intersection can learn its local traffic condition and optimize
the traffic sign setting to prevent road congestions. Eco-
Sign thus demonstrates a new traffic light control system
for environmental protection.
2. SYSTEM DESIGN
Fig. 1 shows the system architecture and vehicles’ states
at different locations nearby an intersection. On the inter-
section side, it consists of a LU on each road segment, which
provides the location information to vehicles, and a TCU,
which decides and transmits the traffic light timing. On the
vehicle side, a VU is equipped onboard to receive the traf-
fic light timing from TCU and control the engine ignition
timing.
The Journal of Systems and Software 84 (2011) 2005– 2012
Contents lists available at ScienceDirect
The  Journal  of  Systems  and  Software
jo u rn al hom epage: www.elsev ier .com/ locate / j ss
Measuring  air  quality  in  city  areas  by  vehicular  wireless  sensor  networks
Shu-Chiung  Hua,∗, You-Chiun  Wangb, Chiuan-Yu  Huanga, Yu-Chee  Tsenga
a Department of Computer Science, National Chiao Tung University, Hsin-Chu 300, Taiwan
b Department of Computer Science and Engineering, National Sun Yat-Sen University, Kaohsiung 80424, Taiwan
a  r  t  i  c  l  e  i  n  f  o
Article history:
Received 17 February 2011
Received in revised form 7 May  2011
Accepted 16 June 2011
Available online 23 June 2011
Keywords:
Micro-climate monitoring
Opportunistic communication
Pervasive computing
Vehicular sensor network
Wireless sensor network
a  b  s  t  r  a  c  t
This  paper  considers  a  micro-climate  monitoring  scenario,  which  usually  requires  deploying  a  large  num-
ber of  sensor  nodes  to  capture  environmental  information.  By exploiting  vehicular  sensor  networks  (VSNs),
it is possible  to  equip  fewer  nodes  on  cars  to achieve  ﬁne-grained  monitoring.  Speciﬁcally,  when  a  car
is  moving,  it  could  conduct  measurements  at different  locations,  thus  collecting  lots  of sensing  data.  To
achieve  this  goal,  this  paper  proposes  a  VSN  architecture  to collect  and  measure  air quality  for  micro-
climate  monitoring  in  city  areas,  where  nodes’  mobility  may  be  uncontrollable  (such  as  taxis).  In  the
proposed  VSN  architecture,  we  address  two  network-related  issues:  (1)  how  to  adaptively  adjust  the
reporting  rates  of  mobile  nodes  to  satisfy  a target  monitoring  quality  with  less  communication  overhead
and  (2)  how  to  exploit  opportunistic  communications  to reduce  message  transmissions.  We  propose
algorithms  to solve  these  two  issues  and  verify  their performances  by simulations.  In addition,  we also
develop  a  ZigBee-based  prototype  to monitor  the concentration  of carbon  dioxide  (CO2)  gas  in city areas.
© 2011 Elsevier Inc. All rights reserved.
1. Introduction
After the industrial revolution, the burning of fossil fuels and
many human activities have signiﬁcantly increased the concentra-
tion of carbon dioxide (CO2) year by year. It is widely concluded
that the increase of the CO2 concentration is a major reason to
cause global warming. Therefore, it would be quite interesting
to understand how the CO2 concentration changes over temporal
and spatial domains at a very ﬁne-grained size. This is generally
related to micro-climate monitoring, which intends to collect envi-
ronmental information in a quite small scale (for example, one
measurement per 10 m).
In this paper, we aim at micro-climate monitoring in city
areas by using vehicular sensor networks (VSNs). We  consider sen-
sor nodes whose mobility may  be uncontrollable (for example,
equipping sensor nodes on taxis or buses). Micro-level monitor-
ing usually requires deploying a large number of sensor nodes.
However, through mobility, a sensor node can conduct measure-
ments at many different locations, thereby relaxing the demands
on the number of sensor nodes. Still, this problem poses several
challenges: (1) calibration of sensing data, (2) management and
operation of VSNs, and (3) collection and presentation of sensing
data.
∗ Corresponding author.
E-mail addresses: schu@cs.nctu.edu.tw (S.-C. Hu), ycwang@cse.nsysu.edu.tw
(Y.-C. Wang), chiuanyu@cs.nctu.edu.tw (C.-Y. Huang), yctseng@cs.nctu.edu.tw
(Y.-C. Tseng).
Among the above challenges, we  would like to particularly
address two  network-related issues: (1) how to adaptively adjust
the reporting rates of mobile nodes to satisfy a target monitoring
quality while reducing the communication overhead and (2) how
to exploit opportunistic communications to reduce message trans-
missions. For example, in a crowded area with many cars carrying
sensor nodes, we  can reduce the reporting rates of some nodes
to reduce possible duplication. On the other hand, at those ﬁelds
where the CO2 concentration changes dramatically, a node may
need to increase its reporting rate to improve the accuracy. For
opportunistic communications, a node may  pass its sensing data to
a neighbor which is going to submit a report shortly. Also, a node
which just arrives at an area may  inquire a neighbor (instead of the
central server) the required reporting rate inside the area.
We propose a VSN architecture to measure air quality for micro-
climate monitoring in city areas, where the CO2 concentration may
change over different regions and the number of mobile nodes
could be large. We design two message-efﬁcient algorithms to
address issue (1). In particular, the sensing ﬁeld is divided into
regular grids. Each grid can impose its own reporting rate on the
nodes within its region. The ﬁrst algorithm tries to measure the
changes of the CO2 concentration inside a grid and then determine
the expected number of reports to be collected within that region.
On the other hand, the second algorithm tries to use the changes of
the CO2 concentration and the number of cars inside a grid to deter-
mine the expected reporting rate. To address issue (2), we allow a
node to collect information and submit reports by taking advantage
of its neighbors opportunistically.
0164-1212/$ – see front matter ©  2011 Elsevier Inc. All rights reserved.
doi:10.1016/j.jss.2011.06.043
S.-C. Hu et al. / The Journal of Systems and Software 84 (2011) 2005– 2012 2007
wireless interfaces (in this paper we adopt ZigBee). Periodically,
the central unit collects the detected CO2 concentration from the
external unit and reports the data, together with its current loca-
tion, to the monitoring server. The monitoring server then collects
all data in each predeﬁned time frame and renders the result on a
map  (in this paper, we adopt Google Maps (2010).
To reduce the communication overhead, the central unit of
a vehicular node can also form an ad hoc network with nearby
nodes via their wireless interfaces (for example, Wi-Fi). Such an ad
hoc network would allow opportunistic communications among
vehicular nodes. Therefore, a node can collect information from its
neighbors and help relay other nodes’ sensing data to the monitor-
ing server.
In this paper, we consider two network-related issues in the
micro-climate monitoring problem. First, since a city area is con-
sidered, not only the CO2 concentration but also the density of
vehicular nodes may  change dramatically from time to time. Thus,
one may  need to impose different reporting rates for mobile nodes
in different subareas. We  call this the dynamic reporting rate (DRR)
problem, whose goal is to reduce the communication overhead
on the cellular networks while achieving certain monitoring qual-
ity. Second, to further reduce the reporting overhead, we consider
the possibility of opportunistic communications. When nodes help
relay each other’s reports, some sort of data aggregation can be
achieved. We  assume that each report has a deadline by which time
it has to be submitted to the server so as to provide timely services.
We call this the time-constrained opportunistic relay (TOR) problem.
To achieve our goals, the whole sensing ﬁeld is partitioned into
ﬁxed-size grids G1, G2, . . .,Gn. For the DRR problem, the monitor-
ing server will impose a reporting rate ri on all vehicular nodes
in grid Gi, i = 1, . . .,  n. For the TOR problem, nodes will ﬁnd out
their reporting rates and submit their reports in an opportunis-
tic manner. The monitoring server has a predeﬁned time frame of
T seconds. In every T seconds, the server combines all reports that
it has collected during that frame and renders the result on a map
interface. Below, we present our detailed solutions.
3.1. Solutions to the DRR problem
Since CO2 concentration is dynamic, we need to determine the
expected number of samples to collect from each grid in every time
frame based on the record of the previous time frame. The number
of samples that we need to collect, however, depends on two fac-
tors: (1) the distribution of CO2 concentration in that area and (2)
the number and the distribution of vehicular nodes in that area.
Assuming Gi as the target grid, we present two schemes below.
(1) Variation-based scheme: Intuitively, a higher reporting rate ri
should be set when the variation of the CO2 concentration in
Gi becomes higher, and vice versa. For example, in Fig. 2, since
the CO2 concentration in grids (2, 4) and (2, 5) ﬂuctuates more
quickly than that in other grids, higher reporting rates should be
imposed on these two grids. Contrarily, the CO2 concentration
in grids (1, 5) and (2, 6) is more stable, so lower reporting rates
could be applied to reduce the amount of transmissions.
From the previous time frame, we can calculate the standard
deviation con
i
of all reported values from Gi and the number of
vehicular nodes i that have submitted reports for Gi. We  use
con
i
as an index to estimate the number of samples (denoted
Svar
i
) that we expect to receive in the upcoming time frame. We
suggest setting Svar
i
as a linear function of con
i
:
Svari = avari × coni + bvari ,
where avar
i
and bvar
i
are constants based on the past experience
(larger values mean higher monitoring qualities). Note that
Fig. 2. An example of the reporting rate adjustment.
bvar
i
indicates the smallest number of reports that we expect
to receive. Then, the new reporting rate of Gi can be set to
rvar
i
= Svar
i
/vi.
(2) Gradient-based scheme: The previous variation-based scheme
has no sense of the locations where samples are collected (that
is, two samples collected from different locations of the grid
are regarded as the same). For example, for two samples with a
ﬁxed amount of concentration difference, if these two samples
are taken at very close locations, the change of concentration
is regarded as more signiﬁcant as compared to the case when
the two locations farther away from each other. Therefore, the
concept of “gradient” can be applied to reﬂect these factors.
In this scheme, we  collect two sets of samples, one consisting
of higher values and one consisting of lower values. We  then mea-
sure the gradients of all pairs of samples between these two sets.
Then, the average gradient is adopted to calculate the new report-
ing rate. Speciﬁcally, let Rhigh and Rlow be the sets of the top % and
the bottom % of the concentration readings in Gi in the previous
time frame, respectively. The gradient of two samples x ∈ Rhigh and
y ∈ Rlow can be written as
˛(x, y) = x  − y
dist(x, y)
,
where dist(x, y) is the distance of the two locations where x and y
are sampled. Then, the average gradient between Rhigh and Rlow is
measured as:
˛avg
i
=
∑
x ∈ Rhigh,y ∈ Rlow˛(x, y)
|Rhigh| × |Rlow|
.
Similar to the variation-based scheme, the number of samples
Sgra
i
that we  expect to receive in the next time frame can be set as
a linear function of ˛avg
i
:
Sgra
i
= agra
i
× ˛avg
i
+ bgra
i
,
where agra
i
and bgra
i
are constants based on the past experience.
Then, the new reporting rate of Gi can be set as r
gra
i
= Sgra
i
/vi.
3.2. Solutions to the TOR problem
Through opportunistic communications, a vehicular node can
help relay others’ reports, estimate its own  location when it loses
the GPS signal, and inquire the reporting rate when it enters a
new grid. Our design also includes a randomness mechanism to
S.-C. Hu et al. / The Journal of Systems and Software 84 (2011) 2005– 2012 2009
 0
 2000
 4000
 6000
 8000
 10000
 12000
 14000
6404803202561601286432A
ve
ra
ge
 G
SM
 c
os
t p
er
 ti
m
e 
fra
m
e 
(do
lla
r)
Number of vehicular nodes
Variation-based Scheme
Gradient-based Scheme
Maximum Reporting Rate
Minimum Reporting Rate
 0
 10
 20
 30
 40
 50
 60
 70
 80
6404803202561601286432
Es
tim
at
ed
 e
rro
r (
pp
m)
Number of vehicular nodes
Variation-based Scheme
Gradient-based Scheme
Maximum Reporting Rate
Minimum Reporting Rate
Fig. 4. Comparison of the average GSM short message cost per time frame T and the estimated error of CO2 concentration under different numbers of vehicular nodes.
time frame. We  measure the GSM message cost and the estimated
error of the CO2 concentration.
For comparison, we  develop two schemes, one using the max-
imum reporting rate and one using the minimum reporting rate,
respectively. Such regular rates are also adopted in Chebrolu et al.
(2007) and Juang et al. (2002).
We  ﬁrst observe the effect of different numbers of vehic-
ular nodes on the average GSM message cost per time frame
T and the estimated error, as shown in Fig. 4. The number of
vehicular nodes ranges from 32 to 640. The estimated error is
measured by parts per million (ppm). Explicitly, as the GSM
message cost increases, the estimated error decreases. Using the
maximum reporting rate incurs the highest cost while using the
minimum reporting rate incurs the maximum estimated error. Both
our variation-based and gradient-based schemes can increase the
estimated accuracy while reducing the GSM message cost. The
gradient-based scheme can further reduce message transmissions
with the expenditure of increasing a small amount of estimated
error.
We then observe the effect of vehicular nodes’ velocity on the
average GSM message cost and the estimated error, as shown in
Fig. 5. The velocity range of vehicular nodes are set to [5,25], [35,55],
[65,85], [95,115], and [125,145] km/h. It can be observed that this
factor has low impact on both GSM message cost and the estimated
error. Note that when the node mobility is very low (such as 5-
25 km/hr), the beneﬁt of mobility would degrade slightly since a
node can only obtain data from nearby locations. In this case, the
estimated error will increase.
Fig. 6 shows the impact of the size of the monitored region on the
average GSM message cost and the estimated error. The region area
ranges from 6.4 ×6.4 to 102.4 ×102.4 km2. Changing the region
size has almost no effect on the GSM message cost, because the
number of vehicular nodes is the same. However, the estimated
error increases signiﬁcantly as the region size increases, because
the node density drops fast.
We then vary the number of streets and observe its impact. In
Fig. 7, the number of streets ranges from 10 to 100. Changing the
number of streets has almost no effect on the GSM  message cost
because the number of vehicular nodes does not change. When
there are very few streets (for example, 10), vehicular nodes can
only obtain data from very sparse positions, while results in a higher
estimated error.
From Figs. 6 and 7, we can also conclude that node density has
the most signiﬁcant impact on the estimated error.
Fig. 8 shows the effect of different CO2 event rates on the
average GSM message cost and the estimated error. We  range
the CO2 event rate from 4 to 24 in every time frame. Because
the number of vehicular nodes is constant, changing the CO2
event rate has almost no effect on the GSM message cost. Inter-
estingly, the GSM message cost of the variation-based scheme
suddenly drops when there are 8 CO2 events. The reason is that
the CO2 event rate in the experiment may  not be signiﬁcant
so that smaller reporting rates are set in the variation-based
scheme. On the contrary, the CO2 event rate has signiﬁcant
impact on the estimated error. In particular, since vehicular nodes
report almost a constant amount of messages, increasing the
CO2 event rate will result in a higher estimated error. How-
ever, both the variation-based and gradient-based schemes can
keep quite low estimated errors while reducing the GSM message
cost.
 0
 500
 1000
 1500
 2000
 2500
 3000
 3500
125-14595-11565-8535-555-25A
ve
ra
ge
 G
SM
 c
os
t p
er
 ti
m
e 
fra
m
e 
(do
lla
r)
Velocity range of vehicles (km/hr)
Variation-based Scheme
Gradient-based Scheme
Maximum Reporting Rate
Minimum Reporting Rate
 0
 10
 20
 30
 40
 50
 60
 70
 80
125-14595-11565-8535-555-25
Es
tim
at
ed
 e
rro
r (
pp
m)
Velocity range of vehicles (km/hr)
Variation-based Scheme
Gradient-based Scheme
Maximum Reporting Rate
Minimum Reporting Rate
Fig. 5. Comparison of the GSM short message cost per time frame T and the estimated error of CO2 concentration under different velocities of vehicular nodes.
S.-C. Hu et al. / The Journal of Systems and Software 84 (2011) 2005– 2012 2011
 0
 1000
 2000
 3000
 4000
 5000
 6000
1050900750600450300A
ve
ra
ge
 G
SM
 c
os
t p
er
 ti
m
e 
fra
m
e 
(do
lla
r)
Predefined time frame T (second)
Variation-based Scheme
Gradient-based Scheme
Maximum Reporting Rate
Minimum Reporting Rate
 0
 10
 20
 30
 40
 50
 60
 70
 80
1050900750600450300
Es
tim
at
ed
 e
rro
r (
pp
m)
Predefined time frame T (second)
Variation-based Scheme
Gradient-based Scheme
Maximum Reporting Rate
Minimum Reporting Rate
Fig. 9. Comparison of the GSM short message cost per time frame T and the estimated error of CO2 concentration under different time frame T.
Fig. 10. The formats of our GSM short messages.
Fig. 11. A snapshot of our user interface.
Cooperative Localization for Power Saving in 
Vehicular Long-thin Networks 
Chien-Cheng Wu 
Department of Computer Science, 
National Chiao Tung University, 
Hsinchu, 300, Taiwan, ROC 
ccwu@cs.nctu.edu.tw 
Lien-Wu Chen 
Department of Computer Science, 
National Chiao Tung University, 
Hsinchu, 300, Taiwan, ROC 
lwchen@cs.nctu.edu.tw 
Yu-Chee Tseng 
Department of Computer Science, 
National Chiao Tung University, 
 Hsinchu, 300, Taiwan, ROC 
yctseng@cs.nctu.edu.tw 
 
摘要―本論文提出一個應用於長鏈狀車載網路下的
合作式定位機制(Cooperative Localization Framework, 
CLF)，該長鏈狀車載網路係指沿同一方向移動並具有一領
導成員與一移動軌跡之細長形拓樸車隊，車隊成員可以經
由無線通訊形成車載網路。CLF 先將車隊成員進行分群
(Clustering)，再挑選車隊群組中的特定成員(Anchor)開啟
GPS 並廣播含有位置資訊的定位信號，車隊群組中的其他
成員(Member)不必開啟 GPS 即可藉由接收定位信號，來
計算自己的所在位置。Anchor 與 Member 彼此合作定位
可減少整個車隊中開啟的 GPS 裝置數量，以解決位置感
知服務(Location-Based Service, LBS)持續定位過程中消
耗大量電力的問題，進而延長整個網路的工作時間。 
 關鍵詞―車載隨意網路、長鏈狀網路、省電、定位、
分群 
 
I. Introduction 
 
近 年 來 位 置 感 知 服 務 (Location-Based 
Service, LBS)，已成為現代資通訊行動裝置的重
要應用，尤其以 iPhone、Android Phone 等智慧
型行動手持裝置結合 LBS 服務可以大幅提升這
些裝置的使用便利性。另一方面，隨著高油價時
代的來臨與健康環保意識的興起，騎乘自行車已
經成為國內外的時尚熱潮。例如舉辦各類自行車
旅行[1][2]、自行車競技比賽[3]、建立公共自行
車租賃系統[4][5]等。將資通訊科技與騎乘自行
車的各項活動結合起來，透過手機為自行車騎士
提供 LBS 服務，使得自行車旅行更加生動有趣 
 
 
[6]，而且透過 LBS 服務可以讓自行車競技賽事
的舉辦與城市中的公共自行車管理更加地方
便。由於 LBS 服務的基礎來自於即時與精確的
定位，因此在車載無線隨意網路(Vehicular Ad 
Hoc Network, VANET)與移動式無線隨意網路
(Mobile Ad Hoc Network, MANET)領域中有著許
多針對網路節點定位方法的相關研究，大致可分
為Network-based System與Satellite-based System
兩類[7]，其中以 Network-based System 為基礎有
Time of Arrival (TOA) [8]、Time Difference of 
Arrival (TDOA) [9][10]、Angle of Arrival (AOA) 
[11]與 Received Signal Strength (RSS) [12]等定位
方法；而以 Satellite-based System 為基礎即為傳
統全球衛星定位系統 (Global Position System, 
GPS) [13]。 
然而，此兩系統在不同的環境下，各有其優
點及限制。其中傳統的 TOA 與 TDOA 定位法，
在二維座標系中至少需要三個已知位置的參考
點才能進行唯一定位，且必須注意系統時間的同
步；而 AOA 定位法必須使用高準度指向性天
線，因此必須花費較多的硬體成本；傳統的 RSS
定位法需要額外的資料庫系統輔助，甚至需要事
前先作環境的資料收集(Training)與誤差調整才
能達到一定的準確度；而使用 GPS 全球衛星定
位系統雖然不需額外架設基礎設施，但是在較差
的天候與地理環境下，由於衛星所發射的信號會
被雲層、隧道或其他水泥建築物等阻隔，導致使
用 Satellite-based System 定位技術的定位準確度
 
圖二、合作式車隊定位機制 
 
Network 進行溝通。並且在同一個群組中的
Member 成員可以透過接收來自群組中 Anchor
成員的定位訊號完成定位。 
我們在下節中將會針對此型式網路架構中
GPS 耗電問題提出完整的解決方案，以下是我們
所設計之合作式定位機制的目標： 
1. Biker Clustering: 將整個車隊網路成員進行
動態分群，使得在相同群組內的成員可以藉由
Ad-hoc 方式進行通訊，以及當群組內的成員有
變動時可以快速更新群組拓樸。 
2. Anchor Selection: 在同一群組內選出少數
Anchor 成員來開啟 GPS 裝置以減少車隊中同
時開啟 GPS 裝置的成員數量。 
3. Position Estimation: Member 成員利用 Anchor
成員所廣播的定位訊號與移動軌跡來進行位
置估算。 
 
III. The Proposed Framework 
 
A. 群組形成方法 
如圖三所示，假設在道路上有一車隊沿相同 
方向前進，且每輛車上皆有手機可以進行無線通
訊形成網路。我們將此車隊網路成員進行分群，
在一個群組中的成員可能擔任Anchor或Member
其中之一的角色。在此車隊網路分群的過程中可
能會發生下列三種不同的狀況： 
1. 新建立群組：例如車隊成員們在初始啟動
車隊通訊裝置時會等待一段時間區間 initt ，若在
initt 時間沒有收到來自 Anchor 所發出的 Location 
 
圖三、群組形成 
 
Beacon 則此成員會自己形成一個群組，並且自己
擔任 Anchor 的工作並發送 Location Beacon。 
2. 新成員加入群組：如果新成員啟動車隊通
訊裝置後有收到 Location Beacon，則此新成員首
先判斷自己的行進方向是否與 Location Beacon
相同。若方向不同則忽略，方向相同才會採用為
有效 Location Beacon。我們將此新成員收到有效
Location Beacon 的情形分為以下兩種： 
Case 1:若此新成員持續等待至 initt 時間後，只收
到一個有效 Location Beacon 則會加入目前的群
組，並開啟 GPS 接收器廣播 Location Beacon，
成為 Anchor。 
Case 2: 若此新成員收到二個以上的有效
Location Beacon。則會根據收到 Beacon 的時間
順序直接加入已存在的群組，並停止等待 initt ，
再判斷加入時的位置決定是否開啟 GPS 接收
器，其加入位置判斷方法詳如本節 C 部分所述。 
當 Anchor 開啟 GPS 接收器，在每次廣播
Location Beacon 後，在同一群組內的每位成員接
到 Location Beacon 都會啟動倒數計時，越先倒
數完畢的成員，越先廣播 Location Beacon 擔任
Anchor 的工作。如圖三所示，車隊經分群後分為
⎪
⎪
⎪
⎪
⎩
⎪
⎪
⎪
⎪
⎨
⎧
≤<−
−
≤<
−
−
≤<
−
−
=
+−+
++
+
RD
RDR
RDR
BT
i
i
i
ρ
ρ
ρ
ρ
ρ
ρ
ρ
ρτρτ
ττ
τ
10]12,2[
....................................................
12]12,2[
1]12,0[
1
21
1
(1)
 
 
其中 R 為廣播訊號的可接收範圍 (Broadcast 
Radius)，τ 為一個小整數， ρ 為一個整數代表
Backoff Class 的數目，若 ρ 越大則可區分出的
Backoff Timer 層級越多，反之則越少。Broadcast 
Radius 內先取得重廣播 Location Beacon 優先權
的成員即成為下一個 Anchor，開啟 GPS 接收器
並負責在下一個 Broadcast Radius 所涵蓋的區域
向成員廣播 Location Beacon。 
而如果車隊最前方的成員 A1 電量不足以擔
任 Anchor，仍可選出 A1 後方成員 B 擔任新
Anchor，此時可用 B 所記錄之軌跡來推估未來經
過的路徑以及目前與 B 的距離來進行定位。 
 
C. 位置估算方法 
 
圖四、合作式車隊定位流程 
 
圖五、群組定位 
 
我們假設在同一車隊中的Anchor與Member
成員行進方向皆相同，且已知其 Wi-Fi 天線功率
與傳輸頻率，另外 Anchor 與 Member 之間的距
離為 Wi-Fi One-Hop 訊號可達範圍，而且我們設
定無線通道模型為自由空間傳播模型(Free Space 
Propagation Model)來進行在 Ad Hoc 通訊範圍下
的成員定位，圖四為本文所探討之合作式車隊定
位機制之定位流程圖。首先車隊中的 Anchor 成
員開啟 GPS 接收裝置，讀取自己的位置資料，
並且持續地記錄下來。Anchor 再透過 Wi-Fi Ad 
Hoc 網路介面將所蒐集與記錄的位置資訊放入
Location Beacon 並廣播給 Member 成員，Member
成員接收到定位封包後，根據封包內的位置資訊
計算出自己的位置。 
圖五為一個車隊定位的例子，此群組有四個
Anchor 成員分別為 A1、A2、A3 與 A4，以及五
個 Member 成員分別為 B、C、D、E 與 F。最前
方的成員 A1 開啟 GPS 接收裝置，使用 GPS 定
位並擔任 Anchor 成員的工作，此時其後的車隊
成員成為 Member，但最後方的成員 A4 則經由
群組形成方法成為 Anchor。Anchor 必須在一定
的信號時間間隔(Interbeacon Space, IBS)後，向群
組中的 Member 廣播 Location Beacon。其中
Location Beacon 封包格式定義如圖六所示： 
 (a)Member 在兩個 Anchor 之間 
 
(b) Member 在兩個 Anchor 之前 
 
(c) Member 在兩個 Anchor 之後 
圖七、位置判斷與計算 
IV. Performance Evaluation 
 
在本節中，我們使用 Java 模擬器建立虛擬
車隊網路，模擬同一個車隊的 LBS 應用服務分
別採用傳統 GPS 定位與本文所設計的合作式定
位機制(CLF)所消耗的電池電能以及整體網路工
作時間的比較。在模擬實驗中，手機參數參考
HTC 的 Android 手機 Sensation 產品規格，其鋰
電池容量為 1520 mAh [19]。大部分智慧型手機
內建 GPS 模組在使用內建天線並且於 Enable 
State 時其耗電功率為 400mW 以及 Wi-Fi 模組耗
電功率約為 55 mW [20]，我們採用這些數據做為
模擬實驗的參數。 
在以下的模擬實驗中，自行車隊網路的成員
總數目設定為 50、75、100、200 與 500，行進速
度以每秒 5 公尺至 10 公尺的範圍隨機選取，每
秒更新一次位置資訊與電池所餘電量資訊，每個
數值為 1000 次模擬實驗的平均值。在每次模擬
實驗中，當車隊網路中有任一個成員的電池電量
下降，降到工作電量門檻值時即進行新 Anchor
的選取，當電池電量值降為零時，即判斷該成員
電力耗盡，並記錄工作時間與所消耗總電能。 
圖八顯示在不同車隊成員數目的情況下，各
機制連續使用 10 小時所消耗的總電池電能。由
圖八我們可以發現，由開始模擬到經過 10 小時
為止，整體車隊網路所消耗的總電量一直呈現上
升的趨勢。但是隨著成員數目的增加，其上升的
趨勢漸緩。這是因為單一群組成員數變多，因此
在同一群組中有更多成員可以關閉 GPS 接收
器，改為藉由合作式定位機制輪流開啟 GPS 接
收器取得位置資訊，節省開啟 GPS 接收器所需
消耗的電量。圖九顯示統計至整個網路中全部成
員電力耗盡為止的平均耗電量與車隊成員數關
係。由圖九可以發現當車隊成員節點數目增加
時，車隊成員的平均耗電量下降，這是因為更多
車隊成員可分攤定位所需耗電量而使得電量平
均消耗大幅減少。 
用一個定位錨點與其小部分移動軌跡即可進行
二維平面的定位，可以節省電能消耗並有效延長
整體網路的工作時間。 
 
VI. Acknowledgement 
 
Y.-C. Tseng's research is co-sponsored by 
MoE ATU Plan, by NSC grants, 
97-3114-E-009-001, 97-2221-E-009-142-MY3, 
98-2219-E-009-019, 99-2218-E-009-005, and 
100-2219-E-009-001, by ITRI, Taiwan, by III, 
Taiwan, by D-Link, and by Intel. 
 
VII. Reference 
 
[1] International Cycling Union, http://www.uci.ch. 
[2] Cycling Life-Style Foundation,  
http://www.cycling-lifestyle.org.tw/. 
[3] Taiwan Bike Association,  
http://www.twbike.tw/. 
[4] Cycling in Switzerland,  
http://www.veloland.ch/en/film.cfm. 
[5] R. Luo and Y. Shen, “The Design and 
Implementation of Public Bike Information 
System Based on Google Maps,” In 
International Conference on Environmental 
Science and Information Application 
Technology, vol. 2, pp. 156-159, 2009. 
[6] S. B. Eisenman, E. Miluzzo, N. D. Lane, R. A. 
Peterson, G. S. Ahn, and A. T. Campbell, “The 
bikenet mobile sensing system for cyclist 
experience mapping,” In ACM Embedded 
Networked Sensor Systems, pp. 87-101, 2007. 
[7] N. Deligiannis, S. Louvros, K. Ioannou, A. 
 Garmpis, and S. Kotsopoulos, “An 
Implementation of Time of Arrivals Location 
Positioning Technique for GSM Networks,” In 
Proceedings of the 5th WSEAS International 
Conference on Telecommunications and 
Informatics, pp. 62-69, May 2006. 
[8] K.-W. Cheung, H.-C. So, W.-K. Ma, and Y.-T. 
Chan, “Least squares algorithms for 
time-of-arrival-based mobile location,” IEEE 
Transactions on Signal Processing, vol.52, no.4, 
pp. 1121-1130, Apr. 2004. 
[9] I. Martin-Escalona, F. Barcelo-Arroyo, and M. 
Ciurana, “Passive TDOA location in mobile 
ad-hoc networks,” International Congress on 
Ultra Modern Telecommunications and 
Control Systems and Workshops (ICUMT), pp. 
1218-1225, Oct. 2010. 
[10] R. Yamasaki, A. Ogino, T. Tamaki, T. Uta, N. 
Matsuzawa, and T. Kato, “TDOA location 
system for IEEE 802.11b WLAN,” IEEE 
Wireless Communications and Networking 
Conference, Vol. 4, pp. 2338-2343, Mar. 2005. 
[11] A. Boukerche, H. A. B. F. Oliveira, E. F. 
Nakamura, and A. F. Loureiro, “Vehicular Ad 
Hoc Networks: A New Challenge for 
Localization-Based Systems”, Computer 
Communications, Vol. 31, No. 12, pp. 
2838-2849, July 2008. 
[12] X.-F. Lu, F. Wicker, I. Leung, P. Lio, and X. 
Zhang, “A Location Prediction Algorithm for 
Directional Communication,” International 
Wireless Communications and Mobile 
Computing Conference (IWCMC), pp. 
159-164, Aug. 2008. 
[13] R. Bajaj, S. L. Ranaweera, and D. P. Agrawal, 
“GPS: location-tracking technology,” IEEE 
Computer, Vol. 35, No. 4, pp. 92-94, Apr. 
2002. 
[14] C.-O. Lee, M. Lee, and D. Han, 
“Energy-Efficient Location Logging for 
LEGS: A Load-balancing Emergency Guiding System Based
on Wireless Sensor Networks
Lien-Wu Chen†, Jen-Hsiang Cheng‡, Yu-Chee Tseng‡, Lun-Chia Kuo∗, Jen-Chieh Chiang∗, and Wan-Jung Lin∗
†Department of Information Engineering and Computer Science, Feng Chia University, Taichung, 407, Taiwan, R.O.C.
‡Department of Computer Science, National Chiao Tung University, Hsinchu, 300, Taiwan, R.O.C.
∗Information and Communications Research Laboratories, Industrial Technology Research Institute, Hsinchu, 310, Taiwan, R.O.C.
Email: lwchen@fcu.edu.tw; {jhcheng, yctseng}@cs.nctu.edu.tw; {jeremykuo, jaychiang, wanjunglin}@itri.org.tw
Abstract—LEGS is a Load-balancing Emergency Guiding Sys-
tem using a wireless sensor network. In LEGS, we design a
load-balancing guiding scheme and derive an analytical model in
order to reduce the total evacuation time of people. The proposed
guiding scheme can provide the fastest path to an exit based on
the evacuation time estimated by the derived analytical model.
To the best of our knowledge, LEGS is the first system which
takes the corridor capacity and length, exit capacity, and people
distribution into consideration for analyzing evacuation time and
planning escape paths. Through LEGS, the congestion of certain
corridors and exits can be released to significantly reduce the
evacuation time of people. Analytical and simulation results show
that LEGS outperforms existing works, which can prevent people
from following the local optimal guiding direction with the longer
evacuation time in total. LEGS thus demonstrates an efficient
emergency guiding system for public safety.
Keywords: Home Security, Navigation, Pervasive Com-
puting, Wireless Communication, Wireless Sensor Net-
work.
I. INTRODUCTION
The recent progress of wireless communications and embed-
ded microelectromechanical systems (MEMS) technologies
has made wireless sensor networks (WSNs) more attractive.
Existing works have been made for vehicle security and
tracking [1], emergency guiding and monitoring [2], and
cooperative collision avoidance [3].
For emergency guiding purposes, reference [4] deploys a
large number of active RFID tags in a building. People use
personal digital assistants (PDAs) connected by RFID readers
via Compact Flash interfaces for indoor localization and
emergency guiding. However, reference [4] guides people to
the nearest exit without taking people distribution into account.
Thus, there may be serious congestion in the nearest exit due to
uneven people distribution and unbalanced emergency guiding.
In addition to a large number of active RFID tags, reference
[5] deploys a few Bluetooth devices in a building for indoor
positioning. Similarly, people distribution is not considered in
[5] so that the total evacuation time may become longer due
to the local optimal guiding, which is also occurred in [6].
In this work, we design a Load-balancing Emergency
Guiding System (LEGS) in a 2D indoor environment using a
wireless sensor network that aims to guide people to exits as
Y.-C. Tseng’s research is co-sponsored by MoE ATU Plan, by NSC grants,
97-3114-E-009-001, 97-2221-E-009-142-MY3, 98-2219-E-009-019, 99-2218-
E-009-005, and 100-2219-E-009-001, by ITRI, Taiwan, by III, Taiwan, by D-
Link, and by Intel. This research was supported by Information and Communi-
cations Research Laboratories (ICL), Industrial Technology Research Institute
(ITRI), Taiwan, Republic of China under project number B352SN2200.
Fig. 1. System architecture of LEGS.
soon as possible when emergencies happen. To the best of our
knowledge, LEGS is the first system which takes the corridor
capacity and length, exit capacity, and people distribution
into consideration for analyzing evacuation time and planning
escape paths. In LEGS, a load-balancing guiding scheme is
designed to find the fastest path to an exit for people based
on the evacuation time estimated by the derived analytical
model. The congestion of certain corridors and exits can be
released to significantly reduce the evacuation time of people.
In particular, LEGS can prevent people from following the
local optimal guiding direction with the longer evacuation time
in total.
II. SYSTEM DESIGN
Fig. 1 shows the system architecture of LEGS. Sensor nodes
(i.e., black and white circles) are deployed in a 2D indoor
environment, which form a multi-hop ad hoc network. One
node serves as the sink of the network, and it is connected
to the control host, which issue commands and config the
network. To support emergency guiding services, sensors are
classified as normal sensors (i.e., black circles), exit sensors
(i.e., white circles), and boundary sensors (i.e., nodes with one
or more neighboring sensors belonging to different emergency
guiding trees). Next, we will show how to find the fastest
escape path leading to an exit as detecting an emergency event,
whereas the detail for how to construct an initial guiding
tree rooted by an exit and to prevent people from crossing
hazardous region can be found in our previous work [2].
A. Load-Balancing Guiding
In our system, each sensor knows the capacity and length of
each corridor, the capacity of each exit, and its own location
in the 2D plane. In addition, the number of people around
a sensor will be detected by RFID or image recognition
technologies and periodically reported to the sink by each
sensor. After the sink collects all numbers of people around
Fig. 2. Comparisons of evacuation time under different numbers of people.
(b) If Dkc(i) ≥ NiCi , it implies that some people in sensor
1, 2, . . . , and k − 1 have evacuated from i as the people in k
arrive at i. Ti is modeled by summing the time to move from
k to i, the time to evacuate from i for the remaining people
in TG(i), and the time to move from i to p(i) as follow
Ti = D
k
c(i) + Tc(i) +Di,
where
Tc(i) =
∑m
j=1N
j
c(i) −
∑k
j=1 C
j
c(i) × (Dkc(i) −Djc(i))
Ci
.
In the analytical model, we adopt the maximum time
estimated by Case 1 and Case 2 as Ti since Ti is the time to
evacuate from i for the last person in TG(i), for i = 1, 2, . . . , n.
Thus, the total evacuation time of TG is equal to T1 that can be
obtained by calculating Tn, Tn−1, . . . , and T1 in order, where
D1 = 0 and C1 is the exit capacity.
Fig. 2 shows comparisons of total evacuation time under
50, 60, . . . , 1590, and 1600 people. We deploy 6 × 6 sensor
nodes in a 2D grid plane. There are two exit sensors located
on the bottom left and bottom right corners, and the remaining
sensors are normal sensors. The corridor and exit capacities
are randomly selected from 2 to 6 people/second, and the
moving time for each corridor is randomly chosen from 10 to
15 seconds. We first randomly assign 50% people to all sensors
and then randomly select 9 hot-spot sensors for assigning the
rest 50% people to them. We compare our scheme against the
Smallest Altitude First (SAF) method [2] that guides people
to the neighboring sensor with the smallest hop count to an
exit and the Fastest Flow Speed First (FFSF) method [6]
that guides people to the neighboring sensor with the fastest
moving speed.
From Fig. 2, we can observe that both SAF and FFSF
suffer from the local optimal selection problem, which SAF
may select the escape path with the shortest distance to a exit
but longer evacuation time, and FFSF may select the escape
path with the faster moving speed currently but slower later.
In particular, while SAF has the longer evacuation time than
FFSF under more than 800 people, FFSF has the longer one
than SAF under less than 800 people. Fig. 2 also contains
Fig. 3. Hardware components and the prototype of LEGS.
comparisons of simulation and analytical results. Each simu-
lation is repeated 1000 times and we take the average value.
As can be seen, the simulated and analytical results are quite
close, which justifies the correctness of our derivation.
III. PROTOTYPE IMPLEMENTATION
In our prototype, the sensor is equipped with a TFT LCD
panel controlled by ATmega128 [7], a light sensor TSL2560
[8], and UI buttons as input devices. The front side and back
side of the sensor are shown in Fig. 3(a). The SAF method [2],
the FFSF method [6], and our approach are implemented in
Jennic JN5139 [9], which has a 16MIPs 32-bit RISC processor,
a 2.4GHz IEEE 802.15.4-compliant transceiver, 192kB of
ROM, and 96kB of RAM. In particular, JN5139 allows the
flexibility of supporting mesh networking and packet routing
inside a building.
For the demonstration of indoor people evacuation, we use
a projector to simulate that people escape from an office as
emergences happen, as shown in Fig. 3(b). The evacuation
simulator is developed by Processing [10] to create images,
animations, and interactions. The light sensor can be high-
lighted by a laser pen to trigger an emergency event and three
emergency guiding methods can be selected for evacuating
people to exits. The animation of people evacuation is shown
in the projected screen and the evacuation time is counted until
all people escape from the office. From the screen, we can
compare the evacuation time and guiding directions of SAF,
FFSF, and our approach under different people distribution.
REFERENCES
[1] L.-W. Chen, K.-Z. Syue, and Y.-C. Tseng. A Vehicular Surveillance and Sensing
System for Car Security and Tracking Applications. In ACM/IEEE Int’l Conf. on
Information Processing in Sensor Networks (IPSN), Apr. 2010.
[2] Y.-C. Tseng, M.-S. Pan, and Y.-Y. Tsai. Wireless Sensor Networks for Emergency
Navigation. IEEE Computer, 39(7):55-62, July 2006.
[3] L.-W. Chen, Y.-H. Peng, and Y.-C. Tseng. An Infrastructure-less Framework for Pre-
venting Rear-End Collisions by Vehicular Sensor Networks. IEEE Communications
Letters, 15(3):358-360, Mar. 2011.
[4] L. Chittaro and D. Nadalutti. Presenting evacuation instructions on mobile devices
by means of location-aware 3D virtual environments. In Proc. of the Int’l Conf.
on Human Computer Interaction with Mobile Devices and Services (MobileHCI),
2008.
[5] S. R. Gandhi, A. Ganz, and G. Mullett. FIREGUIDE: Firefighter guide and tracker.
In Proc. of IEEE Int’l Conf. of Engineering in Medicine and Biology Society
(EMBC), 2010.
[6] P.-Y. Chen, Z.-F. Kao, W.-T. Chen, and C.-H. Lin. A Distributed Flow-Based
Guiding Protocol in Wireless Sensor Networks. In Proc. of Int’l Conf. on Parallel
Processing (ICPP), Sept. 2011.
[7] TFT LCD microcontroller, ATmega128. http://www.atmel.com.
[8] Light sensor, TSL2560. http://www.taosinc.com/.
[9] Jennic, JN5139. http://www.jennic.com/.
[10] Processing. http://www.processing.org/.
l 8/23-24Asia Pacific Wireless Communications Symposium (APWCS) d
 , '(:)*de,  !fgTheijkelmnWo^M 
l 8/24+/ pqrstT]B2uv4 wD1xymnNzEF{
|}~WsM 
l +N:8/24211:10^stFu” An Implementation Experience of 
Using WSN on Cold Chain Logistics”4{/st41 ei`a
A4ICw4
 ¡¢£¤£¥¦§¨©ª¡]«¬W­®¯¡M 
l d !\AB: 
  
100年度專題研究計畫研究成果彙整表 
計畫主持人：曾煜棋 計畫編號：100-2219-E-009-002- 
計畫名稱：以安全、節能及遊憩為目的之車載網路系統--子計畫三：車載網路之位置感知服務：設計
一個結合汽車及自行車行動導覽遊憩之系統(3/3) 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 5 2 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 3 3 100%  
博士生 1 1 100%  
博士後研究員 1 1 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 1 1 100% 
人次 
 
期刊論文 1 1 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 3 2 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
