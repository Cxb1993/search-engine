  i 
計 畫 中 英 文 摘 要  
 
中文摘要 
關鍵詞: 系統驗證、設計空間探索、功率模型 
當製程邁入奈米(nanometer)時代，單一晶片上能夠容納的電晶體數目將大幅增加，將
整個系統放入單一晶片的系統晶片(SOC)設計，似乎是必然的趨勢。因此，設計的方法上也
必頇做適當的調整，在系統層級(ESL)就開始做各種設計的最佳化，並確認整合之後的系統
符合所需，才能提升設計的效率，在有限的時間中完成如此複雜的設計。除了電路的效能
與面積之外，系統整體的功率消耗，也是目前大家最關心的問題之ㄧ。目前來說，以功率
模型(power model)為基礎的功率估測方式，似乎是最適合用在 SOC的設計環境當中，可以
根據不同的輸入狀況，快速地提供此功能區塊對應的功率消耗大小。但是現存的功率模型
若是應用到系統層級的設計環境當中，仍然還有相當多的困難，而且一個系統之中通常包
含了各種性質不同的功能區塊(IP)，如何針對各種區塊的性質差異，建立適合的 ESL 功率
模型，也是一個需要深入探討的課題。因此，在這個計畫之中，我們希望能利用本研究群
之前發展功率模型的經驗，發展一套建立系統層級功率模型的方法，針對各種性質不同的
功能區塊(IP)，都能有對應的解決方案。有了這些功率模型，我們便能將其整合成一個系
統層級的功率消耗分析平台，在系統層級(ESL)的功能模擬之中，同時動態地提供對應的功
率消耗大小，以解決系統設計方法中的功率消耗估測問題。 
在系統層級的設計方法之中，最關鍵的步驟就是設計空間探索 (design space 
exploration)，設法找出一個最好的設計架構，能夠在系統的效能、面積以及功率消耗之間，
取得一個適當的平衡。由於這個步驟通常只是根據事先蒐集的一些測試數據(profiling 
data)，直接計算出最佳的設計架構，而不再進行系統的模擬，因此，針對功率消耗這項參
數來說，如果我們能把之前利用功率模型所求得的動態分析結果，準確地轉化成設計空間
探索所需的功耗資訊，就能提供更準確地評估結果，找出最合適的低功率設計架構。這不
只是提供一個平均功率消耗的數字而已，而是必頇隨著這個功能區塊在系統中的使用狀況
做調整，才能提供給設計者較為準確的判斷。因此，在這個計畫的後期，我們希望能夠將
之前發展的 ESL 功率模型整合至現有的設計空間探索平台之中，並搭配適當的 CAD 
algorithm，快速地完成低功率系統的最佳化設計，以進一步提昇整個 SOC 系統的設計效率。 
 
 
  1 
一、計畫的緣由和目的 
 
隨著單一晶片上能夠容納的電晶體數目大幅增加，系統晶片(SOC)設計似乎變成必然
的趨勢。要完成一個 SOC 設計，設計的方法上也必頇做適當的調整，在系統層級(ESL)就
開始做各種設計的最佳化，並確認整合之後的系統符合所需，才能在有限的時間中完成如
此複雜的設計，因此，研發 ESL 所需的各種 CAD 技術是絕對有必要的。 
除了電路的效能與面積之外，系統整體的功率消耗，也是目前大家最關心的問題之
ㄧ。一般來說，大部份的功率估測研究集中在 RT-level 層級以下的設計上，雖然這些估測
方法都已有相當的準確度，甚至已經可以達到 cycle accurate 的程度，但是卻無法用在 ESL
這麼高階的設計流程上面。 
在 SOC 整合後的功率估測問題方面，由於每個組成之功能區塊都相當大，目前主要
的方法是建立其高階功率模型，由於這種模型在使用時只需要高階的功能資訊，因此估測
的速度相當的快，足以應付 SOC 整合後的高複雜度。目前系統層級的模擬環境之中，大
部分都是採用 transaction accurate 的模擬方式，若以 cycle-accurate 的 power model 來做 ESL 
power estimation，勢必會大大降低模擬的速度。因此，在我們這個計畫之中，我們將試著
發展適用於 transaction level 的 power model，希望它能保有一定的準確度與極短的計算時
間。 
一個系統之中通常包含了各種性質不同的功能區塊 (IP)，例如組合邏輯區塊
（Combinational Logic Block）、序向邏輯區塊（Sequential Logic Block）、嵌入式記憶體區
塊（Embedded Memory Block）及處理器區塊（Processor Block）等等，由於功能性質的不
同，特徵值的萃取與功率消耗之間的關係也有所差異，如何針對各種區塊的性質差異，建
立適合的 ESL 功率模型，也是一個需要深入探討的課題。在這個計畫之中，我們將會試
著針對各種不同的功能區塊，發展各自最適合的 ESL 功率模型。 
 
二、研究方法及成果 
在這個計劃之中，我們希望能針對系統中各種性質不同的功能區塊，發展各自最適合
的 ESL 功率模型，目前已經研發完成的部份是一般邏輯功能方塊與嵌入式記憶體區塊的
功率模型建立方法，以下將分別描述我們的研究方法與成果。 
 組合邏輯/序向邏輯功能方塊（Combinational/Sequential Logic Block） 
針對一般的功能區塊，我們採用的方法是延續本研究群之前所發展的 RTL neural 
  3 
習的目的。 
 
Parameter  
Selection 
Functional 
Simulation 
Input Sequence 
Generation 
Training 
Neural Network 
 (1 iteration) 
Satisfy Error 
Requirement
? 
DONE 
Yes 
Iteration > 
Limit? No 
No 
Yes 
Setting Hidden 
Neuron Number 
Building 
Neural Network 
Training Sets 
T 
Transistor-level 
simulation 
Statistic 
Analysis 
 
圖二 類神經功率模型訓練流程 
當一個電路的 neural power model 所算出的推估值誤差小於使用者的要求之後，這個
power model 就算是訓練完成，可以提供給使用者去估測電路的功率消耗值，而且用起來非
常的快速簡單，如下圖三所示，我們只需將被測試的輸入序列（input sequence）及相對應
的輸出序列（functional output sequence），轉換成對應的特徵值資訊，就可以透過功率模型
估測出該輸入序列的平均功率值，不需任何其他的資訊輔助，計算過程相當的快速。與訓
練時最大的不同是，這時候 IP 使用者是針對他們要測試的 test pattern 做為輸入，而不是我
們訓練時使用的訓練樣本，因此，在測試我們建好的 neural power model 準確度時。我們會
盡量使用未曾被訓練過的 input pattern 當作輸入，同時把這些 input patterns 送進
transistor-level simulator 做一個準確的估計，以確定我們的 power model 確實擁有足夠的準
確度，而且可以適用在各種不同的輸入狀況之下。 
  5 
的實驗結果分佈圖，結果也是類神經網路功率模型的表現比傳統的查表法準確。相關成果
已經有兩篇 SCI 期刊論文[1, 2]發表，表示這個方法已廣受國際同儕肯定。 
(a)      (b)  
圖四 組合邏輯電路實驗結果分佈圖 
(a) 3D-LUT(b) Neuron-based model 
(a)      (b)  
圖五 序向邏輯電路實驗結果分佈圖 
(a) 3D-LUT(b) Neuron-based model 
 嵌入式記憶體區塊（Embedded Memory Block） 
為了要分析非控制信號對功率消耗的影響，我們針對記憶體的位址線信號（Address 
Bus Signal）及資料線信號（Data Bus Signal）二者對電路平均電流消耗的影響作觀察。首
先先固定資料線信號，並以亂數給定位址線的值，來觀察位址線的信號對電路平均電流消
耗的影響分佈圖。另一方則固定位址線的信號，並以亂數給定資料線的值，觀察資料線信
號對平均電流消耗的影響。由圖六的分佈圖可明顯地觀察到，位址線信號的影響力將大於
資料線信號。所以我們會先以位址線的信號當模型額外模型參數的對象來提昇原本功率模
型的準確度。 
  7 
 
圖八 將改良型的記憶體功率模型加入現今EDA flow上 
Original Module
Dummy Module
Primary Input 
Signal
Original Output 
Signal
Extra-Dummy 
Output SignalExtra_Dummy_Func
 
圖九 Dummy Modular Approach 
 
圖十 Dummy Modular Simulation Flow 
另一方面，在現今的設計流程之中，大部分的設計者會利用嵌入式記憶體產生器
（Memory Compiler），直接產生出系統所需之各種不同大小的嵌入式記憶體，如果每種大
小的記憶體產生之後，都要重新建立其記憶體功率模型，顯然非常沒有效率。基於這個考
量，我們會希望所發展出來的改良型記憶體功率模型能同時有可延伸性的能力（Scalable 
  9 
 
圖十二 記憶體區塊功率估測實驗結果分佈圖 
接著為了驗證可延伸性，我們另外取了一組位址數目不同的嵌入式記憶體，帶入我們
所回歸產生的功率模型，實驗結果呈現在圖十三，我們可以發現功率模型所估計出來的實
驗結果，誤差值都小於 5%，如此證明我們提出的功率模型具有可延展性。相關成果已經發
表在 SCI 的期刊之中[3]，表示這個方法已廣受國際同儕肯定。 
 
圖十三 未經迴歸記憶體的功率估測誤差 
 
三、結論與計畫自評 
 
本年度研究計畫擬藉由對各種性質不同的功能區塊，都能有一套對應的 ESL 功率模型
建立方法，我們便能將這些功率模型整合成一個系統層級的功率消耗分析平台，在系統層
級(ESL)的功能模擬之中，同時動態地提供對應的功率消耗大小，以解決系統設計方法中的
功率消耗估測問題。在計畫的後期，我們也希望能夠將之前發展的 ESL 功率模型整合至現
有的設計空間探索平台之中，並搭配適當的 CAD algorithm，快速地完成低功率系統的最佳
化設計，以進一步提昇整個 SOC 系統的設計效率。 
在這個年度裡，我們已經為整個計劃建立了多種功率模型，並且開發許多將功率模型
  1 
可供推廣之研發成果資料表 
□ 可申請專利  ■ 可技術移轉                                    日期：97年 10 月 17日 
國科會補助計畫 
計畫名稱：奈米 IC 之前瞻電子設計自動化技術 子計畫一：適用於
設計空間探索之系統層級功率分析平台之研究(I) 
計畫主持人：劉建男 副教授         
計畫編號：NSC 96-2221-E-008-120 學門領域：微電學門 
技術/創作名稱 系統層級功率消耗模型建立技術 
發明人/創作人 劉建男、李牧勳、黃保仁、李修文、林志勳、廖心瑩 
技術說明 
本計畫的重點是發展一系統層級之功率預估模型並使其能應
用至高複雜度的 SOC 系統。針對一般的邏輯功能方塊，我們發展
了一種以類神經網路為基礎的模型，既快速又準確，架構又非常簡
單。針對嵌入式記憶體區塊，我們發展了一種方法來擴充現有的元
件庫檔案，在增加準確度的同時，也能同時兼顧實用性，讓這樣的
模型可以搭配現有的 EDA 軟體使用。 
可利用之產業 
及 
可開發之產品 
EDA軟體發展公司及 IC設計公司 
技術特點 
可適用於系統層級模擬的高階功率消耗模型。 
推廣及運用的價值 
可在系統層級模擬之中提供準確的功率消耗資訊，以提早改善整個
系統設計的功率消耗。 
※ 1.每項研發成果請填寫一式二份，一份隨成果報告送繳本會，一份送 貴單位
研發成果推廣單位（如技術移轉中心）。 
※ 2.本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。 
※ 3.本表若不敷使用，請自行影印使用。 
 
附件二 
 Y04 
 
 Y04 
 
 Y04 
 
 
 
 
 
 
 Y04 
 
 
 Y04 
 
 
