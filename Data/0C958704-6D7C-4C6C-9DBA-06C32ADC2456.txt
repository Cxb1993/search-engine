 1 
多用戶正交分頻多工系統之自適性資源分配演算法-考量服務等級協定 
 
An Adaptive Resource-Allocation Algorithm in Multiuser OFDMA Systems 
Considering Service Level Agreement 
 
林志浩 
Dept. of Information Management 
Chung Yuan Christian University 
No. 200, Jhongbei Rd., Jhongli City, Taiwan 32023, R.O.C. 
 
摘要 
無線網路傳輸的服務，已經提昇到現今多媒體應用的等級了，高速資料的傳輸需求也相對增加，然
而可以使用的頻寬資源仍然有限，為了增加頻寬資源的使用效率，同時保證使用者不同的服務品質
要求，就需要一套有效的資源分配方法進行頻寬資源的管理。本研究提出一有效的資源分配方法，
考量使用者的服務類型進行頻寬資源的管理，目的在滿足使用者服務品質的需求及使用功率等相關
限制下，使系統傳輸速率達到最大，同時服務提供者能夠獲得最大的收益；能提供無線通訊網路業
者在面對OFDMA網路資源規劃與管理之困境，我們深入地探討並且提供網路效能、構建與營運成本
控制之技術，同時加入了服務等級協議的考量，利用數學最佳化技巧為基礎之方略，對於服務提供
者的頻寬資源，提供一個分配策略的參考方針，使得服務提供者在面對OFDMA網路資源管理的問題
時，可以有一準則可依循。研究結果得知隨著使用者數量的增加，LR-based Algorithm仍能夠對有限
的頻寬資源做更有效率的分配，滿足使用者的服務品質需求，同時服務提供者也能獲得較佳的收益。 
 
關鍵字：正交分頻多工、資源分配、服務等級協議、服務品質、數學最佳化 
 
 
I. 緒論 
由於第三代行動通訊(3G)系統的發展，使用者
對於無線通訊服務的需求，已由早期的語音傳輸
服務提昇到目前的多媒體應用，使用者對於資料
傳輸速率的需求不斷上昇，在第三代行動通訊之
後的無線行動通訊會需要較高的資料傳輸速
率，雖然其傳輸速率可達到2Mbps，但仍然無法
滿足未來對於多媒體傳輸的要求，因此第四代行
動通訊系統的提出便是希望能夠滿足使用上的
需求，第四代行動通訊系統技術則以正交分頻多
工(OFDM)傳輸技術來做為核心技術。 
目前在OFDM系統中對於無線資源管理的研
究，大多著重在OFDM系統的子載波分配
(Subcarrier Allocation)、位元負載(Bit Loading)或
功率分配(Power Allocation)等[5]，這些相關的研
究所關注的焦點是針對系統資源做最有效率的
分配，但並未考量到使用者在傳送資料時對於系
統資源的需求程度，在第三代行動通訊未來的發
展中，使用者所傳送的資訊將不再侷限於語音、
文字類型的非即時(nonreal-time)資料流，而是結
合了影像等多媒體資訊，因此在進行資源分配
時，應針對使用者不同類型的服務需求給予不同
的資源分配模式，同時由於使用者需求的服務類
型不同，對於服務品質(QoS)的需求也不相同。 
(1) 相關的研究已經證明了依據使用者所分配通
道之即時狀態來調整系統的資源，能夠顯著
地增加 OFDM系統頻寬的使用效率。 
(2) 由於第三代行動通訊系統以及未來無線都會
網路的發展，使用者所傳輸的資訊，將不再
侷限於傳統的語音、文字類型的非即時資料。 
(3) 大多數的研究中，為了簡化實驗設計，將使
用者的服務品質需求定義為多媒體服務，以
服務提供者的角度而言，頻寬資源的使用效
率不高，應依據使用者服務類型的不同，而
給予不同的分配模式，以提供系統頻寬的使
用效益。 
本研究目的在發展一套應用於OFDM系統的
資源分配演算法，依據使用者不同的服務類型，
分配不同的資源(子通道、功率及調變模式等)，
 3 
是具有即時性服務與非即時性服務的使用者，當
K個使用者要傳送訊號時，就必須經由OFDMA
的資源分配演算法，將頻寬資源分配給使用者。 
B. 數學模式之建立 
在本研究中，整個問題均將被數學模式化成
為 非 線 性 混 合 整 數 規 劃 問 題 (non-linear 
combinatorial integer programming problems)，其
間涵蓋多項決策變數、最大化服務提供者收益
之目標函式、以及許多的條件限制式，形成複
雜度極高的困難問題。茲描述所使用之參數定
義以及此數學模式如下：  
Objective function(IP1): 
( ) ⎥⎦⎤⎢⎣⎡ +−= ∑ ∑∑∑ ∈ ∈ ∈∈ Kk Nn Ss knsknskKk kkkkIP ycxdRZ ββ 21 max  (IP1)
subject to: 
Pyp
Kk Nn
knskns ≤∑∑
∈ ∈
 
Ss∈∀ (1)
kn
kns
kns
knskns pEcf
λα ≤2
),(
 
SsNnKk ∈∈∈∀ ,, (2)
knsp≤0  SsNnKk ∈∈∈∀ ,, (3)
Pyp knskns ≤  SsNnKk ∈∈∈∀ ,, (4)
k
Nn Ss
knskns Rcy ≤∑∑
∈ ∈
 
Kk ∈∀ (5)
knsc≤0  SsNnKk ∈∈∈∀ ,, (6)
Gyc knskns ≤  SsNnKk ∈∈∈∀ ,, (7)
1≤∑
∈Kk
knsy
 
SsNn ∈∈∀ , (8)
1,0=knsy  SsNnKk ∈∈∈∀ ,, (9)
kx≤0  Kk ∈∀ (10)
k
Nn Ss
knsknskk xycRC ≤−+ ∑∑
∈ ∈
 
Kk ∈∀ (11)
kkk RCx +≤  Kk ∈∀ . (12)
目標函數的主要義意為：最大化網路SLA總收
益，包括即時用戶之SLA滿足程度與非即時用戶
之所有流量費用總和；而限制式(1)定義了基地台
所能夠使用的功率上限；限制式(2)為計算多使用
者共用情況之最小傳輸功率；限制式(3)及(4)為
計算滿足QoS要求之使用者所需最小傳輸功率
之上下限；限制式(5)單一個使用者所獲得到之總
資料傳輸量；限制式(6)及(7)為計算使用者在單
一的symbol上得到的資料傳輸量之上下限；限制
式(8)及(9)：提供分時多工之限制式；限制式
(10)、(11)為提供服務提供者判斷使用者所得到
之服務是否滿足SLA之規定，當 0>kx 時，即違反
了SLA之規定，產生懲罰的事件。 
 
IV. 解題程序 
A. 研究方法 
本研究特採用拉格蘭日鬆弛法 (Lagrangian 
relaxation, LR) 可以求得近似最佳解 (Near 
Optimal Solution)的方法，它藉由鬆弛複雜的限
制式，使得原始的問題 (primal problem)簡化 
[2][3]。在尋求目標函數的最小值時，我們可以
將最複雜的限制式移項再乘上一個拉格蘭日乘
數(Lagrangian multiplier)，再加至原本的目標函
式，我們使用次梯度法(subgradient)，去找出拉
格蘭日乘數，經由不斷地重覆計算以找到最接
近最佳值的一個點，這時後由原始問題實際求
出的最佳解和由格蘭氏鬆弛法所求出的近似最
佳解之間的差距是最小的。 
B. 拉格蘭日鬆弛法 
我們把主要問題(IP1)轉換成目標最小化問題
(IP2)，並且鬆弛限制式成為LR的形式，另外我
們選擇將鬆弛限制式(1), (2), (4), (5), (7), (11)，在
將限制式移項之後各乘上一個拉格蘭日乘數
(Lagrangian multiplier)，然後加回原來的目標函
式中並獲得以下之數學式： 
( )=654321 ,,,,, kknskknsknssLRZ µµµµµµ min ∑
∈Kk
kk xd
2 ∑
∈
−
Kk
kk Rβ
∑∑∑
∈ ∈ ∈
−
Kk Nn Ss
knsknsk ycβ ∑ ∑∑
∈ ∈ ∈
⎟⎠
⎞⎜⎝
⎛ −+
Ss Kk Nn
knsknss Pyp
1µ
∑∑∑
∈ ∈ ∈ ⎟⎟⎠
⎞
⎜⎜⎝
⎛ −+
Kk Nn Ss kn
kns
kns
knskns
kns
pEcf
λαµ 2
2 ),( ( )∑∑∑
∈ ∈ ∈
−+
Kk Nn Ss
knsknskns Pyp
3µ
∑ ∑∑
∈ ∈ ∈
⎟⎠
⎞⎜⎝
⎛ −+
Kk
k
Nn Ss
knsknsk Rcy
4µ ( )∑∑∑
∈ ∈ ∈
−+
Kk Nn Ss
knsknskns Gyc
5µ
∑ ∑∑
∈ ∈ ∈
⎟⎠
⎞⎜⎝
⎛ −−++
Kk
k
Nn Ss
knsknskkk xycRC
6µ  (LR) 
其中的 654321 ,,,,, µµµµµµ 是拉格蘭日乘數，而
且這些數不能為負的值( 0,,,,, 654321 ≥µµµµµµ )。為
了解決(LR)，我們可以將(LR)拆解成數個獨立的
子問題，如下式。 
CONSTSUBSUBLR ZZZZ ++= 21  (13) 
1) Constant Problem 
( )( ) ⎥⎦⎤⎢⎣⎡ −+−−= ∑∑ ∈∈ Ss sKk kkkkkkCONST PCRZ 1646 µµµβµ . (14) 
2) Subproblem 1 
min1 =SUBZ
( )
⎪⎪⎭
⎪⎪⎬
⎫
⎪⎪⎩
⎪⎪⎨
⎧
⎟⎟⎠
⎞
⎜⎜⎝
⎛ −++
+⎥⎦
⎤⎢⎣
⎡
−−
+−−
∑∑∑∑∑∑
∑∑∑∑∑∑
∈ ∈ ∈∈ ∈ ∈
∈ ∈ ∈∈ ∈ ∈
Kk Nn Ss kn
kns
knskns
Kk Nn Ss kns
knskns
kns
Kk Nn Ss
knskns
Kk Nn Ss knsknsknss
kkkkns
kns
pEcf
c
GPp
c
y
λ
µµαµ
µµµµ
µβµ
2
3
2
2
5
531
64
),(
 (15) 
subject to (3), (6), (8) and (9). 
 5 
2) 最小路徑遺失(PLM) 
另外我們也以每一個子通道來看，對每一個使
用者而言，由於使用者所在位置的不同，使得每
一個子通道對使用者的干擾程度也不相同，也許
同一個子通道對某一個使用者而言干擾程度非
常嚴重，但這個子通道卻可能是對另一個使用者
干擾最小的子通道，因此，服務提供者應該要將
相對狀態最好的頻寬分配給該使用者，因此，我
們即以子通道的路徑干擾最小做為頻寬資源的
分配決策，詳細步驟如下： 
z STEP 1：嘗試在每個symbol中找出對於使用者
而言pathloss最小的分配模式。 
z STEP 2：針對各別的symbol逐一嘗試各種分配
模式，直到找出最佳的分配模式。 
z STEP 3：逐一檢查每一個symbol，使其符合限
制式的要求。 
z STEP 4：計算出目標函式值。 
B. Lagrangian Relaxation based Algorithm 
我們採用此方法為作為解題的主要核心，藉由
解決 LR Dual problem找出下界，再採用以拉格
蘭日鬆弛法主作為我們的主要演算法，去找出本
研究問題的上界，作法詳述如下： 
z STEP 1：從檔案讀取系統頻寬、傳輸模式、
使用者、環境狀態等相關資訊以建構網路。 
z STEP 2：將自檔案讀取的資訊建立相對應的
頻寬資源之狀態，並根據干擾資訊以及相關資
源建立系統頻寬中每一子載波的資料，並指定
計算的迴圈次數與Lagrange relaxation 的改進
計數器為60。 
z STEP 3：將拉格蘭日乘數初始化為0，並根據
給定的乘數值，計算出Sub1、Sub2、Sub3(常
數問題)，所求出的值記為 DZ 。 
z STEP 4：依據LR-based Algorithm來找出最佳
可行解，並把結果記為 LR，目標值記為 IPZ  
z STEP 5：如果 *DZ 大於 DZ ，就把 *DZ 指定給 DZ ，
作為最好的lower bound；如果 IPZ 比 *IPZ 小，就
把 *IPZ 指定給 IPZ ，作為最好的upper bound；在
其他的情形下，就把改進計數器的值減1。 
z STEP 6：藉由次梯度法計算次梯度向量，並
決定乘數的移動量以調整拉格蘭日乘數的大
小。 
z STEP 7：若解題的程序已經收斂，程式結束
並且找出 *IPZ 為最佳解時，必需將迴圈次數計
數器的值加1，否則回到STEP 3，進行下一次
計算的迴圈。 
C. 實驗情境設定 
本研究中，實驗的環境是在單一個 cell中，採
用本研究所提出之資源分配機制進行模擬分
析，並根據使用者人數多寡、系統頻寬、子通道
數量的大小等變數的搭配組合，提出數種情境相
互比較，以證明所提出之機制能更有效率的使用
網路資源，使服務提供者所能獲得的收益達到最
大。表 1 總括了各種實驗所需之參數。我們所提
出的演算法計畫在使用者人數為 20、40以及 80
人，同時系統頻寬為 2Mbps 或 5Mbps，以及子
通道數目為 16及 32個之情境下，進行數個案例
的實驗。 
D. 實驗成果說明 
表 2至表 7分別為各種不同的情境下，三種演
算法之實驗數據，在考量到 SLA 的狀況之下，
要維持服務提供者的收益就顯得相當困難，導致
我們所求解出來的目標值離最佳解仍有一段距
離，但相對於其他兩種演算法而言，本研究所提
之演算法仍然有相當大的改善幅度，其中最大的
改善幅度也高達 23.53%及 76.83%，平均而言，
改善幅度也達到 13.17%及 46.79%，因此可以說
經由 LR-based Algorithm 求出來的解會比其他的
演算法來得好，我們也可以透過實驗結果的比較
可以發現，以 LR-based Algorithm作為資源分配
的決策時，其所能夠獲得的收益是最高的，並且
其結果優於其他二種方法的結果。 
VI. 結論與建議 
A. 研究結論與貢獻 
根據本研究所使用的案例可得知，不論是使用
者人數的多寡、服務提供者所供應的系統頻寬與
子通道切割的數量，在同樣的干擾狀態與使用者
的傳輸速率需求之下，本文所提出之演算法與其
他兩者相較之下，均能夠獲得較佳的效益。 
本論文之主要研究貢獻可區分為下列二點，首
先主要是考量到服務提供者所提供之服務應該
要能夠滿足使用者不同程度的 QoS 需求，接下
來引用 SLA 的概念讓使用者能得到保障，同時
服務提供者也得到了較佳的收益： 
(1) 提昇服務提供者的 QoS：隨著WiMax技術的
逐漸成熟，使用者對於高速資料傳輸的需求
正快速地上升，因此為了在有限的頻寬資源
中增加系統的流量，或是提供頻寬的使用效
率，就更應該要有效的管理無線的資源，使
 7 
resource allocation with diverse QoS guarantees for 
MIMO-OFDM wireless networks,” Proc. IEEE 
International Symposium on World of Wireless Mobile 
and Multimedia Networks, 2005, pp. 205-212. 
[8] Wong, C.Y., Cheng, R.S. Letaief, K.B. and Murch, R.D., 
“Multiuser OFDM with adaptive subcarrier, bit, and 
power allocation,” IEEE Journal on Selected Areas in 
Communications, vol. 17, no. 10, 1999, pp. 1747-1758. 
[9] Wong, I.C., Shen, Z.K., Evans, B.L. and Andrews, J.G.., 
“A low complexity algorithm for proportional resource 
allocation in OFDMA systems,” Proc. IEEE Workshop 
on Signal Processing Systems, 2004, pp. 1-6. 
[10] Zhang, Y.J. and Letaief, K.B., “Adaptive resource 
allocation for Multiaccess MIMO/OFDM systems with 
matched filtering,” IEEE Transactions on 
Communications, vol. 53, no. 11, 2005, pp. 1810-1816. 
[11] Zhang, Y.J. and Letaief, K.B., “An efficient resource 
allocation scheme for spatial multiuser access in 
MIMO/OFDM systems,” IEEE Transactions on 
Communications, vol. 53, no.1, 2005, pp. 107-116. 
[12] Zhang, Y.J. and Letaief, K.B., “Multiuser adaptive 
subcarrier and bit allocation with adaptive cell selection 
for OFDM systems,” IEEE Transactions on Wireless 
Communications, vol. 3, no. 5, 2004, pp. 1566-1575. 
 
表1 實驗參數之設定 
參數 數值 說明 
使用者 20、40 在單一個cell中的使用者總數 
系統頻寬 2Mbps、5Mbps 服務提供者所提供的系統頻寬 
總功率限制 1000w 基地台在單一時間內所能提供的最大功率 
傳輸速率 24 ~ 512bps 每一個使用者的傳輸速率需求，我們將隨機由24~256bps產生。 
計價單位 1 ~ 20 根據使用者SLA中所定義的計價單位，我們將會依據使用者的傳輸速率給予等比例之計價單位。 
懲罰單位 0 ~ 10 根據使用者SLA中所定義的懲罰單位，我們將會依據使用者的傳輸速率給予等比例之懲罰單位。 
子通道 16、32 表示服務提供者所提供之頻寬可切割成為子通道的數量。 
模擬時間 10(秒) 我們將頻寬分配的單位設為10秒，即每一次分配將是未來10秒的頻寬資源。 
BER 0.0001 系統BER目標值。 
Symbol時間 0.05us 表示系統將在每0.05us傳送一個資料symbol 
c 視情況 依據系統所切割的子通道以及symbol時間大小而不同。 
p 視情況 依據系統在每一個symbol上傳送的資料量(即c)大小而不同。 
 
 
表2 情境一之實驗結果 
Run LRAlgorithm
Lower
Bound GAP
Punish
Maximum
PUM
改善程度
PathLoss
Minimum
PLM
改善程度
CPU
TIME
1 -2.29E+03 -2.63E+03 13.14% -1.95E+03 14.88% -1.30E+03 43.28% 14
2 -1.62E+03 -1.97E+03 18.07% -1.31E+03 18.78% -1.29E+03 20.46% 18
3 -2.26E+03 -2.74E+03 17.75% -1.98E+03 12.12% -9.81E+02 56.52% 17
4 -2.55E+03 -2.90E+03 11.98% -2.02E+03 20.98% -1.01E+03 60.44% 12
5 -1.85E+03 -1.97E+03 6.42% -1.55E+03 16.21% -1.15E+03 37.58% 10
6 -1.67E+03 -2.03E+03 17.47% -1.46E+03 12.90% -1.01E+03 39.51% 16
7 -1.83E+03 -2.12E+03 13.85% -1.72E+03 5.93% -1.50E+03 17.99% 14
8 -1.71E+03 -2.03E+03 15.64% -1.48E+03 13.32% -1.25E+03 26.63% 15
9 -1.97E+03 -2.42E+03 18.69% -1.59E+03 19.49% -1.23E+03 37.58% 17
10 -1.96E+03 -2.13E+03 7.89% -1.85E+03 5.54% -1.33E+03 32.05% 11
Case 1 (系統頻寬：5Mbps; 使用者：20; 子通道數：16)
 
 
 9 
表6 情境五之實驗結果 
Run LRAlgorithm
Lower
Bound GAP
Punish
Maximum
PUM
改善程
PathLoss
Minimum
PLM
改善程度
CPU
TIME
1 -3.66E+03 -4.34E+03 15.80% -3.09E+03 15.41% -2.00E+03 45.40% 40
2 -3.35E+03 -3.91E+03 14.46% -2.83E+03 15.45% -1.05E+03 68.74% 38
3 -3.26E+03 -3.57E+03 8.70% -2.85E+03 12.64% -2.17E+03 33.53% 32
4 -2.84E+03 -3.11E+03 8.90% -2.57E+03 9.28% -1.74E+03 38.50% 32
5 -4.73E+03 -5.02E+03 5.70% -4.04E+03 14.56% -2.84E+03 39.96% 30
6 -3.97E+03 -4.31E+03 8.04% -3.23E+03 18.55% -9.92E+02 74.99% 32
7 -3.64E+03 -4.24E+03 13.96% -2.79E+03 23.52% -9.64E+02 73.56% 38
8 -3.56E+03 -4.11E+03 13.29% -2.87E+03 19.47% -1.85E+03 48.01% 37
9 -4.02E+03 -4.23E+03 4.85% -3.53E+03 12.33% -2.09E+03 47.99% 30
10 -4.27E+03 -5.12E+03 16.55% -3.82E+03 10.60% -1.80E+03 57.84% 40
Case 5 (系統頻寬：5Mbps; 使用者：60; 子通道數：16)
 
 
 
表7 情境六之實驗結果 
Run LRAlgorithm
Lower
Bound GAP
Punish
Maximum
PUM
改善程度
PathLoss
Minimum
PLM
改善程度
CPU
TIME
1 -4.70E+03 -5152.25 8.76% -4.05E+03 13.80% -2.92E+03 37.84% 40
2 -3.18E+03 -3582.3 11.21% -2.58E+03 18.74% -8.56E+02 73.09% 43
3 -3.87E+03 -4422.2 12.44% -3.38E+03 12.79% -9.75E+02 74.81% 45
4 -4.13E+03 -4699.4 12.02% -3.79E+03 8.32% -2.30E+03 44.30% 46
5 -4.93E+03 -5558.39 11.28% -4.66E+03 5.41% -2.71E+03 44.97% 43
6 -3.23E+03 -3694.57 12.52% -2.95E+03 8.66% -1.44E+03 55.45% 44
7 -3.31E+03 -3740.5 11.63% -3.03E+03 8.25% -1.50E+03 54.75% 43
8 -4.66E+03 -4937.46 5.57% -4.19E+03 10.04% -2.61E+03 44.12% 39
9 -3.57E+03 -4026.64 11.39% -3.21E+03 10.07% -1.60E+03 55.19% 42
10 -4.15E+03 -4607.21 9.92% -3.34E+03 19.58% -2.12E+03 48.88% 40
Case 6 (系統頻寬：5Mbps; 使用者：60; 子通道數：32)
 
 
 
 
