在商用 FPGA 上實現非同步電路的技術，經過各國研究人員的努力，雖然
門檻已降低了許多，但還是有許多無法克服的限制。即使以特殊的方式在 FPGA
上實現非同步電路，所須的額外邏輯資源還是相當可觀，這些方法也無法適用於
不同架構的 FPGA[3]、[4]、[5]、[6]，且因傳統式 FPGA 架構與非同步電路架構
有著巨大的差異，用在非同步系統的雛型驗證，對於實體晶片的功能、效能、功
率消耗與電路面積難以有效的評估，也就是說以現有商用的 FPGA 驗證的非同步
系統與實際的電路將有很大的落差。 
以傳統FPGA來實現中小型的非同步電路，會發現有許多格格不入的情況，
比如說暫存器的控制方式、特定延遲電路的合成、及潛藏突波非同步狀態機
(asynchronous FMS)的實現等。主要是因為兩大原因：1.)傳統FPGA是專為同步系
統所量身定製的可程式邏輯，實現非同步系統時須以額外的電路來禰補結構上的
差異。2.)在傳統FPGA上，難以控制的元件選擇及繞線(place and route)，使得特
定延遲電路的合成幾乎是不可能的任務。 
因此，我們有了自行開發非同步系統專用FPGA的想法，在做了更深入的背
景研究後，更加證明想法是可行，且已有一些國外知名大學投入相關的研究。如
Caltech、University of Washington、University of Cornell等著名學術研究機構，都
已相繼投入非同步FPGA的研究。 
研究方法 
由於非同步電路缺乏成熟的合成工具，因此在設計可程式非同步電路時，會
把目前學術界開發的非同步電路合成工具列入考慮。將現有合成工具列入考慮，
對於整體來說會有相當大的好處，本計畫將目前學術界已開發的各種非同步電路
合成工具，引入可程式非同步電路的設計流程，可免除當設計完實體電路時，必
需回頭設計專門合成工具的麻煩，只需要將現有的工具合成的結果經過一些轉
換，就可以將電路實現在我們的可程式非同步電路上。在本計畫中我們選擇 Dr. 
Yun 所設計的工具 3D 做為目標[7]、[8]、[9]、[10]。3D 可以將延伸爆發模式
(extended burst mode, XBM )描述的非同步電路狀態機(或稱控制器)合成為邏輯
閘層級(gate level)的電路，其電路實現的方式有兩種，其一是二階的靜態互補金
氧半場效電晶體及/或閘(CMOS AND/OR Gate)，另一種則是通用型 C 元件
(generalized C-element, gC)，以通用型 C 元件合成的電路較明顯較靜態互補金氧
半場效電晶體及/或閘要來的快且精簡，因此在本計畫中設計一個可程式通用型C
元件(programmable generalized C-element, PGC)，利用 PGC 實現非同步電路狀態
機的方式。 
結果與討論 
在這章節，我們將依序簡述並討論過去一年來的研究成果： 
 使用 PGC 實現 XBM 控制器 
 PGC 的擴充 
PMOS 
stack
NMOS 
stack
Initializing 
Circuit
P1
P2
N
1
N
2
state holding element
 
圖 1.2: Programmable Generalized C-element Block Diagram 
PGC 的 P-stack 及 N-stack 數量固定為 4，這是為了避免電荷分享效應(charge 
sharing effect)，除此之外在調整電晶體的大小可以減緩電荷分享效應[11]。通常
串接的電晶體的寬度是由電源端遞減至輸出，這種做法可以增加電路運作速度，
但這種方式會產生較大的擴散電容，若將電晶體寬度設為相等，由於設計規則
(design rules)的關係，可以降低擴散層(diffusion layer)的面積，有助於減緩電荷分
享效應。圖 1.3 中，標示有□的曲線是電晶體通道寬度為相等時，電荷分享效應
的影響，圖 1.3 中標示有○的曲線是電晶體通道寬度為遞減時的波形，很明顯的，
在相同的驅動能力下，電晶體寬度設為相等，對於電荷分享效應有較強的抵抗能
力。在通用型 C 元件上，不像骨牌電路可以使用內部節點預先充電的技巧，來
避免電荷分享效應，故必須犧牲速度來換取較佳的強健性，而適當的調整狀態保
持元件中回授電路的驅動能力，也有助於減低電荷分享效應的影響。 
 
圖 1.3: Charge Sharing for Stacked Transistors 
 圖 1.8: ISFS I 
圖 1.7、1.8 使用了靜態 CMOS 與傳輸閘(transmission gate)的方式實現電路，
以圖 1.9 為例，平均延遲時間(average delay)為 0.315ns，平均功率(average power)
為 0.291μW。若採用[12]的 pass-gate 方式實現，可以減少電晶體數量提升速度，
但該電路有一嚴重問題－ 門檻電壓降(threshold loss)，門檻電壓降會增加後級電
路的靜態電流，並影響強健性，若使用電荷回充(charge restore)的方式改善，如
圖 1.9，其平均延遲時間為 0.347ns，平均功率為 0.294μW，而電荷回充所使用的
限流電組也會抵消該電路在面積上的優勢，若使用二極體的方式限流，平均延遲
時間為 0.275ns，平均功率為 0.292μW，在平均速度及平均功率不具明顯優勢，
且電壓降問題仍然存在，故本計畫仍採用較傳統的傳輸閘與靜態 CMOS 閘的方
式實現。不過仍可以列入將來改進的參考之一。 
S0
Pi4 p4
 
圖 1.9: Pass-Gate XNOR with Charge Restore 
狀態保持元件的行為就是將輸入信號反相，而當輸入信號為浮接狀態時，會
由輸出信號經過一個反相器回授至輸入端，使輸入/輸出信號保持穩態，如圖
1.10。回授反相器的設計必需考慮前級的驅動能力來決定，通常會使用一個驅動
能力較前級弱 3~5 倍的反相器來實現，要實現一個弱驅動能力的反相器，電晶體
的通道寬度通常設為最小寬度，此時通道長度是一個關鍵，通道長度太大會減弱
抑制電荷分享效應的能力，嚴重時則無法將電路維持在穩態。傳統使用弱反相器
使用通用型 C 元件時，有時會面臨電晶體串列長度要超過 4 才能實現的問
題，Dr. Yun 提出了使用靜態 CMOS 閘的 AND/NAND 去擴充，如圖 1.13。在 PGC
上除了使用 Dr. Yun 提出的方式，把 PGC 單一 P-stack/N-stack 可用輸入擴充為 5
個外(圖 1.14)，還可以利用查表器(LUT)實現 AND/OR function 來擴充。 
並聯擴充 PGC 是當設計需要超過兩組的 PMOS stack/NMOS stack 時的解決
方式，我們增加了並聯擴充專用的電路，如圖 1.15，圖 1.16 為 PGC 的 symbol。
以下面的方程式為例: 
gC_out_set  =  {N1}+{N2} 
gC_out_reset  =  {P1}+{P2}+{P3}+{P4} 
在 gC_out_reset 部份需要四組 P-stack 來實現，因此必需使用多個 PGC 來實
現，如圖 1.17，不使用原先的 P-stack 來實現(PS1、PS2)，而新增一組電路專門
用來作擴充動作的原因是要避免短路問題(short circuit problem)。若使用 PS1 或
PS2 做擴充動作時，考慮 T=0 時，{P3}成立，gC_out=1；T=1 時，{P1}、{P2}、
{P3}、{P4}、{N1}、{N2}皆不成立，gC_out 維持前一個狀態 gC_out = 1；T=2
時，{N1}、{N2}任一成立，此時會因為 PGC 的延遲造成 P-stack 與 N-stack 同時
導通，有可能導致 gC_out 誤動作。而使用專門用來擴充 P-stack/N-stack 的電路
則可以避免這個問題，此電路利用 gC_out 回授，使 gC_out 在 high/low 時，提前
關閉因擴充而可能發生短路路徑，藉此排除短度問題。 
 
 
圖 1.13: AND Decomposition 圖 1.14: Expanding PGC with SCMOS AND/OR 
Gate 
我們定了一個強制性的映射規則(mapping rule) － 當輸入信號在同一 PGC 中同
時存在於 SET 與 RESET 中，則其中之一必需接到沒有利用 AND/NAND 擴充的
輸入端，如圖 1.14 的 P1<0:3>及 N1<0:3>。之要符合這個規則就可以避免因為使
用 AND/NAND 擴充可用輸入的數量而可能產生的短路問題。 
 
圖 1.18: Short Circuit by Decomposition 
實驗數據 
我們作了一些實驗數據，如表 1。該數據使用 HSPICE 模擬 pre-layout 之結
果，模擬環境設定如下：電壓 3.3V、溫度 25℃，使用的是 TSMC 0.35μm 2P4M
製程，輸入信號經一個最小尺寸的緩衝器驅動，輸出負載則由一個四倍大最小尺
寸緩衝器來模擬。表 1 中 STD_GATE AVG DELAY 為 3D 合成工具輸出後再經
Espresso 化簡，利用 SCMOS 實現的電路，實驗結果顯示，使用 PGC 實現的控
制器較使用 SCMOS 電路慢兩倍。 
表 1: PGC Pre-Layout Simulation 
EXPERIMENTS STATES INPUT/OUTPUT
STD_GATE 
AVG. DELAY 
PGC AVG. 
DELAY 
ALU1 7 3 / 7 0.42ns 0.96 ns 
BIU_DMA2_FIFO 7 4 / 5 0.65 ns 0.97 ns 
MUL1 4 3 / 4 0.57 ns 0.92 ns 
MUL2 3 3 / 3 0.38 ns 0.87 ns 
圖 1.19 為使用 PGC 實現表 1 中 MUL1 的 Layout，其中包括了 SRAM、SRAM
資料載入電路、及 4 個 PGC，單一 PGC 的面積 73μm x 206μm，如圖 1.20。
post-layout simulation 結果如表 2。在速度上較 pre-layout simulation 慢了 65%，
一個系統週期所消耗的功率也多出了 68%，推測可能因佈局鬆散及信號線與過寬
的電源線重疊，造成耦合電容大幅增加，導致功率及速度不如預期。 
