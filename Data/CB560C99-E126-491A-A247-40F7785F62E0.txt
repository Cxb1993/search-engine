 2
行政院國家科學委員會專題研究計畫成果報告  
永磁交流電動機之設計、製作、驅動、控制與應用及關鍵性技術開發—      
子計畫四：永磁同步電動機驅動系統及其在電動機車之應用 
Implementation of intelligent control for a permanent magnet synchronous 
motor drive and application for electric motorcycle    
計畫編號：NSC 95-2221-E-239-045 
執行期限：95 年 8 月 1 日至 96 年 7 月 31 日 
           主  持 人：林志鴻                 國立聯合大學電機工程系 
             參與大專生：江柏樺 曾子亘 許智博   國立聯合大學電機工程系 
               
摘要: 本年度之計畫目的是研製具有回生充電功能的永磁同步電動機智慧型控制驅
動系統，將所發展之智慧型控制的永磁同步電動機驅動系統中，加入一以模糊類神經網
路控制之截波器，使具有煞車制動回生充電之功能。此方法即在蓄電池電源與反流器間
加入一升壓/降壓截波器，根據馬達之反動電勢與直流鏈間的電壓差值信號、命令電流與
馬達電流間之電流差值信號，以下達行駛模式命令方式，使模糊類神經網路控制升壓截
波器開關之責任週期，讓馬達運轉於行駛區；另以下達煞車模式命令方式，使模糊類神
經網路控制降壓截波器開關之責任週期，讓馬達應用於煞車制動區，並將能量囘送到電
池端，以達到電動機車於煞車時之回生充電功能。  
 
關鍵字：永磁同步電動機，電動機車，模糊類神經網路 
 
Abstract: The object of this project is proposed that implementation of energy recycle system 
for electric scooter driven by permanent magnet synchronous motor. Firstly, between DC 
battery end and converter end was inserted a boost/buck chopper in the permanent magnet 
synchronous motor drive system. Secondly, in driving mode according to two error signals 
that error of voltage between back electromotive force (EMF) and DC link, and error of 
current between command current and motor current, the controller is adjusted to switched 
duty ratio in boost chopper. Then, in braking mode according to error of voltage between 
back EMF and DC link, and error of current between command current and motor current, the 
controller is adjusted to switched duty ratio in buck chopper. The battery was recharged by 
energy power during braking cycle. The purpose of energy recycle is accomplished in this 
study. 
 
Keywords: permanent magnet synchronous motor, electric scooter, fuzzy neural network, 
 
 4
保，且又可增加續航力。本年度計畫為能源回收及提升電動機車之整體效率，使用煞車
制動回生技術於電動機車蓄電池電源之充電，不僅可以提高蓄電池能源的運用效率，而
且更可有效的增加電動機車的續航力。因此本年度計劃之目的是研製具有回生充電功能
的永磁同步電動機智慧型控制驅動系統。將所發展之智慧型控制的永磁同步電動機驅動
系統中，在電池及電容直流鏈之反流器間加入一升-降壓之截波器(step-up chopper and 
step-down chopper)，在馬達運轉區時，使用升壓截波器，以使電容直流鏈端電壓比電池
端之電壓還高，即利用電感之儲能釋放到電容之兩端，以提升電容端之端電壓。在馬達
煞車制動時，使用降壓截波器，將在電容直流鏈所儲存的電量反向的回充到電池端，以
產生回生功能，即將電流回灌到直流電源之蓄電池端，其方法是在蓄電池電源與反流器
間加入一反並接之降壓截波器及升壓截波器，根據馬達之反動電勢與直流匯流排間的電
壓差值信號、命令電流與馬達電流間之電流差值信號，使升壓截波器應用於馬達運轉
區，而降壓截波器應用於馬達煞車制動區，並以模糊類神經網路控制降壓截波器開關及
升壓截波器開關之責任週期時間，達到電動機車於煞車時之回生充電功能。 
 
二、研究方法 
 一般驅動電動機車之車輪的永磁同步電動機動力電源皆採用 48V 之直流鉛酸蓄電池
電池，此 48V 之直流電池是以 4 個 12V 之直流鉛酸蓄電池以串聯之方式連接而成，為
了達到具有回升充電之功能且不再多增加電動機車之重量，因此採用在蓄電池電源端與
反流器間加入一反並接之降壓截波器及升壓截波器，其方法如下: 
 
 2.1 升壓截波器及降壓截波器之設計 
在蓄電池電源端與反流器間加入升壓截波器，以提高送入永磁同步電動機之輸入電
壓，並以控制升壓截波器開關元件之責任週期時間，以降低永磁同步電動機運轉於電動
機車行駛模式時之馬達電流的漣波，並加快永磁同步電動機電流之上升速度及改善追隨
命令電流之響應速度；當電動機車運轉於煞車模式時，則使用另外一組降壓截波器，使
馬達定子繞組之儲能與反流器並接電容上之電量，能夠將能量回送到電源端，即對電池
回充，其電路圖如圖一所示。在圖一中所使用的升壓截波器是使開關元件 AQ 永遠保持
OFF，首先在觸發信號 BS 送導通責任週期時間D至開關元件 BQ 後， BQ 保持為 ON，此
時電池端之電流 Ldc ii = 開始流經儲能電感 L，即電感 L 開始儲能，其電路圖如圖二(a)
所示，然後在觸發信號 BS 送截止責任週期時間 D−1 至開關元件 BQ 後， BQ 截止為 OFF，
 6
 
 
 
 
 
 
 
 
 
(a) AQ 為 OFF， BQ 為 ON 時 
 
 
 
 
 
 
 
 
 
 
(b) AQ 為 OFF， BQ 為 OFF 時 
圖二 升壓/降壓截波器在升壓時之開關元件動作電路圖 
 
 
 
 
 
 
 
 
 
 
(a) AQ 為 ON， BQ 為 OFF 時 
 
直流電源
Vdc=48V
功率模組
反流器
C
儲能電感
+
-
Cd
L
+
-
AD
BD
OFFQA
ONQB
Vsc
Lidci
sci
直流電源
Vdc=48V
C
儲能電感
+
-
Cd
L
+
-
AD
BD
OFFQA
OFFQB
Vsc
dci
sci
功率模組
反流器
直流電源
Vdc=48V
C
儲能電感
+
-
Cd
L
+
-
AD
BD
ONQA
OFFQB
Vsc
Li−dci−
sci−
功率模組
反流器
 8
之訓練計算後，送出調整信號至脈寬調變電路以產生提供給截波器開關元件之導通責任
週期，此皆依據電動機車之行駛模式或煞車模式，使升壓截波器之功率開關元件或降壓
截波器功率開關元件導通或截止。在行駛模式中，使用升壓截波器，以增壓反流器之端
電壓值來加快速電流之上升速度及改善追隨命令電流之響應速；在煞車模式中，使用降
壓截波器，使馬達定子繞組之自感儲能與反流器之電容端之電能可對電池電源端電壓回
生充電。其工作原理為以參考行駛指令信號，調整升壓截波器之 BQ 以導通的責任週期
D，致使反流器端之電容電壓比電池電源端電壓大，其工作原理為升壓截波器之 BQ 為
ON導通後，電池開始對電感器充電，使電感器 L開始儲能，當 BQ 為OFF截止後，儲存
在電感器之磁能開始放電，即電感器 L 之儲能經由 AD 開始對反流器端之電容充電，同
時電池亦經由 AD 對電容放電，因此反流器端之電容電壓比電池端之電壓高，此時之馬
達端經由感測電流以轉軸估測器及速度/電壓轉換器將速度經由函數及比例因子之換算
後，其反電勢相當接近電容端電壓，如果欲加快速電流之上升速度及改善追隨命令電流
之響應速度，可調整送給 BQ 之ON的責任週期D。當參考煞車指令時，調整降壓截波器
之 AQ 導通ON的責任週期D，致使反流器端之電容開始對電池電源端電壓放電回升充
電。調整升壓/降壓截波器之功率開關的導通責任週期D，本計畫採用DSP C31控制板以
實現模糊類神經網路控制來調整出功率開關的導通責任週期D，以降低直流鏈之漣波影
響，且能增大其強健性。以煞車裝置代替車體負載之再生煞車回充控制實驗與硬體驅動
架構之照片圖，如圖五所示。  
 
 
 
 
 
 
 
 
 
 
 
 
 10
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
(b) 電流感測電路、脈寬調變電路、隔離驅動電路與功率反流器電路照片圖 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
(c) 控制電腦、DSPC31 控制板照片圖 
圖五 以煞車裝置代替車體負載之煞車回充控制實驗與硬體驅動架構照片圖 
 電流感測電路智慧型功率
模組反流器
脈寬調變電路
及互鎖電路隔離驅動電路
 DSP C 31控制板 控制電腦
 12
 ( ) 3333333 , kkkk
j
jjkk netnetfyxwnet ==∏=   (7) 
其中 x j3代表輸入到第三層神經元的第 j個輸入值，wjk3 代表歸屬函式層與規則
層之間的鍵結值，在此假設為 1。  
 
第四層：輸出層 
第四層的單一神經元標示為Σ表示將所有輸入此神經元的信號作加總之計算。 
 ( )net w x y f net neto
k
ko k o o o o
4 4 4 4 4 4 4= ∑ = =,   (8) 
其中wko4 表示與第 k 條規則相關的輸出強度， xk4 代表輸入到第四層神經元的第 k 個輸入
值， yo4 是模糊類神經網路的輸出值，即為調整信號。 
模糊類神經網路之演算法的重點是在學習過程中如何遞迴的獲得一梯度向量，梯
度向量中每一個元素定義為針對網路的參數使用連鎖規則之能量函式的導數。因為梯度
向量朝向與每一個神經元的輸出方向的反方向計算而得，這就是所謂的倒傳遞學習法
則。為了描述使用監督式梯度下降法的模糊類神經網路之線上學習演算法，首先定義一
能量函式 E 如下： 
 2
2
1 eE =   (9) 
其中e表示估測馬達反電動勢 ∗dcV 與反流器輸入端之電容電壓 dcV 之間的誤差，或是電池端
所感測到的電流
dci 與估測馬達電流 ∗sci 之間的誤差。以倒傳遞法為基礎的學習演算法描述
如下： 
 
第四層：傳遞回來的誤差如下 
 δ ∂∂
∂
∂
∂
∂o o o
o
o
E
net
E
y
y
net
4
4 4
4
4= − = −
⎡
⎣⎢
⎤
⎦⎥
  (10) 
鍵結值每次更新的疊代值如下 
 
Δw E
w
E
y
y
net
net
w
xko w
ko
w
o
o
o
o
ko
w o k
4
4 4
4
4
4
4
4 4= − = −⎡
⎣⎢
⎤
⎦⎥
⎛
⎝⎜
⎞
⎠⎟ =η
∂
∂ η
∂
∂
∂
∂
∂
∂ η δ   (11) 
其中ηw 是模糊類神經網路鍵結值的學習速率。所以輸出層的鍵結值根據下列方程式來更
新： 
 ( ) ( )w N w N wko ko ko4 4 41+ = + Δ   (12) 
 14
率，提出一誤差適應法則如下： 
 eeco +≅4δ                                                  (19) 
以取代靈敏度；其中 e 為追隨誤差 ce 的導數。 
模糊類神經網路鍵結值的學習速率ηw 的選定如下： 
 ηw wmax uP R= =1 12   (20) 
其中 ( )P max P Nw max N w≡ ， ( )P N y ww o ko= ∂ ∂4 4 ， Ru 表示模糊類神經網路的規則
數目。  
模糊類神經網路平均值ηm與標準偏差ησ 的學習速率的選定如下： 
 ( )[ ]η η σσm u ko max ijR w= = −1 24 2min   (21) 
其中 Ru 表示模糊類神經網路的規則數目。  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
圖 六 一般型式的四層模糊類神經網路架構圖 
 
輸入層
i
歸屬函數層
j
規則層
k
輸出層
oΣ
wjk
3
wko
4
yi
1
y j
2
yk
3
yo
4
xi
1
Π Π Π Π
 16
 
 
 
 
 
 
 
 
 
 
 
 
(b) 使用升壓截波器 
圖七 模擬電動機車之行駛模式中，在轉速為1200rpm時之步階速度命令之d相命令電流
及d相繞組電流、直流鏈電壓之實測結果波形：(a)未使用升壓截波器；(b)使用升壓截波
器 
 
 
 
 
 
 
 
 
 
 
 
 
 
圖八  模擬電動機車之行駛模式中，在轉速為1200rpm時之步階轉速追隨響應實驗量測
波形： *rω 為命令轉速、 rω (a)為未使用升壓截波器之追隨轉速、 rω (b)為使用升壓截波器
之追隨轉速 
 
 
ai
∗
ai
ms1
scv
A0
V0
A20
V30
 ∗
rω
s2
rpm0
rpm1200
)(brω )(arω
rpm600
 18
permanent magnet synchronous motor drive,” in Proceedings IEEE 4th Conference on 
Industrial Electronics and Applications (ICIEA’09), May 25-27, Xian China, pp. 
2712-2717, 2009. (EI)  
[2]  Chih-Hong Lin, and Chih-Peng Lin, “Fuzzy neural network control for a permanent 
magnet synchronous motor drive system,” in Proceedings IEEE 4th Conference on 
Industrial Electronics and Applications (ICIEA’09), May 25-27, Xian China, pp. 
2718-2723, 2009. (EI)  
[3]   Chih-Hong Lin, and Chih-Peng Lin, “The hybrid RFNN control for a PMSM drive 
system using rotor flux estimator,” in Proceedings IEEE 8h Conference on Power 
Electronics and Drive Systems (PEDS’09), Nov.2-5, Taipei, Taiwan, pp. 1394-1399, 
2009. (EI)  
[4]  Chih-Hong Lin, Po-Hwa Chiang and Chi-Shin Tseng, “Adaptive Backstepping Control 
for a Permanent Magnet Synchronous Motor Drive Using RNN Uncertainty Observer,” 
in Proceedings IEEE 4th Conference on Industrial Electronics and Applications 
(ICIEA’10), pp. 1293-1298, June 17-20, Taichung, Taiwan, R.O.C. 2010. (EI)  
[5]  Chih-Hong Lin, Po-Hwa Chiang, Chi-Shin Tseng, Yi-Ling Liu and Mei-Yu Lee, “Hybrid 
Recurrent Fuzzy Neural Network Control for Permanent Magnet Synchronous Motor 
Applied in Electric Scooter,” in Proceedings IEEE 4th Conference on Industrial 
Electronics and Applications (ICIEA’10), pp. 2175-1280, June 17-20, Taichung, Taiwan, 
R.O.C. 2010. (EI)  
[6]  Chih-Hong Lin, Po-Hwa Chiang, Chi-Shin Tseng, Yi-Ling Liu and Mei-Yu Lee, “Hybrid 
Recurrent Fuzzy Neural Network Control for Permanent Magnet Synchronous Motor 
Applied in Electric Scooter,” in Proceedings International Power Electronics Conference 
(IPEC’10), pp. 1371-1376, June 21-25, Sapporo , Japan, 2010. (EI) 
 
本發表與本計畫相關之國內性研討會論文如下: 
[7]  Chih-Hong Lin, and Yu-Hong Hwang, “Hybrid RFNN control of a PMSM drive system 
in electric motorcycle,” in 8th Taiwan Power Electronic Conference, paper no. 57, 2009. 
[8]  Chih-Hong Lin, Po-Hwa Chiang and Chi-Shin Tseng and Chih-Peng Lin, “The 
estimated technology of PMSM rotor speed with sliding-mode observer,” in 30th 
Symposium on Electrical Power Engineering, paper no. 1145, 2009. 
表 Y04 
行政院國家科學委員會補助國內專家學者出席國際學術會議報告 
                                                           99 年 6 月 29 日 
報告人姓名 林  志  鴻 服務機構及職稱 國立聯合大學電機系副教授
     時間 
會議 
     地點 
2010 年 6 月 21 日至 25 日
地點: 日本北海道札晃 
本會核定補助文號 NSC 
97-2221-E-239-039-MY2 
會議 
名稱 
 (中文) 國際電力電子研討會 
 (英文) The International Power Electronics Conference-ECCE ASIA-  
發表 
論文 
題目 
(中文)混合型遞迴式模糊類神經網路控制永磁同步馬達應用於電動機車上
(英文) Hybrid Recurrent Fuzzy Neural Network Control for Permanent Magnet 
Synchronous Motor Applied in Electric Scooter 
 
報告內容應包括下列各項： 
一、參加會議經過 
本人於 6/21 早上 09:45 搭乘中華航空 CI 0130 由桃園中正機場飛至日本北海道新千歲機
場，於當地時間下午 14:35 到達機場，隨即由新千歲機場搭乘機場客運公車直接轉往札
晃旅館。然後於 6/22 上午 8:30 至大會辦理報到手續並聽別人報告。此研討會是工業電
子領域最重要的國際學術研討會之一，著重於學術理論與實際應用之結合發展，是理論
實際應用與新方法論文應用發表的重要學術研討會。此次議程包括：高功率直流轉換
器、功率放大器、矩陣轉換器、串聯轉換器、馬達控制、電源轉換技術、功率元件包裝
技術、電磁干擾等等。此次與會除了發表論文外，亦與國際友人聯絡友誼、交換意見，
瞭解這些領域之研究動向與未來發展之趨勢。此次 2010 年國際電力電子研討會(The 
2010 The International Power Electronics Conference-ECCE ASIA-, IPEC 2010 )，在日本北
海道札晃傳統會議中心(Sapporo Convention Center)舉行。本次國際電力電子研討會，除
了日本人士外，來自其他國家，計有台灣、美國、德國、荷蘭、韓國、墨西哥、巴西、
澳洲、義大利、蘇聯、泰國、印度、伊朗、印尼、埃及、土耳其、法國、馬來西亞、越
南、黎巴嫩、西班牙、葡萄牙、英國、智利、加拿大、新加坡、中國大陸及波蘭等四十
餘國的學者及工業界專家參與此盛會，本次會議為 IPEC 首次於北海道札晃舉辦，尤其
是在日本北海道札晃，是一未經大面積開發之古老農業都市。本屆投稿相當踴躍，共有
來自 43 個國家 654 篇論文投稿，最後僅 63.76%接受率之 417 篇論文被發表。 
 
附件三
 
表 Y04 
45. Fuzzy Systems and Analysis 
46. Harmonics, Power Factor and VAR compensation 
47. PM Machine Drives Internet, Multimedia and Wireless Technologies 
48. Intelligent Sensors and Actuators 
49. Fuel Cell Systems 
50. Pulsed Supply Technology 
51. Advanced Applications in Control and Electric Ballast 
52. Estimation of Nonlinear Systems 
53. Networks and Decentralized Systems 
54. Diagnostics in Electrical Drives and Power Electrics 
55. Control System 
56. Photovoltaic and Wind Energy Systems 
57. Application in Human Language Technology 
58. Interactive Technology  
59. Fuzzy-based Approaches 
個人於6/23日發表文章 “Hybrid Recurrent Fuzzy Neural Network Control for Permanent 
Magnet Synchronous Motor Applied in Electric Scooter＂，期間參加不同場次的論文發
表、佈告論文之研討，對於目前工業電子及電力電子的研究現況留下相當深刻的印象，
也攜回許多相當有用的資料。6/25日由日本北海道新千歲機場搭機，於下午18:40飛抵桃
園中正機場。 
 
二、與會心得 
1. 目前工業電子及電力電子之研究課題及方向如下： 
y 馬達之無感測器控制技術及發展：PM 同步馬達、同步磁阻馬達、開關磁阻
馬達及感應馬達。 
y 馬達驅動：Multilevel inverter 設計、自激感應發電機設計。 
y 再生能源應用之轉換器：如風力發電、太陽光電、燃料電池及工業應用電路。
y DC/DC： ZVS、 ZCS、控制器、 放大器、電路架構改良、Active Clamp、
High power、同步整流電路、雙向 DC/DC。 
y 轉換器: Matrix、Series、Multilevel、Transient。 
y 換流器：並聯技術、與電力公司並聯技術。 
y 功因改善：電路架構更新、利用 AC/AC 新電路架構改善特性。 
y 電子式安定器： HID 燈 Modeling 及設計、Ignitor 設計。 
y 工業控制及應用：如工業機器人、機器手臂、電動汽車、大眾捷運系統。 
y 網際網路控制技術及應用。 
 
2. 參加此會議不但可以吸收最新的電力電子技術應用新知，並可促進電力電子技術的相
互交流，提升我國在工業電子及電力電子技術應用方面的研究水準與國際地位。另外
值得我們注意的是這幾年來歐、美、大陸、日在工業電子及電力電子技術方面的發展
相當迅速。國內若不投入更多的人力與金錢來加強電力電子方面的研發，則未來將無
法趕上先進國家工業電子及電力電子技術的技術，且易被後來者追上。 
 

Abstract-- The purpose of this paper is to investigate and 
implement a novel approach to learning control for permanent 
magnet synchronous motor (PMSM) drive system using a hybrid 
recurrent fuzzy neural network (HRFNN) control. First, the 
field-oriented mechanism is applied to formulate the dynamic 
equation of the PMSM servo drive. Then, a HRFNN speed 
control system that combined supervisor control, RFNN and 
compensated control is developed to control PMSM drive system. 
Finally, the effectiveness of the proposed control scheme is 
verified by the experimental results. 
Index Terms-- permanent magnet synchronous motor, 
recurrent fuzzy neural network  
I. INTRODUCTION
The AC servo drives, including PMSMs (both trapezoidal 
and sinusoidal types), switched reluctance motors and 
induction motors, have been widely used in robotics, 
computer-numerically-controlled (CNC) machine tools, 
elevators and many other applications in the area of 
mechatronics [1, 2] for decades. To achieve fast four-quadrant 
operation and smooth starting and acceleration, the field-
oriented control [1-3], or vector control, is used in the design 
of AC servo drives. Compared with induction servo motors, a 
PM synchronous motor has such advantages as higher 
efficiency owing to the absence of rotor losses and lower no-
load current below the rated speed; moreover, its decouple 
control performance is much less sensitive to the parameter 
variations of the motor [1, 2]. 
Recently much research has been done on the applications 
of fuzzy neural network (FNN) systems, which have the 
advantages of both fuzzy systems and neural networks, in the 
control fields to deal with nonlinearities and uncertainties of 
the control systems [4-5]. Moreover, the FNN’s are universal 
approximators [6-7], which can approximate any dynamics to 
a prespecified accuracy by the learning process [6]. The 
fuzzy-neural approximator presented in Leu, Lee and Wang [8] 
tuned on line to approximate the unknown nonlinear dynamic 
                                                          
This work was supported in part by the financial support of the National 
Science Council in Taiwan, R.O.C. through its grant NSC97-2221-E-239-039-
MY2.  
C. H. Lin, P. H. Chiang, C. S. Tseng, Y. L. Liu and M. Y. Lee are with 
Department of Electrical Engineering, National United University, Miao Li 
360, Taiwan. (e-mail: jhlin@nuu.edu.tw). 
systems for adaptive control. However, the fuzzy neural 
network (FNN) is a static mapping. Moreover, the weight 
updates of the FNN do not utilize the internal information of 
the neural network (NN) and the function approximation is 
sensitive to the training data. Thus, the recurrent neural 
network (RNN) is a dynamic mapping and demonstrates good 
control performance in the presence of uncertainties [9-12]. 
Therefore, this paper presents a hybrid recurrent fuzzy neural 
network (HRFNN) control PMSM drive for electric scooter. 
The method is not dependent upon the predetermined 
characteristics of the motor and can adapt to any change in the 
motor characteristics. Finally, some experimental results are 
provided to demonstrate the effectiveness of the proposed 
control schemes. 
II. PMSM DRIVE SYSTEM
The machine model of a PMSM can be described in the 
rotor rotating reference frame as follows [1-3]: 
ddrqqqq iLPiLiRv Z                                                  (1)!
qqrdddd iLPiLiRv Z                                                (2) 
where dv and qv  are d and q axis stator voltage, di  and qi
are  d and q axis stator current dL  and qL  are d and q axis 
stator inductance, R is the stator resistance, rZ  is  rotor speed, 
P is number of poles.  
 The electric torque can be expressed as 
  2/][3 qdqdqfdmde iiLLiILPT                                          (3)!
and the equation of  the motor dynamics is 
rrLe JBTT ZZ                                                              (4)!
In equation (4), eT  is the electric torque, LT  stands for the 
load torque (external load disturbance), B represents the 
viscous frictional coefficient and J is the moment of inertia.  
 The basic principle in controlling a PMSM drive is based 
on field orientation with constant current in the d axis, so the 
electromagnetic torque eT  is then proportional to qi , which is 
determined by closed-loop control. Since the generated torque 
is linearly proportional to the q-axis current as the d-axis rotor 
flux is constant in equation (3), the torque per ampere can be 
achieved. 
 The configuration of a DSP field-oriented PMSM drive is 
shown in Fig. 1. The system is constituted by the following 
Hybrid Recurrent Fuzzy Neural Network 
Control for Permanent Magnet Synchronous 
Motor Applied in Electric Scooter 
Chih-Hong Lin Po-Hwa Chiang  Chi-Shin Tseng  Yi-Ling Liu  Mei-Yu Lee
Department of Electrical Engineering, National United University, Miao Li 360, Taiwan 
e-mail:jhlin@nuu.edu.tw 
1371
The 2010 International Power Electronics Conference
978-1-4244-5395-5/10/$26.00 ©2010 IEEE
The design of a supervisory hybrid control system is 
necessary for the condition of divergence of states to pull the 
states back to the predetermined bound region and guarantee 
the stability of the system. Inside the bound region the RFNN 
control system approximates uniformly the idea control law. 
From (7), (9), and (11), an error equation is then obtained as 
follows: > @SCRP UUUUBeke  *1     (12) 
In order to achieve a zero steady-state error, an integral 
equation can be defined as   
12 eee     K       (13) 
Then an error equation can be redefined as follows: > @SCR UUUU  *mBEE /    (14) 
where > @Tee 21 E is tracking error vector, »¼
º«¬
ª
 10
10
k
/ is
a stable matrix and > @TPB0m  B .
Then, the Lyapunov function candidate is chosen as follows: 
PEE T
2
1 AV    (15) 
where P is a symmetric positive definite matrix which satisfies 
the following Lyapunov equation [12]: 
QPP   //T   16) 
and 0!Q  is selected by the designer. Take the derivative of 
the Lyapunov function and use (17) and (16), then 
> @SCRT
A
UUUU
V
 
 
*
2
1
2
1
2
1
2
1
m
TTT
TT
PBEPEEEPE
PEEEPE
//

  SCR UUUU mTmTT PBEPBEQEE d *21    (17) 
To satisfy 0dAV , the supervisory control SV is designed as 
follows[14]: 
   »¼º«¬ª  UULCRS GFBUUDU )(1sgn ZmTPBE
   »¼º«¬ª  ekBD mL 11sgn ZmTPBE  (18) 
where )sgn(   is a sign function, and the operator index 
®¯­  
t  
VVD
VVD
D
A
A
if,0
if,1   (19) 
in which V is positive constant. Substitute (9) and (16) into 
(15) and consider the case 1 D , then  
 «¬
ª  
d
ekwCA
B
UUUUV
mPP
P
SCRA
1
*
1
2
1
2
1
ZZ 

m
TT
m
T
m
TT
PBEQEE
PBEPBEQEE
 »¼º ekGFBUUUU mUULCRCR 11 Z
0
2
1 dd QEE T  (20) 
Fig. 3. Hybrid RFNN Control System.
Using the designed supervisory control SU  as shown in (18), 
the inequality 0AV  can be obtained for nonzero value of 
the tracking error vector E  when VV A ! . As the results 
from (20), the supervisory control system is capable to drive 
the tracking error to zero without using the RFNN control and 
compensated control system. However, owing to the selection 
of the bounds )(ZUF , UG , LB and sign function, the 
supervisory control law can result in excessive and chattering 
control effort. Therefore, a RFNN control and compensated 
control are designed to overcome the mentioned drawback. 
The RFNN control is proposed to mimic the idea control law 
*U , and a compensated control is proposed to compensate the 
difference between *U and the RFNN control instead of 
increasing the inference rules of the RFNN. 
A four-layer RFNN as shown in Fig. 4, which comprises the 
input (the i layer), membership (the j layer), rule (the k layer) 
and output layer (the o layer), is adopted to implement the 
RFNN controller in this study. The signal propagation and the 
basic function in each layer of the RFNN are introduced as 
follows: 
Layer 1: Input Layer 
For every node i in this layer, the net input and the net output 
are represented as 
  2,1,
,1
1111
411
   
 
i)N(net)N(netf)N(y
)N(yw)N(x)N(net
iiii
ooi
o
ii
 (21) 
where ex rm   ZZ11  is the command error between the 
desired command, mZ , and the rotor speed of the PMSM, rZ ;
ezex '{ )-1( -112  is the command error change, in which 
1z  represents a time delay; N denotes the number of 
iterations; oiw  is the recurrent weights for the units in the 
output layer; 4oy  is the output of the RFNN. 
Layer 2: Membership Layer  
In this layer, each node performs a membership function. 
The Gaussian function, is adopted as the membership function. 
For the jth  node
Recurrent Fuzzy
Neural Network
Controller
emZ RU
e
e'
Tracking
Error
Compensated 
Controller
E
CU
+
++
_
Update Law
(
J
*
Hybrid Recurrent Fuzzy Neural Network (HRFNN) Control System 
oiijijko w,,m,w  V4
Supervisor
Controller
SU
+
tU
PMSM Drive System
tK ¦ BJs 
1
LT
+
_
rZeT
)(sH p
11  z
Lyapunov
Function AV
Operator
Index
u
D
Supervisor Control System
Reference
Model
*Z ¦¦
rZ
1373
The 2010 International Power Electronics Conference
Because )0(V  is bounded, and )(tV  is nonincreasing and 
bounded, then f³ ;fo 99 d
t
t 0
)(lim . Differentiate )(t;  with 
respect to time, then EQE  Tt  ; )( . Since all the variables in 
the right side of (27) are bounded, it implies E  is also 
bounded. Then )(t;  is uniformly continuous [15]. By using 
Barbalat’s lemma [15, 16], it can be shown that 0)(lim  ;fo tt .
Therefore, 0)( otE  as fot .
In order to train the RFNN effectively, an on-line 
parameter training methodology [13, 17], which is derived 
using the Lyapunov stability theorem and the gradient descent 
method, is omitted. Moreover, the update law [13, 17] is 
omitted here. 
IV. EXPERIMENTAL RESULTS
A block diagram of the DSP-based computer control system 
for a PMSM servo drive is depicted in Fig. 1. The current-
controlled PWM VSI is implemented by the IGBT power 
modules with a switching frequency of 15kHz. The control 
algorithm was implemented by a TMS320C32 DSP-based 
control system. A TMS320C32 DSP-based control board 
includes multi-channels of D/A, eight-channels programmable 
PWM and encoder interface circuits.  
The control gains of the proposed hybrid RFNN control 
system are given in the following: 
»¼
º«¬
ª 10 01P , 1201  k , 1 V , 8.0 J , 20. K   (35) 
First, a 2nd-order transfer function of the following form 
with rise time 0.3sec is chosen as the reference model for the 
periodic step command: 
43.1512s8.77s
43.1512
s2s 222
2
  nn
n
Z]Z
Z     (36) 
Some experimental results are provided to demonstrate the 
control performance for a PMSM using HRFNN control. Two 
conditions are provided in the experimentation here, one being 
the nominal condition, another being the increasing of the 
rotor inertia and viscous friction to approximately 4 times the 
nominal value. The experimental results of the supervisor 
control system due to periodic step and periodic sinusoidal 
command at the nominal case and the parameter variation case 
are shown in Fig. 5 and Fig. 6. The speed responses of the 
rotor at the nominal case and the parameter variation case are 
shown in Figs. 5(a), 5(c), 6(a) and 6(c); the associated control 
efforts are shown in Figs. 5(b), 5(d), 6(b) and 6(d). However, 
owing to the on-line adaptive mechanism of RFNN and the 
compensated controller, accurate tracking control performance 
of the PMSM can be obtained. From the experimental results, 
the control performance of the proposed the HRFNN control 
system is obvious to reduce torque ripple. 
V. CONCLUSIONS
The purpose of this paper is to investigate and implement a 
novel approach to learning control for torque-ripple reduction 
of PMSM using a hybrid recurrent fuzzy neural network 
(HRFNN) control. In order to reduce torque ripple and control 
robustness, a HRFNN speed control system that combined 
supervisor control, RFNN and compensated control is 
developed to control PMSM drive system. The HRFNN 
control system produces smooth torque up to the motor base 
speed. Finally, the effectiveness of the proposed control 
schemes is demonstrated by experimental results.  
Fig. 5.  Experimental results of supervisor control system due to periodical 
step command: (a) speed at nominal case; (b) control effort at nominal case; (c) 
speed at parameter variation case; (d) control effort at parameter variation case.
ACKNOWLEDGMENTS
The author would like to acknowledge the financial support 
of the National Science Council in Taiwan, R.O.C. through its 
grant NSC 97-2221-E-239-039-MY2.
(b)
2s
2s
30A
0A
(a)
mZ 1200rpm
0rpm Z
tU
(d)
2s
2s30A
0A
(c)
Z
mZ 1200rpm
tU
1375
The 2010 International Power Electronics Conference
                                                                                     
Adaptive Backstepping Control for a Permanent 
Magnet Synchronous Motor Drive Using RNN 
Uncertainty Observer 
Chih-Hong Lin 
Department of Electrical Engineering 
National United University 
Miao Li 360, Taiwan 
e-mail:jhlin@nuu.edu.tw 
Po-Hwa Chiang, Chi-Shin Tseng  
Department of Electrical Engineering 
National United University 
Miao Li 360, Taiwan 
e-mail: 9521239@nuu.edu.tw  
Abstract—In this paper an adaptive backstepping control 
system is proposed to control the rotor position of a permanent 
magnet synchronous motor (PMSM) drive using recurrent neural 
network (RNN). First, the field-oriented mechanism is applied to 
formulate the dynamic equation of the PMSM servo drive. Then, 
an adaptive backstepping approach is proposed to compensate 
the uncertainties in the motion control system. With the proposed 
adaptive backstepping control system, the rotor position of the 
PMSM drive possesses the advantages of good transient control 
performance and robustness to uncertainties for the tracking of 
periodic reference trajectories. Moreover, to further increase the 
robustness of the PMSM drive, a RNN uncertainty observer is 
proposed to estimate the required lumped uncertainty in the 
adaptive backstepping control system. In addition, an on-line 
parameter training methodology, which is derived using the 
gradient descent method, is proposed to increase the learning 
capability of the RNN. The effectiveness of the proposed control 
scheme is verified by experimental results.  
Index Terms permanent magnet synchronous motor, recurrent 
neural network, digital signal processor
I. INTRODUCTION
The AC servo drives, including PMSMs (both trapezoidal 
and sinusoidal types), switched reluctance motors and 
induction motors, have been widely used in robotics, 
computer-numerically-controlled (CNC) machine tools, 
elevators and many other applications in the area of 
mechatronics [1, 2] for decades. To achieve fast four-quadrant 
operation and smooth starting and acceleration, the field-
oriented control [1-3], or vector control, is used in the design 
of AC servo drives. Compared with induction servo motors, a 
PM synchronous motor has such advantages as higher 
efficiency owing to the absence of rotor losses and lower no-
load current below the rated speed; moreover, its decouple 
control performance is much less sensitive to the parameter 
variations of the motor. 
The backstepping design provides a systematic framework 
for the design of tracking and regulation strategies, suitable for 
a large class of state feedback linearizable nonlinear systems. 
The approach can be extended to handle systems with 
unknown parameters via adaptive backstepping [4-6]. The idea 
of backstepping design is to select recursively some 
appropriate functions of state variables as pseudo-control 
inputs for lower dimension subsystems of the overall system. 
Each backstepping stage results in a new pseudo-control 
design, expressed in terms of the pseudo control designs from 
preceding design stages. When the procedure terminates, a 
feedback design for the true control input results, which 
achieves the original design objective by virtue of a final 
Lyapunov function formed by summing up the Lyapunov 
functions associated with each individual design stage [7]. In 
addition, owing to the robust control performance of adaptive 
backstepping control and sliding mode control, numerous 
combined adaptive backstepping and sliding-mode control 
schemes have appeared for both linear and nonlinear systems 
[8–10]. 
The NNs can be mainly classified as feedforward neural 
networks (FNNs) and recurrent neural networks (RNNs) 
according to the structures [11]. It is well known that an FNN 
is capable of approximating any continuous functions closely. 
However, the FNN is a static mapping; it is unable to represent 
a dynamic mapping without the aid of tapped delays. The 
RNNs [11-17], which comprise both feedforward and feedback 
connections, have superior capabilities than FNNs, such as 
dynamic behavior and the ability to store information. Since 
recurrent neuron has an internal feedback loop, it captures the 
dynamic response of a system without external feedback 
through delays. Thus, RNNs are dynamic mapping and 
demonstrate good control performance in the presence of 
unmodelled dynamics, parameter variations and external 
disturbances [11]. However, there are a number of possible 
RNN architectures all with complex network structures [11-
17]; in addition, RNNs are more difficult to be trained than 
FNNs. For the purpose of real-time control, a RNN with simple 
network structure is proposed and a dynamic backpropagation 
algorithm is developed to train the proposed RNN on line with 
shorter training time. 
Due to uncertainties exist in the applications of the PMSM
servo drive which seriously influence the control performance, 
thus, adaptive backstepping controller and RNN uncertainty 
observer is proposed to control the rotor of the PMSM to track 
periodic references. In the proposed control scheme, an 
1293978-1-4244-5046-6/10/$26.00 c©2010 IEEE
        
The lumped uncertainty L  will be observed by an adaptive 
uncertainty observer and assumed to be a constant during the 
observation. The above assumption is valid in practical digital 
processing of the observer since the sampling period of the 
observer is short enough compared with the variation of L .
The control objective is to design an adaptive backstepping 
control system for the output Y  of the system shown in (9) to 
track the reference trajectory )(tYr , which is mθ ,
asymptotically. The proposed adaptive backstepping control 
system using FNN uncertainty observer is designed to achieve 
the position-tracking objective and described step by step as 
follows. 
Step 1:  
For the position-tracking objective, define the tracking error as  
dYYz −=1                        (12) 
and its derivative is 
dP YXz  −=1                       (13) 
Define the following stabilizing function: 
dYzc += 111α                      (14) 
where 1c is positive constant. The first Lyapunov function is 
chosen as 
2
11 2
1 zV =                       (15) 
Define 12 α−= PXz , then 1V  the derivative of is 
2
112112111 )()( zczzzzYXzV dp −=−=−= α     (16) 
Step 2: 
The derivative of 2z  is now expressed as 
12 α −= PXz ¸¸
¹
·
¨
¨
©
§
∂
∂
+
∂
∂
−++= d
d
pmpm YY
z
z
LUBXA 
1
1
1
1 αα
( ) dDmm YzcLUBzA  −−+++= 1112 α       (17) 
To design the backstepping control system, the lumped 
uncertainty L  is assumed to be bounded, i.e., LL ≤ , and 
define the following Lyapunov function: 
2
12 2
1 zVV +=                      (18) 
Using (16) and (17), the derivative of 2V  can be derived as 
follows: 
)(),( 212
2
11221212 zzzzczzVzzV  ++−=+= 
[ ]LUBzAzzzc Dmm +++++−= )( 1212211 α
][ d112 Yzcz  −−+                   (19) 
According to (19), a backstepping control law DU  is designed 
as follows: 
)]([ 21122
1 zsgnLAzzcBU mmD −−−−=
− α
)( d11
1
m YzcB  ++
−                        (20) 
where 1c  is positive constant. Substituting (20) into (19), the 
following equation can be obtained: 
)()(
)(),(
2
2
22
2
11
22
2
22
2
11212
LLzzAczc
LzLzzAczczzV
m
m
−+−−−≤
−+−−−=
0)( 222
2
11 ≤−−−≤ zAczc m !!!!! !(21) 
Define the following term: 
),()()( 212
2
22
2
11 zzVzAczct m −≤−+=Θ          (22) 
Then 
³ −≤Θt tztzVzzVd0 212212 ))(,)(((0)),(0)()( ττ    (23)
Since (0)),(0)( 212 zzV  is bounded, and ))(,)(( 212 tztzV  is 
nonincreasing and bounded, then ³ ∞<Θ
∞→
t
t
d0 )(lim ττ .
Moreover, ( )tΘ  is bounded, then and ( )tΘ is uniformly 
continuous [17]. By using Barbalat’s lemma [17], it can be 
shown that 0)(lim =Θ
∞→
t
t
. That is 1z  and 2z will converge to 
zero as ∞→t . Moreover, dt
YtY =
∞→
)(lim and dPt
YX =
∞→
lim . 
Therefore, the backstepping control system is asymptotically 
stable, even if parametric uncertainty, external load 
disturbance.  
Step 3: 
 Since the lumped uncertainty L  is unknown in practical 
application, the upper bound L  is difficult to determine, 
therefore, a RNN uncertainty observer is proposed to adapt the 
value of the lumped uncertainty Lˆ . A three-layer RNN, as 
shown in Fig. 3, which comprises an input (the i layer), a 
hidden (the j layer) and an output layer (the k layer), is adopted 
to implement the proposed control system. The signal 
propagation and the activation function in each layer is 
introduced as follows: 
 Layer 1: Input Layer  
( ) ( ),11 NxNnet ii =
( ) ( )( ) ( ) 2,1,1
1
1
111
=
+
==
−
i
e
NnetfNO
Nnetiii i
                   (24) 
where 1ix  represents the ith input to the node of input layer; N
denotes the number of iterations; 1if  is the activation function, 
which is a sigmoidal function. The inputs of the RNN are 
1
1
1 zx =  and 1
1
2 zx = .
 Layer 2: Hidden Layer 
( ) ( ) ( ),1 22222 ¦+−=
i
iijjjj NxwNOwNnet
( ) ( )( ) ( ) ljeNnetfNO Nnetjjj j ...,,2,1,1
1
2
222
=
+
==
−
                (25) 
where 2jw  are the recurrent weight for the units in the hidden 
layer; 2ijw  are the connective weights between the input layer 
and the hidden layer; l is the number of neurons in the hidden 
layer; 2jf  is the activation function, which is also a sigmoidal 
function. 
2010 5th IEEE Conference on Industrial Electronics and Applicationsis 1295
        
In order to train the RNN effectively, an on-line parameter 
training methodology [16], which is derived using the 
Lyapunov stability theorem and the gradient descent method, 
is omitted. Moreover, the update law [16] is omitted here. 
IV. EXPERIMENTAL RESULTS
A block diagram of the of a DSP control system for a PMSM 
drive is depicted in Fig. 1. A host PC downloads the program 
running on the DSP. The proposed controllers are implemented 
by DSP control system. The current-controlled PWM VSI is 
implemented by the IGBT power modules with a switching 
frequency of 15kHz. A DSP control board includes multi-
channels of D/A and encoder interface circuits. The PMSM 
used in this drive system is a three-phase two-pole 220V 750W 
3.8A 3600rpm type. 
The parameters of the proposed adaptive backstepping 
control system using RNN uncertainty observer are given in the 
following: 
101 =c , 5.52 =c , 5.0=ρ , 1.0=η           (36) 
First, a 3nd-order transfer function of the following form 
with rise time 0.3sec is chosen as the reference model for the 
periodic step command: 
212502717132
21250
)(
)(
23
0)(
* +++
=
=
ssss
s
sT
r
L
θ
θ      
(37) 
The control objective is to control the rotor to 6.28 rad
periodically. Then, when the command is a sinusoidal reference 
trajectory, the reference model is set to be unit gain. The 
sampling interval of the control processing in the 
experimentation is set at 1msec. Some experimental results are 
provided to demonstrate the control performance of the 
proposed control systems. Two conditions are provided in the 
experimentation here, one being the nominal condition, another 
being the increasing of the rotor inertia and viscous friction to 
approximately 4 times the nominal value. The experimental 
results of the adaptive backstepping control system using RNN 
uncertainty observer due to periodic step and periodic 
sinusoidal command at the nominal case and the parameter 
variation case are shown in Fig. 5 and Fig. 6. The position 
responses of the rotor at the nominal case and the parameter 
variation case are shown in Figs. 5(a), 5(c), 6(a) and 6(c); the 
associated control efforts are shown in Figs. 5(b), 5(d), 6(b) and 
6(d). However, the robust control performance of the proposed 
adaptive backstepping control system using RNN uncertainty 
observer under the occurrence of parameter variations at 
different trajectories are obvious owing to the on-line adaptive 
adjustment of the RNN uncertainty observer. From the 
experimental results, the control performance of the proposed 
the adaptive backstepping control system using RNN 
uncertainty observer is favorable for the tracking of periodic 
commands. 
VI. CONCLUSIONS
In this paper, an adaptive backstepping control system using 
RNN uncertainty observer is proposed to control the rotor 
position of a PMSM drive. First, the field-oriented mechanism 
is applied to formulate the dynamic equation of the PMSM 
drive. Then, an adaptive backstepping approach is proposed to 
compensate the uncertainties in the motion control system. 
Moreover, to further increase the robustness of the PMSM 
drive, a RNN uncertainty observer is proposed to estimate the 
required lumped uncertainty in the adaptive backstepping 
control system. In addition, an on-line parameter training 
methodology, which is derived using the gradient descent 
method, is proposed to increase the learning capability of the 
RNN. The effectiveness of the proposed control scheme is 
verified by experimental results.  
Fig. 5. Experimental results of adaptive backstepping control system using 
RNN uncertainty observer due to periodical step command: (a) rotor 
speed at parameter variation; (b) control effort at parameter variation. 
1sec
3A
Reference
M odel
Rotor
Position
6.28rad
0rad
0A
6.28rad
DU
(a)
(b)
1sec
Reference
M odel
Rotor
Position
6.28rad
0rad
3A
0A
6.28rad
DU
(c)
(d)
1sec
1sec
2010 5th IEEE Conference on Industrial Electronics and Applicationsis 1297
                                                                                   
Hybrid Recurrent Fuzzy Neural Network Control for 
Permanent Magnet Synchronous Motor Applied in 
Electric Scooter 
Chih-Hong Lin, Po-Hwa Chiang, Chi-Shin Tseng  
Department of Electrical Engineering 
National United University 
Miao Li 360, Taiwan 
e-mail:jhlin@nuu.edu.tw 
Yi-Ling Liu  Mei-Yu Lee 
Department of Electrical Engineerin 
 National United University 
Miao Li 360, Taiwan  
e-mail: 9521230@nuu.edu.tw 
Abstract—The purpose of this paper is to investigate and 
implement a novel approach to learning control for permanent 
magnet synchronous motor (PMSM) drive system using a hybrid 
recurrent fuzzy neural network (HRFNN) control. First, the 
field-oriented mechanism is applied to formulate the dynamic 
equation of the PMSM servo drive. Then, a HRFNN speed 
control system that combined supervisor control, RFNN and 
compensated control is developed to control PMSM drive system. 
Finally, the effectiveness of the proposed control scheme is 
verified by the experimental results. 
Keywords- permanent magnet synchronous motor, recurrent 
fuzzy neural network 
I. INTRODUCTION
The AC servo drives, including PMSMs (both trapezoidal 
and sinusoidal types), switched reluctance motors and 
induction motors, have been widely used in robotics, 
computer-numerically-controlled (CNC) machine tools, 
elevators and many other applications in the area of 
mechatronics [1, 2] for decades. To achieve fast four-quadrant 
operation and smooth starting and acceleration, the field-
oriented control [1-3], or vector control, is used in the design 
of AC servo drives. Compared with induction servo motors, a 
PM synchronous motor has such advantages as higher 
efficiency owing to the absence of rotor losses and lower no-
load current below the rated speed; moreover, its decouple 
control performance is much less sensitive to the parameter 
variations of the motor [1, 2]. 
Recently much research has been done on the applications 
of fuzzy neural network (FNN) systems, which have the 
advantages of both fuzzy systems and neural networks, in the 
control fields to deal with nonlinearities and uncertainties of the 
control systems [4-5]. Moreover, the FNN’s are universal 
approximators [6-7], which can approximate any dynamics to a 
prespecified accuracy by the learning process [6]. The fuzzy-
neural approximator presented in Leu, Lee and Wang [8] tuned 
on line to approximate the unknown nonlinear dynamic 
systems for adaptive control. The supervisory FNN controller 
proposed in Lin, Hwang and Wai [9] comprised a supervisory 
controller which is designed to stabilize the system states 
around a defined bound region, and an FNN sliding-mode 
controller which combines the advantages of the sliding-mode 
control with robust characteristics and the FNN with on-line 
learning ability. The adaptive control schemes of nonlinear 
systems that incorporate the techniques of FNNs have also 
grown rapidly [10-11]. Therefore, this paper presents a hybrid  
fuzzy neural network (HFNN) control PMSM drive for electric 
motorcycle. The method is not dependent upon the 
predetermined characteristics of the motor and can adapt to any 
change in the motor characteristics. Finally, some experimental 
results are provided to demonstrate the effectiveness of the 
proposed control schemes. 
II. PMSM DRIVE SYSTEM
The machine model of a PMSM can be described in the 
rotor rotating reference frame as follows [1-3]: 
ddrqqqq iLPiLiRv ω++=                    (1)!
qqrdddd iLPiLiRv ω−+=  !!!!!!!!!!!!!!!! (2) 
where dv and qv  are d and q axis stator voltage, di  and qi
are  d and q axis stator current dL  and qL  are d and q axis 
stator inductance, R is the stator resistance, rω  is  rotor speed, 
P is number of poles.  
 The electric torque can be expressed as 
( ) 2/][3 qdqdqfdmde iiLLiILPT −+=               (3)!
and the equation of  the motor dynamics is 
rrLe JBTT ωω ++= !!!!!!!!!!!!!!!!!!!!!!!! (4)!
In equation (4), eT  is the electric torque, LT  stands for the 
load torque (external load disturbance), B represents the 
viscous frictional coefficient and J is the moment of inertia.  
 The basic principle in controlling a PMSM drive is based 
on field orientation with constant current in the d axis, so the 
electromagnetic torque eT  is then proportional to qi , which is 
determined by closed-loop control. Since the generated torque 
is linearly proportional to the q-axis current as the d-axis rotor 
flux is constant in equation (3), the torque per ampere can be 
achieved. 
2175978-1-4244-5046-6/10/$26.00 c©2010 IEEE
        
law fires only when the RFNN approximation properties can 
not be guaranteed. 
The design of a supervisory hybrid control system is 
necessary for the condition of divergence of states to pull the 
states back to the predetermined bound region and guarantee 
the stability of the system. Inside the bound region the RFNN 
control system approximates uniformly the idea control law. 
From (7), (9), and (11), an error equation is then obtained as 
follows: 
[ ]SCRP UUUUBeke −−−+= *1     (12) 
In order to achieve a zero steady-state error, an integral 
equation can be defined as   
12 eee  === η       (13) 
Then an error equation can be redefined as follows: 
[ ]SCR UUUU −−−+= *mBEE Λ    (14) 
where [ ]Tee 21=E is tracking error vector, »
¼
º
«
¬
ª
−
=
10
10
k
Λ is
a stable matrix and [ ]TPB0m =B .
Then, the Lyapunov function candidate is chosen as follows: 
PEE T
2
1
=AV    (15) 
where P is a symmetric positive definite matrix which satisfies 
the following Lyapunov equation [12]: 
QPP −=+ ΛΛT   16) 
and 0>Q  is selected by the designer. Take the derivative of 
the Lyapunov function and use (17) and (16), then 
[ ]SCRT
A
UUUU
V
−−−++=
+=
*
2
1
2
1
2
1
2
1
m
TTT
TT
PBEPEEEPE
PEEEPE
ΛΛ

( ) SCR UUUU mTmTT PBEPBEQEE −−++−≤ *21    (17) 
To satisfy 0≤AV , the supervisory control SV is designed as 
follows[14]: 
( ) ( )»
¼
º
«
¬
ª
++−= UU
L
CRS GFB
UUDU )(1sgn ωm
TPBE
( ) ( )»
¼
º
«
¬
ª
++ ek
B
D m
L
1
1sgn ωm
TPBE  (18) 
where )sgn( ⋅  is a sign function, and the operator index 
¯
®
­
<=
≥=
=
VVD
VVD
D
A
A
if,0
if,1   (19) 
in which V is positive constant. Substitute (9) and (16) into 
(15) and consider the case 1=D , then 
( )
( )«
¬
ª
++++−=
−−++−≤
ekwCA
B
UUUUV
mPP
P
SCRA
1
*
1
2
1
2
1
ωω 

m
TT
m
T
m
TT
PBEQEE
PBEPBEQEE
( )»
¼
º
+++−−−−+ ekGF
B
UUUU m
UU
L
CRCR 1
1
ω !
0
2
1 ≤−≤ QEE T ! (20) 
Fig. 3. Hybrid RFNN Control System.
Using the designed supervisory control SU  as shown in (18), 
the inequality 0<AV  can be obtained for nonzero value of the 
tracking error vector E  when VV A > . As the results from 
(20), the supervisory control system is capable to drive the 
tracking error to zero without using the RFNN control and 
compensated control system. However, owing to the selection 
of the bounds )(ωUF , UG , LB and sign function, the 
supervisory control law can result in excessive and chattering 
control effort. Therefore, a RFNN control and compensated 
control are designed to overcome the mentioned drawback. 
The RFNN control is proposed to mimic the idea control law 
*U , and a compensated control is proposed to compensate the 
difference between *U and the RFNN control instead of 
increasing the inference rules of the RFNN. 
A four-layer RFNN as shown in Fig. 4, which comprises the 
input (the i layer), membership (the j layer), rule (the k layer) 
and output layer (the o layer), is adopted to implement the 
RFNN controller in this study. The signal propagation and the 
basic function in each layer of the RFNN are introduced as 
follows: 
Layer 1: Input Layer 
For every node i in this layer, the net input and the net output 
are represented as 
( ) 2,1,
,1
1111
411
===
−∏=
i)N(net)N(netf)N(y
)N(yw)N(x)N(net
iiii
ooi
o
ii
 (21) 
where ex rm =−= ωω
1
1  is the command error between the 
desired command, mω , and the rotor speed of the PMSM, rω ;
ezex Δ≡= )-1( -112  is the command error change, in which 
1−z  represents a time delay; N denotes the number of 
iterations; oiw  is the recurrent weights for the units in the 
output layer; 4oy  is the output of the RFNN. 
Layer 2: Membership Layer  
Recurrent Fuzzy
Neural Network
Controller
emω RU
e
eΔ
Tracking
Error
Compensated 
Controller
E
CU
+
++
_
Update Law
Ε
γ
Γ
Hybrid Recurrent Fuzzy Neural Network (HRFNN) Control System 
oiijijko w,,m,w  σ
4
Supervisor
Controller
SU
+
tU
PMSM Drive System
tK ¦ BJs +
1
LT
+
_
rωeT
)(sH p
11 −− z
Lyapunov
Function AV
Operator
Index
×
D
Supervisor Control System
Reference
Model
*ω
¦¦
rω
2010 5th IEEE Conference on Industrial Electronics and Applicationsis 2177
        
Since 0)( ≤tV , )(tV  is negative semidefinite (i.e., 
)0()( VtV ≤ ), which implies E  and )( * ΟΟ −  are bounded 
using (28). Let function 2)()( QEETtVt =−=Ξ  , and 
integrate function )(tΞ  with respect to time 
)()0()(0 tVVd
t
−=³ Ξ τς  (34) 
Because )0(V  is bounded, and )(tV  is nonincreasing and 
bounded, then ∞<³ Ξ
∞→
ςς dt
t 0
)(lim . Differentiate )(tΞ  with 
respect to time, then EQE  Tt =Ξ )( . Since all the variables in 
the right side of (27) are bounded, it implies E  is also 
bounded. Then )(tΞ  is uniformly continuous [15]. By using 
Barbalat’s lemma [15, 16], it can be shown that 0)(lim =Ξ
∞→
t
t
.
Therefore, 0)( →tE  as ∞→t .
In order to train the RFNN effectively, an on-line 
parameter training methodology [13, 17], which is derived 
using the Lyapunov stability theorem and the gradient descent 
method, is omitted. Moreover, the update law [13, 17] is 
omitted here. 
IV. EXPERIMENTAL RESULTS
A block diagram of the DSP-based computer control system 
for a PMSM servo drive is depicted in Fig. 1. The current-
controlled PWM VSI is implemented by the IGBT power 
modules with a switching frequency of 15kHz. The control 
algorithm was implemented by a TMS320C32 DSP-based 
control system. A TMS320C32 DSP-based control board 
includes multi-channels of D/A, eight-channels programmable 
PWM and encoder interface circuits.  
The control gains of the proposed hybrid RFNN control 
system are given in the following: 
»¼
º
«¬
ª
= 10
01P , 1201 =k , 1=V , 8.0=γ , 20.=η   (35) 
First, a 2nd-order transfer function of the following form 
with rise time 0.3sec is chosen as the reference model for the 
periodic step command: 
43.1512s8.77s
43.1512
s2s 222
2
++
=
++ nn
n
ωζω
ω     (36) 
Some experimental results are provided to demonstrate the 
control performance for a PMSM using HRFNN control. Two 
conditions are provided in the experimentation here, one being 
the nominal condition, another being the increasing of the rotor 
inertia and viscous friction to approximately 4 times the 
nominal value. The experimental results of the supervisor 
control system due to periodic step and periodic sinusoidal 
command at the nominal case and the parameter variation case 
are shown in Fig. 5 and Fig. 6. The speed responses of the rotor 
at the nominal case and the parameter variation case are shown 
in Figs. 5(a), 5(c), 6(a) and 6(c); the associated control efforts 
are shown in Figs. 5(b), 5(d), 6(b) and 6(d). However, owing to 
the on-line adaptive mechanism of RFNN and the compensated 
controller, accurate tracking control performance of the PMSM 
can be obtained. From the experimental results, the control 
performance of the proposed the HRFNN control system is 
obvious to reduce torque ripple. 
    
Fig. 5.  Experimental results of supervisor control system due to periodical 
step command: (a) speed at nominal case; (b) control effort at nominal case; 
(c) speed at parameter variation case; (d) control effort at parameter variation 
case. 
V. CONCLUSIONS
The purpose of this paper is to investigate and implement a 
novel approach to learning control for torque-ripple reduction 
of PMSM using a hybrid recurrent fuzzy neural network 
(HRFNN) control. In order to reduce torque ripple and control 
robustness, a HRFNN speed control system that combined 
supervisor control, RFNN and compensated control is 
developed to control PMSM drive system. The HRFNN 
control system produces smooth torque up to the motor base 
(d)
2s
2s30A
0A
(c)
ω
mω 1200rpm
tU
(b)
2s
2s
30A
0A
(a)
mω 1200rpm
0rpm ω
tU
2010 5th IEEE Conference on Industrial Electronics and Applicationsis 2179
表 Y04 
行政院國家科學委員會補助國內專家學者出席國際學術會議報告 
                                                           99 年 6 月 29 日 
報告人姓名 林  志  鴻 服務機構及職稱 國立聯合大學電機系副教授
     時間 
會議 
     地點 
2010 年 6 月 21 日至 25 日
地點: 日本北海道札晃 
本會核定補助文號 NSC 
97-2221-E-239-039-MY2 
會議 
名稱 
 (中文) 國際電力電子研討會 
 (英文) The International Power Electronics Conference-ECCE ASIA-  
發表 
論文 
題目 
(中文)混合型遞迴式模糊類神經網路控制永磁同步馬達應用於電動機車上
(英文) Hybrid Recurrent Fuzzy Neural Network Control for Permanent Magnet 
Synchronous Motor Applied in Electric Scooter 
 
報告內容應包括下列各項： 
一、參加會議經過 
本人於 6/21 早上 09:45 搭乘中華航空 CI 0130 由桃園中正機場飛至日本北海道新千歲機
場，於當地時間下午 14:35 到達機場，隨即由新千歲機場搭乘機場客運公車直接轉往札
晃旅館。然後於 6/22 上午 8:30 至大會辦理報到手續並聽別人報告。此研討會是工業電
子領域最重要的國際學術研討會之一，著重於學術理論與實際應用之結合發展，是理論
實際應用與新方法論文應用發表的重要學術研討會。此次議程包括：高功率直流轉換
器、功率放大器、矩陣轉換器、串聯轉換器、馬達控制、電源轉換技術、功率元件包裝
技術、電磁干擾等等。此次與會除了發表論文外，亦與國際友人聯絡友誼、交換意見，
瞭解這些領域之研究動向與未來發展之趨勢。此次 2010 年國際電力電子研討會(The 
2010 The International Power Electronics Conference-ECCE ASIA-, IPEC 2010 )，在日本北
海道札晃傳統會議中心(Sapporo Convention Center)舉行。本次國際電力電子研討會，除
了日本人士外，來自其他國家，計有台灣、美國、德國、荷蘭、韓國、墨西哥、巴西、
澳洲、義大利、蘇聯、泰國、印度、伊朗、印尼、埃及、土耳其、法國、馬來西亞、越
南、黎巴嫩、西班牙、葡萄牙、英國、智利、加拿大、新加坡、中國大陸及波蘭等四十
餘國的學者及工業界專家參與此盛會，本次會議為 IPEC 首次於北海道札晃舉辦，尤其
是在日本北海道札晃，是一未經大面積開發之古老農業都市。本屆投稿相當踴躍，共有
來自 43 個國家 654 篇論文投稿，最後僅 63.76%接受率之 417 篇論文被發表。 
 
附件三
 
表 Y04 
45. Fuzzy Systems and Analysis 
46. Harmonics, Power Factor and VAR compensation 
47. PM Machine Drives Internet, Multimedia and Wireless Technologies 
48. Intelligent Sensors and Actuators 
49. Fuel Cell Systems 
50. Pulsed Supply Technology 
51. Advanced Applications in Control and Electric Ballast 
52. Estimation of Nonlinear Systems 
53. Networks and Decentralized Systems 
54. Diagnostics in Electrical Drives and Power Electrics 
55. Control System 
56. Photovoltaic and Wind Energy Systems 
57. Application in Human Language Technology 
58. Interactive Technology  
59. Fuzzy-based Approaches 
個人於6/23日發表文章 “Hybrid Recurrent Fuzzy Neural Network Control for Permanent 
Magnet Synchronous Motor Applied in Electric Scooter＂，期間參加不同場次的論文發
表、佈告論文之研討，對於目前工業電子及電力電子的研究現況留下相當深刻的印象，
也攜回許多相當有用的資料。6/25日由日本北海道新千歲機場搭機，於下午18:40飛抵桃
園中正機場。 
 
二、與會心得 
1. 目前工業電子及電力電子之研究課題及方向如下： 
y 馬達之無感測器控制技術及發展：PM 同步馬達、同步磁阻馬達、開關磁阻
馬達及感應馬達。 
y 馬達驅動：Multilevel inverter 設計、自激感應發電機設計。 
y 再生能源應用之轉換器：如風力發電、太陽光電、燃料電池及工業應用電路。
y DC/DC： ZVS、 ZCS、控制器、 放大器、電路架構改良、Active Clamp、
High power、同步整流電路、雙向 DC/DC。 
y 轉換器: Matrix、Series、Multilevel、Transient。 
y 換流器：並聯技術、與電力公司並聯技術。 
y 功因改善：電路架構更新、利用 AC/AC 新電路架構改善特性。 
y 電子式安定器： HID 燈 Modeling 及設計、Ignitor 設計。 
y 工業控制及應用：如工業機器人、機器手臂、電動汽車、大眾捷運系統。 
y 網際網路控制技術及應用。 
 
2. 參加此會議不但可以吸收最新的電力電子技術應用新知，並可促進電力電子技術的相
互交流，提升我國在工業電子及電力電子技術應用方面的研究水準與國際地位。另外
值得我們注意的是這幾年來歐、美、大陸、日在工業電子及電力電子技術方面的發展
相當迅速。國內若不投入更多的人力與金錢來加強電力電子方面的研發，則未來將無
法趕上先進國家工業電子及電力電子技術的技術，且易被後來者追上。 
 

Abstract-- The purpose of this paper is to investigate and 
implement a novel approach to learning control for permanent 
magnet synchronous motor (PMSM) drive system using a hybrid 
recurrent fuzzy neural network (HRFNN) control. First, the 
field-oriented mechanism is applied to formulate the dynamic 
equation of the PMSM servo drive. Then, a HRFNN speed 
control system that combined supervisor control, RFNN and 
compensated control is developed to control PMSM drive system. 
Finally, the effectiveness of the proposed control scheme is 
verified by the experimental results. 
Index Terms-- permanent magnet synchronous motor, 
recurrent fuzzy neural network  
I. INTRODUCTION
The AC servo drives, including PMSMs (both trapezoidal 
and sinusoidal types), switched reluctance motors and 
induction motors, have been widely used in robotics, 
computer-numerically-controlled (CNC) machine tools, 
elevators and many other applications in the area of 
mechatronics [1, 2] for decades. To achieve fast four-quadrant 
operation and smooth starting and acceleration, the field-
oriented control [1-3], or vector control, is used in the design 
of AC servo drives. Compared with induction servo motors, a 
PM synchronous motor has such advantages as higher 
efficiency owing to the absence of rotor losses and lower no-
load current below the rated speed; moreover, its decouple 
control performance is much less sensitive to the parameter 
variations of the motor [1, 2]. 
Recently much research has been done on the applications 
of fuzzy neural network (FNN) systems, which have the 
advantages of both fuzzy systems and neural networks, in the 
control fields to deal with nonlinearities and uncertainties of 
the control systems [4-5]. Moreover, the FNN’s are universal 
approximators [6-7], which can approximate any dynamics to 
a prespecified accuracy by the learning process [6]. The 
fuzzy-neural approximator presented in Leu, Lee and Wang [8] 
tuned on line to approximate the unknown nonlinear dynamic 
                                                          
This work was supported in part by the financial support of the National 
Science Council in Taiwan, R.O.C. through its grant NSC97-2221-E-239-039-
MY2.  
C. H. Lin, P. H. Chiang, C. S. Tseng, Y. L. Liu and M. Y. Lee are with 
Department of Electrical Engineering, National United University, Miao Li 
360, Taiwan. (e-mail: jhlin@nuu.edu.tw). 
systems for adaptive control. However, the fuzzy neural 
network (FNN) is a static mapping. Moreover, the weight 
updates of the FNN do not utilize the internal information of 
the neural network (NN) and the function approximation is 
sensitive to the training data. Thus, the recurrent neural 
network (RNN) is a dynamic mapping and demonstrates good 
control performance in the presence of uncertainties [9-12]. 
Therefore, this paper presents a hybrid recurrent fuzzy neural 
network (HRFNN) control PMSM drive for electric scooter. 
The method is not dependent upon the predetermined 
characteristics of the motor and can adapt to any change in the 
motor characteristics. Finally, some experimental results are 
provided to demonstrate the effectiveness of the proposed 
control schemes. 
II. PMSM DRIVE SYSTEM
The machine model of a PMSM can be described in the 
rotor rotating reference frame as follows [1-3]: 
ddrqqqq iLPiLiRv Z                                                  (1)!
qqrdddd iLPiLiRv Z                                                (2) 
where dv and qv  are d and q axis stator voltage, di  and qi
are  d and q axis stator current dL  and qL  are d and q axis 
stator inductance, R is the stator resistance, rZ  is  rotor speed, 
P is number of poles.  
 The electric torque can be expressed as 
  2/][3 qdqdqfdmde iiLLiILPT                                          (3)!
and the equation of  the motor dynamics is 
rrLe JBTT ZZ                                                              (4)!
In equation (4), eT  is the electric torque, LT  stands for the 
load torque (external load disturbance), B represents the 
viscous frictional coefficient and J is the moment of inertia.  
 The basic principle in controlling a PMSM drive is based 
on field orientation with constant current in the d axis, so the 
electromagnetic torque eT  is then proportional to qi , which is 
determined by closed-loop control. Since the generated torque 
is linearly proportional to the q-axis current as the d-axis rotor 
flux is constant in equation (3), the torque per ampere can be 
achieved. 
 The configuration of a DSP field-oriented PMSM drive is 
shown in Fig. 1. The system is constituted by the following 
Hybrid Recurrent Fuzzy Neural Network 
Control for Permanent Magnet Synchronous 
Motor Applied in Electric Scooter 
Chih-Hong Lin Po-Hwa Chiang  Chi-Shin Tseng  Yi-Ling Liu  Mei-Yu Lee
Department of Electrical Engineering, National United University, Miao Li 360, Taiwan 
e-mail:jhlin@nuu.edu.tw 
1371
The 2010 International Power Electronics Conference
978-1-4244-5395-5/10/$26.00 ©2010 IEEE
The design of a supervisory hybrid control system is 
necessary for the condition of divergence of states to pull the 
states back to the predetermined bound region and guarantee 
the stability of the system. Inside the bound region the RFNN 
control system approximates uniformly the idea control law. 
From (7), (9), and (11), an error equation is then obtained as 
follows: 
> @SCRP UUUUBeke  *1     (12) 
In order to achieve a zero steady-state error, an integral 
equation can be defined as   
12 eee     K       (13) 
Then an error equation can be redefined as follows: 
> @SCR UUUU  *mBEE /    (14) 
where > @Tee 21 E is tracking error vector, »¼
º
«¬
ª
 10
10
k
/ is
a stable matrix and > @TPB0m  B .
Then, the Lyapunov function candidate is chosen as follows: 
PEE T
2
1 AV    (15) 
where P is a symmetric positive definite matrix which satisfies 
the following Lyapunov equation [12]: 
QPP   //T   16) 
and 0!Q  is selected by the designer. Take the derivative of 
the Lyapunov function and use (17) and (16), then 
> @SCRT
A
UUUU
V
 
 
*
2
1
2
1
2
1
2
1
m
TTT
TT
PBEPEEEPE
PEEEPE
//

  SCR UUUU mTmTT PBEPBEQEE d *21    (17) 
To satisfy 0dAV , the supervisory control SV is designed as 
follows[14]: 
   »¼
º
«¬
ª  UU
L
CRS GFB
UUDU )(1sgn ZmTPBE
   »¼
º
«¬
ª  ek
B
D m
L
1
1sgn ZmTPBE  (18) 
where )sgn(   is a sign function, and the operator index 
¯
®
­
 
t  
VVD
VVD
D
A
A
if,0
if,1   (19) 
in which V is positive constant. Substitute (9) and (16) into 
(15) and consider the case 1 D , then  
 «¬
ª  
d
ekwCA
B
UUUUV
mPP
P
SCRA
1
*
1
2
1
2
1
ZZ 

m
TT
m
T
m
TT
PBEQEE
PBEPBEQEE
 »¼
º ekGF
B
UUUU m
UU
L
CRCR 1
1 Z
0
2
1 dd QEE T  (20) 
Fig. 3. Hybrid RFNN Control System.
Using the designed supervisory control SU  as shown in (18), 
the inequality 0AV  can be obtained for nonzero value of 
the tracking error vector E  when VV A ! . As the results 
from (20), the supervisory control system is capable to drive 
the tracking error to zero without using the RFNN control and 
compensated control system. However, owing to the selection 
of the bounds )(ZUF , UG , LB and sign function, the 
supervisory control law can result in excessive and chattering 
control effort. Therefore, a RFNN control and compensated 
control are designed to overcome the mentioned drawback. 
The RFNN control is proposed to mimic the idea control law 
*U , and a compensated control is proposed to compensate the 
difference between *U and the RFNN control instead of 
increasing the inference rules of the RFNN. 
A four-layer RFNN as shown in Fig. 4, which comprises the 
input (the i layer), membership (the j layer), rule (the k layer) 
and output layer (the o layer), is adopted to implement the 
RFNN controller in this study. The signal propagation and the 
basic function in each layer of the RFNN are introduced as 
follows: 
Layer 1: Input Layer 
For every node i in this layer, the net input and the net output 
are represented as 
  2,1,
,1
1111
411
   
 
i)N(net)N(netf)N(y
)N(yw)N(x)N(net
iiii
ooi
o
ii
 (21) 
where ex rm   ZZ11  is the command error between the 
desired command, mZ , and the rotor speed of the PMSM, rZ ;
ezex '{ )-1( -112  is the command error change, in which 
1z  represents a time delay; N denotes the number of 
iterations; oiw  is the recurrent weights for the units in the 
output layer; 4oy  is the output of the RFNN. 
Layer 2: Membership Layer  
In this layer, each node performs a membership function. 
The Gaussian function, is adopted as the membership function. 
For the jth  node
Recurrent Fuzzy
Neural Network
Controller
emZ RU
e
e'
Tracking
Error
Compensated 
Controller
E
CU
+
++
_
Update Law
(
J
*
Hybrid Recurrent Fuzzy Neural Network (HRFNN) Control System 
oiijijko w,,m,w  V4
Supervisor
Controller
SU
+
tU
PMSM Drive System
tK ¦ BJs 
1
LT
+
_
rZeT
)(sH p
11  z
Lyapunov
Function AV
Operator
Index
u
D
Supervisor Control System
Reference
Model
*Z ¦¦
rZ
1373
The 2010 International Power Electronics Conference
Because )0(V  is bounded, and )(tV  is nonincreasing and 
bounded, then f³ ;fo 99 d
t
t 0
)(lim . Differentiate )(t;  with 
respect to time, then EQE  Tt  ; )( . Since all the variables in 
the right side of (27) are bounded, it implies E  is also 
bounded. Then )(t;  is uniformly continuous [15]. By using 
Barbalat’s lemma [15, 16], it can be shown that 0)(lim  ;
fo
t
t
.
Therefore, 0)( otE  as fot .
In order to train the RFNN effectively, an on-line 
parameter training methodology [13, 17], which is derived 
using the Lyapunov stability theorem and the gradient descent 
method, is omitted. Moreover, the update law [13, 17] is 
omitted here. 
IV. EXPERIMENTAL RESULTS
A block diagram of the DSP-based computer control system 
for a PMSM servo drive is depicted in Fig. 1. The current-
controlled PWM VSI is implemented by the IGBT power 
modules with a switching frequency of 15kHz. The control 
algorithm was implemented by a TMS320C32 DSP-based 
control system. A TMS320C32 DSP-based control board 
includes multi-channels of D/A, eight-channels programmable 
PWM and encoder interface circuits.  
The control gains of the proposed hybrid RFNN control 
system are given in the following: 
»¼
º
«¬
ª 10
01P , 1201  k , 1 V , 8.0 J , 20. K   (35) 
First, a 2nd-order transfer function of the following form 
with rise time 0.3sec is chosen as the reference model for the 
periodic step command: 
43.1512s8.77s
43.1512
s2s 222
2
  nn
n
Z]Z
Z     (36) 
Some experimental results are provided to demonstrate the 
control performance for a PMSM using HRFNN control. Two 
conditions are provided in the experimentation here, one being 
the nominal condition, another being the increasing of the 
rotor inertia and viscous friction to approximately 4 times the 
nominal value. The experimental results of the supervisor 
control system due to periodic step and periodic sinusoidal 
command at the nominal case and the parameter variation case 
are shown in Fig. 5 and Fig. 6. The speed responses of the 
rotor at the nominal case and the parameter variation case are 
shown in Figs. 5(a), 5(c), 6(a) and 6(c); the associated control 
efforts are shown in Figs. 5(b), 5(d), 6(b) and 6(d). However, 
owing to the on-line adaptive mechanism of RFNN and the 
compensated controller, accurate tracking control performance 
of the PMSM can be obtained. From the experimental results, 
the control performance of the proposed the HRFNN control 
system is obvious to reduce torque ripple. 
V. CONCLUSIONS
The purpose of this paper is to investigate and implement a 
novel approach to learning control for torque-ripple reduction 
of PMSM using a hybrid recurrent fuzzy neural network 
(HRFNN) control. In order to reduce torque ripple and control 
robustness, a HRFNN speed control system that combined 
supervisor control, RFNN and compensated control is 
developed to control PMSM drive system. The HRFNN 
control system produces smooth torque up to the motor base 
speed. Finally, the effectiveness of the proposed control 
schemes is demonstrated by experimental results.  
Fig. 5.  Experimental results of supervisor control system due to periodical 
step command: (a) speed at nominal case; (b) control effort at nominal case; (c) 
speed at parameter variation case; (d) control effort at parameter variation case.
ACKNOWLEDGMENTS
The author would like to acknowledge the financial support 
of the National Science Council in Taiwan, R.O.C. through its 
grant NSC 97-2221-E-239-039-MY2.
(b)
2s
2s
30A
0A
(a)
mZ 1200rpm
0rpm Z
tU
(d)
2s
2s30A
0A
(c)
Z
mZ 1200rpm
tU
1375
The 2010 International Power Electronics Conference
無研發成果推廣資料 
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
國科會補助專題研究計畫成果報告自評表 
請就研究內容與原計畫相符程度、達成預期目標情況、研究成果之學術或應用價
值（簡要敘述成果所代表之意義、價值、影響或進一步發展之可能性）、是否適
合在學術期刊發表或申請專利、主要發現或其他有關價值等，作一綜合評估。
1. 請就研究內容與原計畫相符程度、達成預期目標情況作一綜合評估 
■達成目標 
□未達成目標（請說明，以 100字為限） 
□實驗失敗 
□因故實驗中斷 
□其他原因 
說明： 
2. 研究成果在學術期刊發表或申請專利等情形： 
論文：■已發表 □未發表之文稿 □撰寫中 □無 
專利：□已獲得 □申請中 ■無 
技轉：□已技轉 □洽談中 ■無 
其他：（以 100字為限） 
發表國際研討會及學術期刊論文為 IEEE ICIEA 2009兩篇,IEEE PEDS 2009 一
篇,International Journal of Power Electronics 2010 一篇 
3. 請依學術成就、技術創新、社會影響等方面，評估研究成果之學術或應用價
值（簡要敘述成果所代表之意義、價值、影響或進一步發展之可能性）（以
500字為限） 
以學術研究及應用技術而言,完成下列技術之培養與應用: 
1、智慧型控制系統應用於電動機車之實測技術培養。 
2、無轉軸偵測元件之智慧型控制理論設計、模擬與實測技術之培養。 
3、控制軟體撰寫與界面技術之培養。 
4、應用交流電動機於電動機車之數位控制系統之設計與實作經驗。 
5、完成升降壓截波器之驅動電路及控制電路之製作。 
6、完成升降壓截波器與 DSP 控制板之界面電路之設計及實作。 
7、完成模糊類神經網路控制升降壓截波器之設計及模擬。 
8、完成以反電勢法之無轉軸偵測元件之控制系統之模擬與實測。 
9、完成智慧型控制器設計之模擬與實測。 
10、完成 DSP 控制板和控制電腦系統建立及軟硬體界面製作。 
11、完成 DSP 控制板之智慧型控制系統之建立與實測。 
12、完成以 DSP 控制板之智慧型控制系統驅動電動機車之模擬與實測。 
13、完成以 DSP 控制板控制降壓截波器於電動機車煞車模式時之回升充電模擬與實測。 
 
