study, an algorithm employing the NLMS adaptive 
filter is designed to reduce the dependence on signal 
strength and to promote the ability of noise 
rejection.  Experimental results show the signal 
quality can be improved as high as 10 to 20dB.  Even 
the vortex flowmeter is subject to a sigle hit to 
cause impulse structural vibration, the algorithm can 
also effectively reduce the noise level. 
英文關鍵詞： vortex flowmeter, NLMS, adaptive filter, signal 
processing, piezo-electric sensor 
 
1. 前言 
    耐用度在工業應用中往往扮演一項非常重要的評估因子，渦流流量計由於本身不具有任
何可動元件，因此其耐用度可滿足工業界的需求，且渦流流量計的量測範圍(turn-down ratio)
也可以輕易的到達 10或 20倍，其流量的量測精度也可達±0.5%以內[1,2]，因此渦流流量計已
逐漸被應用於各式的工業管流量測上。渦流流量計的量測原理乃是利用流體流經柱狀體時，
會於柱狀體的下游產生規律且交替出現的渦漩(vortex)，在適當的流速範圍內，此渦流溢放的
頻率會與流速成近似線性的關係，因此只要能測知渦流溢放的頻率，即可反推求得流體的流
速。大致上來說，渦流流量計量測系統可分為三個主要部分：渦流產生器、渦流感測器及信
號處理器。早期投入渦流流量計的研究大多集中於渦流產生器方面的設計，設計的重點在於
如何產生規律且線性度高的渦流溢放，例如圖 1所示的渦流產生器(vortex shedder)，其為成功
大學苗君易教授團隊所開發的 T型渦流產生器[2]，該渦流產生器已完成一系列的流況測試，
包括：污垢存在、管流震動、彎管效應或安裝效應、非定常流對渦流流量計的影響等[3-5]，
本研究的渦流流量計即採用此 T型柱狀體作為渦流產生器。 
    渦流感測器的主要作用則是偵測溢放之渦流，由於渦流溢放會伴隨著規律的壓力及速度
擾動，因此凡能感測這些擾動現象的量測原理均可被應用於渦流流量計，但須考量感測器的
耐壓、耐用、線性輸出等特性。一般而言，較常被應用的感測器有三類型，壓電式(piezoelectric 
material)、熱線式(hot wire)及超音波式(ultrasonic)，其中以壓電式的成本最低、使用上最簡單，
因此經常可見於渦流流量計的應用中[1,2]，然其易受電磁波及結構振動等雜訊干擾為其缺點。 
 
 
圖 1 本研究之 2”渦流流量計 
 
   相對於渦流產生器在流體力學上的研究上已被廣泛的探討，渦流流量計信號處理器這一部
分的研究則相對較少，信號處理器存在的目的不外乎是將所量得的渦流溢放信號轉化為流率
或體積。渦流流量計早期的信號處理器也大多以類比電路為主，在數學上無法執行太過複雜
的演算，最常見的方法有兩類，其中一種為將渦流溢放信號以位準觸發方式(Schmitt trigger)
轉換成方波信號[6]，再搭配計數器計數方波個數，以換算求得累計流量。另外一種常用的方
法則是利用零點偵測(zero crossing)的方式[7]，判斷渦流溢放信號通過零點的次數，已得知渦
流溢放的個數。然而上述兩種方式可能產生的誤差卻是相當高，假設在有雜訊的情況下，使
用零點偵測或位準觸發，往往會將雜訊當成渦流溢放信號累計，而造成誤差。信號中的雜訊
雖然可透過濾波器而適度的降低，然而一般渦流流量計的量測範圍(turn-down ratio)往往高達
1:10，甚至 1:20的情況，換句話說，渦流溢放信號在最低流到最高流所涵蓋的頻帶也是 1:10
或 1:20，因此雜訊的頻率範圍往往會落在渦流溢放信號的頻帶內，而造成濾波上的困難。 
    隨著數位電子快速的發展，因此使用新一代數位信號處理器的渦流流量計，所能實現的
演算法則複雜度也跟著提高，例如 Clark and Ghaoud 的 Dual Phase-locked loop [8]、Menz的
 
圖 2  NLMS演算架構[11] 
 
3. 實驗儀器及設備 
    本研究所製作的 2”口徑渦流流量計，如圖 1所示，搭配 T型渦流產生器作為研究對象，
該柱狀體的特徵長度 d(前緣寬度)為 10 mm，管流截面阻礙比約為 25%。該渦流產生器中鑲有
ㄧ壓電片(S0)，渦流溢放所產生的週期性壓力差會使渦流產生器有應力上的變化，該壓電材
料則會感測此應力變化而輸出規律的渦流溢放信號，然而結構震動或電磁干擾等雜訊亦會出
現於主信號中。 
    而於渦流流量計本體的管路部份另裝置有三個壓電片(S1、S2及 S3)，參見圖 1，其中 S1
及 S2 分別位管路兩側 90o位置(渦流產生器上游位置)，而 S3 則位於下方 180o位置，安裝此
三組壓電片的目的在於找出適當的雜訊感測器位置，以適合 NLMS演算法。S0 ~ S3的輸出信
號透過自製電荷放大器後，經 NI 9172類比數位轉換器(取樣頻率為 5 kHz)，將實驗信號收集
儲存於個人電腦，作為後續的信號分析使用。 
    實驗在成大航太中心流量實驗室進行，該實驗室目前共有二套標準流量系統(AF-001 及
AF-002)，均使用音速噴嘴作為流量標準件，搭配上游高壓氣源及調壓閥來完成流量之微調，
其中 AF-001在常壓段可提供的最大流量達 2.4×104 m3/h，並有多種管路口徑可供選擇(2”, 3”, 
4”, 6”)，本研究即使用其中 2”的管路，見圖 3。本研究實驗過程，管流流速介於 5 m/s < U < 51 
m/s之間，量測擴充不確定度為 0.34%。 
 
 
圖 3 渦流流量計於管路測試實景圖。 
 
 
 0 200 400 600 800 1000
0E+0
1E-4
2E-4
3E-4
po
w
er
fs
(a) Q2
 
0 200 400 600 800 1000
0E+0
5E-4
1E-3
2E-3
po
w
er
fs
(b) Q4
 
0 200 400 600 800 1000
0E+0
2E-3
4E-3
po
w
er
fs
(c) Q6
 
0 200 400 600 800 1000
f (Hz)
0E+0
2E-2
4E-2
po
w
er
fs
(d) Q8
 
圖 5 於不同流率下，原始渦流溢放信號(S0)的能量頻譜圖。 
 
4. 實驗結果 
    實驗過程中，於流速 5 m/s < U < 51 m/s之間擇定 8個流率點作為資料取樣的條件，如表
1所示。表 1中 Q為流量、U為流速、fs為測得之渦流溢放頻率，而 St為無因次化的頻率，
其定義為 St = fs⋅d/U ；由表 1暸解到於測試流量範圍內，渦流溢放頻帶約為 63 ~ 670 Hz。圖
4所示為 Q2、Q4、Q6及 Q8部分原始渦流溢放信號的片段，意即 S0感測器的信號輸出，其
中 Q2、Q4、Q6及 Q8的流量請對照表 1。以圖 4中的 Q2為例，其對應的流量約為 53 m3/h，
該信號顯示渦流溢放分量已全被雜訊所掩蓋，而 Q4、Q6 及 Q8 由於管流流速較大，其產生
的渦流溢放強度大，進而有較佳的渦流溢放信號品質。 
    圖 5所示為圖 4信號經 Fourier Transform後所對應的能量頻譜圖(power spectrum)，頻譜
圖中 fs所標示處為渦流溢放頻率。於圖 5 中的 Q2 頻譜，由於渦流溢放信號強度很小，因此
雜訊的能量相對而言顯得相當突出，且其分佈範圍與渦流溢放頻頻帶(63 ~ 670 Hz)相重疊，因
此無法以固定頻帶的濾波器去濾除雜訊；而隨著流速增加，渦流溢放信號的能量也逐漸變強，
0.20 0.22 0.24 0.26 0.28 0.30
-0.80
-0.40
0.00
0.40
0.80
A 
(v
ol
t.)
(d) Q8: u=S3, L=21
 
圖 7 於不同流率下，經 NLMS處理後之渦流溢放信號(雜訊來源 S3)。 
 
0 200 400 600 800 1000
0E+0
2E-6
4E-6
6E-6
po
w
er fs
(a) Q2: u=S3, L=21
 
0 200 400 600 800 1000
0E+0
5E-4
1E-3
po
w
er
fs
(b) Q4: u=S3, L=21
 
0 200 400 600 800 1000
0E+0
2E-3
4E-3
po
w
er
fs
(c) Q6: u=S3, L=21
 
0 200 400 600 800 1000
f (Hz)
0E+0
4E-3
8E-3
po
w
er
fs
(d) Q8: u=S3, L=21
 
圖 8 對應於圖 7之頻譜圖。 
 
    仿上述步驟，將參考雜訊分別改為 S1 及 S2，而得信號處理之結果。且為探討階數 L 對
處理結果之影響，另針對使用 S3作為參考雜訊的情況下，執行 L = 11及 L = 5之處理。為比
較這幾種結果之優劣，以一般慣用的訊雜比 SNR作為評比指標，本研究 SNR由能量頻譜的積
分而得[4]，其定義如下： 
 0 200 400 600 800 1000
0E+0
4E-3
8E-3
po
w
er
fs
(a) Q8:u= S3, L=11
 
0 200 400 600 800 1000
f (Hz)
0E+0
4E-2
8E-2
po
w
er
fs
(b) Q8: u= S3, L=5
 
圖 10 使用 S3為參考雜訊，L = 11及 L = 5於 Q8流率的頻譜圖。 
 
    於工業管路量測時，除了上述正常使用情況外，有時會面臨其它較為惡劣的操作條件，
例如偶發性施工所造成的震動，由於壓電感測器對於震動相當敏感，因此會造成流量計量測
上的誤差，因此本研究於實驗過程特地以榔頭於流量計上游作單下敲擊，以評估現階段的信
號處理模式能否應付此ㄧ情況。 
    圖 11為使用 S3作為參考雜訊，於 Q4流率在有敲擊情況下之信號處理結果，圖 11a為渦
流溢放感測器 S0於承受單下敲擊時之原始信號，圖中敲擊發生於 t = 1.032s，此ㄧ敲擊會導
致高頻震動影響後續約 0.1s的訊號，此ㄧ高頻振動會使流量計額外多計數許多脈波造成量測
誤差。圖 11b為 S3所記錄之對應信號，圖 11c為使用 S3作為參考雜訊、L = 5之 NLMS運算
結果，該結果顯示經 NLMS運算後，敲擊造成之雜訊強度明顯被抑制；而圖 11d則為 L = 21
之運算結果，該圖顯示敲擊雜訊一開始反而被放大，隨後再慢慢收歛回來。 
    圖 12為於 Q7之結果，相類似於圖 11的情況，使用 L = 5的階數大致上可有效降低敲擊
造成之高頻震動，而 L = 21卻會導致敲擊處有局部的信號發散，此乃因敲擊屬於突發性之狀
況，因此當演算法中使用的階數較多時，會導致濾波係數的調整較為緩慢，而跟不上信號的
變化。 
   上述兩例子顯示，L = 5階的設定，除可應付一般的使用情況外，於敲擊產生時，亦能有
效降低其影響。然而在較低流時，由於敲擊所造成的雜訊強度遠遠高於渦流溢放的信號強度，
因此處理的效果仍有改善的空間，圖 13所示為圖 6的進ㄧ步改進，於原本架構下的信號輸出
端加入一記憶暫存，儲存最近 0.2s內的信號輸出，同時於 S3輸出信號加入一突波偵測功能，
ㄧ旦有敲擊產生，則信號輸出將改為輸出記憶暫存器內的信號，意即敲擊信號產生的前 0.2
秒信號將被複製輸出，而受敲擊信號影響的信號則被旁通(bypass)。圖 14及圖 15為相對應於
圖 11及圖 12同樣信號片段，但使用突波偵測及記憶緩衝演算法的結果，圖中顯示敲擊所造
成之影響幾乎被避開，因此計算結果較不受 NLMS階數的影響，此演算法即使於低流率時仍
能有效的避開敲擊所造成之震動干擾。(受限於篇幅而無呈現低流之結果。) 
 
0.90 1.00 1.10 1.20t (sec.)
-0.20
0.00
0.20
A 
(v
ol
t.)
(a) NLMS of S0, L=5
-0.20
0.00
0.20 (b) NLMS of S0, L=21
Q4: with pulse detector
 
圖 14 具備突波偵測演算法於 Q4之結果。 
 
0.75 0.80 0.85 0.90 0.95
t (sec.)
-0.7
0.0
0.7
A 
(v
ol
t.)
(a) NLMS of S0, L=5
-0.7
0.0
0.7 (b) NLMS of S0, L=21
Q7: with pulse detector
 
圖 15 具備突波偵測演算法於 Q7之結果。 
 
 
5. 結論 
    本研究為了將 NLMS 適應性濾波器應用於渦流流量計的信號處理，製作了一 2＂T 型渦
流流量計，使用壓電片作為渦流溢放信號感測器，此外另於流量計本體三個不同位置處(S1、
S2 及 S3)裝置壓電片，以作為演算法中雜訊的參考來源。實驗結果顯示，不論參考雜訊使用
S1、S2或者 S3來源，均能有效提升 S0感測器輸出的信號品質，詳細的說，於低流時該演算
法改善信號品質達 10 ~ 20dB之普，而中流範圍約能提昇 5 ~ 7dB，而於最大流的品質改善則
較不明顯。S1、S2及 S3三處參考雜訊的運算結果，以 S3為最佳，因此建議以 S3 作為未來
量測參考雜訊之感測器安裝位置。而階數多寡對 NLMS 運算結果之影響，實現結果顯示 21
階、11階及 5階，對信號品質的改善程度均相當，然而使用 5階之 NLMS，除可應付一般的
使用情況外，於有外力敲擊流量計時，亦能有效的降低敲擊所產生的震動雜訊。 
    本研究為了進ㄧ步提升演算法對敲擊信號的處理能力，原本架構下的輸出端再加入一記
憶暫存，同時於 S3 輸出信號加入一突波偵測功能，ㄧ旦有敲擊產生，則敲擊信號產生的前
0.2 秒信號將被複製輸出，而受敲擊信號影響的信號則被旁通(bypass)，此演算法即使於低流
率時仍能有效的避開敲擊所造成之脈波干擾。 
 
 
6. 研究結果自評 
    本研究總計發展了兩種演算法流程，ㄧ為簡易流程，另ㄧ則較為複雜。以簡易流程而言，
其能顯著的提升渦流感測器輸出的信號品質，詳細的說，於低流時該演算法改善信號品質達
10 ~ 20dB之普，而中流範圍約能提昇 5 ~ 7dB，且 5階之 NLMS，除可應付一般的使用情況
外，於有外力敲擊流量計時，亦能有效的降低敲擊所產生的震動雜訊，該演算法架構簡單，
而所能達到的效果卻十分顯著，極具應用性價值。而另ㄧ較為複雜之演算流程，能更進ㄧ步
國科會補助計畫衍生研發成果推廣資料表
日期:2012/09/04
國科會補助計畫
計畫名稱: 具高抗噪之渦流溢放信號演算法之發展
計畫主持人: 胡志忠
計畫編號: 100-2221-E-244-014- 學門領域: 航太科技 
研發成果名稱
(中文) 具高抗噪之渦流溢放信號演算法
(英文) NLMS-based vortex signal processing algorithm
成果歸屬機構
高苑科技大學 發明人
(創作人)
胡志忠
技術說明
(中文) 本研究總計發展了兩種演算法流程，ㄧ為簡易流程，另ㄧ則較為複雜。以簡易流
程而言，其能顯著的提升渦流感測器輸出的信號品質，詳細的說，於低流時該演
算法改善信號品質達10 ~ 20dB之普，而中流範圍約能提昇5 ~ 7dB，且5階之
NLMS，除可應付一般的使用情況外，於有外力敲擊流量計時，亦能有效的降低敲
擊所產生的震動雜訊，該演算法架構簡單，而所能達到的效果卻十分顯著，極具
應用性價值。而另ㄧ較為複雜之演算流程，能更進ㄧ步提升流量計在受敲擊時之
信號品質，使流量計完全不受敲擊之影響，對一般於工業管路量測的渦流流量計
而言，更能提升其量測的可靠度。
(英文) An algorithm employing the NLMS adaptive filter is designed to reduce the dependence 
on signal strength and to promote the ability of noise rejection. Experimental results show 
the signal quality can be improved as high as 10 to 20dB. Even the vortex flowmeter is 
subject to a sigle hit to cause impulse structural vibration, the algorithm can also 
effectively reduce the noise level.
產業別 自來水供應業；機械製造業
技術/產品應用範圍 渦流流量計
技術移轉可行性及
預期效益
可將演算法售予國內流量計製造商，該演算法比目前國內使用的更為進步。
註：本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無。 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
