Battery Electricity Capacity Measurement Module, and 
then computer reads data via UART or USB and express 
it on the computer. 
英文關鍵詞： Electric Vehicle (EV), Battery Electricity Capacity 
Measurement Module, Near Field Communication, Hall 
Current Sensing Method, Coulometric Method. 
 
II 
 
目錄 
目錄 ............................................................................................................................... I 
圖目錄 .......................................................................................................................... V 
表目錄 ....................................................................................................................... VII 
摘要 .......................................................................................................................... VIII 
Abstract .................................................................................................................... VIII 
第一章 緒論 .................................................................................................................1 
1.1 研究動機與目的 ............................................................................................1 
1.2 研究方法與步驟 ............................................................................................2 
1.2.1 研究方法 .............................................................................................2 
1.2.2 研究步驟 .............................................................................................4 
1.3 報告架構 ........................................................................................................6 
第二章 建立電池電量演算法與等效電路 .................................................................7 
2.1 前言 ................................................................................................................7 
2.2 理想電池與實際電池的差異 ........................................................................7 
2.3 二次電池 ......................................................................................................10 
2.3.1 燃料電池 ........................................................................................... 11 
2.3.2 鋰電池 ...............................................................................................14 
2.3.3 鎳氫電池 ...........................................................................................19 
2.3.4 鎳鎘電池 ...........................................................................................20 
2.3.5 鉛酸電池 ...........................................................................................21 
2.3.6 二次電池性能比較 ...........................................................................23 
2.4 電池等效電路 ..............................................................................................23 
2.4.1 理想模型 ...........................................................................................24 
2.4.2 線性模型 ...........................................................................................24 
2.4.3 戴維寧等效模型 ...............................................................................25 
2.4.4 等效電容模型 ...................................................................................25 
2.4.5  Pspice 巨觀模型 .............................................................................26 
2.5 本章小結 .......................................................................................................27 
第三章 二次電池之充放電特性與電量量測 ...........................................................28 
3.1 前言 ..............................................................................................................28 
3.2 影響電池可輸出容量的因素 ......................................................................28 
3.2.1 放電電流 ...........................................................................................28 
3.2.2 環境溫度 ...........................................................................................29 
3.2.3 電池老化 ...........................................................................................29 
IV 
 
5.1 前言 ..............................................................................................................80 
5.2  ZigBee 無線模組之功能驗證 ...................................................................80 
5.3 電池電量量測模組與資料讀取器的功能驗證 ..........................................81 
5.3.1 電壓的量測結果 ...............................................................................81 
5.3.2 電流的量測結果 ...............................................................................83 
5.3.3 功率的量測結果 ...............................................................................88 
5.4 本章小結 ......................................................................................................90 
 
 
第六章 韌體與軟體實驗之結果 ...............................................................................91 
6.1 前言 ..............................................................................................................91 
6.2 量測模組與資料讀取器結合鉛酸電池組之實驗 ......................................91 
6.2.1 固定負載電流放電實驗 ...................................................................91 
6.2.2 變動負載電流放電實驗 ...................................................................93 
6.2.3 變動負載電流充電實驗 ...................................................................95 
6.3 本章小結 ......................................................................................................96 
第七章 結論與未來研究方向 ...................................................................................97 
7.1 結論 ..............................................................................................................97 
7.2 未來研究方向 ..............................................................................................98 
參考文獻 .....................................................................................................................99 
國科會補助專題研究計畫成果報告自評表 ...........................................................101 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
VI 
 
圖 4-9   微控制器(MSP430FG4618IPZ)之外觀圖 ................................................52 
圖 4-10  ADC12 類比轉數位轉換器之內部功能方塊圖 .......................................53 
圖 4-11  CC1101EMK 無線通訊模組之外觀圖 .....................................................54 
圖 4-12  CC1101 控制晶片內部之功能圖 ..............................................................55 
圖 4-13  CC1101EMK 無線通訊模組之電路圖 .....................................................55 
圖 4-14  資料讀取器之功能方塊圖 ........................................................................56 
圖 4-15  TUSB3410 USB 控制器之外觀圖 ............................................................57 
圖 4-16  TUSB3410 橋接電腦與 MSP430 微控制器之示意圖 .............................57 
圖 4-17  NHD-0420AZ-FSW-GBW-3V3 液晶顯示器之外觀圖 ............................57 
圖 4-18  MSP430F2013 鍵盤控制晶片 ...................................................................58 
圖 4-19  電池電量量測模組之外觀圖 ....................................................................59 
圖 4-20  資料讀取器之外觀圖 ................................................................................59 
圖 4-21  電池電量量測模組與周邊設備之接線圖 ................................................60 
圖 4-22  電池電量量測模組與周邊設備連接之外觀圖 ........................................60 
圖 4-23  高功率放電電阻之外觀圖 ........................................................................61 
圖 4-24  電池電量量測模組在固定負載下之放電線路圖 ....................................62 
圖 4-25  電池電量量測模組在變動負載下放電之線路圖 ....................................62 
圖 4-26  量測初始電量與判斷充放電狀態之方塊圖 ............................................64 
圖 4-27  放電模式子程式之方塊圖 ........................................................................65 
圖 4-28  充電模式子程式之方塊圖 ........................................................................66 
圖 4-29  ZigBee 無線模組動作之方塊圖 ...............................................................67 
圖 4-30  輸入待測電壓(Vi)之電路圖 ......................................................................69 
圖 4-31  使用 LED 顯示條建立參考電壓表之電路圖 ..........................................70 
圖 4-32  UART 資料通訊結果 .................................................................................77 
圖 4-33  Labview 操作介面之示意圖 .....................................................................78 
圖 4-34  Labview 圖控程式之示意圖 .....................................................................79 
圖 5-1   驗證程式資料輸出之示意圖 ....................................................................81 
圖 5-2   電源供應器電壓(V1)與微控制器讀值(V3)之表示圖 .............................83 
圖 5-3   電源供應器與單晶片電壓讀值之誤差百分比之表示圖 ........................83 
圖 5-4   在順向電流下 Vo 的變化 ..........................................................................86 
圖 5-5   在逆向電流下 Vo 的變化 ..........................................................................86 
圖 5-6   在順向電流下，量測電流與理論電流值的誤差(%) ..............................88 
圖 5-7   在逆向電流下，量測電流與理論電流值的誤差(%) ..............................88 
圖 5-8   理論功率與量測功率之表示圖 ................................................................89 
圖 6-1   固定負載放電之表示圖 ............................................................................93 
圖 6-2   各種路況的變動負載放電之曲線圖 ........................................................95 
圖 6-3   變動負載充電之曲線圖 ............................................................................96 
 
 
 
 
 
 
VIII 
 
摘要 
    本計畫針對電動車電池之電量量測法進行研究，發展出一套準確的電池電量
量測方法，採用霍爾電流感測法量測充放電之電流，並結合近場無線通訊，傳輸
與記錄電動車電池之使用狀態。目前電動車電池的各種電量量測方法均有其優缺
點，本計畫使用庫倫計法量測電池電量並預估誤差，實驗結果證實本文所發展出
之電池電量量測方法的確能較準確地預測電池電量及記錄電池的使用狀態。電池
電量量測模組可判斷電池是運轉在充電模式或放電模式，在充放電模式使用安培
小時法，估測電量與電池本身回復的電量。除了估測電池電量外，並且計算充放
電次數、研究電動車電池於各路況的電量量測情況；透過電池電量量測模組上的
無線通訊模組(ZigBee 無線模組)，將數據資料傳輸到資料讀取器後，數據資料再
透過 UART 或 USB 由電腦所讀取，並顯示在電腦的人機操作介面。 
 
關鍵詞: 電動車、電池電量量測模組、近場無線通訊、霍爾電流感測法、庫倫
計量法。 
 
Abstract 
The objective of this research is to design a electricity capacity measurement 
module and develop a precision electricity capacity mearurement method of the 
battery.We use the Hall Current Sensing Method to measure Charge and Discharge 
current and combinate Near Field Communication to transmit and record each 
situation of the battery in the Electric Vehicle . So far each method of the electricity 
capacity measurement has advantage and disadvantage. In this research we use 
Coulometric Method to measure the electricity capacity and predict the error capacity, 
and our electricity capacity measurement method is able to predict electricity of the 
battery and record each using status in the battery. The electricity capacity 
measurement module can judge that operate in charge state or discharge state. In both 
charge state and discharge state use ampare-hour method to caculate electricity 
capacity. Beside calculate the electricity capacity, it also calculates number of times 
of the both charge and discharge; research the situation of each electricity capacity 
measurement when Electric Vehicle operate in each traffic circumstance. We also 
transmit data to data reader by the wireless module (ZigBee Wireless Module) of the 
Battery Electricity Capacity Measurement Module, and then computer reads data via 
UART or USB and express it on the computer. 
Key Words: Electric Vehicle (EV), Battery Electricity Capacity Measurement 
Module, Near Field Communication, Hall Current Sensing Method, 
Coulometric Method. 
2 
 
高容量電池充電耗時的問題，以及電動車電池目前佔整體電動車很大的成本，更
甚者由於電動車所使用的鋰電池重量輕、能量密度高，採用可抽取式電池盒設
計，不但大幅減輕整車重量，且可免除需建構充電環境的難題，而且鋰電池價格
仍昂貴，難以被使用者接受。利用電池交換或租賃方式，使用者可不必於初始購
買電池盒，依據電池交換機制及方案，而由電池交換公司收取交換費用回收電池
成本，以方便、時效與使用者的成本考量，所以廣設電動車電池交換站會是一個
很好的解決方案。 
故研究目的是設計研發量測電池電量的電池電量量測模組，發展電池電容量
檢測技術來量測電池內部所儲存電量之多寡，讓使用者可以瞭解電池的使用狀
況，並且結合近場無線通訊來方便傳送資料數據給電腦。本電動車電池電量量測
模組在充、放電之電量量測之外，也需準確估測電池剩餘電量，並且可以知道充
放電狀態與次數，保護電池操作在正常工作範圍，避免過度放電。另一方面指示
電動車電池系統適時對電池充電，維持一定電池電量以確保電池續航能力。為了
估測電池殘存的容量，先前的研究文獻發展出了許多方法。其中包括了內阻法
(Internal Resistance)、比重法 (Specific Gravity)、開路電壓法 (Open Circuit 
Voltage)、安培小時法(Ampere-Hour)等。 
1.2 研究方法與步驟 
目前有許多已發表的電池電容量檢測技術，本計畫為了提高電池電量估測的
準確度，需要發展出適用於特定種類電池的高準確度電量估測方法，但若欲發展
出可廣泛運用於多種電池種類的電容量估測技術，就有相當大的挑戰性。 
1.2.1 研究方法 
研究方法在開發出電量量測模組之前，需要先行了解最佳的電池電量量測方
法，能準確、即時的將電動車電池的電量量測出來，將結果記錄並且用近場無線
通訊傳送到電池交換站的電腦。在廣泛研究各種電池電量量測方法後，認為庫侖
計量法是將流入(或流出)電池之電量以安培-小時之方式加總計算其容量 (實際
容量應為瓦特-小時，但因電池電壓一般均視為固定，故習用安培-小時)，在加
載情況下，此為有用之量測方式。但此法是以連續加總方式累計目前電池之可用
容量，為避免累計誤差產生，因此在本計畫中採用開路電壓法配合庫侖計量測監
視串聯電池之充放電狀態。實際應用在電量量測模組的實體測試驗證完成到結合
電動車電池之前，需要先行研究與驗證所有的量測電路與周邊通訊的功能。 
確認電池電量量測理論與方法，接下來是如何實現電池電量量測模組。在電
池電量量測模組之功能方塊圖中，如圖 1-1，各個功能的彼此關係的簡單說明如
下: B+1 與 B-1 接點接上電動車電池，在充電狀態(電流流向電池)，L+1 與 L-1
接點接上充電器，此時有電流流經霍爾電流感測器與電阻電流感測器。充電器的
4 
 
4. 電源切換電路:此電路在一般操作時是使用電池供電給電池電量量測器，一
旦脫離電池供電，此電路自動轉換到 RTC 電池，不過僅供應電給主控電路，
目的是為了能夠持續讓內部 RTC 可以運作，例如年、月、日的記錄，不需
重新設定。 
5. 主控電路: 其包括類比/數位轉換器(A/D Converter)，微控制器與記憶體
(Flash Memory)，A/D Converter 是內崁在 MCU (MSP430)裡，12Bit 的精度，
MCU 是採用 16Bit 的 MSP430，其具有極低功耗的設計。使用德儀(TI)的
MSP430 的 4XX 系列，具有專用的 SPI&I2C 介面之外與內建 RTC (Real Time 
Clock)，而無須外接 RTC 晶片。 
6. 電池資料讀取器:此設備具有 ZigBee無線模組，接收來自於電池電量量測模
組中 ZigBee無線模組發送的數據，並透過資料讀取器上的 USB或 UART傳送
數據到電腦。 
1.2.2 研究步驟 
本節要說明電池電量量測模組結合近場無線通訊之研究步驟，其具體內容如
下所示。 
1. 電池電量量測器的設計與電量量測研究相關技術資料與文獻之蒐集﹕廣泛
蒐集電池電量量測器電量量測架構相關技術資料與文獻，以充分掌握現況、
未來發展趨勢、規格、運轉特性、控制方式與維護技術等，為本計畫的重點
工作項目之一，舉凡研究報告、技術計畫、設計規範、裝置準則與相關標準
等均在蒐集之列，以作為後續電池電量量測器架構分析與模擬技術研發之基
礎。 
2. 電路圖繪製與電路板設計﹕依據上述步驟完成相關資料收集，開始著手進行
電路研究與區塊分析，並且找到與此電池電量量測器的相關主被動零件，並
且研究零件特性之後，始可將零件與相關應用電路繪製到電路圖中，並且進
行類比電路模擬，確認電路各功能可 符合所需之電量量測之功能後，開始
進行電路板設計與繪製，發送電路板製作公司進行電路板製作，並同時進行
電路相關主被動零件的購買。 
3. 配裝零件於電路板上﹕進行電路板裸板的人工電路檢查，檢查各電路實際走
線是否有開、短路等，再進行零件焊接於電路板上，並且進行區塊硬體電路
的驗證與除錯。 
4. 編寫韌體程式與驗證﹕主要寫的韌體程式包括電流感應電阻法的量測、霍爾
感應電流法的量測、自動電壓量程控制與電壓量測、充電與放電狀態量測、
記憶體讀寫程式與液晶顯示器控制程式。 
5. 模擬量測實作：在尚未進行實際電池與實際負載試驗之前，必須進行模擬量
測實驗，利用電源供應器模擬電池的放電與直流電子式負載模擬實際負載，
並且先從額定之下(48V/90A)的規格，作小電壓小電流的量測，再進行大電
6 
 
1.3 報告架構 
本報告共分為七章，各章內容簡述如下： 
第一章 
說明研究動機與目的、研究方法與步驟與論文架構。 
第二章 
對本計畫之各種電池的文獻進行探討，深入了解其意義及內容。並且建立電
池電量演算法與等效電路。 
第三章 
說明本計畫二次電池之充放電特性與介紹各種電量量測法。 
第四章 
說明本計畫的電池電量量測模組、資料讀取器與近場無線通訊模組的實現，
其包括電池電量量測模組的硬體開發與主要零件之規格說明、資料讀取器的硬
體開發與主要零件之規格說明、近場無線通訊模組之主要零件之規格說明，電
動車電池電量量測模組、資料讀取器與近場無線通訊模組的韌體開發與實現、
UART 的通訊格式與 Labview 操作介面與圖控程式。 
 第五章 
說明本計畫的硬體實驗之結果，主要是電池電量量測模組、資料讀取器的硬
體與近場無線通訊模組功能驗證，包括電壓、電流與功率的量測結果。 
第六章 
說明本計畫的韌體與軟體實驗之結果，主要是電池電量量測模組、資料讀取
器與近場無線通訊模組結合鉛酸電池組之實驗，包括固定負載電流放電實驗、
變動負載電流放電實驗與變動負載電流充電實驗。 
第七章 
說明本計畫的結論與未來研究方向。 
 
 
 
 
 
 
 
 
 
 
8 
 
 
圖 2-2 電池放電端電壓與放電時間之關係圖 
一般認知上，實際電池放電時，電池端電壓會下降；充電時，電池端電壓會
上升。由圖 2-2 可看出電池的電壓會隨著放電時間的增加而下降，圖 2-2 中有兩
條放電曲線，A 號曲線可放電的時間較長，電壓對時間的斜率絕對值較小，代表
A 號曲線放電過程中電池的輸出電流較小，屬於緩慢放電[6]。 
電池在放電過程中，若電池輸出電流為定值，則電池端電壓會持續下降；若
電流非定值，在電池輸出電流值改變的瞬間，電池的電壓會劇烈變化，產生非線
性跳動。當輸出電流由大變小，電壓突升；當輸出電流由小變大，電壓突降。觀
察圖 2-3，圖中有一跳動曲線和一平緩下降曲線，平緩下降曲線為定電流放電，
而跳動曲線為急劇變化的電流放電輸出。在跳動曲線中共有四個跳動點，表示電
池輸出電流總共變換四次，且在每個跳動點電壓皆為往上跳，故在每個跳動點的
瞬間，輸出電流都是突然變小。 
 
圖 2-3 急劇變化放電端電壓與放電時間之關係圖 
一般電池的端電壓是以正極電位減去負極電位來表示，而電池在充電或放電
時，正極與負極都會偏離初始的電位，並非只有某一極的電位變動。當電池進行
10 
 
在電池領域裡，習慣以C作為電池充、放電電流的單位，而C代表的是電池
的標示電容量。例如一顆標示電容量為800mAh的電池，以1C的定電流放電，則
其放電電流就為800mA，依此類推。電池電容量以毫安培小時(mAh)為單位，可
用以檢視電池的儲能能力。但在實際應用上，由於電器產品微小化，電池除了儲
能能力之外，使用者亦重視電池的重量與體積。因此若要以體積能量密度、重量
能量密度代表電池的性能，則體積能量密度的單位為Wh/L，而重量能量密度的
單位為Wh/Kg。而同樣的 ，能 量密度也會受到使用方式以及環境條件的影響[10]。 
3. 電池老化 
理想二次電池可以不斷重複充、放電使用，但實際上電池經長時間循環使用
後，內部材料、內部結構會有老化衰退的情形發生。電池老化狀態會受到循環使
用次數、充電方式、放電電流值、放電深度的影響。放電深度是指電池的放電程
度，以鋰離子電池為例，一般的放電截止電壓為 3V，欲對鋰離子電池進行深度
放電，則可將電池的截止電壓降低為 2.5V。電池充、放電特性是由電池內部化
學材料進行氧化還原反應而來，不當的充放電方式，會造成電池內部永久性損
壞，加速電池老化，進而影響電池性能。一般來說，實際電池都會有最大放電電
流、工作截止電壓、最大充電電流、充電截止電壓的限制。電池可輸出電容量會
隨著循環使用次數的增加而下降，而放電深度越大會加速電池老化衰退[11] 
2.3 二次電池   
電池內部主要是由負極、正極、隔離板、固液態電解質所組成，隨著近年移
動裝置、手持式設備與消費性電子產品的進步，在現今電子產品的輕便化與多功
能化的趨勢下，電池的角色已經非常重要。在現今的手持式商品中，電池可視為
電子產品的動力核心。因應現代化社會裡的各種需求，電池依特性可以分為許多
種類，僅以一種電池作為手持式設備電源，又希望能滿足所有的週邊設備條件與
要求，在目前而言是不可能的。電池的分類如表 2-1 所示，依電池能量產生來源
予以分類，可將電池分為化學電池與物理電池。 
表 2-1 電池之分類 [9] 
化學電池 物理電池 
一次電池 二次電池 燃料電池 太陽電池 
錳乾電池 鎳鎘蓄電池 酒精燃料電池 矽太陽電池 
鹼性乾電池 鎳氫蓄電池 固體電解質燃料電池 Ⅱ-Ⅵ 族太陽電池 
氧化銀乾電池 鎳鋅蓄電池 磷酸型燃料電池 Ⅲ-Ⅴ 族太陽電池 
水銀乾電池 鎳鐵蓄電池 溶解碳酸鹽電池 熱感應電力電池 
鋰電乾電池 鉛酸蓄電池  原子力電池 
固體電解電池 鋰二次電池   
 
12 
 
(酒精)、水的電解、沼氣…等等。由於燃料電池是經由利用氫及氧的化學反應，
產生電流及水，不但完全無污染，也避免了傳統電池充電耗時的問題，是目前最
具發展前景的新能源方式，如能普及的應用在車輛及其 它 高污染之發電工具
上，將能顯著改善空氣污染及溫室效應[13] 
目前燃料電池依照電解質的不同，可分為鹼性燃料電池(Alkaline Fuel Cell, 
AFC)、質子交換膜燃料電池或固體高分子型燃料電池(Proton Exchange Membrane 
Fuel Cell, PEMFC)、磷酸型燃料電池(Phosphoric Acid Fuel Cell,PAFC)、溶融碳酸
鹽燃料電池(Molten Carbonate Fuel Cell, MCFC)及固態氧化物燃料電池(Solid 
Oxide Fuel Cell, SOFC)等五種。 
鹼性燃料電池(AFC)，一般被運用於人工衛星上，操作時所需溫度並不高，
轉換效率好，可使用之觸媒種類多價格又便宜，例如銀、鎳等，但是在最近各國
燃料電池開發競賽中，卻無法成為主要開發對象，其原因在於電解質必須是液
態，燃料也必須是高純度的氫才可以。此外，鹼性燃料電池的電解質，易與空氣
中的二氧化碳結合形成氫氧化鉀，影響電解質的品質，導致發電性能衰退[13]。 
質子交換膜燃料電池(PEFC)，其電解質為離子交換膜，薄膜的表面塗有可以
加速反應之觸媒（大部分為白金），薄膜兩側分別供應氫氣及氧氣，氫原子被分
解為兩個質子及兩個電子，質子被氧吸引，再和經由外電路到達此處之電子形成
水分子，因此此燃料電池的唯一液體是水，腐蝕問題相當小，同時其操作溫度介
於 80 至 100℃之間，安全上之顧慮較低。然而，觸媒白金價格昂貴，若減少其
使用量，操作溫度勢必會提升。再者，白金容易與一氧化碳反應而發生中毒現象，
因此比較不適合用在大型發電廠，而適合做為汽車動力來源。 
磷酸型燃料電池(PAFC)，因其使用之電解質為 100﹪濃度之磷酸而得名。操
作溫度大約為 150 到 220℃之間，因溫度高所以廢熱可回收再利用。其觸媒與前
述之質子交換膜燃料電池一樣，同為白金，因此也同樣面臨白金價格昂貴之問
題。到目前為止該燃料電池大都運用在大型發電機組上，而且已商業化生產，技
術較不成問題，惟未能迅速普及，成本居高不下就是主要關鍵。 
溶融碳酸鹽燃料電池(MCFC)，其電解質為碳酸鋰或碳酸鉀等鹼性碳酸鹽。
在電極方面，無論是燃料電極或空氣電極，都使用具透氣性之多孔質的鎳。操作
溫度約為 600 至 700℃，因溫度相當高，致使在常溫下呈現白色固體狀的碳酸鹽
溶解為透明液體，而發揮電解質之功用。由此可見此類型燃料電池，並不需要貴
金屬當觸媒。因為操作溫度高，廢熱可回收再使用，其發電效率高者可達 75 到
80﹪，非常適合於中央集中型發電廠。 
固態氧化物燃料電池(SOFC)，其電解質為氧化鋯，因含有少量的氧化鈣與氧
化釔，穩定度較高，不需要觸媒。一般而言，此種燃料電池之操作溫度約為 1000
℃，廢熱可回收再利用，因此大都使用於中規模發電機組。表 2-3 是各種燃料電
池之種類與特性表。 
14 
 
2.3.2 鋰電池 
一顆近乎理想的電池，應具備高輸出密度、高重量能量密度、高體積能量密
度、低價位、低自放電率、快速充電、高能量轉換率、高深度放電、循環壽命長、
寬廣的工作溫度範圍。而鋰電池可說是二次電池領域中，不管在各方面，都優於
其它種類的電池。二次鋰電池是一種統稱，正確的說法應是二次鋰系電池。二次
鋰電池並不意味著一定使用鋰金屬做為負極材料，多數鋰電池只是在電解質中，
以鋰離子為主要的傳導離子。電池材料中會使用鋰元素，主要是因為其有兩大特
點:  
1. 在化學標準電位表中，鋰元素的氧化性最強，即其電位為最負值。當鋰 金屬
搭配適合的正極材料時，其電池單體電位很容易便能超過3.5V以上。 
2. 鋰元素是原子量最輕的金屬元素，且其進行電化學反應的速率很快。因為以
上兩項重要特點，能量密度高、重量輕、體積小就成為鋰系電池的特徵。電
池中使用到鋰元素的主要有三個種類，分別為鋰金屬電池、鋰離子電池、高
分子鋰電池，以下將分別介紹[13]。 
(1). 鋰金屬電池 
最早使用鋰元素為電池材料的是鋰金屬電池，鋰金屬的結構是以鋰金屬為
負極，以有機液體，如Ethylene carbonate(EC)或Propylene carbonate(PC)加上鋰鹽
類(如LiClO)做為電解質，而正極材料則為層狀結構的LiCoO。鋰金屬電池單體的
開路電壓可高達4V以上，其可儲存的重量能量密度高達200Wh/kg。  
鋰金屬電池的優點就是擁有極高的能量密度，但鋰金屬電池有一項致命的缺
點。鋰金屬電池以有機溶液做為電解質，化學反應過程中，易堆積形成樹枝狀的
鋰金屬。而此樹枝狀結構會在電池產生內部短路，危險性極高。因此，雖然鋰金
屬電池具有高能量密度，卻不適合用來做為電力來源。而為了改善鋰金屬電池內
部短路的缺點，後來將負極材料改為碳系材料，以代替原來的鋰金屬。將鋰金屬
電池的負極材料置換為碳系材料後，即為現在大家所熟悉的鋰離子電池。 
(2). 鋰離子電池 
由於鋰離子電池擁有更高的體積/重量能量密度，使其在超小型產品的使用
更加看好，目前已成為行動電話、筆記型電腦主要使用的二次電池。鋰離子電池
正極使用鋰離子與金屬氧化物，負極使用石墨或焦炭，電解液使用溶解鋰鹽的非
質子 (non-proton)性有機溶液。鋰離子電池的正極材料主要有三種 : 鈷系
(LiCoO2)、錳系(LiMnO)、鎳系(LiNiO)，使用不同的正極材料，其能量密度也就
不同，表 2-4 比較三種陽極電極材料。 
 
 
16 
 
輸出電流值以及溫度的影響。當電池進行定電流放電時，若以小電流輸出，則電
池的可輸出電容量會較大；而在放電過程中，環境溫度越低，鋰離子電池的可輸
出電容量就越小。每一種類的電池都有這樣的情況，但鋰離子電池受影響的程度
較大。 
圖 2-5 為兩顆負極材料不同的鋰離子電池，進行定電流放電實驗的電池端電
壓與剩餘電量關係曲線。兩顆電池除了負極材料不同外，其餘初始條件與放電方
式皆相同，且可由圖中看出兩條電壓曲線的特性並不相同。當改變鋰離子電池的
負極材料時，可以得到不同的電池端電壓輸出特性。鋰離子電池的負極材料分為
焦炭與石墨兩大類。若鋰離子電池負極材料使用焦炭，在對電池做持續定電流放
電動作時，電池閉迴路端電壓會呈現似線性傾斜下降﹔而當負極使用石墨時，電
池閉迴路端電壓會呈現似水平狀態。這兩種放電特性並無絕對好壞之分，較水平
的放電電壓曲線適合運用於需穩定電壓的電器﹔而傾斜下降的放電電壓曲線，因
為其放電電壓近似線性的特性，較利於發展準確的電容量檢測技術[13]。 
 
圖 2-5 鋰離子電池放電過程中剩餘電量與端電壓之關係曲線圖 
綜觀整個二次電池領域，不論以何種性能特性為比較目標，鋰離子電池都擁
有最好的表現。以下是鋰離子電池的優點:  
(a). 單體電池端電壓高 
標定電壓值為3.6V，為鎳氫電池的3倍，需串聯三顆鎳氫電池才可得到的電
壓。此特性在商業應用上，為鋰離子電池的絕對優勢。在商業上常需要高輸出電
壓的電池，但因為鎳氫電池的公稱電壓值只有1.2V，故往往需靠多個鎳氫電池串
聯而成，所組合成的電池組體積大、重量重。但今以鋰離子電池代替鎳氫電池，
可有效減少所需電池數目，進而增加電池組的體積能量密度與重量能量密度。且
以較少數目的電池單體組成電池組，可以降低電池組的故障率。 
18 
 
 
圖 2-6 鋰離子二次電池在充電過程中之內電阻變化曲線圖 
(3). 高分子鋰電池  
高分子鋰電池最大的市場訴求在薄型化，電池外型可隨產品變化，且有更高
的能量密度，雖然高分子鋰電池在溫度特性及循環壽命上表現不佳，但其外型可
塑性高的特點卻是產品朝向超小型化的關鍵所在。 
高分子鋰電池的結構與鋰金屬電池相似，負極以超薄型的鋰金屬箔片當作鋰
的來源及電流收集器(Current collector)，正極材料則是具有可逆性的嵌入式化合
物(Intercalaction collector)。兩電極中間是以具有鋰離子導電的高分子薄膜當作固
態電解質(Solid electrolyte)。高分子電解質是將鋰鹽溶於高分子結構中，形成離
子導體。高分子電解質的電阻較高，所以若要維持良好的電池內部導電率，需將
溫度維持於60℃~80℃。高分子鋰電池通常由五層的薄層材料所組成，包括最上
層的絕緣材料，第二層為鋰金屬負極箔片，第三層為固態高分子電解質，第四層
為金屬氧化物正極，最底層為金屬電流收集層。雖由五薄層材料所組成，高分子
鋰電池的厚度可低於100μm。典型的高分子鋰電池組之重量能量密度及體積能量
密度分別為155Wh/kg與220Wh/L。 
高分子鋰電池優點分述如下:  
(a). 電池形狀可針對需要做各種設計，如圓柱型、平板式折疊設計、平板式疊層
設計等。電池形狀可配合電器產品內部空間做設計，而非產品來配合電池。 
(b). 因其採用固態電解質，所以沒有其它二次電池電解液外漏的現象產生。 
(c). 不須以金屬封裝，可採用鋁箔封裝達到輕量化的目的。 
它的優點主要來自於其使用固態電解質，但其缺點主要也來自其使用固態電
解質。因為固態電解質的離子移動速度較液態慢，所以其能量密度比鋰離子電池
要低。且目前高分子鋰電池的成本亦高於鋰離子電池甚多。 
20 
 
2.3.4 鎳鎘電池  
鎳鎘電池正極使用鎳氫化合物，負極使用鎘化合物，電解液使用鹼性水溶
液。早期的鎳鎘電池在充電末期，由於會在正極產生氧氣、在負極產生氫氣，故
電池無法密閉化。鎳鎘電池之充、放電特性說明如下：  
1. 鎳鎘電池充電特性 
典型鎳鎘電池隨著充電行為的進行，電池端電壓會持續上升，但至充電末期
時，電池端電壓會到達一峰值而後開始下降，此時電池溫度會顯著的上升，相關
特性如圖2-7所示。 
 
圖2-7 鎳鎘電池充電末期(a)表面溫度(b)電壓與電池電容量之曲線圖 
此現象乃因為充電末期所產生的氧氣於負極反應時產生的氧化熱，使得電池
內部溫度、壓力上升，而溫度較高時充電電壓會變得較低。憑藉上述兩個特性，
就可設計出防止鎳鎘電池過充電的電路。當鎳鎘電池充電時，必須在規定的溫度
範圍內充電，因為充電末期牽涉到了氣體吸收速度的問題。若在低溫下充電，氣
體的吸收速度降低；在高溫下充電時，充電困難，且會讓電池循環壽命變短。 
2. 鎳鎘電池放電特性 
鎳鎘電池在放電行為上有一極大的特點，即使吾人對鎳鎘電池進行大電流放
電，其電池端電壓從放電開始到放電結束都很穩定。此乃由於鎳鎘電池的內部電
阻較小的原因。一般電池在大電流放電時，可輸出的電容值會較小；在小電流放
電時，可輸出的電容值會較大。造成此現象有許多原因，而內電阻是一大主因。
也因為鎳鎘電池內電阻小的特點，不管連續放電或間接放電，其電池可輸出電容
量值差異並不大。因為內組小，鎳鎘電池在放電中的電壓變化小，電池的可輸出
電容量值不易受輸出電流值的影響。但站在電池電容量檢測的角度，因為其電壓
22 
 
本身溫度而有所調整。基本上，當溫度上升時，需調降充電電壓；溫度下降則需
升高充電電壓。當電池充電時的電池溫度在0℃~40℃時，基本上 不需考慮溫度的
補償效應，但當溫度不介於此一範圍時，在充電的過中就需要顧及溫度補償。在
充電過程中，典型的鉛酸電池其溫度係數為-3.3mV/℃。 
2. 鉛酸電池放電特性:  
單體鉛酸電池的公稱電壓值為2.0V，一般來說，單體鉛酸電池的放電終止電
壓為1.75V，若做超過放電終止電壓的深度放電，會對電池本體的內部結構造成
永久性破壞，縮短電池的循環使用壽命。 
鉛酸電池為二次電池中發展最成熟的電池，關於鉛酸電池的優點敘述如下:  
(1). 電極系統穩定 
電極板不會因為放電而逐漸改變其形狀以致於不能使用，身為二次電池，此
為一必備的特性，但其它許多種類的電池並不具備此項優點。 
(2). 高電池單體電壓  
除了錳鋅電池外，鉛酸電池是唯一使用酸性水溶解液的電池。使用水容液的
明顯好處是其導電度高，但是因為水的分解電壓為1.23V，所以當電池的電解質
為水溶液時，缺點為電池端電壓不能過高，然而鉛酸電池卻不受此條件限制。 
(3). 電池內電阻小: 
在許多的應用場合中，吾人會希望電池能有高功率輸出的特性，而若要電池
有如此表現，電池的內阻就必須越小越好，而鉛酸電池的內電阻與早期其它電池
種類相比，其電池內電阻甚小[15]。  
(4). 電池工作溫度範圍廣 
在鉛酸電池使用的電解液濃度範圍內(導電度最高的範圍之內)，硫酸濃度約
為36.5%，其結凍的臨界溫度約為-62℃。溫度-62℃在人類生活環境溫度下為相
對的低溫，所以基本上鉛酸電池能滿足一般大眾的需求。 
(5). 成本低廉 
地球上的鉛礦蘊藏量相當豐富，加上鉛酸電池高回收比例與再生金屬的使用
率越來越高，使得鉛合金成本低廉。此外，鉛金屬相較於其它金屬的熔解點低(約
327℃)，易於鑄造、焊接，對於後期製造加工方面能夠低廉的大量生產。 
(6). 易於回收處理:  
鉛酸電池回收時，需將 硫酸中和、電瓶殼粉碎，剩下的就只是將鉛合金熔融。
環保意識抬頭，電池回收已被大眾所接受。 
24 
 
以下本計畫要探討五種常用的電池模型，分別為理想模型、線性模型、戴維
寧等效模型、等校電容模型以及Pspice模型[11]。 
2.4.1 理想模型 
理想電池模型如圖2-8所示，此模型將電池輸出電壓視為固定值，電壓源到
電池輸出之間的電壓完全沒有損失，完全忽略了電池內部的因素，並沒有完全反
應電池的特性。V為電池的開路電壓，E為電池的端電壓，而E等於V。此模型為
最簡單的電池模型，也是多數研究人員在電腦模擬分析時所採用的模型。 
 
圖2-8 理想電池模型之等效電路 
2.4.2 線性模型 
線性模型如圖2-9所示，此模型將電池的內電阻考慮進去，而圖中開路電壓
(E)和電池內電阻(R)值皆為電池內部因素的函數。電流從電池內部流出時，經過
了陽極、電解質、陰極、金屬焊接點等，所以電池內部必有內電阻存在，而在放
電過程中內阻就會消耗電池的電能。考量內電阻的模型，對於真實電容量的估
測，以及當輸出電流改變時電壓的突然升高、下降有較好的表現。此模型中的內
電阻有兩種形式:函數型電阻、固定電阻。觀察電池內阻形成的原因，因為電池
在放電過程中，其內部化學反應氧化還原的狀態時時刻刻都在改變，會持續的有
生成物產生，而生成物擴散速率與都不盡相同，所以電池的內電阻絕非固定值，
故採用函數型電阻值的表現優於固定電阻值 [15]。 
 
圖2-9 電池線性模型之等效電路 
26 
 
2.4.5  Pspice巨觀模型 
在電路模擬軟體Pspice建立一個巨觀模型(Macro-model)，用以預測電池的工
作時間、穩定性、暫態響應、以及相關特性。其模型中考慮的參數： 
(1) 溫度效應 
修正溫度對可輸出電容量以及輸出電壓的影響。 
(2) 電池老化效應 
修正電池使用次數對可輸出電容量及輸出電壓的影響。 
(3) 放電速率效應 
不同的放電速率，意味著不同的放電電流值。而在定電流放電過程中，電池
擁有相同的電容量，但不同的放電電流，其會輸出不同的電容量值，此現象主要
與電池內電阻和生成物擴散過程有關，而此模型亦修正 了放電速率對可輸出電容
量以及輸出電壓的影響。 
此模型廣泛的修正了對電池特性具有一定影響力的因素，以下為此模型修正
參數的方法:電池的表現會受到許多因素的影響，故將整個電池視為一個耦合網
路(Coupled Network)。網路中將電池端電壓、電池內含電量(State of Charge)、放
電速率效應(Rate Dependence)、電池熱特性(Thermal characteristics)以個別的迴圈
表現，而各迴圈互相影響。主電路為電壓呈現電路，所有個別迴圈都會計算出電
池端電壓影響值，而後偶合至主迴圈，計算出總合電壓值，此一總合電壓值即為
電池在充、放電過程中，所呈現在電池正負端的電壓值。每一迴圈針對特殊因素
所做的電壓修正值，其修正參數都由實驗所得。以耦合網路為架構，以實驗數據
為基礎，建構出巨觀模型。而必須注意一點，在電池電容 量檢測技術方面，此模
型假設電池電容量只與電池端電壓有關。 
在修正電池老化效應方面，從老化實驗測試中，依據實驗數據加入修正項， 
以調正電池老化效應。電池是進行化學反應的，而化學反應會有延遲(Delay)，模
型以單一RC時間常數(Single RC Time Constant)模擬化學反應的延遲情況。此模
型為了方便建立整個架構，所以將內電阻值定義為一固定值(80mΩ)。 
雖然此模型修正了許多足以嚴重影響電池性能的因素，但因其將電池內電阻
視為固定值，且假設電池電容量只與電池端電壓有關，所以其模擬放電的過程仍
與真實放電有一段差距。在定電流放電模擬中，最大誤差為12%；在電池老化模
擬最大誤差不超過5%；在電池熱效應模擬中，也幾乎沒有修正溫度的功能；在
電池暫態反應模擬中，也看不出其發揮功效[9]。 
 
 
 
28 
 
第三章  二次電池之充放電特性與電量量測 
3.1 前言 
研究發展電池電容量的量測技術的主要目的是量測電池內部所儲存電量大
小，讓需要電池設備的使用者可以清楚瞭解電池的使用狀況，電池的剩餘時間，
甚至能提醒使用者能替換掉即將耗盡的電池。本章節將對目前學術界及產業界已
發表的電池電容量檢測方法作一整理探討，而在進行文獻探討前，本論文先探討
影響電池可輸出電容量之因素。 
3.2 影響電池可輸出電容量的因素  
電池可輸出電容量係指電池可輸出至目標負載的電容量，而電池的內含電容
量不等於可輸出電容量，基於能量守恆原則，電池內含電容量除了自放電效應
外，並不會有任何改變，但電池可輸出電容量則會受到多種因素影響。電池是儲
存電能的零組件，由正極、負極、電解質三個基本因素所構成，故電池的性能主
要依據這三要素的材料特性、構造所決定。電池能夠儲能的原因來自於內部化學
氧化還原反應的結果，而電池的正、負端會有電壓產生也是化學反應與極板材 料
互相作用的關係。電池呈現在外的一切性能表現，事實上是經過繁複的化學反應
所呈現出來的結果。故若要探討影響電池外在性能表現的因素，就應將目標放在
有何因素會影響電池內部反應的進行。以下將分述主要影響電池內部化學反應進
行，各因素的影響方式及影響程度[4]。  
3.2.1 放電電流  
電池放電的電流值大小，會影響電池的可輸出電容量值。兩顆電池內含電容
量相同，對兩電池進行定電流放電，放電前電池初始條件相同，放電中電池放電
環境相同，放電截止的條件亦相同，但兩顆電池以不同的電流值進行定電流放
電，則以小電流進行放電的電池，可放出較多的電能。電池在進行化學反應時，
以電解質做為媒介以傳遞電子。氧化還原反應中會有一些生成物產生，此生成物
會透過擴散的方式散佈至電池內部四周。當對電池進行大電流放電時，極板附近
的生成物會大量快速的產生，若輸出電流超過一定值，生成物將無法及時順利的
傳遞到四周，而會堆積在極板附近。這些生成物的堆積將形成一到屏障，阻礙有
效電子傳遞及正常化學反應的進行。故當輸出電流增加時，由於化學反應無法正
常進行，電池可輸出的電量就會減少；反之，當電池以小電流放電時，因為生成
物可順利擴散，化學反應得以完全，故電池可輸出的電量會較大。  
30 
 
衰老的現象，如電解液濃度改變、極板附近的永久生成物堆積、極板形狀改變、
內部材料變質等等。故當電池的循環使用次數增加時，電池的性能就會有所影
響。電池老化的程度與電池的充電方式、放電方式有關。任何一種電池充、放電
方式都有其限制，如最大輸出電流、最低放電截止電壓等，當電池長期操作於不
適當的使用方式，將會加速電池的老化。圖3-2是電池可輸出電量與循環使用次
數的關係圖，其為CSB公司所發佈的鉛酸電池特性量測資料。 
 
圖3-2 電池可輸出電量與循環使用次數之關係圖 
圖中說明了電池的充、放電方式，因為充、放電方式會影響電池的老化程度，
由圖中觀察可知，電池的可輸出電量會隨著循環使用次數的增加而減少，且兩者
的關係頗為線性。只要電池操作於使用限制範圍內，沒有不當的充、放電方式，
則電池可輸出電量與循環使用次數的關係近乎線性。站在研究電池電量檢測方法
的角度，此線性關係有助於準確的修正電池老化效應。 
3.2.4 自放電率  
從電路學的角度來看，電池內部會自我形成一些迴路，所以即使電池兩端不
接負載放電而保持開路狀態，儲存在電池內部的電能仍持續在微量減少。若以化
學的角度來看，由於電解液與電極的反應物皆放置於同一密閉空間，無法避免自
我消耗。電池的自放電率會影響電池保存電能的能力，自放電率越高，電池保存
電能的能力越差。不論哪一種電池，都會有自放電的效應，只是自放電量值大小
的問題。自放電率高的電池，經過長時間的儲存後，因為已耗去大量的電能，所
以可放出的電容量將會大大減少，圖3-3為電池儲存時間與剩餘電量(自放電)的關
係曲線[7]。 
32 
 
3.3.1 內阻法 
電池內阻的產生來自於電解質、極板以及電解液間的電氣關係，充放電的狀
態不同也會使電池內阻值不同。電池內阻法主要測量電池內部的電阻值，由電池
的內阻值來判斷電池容量的一種方式。測量內電阻可將電池注入交流訊號的方
式，藉由量測注入交流訊號前後的電池輸出電壓與電流變化，來測得電池的阻抗
(Impedance)。而阻抗的量測值會隨著交流訊號的頻率而有所不同。一般電池的內
電阻值約為毫歐姆級，且隨著電池的充放電電壓大小，呈現不同的內電阻值。通
常電池的內電阻會隨著電池電量的充飽而減小。在使用內電阻法量測內電阻值
時，因內電阻值通常極小，且容易受環境溫度、外在電路的雜訊干擾影響其準確
度，故無法實際運用於一般機械車輛等使用場合。圖 3-5 為電池放電期間內電阻
變化曲線圖，從圖中可看出，當電池放電至末期時，內阻會急遽增加，所以當所
測量出的電池內阻急遽增加時，即可視為電池電量已達末期，但此方法受限於電
池內阻測量的精確性，且電池內阻與其壽命亦有一定關係，使用越久之電池其電
池內阻會越高，造成電量預測的誤差。 
 
圖 3-5 電池放電期間內電阻之變化曲線圖 
電池內部電子流動時會經過兩種類型的物質，分別為金屬類與化學材料類。
金屬類包括電池的極板、極板網柵、金屬帶(strap)以及各種金屬焊接點。化學材
料類包括電解液、糊狀材料與隔離板。因為電子流動時會經過這些物質，故電池
內電阻即由這些物質所造成。  
圖 3-6 為電池內電阻的等效電路，其中 RM 為金屬通路電阻、RE 為電化學
通路電阻、Cp 為電池電容、Ec 為電池呈現在外的端電壓。 
34 
 
其它因素的影響。但在電池將電能輸出電池的過程中，因為內電阻的影響，電池
內含電容量除了傳輸給負載之外，也消耗了一些能量在內電阻上，導致可輸出的
電容量並不等於電池內含電容量。當電池真正在工作時，吾人注重的是電池可輸
出至負載端的電能(也就是可輸出電容量)，並非電池內含電容量。而電池可輸出
電容量與電池內含電容量、溫度、電池輸出電流狀態、電池老化有關。因為內電
阻會依不同的溫度、不同的輸出電流、不同的電池循環使用次數、不同的電池內
含電容量而有不同的值，所以可以電池內電阻值當作電池可輸出電容量的指標物
量。在已發表的電池電容量檢測方法中，有許多方法即以電池內電阻當作電池可
輸出電容量的指標，且不需再對量測出的電阻值針對環境因素、輸出電流狀態做
修正，因為電池的內電阻值本身已經自我修正過了。  
欲實現上述利用內電阻進行電池電容量檢測，第一步先量測電池的內電阻
值，而後直接將該內電阻值套於事先建立的查詢表 (Look-up Table)或對應函數
中，即可得到對應的可輸出電容 量值。圖3-7 為鉛酸電池內電阻與電容量的關係，
Y 軸為內電阻值，X 軸為電池電容量百分比。 
 
圖 3-7 鉛酸電池電容量與內電阻之關係曲線圖 
只要依圖3-7的資料作曲現近似(Curve-fitting)，就可得出內電阻和電容量的
關係函數。將所測量得到的內電阻值對應到該函數，或經由內插法就可達到電容
量檢測的目的。另外，有一些電容量檢測方法並非單純以內電阻值為指標，而是
利用量測到的內電阻值做進一步的運算，以確定電池的可輸出電容量。在一般情
況下，內電阻值所造成的能量損失遠大於傳遞過程中的能量損失，故只要能量得
電池在每一瞬間的內電阻值，將該電阻值與當下的輸出電流運算，即可計算出電
池可輸出電容量值。傳遞過程中的能量損失與溫度和輸出電流有關，若傳遞過程
的能量損失有一定的數量級，當然也就不能忽略不計。運用此概念的方法亦無須
特別針對溫度、電池老化做修正，因為量測得到的內電阻值就會因這些因素而改
變。 
內電阻法之所以會成為近年來電池電容量檢測技術的主流，主要就是該內電
36 
 
 
圖3-8 直流訊號量測內電阻之電壓波形圖 
電池內電阻值可以由下列公式得到: 
𝑅𝑅𝑅𝑅𝑅𝑅 =  (𝑉𝑉𝑉𝑉𝑉𝑉𝑉𝑉𝑅𝑅 −𝑉𝑉𝑉𝑉𝑅𝑅𝑉𝑉 )
𝐼𝐼out                              (3-1) 
其中   Rin: 電池內電阻值          Iout: 瞬間輸出電流值 
Vopen: 開路電壓            Vdis: 雜訊電壓 
3.3.2 比重法 
比重法的主要假設為電池內部電解液比重與電池電容量值有關。藉由量測電
池內部電解液的比重，估測出電池內部電容量值。因電池在充放電的過程中，電
解液的濃度會隨著充放電而增加與減少，因此電解液的比重理論上應與充放電的
狀態呈線性的變化。然而由實驗上所觀察到，電池在充放電的過程中電極板附近
的電化學變化較為劇烈，而極板以外的部分需等待擴散作用，才能使電解液的比
重均勻分布。但是電解液的擴散作用十分緩慢，所以會有比重延遲的現象，並且
距離極板越遠，延遲的現象更為嚴重，這會造成實際量測比重時的誤差。由於比
重法需量測電池內部電解液的比重，故只適合開放式結構的電池。因為鉛酸電池
在放電時，其電解液中酸液的濃 度會逐漸減少，與其電池電量成一比例關係， 如
圖 3-9 所示。 
38 
 
 
圖 3-11 鉛酸電池開路電壓之恢復曲線圖 
3.3.4 安培小時法 
安培小時法是以加總安培-小時的方式計算電池流入或流出的電量，所以又
稱為安培小時法，其估測電量的方法為利用每一瞬間量測到的負載電流對放電的
時間做積分，累積求得消耗的安培小時(Ah)，這也是目前最常見的方式，其電量
的累算可以用下列方程式表示: C(tn) = C(t0) − ∫ i(t)d(t)                            (3-2) 
其中 
C(t0): 電池初始電量 
C(tn): 電池殘存電量 
i (t): 放電電流 
此法主要是依能量不滅的觀念，當電池在充放電時，將電池的輸入或輸出電
流對時間乘積，再由電池原本的電量加以增減，運算出來就可以大略的估測電池
剩餘電量。由於安培小時法是使用累計的方式估測電池電量，而為了避免累計的
誤差，通常會加上幾個修正因素，來綜合判斷電池剩餘電量，例如電池充電時電
池端電壓值、判斷電壓上升斜率、電量上升的比例、放電時設定放電截止電壓等。 
3.3.5 負載電壓法 
當鉛酸電池以定電流放電時，電池的電壓會以近似線性的曲線下降，與電池
電量成一比例關係，但到了放電後期，電池的電壓會急遽下降，鉛酸電池以定電
流放電之電壓變化曲線如圖 3-12 所示，所以一般以放電至轉折點前期間，作為
預測電池電量的依據，但若負載是屬於不定電流放電時，將造成電池電壓下降的
40 
 
 
圖 3-13 查表法中的放電電流、電池電壓與時間之關係曲線圖 
當一電池電容量檢測方法的指標物量是電池閉迴路端電壓時，因為其會影響
其跳動的因素有許多，所以即使修正了電池的輸出電流，但在準確度上的提昇仍
相當有限。且因為電池內部等效RC的影響，電壓跳動初期會呈現指數形式改變，
此狀況亦相當難修正。使用閉迴路端電壓為指標物量，如先天不良般，即使再如
何加以修正，能夠提高的準確度都相當有限。利用查表法來獲得電池之電量，準
確度只比加載電壓法好一些。  
3.3.8 其它電量量測方法 
前面介紹了目前主流的電池電容量估測方法，在研究電池電容量估測方法的
領域中，除了基於基本理論所發展出的方法外，另外一些方法是針對某一種類電
池的獨特充放電特性所發展出來，此種方法往往就無法廣泛使用於其它種類的電
池。但由於此種發展電池電容量估測的方法是針對特殊電池量身定做，故此種方
法的準確度通常較高。本節中，將此類型的電容量檢測方法作一簡單介紹。 
1. –ΔV檢測法(Negative Delta Voltage) 
因為鎳鎘/鎳氫電池充飽電時，其電壓約有少許電壓下降的變化，故可利用
該電壓下降的特性，用以判斷電池是否充飽。此為鎳鎘/鎳氫電池獨有的充電特
性，故此方法也只適用於該二種電池。此方法只能判斷鎳鎘/鎳氫電池是否已充
飽電，此類實現電路多用餘鎳鎘、鎳氫電池的充電器上、避免電池發生過充電。 
2.電壓臨界值(Voltage Thresthod) 
鎳錳電池充飽電時，其端電壓為平滑的曲線，電壓對時間的斜率為0，故利
用此電壓特性，用以判斷電池是否充飽。此方法只能判斷鎳錳電池是否已充飽
電，避免電池發生過充電。此為鎳錳電池獨有的充電特性，故此方法也只適用於
42 
 
3.4.1 定電壓充電法  
一般採用定電壓充電法，是因為其充電器電路架構簡單，控制電路容易設
計。但缺點是在初始充電時，由於電池電壓通常很低，往往造成充電電流過大，
此過大之充電電流常易造成電池極板變形及電池本身溫度升高，以致縮短電池之
壽命。改善方法之一是增加限流電路，亦可採用多段式充電法，但電路實現較為
複雜。通常設定一電池電壓工作區間，過低則充電或停止放電，過高則停止充電。
除了初始充電電流過大之外，定電壓充電法對多個電池芯所串聯的電池組作充電
時，也會有無法均勻充電的問題。  
 
3.4.2 二段式定電壓充電法 
為改善定電壓充電法的缺點，於是又有二段式定電壓充電法產生，此方法為
在充電初期，先以較低之充電電壓進行充電，以避免過大的電流產生。待畜電池
端電壓上升至設定電壓後，再將充電電壓提昇，繼續對蓄電池充電。圖3-14為採
用二段式定電壓充電法之充電曲線。  
 
圖 3-14 二段式定電壓充電法之充電曲線圖 
電池的充電與放電，是一個互逆的電化學反應過程，基本上，沒有任何一個
電池的充電與放電是完全可逆的，因此，在每一次的充放電過程中，電池的特性
都多少有些改變。電池的電化學反應過程極為複雜，建立其數學模型本身就非常
困難，以此數學模型作為充電或電池容量估測之依據，都是不太實際的。由於電
池的時變非線性特性，不論採用何種定電壓充電法，其電流的變化均是難以預測
的，遂發展出以電流控制為基礎的定電流充電法。 
3.4.3 定電流充電法 
定電流充電法，如圖3-15所示，是在充電期間對電池提供一恆定之充電電
流，藉由調整充電電流的大小可以控制充電所需的時間。假設電池容量為20Ah，
44 
 
 
圖 3-17 鎳鎘及鎳氫電池在定電流充電時之溫度變化曲線圖 
但這種充電方法並不適用於鋰離子電池，因為在正常操作下，鋰離子電池在
滿充電時，其溫度並不會有突然變化的情形，因此並不適合用溫度來作為鋰離子
電池的充電截止條件，此外，當電池電壓達製造商所提供之滿充電壓值時，電池
大約只有充入額定容量的40%~70%而已，如果持續以定電流充電，則電池有過
電壓之虞，為了確保能在安全的情況下補足未充滿之容量，目前大多是利用混合
定電流/定電壓充電法來做為鋰離子電池的充電方法。  
3.4.4 混合定電流/定電壓充電法 
混合定電流/定電壓充電法其充電的過程分為兩個階段，第一階段先以定電
流充電，如此可縮短充電時間，當電池電壓達到設定值後，再以定電壓充電，此
時充電電流將隨時間增加而逐漸減少，一直到充電電流降至 C/10 或 C/20(此充電
截止條件的設定是由充電器設計者所決定，當充電電流值小於 C/10 時，電池的
容量大約已恢復至 90%，而後，電池容量的恢復對使用者而言已不明顯，但所需
的充電時間將明顯增長，因此一些充電器設計者會以放寬充電截止條件 來達到節
省充電時間的效果)後才將充電器截止，其充電時電池的電壓、電 流曲線如圖3-18
所示。這種充電法恰巧可以補足二次鋰電池因定電流充電所不能滿足之部分，所
以目前市面上的二次鋰電池充電器大都是使用此種充電方法。 
46 
 
第四章 電池電量量測模組與資料讀取器的實現 
4.1 前言 
當電動車電池電量量測模組量測電量時，需要即時監看電池電壓與輸入或輸
出的電流值，並且到了電池交換站或充電站時，需要透過資料讀取器將電量量測
模組內的電量資料讀到電腦。為了展現電池電量量測模組的數值運算與紀錄電池
狀態，本計畫使用微控制器作為運算單元。在未來的應用上，使用者只需修改韌
體程式，便可以將此系統應用於其它種類的電池。本章首先將所使用的重要的電
子零件的特性作一簡單的說明，接著使用一系列的硬體功能方塊圖與韌體流程圖
來進行動作分析，以便瞭解硬體與韌體的規劃。最後呈現電池電量量測模組、資
料讀取器與近場無線通訊電路的硬體、韌體與測試結果。 
4.2 電池電量量測模組的硬體開發 
電池電量量測模組需要結合電動車電池、充電器與電動車上的負載，實現電
池電量量測模組的硬體之前，需要了解本模組的主要硬體功能。本模組的主要硬
體功能包括電壓與電流兩個主要參數的量測，首先，電壓與電流透過電壓量測電
路與電流量測電路分別取得，由主控電路計算電量、存儲資料，再將電池狀態與
資料對外傳輸。電池電量量測模組可分為四大功能區塊，包括主控電路、電流量
測電路、電壓量測電路、模組電源供應電路與近場無線通訊電路，如圖 4-1 所示。 
 
圖 4-1 量測模組與資料讀取器的主要硬體功能方塊圖 
48 
 
阻電流感測器的電流是 IC。而充電器的充電電壓進入電池電壓輸入保護電路後，
分開成兩個路徑到模組，一個是進入自動變換量程電路(或固定比例電壓衰減電
路)，再進入 12Bit 類比/數位轉換器進行電壓量測；另一個是進入 DC/DC 轉換器
與低壓降輸出轉換器 (LDO)轉換成模組使用的主要電壓源 (+12V、 -12V 與
+3.3V)。IC 充電電流流經霍爾電流感測器，轉成電壓訊號後進入電壓準位提升電
路以提升電壓準位到微控制器可以接受的輸入電壓範圍(+3V)，量測電流大小與
電流的流向；IC 充電電流同樣流經電流感測電阻並進入電流量測與電流方向檢
測電路後到微控制器量測電流大小與電流的流向。在放電狀態，其電池電壓量測
與放電電流之量測是一致的，差別在於電流方向判別的準位是不一樣的。溫度感
測器即時量測電動車電池的溫度，並將資料透過串列傳輸的方式，傳送給微控制
器。各項電壓、電流、功率、充放電狀態辨識、電量與溫度的物理量經過 MSP430
微控制器的計算與處理，分別將這些資料記錄在串列快閃記憶體；而所預先設定
的程式，則記錄在串列式程式記憶體。最後再透過 SPI 串列傳輸介面，將資料輸
出給 ZigBee 無線模組，等待傳輸給資料讀取器上的 ZigBee 無線模組。 
 
4.3.1 電量量測模組之主要電路功能與規格 
本節將介紹電池電量量測模組上的幾個重要的電子零件，並且詳細地說明他
們的功能。 
1. CSNF161 霍爾閉迴路電流感測器: 如圖 4-3 所示，是屬於電流輸出型之閉迴
路電流感測器，可以量測範圍到 0~100A 的交流、直流與脈衝電流。 
 
圖 4-3  CSNF161 霍爾電流感應器之(a)外觀圖(b)電路圖 
本計畫使用 Honeywell 的 CSNF 系列，是基於霍爾效應(Hall Effect)與零點平
衡或零磁通量法則(迴授系統)。在感測器核心的磁通量須固定控制到零，所需的
電流平衡零磁通量是一次側電流流經導體的電流量，乘上一次側對二次側繞組比
率。這個閉迴路電流是一次側電流的電流量透過二次側匝數來降低的，並且從感
測器的 O/P 端輸出，此電流可以流過一個取様電阻來產生比例電壓。 
50 
 
表 4-1 CSNF161 霍爾電流感測器之電氣規格 
CSNF161 電性規格 
峰值電流範圍(A) ±150 
供應電壓(VDC) ±5% ±12 to 15 
線圈匝數(Turns) 1000 
線圈電阻(Resistance) 30V@70°C 
量測電流範圍 100 mA for 100 A 
電流量測取樣電阻 10 to 40V 
最大偏移電流@25°C (mA) ±0.20 
精確度 ±0.5% of IN (nominal Current) at 25°C 
反應時間 (ns) <500 
線性 ±0.1% 
感應訊號說明 To obtain positive measuring current on O/P terminal, 
current must flow in direction of arrow 
2. MAX4081 低電阻電流感測器 
MAX4081 是一種低電阻式的電壓輸出型電流感測器，如圖 4-6 所示。其適
用於寬電壓範圍的電壓輸出型電流感測放大器，操作電壓範圍 4.5V~76V，可監
控全部過程的充放電電流與充放電方向，其只有一個電壓信號輸出接腳，並且可
接到外部參考電壓，以確保零電流時的輸出電壓信號為零，也就是說RS+與RS-
之間的Vsense = 0V，如此可以確定充電電流時的電壓輸出信號端的電壓落在
VERF與VCC之間；放電電流時的電壓輸出信號端的電壓落在VERF與地之間，其工
作時的耐受工作電壓與被檢測迴路的電壓互不干擾，目前MAX4081 提供三種增
益: 5V/V，20V/V與 60V/V。 
 
圖 4-6  MAX4081 電流感測放大器之接腳圖 
MAX4081 的功能是監控流經 RSENSE 的雙向電流，如圖 4-7 所示。假設電
流是從 RS+流到 RS-，則 MAX4081 內部電路通過沒有經過電流感測電阻的電流
迴路(RG1→Q1)，經過電流感測電阻的(RG2→Q2)兩個不同迴路的電流增加通過
內部放大器(A1)的設定達到測量通過電流感測電阻上的電壓降的目的。放大器
(A2)作為內部第二級的放大器，其信號輸出受到前一級電壓輸出變化的影響，同
時還受限於外部設定的”零點”參考電壓。當檢測電壓(VSENSE)等於零時，輸出
的電壓訊號將等於設定的外部的”零點”參考電壓。 
52 
 
Vout =Vsense × Av       (4-1) 
其中 Vout： MAX4081 的輸出電壓     AV：MAX4081 的增益 
Vsense：在滿刻度下檢測到的電壓極限值 
亦即 5V/V 的增益對應±500mV， 20V/V 的增益對應±125mV， 60V/V 的增
益則對應±50mV，MAX4081 所推薦之電流感測電阻值，如表 4-2 所示。 
表 4-2 電流感測電阻值之參考表 
滿刻度負載電流
ILOAD(A) 
電流感測電阻 
(mΩ) 
增益 
(V/V) 
滿刻度檢測電壓
VSENSE (mV) 
滿刻度輸出電壓 
(VOUT-VREF)V 
0.5 1000 5 ±500 ±2.5 
0.125 1000 20 ±125 ±2.5 
0.05 1000 60 ±50 ±3.0 
5 100 5 ±500 ±2.5 
1.25 100 20 ±125 ±2.5 
0.5 100 60 ±50 ±3.0 
50 10 5 ±500 ±2.5 
12.5 10 20 ±125 ±2.5 
5 10 60 ±50 ±3.0 
 
3. MSP430FG4618IPZ 微控制器 
本計畫於主控電路中，使用美國德州儀器公司(TI)的 MSP430FG4618IPZ 微
控制器作為電池電量量測模組的控制核心，如圖 4-9 所示。微控制器具有內崁類
比/數位轉換器(A/D Converter)，數位轉換器是 12Bit 的精度，微控制器的指令是
16Bit，操作具有極低功耗的設計使用，具有專用的 SPI&I2C 介面與內建 RTC。 
 
圖4-9 MSP430FG4618IPZ微控制器之外觀圖 
本計畫對於電池的電壓與電流進行同步即時量測，有鑑於此，有必要對微控制器
MSP430的ADC12類比轉數位轉換器加以介紹，如圖4-10所示。 
ADC12的暫存器的功能比較多，可以分為五種模組： 
54 
 
本計畫電動車電池的電量量測模組，需要同時量測電壓與電流，選擇多通道
多量測的方式，並且設置兩個通道分別同時量測電池的電壓與電流，同時取樣多
電壓與電流資料。 
4. ZigBee無線模阻 
CC1101EMK無線通訊模組是美國德州儀器公司(TI)一款符合 ZigBee無線通
訊協定的模組，如圖 4-11，CC1101EMK 專為低功耗無線應用而設計，該 RF 收
發器工作在 315 MHz、433 MHz、868 MHz 與 915 MHz 的頻率波段,也可以通過
軟體設置頻率波段 300 MHz～348 MHz、400 MHz～464 MHz 與 800 MHz～
928MHz。而模組內的 CC1101 控制晶片其內部整合了一個高度可以配置的調製
解調器，這個解調器可以應付不同的調整格式, 其數據傳輸率最高可以到達 500 
Kb/s。CC1101 的內部結構，如圖 4-12 所示，外部射頻訊號進入低雜訊的放大器
(LNA)，將訊號放大，然後對信號的中間頻率進行積分並轉換，在此中間頻率階
段,信號通過 ADC 進行轉換，自動增益控制(AGC)作細微頻率濾波與解調,數據同
步數位化的工作。 
CC1100 的發射器在 RF 頻率合成器下達到發送功能，RF 頻率合成器包括一
個完整的整合型的 LC 電壓控制振盪器(VCO)與一個接收模式下的向下轉換混合
頻率產生器產生 I 與 Q 的 LO 訊號的 90°相移裝置。XOSC_Q1 與 XOSC-Q2 之間
連接的石英振盪器可以產生合成器的參考頻率，其同時可以為數位部分與 ADC
提供時脈。圖 4-13 是 CC1101EMK 無線通訊模組之應用電路。 
 
圖4-11  CC1101EMK無線通訊模組之外觀圖 
 
56 
 
4.4 資料讀取器之功能方塊圖與主要零件之規格說明 
資料讀取器的主要功能是透過其ZigBee無線模組，使用ZigBee無線傳輸協議
的方法讀取電池電量量測模組上ZigBee無線模組所傳送來的資料，各功能電路間
彼此的關係說明如圖4-14所示: 
 
圖 4-14 資料讀取器之功能方塊圖 
首先，資料讀取器的電源是取自於外接+12V與USB電源(+5V)，再透過電源
切換電路來選擇其中一種電源，設定上是以外接+12V為預設電源。選擇電源之
後，再輸入到低電壓降輸出轉換器(LDO)產生資料讀取器所需的+3.3V。電池電
量量測模組透過ZigBee無線模組傳輸資料到資料讀取器的ZigBee無線模組接收
資料，並由MSP430微控制器處理後，透過USB控制器或微控制器內的UART功能
傳輸給電腦。用鍵盤設定資料讀取器的各項參數，例如UART的鮑率(Bund Rate)；
用液晶顯示器顯示微控制器所輸出的顯示資料，例如各項設定參數與即時量測狀
態等等。再者，將ZigBee無線模組接收資料記錄在串列快閃記憶體或經過MSP430
微控制器的計算與處理；而所預先設定的程式，則記錄在串列式程式記憶體。 
 
58 
 
表 4-3  NHD-0420AZ-FSW-GBW-3V3 液晶顯示器之接腳訊號 
接腳號 訊號名 功能說明 
1 Vss 電源地 
2 VDD 邏輯準位的供應電壓 
3 VO 對比顯示的控制電壓 
4 RS 暫存器的選擇 
5 R/W 讀寫的選擇 
6 E 致能操作訊號 
7~14 DB0~DB7 資料線 
15 LED+ LED 背光正電壓 
16 LED- LED 背光電源地 
 
3. MSP430F2013 鍵盤控制晶片 
本計畫於資料讀取器中，使用美國德州儀器公司(TI)的 MSP430F2013 微控
制器作為鍵盤控制晶片，如圖 4-18 所示。此微控制器具有內崁類比/數位轉換器
(A/D Converter)，數位轉換器是 16Bit 的精度，微控制器的指令是 16Bit，操作具
有極低功耗的設計使用，具有專用的 SPI 與 I2C 介面。在鍵盤控制晶片裡，寫入
鍵盤掃描程式來檢測是哪一個按鍵被按下；讀取到鍵盤的狀態，並透過 SPI 介面
傳給資料讀取器中的 MSP430FG4618IPZ 微控制器作按鍵輸入判別。 
 
 
圖 4-18  MSP430F2013 鍵盤控制晶片 
 
4.4.2 電池電量量測模組與資料讀取器之實現 
基於對電池電量量測模組硬體與資料讀取器開發的論述，本計畫實現了實際
的硬體模組，圖4-19是電池電量量測模組之外觀圖，而圖4-20 是資料讀取器之
外觀圖。 
60 
 
 
圖 4-21 電池電量量測模組與周邊設備之接線圖 
經由上述各個設備所擔任的角色說明可以知道他們彼此的連接關係是可程
式電源供應器與電動車電池電量量測模組的連接，圖4-21的紅色與黑色線，模擬
充電器與電動車電池的電壓；400W PC電源供應器連接電動車電池電量量測模
組，圖4-21的黃色線，穿過霍爾電流感測器連接到模擬充放電的切換開關電路再
接到電子負載；由電子負載接出來，圖4-21的黑色線，到模擬充放電的切換開關
電路再回到400W PC電源供應器，這由黃色線與黑色線接成的單一路徑，是用來
模擬充電器的充電電流與電動車電池的放電電流；資料讀取器經由ZigBee無線模
組接收來自電池電量量測模組ZigBee無線模組輸出的資料，最後由資料讀取器上
的UART或USB通訊功能傳送到電腦。圖4-22 是電池電量量測模組與周邊設備連
接之外觀圖。 
 
圖4-22 電池電量量測模組與周邊設備連接之外觀圖 
62 
 
 
圖4-24 電池電量量測模組在固定負載下之放電線路圖 
 
圖4-25 電池電量量測模組在變動負載下放電之線路圖 
 
 
 
64 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
圖 4-26 量測初始電量與判斷充放電狀態之方塊圖 
 
圖 4-27 為放電模式下的程式方塊圖。當進入放電模式子程式後，程式將先
判斷電池電壓值是否小於電池截止電壓 45V。電壓大於 45V 代表電池仍可繼續
放電。接下來判斷電池電量量測模組所量測的電量是否歸零，當電量歸零，程式
將不做運算而準備充電。當電量大於零時，則將真實電流值計算成電量值，再來
將原本電量扣除此電量值後即為剩下的電池電量。當電壓小於 45V 代表電池不
能再繼續放電，於是程式判斷剩餘的電量是否大於 3%，當大於 3%表示誤差過
大，於是記錄於快閃記憶體且清除電量以避免累計誤差。 
 
 
 
 
 
 
開啟電源 
讀取電池開路電壓 
量測電池的初始電量 
讀取快閃記憶體中修正後的初
始總電量 
充放電判斷模式 
放電模式 
充電模式 
已經待機 2小時 
放電模式子程式 
充電模式子程式 
進入待機模式 
Yes 
No 
Yes 
Yes 
No 
No 
66 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
圖 4-28  充電模式子程式之方塊圖 
圖 4-29 為 ZigBee 無線模組動作之方塊圖，由於電池電量量測模組與資料讀
取器上各具有一組 ZigBee 無線模組，它們的一直處於待機狀態，一旦得到
MSP430 微控制器的傳輸指令，才開始傳輸與接收動作。其傳輸與接收是經由
ZigBee 的傳輸協定，亦即當兩個 ZigBee 無線模組經由協議的辨識字元彼此認證
並分清是擔任傳輸或接收任務後，才開始動作。 
 
 
 
 
 
 
 
 
 
 
Yes 
No 
Yes 
No 
充電模式子程式 
啟動計時 2分鐘 
2 分鐘時間已到,電池
電壓是穩態 
 
量測充電電流 
電池電壓落在
線性區 
 
量測充電時的電池電
壓 
計算充電電壓對應的
電量 
計算充入電
池的電量 
當前電池電
量加上充電
時之電量 
顯示電池電
量 
返回主程式 
68 
 
4.5.2 電壓量測的韌體設計 
本計畫對於電壓量測的韌體設計，除了一般量測之外，更是希望透過程式編
寫的手法，達到濾波的計算、去除雜訊、增加訊號的穩定性，並且使用查表法來
增加數據的準確度，相關方法與程式的說明如下：  
1. 去極值平均濾波的算法： 
去極值平均濾波的算法，並不能完全消除明顯的突刺干擾 (Spike)，而只是
將其影響消弱，由於明顯的突刺干擾會將取樣值遠離準確的真實值，因此去極值
的做法就是很容易地將這些明顯的突刺干擾剔除，而不參與平均值的計算，使得
平均濾波的輸出值更接近真實值，其作法與程式說明如下： 
將外部的類比訊號連續取樣 N 次，並且將這些 N 個取樣值加在一起形成累
加值，同時再找出最大值與最小值，並且從累加值中減去最大值與最小值，在按
N-2 個取樣值來求平均值，就可以獲得有效採樣值。為了方便求平均值，一般來
說 N-2 的值應為 2、4、8、16，所以 N 常取 4、6、10、18，其 C 語言程式如下
所示: 
#define N 10 // N 值可以依據實際情況來調整 
int sum = 0; 
char filter ( ) 
{ 
  char value_buf [N]; 
  char count， i， j， temp; 
  for (count = 0; count < N; count++) 
    { 
      value_buf [count] = get_ad(); 
      delay(); 
     } 
for (j =0; j<N-1; j++) 
  { 
    for (i=0; i<N-j; i++) //使用冒泡排序法將資料大小依序排列 
     { 
      If (value_buf [i] > value_buf [i+1]) 
        { 
          temp = value_buf [i]; 
          value_buf [i] = value_buf [i+1]; 
          value_buf [i+1] = temp; 
         } 
      } 
70 
 
反過來說，只要將類比數位轉換後的數位值 NADC 除以 1365，再乘上
16(16/1)， 即為原來的輸入電壓，其關係式如下所示: 
Vi = NADC
1365
×
16
1
 = 16 × NADC
1365
                                                         (4-4) 
(2). 建立參考電壓表 
上述的公式並不是一個很複雜的數學計算，但是對 MSP430 控制器而言要到
達計算到小數點第一位的精確度是很困難的，因此要改採事先量測輸入電壓
1~48V 類比數位轉換的數位值，以此 48 個數位值作為參考電壓表，當即時量測
開始時，將所轉換的數位值對照參考電壓表，以得到精確的數位值，建立此一參
考電壓表的電路如圖 4-31 所示： 
 
圖 4-31 使用 LED 顯示條建立參考電壓表之電路圖 
此電路中的 LED 顯示條就是負責顯示類比數位轉換後的數位值，此一數位
值為二進制， P2.0 為最低位元，P3.7 為最高位元。所以從 LED 顯示條的顯示結
果，換算成 10 進制數值抄寫下來，以建立參考電壓表。其程式如下所示: 
#include” “ 
void int(); 
void adcv(); 
const unsigned char seg[11] = {0xc0，0xf9，0xa4，0xb0，0x99，0x92，0x82，0xf8，
0x80，0x90，0xc1}; // 0~9 
const unsigned char vol[30] = {7，16，25，33，41，50，58，68，76，85，93，
102，110，119，128，136，145，154，162，170，179，188，197，205，214，
222，231，240，249，255}; 
const unsigned char com[4] = {7，11，13，14}; 
unsigned char d，t，j，k，v; 
72 
 
 while(d>k)   //d 是數位值 
 { 
 i = i+1; 
 k = vol[i]; 
 } 
依據 MSP430 的資料手冊，轉換後的數位值 NADC 與輸入待測電壓 Vin 換
算的數學關係式如下: 
NADC = 4095 × (Vin -VR-)
(VR+ - VR-))                                                       (4-5) 
Vin =�NADC × 
(VR+ -VR-)
4095
�+VR-                                           (4-6) 
NADC: 轉換後的數位值 
Vin: 輸入待測電壓 
VR+: 高準位參考電壓，在這裡為 3.3V 
VR-: 低準位參考電壓，在這裡為 GND，即 0V 
本計畫中採用公式(4-6)來量測電壓，而且使用 ADC12A0 專為讀取輸入待測
電壓的通道。由於 ADC12 所讀出的轉換後的數位值並不具任何意義，此值乃為
當下所量測到的電壓所對應的數位值，人們並不容易解讀其值的含意，必須對其
作度量的轉換。所以程式執行前就已預先量測 36V（衰減 33.3 倍，電壓是 1.08）
時之 ADC12 數位值，此數位值是 0x1474，0V 時之 ADC12 數位值是 0x000， 所
以量測到的輸入待測電壓是在轉換後的數位值 0x000 ~ 0x1474 之間。 
此轉換後的數位值，再經由解碼獲得人們所熟悉的十進制值，且此 ADC12
採每 0.2 秒強制中斷，也就是說每過 0.2 秒 NADC 讀值就會改變。最後轉換後的
數位值會暫時存在 ADC12MEM0 暫存器中等待讀取。以下是電壓量測的程式片
段： 
Voltage = (int)((((long)Results[0]*330)/4095)*33.3)      (4-7) 
在 ADC12 的中斷服務程式（ISR）一次中斷即取樣 64 筆的待測輸入電壓，
最後依據之前敘述的去極值平均濾波法所得到的電壓值再乘上 33.3，目的是為了
將衰減 33.3 倍的輸入待測電壓恢復為實際待測電壓，以便顯示正確的電壓值。 
4.5.3 電流量測的韌體設計 
電流讀取的做法大致和電壓相同，差別只在於電流值是由ADC12A2讀取，
並且轉換後的數位值會暫時存在ADC12MEM2暫存器中等待讀取。使用ADC12
中的ADC12MEM3與ADC12MEM4當成特別的暫存器，是專為暫放充電資料和放
電資料而設計的，也就是當電流為正值時，數值會被累加至ADC12MEM3；若當
74 
 
式庫來計算秒為單位的萬年曆表，除了提供量測時中斷程式的時間，記錄事件發
生的時間點，也提供時間的多寡，以方便計算以安培小時為單位的電量。 
4.5.6 充放電狀態 
本計畫中充放電狀態的判別會在讀取的數位讀值出來之後，立即作比較，充
電電流的方向跟霍爾電流感測器的指定方向是一致的，所以定義充電狀態為當
ADC12A2 量測電壓的數值大於電壓準位提升電路的偏壓 1.5V (實驗値是
1.53V)，程式就判斷是充電狀態；相反的，放電電流的方向跟霍爾電流感測器的
指定方向是相反的，而且 ADC12A2 量測電壓的數值小於電壓準位提升電路的偏
壓 1.5V(實驗値是 1.47 V)，程式就判斷是放電狀態；而 ADC12A2 量測電壓的數
值介於 1.47 V~1.53V，程式就判斷模組處於待機狀態，無充放電電流流通。本電
量量測模組的將充放電狀態除了在程式內判斷外，也可以由外部設計好的兩個
LED 來顯示充放電狀態。以下是充放電狀態的程式片段： 
//*********** Judge Charge or Discharge Current  **************** 
 if (sum_I > 1911) // (1.53V) Charge Current's direction is the same as Hall Sensor's 
Arrow Direction 
 {   
    P2DIR|= BIT2; 
    P2OUT|= BIT2;       // 充電狀態LED亮 
    P2DIR|= BIT1; 
    P2OUT&= ~BIT1;     // 放電狀態LED滅 
   } 
 else if (sum_I < 1811)    // (1.47V) Discharge Current's direction is Hall    
                          Sensor's Inverse Arrow Direction 
 { 
   P2DIR|= BIT1; 
   P2OUT|= BIT1;         //放電狀態LED亮 
   P2DIR|= BIT2; 
   P2OUT&= ~BIT2;        //充電狀態LED滅 
 } 
else if ((sum_I > 1811) && (sum_I < 1911)) 
  { 
   P2DIR |= BIT1; 
   P2OUT &= ~BIT1;      //放電狀態LED滅 
   P2DIR |= BIT2; 
   P2OUT &= ~BIT2;     //充電狀態LED滅 
  } 
76 
 
*********************************************************** 
放電 (Discharge) 狀態 
*********************************************************** 
電腦螢幕顯示:   充電電壓 (V)    充電電流 (A)   充電功率 (W) 
                   30.00          30.00           0900.00 
                     ↓              ↓              ↓ 
以資料輸出:      辨識字元        辨識字元       辨識字元 
                    DF             DA             DE 
例如 TX 輸出的資料段 : DF30.00DA30.00DE0900.00 
定義 
DF: Discharge Force 
DA : Discharge Current 
DE : Discharge Energy 
*********************************************************** 
待機狀態( Standby Status or Bare Status)—沒有充放電狀態 
*********************************************************** 
電腦螢幕顯示: 待機電壓 (V)    待機電流 (A)   待機功率 (W) 
                30.00           00.00           0000.00 
                  ↓               ↓               ↓ 
以資料輸出:    辨識字元        辨識字元       辨識字元 
                 BF              BC            BE 
例如 TX 輸出的資料段 : BF30.00BA00.00BE0000.00 
定義 
BF: Bare Force 
BC: Bare Current 
BE: Bare Energy 
同時為了驗證 UART 的輸出是否在電腦端接收正常，本計畫使用 Windows 作業
系統裡附加的超級終端機的功能接收來自於資料讀取器的資料，如圖 4-32  所
示。 
78 
 
 
圖 4-33  Labview 操作介面之示意圖 
 
 
 
 
80 
 
第五章  硬體實驗之結果 
5.1 前言 
本章節將前幾章節所介紹 ZigBee 無線模組、電池電量量測模組與資料讀取
器的硬體進行驗證與分析。首先，先驗證 ZigBee 無線模組在電池電量量測模組
與資料讀取器上彼此之間的傳輸驗證；再者，需對電池電量量測模組、資料讀取
器與 ZigBee 無線模組以不接電池的方式，分別結合直流電源供應器、電子負載，
進行各項實驗。充電是以直流電源供應器作為充電器，放電是以直流電源供應器
當作電池與電子負載作為放電對象，以模擬電動車電池對電動車上的負載作放
電。使用 ZigBee 無線模組將資料傳送到 Labview 圖控介面，並且儲存量測結果。 
5.2  ZigBee 無線模組之功能驗證 
本計畫使用美國德州儀器公司(TI)出品的 CC1101EMK 無線通訊模組，在 TI
的網站上可以下載 ZigBee 無線模組之傳送接收的驗證程式，在 TI 名為 slaa325a
的驗證程式。首先，將兩個 ZigBee 無線模組分別裝在電池電量量測模組與資料
讀取器上，並將驗證程式燒寫進電池電量量測模組 MSP430 微控制器裡，並寫一
組 UART 的傳輸程式結合驗證程式，燒寫進於資料讀取器的 MSP430 微控制器。
本驗證程式由電池電量量測電量模組上的 ZigBee 無線模組對輸資料讀取器上的
ZigBee 無線模組輸出簡單的資料”11111111_00000000_”，開啟 Windows XP
系統裡面的超級終端機連線程式接收，並觀看資料讀取器傳輸的結果。同時為了
瞭解電池電量量測模組與資料讀取器經由 ZigBee 無線模組之無線傳輸距離，兩
者相距 10 公尺，資料讀取器還是可以收得到資料。如圖 4-35  驗證程式資料輸
出之示意圖。 
82 
 
表 5-1 電源電壓(V1)與微控制器的讀值(V3)之量測數據 
由表 5-1、圖 5-2 與圖 5-3 數據可以發現，V3 在 16V 以上，V1 與 V3 的誤
差百分比都可以維持在 1%左右。但是 V3 在 16V 以下，誤差開始變大，這是因
為電壓調整器最低的工作電壓是 15V，15V 以下輸入到 12V 的輸出電壓調整器
會有非線性現象出現，所以 V1 與 V3 的誤差百分比會必較大。而且一般來說，
15V 的電動車電池，也不足以驅動電動車，所以 15V 下的數值可不予以考慮。 
電源供應
器電壓
V1 (V) 
電阻分壓器衰減 33.3 倍後
的電壓 V2 (V) 
微控制器的讀值
V3 (V) 
V1 與 V3 的誤差百分比 (%) 備註 
36 1.08 36.3 0.8 
V3 為乘回 33.3 倍
後的數值 
35 1.05 35.3 0.9  
34 1.02 34.4 1.2  
33 0.99 33.2 0.6  
32 0.96 32.4 1.3  
31 0.93 31.2 0.6  
30 0.90 30.2 0.7  
29 0.87 28.9 -0.3  
28 0.84 27.8 -0.7  
27 0.81 26.9 -0.4  
26 0.78 26.0 0.0  
25 0.75 25.2 0.8  
24 0.72 24.1 0.4  
23 0.69 23.2 0.9  
22 0.66 22.1 0.5  
21 0.63 20.8 -1.0  
20 0.60 20.0 0.0  
19 0.57 18.8 -1.1  
18 0.54 18.1 0.6  
17 0.51 17.0 0.0  
16 0.48 16.1 0.6  
15 0.45 14.7 -2.0  
14 0.42 13.6 -2.9  
13 0.39 12.8 -1.5  
12 0.36 11.7 -2.5  
84 
 
表 5-2 順向電流之量測數據 
電子負載電流 I(A) Vin 的電壓(V) Vx 的電壓(V) Vb 的電壓(V) Vo 的電壓(V) 備註 
0 0.01 0.01 -3.02 1.50  
1 0.11 0.11 -3.12 1.55  
2 0.21 0.21 -3.22 1.60  
3 0.31 0.31 -3.32 1.65  
4 0.40 0.40 -3.42 1.70  
5 0.51 0.50 -3.52 1.75  
6 0.60 0.60 -3.62 1.80  
7 0.70 0.70 -3.72 1.85  
8 0.80 0.80 -3.82 1.90  
9 0.90 0.90 -3.92 1.95  
10 1.00 1.00 -4.02 2.00  
11 1.10 1.10 -4.12 2.05  
12 1.20 1.20 -4.22 2.10  
13 1.30 1.30 -4.31 2.15  
14 1.40 1.40 -4.41 2.20  
15 1.50 1.50 -4.51 2.25  
16 1.60 1.60 -4.61 2.30  
17 1.70 1.70 -4.72 2.35  
18 1.80 1.80 -4.81 2.40  
19 1.90 1.90 -4.92 2.45  
20 2.00 2.00 -5.00 2.50  
21 2.10 2.10 -5.11 2.55  
22 2.20 2.20 -5.22 2.60  
23 2.30 2.30 -5.31 2.65  
24 2.40 2.40 -5.42 2.70  
 
 
 
 
 
 
 
 
 
 
 
86 
 
 
圖 5-4 在順向電流下 Vo 的變化 
 
圖 5-5 在逆向電流下 Vo 的變化 
 
首先，歸納與整理表 5-2 與表 5-3 的數據，再來得到微控制器讀取的電壓(Vo)
與電子負載電流的關係式 I = ((Vo-1.5) / 50) x 1000 = 20 x (Vo-1.5)，此關係式與
(4-8)式是存在誤差電流的，所以更改關係式 I = ((Vo-1.5) / 50) x 1000 = 20 x 
(Vo-1.5)+△I，同時須求得順、逆向電流下微控制器的電流讀值(A)與理論電流值
的誤差百分比，可表示為(△I / I)。整理過後，如表 5-4 所示。 
圖 5-5 與圖 5-6 是個別依據表 5-4 的數據所繪製，由圖 5-5 與圖 5-6 的圖示
可以知道，在順向電流下，發生最大的電流誤差是在微控制器的 1A 電流讀值時，
13%；而在逆向電流下，發生最大的電流誤差也是在微控制器的 1A 電流讀值，
19%。在順向電流下，其平均的電流誤差百分比是 2.32%；而在逆向電流下，其
88 
 
 
圖 5-6  在順向電流下，量測電流與理論電流值的誤差(%) 
 
 
圖 5-7 在逆向電流下，量測電流與理論電流值的誤差(%) 
 
 
 
 
5.3.3 功率的量測結果 
功率的計算是由所量測的電壓與電流相乘所得到的: P = V x I (W)，在表 5-5
中，理論功率等於理論電池電壓乘上理論電流；而微控制器的量測功率等於微控
制器的量測電壓乘上微控制器的量測電流。將表 5-5 繪製成圖 5-7，由圖 5-7 可
以觀察到微控制器的量測功率皆大於理論功率。 
 
 
 
90 
 
5.4 本章小結 
本章節可以了解到電池電量量測模組、資料讀取器與 ZigBee 無線模組的測
試結果，此外在 ZigBee 無線模組之傳送接收的驗證程式中，我們可以清楚的知
道電池電量量測模組與資料讀取器經由 ZigBee 無線模組之無線傳輸距離，兩者
相距可以在 10 公尺以上，資料讀取器還是可以收得到資料；所以電池電量量測
模組與資料讀取器無須作非常近的貼近距離作傳輸。 
 
  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
92 
 
 
表 6-1 固定負載放電之實驗數據表 
 
 
 
  電壓(V) 電流(A) 電量(%) 
時間(時:
分)  
電壓(V) 電流(A) 電量(%) 
時間(時:
分) 
10A 
54.3 10 90 00:00 
20A 
54.3 20 90 00:04 
50 10 82 00:15 49 20 81 00:08 
48.64 10 69 00:30 47.64 20 68 00:16 
47.28 10 60 00:45 46.28 20 59 00:20 
45.92 10 48 01:00 44.92 20 47 00:24 
44.56 10 37 01:15 43.65 20 36 00:28 
43.2 10 28 01:30 43.01 20 28 00:32 
41.84 10 20 01:45 42.03 20 18 00:36 
41.2 10 9 02:00 41.2 20 8 00:40 
40.12 10 0 02:15 40.12 20 0 00:44 
 
電壓(V) 電流(A) 電量(%) 
時間(時:
分)  
電壓(V) 電流(A) 電量(%) 
時間(時:
分) 
36A 
54.3 36 90 00:02 
56A 
54.3 56 90 00:01 
48 36 81 00:04 48 56 81 00:02 
47.64 36 68 00:06 47.64 56 68 00:03 
46.28 36 59 00:08 46.28 56 59 00:04 
44.92 36 47 00:10 44.92 56 47 00:05 
43.65 36 36 00:12 43.65 56 36 00:06 
43.01 36 28 00:14 43.01 56 28 00:07 
42.03 36 18 00:16 42.03 56 18 00:08 
40.42 36 8 00:18 40.42 56 8 00:09 
40.01 36 0 00:20 40.01 56 0 00:10 
94 
 
了許多變動負載實驗如下:  
1. 電動車在平穩路況下的實驗： 
(1). 靜置、啟動、平穩行駛 
(2). 平穩行駛、瞬間加速、緊急減速 
(3). 平穩行駛、頻繁瞬間加速、頻繁緊急減速 
(4). 塞車情況、間歇行駛 
2. 電動車在爬坡路況的實驗: 
(1). 爬坡行駛、瞬間加速、緊急減速 
(2). 爬坡塞車、間歇行駛 
觀察圖6-2 各種路況的變動負載放電的曲線得知，當輕載放電切換至重載放
電時，電池電壓會瞬間陡降，電池電量量測模組的量測電量亦快速減少。而當重
載放電切換至輕載放電時，電池電壓會快速回升，電池電量量測模組的量測電量
減少較為緩慢。 
圖6-2(a)為電動車在靜置、啟動、平穩行駛，固定每1分鐘量測變動負載放電，
放電電流為1A到66便變化，而電池初始電壓為54.23V，電池電量量測模組的電
量為90%，實驗總放電時間為20分。 
圖6-2(b)為電動車在平穩行駛、瞬間加速、緊急減速，固定每1分鐘量測變動
負載放電，放電電流為10A與56A，而電初始電量為53.79V，電池電量量測模組
的電量為90%，實驗總放電時間為20 分。 
圖6-2(c)為電動車在平穩行駛、頻繁瞬間加速、頻繁緊急減速，隨機變動負
載，電池初始電壓為53.78V，電池電量量測模組的量測電量為90%，總放電時間
為7 分25 秒。 
圖6-2(d)為電動車在塞車情況、間歇行駛，為隨機變動負載，電池初始電壓
為50.67V，電池電量量測模組的量測電量為90%，總放電時間為20 分。 
圖6-2(e)為電動車在為隨機變動負載，電池初始電壓為53.99V，電池電量量
測模組的量測電量為90%，總放電時間為20分。 
圖6-2(f)為電動車在為隨機變動負載，電池初始電壓為54.17V，殘電池電量
量測模組的量測電量為90%，總放電時間為20 分。 
圖6-2(g)為電動車在為隨機變動負載，電池初始電壓為54.11V，殘電池電量
量測模組的量測電量為90%，總放電時間為20分。 
96 
 
狀態切換至放電狀態時，電池電壓會瞬間陡降，電池電量量測模組量測的電量也
隨時間遞減。本節設定電動車在於爬坡與下坡之間的路況下行駛，下坡時電動車
的驅動馬達為回充狀態，可視為發電機對電池充電。以下設定路況為爬坡與下坡
之間平穩行駛。圖6-3為變動負載充電之曲線圖，電池初始開路電壓為51.34V，
電池電量量測模組量測的初始電量為65%，充電電流為-10A~-30A，放電電流為
10A~56A，總充放電時間為20分。 
 
圖 6-3 變動負載充電之曲線圖 
6.3 本章小結 
 本計畫中，並非以真正電動車作為變動負載，而以電子負載模擬電動車的在
行駛過程中所消耗的變動電流，故了解到真實電動車上的驅動馬達並不是消耗固
定的負載電流，而是驅動馬達依據實際道路情況而有不同的消耗負載電流。由上
述的各個電壓、電流與電量曲線可知，此電池電量量測模組可以真實量測電子負
載消耗的變動負載電流。 
 
 
 
 
 
 
 
 
 
 
 
-40
-20
0
20
40
60
80
100
00
:0
1
00
:0
2
00
:0
3
00
:0
4
00
:0
5
00
:0
6
00
:0
7
00
:0
8
00
:0
9
00
:1
0
00
:1
1
00
:1
2
00
:1
3
00
:1
4
00
:1
5
00
:1
6
00
:1
7
00
:1
8
00
:1
9
00
:2
0
電
壓
(V
)&
電
流
(A
)&
電
量
(%
)
時間(時:分)
電壓(V)
電流(A)
電量(%)
98 
 
7.2 未來研究方向 
本計畫的未來研究方向是期望朝電動車電池交換站電量計費系統方面發
展。目前國內外充電站的業務模式是指電動車的使用者得知電量即將耗盡時，將
電動車開到充電站為電池充電，把電力當成即時消費產品透過現場付費的方式支
付或其它電子金融卡的方式支付，以完成交易。充電站是很單純的對電動車上的
單一電池進行充電，但是電池交換站的作法是必須顧及兩個電池目前的狀態；第
一個是電動車上的待更換的電池，另一個是即將裝配到電動車上的滿電量的電
池。電動車使用者在電池交換站需要服務人員檢測待更換電池的電量與電池狀
態，另一方面又必須了解即將裝配的滿電量電池的電量與狀態，其中牽涉到使用
者的喜好，例如使用者認為使用百分之七十電量的電池就可以；或者使用者可以
挑選另一廠牌不同效能的電池等；這些都在在關係到使用者的消費金額，所以電
動車電池交換站電量計費系統必須考量很多方面的事情。為此，希望未來研究電
量計費系統需包括下列三個部分： 
1. 建立電池交換計費系統管理平台：對電池交換站涉及的基本數據的集中式管
理，例如電動車電池的電量、狀態與維修紀錄與電池使用者的基本資料等。 
2. 建立電池交換計費系統營運平台：對於使用者在電動車電池交換站租用電池
的金額進行充值的管理等。 
3. 建立電池交換計費系統查詢平台：對於上述管理平台與營運平台產生相關的
數據進行追蹤。 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
100 
 
Capacity Test,” Telecommunications Energy Conference, pp. 245-249, 1994. 
[22] L. M. Hofland, E. J. Stofel and R.K. Taenaka, “Galileo Probe Li-SO Battery 
Cell Life Testing,” IEEE Aerosp. Electronics System, pp. 14-18, 1996. 2. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
國科會補助計畫衍生研發成果推廣資料表
日期:2012/02/07
國科會補助計畫
計畫名稱: 近場無線通訊應用於電動車電池電量量測與計費系統之開發
計畫主持人: 辜志承
計畫編號: 100-2623-E-011-002-ET 學門領域: 能源新利用技術研發
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
