  
1. 緒論 
隨著經濟提昇及產業結構的改變，使
用自動化機構進行製造生產之趨勢是
無可避免的，尤其是在生產數量及品
質的提升與控制上，特別仰賴機械設
備之穩定性與可靠性。由於可程式控
制器具有優異的控制彈性與穩定性，
可處理時間順序上及邏輯運算能力，
因而在許多的工業進行自動化中佔有
相當重要之地位。 
傳統的循序控制器的設計方法是
以階梯圖配合 PLC 控制器為主，而 PLC
的程式碼與整個流程並無直接關係，
故系統越複雜，設計修改和除錯亦愈
困難。現今有步進階梯的設計方法，
改良了傳統階梯圖設計的不便，但是
步進階梯 (STL) 的設計方法是依據
已知流程和動作來設計程式，仍然無
法對系統設計前之動態行為與決策做
分析。在面臨日益複雜的製造系統，
如何有效率及有系統的分析設計間斷
事件控制系統並發展出 PLC 的控制程
式成為重要的課題。 
本研究提出整合 IDEF/CTPN/SFC
於間斷事件控制系統 PLC 的分析與設
計的流程，分為功能及流程的分析、
系統動態行為的分析、系統的設計及
系統的實現等四大部份，而在工具間
轉換的部份，本研究提出兩階段之轉
換規則，使工具的轉換時間更為縮
短。兩階段的轉換規則為 IDEF/CTPN
與 CTPN/SFC 之轉換，提出 IDEF/CTPN
的轉換，以 IDEF 的方式來做系統的需
求分析，由此分析的結果，轉成顏色
時間派翠網 (CTPN) 的模型，比直接
由系統的描述所建構的模型更具有模
組化與結構化；而在 CTPN/SFC 的轉換
中，使得該間斷事件控制系統可以更
順利地在 PLC 中實現，達到系統設計
的目標。各分析階段之使用工具及其
說明如下表 1 所示。 
 
 
 
2. 文獻探討 
Bravoco 和 Yadav [1]曾提出過，
對於系統的設計錯誤，有佷高的比例
是對系統及系統的需求不了解所致，
故執行有效率的系統分析成為重要的
工作。Lee[4]提出了整合
IDEF/PNC/TPL/LLD 的系統分析設計方
法來實現 PLC 的控制系統，此研究運
分析
步驟 
分析工
具 
說明 
功能
及流
程的
分析 
IDEF0-
3 
IDEF0-3 結合 IDEF0
及 IDEF3 兩者的優
點，用於了解系統內
部的功能及功能內
部事件的邏輯順序
關係。 
動態
行為
分析 
Colore
d 
Timed 
Petri 
Nets 
經由IDEF0-3與彩色
時間派翠網的轉換
後，藉由彩色時間派
翠網的動態行為分
析，可以了解系統是
否具有活性及驗證
系統的可行性 
系統
的設
計 
SFC 經由彩色時間派翠
網轉換成順序功能
圖(SFC)後，可做為
PLC 程式設計的依
據。 
系統
的實
現 
STL 將SFC轉換為步進階
梯圖及指令，並輸入
至 PLC 控制器中，完
成程式設計與測試。 
  
 
規則四：同步 AND 分流結點與彩色時
間派翠網的轉換方法如圖 4所示： 
 
圖 4 IDEF0-3同步 AND 分流結點轉換 
 
規則五：非同步 AND 合流結點與彩色
時間派翠網的轉換方法如圖 5所示：  
圖 5 IDEF0-3 非同步 AND 合流結點轉
換方法 
 
規則六：IDEF0-3 之匣道與彩色時間派
翠網的轉換模式轉換的方法如圖 6所
示。 
圖 6 IDEF0-3 匣道之轉換方法 
 
規則 7：各匣道間訊息溝通與彩色時間
派翠網的轉換方法如圖 7所示。 
圖 7 IDEF0-3 各匣道間轉換方法 
3.2  彩色時間派翠網與順序功能圖
之轉換規則 
規則一、單一程序之轉換: 
(1) 不具顏色屬性之控制條件單一程
序之轉換方法如圖 8 所示： 
 
圖8 不具顏色屬性之控制條件單一程
序之轉換方法 
(2) 具顏色屬性之控制條件單一程
序之轉換方法如圖 9 所示。 
圖9 具顏色屬性之控制條件單一程序
之轉換方法 
 
規則二、選擇性分歧的轉換方法
  
P0-1 T0 P0-2 P1-1 T1
P2-2 P4-1
T4 P4-2 P5_2-1T5_2 P5_2-2 P6_2-1
T6_2
P5_1-1
T5_1
P5_1-2 P6_1-1
T6_1
P6_2-2 P6_1-2
P1-2 P2-1 T2
T7_1 P7_1-2P7_1-1
T7_2 P7_2-2
T8_1
P9_1-2
P8_2-1 T8_2P7_2-1
P8_1-1
P8_2-2
P8_2-2 P9_2-1 T9_2
P3-1 T3
P3-2
啟動
訊號
完成復歸訊號 機械手臂夾取完成訊號
機械手臂移動完
成訊號 大球訊號
機械
手臂
移動
完成
訊號
機械
手臂
移動
完成
訊號
平分
完成
訊號
機械
手臂
開啟
完成
訊號
重力
輸送
機方
向
訊號
小球訊
號
 
 
圖15 大小球分類機之IDEF0-3轉換成
CTPN 模型 
4, 結果與討論 
1) 本研究提出整合IDEF/CTPN/SFC之
PLC 順序控制器的分析設計方法，
使順序控制系統之系統開發有一
完整性的系統分析與設計的方法。 
2) 建立 IDEF 與 CTPN 的轉換規則，將
IDEF0-3 的流程分析轉換成相對應
的彩色時間派翠網，以提供對系統
的動態分析。 
3) 建立 CTPN 與 SFC 的轉換規則，使
系統分析階段從動態分析進入到
系統設計的階段。再藉由PLC與SFC
互相轉換的機制，可以轉成各類
PLC 之階梯圖。 
4) IDEF/CTPN 及 CTPN/SFC 兩階段的
轉換規則，可以縮短工具之間的轉
換，進而達到縮短開發時間的目的 
 
 
M8002
X26 (訊號)
Y2S20
Y5
X4
X27(復歸完成訊號)
系統復歸-機械手臂上移
系統復歸-機械手臂左移
S22
Y1
X6 (移動完成訊號)
S23 機械手臂夾爪夾取球
Y3 機械手臂下降
T1  2sec
Y1
T1 (夾持完成訊號)
Y2S24 機械手臂上升
X4 (移動完成訊號)
M1 (大球訊號)
X4 (移動完成訊號)
M2 (小球訊號)
Y4S21 機械手臂右移
X2 (移動完成訊號)
Y5S30
X1 (移動完成訊號)
Y3S31
X6 (移動完成訊號)
Y1S32
T2 (放開完成訊號)
T2  2sec
Y1
S33 完成
Y4S25
X3 (移動完成訊號)
Y3S26 機械手臂下降
X5 (移動完成訊號)
Y1S28
T2 (放開完成訊號)
T2  2sec
Y1
S29 完成
Y7S27 重力輸送機
左傾
Y6
X11
X10
重力輸送機
右傾
T3
重力輸送機
完成訊號
T3 K20
機械手臂右移
機械手臂夾爪
放開
機械手臂左移
機械手臂下降
機械手臂夾爪
放開
 
圖 16 大小球分類機分類流程之 SFC
圖 
參考文獻 
 
1.  Bravoco, R.R. and Yadav, S.B., 
“A Methodology to Model the 
Information Structure of an 
Organization”, Computer in 
Industry, Vol.5, pp. 
59-71.(1985) 
2.  Coquhoun, G.J.; Baines, R.W., 
and Grossley, R., “A 
composite behavioural 
modelling approach for 
manufacturing enterprise”, 
The International Journal of 
