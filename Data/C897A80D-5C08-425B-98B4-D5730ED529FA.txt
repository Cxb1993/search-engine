如何從影像中將人臉影像分離出，也是本論文所要探討的問題，雖然人臉影像分割方法有
很多種，但以最直觀的膚色分割來取得人臉影像是最快速的方法。它可以快速從影像中找出膚色
位置，這樣可以使得人臉偵測速度更接近即時系統的需求。 
 
２. 系統分析設計 
2.1  人臉偵測 
由於彩色影像比灰階影像所能提供影像處理做特徵萃取與區域分割更為豐富，加上電腦的
運算速度及儲存容量技術不斷進步；近年來研究人臉偵測幾乎都使用彩色影像做為研究題材，本
實驗將採用彩色影像做為人臉偵測的來源。目前較常用於膚色分割的方法為 NCC、NTSC、
YCbCr、HSL ，為了能讓系統更接近即時，本論文選用 NCC 色彩空間做為顏色分割的工具。 
NCC 簡介 
NCC(Normalized Color Coordinates)色彩空間是解決 RGB 色彩空間中，影像因光源亮度的
強弱，造成物體在相同顏色的地方呈現出深淺不同的顏色。分別對 R與 G做正規化，就可以使 R
與 G對亮度的靈敏度降低，其轉換公式為(4.1.1)與(4.1.2)式： 
 
Rr
R G B
= + +                             (2.1.1) 
Gg
R G B
= + +                              (2.1.2) 
 
因為 B對亮度的靈敏度較小，所以可以忽略。利用 R與 G正規化得到 r與 g，做適當膚色範圍的
門檻值選取，就能將膚色從影像中分離出來。 
2.2  人臉區域判定 
首先偵測出影像中所有膚色區塊，一般臉部膚色區塊會比其他部位膚色區塊面積較大，用
此特徵搜尋出影像中人臉可能的位置，並取出人臉的區塊影像。因為所取出的臉部影像將用於人
臉辨識系統，所以必須有準確的臉部影像定位。將所取到的臉部影像再進行嘴唇顏色範圍的偵
測，以嘴唇為基準點做人臉幾何定位． 
 
2.2.1 膚色偵測 
 本系統所採用的色彩空間是 NCC，所以須先將影像有 RGB 轉為 NCC．因為 RGB 色彩模
型對光線變化有相當靈敏的反應，所以做 NCC 的轉換可以減少顏色對亮度的依賴，其轉換公式
為(2.2.1)與(2.2.2)式： 
 
                        Rr
R G B
= + +                            (2.2.1) 
                        Gg
R G B
= + +                            (2.2.2) 
 
2( ) 0.776 0.5601 0.18Q r r r− = − + +              (2.2.8) 
1 ( ( )) & ( ( )) & ( 0.001) & (( ) 15)
0
if g Q r g Q r w R G
s
otherwise
+ −< > > −⎧= ⎨⎩
≥
         (2.2.9) 
 
所得到的結果 
 
圖 2.5 改善後膚色區塊偵測影像 
圖 2.4(b)與圖 2.5 做比較可以明顯比較出，大部分雜訊已被移除，對臉部偵測的進行更為精確與
理想。再將偵測到的膚色影像做膚色二值化影像(skin color binary image)處理，如圖 2.6 所示： 
 
圖 2.6 膚色二值化影像 
2.2.2  雜訊移除 
由圖 2.6 中發現人臉周圍有一些小雜訊點，為了避免影響後續的搜尋，因此使用影像態學
(morphology)中侵蝕(erosion)與膨脹(dilation)技術去除雜訊，可以得到更完整的膚色區域，圖 2.7 
 
圖 2.7 利用侵蝕與膨脹去除雜訊 
將圖 2.7 以標記連通成分來得到最大區塊，既是主要的臉部位置．再對區塊做掃描，找出臉部邊
界非 0 像素(黑色背景)區域，在原始影像中相對座標 與 ，利用相對座
標取下臉部區域，如圖 2.8 所示： 
min min( ,X Y ) )max max( ,X Y
最傳統的度量法稱之為「歐幾里得距離」(Euclidean distance) 即歐氏距離。 
2. 待辨識影像與資料庫影像所計算出的特徵向量，計算出待辨識影像的權重值 f，在經過
與資料庫內的權重值計算出最小歐氏距離。 
2.3.2  人臉資料庫的建立 
 步驟一  
將要成為資料影像的人臉照片經由(2.3.1)轉換變為灰階影像(圖2.11)。 
 
圖2.11 資料庫人臉的灰階影像 
 
BGRgray 114.0587.0299.0I ++=              (2.3.1) 
 
步驟二 
 因為每一張訓練組的人臉影像大小都會不同，會造成無效的辨識率。所以利用仿射轉換技
術中比例大小的轉換，令(w,z)為原始影像的寬與長，經仿射轉換成(x,y)，其轉換公式如下: 
                        (2.3.2) 
固定每張影像的寬度為 100 像素，為了不讓影像在轉換過程中失真太多，於是在利用 Sx = 
Sy = 100/w使影像的長度與寬度做等比例縮放，再利用影像定位成100X130像素的大小，長度不
足 130 像素的影像，在補上黑色背景(灰階值為 0 )，增加臉部特徵的差異性，如圖2.12所示 
 
圖2.12 經由仿射轉換後的影像 
步驟三  
 圖2.12是經過影像大小標準化之後的人臉影像訓練組，但因不同亮度的光線照射對影像造
成的變化，導致每張影像呈現出不同亮度的灰階值必須將不同亮度值的訓練組影像做正規化，以
Ω5  -3.4813e-012 -1882.1 -1183.6 2101 -4344.6 -3315.5 9605.7 
Ω6  1.4893e-011 2179.6 -170.26 -642.63 -4436.8 -3598.7 714.39 
Ω7  -2.705e-011 -244.45 3393.8 1608.8 2233.7 -3047 -1016.3 
 
將步驟三所過濾出的資料庫影像，找到每張資料庫人臉影像所對應的權重向量 f 與待辨識
人臉影像的權重向量 
newf 取歐式距離，找出最小的歐式距離判定出人臉的身分。 
    
圖2.15 人臉辨識結果 
3.結論 
 本論文的實驗是研究人臉偵測與辨識，運用膚色區域分割搜尋位置，再以膚色範圍長寬比
定位出正確的人臉位置．再以 PCA 方法建立出一套有效的人臉參數資料庫，對定位出的人臉影像
作縮放與影像定位，算出人臉權重向量的比對辨識出人臉身分，在 Webcam 所拍攝的影像下 
，人臉偵測與辨識率可大到９成左右． 
 以下為幾種非理想情況造成本實驗在人臉偵測與辨識上的錯誤． 
1. 光線不足 2. 人臉角度 3. 擷取照片清晰度 4. 衣著 5. 臉部表情 
 
如果在人臉的偵測上能再多加入一些更有效率的辨識，那將可以增加人臉的擷取率與人臉 
辨識率．但如果要用於即時便便是系統上，最主要解決方法還是如何有效使用較小影像畫素，來
增加辨識的成功率．本實驗雖然說可以有效處理人臉偵測的問題，但人臉辨識部分因為影像縮放
失真與人臉特徵資料庫建立都是值得研究的問題．因此只要能有效解決人臉影像，因畫素太小造
成辨識不佳的問題，將來很有可能發展出即時人臉辨識的監視系統，更可能出現具有多人身分辨
識能力的機器人． 
4. 參考文獻 
 
[1] 辛正和，『建構以高取率特徵為基礎的人臉偵測系統』，逢甲大學資訊工程學系碩士班碩士
論文，民國94年7月 
[2] 林煌山，國立中央大學資訊工程研究所碩士論文利用膚色及區域極小值作人 
    臉特徵是否遮蔽之偵測判斷Detection of Facial Occlusions by Skin-Color  
    based and Local-Minimum based Feature Extractor，指導教授:范國清教授，民 
    國92年6月。 
[3] 鄭凱方，國立中央大學資訊工程研究所碩士論文人臉可辨識度計算用於監控 
