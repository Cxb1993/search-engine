第一章 計畫摘要 
處理大量資料的能力是在許多領域裡相當基本的。從資料探勘、自然語言分析、地震 
資料分析、人工智慧到計算物理、化學、生物科學，都需要這樣的能力。然而到目前 
為止，這樣的分析與模擬都僅限於在一些高效能計算中心中，才有可能被有效率的實 
現；這些計算中心使用了大量的分散式系統，運用數百台機器及高速的網路設備串接， 
獲得較高的資料處理能力。然而，這種系統的建置與維護的高成本使得這種運算的資 
源沒辦法讓每一個研究學者或科學家頻繁的使用，迫使他們得在自己的低效能的機器 
或叢集上進行研究與資料的分析，甚至花費幾天到幾個星期在等待上。 
這些在計算中心才能被實現的問題通常不是受限於I/O 就是受限於運算能力，所以沒 
有辦法有效的在個人電腦上單單一顆CPU 搭配傳統的硬碟來執行。然而，因為一些最 
近個人電腦硬體技術上的進步，本計畫希望透過高效能的繪圖晶片與固態硬碟來解決 
這個問題，以下我們分別簡介這兩者的演進。 
從2003 年開始，在高效能運算的領域裡，運用繪圖晶片（GPU）來加速計算，一直是 
非常熱門的話題。從早期運用3D 渲染函式庫到現在有標準的平行運算開發框架，繪圖 
晶片運算的技術可以說是一日千里。許多原本需要耗費數天甚至是數個月的複雜計 
算，透過繪圖晶片的幫忙，在短短的幾秒到幾分鐘內就產生結果。然而，到目前為止， 
要實際運用繪圖晶片的運算能力，開發一個能在繪圖晶片上運行的應用並不是那麼容 
易，不是每一個研究學者都有能力去發展的。 
另外，高速的儲存裝置也從2007 年開始萌芽，運用高速的快閃記憶體取代傳統機械式 
硬碟，稱為固態硬碟（Solid-state Drive，SSD），大幅度的提升I/O 的輸出輸入效率， 
從以前每秒50~60MB 的讀取速度一舉提升到每秒160~170MB。而在2008 年時，SSD 硬 
碟價格滑落，開始漸漸的普及到一般消費者，所以在未來幾年內，SSD 硬碟將有機會取 
代傳統機械式硬碟，成為下一世代個人電腦上儲存裝置的標準。 
應因繪圖晶片效能的提升及高速運算的需求，以及高速儲存裝置的興起，所以本計畫 
希望能運用消費者市場中標準的硬體元件，建置一套低成本的高效能運算叢集，並開 
發此運算叢集上之軟體系統，提供簡單的且專為資料分析設計之語言介面，方便科學 
家或各個領域的研究學者，運用繪圖晶片上的運算能力及高速的I/O 系統，在極短的 
時間內完成他們的資料分析或處理，達到高效能及簡化軟體開發的目標，而不需要了 
解底層繪圖晶片的架構與高速 I/O 系統的設計。 
 
第二章 研究計畫內容 
以下我們先介紹本計畫的幾個背景，分別是視覺運算，高速I/O 裝置，以及大量資料處理。
近年來，因為遊戲對繪圖晶片（GPU）性能的要求持續成長，繪圖晶片的運算速度愈來愈
快，尤其是在某些特定的領域上已經大幅度的超越一般處理器（CPU）的運算效能，所以
從2003 年開始，許多的研究學者，開始將一些非繪圖相關的運算，移植到繪圖晶片上執行，
而獲得了非常多倍效能的成長。而在今年全球最大高階繪圖晶片廠商NVIDIA 也舉辦首屆
的NVISION 研討會NVISION08，希望透過NVISION，告訴全世界：視覺運算的時代來了！ 
 
 
 
 
執行緒，然後讓執行緒之間彼此互相合作完成任務。這與一般現在在講「多執行緒」是完
全不同的。 
 
所以從2003 年開始，研究學者開始在繪圖晶片上實作一些平行的計算，運用3D 繪圖的函
式庫（因為這是當時唯一能跟繪圖晶片溝通的管道），如OpenGL 或DirectX，將一個演算
法轉換為3D 渲染的問題，然後搭配GLSL或HLSL 這樣的語言，在頂點著色器（Vertex 
Shader）及像素著色器（PixelShader）上執行，最後將結果寫入貼圖，再利用OpenGL 或
DirectX 的API 下載回來。雖然這樣能夠達到一定的效能提升，但是開發上卻十分不直覺，
而且因為是架構於3D 渲染的計算模型之上，所以有許多設計上的限制，因此當時並沒有
被廣泛的採用。 
但是在2006 年時，隨著軟硬體的技術進步，運用GPU 來進行大量運算開始變的可行。當
時，全世界兩大顯示晶片製造商NVIDIA 及ATI 都慢慢的意識到，利用GPU 進行運算的
市場是非常可觀，所以他們不約而同的，將他們下一世代的GPU 晶片，設計的更為一般性，
讓GPU 不再只是一個專為3D 渲染設計的硬體，而是個非常一般性的高效能運算單元。接
著，搭配上軟體開發工具，讓開發者能用他們較為熟悉的語言，來撰寫GPU 上的程式。所
以在當時，NVIDIA 推出了CUDA[10]，ATI 則推出了CTM 來因應GPU 上開發的需求[1]；以
NVIDIA 的CUDA 為例，開發者可以用他們熟悉的C 語言，來撰寫在GPU 上執行的應用
程式，加速了整個GPU 運算軟體開發的效率。ATI 在2007 年及AMD 
合併後，AMD/ATI 雖然捨棄了CTM，但也接著推出了下一版的GPU 框架，稱為AMD 
Stream[12]，同樣也是提供了類似C 語言的開發環境，稱為Brook+[13]，讓開發者能更容易上
手，運用AMD/ATI 的GPU 晶片上進行運算。 
 
所以本計畫希望結合這些高速的I/O 裝置以及繪圖晶片的運算能力，設計一個高效能低成
本的資料處理叢集系統，同時提供友善的使用者介面，使用者不用了解背後複雜的系統設
計，也不需要了解如何在繪圖晶片上撰寫程式，更不需要自行管理這些可觀的計算及儲存
資源，只要使用簡單專為資料處理設計的語言，給定相對應的資料，系統就能快速的將資
料處理完成。 
 
第三章 研究方法 
軟體系統架構 
 
 
本計畫欲開發的資料處理系統架構圖如上所示。從底層看上來，包含了Generic Data 
Processing Library，Dynamic Code Compilation Framework，GPU Data Processing Library，
GPU Runtime以及GPU Cluster Runtime，我們將先分項簡單說明如下： 
軟體的成熟度卻還不及NVIDIA，這也是為什麼到目前為止，絕大多數繪圖晶片平行化的應
用都還是基於NVIDIA 的解決方案。故本計畫將會進行進一步的評估，選擇一個最適合的
平行運算平台 
 
硬體系統架構 
前面提到因為視覺運算以及高速I/O 裝置的興起，我們可以利用一些個人電腦消費者市場
裡有的元件，建置高效能的資料處理平台。以下我們將說明我們預計運用那些硬體元件搭
配，在單一系統上，盡可能運用SSD 硬碟的提高I/O 的讀寫速度，配合高效能的繪圖晶片
顯示卡來加速大量資料處理。 
繪圖晶片／顯示卡的部份，我們預計將採用新一代的NVIDIA GTX 295 或是ATI 4870X2，
主要原因在於： 
1. NVIDIA GTX 295/ATI 4870X2 是消費者顯示卡市場中記憶體容量最大（2GB）的，可以
在同一時間處理更大的資料量。 
2. NVIDIA GTX 295/ATI 4870X2 都提供了兩顆繪圖晶片的設計，透過在NVIDIA CUDA 以
及AMDStream 上非同步執行與非同步記憶體拷貝的設計，同一時間我們可以執行6 筆資料
的搬移及運算，達到Pipeline 的效果，提高資料處理的效率。 
3. NVIDIA GTX 295/ATI 4870X2 都提供了在繪圖晶片上雙精度的浮點運算功能，這在
NVIDIA 前一代的顯示卡上是不存在的，且雙精度浮點運算在某些資料分析中是必需的。 
4. NVIDIA GTX 295 改善了非連續記憶體存取的效能，對於平行但非連續的資料結構會有
較高的讀寫效能。 
5. NVIDIA GTX 295 兩個核心共提供了480 個串流處理器；而ATI 4870X2 兩個核心則提
供了1600個串流處理器（但因架構上的差異其實不直接代表效能的產出）。大量的串流處
理器有助於處理大量資料時，資料流所導致的程式分支。 
6. NVIDIA GTX295 使用了512bit GDDR3 的記憶體，ATI 4870X2 使用了256bit GDDR5 
的記憶體，使得繪圖晶片到顯示卡上的記憶體頻寬皆突破200GB/s，有助於在MapReduce 的
架構下，暫存資料的存取。而在高速I/O 的部份，為了能將繪圖晶片的運算效能發揮到極
致，我們希望能將傳統上資料處理 
的瓶頸---硬碟的效能，利用日漸普及的高效能SSD 硬碟及磁碟陣列卡（RAID Card），從
50~60MB/s 一舉提升到2.4GB/s。但是，要在單一系統內產生這麼高的硬碟讀寫效能是有相
當難度的，其中最重要的，莫過於硬體元件的選擇與系統環境的設定。我們參考了許多國
內外知名網站的SSD RAID實測，發現把SSD 硬碟組成磁碟陣列最大的問題不在於SSD 的
效能，而在於磁碟陣列卡的處理器速度。 
例如在中，原作者使用Mtron 16G SSD 來做實驗，Mtron 16G SSD 單顆硬碟的效能就高達
120MB/s，若使用RAID0 模式將2 顆SSD 硬碟串接起來時，可以高達240MB/s；但是當原
作者將5 顆SSD 硬碟串接起來時，發現在他所使用磁碟陣列卡上（Areca ACR-1220）只能
達到386MB/s，最後找出問題在於磁碟陣列卡上的I/O 處理器效能不足；接著他換成較高等
級的磁碟陣列卡（Acreca ACR-1231）時跑RAID0 模式時，5 顆SSD 硬碟就如預期的完整
的提供了600MB/s 的效能。然而，當原作者希望再把極限往上推進，使用9 顆SSD 硬碟時，
又一次被I/O 處理器的效能所限制，最後原作者只能得到接近830MB/s 的讀取效能。 
所以從他的實驗中我們知道了在建置高效能SSD 硬碟陣列時，磁碟陣列卡上處理器效能的
重要性；我們在本計畫當中，選用了較高效能的磁碟陣列卡，來滿足我們高速I/O 的需求。
我們不使用傳統在伺服器市場中常見的，使用非常昂貴的SAN（Storage Area Network）[29]
來建置高速的I/O 環境，主要的考量在於可取得性及系統成本。我們希望運用消費者市場
System Design: 
We move the compute-sensitive parts of 3-DES architecture to GPU to speed up 
whole performance.  
CPU Intel® Core™2 Quad Processor Q6600 (2.4GHz, quad-core) 
Motherboard ASUS P5E-VM-DO-BP, Intel® X38 Chipset 
RAM Transcend 2G DDR-800 
GPU NVIDIA 9800GT 521MB (ASUS OEM) 
HDD WD 320G w/ 8MB buffer 
     Hardware configuration 
 
Experimental results:  
DES and 3-DES performance successfully improve about more than six times in 
GPU than in CPU when the file size is larger than 512M bytes. 
 
 
 
 
 
 
 
 
 
 
 
Implementation of a GPU Based Main Memory Database 
Implement several common functions of data base on GPU to improve the performance of data 
base operations. 
1. Support select,  insert, delete, update and  the  other operations of database.  
2. Store entire data base on GPU memory by using 2-D array as data structure to avoid the 
transmission overhead. 
3. Support key-value pair sorting  by modifying  the sorting function of CUDPP library. 
4. Support aggregated functions  for  eachdata group. 
 
的技術，也是未來高效能運算的趨勢之一，透過本計畫我們獲得最新的開發經驗，期勉未
來配合NVIDIA 或AMD 一起推廣平行運算平台。 
低成本之分散式資料處理系統本計畫欲實作之分散式資料處理系統軟體，在未來將提供給
各大資料處理中心或有需要之研究中心使用，可以自行購置低成本的硬體元件進行大規模
的運算，讓他們可以隨時隨地調用大量的運算及I/O 效能，在極短的時間內完成數據的分
析，提升研究的水平，而不需要自行建置大型的分散式系統，亦不需求助於國內各大計算
中心，為了分析一筆資料還得經過一層又一層的申請及核覆，提升研究的效率。 
 
 
目前本計畫在論文的產出方面，成果如下: 
國際期刊論文： 
1. Yue-Shan Chang & Ruey-Kai Sheu & Shyan-Ming Yuan &Jyn-Jie Hsu “ Scaling     
  database performance on GPUs ” Information Systems Frontiers A Journal of Research   
  and Innovation © Springer Science+Business Media, LLC 2011 
  10.1007/s10796-011-9322-0 
 
 
國際會議論文： 
1. Hsiu-Pang Yeh & Yue-Shan Chang & Chia-Feng Lin & Shyan-Ming Yuan “Accelerating    
  3-DES performance using GPU” CyberC 2011 
2. Chun-Chieh Chiu, Guo-Heng Luo & Shyan-Ming Yuan. A Decision Tree Using CUDA GPUs.  
  In Proceedings of Information Integration and Web-based Applications & Services   
  (iiWAS2011),ISBN 978-1-4503-0784-0, Vietnam, 5-7 December, 2011. 
 
國內會議論文： 
1.邱俊傑 & 黃聖凱 “基於圖形顯示卡之高效能 K-means 分群” 
  2011 Symposium on Digital Life Technologies 
“An Offline Browsing System for Mobile Devices” 及 ”A Cross--‐platform P2P Blog 
System Based on Pebble”。 
本次會議的特色為在會議期間同時進行由 @WAS 主辦的 Web 應用競賽 故在
聽論文及演講之於亦可觀看競賽作為的展示，這種作法應可作為未來承辦會議之
參考。 
 
         



      
        



         
          


         

       
     
        

 

 

 
         


        
        
        

 
          
 

       
           
        


       
        
           

 


         
       

 
          
          
        
       
        
      
         
  
 
      
    
         
 


 
     
         
         
        
      

      
       
        
          
           

 
         
        
          
         
        

 
         



      

 
  


         
 
       
          

  


 
          
     






 
 

         
        

     


          
          



        

 
  
          
    
          
        
        


        
         


         
         
         
         
     
    
         

         
        
       
         

 
         
         
          

         
        
          


       
        
 








         
  
     

         

 
         

      

        
            

 
           


          

        
          
         

         

         
         
       

           
        
         

 
        
     

      

 
         
        

 
        

       


     

          
        
     

 
       
   

 
       

          
     
       

 



 
 


      

98 年度專題研究計畫研究成果彙整表 
計畫主持人：袁賢銘 計畫編號：98-2221-E-009-074-MY2 
計畫名稱：基於圖形處理器之鉅量資料分析系統 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 2 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 1 1 100%  
研究報告/技術報告 0 0 100%  
研討會論文 2 2 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 2 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
