 
 
  2
中文摘要 
本計畫旨在探討非線性控制器及轉軸角/速度估測器的內藏式永磁同步電
動機驅動系統的研製，並實際應用在洗衣機。計畫中首先介紹內藏式永磁同步電
動機之結構、原理及數學模式，其次說明轉軸角/速度估測方法，經由偵測電動
機的端電壓及相電流，計算延伸型磁通鏈，以估測內藏式永磁同步電動機的轉軸
角度與速度。該估測法則具有計算簡單及與電動機的機械參數無關的特色。接
著，提出非線性速度控制器，係採用適應性輸入-輸出回授線性化技巧，改善內
藏式永磁同步電動機的控速性能，達到快速的暫態響應、良好的干擾拒斥性及精
確的速度追蹤能力。 
本計畫將內藏式永磁同步電動機應用在洗衣機驅動系統，使用德州儀器公
司所生產的 TMS320LF2407 數位訊號處理器，達行轉軸角/速度估測、空間向量
脈波寬度調變及速度控制器等計算，因此硬體電路甚為簡單。相關實測結果，說
明所提方法的正確性及可行性。 
 
 
關鍵詞：內藏式永磁同步電動機、轉軸角度估測器、非線性控制器、數位訊號處
理器、洗衣機驅動系統。 
 
 
  4
目錄 
中文摘要........................................................................................................................2 
英文摘要........................................................................................................................3 
一、前言........................................................................................................................6 
二、研究目的................................................................................................................7 
三、文獻回顧................................................................................................................8 
四、研究方法................................................................................................................9 
4.1 內藏式永磁同步電動機簡介.........................................................................9 
4.1.1 結構及特性..........................................................................................9 
4.1.2 數學模式............................................................................................12 
4.2 轉軸角度估測...............................................................................................17 
4.2.1 簡介....................................................................................................17 
4.2.2 轉軸角度估測原理.............................................................................18 
4.2.3 轉軸角度估測器設計.........................................................................26 
4.3 控制器設計...................................................................................................31 
4.3.1 簡介....................................................................................................32 
4.3.1 控制器設計........................................................................................32 
4.3.2 外加負載估測器設計........................................................................34 
4.3.3 輸入-輸出回授線性化.......................................................................37 
4.3.4 適應性步階回歸控制理論................................................................40 
4.4 驅動系統.......................................................................................................45 
4.4.1 簡介.....................................................................................................45 
4.4.2 空間向量脈波寬度調變策略.............................................................46 
4.4.3 無轉軸偵測元件驅動系統介紹........................................................58 
4.5 系統設計及硬體製作...................................................................................60 
4.5.1 簡介.....................................................................................................60 
4.5.2 洗衣機簡介........................................................................................60 
4.5.2.1 洗衣機結構.............................................................................61 
4.5.2.2 洗衣機驅動系統.....................................................................62 
4.5.3 硬體電路製作....................................................................................63 
 
 
  6
一、前言 
近年來，在工業界或家庭中均已朝向自動化發展。而自動化設備的主要動力
來源可分為內燃機與電動機兩種。其中，內燃機系統須以石油作為其輸入能量，
在石油儲存量逐年下降的今日，其價格已逐日高漲，且石油會污染環境，造成全
球化溫室效應，因此各國已逐漸減少內燃機的應用而發展替代方案。反觀電動
機，其主要的動力源來自於電力，電力是一種乾淨、取得容易、無污染、效率高，
十分符合環保需求的能源[1]，故目前高科技產業與自動化工業均採用電動機作
為其主要動力來源。 
電動機主要可分為直流電動機與交流電動機兩大類，直流電動機具有數學模
式簡單及控制器設計容易的優點，在 1980 年以前，被大量使用於自動化工業中。
但是，因為直流電動機具有碳刷及換向片，碳刷與換向片間的機械接觸，易產生
火花，故不適用於易爆的工作環境中。再者，碳刷有其壽命限制，需定期更換，
形成維護上的問題，使得直流機在工業上的應用日益減少，並逐漸被交流電動機
所取代[2]-[3]。 
交流電動機具有轉子的慣量小、起動性能好、易散熱、體積小及免維護等優
點。但數學模型為高度耦合、多變數以及非線性。交流電動機需要高性能的微處
理器來實現數位化驅動及控制。近幾年來，伴隨著電力電子、微電子元件的進步、
控制理論的發展以及微處理器或數位訊號處理器(digital signal processor, DSP)的
進步[4]-[7]，使得交流電動機的控制性能已超越直流電動機，並廣泛地應用於各
種工業產品上。交流電動機主要包含同步電動機及感應電動機。而同步電動機又
可分為永磁同步電動機和同步磁阻電動機兩種。感應電動機雖然構造簡單、價格
便宜，但其定子和轉子均有線圈會產生一次及二次銅損，效率較低；在高性能驅
動控制方面，必須即時估算轉子滑差，控制相當困難。而同步磁阻電動機平均轉
矩小，脈動轉矩大，運轉時噪音大，較難應用於需要高精密控制和要求靜音的場
所[8]。永磁同步電動機因轉子為永久磁鐵，不需繞組故在相同功率下，體積比
感應電動機小，轉動慣性亦較感應機更小，啟動性能佳，在相同的負載下，響應
較快。此外，永磁同步電動機不需激磁電流，無轉子損失，效率高、散熱佳。配
合磁性材料的進步及價格的降低，使得永磁同步電動機已被廣泛地應用於各種工
業產品上，例如：壓縮機、電梯、電動車等[9]-[14]。 
永磁同步電動機根據其轉子之永久磁鐵的安置方式，基本上可分為三種型
式：磁鐵安裝於轉子表面的附著式、磁鐵嵌入於轉子表面的嵌入式及磁鐵安裝於
轉子內部的內藏式。其中，表面附著式及嵌入式，永久磁鐵安裝於轉子表面，由
於幾何結構對稱，d 軸電感等於 q 軸電感，故無磁阻轉矩。另外，為了避免轉子
表面磁性材料在高速時產生飛脫，此種電動機只能應用於中、低速範圍。而內藏
式永磁同步電動機的永久磁鐵是埋入於轉子內部，構造堅固，可以承受高轉速所
產生的離心力，應用於高轉速的場合。此外，內藏式 d 軸電感不等於 q 軸電感，
具有凸極效果，因此可產生磁阻轉矩，使得輸出轉矩增加。目前工業界最常使用
 
 
  8
件內藏式永磁同步電動機應用在洗衣機。過去的文獻並未討論此一應用[31]-[43]，
本計畫的研究成果可供相關人員的參考。 
 
三、文獻回顧 
永磁同步電動機配合數位信號處理器之發展應用，在國外已有許多相關的文獻
發表，其研究方向大致可分為下列幾項： 
(1)磁性材料的開發與其應用在電動機的設計 
在永磁同步電動機本體的設計方面，由於其轉子為永久磁鐵，因磁性材料的價
格降低，使得永磁同步電動機已逐漸被工業界接受，目前最為普遍使用的磁性材料
為釹鐵硼(Nd-Fe-B)[22]，但此材料已達到最大的能量密度，若要得到更高的能量密
度則必須尋找新的磁性元件，Saito 研究新的鈷鋯錋(Co-Zr-B)磁性材料的特性，並
與其它稀土類磁鐵作性能比較[23]。Kioumarsi 等提出一種內藏式永磁同步電動機的
最佳化設計，在轉子適當的位置上鑿孔，並結合有限元素分析，以減少脈動轉矩[24]。 
(2)控制策略 
 1972 年德國 Blaaske 等提出向量控制理論之磁場導向控制法(field oriented 
control, FOC) [25]。此理論可應用於同步機與感應機之控制上，主要是藉由座標轉
換，將三相交流電動機系統轉換至兩軸交、直流座標系統中，使其如同直流馬達般，
將磁場及電樞電流分開獨立控制。精確地控制三相交流電動機的轉矩輸出。將永磁
同步電動機非線性動態模式先經線性化處理使其成為線性動態模式後，許多線性系
統的控制方法即可使用。 
但電動機在線性化過程中，仍需要精確的電動機參數。而精確的參數量測不
易，實際上參數易受到操作點及環境干擾而變動，當需要較精密控制或外在條件不
斷變化時，無法保證其控制性能維持在所需的範圍內。因此，近來也有針對此提出
非線性控制理論應用於永磁同步電動機的研究。如 Kim 等人成功地將適應性輸入-
輸出回授線性化技巧應用至無刷直流電動機上[26]，Baik 等人提出以限界層積分滑
動模式控制結合輸入-輸出回饋線性化技巧應用於永磁同步電動機，以減少滑動模
式控制之顫動問題及提升系統的強健性[27]，Zhou 等將適應性步階回歸控制
(adaptive backstepping control)應用至表面附著式永磁同步電動機[28]。Rahman 等將
適應性步階回歸控制推廣至內藏式永磁同步電動機之速度控制上[29]。Shi 等人更將
適應性步階回歸控制，加上轉軸角度估測及最大轉矩控制，應用在內藏式永磁同步
電動機之速度及位置控制上[30]。 
 
(3)無轉軸偵測元件(sensorless)驅動系統的設計 
由於轉軸角度偵測元件價格昂貴，易受雜訊影響，且結構上較脆弱，因此為了
降低永磁同步電動機驅動系統的成本，以及提高其可靠度，轉軸角度的估測在近年
來已有許多學者專家們投入研究。這些技術可以分為：採用電流斜率法[31]-[32]，
如 Shi 等人推導出內藏式永磁同步電動機之電流斜率與轉子位置的關係，在開關導
 
 
  10
synchronous motor, SPMSM)之構造示意圖。使用環氧黏著劑(epoxy adhesive)將永久
磁石黏貼在轉子外部的表面，這種排列可提高氣隙磁通密度，但機械強健性較差，
而轉子的鐵心可為實心或矽鋼疊片製成；另一類為嵌入式永磁同步電動機如圖
1(b)，係將永久磁石嵌入在轉子表面之凹槽內，此種放置方式較表面附著式有較佳
的機械強健性。表面附著式和嵌入式的設計及製造上都較簡易，只要將標準的矽鋼
疊片略加修改即可使用。另外，由於其幾何結構為完全對稱，d 軸與 q 軸的電感值
相同，因此沒有磁阻轉矩，而空氣隙均勻分佈，反電勢亦呈現均勻的正弦波，使得
數學模式相當簡單，也具有良好的動態性能[9]。但由於空氣隙較長，利用定子的 d
軸電流達到弱磁的效果較不顯著，不適合操作在弱磁控制區域。此外，為了避免磁
性材料在高速時因離心力過大產生磁鐵飛脫的顧慮，此種電動機通常操作在定轉矩
區域內。 
不同於表面附著式和嵌入式，圖 1(c)為內藏式永磁同步電動機之構造示意圖。
雖然，目前永久磁鐵排列的可能幾何形狀有很多種，但圖 1(c)所示為這種電動機的
一個典型結構，這種幾何形狀的差異使內藏式永磁同步電動機具有下列特性：更好
的機械強健性，使得永久磁鐵不易飛脫，可適用於高速範圍；由於幾何結構不對稱，
空氣隙非均勻分佈，d 軸上的有效氣隙大於 q 軸上的有效氣隙，具有明顯的凸極效
果。一般而言，其 q 軸電感大於 d 軸電感，因此，適當地控制磁阻轉矩，可使輸出
轉矩增加；另外，由於轉子構造的空氣隙較短，利用定子的 d 軸電流分量達到弱磁
的效果較顯著，可操作在定轉矩及定功率區域。 
 
 
 
 
  12
 
(c) 
圖 1 永磁式同步電動機之構造： 
(a) 表面附著式；(b) 嵌入式；(c) 內藏式。 
 
4.1.2 數學模式 
為了設計控制器和分析電動機的動態特性，需要了解完整的數學模型，此節
將推導內藏式永磁同步電動機靜止 a-b-c 軸之數學模型，為了推導上的方便且不
失一般性，可作下列的假設：反電動勢為正弦波，忽略磁飽和現象，輸入電壓為
三相平衡，忽略渦流及磁滯損失。在上述假設條件下，圖 2 為內藏式永磁同步電
動機等效電路，其 a-b-c 軸的定子相電壓方程式可表示為[44]-[45]： 
0 0
0 0
0 0
as s a as
bs s b bs
cs s c cs
v r i
dv r i
dt
v r i
λ
λ
λ
⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥= +⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦
 (1) 
式中： 
 
 
  14
( )
( )
0 0
0 0
0 0
2 2cos 2 cos(2 ) cos(2 )
2 3 2 3
2 2cos(2 ) cos(2 ) cos 2
2 3 3 2
2cos(2 )
2 3 2
as s a
bs s b
cs s c
A A
ls A B re B re B re
A A
B re ls A B re B re
A A
B re
v r i
v r i
v r i
L LL L L L L
L Ld L L L L L
dt
L LL L
π πθ θ θ
π πθ θ θ
πθ
⎡ ⎤ ⎡ ⎤ ⎡ ⎤⎢ ⎥ ⎢ ⎥ ⎢ ⎥= +⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦ ⎣ ⎦
+ − − − − − − +
− − − + − + − −
− − + − − ( ) 2cos 2 cos(2 )
3
cos
2cos( )
3
2cos( )
3
a
b
c
B re ls A B re
re
m re
re
i
i
i
L L L
d
dt
πθ θ
θ
πλ θ
πθ
⎡ ⎤⎢ ⎥ ⎡ ⎤⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎣ ⎦⎢ ⎥+ − −⎢ ⎥⎣ ⎦
⎡ ⎤⎢ ⎥⎢ ⎥⎢ ⎥+ −⎢ ⎥⎢ ⎥⎢ ⎥+⎣ ⎦
  (9) 
由(9)式可知，其數學模型為非線性且變數之間互相耦合，因此在分析及設計
控制器時甚為困難。故一般採用向量控制的座標轉換技巧，此座標轉換為一非線
性的轉換，可將 a-b-c 軸的數學模型映射至 d-q 軸座標系統中，其中 q 軸為交軸、
d 軸為直軸，利用此方法即可將(9)式中的變數解耦合，並將其轉換為非時變系
統，有利於簡化數學模式與方便控制器的設計。圖 3 所示為內藏式永磁同步電動
機的數學模型在 a-b-c 軸與 d-q 軸之間的座標轉換向量關係示意圖，其座標轉換
關係如下： 
d dq
abc
q
a
b
c
f
T
f
f
f
f
⎡ ⎤⎢ ⎥⎡ ⎤ = ⎢ ⎥⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎢ ⎥⎣ ⎦
 (10) 
式中： 
af 、 fb、 fc：定子參考座標上 a-b-c 軸電壓、電流或磁通鏈 
df 、 fq：同步旋轉參考座標上 d-q 軸電壓、電流或磁通鏈 
dq
abcT ：a-b-c 軸轉換至 d-q 軸之轉換矩陣 
在(10)式中之 dqabcT 可定義如下： 
2 2cos cos( ) cos( )
2 3 3
2 23 sin sin( ) sin( )
3 3
re re re
dq
abc
re re re
T
π πθ θ θ
π πθ θ θ
⎡ ⎤− +⎢ ⎥= ⎢ ⎥⎢ ⎥− − − − +⎢ ⎥⎣ ⎦
 (11) 
 
 
  16
d
d s d d re q q
div r i L L i
dt
ω−= +  (13) 
q
q s q q re d d re m
di
v r i L L i
dt
ω ω λ= + + +  (14) 
其中： 
mdlsd LLL +=  (15) 
mqlsq LLL +=  (16) 
3 ( )
2md A B
L L L= −  (17) 
3 ( )
2mq A B
L L L= +  (18) 
式中： 
di ：定子 d 軸電流 
qi ：定子 q 軸電流 
dv ：定子 d 軸電壓 
qv ：定子 q 軸電壓 
Ld：定子 d 軸電感 
Lq：定子 q 軸電感 
reω ：電動機轉軸電機速度 
Lmd：定子與轉子間 d 軸等效互感 
Lmq：定子與轉子間 q 軸等效互感 
由(15)-(18)式可知，本計畫所選用的電動機其 d 軸電感小於 q 軸電感，故採用
0BL > 的定義，而電動機的轉矩方程式可表示為： 
3 ( )
2
o
e m q d q d q
PT i L L i iλ⎡ ⎤= + −⎣ ⎦  (19) 
電動機轉速動態方程式為： 
1 ( )rm e L m rm
m
d T T B
dt J
ω ω= − −  (20) 
rm
rm
d
d t
θ ω=  (21) 
re o rmPθ θ=  (22) 
re o rmPω ω=  (23) 
式中： 
Te：電動機轉矩 
 
 
  18
角度，但在現實的世界裡，轉矩角不容易被精確地計算出來，一般採用查表法取
代複雜的計算，故當電動機變速運轉或加載時，轉矩角會伴隨著電動機轉矩的變
動而改變，影響了轉軸角度估測的準確度，因此，傳統定子磁通估測法則一般較
常應用至直接轉矩控制上，而對於需要角度進行 d-q 軸座標轉換的磁場導向控制
較少使用定子磁通估測法則。本計畫主要的貢獻之一，即針對上述缺點加以改
良，類似於磁通估算法的基本原理，但不需要轉矩角的補償機制，即可經由計算
延伸型磁通而得到的角度正好等於轉軸角度，可避免轉軸角度估測值受到轉矩角
影響，可應用至直接轉矩控制或磁場導向控制上。本計畫所提出的三相延伸型磁
通模型為一般型式，可推廣於所有永磁同步電動機，包含表面附著式永磁同步電
動機、內藏式永磁同步電動機和同步磁阻電動機。而高頻電壓注入法，需要注入
某一特定頻率的高頻載波訊號使電動機產生高頻載波電流，再由複雜的信號處理
技巧將轉軸角度誤差訊號由載波電流擷取出來，此轉軸角度誤差訊號尚需透過帶
通濾波器及轉軸角度估測器以便估測出轉軸角度，與高頻電壓注入法不同之處在
於，本計畫所提出的方法，計算簡單，實現容易，不需外加高頻的載波信號及複
雜的訊號處理技術，不需計算電流斜率，及不限定開關元件的波寬調變切換策
略，可適用於電動機定轉矩區及定功率區的轉軸角度估測及其閉迴路驅動應用。
由於內藏式永磁同步電動機的非線性狀態觀測器設計，目前仍是未解的問題，為
了簡化問題，其非線性的可觀測性，不在本計畫的探討範圍之內。 
 
4.2.2 轉軸角度估測原理 
 
由於先前的文獻所提出的反電動勢法僅適用於表面附著式永磁同步電動機
[48]-[50]，然而內藏式永磁同步電動機結構的不對稱性，使得此方法無法直接應
用至內藏式永磁同步電動機上，最近 Chen 等提出延伸型反電勢模型[38]，然而
這個模型在使用上仍需額外的假設條件，即 0reω = ，方能估測出延伸型反電勢，
且磁通估算法亦無法適用至此模型上。有鑑於此，本計畫提出三相延伸型磁通估
測法則，在此法則下，原本用於表面附著式永磁同步電動機之磁通估算法，將可
直接應用至內藏式永磁同步電動機，且不需任何額外的假設條件，其基本精神，
係直接量測電動機之電流及電壓，計算出三相延伸型磁通鏈，再經由座標轉換得
到α β− 軸延伸型磁通鏈，取其反正切函數便可獲得轉軸角度資訊，以下將說明
轉軸角度估測原理。 
由(9)式中可得到 asv 的定子電壓方程式： 
( ) ( )( )2
1 2 1 22 2
2 3 2 3
as s a m re ls A B re a
A B re b A B re c
d dv r i cos L L L cos( ) i
dt dt
d dL L cos( ) i L L cos( ) i
dt dt
λ θ θ
θ π θ π
= + + + −
⎛ ⎞ ⎛ ⎞⎛ ⎞ ⎛ ⎞+ − − − + − − +⎜ ⎟ ⎜ ⎟⎜ ⎟ ⎜ ⎟⎝ ⎠ ⎝ ⎠⎝ ⎠ ⎝ ⎠
 (24) 
將(24)式經過適當地處理，可得： 
 
 
  20
( )
( )
( )
3 0 0 cos20 0
3 20 0 0 0 cos
2 3
0 0 3 20 0 cos2 3
ls A B
re
as s a a
bs s b ls A B b m re
cs s c c
ls A B re
L L L
v r i i
d dv r i L L L i
dt dt
v r i i
L L L
d
d
θ
πλ θ
πθ
⎡ ⎤⎡ ⎤+ + ⎢ ⎥⎢ ⎥ ⎢ ⎥⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤⎢ ⎥ ⎢ ⎥⎛ ⎞⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎢ ⎥= + + + + −⎢ ⎥⎜ ⎟⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎝ ⎠⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎢ ⎥⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎢ ⎥⎛ ⎞⎢ ⎥+ + +⎢ ⎥⎜ ⎟⎢ ⎥⎣ ⎦ ⎝ ⎠⎣ ⎦
+
1 3 1 2 1 2cos(2 ) cos(2 ) cos(2 )
2 2 2 3 2 3
1 3 2 cos(2 )1 1 22 22 cos(2 ) cos(2 )
2 2 3
3 sin(2 )
1 3 2 cos(21 1 2 2 22 cos(2 ) cos(2 )
2 2 3
A B B re A B re A B re
A B B re
A B re A B re
B re
A B B r
A B re A B re
L L L L L L L
L L L
L L L L
t
L
L L L
L L L L
π πθ θ θ
θ πθ θ
θ
θπθ θ
− − − − − − − − +
− − +− + − − +
+
− − +− + − − − )
3 sin(2 )
a
b
c
e
B re
i
i
i
L θ
⎡ ⎤⎢ ⎥⎢ ⎥⎢ ⎥⎢ ⎥ ⎡ ⎤⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥⎣ ⎦⎢ ⎥⎢ ⎥⎢ ⎥⎢ ⎥⎢ ⎥−⎣ ⎦
 (30) 
上式為(9)式的等效轉換，且不需任何的假設條件，但轉軸角度 reθ 仍然不易由上
式單獨擷取出來。故將(30)式重新整理，可得到以三相延伸型反電勢所表示之內
藏式永磁同步電動機三相定子電壓等效方程式為： 
 
0 0 0 0
0 0 0 0
0 0 0 0
as s a q a ae
bs s b q b be
cs s c q c ce
v r i L i e
dv r i L i e
dt
v r i L i e
⎡ ⎤⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥= + +⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦⎣ ⎦
 (31) 
式中： 
  aee 、 bee 、 cee ：定子三相延伸型反電勢 
其中三相延伸型反電勢可由(30)和(31)式整理為： 
1 3 1 2cos(2 ) cos(2 )
2 2 2 3
1 2cos(2 ) cos
2 3
A B B re a A B re b
ae
A B re c m re
L L L i L L i
de
dt
L L i
πθ θ
πθ λ θ
⎧ ⎫⎛ ⎞ ⎛ ⎞− − − + − − −⎜ ⎟ ⎜ ⎟⎪ ⎪⎪⎝ ⎠ ⎝ ⎠ ⎪= ⎨ ⎬⎛ ⎞⎪ ⎪+ − − + +⎜ ⎟⎪ ⎪⎝ ⎠⎩ ⎭
 (32) 
1 1 32 cos(2 ) 2 cos(2 ) 3 sin(2 )
2 2 2
1 2 2cos(2 ) cos
2 3 3
A B re a A B B re B re b
be
A B re c m re
L L i L L L L i
de
dt
L L i
θ θ θ
πθ λ θ π
⎧ ⎫⎛ ⎞ ⎛ ⎞− + + − − + +⎜ ⎟ ⎜ ⎟⎪ ⎪⎪⎝ ⎠ ⎝ ⎠ ⎪= ⎨ ⎬⎛ ⎞ ⎛ ⎞⎪ ⎪+ − − + + −⎜ ⎟ ⎜ ⎟⎪ ⎪⎝ ⎠ ⎝ ⎠⎩ ⎭
 (33) 
1 1 22 cos(2 ) cos(2 )
2 2 3
1 3 22 cos(2 ) 3 sin(2 ) cos
2 2 3
A B re a A B re b
ce
A B B re B re c m re
L L i L L i
de
dt
L L L L i
πθ θ
θ θ λ θ π
⎧ ⎫⎛ ⎞ ⎛ ⎞− + + − − −⎜ ⎟ ⎜ ⎟⎪ ⎪⎪⎝ ⎠ ⎝ ⎠ ⎪= ⎨ ⎬⎛ ⎞ ⎛ ⎞⎪ ⎪+ − − + − + +⎜ ⎟ ⎜ ⎟⎪ ⎪⎝ ⎠ ⎝ ⎠⎩ ⎭
 (34) 
 
 
  22
過下列的程序可計算出三相延伸型磁通鏈： 
0 0 0 0
0 0 0 0
0 0 0 0
ae a s a q a
be b s b q b
ce c s c q c
v r i L i
v r i dt L i
v r i L i
λ
λ
λ
⎡ ⎤⎛ ⎞⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤⎢ ⎥⎜ ⎟⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥= − − ⎢ ⎥⎜ ⎟⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎜ ⎟ ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦⎝ ⎠ ⎣ ⎦
∫  (40) 
由(40)可知，在實際運用中，經由定子電流、定子電壓、定子電阻和 q 軸電
感，便可透過積分運算計算出三相延伸型磁通鏈，然而為了簡化問題，本計畫並
未考慮 q 軸電感隨著負載變化的情形，並留作未來探討的研究方向之一，而 aeλ 、
beλ 及 ceλ 係在三相定子座標下完成計算，經由三軸轉二軸之座標轉換可得α β−
軸延伸型磁通鏈，與三相延伸型磁通鏈的關係如圖 4 所示，並可看出 eαλ 等於
aeλ ，而 eβλ 與 eαλ 相差 90 度電機角。此時 eαλ 、 eβλ 與 aeλ 、 beλ 、 ceλ 的座標轉換關
係式為： 
2 1 1
3 3 3
3 30
3 3
ae
e
be
e
ce
α
β
λλ λλ λ
⎡ ⎤ ⎡ ⎤− −⎢ ⎥⎡ ⎤ ⎢ ⎥⎢ ⎥=⎢ ⎥ ⎢ ⎥⎢ ⎥⎣ ⎦ ⎢ ⎥− ⎣ ⎦⎢ ⎥⎣ ⎦
 (41) 
式中： 
  eαλ 、 eβλ ：α - β 軸延伸型磁通鏈 
將(36)、(37)及(38)三式，透過(41)式及(34)式運行座標轉換後，可得到α β−
軸延伸型磁通鏈為： 
( ){ }
( ){ }
cos( ) 3 cos( ) 3 sin( )( )
cos( )
e re re a re b c B m
re d q d m
i i i L
L L i
αλ θ θ θ λ
θ λ
= − + − + +
= − +
 (42) 
( ){ }
( ){ }
sin( ) 3 cos( ) 3 sin( )( )
sin( )
e re re a re b c B m
re d q d m
i i i L
L L i
βλ θ θ θ λ
θ λ
= − + − + +
= − +
 (43) 
上述延伸型磁通的物理意義可由(1)式中的定子磁通與(39)式中等式右邊第二項
及第三項看出，即延伸型磁通為定子磁通減去部份與 q 軸電感有關的磁通分量如
圖 5 所示，即(39)式中等式右邊第二項，換句話說，定子磁通經由座標轉換後，
可表示為 d 軸和 q 軸等效磁通相加，而延伸型磁通為定子磁通投影至 d 軸上的等
 
 
  24
下： 
re sθ θ δ= −  (46) 
式中： 
  δ ：轉矩角 
  sθ ：定子磁通角度 
由上式可知，傳統定子磁通估測法，需補償轉矩角才可得到轉軸角度，而轉
矩角與電動機轉矩的關係為： 
3 1sin ( ) sin 2
2 2
o s
e m q s q d
d q
PT L L L
L L
λ λ δ λ δ⎡ ⎤= − −⎢ ⎥⎣ ⎦  (47) 
式中： 
  sλ ：定子磁通 
故定子磁通與轉軸角度在α β− 軸上之空間關係如圖 7(a)所示。然而由
(42)-(44)式可得到在α β− 軸上之轉子延伸型磁通鏈為： 
( )
2 2 1ˆ tan ( / )
3 cos( ) 3 sin( )( )
e e e e
re a re b c B m rei i i L
α β β αλ λ λ λ λ
θ θ λ θ
−= + ∠
= − + − + + ∠  (48) 
式中： λˆ ：轉子延伸型磁通鏈 
由(48)式可知，當內藏式永磁同步電動機於同步運轉時，轉軸角度等於轉子
延伸型磁通鏈旋轉角度，如圖 7(b)所示為轉子延伸型磁通鏈與轉軸角度在α β−
軸上之空間關係。由上述說明知本計畫提出一極為簡便的無轉軸角/速度元件之
實現，即不需計算轉矩角，只需估算延伸型磁通鏈，便可得到轉軸角度及轉軸速
度，取代原本由編碼器回授的轉軸速度，完成無轉軸角/速度偵測元件之驅動系
統的實現。 
 
 
 
  26
4.2.3 轉軸角度估測器設計 
內藏式永磁同步電動機轉軸角度的估測原理，已在前節做了推導及說明。本
節則說明如何實際應用於內藏式永磁同步電動機之轉軸角度估測器。本計畫的轉
軸角度估測，係經由計算延伸型磁通鏈進而估測出轉軸角度。因此，如何精確地
計算延伸型磁通鏈變得十分重要。由於本計畫所採用的內藏式永磁同步電動機為
Y 接設計，中性點不易獲得，因此 asv 、 bsv 、 csv 不易藉由電壓偵測元件取得，而
定子線對線電壓是可以被量測的，故前節所介紹的估測原理，需做適當的整理，
以推導出線對線延伸型磁通鏈與轉軸角度的關係。由(31)式可得到定子線對線電
壓方程式為： 
( ) ( )
ab as bs
a b
s a b q ae be
v v v
d i i
r i i L e e
dt
= −
−= − + + −  (49) 
( ) ( )
bc bs cs
b c
s b c q be ce
v v v
d i i
r i i L e e
dt
= −
−= − + + −  (50) 
( ) ( )
ca cs as
c a
s c a q ce ae
v v v
d i i
r i i L e e
dt
= −
−= − + + −  (51) 
式中： 
  abv 、 bcv 、 cav ：定子線對線電壓 
由(32)-(34)式可得知，線對線延伸型反電勢為： 
( )3 3 23 cos 2 3 cos 2
2 2 3
2cos cos
3
ab ae be
B B re a B B re b
m re re
e e e
L L i L L i
d
dt
θ θ π
λ θ θ π
= −
⎧ ⎫⎛ ⎞⎛ ⎞ ⎛ ⎞− − + + +⎪ ⎪⎜ ⎟ ⎜ ⎟⎜ ⎟⎝ ⎠ ⎝ ⎠⎪ ⎝ ⎠ ⎪= ⎨ ⎬⎛ ⎞⎛ ⎞⎪ ⎪+ − −⎜ ⎟⎜ ⎟⎪ ⎪⎝ ⎠⎝ ⎠⎩ ⎭
 (52) 
3 2 3 23 cos 2 3 cos 2
2 3 2 3
2 2cos cos
3 3
bc be ce
B B re b B B re c
m re re
e e e
L L i L L i
d
dt
θ π θ π
λ θ π θ π
= −
⎧ ⎫⎛ ⎞ ⎛ ⎞⎛ ⎞ ⎛ ⎞− − + + + −⎪ ⎪⎜ ⎟ ⎜ ⎟⎜ ⎟ ⎜ ⎟⎝ ⎠ ⎝ ⎠⎪⎝ ⎠ ⎝ ⎠ ⎪= ⎨ ⎬⎛ ⎞⎛ ⎞ ⎛ ⎞⎪ ⎪+ − − +⎜ ⎟ ⎜ ⎟⎜ ⎟⎪ ⎪⎝ ⎠ ⎝ ⎠⎝ ⎠⎩ ⎭
 (53) 
 
 
  28
子電流、線對線電壓、定子電阻和 q 軸電感，便可計算出線對線延伸型磁通鏈，
在實作中，為了減少計算量，可將 q 軸電感設為定值，並以數位化形式將(59)-(61)
式改寫為： 
( ) ( )( ) ( ) ( ) ( ) ( 1) ( ) ( )ab ab s a b ab q a bk T v k r i k i k k L i k i kλ λ= − − + − − −⎡ ⎤⎣ ⎦  (62) 
( ) ( )( ) ( ) ( ) ( ) ( 1) ( ) ( )bc bc s b c bc q b ck T v k r i k i k k L i k i kλ λ= − − + − − −⎡ ⎤⎣ ⎦  (63) 
( ) ( )( ) ( ) ( ) ( ) ( 1) ( ) ( )ca ca s c a ca q c ak T v k r i k i k k L i k i kλ λ= − − + − − −⎡ ⎤⎣ ⎦  (64) 
式中： 
  ( )abv k 、 ( )bcv k 、 ( )cav k ：第 k 次量取定子線對線電壓 
  ( )ai k 、 ( )bi k 、 ( )ci k ：第 k 次量取定子三相電流 
  ( )ab kλ 、 ( )bc kλ 、 ( )ca kλ ：第 k 次計算出定子線對線延伸型磁通鏈 
  ( 1)ab kλ − 、 ( 1)bc kλ − 、 ( 1)ca kλ − ：第 k-1 次計算出定子線對線延伸型磁通鏈 
  T ：取樣週期時間 
故 ( )ab kλ 、 ( )bc kλ 及 ( )ca kλ 係在三相定子座標下完成計算，經由座標轉換可
得與(42)和(43)式相同之α β− 軸延伸型磁通鏈，與線對線延伸型磁通鏈的關係如
圖 8 所示。此時 ( )e kαλ 、 ( )e kβλ 與 ( )ab kλ 、 ( )bc kλ 、 ( )ca kλ 的座標轉換關係式為： 
1 1 ( )0( ) 3 3 ( )
1 2 1( )
( )
3 3 3 3 3 3
ab
e
bc
e
ca
k
k
k
k
k
α
β
λλ λλ λ
⎡ ⎤ ⎡ ⎤−⎢ ⎥⎡ ⎤ ⎢ ⎥= ⎢ ⎥⎢ ⎥ ⎢ ⎥⎢ ⎥⎣ ⎦ − − ⎢ ⎥⎣ ⎦⎢ ⎥⎣ ⎦
 (65) 
式中： 
  ( )e kαλ 、 ( )e kβλ ：第 k 次計算出α β− 軸延伸型磁通鏈 
接著，對 ( )e kαλ 和 ( )e kβλ 取反正切函數( 1tan− )即可求得內藏式永磁同步電動
機的轉軸電機角度估測值為： 
1 ( )ˆ ( ) tan
( )
e
re
e
k
k
k
β
α
λθ λ
− ⎛ ⎞= ⎜ ⎟⎝ ⎠  (66) 
式中： 
  ˆ ( )re kθ ：第 k 次轉軸電機角度估測值 
由(66)式不難得到電動機之轉軸電機角速度為： 
ˆ ( )ˆ ( ) rere
s
kk
T
θω Δ=  (67) 
式中： 
 
 
  30
, , ,a b ab bci i v v
, ,ab bc caλ λ λ
,e eα βλ λ
ˆ ,reθ ˆrmω
讀取電流和電壓
使用(62)-(64)式計算
使用(65)式計算
使用(66),(67),
(23)式計算
轉軸角度估算結束
轉軸角度估算開始
 
圖 9 轉軸角度估算流程圖。 
 
 
  32
4.3.1 簡介 
在工業界電動機的驅動系統中，最常採用的是比例-積分控器，因其具有簡單
且易實現的特性。但由於比例-積分控制器的參數為固定，而交流電動機的參數與
負載則會隨著運轉狀態而變動，且交流電動機的數學模式為非線性模式，因此，使
用固定的控制器參數無法同時獲得良好的暫態、穩態與加載特性。因此為了有效提
升系統的性能，並具有快速的暫態響應與良好的干擾拒斥能力，非線性控制提供一
個很好的解決方法。由於非線性控制法則具有較佳的設計彈性及更多的控制變數，
可依照系統的非線性特性，設計合適的控制器，提升電動機控速系統的性能，近來
已有各種非線性控制理論應用於內藏式永磁同步電動機[27]-[30]。其中狀態回授線
性化及輸入-輸出回授線性化，已成功地應用於永磁同步電動機的控制，改善系統
的暫態響應及穩態特性。但必需以電動機參數或負載估測值將系統之非線性項除
去，而使系統線性化。若參數或負載估測值不夠精確，則無法得到預期的效果[28]。 
上述之不確定性因素，包括參數變化及外加干擾，在設計控制器時需納入考
慮。為改善上述缺失，本計畫利用適應性控制理論來設計控制器如圖 11 所示，針
對上述不確定因素，修正控制器的參數，使輸出的控制量對系統達到最佳的效果。
本計畫根據輸入-輸出回授線性化之參數不確定性，對其不確定因素設計適應性步
階回歸控制器作補償，並將轉速、轉矩和 d 軸電流一並納入控制器設計裡，以調適
出內藏式永磁同步電動機所需的 d-q 軸電壓命令，並以李阿普諾夫定理證明系統穩
定，再由巴巴勒特定理(Barbalat’s lemma)進一步證明整個系統為全域漸近穩定。 
內藏式永磁
同步電動機
*
bv
*
av
*
cv
變頻器
與
驅動電路
U
V
W
rˆeθ
轉軸角度/
速度估測器
ai
bi
ai
bi
bv
av
rˆeθ
ˆrmω
di
qi
ˆrmω
干擾轉矩
估測器
適應性輸入-輸出
回授線性化控制器 *qv
*
dv
ˆrmωdiqidˆT
*
di
*
rmω
dq/abc 軸
dq/abc 軸
洗衣機
 
圖 11 非線性控制設計示意圖。 
 
4.3.1 控制器設計 
首先重新整理電動機數學方程式，將(13)、(14)、(20)式內藏式永磁同步電動
機的 d-q 軸電流方程式及轉速動態方程式合併整理，可得系統的動態方程式並以
矩陣型式表示如下： 
 
 
  34
4.3.2 外加負載估測器設計 
為了改善上述參數匹配問題，本計畫使用干擾估測法則對未知干擾進行參數
估測，將(19)-(20)式重新整理可得： 
3 ( )
2
o
e m q d q d
rm
mo mo rm
q
d
PT i L L
d
i
J B T
dt
i
ω ω
λ⎡ ⎤= + −⎣
+ +
⎦
=
 (74) 
式中： 
( ) ( )rmd m mo m mo rm L
dT J J B B T
dt
ω ω= − + − +  (75) 
其中： 
m m moJ J JΔ = −  
m m moB B BΔ = −  
下標“ o ”：為已知固定值。 
dT ：為外加干擾(disturbance torque) 
    由於本計畫所使用的干擾量估測器屬於線性估測器的一種，為了方便設計，
假設未知干擾量 dT 在每個取樣時間內的變化量為零[56]-[57]，可表示為： 
0dT =  (76) 
(76)式可表示為 dT 的動態方程式，接著將(74)-(75)式代入(20)式可得： 
3 3 ( )
2
o q m o d q d q rm mo d
mo mo
r
m
m
o
P i P L L i i B T
J J J
ω λ ω+ − − −=  (77) 
由(76)和(77)式，可整理為二階的動態方程式： 
x Fx Gu d= + +  (78) 
y Cx=  (79) 
式中： 
[ ] [ ]T Ta b rm dx x x Tω= = ，   0 Tqu i⎡ ⎤= ⎣ ⎦ ， rmy ω=  
11 12
21 22
1
0 0
mo
mo mo
B
F F
J JF
F F
⎡ ⎤− −⎡ ⎤ ⎢ ⎥= =⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎢ ⎥⎣ ⎦
，
3
2
   0
o m
a
mo
b
P
G
JG
G
λ⎡ ⎤⎡ ⎤ ⎢ ⎥= =⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎢ ⎥⎣ ⎦
 
1
2
3 ( )
2
            0
o d q d q
mo
P L L i i
d
d J
d
−⎡ ⎤⎡ ⎤ ⎢ ⎥= =⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎢ ⎥⎣ ⎦
， [ ]1 0C =   
 
 
  36
1 1
3 3 ( )1ˆ ˆ
2
o m q o d q d qmo
d rm d rm
mo mo mo
P i P L L i iBT L T dt L
J J J
λω ω+ −⎛ ⎞= + − +⎜ ⎟⎝ ⎠∫  (88) 
其估測誤差為 ˆb be x x= − ，則估測器的誤差動態可表示如下： 
1
22 1 12( )
mo
Le F L F e e
J
= − =  (89) 
    本計畫所使用外加干擾負載估測器的動態特性由估測器的增益值 1L 來決
定，該增益值須為負值，即 1 0L < ，如此便可在有外加負載干擾的變動下，使估
測誤差逐漸收斂，如圖 12 所示。 
 
rmω mo
mo
B
J
1L
qi
di
3
2
o m
mo
P
J
λ
3 ( )
2
o d q
mo
P L L
J
−×
1L
+
− −
1
s
++ dˆT
1
moJ
+
 
圖 12 干擾轉矩估測器。 
 
將(77)式代入(68)式重新整理可得考慮外加干擾負載之系統動態方程式為： 
1/   0 0
 0 1/ 0
 0 1/ 0
ˆ3 3 ( )
2
q q rms d
d d
d d
s qrm d d rm m
q d q q d
q q q
morm
q m d q d q rm mo d
mo mo mo
o
o o
o o
L ir i
L L
i L
r iL i
i v
P
P P
P P
L v T
L L L
J
i L L i i B T
J J J
ω
ω ω λ
ω λ ω
⎡ ⎤− +⎢ ⎥⎢ ⎥⎡ ⎤ ⎡ ⎤⎡ ⎤ ⎡ ⎤⎢ ⎥⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥⎢ ⎥= − − − + + + Δ⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥⎢ ⎥⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥−⎢ ⎥ ⎣ ⎦⎣ ⎦ ⎣ ⎦⎣ ⎦ + −⎢ ⎥− −⎢ ⎥⎣ ⎦



 (90) 
上式可改寫為： 
1 2 3
ˆ ( ) ( ) ( ) ( )d q dx f x g x v g x v g x T= + + + Δ  (91) 
其中： 
ˆ
d d dT T TΔ = − ， [ ]3 0 0 1/ Tmog J= −  
 
 
  38
1
ˆ1
ˆ ˆ ˆ
( ) ˆ( ) ( ( )) ( )
k
fk k
f f f
L h x
L h x L L h x f x
x
−
− ∂= = ∂
 
2
ˆ1 2
ˆ ˆ ˆ
( ) ˆ( ) ( ( )) ( )
k
fk k
f f f
L h x
L h x L L h x f x
x
−
− − ∂= = ∂
 
#  (95) 
ˆ2
ˆ ˆ ˆ
( ) ˆ( ) ( ( )) ( )f
f f f
L h x
L h x L L h x f x
x
∂= = ∂
 
ˆ
( ) ˆ( ) ( )
f
h xL h x f x
x
∂= ∂
 
式中的 ˆ ( )fL h x 稱為李導數(Lie derivative) [58]。 
同理， ˆ ( )g fL L h x 為： 
ˆ
ˆ
( )
( ) ( )fg f
L h x
L L h x g x
x
∂= ∂  (96) 
首先，對 1 1( )Z h x= 微分直到輸入控制量出現，找出輸入控制量跟輸出變數之間
的關係： 
ˆ1 1 1 1 2 1 3 1( ) ( ) ( ) ( )d qf g g g dvZ L h x L h x L h x L Tv h x= + + + Δ  (97) 
式中： 
3 1
1( )g
mo
L h x
J
= −  (98) 
1 1( ) 0gL h x =  (99) 
2 1( ) 0gL h x =  (100) 
此時 1 1gL h 、 2 1gL h 對所有狀態 x 都為零，由(97)式可知，輸入與輸出變數之間無相
對應的關係，故再對 1z 微分一次可得： 
2
ˆ ˆ ˆ ˆ1 2 1 1 1 2 1 3 1( ) ( ) ( ) ( )g d g q g df f f fZ Z L h x L L h x v L L h x v L L h x T= = + + + Δ   (101) 
式中： 
2
ˆ 1
3 ( )
( )
2
3 3 ( )
( )
2
ˆ3 3 (
2
( )
)
( )
o d q q o q q rms d
mo d d
o m o d q d s qo rm d d o rm m
mo q q q
q m o d q d qmo rm mo d
mo mo mo o
f
m
P L L i P L ir i
J L L
P P L L i r iP L i P
J L L L
Pi P L L i iB B T
J
h
J J J
L x
ω
λ ω ω λ
λ ω
− − +
+ −+ − − −
− −
=
+ − −
 (102) 
 
 
  40
1u
2u
1
1 1 2 1
1 2
   
            0
g f g f
g
L L h L L h
L h
−⎡ ⎤⎢ ⎥⎢ ⎥⎣ ⎦
 
圖 13 輸入控制量與輸出變數 *dv 、
*
qv 關係。 
 
4.3.4 適應性步階回歸控制理論 
上述的輸入-輸出回授線性化，常因參數無法正確得知而產生不確定量，導致
控制性的劣化，為解決上述問題，本計畫中以適應性步階回歸控制器來改善不確定
量的缺失，詳細說明如下。 
    在設計控制器時，可將參數不確定性及外加負載干擾一併納入考量，藉由李
阿普諾夫穩定度定理證明所設計的控制器能使系統穩定，並推導出輸出控制量與
適應律，最後再由巴巴勒特定理進一步證明整個系統為漸近穩定。 
    首先將(111)式代入(101)式及(106)式，則(91)式的系統動態方程式將因考慮參
數 dTΔ 、 2 1( )fL h xΔ 、 2 ( )fL h xΔ 等不確定的影響，得到系統的動態模型為： 
ˆ1 1 3 1( ) ( )g dfZ L h x L h x T= + Δ  (113) 
2 2
ˆ ˆ ˆ2 1 1 3 1 1( ) ( ) ( )g df f fZ L h x u L L h x T L h x= + + Δ + Δ  (114) 
ˆ ˆ3 2 2 2( ) ( )f fZ L h x u L h x= + + Δ  (115) 
接著為了方便運算重新定義變數為 
1 dd T= Δ  (116) 
2
2
1ˆ ( )fd L h x= Δ  (117) 
3 2ˆ ( )fd L h x= Δ  (118) 
將(116)-(118)式代回(113)-(115)式可重新得到系統動態模型為： 
 
 
  42
迴授常數。所定義之誤差動態方程式表示為： 
* *
1 1 2 3 1 1 1 1 3 1 1 2( ) ( )rm rm g ge z z L h x d k e L h x d eω ω= − = − − = − + +    (124) 
13 1
*
2 2 1 2
* 2
2 1 1 1 1 3 1ˆ ˆ
ˆ( )ˆ ( ) ( )grm gf fdL h xz d de z k e L h x u L L h xω −−= = + − − − −    (125) 
3 2 2 3ˆ
* *
3 ( )fd dz L h x u de i i− − −= = −   (126) 
式中 1 1 1ˆd d d= − ，接著選定李阿普諾夫函數，用以求得參數適應律及證明滿足李
阿普諾夫穩定度定理，其選定之李阿普諾夫函數V 為： 
2 2 2 2 2 2
1 2 3 1 2 3
1 2 3
1 1 1 1 1 1
2 2 2 2 2 2
V e e e d d dγ γ γ= + + + + +
    (127) 
其中， 2 2 2ˆd d d= − 、 3 3 3ˆd d d= − ， 1γ 、 2γ 、 3γ 為適應律之增益值，對李阿普
諾夫函數(127)式微分，可得： 
1 1 2 2 3 3
1 2 3
2
1 1 1 2 1 3 1 1
2
2 1 1 1 3 1 1 1 2
2 3 1 1
2 1 2
3 2 2 3ˆ
1
1 1 2 2 3 3
* 2
1ˆ
1 3 1ˆ
*
1 1 1
( ( ) )
[ ( ) ]
ˆ[ ( )
[
1[ ( ) ]
( )]
( ) ]
g
g
g
f
rm f
g f
d
e e e e e e
k e e e e L h x d
e k e k L h x d k e
e L h x d
e d d
e L h x u d d
V d d d d d d
L h x
u L L h x
i
γ γ γ
γ
ω −
+ + + + +
− + +
+ − + +
−
− − +
=
=
+
+ − − −
+ −
  




       


1 1 2 2 3 3
2 3
1 1d d d d dγ γ+ +
      
 (128) 
為了使(128)式滿足 0V ≤ ，可將輸入控制量命令 1u 、 2u 分別選擇為： 
2
1 1 1 2 2 1
1 2
*
1 3 1
2
1 3 1ˆ ˆ
ˆ(1 ) ( )
ˆ ˆ
( )
( ) ( )
rm g
gf f
k e k k e d
d d
u L h x
L h x L L h x
ω −= + − + +
− − −

 (129) 
32 3 3ˆ2
ˆ( )
f
dL h x k eu = − +−  (130) 
其中， 1 2 3, , 0k k k > 為閉迴路之迴授常數，將(129)式及(130)式取代(128)式中的
1u 、 2u ，重新整理可得： 
 
 
  44
判斷系統的穩態誤差是否趨近於零。為了探討此問題，尚須引用巴巴勒特定理[28]、
[60]來說明，首先需證明 1e 、 2e 、 3e 平方再積分之後仍為有界函數，故對(138)式積
分，可得： 
( )2 2 21 1 2 2 3 30 0( ) ( ) ( ) ( ) (0) ( )k e k e k e d V d V Vτ τ τ τ τ τ∞ ∞+ + = − = − ∞ <∞∫ ∫   (139) 
    上式證明 1e 、 2e 、 3e 平方再積分之後仍為有界函數，假設控制輸入量 1u 、 2u
為有界函數，則(124)-(126)式中的所有參數皆為有界函數，因此 1e 、 2e 、 3e 也為
有界函數，最後根據巴巴勒特定理可推導出： 
1lim ( ) 0t e t→∞ =  (140) 
2lim ( ) 0t e t→∞ =  (141) 
3lim ( ) 0t e t→∞ =  (142) 
如此證明了閉迴路系統為全域漸近穩定，即當時間趨近於無窮大時， 1e 、 2e 、
3e 皆會收斂至零，故在穩態時，不論是電動機的系統參數，或者外加負載干擾等不
確定因素，所設計的適應率(132)- (134)式，能即時的修正控制器的參數，使電動機
的速度將等於速度命令 *rmω ，並能確保整個系統為全域漸進穩定。 
非線性控制器計算 d-q 軸電壓命令方塊圖，如圖 14 所示。由適應性步階回
歸控制理論所設計之適應律(135)-(137)式計算後，得控制器參數 1ˆd 、 2dˆ 及 3dˆ ，
代入(129)及(130)式運算後得到輸入控制量命令 1u 、 2u ，再透過(111)式得到 d-q
軸電壓命令達到控速之目的。而其中 d-q 軸電壓命令如下所示： 
*
1 2
32 3 3ˆ
)
ˆ
(
( )
d
g
f
d
v L h x
L h x k e
=
− +−
 (143) 
*
*2 1ˆ
2
1 1 1 2 2
2 1
1
ˆ 11
*
3 1
2
1 3 1ˆ ˆ
1
( ) ( )
ˆ(1 ) ( )
ˆ ˆ
( )
( ) ( )
q
g f g df
rm g
gf f
v L L h
k e k k e d
dx L L h x vd
L h x
L h x L L h x
ω⎡ ⎤⎢ ⎥⎢ ⎥⎢ ⎥⎢ ⎥⎣ ⎦
+
−
− += + −− − −

 (144) 
 
 
  46
4.4.2 空間向量脈波寬度調變策略 
本計畫變頻器所採用的調變策略為空間向量脈波寬度調變，其優點為可使電
動機的電流有較小的諧波，並且比正弦脈波寬度調變有較高的電壓利用率[64]。
本計畫採用電壓源變頻器(voltage source inverter, VSI)，變頻器的輸入端為直流電
壓，經由空間向量脈波寬度調變策略送出高頻的開關切換訊號至絕緣閘雙極性電
晶體(insulated-gate bipolar transistor, IGBT)，在此切換頻率下，使變頻器輸出可
變頻的三相交流電源至電動機，產生所需要之旋轉磁場，如圖 15 所示。變頻器
共有三相，每相包括一對上臂及下臂功率開關，故三相共有三對功率開關，其上
臂為 A、B、C，而下臂為 A、B、C，送給上臂與下臂功率開關的開關切換信
號需為互補，且當訊號轉態時需加入一延遲時間，以防止上臂與下臂功率開關同
時導通，產生電源短路，而造成元件損壞。由於六個功率開關之切換狀態為“導
通”或“截止”的組合變化有八種，如表 1 所示，其中包含二個零電壓向量 ( )0 000V
和 ( )7 111V ，括弧內“1”表示所屬該相之上臂功率開關導通而下臂功率開關截止，
“0”表示所屬該相之上臂功率開關截止而下臂功率開關導通，當三對功率開關之
上臂同時導通或同時截止時，此時電動機處於浮接狀態(floating)，且與電源端隔
離，稱為自由飛輪期(free-wheeling period)，即電源端不輸出任何能源給電動機。
而其它六個非零電壓向量分別為 : ( )1 100V 、 ( )2 110V 、 ( )3 010V 、 ( )4 011V 、
( )5 001V 、 ( )6 101V ，則因不同的切換狀態，輸出的線對線電壓和相電壓亦不同。
以電壓向量 ( )1 100V 為例，由圖 15 可知，三個功率開關 A、B、C 導通，而另外
三個功率開關 A、B、C 截止，此時輸入端直流電壓與電動機各相間的電壓關係
如圖 16 所示。 
 
 
  48
表 1 各電壓向量之暫態電壓值 
 A  B  C  anV  bnV  cnV  abV  bcV  caV  
0 (000)V
 
0 0 0 0 0 0 0 0 0 
1(100)V  1 0 0 
2
3 dc
V  1
3 dc
V− 1
3 dc
V− dcV  0 dcV−
2 (110)V  1 1 0 
1
3 dc
V  1
3 dc
V  2
3 dc
V− 0 dcV  dcV−
3(010)V  0 1 0 
1
3 dc
V− 2
3 dc
V  1
3 dc
V− dcV−  dcV  0 
4 (011)V  0 1 1 
2
3 dc
V− 1
3 dc
V  1
3 dc
V  dcV−  0 dcV  
5 (001)V  0 0 1 
1
3 dc
V− 1
3 dc
V− 2
3 dc
V  0 dcV−  dcV  
6 (101)V  1 0 1 
1
3 dc
V  2
3 dc
V− 1
3 dc
V  dcV  dcV−  0 
7 (111)V  1 1 1 0 0 0 0 0 0 
 
 
表 2 各電壓向量在靜止座標α β− 軸之暫態電壓值 
 A  B  C  Vα  Vβ  
0V  0 0 0 0 0 
1V  1 0 0 
2
3 dc
V  0  
2V  1 1 0 
1
3 dc
V  1
3 dc
V
3V  0 1 0 
1
3 dc
V− 1
3 dc
V
4V  0 1 1 
2
3 dc
V− 0 
5V  0 0 1 
1
3 dc
V− 1
3 dc
V−
6V  1 0 1 
1
3 dc
V  
1
3 dc
V−
7V  1 1 1 0 0 
 
 
  50
2
YT V
T
3
XT V
T ( )1 100V
( )2 110V( )3 010V
( )4 011V
( )5 001V ( )6 101V
outV
( )0 000V ( )7 111V
reω
 
圖 17 向量空間示意圖。 
 
由於零電壓向量等於零，故可將區間 S3 中的(146)式化簡如下： 
1 2
1 20 60
X Y
out
X Y
T TV V V
T T
T TV V
T T
V Vα β
= +
= ∠ + ∠
= +
D D  (148) 
將(148)式重新整理，可得在區間 S3 的Vα 和Vβ 為： 
( )21 60
X Y
V cosV
V T T
T Tα
= +
D
 (149) 
( )2 60
Y
V sin
V T
Tβ
=
D
 (150) 
由圖 18 和表 2 可知，電壓向量 1V ~ 6V 的大小相等，重新整理(149)和(150)式
可得在區間 S3 的 XT 和 YT 為： 
1 1 3
X
T TT V V
V Vα β
= −  (151) 
2
2
3Y
TT V
V β
=  (152) 
 
 
  52
1 13
X
T TT V V
V Vα β
= +  (161) 
6
2
3Y
TT V
V β
= −  (162) 
綜合上述各區間之推導，每個區間 XT 和 YT 值皆可轉換為Vα 和Vβ 的線性組
合，又電壓向量 1V ~ 6V 的大小相等，如下所示： 
1 2 3 4 5 6
2
3 dc
V V V V V V V= = = = = =  (163) 
將(163)式代入(151)-(162)式，重新整理可得表 3，其中 X、Y、Z 可表示如下： 
3
dc
TX V
V β
=  (164) 
( )1 3 32 dcTY V VV α β= +  (165) 
( )1 3 32 dcTZ V VV α β= − +  (166) 
(164)-(166)式以矩陣表示： 
1 0
3 1 3
2 2
1 3
2 2
dc
X
VTY
VV
Z
β
α
⎡ ⎤⎢ ⎥⎡ ⎤ ⎢ ⎥ ⎡ ⎤⎢ ⎥ ⎢ ⎥= ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎣ ⎦⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎢ ⎥−⎢ ⎥⎣ ⎦
 (167) 
表 3 各區間 XT 及 YT 值計算 
區間 
時間 S3 S1 S5 S4 S6 S2 
XT  -Z Z X -X -Y Y 
YT  X Y -Y Z -Z -X 
由(145)式可知， anV 、 bnV 、 cnV 與Vα 、Vβ 的關係為： 
1 0
1 3
2 2
1 3
2 2
an
bn
cn
V
V
V
V
V
α
β
⎡ ⎤⎢ ⎥⎡ ⎤ ⎢ ⎥ ⎡ ⎤⎢ ⎥ ⎢ ⎥= − ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎣ ⎦⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎢ ⎥− −⎢ ⎥⎣ ⎦
 (168) 
由於(169)式不等於(168)式，因此修正過的參考電壓 1refV 、 2refV 、 3refV 與Vα、Vβ 的
 
 
  54
1S 5S 4S 6S 2S 3S 1S
anVcnVbnV
 
圖 20 anV 、 bnV 、 cnV 與各區間變化示意圖。 
 
當找出正確的區間後，利用表 3，可計算出 outV 中各個區間功率開關導通時
間 XT 與 YT 值，將其標么化後，可繪出在各區間中 XT 與 YT 的變化量如圖 21 所示，
由圖中可看出， XT 與 YT 隨各區間變化及參考電壓向量 outV 之旋轉而呈三角波變
化。由區間判別可找出 outV 所在的兩個相鄰電壓向量，再由 XT 與 YT 值可決定兩個
相鄰電壓向量的導通時間，由(146)可知需三個電壓向量來合成 outV ，因此需計算
三對功率開關在每周期T 裡所需的導通時間為何，方能配合表 1 合成出所需要的
三個電壓向量，在實現的過程中，需由 XT 與 YT 計算出 aont 、 bont 、 cont 。其中 XT 、
YT 、 ZT 與 aont 、 bont 、 cont 的關係如下： 
4 4
2
2
X Y Z
aon
X
bon aon
Y
con bon
T T T Tt
Tt t
Tt t
− −⎧ = =⎪⎪⎪ = +⎨⎪⎪ = +⎪⎩
 (172) 
將圖 21 中的 XT 與 YT 代入(172)式，可得到雙峰弦波電壓的圖形如圖 22 所示，由
圖中可看出 aon bon cont t t< < ，並由圖 20 中可看出在區間 S3 裡各相電壓的大小關係
為 an bn cnV V V> > ，這意謂著上臂功率開關 A 在區間 S3 中所需的導通時間需最長，
其次是上臂功率開關 B，而導通最短的是上臂功率開關 C，如圖 23 所示，將區
間 S3 中 aont 、 bont 、 cont 的值分別儲存至 CMPR1、CMPR2、CMPR3，並與數位訊
號處理器產生的三角波比較以輸出高準位訊號，重複上述方法，可整理出表 4，
其中 CMPR1、CMPR2、CMPR3 為數位訊號處理器中比較器的設定值。 
 
 
  56
區間
比較值 S3 S1 S5 S4 S6 S2 
CMPR1 aont  bont  cont  cont  bont  aont  
CMPR2 bont  aont  aont  bont  cont  cont  
CMPR3 cont  cont  bont  aont  aont  bont  
 
由表 4 和圖 22 可得 CMPR1、CMPR2、CMPR3 隨區間判斷與電機角變換之
設定值如圖 24 所示，由圖中可知 CMPR1、CMPR2、CMPR3 分別與圖 20 中 anV 、
bnV 、 cnV 相反，但經由三角波比較輸出高準位訊號如圖 25 所示，則在電動機端
可得到與圖 20 同相位之三相電壓波形。 
 
1S 5S 4S 6S 2S 3S 1S
 
圖 24 CMPR1、CMPR2 及 CMPR3 在各區間變化示意圖。 
 
 
  58
4.4.3 無轉軸偵測元件驅動系統介紹 
 
本計畫所使用的內藏式永磁同步電動機驅動系統如圖 26 所示，驅動系統可
分為硬體及軟體兩大部份組成。硬體部份包括：內藏式永磁同步電動機、電流感
測器、電壓感測器、類比/數位轉換器、驅動電路及變頻器等。軟體部份包括:座
標轉換、轉軸角度/速度估測、速度控制及空間向量脈波寬度調變等。 
由於本計畫所採用的電動機為 Y 接，並假設驅動系統為三相平衡，故只需量
測 ai 和 bi 便能計算出 ci 的電流值，同理，量測 abv 和 bcv 便可計算出 cav 。經由電流
和電壓感測電路取得電動機的 ai 、 bi 、 abv 、 bcv 的類比訊號，再由外部類比/數位
轉換器轉換為數位訊號送至數位訊號處理器。接著，以積分運算計算出線對線延
伸型磁通鏈，即可根據所提出的轉軸角度估測法則，對α β− 軸延伸型磁通鏈取
反正切函數，估測出轉軸角度。再根據 d 軸電流命令、轉速命令、d-q 軸電流、
轉軸角/速度估測值，便可經由速度控制器調節出所需的 d-q 軸電壓命令。最後，
將 d-q 軸電壓命令與所估測的轉軸角度，經由空間向量脈波寬度調變策略，計算
出各相的開關觸發信號，經由驅動級電路控制六個功率開關以產生各相所需的電
壓向量進而達成內藏式永磁同步電動機的閉迴路控制。本計畫採用的數位訊號處
理器為德州儀器(Texas Instruments)公司所生產，晶片型號為 TMS320LF2407 的
評估模組控制板(evaluation module board， EVM board)，相關的軟體程式包含：
系統初始規劃、記憶體空間配置、延伸型磁通鏈計算、轉軸角/速度估測法則運
算、速度及電流控制法則運算、d-q 軸與 a-b-c 軸之座標轉換計算、空間向量脈
波寬度調變等程式。 
 
 
  60
4.5 系統設計及硬體製作 
4.5.1 簡介 
本計畫所探討的無轉軸偵測元件永磁同步電動機的驅動系統實體圖，如圖 27
所示。此驅動系統主要可分為硬體與軟體兩大部份，圖中(A)為德州儀器公司所生
產 16 位元定點式數位訊號處理器，型號為 TMS320LF2407。硬體電路包含：過電
流保護電路，驅動電路、變頻器、回授及偵測電路、電源電路等。本章主要分為硬
體及軟體兩部分來做說明，首先介紹硬體電路，最後則說明數位訊號處理器及軟體
程式設計。 
 
圖 27 無轉軸偵測元件之內藏式同步電動機驅動系統實體圖。 
4.5.2 洗衣機簡介 
一般市售洗衣機依其構造及原理的不同，主要分成渦卷式、攪拌式、滾筒式等
三種類型，如圖 28 所示。其中渦卷式洗衣機是利用底部迴轉盤，渦卷水流，間歇
性的運轉帶動水流清洗衣物。其優點為洗衣容量大、構造簡單、輕量化、售價便宜；
缺點為容易打結且易傷衣物。攪拌式洗衣機係利用垂直軸的攪拌翼，間歇性攪拌衣
物，來達到洗衣效果。優點為不易打結且容量大，但具有構造複雜、噪音大等缺點。
滾筒式洗衣機利用滾筒的旋轉及凸助，帶動衣物從高處落下，衝擊水面，達到洗衣
的效果。具有洗衣不傷衣物、不打結、省水、低噪音，洗、脫、烘可一體設計等特
 
 
  62
洗衣槽之耦合關係，由從圖 30，知內藏式永磁同步電動機與洗衣槽之間使用一皮帶
作為傳動。而電動機與洗衣槽之間的速度比，經過實際量測後得到 15:1 的關係式，
意即電動機轉動十五圈則帶動洗衣槽旋轉一圈。從 15:1 的關係式可轉換電動機與洗
衣槽的轉速。在實作方面，本計畫中將洗衣機內原控制板拆除，並以自己所製作的
驅動系統及所撰寫的軟體程式來進行控制。 
滾筒
(洗衣槽)
凸助
內藏式永磁同步電動機
皮帶
 
圖 30 洗衣機結構圖。 
 
4.5.2.2 洗衣機驅動系統 
本計畫所採用的內藏式永磁同步電動機為台灣鑫鼎公司所生產，型號為
MEIWA130-750MS-ZK-L2，容量為 1 馬力，由廠商資料可得其規格表如表 5 所示，
而實體圖如圖 31 所示。 
 
 
表 5 內藏式永磁同步電動機規格表 
名稱 數值 
額定輸出功率 750 W 
額定轉矩 2.7 Nm 
額定轉速 2000 r/min 
額定電流 4.2 A 
輸入電壓 220 V~230 V  
最大轉矩 8.1 Nm 
最大轉速 3000 r/min 
最大電流 12.6 A 
 
 
 
  64
 
DCV
−
+
−
+
 
圖 32 功率元件模組等效電路圖。 
 
4.5.3.1.2 光耦合隔離電路 
本計畫採用惠普公司所生產的型號為 HCPL-3120 光耦合器，其規格如表 7
所示。此光耦合器專為驅動 IGBT 所設計，可將輸入觸發訊號與 IGBT 電路之間
隔離，故當故障發生時，不致損壞觸發訊號電路。切換速度最快可達到 2MHz，
並提供 2 安培的電流驅動能力，圖 33 所示為觸發訊號經由 HCPL-3120 光耦合器
驅動 IGBT。其中+15 伏特與-5 伏特直流電壓為驅動電源電路提供。 
表 7 HCPL-3120 光耦合器規格表。 
)on(inV  )off(inV  )on(FI  )peak(OI  )peak(IORMV  AT  
15~30 V -3~0.8 V 7~16 mA 2 A 630 V -40~100 oC
 
隔離
8
7
6
5
1
2
3
4
+15V
-5V
輸入觸發
信號
N/C
N/C
+
-
T1
W5
Ω20Ω330
IGBT
+HVDC
-HVDC
± 20V
3-PHASE
AC
圖 33 光耦合器驅動 IGBT 電路。 
 
 
 
  66
DSP 
CLKOUT
DSP PWM
74LS08
CLR1
CLK9
1D3
1Q 2
2D4
2Q 5
3D6
3Q 7
4D11
4Q 10
5D13
5Q 12
6D14
6Q 15
74S174
CLR14
UP5
DOWN4
LOAD11
CO 12
BO 13
A15
QA 3
B1
QB 2
C10
QC 6
D9
QD 7
74LS193
+5V
T1
T1
74LS04
T1'
CLR1
CLK9
1D3
1Q 2
2D4
2Q 5
3D6
3Q 7
4D11
4Q 10
5D13
5Q 12
6D14
6Q 15
74S174+5V
74LS08
3微秒 3微秒
 
圖 35 IGBT 觸發信號延遲電路。 
 
 
 
4.5.3.2 回授及偵測電路 
本計畫系統的回授偵測電路包括電壓、電流偵測電路及類比/數位轉換電
路，以下就各部份進行說明： 
 
4.5.3.2.1 電壓偵測電路 
本計畫系統電動機的激磁電壓需經轉換之後，才能使用類比/數位轉換電路
將偵測到的電壓值回授至數位信號處理系統，因此本計畫使用 LEM 公司生產的
電壓轉換器 LV25-P 來當作電壓偵測元件，量測電動機的三相電壓信號。其可提
供一次側高壓側與二次側低壓側的隔離，藉以保護訊號級電路，而一次側與二次
側之間的電壓比例可經由調整串聯於一次側及二次側的電阻，產生所需要的比
例，其相關規格及電路如表 8 及圖 36 所示。 
規格表可知，如欲量測的電壓範圍為正負 300 伏特，則需選擇一次側測量電
阻 R1 為 30k 歐姆，而本計畫所使用的類比/數位轉換電路中的類比輸入電壓範圍
為正負 10V，因此二次側測量電阻 RM 選擇 400 歐姆，以符合最大的使用範圍。
故當一次側電壓為正 300 伏特時，二次側將輸出正 10 伏特電壓；當一次側電壓
為負 300 伏特時，二次側將輸出負 10 伏特電壓。 
 
 
 
  68
4.5.3.2.3 類比/數位轉換電路 
電壓及電流偵測電路輸出均為類比電壓訊號，若要輸入至信號處理系統進行
處理時，需先將類比電壓訊號轉換為數位信號，才能進行程式運算，本計畫採用
16 位元的高速類比/數位轉換器 AD976A 作為轉換工具，其轉換時間僅需 5μs，
電路如圖 38 所示。主要功能為將電流及電壓偵測電路所得到的類比值轉換為數
位值，以提供數位訊號處理器作回授及相關運算處理。其轉換程序如下：當數位
信號處理器發出觸發信號要求 AD976A 進行轉換類比至數位信號時，由 BUSY 信
號可得知轉換完成與否，接著，經由 74LS09 告知數位信號處理器是否轉換完成，
當信號轉換完成後透過 74LS373 即可讀取到由 AD976A 轉換後的數位資料，以
便數位信號處理器作後續的處理。 
 
 
圖 38 類比/數位轉換電路圖。 
 
4.5.3.3 過電流保護電路 
本計畫所使用的用電流保護電路，如圖 39 所示，此電路主要功能為當故障
發生時，能立即將數位訊號處理器所產生的觸發 IGBT 訊號切斷，使得電動機瞬
間停止；使其能同時保護電源電路及驅動電路。基本動作原理為利用比較器比較
所假定的過流值與系統線路上實際的電流值，當線路上的實際電流大於所假定的
過流值時，過電流保護電路即送出一高電位訊號，將數位訊號處理器送至 IGBT
的訊號利用 74LS244 的特性加以切斷，如此便能達到上述所提之電路保護之目
的。 
 
 
  70
表 9 TMS320LF2407 數位訊號處理器規格表。 
中央處理器核心 C2XX 事件管理者模組 事件器 A 與 B
指令週期 33ns 比較器/脈波寬度調變 12/16 
雙重讀取記憶體 544 字元 看門狗計時器 1 個 
單一讀取記憶體 2k 外部記憶體介面 3個 
快閃記憶體 32k 類比/數位轉換時間 500ns 
支援電壓 3.3V 類比/數位通道 16 個 
串列週邊介面 8 bits 外部中斷 5 個 
串列傳輸介面 16 bits 捕捉單元/編碼器介面 6/4 
控制區域網路介面 1 個 啟動唯讀記憶體 2k 字元 
通用計時器 4 個 省電模式 3 種 
 
4.5.5 軟體程式設計 
本計畫中的軟體程式是以組合語言撰寫而成，程式可分為主程式及中斷服務程
式。主程式中主要進行系統功能規劃及設定，而中斷服務程式中主要為：轉軸角/
速度估算、閉迴路速度控制，及空間向量脈波寬度調變切換策略。相關設定及詳細
內容將說明如下： 
 
 
 
 
 
  72
4.5.5.2 中斷服務程式 
中斷服務程式主要執行：轉軸角/速度估測、速度估測濾波、速度控制器及
空間向量脈波寬度調變切換控制，如圖 42 所示。關於轉軸角/速度估測程式方面，
為先讀取電動機定子電流 ai 、 bi 及線對線電壓 abv 、 bcv 、 cav ，利用(62)-(64)式計
算出線對線延伸型磁通鏈 abλ 、 bcλ 、 caλ ，再透過圖 10 的流程解決積分漂移問題，
接著執行(65)式，可得到α β− 軸延伸型磁通鏈 eαλ 與 eβλ ，再執行(23)、(66)、(67)
式計算出轉軸電機角 rˆeθ 及轉軸機械角速度 ˆrmω ，其中(66)式取反正切函數( 1tan− )
在 90 度時會是無限大的解決方法即為第三章所提出之方法。速度控制器方面計
算為，將回授的狀態值，代入(88)式得到干擾負載估測值 dˆT ，且透過適應性輸入
-輸出回授線性化控制理論所設計之適應律(135)-(138)式後，再代入(143)、(144)
式計算出 *qv 、 *dv 值。空間向量脈波寬度調變切換策略：為決定 IGBT 切換狀態的
部分，主要功能為根據角度、區間判斷及 *qv 、 *dv 作計算，以決定 IGBT 的切換狀
態後，由數位訊號處理器的 PWM 輸出腳送出至 IGBT 驅動電路以驅動 IGBT，
本計畫設定空間向量脈波寬度調變切換的計算週期為 108 微秒，因此中斷服務程
式每 108 微秒即執行一次。 
 
 
 
  74
4.6 模擬及實測 
4.6.1 簡介 
本章中將說明本計畫所製作的內藏式永磁同步電動機閉迴路控制系統的電
腦模擬及實測結果。本計畫所使用的內藏式永磁同步電動機為台灣鑫鼎公司所生
產，型號為 MEIWA130-750MS-ZK-L2，輸出為 1 馬力，由廠商資料可得其規格
如表 10 所示。此外，本計畫利用德州儀器公司所生產的 TMS320LF2407 數位訊
號處理器將轉軸角度/速度、延伸型磁通鏈、控制器參數、電流、電壓及加載變
化等訊號擷取，然後由電腦儲存，最後經由個人電腦繪出，並與 MATLAB 的
Simulink 模擬軟體產生的模擬結果作一對照。 
 
4.6.2 電腦模擬 
本計畫的電腦模擬採用 Matlab R2008a 的套裝軟體及其內含的 Simulink，作
為速度控制系統的模擬工具。本計畫在 Simulink 中建立出內藏式永磁同步電動
機的 d-q 軸數學模型其相關參數，如表 10 所示；其中相關參數由廠商資料及實
驗所得。整個內藏式永磁同步電動機速度控制系統的模擬方塊圖如圖 43 所示。
方塊圖中包括：非線性控制器、空間向量脈波寬度調變及轉軸角/速度估測器、
內藏式永磁同步電動機動態模型等。以下分別針對圖 43 中的各個方塊作詳細說
明，其中實際取樣週期為 108 微秒。 
 
圖 43 電腦模擬之系統方塊圖。 
 
 
表 10 內藏式永磁同步電動機參數。 
 
 
  76
以下將針對各模擬及實測波形加以說明。 
圖 44(a)、(b)為電動機速度命令 500rpm 時，電動機的 ab 相間線電壓 abv 與 a 相
電流 ai 實測波形，圖中變頻器的切換週期為 108 微秒，且輸出電壓振幅為± 120
伏特。a 相電流峰值約為 0.65A。圖 45(a)(b)為轉速 500rpm 且加載 2N.m 時，電動
機模擬及實測之穩態 a 相電流波形，此時電流峰值約為 3.5A。 
圖 46(a)、(b)、(c)、(d)分別為電動機速度命令 500rpm 之模擬圖，用以驗證洗
衣機驅動系統使用轉軸角度估測法則與非線性控制理論的正確性及可行性，圖 46(a)
為實際電動機轉速與估測轉速比較圖，圖 46(b)為實際角度與估測角度模擬結果，
由圖中可知，在 500rpm 穩態下，電動機的角度估測值與實際值甚為接近，使得估
測轉速接近於實際轉速，由圖 46(c)、(d)可知延伸型磁通 αλ 和 βλ 均為正弦波且相位
差 90 度；此外磁通變化軌跡是以 αλ 為橫軸 βλ 為縱軸所繪出的軌跡，此軌跡為圓心
在原點的近似圓，且無飄移現象，說明本計畫所提出的角度估測法則在 500rpm 穩
態下，可準確地估測出α β− 軸的延伸型磁通。 
圖 47(a)、(b)、(c)、(d)、(e)、(f)分別為電動機速度命令 500rpm 之實測圖，圖
47(a)、(b)為實際電動機轉速與估測轉速比較圖及速度誤差響應圖，此時轉速從啟動
到穩態變動量約為 35rpm。由圖 47(c)、(d)中可知，在 500rpm 穩態下，角度估測值
與實際值之平均誤差約為電機角 3 至 4 度。換言之電動機轉軸機械角度平均誤差約
2 度，此角度誤差的產生，係因為電壓與電流偵測器的量測誤差、數位信號處理器
的量化誤差、類比/數位轉換器轉換時產生誤差及雜訊而導致。圖 47(e)、(f)為延伸
型磁通 αλ 和 βλ 及其磁通變化軌跡，在實測上數位訊號處理器內部有低通濾波器之
設計，截止頻率為 75HZ，故使得圖 47(e)延伸型磁通量測值為一平滑之正弦波。 
    圖 48(a)、(b)、(c)、(d)為速度命令進行± 500rpm 正反轉時之實測圖，由圖中知
在正反轉下，本計畫所提的估測方法及非線性控制器，能有效地進行電動機轉速估
測及速度追隨；在轉速由正值變為負值時可看出，此時仍可估測出正確的電動機轉
軸位置，且估測值與實際值相當接近。圖 49(a)(b)(c)為速度命令 1000rpm 正反轉時，
所提方法和比例-積分控制的響應比較，以下各實測皆以延伸型磁通進行轉軸角度
的估測。圖 49(a)為所提方法的轉速命令及電動機轉速實測波形，由圖中可看出其
轉速響應接近轉速命令，表示所提方法有良好地速度追蹤能力。圖 49(b)為比例-積
分控制時的轉速命令及電動機轉速實測波形，由圖中可明顯看出，比例-積分控制
因轉速命令瞬間改變而產生了明顯地速度追蹤穩態誤差。圖 49(c)為所提方法的轉
速命令與電動機轉速間的誤差值，其穩態誤差約為 10rpm 以內，而暫態誤差約為
40rpm 左右。 
    圖 50(a)、(b)、(c)、(d)、(e)為速度命令由 500rpm 加速至 1000rpm 之實測圖，
圖 50(a)、(b)為電動機轉速實際值與估測值比較實測圖，其估測誤差變動量約為
 
 
  78
差。圖 58 為洗衣機驅動系統下轉速命令 500 rpm，加入 1.5 公斤衣物的暫態響應圖，
且此時為無轉軸偵測元件搭配非線性控制器運作。 
圖 59(a)、(b)、(c)為速度命令 500rpm 下，暫態響實測圖；由於延伸型磁通估測
在啟動時尚無電壓及電流資訊，且初始角度不確定，故由數位信號處理器先產生一
個定電流靜止向量磁場，將轉子設定於該靜止向量磁場，然後施以定電流的加速磁
場向量，待延伸型磁通順利估測出並且達設定的速度後，再行切換至無轉軸偵測元
件驅動模式。圖 59(a)為切換至無轉軸偵測元件驅動模式之轉軸速度實測情形，圖
59(b)為切換至無轉軸偵測元件驅動模式時角度估測誤差，利用開迴路避開估測誤差
較大的區域，再切入無轉軸偵測元件驅動模式，進一步進行速度閉迴路控制，圖 59(c)
為 a 相電流 ai 從靜止啟動到閉迴路控制之實測圖，定電流靜止向量磁場為一適當
值，不會使得電動機初始時產生誤動作。圖 60(a)(b)為弦波轉速命令時，電動機速
度響應實測圖，以下各實測皆以延伸型磁通進行轉軸角度的估測。圖 60(a)為所提
方法在弦波轉速命令時之電動機轉速實測波形，由圖中可看出其轉速響應接近轉速
命令。圖 60(b)為比例-積分控制在弦波轉速命令時之電動機轉速實測波形，由圖中
可看出傳統比例-積分控制器，其轉速與轉速命令有明顯的誤差。 
 
圖 61 為速度命令 500 rpm 下，負載估測響應圖。此時非線性速度控制器參數
選定為 1 7.5k = ， 2 15.625k = ， 3 0.05k = ； 1 0.0001525γ = ， 2 0.0001525γ = ，
3 0.000305γ = 。圖 62(a)、(b)、(c)為考慮參數不確定性之參數適應值，分別為控制
器參數 1ˆd 、 2dˆ 、 3dˆ ，用以補償電動機慣量、外加負載及摩擦量變動時之控制量。 
圖 63(a)、(b)、(c)洗衣機驅動系統下洗衣流程命令之電動機轉速實測圖，執
行時間為 550 秒，一般洗衣機標準流程為執行 2 次洗衣流程命令。圖 63(b)為圖
63(a) I 部分的放大圖，其目的為洗衣機下速度命令進行溶解洗衣粉及攪拌之實測
圖，圖 63(c)為圖 63(a) II 部分的放大圖，為後續洗衣機進行攪拌再脫水之電動機
轉速實測圖；在劇烈的轉速變化下，本計畫所提出之轉軸角度估測法則與非線性
控制器仍能具有良好的動態估測能力及速度追蹤性能，此說明洗衣機驅動系統之
正確性及可行性。 
 
 
  80
,ai
 
(a) 
,ai
 
(b) 
圖 45 轉速 500rpm 加載 2Nm，電動機穩態時 a 相電流波形： 
(a)模擬；(b)實測。 
 
 
 
  82
βαλ λ
αλ βλ
 
(c) 
αλ
βλ
 
(d) 
（續） 
 
 
  84
reθ
 
(c) 
reθ
 
(d) 
（續） 
 
 
  86
rmω
 
(a) 
  
-200
-150
-100
-50
0
50
100
150
200
0 2 4 6 8 10 12 14 16
(r/min)
Time
rmω
( sec)  
(b) 
圖 48 洗衣機命令正反轉 500rpm 時： 
(a)轉速實際值與估測值比較；(b)速度估測誤差； 
(c)角度實際值與估測值比較；(d)角度估測誤差。 
 
 
  88
*
rmω
ˆrmω
,rmω
 
(a) 
*
rmω
ˆrmω
,rmω
 
(b) 
圖 49 速度命令 1000 rpm 正反轉時，電動機速度響應實測圖： 
(a)所提方法；(b)比例-積分；(c)所提方法速度誤差。 
 
 
 
  90
rmω
 
(b) 
圖 50 洗衣機速度命令 500rpm 到 1000rpm 時： 
(a)轉速值與估測值比較；(b)速度估測誤差；(c)角度估測值與實際值比較； 
(d)角度估測誤差；(e) 延伸型磁通軌跡。 
reθ
 
(c) 
 
 
  92
αλ
βλ
 
(e) 
（續） 
 
 
 
 
 
 
 
 
  94
rmω
 
(a) 
rmω
 
(b) 
  圖 52 無轉軸偵測元件，洗衣機正轉轉速響應圖： 
(a)30 rpm; (b)2000 rpm。 
 
 
  96
 
    
rmω
 
(c) 
（續） 
 
 
 
 
 
 
 
 
 
 
 
 
  98
1 2 3 4 5 6 7
0
500
1000
1500
0
(sec)
(rpm)
實際值
所提方法
比例-積分
,rmω
 
(a) 
ˆrm rmω ω−
,rmω
 
(b) 
圖 55 速度命令 500 rpm 加速至 1000rpm 時，所提方法暫態響應實測圖： 
(a)速度；(b)速度估測誤差；(c)角度。 
 
 
 
  100
rmω
 
圖 57 無轉軸偵測元件適應性輸入-輸出回授線性化控制器， 
   500rpm 時，瞬間加載 1.5 公斤暫態響應實測圖。 
 
 
0
100
200
300
400
500
600
0 1 2 3 4 5 6 7 8 9 10
(r/min)
Speed
Time( sec )
Real
Estimated
 
圖 58 無轉軸偵測元件適應性輸入-輸出回授線性化控制器， 
 500rpm 時，加載 1.5 公斤衣物暫態響應實測圖。 
 
 
  102
ai
 
(c) 
（續） 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
  104
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0 1 2 3 4 5
Time
dˆT (N.m)
dˆT
( sec)  
圖 61 速度命令 500 rpm 時，負載估測暫態響應。 
1ˆd
2dˆ
3dˆ
 
圖 62 速度命令 500 rpm 時，參數響應： 
(a) 1ˆd ；(b) 2dˆ ；(c) 3dˆ 。 
 
 
  106
   
rmω
 
(c) 
（續） 
 
 
  108
六、參考文獻 
[1] F. Rodriguez and A. Emadi, "A novel digital control technique for brushless DC 
motor drives," IEEE Transactions on Industrial Electronics, vol. 54, no. 5, pp. 
2365-2373, Oct. 2007. 
[2] C. S. Paresh, “Electric motor drives and control－past, present, and future,” 
IEEE Transactions on Industrial Electronics, vol. 37, no. 6, pp. 562-575, Dec. 
1990. 
[3] T. A. Lipo, “Recent progress in the development in solid-state AC motor drives,” 
IEEE Transactions on Power Electronics, vol. 3, no. 2, pp. 105-117, Apr. 1988. 
[4] B. K. Bose, “High performance control and estimation in AC drive,” IEEE 
IECON-1997, vol. 2 pp. 377-385, Nov. 1997. 
[5] J. Y. Hung, W. Gao, and J. C. Hung, “Variable structure control : a survey,” 
IEEE Transactions on Industrial Electronics, vol. 40, no. 1, pp. 2-22, Feb. 1993. 
[6] L. H. Hoang, “Microprocessors and digital IC's for motion control,” IEEE 
Transactions on Power Electronics, vol. 16, no. 4, pp. 527-534, Aug. 1994. 
[7] B. K. Bose, “Power electronics and motion control-technology status and recent 
trends,” IEEE Transactions on Industrial Applications, vol. 29, no. 5, pp. 
902-909, Sep./ Oct. 1993. 
[8] D. A. Staton, T. J. E. Miller, and S. E. Wood, “Maximizing the salience ratio of 
the synchronous reluctance motor,” IEE Proceeding-Electric Power Applications, 
vol. 140, no. 4, pp. 249-259, July 1993. 
[9] T. J. Kim, S. M. Hwang, K. T. Kim, W. B. Jung, and C. U. Kim, “Comparison of 
dynamic responses for IPM and SPM motors by considering mechanical and 
magnetic coupling,” IEEE Transactions on Magnetics, vol. 37, no. 4, pp. 
2818-2820, July 2001. 
[10] C. C. Hwang and Y. H. Cho, “Effects of leakage flux on magnetic fields of 
interior permanent magnet synchronous motors,” IEEE Transactions on 
Magnetics, vol. 37, no. 4, pp. 3021-3024, July 2001. 
[11] K. T. Kim, K. S. Kim, S. M. Hwang, T. J. Kim, and Y. H. Jung, “Comparison of 
magnetic forces for IPM and SPM motor with rotor eccentricity,” IEEE 
Transactions on Magnetics, vol. 37, no. 5, pp. 3448-3451, Sep. 2001. 
[12] T. Kosaka, M. Fujitsuna, T. Takahashi, and N. Matsui, “Current polarity 
detection-based simple position sensorless drive of IPMSM for AC compressor 
in HEV,” IEEE IAS-2004, vol. 1, pp. 3-7, Oct. 2004. 
[13] S. P. Lim and K. J. Tseng, “Dynamic model of interior permanent magnet motor 
with skewed stator slots,” IEEE IECON-1999, vol. 3, pp. 1471-1476, Nov. 1999. 
 
 
  110
[27] I. C. Baik, K. H. Kim, and M. J. Youn, “Robust nonlinear speed control of PM 
synchronous motor using boundary layer integral sliding mode control 
technique,” IEEE Transactions on Control Systems Technology ,vol. 8, no. 1, pp. 
47-54, Jan. 2000. 
[28] J. Zhou and Y. Wang, “Adaptive backstepping speed controller design for a 
permanent magnet synchronous motor”, IEE Proceeding-Electric Power 
Applications, vol. 149, no. 2, pp. 165-172, Mar. 2002. 
[29] M. A. Rahman, D. M. Vilathgamuwa, M. N. Uddin, and K. J. Tseng, “Nonlinear 
control of interior permanent-magnet synchronous motor,” IEEE Transactions 
on Industrial Applications, vol. 39, no. 2, pp. 408-416, Mar./ Apr. 2003. 
[30] J. L. Shi, T. H. Liu, and Y. C. Chang, “Adaptive controller design for a 
sensorless IPMSM drive system with a maximum torque control,” IEE 
Proceeding-Electric Power Applications, vol. 153, no. 6, pp. 823-833, Nov. 
2006. 
[31] C. G. Chen, T. H. Liu, M. T. Lin, and C. A. Tai, “Position control of a sensorless 
synchronous reluctance motor,” IEEE Transactions on Industrial Electronics, 
vol. 51, no. 1, pp. 15-25, Feb. 2004. 
[32] J. L. Shi, T. H. Liu, and Y. C. Chang, “Position control of an interior 
permanent-magnet synchronous motor without using a shaft position sensor,” 
IEEE Transactions on Industrial Electronics, vol. 54, no. 4, pp. 1989-2000, Aug. 
2007. 
[33] Z. Xu and M. F. Rahman, “Direct torque and flux regulation of an IPM 
synchronous motor drive using variable structure control approach,” IEEE 
Transactions on Power Electronics, vol. 22, no. 6, pp. 2487-2498, Nov. 2007. 
[34] M. F. Rahman, L. Zhong, M. E. Haque, and M. A. Rahman, “A direct torque 
controlled interior permanent magnet synchronous motor drive without a speed 
sensor,” IEEE Transactions on Energy Conversion, vol. 18, no. 1, pp. 17-22, 
Mar. 2003. 
[35] L. Tang, L. Zhong, M. F. Rahman, and Y. Hu, “A novel direct torque control for 
interior permanent-magnet synchronous machine drive with low ripple in torque 
and flux-a speed-sensorless approach,” IEEE Transactions on Industrial 
Applications, vol. 23, no. 2, pp. 1748-1785, Nov./ Dec. 2003. 
[36] T. H. Liu, S. H. Chen, and D. F. Chen, “Desigh and implementation of a matrix 
converter PMSM Drive without a shaft sensor,” IEEE Transactions on 
Aerospace And Electronic Systems, vol. 39, no. 1, pp. 228-243, Jan. 2003. 
[37] J. K. Seok, J. K. Lee, and D. C. Lee, “Sensorless speed control of nonsalient 
permanent-magnet synchronous motor using rotor-position-tracking PI 
 
 
  112
[49] S. Morimoto, K. Kawamoto, M. Sanada, and Y. Takeda, “Sensorless control 
strategy for salient-pole PMSM based on extended EMF in rotating reference 
frame,” IEEE Transactions on Industrial Applications, vol. 38, no. 4, pp. 
1054-1061, Jul./ Aug. 2002. 
[50] C. D. Angelo, G. Bossio, J. Solsona, G. O. Garcia, and M. I. Valla, “Mechanical 
sensorless speed control permanent-magnet AC motors drivinig an unknown 
load,” IEEE Transactions on Industrial Electronics, vol. 53, no. 2, pp. 406-414, 
Apr. 2006. 
[51] J . A. Solsona and M. I. Valla, “Disturbance and nonlinear luenberger observers 
for estimating mechanical variables in permanent magnet synchronous motors 
under mechanical parameters uncertainties,” IEEE Transactions on Industrial 
Electronics, vol. 50, no. 4, pp. 717-725, Aug. 2003. 
[52] S. Y. Kim and I. J. Ha, “A new observer design method for HF signal injection 
sensorless control of IPMSMs,” IEEE Transactions on Industrial Electronics, 
vol. 55, no. 6, pp. 2525-2529, June 2008. 
[53] M. E. Haque, L. Zhong, and M. F. Rahman, “The effect of offset error and its 
compensation for a direct torque controlled interior permanent magnet 
synchronous motor drive,” IEEE IEMDC-2001, pp. 814-819, Mar. 2001. 
[54] M. Cirrincione, M. Pucci, G. Cirrincione, and G. A. Capolino, “A new adaptive 
integration methodology for estimating flux in induction machine drives,” IEEE 
Transactions on Power Electronics, vol. 19, no. 1, pp. 25-34, Jan. 2004. 
[55] J. J. E. Slotine and W. Li, Applied Nonlinear Control. Englewood Cliffs, NJ.: 
Prentice-Hall, 1991. 
[56] G. Zhu, L. A. Dessaint, O. Akhrif, and A. Kaddouri, “Speed tracking control of a 
permanent-magnet synchronous motor with state and load torque observer,” 
IEEE Transactions on Industrial Electronics, vol. 47, no. 2, pp. 346-355, Mar. 
2000. 
[57] K. H. Kim and M. J. Youn, “A nonlinear speed control for a PM synchronous 
motor using a simple disturbance estimation technique,” IEEE Transactions on 
Industrial Electronics, vol. 49, no. 1, pp. 524-535, June 2002. 
[58] A. Isidori, Nonlinear Control Systems. Springer, 1995. 
[59] L. Faa-Jeng, C. Chih-Kai, and H. Po-Kai, "FPGA-Based Adaptive Backstepping 
Sliding-Mode Control for Linear Induction Motor Drive," IEEE Transactions on 
Power Electronics, vol. 22, pp. 1222-1231, May 2007. 
[60] M. Krstić, I. Kanellakopoulos, and P. V. Kokotović, Nonlinear and Adaptive 
Control Design, NY.: John Wiley & Sons, 1995. 
[61] G. F. Franklin, J. D. Powell, and A. Emami-Naeini, Feedback Control of 
Dynamic Systems. Reading, MA: Addison-Wesley, 1994. 
 
 
  114
high performance estimator for an interior permanent magnet synchronous motor 
drive system,” the 29th Symp. on Electric Power Eng., Tainan, Taiwan, Dec. 
2008. (優秀論文) 
3. C. K. Lin, T. H. Liu, and C. H. Lo, “A novel sensorless technique for an IPMSM 
drive” AMDPE-2008, Taipei, Taiwan, Nov. 2008. 
4. C. K. Lin, T. H. Liu, and S. W. Lai, “Design and Implementation of a Nonlinear 
Controller for an IPMSM Drive System,” the 30th Symp. on Electric Power Eng., 
Tainan, Taiwan, Nov. 2009. 
5. C. H. Lo, T. H. Liu, and C. K. Lin, “Design and Implementation of a Sensorless 
Interior Permanent Magnet Synchronous Motor Drive System for Washing 
Machines,” the 8th Taiwan Power Electr. Conf. & Exhib., Jung-Li, Taiwan, Sep. 
2009. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
  116
   2、Plenary1:中型電機驅動系統技術：由 ABB 公司研發人員說明該公司  
      發成功的 ANPC-5L 機種。 
   3、Plenary2: 採礦處理的高功率驅動技術。 
   4、口頭報告場次： 
   PE-1:電力電子(I) 
   SI3C:系統整合，工業資訊及通訊 
   PSRE-1:電力系統及再生能源(I) 
   SS17:工業電子技術標準需求 
   DS-1:海報(I) 
   申請人在 3 月 15 日(一)上午完成了海報論文的張貼及對談。    
(三)3 月 15 日(星期一)下午 
   口頭報告包括： 
   PE-2:電力電子(II) 
   MR:微機電及機器人 
   PSRE-2:電力系統及再生能源(II) 
   EMD-1:電機機械及驅動(I) 
   DS-2:海報(II) 
   SS02:單相太陽能光電 
   SS18:智慧型方法在微機電及機器人系統的性能改進。 
   SS19:再生電能轉換系統 
   SS12:多相電機的轉換器及驅動 
(四)3 月 16 日(星期二)上午 
   1、Plenary 3:中國大陸電力電子的研發及應用現況 
   2、Plenary 4:下一代機器人之探討 
   3、Plenary 5:電力電子在再生能源系統的應用 
   4、口頭報告： 
   PE-3:電力電子(III) 
   SS14:印刷電路板系統 
   SISP-1:檢知器、儀表及信號處理(I) 
   SS08:智慧型信號處理及強健控制在檢知器的應用 
   DS-3:海報展示(III) 
 
   申請人在 3 月 16 日上午擔任 PE-3 的議程主持人，共主持 2 小時議程。 
 
 
  118
 
四、感想及建議 
 （一）此次參加 ICIT 國際會議，申請人在海報展示說明的相片被放入晚宴中 
播放。 
 （二）擔任 PE-3 的 Session Chair. 
 （三）申請人為大會主席 Professor Jose Rodriguez 應邀參加 3 月 16 日大會主
席 Professor Jose Rodriguez 所邀請參加午宴的 十位貴賓之一。 
 （四）申請人在口頭報告時，得到現場熱烈迴響，同時提出３個問題討論，反 
    應也相當熱烈。參與人士及主持人均認為申請人所提方法具有創意。 
 （五）上述成效，已達國際交流之目的。 
 （六）參加國際研討會可以拓展新知，增進交流，特別需全程參與，方能達到 
    參加會議之預期成效與目的。 
    
 
 
 
 
 
 
 
  120
constant. The mechanical speed and position of the motor are 
expressed as  
 
( )1rm e L m rm
m
d T T B
dt J
ω ω= − −         (4) 
and  
rm rm
d
dt
θ ω=                 (5) 
where rmω  is the mechanical speed, rmθ  is the mechanical 
position, 
mJ  is the inertia, LT  is the external load, and mB  
is the viscous coefficient. The electrical position and speed 
can be expressed as 
eθ  and eω  and are shown as follows. 
 
 
2e rm
Pθ θ=                    (6) 
and 
 
2e rm
Pω ω=                    (7) 
 
B. The Basic Principle of the Rotor Position Estimating 
Technique  
 
After doing some coordinate transformations and 
mathematical processes, it is not difficult to obtain  
 
( )( ) ( ) ( )0 1 12 2s e e m ed dv R i L L cos i L sin i cosdt dtα α α βθ θ λ θ⎡ ⎤= + + + +⎣ ⎦
                     (8) 
 
( )( ) ( )( ) ( )1 0 12 2s e e m ed dv R i L sin i L L cos i sindt dtβ β α βθ θ λ θ⎡ ⎤= + + − +⎣ ⎦
                     (9) 
and  ( )0 2d qL L L /= +          (10) 
 ( )1 2d qL L L /= −               (11) 
 
Substituting equations (10), (11) into (8), (9), and doing 
some arrangements, we can obtain 
( ) ( )( )ds q d q e e d q d m edi div R i L L L cos L L i sindt dtαα α θ ω λ θ= + + − − − +
      (12) 
( ) ( )( )ds q d q e e d q d m edi div R i L L L sin L L i cosdt dtββ β θ ω λ θ= + + − + − +
      (13) 
When the motor is operated at a low speed or near 
standstill, the rotor speed eω  is very small. As a result, the 
last term of equations (12) and (13) can be neglected. After 
that, we can simplify equations (12) and (13) as    
( ) dd q e s qdi diL L cos v R i Ldt dtαα αθ− = − −       (14) 
( ) dd q e s q didiL L sin v R i Ldt dtββ βθ− = − −       (15) 
 
From equation (14) and (15), we can obtain 
1
^ s q
e
s q
dv R i L i
dttan dv R i L i
dt
β β β
α α α
θ −
⎛ ⎞− −⎜ ⎟= ⎜ ⎟⎜ ⎟− −⎝ ⎠
      (16) 
If only a zero vector switching interval is considered and 
the voltage drop of the stator resistance is neglected, the 
estimated rotor position of equation (16) can be reduced to 
1
^
e
d i
dttan d i
dt
β
α
θ −
⎛ ⎞⎜ ⎟= ⎜ ⎟⎜ ⎟⎝ ⎠
             (17) 
On the other hand, when the motor is operated at middle- 
or high-speed, the extended flux linkage is defined as 
 ( )( )d q d m eL L i cosαλ λ θ= − +       (18) 
 ( )( )d q d m eL L i sinβλ λ θ= − +       (19) 
 
By taking the derivative of equation (18) and (19), we can 
obtain 
 
( ) ( )( )d q e d e d q d m ed dE L L cos i L L i sindt dtα αλ θ ω λ θ= = − − − +
                    (20) 
 ( ) ( )( )d q e d e d q d m ed dE L L sin i L L i cosdt dtβ βλ θ ω λ θ= = − + − +
                    (21) 
where Eα  is the component of the extended back EMF in 
the α -axis coordinate, and Eβ  is the component of the 
extended back EMF in the β -axis coordinate. By 
substituting equations (12)-(13) into equations (20)- (21), 
it is not difficult to obtain  
 
s q
dv R i L i d
dtα α α α
λ τ⎛ ⎞= − −⎜ ⎟⎝ ⎠∫        (22) 
and  
s q
dv R i L i d
dtβ β β β
λ τ⎛ ⎞= − −⎜ ⎟⎝ ⎠∫        
(23) 
Finally, the estimated rotor position can be expressed as  
 
1
^
e tan
β
α
λθ λ
−=               (24) 
 C. Realization of Rotor Position Estimating   
In this paper, a space vector pulse-width-modulation 
(SVPWM) switching method is used. The six sections of 
the space vector are shown in Fig. 1(a). Take section I as 
an example. When the inverter is operated in section I, the 
related switching states are sketched in Fig. 1(b). The time 
 
 
  122
compensate the phase shift lagθ  shown in Fig. 2(a), 
which is related to motor speed and motor parameters. We 
can off-line calculate the phase angle lagθ  for (a) 
different motor speed(s)
eω . The experimental results of 
the phase angle lagθ  in this paper are shown in Fig. 2(b). 
As you can see, the relationship is nonlinear. Next, we 
establish a table to show the relationship between the 
phase angle 
lagθ  and the motor speed eω . After that, we 
use the DSP to look up the table. The DSP inputs the 
motor speed eω  and determines the phase angle lagθ . 
Then, the DSP executes the implemented software 
program to shift the voltage vector with a delay angle 
lagθ . 
To remove the high frequency switching noise, the DSP 
integrates the extended back EMF to obtain the extended 
flux. Finally, the rotor position can be computed by using 
the α -axis and β -axis extended flux linkages as shown 
in equation (24). 
( )d q d
dL L i
dt
−1lag
θ
(( ) )e d q d mL L iω λ− +
3ω
2lagθ1ω
2ω
3E
2E
1E
 
 
Fig. 2 The relationship of the extended flux 
and current slope.  
 
B. Speed Estimator  
In this paper, a PI controller is designed to obtain 
the estimated speed. A closed-loop speed estimator is 
used, and its block diagram is shown in Fig. 3. The 
estimator includes two major parameters: epK and 
eiK  [21]. 
 
eθ
 +
−
PIθ

eiK
eω
++epK
1
s
1
s  
Fig. 3 The block diagram of the speed 
estimator. 
 
From Fig. 3, it is not difficult to obtain the transfer 
function between PIθ

(s) and eθ

(s) as  
 
2
( ) ( )
( )
ep eiPI
d
ep eie
K s Ks H s
s K s Ks θ
θ
θ
+= = + +

  (27) 
where PIθ

(s) is the estimated rotor position 
from the PI controller, epK  is the gain of the 
proportional control, and eiK  is the gain of the integral 
control. In the steady-state condition, PIθ

 is equal to 
eθ

, which means the error between PIθ

 and eθ

 is 
zero. As you can observe, the eω  is equal to the 
differential of eθ

 . Now, we select the gains 
epK  and 
eiK  according to the transfer function ( )dH sθ . The 
relationships are  
2ep nK ζω=       (28a) 
and  
2
ei nK ω=     (28b)  
where ζ  is the damping ratio of the closed-loop 
estimator shown in Fig. 3, and nω  is the natural 
frequency.  
 
III. IMPLEMENTATION  
The implemented system is shown as Fig. 4(a)(b). The 
system includes two major parts: the hardware circuits and 
the DSP. The hardware circuits consist of an inverter, 
voltage sensing circuits, current sensing circuits, and an 
A/D converter. The inverter is implemented by using an 
IGBT module, type 6MBI 20GS-060, made by Fuji 
Company. The inverter uses space vector 
pulse-width-modulation with a 10 kHz switching 
frequency to generate the required triggering signals. The 
sensing circuit of the dc-bus voltage uses resistors to 
attenuate the voltage, and then sends the attenuated voltage 
into the DSP through an A/D converter. Then, the DSP 
computes 3-phase voltages by using the dc-bus voltage 
and switching states. The current sensors are Hall-effect 
sensors, type LEM 25-NP, made by the LEM Company. 
The A/D converter is typed AD 7655, made by Analog 
Device Company, and has a conversion time of 1 sμ . The 
DSP is 32-bit, typed TMS320F2812, made by Texas 
Instruments Company. The sampling intervals are: 100 
sμ  for current-loop, 1 ms for speed-loop control, and 2 
ms for position-loop control. Both the rotor position 
estimating algorithm and control algorithm are executed 
by the DSP. The hardware, therefore, is very simple.   
 
 
  124
 
(a) 
 
 
(b) 
 
Fig. 11 The measured response for a reversing speed 
(a) speed response (b) position response (c) estimated 
position error. 
 
0 1 2 3 4 5 6
0
100
200
300
400
500
600
700
800
(r/min)
(sec)
Estimated
Real
 
 
Fig. 12 The measured load disturbance response. 
 
a
b
c
d
e
 
(a) 
a
b
c
d
e
 
Fig. 14 The measured responses of position control system  
(a) position responses (b) velocity responses. 
 
V. CONCLUSIONS  
In this paper, a novel rotor position estimating method 
has been discussed. By using the proposed method, a 
systematic sensorless technique has been developed. The 
proposed principle of the sensorless technique can be used for 
standstill, low-speed, middle-speed, and high-speed operating 
ranges. In addition, a closed-loop speed estimator has been 
designed to remove the high frequency noises. A DSP-based 
sensorless drive system has been implemented to execute the 
estimating algorithm and control algorithm. The drive system 
can be operated from 1 r/min to 2000 r/min for adjustable 
speed control. It can automatically start from standstill 
condition as well. In addition, the drive system can achieve 
precise position control with satisfactory performance, which 
includes fast transient responses, good load disturbance 
responses, and good tracking responses.  
 
VI. REFERENCES 
[1] P. P. Acarnley and J. F. Watson, “Review of 
position-sensorless operation of brushless 
permanent-magnet machine,” IEEE Trans. Ind. Electron., 
vol. 53, no. 2, pp. 352-362, Apr. 2006. 
[2] J. L. Shi, T. H. Liu, and Y. C. Chang, “Position control 
of an interior permanent-magnet synchronous motor 
without using a shaft position sensor,” IEEE Trans. Ind. 
Electron., vol. 54, no. 4, pp. 1989-2000, Aug. 2007. 
[3] C. Wang and L. Xu, “A novel approach for sensorless 
control of PM machine down to zero speed without 
signal injection or special PWM technique,”. IEEE Trans. 
Pow. Electron., vol. 19, no. 6, pp. 1601-1607, Nov. 2004. 
[4] S. Morimoto, K. Kawamoto, M. Sanada, and Y. Takeda, 
“Sensorless control strategy for salient-pole PMSM 
based on extended EMF in rotating reference frame,” 
IEEE Trans. Ind. Appl., vol. 38, no. 4, pp. 1054-1061, 
July/ Aug. 2002.. 
[5] G. D. Andreescu, C. I. Pitic, F. Blaabjerg, and I. Boldea, 
“Combined flux observer with signal injection 
enhancement for wide speed range sensorless direct 
torque control of IPMSM drives,”  IEEE Trans. Energy 
Conver. , vol. 23, no. 2, pp. 393-402, June 2008. 
 
 
 
  126
B. Rotor Position Estimation Technique 
From a theoretical point of view, the rotor position can be 
obtained by directly solving the dynamic equations (1) to (12). In 
the real world, this method, however, is too complicated. In this 
paper, a novel estimating method is proposed. After doing some 
mathematical process, one can obtain the following equation.  
0 00 0
0 0 0 0
0 0 0 0
qa s a a ae
b s b q b be
c s c c ceq
Lv r i i
d dv r i L i
dt dt
v r i iL
λ
λ
λ
⎡ ⎤⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥= + +⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦⎢ ⎥⎣ ⎦
 (13) 
Where aeλ , beλ , and ceλ  are the a-phase, b-phase, and 
c-phase extended flux of the IPMSM, and can be expressed as 
follows: 
1 3 1 2cos(2 ) cos(2 )
2 2 2 3
1 2cos(2 ) cos
2 3
A B B re a A B re b
ae
A B re c m re
L L L i L L i
L L i
πθ θ
λ πθ λ θ
⎧ ⎫⎛ ⎞ ⎛ ⎞− − − + − − −⎜ ⎟ ⎜ ⎟⎪ ⎪⎪⎝ ⎠ ⎝ ⎠ ⎪= ⎨ ⎬⎛ ⎞⎪ ⎪+ − − + +⎜ ⎟⎪ ⎪⎝ ⎠⎩ ⎭
 (14) 
1 1 32 cos(2 ) 2 cos(2 ) 3 sin(2 )
2 2 2
1 2 2cos(2 ) cos
2 3 3
A B re a A B B re B re b
be
A B re c m re
L L i L L L L i
L L i
θ θ θ
λ πθ λ θ π
⎧ ⎫⎛ ⎞ ⎛ ⎞− + + − − + +⎜ ⎟ ⎜ ⎟⎪ ⎪⎪⎝ ⎠ ⎝ ⎠ ⎪=⎨ ⎬⎛ ⎞ ⎛ ⎞⎪ ⎪+ − − + + −⎜ ⎟ ⎜ ⎟⎪ ⎪⎝ ⎠ ⎝ ⎠⎩ ⎭
 (15) 
1 1 22 cos(2 ) cos(2 )
2 2 3
1 3 22 cos(2 ) 3 sin(2 ) cos
2 2 3
A B re a A B re b
ce
A B B re B re c m re
L L i L L i
L L L L i
πθ θ
λ
θ θ λ θ π
⎧ ⎫⎛ ⎞ ⎛ ⎞− + + − − −⎜ ⎟ ⎜ ⎟⎪ ⎪⎪⎝ ⎠ ⎝ ⎠ ⎪= ⎨ ⎬⎛ ⎞ ⎛ ⎞⎪ ⎪+ − − + − + +⎜ ⎟ ⎜ ⎟⎪ ⎪⎝ ⎠ ⎝ ⎠⎩ ⎭
 (16) 
3 ( )
2q ls A B
L L L L= + +  (17) 
From the a-b-c axis to the α β−  axis transformation, one can 
obtain that the fluxes in α β−  frame can be expressed as 
{ }
2 1 1= ( )
3 2 2
cos( ) [ 3cos( ) 3 sin( )( )]
e ae be ce
ae
re re a re b c B mi i i L
αλ λ λ λ
λ
θ θ θ λ
− −
=
= − + − + +
 (18) 
and 
{ }
3 ( )
3
sin( ) [ 3cos( ) 3 sin( )( )]
e be ce
re re a re b c B mi i i L
βλ λ λ
θ θ θ λ
= −
= − + − + +
 (19) 
Finally, one can obtain  
1ˆ tan ere
e
β
α
λθ λ
− ⎛ ⎞= ⎜ ⎟⎝ ⎠
 (20) 
The estimated motor speed can be expressed as 
ˆˆ /re re tω θ= Δ Δ  (21) 
One can observe that the estimated rotor position can be 
easily computed from the a-b-c fluxes, , ,ae beλ λ  and .ceλ  As a 
result, the estimated rotor position can be obtained if the a-b-c 
axis fluxes are precisely measured. However, in the real world, 
the a-b-c axis extended fluxes can not be measured directly. In 
fact, the extended fluxes can be obtained from the following 
processes: 
0 0 0 0
0 0 0 0
0 0 0 0
ae a s a q a
be b s b q b
ce c s c q c
v r i L i
v r i dt L i
v r i L i
λ
λ
λ
⎡ ⎤⎛ ⎞⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤⎜ ⎟ ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥= − −⎜ ⎟ ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎜ ⎟ ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦⎝ ⎠ ⎣ ⎦
∫  (22) 
The details of the rotor position estimating technique can be 
expressed as Fig. 1(a). The estimator is derived according to 
equations (18)-(22). In this paper, a DSP is used to execute the 
rotor estimation as shown in Fig. 1(a). 
The proposed method has a better performance than the 
method proposed by the previously published paper [6]. As 
you can see, in Fig. 1(b), the proposed method in the paper can 
obtain the rotor position of the d-axis. However, in the 
previous paper [6], the position of the flux sλ  is obtained, 
which is the summation of the d-axis position and the load 
angle. In fact, the load angle is related to the external load and 
is very difficult to be measured or estimated. As a result, the 
method proposed in the paper is better than the method 
proposed by previous paper [6]. 
 
av
+
sr
−
ai
∫
+
qL
−
aeλ
eαλ
bv
+
sr
−
bi
∫
+
qL
−
3 / 3
beλ
cv
+
sr
−
ci
∫
+
qL
−
ceλ
3 / 3
+ −
eβλ
( )1tan /e eβ αλ λ−
ˆ /re tθΔ Δ
rˆeθ ˆreω  
(a) 
 
sλ
β
αreθ
q qL i
( )d q d mL L i λ− +δ
reω
di
qi
si
sv q dL i
 
(b) 
Fig. 1 The the proposed estimator 
(a) block diagram (b) phasor. 
 
C. Standstill Starting Method  
To start the washing machine, a short pulse of the voltage is 
injected in each phase to detect the initial rotor position [7]. 
Then, an open-loop starting technique is used to start the 
motor from the standstill condition. After the motor reaches 30 
r/min, the proposed rotor position estimating method 
mentioned in Fig. 1(a) is applied. Finally, the motor 
 
 
  128
reθ
 
(b) 
 
reθ
 
(c) 
 
rmω
 
(d) 
 
Fig. 3 The measured responses. (a) fluxes. (b) rotor 
position.  
(c) estimating error. (d) speed response. 
 
 
(a) 
 
 
(b) 
 
 
(c) 
 
Fig. 4  The measured responses of reversing rotation 
(a) speed. (b) position. (c) flux trajectory. 
 
 
 
  130
 
V. CONCLUSIONS 
In this paper, a new sensorless IPMSM drive system is 
proposed. By systematic analysis, a sensorless technique 
based on flux estimation is developed. In addition, the 
proposed system can be successfully used in a washing 
machine with satisfactory performance including fast 
transient responses, good load disturbance responses, and 
good tracking responses. The proposed method can be 
widely used in industry due to its simplicity.  
 
VI. REFERENCES 
[1] M. J. Corley and R. D. Lorenz, “Rotor position and 
velocity estimation for a salient-pole permanent magnet 
synchronous machine at standstill and high speed,” 
IEEE Trans. Ind. Appl., vol. 34, no. 4, pp. 784-789, 
Jul./Aug. 1998. 
[2] S. Y. Kim and I. J. Ha, “A new observer design method 
for HF signal injection sensorless control of IPMSMs,” 
IEEE Trans. Ind. Electron., vol. 55, no. 6, pp. 
2525-2529, June 2008. 
[3] R. Mizutani, T. Takeshita, and N. Matsui, “Current 
model-based sensorless drives of salient-pole PMSM at 
low speed and standstill,” IEEE Trans. Ind. Appl., vol. 
34, no. 4, pp. 841-846, Jul./Aug. 1998. 
[4] J. L. Shi, T. H. Liu, and Y. C. Chang, “Position control 
of an interior permanent-magnet synchronous motor 
without using a shaft position sensor,” IEEE Trans. Ind. 
Electron., vol. 54, no. 4, pp. 1989-2000, Aug. 2007.     
[5] Z. Chen, M. Tomita, S. Doki, and S. Okuma, “An 
extended electromotive force model for sensorless 
control of interior permanent- agnet synchronous 
motor,” IEEE Trans. Ind. Electron., vol. 50, no. 2, pp. 
288-295, Apr. 2003. 
[6] L. Tang, L. Zhong, M. F. Rahman, and Y. Hu, “A novel 
direct torque controlled interior permanent synchronous 
machine drive with low ripple in flux and torque and 
fixed switching frequency,” IEEE Trans. Pow. Electron., 
vol. 19, no. 2, pp. 346-354, Mar. 2004. 
[7] M. Tursini, R. Petrella, and F. Parasiliti, “Initial rotor 
position estimation method for PM motors,” IEEE 
Trans. Ind. Appl., vol. 39, no. 6, pp. 1630-1640, Nov. 
 
 
   PE-1:電力電子(I) 
   SI3C:系統整合，工業資訊及通訊 
   PSRE-1:電力系統及再生能源(I) 
   SS17:工業電子技術標準需求 
   DS-1:海報(I) 
   申請人在 3 月 15 日(一)上午完成了海報論文的張貼及對談。    
(三)3 月 15 日(星期一)下午 
   口頭報告包括： 
   PE-2:電力電子(II) 
   MR:微機電及機器人 
   PSRE-2:電力系統及再生能源(II) 
   EMD-1:電機機械及驅動(I) 
   DS-2:海報(II) 
   SS02:單相太陽能光電 
   SS18:智慧型方法在微機電及機器人系統的性能改進。 
   SS19:再生電能轉換系統 
   SS12:多相電機的轉換器及驅動 
(四)3 月 16 日(星期二)上午 
   1、Plenary 3:中國大陸電力電子的研發及應用現況 
   2、Plenary 4:下一代機器人之探討 
   3、Plenary 5:電力電子在再生能源系統的應用 
   4、口頭報告： 
   PE-3:電力電子(III) 
   SS14:印刷電路板系統 
   SISP-1:檢知器、儀表及信號處理(I) 
   SS08:智慧型信號處理及強健控制在檢知器的應用 
   DS-3:海報展示(III) 
 
   申請人在 3 月 16 日上午擔任 PE-3 的議程主持人，共主持 2 小時議程。 中午參加大會主席 
Professor Jose Rodriguez 邀請之午晏，共有 10 位貴賓受邀。 
 
(五)3 月 16 日(星期二)下午 
四、感想及建議 
 （一）此次參加 ICIT 國際會議，申請人在海報展示說明的相片被放入晚宴中 播放。 
 （二）擔任 PE-3 的 Session Chair. 
 （三）申請人為大會主席 Professor Jose Rodriguez 應邀參加 3 月 16 日大會主席 Professor Jose 
Rodriguez 所邀請參加午宴的 十位貴賓之一。 
 （四）申請人在口頭報告時，得到現場熱烈迴響，同時提出３個問題討論，反 
    應也相當熱烈。參與人士及主持人均認為申請人所提方法具有創意。 
 （五）上述成效，已達國際交流之目的。 
 （六）參加國際研討會可以拓展新知，增進交流，特別需全程參與，方能達到 
    參加會議之預期成效與目的。 
   (七)  相關照片如下頁。 
 
 
 
 
圖一 參加 ICIT-2010 教授 
(黃義盛教授, 劉添華教授, 陽毅平教授,陳中平教授, 俞齊山教授) 
 
 
 
 
 
 
 
圖四 申請人在口頭報告論文會場的現況 
 
 
 
圖五 申請人及會場一角的現況 
 
 
 
 
 
 
(相關論文如後頁) 
 
 
 
 
 
 
 
 
 
 
 
 
 
where eT  is the electro-magnetic torque of the motor, P  is 
the number of poles of the motor, and tK  is the torque 
constant. The mechanical speed and position of the motor 
are expressed as  
 
 1rm e L m rm
m
d T T B
dt J
      (4) 
and  
rm rm
d
dt
       (5) 
where rm  is the mechanical speed, rm  is the mechanical 
position, 
mJ  is the inertia, LT  is the external load, and mB  
is the viscous coefficient. The electrical position and speed 
can be expressed as 
e  and e  and are shown as follows. 
 
 
2e rm
P      (6) 
and 
 
2e rm
P      (7) 
 
B. The Basic Principle of the Rotor Position Estimating 
Technique  
 
After doing some coordinate transformations and 
mathematical processes, it is not difficult to obtain  
 
      0 1 12 2s e e m ed dv R i L L cos i L sin i cosdt dt            
      (8) 
 
       1 0 12 2s e e m ed dv R i L sin i L L cos i sindt dt            
      (9) 
and  
  0 2d qL L L /      (10) 
  1 2d qL L L /      (11) 
 
Substituting equations (10), (11) into (8), (9), and doing 
some arrangements, we can obtain 
    ds q d q e e d q d m edi div R i L L L cos L L i sindt dt           
      (12) 
    ds q d q e e d q d m edi div R i L L L sin L L i cosdt dt           
      (13) 
When the motor is operated at a low speed or near 
standstill, the rotor speed e  is very small. As a result, 
the last term of equations (12) and (13) can be neglected. 
After that, we can simplify equations (12) and (13) as    
  dd q e s qdi diL L cos v R i Ldt dt      (14) 
 
  dd q e s q didiL L sin v R i Ldt dt      (15) 
 
From equation (14) and (15), we can obtain 
1
^ s q
e
s q
dv R i L i
dttan dv R i L i
dt
  
  
 
        
  (16) 
If only a zero vector switching interval is considered and 
the voltage drop of the stator resistance is neglected, the 
estimated rotor position of equation (16) can be reduced 
to 
 
1
^
e
d i
dttan d i
dt


 
      
    (17) 
 
On the other hand, when the motor is operated at middle- 
or high-speed, the extended flux linkage is defined as 
   d q d m eL L i cos       (18) 
   d q d m eL L i sin       (19) 
 
By taking the derivative of equation (18) and (19), we can 
obtain 
 
    d q e d e d q d m ed dE L L cos i L L i sindt dt          
      (20) 
     d q e d e d q d m ed dE L L sin i L L i cosdt dt          
      (21) 
 
where E  is the component of the extended back EMF in 
the  -axis coordinate, and E  is the component of the 
extended back EMF in the  -axis coordinate. By 
substituting equations (12)-(13) into equations (20)- (21), 
it is not difficult to obtain  
 
s q
dv R i L i d
dt   
         (22) 
and  
s q
dv R i L i d
dt   
         (23) 
Finally, the estimated rotor position can be expressed as  
 
1
^
e tan


 
      (24) 
 C. Realization of Rotor Position Estimating   
In this paper, a space vector pulse-width-
modulation (SVPWM) switching method is used. The six 
sections of the space vector are shown in Fig. 1(a). Take 
section I as an example. When the inverter is operated in 
The experimental results of the phase angle lag  in 
this paper are shown in Fig. 2(b). As you can see, the 
relationship is nonlinear. Next, we establish a table to 
show the relationship between the phase angle 
lag  
and the motor speed 
e . After that, we use the DSP 
to look up the table. The DSP inputs the motor speed 
e  and determines the phase angle lag . Then, the 
DSP executes the implemented software program to 
shift the voltage vector with a delay angle 
lag . To 
remove the high frequency switching noise, the DSP 
integrates the extended back EMF to obtain the 
extended flux. Finally, the rotor position can be 
computed by using the  -axis and  -axis extended 
flux linkages as shown in equation (24). 
( )d q d
dL L i
dt
1lag

(( ) )e d q d mL L i  
3
2lag1
2
3E
2E
1E
 
 
Fig. 2 The relationship of the extended flux and 
current slope.  
 
B. Speed Estimator  
In this paper, a PI controller is designed to obtain 
the estimated speed. A closed-loop speed estimator is 
used, and its block diagram is shown in Fig. 3. The 
estimator includes two major parameters: epK and 
eiK  [21]. 
 
e
 

PI

eiK
e
epK
1
s
1
s  
Fig. 3 The block diagram of the speed estimator. 
 
From Fig. 3, it is not difficult to obtain the 
transfer function between PI

(s) and e

(s) as  
 
2
( ) ( )
( )
ep eiPI
d
ep eie
K s Ks H s
s K s Ks 


   

   (27) 
where PI

(s) is the estimated rotor position from the 
PI controller, epK  is the gain of the proportional 
control, and eiK  is the gain of the integral control. In 
the steady-state condition, PI

 is equal to e

, which 
means the error between PI

 and e

 is zero. As you 
can observe, the e  is equal to the differential of e

 . 
Now, we select the gains epK  and eiK  according to 
the transfer function ( )dH s . The relationships are  
2ep nK                (28a) 
and  
2
ei nK       (28b)  
 
where   is the damping ratio of the closed-loop 
estimator shown in Fig. 3, and n  is the natural 
frequency.  
 
III. IMPLEMENTATION  
The implemented system is shown as Fig. 4. The 
system includes two major parts: the hardware circuits and 
the DSP. The hardware circuits consist of an inverter, 
voltage sensing circuits, current sensing circuits, and an 
A/D converter. The inverter is implemented by using an 
IGBT module, type 6MBI 20GS-060, made by Fuji 
Company. The inverter uses space vector pulse-width-
modulation with a 10 kHz switching frequency to generate 
the required triggering signals. The sensing circuit of the 
dc-bus voltage uses resistors to attenuate the voltage, and 
then sends the attenuated voltage into the DSP through an 
A/D converter. Then, the DSP computes 3-phase voltages 
by using the dc-bus voltage and switching states. The 
current sensors are Hall-effect sensors, type LEM 25-NP, 
made by the LEM Company. The A/D converter is typed 
AD 7655, made by Analog Device Company, and has a 
conversion time of 1 s . The DSP is 32-bit, typed 
TMS320F2812, made by Texas Instruments Company. 
The sampling intervals are: 100 s  for current-loop, 1 
ms for speed-loop control, and 2 ms for position-loop 
control. Both the rotor position estimating algorithm and 
control algorithm are executed by the DSP. The hardware, 
therefore, is very simple.   
 
Fig. 4 The implemented system 
 
Fig. 7 The measured response for a reversing speed 
(a) speed response (b) position response (c) estimated 
position error. 
 
0 1 2 3 4 5 6
0
100
200
300
400
500
600
700
800
(r/min)
(sec)
Estimated
Real
 
 
Fig. 8 The measured load disturbance response. 
 
a
b
c
d
e
 
(a) 
a
b
c
d
e
 
(b) 
Fig. 9 The measured responses of position control system  
(a) position responses (b) velocity responses. 
 
V. CONCLUSIONS  
In this paper, a novel rotor position estimating 
method has been discussed. By using the proposed method, 
a systematic sensorless technique has been developed. The 
proposed principle of the sensorless technique can be used 
for standstill, low-speed, middle-speed, and high-speed 
operating ranges. In addition, a closed-loop speed 
estimator has been designed to remove the high frequency 
noises. A DSP-based sensorless drive system has been 
implemented to execute the estimating algorithm and 
control algorithm. The drive system can be operated from 
1 r/min to 2000 r/min for adjustable speed control. It can 
automatically start from standstill condition as well. In 
addition, the drive system can achieve precise position 
control with satisfactory performance, which includes fast 
transient responses, good load disturbance responses, and 
good tracking responses.  
 
VI. REFERENCES 
[1] P. P. Acarnley and J. F. Watson, “Review of position-sensorless 
operation of brushless permanent-magnet machine,” IEEE Trans. 
Ind. Electron., vol. 53, no. 2, pp. 352-362, Apr. 2006. 
[2] J. L. Shi, T. H. Liu, and Y. C. Chang, “Position control of an 
interior permanent-magnet synchronous motor without using a shaft 
position sensor,” IEEE Trans. Ind. Electron., vol. 54, no. 4, pp. 
1989-2000, Aug. 2007. 
[3] C. Wang and L. Xu, “A novel approach for sensorless control of 
PM machine down to zero speed without signal injection or special 
PWM technique,”. IEEE Trans. Pow. Electron., vol. 19, no. 6, pp. 
1601-1607, Nov. 2004. 
[4] S. Morimoto, K. Kawamoto, M. Sanada, and Y. Takeda, 
“Sensorless control strategy for salient-pole PMSM based on 
extended EMF in rotating reference frame,” IEEE Trans. Ind. Appl., 
vol. 38, no. 4, pp. 1054-1061, July/ Aug. 2002.. 
[5] G. D. Andreescu, C. I. Pitic, F. Blaabjerg, and I. Boldea, 
“Combined flux observer with signal injection enhancement for 
wide speed range sensorless direct torque control of IPMSM 
drives,”  IEEE Trans. Energy Conver. , vol. 23, no. 2, pp. 393-402, 
June 2008. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
3 ( )
2d ls A B
L L L L    (10) 
3 ( )
2q ls A B
L L L L    (11) 
( )d q d mL L i     (12) 
where di  is the stator d-axis equivalent current, and iq  is the 
stator q-axis equivalent current, and   is the total flux 
linkage. 
B. Rotor Position Estimation Technique 
From a theoretical point of view, the rotor position can be 
obtained by directly solving the dynamic equations (1) to (12). 
In the real world, this method, however, is too complicated. 
In this paper, a novel estimating method is proposed. After 
doing some mathematical process, one can obtain the 
following equation.  
0 00 0
0 0 0 0
0 0 0 0
qa s a a ae
b s b q b be
c s c c ceq
Lv r i i
d dv r i L i
dt dt
v r i iL



                                                     
 (13) 
Where ae , be , and ce  are the a-phase, b-phase, and c-
phase extended flux of the IPMSM, and can be expressed as 
follows: 
1 3 1 2cos(2 ) cos(2 )
2 2 2 3
1 2cos(2 ) cos
2 3
A B B re a A B re b
ae
A B re c m re
L L L i L L i
L L i
 
   
                              
 (14) 
1 1 32 cos(2 ) 2 cos(2 ) 3 sin(2 )
2 2 2
1 2 2cos(2 ) cos
2 3 3
A B re a A B B re B re b
be
A B re c m re
L L i L L L L i
L L i
  
    
                                    
 (15) 
1 1 22 cos(2 ) cos(2 )
2 2 3
1 3 22 cos(2 ) 3 sin(2 ) cos
2 2 3
A B re a A B re b
ce
A B B re B re c m re
L L i L L i
L L L L i
 

    
                                     
 (16) 
3 ( )
2q ls A B
L L L L    (17) 
From the a-b-c axis to the    axis transformation, one 
can obtain that the fluxes in    frame can be expressed as 
 
2 1 1= ( )
3 2 2
cos( ) [ 3cos( ) 3 sin( )( )]
e ae be ce
ae
re re a re b c B mi i i L
   

   
 

     
 (18) 
and 
 
3 ( )
3
sin( ) [ 3cos( ) 3 sin( )( )]
e be ce
re re a re b c B mi i i L
  
   
 
     
 (19) 
Finally, one can obtain  
1ˆ tan ere
e


 
     
 (20) 
The estimated motor speed can be expressed as 
ˆˆ /re re t     (21) 
One can observe that the estimated rotor position can be 
easily computed from the a-b-c fluxes, , ,ae be   and .ce  As a 
result, the estimated rotor position can be obtained if the a-b-c 
axis fluxes are precisely measured. However, in the real 
world, the a-b-c axis extended fluxes can not be measured 
directly. In fact, the extended fluxes can be obtained from the 
following processes: 
0 0 0 0
0 0 0 0
0 0 0 0
ae a s a q a
be b s b q b
ce c s c q c
v r i L i
v r i dt L i
v r i L i



                                                             
  (22) 
The details of the rotor position estimating technique can 
be expressed as Fig. 1(a). The estimator is derived according 
to equations (18)-(22). In this paper, a DSP is used to execute 
the rotor estimation as shown in Fig. 1(a). 
The proposed method has a better performance than the 
method proposed by the previously published paper [6]. As 
you can see, in Fig. 1(b), the proposed method in the paper 
can obtain the rotor position of the d-axis. However, in the 
previous paper [6], the position of the flux s  is obtained, 
which is the summation of the d-axis position and the load 
angle. In fact, the load angle is related to the external load and 
is very difficult to be measured or estimated. As a result, the 
method proposed in the paper is better than the method 
proposed by previous paper [6]. 
 
av

sr

ai


qL

ae
e
bv

sr

bi


qL

3 / 3
be
cv

sr

ci


qL

ce
3 / 3
 
e
 1tan /e e  
ˆ /re t 
rˆe ˆre  
(a) 
 
s

re
q qL i
 d q d mL L i  
re
di
qi
si
sv q dL i
 
(b) 
Fig. 1 The the proposed estimator 
machine used in this paper. The washing machine was 
manufactured by May-Tag Company in USA. 
 
 
 
(a) 
re
 
(b) 
 
re
 
(c) 
 
rm
 
(d) 
 
Fig. 3 The measured responses. (a) fluxes. (b) rotor position.  
(c) estimating error. (d) speed response. 
 
 
(a) 
 
 
(b) 
 
