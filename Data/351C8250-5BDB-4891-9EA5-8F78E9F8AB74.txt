 2
瑕疵分割效果。因此本研究針對檢測成效
訂定以下規範與目標：1.檢測參數之實驗與
評估。2.透過 ICA 藉由訓練樣本方式找到
能夠代表背景特徵之獨立成份，及應用於
瑕疵影像之偵測，達成離線學習及線上檢
測。 
本研究實驗對象主要以 TFT-LCD 
MURA 瑕疵為例。圖 1 則為低對比度之
MURA 瑕疵影像，此張影像中可看出左上
方有一明顯之月形 Mura 瑕疵，其中
MURA 檢測與群輝點瑕疵檢測較不同的
地方是 MURA 屬於灰度不均，與背景灰度
相異且人眼應可辨識的瑕疵，因此檢測過
程中須加入 MURA 評價方式，以人眼辨識
程度(JND)作為辨識 MURA 之依據。根據
國際半導體設備和材料協會(SEMI) 定義
之 SEMU 指標值進行評價方式[1]，如(1)
式。依據圖 2 所劃分之目標(Object)與背景
(Object-background)區域之亮度關係，計算
目標(Object)與背景(Object-background)之
平均灰階，分別表示為 oI 及 bI 。SEMU 值
訂定則可依欲辨識 Mura 對比度之閥值來
定義。 
 
 
圖 1.Mura 瑕疵影像，影像大小為
1200×1600 
 
 
圖 2.Mura 評價示意圖 
 
0.33
1.97 0.72
x o b
jnd
C I I
SEMU
C
S
−= =
+
      (1) 
 
oI ：MURA 目標區域之平均亮度(Object 
brightness) 
bI ： 背 景 平 均 亮 度 (Object-background 
brightness) 
S：估計MURA 發生區域面積大小，單位
pixel 
xC ：MURA 平均對比，單位%，相對應於
背景 100% 
 
Y. H. Tseng 2003[2]，應用機器視覺於
TFT-LCD 面板之表面瑕疵檢測，將二維
LCD 影像進行二維傅立葉轉換，針對傅立
葉頻譜選取代表面板規律性紋路頻率元素
加以消除，藉由頻譜特徵之去除以刪除
LCD 面板之規律紋路背景；並保留瑕疵能
量在二維傅立葉頻譜中貢獻最多的區域進
行反傅立葉轉換以還原影像，之後藉由二
值化處理將瑕疵區域突顯出來。 
C. C. Chen 2005[3]，使用小波技術檢
測 LCD 面板表面之微觀瑕疵，經由解析的
階數進行局部多個細節與平滑子影像之分
析，以分離影像中重複性規則紋路與瑕
疵，配合影像還原低頻部份影像來突顯微
觀瑕疵。 
C. J. Lu 2005[4]，以獨立成份分析法對
TFT-LCD 面板進行瑕疵檢測，利用獨立成
份分析將面板影像分離成獨立成份及反混
合矩陣，每一個獨立成份皆可用來描述影
像之特徵。 
R. Jenssen，2003[5]利用獨立成份分析
設計濾波器以分割紋路，訓練紋路影像以
行向量方式排列，藉由求得反轉換矩陣 W
即可求得混合矩陣 -1A=W ，其中混合矩陣
中的每個行向量重新排列成二維矩陣，組
成濾波器之基底函數，其基底函數可用來
描述訓練紋路影像之每個方向紋路。 
C. Y. Hung，2004[6]等分別以二維及一
維傅立葉轉換技術找到TFT-LCD表面紋路
之頻率元素，並將之濾除以保留瑕疵點。 
J.-W. Jhou，2005[7]實現多項式背景估
計方法於 TFT-LCD MURA 檢測，並應用自
動對焦理論確保影像品質。 
 4
矩陣 n mW × 則可與待測影像進行運算以獲得
待測影像之獨立成份，如(6)式。瑕疵區域
判別則以獨立成份係數向量之空間距離做
為判別依據[9, 10]，若以空間中的向量來表
示，同性質的向量距離較接近，則可視為
正常區域；而距離較遠的，則視為瑕疵可
能發生區域。偵測步驟如下： 
1. 將待測影像分割為 n n× 大小之子影
像，假設共 l 張。每張子影像轉換為
2 1n × 之行向量。 
2. 利用訓練階段過程中所獲得之反混合
矩陣與子影像行向量進行相乘，求得待
測影像之獨立成份，可獲得共l組獨立成
份，表示為 1/2 , 1, 2,...,Ti iy WD E x i l−= = 。 
3. 計算平均向量 meany 與待測影像之獨立
成 份 iy 之 空 間 距 離 ， 表 示 為
( ) ( ), 1,2,...,Ti mean i mean id y y y y i l= − − =
，並由小至大排序。 
4. 計算空間距離之四分位數(quartile)範圍
1Q 、 3Q ，將k筆空間距離資料由小至大
排序，並分成四等分，其中四分位差
(quartile deviation, Q.D.) 為
3 1. .Q D Q Q= − 。 
5. 決 定 空 間 距 離 閥 值
. .d medianT D Q Dη= + ，其中 medianD  為空間
距離之平均值，η為實驗數據，可藉由
實驗得到最佳數值。假使 id 大於閥值
dT ，則為瑕疵區域，否則為正常區域。 
 
PartB: 以Wavelet檢測MURA瑕疵之理論 
理論說明： 
Mallat[11]從多重解析度表示法的觀
點，導入由 Meyer[12]提出的小波函數 ψ ，
利用單一函數 ψ的二進制伸縮與平移系： 
2
,
( , )
1 2( )
22
j
j n jj
j n
t ntψ ψ
∈Ζ
⎛ ⎞⎛ ⎞−= ⎜ ⎟⎜ ⎟⎝ ⎠⎝ ⎠
  (8) 
構成 Hilbert 空間 2 ( )L \ 的單範正交小波基
底(wavelet orthonormal basis)。 
Mallat[11] 整理出 quadrature mirror 
filters (QMF)，在不同尺度下對 f 加以分解
(decomposition)與重建(reconstruction)。此
概念為子頻帶編碼(subband coding)，如圖 3 
是一維小波轉換的概念圖。 
小波轉換的架構分成兩個部份，一個
是小波分析(wavelet analysis)，另一個則是
小波合成(wavelet synthesis)。首先將原始數
列 與 高 、 低 頻 濾 波 器 分 別 做 旋 積
(convolution)，產生低頻與高頻數列，稱之
為小波係數(wavelets coefficients)。空間域
訊號的分解與重建，將訊號 f 分別由h與 g
濾波器轉換為低頻與高頻訊號，其中分解
的低通濾波器 [ ] [ ]h n h n= − 、高通濾波器
[ ] [ ]g n g n= − ，而 h與 ig 分別為重建的對偶
(dual)低通濾波器與對偶高通濾波器。 
 
 
圖 3.小波分解與重建圖 
 
(一) 雙正交小波基底 
Daubechies 在[13]提出一組 FIR 雙正
交濾波器係數，一般稱為 9-7 tap 濾波器係
數如表 2 所示，這四個濾波器數列只有在
−4≤ n ≤5 之間有非零的值，它的低頻分析
濾波器與高頻合成濾波器有 9 個非零值，
高頻分析濾波器與低頻合成濾波器有 7 個
非零值。9-7 tap 係數具有對稱性，如低頻
分解係數以 n = 0 為中心對稱點。[14]對稱
好處是原始數列轉換成小波數列時仍可以
保留原始數列的週期，反轉換回空間域也
可以保留小波數列的週期。代表經過小波
轉換後的訊號不會有位置偏移的問題，對
於檢測上可以精確的提供其位置的頻率特
性。雙正交濾波器分解與重建訊號關係式
為： 
1[ ] [2 ] [ ]j j
n
a p h p n a n
+∞
+
=−∞
= −∑     (9) 
1[ ] [2 ] [ ]j j
n
d p g p n a n
+∞
+
=−∞
= −∑    (10) 
 i
1 1[ ] [2 ] [ ] [2 ] [ ]j j j
n n
a p h p n a n g n p d n
+∞ +∞
+ +
=−∞ =−∞
= − + −∑ ∑
(11) 
 
 6
再計算此區域所評價出的 Semu 值。 
(k) 求得mura 特徵位置與其Semu 值的檢
測結果。 
 
 
圖 5.基於 DWT 的 mura 檢測流程 
 
在 DWT 的步驟中分解多少 k 階層，
本文是依照 mura 大小來決定，如下所示： 
 Maximum length of the mura defect ≤ 2k
(15) 
因每一階層的分解都是將訊號一分為
二，例如最大長度為 32 像素的特徵點，分
解到第 5 階時其特徵就只剩 1 個像素點。
進一步分解到第 6 階的低頻帶，則沒有此
瑕疵的資訊，可以視為只有背景的資料而
不含 mura 特徵。 
本文分解的階層設定為 6 個階層，有
1 組最粗解析度的近似係數(cA)與 18 組細
節係數 1 18( ... )cD cD 。cD 代表著原始訊號中
的 mura 瑕疵特徵與高頻能量，cA 視為為
原始訊號模糊化的訊號，代表著整體訊號
的趨勢。對於原始訊號不均勻背景亮度可
以從 cA 著手，假設 LCM 的 mura 有兩種
情況如下： 
0wcA = ,白 mura 情形      (16) 
(2 1)nbcA = − ,黑 mura 情形    (17) 
 
    其中 n 代表訊號為 n-bit 的影像，本文
處理訊號為 8-bit 的影像(0~255)，所以 n 設
為 8。 wcA 與 bcA 合成回原始訊號大小分別
預設為 0 與 255 灰階度，可以使 LCM 呈
現的背景亮度不均勻現象消除。 
    由於不確定 cD 中的 mura 分佈情形，
利用鈍化遮罩(unsharp masking)的概念，直
接對每個 cD 乘以同一個常數 ( )ω 如圖 6 所
示，可以突顯出 mura 特徵出來，其關係
式如下： 
's scD cD ω= ×          (18) 
 
 
圖 6.小波正反轉換與小波係數增強 
 
接著 IDWT 回空間域後的訊號 r(x,y)，分
別對白及黑 mura 的情況做調整如下： 
白mura情況- 
' , ( , ) 0( , )
( , ) ,
w
w
w
offset if r x y
r x y
r x y offset otherwise
≤⎧= ⎨ +⎩
 (19) 
黑mura 情況- 
' , ( , ) 0( , )
( , ) [(2 1) ],
b
b n
b
offset if r x y
r x y
r x y offset otherwise
≤⎧= ⎨ + − −⎩
(20) 
    因實際LCM 上的mura 不知道其特性
為白或黑mura，所以將式(20)及(19)相減，
求得瑕疵對應背景的灰階值訊號r(x,y) 如
下： 
' '( , ) ( , ) ( , )w br x y r x y r x y= −      (21) 
把r(x,y)二值化，以型態學處理求得
mura特徵位置，並用Semu判斷標準來鑑別
其瑕疵程度來濾除誤判mura瑕疵。 
 
四、影像自動檢測系統架構與簡介 
本研究的系統架構主要分為光學模
組、三軸定位、控制軟體、影像處理。 
 
4.1 硬體架構 
為了進行自動化影像檢測，本研究使
用 XYZ 三軸線馬機台以進行連續定位拍
攝，此機台靜態精度為 0.02mm。研究中經
由電腦透過運動控制卡將運動命令傳送到
XYZ 三軸定位模組。先在電腦中下達欲選
取的目標位置，透過驅動器接受命令後驅
動馬達系統，為了得知馬達在驅動後之狀
態，需透過任何形式(位置、速度、力矩)
的編碼器(Encoder)來回報給驅動器，並
且，得知馬達目前所存在的狀態。其規格
 8
圖12.Mura瑕疵相對應於原始影像位置之
比較，以紅色區域範圍表示 
 
PartB: 以Wavelet檢測MURA瑕疵之實驗結
果 
利用CIS VCC-8850CL彩色CCD拍攝
17吋測試面板，如圖13所示。根據圖5流程
進行實驗，調整小波係數增強倍數與斷開
半徑結構元素。實驗中發現斷開半徑結構
元素越大，背景雜訊可以有效的濾除(圖
14，圖15)，但缺點是若瑕疵的面積過小，
則很容易被斷開處理濾除掉。而增強係數ω 
越大越能突顯瑕疵的特徵，也有抑制背景
雜訊的效果，若ω過小mura 瑕疵特徵的強
度會與背景雜訊差不多。 
若為了精確判別瑕疵，前述抑制背景
雜訊的方法可以省略，可以用Semu 判別來
過濾誤判的瑕疵。相對的，標記與評價的
計算量會嚴重造成過長的檢測時間。 
 
 
圖13.Test#1 Mura 測試圖 
  
表2 
 
 
表3 
 
 
 
圖14. ω =10 (a)半徑4 pixel (c) 5 pixel (e) 6 
pixel (g) 7 pixel ; (b)(d)(f)(h)分別為
(a)(c)(e)(g)的檢測結果，白框為Semu評價大
於2 的範圍。 
 
 
圖15.ω =120 (a)半徑4 pixel (c) 5 pixel (e) 6 
