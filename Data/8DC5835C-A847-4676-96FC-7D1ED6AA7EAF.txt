1行政院國家科學委員會專題研究計畫成果報告
用於老人健康照護之無線感應器網路研究與實作(3/3)
計畫編號：NSC 96-2745-E-252-004-URD
執行期限：96 年 8 月 1 日至 97 年 7 月 31 日
計畫主持人：林正敏 南開科技大學電腦與通訊工程系
共同主持人：尤正祺 逢甲大學通訊工程學系
計畫參與人員：邱仁成、李錫平、陳雍傑、
張俊銘、呂正雄、楊政衛
一、中文摘要
隨著微機電、無線通訊、數位電子等
技術的進步，使得我們有能力去發展具有
低成本、低功率、具多功能特性且可在短
距離通訊之輕薄短小的感測器節點。每個
節點可以分成感測、資料處理、通訊等三
個主要元件，而由大量的這類節點相互合
作所組成的網路便是無線感測器網路。本
計畫為三年期計畫，其主要目的是實作及
研究如何使用藍芽技術及ZigBee技術設計
用於老人照顧的無線感應器網路。本計畫
第一年主要的工作，是利用 ARM 微控器
結合藍芽技術來發展無線感應器，該微控
器可以用來收集感知器的訊號或控制致動
器的動作，第二年計畫完成無線感知器網
路的雛型，最後一年的研究將利用此無線
感知器網路來提高老人就地老化的生活品
質以期減少健康照顧的費用。
關鍵詞：無線感知器網路、擴展網路、服
務品質、藍芽、ZigBee、ARM、就地老化。
Abstract
Recently, with recent advances
in micro-electro-mechanical systems,
wireless communications, and digital
electronics, facilitate us to develop
low-cost, low-power, and
multifunctional sensor nodes
which are small in size but able to
communicate in short distance. A
wireless sensor network consists of a
large number of nodes. Each node
consists of sensing, data processing,
and communicating components.
The purpose of this project is to
implement and research how to use
Bluetooth and ZigBee technologies
to design a wireless sensor
network for caring older adults.
This project will be developing for
three years. In the first year,
an ARM-based wireless sensor
node will be implemented to
either collect sensor’s signals or 
control actuator’s action. In the
second year, a sensor network
prototype had been implemented. In
the last year, a variety of
technologies in the wireless
sensor network had been applied for
the older adults to aging in place,
with improving the quality of
3三、系統架構
我們希望提供一個新的居家照護系統
的架構，當醫護人員或老年人的家人在照
護過程中，預防老年人發生緊急事件或發
生後的協助處理機制。在此架構中，所有
接受照護的老年人家，其住所將建置許多
感測的裝置來持續監控其活動記錄。另
外，人體每日健康狀態的監測則由穿戴於
老年人身上的裝置來記錄，這些裝置包含
脈搏、體溫、血糖及緊急求救等功能。最
後，所收集的資料將即時的被分析，並傳
送到遠端的健康照護中心，以完成一個完
整的監控週期。
ABA（Activity Behavior Analysis）主
機用於收集老年人所居住的週遭環境變化
及生理資訊，並與 ABA 主機內部所預先設
計的各項參數進行分析比對，其結果透過
網路通訊方式與遠端健康照護中心的
MMS（Mission dispatch and Message send
Service）主機聯繫。老人的活動慣性、生
理狀態及環境因素等訊息，只要違反 ABA
系統資料庫所定義的內容，所產生的警告
訊息將被傳送至 MMS 主機，MMS 主機收
到後將依訊息內容及危險等級進行處理，
並通知醫護人員甚至直接呼叫救護車前
往。而老人的家人也將在同一時間收到健
康照護中心所傳送的訊息。
1. 健康照護監控系統架構
健康照護監控系統由兩個部分所組
成，如圖 3.1 所示。第一個部分是每一位老
人所居住的環境，在這一個環境中，系統
上包含 ABA 主機，以及為了取得空間內各
種實體或物理的變化資訊，而建置於各種
家電設施、環境上以及老人身上，具有無
線通訊能力的裝置所組成。ABA 主機在這
套系統中，扮演著閘道器（Gateway）的角
色，負責收集空間內所有的資訊，並完成
與資料庫所設定的條件比對分析，所收集
的資訊及分析的結果則透過網路再傳送至
遠端的健康照護監控中心。
圖 3.1 健康照護監控系統示意圖
第二部分是健康照護監控中心，在這
一個中心內，設置有一部 MMS 主機，其
首要功能為接收由各個老人住所內的 ABA
主機所傳送過來的資訊，這些資訊儲存於
MMS 主機的資料庫後，可經由網頁瀏覽的
方式，來進行即時及歷史資料的查詢。因
此，老人的家人一旦通過認證便可進行完
整的瀏覽及查詢。另外，MMS 主機的另一
項功能為事件的通知，它將依收到的訊息
指示來告知醫護人員、家人，甚至於啟動
老人住所內的安全機制或派遣救護車前
往。
2. 居家環境架構
在這一個環境中，部署了許多感測裝
置用來記錄老人的生活起居等活動。另
外，老人身上亦會配戴生理訊號的量測裝
置，例如：量測體溫、脈搏等。依據每一
位老人的生活慣性及身體條件，需事先將
這些資訊融合並轉化為定則，然後儲存於
每一位老人住所當中的 ABA 主機。環境中
的每一種感測裝置，都分別被視為一個通
訊節點，這些節點也個別內嵌著一顆微算
器，可執行一些簡單的資料處理工作，例
如：感測物理或實體的狀態變化、運算、
5四、系統建置
本研究計畫為三年期之整合型計畫，茲就
三年中所完成之成果分述如下：
1、第一年
1.1 感知器設計
由於半導體與積體電路的發展迅速，
使得模擬人類頭腦的電腦發展神速，但人
體有五官的感覺可以向人腦發出信號，因
此電腦也需要一種可以模擬人類五感信號
的信號檢知器，因此才有各種模擬人類五
感的感知器(Sensor)被發展出來，感知器可
以替代或超越人類的五官感覺，而檢測出
人類可以或無法感覺的現象，例如光照度
的感知或是紅外線的感知等；感知器對欲
測定的物理量，需經過轉換器(Transducer)
將物理量轉換成可量測的量，但考慮到轉
換後的信號處理、測定的難易程度與精度
等因素，一般將欲檢測之物理量轉換成電
氣性（電流、電壓、阻抗等）的輸出，當
然也有轉換成他種物理量檢測的方式，例
如彈簧秤就是將一種將重量物理量轉換成
位移物理量的感測方式。
感知器依據待測之外界信號轉換為電
氣信號之原理，概分成物理感知器、化學
感知器與生物感知器等三種。其中物理感
知器主要工作元素為電子，是目前應用較
為廣泛的感知器，例如光感知器、溫度感
知器、振動感知器、位準感知器、壓力感
知器等等。而化學感知器是利用物質與感
知器間的化學吸附來檢測，相較於物理感
知器，就顯得複雜與富於變化，氣體感知
器、溼度感知器、酸鹼感知器等皆屬於化
學感知器。為了補足化學感知器因離子種
類的多樣性，所造成化學感知器較不具識
別能力的缺點，因此發展出生物感知器，
其主要工作元件為生物的蛋白質分子，因
該物質只會與特定物質發生反應，因此具
有選擇性，例如酵素感知器，利用酵素的
識別性，已經發展出選擇性相當優秀的感
知器。
本研究計畫主要應用層面為人體的監
測系統，因此為了發展後續的無線感知監
測系統，乃採用在產品的技術層面與可信
度上已相當成熟的溫度感知器，在以溫度
感知器為基礎架構下發展整個無線感知系
統，待系統架構完後，在擴及他種人體生
理狀態之監測，溫度感知器通常利用熱電
偶、電阻式溫度探測器或熱敏電阻
(Thermister)等熱電裝置來完成，這些熱電
裝置就是將熱轉換成相關的電流或電壓位
準而顯現出來，在轉換過程中會利用到西
白克(Seebeck)效應、柏爾提(Petier)效應或
法拉第(Faraday)效應，已開發出來之溫度
感知器種類繁多，但本研究計畫中有關人
體溫度感知時，考慮到必須隨時處於監控
狀態，因此採用接觸式溫度感知器中的 IC
化溫度感知器，此感知器可量測的範圍雖
較它種溫度感知器小，僅從-55°C～150°
C，但已足以供人體溫度量測使用，且其溫
度與輸出電壓間良好的線性關係，使用時
不需要外部校正，其具有每攝氏溫度一度
0.1V（0.1 V/oC）的輸出特性，便於作為電
壓與溫度間之轉換；本感測器設計成能提
供 4 個連接埠，一次可提供四組量測數
據，電路與配置分別如圖 4.1、4.2 所示。
圖 4.1 四連接埠之溫度感知器電路
7(subtree)，b 介於 0-s 之間。要注意的是
每一主節點(master)最多只能有 6 個子
節點，而不是 7 個，這是因為在微網中，
包含了一個此主節點的橋接節點。
3. 每一位於偶數層的節點，若為橋接節點
最多只有 l-1 個子節點，l 需大於 1。
4. 所有的樹葉點都是從節點。
5. 所有非樹葉點且位於奇數層的節點都是
主節點，而其他非樹葉點且位於偶數層
的節點不是橋接節點就是從節點。
圖 4.4 Bluetree# (s, b, l) 之通用樹狀結構
圖 4.5 和 4.6 舉例說明兩個不同 s, b, l
Bluetree#完全樹樣本： 兩個樣本有相同的
主節點和橋接節點，分別為 21 和 10 節點，
Bluetree#(4, 3, 3)有 54 個從節點，Bluetree#
(5, 3, 3) 則有 75 個從節點。Bluetree++(s,b)
和 Bluetree#(s, b, 2)是指相同的樹狀結構，
當 l 大於 2 時，Bluetree#的節點總數比
Bluetree++來的多，表示 Bluetree#有較好的
擴充性。
圖 4.5 A Bluetree#(4, 3, 3)六層完全樹
圖 4.6 A Bluetree#(5, 3, 3) 六層完全樹
2.2 無線感知器實作
CSR (Cambridge Silicon Radio) [8]
BlueCore 2 外部晶片是被用來發展藍芽通
訊網路，此晶片包含以下裝置如圖 4.7 所
示 ： 無 線 調 變 器 (radio
modulation/demodulation device)、微處理機
控制單元(MCU)、RAM、數位訊號處理器
(DSP)、輸出入介面(I/O interfaces)等。輸出
入介面包含 SPI、通用非同步收發傳送器
(UART)、通用序列匯流排(USB)、PIO、脈
波編碼調變器(PCM)等通訊介面。用此晶片
來發展藍芽模組並增加電子零件電容電阻
(XTAL)和 8 Mbit flash ROM。
2.4GHz
Radio
RAM
DSP
MCU
I/O
RF IN
RF OUT
Up to 8Mbit
Flash ROM
XTAL
SPI
UART/USB
PIO
PCM
圖 4.7 BlueCore2 External Block Diagram
此模組在 flash ROM 裡嵌入了 HCI
stack、RFCOMM stack 和 SDP stack，HCI
stack 是為了實作藍芽散射網路而被使用，
其韌體版本為 HCIStack 1.1v16.4 [103]，
UART 介面是為了可以在主機和藍芽模組
間通訊而設計的，電路圖如圖 4.8 所示。在
個人電腦實作部分，UART 信號可以經由
HIN-232 晶片被轉換成 RS-232 訊號。藍芽
模組的電壓為 3.3 伏特，因此訊號轉換應該
在 5 伏特 RS-232 訊號和 3.3 伏特 UART 訊
號。發展藍芽散射網路面臨的重要問題是
如何讓韌體支援散射網路，SPI 介面連接
器被使用在 Persistent Store (PS) 工具去安
裝韌體的設定，比如開啟支援 2.5 piconets
設定等。
9下列為某一個節點的 XML 的格式設定：
001 <xml version=”1.0”encoding=”Big5”?>
002 <!------define actuator device------>
003 <nodeProfile>
004 <nodetype=“actuator” vendor=“NKC” 
description=“control the window”>
window controller</node>
005 <data type=“boolean” description=“open”>1</data>
006 <data type=“boolean” description=“close”>0</data>
007 <locationId name=“living room”>1</location>
008 <address>0002</address>
009 </nodeProfile>
3.2 感測裝置的初始化
圖 4.11 節點初始化示意圖
圖 4.11 為感測裝置初始化設定的流
程。當有一個新設裝置欲加入系統環境之
內，該裝置基本屬性必須事先設定，例如
該裝置在網路上的識別位址、閘道器的識
別位址、感測器類型、裝設地點及資料格
式等等。我們可用電腦終端機透過 USB 或
序列埠來與裝置連接，並完成上述之參數
設定。各種裝置之間為了將資訊傳達到
ABA 主機，這些的裝置都必須扮演著橋接
點的角色。
一旦新設裝置的參數設定完成，在啟
動後，此一節點將自動地找尋閘道器，並
傳送資料封包。當閘道器收到此一封包
後，它會將封包解析並存入 ABA 主機資料
庫中，然後 ABA 主機會指定一組裝置的識
別編號及裝設地點的識別編號，回傳至該
節點。在完成此一設定流程後，裝置節點
便自動依自訂的 XML 格式產生資料封包。
3.3 ABA伺服主機
每一個居家環境內都會有一部資料庫
主機稱之為 ABA 主機。ABA 主機前端內
建著閘道器用來接收環境內所有節點的訊
息封包。當系統在初始化的過程中，為了
能讓新設裝置能融入系統，新設裝置除依
上一節方式完成參數設定外，ABA 主機提
供一個視覺化界面，可讓使用者來決定是
否要接受此一節點。此一視覺化界面亦可
提供規則定義的設定，並完成感測資料的
分析。ABA 主機主要可分為感測裝置管理
及訊息事件管理兩部分，其基礎內容皆儲
存於資料庫。在此，我們有一個資料庫稱
之為情境感知資料庫，它由裝置描述表、
規則描述表、人物描述表及動作描述表所
組成。例如，居家環境內與老人身上所攜
帶的裝置的基本資料，都必須被登錄在此
份裝置描述表內。動作描述表則記載著曾
接受遠端控制的事件。除了資料庫外，ABA
主機內部有一 XML 解析器，用來解析由各
裝置節點所傳輸過來的訊息。
3.4 MMS伺服主機
MMS 主機設置的目的是為了提供健
康照護監控中心一個監控管理的界面。它
透過TCP/IP網路協定可接收由各個居家環
境所傳達的訊息封包，這些訊息封包內容
包含著老人各項健康資訊，活動情形及裝
置的狀態等。MMS 內部三個模組單元負責
所有程序運作，一為訊息傳送模組，二為
遠端控制模組，三為資料檢索模組。訊息
傳送模組透過 GPRS 來通知各所屬人員。
遠端控制模組利用 TCP/IP 協定與各 ABA
主機溝通，取得授權後可直接操作家用電
器。資料檢索模組提供完整醫療資訊、老
