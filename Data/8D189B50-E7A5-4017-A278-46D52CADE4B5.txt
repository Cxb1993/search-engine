2 
 
行政院國家科學委員會專題研究計劃成果報告 
晶圓製造廠考量製程規格能力限制與鎖定機台限制 
之產能分配與投料規劃(2/2) 
Capacity Allocation and Job Releasing Planning for Wafer Fabrication 
with the Constraints of 
Process Window and Machine Dedication 
計畫編號：NSC –95-2221-E-009-152 
執行期限： 95年 08月 01日至 96年 07月 31日 
計畫主持人：鍾淑馨  交通大學工業工程與管理學系 教授 
計畫參與人員：鍾一平、王耀陞、李孟儒 
一、中文摘要 
本計劃第一年度針對微影工作站具有垂直鎖定機台與製程規格能力限制之
製程環境下設計一微影工作站產能配置模式，並追求解題時間之縮短；第二年度
則建構一適用於先進製程環境下之主生產排程規劃流程。立基於第一年之產能需
求配置模式，第二年之主生產排程之擬定包含生產週期時間估算模組、產能利用
率最大差異設定模組與投料規劃模組。生產週期時間估算模組在降低生產週期時
間變異的前提下，建構兩混合整數規劃模式進行產能負荷分配，據以估算出於此
先進製程下微影與蝕刻兩工作站內之各機台利用率；並進而針對同一工作站各機
群間具利用率差異之情境，發展一估算出各產品之生產週期時間之方法，以作為
細部排程正確推估工作站負荷時點之依據。產能利用率最大差異設定模組，則是
控制機群利用率最大差異值，目的在於避免微影與蝕刻工作站內的機群利用率與
工作站平均利用率差異過大，導致通過微影與蝕刻工作站之產品的生產週期時間
產生大幅變異，喪失各產品之生產週期時間競爭力。本計劃更於此模組中針對整
體利用率不足，及生產週期時間過長兩種不同情境，發展出生產計劃調整模式來
調整主生產排程之產出目標。投料規劃模組旨在兩工作站內各機群利用率具有差
異之情境下，以均勻微影工作站內各機群內機台之負荷水準為主要概念，制定投
料順序、並配合固定在製品量投料法則與派工法則。依此流程，可產生一考量製
程規格能力與垂直鎖定機台限制下之主生產排程規劃結果。 
驗證結果顯示，考量機群間利用率差異下之生產週期時間估算法，所估算的
各產品之生產週期時間與模擬相比，最大誤差約在 8%，平均誤差約在 5%。而
「產能利用率最大差異設定模組」之調整模式，能快速調整出合理之主生產排
程，而「投料規劃模組」之設計，使得現場之生產運作除能達到預定產出目標外，
微影與蝕刻工作站內各機台亦能維持所規劃之產能利用率。 
 
4 
 
本計劃第二年度之工作旨在將第一年度之產能配置模式與生產計劃之擬定相結
合，以確保顧客訂單交期之達成。因此本年度之研究目的在於保障生產系統維持
達交績效之前提下，擬定一適用此先進製程下之主生產排程規劃結果。故本年度
之預定達成下列目標： 
1. 分別進行微影工作站、蝕刻工作站內各機台利用率與各工作站平均利用率之
估算與差異分析，並發展生產週期時間之估算方法，以評估主生產排程規劃
結果之可行性。 
2. 引入業界之 X-factor標準，將之與生產週期時間做比較，以作為是否調整生
產計劃之判斷標準。 
3. 發展生產計畫調整模式：因應各個不同情境下之需求，發展對應之生產計劃
調整模式，以產生能提升主生產排程績效之生產計劃。 
4. 依據主生產排程計劃，設定現場在製品量與派工法則，並根據微影與蝕刻工
作站之產能配置結果，制訂投料計劃，以使微影與蝕刻工作站內各機群內機
台之負荷水準均勻化。 
三、文獻探討 
製程規格能力與垂直鎖定機台相關文獻之探討 
3.1、製程規格能力之問題定義 
製程規格能力(capability)係指為達成某一特定之製程作業，機台所必須具備
之特定的製造能力。在同一工作中心的機台，可能因為機台之技術層次、穩定性
等差異，造成該工作中心內，各個機台各自擁有不同的製程規格能力。現場作業
員在進行派工作業時，必須先判別該製程步驟之製程規格之限制，並挑選具有該
製程規格能力的機台來進行加工作業。因此，產能的供給將不再以該工作站的機
台數目多寡來表示，而是以具有特定製程規格能力的機台數目來表示。Chung and 
Huang[1]描述了三種製程表達法，茲將其個別之意義及優缺點 
1. 機台觀之製程表示法 
優點：此種製程表達法係在每一個製程步驟上，詳細記錄可以執行該製程步
驟之機台集合。缺點：由於各製程規格能力所對應之機台集合，此種製程表達法
所訂定的製程在實務上會隨著製造管理需求、製程演化、機台穩定性變異等因素
影響發生動態變動的現象。此種現象將造成龐大的製程資料維護的工作，在實務
應用上存在著不可行性。 
2. 工作中心觀之製程表示法 
優點：此種製程表達法係在每一個製程步驟上，明訂該製程步驟應在哪一個
工作中心進行作業。缺點：各製程步驟被侷限在某特定工作中心加工，使得不同
工作中心的機台，喪失了相互支援的能力，造成無法充分有效的運用機台產能。 
3. 製程規格能力觀之製程表示法 
優點：透過製程規格能力之訂定，連結製程步驟與機台產能之供需關係，因
6 
 
黃氏[9]參考 Chung and Huang之 COLA演算法與 Sule氏之網路基礎指派法
(Network-based assignment)，考量產品在關鍵層垂直鎖定機台的限制、DUV 
scanner 和 DUV stepper關鍵機台之製程能力不同的問題，進行短期的產能需求
規劃，期望能在考慮產能負荷平衡的情況下進行工單指派的機台的工作。 
黃氏[4]則針對綁機與製程規格能力特性限制，於細部產能規劃階段，發展
(Capacity Allocation Problem for Photolithography Area；CAPPA)之混合整數規劃
模式，以追求各機台間產能利用率平準化為目的，對於微影工作站內機台做出綁
機與符合機台製程規格之指派。之後並針對混合整數規劃模式求解時間較長的缺
點，將 CAPPA問題轉換成限制滿足問題(Constraint Satisfaction Problem；CSP)，
並提出負荷不平衡上限值之設定值，進一步縮短求解時間。 
四、研究方法 
4.1、問題定義與分析 
晶圓製造廠傳統上均將各工作站內之機台視為等效平行機台來進行主生產
排程之規劃，此種規劃方法於今日強調高階製程之製程規格能力與垂直鎖定機台
之限制下，可能使得主生產排程發生規劃上的錯誤，進而影響後續的細部排程結
果。因此，於今日高階製程之環境下，實需將製程規格能力與垂直鎖定機台限制
給納入考量以進行主生產排程之規劃。 
然而微影與蝕刻兩工作站內之不同機群因為機台功能性之強弱，產生利用率
差異不均的情況發生。此情況將導致工單在通過微影與蝕刻兩工作站可能會產生
對於生產週期時間的變異，進而影響公司的競爭力，因此實需發展一估算此利用
差異下之生產週期時間估算方法。並且為了兼顧公司競爭力與生產績效，本計劃
進一步了考量到若是兩工作站內機群與工作站平均利用率差異過大，可能對於生
產週期時間會造成過大的變異，故必要去設定兩工作站內機群之間之利用率的最
大差異，來限制規劃幅度內的工單生產週期時間過度的拉長，最後當產出目標與
各產品之週期時間確定之後，於得知微影工作站內機群間與機群內設定利用率分
佈之情況，設定現場在製品量與發展派工法則，並以均勻微影工作站內各機群內
機台之負荷水準為主要概念，制定投料計劃以產生最終主生產排程規劃結果。 
4.2、整體邏輯與架構 
本計劃所建構晶圓製造廠考量製程規格能力限制與鎖定機台限制之產能分
配與投料規劃，其規劃架構如圖 1所示。 
在本年度晶圓製造廠考量製程規格能力限制與鎖定機台限制之產能分配與
投料規劃架構中，本計劃先以「生產週期時間估算模組」估算出各產品於微影和
蝕刻兩工作站發生利用率差異之情況下生產週期時間的改變，以作為產能利用率
最大差異模組之輸入，來確認目前之主生產排程規劃是否可行。此模組考量到微
影與蝕刻工作站內機台群的功能性強弱，導致機台間之利用率差異所引發之生產
週期時間改變，透過兩個混整數線性規劃模式，以機台間利用率差異平準化為目
標，妥善的分派各機台之加工產能，並且估算出於微影與蝕刻工作站利用率差異
下各產品之生產週期時間。 
8 
 
4.3、生產週期時間估算模組 
由於上層規劃者所設定之產出目標與產品組合，在微影與蝕刻工作站內各機
台功能有強有弱之機台組態下，可能影響各產品之生產週期時間。因此本模組將
針對目前產品組態所引發之微影與蝕刻工作站之機群利用率具有差異情境下，估
算出各產品之生產週期時間，以作為之後「產能利用率最大差異值模組」來評估
是否需要調整產出目標與產品組合之評斷依據。 
4.3.1、微影工作站機群產能負荷分配模式 
微影工作站機群產能負荷分配模式之主要功能，是針對微影工作站內區分出
強弱機台群之機台組態，以機群之間利用率差異最小化為目標，考量產品各層級
之製程規格能力與關鍵層垂直鎖定機台之限制，將月產出目標以加工層級/製程
規格為單位將產能分配到各機群。而本計劃主要是希望透過機群負荷分配模式求
得工作站內利用率差異最小之情境，以使生產週期時間變異最小化。其規劃步驟
與數學模式如下：(符號表請參見附錄) 
步驟一：首先將微影工作站之各機台，依其所具備之製程規格能力進行機群
之切割，然後考量維修與當機比例，如式 1，計算出微影工作站內各機群之實際
可用機台數。 
÷
÷
ø
ö
ç
ç
è
æ
+
-
+
-´=
)()(
1
,,
,
,,
,
,,
mwmw
mw
mwmw
mw
kwkw MTBPMMTPM
MTPM
MTBFMTTR
MTTR
cAm  式 1 
步驟二：根據產出目標與產品比例，依式 2 計算出微影工作站內加工產出
目標之所需產能。 
å
=
´=
I
i
iiww DPTDCap
1
, )(  式 2 
步驟三：依式 3，計算出微影工作站之平均產能利用率，以作為輸入微影工
作站產能負荷分配模式之輸入參數。 
w
w
w SCap
DCapAL =  式 3 
Ø 微影工作站機群產能負荷分配模式 
u 目標函數 
Minimize å -+ +k kpkp uu )( ,,  
式 4 
限制式：  
ååå =
l
lii
l k
lk
p JzAx
kli ,,
)(
,,
                         ， i"  式 5 
åå =
l
ii
k
lklii
p JCzACRJCy
ki
)()( ,,,                     ， i"  式 6 
å åå -+=- -+
l
pkp
l
lkliii
p
kilki
p
i
kpkp ALACACRpJCyApxuu kli ,,,,,,, /),, ， k"  式 7 
10 
 
+
mu ,
-
mu 0³        ， m"  式 19 
)1,0(,, ÎmliY ， i"  l"  m"  式 20 
步驟六：依照微影工作站機台產能負荷分配模式配置結果，並搭配式 11所
計算出之各產品各製程規格平均加工時間，以式 21計算出各機台平均加工每個
層級之加工時間。(求算各機台平均加工每個層級之平均時間，是將各產品各製
程規格平均加工時間乘上其分配量，再除以該機台之總配置量。) 
åå
åå ´
=
i l
p
mli
i l
li
p
mw x
px
PT
mli
,,
,
,
)(
,,
， m" (單位:分鐘) 式 21 
步驟七：考量當機與預防保養兩項因素，透過式 22~式 24計算出微影工作
站內各機台理論服務時間 mwTST , 、各機台之期望有效服務時間 )( ,mwPE ，與各機
台之有效服務率 mw,m  
mw
mw
mwmw ABS
TPS
PTTST
,
,
,,
+= ， m"            (單位:分鐘) 式 22 
)1()( ,,,, mwmwmwmw PMDTTSTPE ++´= ， m" (單位:分鐘) 式 23 
)(
1
,
,
mw
mw PE
=m ， m"                   (單位：lot/分鐘) 式 24 
步驟八：透過微影工作站機台產能負荷分配模式各機台配置結果，以式 25
計算出各機台之平均來到率。 
6024
,,
, ´´
=
åå
T
x
i l
p
mli
mwl ， m"           (單位：lot/分鐘) 式 25 
步驟九：透過式 26，計算出微影工作站內各機台之產能利用率。 
mwmwmw ,,, / mlr =    ， m"  式 26 
步驟十：依照步驟一區分之微影工作站內之每一機群，計算出各機群之平均
產能利用率，如式 27。 
kw
kMm
mw
kw c
U
,
)(
,
,
å
Î=
r
， k"  式 27 
4.3.2、蝕刻工作站機群產能負荷分配模式 
由於蝕刻工作站產能負荷分配模式的規劃理念，與微影工作站大致相同，唯
12 
 
工作站之獨立在製品量，本計劃因而假設系統中之工作站皆為獨立之工作站且符
合 M/M/k 等候模式之使用情境，以此等候模型來進行不同利用率負荷之機群之
等候時間估算，其公式如式 34～式 36。 
Ø 等候理論公式 
1
1-c
0n
0
!
1
n!
)(
 
k
-
= ïþ
ï
ý
ü
ïî
ï
í
ì
ú
ú
û
ù
ê
ê
ë
é
÷÷
ø
ö
çç
è
æ
-´
´
÷÷
ø
ö
çç
è
æ
÷÷
ø
ö
çç
è
æ
+ú
û
ù
ê
ë
é
= å
kkk
kk
k
c
k
k
n
kk
k c
c
c
P
k
lm
m
m
lml  式 34 
2
01c
k
)1)(!(
)(c k
kkk
kk
kkk cc
P
cL
r
r
r
-´
´
+´=
+
 
式 35 
kk
k
Q μ
1
λ
L T -=
 
式 36 
步驟一：由微影工作站機群產能負荷分配模式，可得知各產品各製程規格之
分佈，故採用加權平均的概念來求得各種產品各層級之平均等候時間，如式 37。 
ili
k
U
kilkil nzWfT /å= , Ii Î" , Ll Î"  for Photo, Etch Area 式 37 
步驟二：求得各產品各層級平均等候時間之後，由各產品所具有各製程規格
之層數，加總即可求得該產品於微影工作站、蝕刻工作站之平均等候時間，如式 
38。 
å=
l
ilili nTQ , Ii Î"               for Photo, Etch Area 式 38 
4.3.2.2 批量因子等候時間 
黃氏[10]將源自批量因子之等候時間與理論週期時間合併，發展出批量因子
流程時間演算法(Batching-factor flow time estimation algorithm；BFFT)。BFFT依
據物流相似性，將複雜的晶圓製程分解成為獨立的區段和子區段，並發展出各子
區段所對應之週期時間估算模型。而所謂區段(block)，包含製程中裡相鄰的批次
製程步驟，及介於其中之所有序列製程步驟之集合。依照晶圓廠製程與設備特
性，大抵可以區分為特殊型區段(SB 型、BB 型與 BS 型)與一般型區段(BSB 型)
共四種區段。 
黃氏認為[10]區段內之物流掌控於三個重點觀測點(前批次機台、後批次機台
及產出最慢的序列工作站)，只要確認出這三個重點觀測點，在區段物流中所扮
演的關鍵角色及其交互作用的影響，就可以有效掌握整個區段工件批的流速變
化，作為每一個區段批量因子等候時間之估算基礎。詳細請見[10]。 
本計劃將透過修正流經過微影工作站之 BSB 區段估算方法，爾後稱之為
BSBP，“ P ”表微影工作站(PhotoLithography)之意，來反應本計劃環境所產生微
影工作站內機群利用率差異之情境，換言之，本計劃透過估算出 BSBP區段流程
時間，並加總 BBCT 生產週期時間估算法中 SB 區段、BS 區段、BB 區段、與
BSB區段便完成 BBCT-VU批量因子等候時間之估算。 
BFFT法，僅將各產品依照其製程步驟切割，來估算各產品之批量因子流程
14 
 
於目前之生產計劃做出調整，本計劃將於 4.4.1節中詳細說明兩種情境下之生產
計劃調整模式，而此模組詳細規劃流程如圖 2。 
4.4.1 兩工作站負荷分佈互動性分析與訂單調整 
於此小節中，本計劃將透過生產計劃調整模式來對於主生產排程結果做出更
動與調整，然而此調整情境有兩種，分述於下： 
情境一：現有產出目標與產品組合，透過微影工作站機群產能負荷分配模式
與微影工作站之機台產能負荷分配後，經 BBCT-VU估算而得知各產品之生產週
期時間，通過 4.4節中之判斷流程，確認各產品大多都能夠於 X-factor之標準內
順利產出。此情境代表系統在此產出目標下仍有餘裕之產能，且生產績效(生產
週期時間)良好。本計劃在此情境下將設計一增加產量之生產計劃調整模式，在
期望達到之產能利用率水準下，挑選產品及其對應之增產量以增加利潤，其數學
規劃模式如下。 
Ø 問題模式 
u 目標函數 
Maximize  å +´
i
ii rP )(  式 43 
限制式:  
åå å+=
l k l
liilk
p JrAx
kli ,,
)()(
,,
                    ， i"  式 44 
åå +=
l k
iilklii
p
ki JCrACRJCy )()( ,,,                ， i"  式 45 
å å å ´-=+
i l
kpkp
l
lkilii
p
lki
p CapALAWApCRJCyApx
kikli ,,,,,
)()(
,,,
， k"  式 46 
0
,,
³p
kli
x                                   ， i"  l"  k"  
式 47 
0, ³
p
kiy                                      
， i"  k"
 
式 48 
0³+ir  and are integer                       ， i"
 
式 49 
情境二：即目前之產出目標與產品組合，透過本計劃產能利用率最大差異設
定模組之判斷邏輯，確認出生產計劃並非為一規劃良好之主生產排程計劃，此
時，便需對此生產計劃做出調整之動作。然而各產品需求的結構不一，因此首先
必須透過 4.3.1～4.3.2 節產能負荷分配之資訊，得知微影與蝕刻兩工作站內各機
群之利用率差異狀況。由於蝕刻工作站之加工時間非常一致，因此並不會導致有
產能利用率差異過大之情況發生，因此，本計劃於此處只考量微影工作站之產能
利用率差異大於蝕刻工作站之情況，此狀況下首要目標便是以縮小微影工作站之
負荷差異狀況為主，蝕刻工作站則為輔。 
而此生產計劃調整模式之主要目的，期望能透過調整各產品生產數量，來達
16 
 
 
圖 2、產能利用率最大差異設定模組流程圖 
4.5投料規劃模組 
進行「投料規劃模組」時，由於已產生最終主生產排程，故本計劃僅需依據
最後確認的產品組合與產出目標做出投料規劃。而於此模組中，將規劃週期內之
目標產出與產品組合，與 4.3.1節微影工作站機群產能負荷分配模式作為輸入，
計算出瓶頸每日之作業數，並引入鄭氏[11]之投料規劃方法，規劃選擇投料晶圓
批次 。 
現場投料方面，本計劃採用 CONWIP 固定在製品投料方法，即系統產出引
發投料，由於先前學者們之研究證實固定在製品投料方法能夠維持系統生產週期
時間的穩定[10][13][14]，因此本計劃將透過 Little’s Formula求得系統最適之在製
品數量，藉由在製品量的控制來維持系統生產週期時間之品質，而投料規劃規劃
模組流程如圖 3。
18 
 
數時，才允許投入系統，其規劃流程如圖 4。 
而於本計劃投料規劃不只考量產品組合之組成，仍須考量到微影工作站機台
負荷分配模式結果，並依據各產品第一層級分配於各機群之負荷狀況來進行投
料，以避免投料時，大量投入同一機群內生產之產品，而使得該機群前之在製品
量遽增，其他機群前之在製品量太少。考量此因素進行投料規劃之動作，可使微
影工作站內各機群之負荷均勻化。 
因此本文在制定投料順序的邏輯，乃透過兩個階段的方式，來決定出最後的
投料順序。首先，在第一階段中，吾人只考量產品組合均勻化來制定出投料計畫，
其規劃流程如圖 4，接著再於第二階段中，將機台負荷納入考量來調整原先制定
之投料順序，如圖 5，以產生最後投料規劃之投料循環表。 
 
 
圖 4、第一階段投料時點判斷流程圖 
20 
 
之最適在製品量。 
( ) å´+=
i
iL LL s1
 
式 65
 
4.5.4派工法則之設計 
本計劃將具有製程規格能力工作區內之機台依功能性區分為機群，為使模擬
驗證結果符合 4.3.1節中各機台產能利用率之估算結果，故將依機台群組之特性
來進行工作站內機台派工法則之設計。主要以雙界法為概念並以產品達到平準化
產出為目的，來設定各產品各層級之每日產出層級數之上限。 
步驟 1：令 ( dliM , =
d
iO )即可求算出每天各產品各層級之產出數。本計劃便會
將此參數引入生產系統裡，規範出微影工作站內所有機台每日加工各產品各層級
之總量，必須滿足此參數並且搭配雙界法之派工理念，如此一來系統內各產品才
能夠每日平順的產出。
五、實例驗證 
在本節實例驗證中，本計劃將設定微影與蝕刻工作站內各機台之製程規格能力與
各產品之組態。此生產系統之情境為生產邏輯與記憶體等五種產品，其各產品各
層級之製程規格與微影、蝕刻工作站內各機台之製程規格能力，請參見李氏
[15]。為驗證本計劃第二年度所發展晶圓製造廠考量製程規格能力限制與鎖定機
台限制之產能分配與投料規劃之成效，本計劃以eM-plant來撰寫模擬程式，用以
驗證本計劃中生產週期時間模組之估算成效。此外，也驗證本計劃內產能差異最
大差異模組中，以業界X-factor資訊作為判斷主生產排程是否良好之依據與生產
計劃調整模式之調整效率，並與生產週期時間估算模組之輸出資訊相輔相成，以
產生最後之主生產排程計劃。最後，對於最終確定之主生產排程計劃，設定現場
最適在製品量與設計派工法則，並於均勻微影工作站內之各機台負荷進行投料計
劃，使微影工作站內之機台可以維持預定之產能利用率水準[15]。 
 
六、第二年研究成果與結論 
茲將本計劃第二年之研究成果說明如下： 
在第二年之計劃中，本研究提出晶圓製造廠考量製程規格能力限制與鎖定機
台限制之產能分配與投料規劃。在此研究中，透過生產週期時間估算模組，求得
微影與蝕刻工作站內機群利用率差異下之生產週期時間，並用此資訊輸入產能利
用率最大差異模組中，並引入業界規範之 X-factor標準來評斷目前之生產計劃是
否為一考量製程規格能力與垂直鎖定機台限制下之良好主生產排程計劃。接著，
透過產能最大差異設定模組中所發展之兩種情境下之生產計劃調整模式，針對生
產計劃結果所發生之問題，快速調整主生產排程之產出目標，並輔以生產週期時
間估算模組之估算資訊，產生最終主生產排程計劃並確保生產績效(生產週期時
間)符合業界 X-factor 之規範。最後，本計劃於投料規劃模組中，依據主生產排
程計劃，設定現場在製品量和設計派工法則，使現場運作結果能達到預定產出目
22 
 
參考文獻 
[1] Chung, S. H., and Huang, H. W., “Loading Allocation Algorithm with Machine 
Capability Restriction for Wafer Fabrication Factories,” Journal of the Chinese 
Institute of Industrial Engineering, Vol. 18, No. 4,pp. 82-96, 2001 
[2] Leachman, R. C., and Carmon, T. F., “On Capacity Modeling for Production 
Planning with Alternative Machine Types,” IIE Transactions, Vol. 24, No. 4, 
pp62-72, 1992. 
[3] Toktay, L. B., and Uzsoy, R., “A Capacity Allocation Problem with Integer Side 
Constraints,” European Journal of Operational Research, Vol. 109, pp. 170-182, 
1998. 
[4] Chung, S. H., Huang, C. Y., and Lee, A. H. I., “Capacity allocation model for 
photolithography workstation with the constraints of process window and 
machine dedication,” Production Planning and Control, Vol. 17, No. 7, 678–688, 
2006 
[5] Chung, S. H., and Huang, H. W., “The Block-Based Cycle Time Estimation 
Algorithm for Wafer Fabrication Factories,” International Journal of Industrial 
Engineering, Vol. 6, No. 4, pp.307-316, 1999. 
[6] 黎翠綾，「黃光區機台群組限制下的投料派工研究」，國立交通大學工業工程
與管理研究所，碩士論文，2000. 
[7] 游淑晴，「黃光區關鍵層機台限制機台指派投料與派工法則探討」，國立清華
大學工業工程研究所，碩士論文，2002。 
[8] 楊桂峰，「流量平衡為導向的黃光區綁機派工法」，國立交通大學工業工程與
管理研究所，碩士論文，2002。 
[9] 黃慧雲，「具垂直鎖定機台特性下產能需求規劃之設計－以晶圓廠黃光區為
例」，國立交通大學工業工程與管理研究所，碩士論文，2005。 
[10] 黃宏文，「晶圓製造廠區段基礎式週期時間估算法」，國立交通大學工業工程
與管理研究所，博士論文，2002年。 
[11] 鄭照明，「晶圓廠交期指定模式之構建」，國立交通大學工業工程研究所，
碩士論文，1996。 
[12] 柯文清，「晶圓製造廠多工單等級下生產規劃模式之構建」，國立交通大學工
業工程與管理研究所，碩士論文，2000。 
[13] 陳志強，「多工單等級下晶圓廠生產週期時間估算模式」，國立交通大學工業
工程與管理研究所，碩士論文，2000。 
[14] 梁宇帆，「薄膜電晶體陣列廠機台配置機制之構建」，國立交通大學工業工程
與管理研究所，碩士論文，2006。 
[15] 李孟儒，「晶圓製造廠考量製程規格能力與垂直鎖定機台限制下主生產排程
修正機制」，國立交通大學工業工程與管理研究所，碩士論文，2007。 
24 
 
)( ,mwPE ：為工作站 w內機台 m的期望有效服務時間。 
liE , ：為產品 i製程規格能力 l且加工時間為 17分鐘之層級數。 
liJ , ：產品 i所具有非關鍵層且製程規格能力 l之層級數。 
iJC ：為產品 i所具有的關鍵層層級數。 
total
iJ ：為產品 i的總層級數。 
e
ilJE ：產品 i所具有蝕刻作業且製程規格能力 l之層級數。 
liL , ：為產品 i製程規格能力 l且加工時間為 42分鐘之層級數。 
mwMTTR , ：為工作站 w機台 m之平均當機時間(mean time to repair)。 
mwMTBF , ：為工作站 w機台 m之平均當機間隔時間(mean time between failure)。 
mwMTBPM , ：為工作站 w機台 m平均維修間隔時間 
mwMTTPM , ：為工作站 w機台 m平均維修時間 
iwp , ：即產品 i每層級於工作站 w之平均加工時間。 
lip , ：為微影工作站內產品 i製程規格能力 l之平均加工時間。 
iwPT , ：為產品 i於工作站 w之總加工時間 
mwPT , ：為工作站 w機台 m加工一層級所需的平均加工時間。 
mwPM , ：為工作站 w內機台 m的平均預防保養時間比例。 
wSCap ：為工作站 w之月產能。 
mwTST , ：為工作站 w內機台 m 的理論服務時間。 
mwTPS , ：為工作站 w內機台 m中成批加工的設置時間。 
kwU , ：為工作站 w內機群 k之平均產能利用率。 
26 
 
Ø 生產週期時間估算模組之負荷因子等候時間符號表： 
kL ：代表工作站內機群 k的在製品水準。 
0
kP ：代表工作站內機群 k的在製品水準為 0的機率。 
QT ：代表工作批流經該機群所耗費之平均等候時間。 
iln ：表示產品 i所具有製程規格能力 l之層級數。 
ilkf ：為產能負荷分配模式當中所求解出包含關鍵層與非關鍵層，產品 i製程規
格能力 l分配到機群 k的層級數量。 
U
kW ：表透過M/M/c等候模式，工件於機群 k且產能利用率 U下估算之負荷因
子等候時間。 
ilT ：代表產品 i製程規格能力 l的平均每層級之負荷因子等候時間。 
iQ ：代表產品 i之平均總負荷因子等候時間。 
Ø 生產週期時間估算模組之批量因子等候時間符號表： 
max
ijB ：表示第(i,j)區段之後批次工作站之最大載入批量(maximum batch size)。 
min
ijB ：表示第(i,j)區段之後批次工作站之最小載入批量(minimum batch size)，此為該
機台所設定之最低必須同時作業之晶圓批量。 
max
l)M(i,B ：表示第 i種製程之第 l個製程步驟，其所對應之工作站之最大載入批量。 
min
(c)ijB ：表示第(i,j)區段之關鍵工作站之最小載入批量；(若此關鍵工作站為序列工作
站，則 1=min(c)ijB )  
p
ijCycletimeBlock _ ：表示第(i,j)區段且經過微影工作站之 BSB
P區段流程時間。 
),( liMc ：表示第 i種製程之第 l個製程步驟，所對應之工作站之可用機台數。 
28 
 
工件批流過前區段( FijS )所須之流程時間。 
n
ijBT )( ：表示第(i,j)區段中的「後區段流程時間(back-end block flow time)」。 
n
ijcT )( ：表示第(i,j)區段中的「關鍵工作站流程時間」。其等於 n 個工件批流過關鍵工
作站所須之流程時間。 
n
ijmT ：表示第 i種製程之 n個工件批，由第 j個區段流過第 k個區段所須之流程時間。 
kO ：表示第 k工作站之最大產出速率。 
),( liMt ：表示第 i種製程之第 l個製程步驟，其所對應之工作站之WIP累積速率。 
),( liMx ：表示第 i種製程之第 l個製程步驟，其所對應之工作站之實際載入批量。  
ú
ú
ù
ê
ê
é
y
x ：為一非負整數，係等於 x除以 y之餘數無條件進一位。 
ú
û
ú
ê
ë
ê
y
x ：為一非負整數，係等於 x除以 y之餘數無條件捨去。 
產能利用率最大差異設定模組符號表： 
kAL ：表示機群 k之產能利用率。 
AW ：調升產出目標所欲達到的產能利用率。 
kCap ：機群 k之可用產能。 
iCT ：表示透過 BBCT-VU估算之產品 i的平均生產週期時間。 
factorx
iCT
- ：表示產品 i經由 X-Factor標準換算之可容許最長生產週期時間。 
iE ：表示產品 i的總加權提前完工時間。 
iP：表生產一個產品 i之利潤。 
+
ir ：代表調升產品 i的個數。 
-
ir ：代表調降產品 i的個數。 
30 
 
 
行政院國家科學委員會專題研究計劃成果報告 
晶圓製造廠考量製程規格能力限制與鎖定機台限制 
之產能分配與投料規劃(2/2) 
計畫類別：R 個別型計畫  □ 整合型計畫 
計畫編號：NSC –95-2221-E-009-152- 
執行期間：  95年 8月 1日至  96年 10月 31日 
計畫主持人：鍾淑馨  交通大學工業工程與管理學系 教授 
計畫參與人員：鍾一平、王耀陞、李孟儒 
 
成果報告類型(依經費核定清單規定繳交)：□精簡報告  R完整
報告 
 
本成果報告包括以下應繳交之附件： 
□赴國外出差或研習心得報告一份 
□赴大陸地區出差或研習心得報告一份 
R出席國際學術會議心得報告及發表之論文共兩篇各一份 
□國際合作研究計畫國外研究報告書一份 
 
 
處理方式：除產學合作研究計畫、提升產業技術及人才培育研究
計畫、列管計畫及下列情形者外，得立即公開查詢 
          □涉及專利或其他智慧財產權，□一年R二年後可公
開查詢 
          
執行單位：交通大學工業工程與管理學系 
中   華   民   國 九十五年 七月 三十一日 
 
附件一 
32 
 
驗證結果顯示，考量機群間利用率差異下之生產週期時間估
算法，所估算的各產品之生產週期時間與模擬相比，最大誤差約
在 8%，平均誤差約在 5%。而「產能利用率最大差異設定模組」
之調整模式，能快速調整出合理之主生產排程，而「投料規劃模
組」之設計，使得現場之生產運作除能達到預定產出目標外，微
影與蝕刻工作站內各機台亦能維持所規劃之產能利用率。 
 
技術說明 
英文： 
Under an advanced technology environment, this project built the 
capacity allocation model for photolithography area (CAPPA) which 
has the constraint of process window and machine dedication and then 
solve CAPPA problem with an efficient way in the first year. Based on 
the capacity allocation model built in the first year, this year, we 
develop a mechanism for planning master production schedule with 
the MPS revising mechanism. The MPS planning mechanism involves 
cycle time estimation module, the controlling of maximum utilization 
difference module, and material release planning module. The cycle 
time estimation module mainly use two mix-integer programming to 
allocate capacity loading between machine groups for minimizing the 
variability of product cycle time. The utilization rate of each machine 
group within photo and etching workstation is then derived. Next, the 
cycle time of each product will be estimated under different utilization 
rates of machine groups existed in photo and etching workstations. In 
the controlling maximum utilization difference module, a value is set 
as the maximum utilization difference between machine groups for 
photo and etching workstations to avoid the product cycle time being 
lengthened due to the too large machine utilization difference. In this 
module, we also develop production plan adjusting models for the too 
low average utilization rate and too long cycle time scenarios to revise 
the production target. Finally, we proposed a material release planning 
module to balance the machine utilization between groups by setting a 
release sequence, adopting CONWIP release rule and developing 
dispatching rules. Following the above procedure, a reasonable master 
production schedule under constraints of process window and 
machine dedication is obtained. 
Experiment reveals that comparison the estimated cycle time 
with that of the simulation result, the maximize error is within 8% and 
the average error is about 5%. Besides, by controlling of maximum 
34 
 
之成果，這項規劃流程應能協助實務界在考量製程規格能力
與垂直鎖定機台限制下訂定出良好主生產排程計劃。 
※ 1.每項研發成果請填寫一式二份，一份隨成果報告送繳本會，一份送 
貴單位研發成果推廣單位（如技術移轉中心）。 
※ 2.本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。 
 
表 Y04 
27. Wireless and Ad-Hoc Networking (WAD 07) 
28. Workshop on Internet Communication Security (WICS 07) 
29. Wireless Sensor Networks (WSNs 07) 
由於大會議題多元，且論文發展之篇數甚多，每日由 10:30開始至 17:30，共分為七個
場地(A、B、C、D、E、F與 G場地)，每天三個場次，進行論文發表。本次的投稿數共有
1250篇，僅有 300篇被接受，因此論文素質頗高。延續 ICCSA2006之狀態，南韓參與之學
者仍是相當地多，台灣學者於文章中列名者，亦有數十人。 
個人所投稿之論文，歸類於 Optimization：Theories and Application ”(OTA 2007)。此
workshop內發表之論文計 14篇，全以 Optimization為目標，涵蓋範圍包括： 
z Large Scale Optimization 
z Network Optimization 
z Stochastic Optimization 
z Global Optimization 
z Fuzzy Optimization 
z Scheduling 
z Replenishment Policy 
z Supply Chain Management 
z Production Planning and Control 
z Manufacturing Systems 
z Inventory Control and Material Flow 
    此等課題與工業工程學門高度相關，所發表之論文大多是以建構作業研究或數理模式之
方式求解實務問題之最佳化。 
二. 與會心得 
現場參與會議之成員中，來自南韓之教授與博士生群相當多，此大規格之出席人數，顯
得南韓政府為提供其國際上之學術聲望，大力培育人力並在出國經費上給予足夠之支援，值
得我國政府借鏡。個人所參與之 OTA 07 Work shop，亦有數位南韓 Hanyan University之教授
擔任主事成員。 
此次會議分成 29個 workshop，每一 workshop之主題明顯聚焦，使參與者對其他發表者
之論文主題或工具略有了解。而每一篇有 20分鐘之發表與問答時間，足以讓現場人原有足
夠之提問與回答互動，讓與會者有所收穫。 
此次大會發表之所有論文，皆經過兩或三位 reviewer之全文審查，由於被選出之長篇論
文刊登於 Lecture Notes in Computer Science (LNCS)期刊，而短篇則刊登於 IEEE CS，因此投
稿者眾，選拔亦嚴，使得現場所發表之論文都有良好之水準。整體而言，此次會議值得參與。
三. 考察參觀活動(無是項活動者省略)：無 
四. 建議：無 
五. 攜回資料名稱 
LNCS 4705~4707, Proceedings of International Confernece on Computational Science and Its 
Application – ICCSA 2007, Kuala Lumput, Malaysia, Aug. 26-29, 2007, Springer。光碟及紙本
(Part I)各一。 
 
768 A.H.I. Lee, S.H. Chung, and C.Y. Huang 
 
This is very different from wafer fabrication which have both serial-type and 
batch-type (i.e. several lots can be processed concurrently at a time) machines. As a 
result, the cycle time of TFT-array is relatively stabilized. 
Steppers in the photolithography area are the most expensive machines in a TFT-array 
factory and are usually treated as the bottleneck resource in the factory. Based on the 
fundamental concept of the theory of constraints (TOC), the performance of a system is 
determined by the bottleneck resource in that system [3]. Consequently, a good ar-
rangement of steppers is essential. To the authors’ knowledge, the scheduling problem 
for the TFT-array factory has not been tackled up to now. The reason is probably because 
the environments of TFT-array factory and wafer fab are very similar and the scheduling 
problem of wafers fabs has already been researched extensively [9, 10, 6, 2]. In fact, the 
TFT-array factory manufactures enormous glasses, and the masks used by steppers are 
much larger than the ones used in a wafer fab. Therefore, the transportation time and 
setup time of masks among machines account for quite a remarkable proportion of total 
process time. Chern and Liu (2003) is the only one that studies the mask resource prob-
lem, and has proposed a dispatching rule, named family-based stepper dispatch algorithm 
(SDA-F), to shorten mask setup time. However, a TAFSP problem not only needs to 
consider mask setup time, it also needs to consider mask availability constraint, process 
window constraint, machine dedication constraint and mask transportation characteris-
tics. These characteristics will be covered in Section 2. 
The rest of the paper is organized as follows. In section 2, the TFT-array factory 
scheduling problem (TAFSP) is defined and a demonstrative example is given. In 
section 3, an integer programming model is proposed to solve the TAFSP problem. 
Section 4 examines the practicality of the proposed model by solving the demonstrative 
example to show its usability. In Section 5, a real-world example taken from a 
TFT-array factory located in the Science-Based Industrial Park in Taiwan is given, and 
the problem is solved by the proposed model to show its applicability. In the last sec-
tion, some concluding remarks are made. 
 
Fig. 1. Process steps of a TFT-array substrate 
2   Problem Description 
2.1   The TFT-Array Factory Scheduling Problem (TAFSP) 
The photolithography process aims to transfer circuit pattern from mask to the surface 
of glasses so that the functions of final products can be achieved. Different machines 
770 A.H.I. Lee, S.H. Chung, and C.Y. Huang 
 
tation time of a mask between two machines is 10 minutes, and the setup time for 
changing a mask is 5 minutes. The system produces two kinds of 14-inch glasses, 
product A and B. The process time, average layer flow time, required process window 
and dispersion of critical layer operations for each layer of each product are summa-
rized in Table 2. In order to facilitate the presentation of the example and to show the 
results, layer flow time is not considered in this simplified example. Thus, we assume 
the average layer flow time of each product be zero. 
Table 1. Process window of machines (TAFSP example) 
Process window Machine no. 1 2 3 
1 1* 1 0 
2 1 1 1 
* 1 means that the machine has this certain process capability; 0 means that the machine 
does not have this certain process capability. 
 
Table 2. Process time, layer flow time, process window and critical layer activity of each product 
(TAFSP example) 
Layer no. Product 
type 
Number of 
jobs 1 2 3 4 
A 1 (29,0,2,1)* (30,0,1,0) (49,0,2,1) (38,0,1,0) 
B 2 (29,0,2,1) (30,0,1,0) (49,0,2,1) (38,0,1,0) 
* The four numbers represent the process time (min./lot), layer flow time (min.), process window 
and whether or not a critical layer(critical layer=1, not a critical layer=0), respectively. 
 
 
Fig. 2. A feasible schedule for the TAFSP example 
Fig. 2 shows a feasible solution for the TAFSP problem. The notations in each op-
eration stands for the product type, job number and layer number, and the notation with 
underline represents that it is a critical operation. The total completion time is 1639 
minutes based on the calculation of the completion time of all layers. The critical layer 
activities of job 1 of product A and job 1 of product B are processed by machine 2, 
while those of job 2 of product B are processed by machine 1. The scheduling result 
shows a total of ten mask change operations, and the idle capacity of machines is 50 
minutes (= 5×10). 
Fig. 3 shows the optimal solution of this TAFSP problem, and the total completion 
time is 1524 minutes. The critical layer activities of job 1 of product A are assigned to 
machine 2, and those of job 1 and 2 of product B are assigned to machine 1. Under this 
772 A.H.I. Lee, S.H. Chung, and C.Y. Huang 
 
zero; otherwise, the value is set to 5 minutes (for the example in section 
2.2).  
W Machine available capacity. 
Decision Variables: 
ijkdm  If the first critical layer operation of job j in product type i is assigned to 
machine k, then ijkdm =1; otherwise, ijkdm =0. 
tijlk The starting process time of layer l of job j in product i in machine k.  
lijju '  Precedence variable of a mask. If the mask of layer l in product type i used 
by job j precedes job j', then 1' =lijju ; otherwise, 0' =lijju . 
xijlk If layer l of job j in product type i is assigned to machine k, then xijlk = 1; 
otherwise, xijlk = 0. 
kljijl iy '''  Precedence variable of machine k. If the operation of layer l of job j in 
product type i precedes the operation of layer l' of job j' in product type i' on 
machine k, then 1''' =kljijl iy ; otherwise, 0''' =kljijl iy . 
The integer programming model 
The following integer programming model is constructed to find a schedule for the 
TAFSP problem without violating the machine capacity, mask resource, process 
window and machine dedication constraints. 
Objective function: 
The objective function is to minimize the total completion time of jobs 
(∑ ∑ ∑
= = =
+
I
i
J
j
K
k iLkijL
i
ii
pt
1 1 1
)( ).  Due to the fact that processing time of each job is ma-
chine independent, the objective function implies the minimization of machine setup 
time and the maximization of machine utilization, i.e., minimizing the total workload in 
bottleneck workstation. 
The TAFSP problem has the reentry characteristic, and the process of layers of each 
job has a precedence order (i.e. layer l must be processed before layer l+1). Therefore, 
with the consideration of minimizing the work-in-process in the system, a objective 
function that is based on the completion time of each layer, is more suitable. Hence, the 
objective function is modified as ∑ ∑ ∑ ∑
= = = =
+
I
i
J
j
L
l
K
k ilijlk
i i pt
1 1 1 1
)( . Our experiments 
show that the modified objective function has a better solving speed. 
Minimize  ∑∑∑∑
= = = =
+
I
i
J
j
L
l
K
k
ilijlk
i i
pt
1 1 1 1
)  (  
Subject to 
774 A.H.I. Lee, S.H. Chung, and C.Y. Huang 
 
scheduled on machine k* ( 1*' =lkijx ), i.e., either constraints (8) or constraints (9) must 
hold. 
0  3) -     Q(   -    '*'*'*
 
≤+++++ lijjlkijijlklkijkkilijlk uxxtPTpt   , for all i, j, l, k (8) 
0  2) -  -   Q(   -     '*'**'
 
≤++++ lijjlkijijlkijlkkkillkij uxxtPTpt   , for all i, j, l, k (9) 
Machine dedication constraints: 
The constraints in (10) guarantee that the critical layer operations of job j with 
product i must be processed on the same machine.  
∑∑
==
×=×
ii L
l
ilijk
L
l
ilijlk CLdmCLx
11
  , for all i, j, k (10) 
Starting process time constraints: 
The constraints in (11) guarantee that the starting process time of each job in ma-
chine k must be greater than or equal to the sum of completion time of the preceding job 
and required mask setup time.  
The constraints in (12) guarantee that the starting process time of layer l of job j in 
product type i must be greater than or equal to the sum of the completion time of pre-
vious layer ( )1()1(   −− + liklij pt ), the flow time of layer l to photolithography workstation 
( ilFT ) and the mask setup time ( illiST  )1( − ). Notice that when l = 1, the kijklij tt 0)1( =− = the 
release time of job j in product type i, and 0)1( =−lip . 
The constraints in (13) guarantee that the completion time of layer l of job j in 
product type i ( ilijlk pt + ) must be within the planning period.  
0  1) - ( Q        ''''''''
 
≤+−++ kljiijlkljililiilijlk ytSTpt   , for all i, j, l, k (11) 
*         
 )1()1()1( ijlkilliilliklij tSTFTpt ≤+++ −−−   , for all i, j, l, k (12) 
ijlkilijlk xpt  ) - (PP  ≤   , for all i, j, l, k (13) 
Decision variables: 
1} {0,∈ijkdm   , for all j, k (14) 
0≥ijlkt   , for all i, j, l, k (15) 
776 A.H.I. Lee, S.H. Chung, and C.Y. Huang 
 
Table 3. The optimal solution for the TAFSP example 
The objective value and the solution time 
Integer optimal solution:  Objective =  1524 
Solution time =  91.38 sec.   Iterations = 80798   Nodes = 10110 
The statistics of the model 
Constraints: 1020   [Less: 870,  Greater: 132,  Equal: 18] 
Variables: 198   [Nneg: 24,  Binary: 174] 
The values for all variables 
Name Value Name Value Name Value 
dm[A,1,M2] 1 x[A,1,3,M2] 1 y[B,1,1,A,1,2,M1] 1 
dm[B,1,M1] 1 x[A,1,4,M2] 1 y[B,1,1,B,1,3,M1] 1 
dm[B,2,M1] 1 x[B,1,1,M1] 1 y[B,1,1,B,2,1,M1] 1 
t[A,1,1,M2] 0 x[B,1,2,M2] 1 y[B,1,1,B,2,3,M1] 1 
t[A,1,2,M1] 63 x[B,1,3,M1] 1 y[B,1,1,B,2,4,M1] 1 
t[A,1,3,M2] 99 x[B,1,4,M2] 1 y[B,1,2,A,1,3,M2] 1 
t[A,1,4,M2] 196 x[B,2,1,M1] 1 y[B,1,2,A,1,4,M2] 1 
t[B,1,1,M1] 0 x[B,2,2,M2] 1 y[B,1,2,B,1,4,M2] 1 
t[B,1,2,M2] 34 x[B,2,3,M1] 1 y[B,1,2,B,2,2,M2] 1 
t[B,1,3,M1] 98 x[B,2,4,M1] 1 y[B,1,3,B,2,3,M1] 1 
t[B,1,4,M2] 153 y[A,1,1,A,1,3,M2] 1 y[B,1,3,B,2,4,M1] 1 
t[B,2,1,M1] 29 y[A,1,1,A,1,4,M2] 1 y[B,1,4,A,1,4,M2] 1 
t[B,2,2,M2] 64 y[A,1,1,B,1,2,M2] 1 y[B,2,1,A,1,2,M1] 1 
t[B,2,3,M1] 147 y[A,1,1,B,1,4,M2] 1 y[B,2,1,B,1,3,M1] 1 
t[B,2,4,M1] 206 y[A,1,1,B,2,2,M2] 1 y[B,2,1,B,2,3,M1] 1 
u[B,1,2,1] 1 y[A,1,2,B,1,3,M1] 1 y[B,2,1,B,2,4,M1] 1 
u[B,1,2,2] 1 y[A,1,2,B,2,3,M1] 1 y[B,2,2,A,1,3,M2] 1 
u[B,1,2,3] 1 y[A,1,2,B,2,4,M1] 1 y[B,2,2,A,1,4,M2] 1 
u[B,1,2,4] 1 y[A,1,3,A,1,4,M2] 1 y[B,2,2,B,1,4,M2] 1 
x[A,1,1,M2] 1 y[A,1,3,B,1,4,M2] 1 y[B,2,3,B,2,4,M1] 1 
x[A,1,2,M1] 1     
All other variables are zeros. 
Table 4. Process window of machines in the real case 
Process window Machine no. 1 2 3 
1 1* 1 0 
2 1 1 1 
3 1 1 1 
4 1 1 1 
5 0 1 1 
* 1 means that the machine has this certain process capability; 0 means
that the machine does not have this certain process capability. 
each product is required to go through photolithography operations five times. Product 
A and B are 15-inch glasses, and product C and D are 17-inch glasses. Currently, there 
are ten jobs waiting to be scheduled, and the schedule results must satisfy the con-
straints such as mask resource, process window and machine dedication constraints. 
The detailed information of products and number of jobs is shown in Table 5. 
Next, a model is built by software ILOG OPL 3.5 [4] to solve the problem. In this 
constructed model with real TFT-array factory information, there are a total of 6,700 
variables and 46,230 constraints. The solving process of integer programming problem 
is time-consuming and needs large memory nodes. In order to solve the problem more  
778 A.H.I. Lee, S.H. Chung, and C.Y. Huang 
 
for solving discrete combinatorial optimization problems efficiently [8, 5, 1]. For a 
large-scale TAFSP instance, the integer programming model can be integrated with the 
constraint programming for solving TAFSP in an efficient way. Therefore, this can a 
future research direction. 
Acknowledgements 
The authors would like to thank the National Science Council, Taiwan, R.O.C., for 
support under contract no. NSC-95-2221-E-009-152. 
References 
1. Aron, I., Hooker, J.N., Yunes, T.H.: SIMPL: A system for integrating optimization tech-
niques. In: Régin, J.-C., Rueher, M. (eds.) CPAIOR 2004. LNCS, vol. 3011, pp. 21–36. 
Springer, Heidelberg (2004) 
2. Chern, C.C., Liu, Y.L.: Family-based scheduling rules of a sequence-dependent wafer fab-
rication system. IEEE Transactions on Semiconductor Manufacturing. 16(1), 15–25 (2003) 
3. Goldratt, E.M., Cox, J.: The Goal: A Process of Ongoing Improvement. 2nd edn. North 
River Press, New York (1992) 
4. ILOG Inc.: ILOG OPL Studio 3.5. ILOG Inc. France (2001) 
5. Jain, V., Grossmann, I.E.: Algorithms for Hybrid MILP/CP Models for a Class of Optimi-
zation Problems. INFORMS Journal on Computing. 13(4), 258–276 (2001) 
6. Kim, S., Yea, S.H., Kim, B.: Shift scheduling for steppers in the semiconductor wafer fab-
rication process. IIE Transactions. 34(2), 167–177 (2002) 
7. Quirk, M., Serda, J.: Semiconductor Manufacturing Technology. Prentice-Hall, Englewood 
Cliffs (2001) 
8. Rodošek, R., Wallace, M.G., Hajian, M.T.: A New Approach to Integrating Mixed Integer 
Programming and Constraint Logic Programming. Annals of Operations Research. 86, 
63–87 (1999) 
9. Uzsoy, R., Lee, C.Y., Martin-Vega, L.A.: A Review of Production Planning and Scheduling 
Models in the Semiconductor Industry (I): System Characteristics, Performance Evaluation 
and Production Planning. IIE Transactions. 24(4), 47–60 (1992) 
10. Uzsoy, R., Lee, C.Y., Martin-Vega, L.A.: A Review of Production Planning and Scheduling 
Models in the Semiconductor Industry (II): Shop-Floor Control. IIE Transactions. 26(5), 
44–55 (1994) 
11. Wolsey, L.A.: Integer Programming, 1st edn. Wiley-Interscience, New York (1998) 
表 Y04 
我們希望可以在未來互相交換研究意見心得。第一天的會議結束之後，我們這一場次的會議
主席宣布，OTA07是所有場次中報告率最高者(12/15)，這個消息非常值得大家振奮，同時也
希望 OTA能夠繼續在 ICCSA中進行。 
 
二. 與會心得 
 
此次參加國際研討會，藉由論文的發表、討論與交流，學生體認到許多國外學者在基礎
學理上極為紮實，且對許多研究議題具有不同的看法。在與國外學者作面對面的接觸之後，
學生發現很多新的研究議題正在被討論，因此，還需要多努力從事研究與學習，來彌補自己
之不足。綜合言之，吾人認為，多鼓勵研究學人出席國際研討會，對於一位研究學者的訓練
與養成，是非常需要且極具意義的。 
 
另外，參加此次研討會，除了研討會本身的內容之外，我們更因為進入馬來西亞的國境，
而能夠對於當地的文化特色與都市的進步繁榮有更進一步的認識。有鑑於此，學生建議政府
當局，多多爭取主辦研討會的機會，讓世界各地的人能夠有機會多認識美麗的台灣。最後，
學生非常感謝上級單位給予經費上的支援，讓我能有機會出席國際場合，並增廣見聞。 
 
三. 考察參觀活動(無是項活動者省略)：無 
 
四. 建議：無 
 
五. 攜回資料名稱 
 
Proceedings of International Conference on Computational Science and Its Application (ICCSA 
2007), Kuala Lumpur, Malaysia, Aug. 26-29, 2007, Springer。光碟及紙本(Part I)各一。 
 
 Collaborative Production-Distribution Planning 861 
variable processing capability, in order to minimize the total production cost.  The 
SPTS provider should also solve a transportation problem by putting different orders 
into the transportation routes to reduce the total transportation cost. Because the process 
capabilities of machines are different and the number of machines and the amount of 
parts in each outsourcing factory are different, each factory has a production limit for 
each kind of products, and this issue must be considered in order allocation.  In 
addition, the required process time on bottleneck machines for different products even 
under the same production process may be different.  Therefore, in calculating capacity 
loading of factories, we should examine the total process time on bottleneck machines 
to ensure the factories being operated under the total capacity constraint.  To 
summarize, wafer fabricators need to solve a supply-chain level, instead of a 
company-level, planning for the production and distribution for the SPTS. 
Semiconductor manufacturing supply chain has the characteristics of vertical 
integration.  Collaborative production-distribution planning is essential to successfully 
manage the supply chain. William [13] is the first to present simultaneous  
joint production–distribution scheduling, with the objective of minimizing the average 
 
Front-End Process Planning Back-End Process Planning
Manufacturing Process Flow Management
wafer out
bank
FAB-N-
FAB-1-1 Wafer Sort-1
f r 
rt-1
Wafer 
Sort-N
afer 
rt-
Assembly
1
sse ly
1Wafer
Supplier-1
f r
lier-
Wafer
Supplier-N
f r
lier-
Die
bank-1
ie
a k-1
Die
bank-N
ie
-
Assembly
N
sse ly
Package
Supplier-1
acka e
lier-1
Package
Supplier-Nlier-
Final Testing
bank
Cu
s
to
m
e
rs
Cu
s
to
m
er
s
Global Supply Chain Management
Testing-1sti -
IC
bank-N
I
k-Testing-Nesti -
IC
bank-1
I
-
Cu
s
to
m
e
rs
Cu
s
to
m
er
s
@HSP
@CTSP
@HSP
@STSP @CTSP
@HSP @CTSP
@STSP
HSP: Hsinchu Science Park
CTSP: Central Taiwan Science Park
STSP: Southern Taiwan Science Park
HSP: Hsinchu Science Park
CTSP: Central Taiwan Science Park
STSP: Southern Taiwan Science Park
   
Fig. 1. Semiconductor manufacturing supply chain (e-foundry) [7] 
inventory and operation cost in the supply chain.  Cohen et al. [2][3] propose a 
collaborative production-distribution planning model to generate material requirement 
planning, production planning, and inventory and distribution planning.  
Dhaenens-Flipo and Finke [5] solve a network-based production-distribution problem 
for a production environment with multi-sites, multi-products and multi-periods. 
Among all these researches, some only concern with single process stage [2][3], and 
the others do not joint the route planning in the distribution planning even though the 
factors above are considered[5][13]. Therefore, these models cannot be applied to a 
more complicated supply chain, such as semiconductor manufacturing.  
The collaborative production-distribution planning for SPTS, with the consideration 
of both route planning and capacity allocation, is similar to the traveling purchaser 
problem (TPP).  Ramesh [11] is the first to solve the traveling purchaser problem (TPP) 
by proposing the lexicographical search algorithm, which searches the solutions by the 
product title order.  Golden et al. [6] proposes generalized saving algorithm (GSA), 
which begins the search from the market with the most product types to construct the 
preliminary route. A market can be selected into the route if the saved purchasing cost 
 Collaborative Production-Distribution Planning 863 
outsourcing factories’ responsibility, we only need to consider the departure 
transportation cost in the model.  The semi-finished products of semiconductor 
products (wafer, die or integrated circuit) are very small; therefore, one vehicle is 
needed to transport these products even when there are many different orders. 
3   An Integer Programming Model 
An integer programming model is constructed here to solve the production and 
distribution planning for SPTS, with the objective of minimizing the total production 
and transportation costs.  We have to consider the processing capability, maximum 
capacity of each product type, and total capacity, of each outsourcing factory, in order 
to assign orders to the appropriate outsourcing factories.  The transportation route that 
has the lowest transportation cost, i.e. shortest route, is found under the constraint that 
the route must cover all the outsourcing factories that have been assigned orders.  
Finding the shortest route that connects all nodes is in the category of the popular 
traveling salesman problem (TSP) [4].  In addition, each market will only be visited 
once in the optimal solution while the route distance among nodes satisfies triangle 
inequality [1]. This also means that the shortest path connecting all nodes will form a 
complete route.  As defined in the problem, the sizes of semi-finished semiconductor 
products are very small, and all the delivery in a day can be transported by a single 
vehicle once. Therefore, forming a complete closed circuit is not only a feasible 
solution, but also the optimal solution. 
Subscripts: 
i, j Index of factories, where i=1,...,n and j=1,...,n. 
k Index of product-stage, where k=1, 2, …, e, e+1, …, e+f, e+f+1, …, e+f+g. 
Index of product type in probing/testing, where k=1, 2, ..., e. 
Index of product type in assembly, where k=e+1, e+2, ..., e+f. 
Index of product type in final testing, where k=e+f+1, e+ f+2, ..., e+f+g. 
e Number of product types waiting for probing/testing. 
f Number of product types waiting for assembly. 
g Number of product types waiting for final testing. 
Decision variables: 
Xi,j If the transportation route from factory i to factory j is selected, then Xi,j =1; 
otherwise, Xi,j =0.  
xi,j ={0, 1}, (i, j=0, 1, …, n; i ≠ j). 
Yi If factory i is in the transportation route, then Yi =1; otherwise, Yi =0.   
yi ={0, 1}, (i=0,1,…,n). 
Zk,i Number of orders of product-stage k being assigned to factory i. 
zki =0, 1, 2,… (zki is integer). 
Parameters:  
bk,i Processing cost of product-stage k in outsourcing factory i.  
cpk,i If outsourcing factory i has processing capability of product-stage k, then 
cpk,i =1; otherwise, cpk,i =0.   
 Collaborative Production-Distribution Planning 865 
The objective function (1) is to minimize the total production and transportation 
costs.  Constraints (2) to (4) are related to capacity allocation.  Constraint (2) ensures 
that the total output assigned to the outsourcing factories with the required processing 
capabilities must be equal to the total demand.  Constraint (3) ensures that the output of 
a product type assigned to an outsourcing factory must be lower than the maximum 
capacity of the product type possessed by the factory.  Constraint (4) makes sure that 
the total loading assigned to an outsourcing factory must be lower than the maximum 
capacity possessed by the factory.  Constraints (5) to (7) are related to distribution 
planning.  Constraint (5) ensures that each distribution route must pass through a wafer 
fabricator; that is, each distribution vehicle must start from a wafer fabricator.  
Constraint (6) is an assignment equation, and its goal is to make the number of routes 
passed through all outsourcing factories be even-degree.  However, with only 
constraint (5) and (6), we cannot guarantee that the distribution routes can form a 
complete closed circuit, and some separated tours may be resulted.  To prevent this 
from happening, we adopt sub-tour elimination [12] to construct a complete tour in 
constraint (7).  Under this method, all nodes are arbitrarily segregated into two groups, 
and at least two routes must connect the two groups.  In other words, in a set with any 
number of nodes, if the number of routes is smaller than the number of nodes (|S|), no 
separated tour can be formed in the set.  Constraints (8) and (9) limit the decision 
variable Xi,j and Yi , respectively, to be either zero or one.  Constraint (10) lets the value 
of Zk,j be a non-negative integer. 
In order to examine the complexity of the problem, we first let A=e+f+g to represent 
the number of product-stage types.  In the integer programming model, the total 
number of variable xi,j is n*(n-1), the total number of variable yi is n, the total number of 
variable zk,i is A*n, and the total number of decision variables is n2+A*n.  For the 
number of constraints, there are A, A*n, n, 1 and n constraints for Constraint (2), (3), 
(4), (5), (6), respectively.  Constraint (7) has the most constraints, 
22132 −−=+++ − nCCC
nn
n
nn … , and the number of constraints depends on the 
combination of sets.  In addition, the numbers of constraints for Constraint (8), (9) and 
(10) are n*(n-1), n and A*n, respectively.  In sum, the total number of constraints in this 
integer programming model is 132 2 −+++ AAnnn .  We can see that when the scale of 
the problem increases, the number of variables increases by the square of the number of 
nodes, and the number of constraints increases exponentially.  Therefore, if we 
continue to use integer programming to solve the problem, the solving time will be 
extremely long. 
4   Case Study 
A case study is presented here to examine the practicality of the proposed model.  Table 
1 lists the demand on outsourcing stages of a wafer fabricator in a planning horizon, in 
which nine different-specification semi-finished products need to be processed by 
outsourcing factories.  The production and distribution information of the outsourcing 
factories are listed in Table 2 to 4.  The goal is to find the optimal planning of order 
assignment and distribution route for the semiconductor fabricator. 
 Collaborative Production-Distribution Planning 867 
Table 4. Transportation Cost (tci,j) 
Outsourcing 
factory WF CPT1 CPT2 CPT3 AS1 AS2 FT1 FT2 
WF - 50 80 120 110 90 70 50 
CPT1 50 - 60 80 70 30 40 40 
CPT2 80 60 - 30 40 70 50 90 
CPT3 120 80 30 - 10 90 70 90 
AS1 110 70 40 10 - 50 40 60 
AS2 90 30 70 90 50 - 40 20 
FT1 70 40 50 70 40 40 - 40 
FT2 50 50 90 90 60 20 40 - 
Table 5. Integer programming solution (optimal) for the SPTS example solved by CPLEX 
The objective value and the solution time 
Objective Value: 7,518 ($) 
Iteration: 14 
Solving Time: 0.34 (sec.) 
Constraints: 424 
Variables: 144 
 
Fig. 2. Results of the collaborative production-distribution planning for SPTS 
The complexity of the SPTS integer programming model increases exponentially as 
the number of factories (n) increases.  We fix the number of product type in 15, and 
observe the trend of the required solving time to get optimal of the problem by ILOG 
CPLEX when the number of outsourcing factories changes.  Table 6 shows that when 
the number of factories is under 10, the problem can be solved very efficiently.  
However, when the problem becomes more complicated, the solving efficiency 
decreases tremendously.  In conclusion, with a complicated real-practice problem, the 
integer programming model will become very inefficient. 
 Collaborative Production-Distribution Planning 869 
gap with the optimal solution is 2.47%.  When the number of product types is fixed in 
15 and the number of outsourcing factories increases, the solving times for searching a 
near-optimal solution are obtained as shown in Table 8.  The table indicates that the 
gaps between GSA and the optimal solution, i.e. solution quality, fall from 4% to 6% 
under 13 outsourcing factories. The results also show that the algorithm can find a 
near-optimal solution very efficiently. 
Table 7. Solution for the SPTS example by modified GSA 
The objective value and the solution time 
Objective Value: 7,704 ($) 
Iteration: 7 
Solving Time: <0.0001 (sec.) 
Gap with Z* 2.47% 
Table 8. Solving time and iterations with various nodes by modified GSA 
Node Number 10 11 12 13 ... 20 30 50 100 
Solving Time (Sec.) 0.42 0.35 0.38 0.46 ... 0.88 1.80 4.80 18.5 
Iterations 8 9 10 11 ... 13.5 14.6 14.9 14.6 
Solution Quality 5.31% 4.10% 2.53% 4.2% ... NA* NA NA NA 
*“NA” means not available.  
7   Conclusion 
This paper investigates the collaborative production-distribution planning for SPTS, 
which is a very important problem in real-practice.  In such a supply chain problem, 
multi-products, multi-stages, and multi-outsourcing factories with different processing 
capabilities must be considered in finding the most appropriate production and 
distribution plan.  An integer programming model is proposed to find a plan with the 
objective of minimizing the total costs.  A case is presented, and ILOG CPLEX is used 
to solve the problem.  In addition, we propose a modified GSA heuristic algorithm to 
solve complicated real-world problems in a reasonable limited time. Some important 
characteristics related to SPTS problem, e.g. delivery time restriction, may be 
incorporated for the future works. Moreover, the other well-know TPP heuristics, e.g. 
the tour reduction algorithm, commodity adding algorithm, can also be modified for 
improving the efficiency for the SPTS problem. 
Acknowledgments. This paper was supported in part by the National Science 
Council, Taiwan, R.O.C., for support under contract no. NSC95-2221-E-009-152. 
We thank the anonymous referees for their helpful comments, which improved the 
paper. 
