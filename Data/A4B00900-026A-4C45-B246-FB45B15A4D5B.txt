用率隨著時間與地點的不同而有很大的變化。而即使
非授權用戶的傳輸並不會對使用低利用率頻段的網路
服務造成干擾，但是固定的頻譜分配卻限制了非授權
用戶對於這些授權頻帶的使用。因此才會有讓未授權
用戶在不產生干擾的前提之下使用授權頻帶的想法。
此一模式的無線通訊即為感知無線電。 
感知網路主要是利用頻譜感測（spectrum sensing）
功能，使無線通訊設備於授權頻帶閒置時，尋找授權
頻帶上的頻譜空洞（spectrum hole），暫時利用此頻譜
空洞進行傳輸以達到通訊的目的，並使得整個頻譜的
利用率達到最高。在感知網路中，同時存在獲得頻率
使用許可的主要使用者（primary user）與只能使用頻
譜空洞的次級使用者（secondary user）。其基本概念
為，次級使用者在已授權之頻帶偵測目前頻譜上的空
洞，必須在不干擾到主要使用者的前提之下，利用所
偵測到的頻洞進行資料傳輸，而當主要使用者忽然出
現於此一頻段，次級使用者必須有能力偵測到此一狀
況而退出，或跳至另一段空白的頻段[4]。 
近年來學術界對於感知網路相關議題之研究，約
可分為兩大主題，即頻譜感測（spectrum sensing）[5]
與頻譜管理（spectrum management）[6]。頻譜感測即
是次級使用者在傳輸訊息之前，先對於周遭環境進行
掃描，惟有先在可用頻段範圍進行有效的頻譜感測，
才能對空白的頻段加以利用。而頻譜管理則是對於感
測到的頻譜空洞進行合理的分配。 
通常頻譜感測的問題，必須考量到硬體上的限制
例如天線的數量，可感測的頻寬範圍，以及感測時間
長短與有效傳輸時間之間的權衡。若感測的時間長，
則可能發現較多的頻譜空洞可用，但是對於頻譜的資
訊有較長的時間延遲，也可能會影響到使用者可用來
傳輸訊息的時間。相反的若感測的時間短，則較能夠
了解頻譜的即時狀況，但是能夠感測到的頻譜空洞就
可能較少。因此，如何在一有限時間之內找出最大可
利用之頻譜空洞即為頻譜感測之目標。 
而頻譜管理的問題，在作法上通常可區分為中央
式（centralized）及分散式（distributed）的管理。中央
式管理即存在一中央協調者，利用所掌握到的整個網
路資訊，藉由一演算法，決定並安排所感測到的頻譜
空洞該交由哪些節點使用。此方法需事先花費較長時
間作資訊的交換，但是由於中央協調者能夠掌控整個
網路的情形，因此做出的決定較為客觀，也較能夠讓
頻譜使用效率達到最高。而分散式管理即網路上的各
個節點，藉由本身所掌握的本地資訊，不斷競爭或協
調爭取所感測到的頻譜空洞。此方法的反應速率較為
快速，但是由於節點本身缺乏整體網路資訊，因此當
網路上的節點數量過多時，可能會導致競爭或協調時
間的過度拉長。對中央式及分散式的管理而言，如何
在一有限時間之內將頻譜空洞作一最有效率之分配即
為頻譜管理之目標。 
既然感知網路能夠靈敏的探測頻譜空洞並且擁有
藉由調整操作參數來達到切換頻段以利傳輸的特性，
則需要協調各層參數的跨層級設計就更容易被實現。
在無線網路的環境中，尤其是分散式網路系統，因為
節點的移動所導致網路拓樸的改變及干擾的程度都是
擾不超過干擾門檻值，即為合法的傳輸。同時我們假
設次級使用者所能發送的功率有一上限值，此一最大
發射功率也限制了每一個次級使用者的傳輸範圍。如
圖2. 1所示，若次級使用者u2在u1的傳輸範圍內，則
我們說u1、u2之間存在鏈結 1,2l ，而每一條鏈結上存在
若干個可用的通道，這些通道形成該鏈結的通道集
合，每一條鏈結的通道集合都是|M|的子集合，我們假
設透過頻譜感測功能，每一條鏈結的通道集合都是已
知；亦即每個次級使用者事先透過頻譜感測得知其可
用來傳送與接收的通道集合。此外本文考慮多重路徑
繞徑（multi-path routing），在過去文獻[3-4]已經
證實在無線通訊環境中，多重路徑繞送可以提供較可
靠（reliable）的資料傳送。以圖2. 1而言，假設有
一資料流（session），其來源端（source）為u7而目
的地端（destination）為u2。來源端u7可以透過中間
節點u1、u4、u5、u8，將資料流經由兩條繞送路徑(i.e. 
u7－u4－u1－u2與u7－u8－u5－u2)送往目的地端
u2。另外本文假設網路為分時系統，亦即時間切割為
連續不間斷的超級訊框（superframe），每個超級訊
框由T個時槽（time slot）組成，如圖2. 2。每個次
級使用者在同一個時槽內，只能傳送或接收，亦或是
不收送。在該時槽內，若是傳送（或接收），其下一
個節點（或上一個節點）是哪一個次級使用者，亦即
決定該時槽的鏈結。同時因為次級使用者在每一條鏈
結有多通道可供選擇，因此在傳送或接收時要決定使
用鏈結上的哪一條通道與在該通道的傳輸功率。對於
每個次級使用者，在超級訊框內的每個時槽都必須做
這些決定與安排。因此本文將規劃每一個次級使用者
在T個時槽中，使用哪些時槽、在這些時槽分別使用哪
一條鏈結、在鏈結使用哪一個通道與通道傳送功率的
大小。決定好之後，每個節點在接下來的每一個超級
訊框即可依照一樣的模式傳送資料。以圖2. 1的資料
流1（來源端為u7，目的地端為u2）為例，在時槽1，
u7傳送給u4；在時槽2，u4、u7分別傳送給u1、u8；在
時槽3，u1、u8分別傳送給u2、u5；在時槽4，u5傳送
給u2。然後接下來的超級框架，資料流1就可以繼續上
述的規劃來傳送資料。 
圖 2. 1 包含數個主要使用者網路觀測點與次級使用
者之感知網路系統 
圖 2. 2 超級訊框與時槽 
 
  數學模型介紹 
網路必須依照一定的規則運作，而以下為本系統
模型之限制條件。首先，網路資源不可為負，所以自
然 的 就 有 式 (2.1) 的 約 束 。
', ( ' , )' , ' Tx Rx
m m
l t l ll L l l
P h∈ ≠∑ 代表其他鏈結 'l 上的傳送端對於
鏈結 l上的接收端所造成的總干擾。式(2.6)表示鏈結
l於時槽t的通道容量 ,l tC 為鏈結l上各個通道m的容
量總和。而式(2.7)表示每一條鏈結在每個單位時間內
承載的總資料流量不能超過通道容量限制。
,
, 2
', ( ' , )' , '
log (1 ), ,
Tx Rx
m m
l l tm
l t m m m
m M l t l ll L l l
h P
C W l t
W P hσ∈ ∈ ≠
= + ∀+∑ ∑  
(2.6) 
, , , , {1,2,..., }
s
l t l t
s S
f C l L t T
∈
≤ ∀ ∈ ∈∑  (2.7) 
我們考慮一實際的網路系統，以及式(2.4)的半雙
工限制，一個非傳送端或接收端的網路節點，接收資
料進來之後，必須先進行暫存然後再於接下來的時間
將資料傳送出去。因為我們一次規劃一整個超級訊框
的時間，因此所有網路節點在一個超級訊框時間內所
傳送或接收的資料量，必須遵守式(2.8)、(2.9)的流
量守恆限制。在式(2.8)、(2.9)中 ( )IS i / ( )OS i 代表
所有以節點 i為目的地端/來源端的資料流集合。 
針對某個網路節點 i，在T 時間內對於某個資料
流 s，式(2.8)表示，若節點 i為資料流 s的中間節點，
則流入的資料量必須等於流出的資料量，即資料流 s
對於節點 i的淨流量為零。式(2.9)則表示，若節點 i
為資料流 s的目的地節點，則資料流 s流入的資料量
減去流出的資料量必須等於資料流 s的平均傳送速率
sr 乘上總時槽數T 。以上對於中間節點及目的地節點
的流量限制將能夠保證傳送端的流量守恆，因次我們
並不需要再對傳送端撰寫一限制式。 
 
, ,
( ) {1,2,..., } ( ) {1,2,..., }
0, , ( ( ) ( ))s sl t l t
l IL i t T l OL i t T
f f i N s S OS i IS i
∈ ∈ ∈ ∈
− = ∀ ∈ ∈ − ∪∑ ∑
(2.8) 
, ,
( ) {1,2,..., } ( ) {1,2,..., }
, , ( )s sl t l t s
l IL i t T l OL i t T
f f r T i N s IS i
∈ ∈ ∈ ∈
− = ∀ ∈ ∈∑ ∑
(2.9)   
網路吞吐量（throughput）為最常被使用之效能
評量指標，因此我們以最大化平均傳送速率 sr 為考
量。並且我們也考慮到在最大化網路吞吐量的同時，
至少提供每一位使用者最低限度的服務，即比例式公
平（proportional fairness）的概念，因此我們使用
log sr 讓每一個資料流皆擁有大於零的傳送速率。最後
式(2.10)即為此系統模型之目標函式。 
, ,, ,
max log
s m
s l t l t
s
r f P s S
r
∈
∑        (2.10) 
最後我們整個系統模型如式(2.11)所示: 
目標函式： 
, ,, ,
max log
s m
s l t l t
s
r f P s S
r
∈
∑     (2.11) 
限制條件： 
 (2.1)~(2.9) 
3. 研究方法 
在上述的模型中，可以注意到式(2.4)含有整數變數，
而式(2.6)為一非凸非線性數學式(此結果在[8]已被
證明)。因此我們的系統模型為一非凸混合整數非線性
規 劃 （ non-convex mixed integer nonlinear 
programming）的問題，而非凸混合整數非線性規劃的
問題已被證實是 NP hard 的問題[10]。 
為了在分散式系統解決非凸混合整數非線性規劃
的最佳化問題，使分散式系統同樣能夠達到中央式系
, , , , , , , ,
2
,
{1,2,3,..., }
, ( , ) , ,
{1,2,3,..., }
max
, ,
{1,2,3
({ },{ },{ },{ },{ },{ },{ },{ },{ })
   log ( )
  ( )
  ( )
Tx
m m s m
t o l t i t l t i s i s s l t l t
s
s l t
s S s S l L t T
m m m I
t o l o l t m t
m M t T o O l L
m m
l t l t
t
L A B E F G H r f P
r f
A h P P
B P P
ε
∈ ∈ ∈ ∈
∈ ∈ ∈ ∈
∈
= −
− −
− −
∑ ∑∑ ∑
∑ ∑ ∑ ∑
,..., }
,
, max
{1,2,3,..., } ( ) ( ),
,
, , 2
{1,2,3,..., } ', ( ' , )' , '
, ,
( ), {1,2,3,..
  ( 1)
  ( log (1 ))
  (
Tx Rx
m M l L T
m
l t
i t
i N t T l IL i OL i m M
m m
l l ts m
l t l t m m m
l L t T s S m M l t l ll L l l
s
i s l t
l IL i t
P
E
P
h P
F f W
W P h
G f
σ
∈ ∈
∈ ∈ ∈ ∪ ∈
∈ ∈ ∈ ∈ ∈ ≠
∈ ∈
− −
− − + +
− −
∑ ∑ ∑
∑ ∑ ∑
∑ ∑ ∑ ∑ ∑
,
( ( ) ( )) ., } ( ), {1,2,3,..., }
, , ,
( ) ( ), {1,2,3,..., } ( ), {1,2,3,..., }
)
  ( )
s
l t
i N s S IS i OS i T l OL i t T
s s
i s l t l t s
i N s IS i l IL i t T l OL i t T
f
H f f r T
∈ ∈ − ∪ ∈ ∈
∈ ∈ ∈ ∈ ∈ ∈
+
− − + +
∑ ∑ ∑ ∑
∑ ∑ ∑ ∑
(3.2) 
  ( )  ( )
', ( ' , ), ' , '  ( )
,
  ( )   ( )   ( )
, ( , ) , ,max
Rx or Tx of 
1( ) ln 2
, , {1, 2,..., }
Tx Rx
Tx
m m k mk m
l t l ll t l L l lm k
l t m
m k m m k k l
t o l o l t i t
o O i l
W P hF W
P
hA h B E
P
m M l L t T
σ
+
∈ ≠
∈ =
⎡ ⎤⎢ ⎥− −= +⎢ ⎥⎢ ⎥+ +⎢ ⎥⎣ ⎦
∀ ∈ ∈ ∈
∑
∑ ∑  
                (3.6)
  
  ( 1)   ( )   ( )
, , ( , ) , , , , {1,2,..., },Tx
m k m k m m k I
t o t o k l o l t m t
l L
A A h P P m M t T o Oα
+
+
∈
⎡ ⎤⎛ ⎞= + − ∀ ∈ ∈ ∈⎢ ⎥⎜ ⎟⎝ ⎠⎣ ⎦∑          (3.7)
 ( )  ( 1)   ( )   ( ) max, , , , , , {1, 2,..., }m k m k m kl t l t k l tB B P P m M l L t Tα ++ ⎡ ⎤= + − ∀ ∈ ∈ ∈⎣ ⎦           (3.8)
  ( )
,    ( 1)   ( )
, , max
( ) ( ),
1 , , {1, 2,..., }
m k
l tk k
i t i t k
l IL i OL i m M
P
E E i N t T
P
α
+
+
∈ ∪ ∈
⎡ ⎤⎛ ⎞= + − ∀ ∈ ∈⎢ ⎥⎜ ⎟⎜ ⎟⎢ ⎥⎝ ⎠⎣ ⎦∑           (3.9)
  ( )
,    ( 1)   ( )   ( )
, , , 2   ( )
', ( ' , )' , '
log (1 ) , ,
Tx Rx
m m k
l l tk k s k m
l t l t k l t m m k m
s S m M l t l ll L l l
h P
F F f W l t
W P h
α σ
+
+
∈ ∈ ∈ ≠
⎡ ⎤⎛ ⎞⎢ ⎥⎜ ⎟= + − + ∀⎜ ⎟+⎢ ⎥⎝ ⎠⎣ ⎦
∑ ∑ ∑  
(3.10) 
    ( 1)   ( )   ( )   ( )
, , , ,
( ), ( ),
{1,2,..., } {1,2,..., }
, , ( ( ) ( ))k k s k s ki s i s k l t l t
l IL i l OL i
t T t T
G G f f i N s S OS i IS iα
+
+
∈ ∈∈ ∈
⎡ ⎤⎛ ⎞⎢ ⎥⎜ ⎟= + − + ∀ ∈ ∈ − ∪⎢ ⎥⎜ ⎟⎜ ⎟⎢ ⎥⎝ ⎠⎣ ⎦
∑ ∑
(3.11) 
   ( 1)   ( )   ( )   ( )   ( )
, , , ,
( ), ( ),
{1,2,..., } {1,2,..., }
, , ( )k k s k s k ki s i s k l t l t s
l IL i l OL i
t T t T
H H f f r T i N s IS iα
+
+
∈ ∈∈ ∈
⎡ ⎤⎛ ⎞⎢ ⎥⎜ ⎟= + − + + ∀ ∈ ∈⎢ ⎥⎜ ⎟⎜ ⎟⎢ ⎥⎝ ⎠⎣ ⎦
∑ ∑      (3.12)
次梯度法包含了許多步階值的設計方式，不同步
階值的選擇將會影響其收斂速度以及收斂特性。而我
們使用的步階值規則為 
0
0,  k kkα α∞=→ = ∞∑    
因此主要變量及對偶變量的迭代將能達到收斂。而我
們設定內圈演算法的停止條件為，若數值的變化比例
在一個很小的範圍δ 內則視為收斂，例如 
( 1) ( )
( )
|| || ,
k k
s s
k
s
r r s S
r
δ
+ − < ∀ ∈  
現在整個系統現在已經被分解成網路層及實體層
的子問題，而各子問題之間的運作則藉由對偶變數來
進行協調，相當於經濟學上，以價格來平衡產量與需
求量之間的關係。其中網路層藉由式(3.3)的第一及第
二個最大化問題來解決，包括降低實體層資源的使用
成本 , ,
{1,2,3,..., }
s
l t l t
s S l L t T
F f
∈ ∈ ∈
∑∑ ∑ ，而實體層則藉由供應資
鏈結皆減去 min slf 之後，我們可獲得一更新的
s
lf
值。接著再從更新之後的 slf 重複以上步驟找出下一條
路徑，直到所有路徑皆被找出，即結束路徑解析函式。 
4. 數值結果與討論 
我們使用 4種網路拓樸，各別擁有 16、6、6、5
個次級使用者節點以及 4個觀測點。網路節點隨機分
佈於 300 公尺×300 公尺的區域內。表 4.1 為網路設
定。圖 4.1-4.2 即為各個網路拓樸的網路吞吐量與執
行時間之結果與比較。圖 4.1 顯示的網路吞吐量在 10
個時槽以上就趨於穩定，時槽數量過多對於網路吞吐
量的提昇並無太大助益。但是我們發現網路吞吐量隨
著時槽數量的增加有緩降的趨勢。這是因為我們嘗試
找出最多的路徑，但是所有路徑的平均傳輸速率並不
相同。當時槽數量少的時候，傳輸速率較高的路徑會
先被找出來，此時的資料流只會使用這些狀況好的路
徑。但是時槽數量提高之後，傳輸速率較低的路徑也
會漸漸被找出來。而當流量漸漸被分散到這些狀況較
差的路徑時，那麼整體的網路吞吐量就會降低。由圖
4.2 我們可以發現同一個網路拓樸在兩種作法下的耗
時差距並不大。但是網路規模小的時候，例如 5個或
6個節點，程式的執行時間只需要數秒到數分鐘不等。
然而網路規模變大之後，由於變數的量會因為節點數
量增多而迅速成長，因此在 16 個節點的網路，程式的
執行時間就明顯拉長到必須以小時為單位計算。
表 4. 1 網路設定 
網路拓樸 資料流數量 
資料流 
（來源端, 目的地端） 
通道數量 
通道頻寬 
（MHz） 
16n 6 
(1, 2) 
(8, 9) 
(7, 11) 
(12, 11) 
(6, 13) 
(7, 5) 
4 
10 
20 
15 
11 
6n-1 3 
(1, 6) 
(1, 5) 
(2, 6) 
3 
10 
15 
20 
6n-2 3 
(1, 6) 
(1, 5) 
(2, 6) 
3 
10 
15 
20 
5n 3 
(1, 5) 
(1, 4) 
(2, 5) 
2 
15 
20 
 
 
survey," Comput. Netw., vol. 50, no. 13, pp. 
2127-2159, Sept. 2006. 
[3] J. Mitola, Cognitive radio: An integrated 
agent architecture fr software defined radio. 
Ph.D. Dissertation, KTH Royal Institute of 
Technology, Stockholm, Sweden, 2000. 
[4] Y. Yuan, P. Bahl, R. Chandra, P. A. Chou, J. 
I. Ferrell, T. Moscibroda, S. Narlanka, Y. 
Wu, KNOWS: Kognitiv Networking Over White 
Spaces, in: Proceedings of IEEE Symposiumon 
New Frontierin Dynamic Spectrum Access 
Netowrk (DySPAN), 2007. 
[5] J. Jia, Q. Zhang and X. Shen, HC-MAC: A 
Hardware-Constrained Cognitive MAC for 
Efficient Spectrum Management, IEEE J. 
Selected Areas Commun. 26 (1) (2008), pp. 
106-117. 
[6] I. F. Akyildiz, Won-Yeol Lee, M. C. Vuran, 
and S. Mohanty, "A Survey on Spectrum 
Management in Cognitive Radio Networks," 
IEEE Communications Magazine, Vol. 46, Issue 
4, pp. 40-48, Apr. 2008. 
[7] X. Lin, N. Shroff, and R. Srikant, A Tutorial 
on Cross-Layer Optimization in Wireless 
Networks, IEEE Journal on Selected Areas in 
Communications on Non-Linear Optimization 
of Communication Systems, vol. 24, Issue 8, 
pp. 1452-1463, June 2006. 
[8] M. Johansson and L. Xiao, 
“Cross-Layer Optimization of Wireless Ne
tworks 
Using Nonlinear Column Generation,＂ IEEE 
Trans. Wireless Comm., vol. 5, no. 2, pp. 
435-445, Feb. 2006. 
[9] W. Yu. Competition and cooperation in 
multi-user communication environments. Ph.D. 
Dissertation, Stanford University, Stanford, 
CA, 2002. 
[10] R. Cendrillon, W. Yu, M. Moonen, J. Verlinden, 
and T. Bostoen. Optimal multiuser spectrum 
management for digital subscriber lines. In 
Proceedings of the IEEE ICC Conference, 
volume 1, pages 1-5, July 2004. 
 
國科會補助計畫衍生研發成果推廣資料表
日期:2011/08/08
國科會補助計畫
計畫名稱: 無線感知網路跨層最佳化設計
計畫主持人: 郭文光
計畫編號: 99-2221-E-006-134- 學門領域: 網路
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
