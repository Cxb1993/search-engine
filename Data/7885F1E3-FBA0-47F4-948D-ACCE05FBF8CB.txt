2箱”，因而對研究結果產生資料挖掘的質疑。 我們在2009年曾提出一個簡
單而明確的樣版（template）推導方法(Wang and Chan, 2009) 。在本計劃中，
我們將改善2009年的方法，將依樣版各行(column)的重要性設定各行的權重
(weight)，進而產生一個新的樣版推導方法。此一方法的優點除了避免資料
挖掘的質疑外，其具備簡單、明確、且具彈性，同時亦可一般化地應用至
其他圖形的形成。
二、研究目的
本研究是一項跨領域合作計劃，我們嘗試運用圖型識別技術解決財務
領域中股票交易決策問題，本研究將提出一個新的樣版（template）推導方
法。此方法將使股票交易決策樣版比對更彈性且合理。
三、文獻探討
技術分析透過找出歷史股價資料中特定模式來達成超額利潤．技術分
析的研究主要著重於量化指標，如相對強度指標及移動平均 (e.g., Pruitt and
White, 1988; Brock, Lakonishok, and LeBaron, 1992). Lo, Mamaysky, and
Wang (2000)之前有少數的研究注重在股價圖型如頭肩頂，旗形，碟形
Lo et al. (2000) 使用 kernel regression 識別股價圖型． Leigh, Purvis,
and Ragusa (2002), Leigh, Modani, Purvis, and Roberts (2002), Leigh, Modani,
and Hightower (2004), Bo, Linyan, and Mweene (2005), and Wang and Chan
(2007, 2009) 則運用樣版比對方法來識別股價圖型．
四、研究方法
4-1 設定初始樣版
本研究以 Wang and Chan 2009 所提出的方法來設定初始樣版，設定初
始樣版的步驟如下：
Step 1. 將目標波形所對應的樣版格子權重設定為 1.
Step 2. 樣版中同行其他格子的權重依線性遞減，同行所有格子權重總和
為 0.
為了解釋上述步驟，以圖 1 為例，圖 1(a)是一個 10×10 的矩陣，為了
要偵測Ｕ形反轉波形，在 step 1 將Ｕ形反轉波形所對應的樣版格子權重設
定為 1，結果如圖 1(a)，在 step 2 樣版中同行其他格子的權重依線性遞減，
同行所有格子權重總和為 0，以圖 1(a)的第 3 行為例，將第 3 行其他格子的
權重依線性遞減，如圖 1(b)，再計算第 3 行所有格子權重總和：
4圖 2 Leigh et al. (2002a) 所使用的 10 x 10 樣版
因此，本研究假設樣版每一行(column)的重要性分別為 1I , 2I ,…, 10I ，並以此調
整樣版第 k 行(column)的權重
kjkjk IWW *
'   where j = 1,2,…,10
4-3 計算報酬率
本研究以 Wang and Chan 2009 所提出的方法來偵測買進訊號，偵測買進訊號的
步驟如下：
Step 1. 計算樣版與股價波形的吻合度
我們將 w 天的股價資料對應到 10×10 的樣版，以第 t 個交易日為例，設定股價
資料對應至樣版第 i 列第 j 行格子的對應值為 gij，列的部分，將 w 天的股價高低
資料均分為 10 等分，則每一等分的增量為：
inc = ( minmax ww PP  )/10 (1)
max
wP 及
min
wP 分別為 w 天中收盤價最大值及最小值，
因此我們可以設定每一列的範圍：
[ maxwP - i × inc,
max
wP - (i-1) × inc] for i = 1, 2, …, 10 (2)
相同的，行的部分，將 w 天均分為 10 等分，則每一等分的增量為
w/10，因此，第 j 行 gij 的值為
10w
f
g ijij  (3)
其中 ijf 是第 j 等分股價資料對應至第 i 列的次數
由 gij 及樣版權重可計算出比對吻合度 twFit ,
 
 

10
1
10
1
,
i j
ijijtw gwFit (4)
60.778 -1.308 -1.500 -1.381 -1.143 -1.143 -1.381 -1.500 -1.308 0.778
0.556 -0.538 -0.875 -0.905 -0.786 -0.786 -0.905 -0.875 -0.538 0.556
0.333 0.231 -0.250 -0.429 -0.429 -0.429 -0.429 -0.250 0.231 0.333
0.111 1.000 0.375 0.048 -0.071 -0.071 0.048 0.375 1.000 0.111
-0.111 1.000 1.000 0.524 0.286 0.286 0.524 1.000 1.000 -0.111
-0.333 1.000 1.000 1.000 0.643 0.643 1.000 1.000 1.000 -0.333
-0.556 1.000 1.000 1.000 1.000 1.000 1.000 1.000 1.000 -0.556
-0.778 0.231 1.000 1.000 1.000 1.000 1.000 1.000 0.231 -0.778
-1.000 -0.538 0.375 1.000 1.000 1.000 1.000 0.375 -0.538 -1.000
其每行的重要性Ｉ為：
1 1 1 1 1 1 1 1 1 1
將 apple 公司股價資料(1984/9/7~2011/1/12)均分為二部分，前半
部(1984/9/7~1998/3/24)為學習期間，後半部(1998/3/25~2011/1/12)
為測試期間，Ｕ形反轉波形樣版經模擬退火法學習前半部學習資料後，
調整每行的重要性Ｉ變成
1 1 0.954 1 0.995 1.042 1 1.044 1 0.732
調整後的Ｕ形反轉波形樣版如下：
1.000 -2.077 -2.027 -1.857 -1.493 -1.563 -1.857 -2.219 -2.077 0.732
0.778 -1.308 -1.431 -1.381 -1.137 -1.191 -1.381 -1.566 -1.308 0.569
0.556 -0.538 -0.835 -0.905 -0.782 -0.819 -0.905 -0.914 -0.538 0.407
0.333 0.231 -0.239 -0.429 -0.426 -0.447 -0.429 -0.261 0.231 0.244
0.111 1.000 0.358 0.048 -0.071 -0.074 0.048 0.392 1.000 0.081
-0.111 1.000 0.954 0.524 0.284 0.298 0.524 1.044 1.000 -0.081
-0.333 1.000 0.954 1.000 0.640 0.670 1.000 1.044 1.000 -0.244
-0.556 1.000 0.954 1.000 0.995 1.042 1.000 1.044 1.000 -0.407
-0.778 0.231 0.954 1.000 0.995 1.042 1.000 1.044 0.231 -0.569
-1.000 -0.538 0.358 1.000 0.995 1.042 1.000 0.392 -0.538 -0.732
調整前的Ｕ形反轉波形樣版，學習期間的報酬率為0.137832，測試期間的報酬率
為0.566045；調整後的Ｕ形反轉波形樣版，學習期間的報酬率為0.147924，測試
期間的報酬率為0.591244。由實驗結果發現經調整後的樣版，無論在學習期間或
測試期間都有更好的報酬率。
References
國科會補助計畫衍生研發成果推廣資料表
日期:2011/10/05
國科會補助計畫
計畫名稱: 運用模糊樣版比對於股票交易規則發現之研究
計畫主持人: 王嘉隆
計畫編號: 99-2221-E-158-008- 學門領域: 人工智慧
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
