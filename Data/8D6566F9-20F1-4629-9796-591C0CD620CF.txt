 II
 
中 文 摘 要 
 
IP (Internet Protocol)封包傳輸已經是網際網路中最主要的資料流，其所需的
網路頻寬隨著網路多媒體應用的成長而不斷增加，目前這個頻寬需求的瓶頸出
現在都會網路 MAN (Metropolitan Area Network)部份，現階段探討改善這部份的
研究多以 IP 封包直接傳輸在高頻寬的分波多工 WDM 網路上為主，本計畫即在
研究探究如何有效率地利用 WDM 網路傳輸 IP 封包的課題。主持人近年來專注
於這個課題，先後提出了全光式的網路架構、CSMA/CP 存取協定、CSMA/CP
優先權之傳輸機制、並分析模擬各系統架構與機制及多重等級服務品質的效
能；並將計畫的研究成果發表於多篇的期刊及國際會議上。本三年期計畫探究
IP 封包在該 WDM 環狀網路傳輸的下列課題： 
 
1. 以比例差異服務品質(依據queuing delay及drop procedure)來取代優先權服務
的機制，讓節點能具有可預測及可控制的功能，提供網路業者可以更容易實
現網路流量的管制。 
2. 提出端點到端點維護管理之機制(例如容忍錯誤能力提升、路由演繹法、位址
解析及新增刪除節點等)，探討該網路接取現存異質性網路的介面問題，以達
到端點到端點傳輸的實現。 
3. 研究節點數量增加所引發之效能課題，分析封包傳輸延遲找出分層的最佳
點，及提出階層式WDM環狀網路的架構。 
 
關鍵字：IP over WDM、比例式的、QoS、擴充性、階層式的、及 CSMA/CP 
 IV
 
  目    錄   
中文摘要...................................................................................................................... II  
英文摘要......................................................................................................................III 
目錄.......................................................................................................................... IV 
圖目錄....................................................................................................................VI 
表目錄.....................................................................................................................VIII 
ㄧ、 前言及研究目的.............................................................................................1 
二、 文獻探討......................................................….................................................... 4 
2.1差異性服務(Differentiated Service)…………………………….…................4 
2.1.1 DiffServ與RSVP之簡介.......................................................................4 
2.1.2 差異性服務的架構(The Architecture of Differentiated Service)........6 
2.1.3 異質性網路間之位址解析………………….…………..………..10 
2.2  異質網路之間的QoS保證與光環狀網路的容錯機制..............................12 
2.2.1異質網路IP封包存取與QoS Mapping機制........................................13 
2.2.2 光纖監視系統系統簡介....................................................................14 
2.3  IP直接在DWDM環狀網路傳輸所面臨的ㄧ些問題................................17 
2.3.1 Packet 傳送碰撞避免方式……….………........................................18 
2.3.2 階層式光環狀網路(Hierarchical Optical Ring Network).................20 
三、 研究方法..............................................................................................................23 
3.1 IP直接在DWDM環狀網路傳輸之比例差異服務品質...............................23 
3.1.1 延遲比例差異性服務模式......……………….……………………25 
3.1.2 具延遲比例差異性服務 CSMA/CP..................................................27 
3.1.3 延遲比例差異CSMA/CP協定效能的模擬與分析…….…….……30 
3.2  IP直接在DWDM環狀網路傳輸與異質性網路存取之問題....................34 
3.2.1 Metro Ring網路對於異質性網路間之QoS Mapping方式..…...…...36 
3.2.2 具有光纖容錯能力之都會環狀網路系統...……………………….41 
        3.2.3 嵌入式光纖監視系統結果與討論……..……………........……51 
3.3 IP直接在DWDM環狀網路傳輸之Scalability問題........................……......54 
3.3.1 CSMA/CP 節點之最佳 FDL 設計..............................................……54 
3.3.2 CSMA/CP 在階層式環狀網路傳輸之設計問題….………………..61 
 VI
圖 目 錄 
圖 2-1：Differentiated Service Domain 架構圖…..........................................................7 
圖2-2：Edge Router 功能概觀圖...............................................................................7 
圖2-3：IP and ARP over ATM位址解析程序圖...........................................................11 
圖2-4：Global Address Resolution程序圖....................................................................12 
圖 2-5：異質網路系統中的不同QoS機制..................................................................13 
圖2-6：雙環結構存活機制圖 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .14 
圖2-7：都會網路(Metropolitan Area Network)與接取網路(Access Network)...........15 
圖2-8：傳統式光纖監視系統系統架構.......................................................................16 
圖2-9：階層式光環狀網路示意圖..................….........................................................17 
圖2-10：The WASPNET switch (FDL+Wavelength Converter)..................................20 
圖2-11：一種Input-buffered交換器架構 (FDL+Wavelength Converter)...................20 
圖2-12：TDMA MAC協定示意圖...............................................................................21 
圖2-13：DMON MAC協定示意圖..............................................................................22 
圖2-14：THORN MAC協定示意圖.............................................................................23 
圖3-1：CSMA/CP Metro Ring邏輯架構圖..................................................................25 
圖3-2：CSMA/CP網路節點的硬體架構圖.................................................................25 
圖3-3：CSMA/CP協定示意圖.....................................................................................28 
圖3-4：CP協定示意圖..................................................................................................28 
圖3-5：CSMA/CP 訊框格式........................................................................................28 
圖3-6：WTP-Like 演算法............................................................................................30 
圖3-7：節點具延遲比例差異CSMA/CP模擬功能模式.............................................31 
圖3-8：具有優先機制之平均傳輸延遲V.S. Offered Load曲線圖..............................33 
圖3-9：具有比例式差異性服務之平均傳輸延遲V.S. Offered Load曲線圖..............34 
圖3-10：傳統式光纖監視系統系統架構 ................................................................36 
圖3-11：支援DiffServ之MAC協定..............................................................................37 
圖3-12：直接映射CSMA/CP模擬功能模式...............................................................38 
圖3-13：W=4, N=16之端點到端點的傳輸延遲時間曲線圖......................................40 
圖3-14：W=8, N=16之端點到端點的傳輸延遲時間曲線圖......................................40 
圖3-15：W=4, N=16之節點平均Throughput...............................................................41 
圖3-16：W=8, N=16之節點平均Throughput...............................................................41 
 VIII
表 目 錄 
表2-1：Edge Router 元件方塊功能...............................................................................8 
表2-2：Assured Forwarding Class..................................................................................9 
表 3-1：延遲比例差異式網路模擬參數表..................................................................32 
表 3-2：比較四種不同優先等級之平均傳輸延遲V.S. Offered Load值....................33 
表 3-3：比較四種具有比例式差異性服務之不同優先等級的平均傳輸延遲 V.S.        
Offered Load 值……….…….……………………………………………...34 
表 3-4：各類服務品質在 CSMA/CP Metro Ring 之對應表........................................38 
表3-5：異值網路QoS Mapping模擬參數表...............................................................39 
表 3-6：障礙判定表......................................................................................................43 
表 3-7：2004 年 APTG 南區光網路障礙統計表 ....................................................53 
表 3-8：光纖監視系統比較表......................................................................................54 
表3-9：考慮Tg效應下之模擬參數表..........................................................................57 
表 3-10：考慮不同Tg下模擬所得之最佳FDL長度值...............................................59 
表3-11：網路模擬參數(擷取點N數目固定)..............................................................66 
表3-12：網路模擬參數(通道數W數目固定).............................................................66 
表 3-12：單一環狀網路與階層式環狀網路架構比較...............................................71 
 
 
 
 
 
 
 
 
 
 
 
 
 
 2
 對異質網路中端點到端點的網路服務品質，及光環狀網路的容錯機制，本
計畫不但探討該網路接取介面問題的機制以達到端點到端點傳輸，同時也
實作出一台低成本的光環狀網路偵錯器，結合現有的網管系統可快速地判
斷線路設備的錯誤發生。 
 研究階層式光環狀網路的機制與效能課題，求取節點數量增加所引發之效
能課題，分析封包傳輸延遲找出分層的最佳點。 
 
研究目的 
為了滿足網際網路上多媒體資料傳輸的服務品質及其呈指數成長的頻寬需
求，高速網路的研究課題在區域網路逐步進展到 10 Gbps 後，已逐漸聚焦在廣域
網路(WAN)及都會網路(MAN)上；此外，也由加快單一通道的傳送速度研究方向
轉向以多工多通道的傳輸課題，在這其中尤其是以分波多工(Wavelength Division 
Multiplexing; WDM)傳輸技術最為熱絡。目前密集分波多工 DWDM(Dense WDM)
的研究上每個資料通道(Data Channel)的頻寬已可以達到 160 Gbps，整條光纖可經
由分波多工技術提供高達數個 Tbps 總頻寬；以 Y. Frignac [1]等人所發展之密集分
波多工的技術為例，在單一光纖(Single Fiber)可多工分波達 256 條通道，每個通道
可傳送 42.7 Gb/s，因此其總頻寬約為 10.2 Tbps。目前實際使用的 WDM 傳輸系
統大多採用點對點(Point-to-Pint)的直接連線傳輸，但在都會網路頻寬需求日益迫
切且節點數目逐漸增加之際，以交換技術或環狀拓樸做為存取網路的方式成為必
然發展的趨勢。近來光網路(Optical Networking)研究以 IP over WDM 的課題最為
熱絡[2]，其中將 WDM 視為環狀邏輯架構且符合全光式(All-Optical)與頻寬再利用
(Reuse)的探討更是這領域研究的重要主流之一。 
本計畫即在研究探究如何有效率地利用 WDM 網路傳輸 IP 封包的課題，分別
提出了全光式的網路架構、CSMA/CP 存取協定、CSMA/CP 優先權之傳輸機制、
多重等級(Multi-Class)服務品質、並分析模擬各系統架構與機制及多重等級服務品
質的效能，並與多個國內外研究成果(例如 HORNET— CSMA/CA 協定等)系統架
構做分析與模擬的比較[3-10]。其間對於使 CSMA/CP Metro Ring Network 的服務
品質達到現階段網際網路的比例異質性服務(Proportional DiffServ)，提高該網路光
纖的容錯能力、解析封包位址、路由封包於異質網路之間傳送，維護網路系統之
 4
二、文獻探討 
2.1 差異性服務(Differentiated Service) 
在 IP over CSMA/CP WDM 環狀網路的傳輸服務品質研究中，讓節點加入優
先權機制雖然可以達到多重等級之間的差異，但仍缺乏控制節點服務品質的測量
值(Quantitative)功能；所以一般的排程演算法例如優先權(Priority)、權值輪詢法
(Weighted Round Robin; WRR)、RED(Random Early Detection)等所測量的多重等級
間效能的差異會出現增減互見、參差不齊的現象。本計畫將提出比例差異性服務
品質(Proportional Differentiated QoS)觀念來改善這個問題。 
2.1.1 DiffServ 與 RSVP 之簡介 
Best-effort 服務模式的最主要問題是在對待不同網路應用程式 (例如
emails，video and audio entertainment, e-commerce 與 real-time games 等)的封包
傳輸都視為同一類別，所以此服務模式沒有任何服務品質(QoS)的觀念。IETF 
(Internet Engineering Task Force)為了解決這個問題，遂提出藉由保留網路應用
程式的頻寬來達到應用程式傳送的預期效能(predictable performance)而訂定
IntServ (Integrated Service)服務模式；RSVP (Resource Reservation Protocol)[3]即
為 IntServ 服務模式中的一種協定(Approach protocol)。RSVP 協定固然可以針對
不同應用程式服務達到即時的效能，但存在兩個問題[11]：第一在 End-to-end
網路所有 Routers 都必須支援 RSVP 的協定，其次是每個 Router 必須管理
Per-flow state 與計算 Per-flow 的頻寬；對於成千上萬的 Flow 來說，它存在著
Scalable 問題。 
IETF 針對 IntServ 服務模式中 Scalable 問題，發展另一種服務模式稱為
DiffServ (Differentiated Service)[12]，在此模式中 Traffic flows 可被聚合
(aggregated) 成許多種不同的類別 (Classes) 。 DiffServ 較 IntServ 不複雜
(non-complex)且具延展性(scalable)；在過去幾年中有關於 DiffServ 的領域是值得
更進一步的研究。於 RFC 2474[13]的文件中，整個 DiffServ Domain 架構(Scenario)
如圖一所示；其中有兩個邊界節點(Edge Node)，分別為 Ingress Router 與 Egress 
Router；在中間的 Network Cloud 是由許多 Core Routers所組成。資料流(Data Flow)
或資料封包(Data Packet)經由 Edge Router 的分類(Classifier)及訊務調節(Traffic 
 6
Egress Router，中間的 Network Cloud 是由許多 Core Routers 所組成。資料流(Data 
Flow)或資料封包(Data Packet)經由 Edge Router 的分類(Classifier)及訊務調節
(Traffic Conditioner)，各資料流的封包被以 Behavior Aggregation 分別對應到不同
類別的 PHB (Per Hop Behavior)來設定封包的 DSCP (Differentiated Service Code 
Point)欄位，然後將封包送至 Core Routers。 
 
圖 2-1. DiffServ Domain Scenario. 
2.1.2 差異性服務的架構 (The Architecture of Differentiated Service) 
    圖 2-2 為 Edge Router 的 Classifier 及 Traffic Conditioner 的概觀圖，圖中的
方塊功能(Function)[18]簡敘如表 2-1。DiffServ 架構的特點是以 Per-Class 為其訴
求，化解了 InteServ 架構的 Per-Flow 特性在 Core Router 上造成的複雜度，進而
改善網路 Scalability 問題。它將大量的處理工作由 Core Router 轉置於 Edge 
Router 上，利用封包 ToS (Type of Service)的 DSCP 欄位記載處理後的結果，讓
Core Router 可以單純地快速依 PHB 轉送封包。Logical view of a packet classifier 
and traffic conditioner 
 
 
圖 2-2. Edge Router 功能概觀圖. 
 8
表 2-2. Assured Forwarding Class. 
 Class 1 Class 2 Class 3 Class 4 
Low Drop Prec. 001010 
(Class 11) 
010010 
(Class 21) 
011010 
(Class 31) 
100010 
(Class 41) 
Medium Drop Prec. 001100 
(Class 12) 
010100 
(Class 22) 
011100 
(Class 32) 
100100 
(Class 42) 
High Drop Prec. 001110 
(Class 13) 
010110 
(Class 23) 
011110 
(Class 33) 
100110 
(Class 43) 
其中 Drop Precedence Class 的實作(Implementation)可用 RED (Random Early 
Discard) 來 做 Buffer Management 。 另 外 Delay Precedence Class 的 實 作
(Implementation)可歸納下面四種方法： 
z 嚴格的優先權(Strict Priorities)。 
z 服務速率差異法(Service Rate Differentiation)。 
z 絕對延遲差異法(Absolute Delay Differentiation)。 
z 延遲比例差異法(Proportional Delay Differentiation)。 
嚴格的優先權是最高等級差異服務模式，這類的封包總是最優先被服務。服
務速率差異法是泛指以 WFQ(Weighted Fair Queuing)的排程法來處理佇列中的封
包。絕對延遲差異法的模式讓 Network Operator 可嘗試去控制 Class 之間之絕對
延遲間距。上述的前三項相對延遲差異(Relative Delay Differentiation)法，雖然都
可以展現等級差異的效果，但是仍存在下列缺點：嚴格的優先權會造成低等級肌
餓(Starvation)而缺乏可控制(Controllable) 等級間 QoS Spacing 的功能、服務速率
差異法及絕對延遲差異法在 Traffic 為高負載(Load)時，低等級的封包 Performance
效果卻比高等級來的好，而缺乏預測(Predictable)高等級 Performance 在任何 Load
的改變都比低等級來的好的功能，基於改上述的缺點延遲比例差異(Proportional 
Delay Differentiation)法遂被提出。在延遲比例差異法服務模式中，使用者或應用
程式可以動態地選擇最適合它們需求和成本的服務等級。「相對的差異服務」可
經由「成比例的差異模式」來改善和量化(Quantified)。這個模組提供 Network 
Operator 一個調整用旋鈕(Tuning Knobs)，可以調節每個等級間品質的間隔而不必
理會等級的負載。其中「比例的差異模式」之 Forwarding 機制 (包括 Packet 
Scheduling and Buffer Management)簡述如下。 
 10
2.1.3 異質性網路間之位址解析(Address Resolution Scheme for Heterogeneous 
Network) 
位址解析是因為 IP 封包在傳輸的過程中，雖然其 Source IP 位址與 Destination 
IP 位址不變，但其實體的網路位址則是每經過一個網路節點便更新其 Source 與
Destination 位址，其間位址的取得與節點的運作規範有很密切的關係。以區域網
路 Ethernet上的各端點來說，電腦在啟動網路功能時便擁有一個 IP位址及 Ethernet
實體位址，若其封包的目的端點不在它的 ARP(Address Resolution Protocol)表格
中，則發送出 ARP Request 等待其目的端點或預設閘道器經由 ARP Reply 告之傳
送點的實體位址。當封包進入路由器(Router)後，其下一個傳送的端點則由該路由
器查詢其的路由表格(Routing Table)來決定。 
網際網路是由大小不一、種類不同的各類型網路所組合成。形成一個異質性
的網路境，常見的廣域網路 WAN 及都會網路 MAN 有 ATM、SONET 及 Gigabit 
Ethernet 等；CSMA/CP WDM 環狀網路自然也必須與這些網路接取。異質性網路
位址的解析便是第一個受關注的課題，IETF RFC1577 [23]文獻 Classical IP and 
ARP over ATM 已提出了如何使 IP 封包在異質性 ATM 網路中傳輸的方法，這裡利
用 ATMARP 機制組成邏輯 IP 網域(Logical IP Subnet，LIS)使得 IP 可以在 ATM 網
路中傳輸。 
 
圖 2-3. IP and ARP over ATM 位址解析程序圖. 
 12
伺服器收到則再發出 ATMARP_Reply 控制訊息通知來源端 ARP 伺服器及 Client 
A。此時 Client A 與 Client B 間建立連線，IP 封包可以在不同網域的 ATM 異質網
路上傳輸。 
2.2 異質網路之間的 QoS 保證與光環狀網路的容錯機制 
由於光纖通訊網路(Optical Communication Network)具有高容量及遠距離
傳輸等優點，從廣域網路(WANs)、都會網路(MANs)以至於接取網路(Access 
Network)均以光纖化，因此在眾多廠商與研究人員的投入下，各式光纖網路如
SONET/SDH、IEE802.17 RPR、KOMNET、MONET、KEOPS、EPON、WDM-PON
等等相繼出現，對於服務品質(QoS)的提供均有所不同，以圖 2.5 為例，假使一
Metro Ring 所連接之區域網路所提供之 QoS 服務有 DiffServ、RSVP 甚至是
MPLS 等三類，Metro Ring 如何讓各區域網路的 QoS 封包順利地轉送至目的地
域網路，將是一值得研究之議題，因此本計劃將在 CSMA/CP Metro Ring 中加
入 QoS Mapping 機制以解決異質網路間 QoS 的傳送。使 CSMA/CP Metro Ring
網路更具有實用的價值。此外本計畫亦提出一套光纖偵測系統以提升 CSMA/CP 
Metro Ring 對於光纖網路之容錯能力。 
 
圖 2-5. 異質網路系統中的不同 QoS 機制.  
 14
2.2.2 光纖監視系統系統簡介 
    任何實際運作的網路必須考慮到網路維護的課題，當網路節點故障或下機時
不可以影響到網路的正常運作，如果有新的網路節點要加入網路必須能在不影響
網路正常運作下進行，甚至在光纖纜線斷裂或抽換時均有容錯的機制可以處置。
這類的研究在早期的網路如 Token Ring、Token Bus、FDDI 等均有文獻提及，對
CSMA/CP WDM 環狀網路而言，雙環結構是一個值得注意的方向，它可以在
Access Node 故障或線路斷裂時重新組織為單環網路如圖 2-6 所示。這雙環在正常
運作時分別為相反方向傳送資料，當光纖斷裂而重組時相鄰的兩個 Access Node
會自動地將主環連接次環而形成單環。當 Access Node 故障重組時，其相鄰的兩
個 Access Node 會自動地將其主環連接次環形成單一環狀網路。 
常見的 Access Node 自動地連接雙環設備有自動光跳接交換電路(Automatic 
Optical Bypass Switch)，利用它可以將一個故障或關機的 Access Node 跳接使其脫
離開網路。另外一種設備為中樞器(Wiring Concentrator)，利用中樞器上的跳接交
換電路可以將連在上面的 Access Node 或某一段線路跳脫接隔離。 
 
圖 2-7. 都會網路(Metropolitan Area Network)與接取網路(Access Network). 
交通部電信總局於 93 年 7 月 28 日宣布，台灣預計於西元 2007 年以 50 到
100Mbps 的光纖到府(Optical Fiber to Home)取代現行的 ADSL 上網方式。由於光
 16
做長期監視光纖纜線；此外尚須另外建置一套光纖監視網管系統，長期使用專線
電路來連接 RTU 與 Fiber Monitoring Network Management System，對網路資源相
當浪費。 
電信業者傳統的解決方式除了須投資昂貴的費用購置光纖監視設備外，還需
損失網路系統資源，且增加專人來負責該網管系統的維護與操作；並且該系統的
擴展性(Scalability)不佳。為了節省成本並提昇擴展性，本文提出並研製了一個低
成本的光電監視盒(Optical Monitoring-Box, OM-BOX) ，此 OM-BOX 可嵌入於
通訊設備並與其網管系統結合，而構成一套嵌入式的光纖監視系統。OM-BOX
已完成實驗室測試，目前正進行 In-service Field Test。OM-BOX 以非常低的成本
與簡單的方法達到不佔用任何網路資源，也不須另外架設獨立的網管系統與增加
網管人員；只須將此光電監視盒(OM-BOX)嵌入於現有傳輸或接取網管系統。其
在發生光斷訊(OLOS)時，接取網管系統可立刻明確判斷是光纖障礙或者是傳輸
接取設備問題，而馬上通知相關單位做即時搶修，對縮短維修時間及提昇網路穩
定度有實質的助益，進而提供客戶品質更佳的接取網路服務。 
 
圖 2-9. 階層式光環狀網路示意圖. 
 
 18
2.3.1 Packet 傳送碰撞避免方式 
     由於 Optical Buffer 至今難以實現，因此擷取點在傳送或下載封包時，為避
免 Packet 發生碰撞，大致有下列三種方式： 
z Deflection Routing：當有二個以上的 Packet 在同ㄧ時間欲使用相同的同道
時，擷取點只會讓其中一個 Packet 傳送在該通道上，其餘 Packet 往其它的
路徑繞送之，此方式乍看之下似乎是解決了 Packet 碰撞發生，但事實上是
將問題丟給其他 Node 去解決，問題可會會更加地嚴重。 
z Fiber Delay Line (FDL)：當有二個以上的 Packet 在同ㄧ時間欲使用相同的
同道時，擷取點只會讓其中一個 Packet 傳送在該通道上，其餘 Packet 則是
進入不同長度的 FDL 延遲其轉送的時間以避免 Packet 碰撞發生，以架構大
致可分為 Feedback 與 Forward 二種方式。 
z Tunable Wavelength Converter (TWC)：當有二個以上的 Packet 在同ㄧ時間
欲使用相同的同道時，擷取點只會讓其中一個 Packet 傳送在該通道上，其
餘 Packet 則是經由 Wavelength Converter 調變至其它 Idle Channel 傳送之，
此方式能最有效地解決 Packet 碰撞發生，但卻必須增加系統的設備成本。 
    為有效解決Packet碰撞問題以及降低設成本，通常是以TWC搭配FDL來使用
如圖2-10與圖2-11所示，其中圖2-10之架構必須額外再搭配波形重整設備，以避
免Packet因多次的迴圈所造成的ASE(Amplified Spontaneous Emission)問題。 
 20
2.3.2 階層式光環狀網路(Hierarchical Optical Ring Network) 
由於網際網路應用日益普及且對頻寬的要求與日俱增，增加網路頻寬與降低
封包傳輸延遲已成為現階段研究的主要目的之一，使用擴增光纖纜線的通道數量
及加快傳送與交換速度的技術將可獲得有效地改善。其次以使用階層式網路來減
少在兩個節點之間的直徑和平均距離也是一個值得探討的課題，尤其是當網路上
超過上千個節點時，階層式環狀網路的架構可以大大減少網路的直徑。 
    階層式光環狀連結網路(Hierarchical Optical Ring Interconnection Network；
HORN)是一個利用光纖纜線所構成的環狀網路架構[37-39]如圖 2-9 所示。圖中表
示的是一個三階層的架構，利用兩類不同的環(連接環和區域環)來連接所有的節
點。區域環連結所有的使用者節點(Processing/Access Node)，而這些區域環再被
連接環所連結起來，多個連接環再被較高連接環連接在一起，形成圖 2-9 所示之
階層式環狀網路的架構。 
Time Scale 
 
Time Slot 1 Time Slot 2 Time Slot 3 Time Slot 4 
λ1 P1 P4 P3 P2 
λ2 P2 P1 P4 P3 
λ3 P3 P2 P1 P4 
λ4 P4 P3 P2 P1 
 
圖 2-12. TDMA MAC 協定示意圖. 
在不同環之間由一被稱為路由節點(Routing/Core Node)的網路介面連接起來
作為溝通的橋樑。區域環可能包含幾個使用者節點，但只能有一個路由節點；在
連接環裡面所有的節點皆為路由節點，以圖 2-9 為例共有兩階層的連接環及一階
層的區域環，一個區域環中有 13 個使用者節點，整個三階層環狀網路共有 2, 3, 4
個使用者節點。配合 WDM 存取技術可使相同連接環或區域環上的路由節點或使
用者節點可以賦予不同的波長。即使 WDM 能提供多重的資料路徑而降低通訊上
的競爭，但是兩個來源端以上的節點要同時傳送到相同的目的端節點一樣會發生
碰撞，這時必須要有媒體存取協定(Media Access Control; MAC)來防止此現象的發
 22
 
圖 2-14. THORN MAC 協定示意圖. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 24
 
圖 3-1. CSMA/CP Metro Ring 邏輯架構圖. 
 
圖 3-2. CSMA/CP 網路節點的硬體架構圖. 
在硬體架構中，光孅延遲線(Fiber Delay Line)的設計是重要的。它可以延遲
進來封包(Incoming Packet)的光載波(Optical Carrier)，有了這段延遲時間，節點
才可以進行位址的識別、啟動 MAC 控制器與利用 on/off switch 來移除接收的封
包。封包的光載波經由延遲線，利用解多工器(De-Multiplex; DEMUX)將光載波
的信號依照光的不同波長而傳送到 W 個資料通道。DEMUX 的輸出是由一個
on-off switch array 所構成，如同前面所敘述，當 Optical Switch 通道為 On 時，
 26
                    0)()( →− jjii btdbtd …………………………………..(3) 
為了達到上述無論任何時刻等級間有差異性的效果，早在 1967 年
L.Kleinrock 在 “A Delay Dependent Queue Discipline” 就提出“WTP (Waiting Time 
Priority)” [45]的排程法來 approximate 此效果，而數學方程式如下： 
})({maxarg iii btwj ×← ..…………………..……..(4) 
其中 wi(t)表示 Queue i 平均等待時間（average waiting time），bi為上述 DDPs
的參數，所以 wi(t)與 bi乘積最大者(max)則具最高的 Priority Queue。每次必須先
觀察 Queue 之間的 Priority，最高的 Priority Queue 則可被選擇將 Queue 前端的封
包傳送出去(Forwarding)，然後每送一個封包就再比較 Queue 之間的 Priority。近
年來許多論文提出許多 WTP 排程的演算法的變型模式包括 AWTP(Advanced 
WTP) 、 MWTP(Minus WTP) 、 EWTP(Existing WTP) 、 CWTP(Counting 
WTP)[46-47]、Adaptive WTP[48]等。WTP 排程方法在數學理論上都驗証的確可
以達到 proportional delay 的效果，但是實作上卻是困難的；我們將在研究方法中
提出一個新的演算法。 
主持人及研究團隊在去年計畫中，提出一個具優先權機制之 IP 在全光式
WDM 環狀網路上的存取協定，稱為 CSMA/CP (Carrier Sense Multiple Access / 
Carrier Preemption)，並在此骨幹網路上提供簡易的優先權機制以配合各接取點
的 QoS 機制；本計畫延續各接取點的 QoS 機制的研究，我們採用延遲比例差
異性服務之模式。以下將針對網路之差異性服務品質、運作機制、效能模擬與
分析等課題說明。 
 
 
 
 
 
 
 
 
 
 28
    為符合carrier preemption機制，一種封包表格訊框格式如圖3-5所示，其每一
欄位的功能說明如下： 
    SD ( start delimiter )：表示封包的起點。 
    DA ( destinations address )：紀錄接收該封包的目的端節點。 
    SA( source address )：紀錄該封包的傳送端節點。 
    SN ( sequence number )：為配合切割機制所需之封包的序號。 
    EF ( fragment )：當此欄位之Bit為 “1”表示該封包為最後一個切割封包。 
    RF ( reserve field )：保留它用之欄位。 
    FL ( frame length )：指訊框的長度。 
   在CSMA/CP中，封包被傳送出之前，其封包的表頭(Header)會經由另外一個
副載波(Sub-Carrier)通道傳送出去，每個節點利用載波偵測(Carrier Sense)機制由
偵測副載波通道來判斷是否有正在傳送中的封包(Incoming Packet)的經過及有那
些通道目前是可以使用的(Available)，在本計畫中將稱該封包為「載波」(Carrier)；
圖3-3表示MAC Controller經由副載波感應資料通道(波長為λ1)上是否有載波到
達。因此每個節點可以任意選擇一個沒有偵測到載波的資料通道來傳送封包；然
而節點在連續傳送封包的過程中可能會遇到目的位址非本節點的載波到達而發
生碰撞。CSMA/CP解決這個問題而不降低網路效率的方法，即採用當MAC 
Controller感應到通道上有載波到達時，它會通知調變傳輸器(Tunable Transmitter)
暫停傳送封包，直等到該載波通過後再繼續傳送其餘部份。每個節點均配置一小
段的固定長度的延遲線(Delay Line)，讓節點有足夠時間判斷及完成上述動作，但
這個時間也造成了封包傳送的Propagation Delay增加。圖3-4表示當節點的傳送封
包與Upstream的載波發生碰撞時所採用的載波優先(Carrier Preemption)方法。由
於載波優先使用資料通道，因此正在被傳送的封包將被分成兩個部份：一部份為
載波在延遲線中尚未到達可繼續傳送出去的部份，另一部份為被搶先而須暫存佇
列在節點Buffer中的部份。 
在延遲比例差異性服務模式中，我們提出一個改良 WTP 的排程演算法稱
為 WTP-Like scheduler, 此演算法之封包傳送的比例優先是依照延遲時間(delay 
time)。延遲時間 di(t)由 Little’s theorem 推導： 
iiii bkttBtd == )()()( λ ……….……….…….(5) 
 30
3.1.3 延遲比例差異 CSMA/CP 協定效能的模擬與分析 
圖 3-7 為具有延遲比例差異 CSMA/CP 協定模擬功能模式，在此模式中節
點除了有 CSMA/CP MAC 機制外；我們在節點傳送佇列 (Tx-Queue)使用
Proportional Delay Differentiated Service 機制來提供每個節點 IP 封包的傳送具有
可調控的服務品質(QoS)。假設一條 Fiber 內有 W 條波長(λ1, λ2, …, λW) ，所以 W
條波長從上一個節點產生 Data Traffic 到此節點，此模擬模式中 Traffic Generator
會產生無預期(Unpredictable)的 IP Burst 封包；另一個模擬模式為節點的 IP 封包
產生器，節點傳輸佇列我們採用 WTP-Like algorithm 來實現延遲比例差異性服
務，而每個多重佇列之 Traffic 以 Poisson Distribution 產生；此節點模擬功能模式
中可以適用在任何其它 QoS 排程法。 
 
圖 3-7. 節點具延遲比例差異 CSMA/CP 模擬功能模式. 
利用 CSMA/CP 協定已經推導的公式[10]與 TDM (Time-Dependent Priority)
排程所推導的公式[45]並利用 M/G/1 佇列模式可獲得節點之不同等級平均封包
等待時間。針對下列推導的公式作說明：公式(7)為假設節點 i (i=1,2, ….P)的
packet arrival rate λi為 Poisson Process，E[Xi]為 packet service time；ρi為兩者乘
積可視為節點 i 的負載。E[nG]與 E[d]為在 CSMA/CP 協定下平均被 preemption
次數與因 preemption 所必須等待時間；這兩乘積以γ 表示。公式(8)為利用 TDM 
“優先權斜率” 推導技巧，其中高優先等級(i=1,2,…k-1)優先權斜率大於等級 k 而
 32
以表 3-1 的模擬參數與四個優先等級(P=4)，其中控制參數設定 b1=8、b2=4、
b3=2、b4=1 ，所獲得的 SIMSCRIPT II.5 模擬結果如圖 3-8、圖 3-9 及表 3-2、表
3-3 所示。其中圖 3-8 與表 3-2 為節點具優先權機制 CSMA/CP 之模擬結果，雖然
class1 是具最高優先等級的資料且沒任何等待時間適合即時資料的傳送但對於其
它等級的資料並沒有需求界定標準。圖 3-9 及表 3-3 為節點採用延遲比例差異
CSMA/CP 之模擬結果，從模擬曲線與數據可以得知等級間存在一定的延遲比
例。目前網際網路面臨到不同應用程式頻寬使用差異性的當今，骨幹網路上的節
點(可視為 ISP)可以利用延遲比例差異性服務來實現。 
 
圖 3-8. 具有優先機制之平均傳輸延遲 V.S. Offered Load 曲線圖. 
表 3-2. 比較四種不同優先等級之平均傳輸延遲 V.S. Offered Load 值. 
Transfer Delay [µs] Offer 
Load 
(%) Class 1 Class 2 Class 3 Class 4 
0.450 126.53 127.65 129.06 140.85
0.470 126.72 128.11 131.54 715.70
0.490 126.88 127.98 133.05 3282.81
0.549 127.34 128.39 141.05 9836.63
0.568 127.04 128.61 148.08 11826.1
0.589 126.82 129.14 168.68 13575.5
0.609 126.78 129.25 219.19 14649.0
 34
3.2 IP 直接在 DWDM 環狀網路傳輸與異質性網路存取之問題 
近來有關於光通訊網路(Optical Communication Network)的研究中[2, 32]，IP
封包直接在 WDM 層以 OPS 方式傳輸已經成為熱門研究課題，這些研究課題中
大多以固定封包大小方式來解決封包碰撞問題[52-55]，任意長度封包上傳方式較
少人提出。本研究團隊於過去幾年的研究計畫中陸續提出 CSMA/CP[8]、
CSMA/CA[9]等MAC協定相關論文研究以解決任意長度 IP封包直接上傳至都會
網路碰撞問題。另外，對於異質網路間服務品質的問題亦提出了成比例的差異模
式[58]，經模擬與分析的結果均能提供相當由高的傳輸率、即時服務與封包碰撞
等問題。這年度的計畫更進一步的探究 QoS mapping 及網路系統的容錯課題，
以使 CSMA/CP Metro Ring 網路更具有實用的價值。 
目前Ethernet網路使用Best-effort服務模式將不同網路應用程式(例如emails, 
video and audio entertainment, e-commerce, 及real-time games等)封包視為同一傳
輸的類別，因此Ethernet網路並沒有任何服務品質(QoS)的觀念。因此IETF (Internet 
Engineering Task Force)為了解決這個問題，先後提出藉由保留網路應用程式的頻
寬來達到應用程式傳送的預期效能(predictable performance)之IntServ (Integrated 
Service)服務模式及IETF RFC2475所制定的DiffServ (Differentiated Service)等二
種服務品質模式；此外，近年來由於光通訊的快速發展，使得MPLS成為網際網
路上發展相當快的一項技術，這項技術希望能大量的增加現有網際網路上封包的
交換速度、易於擴充網路大小、及提供不同的資料服務等級(Class of Service)能
力等。因此如何確保各種異質網路間服務品質的保證本研究團隊選定在第二年中
研究的課題之一。 
此外由於人為或自然因素對網路系統的破壞(如道路施工、地震、強風或水
災等等)，時常造成光纖斷裂而使得整個網路系統發生崩潰，雖然目前市場上已
有光纖偵測的設備如Anritsu公司的RFTU 9611A[59]與TTC公司的RFTS2000 
Remote Fiber Testing System [30]等，均是功能優越的機種但價格昻貴的光纖監視
系統。圖3-10即為傳統光纖監視系統的架構，其除了通訊設備(NODE A&B)用掉
2芯(1,2)光纖外，光纖監視系統還需佔用第3芯光纖連接RTU(Remote Fiber Testing 
Unit)做長期監視光纖纜線；此外尚須另外建置一套光纖監視網管系統，長期用專
線電路來連接RTU與Fiber Monitoring Network Management System，對網路資源
 36
3.2.1 Metro Ring 網路對於異質性網路間之 QoS Mapping 方式 
本計畫提出一種直接映射(Direct Mapping)[56]服務機制，應用在異質網路的
端點對端點的服務品質保證機制上，這機制是架構在第一年研究成果「CSMA/CP 
Metro Ring 環狀網路」上的 QoS 服務機制。本計畫提出的網路系統為一個具雙
向全光式傳輸的光纖環狀網路，該網路上共有 N 個節點及 W 個通道，每個通道
對應一個特定的波長獨立運作傳送資料。各節點的架構具有一個調變傳送器和 W
個固定接收器，當光信號傳送到節點時，Splitter 會將光的一小部份信號分到接
收器，接收器偵測光信號中的節點位址識別(Address Identification)。若封包目的
位址是該節點時，則將該封包收入節點接收佇列，同時啟動 MAC Controller 將
On-off switch開啟以防止資料封包再循環， 由於節點在 Splitter與MAC Controller
間設有延遲線可以延遲封包(Incoming Packet)，讓節點進行位址的識別、啟動
MAC 控制器與利用 on/off switch 來移除接收的封包。若目的位址不是該節點，
封包經過延遲線後直接傳送到其 Downstream 的節點。而進入該節點的區域封包
將依照其 QoS 等級分類儲存在相對應的 Tx-Queue 中(如圖 3-10 所示)等待傳送。 
 
圖3-11. 支援DiffServ之MAC協定. 
點傳送封包為避免節點傳送佇列的 HOL (Head of Line)呆滯問題及封
包不同 QoS 需求，本系統採用直接映射服務機制針對 IETF RFC2475 所制
 38
會以 Poisson Distribution 產生無預期(Unpredictable)的 QoS IP 封包 Traffic。再以
本計畫開發之 OM-Box 搭配 Fiber Switch 融入節點架構中，當 OM-Box 偵測到光
纖斷裂時，立即送出一訊息給 MAC Controller，MAC Controller 收到此故障訊息
後，迅速切換 Optical Protection Switch (OPS)狀態，讓光封包立即反向傳送，網
路此時如同單一環狀網路；當 OM-Box 偵測到光纖斷裂修復後，立即送出一訊
息給 MAC Controller，MAC Controller 收到此回復訊息後，迅速切換 OPS 狀態，
讓網路恢復正常雙環網路功能。 
表 3-5. 異值網路 QoS Mapping 模擬參數表. 
Architecture (TT-FRN) CSMA/CP Metro Ring 
Node number 16 
Channel number 8, 4 
QoS applying EF:20% , AF:50% , and BE: 30% 
Light velocity in fiber: V 2×108 m/s 
Ring network length 100 km 
Channel speed 10 Gb/s (OC-192) 
Size of the delay line 1500 Bytes (240 meters) 
IP packet size OC-3 traffic: 40~1500 Bytes 
Average Packets 353.8 Bytes 
本計畫以 SIMSCRIPT II.5 程式進行系統 Traffic Load 與 End-to-End 
Transmission Delay 的模擬，其模擬如表 3-5 所示, 模擬結果如圖 3-13 及圖 3-14
所示。其中由圖中可發現，當通道數為 4 節點數為 16 時，EF 封包即使是在系統
滿載下能保持及時服務能力；當通道數增加為 8 節點數為持 16 時，EF 及 AF 二
類封包即使是在系統滿載下，仍能保持及時服務能力。圖 3-15 及圖 3-16 則是顯
示在節點數固定下改變通道數 W 為 4 與 8 時，各種等級的服務品質封包 Traffic 
Load 變化情形，由圖中可發現當通道數與節點數相同時，無論是哪一類的封包
均能提供百分百的流量值。 
 40
4 Channels
0
0.1
0.2
0.3
0.4
0.5
0 0.2 0.4 0.6 0.8 1
Traffic Load
Th
rou
gh
pu
t
EF
BE
AF
Total
 
圖 3-15. W=4, N=16 之節點平均 Throughput. 
8 Channels
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
0 0.2 0.4 0.6 0.8 1
Traffic Load
Th
ro
ug
hp
ut EF
AF
BE
Total
 
圖 3-16. W=8, N=16 之節點平均 Throughput. 
 
 
 
 
 42
監視盒 (Optical Monitor Box, OM-BOX)，利用此OM-BOX偵測該光纖上是否
有光訊號及訊號的強弱，以判斷該通訊設備是否有將光訊號送出，分析
是否有障礙發生。而網管結合部分，透過OM-BOX與Node A&B間的通訊
(圖中紅虛線部分 )將障礙訊息送至現有的接取網管。不論實體或網管皆嵌
入於現有系統，因此才將本系統命名為”嵌入式光纖監視系統”。  
 
圖3.18. 原光纖監視系統架構圖. 
 
圖3.19. 嵌入式光纖監視系統(EFMS)架構圖. 
表 3.6. 障礙判定表. 
Node-A Alarm Node-B Alarm 障礙原因 
OLOS1 OLOS2 Node A 設備故障 
無 OLOS2 光纖障礙 
OLOS2 OLOS1 Node B 設備故障 
OLOS2 無 光纖障礙 
為方便網管人員判定，統一定義 OM-BOX接收近端設備的光為
port1(1 in / 1 out)；接收遠端設備的光為port2(2 in / 2 out)。如圖3.19於兩
 44
以下是有關設計OM-BOX相關資訊：  OM-BOX電源：一般通訊設備
都具有DC電源且而大多為 -48V，故本OM-BOX電源採用DC -36 ~ -72V，
幾乎可適用於所有廠牌的Access Node。  
(1) Alarm Interface：一般通訊接取設備皆具有一組External alarm輸入點， 
當初設備商設計此External alarm主要供門禁及環境 (如溫溼度 )告警
用，其規格需求皆為乾接點 (a,b接點 )。OM-BOX要將所偵測到的故障
訊號送至現有的接取設備網管系統，就要透過此橋樑，故OM-BOX的
Alarm Interface即需提供乾接點訊號給通訊設備的External alarm，說穿
了就是使用繼電器 (Relay)就行了！電路如圖3.21所示。  
 
圖3.21. Alarm介面電路圖 . 
(2) OM-BOX外觀：因大部分的接取電信機房都位於地下室，當障礙發生
時，現場維修工程師與外界通訊可能中斷而無法與網管人員聯繫，故
本OM-BOX特地設計2個雙色LED指示燈供現場維修人員參考，如圖
3.22所示，正常時亮綠燈，異常有告警時亮紅燈，每個光port各用一個
LED指示。Alarm Interface採用DB-9連接器，基於現場安裝便利，故使
用RJ-45網路線與Access Node連接。圖3.23為2組光  in/out port，共有4
個FC光纖轉接器 (FC adapter)，整體非常簡潔。此為測試模型，如有機
 46
系統。  
(2) Alcatel 1353DN網管設定：Alcatel Litespan多功能接取設備的網管為
Alcatel 1353DN，要設定其External point告警的定義時，可由External 
Points選項中設定，type設為 input；User Label自行取告警名稱；Polarty
設為High就行了。  
 
圖3.24. Alcatel 1353DN網管External alarm設定 . 
 
圖3.25. UTStarcom Netman網管External alarm設定 . 
要檢查所有告警點的狀態，可由Views選項中的External Points觀看，
如圖3.24所示；當有告警發生時，於Alarm視窗亦會秀出。  
 48
    電信產品的研發，必定要經過實驗室測試 (Lab. Test)與現場測試
(On-line Field Test)，驗證該產品達電信級的99.999%可靠度後才可正式上
線。以下將探討本計畫的實作結果與驗證過程。其實驗室功能測試  – 
OM-BOX + FOM如下：  
(1) 試驗所需儀器設備：  
TELWAYS SL-FE80 光纖多工機 (FOM, Fiber Optical Multiplexer) 
手調光衰減器 (Optical Attenuator) 
EXFO FOT-20A 光功率計 (Optical power meter) 
電源供應器 (-48V DC) 
(2) 試驗環境組合如圖 3-27 所示： 
 
 
 
 
圖3-27. 實驗室功能測試–OM-BOX + FOM測試組合圖 . 
(3) 測 試 說 明 與 結 果 ： EFMS 現 場 測 試  –Field try –UTStarcom  
AN2000Alcatel Litespan 1540 Msan R2 的 EFMS 系統整合測試完後，
再來進行 UTStarcom AN2000 的 in-serviceEFMS 系統整合測試：  
 
圖3-28. EFMS Field test系統架構圖 - UTStarcom AN2000. 
OM-BOX 
FOM
Attenuator 
1 in 1 out 
2 out 2 in 
 50
圖 3-29 中，將 OM-BOX 置於 AN2000 接取設備的機架上，並使用接取設備
的 DC –48V 電源，利用 DB-9 轉 RJ-45 轉接頭與 RJ-45 網路線來銜接 OM-BOX
的 Alarm Interface 與 AN2000 的 External alarm。 
將 2 只 OM-BOX 嵌入於 AN2000 光纖網路中，圖 3-30 中 OM-BOX LED2
亮紅燈，此為模擬 port2 光纖斷線的結果，此時 Netman 網管立刻偵測到 OLOS2
告警，如圖 3-29 所示，表示 EFMS 也能運作於 AN2000 的接取網路中。 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 52
表 3-7 與圖 3-31 為台灣一家民營固網業者 (Asia Pacific Telecom Group, 
APTG) 於 2004 年光網路障礙統計資料，包含設備障礙、光纖障礙與網管
誤判的次數統計。基於提高服務品質、縮短障礙修復時間與提昇網路可
用度，各業者皆評估建立各種光纖監視系統。然而傳統的光纖監視系統
不僅費用昂貴，而僅能偵測光纖障礙，以表 3-7 為例，有 24.3%的設備障
礙無法被偵測出，14.6%的誤派率也無法避免，唯 EFMS 有能力克服所有
問題，100%偵測光網路的障礙。表 3-8 為本系統與一般光纖監視系統比較表。 
2004 Trouble tickets
0
5
10
15
20
25
30
35
40
45
Jan. Feb. Mar. Apr. May Jun. Jul. Aug. Sep. Oct. Nov. Dec.
Month
Co
un
t
Equipment fault Fiber break Erroneous diagnosis
 
圖3-31. 2004年APTG南區光網路障礙統計圖 . 
 
表 3-7.  2004 年 APTG 南區光網路障礙統計表 . 
Iterm Jan. Feb. Mar. Apr. May Jun. Jul. Aug. Sep. Oct. Nov. Dec. 小計 百分比 
Equipment 
-fault 9 8 13 11 6 7 3 11 13 10 7 12 98 24.30% 
Fiber 
-broken 20 21 35 33 16 42 27 25 29 26 30 19 304 75.70% 
Erroneous 
diagnosis 2 8 6 7 5 5 3 5 6 5 7 5 59 
誤派率: 
14.6% 
小計 29 29 48 44 22 49 30 36 42 36 37 31 402  
資料來源：Asia Pacific Telecom Group (APTG), Taiwan. 
以實際案例而言，光纜發生障礙時可能是整條光纜被截斷，也有可
能只斷部分光纖芯數，傳統的光纖監視系統利用光纜中的一條芯數監測
光纖障礙，容易發生誤判；而本嵌入式光纖監視系統則是實際監測
In-service 光纖的品質，不會造成誤判。一般通訊設備最小光接收功率 (靈
 54
3.3  IP 直接在 DWDM 環狀網路傳輸之 Scalability 問題 
本年度的研究將著重在探討 IP over CSMA/CP Metro Ring 網路規模
(Scalability)的課題，並深入分析節點光纖延遲線(Fiber Delay Line)在載波優先
(Carrier Preemption)機制下的最佳長度值，以了解該機制封包切割(Fragmentation)
次數對延遲線長度的影響。當網路節點數增加到大於上述最佳值時，整個環狀網
路的傳輸時間將增加到系統效能的極限，因而網路必須分層化而形成階層式環狀
網路(Hierarchical Ring Network)如圖 3-32 所示，進而產生了網路 Scalability 的研
究課題，諸如探討階層式環狀網路的層數、Routing 節點與 Access 節點的數量、
Routing Algorithm、及訊框表頭的格式等的新課題。 
 
 
圖 3-32. Single Ring 擴展成 Hierarchical Ring 示意圖. 
3.3.1 CSMA/CP 節點之最佳 FDL 長度設計與模擬結果 
    由於光暫存器(Optical Random Access Memory)至今難以實現，因此光纖延遲
線(Fiber Ddelay Line)是目前用來替代O-RAM方式之一，依其配置方式可分為
Feed-forward及Feedback二種不同的架構，兩者均有其獨特的優點與缺點。本計
畫所使用之節點的 FDL是採用前者之架構。FDL安裝在CSMA/CP節點是為避免
封包傳送時與環上的封包發生碰撞以及節點上的光交換器(Optical Switch)在切換
移除下載之封包防止繼續流傳在環上之功能，在圖3-2所示之節點架構圖中，由
於Optical Switch與Tunable Laser二光電元件均存在著物理速度之極限，因此封包
 56
z 模擬分析與結果 
    為實際模擬真實 IP 封包長度之分佈，本章節所使用之 IP 封包長度產生器是
以 MCIs backbone OC-3 links [49] 為模擬範本(如圖 3-34)所示，而封包的出現機
率是屬於 Poisson Process 以及 Interrupted Poisson Process (IPP)事件，且每一節點
所產生之模擬封包均平均傳送至其他每個節點，此外為了讓系統達到穩定，每一
模擬曲線之模擬點的模擬時間單位均在 20,000,000 以上，且所使用之模擬 PC 均
為 Pentun-IV 級(共 40 台)，其系統模擬參數如表 3-9 所示，模擬程式是以
SIMSCRIPT II Codes 所撰寫，模擬結果如圖 3-35 至圖 3-41 所示。其中由圖 3-35
與圖 3-36 為考慮各種不同 Tg 值之 FDL 長度與 Throughput 關係曲線圖，由圖中
可發現當通道數 W=4，節點數 N=16 時，各種不同的 Tg 值隨著 FDL 長度增加呈
現一曲線變化，其中各曲線的最高點大致上呈一直線變化，以 Tg=12.5 bytes, 
N=16,W=8 為例，最佳的 FDL 長度約在 40 bytes 左右，而 Tg=0 及 5 byte 之最佳
FDL 長度均低於 40 bytes，故在最佳長度虛線線上並沒有顯示出來。 
           表 3-9. 考慮 Tg 效應下之模擬參數表. 
Architecture : TT-FRW 
Number of Nodes 16 (Fixed) 
Number of Channels 2, 4, 8, 16 
Light Velocity 2×108 m/s 
Ring Network Length 100 km 
Channel Speed 10 Gb/s (OC-192) 
Guard-band Distance (Tg) 5, 12.5, 40, 53, and 64 Bytes 
FDL Length 40~(1500+ Tg) Bytes 
Packet Range OC-3 Traffic Distribution and Poisson Process 
Average Packets Length 353.8 Bytes 
 58
bytes (4ns)之下 W=2,4,及 8 個通道平均負載曲線圖。 
表 3-10. 考慮不同 Tg下模擬所得之最佳 FDL 長度值. 
Architecture : TT-FRW 
Tg (Bytes) FDL (Bytes) 
Tg (Bytes) W=4 W=8 
0 40 以下 40 以下 
5 40 以下 40 以下 
12.5 60 60 
40 135 130 
48 155 150 
64 180 170 
4 Channels & 16 Nodes
200
250
300
350
400
450
500
40 80 120 160 200 240
FDL (bytes)
Tr
am
sm
iss
ion
 D
ela
y(μ
s)
Tg-0 Tg-5 Tg-12.5 Tg-40 Tg-48 Tg-64
 
圖 3-37. N=16，W=4 時各種不同 Tg 值之 FDL 長度與 Transmission-delay 關係曲
線圖. 
 60
 
圖 3-40. 在最佳 FDL 長度下 W=2,4,8 及 16 之最佳效能曲線圖 (N=16, Tg=12.5 
bytes). 
 
 
 
 
 
 
 
 
 
 
 
 62
(Upstream)或下載(Downstream)時發生碰撞(Collision)？  
z 在階層式環狀網路上如何完成封包的繞送(Routing)? 
z 網路的錯誤容忍力(Fault Tolerance)如何解決? 
Core
Ring
Local
Ring
Local
Ring
Local
Ring
Local Area Network
Gigbit Ethernet
 Government
Wireless
FTTB
FTTCurb
E-PON
FTTH
Local Area Network
Backbone
Network
 
圖 3-41. 階層式環狀網路. 
過去曾有多位國外專家學者提出有關階層式環狀網路的網路拓撲以及擷取
點架構的設計，在此說明並比較之： 
z Ahmed Louri 等人提出以 TDMA(Time-Division Multiplexing Access)協定來建
構階層式環狀網路[36]，每個擷取點有各自的 Channel 來傳送資料，並且為了
能做到Multicast and Broadcast的功能，每個單環網路均有各自專用的Channel
來執行 Multicast and Broadcast 的功能，但其缺點是不能有效達到 Channel 利
用率且網路在增加或減少擷取點時，網路管理者必須重新設計各擷取點的
Time Slot 時間，故其網路的擴充性差。此外，對於高速網路而言，同步是件
極困難的問題[31]。 
z Govindan Ravindran 等人提出以電的緩衝器(Buffer)來解決階層式環狀網路擷
取點及核心環狀網路繞送節點(Routing Node)的封包碰撞問題[34-35][44] ，此
種架構雖能解決封包碰撞問題，但所有封包必需經光轉電-電轉光(O/E/O)的
方式來完成，受限於電的處理速度及容量大小，這將造成大量的封包塞在緩
 64
3.3.3 CSMA/CP 在階層式環狀網路傳輸之設計方式 
對於單一環狀網路最大的擷取點數量之計算以及節點架構之設計方式，本計
畫認為可由以下方式來考慮： 
ㄧ、單一環狀網路最大的擷取點數量之計算方式 
(a) 傳送延遲(Transmission Delay)時間的考量：比較單一環狀網路與階層式環狀
網路點對點(Point to Point)平均擷取封包的延遲時間，以計算單一環狀網路的
最大擷取點數大小，即 
)min(max delayonTransmissiN −∈ …………………………....(13) 
    但此方法受限於光電元件特性的影響極大，因不同的光電元件，對於光
封包的處理時間差異性極高(如 Switch 切換時間、Laser 調變時間等因素)；因
此，此方式較不易精確計算出單一環狀網路與階層式環狀網路在端點對端點
傳送時間延遲的計算。 
(b) 用戶頻寬需求的考量：由於文獻[49]了解網路之最長封包長度為 1500 bytes，
為避免 AP 節點再傳送封包時與通道內之封包發生碰撞產生，以作者研究所
提出之文獻[9]為例，可將 FDL 長度設定成最大封包長度，如此 MAC 
Controller 所偵測到之 Idle Space 將足以傳送區域網路所上傳至環狀網路之任
何封包發生碰撞(假使有封包長度超過 1500 bytes，則該封包進入 TX-queue
時就事先予以切割)。網路模擬參數條件如表 3-11 所示下，由模擬分析可求
得如圖 3-42 所示之網路擷取點平均封包接收率，以單環共有 16 個擷取點為
例，當 Channel 數為 4 時，其擷取點平均封包接收率可達 3.4Gb/s 左右；而
Channel 數為 8 時，其擷取點平均封包接收率可達 6.5Gb/s 左右，因此，當環
狀網路光纖內的總 Channel 數增加時，則網路上各擷取點的封包接收率將相
對的提高，即 Throughput-Delay 關係將相對改善。反過來說，也就是說當網
路光纖內所採用的總 Channel 數固定時，其單一環狀網路上每增加一個擷取
點時，網路上各擷取的平均封包接收率將相對的降低，在網路參條件如表 3-12
所示下，由模擬分析可求得如圖 3-43 所示之網路擷取點平均封包接收率，當
Channel 數為 8 時，其擷取點平均封包接收率可達 10.0 Gb/s 左右，但當擷取
點數達到 40 個時，其擷取點平均封包接收只剩下 2.6 Gb/s 左右。因此，當環
狀網路的擷取點數增加時，則擷取點的封包平均接收率將下降，即
 66
200
300
400
500
600
700
800
2 3 4 5 6 7 8 9 10
Gb/s
Transmission Delay (ms)
Node=40 Node=24 Node=16
Node=8
Node=32
 
圖 3-43. AP 節點平均封包接收率 (W=8 固定). 
 
圖 3-44. 階層式環狀網路之擷取點(Access Node)架構. 
二、 AP 節點架構之設計 
為避免光封包在階層式環狀網路上傳送時發生碰撞現象，本文對於階層式
環狀網路的擷取點結構設計大致分為二類： 
(a) Access Node (Local Ring) 
此種擷取點架構主要用於銜接區域網路與環狀網路之間的封包傳送，存取
協定使用 CSMA/CP 來做為環狀網路與區域網路的封包資料上傳與下載，為避
免 AP 節點再傳送封包時與通道內之封包發生碰撞產生，FDL 長度設定成最大
 68
取控制協定流程圖，及符合網路載波擷取的協定機制。為了能符合大都會環狀網
路的MAC Protocol，其IP封包的格式如圖3-46所示。由於封包的表頭(Header)是
以射頻技術的副載波(Subcarrier)方式來完成，因此表頭欄位並不會佔用到Payload
的頻寬，因此可減少Overhead產生，以提高頻寬利用率。文獻[24]認為大都會環
狀網路的AP不宜超過128個，故SA及DA二欄位址均只需1 byte即可(28=128)，SD
及ED亦只需1 bytes，而FG欄位取2 bytes，其中的11 bits用來表示封包長度，其餘
則保留其它用途，如QoS(Quality of Service)。CRC則取4 bytes，因此Subcarrier
的表頭大致只需10 bytes長度即可。 
Traffic 
Generator
Y
Have ACL and Packet
Transmitting?
Y
ACL >=Q1 ?
ACL >=Q2 ?
Y
N
Y
ACL  >=Q3 ?
N
Y No ACL  or 
packet to transmit
Tunable
Transmitter
N
Fix
Receiver
Fix
ReceiverFix
Receiver
Packet header 
matches the node 
address?
Drop
ACL : Available Channel  Length
The packet 
is ignored
N
Q1 Q2 Q3
Q1 : 553~1500 bytes
Q2 : 41~552 bytes
Q3 : 40 bytes
MAC Controller
To Fiber
 
圖 3-45. 媒介存取控制協定流程圖. 
DATA
SD DA SA FG CRC ED
Sub-Carrier
SD : start delimiter 
ED : the end delimiter
SA : source address
DA : destination address
CRC : the cyclic redundancy check
FG : is reserved for extended protocol functions.  
圖 3-46. 封包表頭的欄位內容. 
 70
3.3.4 階層式都會環狀網路系統運作說明與討論 
首先假設廠商在架設環狀網路時，其單一光纖的 Channel 數有 8 個，且每
一個擷取點的平均封包接收率期望能達到 62%以上，則根據圖 3-42 所示，當都
會環狀網路的通道數為 8，而系統效能欲達到 60%左右時，則單一環狀網路的
最大擷取點數只能設定在 16 個以下(含 16)，超過 16 個，就必須採用階層式環
狀網路。假設今天擷取點數共有 48 個，其網路架構如圖 3-48 所示，Local Ring 
共有 3 個，每個 Ring 上共有 16 個擷取點，其中一個為 Routing Node，其餘則
是 Access Node；每層 Local Ring 的 Channel 數需 8 個，核心的第一層 Core-Ring
則需 Channel 數則是 24 條。因此，階層式環狀網路各層的波長(Wavelength)分
配如下： 
   R(1,1)=λ1~λ24       R(2,1)=λ1~λ8      R(2,2)=λ9~λ16        R(2,3)=λ17~λ24 
1
6
5
4
7
18
17
16
3
2
24
23
22
21
20 19
32
33
48
403938
37
36
35
34
Inter-Ring
Local-Ring
Routing Node
Routing Node
λ1-λ 8
λ17-λ 24λ9-λ 16
λ1-λ 24
R(1,1)
R(2,1)
R(2,2) R(2,3)
 
圖 3-48. 階層式都會環狀網路中各環路通道之設定. 
例如當 Node21 欲傳送資料至 Node7 時，首先 Node21 藉由 Access Node 之網
路協定機制將封包傳送至 Local Ring R(2,2)的 λ9~λ16 其中一可供傳送資料的
Channel 上，並經過 R(2,2)上各擷取點偵測此光封包的目的地位址並非自已後，
自然地繞送至 Routing Node17，Routing Node17 偵測該光封包的目的地發現此光
封包的目的端並不屬於 R(2,2)上任一網域的位址時，則將該光封包上傳至
Core-Ring，由於 λ9~λ16 屬於 R(2,2)所使用的波長。因此，當 Node17 將該光封包
 72
時也會把這些資訊傳給它所在的環上之 Routing Node，所以每個環上的 Routing 
Node 會記錄著環內各 Access Node 所管轄的網域資料。當有封包從區域網路要
透過環狀網路上傳時，首先它會 Edge Access Node 的網域資料，並送出 Request
給 Routing Node，Routing Node 則會去查詢是否屬於環內所屬的 Node，如果是
屬於該環，則回應 Node Number，否則，回應 Unknown，如果 Access Node 收到
Unknown 回應，就將目的端設成 Routing Node，Routing Node 收到此封包，重複
之前的步驟，就可以繞送到目的 Access Node，同時封包的表頭必須記錄著繞送
路徑，並將此資料存在目的 Access Node 的路徑表上，所以當要回傳封包的時
候，就可以依照路徑表的資料，回傳到目的端，而不需要再作 Routing 的工作了。 
利用 CSMA/CP MAC Protocol 的機制配合適當長度的 FDL 來設計 Access 
Node 與 Routing Node 之 MAC 存取協定解決封包擁擠與碰撞的問題，並且為了
能增加區域網路的傳輸量，預先將區域網路的封包在進入環狀網路的擷取點時，
按照封包長度的大小分別存放在不同的 Queue 內，經程式模擬結果，此方式不
但避免了封包的碰撞，亦能提高網路的傳輸率。 
為提高階層式環狀網路因光纖斷裂或擷取點上之任一光電元件故障，以至
於造成整個環狀網路的停擺，其環狀網路需採用雙向(Bidirectional Ring)來提升
錯誤容忍力。 
z 結論 
當單一環狀網路的擷取點數量過多時，將使網路的各擷取點之 Throughput- 
Delay 下滑，使得環狀網路的效能降低。因此，本文針對此點提出以階層式環狀
網路代替單一環狀網路，並且為能兼具單一環狀網路的優點下，逐一探討階層式
環狀網路所面臨的問題與解決方式，以提高網路的 Throughput-Delay 及降低網路
的價格等問題。  
 
 
 
 
 
 
 
 
Routing Node 
Access Node 
 74
五、 參考文獻 
[1] Y. Frignac, etc., “Transmission of 256 wavelength-division and polarization- 
division-multiplexed channels at 42.7 Gb/s (10.2 Tb/s capacity) over 3x100 km 
of Teralight fiber,” Optical Fiber Communication Conference and Exhibit, OFC 
2002, pp. FC5-1 - FC5-3, Mar. 2002. 
[2] N. Ghani, S. Dixit, T.S. Wang, “On IP-over-WDM Integration,” IEEE Comm. 
Magazine, vol.38, no.3, pp. 72-84, Mar. 2000. 
[3] W.S. Hwang, W.F. Wang, J.Y. Wang and C.C. Li, “A Carrier Preemption Access 
Control Protocol for DWDM Ring Networks,” ISCOM 2001. 
[4] W.S. Hwang, J.H. Ho and C.K. Shieh, “CSMA/CP: An access control protocol 
for supporting IP packets over WDM ring networks,” NCS 2001, pp. E116-E121. 
[5] S.S. Sung and W.S. Hwang, 2002, “The Performance Study of CSMA/CA of 
HORNET,” 2002 Symposium on Digital Life and Internet Technologies, 3D-4. 
[6] W.S. Hwang, J.H. Ho and C.K. Shieh, “Performance analysis of IP packets over 
WDM ring networks,” 14th International Conference on Parallel and Distributed 
Computing and Systems (PDCS 2002), pp. 816-821. 
[7] W.P. Chen, W.S. Hwang, and C.C. Li, 2002, “以 CSMA/CA 協定完整傳送 IP 
封包至 WDM 環狀網路,” 2002 年全國電信研討會, NET-4-3. 
[8] C.C. Li, S.W. Kau, and W.S. Hwang, 2002, "A CSMA/CP MAC Protocols for IP 
over WDM Metropolitan Area Ring Networks," 8th IEEE Internation Conference 
on Communication Systems (ICCS2002), pp.1217-1221. 
[9] W.P. Chen, W.S. Hwang, and C.C. Li, 2002, "A Packet Pre-classification 
CSMA/CA MAC Protocol for IP over WDM Ring Network," 8th IEEE 
Internation Conference on Communication Systems (ICCS2002), pp.1222-1226. 
[10] J.H. Ho, W.S. Hwang and C.K. Shieh, “Analytical model for an IP over WDM 
ring network,” 10th International Conference on Telecommunications (ICT 
2003). 
[11] R. Guerin.S.Kamat, V. Peris, R. Rajan, “Scablable QoS Provision Through 
Buffer Management,” ACM SIGCOMM, Sep, 1998. 
[12] S.Blake etc., “An architecture for Differentiated Services,” IETF RFC 2457, Dec. 
1998: available online at http://www.rfc-editor.org/rfc/rfc2475.txt. 
[13] K. Nichols, S. Blake, F. Baker, D. L. Black, “Definition of the Differentiated 
Service Field in the IPv4 and IPv6 Headers,” IETF RFC 2474, Dec, 1998. 
 76
[28] Nelson, L.E.; Cundiff, S.T.; Giles, C.R., “Optical monitoring using data 
correlation for WDM systems,” Photonics Technology Letters, IEEE , Volume: 
10 , Issue: 7 , July 1998, Pages:1030 – 1032 
[29] Chung, Y.C., “Optical monitoring techniques for WDM networks,” Broadband 
Optical Networks, 2000. Digest of the LEOS Summer Topical Meetings , 24-28 
July 2000, Pages:IV43 - IV44 
[30] http://www.ttcone.com 
[31] Dr David K Hunter, “Issues in Optical Packet Switching,” Network Design 
Technology AON/SWITCHES, 2002, P58-62. 
[32] Yoo, et al., “Supporting Multiple Classes of Services in IP over WDM 
Networks,” Globecom’99, pp.1023-1027, 1999. 
[33] A. Mankin, F. Baker, B. Barden, S. Bradner, M. O’Dell, A. Romanow, A. 
Weinrib, and L.Zhang, “RSVP Version 1 : Applicability Statement, Some 
Guildlines on Deployment,” Sep, 1997. IETF RFC 2208. 
[34] V.Carl Hamacher, Senior Member, IEEE, and Hong Jiang, Member, IEEE, 
“Hierarchical Ring Network Configuration and Performance Modeling,” IEEE 
transactions on computers, Vol.50, NO.1, January 2001, P1-12. 
[35] Mohammad AL-Rousan, LeRoy Beamson, and James Archibald, “The 
Two-Processor Reliability of Hierarchical Large-Scale Ring-Based Networks,” 
Proceedings of the 29th Annual Hawaii International Conference on System 
Sciences 1996, P63-71. 
[36] Louri, A.; Gupta, R., “Hierarchical optical ring interconnection (HORN): a 
scalable interconnection-network for multiprocessors and massively parallel 
systems,” Third International Conference on, 27-29 Oct 1996, P247 –254 
[37] S. Dandamudi and D. Eager., “Hierarchical Interconnection Networks for 
Multicomputer Systems,” IEEE Transactions on Computers, 39, Jun. 1990, pp. 
786 – 797. 
[38] P. Dowd, K. Bogineni, K. A. Aly, and J. A. Perreult., “Hierarchical Scalable 
Photonic Architectures For High Performance Processor Interconnection,” IEEE 
Transactions on Computers, 42, Sep. 1993, pp.1105 – 1120. 
[39] A. Louri and R. Gupta., “Hierarchical Optical Interconnection Network (HORN): 
Scalable Interconnection Network for Multiprocessors and Multicomputers,” 
Applied Optics, 36, Jan. 1997, pp.430 – 442. 
 78
and fixed receivers,” Communications, 1997. ICC '97 Montreal, Towards the 
Knowledge Millennium. IEEE International Conference on , vol.1, pp. 437 –442. 
[53] M.A. Marsan, et al., “On the performance of topologies and access protocols for 
high-speed LANs and MANs,” Computer Networks and ISDN Systems 26 
(1994), pp. 873-893. 
[54] Shrikhande, et al., “HORNET: a packet-over-WDM multiple access metropolitan 
area ring network,” IEEE Journal on Selected Areas in Comm., vol.18, no.10, pp. 
2004-2016, Oct. 2000.  
[55] Jeiger, C.S.; Elmirghani, J.M.H. “Photonic packet WDM ring networks 
architecture and performance,” IEEE Communications Magazine, Volume: 40 
Issue: 11, Nov 2002. pp. 110 –115. 
[56] Li-Ming Shih, Wen-Ping Chen, W.S.Hwang, and Ching-Tuey Sung, 
“Development of an Embedded Fiber Monitoring System,” 2004 National 
Symposium on Telecommunications, PCOM-2-10, Dec. 2004. 
[57] Sava Stanic, Suresh Subramaniam, Hongsik Choi, Gokhan Sahin, and 
Hyeong-Ah Choi “Efficient Alarm Management in Optical Networks,” Computer 
Society (DISCEX’03) 2003 IEEE. 
[58] J.H.Ho, W.S.Hwang and C.K.Shieh, 2001, "An Integrative Scheme of 
Differentiated Services base on Proportional Delay Differentiation," 
ISCOM2001. 
[59] http://www.us.anritsu.com. 
[60] W.P. Chen, W.S.Hwang, and T.C. Hsin, ”A Novel MAC Protocol of IP over 
Metro Ring Network for End-to-End QoS,” IEEE ICSS2005 International 
Conference On Systems & Signals, 1184-1189, 2005 
[61] Pellegatta, M., Monguzzi, M., Mazzarese, A. and Zucchetti, A. “Fiber Networks 
Maintenance in the All-Optical Network Era,” Network Operations and 
Management Symposium, 2002. NOMS 2002. 2002 IEEE/IFIP, pp. 855-868, 
15-19 April 2002. 
 80
七、可供推廣之研發成果資料表 
可供推廣之研發成果資料表 
■ 可申請專利  □ 可技術移轉                                 日期：95 年 10 月 22 日 
國科會補助計畫 
計畫名稱：IP 在 CSMA/CP WDM 環狀網路 QoS 與可用性之研究 
計畫主持人：黃 文 祥 
計畫編號：NSC 94-2213-E-151-001      學門領域：資訊一 
技術/創作名稱 全光式環狀都會網路 CSMA/CP 之服務品質機制 
發明人/創作人 黃文祥、陳文平、何日新 
中文： 
本機制特點在於全光式環狀都會網路中，以載波先行、資料分批傳
送的技術，提供網路系統的高傳輸效能，同時結合資料分類方法及
排程機制，讓不同優先等級的資料可以比例的方式來傳輸，對經都
會骨幹網路部份的資料傳輸可具有端點到端點網路服務品質的效
益。 
 
技術說明 英文： 
The mechanism adopts the carrier preemption and data partition 
technologies for all optical ring Metropolitan area networks. It provides 
very high throughput for network system and proportional quality of 
service (QoS) for differential data by using data classification and 
scheduling methods. It would offer the transmission through the core 
part of MAN to get the end-to-end QoS benefit. 
可利用之產業 
及 
可開發之產品 
本機制可設計於全光式環狀都會網路的核心部份 
技術特點 
利用載波先行、資料分批傳送的技術及結合資料分類方法及排程機
制，可讓不同優先等級的資料可以比例的方式來傳輸，達到端點到
端點的網路服務品質。 
推廣及運用的價值
讓不同優先等級的資料可以比例的方式在於全光式環狀都會網路
中傳輸，具有端點到端點網路服務品質的效益。 
※ 1.每項研發成果請填寫一式二份，一份隨成果報告送繳本會，一份送 
貴單位研發成果推廣單位（如技術移轉中心）。 
※ 2.本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。 
※ 3.本表若不敷使用，請自行影印使用。 
 82
(B)研討會論文(Conference Papers): 
1. C.H. Shih, C.C. Liao, C.K. Shieh, and W.S.Hwang, 2004,“A Transparent QoS 
Mechanism to Support IntServ/DiffServ Networks," IEEE Consumer 
Communications and Networking Confernece (CCNC), Las Vegas, NV, Jan 2004. 
(美國拉斯維加斯) 
2. Tsung-Hsun Wu, C.H Ke, Ce-Kuen Shieh, and W.S.Hwang, 2004,“A Practical 
Approach for Providing QoS in Bluetooth Piconet," The 3rd Annual Mediterranean 
Ad Hoc Networking Workshop (Med-Hoc-Net 2004). Jun. (土耳其) 
3. Sheng-Hsiung  Lin and W.S.Hwang, 2004,“Study the Translation of Mobile 
IPv6/IPv4 Networks Using DDS-DNS and NAT-PT," Proc. of 2004 Symp. on 
Digital Life and Internet Technologies, Session(4B)-QoS (I). 
4. Sheng-Hsiung  Lin, W.S.Hwang, Jun-Yao Wang, and Shou-Jen Wey,  2004,“The 
Development of an iSCSI Agent with iICMPv6 in iSCSI Storage Network," TANET 
2004. 
5. Xiang-Rui Sun,  Ching-Hung Lin, W.S.Hwang, Jun-Yao Wang, and Chin-Pei 
Su,  2004,“The Implementation and Performance of LVM System with Web 
Interface," TANET 2004. 
6. C.H Ke, C.K.Shieh, W.S.Hwang, and Artur Ziviani,  2004,“A Simple and Efficent 
Packet Marker System for Enhanced MPEG Video Delivery over DiffServ 
Networks," ATNAC 2004, pp.542-548, Dec. 2004. (澳洲雪梨) 
7. W.P.  Chen, L.M. Shih, W.S.Hwang, and G.C. Hwang,  2004,“A Novel 
Metro-Ring Network Using the PPCP technique," 2004 年全國電信研討會 , 
PNET-3-4, Dec.  2004. 
8. L.M. Shih, W.P.  Chen, W.S.Hwang, and C.T. Sung, 2004,“Development of an 
Embedded Fiber Monitoring System," 2004 年全國電信研討會, PCOM-2-10, 
Dec.  2004. 
9. C.H. Shih, C.K. Shieh, W.S.Hwang,  2004,“A Scene-based Bandwidth Allocation 
with Two-Phase Scheme for VBR Video," ICS 2004, pp. 137-142, Dec.  2004. 
10. Y.S. Yu, C.K. Shieh, W.S.Hwang, C.S Ho, J.F. Chiu,  2004,“An Efficient NAT 
Traversal for SIP and Its Associated Media Sessions," ICS 2004,  pp. 873-877, 
Dec.  2004. 
