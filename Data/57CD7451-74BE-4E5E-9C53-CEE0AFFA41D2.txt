 一、前言 
逕流資料對於各種水利工程的設計和規劃是極為重要的資訊。因此，許多水
文學者致力於發展降雨—逕流模式以推估在某地點某個（或某段）時間的逕流
量。不過，降雨—逕流過程牽涉到許多機制例如漥蓄、截留和入滲等，是眾所皆
知的高度複雜且非線性的物理現象，因此，模擬降雨—逕流過程相當困難。水利
工程師強烈需求一精確、容易使用且可良好模擬降雨—逕流過程的降雨—逕流模
式。 
概念型(conceptual)模式是最常用的降雨—逕流模式。概念型模式是以一組簡
化且可適切描述流域特性的方程組及參數為主要組成分子。模式架構以及模式參
數的適當性對於使用概念型模式進行降雨—逕流模擬的精準度具有決定性的影
響。然而過去降雨—逕流模式的發展者並未讓使用者自由決定模式架構，亦並無
提供模式參數檢定(calibration)的簡單且實用的方法，或是所提供的方法需要使用
者主觀的介入。以台灣經常使用之水筒模式（Tank model）為例，其係由菅原正
已（Sugawara, 1995）所提出之水文模式，屬於集塊式（lumped）水文模式，其
概念是將流域之逕流機制，置換為由數個概念式貯蓄模型容器所組成。將存在流
域內之複雜水文因子，諸如入滲、滲漏、貯留、蒸發、地表逕流、中間流及基流
等現象，以數個相連接的貯留型之模型容器加以類比，藉以模擬流域內降雨－逕
流之定率關係的概念型模式。水筒模式具有單位歷線法（unit hydrograph 
method）、逕流函數（runoff function method）、貯函數法（storage function method）
等共同特點，這些特點基本上均可由水筒模式法加以推導。然而，水筒模式的架
構卻無法隨著流域特性而改變，而且，水筒模式的參數檢定工作通常是以試誤法
獲得。模式參數檢定一工作需極度依賴工程師的專業經驗，唯有資深的工程師才
能以可接受的效率（試誤時間）獲得良好的模式參數（林等, 2002; 林與洪, 2002;
林與王, 2004），這是水筒模式二個極大的缺點。此外，傳統預報模式所遭遇的
另一難題則是其需要額外的方法提供雨量之預報資料用以作為模式計算核心的
輸入，進而使得以降雨—逕流模式為計算核心的洪水預報的複雜度大幅提高。 
模式的架構不應是唯一的，因為流域的特性與該地的氣候、水文地質、流域
坡度及河川特性等因素均有極大的關聯。因此模式的架構應具有彈性使得使用者
可根據其不同的需要而調整。檢定適當模式參數的問題事實上亦就是最佳化
(optimization)的問題。也就是說，模式參數的檢定之目的就是尋找一組可適切描
述實際降雨—逕流過程且能符合使用者需求的模式參數。因此可隨不同流域特性
而調整模式架構以及取得模式參數的通用方法便成為發展降雨—逕流模式的重
要課題。 
類神經網路 (artificial neural networks) 是近年來相當受到矚目及歡迎的降
雨—逕流過程模擬的工具(Chang et al., 2002; Chang et al., 2004; Chiang et al., 2004; 
Rajurkar et al., 2004)。藉由若干神經元(neuron)的連結，類神經網路可以簡單的演
算方式模擬高度非線性現象。此外，類神經網路較傳統降雨—逕流模式受歡迎的
 2
 用途更為廣泛；而內嵌的參數自動檢定法，可幫助使用者容易獲得模式參數，節
省許多時間及人力。 
三、研究方法 
非線性計算單元串聯模式 
非線性計算單元 
非線性計算單元為虛擬的物件，並不存在於實際流域中。其概念相當地簡單
且直觀。NCU 在 NCUC 模式中所扮演的角色與類神經網路中的神經元(neuron)
極為相似。在此首先說明 NCU 的特性，以便了解整個 NCUC 模式的架構。 
一個NCU至少持有三種基本元件，分別是輸入口（the entrance vent）、初始
儲存高度（the elevation of the initial storage, 簡稱為EIS）及若干複合輸出口
（composite vent, 簡稱為CV）。只持有上述三種基本元件的NCU，是最單純的
NCU，吾人將其稱為A型NCU（簡稱為A-NCU），如圖1 所示。A-NCU的計算規
則定義如下： 
( ) EIS0 =S  (1) 
( ) miRi  ,2, ,1,00 K==  (2) 
其中 EIS 為初始儲存高度， 是該 NCU 在時間為 0 時的閾值（sill value），
則是第 i 個 CV 在時間為 0 時的輸出值，m 則是 CV 的個數。方程式(1)與(2)均是
A-NCU 的初始條件。必須注意的是，EIS 是常數，而在演算初始時，NCU 的閾
值（sill value）等於 EIS。A-NCU 的輸出則以下式計算： 
( )0S ( )0iR
( ) ( ) qttRtO m
i
i ,2, ,1 0,,
1
K== ∑
=
 (3) 
其中 t 為時間， ( )tO 為 A-NCU 在時間 t 的輸出，q 為演算時段數目而 是第 i
個 CV 在時間為 t 時的輸出。其中，
( )tRi( )tRi 又以下式計算： ( ) ( )( ) qtmitStR iii , 2, ,1, , 2, ,1,SCVTCVC KK ==−⋅=  (4) 
其中 是門檻函數，定義如下： ( )xT
( )
⎩⎨
⎧
≤
>=
00
0
T
x
xx
x  (5) 
CVCi則是第i個CV的出口係數（composite vent coefficient, 簡稱為CVC），SCVi是
第i個CV的閾值，而 是該NCU在時間為t時的閾值。一個CV具有二個參數，
分別為複合輸出口係數及其閾值，而CV僅在相應NCU的閾值大於其本身的閾值
時，才產生輸出。 
( )tS
A-NCU 的輸出是其所有 CV 產生的輸出的總和。在式(4)中， 是 NCU 的
狀態變數，以下式更新： 
( )tS
( ) ( ) ( )( ) ( ) qttPtOtStS  , 2, 1,          ,EIS  ,1-1-Rec K=+−=  (6) 
其中 是回復函數（recovery function），定義如下： ( yx  ,Rec )
 4
   
圖 3  C 型 NCU (C-NCU) 圖 4  D 型 NCU (D-NCU) 
 
最後一種NCU是D-NCU（簡稱為D-NCU）。如圖4 所示，D-NCU除了具有
三種基礎元件外，還同時具有一個SV及一個ISV。因此，D-NCU的操作規則，除
NCU的基礎操作規則（即式(1)至式(7)）外，尚綜合B-NCU以及C-NCU所有的操
作規則。也就是說，與B-NCU相同，D-NCU的輸出是所有的CV的輸出的總和。
並且，與C-NCU相同，ISV的輸出並不加入成為D-NCU的輸出。 
由上文可知，共有四種不同型態的 NCU。而所有 NCU 中的參數則有以下的
範圍限制： 
0EIS ≥  (11) 
mii  , 2, 1,   , 1CVC0 K=≤≤  (12) 
  , 2, 1,   0,SCV mii K=≥  (13) 
1CSV0 ≤≤  (14) 
1CISV0 ≤≤  (15) 
其中 EIS、 、 、CSV 及 CISV 均如前定義。 iCVC iSCV
在上述四種不同的 NCU 中，SV 及 ISV 的存在與否是固定的，然而個別 NCU
所持有的 CV 個數是可改變的。在本文中，NCU 所持有的 CV 個數稱之為該 NCU
的組態（configuration）。NCU 的組態可根據使用者的需求而調整。為簡化四種
不同 NCU 的表示方法，吾人使用一簡單標記（token）來表示各 NCU 的種類及
其組態。該標記由二個部分所組成，第一部分是一個英文字母，代表該 NCU 的
種類，也就是 A、B、C 及 D 四種類。第二部份則是一個整數，代表該 NCU 所
持有的 CV 個數。舉例來說，一個具有 3 個 CV 的 A-NCU 可以{A3}作為標記；
一個具有 2 個 CV 的 B-NCU 可以{B2}作為標記；一個具有 4 個 CV 的 C-NCU
可以{C4}作為標記，而一個具有 1 個 CV 的 D-NCU 可以{D1}作為標記，以此類
推。 
非線性計算單元串聯模式 
將若干各式各樣的 NCU 串聯後即可形成 NCUC 模式。而在 NCUC 模式中，
NCU 的數量及各個 NCU 的組態可由使用者根據其需求而自行決定。NCUC 模式
之組態示意圖如圖 5 所示，在圖 5 中之 NCUC 模式為由 r 個 NCU 所串聯組成，
而各個 NCU 之間的連結亦如圖所示。NCUC 模式的計算可以下列方程式組表示： 
( ) riS ii  , 2, 1,,EIS0 K==  (16) 
 6
 及環境的改變，生物間求生存的壓力亦隨之增加。新生的生物是由其雙親結合而
產生，並接收了其雙親各別的染色體。換句話說，生物繼承了其雙親的某些特徵，
而這些特徵可能使他們具有適應某種環境的能力。而只有能夠適應其生活環境的
生物才能存活。這自然生物演化的過程構成了所謂演化式演算法(evolutionary 
based method)的基礎。遺傳演算法則是其中的一個分支且近年來經常為人所樂
用。適者生存是生物演化的原則，亦是遺傳演算法的中心思想。其採用序率
(stochastic)及平行(parallel)式的搜尋方法，可快速在解空間(solution space)中同時
搜尋大量的可行解(feasible solution)(Goldberg, 1989)。若遺傳演算法經過良好的
設定，則遺傳演算法可快速的成熟而得到最佳的可行解。 
人工染色體（artificial chromosome，以下簡稱染色體）是遺傳演算法的構成
基石。解空間中的一個點—亦即一個解，可用一條染色體所表示。也就是說，一
條染色體是由若干個參數所構成，而該參數形成的集合則是所研究之問題的一個
解。構成染色體的參數通常是以某種編碼(coding)方式所表示，常用的編碼方法
是二位元編碼(binary coding)，因為其能提供最多的資訊給遺傳演算法使用
(Goldberg, 1989)。若干條染色體的集合則形成了遺傳演算法中的族群
(population)。在遺傳演算法的初始階段，族群中的染色體是以隨機的方式產生，
並在後續的演算中不停地更新。染色體適應環境的能力是以其適應度(fitness)來
衡量。適應度的計算則跟使用者所需要的目標函數有關，因此需視使用者的需要
而選擇適目標函數。遺傳演算法具有相當多不同的種類，然而其重要的機制均是
大同小異的。其主要是由三個運算子—複製(reproduction)、交配(crossover)以及
突變(mutation)所構成。這三個運算子均是操作族群中染色體的方法。複製運算
子的主要功能是選擇適應度較大的染色體—表示解空間中較佳的解，並將其複製
以成為下一代演算產生新的子代的來源。然後，交配運算子則在這些適應度較大
的染色體進行資訊的交換以產生適應度可能更大的子代，亦即產生新的更為良好
的解。突變運算子則以一極微小的機率，隨機地改變族群中染色體某一位置的基
因。其目的是為了避免搜尋落入局部最佳解，並導引遺傳演算法至先前並未搜尋
到的解空間以便得到更良好的解。當遺傳演算法疊代上述三個運算子足夠次數，
直到遺傳演算法成熟時，即可得到全域最佳解。 
五、研究流域與資料集 
本研究以位於台灣北部地區的翡翠水庫流域為研究標的，如圖 6 所示。翡翠
水庫位於淡水河流域上游，水庫集水區面積共 300.6 平方公里，主流為北勢溪，
水庫雨量站有太平站、碧湖站、坪林站、九芎根站、十三股站及翡翠站共五站，
水位-流量站則有坪林站、魚堀站、金瓜溪站及翡翠壩址站等共五站，研究主體
則以颱洪事件為研究標的。
 8
