2 
 
 
技術研發成果說明： 
本研究計畫完成之具體成果包括： 
1. 完成微機電式加速度規與陀螺儀與相關電路之設計、製作與安裝架設，並進行實車
行車加速度與轉向角速度之量測。 
2. 完成運用數位訊號轉換處理技術，進行感測資料之處理與儲存，並經由所設計之程
式予以解析判讀，以完整呈現車輛行進之動態行為。 
3. 完成將行車所擷取即時資訊之分析，並以此資料發展慣性導航系統技術。 
4. 完成利用卡爾曼濾波器進行全球定位系統及慣性導航系統之整合。 
5. 完成利用類神經網路法則進行系統共變異量之最佳化，以獲得精確之導航資訊。 
6. 本計畫之執行過程結合學術理論與應用實務，藉由計畫之執行，增進學校師生技術
研發之經驗與實務能力，並增加合作企業開發新產品之機會。 
 
技術特點說明： 
1. 本計畫針對車輛行進間之動態行為，運用即時感測技術與數位化資料處理方式，進行行
車資料之完整擷取與資料處理。 
2. 本計畫利用數位訊號處理之技術，藉由車輛所感測之即時訊號，進一步發展慣性導航系
統，並與全球定位系統整合以得到精確的車輛導航資訊與詳實之路徑規劃。 
3. 本計畫依據 GPS 與 INS 個別之優缺點，利用卡爾曼濾波器（Kalman filter）進行二者技
術之整合，並利用類神經網路（Neural Network）法則，透過其學習之過程以求得系統
之最適當共變異量，以發揮最佳之整合效果。 
 
可利用之產業及可開發之產品： 
   汽車導航產品、飛行導航產品等 
 
推廣及運用的價值：如增加產值、增加附加價值或營利、增加投資/設廠、增
加就業人數………等。 
現今市面上所看到的導航產品相當多，但大多以 GPS 導航定位為主，仍未出現以整合
完成之 GPS/INS 導航系統產品。以現今台灣法律規定大客車必須加裝行車紀錄器，但
對於自小客車並沒有強制規定，但導航系統的應用反而以自小客車的使用為最大族群。
在法律上不論國內外對於行車紀錄器的強制加裝車輛已有提出需修改之呼籲，主因在於
行車紀錄器有利於交通事故的分析與判斷，因此結合行車紀錄器與 GPS/INS 整合之導
航系統產品，在未來有其一定的市場需求。 
 
 
 
示： 
系統狀態方程式為： 
)()()()1( kkkk wxAx +=+                  ( 1 )                                                
其中 為系統在 k+1 時刻下的狀態向量， 為
系統狀態轉移矩陣， 為狀態雜訊，系統狀態方程
式描述了狀態隨時間的演進變化。 
)1( +kx )(kA
)(kw
量測方程式如下表示：  
)()()()( kkkk xHZ υ+=                   ( 2 )                                     
)(kZ 為系統在 k 時刻下的量測向量， 為量測輸出
矩陣，
)(kH
)(kυ 為量測雜訊，量測方程式描述了量測量與
狀態之間的關係。 
    卡爾曼濾波器主要是在 k時刻分別預測 k+1時刻
下的系統狀態向量 x 與誤差協方差矩陣 P，方程式如
(3)、(4)所示， 為系統共變異量矩陣。 )(kQ
( ) )()(1 kkk xAx =− +                               (3)                   
( ) )()()()(1 k
T
kkkk QAPAp +=− +                        (4) 
而在 k 時刻下，預測值加入量測值進行修正及更新誤
差協方差矩陣 P 之方程式如(5)、(6)所示。其中，
為卡爾曼增益(Kalman Gain)，方程式如(7)所示：  
)(kK
][ )()()()()()( −− −+= kkkkkk xHZKxx                   (5)                             
               
                   
( )
−−= kkkk PHKIP ][ )()()(                         (6)      
( ) ( )
1
)()()()()( ][ −−− += kTkkkTkkk RHPHHPK                (7)      
其中 為量測雜訊共變異量矩陣， 為依據 k 時
間之前的量測量對 k+1 時刻系統之狀態估算， 代
表在 k 時刻對 k+1 時刻之誤差協方差矩陣估算。卡爾
曼濾波器之運算流程圖如圖 2.1 所示。 
)(kR ( )− +1kx
( )
−
+1kP
)()()01()01(        kk RQPx
系統初始條件
計算卡爾曼增益
利用量測量        更新估測值)(kZ
更新誤差協方差矩陣
誤差協方差矩陣預測
狀態預測
.....},{ )2()1()( ZZZ k =
....},{ )2()1()( xxx k =
方程式 (7)
方程式 (5)
方程式 (6)
方程式 (3)、(4)
)(kK
)(kP
)(kx( )− +1kx
( )
−
+1kp
 
圖 2.1 卡爾曼濾波器之運算流程圖 
    利用卡爾曼濾波器進行導航系統整合，必須建構完
整的系統狀態方程式與量測方程式，本次研究所建構之
系統狀態方程式為 8 式至 17 式，量測方程式為 18 式至
22 式所示。 
( ) ( )αααα sincos)()()1( ⋅⋅Δ−⋅⋅Δ+=+ ykxkk vtvtxx       (8) 
( ) ( ) ( ) ( )αααα cossin)(1 ⋅⋅Δ−⋅⋅Δ+=+ ykxkk vtvtyy       (9) 
( ) ( )( kkkx vv )θcos)(1 ⋅=+                         (10) 
( ) ( ) ( )( )kkky vv θsin1 ⋅=+                          (11) 
( ) ( ) tavv kkk Δ⋅+=+ )1(                          (12) 
( ) ( ) ( )kkk waa 11 +=+                         (13) 
                        (14) ( ) ( ) ( ) tkkkθ = θ +ω ⋅ Δ+1
( ) ( ) ( )kkk w21 +=+ ωω                           (15) 
( ) ( ) ( )kkk wbncn 3111 ⋅+⋅=+                       (16) 
( ) ( ) ( )kkk wbngcng 4221 ⋅+⋅=+                     (17) 
)1( +kxα 、 分別代表導航座標上向東與向北的方向位
置，
)1( +kyα
α 角為導航座標與載體座標的方位角誤差，α 角
可以利用 GPS 的動態訊號求出二座標系統的誤差角
度。 、 與 分別代表載體向東、向北與載體
本身的速度。 為載體的加速度，
)(kxv )(kyv )(kv
)(ka )(kθ 為載體轉向角
度， )(kω 為載體角速度。另外 與 為加速度規與
陀螺儀之隨機雜訊，而 、 、 、 為狀態
單位白色雜訊。 、 、 、 為常數， 為取樣時
間。 
)(kn )(kng
)(1 kw )(2 kw )(3 kw )(4 kw
1c 2c 1b 2b tΔ
( ) ( ) ( ) ( )kkkk 1naa υ++=                         (18) 
( ) ( ) ( ) ( )kkkk ng 2υωω ++=                         (19) 
( ) ( ) ( )kkk vv 3υ+=                          (20) 
( ) ( ) ( )kkk xx 4υαα +=                         (21) 
( ) ( ) ( )kkk yy 5υαα +=                         (22) 
量测輸入訊號分別有：載體前進方向之加速度規量
測訊號 ，陀螺儀對 Z 軸旋轉之量测訊號 )a )(k (kω ， 、
分別為 GPS 導航系統所得之向東與向北之座標位
置，及 GPS 所感測出載體之相對速度 ，而
( )kxα
( )kyα
( )kv )(1 kυ 、
)(2 kυ 、 )(3 kυ 、 )(4 kυ 為量測單位白色雜訊。 
    除需建立完整之狀態方程式與量測方程式外，還
需定義出卡爾曼濾波器的系統參數（如表 2.1），其中
Q 與 R 值的選取對濾波後的精確度有直接的影響。Q
值選取過大，表示系統動態受到很大雜訊影響，對量
測值更加依賴。R 值選取過大，表示較不信任量測
值，卡爾曼增益會變小，如此量測值修正狀態的能力
就不顯著。 
表 2.1 卡爾曼濾波器的系統參數 
( )
( )
)0.1009  0.1346  0.0892  0.1021  052.0(
)1e  1e  0.1  0.1            (
)1e  1e  0.1  0.1      089394.0  089394.0  089394.0  089394.0(
)1e  1e  0.1  0.1  0.089394  089394.0  089394.0  089394.0  089394.0  089394.0(
]00[
)10(
1
)(
8-8-
)(3
8-8-
)(2
8-8-
)(1
10101
01
21
diagR
almalmalmalmalmalmdiagQ
almalmdiagQ
diagQ
x
IP
cc
k
k
k
k
=
=
=
=
⋅⋅⋅⋅⋅⋅⋅=
=
==
×
 
表 2.1 中，c1、c2為常數， ( )01x 為初始狀態估測值， ( )01P
為初始誤差協方差矩陣，Q1(k)、Q2(k)、Q3(k)則分別為採
用固定值之系統共變異量矩陣（Q1(k)），GPS訊號正常
下，藉由類神經網路所估測出之系統共變異量矩陣
（Q2(k)）與GPS訊號脫鎖狀態下，藉由類神經網路估
測出之系統共變異量矩陣（Q3(k)）。 
    由於 為量測雜訊共變異量矩陣，組成如方程
式 23 式所示，故可事先觀察與統計感測器靜止狀態
下之輸出值並加以計算即可求出。 
)(kR
( ) ( )ααω yxvak rrrrrdiagR =                    (23) 
    為系統共變異量矩陣，組成如方程式 24 式)(kQ
4 
統變異量，將此變異量帶入 Kalman Filter 中，經過
濾波後之加速度訊號與近似線性函數誤差達到最
小，則此系統變異量及為最佳之加速度系統變異量，
如圖 2.3 紅色線段所示。 
( )
n
yx
E
n
i
ii
rms
∑
=
−
= 1
2
                  (31)                                  
xi為所量測出之加速度值，yi線性迴歸所建立之線性
函數上的點，n為取樣總點數。 
0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1
-0.25
-0.2
-0.15
-0.1
-0.05
0
0.05
0.1
0.15
0.2
0.25
時間(s)
加
速
度
(m
/s
2 )
加速度規回傳值
Kalman Filter 估測值
線性迴歸分析
 
圖 2.3 載體靜止狀態所得加速度變化量 
    本研究針對同ㄧ加速度作多次實驗的方式，將所
有實驗所得之最佳狀態系統共變異量取其平均值，用
作為類神經網路之訓練樣本，但因受測載體為車輛，
較不易取得穩定之加速度進行分析，因此僅針對加速
度為 0 與 3.36 進行分析，實驗結果如表
2.2 所示。並假設系統共變異量與加速度之關係呈線
性變化，如圖 2.4 所示。 
)/( 2sm )/( 2sm
表 2.2 加速度與最佳系統變異量 
 加速度系統變異量 
實驗次數 加速度 
(m/s2) 1 2 3 4 5 平均值 
0 0.08922 0.08912 0.08854 0.09052 0.08955 0.089394
3.36 0.32645 0.2894 0.2678 0.3901 0.3417 0.32309 
 
0 1 2 3 4 5 6 7
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
加速度
加
速
度
系
統
雜
訊
變
異
量
 
圖 2.4 系統變異量相對於加速度之趨勢圖 
    由表 2.2 所得之數據資料，利用內插法與外插法
將數據增加，以便帶入類經網路中加以訓練，以加速
度為類神經網路的輸入值，加速度系統變異量為目標
值，利用倒傳遞演算法的非線性眏射能力，眏射加速
度與系統變異量之關係，為使類神經網路眏射能力達
到最佳，本研究將類神經網路的各項設定參數如表
2.3 所示。類神經網路訓練結果如圖 2.5 所示，類神
經網經過 500次的訓練其網路輸出與目標值的均方差
（MSE）收斂至 2.20355 ，圖 2.6 為 11 個訓練目
標輸出值與網路輸出值之比對。 
10−e
表 2.3 LM-BPN 網路參數表 
參數 初始設定值 
網路曾數 3 
隱藏層數 1 
輸入層神經元個數 11 
隱藏層神經元個數 6 
輸出神經元個數 1 
轉換函數 正切彎曲轉移函數線性轉移函數 
權重初始值 亂數產生 
μ初始值 0.001 
μ減少係數 0.1 
μ增加係數 10 
μ最大值 1e10 
 
0 50 100 150 200 250 300 350 400 450 500
10-10
10-8
10-6
10-4
10-2
100
500 Epochs
Tr
ai
ni
ng
-B
lu
e
Performance is 2.20355e-010, Goal is 0
 
圖 2.5 類神經網路訓練結果 
 
0 1 2 3 4 5 6 7
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
加速度
系
統
共
變
異
量
目標值
輸出值
 
圖 2.6 目標值與網路輸出值比對圖 
 
2.4 Kalman Filter 結合類神經網路 
    載體運動時，最為理想狀態是濾波後的值能反應載
體的實際加速度、速度、位移而不受雜訊干擾。因此在
各種運動狀態下，其系統共變異矩陣（ ）會有不同
的最適值。為使 Kalman Filter 能發揮最佳的效果，因
此，將訓練完成之類神經網路帶入 Kalman Filter 中，並
訂定出系統共變異矩陣（ ）最佳的更新週期，以期
望能提高 Kalman Filter 導航結果之精確度。 
)(kQ
)(kQ
    卡爾曼濾波器結合類神經網路進行系統共變異量
估測，應用於 GPS/INS 導航系統整合之流程圖，如流
程圖 2.7 所示，再位置資訊上可區分為二種， 當 GPS
訊號正常，GPS 與 INS 會經由卡爾曼濾波器整合而得
到所需之位置資訊，當 GPS 脫鎖時，導航系統會直接
切換為 INS 導航系統以提供所需之位置資訊。 
6 
出發地(A)
目的地(B)
 
圖4.2 實驗路線圖(實驗路線B)[17] 
 
4.1 GPS 與 INS 未整合之定位結果 
    觀察實驗結果，如圖 4.3、4.4 所示，藍色線段代表
GPS 接收模組所得到之導航定位結果，紅色線段代表
INS 無修正時，依相同路徑所求得的導航結果，結果顯
示 GPS 導航定位誤差不會隨時間的累積而增加，具有
穩定之導航能力。反觀 INS 導航定位之實驗結果，亦可
發現，在短時間內 INS 具相當精確之定位精度，但因誤
差會隨時間的累積而快速增加，故 INS 無法長時間操
作。為了改善 INS 無法長時間操作的問題，因此利用卡
爾曼濾波器將 GPS 與 INS 導航系統加以整合。 
-300 -200 -100 0 100 200 300
-500
-400
-300
-200
-100
0
100
向東位置 (m)
向
北
位
置
(m
)
GPS位置解
INS位置推估
 
圖 4.3 GPS 與 INS 導航推估圖(實驗路線 A) 
-2000 -1500 -1000 -500 0 500
-1600
-1400
-1200
-1000
-800
-600
-400
-200
0
200
向東位置(m)
向
北
位
置
(m
)
GPS位置解
INS位置推估
 
圖 4.4 GPS 與 INS 導航推估圖(實驗路線 B) 
4.2 GPS 與 INS 系統整合之定位結果 
    利用卡爾曼濾波器整合系統之實驗結果，如圖
4.5、4.6 所示，已驗證採用分散式開迴路架構之定位演
算能有效運作，以及採用卡爾曼濾波器之全狀態估測法
進行導航系統整合之可行性，由圖可知紅色線段為 GPS
與 INS 導航系統整合後之結果，可以發現經由 GPS 衛
星訊號修正過之 INS 導航定位結果，可以有效的改善長
時間運作下 INS 因誤差隨時間增加而發散之缺點，。另
ㄧ方面可以發現經由整合過後之導航結果路徑更加平
順，比單用 GPS 所得到的導航結果更貼近真實載體行
駛路徑。 
-200 -150 -100 -50 0 50 100 150 200 250 300
-400
-350
-300
-250
-200
-150
-100
-50
0
50
向東位置(m)
向
北
位
置
(m
)
GPS位置解
KF整合位置推估
 
圖 4.5 KF 整合結果比較圖(實驗路線 A) 
-400 -300 -200 -100 0 100 200 300
-700
-600
-500
-400
-300
-200
-100
0
100
200
向東位置(m)
向
北
位
置
(m
)
GPS位置解
KF整合位置推估
 
圖 4.6 KF 整合結果比較圖(實驗路線 B) 
 
4.3 GPS 訊號脱鎖時之 INS 導航系統定位結果 
    為驗證 GPS 衛星訊號中斷時，導航系統依舊仍然
可以使用，因此以手動方式產生衛星脫鎖現象，經卡爾
曼濾波器整合定位結果，如圖 4.7、4.8 所示，脱鎖時間
分別為 40 秒與 120 秒。 
    衛星脫鎖一瞬間，卡爾曼濾波器將切換至 INS 進行
導航定位，本次 GPS 訊號脱鎖實驗中，卡爾曼濾波器
的系統共變異量分為二種型式，進行導航系統整合的比
較，分別為採用固定值之系統共變異量，所得到之導航
定位結果如圖紅色實線，而另一種方式則是利用類神經
網路所估測出之最適值系統共變異量，進行導航系統整
合，導航定位結果如圖紅色虛線所示。 
    經實驗結果發現在過往所採用的固定值系統共變
8 
