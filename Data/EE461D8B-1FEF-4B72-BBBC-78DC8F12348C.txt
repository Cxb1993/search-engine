摘要 
當機器視覺做為辨識工具時，在比對速度與數值運算的要求下，影像
壓 縮 技 術 成 為 關 鍵 因 素 。 影 像 壓 縮 技 術 可 概 分 為 失 真 壓 縮 (Lossy 
Compression)與無失真壓縮(Lossless Compression)，本研究採用失真壓縮技
術中被廣泛應用的向量量化編碼法(Vector Quantization)為基礎，使用禁忌
搜尋法 (TABU Searching Algorithm)找尋較佳的向量量化編碼簿 (Code 
book)，進而提升影像還原品質；啟發式搜尋法為一種利用系統化的方式，
於解集合中尋求較佳解的搜尋方法，禁忌搜尋法即為其中之一。本研究以
禁忌搜尋法為基本架構，組成簡化式禁忌搜尋架構 STSA 做為搜尋較佳編
碼簿之工具，以尖峰訊號雜訊比(Peak Signal-to-Noise Ratio, PSNR)為影像
還原品質之評估標準，求取編碼簿的最佳組合。 
 
關鍵字：禁忌搜尋法、向量量化編碼法、尖峰訊號雜訊比 
 II
目錄 
1.前言  .................................................................................................... 1 
2.文獻探討  …………………………………………………………………… 2 
3.研究方法  …………………………………………………………………… 4 
4.結果與討論  ………………………………………………………………… 9 
5.結論  ………………………………………………………………………… 10 
6.參考文獻  …………………………………………………………………... 11 
 
 IV
2.文獻探討 
禁忌搜尋法由 Glover 在 1977 年時提出，為啟發式演算法之一的搜尋
法，用於解決組合最佳化問題，至今已被廣泛應用於各界，例如：在 1994
年時，林宏勳將禁忌搜尋法之觀念應用於節線排程問題路線改善方法之研
究，所發展之演算法主要是參考節點排程問題之路線改善方法與區域搜尋
法的概念(local search algorithm)，發展出路線間之交換改善步驟，再藉由
禁忌搜尋策略來撗大搜尋範圍，來尋找更佳的結果。  
因此，禁忌搜尋法可利用本身機制來跳脫區域最佳解，而達到最佳近
似解，在禁忌搜尋過程中，每一個解都會存在相對應的鄰近解，然而將目
前的解轉換為其中一個鄰近解的方式，稱之為移步(Move)。  
簡單禁忌搜尋法的主要精神為利用禁忌名單(Tabu List)來記錄前幾次
的移動，避免在尋找最佳解的過程中，會搜尋到前一個解或重複相同的路
徑而形成迴圈。當侯選的移動方向已被記錄在禁忌名單時，這一個鄰近解
則被稱為禁忌搜尋解(Tabu Solutions)。  
然而，雖然侯選的鄰近解已被限制住，但是如果此鄰近解移動的目標
函數比目前所找到的最優解更好的時，仍可選此鄰近解。而禁忌名單是屬
於短期記憶體 (Short-Term Memory)，它記錄的法則是採取先進先出法
(First-in-first-out, FIFO)，就是說下一個新的移動路徑進來時，就把名單中
最舊的移動路徑移去，只存放最近幾次記錄。  
禁忌名單中會檢查此解是否有出現過，如果有的話，就不移動而且重
新尋找新的鄰近解，如果沒有的話，就移動到此解，並除去禁忌名單中的
一個解，以維持禁忌名單中解的個數一定。且禁忌名單的個數通常是固
定，有了禁忌名單，一方面在找尋最佳解的過程中，可以避免回復到上一
次搜尋過的解，而形成迴圈，而另一方面可避免求解時受限於區城最佳解。 
禁忌搜尋法的搜尋終止條件，就是禁忌搜尋法會先找出一個初始解，
而由這一個初始解開始，移動到末被禁忌住的鄰近解中目標函數最佳者，
反覆這些步驟，一直到搜尋過程符合終止條件，而終止條件達到預設之可
接受目標值，便停止搜尋。  
VQ 是一種非常基本的失真影像壓縮法。有很多重要的影像壓縮技術
(例如 JPEG) 都應用到 VQ 的基本觀念；因此，改良 VQ 的壓縮結果將會
對其他的相關影像壓縮技術有所幫助，故 VQ 是學術界最廣被用來研究影
像壓縮的重要格式。  
VQ 的基本作法說明如下，首先將壓縮的影像分割成許多大小相同的
小方格。例如一張 512 * 512 點的影像，我們將它分割成 128 * 128 個 4 * 
4 點的小方格。按著查詢事先完成的編碼簿，找出跟每一個影像方格最接
近的編碼字  (the closest codeword) 。然後，再利用這些最接近的編碼字之
索引  (index) 值，組成一張索引表，如此即完成影像的壓縮。這張索引表
即是 VQ 壓縮後的結果，因為索引表的體積通常會比原影像小方格的體積
小很多，故 VQ 能有很好的壓縮效果。  
至於影像還原，由於 VQ 解碼器可以利用壓縮後的索引表找出每個影
像小方格的最相似編碼字，故可還原出原始影像來。雖然還原的原始影像
與真正的原始影像並非完全相同，但必定十分相似。一般而言，VQ 的影
像品質決定於編碼簿內編碼字的數量之多寡及代表性之優劣。總之，一本
 2
3.研究方法 
向量量化包含三個部分：編碼簿製造器(Codebook generator)、編碼器
(Encoder)、解碼器(Decoder)。編碼簿製造器為一製造編碼簿的過程，編碼
器以編碼簿為依據對原始影像進行編碼，製成一張索引表，基本流程如圖
2 所示；解碼器利用索引表透過編碼簿進行解碼，並將圖像加以還原，因
此還原後影像與原始影像會有些微的不同。由此可推知編碼簿之優劣會影
響影像還原的品質；本研究以 PSNR 值做為判斷的基準，並以是否大於等
於 30 為目標值來進行編碼簿最優化。此一章節將會說明如何以標準的禁
忌搜尋演算法來找尋較佳的編碼簿。  
 
圖  2 向量量化程序  
在向量量化過程中，編碼簿決定了影像還原的品質，因此，本研究使
用禁忌搜尋法對自原始影像取得之初始編碼簿進行訓練，以取得最具代表
性的編碼簿。本研究擬以灰階數位影像 Lenna(圖 9)為訓練影像樣本，以
STSA 對訓練樣本進行編碼簿之訓練。   
STSA 實驗步驟如下：  
步驟 1：讀入灰階影像 Lenna 為訓練影像 B，並將影像分割為 n 個訓練向
量 b 並加以編號， 1 2 3{ , , ... , 4096}nB b b b b n= = 。  
步驟 2：定義鄰近區塊(neighbor block)，G(bi)。  
步驟 3：設 PSNR 為目標函數並定義停止準則。設定禁忌名單長度 T，
。 1 2 3{ , , ... , 256}nT t t t t n= =
步驟 4：產生初始編碼簿 。自訓練向量中以隨機方式取得 n 個訓練向量
完 成 初 始 編 碼 簿 ， 其 包 含 n 個 編 碼 字 w ，
。  
0S
1 2 3{ , , ... , 256}nW w w w w n= =
步驟 5：初始編碼簿之編碼字與其鄰近之訓練向量 G(bi)做交換；每交換一
次則視為不同的編碼簿，視為初始解。  
步驟 6：以目標函數值 做為依據，對每一本
編碼簿進行評估，並取出目標函數值較佳者 s*進行移步，mi，並
記錄於禁忌名單中。 
2
1010log (255 / )Vi PSNR MSE= =
 4
一訓練向量為 4*4 大小，如此可得 4096 個訓練向量，並且加以編號。編
碼簿之編碼，本研究所使用之圖像為灰階圖像，以灰階值(gray value)進行
編碼；每單位訓練向量為 4*4 大小，因此編碼字長度為 16，而所使用編碼
簿之長度設為 256， 。  1 2 3{ , , ... | 256}nC c c c c n= =
下一步以隨機方法從 4096 個訓練向量中抽取 256 個訓練向量，做為
編碼字進而組成初始編碼簿，以禁忌搜尋法對初始編碼簿加以訓練，最後
取出其中最具代表性的編碼簿即完成訓練。在禁忌搜尋法中鄰近解為樣本
空間中最可能因移步而成為當前最佳解的一群，且鄰近解的好壞關係著目
標函數值的大小，並決定移步品質優劣。本研究鄰近解之取得如圖 4 所示，
，bi 為編碼字，N1~N8 則為編碼字位於原始影像位置之鄰近訓
練向量；將編碼字與鄰近訓練向量均分為 2 個相等大小的區塊，並同時與
其鄰近訓練向量進行區塊間的雙點交換，此時四個編碼字同時進行此動
作；每次交換所得之編碼簿即將其視為不同的解並進行目標函數值的計
算，此步驟我們稱之為檢測，用以尋找較佳的解。  
1
8
( ) { }i i
i
bG g ==
 
圖  3 鄰近區塊示意圖
本研究之目標函數是為計算自 n 個訓練向量取得之編碼簿及編碼簿訓
練過程中產生之鄰近解 Ni，因此以尖峰訊號雜訊比做為目標函數，PSNR
值愈高則表示影像還原品值愈佳，失真程度則愈低，計算方式如公式 (1)
所示。公式(2)MSE 則為計算原始訓練向量與還原之訓練向量(i, j)之誤差，
ijX 與   ijX 為表示在座標(i, j)的原始影像像素值與還原後影像像素值，W 與
H 則表示影像的寬度與高度。  
 
2
10
25510log ( )PSNR
MSE
=                   (1) 
 
2
1 1
1 ( , )
M N
ij ij
i j
MSE X X
WH = =
= ∑∑ )               (2) 
 
移步在禁忌搜尋法中為一種自現行解(Current solution)移往最適解的
 6
距離，如公式(3)所示，取其最短而取代之，製成一張記錄索引值之索引表，
如圖 6。此時即完成編碼。解碼過程即是以編碼後所產生之索引表以記載
於其上之索引值為依據，將其對應至編碼簿中的編碼字並逐一還原至原始
影像所屬位置，向量量化解碼之過程如圖 7 所示，其還原影像 Lenna 如圖
8[13]。  
 
 
 
 
 
 
 
 
圖  5 編碼程序  
 
 
 
 
 
 
 
 
 
 
圖  6 解碼程序  
 8
表 1 實驗數據比較表 
 
 
Codebook=256 Lenna 
LBG 29.1998 
DCT+LBG 30.8402 
HT+LBG 31.3319 
SGCA 29.2785 
STSA 27.4088 
(目前階段)圖  8 Lenna 
5.結論 
禁忌搜尋法利用其長、短期記憶的特性，避免重覆搜尋，並建立「破
禁準則」，適時的進行「跳脫」的動作，以免落入了區域解的陷阱中。本
研究期望能透過此一方法，找出最佳的編碼簿並提升影像還原品質，以因
應未來網際網路及多媒體技術的快速發展，在影像品質及儲存大小上能取
得平衡。在未來的研究規畫上，本研究將會持續的改良禁忌搜尋法，其改
進的目標如下：  
一 . 改善交換的方法，以產生更具變化的鄰近解。  
二 . 減少禁忌名單的長度，進而增加搜尋的速度，來縮短在同一區域搜尋
的時間，  
三 . 修正破禁準則，逐次增加跳脫的範圍，也就是減少保留下來的編碼字，
以擴大搜尋區域，增加獲得滿意的近似解 PSNR 值之機率。  
本研究實驗流程可證實禁忌搜尋法與傳統 LBG 演算法相比較為一種
較「聰明」的方法，具備啟發式搜尋法「在有系統的方法下尋找近似最佳
解」的特性；使用「移步」方式逐步改善現行解，以短期記憶機制--「禁
忌名單」記錄當前最佳解避免重覆搜尋，「破禁準則」更可擴大搜尋範圍，
增加搜尋的廣度，未來將在不違背禁忌搜尋法基本精神的前提下調整實驗
參數，使目標函數值能夠獲得改善。相信未來如能更進一步改良禁忌搜尋
法，必能將此搜尋法更有效率地應用於影像壓縮技術的研究。  
 10
計畫成果自評 
為了產生較佳的影像傳遞品質，本研究提出一種新的方法來改進Set 
Partitioning in Hierarchical Trees (SPIHT)漸進式影像傳遞，在其中幾個階段的傳輸
中，先不傳送精煉及再精煉位元，而是將這些位元以下一階段切割所得之重要係
數所產生的位元串列去取代。這些精煉位元在繼起階段的傳輸中再做傳送，也就
是原本在下一階段才看得到的影像，有些可以在前一階段就先看到了。 
以機器視覺做為辨識工具時，在比對速度與數值運算的要求下，影像
壓縮技術成為關鍵因素。本研究採用失真壓縮技術中被廣泛應用的向量量
化編碼法(Vector Quantization)為基礎，使用禁忌搜尋法(TABU Searching 
Algorithm)找尋較佳的向量量化編碼簿(Code book)，提升影像還原品質。
本研究以禁忌搜尋法為基本架構，組成簡化式禁忌搜尋架構STSA做為搜尋
較佳編碼簿之工具，以尖峰訊號雜訊比(Peak Signal-to-Noise Ratio, PSNR)
為影像還原品質之評估標準，求取編碼簿的最佳組合。 
本研究分析了物件行為模式，了解物件移動向量變化所形成的型態，除導
入漸進式影像傳遞技術外，並改善漸進式傳遞系統(ICPS)，加快數位影像資料的
傳遞速度，快速傳遞即時且重要之影像。繼而改善影像壓縮技術，強化動態影像
辨識系統(ADIRS)，可運用於分析暨計算員工每日有效工作時數。上述漸進式傳
遞系統(ICPS)與動態影像辨識系統(ADIRS)，均符合原計畫所設定的目標；惟動
態物件行為分析器(DOBA)未能及時完成，無法充分配合現場動態以及解決員工
報工的問題，未達到原計劃預期的目標。 
本研究完成的兩項成果分別在影像傳遞與影像壓縮、辨識方面具有應用性的
價值；漸進式傳遞系統將大幅度減少確認影像的時間而加快數位影像資料的傳遞
速度，影像壓縮則因減少禁忌名單的長度，進而增加搜尋的速度，來縮短在
同一區域搜尋的時間有助於壓縮、辨識。 
 12
