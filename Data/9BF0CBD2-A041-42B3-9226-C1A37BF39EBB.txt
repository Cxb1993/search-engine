 I 
 
目錄 
大綱 ..................................................................................................................................................... II 
1. 緒論 .............................................................................................................................................. 1 
1.1. 前言 ...................................................................................................................................... 1 
1.2. 研究目的 .............................................................................................................................. 2 
1.3. 文獻回顧 .............................................................................................................................. 4 
2. 無線感測網路模組開發 .............................................................................................................. 7 
2.1. 無線感測網路發展現況 ...................................................................................................... 7 
2.2. 軟硬體平台之開發 .............................................................................................................. 7 
2.3. WSN技術 .......................................................................................................................... 10 
3. 使用者測試 ................................................................................................................................ 14 
3.1. 文獻探討 ............................................................................................................................ 14 
3.2. 研究方法 ............................................................................................................................ 15 
3.3. 測試發現 ............................................................................................................................ 16 
3.4. 操作性問題與改善對策 .................................................................................................... 19 
4. 系統整合 .................................................................................................................................... 23 
4.1. 智慧藥盒硬體整合 ............................................................................................................ 23 
4.2. 單一使用者情境實現 ........................................................................................................ 31 
4.3. 無線網路通訊 .................................................................................................................... 38 
4.4. 多人使用者模式 ................................................................................................................ 41 
5. 結論 ............................................................................................................................................ 45 
 
 1 
 
1. 緒論 
1.1. 前言 
本計畫總共細分為三個子計畫，並與『台
北市立聯合醫院』醫療系統進行合作。第一
子計劃主要利用『無線感測器網路技術前瞻
研究』專案計畫已完成的無線傳輸模組，進
行開發無線通訊相關的傳輸、計時及省電技
術。第二子計劃主要針對智慧藥盒合適性的
設計做探討及研究。第三子計劃則負責系統
軟硬體的整合及後端資料庫及人機界面的開
發。 
巨觀而言，第一子計劃負責“無線通訊＂
部份，第二子計劃負責“藥盒硬體＂和“使
用者測試＂，第三子計畫負責“感測模組＂
和“人機介面與網路資料庫＂以及“系統整
合＂，如圖 1.1 的計畫分工示意圖所示。 
微觀而言，第一子計劃以「WSN 無線感
測技術之應用」為主要架構。主要是開發省
電無線模組的技術，包括韌體程式的開發及
電池參數的調整等等。並開發具省電效能的
時鐘計時裝置，以便利智慧藥盒攜帶外出時
依然能夠發揮提醒功能。此外，亦將採用無
線模組和定位感測技術來實現藥盒定位的功
能；第二子計劃以「產品設計」與「互動介
面設計」為主要架構。「產品設計」包括使用
者需求與見解之確認、產品概念構想之設計、
產品精描圖 (rendering)與工程圖之繪製、產
品草模(mockup) 和原型 (prototype) 之製作、
產品硬體使用性 (usability)之測試等。「互動
介面設計」則包括產品使用情境之分析、操
作流程與互動介面之設計、產品軟體使用介
面 (user interface)之測試、最終產品互動介面
之使用模擬等；第三子計劃以「系統整合」
為主要架構。將所有子計畫所開發出來的軟
硬體技術、實體和應用，整合成『智慧藥盒
服藥提醒與管理系統』。另外，子計畫三在硬
體部分，將進行包括感測器技術電路模組開
發、藥盒機構的設計製作、監控模組的開發
等等。軟體部份則包括人機介面的設計、網
路通訊協定制定、各硬體模組韌體的撰寫及
後端伺服器資料庫的開發。如圖 1.2 的計畫
執行流程架構圖所示。 
 
圖1.1 計畫分工示意圖 
 3 
 
用。在實地參訪醫院、藥局以及參考一些醫
療資訊之後，我們發現得到慢性病的老年人
所要服用的藥物有以下幾種特性： 
(1) 種類多：每次服食藥物的種類很多，有固
狀藥丸、液狀藥丸、外用藥物。 
(2) 劑量大：每次服食藥物的數量很大，諸如
一次服用 5、6樣以上的藥物。 
(3) 服藥頻率多樣：每次服用藥物的頻率及次
數複雜且不一，有一日一次 (quaque 
die,QD)、一日兩次(bis in die, BID)、一日
三次(ter in die, TID)、一日四次(quarter in 
die)等等服藥頻率，另外又可分為飯前
(ante cibum, AC)或飯後(post cibum, PC)
食用或是需要時(pro re nata, PRN)使用。 
 
以患有糖尿病、高血壓病患為例，一次
看診後醫生可能會開出如表 1.1 的典型慢
性疾病藥單。由這張典型病例藥單就可以看
出病患每次看診拿藥就是動輒 10 種以上的
藥物。將之整理如表 1.2 ，每次服用數量最
大可能到一餐 7~8 顆，服藥頻率也相當複
雜。 
 
表 1.1 典型慢性疾病藥單 
藥名 劑量 用量 服法 
Coracten(cap) 20mg 1.0 顆 BID PC PO 
Alpraline(tab) 0.5mg 0.50錠 BID PC PO 
Amaryl(tab) 2mg 2.00錠 BID AC PO 
Bentomin(tab) 850mg 1.00錠 BID PC PO 
Concor(tab) 5mg 1.00錠 QD PC PO 
Aprovel(tab) 150mg 1.00錠 QD PC PO 
Sleepman(tab) 10mg 1.00錠 HS PC PO 
Crestor(tab) 10mg 1.00錠 QD PC PO 
Strocaine(tab) 20mg 1.00錠 QD PC PO 
Atanaal(cap) 5mg 1.00顆 PRN PC PO 
註：cap為膠囊，tab為藥錠，HS為睡前，PO為口服 
(本參考資料由計劃合作機構台北市立聯合醫院藥劑
部提供) 
表 1.2 藥單分析 
時間 飯前 飯後 
早餐 1 7 
中餐 0 0 
晚餐 1 3 
睡前 1 
需要時 1 
(本參考資料由計劃合作機構台北市立聯合醫院藥劑
部提供) 
 
一般而言，醫院端在每次診療後所能提
供的服務，就是給藥。但是由於大部分慢性
疾病的老年患者每次看診都會領取一個月的
藥量，這樣大量的藥量若要醫院採用平時感
冒所使用的一餐一包藥(Unit Dose)的方式來
給藥，容易因為人為疏失而造成藥物核對錯
誤的醫療糾紛。因此，醫院因為核對藥物的
人力不足以及為了避免可以預期的醫療糾紛，
對於慢性疾病老年患者在服藥前就必須自行
依照各個藥袋上的說明進行分藥然後再行服
用，而非直接撕開一餐的藥袋來服用，這種
服藥方式大大增加了老人服藥的困難度和用
藥錯誤以及病人傷害的機會。再者，隨著年
齡的增加，老人視力退化的情形成更加嚴重，
藥袋上所標示的服用方式老年人也未必能夠
看清楚且了解，再加上老人記憶力也會衰退，
更容易忘記服藥的事，這些原因都將增加居
家老人服錯藥物、忘記服藥的機會。而慢性
疾病若有停止用藥的情形發生，病情可能會
有不可預期的變化，甚至造成更嚴重的傷害。
因此，有鑑於此，本研究致力於開發一套智
慧藥盒服藥提醒與管理系統，透過無線傳輸
技術、藥物偵測技術以及配合後端資料庫的
設計，提供使用者服藥提醒、分藥提助以及
服藥記錄等功能，以期能讓慢性病患的用藥
過程更為方便和安全。 
 
  
圖1.6 市售傳統藥盒之四
 
1.3.2. 電子藥盒 
市售電子藥盒主要是由傳統藥盒加上電
子計時器所組成。其目的是提供服藥提醒的
功能。圖 1.7 是由 e-pill 所發展的電子藥盒
7 Alarm Vibrating Pillbox & Daily Organizer
此電子盒提供七個藥格，可隨使用者自行分
配藥格使用。此電子藥盒使用
等服藥時間到了，此電子藥盒會發出聲音提
醒使用者。除此之外，亦有防水的功能
 
圖1.7 市售電子藥盒之一
5 
 
 
 
，
Timer計時，
。 
 
 
由TIMEX公司以及
e-pill Weekly Medication Manager
TIMEX發展的計時器，此計時器可以隨意組
裝上此產品的其他藥盒，
隨身攜帶、可服藥提醒、
電子藥盒，如圖 1.8 。此外
能記錄服藥時間，提供給使用者參考
完藥後仍需使用者自行按下停
圖1.8 市售電子藥盒之二
 
由  e-pill 所發展的
Dispenser 除了能提供 28
服藥提醒功能以外，還能夠防止使用者誤服
其他時間的，如圖 1.9 
是：在一般時間下藥格不會打開
時間到的時候，底盤會將該服藥的那格藥格
旋轉到開口並且打開蓋子
後一段時間，如果使用者還是沒有服用藥物
的話，該藥盒會關上蓋子並判斷使用者未服
藥，所以使用者不用怕會
值得一提的是，若服藥時間發現藥盒傾斜超
過預設值，藥盒會自動判斷
並結束此次服藥。 
e-pill公司所出產的
，它使用
然後組合成一個可
可提供四格藥格的
，此電子藥盒亦
。但服
止提醒按鈕。 
 
 
Automatic Pill 
格藥格以及計時與
所示。它所用的方法
，直到服藥
。並且在蓋子打開
重複服藥。另外，
此格已服完藥，
 7 
 
2. 無線感測網路模組開發 
2.1. 無線感測網路發展現況 
在過去幾年來，ZigBee Protocol一直是
最受歡迎的低成本、低耗電、低速率之無線
網路通訊標準，無論是在智慧型家庭的應用、
商業大樓自動化，或是在其他少量資料傳輸
的無線通訊網路中，都能看見它的蹤跡。 
ZigBee主要是由 ZigBee Alliance所制定，
符合 IEEE 802.15.4標準，其目的在於提供一
套通訊協定的標準，讓各種不同軟硬體平台
之感測網路間能夠溝通。如下圖 2.1 所示，
ZigBee在底層部分沿用了 IEEE 802.15.4 的
協定，並在上層部分規範了網路路由、網路
安全、網路架構、應用以及傳輸封包的格式。 
 
 
圖2.1 ZIGBEE規範架構圖 
 
而近年來，在無線感測網路領域中出現
了一個備受矚目的新名詞─6LoWPAN。
6LoWPAN是 IPv6 over Low-power Wireless 
Personal Area Networks的縮寫，這個名稱是
源自於 IETF(Internet Engineering Task Force)
工作團隊。6LoWPAN 同樣也符合 IEEE 
802.15.4標準，更重要的是，它將 IP(Internet 
Protocol)帶進了無線感測網路。且相較於
ZigBee， IP 在 6LoWPAN 上路由時，在
6LoWPAN 層 中 不 需 要 額 外 的 header 
information，減輕了封包的負荷，使得有更
多的空間能夠用來存放資料。 
整體而言，以 IP為基礎的 6LoWPAN 十
分具有吸引力，越來越多的半導體廠商所開
發的 802.15.4 晶片，同時支援 ZigBee 和
6LoWPAN。相信日後在 ZigBee和 6LoWPAN
的發展上，仍有許多值得探討的空間。 
 
2.2. 軟硬體平台之開發 
目前在硬體上，仍選用由台大團隊所自
行開發之無線感測器網路模組，Simple-Node、
Super-Node 及 Universal Gateway 等。其中
Simple-Node 所使用的微處理器，已從過去
的 C8051F411升級至 C8051F930，使得在記
憶體方面有很大的提升；而其他的硬體架構
大致上維持不變。三者的規格如下表 2.1 所
示。 
 
表 2.1 硬體規格表 
種類 
Sensor
能力 
電 力 供
應 
MCU 
Simple 
Node 
低速、解
析 度 較
低 
低 容 量
電池、環
境 能 量
擷取 
8bit、低
速、低耗
電 
Super 
Node 
高速、解
析 度 較
高 
高 容 量
電池 
16bit、中
速、中低
耗電 
Universal 
Gateway 
無、模組
方 式 掛
入 
市 電 供
應、PoE 
8bit、高
速、高耗
電 
 
目前計畫中所使用的無線感測器網路架
構，仍維持三大層次。第一層為大量的
Simple-Node，耗能較低且佈署較廣，用於大
規模之監控；第二層為 Super-Node，除了同
時具備通訊和感測能力外，並負責管理
 9 
 
硬體裝置(Simple-Node)只需做簡單的運算及
感測功能，並將重點著重於低耗電，以便長
時間的資料感測。 
 
 
圖2.5 UNET通訊架構示意圖 
 
 
圖2.6 UNET簡化封包格式圖 
 
UNET 平台的通訊架構如上圖 2.5 所
示，首先會根據不同的硬體裝置，提供網路
系統的建立，或是加入網路拓墣的功能。在
網路系統運行的過程中，系統端會不斷的偵
測資料封包的傳輸，同時檢查網路拓樸中，
各節點之連線狀態，並對斷線之節點進行連
線修復。最後網路核心部分會根據不同裝置
的需求，進行資料感測、通訊傳輸、節點管
理等功能。 
此外，UNET 平台特別訂定了一套專用
的封包格式，如圖  2.6 所示。藉以簡化
ZigBee 繁雜的封包訊息，且仍然保留了其必
要之資訊，以維持網路中節點之通訊。 
 
2.2.3. 無線感測網路節能技術 
在無線感測網路的系統中，通常大多數
的節點採取間歇式運作，每隔一段時間做一
次資料的感測及發送，其餘時間則處於待命
狀態。為了達到省電的機制，UNET 透過時
間同步及同睡同醒的技術，在待命狀態時把
不需使用的模組關閉以節省大量的電量。 
 
 
圖2.7 UNET同步及睡眠機制圖 
 
上圖 2.7 顯示了目前 UNET 中所設計
的同步及睡眠機制，為了降低微處理器運算
上的負擔，目前採用簡化的同步機制作為時
間同步的演算法。 
首先伺服端透過 Gateway設定相關之參
數並傳送給 Coordinator(網路分配者和領導
者，一個網路只有一個)。接著 Coordinator
會用廣播的方式通知網路中的各個節點同步
睡眠的協定。各節點在收到通知後，會將各
自的計時參數與 Coordinator作同步，並在指
定的睡眠時間進入待機狀態。最後在經過一
段設定的睡眠間隔後，Coordinator會對各個
  
圖2.8 AES運作機制圖
 
2.3.2. WSN節點認證技術
對於無線感測網路而言，除了加解密封
包之外，對於節點的認證也是必備的
的認證是指判斷無線感測網路節點是否有權
限加入此網路。對於本計畫藥盒之應用
於關係到使用者的安全，認證的確有存在之
必要性。本計畫對於節點之認證採用一次性
密碼（One Time Password）其需求有二
1. 相同之密碼產生器 
2. 動態產生密碼產生器之參數
 
圖2.9 節點認證機制圖
能夠加入相同網路中節點都應當滿足此
11 
 
 
 
，所謂
，由
： 
 
 
 
兩項需求，所有節點應具備相同的密碼產生
器，在參數輸入之時能夠
以供認證，其運作原理如
假設節點B欲通過認證加入節點
路，節點A首先透過環境或隨機產生一亂數
並將此亂數傳送給節點
會將此亂數輸入至各自的密碼產生器中以產
生各自的一組密碼，接下來
回傳給A節點，A節點收到
跟自己所產生的密碼做比較
通過認證，不符合則否。
在使用 OTP時，由於亂數是隨機產生的
所以不同的亂數將對應到不同的密碼
竊取此密碼的人在下次認證時無法使用
外，密碼產生的方式，並不會經由網路傳送
所以竊取者也無法透過封包擷取之方式破解
認證。 
好的亂數產生器可以確保亂數產生的重
複率降到極低，如此一來便可以減少使用相
同亂數時帶來的安全性問題
產生了相同的亂數，外來入侵者則可利用先
前記錄的亂數及對應的認證資訊進行認證
導致無線感測網路有叫大的機會被侵入
另一方面，良好的密碼產生器可以避免
竊聽者反向的推演出原始密碼產生之演算法
竊聽者無法直接得知密碼產生器之演算法
但設計不良之密碼產生器將會使得反向推演
的難度降低，將使系統暴露在危險性較高之
情況下。 
UNET已實現了 OTP
包含了亂數產生器以及密碼產生器兩者
典型的方式進行認證，為接下來的計畫內容
整合奠定基礎。 
 
2.3.3. WSN訊息與資料庫整合技術
(A) UNET： 
先前文章已介紹。 
 
產生出相同的密碼
圖 2.9 所示。 
A之網
，
B，接著節點 A與 B
B 節點將其密碼
B節點之密碼後，
，若符合則判定
 
，
，使得
。另
，
。若亂數產生器
，
。 
。
，
認證之概念，其中
，以
 
 13 
 
此架構由下而上包含了，藥盒系統、家
用閘道、網頁伺服器以及資料庫伺服器。其
中網頁伺服器與資料庫伺服器屬於院端，其
他則否。院端伺服器可以接受來自世界各地
閘道之服務請求並及時提供服務。即代表一
組院端伺服器可以同時為多個閘道服務。 
藥盒至家用閘道使用之通訊協定遵循
IEEE 802.15.4 ， 此 段 所 使 用 的 即 為
SuperNode，SuperNode 接下來透過 RS-232
將資料傳給具備網際網路功能之電腦，在此
以具備 Ethernet 之 ARM 開發板做為開發環
境。 
由系統架構圖可以看出伺服器的設計包
含了一台Web Server與一台 SQL Server，其
中Web Server安裝了 Apache Web Server 與 
PHP。SQL Server則安裝MySQL Server。而
在此圖的Web Server與SQL Server並不一定
需要被安裝在不同的機器上。 
 
因為本計畫採用的是MySQL Relational 
Database，對於 Relational Database我們必須
對 Database的表格作設計，目前計畫已經針
對使用者資訊、服藥記錄以及服藥提醒之資
料庫做了設計。其表格設計如下：  
 
(A) user_table: 
 id: 使用者代號 b 
bid: 藥盒代號 
 uName: 使用者姓名 
uGender: 使用者性別 
uBirthday: 使用者生日(timestamp) 
uTag: 備註欄 
 
(B) record_table:  
 id: 使用者代號 
 rTime: 時間 
rAction: 使用者動作 (服藥與否) 
rTag: 備註欄 
(C) alarm_table:  
 id: 使用者代號 
 aMon: 星期一是否提醒 
 aTue: 星期二是否提醒 
 aWed: 星期三是否提醒 
 aThu: 星期四是否提醒 
 aFri: 星期五是否提醒 
 aSat: 星期六是否提醒 
 aSun: 星期日是否提醒 
aTime: 使用者生日(timestamp) 
aTag: 備註欄 
 
根據需求，本資料庫規畫了三個表格，
user_table用以儲存所有使用者的資訊，包含
姓名、藥盒、性別以及生日。record_table儲
存了所有服藥記錄，包含了服藥時間以及服
藥動作。alarm_table則儲存了院端系統設定
之提醒時間，除了可以由 aTime設定提醒的
時間之外，另外也可以透過 aMon、aTue 等
變數開關閉週間之提醒之開關設定。 
 
為了使家用閘道能夠簡單存取資料庫內
容，本計畫透過 Apache Web Server以及 PHP
來實現 REST Web服務，Apache Web Server
提供給系統穩定的 Web 服務。由於 Apache
只能提供靜態網頁之服務，PHP則為了產生
動態頁面以回應 REST 之請求。另外，PHP
更扮演了與MySQL Server 溝通的角色。 
以記錄服藥記錄為例，閘道若是想在院
端取得使用者之服藥記錄(例如: 使用者代
號 112 )，則會對 Webserver 送出＂GET 
http://example.org/users/112＂之請求，此請求
將會傳回所有使用者之服藥記錄 112。 
 15 
 
3.2. 研究方法 
3.2.1. 受測對象 
因為智慧藥盒主要是針對需長期服藥
之高齡者而設計，故除了受測者年齡設定為 
65 歲以上外，本研究亦針對受測者健康狀
況及教育程度等條件進行若干條件設定。表 
3.1為受測對象的篩選條件。 
 
表3.1 受測對象篩選條件 
項目 條件 
年齡 65歲以上 
教育程度 識字 
健康狀況 患有慢性疾病 
其他 具使用電子產品 (如手機) 之經驗 
 
3.2.2. 測試流程 
本研究設定每一位受測者的受測時間
約 50 分鐘；為求產品使用性測試順利進行
及資料記錄的完整性，施測時，研究者會伴
隨受測者共同進行。測試內容可區分為 3 
個不同階段 (如圖3.1 所示)，以下分別說明
之： 
 
1) 測試說明：由研究者對受測者說明整個
使用者測試的流程及示範智慧藥盒的操
作方式。 
2) 任務執行：透過情境解說操作圖卡 (如圖
3.2所示) 的輔助，研究者說明包含設定、
分藥、記錄、定位與服藥 (藥盒取藥之模
擬) 等任務給受測者了解。除了要記錄個
別任務的操作時間外，研究者須同時觀
察受測者的操作細節，將受測者的操作
問題加以記錄。 
3) 問卷調查：待受測者完成藥盒的操作之
後，透過半開放式問卷，受測者針對智
慧藥盒的使用性進行評價。 
 
 
圖3.1 實驗流程 
 
 
圖3.2 情境操作圖卡(局部) 
 
3.2.3. 調查工具 
本研究主要是採用調查法來瞭解受測
者對智慧藥盒的使用性評估結果。如前所述，
執行調查方式採用半開放式問卷。整體調查
工具是透過李克特 (Likert) 七點尺度量表
衡量測試項目；基此，研究者得以取得量化
數據來明確瞭解受測者對於智慧藥盒各項
使用性之評價。再者，受測者亦能針對智慧
藥盒提出不同的相關建議；此不僅有助於讓
高齡者充分表示其意見，且更能讓研究者從
中發掘可再改進之處。 
本調查內容共區分為六大部分，說明如
下： 
 
實驗說明 
10 分鐘 
任務執行 
10 分鐘 
觀察記錄 
問卷調查 
20 分鐘 
服藥 設定 分藥 記錄 定位 
 17 
 
表3.2 受測者基本資料(單位: 人) 
項目 結果  
性別 
男性 女性 
3 (33%) 6 (67%) 
年齡 
65~70歲 71~75歲 76~80歲 81~85
歲 
3 (33%) 3(33%) 2(22%) 1人(11%) 
教 育 程
度 
國小 國中 
高中/
職 
專科/大
學 
研究所 
2(22%) 1(11%) 5(56%) 0 1(11%) 
家 庭 總
成員 
1位 2位 3位 4位 
3位
(33%) 
3位
(33%) 2位(22%) 
1位
(11%) 
一 餐 藥
量 
1顆 2顆 3顆 4顆 
1(11%) 2(22%) 3(33%) 3(33%) 
一 日 服
藥 
次數 
1次 2次 3次 4次 
5(56%) 1(11%) 1(11%) 2(22%) 
外 出 藥
品 攜 帶
方法 
塑膠夾鏈袋 醫院藥袋 
塑膠藥
盒 
6(67%) 1(11%) 2(22%) 
 
表3.3 受測者健康狀況 
No. 性別 年齡 服用藥品 
1 男 71 高血壓、鈣片 
2 女 69 高血壓、鈣片 
3 男 77 消化不良、安眠藥 
4 女 65 高血壓 
5 女 75 高血壓、過敏藥品 
6 男 65 骨刺、尿素、保健食品 
7 女 74 高血壓、左心房肥大、脊椎軟骨
突出、保健食品 
8 女 83 糖尿病、心血管疾病 
9 女 76 神經系統、胃潰瘍、十二指腸潰
瘍 
 
表3.4 受測者用藥行為 
項目 結果 
家中服藥地
點 
客廳 廚房 臥房 餐廳 
5 
(45%) 0 (0%) 
2 
(18%) 
4 
(36%) 
主要的分藥
者 
自己 家人幫忙 
7(78%) 2(22%) 
分錯藥品之
經驗 
有 無 
3(33%) 6(67%) 
忘記服藥之
經驗 
有 無 
7(78%) 2(22%) 
找不到藥之
經驗 
有 無 
2(22%) 7(78%) 
遺失藥品之
經驗 
有 無 
2(22%) 7(78%) 
 
3.3.2. 任務操作 
如前所述，受測者於實際操作智慧藥盒
時須針對 5 項智慧藥盒使用功能分別進行
操作模擬，所有受測者皆能完成任務；本研
究將測試結果整理如表 3.5 所示。在操作時
間上，由於設定與分藥 2 項任務中的操作
流程較為複雜，故所有受測者皆花費較多時
間。就不同受測者在執行相同任務時所使用
的時間差異而言，本研究經發現，若受測者
對 3C 產品有較多操作經驗，則其在智慧藥
盒的操作時間也會較短。 
 
表 3.5 任務操作時間(單位：秒) 
No. 項目 Min. Max. Mean S.D. 
1 設定 36 180 109.00 52.16 
2 分藥 256 604 369.78 100.95 
3 記錄 26 150 58.33 36.59 
4 定位 15 92 49.11 28.11 
5 服藥 5 60 21.101 16.48 
 
3.3.3. 問卷調查 
在受測者完成智慧藥盒模擬操作後，本
研究分別針對智慧藥盒整體之產品使用性、
介面設計及功能滿意度三大構面進行調查。
本調查工具整體構面信度值  Cronbach’s 
Alpha 為0.926；其中，產品使用性構面 
Cronbach’s Alpha值為0.955、介面滿意度構
面 Cronbach’s Alpha值為0.668和功能滿意
度構面 Cronbach’s Alpha值為0.877。各項調
查之詳細結果分別說明如下： 
 
3.3.3.1. 產品使用性 
在智慧藥盒使用性方面，各項測試項目
總平均值為 5.77。由此可見，智慧藥盒在整
體使用性表現上獲得受測者正面肯定。若進
一步將得分進行排序，從中可發現「易記憶
性」排序為最高，此顯示受測者認為智慧藥
盒系統提供良好且易記的操作模式。次高者
則是「清楚操作方式」，此說明透過觸控式
 19 
 
(Mean=6.22)，而在「設定」功能中使用者可
以進行個人資料瀏覽與服藥時間之設定。接
下來，「分藥」與「定位」 (Mean=6.11) 同
時併列為排序第三名的功能。最後，用來記
錄使用者是否已服藥的「記錄」功能 
(Mean=6.00) 雖然是被評價最低者，但其滿
意度平均值仍達 6.00。 
從上述發現可得知，各項功能平均值皆
大於 6，顯示受測者對智慧藥盒的功能都有
很高的滿意度。且代表高齡者並不排斥使用
智慧藥盒，甚至認同可應用適當科技來解決
原本用藥行為的問題。基此，本研究認為智
慧藥盒能讓高齡者輕鬆地使用各種功能，並
解決各項用藥行為的困擾。 
 
表3.8 功能滿意度評價 
No. 項目 Min. Max. Mean S.D. 排序 
1 設定 5 7 6.22 0.83 2 
2 分藥 5 7 6.11 1.05 3 
3 紀錄 2 7 6.00 1.58 5 
4 定位 1 7 6.11 1.96 3 
5 服藥 6 7 6.67 0.50 1 
Average mean   6.22   
 
3.4. 操作性問題與改善對策 
本研究將受測者所主動反應的問題、實
驗者所觀察到的操作性問題，以及考量到可
行性後所提出的因應對策彙整於表 3.9 中。
基本上，前述問題可依其來源共可區分成軟
體、硬體及介面 3 個主要類別，以下分別
說明之： 
 
3.4.1. 軟體 
1. 操作流程過於複雜，雖然在設計段就已
儘量精簡智慧藥盒的操作流程，但由於
其包含有多種功能，且受測者皆是初次
進行操作，故難免會有少數受測者提出
此問題。本研究認為，透過更詳細的解
說與充份的練習，當能改善此問題。 
 
2. 等待回饋不佳 受限於介面模擬軟體的
功能，現階段主機的螢幕尚無法呈現動
態影像，因此目前智慧藥盒無法明確告
知使用者需要等待的時間。受測者的建
議可在未來量產時另外撰寫專用的程式
來改善。 
 
3.4.2. 硬體 
3.4.2.1. 主機 
A. 體積過大 
由於目前主機包含有充電座、控制主機
與觸控螢幕等組件，因此體積較大。有
部份對於 3C產品具較多操作經驗的受
測者認為，主機及觸控螢幕可以改用家
用電腦來取代，且將充電座另外獨立於
外，如此不僅可大大縮減智慧藥盒的體
積，且更能夠節省成本；本研究除了現
行的 all-in-one 版本之外將在後續另行
開發將充電座分離，並以家用電腦取代
現行主機的精簡版本。 
 
B. 觸控螢幕容易因為操作而晃動 
為考量到使用者的不同需求，智慧藥盒
的觸控螢幕是以無段式轉軸 (hinge) 來
讓使用者自由調整角度。然而，無段式
轉軸的先天缺陷即是進行觸控時會隨之
產生的晃動問題。由於當下並無適合的
分段式轉軸可供應用，且自行設計新轉
軸不僅曠日廢時且生產成本甚高，故在 
all-in-one 版本的智慧藥盒暫時不進行更
動。另外，由於精簡版本的智慧藥盒是
由家用電腦來進行控制，所以此問題將
不復存在。 
 
C. 緊急按鈕易被誤觸 
緊急按鈕的計必須同時考量到不易被誤
 21 
 
表3.10 受測者建議與因應對策 
類別  組件 內容 來源 
反應
次數 
小
計 因應對策 
軟體 
 
 
N.A. ．操作流程過於複雜 U 1 3 ．充份教育使用者 
．等待回饋不佳 U, T 2 ．未來進行量產時可撰寫專用軟體來動
態呈現 
硬體 
 
主機 ．體積過大 U 2 5 ．另行設計一套以家用電腦作為主機的
版本，且為小藥盒獨立設置一充電座 
．觸控螢幕容易因為操作而晃動 U, T 2 ．暫不適合修改或以家用電腦作為主機 
．緊急按鈕易被誤觸 U 1 ．修改緊急按鈕圖示；更換按鈕零件 
 
小藥盒 ．體積過大 U 2 12 ．暫不適合修改 
．放置藥品空間不足 U 1 ．暫不適合修改 
．重量過重 U 3 ．暫不適合修改 
．不易開闔 U, T 5 ．修改色彩及外型來指引使用者 
．燈號不夠大 U 1 ．採用高亮度 LED 
介面 
 
 
主機 ．圖像太小 U 1 6 ．將圖像適度加大 
．字體太小 U 1 ．將字體適度加大 
．圖像意象不明確 U 2 ．在圖像旁以文字輔助說明 
．介面的色彩太暗 U 2 ．修改為較明亮的配色 
 
小藥盒 ．小藥盒上的「早上」圖示 (公
雞)，意象不夠明確 
U 2 4 ．充份教育使用者 
．服藥提醒的聲音太尖銳 U 2 ．將現有的單頻音效調整為複頻 
註：來源欄位中，“U” 表示受測者所反應的問題，“T” 表示實驗者所觀察到的問題。 
 
 23 
 
4. 系統整合 
本章節主要介紹目前已完成的四套智慧
盒系統。其中包含硬體整合、人機介面
(Human-Machine Interaction，HMI))及透過軟
體、硬體整合出的許多情境功能。 
 
4.1. 智慧藥盒硬體整合 
4.1.1. 智慧藥盒造型設計 
進行高齡者智慧藥盒之產品外觀造型設
計時，除經濟性與生產性外，本計畫亦同時
考量使用者個人及共用者的個別需求；因而，
智慧藥盒產品具備彈性化特性就變成致為關
鍵。就實務設計而言，Hotta [1] 指出 5 個彈
性化設計原則，分別為：1) 機能的彈性化、
2) 構造的彈性化、3) 供給的彈性化、4) 參
與的彈性化及 5) 選擇的彈性化。針對高齡
者產品設計，Koncelik [2] 更進一步提出 8 
項適用於高齡者產品發展的原則，其包括： 
 
1) 安全性：設計者應致力提供高齡者一無傷
害的使用與生活空間。 
2) 親和性：應讓高齡者有獨立自主的生活，
以增加其生活滿意程度。 
3) 獨立性：產品與空間的結合應考慮高齡者
行動的獨立性。 
4) 連續性：可維持高齡者日常行動自我照料
的機能。 
5) 適應性：產品應有可調整的彈性，以適應
不同的空間配置。 
6) 人性化：最常用的操作功能鍵宜設置在固
定且重要的位置，以適合高齡者的使用操
作。 
7) 支持性：產品應有足夠之寬廣使用空間，
使高齡者無所懼怕。 
8) 聲光控制：除應提供適當的聲光來進行知
覺提醒外，更應具備調節的功能，以避免
過度的刺激。 
 
完成以上外型設計後，必須搭配內部的
藥物偵測機制、電路模組及機構設計，以下
簡述之。 
 
4.1.2. 藥物偵測技術 
目前市面上的傳統藥盒，並沒有偵測藥
物是否存在的功能，這樣很多病患服藥的資
訊就無從得知。舉例來說，藥物偵測技術可
以知道藥盒內是否有藥，如此系統便可以得
知使用者在什麼時間服藥，並將這些資訊存
起來，而這些資訊其實對於往後醫院的看診
有相當大的助益。倘若病患尚未服用藥物，
智慧藥盒也能夠偵測出尚未服用藥物，並且
給予正確的服藥提醒。有些使用者，尤其是
老年病患，他們經常忘記服藥時間，而就算
有服藥，他們也不確定那一格藥是否已服完。
若是有一個偵測藥物是否存在的機制，這些
問題都將可以協助使用者更簡單、更安全的
服藥。 
由於傳統藥盒或是比較新的電子藥盒大
都是手持式、可攜帶式的藥盒，所以藥盒的
體積已經受到相當大的限制，因此在選擇使
用感測器方面就必須優先考量感測器的體
積。 
 
4.1.3. 磁力感測技術 
這裡介紹利用磁感測晶片所製作的藥
物偵測機制。此技術包括兩部份，一是磁鐵
與磁感測晶片，當磁鐵位置改變時，磁感測
晶片可用來感測磁通量之變化量。二是利用
機械結構設計可移動式檔板，每當有藥物進
入盒子中，藥物體積之大小會決定檔板的位
移量大小，也就能藉由此位移量判斷是否有
藥物存在。 
 25 
 
 
圖 4.4 檔板實體圖 
 
0
1
2
3
4
5
0 5 10 15 20 25
M
ag
ne
tic
 
Fi
el
d 
(G
au
ss
)
DMP (mm)
CC-NP CC-P CO
D
MP
 
圖 4.5 磁場變化曲線 
 
由圖中之曲線可以明顯看出磁場變化
的趨勢，隨著檔板位移距離的增加，磁通量
的變化逐漸由高磁通量轉為低磁通量。又由
於磁通量變化相當規律，在智慧藥盒系統之
藥物偵測技術的實際應用上，可以將檔板位
移超過 20mm 以上之磁通量判斷為藥盒已
被開啟之狀態，在檔板位移 5mm~20mm之
間的磁通量就判斷為有藥物存在，而檔板位
移小於 5mm 以下之磁通量則判定為無藥物
存在。因此，應用此小型機械結構配合磁感
測晶片之藥物感測器，本研究已成功製作出
不僅僅只有「有藥物存在」、「無藥物存在」
兩種狀態的藥物偵測技術，而是可以製作出
「有藥物存在」、「無藥物存在」、「盒蓋
開啟」三種狀態的藥物偵測技術。 
上述已開發出一準確度高且不會佔用
太多空間的感測機制，但磁感測晶片的成本
及內部電路的複雜度仍是我們注意的重點，
以下介紹另一能解決此 2 問題的感測機
制。 
 
4.1.4. 接觸式感測技術 
這裡介紹接觸式感測技術的部份。此感
測器部份，我們以物體必然具有的體積特性
作為感測依據。此偵測物體感測機制透過三
點或三點以上的接觸點所偵測出的高低電
位訊號，配合機構設計上的傾斜坡面和可提
供壓縮彈力的檔板設計，便能滿足物體於容
器中所有可能存放的位置情況，因而能夠準
確偵測物體是否存在。同時此新設計可以大
幅改善其他感測技術的缺點，並且可滿足於
對體積大小有要求、對設備金額花費上有要
求、對耗電量有要求、對偵測物體精確度和
可靠度有高度要求的應用上。 
雖然此感測方式只能偵測到「有藥物存
在」及「無藥物存在」二種狀態，但目前的
情境中並不需要偵測盒蓋是否開啟，所以考
量到成本及電路複雜度的關係，本計劃目前
採用此方式進行。 
 
 
Sponge 
Upper lid 
Lower board 
Metal Probe 
Touch board 
Foil 
 
圖 4.6 接觸式感測組合圖 
 
N 
S 
S 
N 
 27 
 
 
圖 4.8 智慧藥盒實體圖 
 
藥盒上蓋組合圖，其零件包含： 
(A)檔板 (B)導電片 (C)海棉 (D)上蓋外殼 
服藥提醒圖： 
該服藥藥格的 LED 燈會亮、蜂鳴器會響 
藥盒搜尋圖： 
該藥盒全部的 LED 燈會亮、蜂鳴器會響 
智慧藥盒內部感測機制圖： 
(A)底部為導電銅針 (B)藥盒上蓋為可壓縮的導電片 
藥盒背面圖： 
(A)程式燒錄孔 (B)充電彈片 
(A) 
(B) 
(A) 
(B) 
(A) (B) (C) (D) 
 29 
 
主控平台 
(Master 
Panel) 
具適應性的觸
控式螢幕 
．上掀式的主機螢幕及無段式
調整設計，方便使用者於適
當的角度觀看螢幕。 
．螢幕頂部下方缺口，設有可
供手指放入的空間，並同時
考慮到左右手慣用者的不同
需求，於兩側都有設置。 
 
避免隨身藥盒
被誤置的使用
者獨立性 
．充電座具方向性，可避免隨
身藥盒從錯誤的方向插入。 
 
考量人性化控
制的緊急呼叫
按鈕 
．設計於正面的明顯位置，此
有利於使用者在緊急狀態下
可輕易觸及。 
．以通用的警示顏色(紅色)來
提示使用者此按鈕的功能。 
．按鈕位置略低於主機的平
面，以避免誤觸。 
 
考量人性化控
制的電源開關
按鈕 
．由於控制主機平常不需要關
機，故將電源按鈕設置在主
體側邊，且需以技巧性的方
法施力才能加以操作。 
．關機的部份需要長按 3~5秒
才能進行關機，減低誤觸的
可能性。 
 
考量藥盒溫度
控制的充電散
熱模組 
．充電模組背後孔洞為散熱裝
置，配合藥盒主機內部的數
個風扇，使得充電過程中，
藥盒及主機皆能保持常溫，
不會因為溫度變化而損害藥
物。 
 
 
 31 
 
4.2. 單一使用者情境實現 
智慧藥盒介面的設計目標在提供使用
者一種便利性用藥的服務與產品，不僅單向
提供服務，也讓使用者實際參與此過程，此
舉不但能使服務過程更有效率、服務結果更
有效，也讓參與使用者產生情緒或精神上的
愉悅感。本研究在去年度已事先針對相關使
用者(包含高齡者、專業照護機構以及醫院的
藥師)進行需求訪談與行為觀察等訪查，且依
據前述調查的分析結果來進行設計。 
目前本計畫已在人機介面上成功實現單
一使用者情境所需的各項功能，其中包含「設
定」、「分藥協助」、「服藥記錄」、「藥盒搜尋」
以及「服藥提醒」。此外也完成病患資料庫的
建構，並且將 LabVIEW [3]人機介面及
MySQL [4] 作整合，實現上述分藥協助、服
藥記錄等功能。以下簡述各個整合部份。 
 
4.2.1. 使用者操作硬體 
在硬體方面，將採用液晶觸控螢幕，並且
搭載具有Windows作業系統的準系統，作為
發展的基礎平台。另外準系統也會內建網路
卡，之後將能與醫院伺服器做連線。 
鑑於以上之需求我們採用工人舍
(KOHJINSHA)此牌子的小筆電。型號為
SA5SX12ATW。此台小筆電之特點為產品特
色為 7 吋 LED背光模組(1024x600)、觸控式
手寫螢幕、可旋轉 180°、重量為 990g、無線
LAN B/G、支援無散熱風扇系統設計、超低
功耗 0.9W。系統為 Microsoft Windows XP 
Home。外觀為圖 4.10。 
 
圖 4.10 小筆電外觀圖 
4.2.2. 介面設計 
原則上，使用者是以螢幕為使用介面與
智慧藥盒進行設定並訊息傳遞。若螢幕使用
介面的內容或資訊過於繁複或操作過程過於
冗長，不但會造成使用者 (特別是針對高齡
者) 的挫折與不安，也將讓使用者產生不好
的使用經驗。有鑑於此，在匯整 Thovtrup and 
Nielsen [5] 與 Shneiderman and Plaisant [6] 
之使用者介面注意事要點後，本研究將介面
設計準則整理如下： 
 
1) 致力於一致性 (to strive for consistency)：
在相似的背景條件下，操作順序為；選
單、提示和指引畫面中都應呈現一致性
的術語用詞，且具同性質、特徵之介面
宜設置於相同區域內。 
2) 讓頻繁使用者能操作捷徑  (to enable 
frequent users to use shortcuts)：當使用次
數增加，具有經驗的使用者普遍會希望
能減少原本的互動步驟。Nielsen 指出，
具捷徑功能的按鍵對多數使用者而言，
其功效將勝於標準化的活動與文件。 
3) 提供有益的回饋  (to offer informative 
feedback)：系統對使用者的操作都應給予
適當回饋；其中，對於次數較頻繁的動
作給予適度的回應即可，但對於重要卻
不常使用的動作，則應給予更多的回饋
訊息。 
4) 設計系統結束時的對話(to design dialog 
to yield closure)：系統應包含開始、中間
及結束的順序性。在完成特定操作活動
後，系統應給予使用者正面的回饋，讓
使用者產生滿足以及成就感，並且使其
願意持續往後的使用。 
5) 避免錯誤 (to offer simple error handing)：
系統的設計應讓使用者不會犯下嚴重的
 33 
 
 
圖 4.11 首頁程式架構圖 
(A) 服藥提醒 
此功能為所有程式中最重要的功能。
不論使用者目前正在操作哪一個子程式，
當服藥提醒時間到了便會跳到服藥提醒
頁面，強制讓使用者知道該吃藥了。這也
是唯一一個使用者不是主動方的功能。下
圖為服藥提醒架程式架構圖。
 
圖 4.12 首頁與服藥提醒程式架構圖 
(B) 分藥協助 
在整個分藥流程中，使用者透過程式
的引導一步一步完成分藥，並且在每個步
驟中都有返回的按鈕，讓使用者可以簡單
的回到首頁。 
此功能的一開始必須讓使用者確認
藥盒的完善性。此在分藥前會有兩個提醒
步驟頁面，第一個提醒使用者找出所有藥
盒，並將所有藥盒放於桌面上，第二個檢
查所有藥盒上的 LED 燈是否正常，因為
LED 燈為分藥協助的主要指標，如果
LED 不亮會造成分藥上的錯誤，因此才
需要讓使用者進行確認。 
分藥完成後，藥盒特殊的結構設計可
以幫助我們知道是否有該分藥的藥盒沒
分到藥。檢查完成後，藥盒主機便會透過
無線傳輸將服藥所需的資訊傳入小藥盒
內的微處理器進行儲存。此步驟讓小藥盒
擁有可攜帶性。圖 4.13 為分藥協助程式
架構圖。 
(C) 服藥記錄 
透過藥盒內部特殊的結構設計，我們
可以知道現在藥格內是否有藥，此感測機
制幫助我們完成服藥記錄功能。透過藥盒
主機和小藥盒間的無線傳輸，二者資料在
一定時間內會同步一次，使用者就可以在
主機的介面上讀取服藥記錄。圖 4.14 為
服藥記錄程式架構圖。 
 
圖 4.13 分藥協助程式架構圖 
 
圖 4.14 服藥記錄程式架構圖 
服藥記錄 
T 
回首頁? 
首頁 
F 
找出藥盒 
檢查 LED 
分藥 
(將顯示的藥丸
和顆數放入亮
燈的藥格中) 
蓋上藥格 
檢查是否 
有放藥 
分藥結束 
T 
T 
T 
T 
T 
補分藥 
F 
F 
F 
F 
首頁 
T 
服藥時間? 
服藥時間 
F 
首頁 
分
藥
協
助 
次頁 
服
藥
記
錄 
資
料
設
定 
藥
盒
搜
尋 
服
藥
提
醒 
 35 
 
表 4.2 單一使用者情境功能說明表 
功能 說明 示意圖 
瀏覽
頁 
‧ 使用 LabVIEW 進行程式
與圖形化介面設計，讓使
用者更魴簡單操作各種功
能，任何命令皆可以透過
觸控螢幕由手指單擊圖形
完成。 
 
‧ 首頁為平常藥盒主機待機
時所展示的頁面，提供使
用者「現在時間」、「下次
服藥時間」等訊息。 
 
‧ 次頁提供使用者進入「設
定」、「分藥」、「記錄」、「定
位」等功能的按鈕。 
 
設定 ‧ 進入設定功能有以下二個
選項： 
(A) 個人資訊瀏覽 
(B) 服藥時間設定 
 
‧ 個人資訊瀏覽功能，此功
能顯示使用者基本資料，
由於許多慢性疾病病患都
有賴看護或非工照顧生活
起居，當有緊急事故發生
時，「緊急聯絡人」能幫助
他們快速聯絡病患家屬。 
 
‧ 服藥時間設定功能，讓使
用者依照自己的生活作息
安排服藥時間。此外，因
為慢性疾病病患服藥時間
複雜，目前設有三餐飯
前、飯後及睡前可供調整。 
 
  
分藥
協助 
‧ 此功能協助使用者處理
雜的分藥，以主機頁面
的藥丸圖及顆數(右圖
配合藥盒 LED燈簡化分藥
步驟，使用者只需將螢幕
上顯示的藥丸配合顆數放
入亮 LED 燈的藥格內即
可。 
 
‧ 右圖為實際分藥步驟圖
(1) 提醒使用者分藥前清
洗手部。 
(2) 找出所有藥盒並
所有藥盒上的 LED
是否正常。 
(3) 將頁面上的藥丸依照
其顆數放入亮燈的藥
格內。 
(4) 為了檢查該放藥的藥
格內是否有放藥，
者需先手動關閉所有
藥格。 
(5) 分藥完成。 
 
‧ 藥盒內部已申請專利的特
殊結構設計，能判斷出
內有藥」、「盒內無藥
種狀態。能幫助使用者再
次檢查是否有漏放藥的情
形發生，如右圖 4所示
 
37 
複
上
3)，
： 
檢查
燈
使用
「盒
」二
。 
1 
2 
3 
4 
5 
 39 
 
台之下的星狀網路拓撲，如圖 4.18 所示。 
 
 
圖 4.18 主控平台和七個藥盒的星狀網路拓
撲示意圖 
 
4.3.2. 避免封包碰撞機制 
(A) 時間同步 
一般而言，時間同步必須透過廣播的
機制以及一些演算法 [8] 來實現。但本
系統為了省電的緣故，大部份的時間都在
睡眠模式中，而智慧藥盒在進入睡眠模式
時無法傳送與接收封包，故無法隨時與系
統時間進行同步動作。因此，本系統將選
擇採用簡化的時間同步機制。實際的做法
就是在主機傳給智慧藥盒的封包上放入
時間戳記(Time Stamp)，一旦智慧藥盒收
到封包，就能夠得知主機發出封包時的時
間。但如圖 4.19所示，我們可以很明顯
的看出來在主機真正發出封包的時間會
稍晚於打上時間戳記的時間。這是因為封
包在確實發送出去之前，必須先透過
MSP430F1611 將資料由應用層傳到
UZ2400 所負責的媒介存取控制層(MAC 
layer)與物理層(PHY layer)。但幸好這段
時間僅僅是幾個微秒到幾百個微秒的時
間，因此雖然直接打上時間戳記的方式無
法準確進行時間同步，但此時間同步之簡
化機制已能夠使得每一個智慧藥盒的系
統時間非常接近，有助於後述的「結合時
間分割與 CSMA/CA機制」的實現。 
 
圖 4.19 時間同步示意圖 
(B) 時間分割 
透過簡化的時間同步機制，我們可以
進一步完成時間分割的動作。如圖 4.20
所示，時間分割的概念是將一個時間區間
切割成許多不同的時間槽(Time slot) [9] ，
允許每個智慧藥盒在某一特定的時間槽
內傳送封包，而主機也在特定的幾個時間
槽內將封包回傳給智慧藥盒。採用時間分
割機制將能夠避開在間隔很短的時間內
由不同的智慧藥盒送出多個封包的情形，
所以就能夠降低封包碰撞的機率以及緩
和頻寬競爭的問題。因此，在本研究中我
們提出結合時間分割加上 CSMA/CA 機
制的概念，期望能有效增加封包傳送成功
的機率，並且提升系統運作的效率。 
 
圖 4.20 時間分割示意圖 
接著說明時間同步和時間分割加入傳
輸機制後的測試結果。實驗設計上測試三種
狀況的封包碰撞機率。(1) CFG-1：不使用
CSMA/CA避免封包碰撞機制。(2) CFG-2：
CSMA/CA 避免封包碰撞機制。(3)CFG-3：
時間同步、時間分割加上 CSMA/CA機制。
下圖 4.21 為封包碰撞測試示意圖。每次測
試皆於 1平方公尺內放置藥盒和 1個Master 
Panel，讓藥盒各自與的Master Panel互相傳
輸資料。 
Tuesday 
Monday 
Wednesday 
Thursday 
Friday 
Saturday Sunday 
 41 
 
4.4. 多人使用者模式 
如上一章節所述，為了將智慧藥盒進一
步擴展到醫療中心及智慧型住宅社區，我們
整合了 Unet 及原智慧藥盒系統。在此系統
架構下，每一個使用者有一個主控平台
(Master Panel)，主控平台裡可以處理該使用
者所有的無線傳輸資訊及 MySQL 資料庫，
並且讓該使用者操作所有智慧藥盒的功能。
最後透過 Gateway傳回 Internet。這種系統架
構如下圖 4.26 所示。適合家庭內部使用。 
 
 
圖 4.26 家庭多人使用的系統架構示意圖 
 
4.4.1. 醫療中心多人使用系統架構 
當智慧藥盒系統在醫療中心時，為了方
便護理人員管理病患的服藥情況，主控平台
必須集中於護理站或是管理辦公室，因此上
述家庭多人使用系統可能較不適用。 
 
4.4.2. 獨立充電模組 
為了將主控平台移至護理站或管理辦
公室，必須將原系統上的主控平台移除，故
本團隊重新開發獨立充電模組，如圖 4.27
所示。在獨立充電模組內有獨立充電座可提
供七個智慧小藥盒充電，此外，模組內還設
有路由器(Router)，讓充電模組可以和主控平
台連線進行資料的傳輸。 
 
 
圖 4.27 獨立充電模組草圖 
 
4.4.3. Unet 整合獨立充電模組 
將原智慧藥盒系統換成獨立充電模組，
並將主控平台移置系統頂層以利管理後，系
統架構圖可更改如圖 4.28 所示。 
 
 
圖 4.28 醫療中心多人使用 
系統架構示意圖 
此系統架構中，單一使用者有一個獨立
充電模組，其中包含對小藥盒充電、放置藥
盒及 Router 的功能。充電模組內部 Router
透過Unet網路將藥盒資料傳回Server電腦，
再由電腦進行處理。Server 電腦的部份包含
所有智慧藥盒功能及整合資料庫。最終由
Gateway 統一將資料傳回資料庫。此系統架
構較適合安養中心或醫療單位使用。 
本團隊將於下年度以此系統架構進行
第二階段的長時間使用者測試。 
 43 
 
Assessing the Usability of a User Interface 
Standard, in Conference on Human Factors 
in Computing Systems, Dec. 01, 1991, 
New Orleans, Louisiana, USA. 
[6] Shneiderman, B. and Plaisant, C., 2005, 
Designing the User Interface, in 
Information Visualization, pp. 580–603 
Pearson: MA. 
[7] Balakrishnan H, "A comparison of 
mechanisms for improving TCP 
performance over wireless links", 
IEEE-ACM Transactions on networking, 
vol.5, pp.756-769, 1997 
[8] W.L Su, IF. Akyildiz, “Time-Diffusion 
Synchronization Protocol for Wireless 
Sensor Networks,” IEEE/ACM 
Transactions on Networking, vol. 13, 
pp.384-397, April (2005). 
[9] T. Herman, S. Tixeuil, “A Distributed 
TDMA Slot Assignment Algorithm for 
Wireless Sensor Networks,” Algorithmic 
Aspects of Wireless Sensor Networks, pp. 
45-58, July (2004). 
 
圖 4.30 多人使用者模式的藥盒主機接收小藥盒資訊程式架構圖 
 
表 4.4 Server 電腦傳給 Coordinator 的封包格式 
Header 
0XCC 
Packet 
Length 
Reserved 
0X40 
R* MAC 
Addr 
R* Nwk 
Addr 
Pill Box 
ID 
Sequence 
Number 
Command Data 
Length 
Data 
1 Byte 1 Byte 1 Byte 8 Byte 2 Byte 2 Byte 1 Byte 10 Byte 1 Byte Depand 
on user 
接收指令 
接收完成? 
主機藥盒
連線狀況 
T 
F 
PB_ID 
Seq_num 
command 
READY CELLSTATUS SYNTIME CHGSCHDL SCNCELL 
儲存資料
於資料庫 
確認藥盒
時間同步 
確定藥盒
服藥時間 
判斷藥格
是否有藥 
廣播 
Data base Data base 
RESPACK 
MAC 
回傳資料 
 45 
 
5. 結論 
本計畫透過 AES 加密演算法與 OTP 認
證機制為無線感測網路帶來安全性以及隱密
性，而我們透過院端資料庫的建立為智慧藥
盒帶來永久性以及實用性。所有資訊將可以
統一被管理、處理，甚至可以做更為深入的
研究。透過上述之技術，本計畫期望可以實
現家用閘道與院端資料庫系統，讓智慧藥盒
能夠更普遍的被使用。 
儘管在使用者測試中，受測者有針對智
慧藥盒的部份細節提出問題與修改建議；但
整體而言，受測者對智慧藥盒的使用性是感
到滿意。針對受測者的建議，本研究已分別
探究其原因，在考量其可行性後於後續階段
進行改善。再者，本研究也發現，在不同的
受測者間由於各有其特殊的考量，因此會提
出一些互相牴觸的建議，例如：有的受測者
會希望加大小藥盒的藥物容量，但又有其它
的受測者希望能縮小體積；有的受測者會希
望以電腦來取代智慧藥盒主機，也有部份的
使用者會希望只要一台  all-in-one 的智慧
藥盒就能滿足其智慧用藥的需求。由此可見，
要期望以單一的機種來滿足所有的使用者
是不易達成的；設計者可視成本與市場的考
量來適度開發具共用性的相對應機種，藉此
應能夠較廣泛地涵蓋到市場上大多數的需
求。 
最後，本研究認為因為智慧藥盒基本上
是一項功能複雜的產品，而本次測試的受測
者不但都是第一次使用，且需要在短時間內
在陌生的電子設備上執行多項操作任務並
提出建議。然而，當受測者有機會能長期使
用並熟悉產品的操作之後，再行對智慧藥盒
進行的評價是否仍與本次測試結果一致？
目前仍不得而知。再者，雖然經過本次測試
已初步驗證智慧藥盒能夠符合高齡者的個
人用藥需求，但究竟在相關的醫療機構 (例
如：醫院或是安養中心)中有何需求也仍屬
未知；故在後續階段中，應該要更進一步在
醫療機構中執行較長期的使用者測試，且透
過更大量的數據來驗證智慧藥盒的使用
性。 
目前本計畫已完成四套智慧藥盒系統
提供測試。本團隊也已於今年 2月份完成第
一部份的使用者測試，雖然在本測試中，受
測長者有針對系統部份細節提出問題與修改
建議；但整體而言，長者對智慧藥盒的使用
性感到滿意。接著針對長者們的建議，本團
隊已分別探究其原因並考量改善，目前執行
的改善重點可分為以下幾個部份： 
1. 目前主控平台包含許多模組，因此體積
較大且成本較高。本團隊根據使用者所
反映的結果，除了現行的 all-in-one模式
外，另外開發一將充電模組獨立出來的
精簡模式。如圖 5.1 及 5.2所示。 
 
 
圖 5.1 All-in-one 智慧藥盒系統 
 
2. 由於考慮到避免因誤觸而讓藥物意外掉
出的安全性，使用者必須從特定的方向
施力才能夠開啟小藥盒的卡榫。目前，
小藥盒的外形或色彩設計上不但沒有明
確的使用引導性，且不易施力，故對藥
盒外型作些許修正。如圖 5.3 及 5.4 所
示。 
國科會補助計畫衍生研發成果推廣資料表
日期:2010/05/10
國科會補助計畫
計畫名稱: 無線感測智慧服藥提醒與管理系統(2/3)
計畫主持人: 楊燿州
計畫編號: 98-2218-E-002-016- 學門領域: 無線感測器網路技術 
研發成果名稱
(中文) 無線感測智慧服藥提醒與管理系統(2/3)
(英文)
成果歸屬機構
國立臺灣大學 發明人
(創作人)
楊燿州,宋同正
技術說明
(中文) 本專利為一種近接感測裝置，利用物體必然具有體積的特性，當作偵測物體存在
與否的可靠依據。為了能精確感測出物體，同時也希望能將感測設備的體積、耗
電量都大幅縮小，因此新設計之感測機制透過永久磁鐵和磁力感測器間的距離變
化所偵測出的磁力變化，配合機構設計上傾斜坡面之設計和可提供壓縮彈力的檔
板設計，便能滿足物體於容器中所有可能存放位置的情況，使得磁力的變化能夠
隨著物體體積不同而有固定的變化，達到準確偵測物體是否存在的功效。此外，
新設計之感測機制也能利用磁力的變化偵測出容器是否打開，使得使用者更能精
確監控整個容器的狀態。同時此新設計可以大幅改善其他感測技術的缺點，並且
可滿足於對體積大小有要求、對設備金額花費上有要求、對耗電量有要求、對偵
測物體精確度和可靠度有高度要求的應用上。 
 值得一提的是，此容器狀態感測機制不同於一般近接感測器所能偵測的「有」
和「沒有」物體二種狀態，更能同時偵測出容器的開關是否打開。因此新設計感
測機制共有三種狀態，使得使用者更能精確監控整個容器。 
(英文)
產業別 個人服務業
技術/產品應用範圍
技術移轉可行性及
預期效益
註：本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
參加國內感測器應用競賽(iCAN)分別獲得第二名, 並代表台灣參加國際決賽獲
得第三名. 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
