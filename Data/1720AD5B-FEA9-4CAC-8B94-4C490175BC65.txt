一、研究背景及目的
空間資訊做為數碼城市最重要基礎元件的主要原因之一在於其能夠提供最接近真實世
界的數位資訊。然而，受限於目前電腦與網路操作環境與空間資訊本身的特性，以傳統的文
字、圖形、或萬維網頁界面並無法讓使用者以最直覺的型式認知和使用這些資訊，連帶地也
讓數碼城市中空間資訊的分析與應用受到影響與限制。為解決此一問題，有必要發展一套更
直接、更有效的系統。在相關的科技中，資訊視覺化和空間資訊的結合應有很大的發展潛力。
因此，本研究研議結合本整合性計畫中其他子計畫，建置一視覺化的多維數碼程式空間資訊
系統，透過資訊視覺模擬將空間資訊以最接近實景的三維或多維方式呈現，並提供人類感官
與認知能力中最直覺的視覺化資訊分析功能。
就數碼城市之空間資訊視覺模擬而言，其主要的目的是將已建立的三維空間資訊模型
透過電腦視覺模擬，以最接近人類視覺認知之實景的方式加以呈現以利後續之分析與應用。
數碼城市中地表及人工或非人工建物的三維模型都可以透過遙測產生。然而，受限於感測器
的性質以及視角的限制，利用遙測方法所建的三模型僅能表示物件的幾何座標與形狀，無法
完整地建立物件的材質與紋理資訊，因此，也讓物件在視覺上的表現喪失了很大的真實性。
有鑑於此，一個視覺化的空間資訊系統有必要針對此點進行補強，因此本計畫將首先進行三
維模型表面紋理資訊視覺化模擬技術的研究與開發。
早期空間資訊紋理影像的獲取多使用航照 (Gulch, 1997; Haala & Brenner, 1999) 或量測
性的近景攝影機 (Forstner & Gulch, 1999; Weinhaus & Devich, 1999)。隨著科技的進步，數位
相機不僅日漸普及，其所產生之影像的品質也日益精進，因此目前對於房屋等三維模型，其
最經濟也是最有效的紋理資訊來源應是使用數位相機拍攝物件側面的高解析力實景影像。然
而，除非附加如額外設備 (Haala & Bohm, 2003)，否則以數位相機拍攝而得的影像很難精確
地求得相機在拍攝時的方位與視角等參數。為解決此一問題，最簡單的做法是手動描繪目標
物的邊界線，再以互動式的方法將個別的紋理區塊敷貼回模型的表面 (Debevec, 1996)。也可
利用影像高度紋理密集處為參考點，進而求出兩張影像中重疊部份彼此之間的關係 (Kim et 
al., 2003)。
利用數位相機以產生三維空間資訊模型紋理敷貼的另一個問題是，大部分三維模型的
每一面都必須用多張影像才能完整覆蓋，而這些紋理影像又是在不同的視角、比例、和光源
條件下所拍攝，因而無法直接地加以接合。要將這些獨立取得的個別影像組合成一幅完整的
紋理影像就必須透過影像鑲嵌 (mosaic) 與融合 (fusion) 的程序。一種常用的方法是將一系列
連續的視訊畫面聯接形成鑲嵌影像 ( Gibson et al., 2003; Nicolas, 2001)。然而，此法並無法直
接引用至數碼城市三維模型紋理影像的製作上，最主要的原因在於獨立拍攝的個別紋理影像
彼此間並不像視訊定格畫面般有近似的相機參數與足夠的影像重疊區。此外，數位相機產生
的影像彼此之間在視角、光影、亮度、色彩等性質上都有極大的差異。在遙測影像的鑲嵌上，
雙蛇演算法 (twin-snakes algorithm) 廣為應用於偵測一對正射化影像間重疊區邊界的差異線 
(seamline) (Kerschner, 2001)，但其並不適用於紋理影像鑲嵌，因為數位相機影像並無法正確
且便利地進行正射化處理。此外，不同影像間光影與顏色等差異也必須加以融合與調整，才
不會造成鑲嵌影像中色調的不連續。過去在處理這種情形時最普遍的解決方法是進行直方圖
匹配 (histogram matching) 以將影像的色彩和亮度調整到同一個範圍 (Du et al., 2001)。不過，
若直接對近景拍攝的多張數位相機影像進行這種處理可能會產生嚴重的色調與光影偏差，甚
至產生模糊或低對比的效果，造成影像品質的大幅下降。比較可行的方式是利用權重的方式
對相鄰的影像進行混合 (blending) 以達到光影與色調連續的目的。傳統的權重式光影混合多
是應用於球形 (Coorg & Taylor, 2000) 或全景影像 (panorama) 的合成 (Efros & Freeman, 2001; 
Nicolas, 2001;  Uyttendaele et al., 2001)。雖然這種方式對產生全景影像很有效，但是仍然無
法直接引用也無法完全解決紋理影像鑲嵌的問題，尤其是對陰影以及遮蔽區域的去除等處理。
數碼城市視覺化空間資訊系統的另一個重要課題是如何有效地將產生的多維（空間與
時間）物件有效率地加以顯示。在一個數碼城市的建置中，即使規模不大，其中組成的各種
物件數目必是成百上千，各個物件的複雜程度與規律性也會十分複雜；再加上模型表面高解
析度的紋理資訊，在視覺化系統中這些物件的顯示與表現將成為系統重大的負擔。如果不管
視覺或成像條件，所有物件都必須一一地進行細部的視覺模擬，則運算量將十分龐大，整個
系統也將變得非常沒有效率。
2
Pm=∑ wi P i  ; wi ∝  d eiad cib  ; ∑ wi=1 (1)
融合後紋理影像中重疊部份某一像元之灰度值與該像元至區塊多邊形邊界的距離成正比，但
與像元至區塊多邊形質心的距離成反比。
最後，鑲嵌完成之完整紋理影像則可以直接敷貼至相對應之模型表面上。對於平面或
規則牆面，此一敷貼過程只需在物空間中以簡單的仿射線性轉換即可達成；然而，對於非規
則牆面，則必須在參數空間中進行敷貼，以避免複雜的非線性轉換運算。
至於整體的物件顯示方面，本研究採用以視覺為導向的動態物件視覺模擬方式。其原
則是依據使用者（客戶端）的視覺條件，動態合成視覺模擬場景。以數碼城市視覺模擬另一
重要元件的大型地形/地景模擬為例，本研究將目標區先行切割成一定大小的區塊 (blocks)，
再依視覺條件判定可視範圍和物件解析度，動態合成場景。而個別區塊的資料則可事先進行
多層次細緻程度 (LOD) 的處理，以配合所判斷出之解析度進行視覺模擬，避免不必要地使
用高解析力的資料。本研究利用不同的門檻值，配合四分樹 (quad-tree) 演算法製作地形區快
的多重 LOD 資料；影像部份則是利用影像金字塔 (image pyramid) 製作區塊內地景紋理影像
的多重 LOD 資料。最後，配合視覺條件判斷，客戶端在進行大規模數碼城市視覺模擬時只
需要讀入可視區塊當場景 LOD 等級的資料進行成像運算及處理即可。當視覺條件改變時，
則只需讀入增加及 LOD 等級改變之少數區塊的新資料，不必重複讀取高解析力的原始資料
以增加整體視覺化模擬的效能。
三、成果及討論
本研究所研發以多邊形為基礎之三維房屋模型外牆紋理製作與敷貼系統經實驗後證實
不僅可有效地利用一般數位相機所拍攝之影像製作完整的房屋外牆紋理鑲嵌影像，並可正確
迅速地將所產生之紋理影像敷貼至三維房屋模型表面。以圖三所示之部份紋理鑲嵌成果為例，
本系統所產製之紋理影像不僅在幾何上具連續性，完整紋理鑲嵌影像的光影也經適當調校，
避免紋理不連續情況之發生。
圖四所顯示的是某一三維房屋模型（國立中央大學工程五館）牆面紋理製作和敷貼的
成果。由本圖中可見，利用本研究所研發之系統處理數位相機影像可有效地產製完整房屋外
牆紋理影像。此外，紋理影像上之自我遮蔽和非自我遮蔽部份也經有效濾除和正確填補，並
可正確敷貼至三維房屋模型表面，提供數碼城市視覺模擬時正確的紋理屬性。然而，由於本
研究所研發之系統乃使用一般之數位相機做為原始紋理影像的來源，在無其他輔助器材和設
備之情形下並無法進行完全精準的幾何校正（如正射處理）。此外，因原始三維房屋模型並
未包含一些較次要之結構物，如陽台等，之資訊，故這些部份的紋理會成為所屬大牆面紋理
之一部份，而非單獨的紋理區塊。基於此兩點，成果中會出現少部份不完美之處。例如，陽
台之底部和天花板在平視及俯視的情況下仍可見（主要原因為原始影像未經正射處理）；突
出之陽台欄杆也成為牆面紋理一部份（因模型本身並未包含陽台之型態和點位）。
4
Step 1 Step 2
圖二：不規則（非平面）牆面紋理影像之二階段校正。
xl=m(y)
xr=n(y)
yt=f(x)
yb=g(x)
(a) (b) (c)
在整體視覺模擬部份，本研究所研發的區塊式多重細緻程度動態場景構建及成像顯示
系統亦有令人滿意的成果。以圖五為例，圖中顯示使用者在進行地面導覽某一大型地景模型
（台中大坑地區）時一個視角的場景成像，包含地形網格和地景紋理。除了擬真的視覺效果
外，更重要的是，以此方式進行的視覺模擬比使用傳統方法更有效率。依本研究的實驗數據
顯示，使用區快式多重 LOD 進行大範圍的視覺模擬，其顯示速率平均可達 13.89 fps (frame 
per second)，已可進行即時化 (real-time) 的視覺模擬應用；效能比直接使用原始資料提高十
四倍以上（詳見表一）。
表一：區塊式多重 LOD 效能
區塊式 LOD 使用原始資料
fps 13.89 0.99
平均成像時間 (s/frame) 0.072 1.01
第一個 frame 成像時間 (s) 1.0008 2.5473
200 frames 總成像時間 (s) 14.40 202.26
四、結論與未來工作
本研究針對數碼城市視覺模擬之議題研發了三維房屋模型外牆紋理製作及敷貼系統，
以及區塊式多重細緻曾度視覺模擬演算。本研究所研發之房屋外牆紋理製作及敷貼系統主要
是針對以一般數位相機在未使用附加設備情況下所拍攝而得的數位影像進行處理。透過所研
發系統之多邊形區塊影像鑲嵌法製作完整、無接縫、且光影色調連續之房屋外牆紋理影像，
並可正確、迅速地敷貼至相對應之房屋模型表面。除了規則（平面）牆面紋理外，此一系統
也可正確地處理非規則（非平面）牆面的紋理影像鑲嵌和敷貼映射轉換。以本系統進行數碼
城市三維房屋模型的視覺模擬，不僅可有擬真的外觀，更可提供重要的正確房屋外牆紋理屬
性。
在整體視覺模擬方面，本研究所研發的區塊式多重細緻程度處理，可根據使用者視覺
6
圖五：區塊式多重 LOD 地景視覺模擬成果。
