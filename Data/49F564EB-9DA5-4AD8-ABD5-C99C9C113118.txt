2行政院國家科學委員會專題研究計畫成果報告
以有用的紋理特徵分佈於非監督式影像分割
計劃編號：NSC97-2221-E-012-004
執行期限：97 年 8 月 1 日至 98 年 7 月 31 日
主持人：翁旭谷 海軍軍官學校 資訊管理系
共同主持人：郭忠民 義守大學 資訊工程系
中文摘要
本計畫，針對紋理與色彩的分析作探討與研究。整
合紋理特徵與色彩特徵，採用一種非監督式的影像分割
演算法，解決純紋理影像及一般自然影像，將影像中的
顯著區域自動劃分。本計畫採用區域分割 - 合併
（ Split-Merge ）演算法為基礎作影像分割（ Image
Segmentation）。提出多解析度 LBP（Local Binary Pattern）
運算，分析紋理在空間中的分佈，配合色彩成份的判斷，
得到擷取的特徵，利用特徵作影像分割。影像分割共分
為四個步驟：第一步驟為分割（Split），即是將影像依照
紋理與顏色的不相同劃分為許多區塊，因為有過度分割
的情況產生，第二步驟即是合併（Merge），將影像中紋
理與顏色相近卻過度分割的區塊，透過判斷的機制，達
到合併的結果，第三步驟為邊界檢查（Boundary Check），
判斷合併後的區塊邊界是否為顯著區域的邊緣，第四步
驟為（Boundary Pixelwise Modification scheme），將區塊
邊界上的像素修正到物件的邊緣。
關鍵詞：影像分割，非監督式，分割-合併，紋理，過度
分割
I. 簡介
影像切割是多媒體技術的基礎，相關應用包含了影
像檢索、生物醫學科技及多媒體資料處理，每一種影像
分割的相關應用，對於影像切割的結果要求並不相同，
若運用在影像檢索，則希望切割結果是以人類視覺為觀
點將主要顯著區域區分出來，利用顯著區域檢索多媒體
資料庫，找到相關性的影像；若用在生物醫學科技相關
圖形識別，因為完全仰賴電腦分析，則會希望圖形識別
結果越精確已達到醫學相關要求。
影像切割技術已經發展許多年，有許多相關的研究
技術已被發表出來[1-8]。至今仍還沒有一個完整且適用
性廣泛的技術發表。而影像切割運用在多媒體應用技術
方面，最終的目的，是希望能發展出一套影像分割技術，
此技術能將影像切割的結果符合人類的高階意含，將顯
著區域劃分出來，因此仍然有許多的研究人員投入此研
究領域。如何能精準的切割出所需要的資訊，在許多影
像分析應用上是一項非常重要且基礎的影像處理技術，
因為切割出來的物件及特徵，具有用來描述和辨識物件
特徵的功能。
人類視覺並不會細分物件組成的小區域，但是電腦
解讀高階意含有程度上的困難，只能夠讀取低階結構，
如顏色、亮度等，要如何在高階及低階意含間找到平衡
點，是影像分割技術的目標。許多相關的研究，都是探
討單一屬性，色彩（Color）、邊緣（Edge）及紋理（Texture），
這些屬性並不相同，若只考慮單一屬性，無法完整的表
示顯著區域。本計畫以紋理為出發點，結合色彩的性質，
用一種非監督式的分割演算法，同時解決包含這兩類的
影像問題。
本計畫提出以紋理描述（Texture Description）為紋
理特徵的基礎，配合色彩在空間中的色彩成分，利用非
監督式紋理切割（Unsupervised Texture Segmentation）的
方式來做影像的切割。首先定義紋理的特徵，利用色彩
標籤經過多解析度的局部二位元圖形 LBP（Local Binary
Patterns），來描述這個紋理區域空間性的資訊；接著，定
義色彩的特徵，利用色彩成份表示影像的色彩特性，可
以表示顏色的強度，彌補單用色彩標籤運算只能表示色
彩之間差距的缺點；再用紋理與色彩特徵，透過個別的
直方圖交叉區域（Histogram Intersection），來判斷兩個區
塊相似性的程度。我們用區域為基礎的分割演算方法
（Region-Based Algorithm）作粗略的影像分割，利用分
割-合併（Split-Merge）的處理程序，合併過度分割相似
相鄰同質性的區域，使用邊界檢查（Boundary Check）的
方法來做邊界合理性的判斷，最後再用邊界像素修正的
處理程序（Boundary Pixelwise Modification scheme）來改
進區域邊界的位置。
II. 特徵截取
本計畫所提出的影像切割方法，是採用 Timo Ojala
提出的切割演算法[3]，以及之前所提出的演算法[5]為基
礎，再加以修正改進。因為紋理有粗細、方向和分佈不
一致的特性，若運算為度太小如原本的 3×3 運算維度，
無法完全掌握紋理特性，因此本計畫提出使用 3×3、5×5
和 7×7 的多解析度運算維度希望能完全掌握紋理的特
性；採用的特徵為紋理與色彩整合運用，能適用於更多
的一般自然影像。由實驗結果得知，不僅能適用於純紋
理影像、一般自然影像等，且更符合人類高階意含。
2.1 紋理特徵定羗
一般彩色的影像是以紅-綠-藍 (Red-Green-Blue)這
三種顏色的組合。但因為紅-綠-藍這三種顏色各佔 8bits，
所產生的顏色共有 242 色。在做紋理影像的分析時，由於
太多的色彩會使得計算分佈時容易造成錯誤，也會使計
算太複雜，因此將顏色以量化的方式降低顏色的色數是
影像分析非常重要的前置處理。在我們的計畫中，不擬
採用複雜的顏色量化方法，因為紋理影像所較關心的是
色彩的分佈，所以我們提出一個以色彩強度來量化顏色
4圖 4 相鄰區域 LBP 值之直方圖
以下為兩個區域間相似度定義，定義參考區域為
R，參考的相鄰區域為 *R ，區域 R 與區域 *R 之間的相似
度定義：
   
 
255
* *
1
0
255
*
2
0
, min ,
min ,
LBPi LBPi
i
colori colori
i
H R R W H H
W H H


 
 


(4)
其中  *,H R R 為兩個相鄰區域 R 與 *R 的相似度。重疊、
有交集的意思是兩個直方圖取較小的直方圖 bin 值，
 255 *
0
min ,LBPi LBPi
i
H H

 累加之後就成為兩個區域在 LBP
值中的相似程度；同理，  255 *
0
min ,colori colori
i
H H

 累加之後
就成為兩個區域在色彩成份中的相似程度，而
colorH 與
*
colorH 是由兩個區域 R 與 R’的紅–綠–藍各自運算相似
度後再相加
定義兩個紋理區域分別為 R ， *R 為色彩成份的相
似度，即為將紅–綠–藍色的相似度運算完之後相加:
   255 * *
0
min , ,colori colori color
i
H H h R R

 (5)
權重值的設定則依照色彩成份的數量判斷色彩權重
與紋理權重的比重，判斷影像是否偏向色彩影像或是紋
理影像，則以色彩成份的量化顏色來判斷，以量化顏色
1000 個顏色為分水嶺，若量化顏色低於 1000 個顏色，則
影像的色彩屬性比較強，給予較重的色彩權重值，若量
化顏色高於 1000 個顏色，表示影像的紋理屬性比較強，
則給予較重的紋理權重值。因此若量化顏色低於 1000 個
顏色，則色彩的權重值為 0.6，紋理的權重值為 0.4；若
量化顏色高於 1000 個顏色，表示影像是屬於紋理影像，
給予較重的紋理權重值，且因為色彩的特徵在本研究
中，是一個輔助紋理特徵的角色，主要仍以紋理結構為
主，因此利用多階的紋理權重值更能夠表示紋理結構的
強弱，因此若量化顏色高於 1000 個顏色低於 5000 個顏
色，則表示紋理結構的強度屬於中等，色彩權重值為
0.35，紋理權重值為 0.65，若量化顏色大於 5000 個顏色，
則表示紋理結構非常明顯，則色彩權重值為 0.3，紋理權
重值為 0.7。
III.紋理切割的演算法(Texture segmentation algorithm)
我們運用的切割影像方法，是根據 Timo Ojala,
Matti Pietikainen 所提出的切割演算法[3]紋理切割的演
算法總共分成四個步驟，第一個步驟分割(Spliting)，第二
個步驟合併(Merging) ，第三個步驟為邊界檢查(Boundary
Check)，第四個步驟為邊界像素修正(Boundary Pixelwise
Modification)。紋理切割的處理程序流程圖，如圖 5 所示，
圖中說明了紋理切割的處理程序。
圖 5.紋理切割的處理程序流程圖
3.1 分割(Splitting)
一個成功的紋理分割演算法，必須要能利用它的紋
理描述(Texture Descriptor)，例如顏色直方圖，像素直方
圖等等，將其有同質性的紋理區域給區分出來。 基 於
這個目的，我們利用分割 (Splitting)演算法，以遞迴
(recursive)的方式分割原始紋理影像成為不同大小的正方
形區塊。我們利用同質性測試(Homogeneity Test)來判斷
該區塊是否繼續切成四個子區塊。如果該紋理區塊所得
出的值 R 大於門檻值 X，則進一步把紋理區塊分割成四
個子區塊。，如圖 6
圖 6.四元樹分割表示圖
首先將參考區塊先分為四個子區塊，這四個子區塊
可以得到六個特徵相似H 值，六個特徵相似H 值裡最大
者設為
maxH ，最小的H 值設為 minH ，判斷是否確定分割，
以方程式(6)判斷。若是 R 值大於門檻值 X （Threshold）
表示特徵差異大，一致性很低而需要分割，若是 R 值小
於門檻值，表示區塊特徵一致性高，不需要分割，門檻
值是由實驗求得，定門檻值 X 為 1.2。分割到最小的區塊
為 8×8 則停止，因為若繼續往下分割，區塊尺寸太小，
並不會得到較好結果，且運算量會增加許多。
X
H
H
R 
min
max (6)
我們首先將紋理區塊暫時的分成四等分正方形的子
區塊，測量這四個子區塊的六個紋理相似度 H。最大的 H
值標記為
maxH ，最小的 H 值標記為 minH ，如果 R 值大於
門檻(Threshold)值 X，則該區塊切成四個子區塊，如果 R
值小於門檻值 X，則停止分割動作。
選擇合適的門檻值 X 是個重要的問題，門檻值 X 太
大會使分割失敗，而太小又會使得下一個步驟合併失
敗，根據我們的實驗，取小一點的值會比大一點的好，
6IV 實驗結果(Experimental results)
4.1 實驗環境
實驗系統於 Wintel 平台開發，作業系統使用
Microsoft XP，使用 Boland C++ Builder 開發程式，資料
庫中共有 200 張彩色影像，其中包含了一般自然影像及
純紋理影像。因實驗結果的呈現是屬於較為接近人類高
階的視覺感受之表現，而無法以實驗數值相互比較，因
此在實驗結果的比對上則使用分割結果呈現，並引用其
他的影像分割技術為對照組來討論比較。
4.2 實驗結果
首先對增加色彩成份的改進結果。圖 8（a）為論文
[5]的結果顯示，圖 8（b）為本計畫加入色彩成份成為第
二特徵，影像背景顏色相近，因此加入色彩成份使得第
二步驟分割影像的區塊較少，由輸出影像可看出近似顏
色與近似紋理的主題被完整的區分為同一區域，背景區
域也用較少數量的區域表示；圖 8（b）因背景顏色有相
似性，因此加入色彩成份影像分割結果，則已經可看出
在輸出影像已將類似紋理且類似顏色的背景區域合併，
由圖 8（b）、圖 8（b）可看出顯著主題區域完整分割。
(a) 論文[5]影像分割結果
(b) 本計畫加入色彩成份影像分割結果
圖 8 與論文[5]演算法分割流程結果比較圖
(a)原始圖 (b)分割-合併 (c)影像輸出
圖 9 本計畫在主題單純背景單純影像分割結果展示圖
(a)原始圖 (b)分割-合併 (c)影像輸出
圖 10 本計畫在主題單純背景複雜影像分割結果展示圖
由圖 8（b）的輸出結果可看出，不僅將顯著區域完
整分割，且背景的區域可以依照不同紋理結構劃分，對
於紋理的細微變化不會過於敏感，因此可用較少的區域
數量表示背景的紋理結構，因此由實驗結果看出，色彩
特徵的定義比論文[5]的方法更適用於較多的影像。
以下為其他影像完整的實驗結果，圖 9 為主題單純
背景單純的自然影像，圖 10 為主題單純背景複雜的自然
影像，圖 11 為主題複雜背景單純的自然影像，圖 12 為
主題與背景皆複雜的影像。
(a)原始圖 (b)分割-合併 (c) 影像輸出
圖 11 本計畫在主題複雜背景單純影像分割結果展示圖
(a)原始圖 (b)分割-合併 (c) 影像輸出
圖 12 本計畫在主題與背景皆複雜之影像分割結果展示圖
V. 結論與討論
在此計畫中，我們提供了一個新的紋理切割的方
法，我們使用局部二位元圖形 LBP（Local Binary
Patterns）。再利用直方圖交叉區域(Histogram Intersection)
來當做兩個紋理區塊相似性的量測。我們以區域為基礎
的切割演算方法(Region-Based Algorithm)作為粗略的影
像分割，利用分割-合併(Split-Merge)的處理程序，合併分
割過相似相鄰同質性的區域，最後再利用邊界像素修正
的處理程序(Boundary Pixelwise Modification scheme) 來
改進區域邊界的位置。
在影像分割的問題，我們的焦點是希望對影像上的
顯著的區域做分割。除了紋理的觀念之外，另外加上色
彩的觀點，此兩個因素為影像的組成成份，用此兩個特
徵來進行影像分割，透過四個影像分割的步驟，將分割
的程序分為分割、合併、邊界檢查、像素修正，使得分
割結果符合我們人類視覺觀點，且經由實驗結果得知符
合大多數的影像內容。
雖然對於本項議題我們已經有了較完整的影像分割
技術也得到可靠的驗證，可是在眾多的影像中還是存在
著不確定的因素將會影響最後分割的結果，此種問題仍
有待我們去發現與探討。例如在合併過程中會有著過度
合併的情況，如何得到一個接近完美的分割結果仍是一
個高深的議題。
未來的研究重點有下列幾項。第一項：處理紋理影
像中紋理區域較小的部份，由於區域較小，在這演算法
中會把此區域忽略掉，合併在附近較為相似的區域中，
因而造成失敗。第二項：如何讓演算法中的門檻值不會
這麼的敏感，使紋理切割的成功率增加。這些都是未來
再進一步將探討的議題。
參考文獻
[1] T. Ojala, M. Pietikainen, D. Harwood, A comparative
study of texture measures with classification based on
feature distributions, Pattern Recognition vol. 29,
pp.51-59, 1996.
[2] Yining Deng, B. S. Manjunath, “Unsupervised 
Segmentation of Color-Texture Regions in Images and
Video”,IEEE Transactions On Pattern Analysis and
