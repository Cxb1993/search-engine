cycle)為其特徵。混合環路和網狀的方式，保護
環(p-cycle)的概念是要能夠同時擁有這兩個方
式的優點。環(ring)保護機制可以提供非常快速
的回復時間(大約 50-60 ms)，但是需要的備用資
源和工作資源的比例至少達到 100%，在有些真
實的網路甚至超過 200%。然而對於網狀網路
(mesh network)來說，若實體網路拓墣是良好連
結(well-connected)時，備用資源和工作資源的比
例通常介於 50-70%的範圍。保護環(p-cycle)的
概念便是同時利用這兩者的優點：網狀網路
(mesh network)回復所需備用資源的效率和環狀
網路(ring network)快速的回復速度。
在這個計畫中，我們假設在波長分波多工
(WDM)網路上的節點(node)通常是非常可靠的
，舉例來說，每個節點皆具備內部的備用資源
。換句話說，我們只考慮如何回復鏈結的錯誤
(link failure)。單一保護環(p-cycle)可以提供單一
鏈結錯誤的保護，但是不能保護同時發生兩個
鏈結錯誤在相同的保護環上。若網路發生多重
錯誤的情況是，每個保護環上最多只有一個鏈
結錯誤，那麼保護環集仍能維持這個網路的存
活。然而，若是沒有經過仔細的考慮，將會有
多個保護環擁有相同的邊。當鏈結錯誤發生在
這些相同的邊時，將使得擁有這個相同邊的多
個保護環無法再去保護額外的一個鏈結錯誤。
相較於使用 ILP 來計算保護環(p-cycle)的方式，
我們更感興趣的地方在於如何有效率地建立出
互斥邊保護環集(EDPC)，並且這些保護環能夠
確實地保護多重鏈結錯誤。而建立的方法是基
於鏈結狀態的繞路來達成，並且相容於傳統開
放式最短路徑優先(OSPF)的網路協定。接著，
當這些互斥邊保護環集(EDPC)面臨同一個保護
環上發生兩個鏈結錯誤而導致其喪失保護能力
時，我們將使用重新組態(reconfiguration)或重新
繞路(rerouting)的方式來延伸我們提出方法的可
行性。
我們可以利用圖表來說明傳統的保護環
(p-cycle)和我們的互斥邊保護環集(EDPC)之間
的差異。圖 1(a)顯示出一個長回復路徑的保護環
(p-cycle)。圖 1(b)顯示出四個較短回復路徑的保
護環，但是因為保護環間存在相同邊，限制了
發生多重錯誤時的容錯能力。圖 1(c)在回復路徑
的長度方面做了讓步，但也因此增加了保護多
重錯誤的能力。
(a) (b) (c)
圖 1: (a)一個保護環。(b)四個具相同邊的保護環。(c)兩個互斥
邊保護環。
關於本計劃的內容，會在接下來做詳細介紹
。首先，在這部份的剩餘部份，我們會先對我
們提出的互斥邊保護環方法做初步的介紹。在
第四部份，我們將詳細介紹建立互斥邊保護環
集(EDPC)的經驗法則的方法，同時也會討論這
個方法的時間複雜度。第五部份，我們將呈現
我們所提出的方法的效能分析，並且對這些結
果提出我們的看法與結論。
互斥邊保護環集(EDPC)繼承了許多保護環
(p-cycle)的優點。其中一項是，對於弦邊(chord)
的鏈結錯誤，其保護路徑的平均長度只是每個
保護環周長的一半而已。對於環(ring)而言，保
護路徑的長度幾乎等於整個環的周長。另外，
因為互斥邊保護環集(EDPC)是完全建立在備用
資源上，所以我們可以在任何時間根據工作路
徑的情況來調整保護環的佈置，讓保護環可以
確實保護所有的工作路徑，並且這樣的調整並
不會對正在運作的工作需求產生影響。相反地
，環在建立的過程便已經決定了工作需求的繞
路，並且不能依照自己想走的路徑來調整。若
能一起對工作路徑的繞路和互斥邊保護環的佈
置做最佳化的動作，將可以節省更多的容量，
同時達到更佳的回復效率。
互斥邊保護環集(EDPC)不僅可以加快回復
的速度，而且在網路的規模變大時，對於鏈結
錯誤的回復提供更大的彈性。圖 2(a)的虛線部份
顯示出配置給傳統保護環的備用資源。圖 2(b)
的實線部份顯示出用傳統保護環所保護的工作
容量。其平均的回復繞路長度是八個跳躍(hop)
，而且只能支援單一鏈結錯誤的回復。另一方
面，圖 3(a)顯示出建立互斥邊保護環集(EDPC)
所配置的備用資源，其中兩個保護環之間存在
三個重疊的節點，但不存在任何相同的邊。圖
3(b)顯示互斥邊保護環集(EDPC)備用資源另一
個可能的配置結果，其中兩個保護環之間存在
兩個重疊的節點，同樣地不存在任何相同邊。
圖3 (a) 和(b)的互斥邊保護環集(EDPC)和圖2(b)
的傳統保護環保護相同的工作容量。但是互斥
邊保護環集(EDPC)可以增加錯誤回復的效率，
也就是，可以達到較短的回復繞路，並且可以
保護同時發生的兩個鏈結錯誤。再者，互斥邊
保護環集(EDPC)之間存在重疊節點的數目，是
和配置備用資源的數目成正比的。圖 3(b)和圖
3(a)可以保護相同數目的工作容量，但是圖 3(b)
因為有較少的重疊節點，所以比圖 3(a)需要較少
的備用資源。互斥邊保護環集(EDPC)對於每個
額外的重疊節點，至少需要兩個額外的備用資
源單位。因此，我們提出的方法是希望能建立
出越少重疊節點的互斥邊保護環集(EDPC)越好
。
same number of edges in K4 for simplicity.
M=ΣNi ,i=1…R.
因此，我們可以使用 Ni/Ni+2(S-Ni)來表示 R
個分割中，每個分割的備用資源邊的使用率。
並且 R*[Ni/Ni+2(S-Ni)]代表分割數目和備用資
源邊使用率兩者之間的關係，在不考慮重疊節
點的影響下。K/M 是用來考慮重疊節點對備用
資源邊使用度的影響。
因此，這個式子 X=R*[Ni/Ni+2(S-Ni)]+K/M
代表在同時考慮分割數目和重疊節點數目的情
況下，備用資源邊所需付出的代價。
Formula Y:
互斥邊保護環集(EDPC)和傳統保護環相同
的一個優點是對弦邊(chord)錯誤的保護方面，
平均保護路徑的跳躍(hop)次數是保護環周長的
一半，但是在環狀網路的情況下，保護路徑長
度幾乎和環(ring)的周長是一樣的[7]。在我們的
模型下，隨著分割數的增加，錯誤回復的時間
也會跟著增加。
因此，這個式子 Y = 0.5*(V/R)是用來表示回
復速度所需付出的代價。
至於目標函式，我們是用 X 和 Y 的加權總
和來表示，也就是 min [ BX+(1-B)Y ]。其中 B
是一個常數，其值是設定為 0.5，這是因為我們
不偏好 X 或 Y。
接著，我們根據數學公式來分析，在不同的
網路規模下(譬如說，根據節點的數目)，我們應
該將整個網路做多少的分割。表 1 顯示對於不
同的網路規模，目標函式所求得的結果。例如
，當 V = 30 時，則得到的最小值是 R=5，Ni=6
， S=15 ， K=8 ， M=30 ，
X=5[6/6+2(15-6)]+(8/30)=1.517，Y=0.5(30/5)=3
和 BX+(1-B)Y=2.259。
圖 4 進一步顯示出分割數目的完整結果。這
樣的結果證明了，當網路規模變大時，分割的
數目也會跟著增加。
EDPC
0
5
10
15
10 20 30 40 50 60 80
No. of nodes in physical topology
Pa
rti
tio
n
nu
m
be
r
EDPC
圖 4: 在不同的網路規模下，適當分割數目的結果。
在決定了分割數之後，基於鏈結狀態繞路的
經驗法則的方法便可以建立出互斥邊保護環集
(EDPC)。每個節點的鏈結狀態繞路表都有記錄
到其他各點的加權值，所以我們可以在分割整
個網路區域前，選擇其中一個節點作為起始點
。然後，對起始點繞路表裡的各個數值做排序
，並且再根據圖 4 所決定的分割數來決定每個
分割的範圍和起始點。
V =10
1.7751.651.93
1.6842.50.8672
2.56250.1251
Function valueYX
R
Result is R=2, and partition number is 2 at least.
V =20
2.0672.51.6334
2.0653.330.83
2.72550.452
Function valueYX
R
Result is R=3, and partition number is 3 at least.
V =30
2.4172.52.3336
2.25931.5175
2.3093.750.8674
2.75450.5083
Function valueYX
R
Result is R=5, and partition number is 5 at least.
V =40
2.4632.8572.057
2.393.3331.456
2.51741.0335
2.85250.654
Function valueYX
R
Result is R=6, and partition number is 6 at least.
V =50
2.7033.1252.288
2.6053.571.647
2.6854.171.26
2.89350.7855
Function valueYX
R
Result is R=7, and partition number is 7 at least.
V =60
2.6993.332.0679
2.6583.751.5668
2.7434.2861.27
2.95950.9176
Function valueYX
R
Result is R=8, and partition number is 8 at least
V =80
3.04342.4511
2.9464.4441.89210
2.96551.4869
3.0885.7141.1758
Function valueYX
R
Result is R=10, and partition number is 10 at least
表 1: 在不同的網路規模下(10、20、30、40、50、60 和 80)，
O(n+m)的時間複雜度，但是並不能保證一次的
運作便能找出保護環。因此，對於一個有 k 個
節點的分割，找出其保護環的繞路在最差的情
況下需要 O(k!)的時間複雜度。那麼總共有 r 個
分割便需要 O(r x k!)的時間複雜度，在最差的情
況下。因為我們會做適當的分割，所以我們可
以將每個分割 k 的節點數視為一個常數。另外，
分割階段(partition phase)和調整階段(adjustment
phase)的時間複雜度也是多項式時間內可以完
成的。因此，實際上，我們所提出的建立互斥
邊保護環集(EDPC)的演算法是可以在多項式時
間複雜度裡完成的。
接下來這個部份，我們要比較互斥邊保護環
集(EDPC)和傳統保護環集之間保護多重錯誤的
能力。我們使用下列三個範例網路來模擬互斥
邊保護環集(EDPC)和傳統保護環之間的比較：
New Jersey LATA network，APPANET network
和 National Network。
以具有 11 個節點的 New Jersey LATA
network 來說，我們建立兩個沒有相同邊的互斥
邊保護環在互斥邊保護環集(EDPC)裡，在傳統
保護環方面是建立兩個具有兩個相同邊的保護
環。以具有 20 個節點的 APPANET network 來
說，我們建立三個具有兩個共同邊的互斥邊保
護環在互斥邊保護環集(EDPC)裡，在傳統保護
環方面是建立三個具有三個共同邊的保護環。
以具有 24 個節點的 National network 來說，我
們建立四個具有八個共同邊的互斥邊保護環在
互斥邊保護環集(EDPC)裡，在傳統保護環方面
是建立四個具有兩個共同邊的保護環。當我們
假設發生多重錯誤時，不同的錯誤會發生在不
同的保護環上，我們發現互斥邊保護環集
(EDPC)可以容忍鏈結錯誤的數目和保護環的數
目一樣的機率至少有 80%，而傳統保護環的機
率甚至可以低到 43%。表 2 顯示出完整的結果
。
Probability Tolerating 2 faults
EDPCs P-cycles
New Jersey LATA
network
100% 83%
APPANET network 87.31% 81.29%
National network 81.29% 66.59%
Probability Tolerating 3 faults
EDPCs P-cycles
New Jersey LATA
network
0% 0%
APPANET network 81.29% 72.88%
National network 86.68% 53.91%
Probability Tolerating 4 faults
EDPCs P-cycles
New Jersey LATA
network
0% 0%
APPANET network 0% 0%
National network 82.45% 43.39%
表 2: 成功保護多重錯誤的機率。
經由上述的比較得知，我們所提出的建立互
斥邊保護環集(EDPC)的經驗法則的方法並不能
保證一定可以產生互斥邊保護環集(EDPC)。其
可能的結果可以分成三種情況。第一種情況是
成功建立互斥邊保護環集(EDPC)。第二種情況
是找不到互斥邊保護環集(EDPC)。第三種情況
是找到的保護環集並不完全是互斥邊保護環。
圖 6(a)顯示第二種情況的可能性。圖中存在兩個
互斥邊保護環，不過我們並沒辦法從我們的方
法得到這樣的分割，這是因為在分割階段時，
我們不會產生出這樣的不平衡分割。圖 6(b)顯
示我們可以建立出具有相同邊的保護環集，即
分割之間具有共享的邊。我們的演算法使用擴
大(enlargement)的方式去減少第二和第三種情
況發生的機率，也就是，在最差的情況下，我
們的方法將會退化成為傳統的保護環集。
(a) (b)
圖 6: (a)第二種情況。(b)第三種情況。
以第一種情況來說，我們利用表 3 來顯示，
利用四個評判效能的標準來比較我們的方法和
其他三種不同的方法。這四個效能標準包含了
回復速度，分擔風險的邊的數目，備用資源的
使用率以及可以保護的範圍。
Medium ~
high
Low ~ mediumLow ~ mediumFastEDPC
LowHighHighMediumMesh protection
MediumMediumHighFastMany protection
cycle
All (high)LowLowSlowOne protection cycle
Protection
range
Spare resource utilizationThe number of risk
sharing edge
Restoration speed
表 3: 四種不同方法的比較。
五、計畫執行管理與自評
這個計畫針對波長分波多工(WDM)網路提出
了一個改進的保護機制，這個保護機制不需要
互斥邊保護環集(EDPC)的幫助便能加快回復的
速度，並且能容忍更多同時發生的錯誤。我們
所提出的經驗法則的方法是基於鏈結狀態繞路
表來決定分割的範圍，接著建立互斥邊保護環
集(EDPC)，並且在備用資源的花費和保護能力
之間做取捨，然後再來調整互斥邊保護環集。
建立互斥邊保護環集(EDPC)的方法是可以在多
