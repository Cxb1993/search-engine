 行政院國家科學委員會補助專題研究計畫 ■ 成 果 報 告   □期中進度報告 
 
 
共乘群組搜尋方法之研究 
 
 
計畫類別：■個別型計畫   □整合型計畫 
計畫編號：NSC100－2221－E－033－075－ 
執行期間：  100年  8月  1日至  101年  7月  31日 
 
執行機構及系所：中原大學資訊工程學系 
 
計畫主持人：吳宜鴻 
共同主持人： 
計畫參與人員：黃曉瓏、林建宇 
 
 
 
 
成果報告類型(依經費核定清單規定繳交)：■精簡報告  □完整報告 
 
 
 
 
 
 
處理方式：除列管計畫及下列情形者外，得立即公開查詢 
            □涉及專利或其他智慧財產權，□一年□二年後可公開查詢 
 
中   華   民   國   101年   10月   31日 
 
 3
該論文提出的解決辦法是建立一個共乘系統供學校的員工與同學使用，利用終點一樣，起點也不會
相差太遠的特性解決了上述困擾，並對該系統使用者的使用情況做意見回饋問卷，再針對回饋問卷
的建議對系統配置做修改。此論文偏重於使用者介面的改善、及建立可用於信任團體的共乘服務。
另一方面，Morse等人則提出交通壅塞現象大多是由通勤者所造成的，市面上很多共乘系統只注重
聯繫而忽略了使用者之間的信任度。藉由實際走訪以及面試，找出並解決共乘系統使用上的問題，
協助建立共乘系統，但因其強調安全性，所以僅限定使用在可信任的團體間。Xing 等人提出轉乘
的概念，乘客從第一輛車下車的地點在第二輛車的行駛路線附近（乘客可步行一段距離），可轉搭
第二輛車至目的地，亦即一名乘客的需求最多由兩名駕駛接力完成，增加乘客到達目的地的可能。
論文中只提出系統架構，並未見到真實的系統，且所提出方法只容許一次的轉乘，雖然較一般共乘
系統更有彈性，還是無法完全滿足乘客的需求；更多次轉乘不只讓乘客更有機會到達目的地，也能
得到花費更少或更短的時間到達目的地的組合。 
國內的合用共乘研究可分為私有車輛及營業用車輛，前者主要提出系統架構，讓乘客便於加入
共乘，其中還提出方法讓駕駛可以得到最大的油資補貼；後者則涵蓋計程車及大眾運輸兩種，分別
探討計程車路線規劃使駕駛取得最大的利潤，以及透過公共汽車轉乘以最少花費到達目的地。 
在私人車輛方面，祖善明等人於 2008年提出即時的共乘系統，當乘客提出共乘需求，伺服器
會收到乘客目前的所在位置與欲前往之目的地，結合兩者可得行進方向的向量；另一方面，伺服器
搜尋有空位且在距離內的車輛，自所選取的車輛可取得目前位置與其目的地的向量。凡乘客向量與
車輛向量夾角小於 15度時，即可考慮加入共乘。由於乘客向量與車輛向量相近，無法達成真實的
部份共乘。在搜尋附近的車輛中，以歐幾里德距離當作搜尋範圍限制，但實際道路可能路程甚遠，
例如當車輛行駛於高速公路上，今乘客出發位置接近高速公路，此時乘客與車輛雖然歐幾里德距離
很近，但車輛必須行駛很長的距離後才能接到乘客。我們在 2009年考慮乘客起終點被駕駛所包含
即可共乘，並提出浮動計價方法，讓乘客分擔油資作為駕駛的補貼，讓駕駛與乘客的花費都比個別
前往目的地的花費低廉；最後提出方法可為駕駛找出一群乘客，使得駕駛得到接近最高的補貼金額。 
在營業用車輛方面，吳沛儒在 2004年提出任務型共乘接駁的計程車服務，以大眾運輸為中心，
如國道客運、捷運或火車等，劃分兩個同心圓分別為可步行區與共乘接駁區，其範圍需考慮計程車
與乘客之成本而制定；在可步行區之同心圓為乘客接受的行走範圍，而超出第二個同心圓因距離遠
會使得共乘派遣效率降低，故不提供接駁服務。大眾運輸站接駁的乘客由派遣系統決定，最後一個
乘客下車後，派遣系統安排計程車在該區沿路接駁乘客至大眾運輸站，計費方式不論人數及搭乘距
離，金額皆固定。吳素華在 2008年提出另一套「計程車共乘接駁機制」，對於不同地區提供不同的
派遣機制，其地區包含捷運、國道客運及高鐵站。捷運因站與站之間距離近，將營運範圍設為 800
公尺到 2280公尺做快速接駁，超出範圍不提供接駁服務，計費方式同樣採金額固定。國道客運因
一個縣市站數少，故將各社區設定一個集散地，每個社區對應不同費用，計程車可在社區集散地接
駁乘客至國道客運，若共乘人數未滿三人，其他順向社區有需求時，可順向至其他社區接駁。高鐵
站因設置距離市區較遠，根據時間提供不同的社區接駁服務，並分析搭乘高鐵的乘客，日常乘客以
商務居多，社區選定以商業區及相關機構為主；假日以休閒旅遊居多，社區選定以商圈及觀光景點
為主，計費方式改以搭乘時間計算花費金額。 
陳德紹於 2009年再提出以動態規劃使計程車獲得更大的利潤，計費以搭乘時間計算乘客搭乘
金額，避免計程車為了增加營收，而私自繞路。系統將設定一時間限制，以計程車平均時速與路長
計算平均旅行時間，再與系統參數求出旅行時間的限制。社區內的乘客在集散地集合，事先統計有
多少人要搭乘計程車，將三個人視為一個單位，每一個單位由一台計程車接駁，未滿三人則以三個
社區為一群，計算總人數再派遣計程車接駁。臨時要求之乘客，則檢視附近車輛的座位及旅行時間
 5
座位搜尋時，符合乘客的需求座位數最多只有 1個。最後蒐集各座位上找到的乘客，便可得到一組
乘客群組輸出。由於候選乘客名單可能相當龐大，這個問題的主要挑戰在於，如何從已知範圍快速
找到我們想要的乘客，因為乘客的起終點具有空間特性，我們將建立樹狀索引以加速搜尋，如圖七
所示。所有的乘客區間都紀錄在葉節點，中間節點則是涵蓋下層乘客區間或MBR（minimum bounding 
rectangle）的最小MBR、各自記載所涵蓋乘客區間的範圍、以及各座位需求數下的最大值。我們的
方法將於搜尋過程中嘗試分析這些最大值對應之乘客區間起終點、以及 MBR 的邊界座標，例如以
範圍[15,20]搜尋 P1 將發現最大值對應之乘客區間 A[2,7]、以及 P1 的邊界座標（起點 1-5 和終點
3-10），都呈現範圍不符合的結果（前者：7<15、後者 5<15），亦即 P1 內不存在任何乘客區間落在
範圍[15,20]中。 
我們將此方法簡稱為 BCE，實驗和我們以前提出的 ACC和 LCE兩個方法比較，ACC是暴力法，
但可設定時間上限來強制停止執行，因此也可視為一種求近似最佳解的方法；LCE則不斷嘗試連接
搭乘區段未重疊的乘客，使其盡量接成一串較長的乘客序列，以此作為近似最佳解。測量項目主要
是搜尋所花費的計算時間和答案品質（QoA），後者是一個百分比，分母為整條駕駛路線全部坐滿時
的總付費，分子則是輸出答案中乘客的總付費，越接近 100%表示越近似最佳解。 
關於答案品質的實驗結果如圖八所示，X軸表示不同長短的步行距離，左側 Y軸為答案品質，
右側 Y軸則是候選的乘客數量。顯而易見的，隨著步行距離變長，候選乘客也會增多；答案品質則
是只有在最左側稍顯陡峭，表示候選乘客過低時，才會造成答案品質低落。比較四個不同方法，
ACC-60和 ACC-600（後面數字表示時間上限）均表現不佳，尤其是候選乘客較多，ACC需檢查的
組合多，因逾時被中斷執行時的答案品質較差。LCE 和 BCE 的答案品質較佳，BCE 更取得壓倒性
的優勢。在計算時間方面，圖九顯示隨著步行距離變長，因候選乘客增多，計算時間也逐步上揚，
相較於 LCE，BCE雖然花費時間稍長，但差距並不顯著，而且兩者都能在短暫的 0.2秒內完成。 
（二）以時空索引為基礎的駕駛搜尋方法[3][6] 
為了提高共乘成功率，我們提出多點轉乘的機制，為乘客尋找由其起點到終點的一組駕駛轉乘
組合，該組合必須符合使用者所限定的條件，包括出發時間、到達目的地時間及轉乘次數上限，而
最佳化條件則分成旅行時間與花費金額兩種選擇。在計價方案上，我們採取浮動計價，由各路段上
的乘客與駕駛平均分攤費用。為了觀察轉乘機制對於共乘系統的影響，我們進行初步的實驗，所得
的結果如圖十所示：(a)顯示乘客可順利抵達目的地的比例，允許轉乘的次數越高，該比例明顯隨之
提高；轉乘不但使乘客更容易加入共乘，還可讓乘客以更接近直線路徑到達目的地，根據浮動計價
方案將使乘客以較低的花費金額完成旅程，如(b)所示。 
我們提出轉乘限制深度優先的作法，路徑擴張時選取其中一條駕駛路線作完全拜訪，當發現該
駕駛路線無法到達目的地時，由該路線終點倒退，並由目前所在地點嘗試其他可轉乘的駕駛路線，
逐一產生各種轉乘組合。採用上述任一種路徑擴張的策略，均可產生所有的轉乘組合，最後再根據
所計算的最佳化條件(旅行時間或花費金額)，取數值最低者即為最佳解。此過程在面對複雜的道路
網及大量的駕駛路線時，需要頻繁的資訊擷取及計算，我們提出名為時空索引(Spatio-temporal Index)
的結構，讓駕駛登入路線時，將行駛路線以出發時間區間與行經地點為索引，分別記錄車輛編號、
路段出發時間、路段終點等路段資訊，並依照路段出發時間排序，有助於在路徑擴張時快速找出某
個時段上特定行經地點之車輛。透過轉乘限制深度優先策略，加入門檻值的概念，當擴張路徑抵達
目的地時，以該路徑之花費金額更新門檻值，使門檻值維持目前的最低值，再使用該門檻提早終止
其他較高花費路徑的擴張。我們發現在路徑擴張時，許多轉乘組合常會重覆出現，導致多餘的重覆
計算，因而提出拜訪表的額外結構，記錄從某個已拜訪地點出發可抵達目的地的已知路徑，以達成
更快速的過濾效果。 
 7
上述實驗中，我們發現轉乘次數為 3時，轉乘路徑可到達目的地的比例已超出 90％，故在此實
驗中設定轉乘次數為 3，讓駕駛數量分別為 100、300、500、700、900與 1100，觀察在駕駛數量變
動下，有無拜訪表的方法效能如圖十五所示。實驗結果顯示，當駕駛數量增加時，拜訪表效果相較
於門檻值削減擴張，確實較為顯著，原因是每一地點所能擴張的路徑也隨之增加，然而拜訪表可以
重複利用已擴張的路徑，故處理時間的成長速度相對上比較緩慢。 
五、結果與討論 
本計畫在「駕駛找乘客」及「乘客找駕駛」這兩方面的搜尋技術都達成預期的成果，前述介紹
以樹狀索引為基礎的乘客搜尋方法和以時空索引為基礎的駕駛搜尋方法，因篇幅所限，以區段索引
為基礎的駕駛搜尋方法[2][6]僅簡述如下： 
透過圖十六的流程，新乘客可能比舊乘客提供駕駛更高的貼補金額，因此我們的方法會從已知
的共乘組合中，找出一個最適合的組合，讓新乘客應付金額最低，而且在加入新乘客後，駕駛貼補
金額也隨之增加。 
本計畫的研究成果已累積發表成三篇研討會論文，後續將整理成期刊論文。 
六、參考文獻 
[1] 嚴傑, “共乘系統之乘客搜尋技術,” 中原大學資訊工程系碩士論文. 
[2] 王煜森, “動態環境下最佳共乘組合之快速更新,” 中原大學資訊工程系碩士論文. 
[3] 余泉慶, “共乘系統之轉乘路徑規劃方法,” 中原大學資訊工程系碩士論文. 
[4] C.W. Cho, C. Yen, Y.H. Wu and C.Y. Chang, November 2011, "Passenger Search by Spatial Index for 
Ridesharing," Conference on Technologies and Applications of Artificial Intelligence, International 
track. 
[5] Y.S. Wang, C.W. Cho, Y.H. Wu and C.Y. Chang, November 2010, "Fast Update of the Best Ridesharing 
Group in Dynamic Environment,” Conference on Technologies and Applications of Artificial 
Intelligence, Domestic track. 
[6] C.C. Yu and Y.H. Wu, December 2011, "Optimal Multi-hop Routing for Ridesharing Systems," 
NCS2011 Workshop on Databases, Data Mining, and Information Retrieval. 
 
圖五、已搭載乘客 C的駕駛路線及搜尋範圍 
 
圖六、已完成第一個座位的共乘群組 
 
圖七、記載了下層最大值的樹狀索引 
 
圖八、不同步行距離下的候選數量及答案品質 
 9
 
圖十三、拜訪表結構 
 
圖十四、不同轉乘次數下的效能分析 
 
圖十五、不同駕駛數量之效能分析 
 
圖十六、挑選最佳共乘組合的流程 
 11
100年度專題研究計畫研究成果彙整表 
計畫主持人：吳宜鴻 計畫編號：100-2221-E-033-075- 
計畫名稱：共乘群組搜尋方法之研究 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 2 2 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
