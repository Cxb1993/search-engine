1 
 
一、 前言 
世界經濟發展從工業化階段進入知識經濟階段，隨著科技與網路的發展，
知識以電腦、網路和通訊相結合的形式體現，硬體技術的發展，讓知識可以大
量被儲存，而網路、雲端運算等新傳輸方式的出現，更改變且加速了知識的結
合與傳遞，因此，在決策的過程中除了必須面對大量的資料外，新資料更是不
斷湧現，如何有效的將新資料內化為知識並與既有知識快速整合，成為決策者
的一大新挑戰。企業的每一個決策都會因特殊情境條件而有不同的考量，因此
要制訂一個好的決策就必須有充分與正確的知識，然而知識提供決策支援的過
程卻充滿不確定性，除了外部環境的動態變化影響之外，每一個準則都有許多
必須被滿足的條件，這些條件本身就充滿了不確定性，另外，條件和結論之間
的因果推論關係的不確定性也影響了整個決策過程。為了增加知識提供決策支
援的正確性，學者們研究了許多不同的估計方法來解決不確定性的問題，其中
包括統計、人工智慧、資料探勘等技術。其中人工智慧的領域使用電腦表示知
識，進而進行問題的自動求解，透過電腦技術能快速的完成知識的獲取、表達
和推理過程的構成與解釋，建立決策支援的系統。 
然而在系統的建置過程中由於專家知識的不可取代性、資料的蒐集困難等
因素，常會面臨資料與專家知識取捨的兩難與整合問題，在知識學習的過程中，
如果僅從資料的分析來找出關聯性或趨勢作為決策支援，有可能會造成誤判或
過度推測的情形，致使擬定錯誤的決策；相反地，為避免僅從資料分析獲得結
論可能發生的誤判，另一種決策方式為採用專家意見，採用專家意見雖然可避
免誤判或過度的推測，但是如何整合多位專家不同的主觀意見，也成為採用專
家意見的決策方式之困難，雖然目前相關研究提出一些整合方法，如德菲法、
層級分析法等，能以系統化方式取得多位專家知識的一致性，但當變數的數目
太多時專家仍難精確地描述出所有的關係，此種建構方式在變數複雜度低且狀
態空間小的問題領域能有很好的表現，一旦問題領域的複雜程度變高且狀態空
間變大時，以專家知識提供正確的決策支援仍具困難度。基於此，本研究將整
合資料與知識，期能結合兩種決策方式的優點，避免主觀的專家知識與資料的
過度推測，提供企業做正確的決策支援。我們將以網路表示法表現知識，選擇
貝氏網路(Bayesian network; BN)作為描述問題的工具。 
貝氏網路能處理不完整資料(incomplete data)的問題：建構貝氏網路時，建
構者可以主觀的設定未知的參數值，如事前機率(prior probability)等，當資料不
完整時，使用者也可主觀的填入資料於所建構的網路，以修補資料的完整性。
當建構者對欲求解問題的領域知識不足時，貝氏網路具備因果關係學習能力的
優勢。此外，若真實世界問題的資料量很龐大或昂貴時，在建立系統時，貝氏
網路將相關的知識以因果關係表示，並以機率表示因果關係的強度，因此可以
透過貝氏統計方法整合問題的領域知識與資料，再加上貝氏網路在以現有資料
訓練貝氏網路時，可以使貝氏網路具備彈性，不受特殊例外資料的增減而影響
(Heckerman, 1997)。因此，本研究將以貝氏網路為工具，發展系統化的整合資
3 
 
生節點彼此條件獨立，稱為 d-separation。如圖二為當 zV 已知時， xV 與 yV 為條件
獨立的三種方式，其中(a)與(b)為序列方式的連結，(c)為分支方式的連結。 
 
 
圖二、貝氏網路之 d-separation 
 
若節點間連結如圖三呈現 V 字型時，稱為 v-structure，此時當 zV 已知時，原本
獨立的兩個變數 xV 與 yV 會變成相關。 
 
 
圖三、貝氏網路之 v-structure 
 
貝氏網路學習模式分為結構學習與參數學習兩部分，建構貝氏網路的流程
首先須決定問題的領域，並定義問題的變數，之後建立條件獨立的有向非循環
圖，即貝氏網路的結構部分，依照問題所蒐集的資料評估貝氏網路結構的局部
機率分配，即參數的部分。結構學習指的是在網路結構及機率參數都不確定的
情況下，考慮變數是否貝加入網路之中，以及變數之間的連結的修正。而參數
的學習，則是在網路結構確定的情況下，在貝氏網路中學習參數機率。 
由於參數與結構不一定為已知或未知，所以貝氏網路的學習模式可整理為
四大類型：已知結構的完整資料學習、已知結構的不完整資料學習、未知結構
的完整資料學習、以及未知結構的不完整資料學習，如表一所示。 
 
表一、貝氏網路的四種學習模式 
 
已知結構 
(Known Structure) 
未知結構 
(Unknown Structure) 
完整資料(Complete Data) 樣本統計 樣本空間中的搜尋演算法 
不完整資料(Incomplete Data) 最大期望演算法 結構式最大期望演算法 
 
5 
 
建立結構學習的模型資料變數須為離散型變數，資料為完整資料且符合資料間
為獨立的原則，但因為搜尋空間會隨著變數的增加而呈指數成長，屬於 NP-hard 
的問題，所以大部分的演算法使用啟發式方法來搜尋網路結構或者先將節點的
順序做適當的排列來減少搜尋的空間和時間。其中 K2 演算法(Cooper and 
Herskovits, 1991)即利用先將節點的順序做適當的排列來減少搜尋的空間和時間，
因此進行 K2 演算法前須給定一組適合的節點順序再開始結構學習。S 表示一個
貝氏網路的結構，D表示包含 n個變數的案例資料，已知資料D推論結構為 B的
機率為 ( )DSP , ，如下式： 
( ) ( ) ( )∏
=
=
n
i
iK igSPDSP
1
2 ,, π
                                      (1)
 
( ) ( )( )∏ ∏= =−+
−=
i iq
j
r
k
ijk
ij
i NrN
rig
1 1
!
!1
!1,π
                                  (2)
 
其中， ( )iig π, 為一組父節點集合 iπ 屬於變數 i 的估計值，經由尋找每個變數
使 ( )iig π, 最大的父節點集合的迭代運算，找到讓 ( )DSP , 值為最大的一組結構。
其搜尋過程從每個節點都沒有父節點的初始狀態開始，逐漸增加讓結構評比分
數增加的父節點，直到評比分數不再增加時則停止搜尋。為解決須由專家給定
節點順序的結構學習限制條件，希望從資料中即可學習節點順序，於是將演算
法範圍延伸到節點順序的搜尋，希望透過節點順序搜尋和網路結構搜尋兩個步
驟完成結構學習。本研究以連線搜尋取代節點搜尋來結合結構搜尋完成學習，
而連線搜尋以連線的強度作為搜尋的驅動，其中連線強度將以其不確定性作為
強度的度量工具。 
接著探討不確定性的度量工具，本研究以訊息理論為基礎，使用共同資訊
量找出兩變數之間的關係來定義連線的強度。訊息(Information)是指一事件所帶
來的資訊量，事件 A 所含有資訊量以 ( )AI 表示。不確定性越高，則其所帶來的
資訊量就越多。而不確定性之高低即表示發生機率之情形。如果發生的機率很
高，則其不確定性就很低，所帶來的資訊量就很少。資訊量 ( )AI 具有下列五種
特性： 
(1)事件 A 之資訊量為該事件發生機率之函數，即 ( ) ( )[ ]APfAI = ； 
(2)當 ( ) 10 ≤≤ AP 時， ( ) 0≥AI ； 
(3)當 ( ) 1=AP 時， ( ) 0≥AI ； 
(4)當 ( ) ( )BPAP < 時， ( ) ( )BIAI > ； 
(5)如果 A 和 B 為兩獨立事件則 ( ) ( ) ( )BIAIABI += 。 
如果滿足(1)到(5)式，則可找出 ( )AI 所對應的函數，如下式： 
[ ] )]([log)()( APKAPfAI a−==                                       (3) 
熵(Entropy)為訊息理論中用以描述事件不確定性的度量。當事件完全確定
7 
 
表二、連線強度定義 
 文獻 連線強度定義 
1 Boerlage, 1992 
( ) ( )
( ) ( )( )[ ]zxyPzxyPd
zYXCSYXLS
z
z
−+=
=→
,,max
,max
 
where x+ and x− denote two possible states of X , d is the distance measure between 
distributions, and z denotes all other possible states of all parents of Y other than X . 
2 
Lacave and Diez, 
2004 
( ) ( ) ( )[ ]zxyYPzxyYPYXLS
zxy
,,max 0,, ≥−≥=→                               
where 0x is the lowest value of X . 
3 Jitnah, 1998 
( ) ( ) ( ) ( ) ( )( )zyP zxyPzxyxPzPYXLS pryprzx pr
,
log, 2
,
∑∑=→      
where prP  is a approximation of probability term  
4 
Ebert-Uphoff, 
2007 
( ) ( )
( ) ( ) ( )( )zyP zxyPzxyPzxP
ZYXMIYXLS
yzx
,
log,,
,
2
,
∑∑=
=→
 
四、 研究方法 
在真實世界系統建構過程中，資料並非一次就能蒐集完成，而是隨著時間
陸續進入系統中，如果每次資料進入系統時皆重新學習系統架構，將花費大量
的時間，並且也使系統處於不穩定狀態而無法提供即時的決策支援，本研究認
為以系統局部的正確架構為基礎，再整合進入系統的新資料，這樣的更新方式
將更有效率。 
 
 
圖四、以連結驅動之結構學習 (Link-driven Structure Learning) 機制 
 
 
9 
 
 
圖六、整合知識與資料示意圖 
 
本研究將建立以連結驅動之結構學習(Link-driven Structure Learning)機制，
步驟如圖七，步驟分別為：第一、建立貝氏網路初始模型；第二、進行貝氏網
路參數估計；第三、貝氏網路模型評比，若判斷此模型須進行修補則進入下一
步驟，即第四、結構學習機制；第五、有向非循環圖形檢驗與修正。 
 
 
圖七、以連結驅動之結構學習機制 
 
I. 建立貝氏網路初始結構 
初始模型的建立將分為結構與參數設計兩部分，並將從建立結構開始，首
先必須確立各節點的型態與其數值，以肺癌資料之抽煙(Smoking)節點為例，需
確立此節點包含兩個狀態數值：抽煙者(Smoker)與未抽煙者(Nonsmoker)，即表
示為 { }kerker,NonsmoSmoSmoking = 。當資料為連續型資料，則將資料以離散化
11 
 
III. 貝氏網路模型評比 
普遍使用的模型評比準則包括貝氏資訊準則(BIC; Bayesian information 
criterion)與 AIC(Akaike information criterion)，差異在於所使用懲罰項不同。其
中 AIC 準則公式如下： 
 
( ) kyfAIC k 2ˆln2 +−= θ                                        (11) 
 
其中 n為樣本大小， k 為模型的階數。而本研究採用 Schwarz 在 1978 年提
出的貝氏資訊準則做為評比標準，貝氏資訊準則以 AIC 準則為基準，將懲罰項
(penalty) k2 更改為 nk ln ，公式如下： 
  
( ) nkyfBIC k lnˆln2 +−= θ                                       (12) 
 
以肺癌資料為例，分別對完整與部分結構貝氏模型進行評比，貝氏資訊準
則 計 算 結 果 分 別 為 完 整 結 構 20503.1)1( −=Score ， 以 及 部 分 結 構
3397.1)2( −=Score 。 
 
 
圖十一、(1)完整結構貝氏模型，(2)部分結構貝氏模型 
 
IV. 結構學習機制 
結構學習機制以共同資訊量與網路連線強度作為修補基準，分別計算出增
加連線矩陣與刪除連線矩陣，以此修正原有的相鄰矩陣，流程圖如圖十二。連
線強度計算以及修補步驟將分述於下。 
13 
 
 
圖十三、計算連線強度，以肺癌資料為例。 
 
 
圖十四、計算連線強度(%)，以肺癌資料為例。 
 
ii. 貝氏網路連線修補機制 
修補機制分為兩部分，分別為增加連線與刪除連線。第一階段的研究將針
對結構中遺失的連線進行評估與修補，第二階段則針對結構中的冗餘連線進行
評估與刪除，最後，結合連線之刪除與修補完成結構學習機制。連線修補機制
目的希望藉由共同資訊量和連線強度作為節點連線的搜尋評估，分別計算出增
加連線矩陣與刪除連線矩陣，修正初始模型的相鄰矩陣(圖十五)，完成貝氏網路
結構的更新。 
 
 
圖十五、初始結構與其相鄰矩陣(以四個節點為例) 
 
15 
 
最後將刪除連線矩陣與第一階段獲得的相鄰矩陣整合，完成更新的相鄰矩陣： 
 
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎣
⎡
=
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎣
⎡
−
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎣
⎡
=−=
0010
1000
0000
0010
0000
0000
0000
0100
0010
1000
0000
0110
 ,,
'
,
''
jijiji DelAdjAdj
      (18)
 
 
V. 有向非循環圖形檢驗與修正 
由於貝氏網路中不允許有方向性循環(directed cycles)存在，故在刪除連結與
增加連結的步驟後將執行方向性循環的檢驗步驟，避免循環的發生。完成一致
性檢驗後將重新量測更新後貝氏網路的連結強度，重新回到第一個步驟進入下
一代結構更新學習。 
 
五、 結果與討論 
本研究方法以肺癌資料集(Asia)測試驗證，肺癌資料集包含 8 條連線與 8 個
節點，肺癌資料集的初始結構評比分數為-1.3354，經過以連結驅動之結構學習
機制 13 次的迭代後學習後，其評比分數為-1.2584，結構學習過程如圖十六。 
 
圖十六、肺癌資料結構學習結果。 
 
此研究的重要性，從學術方面而言，選擇貝氏網路表示法來表現知識，透
過貝氏網路機率性模式的特性以及學習的能力解決決策支援的不確定性。且透
過貝氏網路以圖形模式呈現資料與知識，能以圖形模式結合統計方法後分析大
量資料，加上迭代的結構學習機制，提供資料隨時間更新的彈性學習。對產業
方面而言，面對大量資訊出現與快速資訊更新的企業環境，管理者常無法清楚
且即時的獲得決策支援，貝氏網路結構學習機制將提供一可更新的模型，提供
處理即時問題的決策支援機制，並透過因果推論的機率模式建立知識網路，讓
企業在快速變動且資訊大量繁瑣的環境下獲得適當的決策支援，提升企業的競
爭力。 
 
 
 
100 年度專題研究計畫研究成果彙整表 
計畫主持人：王偉華 計畫編號：100-2221-E-029-026- 
計畫名稱：結合知識與資料的貝氏網路系統(I) 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 1 1 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
