and the recently proposed unstructured P2P networks 
intend to organize the participating peers in a 
social network fashion by exploiting the knowledge of 
contents stored in the peers. As the existing 
algorithms often build the social-based unstructured 
P2P networks without precisely revealing the object 
sharing patterns, the resultant networks may not 
perform searches efficiently and effectively by 
exploiting the common interests among the peers. In 
light of this, we have developed in this project an 
analytical model to illustrate how the social 
relations can be faithfully included into the 
flooding-based unstructured P2P networks. Based on 
our analytical model, we have further suggested a 
novel P2P net-work formation algorithm to construct 
social-based unstructured networks. We validated our 
proposal in simulations with empirical data sets. 
英文關鍵詞： Peer-to-peer system, unstructured peer-to-peer 
network, social network 
 
非結構疊蓋式網路上做最佳化網路拓撲之搜尋 
 
蕭宏章 
成功大學資訊工程學系 
 
摘要 
物件共享是非結構疊蓋式網路(P2P)的主要應用。節點參與非結構疊蓋式網路的方式是隨機連結其他節點，
因為參與的節點利用訊息廣播來搜尋它們有興趣的物件，也因此造成顯著的網路流量問題。測量研究指
出參與非結構疊蓋式網路的節點們具有相似的喜好，最近研究非結構疊蓋式網路的文章也提出利用節點
們的相似性質去組織網路中的節點，但是組織出來的網路拓撲可能無法使節點們有效率的去搜索物件且
搜尋效能良好，因為已存在的建立疊蓋建立演算法並沒有搜尋效能上的保證，因此我們在非結構疊蓋式
網路上提出一個新的疊蓋建立演算法，我們提出的方法具有嚴謹的效能保證。理論的分析結果是在常數
機率下(1)在我們提出的網路上搜尋一個物件花費 )(ln NO c  步數(c 是一個小的常數)，還有(2)搜尋是有
效地利用相似的節點們來達到循序漸進的效果，也就是在搜尋的路徑上，節點 i要找到另一個節點 j傳遞
訊息，唯有 j比 i更相似於目的地 d， j接收以及傳遞此訊息給 d，而且發現所需物件的成功率趨近於
100%。在實驗中，我們證實我們的理論分析，還有跟其他已發表的演算法做比較。實驗結果指出，我們
的方法明顯優於其他演算法。 
 
關鍵字:疊蓋式網路系統、非結構疊蓋式網路、搜尋。 
 
1. 緒論 
物件搜尋是多樣的應用中不可或缺的部分(例如:檔案分享跟訊息檢索)。Gnutella[3]是一種受歡迎的疊蓋
式網路搜尋協定，因為 Gnutella的網路是非結構性，所以參與 Gnutella的節點是隨意的跟其他節點做連
結，節點們利用訊息廣播來搜尋有興趣的物件。為了廣播一個訊息，要查詢的節點散播此訊息給自己的
鄰居們(一個節點 i的鄰居，我們指的是這些鄰居節點跟節點 i有直接的連結)。 
 
GES及 SocioNet 是一種語意疊蓋式的演算法[18,21]，而且依賴訊息廣播去尋找物件。以 GES為例，當
一些節點們具有相似的喜好並有可能提供物件給彼此[13]-[15]，因此在 GES中，這些具有相似喜好的節
點會被互相連結成一個叢集。為了降低任兩節點的路徑，參與節點從系統中連結一些不相似節點，因為
透過不相似的節點，可以使訊息快速地脫離本身所在的叢集。採用隨機且均一機率來挑選、連結不相似
的節點，[19-21]提出的疊蓋式建立演算法在是類似於[18]。我們也在實驗中量測 GES[18]跟 SocioNet[21]
效能與我們方法做比較。 
 
2. 我們的方法 
給予 G=(V,E)，任兩個相異節點 ∈u V， ∈v V 的節點相似距離被記為如下: ),( vuD ，是被定義在 E 中任兩
個節點u跟 v的最短路徑。 
 
不失一般性假設，如果u = v，則 ),( vuD =0。例如在 Fig. 1中， )3,1(D =2, )2,1(D =1。 
     
 
 
 
 
 
 
 
 
 
Fig .1 例子:給予一張節點相似圖形 G=(V,E) 
 
2.2 疊蓋網路的建立 
 
 利用相似的節點 
之前所提到的，每一個節點u會從 }{uV − 中挑出最相似於u的節點來連結，因此u就傾向滿足性質 1C ，
假設 uI 是u在網路圖 ),( EVG = 中所擁有鄰居節點的集合。 
定義如下 currentA :  
u
Iv
current I
vuF
A u
∑
∈=
),(
 
表示u中對於其鄰居的平均節點相似值，利用這些最相似於u的鄰居節點，u可以尋找一個新節點w , 並
邀請w成為u的鄰居，使得 
currentupdate AA ≥  
 
xϕ 是一個任意的正整數，並且使得 ∑
∈
>−=
xIy
yxTyxT 0),(1),( 。當 t被取樣到之後，則u邀請 t當它的鄰居。 
  
每個節點u是個別獨立去維護它的 uI 、 uΦ 。因此，我們的方法在段落 3.2.1跟段落 3.2.2提出一種疊蓋式
網路 )',( EEvG ∪= ， },),{( uIvVuvuE ∈∈= 及 },),{(' vvVuvuE Φ∈∈=  
 
2.2 搜尋協定 
    
考慮任何一個查詢訊息Q要尋找一個物件O， s節點發送Q，然後持有物件O的是 d。除了如同典型的
Gnutella協定的盲目廣播去散佈查詢訊息，我們的方法概念如下， s從鄰居節點中 uI 、 uΦ 挑選傳送的節
點 uuIt Φ∪∈ ，當 t滿足 ),(),( dsFdtF > ， s即廣播訊息Q給這些節點，當 t接收到訊息，也做相同的工
作，也就是選擇從其鄰居中選擇更相似於 d的節點傳遞，希望至少存在一條路徑到目的地 d，使得任兩
個鄰居節點u跟 v在這條路徑上 P  ( v從u那接收到訊息)具有以下性質 
 
),(),( duFdvF >  
 
因此，這條路徑 P會循序漸進地傳遞給更有可能解決這個查詢訊息的節點(性質 3C )。 
 
3. 理論效能分析 
3.1 基於實際系統資料的理論分析 
eDonkey 的資料集合主要描述每一個參與節點 ID跟其所分享的檔案[13]，我們已經剖析這個資料集合，
確保此資料集合具有 power-law的性質，在說明這樣的性質前，我們先定義以下: 
 
定義 4 
在相似圖形 G=(V,E)上的一個節點u，其相似距離 d內節點的集合定義如下 
},),({)( VvdvuDvdSu ∈∀≤= 。 
舉例，在 Fig.1 }6,5,2,1{)1(1 =S 以及 }6,5,4,3,2,1{)2(1 =S ，因此， |S1(1)| = 4 and |S1(2)| = 6。 
 
在 eDonkey 中對於任何節點 u 所構成的 )(kSu 分佈具有 power-law 分布，也就是具有帕雷托分佈
αβxxf =)( ， 26.0,46.4 ≈≈ βα 。因此，我們的分析模型基於這樣性質呈現如下: 
 4. 實驗模擬 
實驗設定為每一個演算法回合，每一個參與節點均企圖去改善它的 uI 及 uΦ ，且當搜尋效能穩定時，研
究這三個方法的效能。Fig. 2(a)所呈現的是 GES、SocioNet跟我們方法的成功查詢詢訊息的路由步數。
就如 Fig. 2(a)我們的方法執行非常好，大部分的查詢可以被傳遞到目的端，且不超過 10步( Nln≈ )，就
如同理論 2的分析結果。相反的，GES跟 SocioNet各別可能需要花超過 25跟 40步。值得注意的是 GES
在路由訊息的跳躍步數上執行效能比 socio好，SocioNet 執行很差，因為 SocioNet產生的疊蓋網路可能
陷入局部最佳化的問題。GES依賴隨機漫步去發現相似的節點，這可能幫助節點脫離局步最佳化，但是
GES對於參與的節點在利用最相似的節點上沒有提供效能保證。  
 
Fig. 2(b)說明查詢訊息成功的比率(X軸表示演算法執行的回合數)，考慮成功跟不成功的查詢訊息，隨著
時間的推移，GES跟我們的方法提高了路由成功的機率，因為兩者在發現最相似的節點方法中可避免陷
入局步最佳化的問題。特別的是我們的方法執行更有效率，成功查詢的比率近乎 100%，驗證了我們在
推論 2的理論分析。接著 Fig. 2(b) 結論了我們的方法收斂快速，在 3500個演算法執行回合後搜尋校能
就會趨於穩固。相反的，GES需要花將近 13000回合才會趨於穩固。 
 
(a)跳躍步數        (b)演算法回合數(*1000) 
Fig. 2: (a)查詢訊息的跳躍步數，(b)訊息的解決成功率 
 
5. 結論 
 
我們已經在非結構疊蓋式網路上提出一個嚴謹的效能保證並確保執行有效率且效能良好。在一個常數機
率下，一個查詢節點花 )(ln NO c 步數(c是一個小常數)，去到達可以解決查詢的目的端，且這查詢訊息可
以循序漸進且有效率地去利用相似的節點們。查詢被成功解決的機率近乎 100%。理論分析更進一步顯
露其他非集中式解法(例如[18]-[21])並沒有在查詢路徑的跳躍步數上處理良好。 
 
 I 
國立成功大學 
國科會計畫出國報告書 
 
 
 
 
 
 
 
 
 
 
 
報告名稱：參加 ICPADS 2010 平行與分散式系統國際研討會 
出國期間：2010 12/7 - 12/12 
經費來源：國科會補助 
單位：資訊工程研究所 
職稱：博士班學生 
姓名：廖豪 
聯絡電話：0982345445 
指導教授:蕭宏章 
 
 
 
 
中華民國  99年 12 月 24 日 
 III 
 
目 次 
 
摘 要 .......................................................................................................... II 
一、目 的 ................................................................................................... 1 
二、過 程 ................................................................................................... 2 
三、心 得 ................................................................................................... 3 
四、建 議 事 項 ...................................................................................... 4 
 
 2 
二、 過 程 
  學生於十二月七日早上六點從台南出發，早上十一點二
十分於高雄小港機場搭乘中華航空班機，經過約兩小時的時間
到上海。十二月八日上午九點，第一個 session 中報告，報告
的 題 目 為 Small-World Social Relationship Awareness in 
Unstructured Peer-to-Peer Networks。之後聆聽第二個 session。
由於有一位報告者沒有到場，所以會議就提早半小時結束。吃
完午餐後接著參加下午的 session。學生於十二月九日上午九
點聆聽了 Prof. Adolfy Hoisie 與 Prof. Dhabaleswar K. Panda 的
演講，題目分別是 Practical Methodologies of Co-Design for 
Exascale Systems and Applications 與 Networking Technologies 
for Clusters: Where do We Stand and What Lies Ahead? 接著參
加第一 session，Peer-to-Peer I。用過午餐之後，接著參加 Cloud 
Computing 與 Mobile Computing 兩個 Sessions。晚餐前餐加了
TPDS Board Meeting，由 TPDS 主編 Ivan Stojmenovic 主持。
十二月十日下午參加第十一，十四 session，Peer-to-Peer II，與
Sheduling。十二月十一日參加會議主辦的旅遊，地點是有中國
威尼斯之稱的周莊。十二月十二日早上由上海出發，搭乘中華
航空至桃園，再由高鐵返回成功大學。 
 4 
的會議，在 TPDS Board Meeting 中，期刊主編 Ivan Stojmenovic
除了跟與會者報告目前期刊的將會有一個 special issue 及鼓勵
review paper 的投稿。另外也說明期刊現況包括投稿數，接受
率及影響力(Impact Factor)，也與我們說明為了提高期刊的內
容的品質，未來的方向將會是提高影響力，降低接受率。這些
資訊可以讓我們掌握期刊現況及現在研究的重點。 
3. 這次會議中除了發表論文也伶聽了多位學者的論文報告，學習
到了發表的技巧，研究技巧及新的知識。其中也認識許多外
國學生包括中國的 Yang Chen，葉保留老師，Qishi Wu，及來
至義大利的 Marko，來至台灣，目前在美國執教的嚴老師，
中央的江振瑞老師等。 
四、 建 議 事 項 
    學生參加國際會議所攜的資料雖可以從網路上下載，但若
可以放置系上或學校圖書館內來提供給大家參閱更佳，學校單
位也應鼓勵大家閱讀。學生建議增加補助學生出席國際會議報
告的次數。參加國際研討會除了可以提升學生英語表達能力，
增加國際視野，與國際研究人員交流提升自己的研究能力。 
99 年度專題研究計畫研究成果彙整表 
計畫主持人：蕭宏章 計畫編號：99-2628-E-006-011- 
計畫名稱：以社群為基礎的非結構式同儕搜尋網路：模型、設計與分析 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
Taiwan Academic 
Network 
Conference 
(TANET'10), 
2010. (Best 
Paper Award) 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 2 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 1 1 100% 
IEEE 
Transactions on 
Parallel and 
Distributed 
Systems. 
(accepted and to 
appear) 
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
2nd 
International 
Workshop on 
Peer-to-Peer 
Networking 
(P2PNet'10), 
2010. (Best 
Paper Award) 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  
國外 
專利 已獲得件數 0 0 100% 件  
