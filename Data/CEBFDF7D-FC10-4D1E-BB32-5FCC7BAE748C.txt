In this project, we first propose a QoS routing, 
based on IEEE 802.11 Distributed Coordination 
Function (DCF). The proposed QoS routing outperforms 
the existing approaches on the efficiency of control 
overheads. We also propose a cross-layer (MAC-
routing) design, based on TDMA-type MAC protocol, 
with the following contributions: 
1. Get rid of the definition of fixed communication 
range and interference range, which is impractical 
but usually adopted in existing literature. Instead, 
SINR-based medium access is adopted and it is easily 
combined with adaptive power and transmission rate 
control. Moreover, the proposed precise medium access 
control mitigates data collision and improves the 
spectrum efficiency.  
2. Design a novel resource allocation rule for CR 
users under multi-channel communication environment. 
And, with this design, the system performance can be 
improved dramatically. 
英文關鍵詞： cognitive networks, wireless multi-hop ad hoc 
networks, cross-layer design, QoS routing, adaptive 
modulation/coding 
 
 ii 
 
摘要 
在感知網路(cognitive networks)中，可用通道資源隨時間劇烈變化，如何提供多媒體
資訊穩定的服務品質保證(QoS)是一大課題，尤其當次要用戶 (secondary users)組成多躍
式隨意網路(multi-hop ad hoc networks)時，路由選擇成為系統性能的決定因素。現行具保
證服務品質的路由演算法僅針對固定的 MAC 層設計，如 IEEE 802.11 DCF (Distributed 
Coordination Function) 與 STDMA (Spatial-reused TDMA) 等，並假設所有用戶的傳輸速
率與功率為固定值，使已高度發展的適應性技術，如功率控制及適應性調變編碼(AMC)
等，無法發揮效能，也不適用於感知網路。 
針對這個議題，本計畫研討在多躍式隨意感知網路下的跨層(實體層、MAC 層及網路
層)演算法設計，以提供多媒體資訊傳送的服務品質保證。其中，為兼顧研究的實用性與
發展性，我們因應兩種不同的 MAC 層協定，競爭式(contention-based)與免競爭式
(contention-free)，設計路由演算法。 
本計畫研究成果整理如下： 
1. 以 IEEE 802.11 DCF 為 MAC 層協定，發展具服務品質保證的路由演算法，並減少現
有方法中有過多控制冗餘(control overhead)的問題。 
2. 以TDMA的架構為基礎，設計能適應性調整傳輸速率與功率的跨MAC-routing層協
定，並超越已知文獻的部分理想化假設，包括: 
(1) 直接以接收功率或SINR判定可通訊(或干擾)範圍，避免採用一般文獻之固定傳輸
範圍與干擾範圍的定義。 
(2) 直接以接收端的SINR值為成功接收之判斷，因而可結合功率控制與AMC技術，以
提高全系統性能。 
(3) 建立新穎的感知網路中次要用戶之多通道(multi-channel)資源管理分配法則，提高
全系統性能。 
本計畫之研究成果除了已發表的 1 篇期刊論文與 2 篇會議論文，目前準備投稿 2 篇期
刊論文。 
 iv 
 
目錄 
摘要............................................................................................................................................ ii 
目錄............................................................................................................................................ v 
一、計畫緣由與目的................................................................................................................ 1 
二、研究方法及研究成果........................................................................................................ 2 
A.  SPAC 路由協定 ........................................................................................................... 4 
A.1  頻寬估測 .............................................................................................................. 4 
A.2  允入控制 .............................................................................................................. 6 
A.3  路由維護 .............................................................................................................. 7 
A.4  SPAC 系統效能 ................................................................................................... 8 
B.  單通道跨層設計 ........................................................................................................ 10 
B.1  系統環境假設 .................................................................................................... 10 
B.2  MRPS 的 MAC 層架構 ..................................................................................... 10 
C. 多通道跨層設計 ........................................................................................................ 19 
C.1  現有多通道系統架構 ........................................................................................ 19 
C.2  多通道系統架構 ................................................................................................ 26 
C.3  資料時槽的選擇 ................................................................................................ 30 
C.4  解決通道數目限制問題 .................................................................................... 37 
C.5  MC-MRPS 系統效能 ........................................................................................ 38 
三、成果與討論...................................................................................................................... 47 
四、參考文獻.......................................................................................................................... 48 
 
 
 
 
 
 
 
 
 
 
 
 
 2 
 
有效使用的頻譜，在儘量不干擾主要使用者(或系統)條件下暫時性的利用該頻譜資源，以
提高整體頻譜效益，如 IEEE 802.22 所定義。其主要技術包括頻譜感測、SDR(software 
defined radios)等。廣義言，感知無線電或感知網路(cognitive networks)是泛指感測且有效
地利用網路系統之所有資源(包括頻譜、時段、功率、空間位置等)，達成滿足不同 QoS
要求的多媒體資訊 end-to-end 傳送，以提高整體系統效能。其採用的技術除了上述頻譜
及通道感測和 SDR 外，也在考慮網路用戶間競爭合作的關係下，包括不同通道、不同中
繼間之 cooperative communication 技術、adaptive modulation/resource allocation 及跨各層
次之 cross layers 協定設計等。 
綜上所述，近年無線通訊網路系統及技術之發展趨勢可簡言為：在有限資源(頻譜、
功率等)條件下，以最有效資源使用方式，滿足多媒體資訊之不同 QoS 要求，並達到系統
最大傳送量(throughput)的設計。其技術考慮已打破早期 OSI 層次架構，進而強調在於如
何估測可用資源，並有效使用、分配及管理資源，以提升全系統性能。因此，未來通訊
系統可說是全面性(ubiquitous)的智慧型(intelligent)通訊網路系統，這也是本計畫的總體目
標。 
 
二、研究方法及研究成果 
本計畫的研究目標，是在感知網路中，跨實體層、MAC 層與路由層三層設計，以提
供即時性資料串流(real-time streaming data)的服務品質保證(quality-of-service, QoS)，其中
次要用戶群 (secondary users)組成無線多躍式隨意網路 (wireless multi-hop ad hoc 
networks)。我們必須解決的問題如下: 
 
(1) 主要用戶(primary users)的探測: 
在感知網路中，次要用戶須探測主要用戶是否於鄰近區域出現，並主動避開。依照
總計畫分工，相關技術由子計畫一至三提供，本子計畫則負責規劃這些探測技術的執行
時機。 
(2)  服務品質的保證: 
 4 
 
A.1. 頻寬估測 (bandwidth estimation):  
 SPAC 協定的頻寬估測由三個主要元素共同組成 - “local Residual Bandwidth (local 
RBW)”、“Bandwidth Requirement (BWQ)”和“ the neighbors’ Residual Bandwidths (the 
neighbors’ RBWs)”。 
 其中”local RBW”是由訊源端(source)依資料串流的需求而定，並藉由 RREQ 夾帶出
去。而 “Bandwidth Requirement (BWQ)” 與 “the neighbors’ Residual Bandwidths (the 
neighbors’ RBW)”兩項則是依據 IEEE 802.11 MAC 與 PHY 層協定的特性而計算出，如下
所述: 
A.1.1 local RBW: 
 SPAC 路由協定定義一個節點的 Local RBW 為該節點尚未被佔用的頻寬，並藉由週
期性的監測網路動態取得(亦即 IEEE 802.11 MAC 定義的通道狀態，包含“busy”與“idle”)，
以下式表達: 
RBW = (Tidle/Tperiod)×C 
 其中 Tidle 為在 Tperiod (總監測時間)中，通道為”idle”狀態的時間加總，而 C 是由 IEEE 
802.11 PHY 層決定的傳送速率。 
A.1.2 neighbors’ RBWs: 
 SPAC 改動 AODV 路由協定原先使用的“Hello”封包格式，使其夾帶該節點自己的
“local RBW”，藉以通知週遭節點。                                   
 其夾帶手法與 QoS-aware routing protocol 相似，然而所夾帶的內容僅包含節點自己的
“local RBW”，而非節點自己與全部 1-hop 鄰近節點的“local consumed bandwidth”，因而
大幅減少所夾帶的資訊量。 
 藉此資訊交換，SPAC 協定下的節點可以定期更新 1-hop 鄰近節點的“local RBW”。
除此之外，每一個節點定義在自己與 1-hop 鄰近節點之中，最小的“local RBW”為“local 
Min_RBW”。 
 與傳統的路由演算法不同，QoS 路徑的建立應針對個別的資料串流，而非針對特定
的訊源端(source) – 目的端(destination)配對。因此 SPAC 協定利用 routing table 將不同的
 6 
 
Original IP Address 
Original Sequence Number 
(a) 
Type J R G D U BWQ Hop Count 
RREQ ID 
Destination IP Address 
Destination Sequence Number 
Flow-ID{Original IP Address, 
Original Sequence Number} 
Min_RBW* 
(b) 
圖二、RREQ 格式的更改: (a) AODV 格式 (b) SPAC 格式 
 
A.2 允入控制 (admission control) 
 接下來將介紹 SPAC 協定的允入控制機制: 
 當節點從應用層接到新資料串流的傳送需求時，該節點先依據此資料串流的特性計
算出 BWQ，然後開始檢視自己所剩餘的頻寬，是否足以容納新的資料串流，其檢視的流
程詳述如下: 
 首先假設干擾距離: 在絕大部分的通訊系統中，節點間的干擾距離往往大於通訊距
離，我們假設干擾距離為兩倍通訊距離。換言之，任何 2-hop 內的節點傳送，彼此都會
互相干擾。以下圖為例，節點 A, C, D, F 與 S 都落在節點 B 的干擾範圍內。  
 
圖三、節點 B 的通訊距離(黑圈)與干擾距離(紅圈) 
 節點在檢視頻寬是否足夠時，必須先找出: 當新串流成功建立時，在該節點自己的
干擾範圍內，有多少節點將傳送此新資料串流(含該節點自身)，因而佔用該節點自己的剩
餘頻寬。                                                  
 8 
 
Type N Reserved Prefix Size Dest Count 
Unreachable Flow ID 
{Source IP Address, Source Sequence Number} (1) 
Additional Unreachable Flow ID 
{Source IP Address, Source Sequence Number} (if needed) 
                                       (b) 
          圖四、AODV 原始的 RRER 封包格式(a)與 SPAC 協定所用的新格式(b) 
 
 
A.4  SPAC 系統效能 
子計畫四實現 SPAC 演算法於模擬平台上，並與 CACP 和 QoS-aware Routing Protocol
互相比較，在 MAC/PHY 層採用 IEEE 802.11 標準，其相關參數列於下表: 
 
PHY layer 802.11g 
PHY preamble length 144 bits 
PHY PLCP header length 48 bits 
Data transmission rate for CBR flows 24Mbps 
transmission rate of control signals for CBR 
flows 
12 Mbps 
Transmission range 250m 
Interference range 500m 
MAC layer 802.11 DCF 
Contention window 31~1023 
Max. MSDU 1500 bytes 
Max. buffer size at each node 100 packets 
                   表一、IEEE 802.11 PHY/MAC 相關參數 
 
在模擬過程中，系統在 1000m×1000m 的區域中隨機佈放 50 個節點，第一個資料串流
起始於系統時間 2 秒時，此後每 2 秒新增一條資料串流 每條資料串流一秒產生 75 個封
包，封包大小固定 1000bytes。 
該模擬要比較的項目有  (a) throughput; (b) blocking rate; (c) dropping rate; (d) 
ene-to-end delay. 其結果列於下圖五(a)~(d): 
 10 
 
Delay-CBR
020
4060
80100
120
140160
180200
5 6 7 8 9 10 11 12 13 14 15
number of flows
m
s
SPAC
CACP
Listen
Hello
 
圖五 (d) 
圖五(a)~(d)顯示，在多種不同的 QoS 路由演算法中，SPAC 演算法能在各方面都達到
與 CACP 演算法幾乎相同的效能，然而，SPAC 演算法的架構卻遠為簡單(特別在
route-reply 的步驟上) 。至於與 QoS-aware routing protocol 使用“listen”和“hello”這兩個架
構相比，SPAC 演算法在網路負載加重時，能擁有較高的點對點吞吐量(end-to-end 
throughput)和較低的點對點延遲(end-to-end delay)。 
 
 
 
B. 單通道跨層設計 – Multiple Rate and Power Selections (MRPS) Algorithm 
B.1 系統環境假設 
1. 網路中所有節點間完美同步。 
2. 對稱通道。 
 
B.2 MRPS 的 MAC 層架構: MRPS-TDMA 
將時間軸切割為時間長度相同的超級訊框(superframe)，每個超級訊框中包含了一個
時間長度固定的控制訊框(control frame)和一個時間長度固定的資料訊框(data frame)(如
圖六)，將資料訊框切割成 m 個相同時間長度的資料時槽(data slot)，並也將控制訊框切割
成 m 個相同時間長度的控制時槽，但一個資料時槽的時間長度大於一個控制時槽的時間
 12 
 
傳送相關訊息，每個控制時槽又切割成 n 個微時槽(mini-slot)，以下詳細介紹所要傳送的
控制訊息及傳送方法。 
 
首先介紹控制訊框交換訊息的機制，有別於以往的系統架構，此系統的控制訊框中
是讓已經規劃為傳送端或接收端的節點傳送控制訊息用，並非讓節點來競爭通道，且每
個資料時槽有其相對應的控制時槽，因此在控制訊框中傳送訊息是免競爭(contention-free)
式的。 
 
在控制訊框中所傳送的控制訊息包含兩種涵義：1) 已規劃為傳送端的節點通知其他
節點：自己傳送資料時所要使用的功率（在相對應控制時槽中的第一個微時槽中傳送）；
2) 已規劃為接收端的節點通知其他節點：在不影響到自己成功接收訊息的情況下還能承
受的干擾為何(在相對應控制時槽中的第二個微時槽到第 n 個微時槽中任選一個微時槽傳
送)。控制訊框傳送機制如下：  
在控制訊框中，每個控制時槽又細分為 n 個微時槽，其中第 1 個微時槽是讓已經規
劃要傳送資料的節點來傳送控制訊息，例如節點 A 規劃在資料時槽 s 要傳送資料，則節
點 A 必須在控制時槽 s 的第一個微時槽中發送控制訊息；而其他的微時槽是讓已經規劃
要接收資料的節點來傳送控制訊息，例如節點 B 規劃在資料時槽 s 要接收資料，則節點
B 必須在控制時槽 s 的第 2、3 微時槽中任意選取一個微時槽來發送控制訊息。 
在此系統中所使用的控制訊息為干擾訊號(jamming signal)，由於所要通知別人的訊息
只與功率有關，利用此特性，將發送干擾訊號所使用的功率設定為所要通知其他節點的
功率值，例如:節點 A 已規劃在資料時槽 s 要以功率 P 傳送資料，則節點 A 在控制時槽 s
的第一個微時槽必須發送干擾訊息，且傳送此干擾訊息所使用的功率為 P；若節點 B 已
規劃在資料時槽 s 接收資料，根據節點 B 在控制時槽 s 的第一個微時槽所量測到的功率
值，可換算出在不影響到成功接收資料的前提下還可承受多少干擾功率，假若還可承受
干擾功率值為 I，則節點 B 在控制時槽 s 的第 2、3 微時槽中任意選取一個微時槽來發送
干擾訊息，且傳送此干擾訊息所使用的功率為 C/I，其中 C 為一個常數值，且系統中所有
 14 
 
資料時槽 s 接受訊息時，就可以換算出傳送者必須使用多大的功率，節點 E 才能成功的
接收到資料。 
 
Case 3. 假設節點 B 已經規劃要在資料時槽 s 接收訊息，因此節點 B 必須在控制時槽 s 的
第 2、3 微時槽中任意選取一個微時槽來傳送發送干擾訊息 
節點 B 在資料時槽 s 中規劃要接收，因此在控制時槽 s 的第 1 個微時槽不需要傳送
任何訊息，只需要接收訊息，此時節點 B 可量測到網路上在資料時槽 s 中所有規劃要傳
送資料時對自己所造成的干擾值，因此可以換算出在不影響自己成功接收資料的情況下
還可承受的干擾值，假設還可承受的干擾值為 I，則節點 B 在控制時槽 s 的第 2 個或第 3
個微時槽使用功率 C/I 來傳送干擾訊息。節點 E 由於尚未規劃要在資料時槽中接收資料，
因此在控制時槽 s 的第 2 個和第 3 個微時槽不需要傳送任何訊息，只需要接收訊息，此
時節點 E 所量測到的功率值為 C/I * G(B,E)，先將所量測到的功率值除以 C 可得 1/I * 
G(B,E)，因此節點 E 就將此功率值視為自己在資料時槽 s 中最大可以使用的傳送功率值，
若節點 E 之後想規劃在資料時槽 s 傳送訊息時，則所規劃要傳送資料的功率不可大於 I/ 
G(B,E)。 
 
Case 4. 假設節點 B 和節點 D 已經規劃要在資料時槽 s 接收訊息，因此節點 B 和節點 D
必須在控制時槽 s 的第 2、3 微時槽中任意選取一個微時槽來傳送發送干擾訊息 
節點 B 和節點 D 在資料時槽 s 中規劃要接收，因此在控制時槽 s 的第 1 個微時槽不
需要傳送任何訊息，只需要接收訊息，此時節點 B 和節點 D 可量測到網路上在資料時槽
s 中所有規劃要傳送資料時對自己所造成的干擾值，因此可以換算出在不影響自己成功接
收資料的情況下還可承受的干擾值，假設節點 B 還可承受的干擾值為 I1，節點 C 還可承
受的干擾值為 I2，節點 B 和節點 D 會各自任意選擇控制時槽 s 的第 2 個或第 3 個微時槽
來傳送控制訊息，而節點 B 使用功率 C/I1 傳送干擾訊息，節點 D 使用功率 C/I2 傳送干擾
訊息，假若節點 B 和節點 D 使用不同的控制微時槽傳送干擾訊息，則節點 E 所量測到的
功率值分別為 C/I1 * G(B,E)和 C/I2 * G(D,E)，將所量測到的功率值除以 C 就是節點 E 在
 16 
 
的接收端） 
   4)  節點 B 在資料時槽 s 中規劃要接收資料（節點 A 為其已規劃 
的傳送端） 
   5) 節點 E 在資料時槽 s 中尚未規劃要傳送或接收 
 
節點 B 在控制時槽 s 的第 1 個微時槽中量測時槽的使用情形，由於節點 B 知道訊號
雜訊比（SINR）和節點 A 所傳送到節點 B 的功率，因此節點 B 可計算出還可承受的干
擾值為何，假設節點 B 還可承受的干擾值為 I，使用功率 C/I 傳送干擾訊息，節點 E 藉由
量測到的干擾訊息功率值為 G*C/I，假若節點 E 要規劃在資料時槽 s 為傳送者時，節點 E
傳送資料時所使用的功率必須小於等於 I/G。 
 
 
                   
   還可承受的干擾值 = I 量測到的功率值 = G*C/I 
   干擾訊息的功率值 = C/I 可使用的功率值 = I/G 
 
假若節點 E 要在資料時槽 s 中規劃為傳送，則傳送資料的功率必須小於等於 I/G，
若節點 E 使用功率 I/G 傳送資料訊息，則對節點 B 的干擾為 I，恰等於節點 B 還可承受
的干擾值，因此節點 E 的傳送並不會影響的節點 B 的接收。 
 
                    
    傳送資料的功率值 = I/G            所受到的干擾值 = I 
 
 
即使在不知道通道增益的情況下，此系統仍然可以正確的規劃傳送端傳送資料所使
 
 
 18 
 
傳送封包，而一般系統中已預先定義只要在節點的 550 公尺（載波檢測範圍，carrier sense 
range）內無其他節點正在傳送資料，此節點就判定通道是沒有其他節點正在使用，因此
就可以傳送或接收資料，若距離節點 550 公尺內有其他節點正在使用，則此節點就判定
通道目前有其他節點正在使用，因此目前還不能傳送或接收資料。若是在分時多工擷取
的協定中，一般系統中都是將傳送範圍（transmission range）定為 250 公尺，所有節點要
傳送資料前需要通知其他節點何時要使用通道，而通道使用時間是帶在控制訊息中，利
用廣播（broadcast）的方式通知鄰近的節點，因此必須是在傳送端（傳送控制訊息的節
點）傳送範圍內的節點才能正確的獲得這些訊息，但在有些情況中，雖然節點在傳送端
（傳送控制訊息的節點）的傳送範圍外，因此無法成功接收到通道的使用情形，但並不
表示不會對正在接收資料的節點造成干擾，一旦干擾值過大，就會造成接收失敗。 
 
由以上的敘述可得知，不論傳送者和接收者間的距離，也不論資料傳送率為何，只
要距離在傳送者或接收者的特定範圍內皆不可同時被網路上的其他節點規劃傳送和接
收， 這樣的限制有時會太嚴苛，有時還是會造成碰撞發生，如表二。 
 
節點 A 為傳送者，節點 B 為接收者，節點 A 和節點 B 互為傳送-接收端，節點 C 為
想要規劃傳送的節點。表二中所表示的意思是，當已建立的連結其傳送端與接收端距離
為 dAB，新的連結其傳送端與已建立之接收端節點 B 至少需離 dBC以上，才可被建立。 
Case 1. 節點 A 和節點 B 間的距離 
Case 2. 一般系統中節點 B 和節點 C 的距離 
Case 3. 此系統中節點 B 和節點 C 的距離（6Mbps） 
Case 4. 此系統中節點 B 和節點 C 的距離（54Mbps） 
 
 
 
 20 
 
題，因此在此系統中每個節點都需要兩個半多工的收發機，其中一個收發機根據傳送接
收的排程（schedule），可在 N-1 個資料通道上任意做切換，另一個收發機固定在控制通
道上，隨時記錄其他 N-1 個資料通道的使用情形，這是由於在無線環境中，即使自己不
是資料封包預定的接收者，但只要是在傳送資料節點的傳送範圍內都可以成功接收資料
封包，且由於每個節點都有兩個半多工的收發機，因此不論節點是否有在資料通道上傳
送或接收訊息，在控制通道上依舊可以成功的接收到其他節點所傳送的控制訊息。 
圖八為此系統的運作方式，圖中，編號為 0 的通道（Channel 0）為系統預設的控制
通道，控制通道只能用來交換控制訊息（control message），編號為 1、2、3 的通道（channel 
1.2.3）為資料通道，資料通道專門用來傳送接收資料。假設節點 A 有資料要傳送給節點
B，首先，節點 A 必須先在控制通道上傳送 RTS（Request To Send）給接收端節點 B，在
RTS 中會帶有目前沒有節點在使用的資料通道，假若有多個資料通道都沒有其他節點正
在使用，則選擇編號最小的資料通道帶在 RTS 中，若節點 B 目前沒有在資料通道上傳送
和接收訊息，且節點 B 也判定節點 A 所選的資料通道目前沒有其他節點正在使用，則節
點 B 會回傳 CTS（Clear To Send）給節點 A，另外，在 RTS 和 CTS 中都帶有 NAV（Network 
Allocation Vector），用來通知鄰近的節點通道要被佔用的時間長度，當節點 A 接收到節
點 B 所傳送的 CTS 後，節點 A 和節點 B 負責傳接收資料的收發機會切換到選定的資料
通道上傳接收資料，而網路中其他節點假若也有資料要傳，則按照以上的步驟來做協調。
若節點 A 有資料要傳送給節點 B，但所有的資料通道都已經被其他節點佔用時，節點 A
必須等到有資料通道淨空時才可以按照以上的步驟來做協調。文獻[12]可歸類為此種作法
的 MAC protocol。 
此系統的優點是網路上的節點不需要同步，缺點是每個節點都需要兩個半多工的收
發機，這會導致系統需要較高的成本，且因為有兩個半多工的收發機，因此也會消耗更
多的功率，對於有電池壽命限制的裝置來說是一大缺點，另外，由於系統架構中需要有
一個專門用來交換控制訊息的通道，因此也會導致頻譜效能降低。 
 
 22 
 
集中在通道 0，其餘通道在這段時間內都無其他節點在使用，因此這個系統架構往往會造
成頻譜效能下降。文獻[1]可歸類為此種作法的 MAC protocol。 
 
 
圖九、 Split Phase Approach 系統架構圖 
 
C.1.2.1 TMMAC 
文獻[3]是改進 Split Phase Approach 所提出的方法，我們稱此方法為 TMMAC，接下
來將介紹 TMMAC 的系統架構與運作方式。 
在 TMMAC 中，每個節點有一個半多工的收發機，假設系統有 N 個通道，每個通
道都可用來做資料的傳送和接收，但時間週期性的分為 ATIM Window 和 Communication 
Window，ATIM Window 的功用就如同剛剛所介紹的控制時期，只要在 ATIM Window 內，
所有節點都必須跳到系統預設的通道，凡事要在資料交換狀態中要傳送接收資料訊息，
都必須在這段時間內交換控制訊息，而 Communication Window 的功用就如同剛剛所介紹
的資料交換時期，專門用來做資料的傳接收，而跟 Split Phase Approach 主要的差別就在
於 TMMAC 中的 Communication Window 並非始用 IEEE 802.11 DCF 的方式來競爭通道，
而是將 Communication Window 中切割成大小相同的時槽（time slot），因此在 ATIM 
Window 中交換訊息時就已選定好要在哪一個通道的哪一個時槽做資料的傳接收，由於控
制訊息交換時，只要是在傳送範圍內的節點在沒有干擾的情況下也都可以成功的接收到
控制訊息，就可以由控制訊息中得知節點所選用的通道與時槽，因此在選用時槽時只要
是在傳送範圍內的節點已選用的時槽就不可以再被其他節點所使用，而這些時槽的使用
訊息每經過一個週期就會更新一次，每個週期是由一個 ATIM Window 和一個
Communication Window 所組成，因此只要節點有資料要傳送，就必須在每輪的 ATIM 
 24 
 
 
 
圖十、 Common Hopping Approach 系統架構圖 
 
C.1.4 Multiple Rendezvous MAC Protocol 
假設系統有 N 個通道，每個通道都可用來做資料的傳送和接收，每個節點有一個半
多工的收發機，所有節點根據自己的跳躍圖形來決定目前所使用的是哪一個通道，但有
別於 Common Hopping 的系統架構，在此方法中每個節點的跳躍圖形是利用亂數產生器
根據每個節點自己的 MAC 位址所產生的，並可藉由互相交換訊息得知鄰近節點這個時
間點和下個時間點的跳躍圖形。網路上所有的節點在固定時間間隔後，只要沒有在傳送
或接收資料，就會根據跳躍圖形來切換通道，但只要有資料要傳送，傳送端就會判斷是
否要傳送，而是否要傳送是根據機率值來判斷的，若不要傳送則留在目前的通道上，若
要傳送則跳到接收端跳躍圖形所指的通道上和接收端協調，假若協調成功，傳送端和接
收端就會持續在此通道上交換訊息，直到訊息交換完畢後才又各自根據自己的跳躍圖形
切換通道，假若協調失敗，傳送端會跳回自己目前跳躍圖形所指的通道上。 
 
圖十一為此系統的運作方式，在時間點一開始的時候網路上所有節點都沒有資料要
傳送，因此每個節點根據自己的跳躍圖形在不同的通道上做切換，當節點有資料要傳送
時，由於節點知道接收端目前所在的通道（並非接收端實際上所在的通道，而是根據接
收端的跳躍圖形所對應到的通道），因此傳送端會先跳到接收端的通道上傳送 RTS，假若
接收端目前是在此通道上（接收端沒有跳至其他通道上傳送或接收資料），且成功收到
RTS，接收端就會回傳 CTS 給傳送端，若傳送端有成功收到 CTS 則開始傳送資料，當接
收端成功接收完資料後，接收端回傳 ACK 給傳送端， 在一連串資料交換的過程中，傳
 26 
 
Lower spectrum efficiency X X X   
Contend on the same channel    X  
Hidden node problem    X X 
Did not combine with routing protocol    X X 
No QoS support X X  X X 
表四、 各系統架構比較表 
 
 
C.2 多通道系統架構 
我們將上述的單通道系統發展成多通道系統，並且希望此系統能解決目前在多通道
環境中所會遭遇到的問題，首先，先舉出我們設計此系統的目標，再來描述我們的系統
環境，最後詳細的描述我的系統架構的設計流程。 
 
 
C.2.1 設計目標 
此系統設計目標： 
1. 能滿足 QoS 的需求 
2. 每個節點只需要一根半多工的天線 
3. 不需要額外的通道來交換控制訊息 
 
C.2.2 系統環境 
在這個部份中，將介紹我們所提出的系統及演算法，在詳細介紹協定前，先列舉出
我們所設定的環境特性： 
1. 假設有 N 個通道，通道頻寬皆相等，通道所使用的頻帶彼此間無重疊
（non-overlapping），因此同一時間使用不同通道並不會互相造成干擾。 
 28 
 
資訊，因此當 jamming signal 發生碰撞（此為針對已規劃為接收端所傳送出的 jamming 
signal），使得接收端所量測到的功率值並非分別收到的功率值時，也不會造成已規劃好
的連結上有接收失敗的情形，因此已規劃為接收端的節點在傳送 jamming signal 時只需要
在控制微時槽[2,n]中任意選取一格來傳送 jamming signal，因此在交換控制訊息時並不需
要競爭。 
 
為了提高頻譜效能，因此將系統架構更改如下圖，不同通道的資訊分別分散到各自
通道的控制訊框中去傳送，因此在此系統中，上一個系統不能使用的頻譜在這個系統中
是可以使用的，且在此系統中控制訊框所佔用的時間為上一個系統控制訊框所佔用時間
的 1/4（在此所舉的例子通道數為 4 個），降低傳送控制訊息所佔用時間的比例，可視為
傳送資料的時間比例提高，因此可提高系統的吞吐量（throughput）。 
 
 
圖十三、 並列式通道 
 
由於在控制訊框中所傳送的訊息是要讓 Routing Protocol 使用，因此在規劃新的連結
前，要規劃為傳送端的節點必須要先獲得所有通道上的使用情形，才能在不影響現有的
連結下規劃新的連結，但在此系統中，不同通道中只要是對應到相同時間的資料時槽，
都是同一個時間點在相對應的控制微時槽中傳送 jamming signal，因此節點就必須要經過
 30 
 
就必須要依序去蒐集不同通道的使用資訊，並量測所收到 jamming signal 的功率值，而這
些蒐集到的資訊是建立新的連結時所要使用的資訊。 
此系統架構所會遭遇到的問題： 
1. 選用某些資料時槽，而造成無法選用其他某些資料時槽 
2. 有通道數目的上限 
 
C.3 資料時槽的選擇 
資料時槽的選擇上有別於以往 CSMA/CA，在一般 CSMA/CA 系統中，要傳送資料
前傳送端必需在通道為淨空的情形下傳送 RTS 通知接收端，當接收端有成功接收到 RTS
且判定通道目前沒有其他節點在使用，接收端就會回傳 CTS，當傳送端有成功接收到 CTS
且判定通道目前沒有人使用就會開始傳送資料，由於在 RTS 和 CTS 的傳送過程中帶有
NAV，因此在傳送端和接收端傳送範圍內的節點只要有收到 RTS 或 CTS 就知道通道有其
他節點要使用，因此節點必須等到通道變為淨空時才可以使用，在一般系統中都假設傳
送範圍為 250 公尺，因此只要在傳送端和接收端 250 公尺範圍內的節點，在成功接收到
RTS 或 CTS 後就必須保持 silent，直到傳送端和接收端資料傳送完畢後所有保持 silent 的
節點才能再度開始競爭通道的使用權，且在傳送端 carrier sense 範圍內的所有節點也必須
保持 silent，直到傳送端和接收端資料傳送完畢後所有保持 silent 的節點才能再度開始競
爭通道的使用權。 
 
而在我們系統中，資料時槽的選擇方法跟 CSMA/CA 系統中所限制的使用方法是不
同的，由於在建立新的連結前節點必須去不同的通道上聽取 jamming signal，因此可以獲
得在不同通道不同資料時槽中的使用資訊，通道使用資訊包括：假若要傳送資料還可以
使用的功率以及假若要接收資料會承受多大的干擾，在建立新的連結時，要規劃為接收
端的節點就會根據傳送端傳送資料所可以使用最大的功率以及接收端自己所承受的干擾
去判斷是否可以成功傳接收，由於每個資料時槽中傳送端可使用的功率和接收端所承受
的干擾都不相同，因此接收端是利用 SINR 值去判斷是否可以成功接收到資料，並非使
 32 
 
control subframe data subframe
superframe
m control slots m data slots
Channel 3
Channel 2
Channel 1
Channel 4
 
圖十五、 被 block 的資料時槽(一) 
 
第二類 blocking 為選擇的資料時槽對應到另一個通道的控制時槽，如下圖，圖中較
大的粗框格為某傳送接收對所選定用來傳接收的資料時槽，而較小的粗框格為相對應的
控制時槽，在較大粗框格中節點要傳接收資料，因此同一個時間其他通道上的資料時槽
皆不可再被此傳送接收對中的任一個節點拿來規劃為傳送或接收，但由於同時對應到通
道 1 的控制時槽，因此在通道 1 所對應到的控制時槽也無法使用，間接的使通道 1 的某
些資料時槽都被 block 了，而在較小的斜線格中節點要傳送 jamming signal，因此同一個
時間其他通道上的資料時槽皆不可再被此節點規劃為傳送或接收。 
 
 
 
圖十六、 被 block 的資料時槽(二) 
 
 34 
 
 
圖十七、 多通道系統圖 
 
C.3.1 時槽選擇流程圖 
為了減少資料時槽被 block，因此我們在選用資料時槽時加入了一些選擇方法，而
選擇資料時槽的流程圖如下圖。在選擇資料時槽時我們並非一格一格選，而是一次選一
個 group，group 的定義如上一小節所介紹的，雖然每一個 group 中所包含的資料時槽不
同，但在選擇 group 時，是選擇最多還可以使用的資料時槽，接著我們先定義何謂還可
以使用的資料時槽，首先，找出系統中還沒有被 block 的資料時槽且尚未被規劃要傳接收
的資料時槽，而將這些資料時槽所承受的干擾取平均，若在某資料時槽中所承受的干擾
值大於平均的干擾值，則將此資料時槽視為不可以使用的資料時槽，雖然目前不可使用，
但並不表示之後不能被使用，因為此資料時槽並未被規劃要用來傳接收也沒有被 block；
若在某資料時槽中所承受的干擾值小於平均的干擾值，此資料時槽即為還可以使用的資
料時槽，而我們稱還可以使用的資料時槽為 valid 的資料時槽。 
 
首先，當有 application 來時，傳送端會通知自己想要通訊的對象，我們稱要通訊的
對象為接收端，而接收端會去找一個滿足傳送端 QoS 需求的資料時槽，若有找到可滿足
QoS 需求的資料時槽，接收端就會通知傳送端要使用哪一個通道的資料時槽，則此
application 可視為一條新的被建立完成的 flow；若沒有找到可滿足 QoS 需求的資料時槽，
 36 
 
Choose a data slot
At least one chosen group?
At least one data slot that 
fulfills QoS in the chosen 
groups?
Calculate the average 
interference of valid slots
Calculate the number of available 
data slot in each group
Select the group that has the maximum 
number of available data slot
Finish
Block
Yes
YesYes
No
No
No
 
圖十八、 流程圖(一) 
 
 
 
圖十九、 流程圖(二) 
 
 
 38 
 
C.5  MC-MRPS 系統效能 
C.5.1 參數設定 
在子計畫四中所使用的模擬環境設定如下：通道環境為 two ray ground model，意即
通道增益與傳送端跟接收端間距離的 4 次方成反比。系統中有 4 個 non-overlapping 的
channel。每個 superframe 中包含有 64 個資料時槽和 64 個控制時槽，1 個資料時槽的時
間長度等於 8 個控制時槽的時間長度，因此每個 superframe 的時間長度可看做是 72 個資
料時槽的時間長度，模擬範圍為 1000 公尺乘以 1000 公尺，共有 100 個 node，所有 node
隨機分佈在 1000 公尺乘以 1000 公尺的模擬範圍內，在模擬期間每隔一個 superframe 就
會有一個新的 application 要被建立，而每個 application 的 source 和 destination 是從 100
個 node 中 random 選取的，但 destination 必須是在 source 端傳送範圍內的 node，當系統
剩餘的資源能滿足 application 的需求時，application 才可以被建立，若系統剩餘的資源無
法滿足 application 時，此 application 就無法被建立；而 application 建立後，source 端將持
續在每個 superframe 中傳送一個資料封包，直到模擬結束，資料封包為固定大小，其大
小恰等於一個資料時槽的時間。 
 
模擬中所使用的參數如下： 
Two ray ground model            41ddPr   
Range 1000m * 1000m 
Number of Node 100 
表五、 模擬參數表(一) 
 
 
Number of Channel 4 
Number of Data Slot 64 
Number of Control Slot 64 
 40 
 
Power (mW) 200    100     50     25    12.5 
54 Mbps 158    133    112     94     79    (m) 
24Mbps 266    233    188    158    133    (m) 
6Mbps 422    354    298    250    210    (m) 
表八、 傳送功率與傳送距離對照表 
 
此子計畫中，我們所提出的方法將跟 TMMAC 做比較，在模擬中我們忽略掉不同頻
率間切換所需要的時間，另外，在 TMMAC 中，為了方便模擬，我們省略一些原系統的
設定，1)由於 application 被建立之後在每個 superframe 中都必須要傳送封包，因此在
TMMAC 中只有當 application 來的時候，傳送端才需要在 ATIM Window 中傳送控制訊息
給接收端，2)ATIM Window 的大小是固定的，且所占用的時間與我們所提出的方法中控
制訊框所占用的時間相同，3)控制訊框中不會發生碰撞，因此只要在傳送範圍內的節點
都能完全成功的接收到控制訊息，4)在 ATIM Window 中所傳送的控制訊息是使用系統最
低 rate（6 Mbps）和系統最大可使用的功率（200 mW），由 receiver sensitivity 可推得傳
送距離約為 422 公尺，5)接收端成功接收到資料後不需要回傳 ACK 給傳送端。 
 
C.5.2 模擬結果 
在模擬中，我們將所提出的多通道系統分為六種情形與 TMMAC 做比較，在
TMMAC 中傳送訊息所使用的功率皆為系統最大可使用的功率值（200mW），而在我們
的方法中我們加入了功率的調整和資料時槽選擇的方式，詳細模擬設定如下：首先，先
說明功率的設定，1) Fixed Power，在此方法中節點傳送資料都是使用系統最大可使用的
功率值（200mW）；2) Discrete Power，在此方法中節點傳送資料時所使用的功率是有選
擇性的，在我們模擬中有五種功率可以選擇，而功率的選擇方式是考慮網路上所有正在
使用的節點後，選擇最大還可使用的功率值，由於節點在傳送時有可能會造成其他節點
被干擾，因此節點可傳送的功率並非任意值；3) Discrete Power with Adjustment，在此方
 42 
 
0 500 1000 1500
0
100
200
300
400
500
600
700
800
Number of Flow(s)
Th
ro
ug
hp
ut
 (M
bp
s)
 
 
Discrete Power Adjustment with Slot Assignment
Discrete Power with Slot Assignment
Fixed Power with Slot Assignment
TMMAC
 
圖二十一、 系統效能圖(54Mbps) 
 
0 500 1000 1500
0
50
100
150
200
250
300
350
400
450
500
Number of Flow(s)
N
um
be
r o
f F
lo
w
(s
)
 
 
TMMAC
 
圖二十二、 Number of Dropped Flow (TMMAC) 
 
 44 
 
在同樣的情形下，我們比較不同資料時槽的選擇方式對系統效能的影響。在圖中是
當節點傳送資料時所使用的功率是有五種功率值可選擇，而功率的選擇方式是考慮網路
上所有正在使用的節點後，選擇可以滿足此 QoS 的最小功率值，意思是在接收端可以成
功的接收到資料的前提下盡可能的壓低傳送端的傳送功率值，比較資料時槽由最後一格
往前選的方式與根據 C.3 的方式選擇資料時槽，我們發現用哪一種資料時槽選擇的方式
對系統的效能影響不大，這可能是因為每個節點在網路上所建立的 flow 數沒有太多，因
此節點不論是使用何種選擇節點方式都可以選擇到滿足 QoS 需求的節點。而在其他不同
功率選擇的方法中也顯示相同的模擬結果。 
   
0 500 1000 1500
0
200
400
600
800
Number of Flow(s)
Th
ro
ug
hp
ut
 (M
bp
s)
 
 
Discrete Power Adjustment
with Slot Assignment
Discrete Power Adjustment
 
圖二十三、 不同資料時槽選擇方法比較圖(Discrete Power Adjustment) 
 
       
0 500 1000 1500
0
200
400
600
800
Number of Flow(s)
Th
ro
ug
hp
ut
 (M
bp
s)
 
 
Discrete Power
with Slot Assignment
Discrete Power
 
圖二十四、 不同資料時槽選擇方法比較圖(Discrete Power) 
 46 
 
與接收端距離較近時，接收端收到資料的功率值也較大，因此可承受的干擾也較大，但
當當傳送端與接收端距離較遠時，接收端收到資料的功率值也較小，因此可承受的干擾
也較小，因此也會有控制訊息保護不到的部分，因此還是會有碰撞發生而導致資料被 drop
掉。 
 
0 500 1000 1500 2000 2500 3000
0
50
100
150
200
250
300
350
400
450
500
Number of Flow(s)
Th
ro
ug
hp
ut
 (M
bp
s)
 
 
Discrete Power Adjustment with Slot Assignment
Discrete Power with Slot Assignment
Fixed Power with Slot Assignment
TMMAC
 
圖二十六、 系統效能圖(24Mbps) 
 
表十為資料傳送率為 54Mbps 中，不同方法的 throughput、link 的平均長度以及平均
傳送所使用的功率，其中 Method 1.為 Discrete Power Adjustment with Slot Assignment，
Method 2.為 Discrete Power with Slot Assignment，Method 3.為 Fixed Power with Slot 
Assignment，Method 4.為 TMMAC。 
 
 
 
 
 
 48 
 
四、參考文獻 
[1] J. So and N. Vaidya, “Multi-Channel MAC for Ad Hoc Networks: Handling 
Multi-Channel Hidden Terminals Using A Single Transceiver,” ACM MobiHoc, 2004. 
[2]  M. Zannoth, T. Ruhlicke, and B.-U. Klepser, “A Highly Integrated Dual-Band Multimode 
Wireless LAN Transceiver,” IEEE J. Solid-State Circuits, vol. 39, no. 7, pp. 1191-1195, 
July 2004. 
[3] J. Zhang, G. Zhou, C. Huang, S. Son, and J. A. Stankovic, “TMMAC: An Energy Efficient 
Multi-Channel MAC Protocol for Ad Hoc Networks,” IEEE ICC, 2007. 
[4] Hoi-Sheung Wilson So, Jean Walrand, Jeonghoon Mo, “McMAC: A Parallel Rendezvous 
Multi-Channel MAC Protocol”, IEEE WCNC, March 2007. 
[5] T. Lin and J. Hou, “Interplay of Spatial Reuse and SINR-Determined Data Rates in 
CSMA/CA-Based, Multi-Hop, Multi-Rate Wireless Networks,” in Proc. IEEE INFOCOM, 
May 2007, pp. 803–811. 
[6] W.-H. Tam, Y.-C. Tseng, “Joint Multi-Channel Link Layer and Multi-Path Routing Design 
for Wireless Mesh Networks, ” in IEEE INFOCOM, 2007. 
[7] C. Corderio and K. Challapali, “C-MAC: a cognitive MAC protocol for multichannel 
wireless networks,” Proc. IEEE Symposium on New Frontiers in Dynamic Spectrum 
Access networks, April 2007. 
[8] J. Mo, H. -S. W. So, and J. Walrand, “Comparison of Multichannel MAC Protocols,”  
IEEE Trans. Mobile Comp., vol. 7, no. 1, pp. 50-65, Jan. 2008. 
[9] J. Yee and H. Pezeshki-Esfahani, “Understanding wireless LAN performance trade-offs,” 
Nov. 2002, CommsDesign.Com. 
[10] A. Tzamaloukas and J. Garcia-Luna-Aceves. “Channel Hopping Multiple Access with 
Packet Trains for Ad Hoc Networks”. In Proc. IEEE Mobile Multimedia Communications 
(MoMuC ’00), Tokyo, 2000. 
[11] W.-H. Tam and Y.-C. Tseng, “Joint Multi-Channel Link Layer and Multi-Path Routing 
國科會補助專題研究計畫項下出席國際學術會議心得報告 
                                  日期： 100 年 3 月 23 日 
一、參加會議經過 
本次會議是在韓國 Phoenix Park 舉辦的 ICACT2011 (International Conference on Advanced 
Communication Technology)國際研討會。本次會議的時間為 2011 年 2 月 13 日至 2 月 16 日，內容包含
二十二個大主題，分別如下： 
 
 1. BCN, NGN, NGI, IPv6, Future Internet 
 2. Mobile Communication, WiMAX 
 3. Wireless Communication, Satellite Communication 
 4. Digital Broadcasting, DMB, DVB, DTV, CATV 
 5. RFID/USN(Ubiquitous Sensor Network) 
 6. Network Robotics 
 7. ITS, LBS, Telematics 
 8. Digital Home Network, Power Line Communication 
 9. Broadband Satellite and High Altitude Platform Station (HAPS) 
 10. Information Security 
 11. Game, Multimedia & Content, Authoring tools 
 12. IPTV, Internet Telephony (VoIP, MoIP), Smart phone, Web Phone 
 13. Network Security, Management, Operation, and Maintenance 
 14. Optical Network, Packet Transport Network 
 15. Open Programmable Network, Active Network 
 16. System Engineering, Software Engineering 
 17. Groupware, ERP, BPM, Web2.0, Future Web 
 18. GRID, Cloud Computing, Distributed Computing 
 19. e-Governance, ITA/EA, ISP/BPR, e-Government, e-Learning and e-Health 
 20. e-Commerce, Mobile Commerce 
 21. SOA, Service Science 
 22. Low Carbon & Green Growth Policy, System, Service, and Tehnology 
 
計畫編號 NSC 97-2221-E-006 -086 -MY3 
計畫名稱 資源限制及通道感知之無線通訊網路的研究- 
子計畫四:無線網路資源感知管理及跨層協定之研究與設計 
出國人員
姓名 林杰龍 
服務機構
及職稱 
成功大學電腦與通信工程研究所 
        博士生 
會議時間 100 年 2 月 13 日至100 年 2 月 16 日 會議地點 
韓國 Phoenix Park 
會議名稱 The 13
th International Conference on Advanced Communication Technology
  (ICACT 2011) 
發表論文
題目 
A Robust Ranging Detection with MAI Cancellation for OFDMA Systems
二、與會心得 
本次與會的經驗，對我而言是相當珍貴的，由於是第一次參加國際會議又是獨自前往，
因此很多地方只能倚靠自己，除了了解到會議的進行方式外，在學術上也吸取到一些新的
Idea，對於後續論文的研究方向有莫大的幫助。此次 IEEE ICACT 所選定的主題是 Smart 
service innovation through mobile interactivity，由於技術日新月異，進步的腳步相當
地快速，用戶對頻寬的需求增加不少，服務的種類也急速增加，在未來的網路裡必須能更加
聰明地因應網路環境的變化，因此，在本次的會議主題中包含了相當廣泛的內容，從無線通
訊、RFID、數位電視廣播、光纖通訊到多媒體，皆是網羅的重點，共有來自 34 個國家、317
篇論文發表。 
 
其中最感興趣的是在 Cooperative Communication 部分，在實際的應用中，系統裡會包
含許多的用戶端設備，頻寬資源的分配，以往都是採各自獨立的方式配與，而目前主流的分
配方式便是採用多天線技術，利用其 spatial diversity，讓較多的用戶共享相同的頻帶，最
近的趨勢皆以 relay system 的方式探討 iterative diversity 的效能；其他學者報告的題目
也相當多元，有戰術網路中控制訊息的 Routing、印度 WiMAX 涵蓋分佈的實務分析、
Cooperative communications 中功率分配及結合 MIMO Relay 系統的錯誤控制編碼效能分析
等，讓我獲益良多，藉由與會的刺激與薰陶，更加強了自己在研究領域上的信念。 
 
最後由於參與的人員來自各個國家，因此在英語的口音方面，對自己也造成一些困擾，
這是接下來的時間裡，需要再好好訓練的地方，整體而言，定期的參與國際會議，可以多聽
聽專家的意見和思考邏輯，也能夠拓展自己的視野，這是給自己未來定下的一個期許。 
 
三、考察參觀活動(無) 
四、建議 
參加國際學術會議事是提升學界研究人員研究視野及國際能見度的佳徑，目前規定需
有論文發表方能出國參與，不知是本校(成大)單行規定或國科會全國性規定，本人建議應放
寬讓未有論文被接受者亦可參與。 
 
五、攜回資料名稱及內容 
會議論文集光碟片  
 
會議論文發表和與會確認文件 
 
會議時程表： 
 
A Robust Ranging Detection with  
MAI Cancellation for OFDMA Systems 
 
Chieh-Lung Lin ab, Szu-Lin Su a 
a Institute of Computer and Communication Engineering, Department of Electrical Engineering,  
National Cheng Kung University, Tainan City, Taiwan, R.O.C 
b Telecom Technology Center, Kaohsiung County, Taiwan, R.O.C 
reed@pcnw3.ee.ncku.edu.tw, ssl@ee.ncku.edu.tw 
  
 
Abstract— During the initial uplink synchronization, the BS 
communicates with MSs to adjust timing and power offsets. The 
common method to achieve the objective is to use the orthogonal 
code in the frequency domain for OFDMA systems. Due to the 
timing offset, the orthogonality of codes is decayed and multiple 
access interference (MAI) becomes serious. In order to decrease 
this influence, we proposed the idea which combines the channel 
estimation and the multiuser detection. On the strength of 
cancelling the MAI step by step, ranging users can be detected 
one by one. The proposed idea is robust to achieve a significant 
improvement on the ranging detection rate over the multipath 
Rayleigh fading channel.  
 
Keywords— IEEE802.16e, ranging, OFDMA, uplink, multiuser 
ranging detection, timing estimation, power estimation. 
I. INTRODUCTION 
Ranging is the technology used to achieve the uplink 
synchronization on timing and power. Orthogonal codes used 
to identify ranging users are called ranging codes. Ranging 
users can be detected by the cross correlation method. 
Because of code orthogonality, it is possible to find out 
several ranging users at the same time. Due to many signals 
send from different locations, there are many kinds of channel 
conditions and round trip delays (RTD). The aggregated 
phenomenon makes the detection on the base station (BS) 
more complex. 
The regular ranging detection method is proposed by [1] 
and [2] over AWGN and multipath Rayleigh fading channels. 
They give the complete analysis on signal detection, timing 
estimation and power estimation. The paper [3] designs the 
good phase-shift orthogonal ranging code over the time 
domain. So the optimum detection threshold can be derived 
directly. Jianqiang Zeng and Hlaing Minn contribute on the 
MIMO ranging user detection very much. The timing offset 
estimation is simplified by the special ranging code 
arrangement. They also provide multiuser and multi-antenna 
diversity gains to achieve significant power saving for the 
subscriber stations [5] and [6].  
The proposed method uses the multiple access interference 
cancellation method to increase the detection probability. The 
same idea of MAI cancellation was adapted in the paper [7] 
but the proposed method uses different methods to realize it. 
[7] sees each multipath as one independent signal and use the 
successive interference cancellation (SIC) method to find out 
each recognized signal. By this way, the ranging detection rate 
can be improved very much. But the calculation complexity of 
correlation will grow up with the multipath number. In view 
of this, we propose one method that can prevent this situation 
to happen by focusing on one ranging user signal, not 
multipath. The more detail information will be stated in latter 
chapters.  Simulation results show this algorithm has better 
detection rate and higher precision on power and timing 
estimation than the conventional method and [7] over 
multipath Rayleigh fading channels. 
The rest of this paper is organized as follows. The system 
model is described in Section Ⅱ. Section Ⅲ focuses on the 
proposed method including multiuser detection, channel 
estimation, iterative amendment and power estimation. 
Section Ⅳ shows the simulation results and discussions. 
Finally we conclude the paper in SectionⅤ. 
II. SYSTEM DESCRIPTION 
We consider an uplink of an OFDMA system with N 
subcarriers. The ranging signals are transmitted on the ranging 
slot. One ranging slot occupies one ranging sub-channel in the 
frequency domain and 3 consecutive OFDMA symbols in the 
time domain. Each ranging subscriber station (RSS) has γR 
subcarriers and each data subscriber station (DSS) has γD 
subcarriers. One ranging slot contains NR RSSs and the other 
residual subcarriers belong to ND DSSs. 
One ranging code is selected randomly from a predefined 
code set as {C1, C2, …, CZ}, with Ci = [ci(1), ci(2), …, ci(γR)]T.  
ci is modulated by binary phase shift keying (BPSK) from the 
pseudonoise sequence. The frequency domain signal of i-th 
RSS is given by  
)())(()( ,,, mcAmXkX iRiRiRi                  (1) 
where Ai,R is the amplitude factor of i-th RSS. k and m are 
the subcarrier index and the ranging code bit index separately. 
The function v maps the ranging code bit index m into the 
subcarrier index k.  
Denote the N-point unitary inverse discrete Fourier 
transform (IDFT) of Xi,R by [xi,R(1), xi,R(2), …, xi,R (N) ]T. The 
signal of i-th RSS in the time domain is given by  
Here, we propose a simplified method to estimate the noise 
variance by meaning cross correlation values outside the 
deterministic sliding window for each ranging code.  
)1/()/)()(/)()((
1ˆ
2*1ˆ
0
2*2
,
,    wD Ldt Riidt Riii LDtRtRtRtR wwiwi    (17) 
where D = dmax+L and * means complex conjugate function.      
is the estimated noise variance of i-th RSS. Therefore, 
different RSS processes have different thresholds with 
different noise variances. 
When one RSS is detected, the ranging signal needs to be 
analysed to get the channel impulse response (CIR) by the 
channel estimation. After one ranging user’s CIR is 
determined, one ranging user signal can be cancelled from the 
previous residual signal. Until no RSS is detected, the 
procedure can be stopped. So the i-th residual signal Y(i) which 
has been cancelled (i-1) RSSs signals  can be described as 
1ˆ
)1(
1
)1()( ˆˆˆˆ
,1,1





 idiiii CHYSYY RiRi           (18) 
 

 
1)(2
12
/2)0( )()(
CPN
CPNn
CP
NknjenykY                    (19) 
where       is the (i-1)-th detected ranging signal and Y(0) is 
the original signal in the frequency domain. 
After cancelling one RSS, the residual MAI becomes 
smaller. The estimated noise variance will be close to the true 
AWGN. The threshold follows it and moves to an appropriate 
position. This improves the miss detection rate and the false 
alarm rate. 
B. Channel Estimation 
Since the multipath effect will result in the frequency 
selective channel, there is usually the pilot signal to estimate 
that. For the ranging detection, it is impossible to get the CIR 
directly, like the zero forcing when many RSSs transmit. Rely 
on observing the reason of the frequency selective effect. We 
try to find out each multipath signal. The main idea is similar 
to the successive ranging multiuser detection. 
In each channel estimation process, we only consider one 
desired ranging signal. The searching ranging timing is 
allocated between       and              . The cross correlation 
value      can be gotten from the signal )1)(( qiY . )1)(( qiY  means 
the i-th residual signal Y(i) cancels (q-1) multipath signals of i-
th RSS. According to equation (6), we can separate the desired 
user signal into several parts. Assume           , then the 
equation will be 
iRiRii CXHS ˆ,,                                                      (20) 
iRi
NddkjLNddkj CXeHeHH
L
RiRi
Ri
RiRi
RiRi
ˆ)( ,
/)ˆ(2)1(/)
ˆ(2)1()0(
)1(
,,
,
)1(
,,
,,
   
From above equation, we can find that the other multipath 
signals become interference to affect the cross correlation 
result. In order to lower this effect, we adopt the successive 
interference cancellation to calculate multipath amplitudes. 
Here, we use the orthogonality of PN codes to find the 
position and amplitude of each multipath signal. The CIR of 
q-th multipath can be gotten from )1)(( qiY  and presented as 
Rm
N
dmj
i
qiq R
q
Ri
Ri
emcmYH 

/))(ˆ))(((ˆ
1
ˆ)(2
)1)(()(
)(
,
,                
R
q
Ri
q
Ri dR /)ˆ( )(.)1(,                                                   (21) 
 
Figure 2.  Iterative RSS Amendment 
}1ˆ,,ˆ|:)(max{|argˆ ,,
)1(
,
)(
,   wwiwiqRiqRi LddddRd    (22) 
According to equation (13), let           . If t is larger than 
threshold, cancel this multipath as the following equation and 
go on searching the next multipath. 
i
q
d
qiqi CHYY
RiqRi
ˆˆˆ )(
ˆ
)1)(())((
,)(,
                (23) 
By means of the iterative method, we can find the timing 
and power of all multipath signals. Then we can get the 
updated CIR        . 
NddkjQNddkj
Q
RiRi
Ri
RiRi
RiRiRi
eHeHHH
/)ˆˆ(2)1(/)
ˆˆ(2)1()0(
)1(
,
)0(
,
,
)1(
,
)0(
,
,,,
ˆˆˆˆ
    (24) 
where Q is the total number of detected multipath. 
The first multipath signal does not always have the largest 
power. In order to know the accuracy of the timing estimation 
clearly, set    equal to the smallest time delay among all 
detected multipath signals. At the same time, ISI can be 
prevented after completing the timing adjustment based on the 
first multipath signal. 
C. Iterative RSS Amendment 
We get the candidate list from the multiuser detection. 
However, there is still the residual interference and false alarm 
RSSs to influence the performance. The former makes some 
noise to the power estimation. The latter produces the virtual 
ranging signal during the cancellation process. In view of both 
factors, we introduce the iterative RSS amendment method to 
compensate this degradation of ranging successful rate. From 
Figure 2. , we can clearly understand that we cancel the other 
candidates’ signals first when we want to re-check whether the 
candidate is false and amend CIR of the target signal. That is 
because we don’t consider all the other RSSs’ interference at 
the successive ranging multiuser detection stage. The 
interference makes the higher miss probability and false alarm 
rate. After cancelling other signals, we re-check again. If the 
value is smaller than the threshold, we remove it from the 
candidate list. Otherwise, we update the CIR. For the next 
candidate, we cancel the others’ signals and do it again. 
After an iterative RSS amendment, the residual power of 
the ranging slot shall be reduced. Theoretically, the final 
2
i
1
ˆ iS
)(q
iR
Rid ,ˆ 1ˆ ,  wRi Ld
RiRi dd ,, ˆ
RiH ,ˆ
Rid ,ˆ
)(
,
ˆ q
RiHt 
2 4 6 8 10 12 14
10-3
10-2
10-1
100
User number
Po
w
er
 M
SE
SNR =  10dB / Veh-A
 
 
Proposed Method
SMUD / PFA=0.01
SMUD / PFA=0.001
Conventional Method
 
Figure 5.  The mean square error of power estimation  
 
2 4 6 8 10 12 14
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
User number
Ra
ng
in
g 
Su
cc
es
sf
ul
 R
at
e
SNR =  10dB / Veh-A
 
 
Proposed Method
SMUD / PFA=0.01
SMUD / PFA=0.001
Conventional Method
 
Figure 6.  The ranging successful rate  
Figure 4. shows the standard deviation of the timing offset 
estimation. The function is defined as                         . The real 
timing offsets are chosen randomly during [0, 229] samples. 
According to the simulation results, the timing precision 
becomes worse as the number of RSSs increases. The 
proposed method is more accurate than SMUD and the 
conventional method, due to the sliding window. The sliding 
window filters the false alarm multipath outside the window. 
It prevents the timing estimation occur a large deviation. 
Besides, the iterative RSS amendment can adjust the timing 
estimation after cancelling other interference. This is another 
important difference between SMUD and the proposed 
method. 
Figure 5. shows the power estimation. The mean square 
error of power estimation is defined as                       . Figure 6. 
shows the successful ranging detection rate which is defined 
by 2 criterions. One is the remaining MS power deviation 
shall be within ±1dB of the target power level. Another is 
timing error shall be within ±Tb/128 duration of the target 
arrival time. Here, Tb is the OFDMA symbol time.  
The performance deviation between the proposed method 
and SMUD increases as the user number becomes large. The 
precision of power estimation is the main reason to cause that. 
The estimated power is influenced by the miss detection rate 
and the false alarm rate. Missed RSSs or the false-alarm RSSs 
result in more MAI. The proposed method can achieve higher 
power accuracy because of low MAI. Finally, we can find that 
the ranging successful rate is seventy percent when there are 
14 RSSs on the same ranging slot. It improves performance 
40% of SMUD and 160% of conventional method. 
V. CONCLUSIONS 
In this paper, we proposed a robust ranging detection 
method that takes the MAI cancellation into account. This 
idea can be applied on random access systems that belong to 
the interference-limited systems. For non-ideal ranging code 
systems, more RSSs mean more MAI. The probability of 
retransmitting ranging signals is increased. This situation also 
enlarges the total MAI. The proposed method can lower the 
MAI and shorten the ranging access time by combining the 
channel estimation and the multiuser ranging detection. The 
simulation shows the excellent improvements on the detection 
rate, false alarm rate, timing estimation and power estimation 
over the multipath Rayleigh fading channel. 
REFERENCES 
[1] X. Fu and H. Minn, “Initial uplink synchronization and power control 
(ranging process) for OFDMA systems,” in Proc. IEEE GLOBECOM, 
vol. 6, Nov. 29-Dec. 3 2004, pp. 3999–4003. 
[2] Lee, Doo hwan; Morikawa, Hiroyuki, “Performance Analysis of 
Ranging Process in IEEE 802.16e OFDMA Systems,“Wireless and 
Mobile Computing, Networking and Communications, 2007. WiMOB 
2007, 8-10 Oct. 2007, pp. 16-16 
[3] X. Fu, Y. Li, and H. Minn, “A new ranging method for OFDMA 
systems,” IEEE Trans. Wireless Commun., vol. 6, no. 2, pp. 659–669, 
Feb. 2007. 
[4] H. Mahmoud, H. Arslan, and M. Ozdemir, “Initial ranging for WiMAX 
(802.16e) OFDMA,” in Proc. IEEE Military Communications 
Conference, Oct. 2006, pp. 1–7. 
[5] J. Zeng and H. Minn, “A novel OFDMA ranging method exploiting 
multiuser diversity,” in Proc. IEEE GLOBECOM, 26-30 Nov. 2007. 
[6] Jianqiang Zeng; Hlaing Minn; Chia-Chin Chong, “Ranging Signal 
Designs for MIMO-OFDMA Systems“, in Proc. IEEE GLOBECOM, 
Nov. 30 2008-Dec. 4 2008, pp.1-6. 
[7] Ming (Matt) Ruan, Mark C. Reed and Zhenning Shi, “Successive 
Multiuser Detection and Interference Cancelation for contention based 
OFDMA Ranging Channel,” in IEEE TRANSACTIONS ON WIRELESS 
COMMUNICATIONS, vol. 9, no. 2, Feb. 2010, pp. 481-487. 
 
2
,, )ˆ( RiRi ddE 
])/ˆ1[( 2ii PPE 
97 年度專題研究計畫研究成果彙整表 
計畫主持人：蘇賜麟 計畫編號：97-2221-E-006-086-MY3 
計畫名稱：資源限制及通道感知之無線通訊網路的研究--子計畫四:無線網路資源感知管理及跨層協定
之研究與設計 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 1 0 100% 多篇論文撰寫中。
研究報告/技術報告 0 0 100%  
研討會論文 2 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 3 2 100%  
博士生 1 2 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
