I 
 
目錄 
目錄................................................................................................................................ I 
圖目錄 .......................................................................................................................... II 
表目錄 ........................................................................................................................ IV 
第一章  簡介............................................................................................................ 1 
第二章  跳頻訊號模型 ........................................................................................... 2 
2.1  單網系統之跳頻訊號接收模型 ............................................................... 2 
2.2  雙網系統之跳頻訊號接收模型 ............................................................... 5 
第三章  單網系統下基於頻譜峰值分析之跳頻參數估計流程設計 ................... 9 
3.1  基於頻譜峰值分析之單網跳頻訊號參數偵蒐流程 ............................... 9 
3.2  基於 FFT 峰值之跳頻訊號分析法 .......................................................... 9 
3.3  雙滑行視窗能量偵測法則 ..................................................................... 12 
3.4  單元平均固定偵錯率峰值偵測法則 ..................................................... 14 
3.5  實驗模擬 ................................................................................................. 16 
第四章  雙網系統下基於 ANPA 之跳頻參數估計流程設計 ............................. 20 
4.1  基於 ANPA 之雙網跳頻訊號參數偵蒐流程 ......................................... 20 
4.2  基於 ANPA 之雙網頻率追蹤 ................................................................. 22 
4.3  實驗模擬 ................................................................................................. 25 
第五章  雙網系統下基於 ANPA 之跳頻訊號分離與參數偵蒐流程設計 ......... 28 
5.1  基於 ANPA 之雙網跳頻訊號分離與參數偵蒐流程 ............................. 28 
5.2  頻率軌跡分離機制 ................................................................................. 29 
5.3  排除頻率值相近導致分離錯誤的方法 ................................................. 32 
5.4  實驗模擬 ................................................................................................. 34 
第六章  適用於能量不相等之雙網系統下基於 ANPA 之跳頻訊號分離與參數
偵蒐流程設計 ............................................................................................................. 42 
6.1  適用於能量不相等且基於 ANPA 之跳頻訊號分離與參數偵蒐流程 . 42 
6.2  以振幅值之變化特性分別網台 ............................................................. 43 
6.3  實驗模擬 ................................................................................................. 47 
第七章  結論.......................................................................................................... 52 
參考文獻 ..................................................................................................................... 53 
 
III 
 
圖. 33 跳頻時刻估測之 NMSE .................................................................................. 40 
圖. 34 跳頻時刻偏移量之比較................................................................................... 41 
圖. 35 適用於能量不相等且基於 ANPA 之跳頻訊號分離與參數偵蒐流程 .......... 42 
圖. 36 振幅變化趨勢以及跳頻圖樣之關係圖形....................................................... 43 
圖. 37 尚未分離網台前之振幅變化圖形................................................................... 43 
圖. 38 分離網台後之振幅變化圖形........................................................................... 44 
圖. 39 分離網台後之頻率軌跡圖形........................................................................... 45 
圖. 40 偵測到之網 1 情況........................................................................................... 46 
圖. 41 偵測錯誤之情形............................................................................................... 46 
圖. 42 能量不相等情況下使用第五章偵蒐流程之結果........................................... 48 
圖. 43 能量不相等情況下使用第六章偵蒐流程之結果........................................... 48 
圖. 44 偵測成功率之比較........................................................................................... 49 
圖. 45 跳頻頻率估測之 NMSE 比較 ......................................................................... 50 
圖. 46 跳頻時刻估測之 NMSE 比較 ......................................................................... 51 
 
1 
 
第一章 簡介 
軍用無線通訊為防範敵方干擾及偵蒐，常採用跳頻(Frequency Hopping, 
FH)[1][2][3]作為通訊方式；跳頻信號透過偽隨機跳頻圖樣設計，使其被偵察方
檢測、分析的機率大大降低，故為一種低截獲概率信號，因而在電子戰中，如何
有效地檢測和截獲跳頻信號有著重要意義。我方若能以被動方式監聽敵方之FH 
信號，並進一步以信號偵測、參數估計、及頻譜分析等信號處理技術，以辨識出
敵方FH訊號之跳頻週期(Hopping duration)、 跳頻時間(Hopping time)、與跳頻頻
率(Hopping frequency)等重要參數及特徵，則可收制敵機先之功, 不僅可大幅提
昇我方無線電通訊之安全性, 亦可採用Repeater Jamming 方式有效干擾敵方通
訊；另外，在現有跳頻信號參數偵蒐的文獻中，利用時頻轉換(Time-Frequency 
Distribution)之演算法場景幾乎是單網台的環境[4][5]，對於雙網台甚至多網台的
環境並無深入探討，亦即當敵方之FH 通訊網路以及發射訊號並非僅有一個，而
是同時存在數個通訊網或FH 訊號台，此表示同一時刻可有多個載波頻率被干擾
到，此乃更加深參數估計之困難度。 
本文在引用上述部分演算法之餘，另外發展一套基於頻譜峰值分析，搭配雙
滑行視窗能量偵測法則與固定錯誤率峰值偵測法則分別估計跳頻各參數，並可適
用於多網之環境。 
3 
 
time
fre
qu
en
cy
 
圖. 1 單網系統下跳頻信號參數示意圖 
如圖. 1 所示，在每段跳頻週期 T 之時段裡，以跳頻時刻為頻率轉換點，搭載不
同之跳頻頻率 fi為其載波頻率。參數的定義如下： 
 跳頻週期 T：每跳延續之時間，與跳頻速率互為倒數。 
 跳頻速率1 T ：每秒的跳數。 
 跳頻時刻 ti：各跳之間的轉換點。 
 跳頻頻率 fi：每跳之載波頻率。 
 
綜觀以上之跳頻訊號模型，為取得完整之跳頻圖樣，則需估測之參數包含：
跳頻速率、跳頻週期、跳頻頻率、跳頻時刻(Hopping time)。吾人透過圖. 2 表示
未調變之單網跳頻訊號的跳頻圖樣以及其時頻分布圖形。在訊號模型中Ω(t)為跳
頻訊號之調變方式，本文先以未調變之跳頻訊號為發展演算法之場景，即 
 ( ) 1t   (2.2) 
5 
 
0 2 4 6 8 10 12 14 16 18 20 22
0
50
100
150
200
time (ms)
fre
qu
en
cy
 (k
H
z)
hopping pattern
 
 
0 2 4 6 8 10 12 14 16 18 20 22
0
50
100
150
200
time-frequency distribution
time (ms)
fre
qu
en
cy
 (k
H
z)
net#1
 
圖. 3 單網系統之 BFSK 跳頻訊號 
 
2.2 雙網系統之跳頻訊號接收模型 
假設吾人接收到的訊號為一個 M 網之跳頻訊號，吾人可列出多網跳頻訊號
之接收模型，即考慮在同一時間接收到多組的跳頻訊號，多網跳頻訊號之接收模
型將表示為(2.4)式： 
 ,2 ( )( ) * ( ) ( ) ( )m i m m
m
j f t iT
m m T m m
m i
x t A t rect t iT e w t           (2.4) 
其中， 1,2, ,m M   
由於雙網系統是多網系統之最簡單的型式，吾人可把多網之訊號模型簡化至雙網
(M=2)之型式。因此在雙網的情況下(2.4)式可表示為(2.5)式 
7 
 
之能分別獨立的重建各跳頻圖樣。此處同樣先以未調變之跳頻訊號為發展演算法
之場景，即 ( ) 1m t  。圖. 5 表示未調變之雙網跳頻訊號之跳頻圖樣以及其時頻分
布圖形。 
0 2 4 6 8 10 12 14 16 18 20 22
0
0.5
1
1.5
2
x 105
time (ms)
fre
qu
en
cy
hopping pattern
 
 
0 2 4 6 8 10 12 14 16 18 20 22
0
0.5
1
1.5
2
x 10
5
time (ms)
fre
qu
en
cy
time-frequency distribution
 
 
net#1
net#2
 
圖. 5 雙網系統之跳頻訊號 
考慮到實際應用之情況，吾人於演算法模擬時加入多網之二元頻率移鍵調變
(BFSK)之調變效應，即 
 ,2 ( )( ) ( ) k mj d f t kTm T
k
B B
B Bt rect t kT e
     (2.6) 
其中之參數： 
 dk,m：第 m 個網台之第 k 個 BFSK 符元，即{-1,1} 
 TB：BFSK 符元之週期，即資料速率之倒數 
 fB：BFSK 調變之調變頻率 
 ( )
BT
rect t ：於時間範圍 ( / 2, / 2]B Bt T T  大小值為 1 的方波 
 
9 
 
第三章 單網系統下基於頻譜峰值分析之跳頻參數估計流
程設計 
3.1 基於頻譜峰值分析之單網跳頻訊號參數偵蒐流程 
本章使用的單網跳頻訊號偵蒐流程如圖. 7所示。吾人利用滑動式快速富立葉
轉換(Sliding FFT)[6][7]將時域的訊號轉入頻域，對於每個取樣時間的訊號皆轉入
頻域取得時頻分佈(time-frequency distribution)。吾人將連續的頻譜變化結合雙滑
行視窗(Double Sliding Window , DSW)[8]之能量偵測法則與固定偵錯率
(Cell-Averaging Constant False Alarm Rate , CA-CFAR)[9][10]之峰值偵測法則進
一步估測各跳頻時刻 tˆ 及跳頻頻率 fˆ ，隨後利用估測到的各項跳頻參數重建跳頻
圖樣(hopping pattern)。 
 
( )x k
Tˆ
iˆt
iˆf
( )f n ( )D n
 
圖. 7 基於頻譜峰值分析之單網跳頻訊號參數偵蒐流程 
3.2 基於 FFT 峰值之跳頻訊號分析法 
在估測一複數正弦信號頻率之眾多方法中，利用快速富立葉轉換將其觀測信
號轉入頻域分析是最直觀且顯而易見的，因此本章將使用滑動式快速富立葉轉換
演算法為此頻率域跳頻參數估計之基礎。如圖. 8 所示，吾人利用一個寬度為 Lw
的滑動視窗，將滑動視窗內之訊號由時域轉入頻域，對頻譜進行連續之觀察。 
雙網台的時域訊號經由滑動式快速富立葉轉換轉入頻域之後可繪出時頻分
佈。若滑動視窗的長度為 Lw，則時域訊號表示為： 
11 
 
0 500 1000 1500 2000 2500 3000 3500 4000
1
1.5
2
2.5
x 105
window delay sample point
Fr
eq
ue
nc
y 
(H
z)
The tracking of hopping frequency
 
圖. 9 連續頻率追蹤之變化圖 
由於此滑動式快速富立葉轉換的運算複雜度偏高，考量 kx 與 1kx 之間的關
連，兩者絕大部分元素皆相同，因此另外提出一種適用於滑動式快速富立葉轉換
的降低運算複雜方法。若將 FFT 矩陣表示為： 
 0 1 1[ ]wF L W w w w  (3.3) 
其中 nw 為 FFT 矩陣內的第 n+1 行 
那麼時域訊號 [ ( ) ( 1)]Tk wx k x k L  x  與 1 [ ( 1) ( )]Tk wx k x k L   x  的
頻域型式即可表示為： 
 
0 0( )
k F k
c c
kx k

 
X W x
w w x
 (3.4) 
 1 1
1 1 1 ( )w w
k F k
c c
L k L wx k L
 
  

  
X W x
w x w
 (3.5) 
其中 
13 
 
D(n) = max
D(n) = min
( )  ( ) ( ) A BD n E n E n 
 
圖. 10 雙滑行視窗之示意圖 
DSW 對於函數急速變化之狀態有敏感偵測之效能，因此吾人將利用此一特
性作為 f(n) 頻率轉換點之偵測機制。在 DSW 中，第 n 點之 DSW 輸出是由兩長
度 LD之視窗內信號所決定的。如圖. 10 所示，EA(n)與 EB(n)分別為前後兩視窗內
之信號能量 
 
1 1
2*
0 0
( ) ( ) ( ) ( )
D DL L
A
l l
E n f n l f n l f n l
 
 
       (3.6) 
 2*
1 1
( ) ( ) ( ) ( )
D DL L
B
l l
E n f n l f n l f n l
 
       (3.7) 
一般而言，DSW 能量偵測法是利用 EA(n)與 EB(n)之比值作為偵測之依據。
但是此處追蹤頻率為不固定的跳動值，因此調整輸出為 
 ( ) | ( ) ( ) |A BD n E n E n   (3.8) 
這是由於頻率軌跡是一組忽大忽小的數列。使用比值的方法時，對於數值的上升
具有顯著的效果，相反的，當數值下降時效果並不顯著，這與吾人的需求不同。
然而，使用差值時，不論是數值上升或者下降，它的效果皆是吾人想要的。吾人
透過圖. 11 來展示比值與差值的結果。 
15 
 
由此兩值之平均乘上一控制系數κ。 
 1
1
1( ) ( )
Cn L
k nC
Z n D k
L

 
   (3.9) 
 2
1
1( ) ( )
Cn L
k nC
Z n D k
L

 
   (3.10) 
( )D n
1
1
1( ) ( )
Cn L
k nC
Z n D k
L

 
  2
1
1( ) ( )
Cn L
k nC
Z n D k
L

 
 
 1 2( ) ( ) ( )2Z n Z n Z n
 
 
圖. 12 CA-CFAR 之工作說明圖 
其門檻計算結果如圖. 13所示。將D(n)大於門檻值之處標定為偵測區域，每
個偵測區域中將有一峰值存在，對於每偵測區域尋找峰值最大值之相對應位置，
其即為所求之跳頻時刻 iˆt 。若可完美估計出跳頻時刻 iˆt ，那麼透過估測之跳頻時
刻 iˆt 間的差值即可推測出跳頻週期 Tˆ 。 
17 
 
FFT 長度 256 point 
DSW 長度 128 point 
CFAR 長度 512 point 
SNR 0 dB 
 
0 2 4 6 8 10 12 14 16 18 20 22
40
60
80
100
120
140
160
180
time (ms)
fre
qu
en
cy
 (k
H
z)
 
 
重建之訊號
傳送之訊號
 
圖. 14 單網跳頻圖樣與重建情形 
此時若將單網之跳頻訊號加入 BFSK 之調變，BFSK 調變參數設定如表. 3。
此時所追蹤出來的頻率軌跡將會受到 BFSK 的影響，偵測出來的頻率值會受到
BFSK 的影響而晃動，如圖. 15 所示。吾人將此晃動的頻率軌跡透過本章所提出
之偵蒐流程，將得出的各項跳頻參數重建跳頻訊號之跳頻圖樣，如圖. 16 所示。
吾人發現到，些微的頻率晃動情形並不影響跳頻時刻的偵測而是會影響重建的頻
率值。並且透過重建跳頻圖樣吾人更可證實此跳頻訊號的參數偵蒐流程是具可行
性的。在加入 BFSK 之調變狀況下，吾人依然可以透過此參數偵蒐流程求得跳頻
19 
 
0 2 4 6 8 10 12 14 16 18 20
40
60
80
100
120
140
160
180
200
time (ms)
fre
qu
en
cy
 (k
H
z)
 
 
重建之訊號
傳送之訊號
 
圖. 16 BFSK 調變之單網跳頻圖樣與重建情形 
 
21 
 
0 20 40 60 80 100 120 140
0
20
40
60
80
100
120
140
2, 12 i sj f kTe  2,2 i sj f kTe 
1,if 2,if
1, 12 i sj f kTe  1,2 i sj f kTe 
 
圖. 18 基於雙網環境之滑動 FFT 視窗示意圖 
0 1000 2000 3000 4000 5000 6000 7000 8000 9000
0
0.5
1
1.5
2
x 105
sample point
fre
qu
en
cy
 
 
0 1000 2000 3000 4000 5000 6000 7000 8000 9000
0
0.5
1
1.5
2
x 105
sample point
fre
qu
en
cy
 
 
i=1
i=2
i=1
i=2
(a)
(b)
( )if n
( )if n
 
圖. 19 (a) ( )if n 的圖樣 (b) ( )if n 的圖樣 
得到兩根據頻率值大小排序後的追蹤頻率 1( )f n 與 2 ( )f n 後，分別通過 DSW 以及
CFAR，取得各自的跳頻時刻 1,it 與 2,it ，最後再經由兩路跳頻時刻估計跳頻週期並
23 
 
 
    H -1 HE E
H -1 H
E
P I E(E E) E I P
P = E(E E) E
 (4.4) 
5. 將時域向量 kz 轉入頻域求得 kZ 最大值之相對應頻率，即為另一網之跳頻頻率 
6. 若訊號為 M 網，則步驟 3. 至 5. 重複做 M-1 次，便能將 M 網的頻率成分抽
取出來 
 
吾人可藉由上述步驟即可從雙網之跳頻訊號追蹤到 1( )f n 與 2 ( )f n 。上述步驟吾人
可藉由圖. 20 的簡單方塊圖表示。 
 
kx kX
kz kZ
1f
2f
 
圖. 20 基於 ANPA 之雙網頻率追蹤方塊圖 
以下將介紹 ANPA 的工作原理。以最大似然法則建立如下式之複數正弦參數估
計器 
 
2
min{ }
n 
C
kΩ,A
k
J (Ω, A)
J (Ω, A) x EA
 (4.5) 
由最小平方法，吾人可得到振幅及頻率之估測向量 
 1ˆ ( ) k
 H HA E E E x  (4.6) 
將得到之 Aˆ 代入(4.5)，可整理出 
 
22ˆ
k k
  k E EJ (f, A) x P x P x  (4.7) 
若已得到 s 個已知跳頻頻率 1 2[ ( ) ( ) ( )]s  VE e e e ，且ω為待測之跳
25 
 
0 1000 2000 3000 4000 5000 6000 7000 8000
0
200
400
600
spectrum of two-net hopping signal
frequency (Hz)
am
pl
itu
de
0 1000 2000 3000 4000 5000 6000 7000 8000
0
200
400
600
spectrum after notch
frequency (Hz)
am
pl
itu
de
 
圖. 21 (a)雙網跳頻訊號之頻譜 Xk  
(b)消除峰值之頻譜 X’k 
 
4.3 實驗模擬 
本節將透過實驗模擬來驗證本章所提出之雙網跳頻訊號參數偵蒐流程是否
能運作，以及利用估測之跳頻訊號參數重建的跳頻圖樣是否與原始的跳頻圖樣相
同。 
本節的實驗模擬使用的參數如表. 4所示。圖. 22表示針對兩追蹤頻率 1( )f n 與
2 ( )f n 透過 DSW 以及 CFAR 的結果，由於在多網的環境下會產生跳頻時刻很接
近的情況，此時 CFAR 可能產生偵測失誤的情形，即圖. 22 中標示的區域。此處
應該存在的跳頻時刻不論在圖. 22 (a)或者圖. 22 (b)皆未被偵測出來，未被偵測出
來的跳頻參數將會造成跳頻圖樣重建的錯誤。圖. 23 為跳頻圖樣重建錯誤的情
27 
 
0 2 4 6 8 10 12 14 16 18 20
20
40
60
80
100
120
140
160
180
200
time  (ms)
fre
qu
en
cy
  (
kH
z)
 
 
重建之 Net1
重建之 Net2
發送之 Net1
發送之 Net2
 
圖. 23 雙網跳頻圖樣與重建錯誤情形 
 
 
29 
 
個本文所提出的頻率軌跡分離機制(Frequency Trace Separation)分離成 1ˆ( )f n 與
2ˆ ( )f n 。如此一來吾人便能將混合網台之頻率軌跡分離成為單一網台之頻率軌
跡，藉此避免單一頻率軌跡中跳頻時刻太相近的情形。 
如圖. 25 所示，透過本文所提出的頻率軌跡分離機制，吾人能將混合網台之
頻率軌跡分離成為單一網台之頻率軌跡，以避免減少發生遺漏跳頻時刻導致訊號
重建發生錯誤的問題。 
0 1000 2000 3000 4000 5000 6000 7000 8000 9000
0
0.5
1
1.5
2
x 105
sample
fre
qu
en
cy
 
 
0 1000 2000 3000 4000 5000 6000 7000 8000 9000
0
0.5
1
1.5
2
x 105
sample
fre
qu
en
cy
 
 
i=1
i=2
i=1
i=2
( )if n
ˆ ( )if n
 
圖. 25 (a) ( )if n 的圖樣 (b) ˆ ( )if n 的圖樣 
5.2 頻率軌跡分離機制 
為了達成將混合網台之頻率軌跡分離成為單一網台之頻率軌跡的目的，本文
進一步提出來一種頻率軌跡分離機制。此機制的工作原理，是藉由該時刻與前一
時刻頻率軌跡的相似度來進行網台分類。透過此機制，吾人便能將混合的頻率軌
跡依據不同網台分離。此方法可適用在雙網以上的多網台環境中，其中利用第 j
31 
 
Step 1：生成一個 3×3 的 g 矩陣 
 
1 2 3
4 5 6
7 8 9
            
g  (5.5) 
Step 2：找出 g 矩陣內最小的元素（以△表示最小元素） 
 
1 2 3
4 5 6
7 8 9
            
g  (5.6) 
   找出矩陣內最小值對應至 g 的位置 ˆ ˆ2, 1i j   
Step 3：將 f 第 2 網的頻率值判別為 fˆ 的第 1 網 
 1 2ˆ ( ) ( )f n f n   (5.7) 
Step 4：令 g 矩陣的 2 列與 1 行的值為無限大 
 
2 3
8 9
            
g  (5.8) 
Step 5：找出 g 矩陣內剩餘元素之最小的元素（以△表示最小元素） 
 
2 3
8 9
            
g  (5.9) 
   找出 g 矩陣內最小元素之列與行( ˆ ˆ3, 2i j  ) 
Step 6：將 f 第 3 網的頻率值判別為 fˆ 第 2 網 
 2 3ˆ ( ) ( )f n f n   (5.10) 
Step 7：再令 g 矩陣的 iˆ 列與 jˆ 行的值為無限大 
 
3            
g  (5.11) 
33 
 
11 12 13 14 15 16 17 18
40
60
80
100
120
140
160
180
time (ms)
fre
qu
en
cy
 (k
H
z)
 
 
net#1
net#2
B1
B2
B3
B4
B6
B5
 
圖. 26 頻率相近分離錯誤之情形 
在圖. 26 所標示的區域中，很明顯發生了分離錯誤的情形。因為在(5.1)式中
有取平均值的動作，此動作造成了分離錯誤。例如，在圖. 26 的標示區域中，跳
躍點前的平均值分別為[B1─110k,B2─100k]，跳躍時的平均值可能為[B3─110.6k, 
B4─109.6k]，此時，由於 B6─110k 與 B4─109.6k 較為相近，所以造成了分離錯
誤的情形。 
了解錯誤可能發生的原因之後，吾人便透過改良分離機制來修正錯誤。因
此，吾人為了改善此種情形而將分離機制內的(5.1)式改良為： 
  ( , )
1
1 ˆ( ) ( ) ( )       , 1,...,
d
i j i j
l
g k f k W l f k l i j M
d 
     (5.14) 
其中 
W(l)為一組具衰減記憶且長度為 d 的權重值，在越靠近 n 點時的權重值越大。為
了實現此種函數，本處的權重值函數設定為自然指數函數： 
35 
 
吾人使用一組雙網的跳頻訊號進行模擬，模擬參數設定如表. 5。透過本章所
提出的頻率軌跡分離機制，將分離出來的頻率軌跡 1ˆ ( )f n 與 2ˆ ( )f n 分別透過 DSW
與 CFAR 所得出的結果如圖. 28 所示。由圖可知，使用分離機制分離後的頻率軌
跡所偵測到的跳頻時刻較圖. 22 的偵測結果穩定，如此便不易遺漏跳頻時刻，重
建跳頻圖樣也會相對正確。圖. 29 為使用偵測到的跳頻時刻 1,ˆ it 與 2,ˆ it 所重建的跳
頻圖樣，重建結果較圖. 23 準確，惟跳頻時刻有偵測上的誤差。 
表. 5 雙網跳頻訊號參數表 2 
 跳頻訊號#1 跳頻訊號#2 
跳頻速率 400 hop/sec 500 hop/sec 
跳頻週期 2.5 ms/hop 2 ms/hop 
取樣頻率 400 kHz 
FFT 長度 256 point 
DSW 長度 128 point 
CFAR 長度 512 point 
SNR 0 dB 
BFSK 資料速率 20k bit/sec 
BFSK 符元週期 20 point 
BFSK 調變頻率 500 Hz 
37 
 
為了瞭解此參數偵蒐流程的偵蒐成果如何，吾人定義一些指標： 
若網 1 的跳頻時刻有 P1 個、網 2 的跳頻時刻有 P2 個；偵測到網 1 的跳頻時
刻有 1ˆP 個、偵測到網 2 的跳頻時刻有 2ˆP 個。那麼，總共的跳頻時刻個數為 P = P1+ 
P2；偵測到跳頻時刻總個數為 1 2ˆ ˆ ˆP P P  。 
因此，偵測成功的情況吾人便定義成 
 Pˆ P  (5.16) 
若是偵測成功的前提下且分離無誤，那麼吾人便定義成 
 1 1
2 2
ˆ
ˆ
P P
P P


  (5.17) 
另外吾人將利用正規化均方誤差(Normalized Mean Squared Error, NMSE)做為跳
頻頻率和跳頻時刻的性能函數： 
 
2
1
2
ˆ( ( ) ( ))1ˆ{ }
( )
sigL
ideal
nsig ideal
f n f nNMSE f
L f n
       (5.18) 
 
2
2
1
ˆ( )1ˆ{ }
P
i i
i
t tNMSE t
P T
      (5.19) 
其中 
sigL 為觀測視窗內的訊號長度 
為了更了解估測的跳頻時刻偏移量的誤差，吾人再定義： 
 
ˆˆ , 1i ishift
t tt i P
T
    (5.20) 
在電腦模擬部份，吾人透過改變 SNR 來觀測其效能，其餘參數設定皆如表. 
5，此時的一個觀測視窗內網 1 有 9 個跳頻時刻、網 2 有 11 個跳頻時刻。蒙地卡
羅迴圈數設定為 500 的情況下。 
圖. 30 為在頻率軌跡分離機制中使用不同α值的狀況下，SNR 對此偵測流程
的成功率之影響。此成功率主要來自於觀測視窗內的頻率軌跡分離機制是否分離
正確，分離的正確自然能降低偵測的錯誤率。除此之外，也看出，當分離機制中
39 
 
0 2 4 6 8 10 12 14 16 18 20
0.7
0.75
0.8
0.85
0.9
0.95
1
SNR (dB)
pr
ob
ili
ty
probility of successful detection with different WF
 
 
Lw =256
Lw =128
Lw =64
 
圖. 31 在不同 Lw狀況下之偵測成功率比較圖 
在圖. 32與圖. 33中，吾人呈現了SNR對此偵蒐流程的 ˆ{ }NMSE f 與 ˆ{ }NMSE t
結果。在 ˆ{ }NMSE f 的結果中，吾人透過(5.18)式算出跳頻頻率的 NMSE 值。對
於頻率估計是否正確的主要因素在於頻率解析度是否足夠，在足夠頻率解析度的
情況之下，估計的頻率值自然就會準確；假如頻率解析度不足，吾人可以透過提
高 Lw的值或者利用補零的方法來補足頻率解析度不足的情況。在 ˆ{ }NMSE t 的結
果中，吾人透過(5.19)式所算出跳頻時刻的 NMSE 值，此結果呈現出隨著 SNR
的上升， ˆ{ }NMSE t 的值就越小，即跳頻時刻的估計愈趨準確。此外，藉由圖. 32
與圖. 33 吾人可以得知，單網的環境比較單純，因此估測較為準確。雙網的環境
較複雜，兩個複數弦波的相互干擾造成效能上的差距。 ˆ{ }NMSE f 與單網約有
13dB 的差距、 ˆ{ }NMSE t 則約有 5dB 的差距。 
41 
 
為了更了解偵測到的跳頻時刻與原始的跳頻時刻中間的偏移關係，吾人利用
sˆhiftt 的(5.20)式表示偏移量的統計，將此統計的結果繪製成圖. 34。由此圖可以看
出，吾人估計出的偏移量是會受到雜訊的影響而造成偏移的，並且隨著 SNR 的
提升，吾人估測偏移量會隨之縮小，即跳頻時刻的估計越趨準確。 
-0.05 -0.04 -0.03 -0.02 -0.01 0 0.01 0.02 0.03 0.04 0.05
0
0.05
0.1
0.15
0.2
0.25
0.3
0.35
0.4
T
pr
ob
ab
ili
ty
 
 
SNR=0
SNR=8
SNR=16
 
圖. 34 跳頻時刻偏移量之比較 
 
 
 
43 
 
台之做為例子，當頻率值從藍色的 f1 切換至紅色的 f2 時，其相對應之振幅將互
有消長，如圖. 36 所示。若仔細觀察 f1 和 f2 之振幅變化圖形，則可看到兩者振幅
總合將會近似於一個定值 AS。因此，吾人便能透過此種振幅變化特性分離網台。 
t
t
A
f
f1
f2
AS
 
圖. 36 振幅變化趨勢以及跳頻圖樣之關係圖形 
6.2 以振幅值之變化特性分別網台 
在無調變之狀況下，吾人觀察雙網系統中 ANPA 取出的四組頻率所相對應
的振幅值，將振幅值分別以大小排序，吾人便能得到如圖. 37 之趨勢。 
t
A
AS,1
AS,2
振幅值第一大
振幅值第二大
振幅值第三大
振幅值第四大
 
圖. 37 尚未分離網台前之振幅變化圖形 
45 
 
 
圖. 39 分離網台後之頻率軌跡圖形 
觀察所偵測到之能量較大之一網之頻率軌跡，吾人發覺偵測之頻率軌跡將會產生
不規則的跳動，如圖. 40 所示。透過此圖可發現，此不規則跳動之情況將會出現
在頻率切換點之前後。在此情況之下，經過 DSW 以及 CFAR 之結果將可能造成
誤判，如圖. 41 所示。原來在此處應該僅有一個跳頻時刻，但是照原來的偵測方
法將會受到頻率軌跡不規則跳動之影響，將會變成兩個甚至於以上之跳頻時刻個
數，這將對後續之參數偵蒐造成不利之情形。因此，為了修正跳頻時個數之問題，
吾人相距兩個 DSW 寬度之內的跳頻時刻歸類成一個，其跳頻時刻則定為 DSW
變化量最大之一點。將修正過後的跳頻時刻搭配偵測出來的頻率，吾人便可重建
能量較大之一網訊號，將收到的訊號扣除重建訊號之後，吾人便可得到第二網之
訊號。 
47 
 
6.3 實驗模擬 
本節將透過實驗模擬來驗證本章所提出之雙網能量不相等之跳頻訊號參數
偵蒐流程是否能運作，以及利用估測之重建的跳頻圖樣是否與原始的跳頻圖樣相
同。 
吾人使用一組雙網的跳頻訊號進行模擬，模擬參數設定如表. 6 所示。其中，
雙網能量之比值定義為：較小之能量除以較大之能量所得出的值。經由圖. 42 可
以看出，在此組參數設定之下，吾人使用第五章之參數流程所得到之結果是錯誤
的。因此，再次證實若是在雙網台能量不相等時，第五章之參數偵蒐流程將有其
缺陷存在。圖. 43 則是表示在此組參數之下使用第六章之參數偵蒐流程所得出的
結果，吾人所重建之跳頻圖樣與發射端之跳頻圖樣一致，惟跳頻時刻有估計上之
誤差。 
表. 6 雙網跳頻訊號參數表 3 
 跳頻訊號#1 跳頻訊號#2 
跳頻速率 400 hop/sec 500 hop/sec 
跳頻週期 2.5 ms/hop 2 ms/hop 
取樣頻率 400 kHz 
FFT 長度 256 point 
DSW 長度 128 point 
CFAR 長度 512 point 
雙網能量比值 0.2 
49 
 
0.20.30.40.50.60.70.80.91
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
雙網能量比值  (小 /大 )
偵
測
成
功
機
率
 
 
依照振幅變化分離網台
依照頻率軌跡分離網台
 
圖. 44 偵測成功率之比較 
圖. 44 則是表示使用不同特徵區分網台之成功率比較。而偵測成功率的定義
如同第五章之定義(5.16)相同。由圖可再次證明，若僅以第五章之頻率軌跡特徵
區分網台的話，在雙網能量比值變小時此方法將出現其缺陷；相反的，若是在雙
網能量比值小的狀況之下，使用第六章之振幅變化特徵區分網台將會有顯著的效
果。透過此圖顯示，在雙網能量比值為 0.6 左右時，兩種方法的偵測成功率將會
相近。惟能量比值介於 0.4 至 0.8 之間時，此兩種流程之偵測成功率能不足以涵
蓋此區間，這將是此兩種偵測方式之問題所在。因此，吾人若能先行偵測雙網能
量之比值做為參考數據便能選擇適合的區分網台方式。 
另外，如同第五章，吾人提供了 ˆ{ }NMSE f 以及 ˆ{ }NMSE t 做為性能分析的依
據。在圖. 45 表示頻率估測之 NMSE 值，其 ˆ{ }NMSE f 之定義如同(5.18)所示。透
過此性能分析，隨著雙網能量比值變小時，第五章之方法將失去準確度；相反的，
利用雙網能量差異之振幅變化將有其顯著的效果。而圖. 46 也有著相同的結果，
51 
 
0.20.30.40.50.60.70.80.91
-50
-45
-40
-35
-30
-25
-20
-15
-10
-5
雙網能量比值  (小 /大 )
N
M
S
E
 (d
B
)
NMSE of hopping time estimation
 
 
依照頻率軌跡分離網台
依照振幅變化分離網台
 
圖. 46 跳頻時刻估測之 NMSE 比較 
 
53 
 
參考文獻 
[1] S. Glisic, Z. Nikolic, N. Milosevic, and A. Pouttu, “Advanced frequency hopping 
modulation for spread spectrum WLAN,” IEEE J. Sel. Areas Commun., vol. 18, 
pp.16–29, Jan. 2000. 
[2] N. C. Beaulieu, W. Hopkins, P. J. McLane, “Interception of frequency-hopped 
spread spectrum signals”, IEEE Journal on Selected areas in Commun., Vo1. 8, 
No.5 pp.853-870, June 1990. 
[3] B. K. Levitt, U. Cheng, M. K. Simon, A. Polydoros, “Optimum detection of slow 
frequency-hopped signals”, IEEE Trans. on Commun., Vo1. 42, pp.1990-2000, 
February 1994. 
[4] S. Barbarossa and A. Scaglione, “Parameter estimation of spread spectrum 
frequency hopping signals using time frequency distributions,” IEEE SPAWC, 
pp.213–216, 1997. 
[5] V. Ivanovic, M. Dakovic, I. Djurovic, and L. Stankovic, “Instantaneous frequency 
estimation by using time-frequency distributions,” in Proc. IEEE ICASSP, vol. 6, 
pp. 3521–3524, 2001. 
[6] E. Jacobsen and R. Lyons., “The sliding DFT” Signal Processing Magazine, IEEE, 
pp.74-80, Mar 2003 
[7] E. Jacobsen and R. Lyons. “An update to the Sliding DFT", IEEE Signal 
Processing Magazine, Jan. 2004. pp.110-111.  
[8] A. Berényi, G. Benedek, A. Nagy, “Double sliding-window technique: A new 
method to calculate the neuronal response onset latency,” Brain Research 1178 
(1), pp. 141-143, 2007 
[9] Weiss, M, “Analysis of Some Modified Cell-Averaging CFAR Processors in 
Multiple-Target Situations,” IEEE Transactions on Aerospace and Electronic 
Systems, pp.102-114. 1982. 
[10] Farina, A., and Studer, F. A., “A review of CFAR detection techniques in radar 
systems,” Microwave Journal, pp.115-128. 1986. 
[11] J. K. Hwang etal, ”Superresolution frequency estimation by alternating notch 
periodogram,” IEEE Transactions on Signal Processing, Vol. 41, pp.727 – 741, 
1993. 
 
 
 
99年度專題研究計畫研究成果彙整表 
計畫主持人：黃正光 計畫編號：99-2623-E-155-003-D 
計畫名稱：安全無線電網路管理及通訊電子戰之規劃與雛形設計(II)--子計畫二：快速無線電多網台
跳頻信號偵蒐模擬與分析 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 1 1 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 2 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
 
