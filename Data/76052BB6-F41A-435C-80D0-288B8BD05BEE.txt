 2
2. Region based registration algorithm 
(Task for the second year) 
3. Color segmentation based image retrieval 
algorithm (Task for the third year) 
Key words 
machine vision, color segmentation, image 
registration, color image processing, image 
retrieval, color correlogram 
 
!" #" #" #" #  
	³ - ´ B CD E  F µ ¶
G· ¢   ¸ I¹ º» ¼ 
0 1 "S T N tv wc L 

~ ½ ¾ * + L '
"* +   '8 97 
¿ Àv w=> Á Â 	Ã ?
Ä Å¬1.   f x } 8 9v w72. 
  Æ  * + 0 1 ÇÈ 
 !# $  % L 73.Ç¤ ¥ 
  * +   8 97Ã z Ä
ÅÉ s Ê Ë "± U / Ì Í Î Ïa
1.1Ð 
 
Ïa 1.1Ðv w"Ê Ë a 
Ñ ÒÏa 1.1Ð® ; ª 
x } 8 9'=® X± U Ó Ô
Õ À Ö × r 7	Ø Ù Ö × ± Ú Û
Ü® ( ® Ã Ä ÅÔ Õ x }
8 9i Ý Ú T Þ® ßà á Ô Õ 7
Þ® â à "® ã à x ä Ô Õ 
 Æ  * + 0 1 ÇÈ   
!# $  % L 8 9'"Ç
¤ ¥     * +   8
9'7 ÞH§ Ã z v wÄ Åå æ 
ç è Ú   "U x é A® ê à ë ì
 í 7{ | v wî ï A© z
à ð  ñ § 7 
 
$% & ' (% & ' (% & ' (% & ' (  
	

 ÇÈ   !# $ %
& ( ) ./ * + 0 1 "2 34 5
67 
< :; * + 0 1 "2 38 9
=U ò 
Ó ó ô < AB CD E 
 F G8 9H7~ ½ ¾ "  * + 2
38 9B CHÈõ u ö L ÷
ø Ó J K ù ú "û ü ý + R S T / O 
D E Hj Lþ L"
   F H2 3r   	 

  ­MRI°Hj L      
   A·  c 0 1 Gj
 ¢     PQ R S T M N / O U
"     * +  U     
 8 97 
 m:;   ! u " g h =
# $ % 6 & ' - ´ ()  ü 8 9" *
+ N t7 , ¬B CHY Z [ \
] ý + ) - ¹ ºý + # $ . / &  0 ¶
1 ý + 2 ø 2 £ & " 0 ¶ 3 1 4 5 & (
ý + ] 3 1 f  6 7 8 ø 9 W A
:; H : È 9  :ø ; l < 
 = ¤ 4 5 6Ü   ý + x
>AD E H_ ` a ? @ b c 
L ? A B C Þb    D E û ü F
G   H N b I f g h 
 F Hu "  J g h 
Èõ u ö û ü  K L M I N O P Ê Q
R S  T U    
 · ¢  
µ ¶  V W ­image retrieval°j 
* + V W G* + ± Ú f 0 1 ² 
 
	

         
       
        
  
   
  	  

  	  
    

 4
1. I* + f    	² j k7 
|   
­edge° ¸ ¹ ­corner°Gj k
 v á ¨ s - j k * + 2
37 
2. I* + f  º » g h 	² j
k7 f x } 
ÞI  f   x
 	j k * + 2 37 
®  -  6 ¼ Ñ Ò Venetsanopulos
GA 1993" 1996Xu  
   @ è  ­Vector ordering°û ü 6
v m    " ¸ ¹ aá ~ :; 
j k ¶ (feature point)½ ¾ ¶ (control 
point) ² 4 5 6± U * + ² 
8 9[4][5]7z-  6Èy z Õ c   ¶ 
®   @ è  6 N ¿ < 5 @ À ? 
k " k O N  y   x § I^ è 
< 5 o Ì ¨  l   x 6   
ü  ^ g h i j ¥ h  Á Â ® ( 
 f g h Ó © È Ã  > Ü
ü     Ä   * + A ü  
> t u  Å x     , Æ 7 
 ® ( -  6  > Ç   6	Matas
 1996Xu  color adjacency 
graph(CAG)[6][7] Fathima u  region 
adjacency graph(RAG)[8]y È  | f
x } 8 9 É 1 * + f x  j k
  f   Ê U RAG CAGa
á ¨   4 5 6²  Ë Ì  RAG
 CAGa7m* + A £ o - È
x } 8 9Þ m j f  e J  r
sp s  í  RAG CAGaÍ
I f  ¶  [ ÎJ º y ./ ² M N
¿ < 5 @ 7  U z z e p  Ï f x
} 4 5 6 g h i j ` Õ p k  Ð  
 % í A ) e©  f x } 8
9 [  È|Ix 2 Ñ Ò er f 
 Å7, CAG 2 a 4 5 6 ·  HSI
e x } HSIeAf  7 8 ø Ó
  ø  ö " Ó S  - Ô ;  X
CAGÇÈ 7 8 ø Ó   ø  ö " Ó
f 2 a  Õ   7 ~  z-  
Ål < ¨ f x } 8 9 ´ Ö 7 
A® Xv w =±
U f x } 8 97- È
f x } 8 9Í Î ChengA
2001X × Ø Ú T [9]x 	y ? ; ª ­
Ïa 3.2Ð°¬® ; ª 	 I - f e
­color space°   ® ( ; ª 	~ -
È:; x } 8 9  Le(
­color basis°Hx }   Ù   7
 Ú f x } 8 9  	:; x
} 8 9 Û Ü i ¶ A    
Ý eI I - f '7mA ] ^ H
Cheng 2000 u Ó © È   (- 
e¼ A  e  È(D  Þ
¾ ß à "¢   [10]7 
RGBeB CH  l e
m f  I -  RGBeHÈ   9
x   á >  â " O Ê Ë
Û­correlation° o ?   ¶  X   
 x } Hx } l e
 ¨ RGBe !  m ¡ x 	
y - ¬ - 	 £ o ¬ ã Û!  e
- 	 £ o ã Û!  e7 
 
f x
} 8 9ä
 x } 8 9ä
Histogram thresholding 
Region based approach 
Edge detection approach 
Neural Network 
Feature space clustering 
Combination of the above 
eä
RGB
YUV 
HIS
I1I2I3
 
CIE Lab
CIE xyz 
Hybrid color space 
CAG 
 6
 j e L   F GeH7 
2. Ø  RGBeH e   Ò(
¶   j  F Ge  Ò l ù
ë L   ;  7 8­saturation°4 5
S T 7 
£ o z y x  m j ã z  
Ò. Ë Ì  I -   e 7 
H§ x  ARGBe y Ì  F G
Ã z  ¼ Iº y 9 W f A RGB
eO   Û­discriminability°7
 F G¨ Hering M u [17]I  
A RGB e ü ø  / f O  
7Hering  A RGBe I - © 
6 Ñ Ò j Lf ù 
 $  ´ % Î
| ¨ eH  ; % & û ü  ð zÒ
j Lf ù 	¬  "    "I^
 "    ³ A Q -   H.ÍI Q 
% 6 K L  x H§ Ã z ù 	  
z Ã ù f   Hering u  Ã z 
¬x ä 	 RGBYWB    
I I -      I^ 
  Ã z  $  ´ % 7RGBY
WB L   § ÈÎJ )     
  Æ  ù . Ì § ­1°M  ¬ 
















−−
−−
=








B
G
R
WB
BY
RG
3/13/13/1
211
121
 (1) 
 RGBRGBY 
WB x ä  I - ARGBRG
BY WB ã z H  ; 7 
  F Gç mI   ARGBe 9
W f ü ø ; V ¨  n ¨
RGB ã Û!   U  X    ! } RGB
e 9  Ûö   ¶ 7   " #  F G
 & }      Ã ù ü ø 
V  / Ä PQ } · f   ¬A
 F G    W       
  "  f f  ´ %  ³ A
H% & Î/ 7 Ý mH§  
Å 6 l - È ¬ ã Û $ c !   § 
I(   f    % Ú m Å x  W 
V      &  ' Ô ;   Å7	
  Ô ; - " l ( f ü ; ? /
¢ â v w y Ì l ù
ë L   ;  7 8 4 5 64 5 6
 Ì § (2)7 
0 if  0          
if  0 255
255 if  255      
sat
x
x x x
x
<= ≤ ≤ >
 (2) 
  xÍI } A RGBYWBH
e   k ; 
satx ÍI } A £ o 7 8 <
5  RGBYWBH 7 8 k ; 0
8 255.	ë L 7 8   ; 7   (
È ¬ ã Û!    Ì § (2) © È 	 

   k ;  )  p s   È    Ô
; A(2)
  X 7 8Þ  
È    Ô ; 7 
 7 8 4 5 6e Ð 
I¨ Ïa 4.1Ð I - 7Ïa 4.1-aÐ CIE
ø a"MacAdam*+ ­MacAdam 
ellipses°7CIEø aI Q -   "  	 3
f ø ÍI 	 x"@ ü ; 
MacAdam*+ ÍI }   f ACIE
ø aH%  @ 7 , - Ô MacAdam*
+ . /  e  f    . /  .
| x 2 7Ïa 4.1-bÐCIEe :Ã
¸  ÍI  / RGBeI í § M È
f  e   I 4 h 0 Ã ¸  r
*+ ? /   ÍI A RGBe  
f O ü ;  9 G7Ïa 4.1-cÐÍ
I  1  £ o ¬ ã Û!  Þ M
í § f  e²  Ïa 4.1-bÐ"Ïa
241-cÐ ¬ ã ÛS T Þ  O } A 
 2 W z ß    eAz z ß 
 r MacAdam*+   [  ? 7 X
Ïa 4.1-cÐ 3 4 : e [ ÍI } ü
ø ;  / f 7 ö \ ¨  7 8   ;
L  A[0, 255]O " RGBe(
ß à 9   X ¬ ã Û!  Þ
Iá  ´ % e ß à  5 d ©  6 I -
ü ø ;  / f ­MacAdam*+  / 
 8
  H  t m       U ? @ M
  : ;   M È k ;.   e 
  A    M È: ; ;  Ì §
(5)  §ã z     Ò 9 y  : m 7 
  Þ l < I Õ  + E 	 Æ & ã z )
ø     M u      Ù   4 5
6 / J  I l   ( È ã Û " ¬ ã
Û   H « N ´ % m N ? @ ) ø "r
g .  ± Um ¨- È ã Û " ¬
ã Û   é ¼ Èü ø ;   " Ô  ; 
¶7 X l  - È         
Uvm   : ;   x}f "
* +  ²  Ó  l    evm 
 : ;   , Æ   ²   ( È 
  "Ô Õ 7 
 
4.2 
 ð   l  H ð í §   f
x}8 9 x}B C  ü l   
   7Ïa 4.2-aÐ	  K L M 0 ¶ 1
   x} c 	 ¬  Ã z
IC­   N O M  ý + °"· ý + 8
* + x > 7 P Q 0 ¶ R e     ¨
 IC   0 ¶ 3 1 f  S  T 
 z y z f A RGBe ¬   W 
p s        > , - B C x}
: ;   a  §­Histogram-based 
approach° î ï RGBe   x
}m j  Ïa 4.2-bÐ 0 ¶ 3 R
È U J  x> V   ICx}  x
}õ  æ  7 
 Ïa 4.2-cÐjÏa 4.2-eÐ 	 l  
     U8 9 vm   : ;   Þ (
; &      «  Ïa 4.2-cÐ
     U8 9 l   HSI eÏa
4.2-dÐ l   RGeÏa 4.2-dÐ
l    v w u   ã z ) ø   
e7 
{ | Î g h 
 - 0 ¶ 3 R   A IC
x}  r [  A -  W Õ      
U8 9      : ;   a  §x}
U X Y 7á È ²  l  HISeRGB
"    m jx}  7Ïa 4.2-bÐ
	 l  HISe m j ICx}  ¨
IC " 3 R S  Z ø "78 ø  Ó f 
c  A ¬ ã Û  HIS e - ? @
 Ô  ; x}   U Ð . 
- U J [  A IC   ¥ ¶I ^ ¨ IC
ý + \ W ] ^ p ` Õ p k  - Ò .  _ 
% 6Ax}   ` a x} IC ]  
b c 7¥ ¶" b c  `   Å © È - A
l  RGB e m j IC x}  Ïa
4.2-dÐm e    Ã z :  0 g
Ä  - Ax}  r ­   N O M  
°s e p A 0 g f " ICf ü
ø ;­measure° /  X     U
 r  % 6u d z y z f  e ² 7
 4.2-a    
	 
    
 4.2-b   
     IC  
   
 
 
 4.2-c HSI 
  IC      
 4.2-d RGB
    IC    
 
 
 4.2-e  
   IC      
 
 10
2. ¥ h ¼ A¬ c 
- ° ±   * y Ì 7 5.4.4ð
jk²    Ì È î ï  í
§7 
ö \ ¨ v w l   
f  e 	 ²  jk X  
 L 8 9 l < 	 
 
L R un R u 5.4.1ðf x
}8 9È î ï Ô Õ 7 
 I© 	 " v w 9 Ê  ( È 8 9
" ] ^  × Ø I^   Å x é 7 
 
5.2$ %$ %$ %$ %  
 	   ~ L 8 9  
 { | " Þ ¾    |¨L 8 9 ë í
  z p7¨®à p í L 8 9
 ] ^ × Ø L 8 9  x 	 ßz x
 × Ø  Ì aÏa 5.1Ð 
  x A
R y z  Ì ¬jkû ü­Feature 
detection°"jk²  ­Feature matching°
[1]7 
 
Ïa 5.1Ð¡ L 8 9  Ì a [1] 
 
  : È : ;  % 6 u " f
g h  X  L 8 9Hl <  f
L  	 i  jk  ü"²  7m
 g { @ ö : ;  U
Jp s  jkû ü4 5 6 ¤
¥ ø J | Z uö 7 , : ; 
k ; x   I  	 z ) h } [  (
)  ¢  Hm RGB  
k ; x  Ä l <  	  : È RGBÃ
z    k ; Ã) h } [  ( ) 
 ¢  H7ö \ û ü jk   J
jk²  o Ì ~ N  N ¿  ? < 5 @ 7 
    A   v jk"
²  v w A 1993 X   .È ] ^ > u
 "p í     * + 2
3 8 9Þ    ó  AD E F f
"B C Gd e L 8 97mA
(  d e  H Z ´ Ó © È  3 ²
 ± Ú   4 5 6 1 7 × Ø ] ^ 
  L 8 9, -jkû ü
"jk²    §  x 	 I© y ? - ¬ 
2  l      ­edge°¸
¹­corner° ã ª  ø ­line°G
¯ 	 jká ¨s - jk
  ­á >  ¸°
²  7[20] 
2 l    f  e 
x  	 jkIf x   º » j
k­( f  e  9 Ë  d °
 ²  7 
 
5.2.1 & ' ( ) * + , - . & ' ( ) * + , - . & ' ( ) * + , - . & ' ( ) * + , - .  / 0/ 0/ 0/ 0
1 2  3 41 2  3 41 2  3 41 2  3 4  
s L   §ë ì Ï : ;  ( ; & 
L 8 9      "¸¹ ²  6 
 A H.û ü f  e 
O  U     ¸¹7m   
: ;   o AÍ Î ­reference°
: È jkf ¼ A 6  A   û ü
y Ì jkf g h  q . 6 l  jk
f  e    "¸¹ ¯ 	 ²  jk
L 8 9N  < 5 @  ?  P Q 7 
m i Þ f x }8 9 æ Þ 
<  IL jkf ^  * + Ó © È 
6 ± Ú x >  X % 6 mj 6 	 
 jk
f  e x }ap s  -  6  m
l < l  M È f  e    
²  7 
I²  M È f  e %&    "¸
 
(Feature detection) 
   
(Feature matching) 
 
Transform model  
estimation 
  	 
      
Image resampling 
and transformation 
 12
5.3-bÐ7 
   
Ïa 5.3-aÐ e x } 
   
Ïa 5.3-bÐË  a 
Ïa 5.3ÐË  a"   e
_ O Ê  
 e Ë  a­RAG°" Ë  a
­CAG°²      ä « Aå  Ë  a
 o Ì 7 e Ë  a­RAG°    Ë
Ì f x }a¯ 	  e x }I
 ¯ Ë  a Ë  a­CAG° 1 
| Ë Ì M È  k Í I f  ; Ë Ì
jL e Þ á IM È f e x
 a x  Þ á ¨e  e x }
a  ¯ Ë  a7IMatasu  Ë 
a ü6 	 , M È f {| I
  CIE_Luve H v  A I  ø
x   uv  ¢  Ü G   § x }	 uv
¢   e x }aá ± U  Ë  a
Ïa 5.4Ð7 
 
Ïa 5.4Ð  RAG" CAGa 
 l  Ë  a í § (  e    Y S A
  v  d © M  U 
 !    ­²Ü" x ? °[  
´ %  e x }  e Ë  jk
M mj Ë  a  9  q . l  
Ë  a	 jk   / Ç È ¢  
! "    %Û 7 
Ë  a­adjacency graph°²   §
J·  ( È  º »  Ç ­topologic 
sorting°'²  6 s  6 Í Î ] ^ u^
[24]4 5 6    È î   í §As 
 §7l <   ø   º »  Ç ²  
 ÷ L ø  L L ÷ ø  < mj
 ÷ L  º »  Ç ²    A º »  Ç
l < Ç È ' !  ^ ¶ q . Ç È ' !
x } e Ë  a7A e Ë  a­RAG°
²  ¨ l   f x }
8 9  I< 5 ¾ ø ½    a   ;
­histogram thresholding°4 5 6 , -7
®( à p í o    a   ; x }  6 g
h A` Õ  â /  U o ø x }Af 
9 W  e x } f  e r s  s
ç m Iu " ? @ x } e  ¯ Ë 
aV      Ä  g { @  ? 
o ø x } e « A º »  Ç ²  u
" J 4 & © È   ¶7 Ë  a
 
 
(a) 	 
 (b) RAG
 
(c) CAG
 14
}7 
2. x }Þ l <  x > 	  
 § £ 7 
IHy z R u g h , -" ¨ A ð
 ©   î ï p í | Î ª IHy R u
, -  6  = D   mj     ¥
J  b c L Ó ± U   § £
x - Ïa 5.6Ð(a) 	 ö   :
;    ; ( ; & . ú L 
mj ± Ú x }a(b)a(b)    å
 ¥J  b c7 
 
 
Ïa 5.6Ð   l  ¥J  b c L 
" x }   
 Cohen l  x }¸¹jk¶ å
 ¥J  b cÏa 5.6Ða(a)
M È  ¶Í I x }M È ¸¹
a(a)M È ¸¹¶£   ¦ 	 a(a)
jk § £ 7 a(a)jk § £  ¯ ¥J
 b c  ¯ ¥J  b c4 5 6  I
¨ 0 ª a f Í Î   : m[]7. l  jk
§ £ r jk¶ ¯ 	 ¥J   ] ¶
l mn J  r   	 
  4 M È j
k § £ r jk¶/  n ¥J  Ç
È  Q    ] ¶7Ïa 5.7Ð(b)
 « ã . Í I n jk § £ ¥J  b
c7 
 
Ïa 5.7Ðjk¶" ¥J  b c 
 mj   § £ ¥J  b c Þ .
  ¥J  b c ²  4 5 6 ¥J 
b c ²  6 I© l  Ïa 5.8ÐÆ §7 
 Ïa 5.8Ð(a) Í I Í Î ¥J
  b c{ 1r , 2r ,…, nr } Í I ¥J  HM
È  ] ¶a(b)(c)(d) x ä Í I Ãz 
 B ü¥J  b c¥J 
H ] ¶ x ä I{
1
1r ,
1
2r ,…,
1
mr }
(a) 	   
(b)              
(a)     
         
(b) 
(a)      ! " # $ % &  
 16
 e l < x - 	   § £ s R uA, -
HÈ L  { | IÏa 5.9Ð	 , = D
  v m(a) ¯ ° n l < 
 x - 	 a(b)"a(c) y z § £ ±¨ § £
x -  mj ¥J  b c  9
 £ i  Ð ²    V  AM È
* + S Û [ 9 W  d © ­ , Ïa 5.9Ð
f 	 ² S y B + °M È jk¶ 6 u "
'g h  | I  ä jk¶ M S 
§ £ 7 
 
Ïa 5.9Ð § £ x }  ø a 
 ®( ¥J  b c ²  /    È
 6   ¥J  M È ] ¶¨
 "# ( ¥J   ] ¶9 ³  Ê
­correspondence° X ²  z o Ì l <
¨M È  ^ ¶  
    ²  Í Î 
  ² ¬ w7s  V N ¿ ? @ < 5
/ O  H § £ x }   Ïa 5.10Ð
(c)    -¥ h   U ¥J
 b cJz ^ ¶ Q z K ¶Ïa
5.10Ð(d)¥J  b c  ?  ´
%M    ² ¬ w/ å    
 U ²    å  æ ?    7 
 
Ïa 5.10Ð E L " w   § £ x }" 
¥J   
 
5.3  (Affine 
transformation) 
 A  f L  H Ý z  @ _ O £
o ã Û !  Þ á y H ¢  o Ì mj
 ö z  @ _ O s y z  @ _ O O
!  ¦ 	 r s ! (Affine 
transformation)7[26][27] r s !   ¨© §
L  7 
 ë L  @ _ O
nR  nR  r s !  
(Affine transformation) 	 L  	
: n nF →R R      ¦ §& ' (12)
§7 
( )F = Α +p p q
 
(12) 
 M È 
n∈p R Α Í I A_ O nR  ã
Û !  < 5 Ä q  z "_ O nR ) ø
L ;  Í I A r s !  ¢ @ []7 
 6  Í I ( ) _ O Í Ì (12)
@ _ O
nR 1 
   ! J
x "²ÜG ¢  ! [  I l  r s ! 
y I í §7	 }   5.4ðjk²  4 5 6
 n o " í § 4 5 6  /  I g
v  ( ) !  ¢  ! J x "
²Ü7l  r s !  L  A 5.3.1ð{|
(b) 1 (c) 2 
(a)      
 18
 
 Ïa 5.12Ð !  ø a 
 ÍI   rs!I  6 Í Î
Ïa 5.13ÐM   6 A x    
@ 	 1
d
A y     @ 	 2d 1  r
s!I  §	(16)7 
 
{ } 1
2
1 0
,
0 1translate
d
d
   = =        
T A, B
 (16) 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Ïa 5.13Ð ¢   ø a 
  ø     ! [ S   %   ´
] < E ps rotate
T
" translate
T
rs!ÍI
ã Û ! ? @ A v  w §;  G 
.det( ) 1=A  x   " y   
ü ø ­measure° © È ´ % M È j k¶
9  á >   ´ %  X j L  e   J
  ´ % 7 
5.3.3 Scaling	 
 	 
 	 
 	 
 
Stretch 
 ² M x ? Ïa 5.14ÐM  
6 e  I J x  ­scaling factor°¬s
² M x ? .ÍI e    j k¶
if   1,2,...,i n∈  "² M J x Þ 
translateT  
x 
x 
y 
y 
0 
0 
( ),i ix y  
( ),ai aix y  
(a) 
(b)     	 
 	
d1 
d2 
rotateT  
x 
x 
y 
y 
0 
0 
( ),i ix y  
( ),ai aix y  
θ
 
(a) 
(b)   θ  
 	  
 20
 x    	 
   1
k
y
   	 
  2
k
 1 2
det( ) k k=A

      (20)       

   1 2
k k
 
  5.3.2 5.3.3!    "
#$%& ' %( ) * + , - 
1.    { }=T A,B. / 0 1 B
 2 3 4 56 7 58 9  0 1 A: ;
< = . / > ? @ 
 0 1 B  A B C 4
56 7 58 9 > ? @ 
 0 1 A  A B  
2.   4 56 7 57 D  
  0 1 A$%   rotateT 5 scalingT
 stretch
T
: ;  0 1 A E F G &  
3. det( )A  H IJ K L 
        M  
 
5.4	
 
 N O !P 3 Q R S T  U V W X"Y
Z [ \] ^ O  _ ` ab c X d e
f g h . Z [ N i j " k D l m -1. n
o  pq W X; r s t  U V W X"
u c Xno   ^ H v pq
W X "Y w2.  "Y wx:   
  . y z { |   pq } ~ pq
   M  %     (   
! 2 3 h .       %   
x3 k D l m       
 
5.4.1	                  
   5.2.3   ,    c Xh
.      w 5.16  $%"
k  l m  
1. ; r vW X"Y Z [  
2.           M  Z [  
k ¡ "     "¢ L 5.4.2 
5.4.355.4.4 )   !  2 3 %( 5.4.2
! £  ; r vW X"Y Z [  ¤ ¥ 
pq X¦ §  U V X ¨ 
 ; r v} ~ 
 
 
w 5.16c Xh .      
 
5.4.2                                           
 © ª 2.3!« ¬  U V W X"Y Z [
    U V W X"Y Z [ T k ­ n
®¯ ° R ± ; ~ h ² ³ %(  ³
k ­ n® 
1. § ´ µ *
1 2 3, , , , np p p p ∈P
 
2. § ´ µ  ¶ · ¸ ¹ H
 
 
  	 
  
 
  
     
 
      M 
 

    
 
    
  
    
    
 
    
   
! "  # $ % &  
  	 
 
      
 
! "  # $ % &
 ' ( ) * +  
    
    

   
  , -  
.   
  /  0 1 2
 22
X"¢ } ~   RGBX % & pq W
X   "Ò  % & ¬  pq W XK À
b    XX   w_  % &  XX
  w_ pq W X   "Ò  
' ( " k  l m % &   ) Lb 
U V X RG5BY5WBX À R % *
+ RGBX 	 ,  W X  - I * ¼
w 5.18-b ¸ X  _  T W X
  	 C L RGBX 	 , D  W X
Iw 5.18-b¸ X  . b w 5.18-a
 / 0  L       1 2 3 h 
E ß  H \0È 255a)  L RGBX
 % & pq W X 4   T  pq W X
5 '     X 6 
 X 7  8 p
q XL RGBX 9 : b  	 , D  W
XL RG5BY5WBX  ®H ? ; 
L 0 255 XXÛ ? < = | R >8 p
q XL RGBXI : b  	 ,   W
XIW X ? b w 5.18-b ¸ X 
 XX$% * + W X    	 H 
pq XL RG5BY5WBX    w
x W X"Ò , RGBXT  ¢ Õ  
)  U V X" k ­ X"
¢ % & pq W X   "Ò % l m
@ &   X pq W X ð  Û ? 
A & + B  C D Õ ß 7 $ E . !  ê  
F   G % & pq X 7 ¯ ° H  (
I  3 [ Ô « 2]  J h  
[ Ô « 2]- 
8 K s  W X L ç ë 5ç ì û F
®  D b  T µ  ) " ×  Û M R
 W X pq W XÇ b ³ N W XD
O  ; î Å P  : b Ä Å  Q õ  ì R 
F W X   S . Û ý ¨ Ô « 1Û  b
|  h . pq  
T U Ô « 2  J V  L RGBXx
@ ' W X ®  U O   O  W X%  
"Ò K  "¢ & '   H
( )1 1 1, ,R G B  
( )2 2 2, ,R G B     1aσ  2aσ  RGB
X _ ý ¨ %H
( )1 1 1, ,R G B   
1aσ    "Ò ð  _  T W X5  '
    X 6 
 X \RG5BY5WBX
 x a G  R   "Ò   @ K   X 6

 X _ ®  U O  W XH
( )1 1 1, ,RG BY WB %F  Q   1bσ  
U  LU V X %
( )1 1 1 1 1 1, , , , ,R G B RG BY WB H 1bσ 
 á = ×   "Ò b   "Ò
_  T W XI JK    p q W X
Lp q W X  _ í  Y s §
/ 3n   
W XH  W XHI JK . bp q W X
M ´  µ 1 2 3 / 3
, , , ,
n
p p p p   Fn
® H Z [     µ \ ® Æ h   
L RGBX % ® ( )2 2 2, ,R G B  
 2a
σ
JK    "Ò _ í  Y s §
/ 3n   W XH  W XHI JK ` ]
4.3.4 !  3 ` ]  p q W X ^ _  M ´
 µ / 3 1 / 3 2 2 / 3
, , ,
n n n
p p p+ +              W
X   W X\Ù ` Û ý ¨ [ Ô « 2] 2 / U
W Xa L RGBX í  Y s t
2 / 3n n− ×    p q *
2 / 3 1 2 / 3 2, , , nn np p p+ +          
 
 F  l m À a h § ´  µ ¶ · ¸
¹ H 1 2
... nI I I =  I  Ô l m & ' .
bp q W X M ´  µ
1 2 3 / 3, , , , np p p p   F p q W X¶ ·
¸ ¹ H× b 3 h  300>C : b   O
W X M ´  µ
/ 3 1 / 3 2 2 / 3, , ,n n np p p+ +           F ¶ · ¸ ¹ H
× b 3 h -100>FX  M ´  µ
2 / 3 1 2 / 3 2, , , nn np p p+ +        ¶ · ¸ ¹ H× b 3
-50 
 24
Step 4: Z [  z d - 
 p q W X g ? LRGBX 
H
( )1 1 1, ,R G B  F 
1aσ %®   bp q X W X
g ? L RGBX H
( )2 2 2, ,R G B  F  2aσ  
l m  _ ` - 
1. % ( )1 1 1, ,R G B  ®  1aσ 
 L RGBX á = 
 "Ò    "Ò _  T
W X5  '     X
6 
 X  
2.  x × ¡ & '  XX W
X"Ò   w%   "Ò K
 ¬ $ U O W X4 h iF
H
( )1 1 1, ,RG BY WB  
 1b
σ
 
§ &  z d - 
p q W XL XX    "Ò
ð   R H
( )1 1 1, ,RG BY WB
   1b
σ
K   
Step 5: Z [  z d - 
  l m 4 l m 5 & ' p q W X
RGB    XX ð  - 
( )1 1 1, ,R G B  ( )1 1 1, ,RG BY WB %
  1a
σ
 1b
σ
 
l m  _ ` - 
1. LU V X %
( )1 1 1 1 1 1, , , , ,R G B RG BY WB 
H 1b
σ
 á = ×
  "Ò b   "Ò _ 
í  Y s t
/ 3n   p q *
1 2 3 / 3, , , , np p p p   F
n® H Z [     µ
\ ® Æ h × j 3 h  µ \
®  1/100ki / 3n   
p q * LU V X  µ H
b 1 / 3
, ,...,
n  2N N N  4 F 
Q ¶ · ¸ ¹ H 1 2 / 3
, ,...,
n
I I I   
l 3 h  300 
2. L RGBX  ®
( )2 2 2, ,R G B    2aσ á =
  "Ò b   "Ò _ 
í  Y s t
/ 3n   p q *
/ 3 1 / 3 2 2 / 3, , ,n n np p p+ +           k
i
/ 3n   p q * LU V X
 µ Hb
/ 3 1 / 3 2 / 3, ,...,n n n+ +          2N N N 4
F  Q ¶ · ¸ ¹ H
/ 3 1 / 3 2 2 / 3, ,...,n n nI I I+ +           l 3 h
-100 
3.    W X   W X\Ù
` Û ý ¨ [ Ô « 2] 2 / U W
XaL RGBX í  Y
s t
2 / 3n n− ×     p q *
2 / 3 1 2 / 3 2, , , nn np p p+ +        k i
2 / 3n n− ×     p q *LU V
X  µ Hb
2 / 3 1 2 / 3, ,..., nn n+ +       2N N N4F
 Q ¶ · ¸ ¹ H
2 / 3 1 2 / 3 2, ,..., nn nI I I+ +       l 3 h
-50 
§ &  z d- 
 ; r = 
  § ´  µ
1 2 3, , , , np p p p ∈P § ´ 
µ  Q  µ H
[ ]1 ...= 2 nN N N N % F ¶
· ¸ ¹ H 1 2
... nI I I =  I  
Step 6: Z [  z d- 
 26
W X" Y + B     " Y wÙÚ  
          . y " ¢  b : 
*w(a)  T    } ~    Q
' w(b)  (       U D h
²   1F   1A5   . y 
1 1 1( , )x y=R >F    L    h²
  2F   2A5   . y 
2 2 2( , )x y=R >%     6  (  
    FF   6
A
5   . y 
6 6 6( , )x y=R  
 
w 5.20    ð ñ 
 | 
      T n    " Y 
 2 k i 
 k ­ z d ]× ­ k i   
. y -
{ }1 2 3, , ,... nR R R R F ( , )i i ix y=R 
 1,2,...,i n= ]^ ­ z d k i  T  
 D -
{ }1 2 3, , ,... nA A A A F
1 2 3 ... nA A A A> > > > k ­ z d   -] i
    . y
( , )i i ix y=R  Q   iA
ÈË Ì ³ k ­ z dk i b ×  3 n× 0
1FK  b (21) 
2 3[ , , ,..., ]n= 1F F F F F
  
(21) 
F 
[ , , ]i i i ix y A=F
 , where  1,2,...,i n=  (22) 
%(           . y  
      Ë Ì  , 5.3 !  ,  
             
 
5.4.3.2	

  
 5.3 ! 2 3     { }=T A,B
J K . / 0 1 B Û ?     x
  y  	  ) Û ?   :  
    Y u 0 1 A~ I Hdet( )A 
J K   x  y  	 A B M ñ
F   J K         M
ñ%w 5.212 3  F 1R5 2R5 3R
" ¢ J K w(a))       . y F
 Q  " ¢  1
A
5 2
A
5 3
A
8    
   
{ }=T A,B
  = w(b)  (b))
      " ¢  1
T
5 2
T
5 3
T
F  Q 
 " ¢  1T
A
5 2T
A
5 3T
A
 
 
w 5.21    b        w 
   w(a) w(b) :  Q   
(a) (b) 
1A
3A
2A
(a) 
x 
(b)    	 
          
1R
2R
3R
4R
5R
6R
y 
 28
 FQ     ¦  h i  (28) 
{ }1 2 3, , ,... nT T T T F ( , )i Ti Tix y=T 
 1,2,...,i m=
 
(28) 
(27) (28) × § h i b TFF
2 3[ , , ,..., ]T T T T Tm= 1F F F F F 
[ , , ]Ti Ti Ti Tix y A=F û  1,2,...,i m=  TF I J
K     T
I
p q * ¥; 
h . Ô « ~  L T
F
¥;Ù
Ú º   ¢ ~    
{ }A,B
 R
F
¥;
Ã L T
F
¥;@ &    
{ }A,B
 R
F
¥
;ËÌ ¯ ° ¨     
{ }A,B
 R
F
¥;
@ 
     
  
{ }A,B
 R
F
¥; @ 
    Ë
Ì $ %  Ô  5.4.3.2!& ~    
(23)ËÌ ~      Ô      M
í b det( )A   I  B p q ¥; RF\F
 2 3
[ , , ,..., ]R R R R Rn= 1F F F F F û
[ , , ]Ri Ri Ri Rix y A=F a      { }A,B
= × p q ¥;
{ }
R
A,BF
\F
{ } { } { } { } { }
2 3[ , , ,..., ]R R R R Rn=A,B A,B A,B A,B A,B1F F F F F
û
{ } { } { } { }[ , , ]Ri Ri Ri Rix y A=A,B A,B A,B A,BF a RF 
{ }
R
A,BF
k ¥; T % (  (29) 
{ } { } { } { }
1 2 3
1 2 3
... det( )R R R Rn
R R R Rn
A A A A
A A A A
= = = = =
A,B A,B A,B A,B
A
 
(29
) 
(29)
{ }
R
A,BF
ß 7 $ % K 
(30)- 
{ } { } { }[ , ,det( ) ]Ri Ri Ri Rix y A=A,B A,B A,BF A i
 
(30
) 
 
Q R x 3 (30) b h .   $ %
& ' (  2 3  © p Õ 1 ª  
© p Õ 1 ª -      Õ  
 h L     p q ¥; T
F
ÙÚ º 
    
{ }A,B
n o   p q ¥;
RFp q ¥; TF_K     I
{ }1 2 3, , ,...T T T TmA A A A _¯ h ÙÚ p q ¥; RF
det( )A     I  « µ -
{ }1 2 3det( ) ,det( ) ,det( ) ,...det( )R R R RnA A A AA A A Ai i i i
 
Fm n≥  
 ¬ ­  8
{ }1 2 3, , ,...T T T T TmA A A AA   
û
{ } { }, 1 2det( ) ,det( ) ,...det( )R R R RnA A AA BA A A A i i i 

{ },
T R⊇
A BA A
 
 
Á Â 5.4.3.2 !     (24)
   
{ }A,B
    ¦     ß ´ $
% ® ¯ ¬ % ( ° 3     
8    . y  I
{ }1 2 3, , ,... nR R R R  F 
( , )i Ri Rix y=R       { }A,B~
  ×    . y  I
{ } { } { } { }{ }1 2 3, , ,... nA,B A,B A,B A,BR R R R
 F 
{ } { } { }( , )i Ri Rix y=A,B A,B A,BR { }1 2 3, , ,... nR R R R  
{ } { } { } { }{ }1 2 3, , ,... nA,B A,B A,B A,BR R R R
ý ¨    (31) 
{ } { } { } { } { } { } { } { } { }
1 2 3 2 3 4 2 1
1 2 3 2 3 4 2 1
... det( )n n n
n n n
− −
− −
= = = =
A,B A,B A,B A,B A,B A,B A,B A,B A,BR R R R R R R R R A
R R R R R R R R R
  
  
 
(31) 
F  2 1i i i− −
R R R
 
{ } { } { }
2 1i i i− −
A,B A,B A,BR R R
 3,4,...,i n= " ¢ J K
2i−R 5 1i−R 5 iR  
{ }
2i−
A,BR
5
{ }
1i−
A,BR
5
{ }
i
A,BR

 
  )       
n R    (31) b   h .   $ %
& ' (  2 3  © p Õ 2 ª  
© p Õ 2 ª -    . y    Õ  
 h L     p q ¥ ;
2 3[ , , ,..., ]T T T T Tm= 1F F F F F Ù Ú º    
 
{ }A,B
 n o   p q ¥ ;
 30
 T í b 1 1,1
log RA δ+ 
2 1,1log RA δ+ … 1,1log RnA δ+  « µ 
× Ã Ö  1,1
log RiA δ+   1,2,...,i n= ¢
¬ $ L T
′A
 % & Ä Å  
4. b L T′A % & ¬  R′A « µ T $ ' Æ
o 8 L T
′A
$ % @ ' p ­ í b
1 1,1log RA δ+  2 1,1log RA δ+ …
1,1log RnA δ+       3 L] k ­ %
& ¬      1,1
log RA β δ+  Q
« µ  T
′A

log TA γ log TA γ  Q
 p q
[ , , ]T T T Tx y Aγ γ γ γ=F 
{ } 1,2,...,mγ ⊂
h i 
1,1
,k βC F 
1,1
,k βC
 x  1,1  Q 1,1δ β  Q log RA βû
 1,2,...,nβ = k  Q % & ¬  ] k
    1,2,...,k p= \  ¾ QR 7 D O ®
¡ " 1p= I J K 1,1δ ( R′A L T′A 
@ '×  ×  Q « µ a % 1,1
δ
@ ¬ 
ß × ­    $ %K  
{ }1,1 1,1 1,1 1,1,1 ,2 ,, ,...,k k k k n=C C C C  
5. Ç  1,1δ   % 1, 1log logj Tj RA Aδ = −  j
 1, 2'm n− Ç  | 
 3. 4.  l
m % & ¬  Tγ
F
 h i b
{ }1, 1, 1, 1,,1 ,2 ,, ,...,j j j jk k k k n=C C C C  
H  '³ l mË Ì 9   R © p Õ
1ª TF ¥ ;  R Û ß  ,i jδ "   ¹ ¥ ;
{ }1, 1, 1, 1,,1 ,2 ,, ,...,j j j jk k k k n=C C C C F  1,2,...,j m n∈ −  k
J K È  ,i j
δ
Ù Ú  ¹ ¥ ; ®  
b Ë Ì 9  ~   T
F
" ¬   T ¹ ¥
; _  T « µ  R
F
¥ ; : « µ Ri
F
 
Q(correspondence)    5.2.3 ! É Ê ©
ª   ¥ ;   « µ  Q
(correspondence)   ×  À h . Z [ 
Û ` ] G & û¤ ¥ D ê !  A &  z { 
#  R © p Õ 1ª     Õ N   >
¤ ¥ ×  % &       I $  $  
| 
 l m 59 Ë 'º  R © p Õ 2ª
 Ô «  (  l m R © p Õ 2ª}
~ (× l M   
Ln o   R
F
 p q ¥ ;  
2 1i i i− −R R R    
1 1 2 1 2 1
1 ( , ) ( , )
2 Ri Ri Ri Ri Ri Ri Ri Ri
x x y y x x y y
− − − − − −
− − − −i
F   3,4,...,i n= C l m 2 h ²  ,i jδ 
F J K
,
log log log log(det( ))Tji j Tj Ri
Ri
A
A A
A
δ − = = A
I
,det( ) 10 i jδ=A h ²  
1 1 2 1 2 1
1 ( , ) ( , )
2i Ri Ri Ri Ri Ri Ri Ri Ri
S x x y y x x y y
− − − − − −
− − − − i
 
(33
) 
F  3,4,...,i n=  
Ç  B ® K   2 1i i i i
S
− −
= R R R

© p Õ 2 ª 8 2i−R 5 1i−R 5 iR " ¢  Q TF
aT 5 bT 5 cT 
,
2 1 det( ) 10 i ji i i i a b c a bS δ− −= = × = ×R R R T T T A T T T  
 
6.  R (33)  no   RF  T « µ
 i
S
H$ %& '® I
{ }3 4, ,..., nS S S=S ß ´ L TF " ¬
 T ¹ ¥ ;
{ }1, 1, 1, 1,,1 ,2 ,, ,...,j j j jk k k k n=C C C C 8
1,
, 2
j
k i−C 5
1,
, 1
j
k i−C 5
1,
,
j
k iC " ¢  Q TaF5 TbF 5
TcF Fa5b5 c 1,2,… ,m
®   h ² L
{ }1, 1, 1, 1,,1 ,2 ,, ,...,j j j jk k k k n=C C C C 
E Ì )  p q *  
   F % ,i j
δ
J K 7 D M x  & H
1,
,
j
k iS   
  (34) 
, ,1,
,
110 ( , ) ( , ) 10
2
i j i jj
k i a b c Ta Tb Ta Tb Tc Tb Tc TbS x x y y x x y y
δ δ
= × = − − − − ×T T T i
 
(34
) 
F  3,4,...,i n=  
 32
 n o  . b     . y R &
'w 5.22-bX  U V m ¨ 0 1
   } ~ " Y & '     " Y
ww 5.24 
 w 5.22-bn o    T 6  p
q   >w 24      T 33
pq   " ¢ k   pq   
R 5.4.3  MË Ì A & n o
  à  b        (36) 
{ } 0.873 0.012 443.211,
0.000 0.891 555.321
    =         
A, B
 
(36
) 
      + B $& ~ n o  
L      á â 6   /  
   H  b     à  b  ã ä 
¯ °   6  )  n o     
   6 7 M x   ¾   ¬  6 7 M
ñ Û ß 
Á Â (36)            n o
     Ü  NMSEH K  b
(37) 
NMSE 12.35=
 
(37) 
  h . + B È  µ > T 12  ¸
	H    Ü ³ N Ü ¥  ; b
M7  § ® H@ 
  å Å Ü
\truncation erroraÈ Àn o    
   : µ  µ H Æ æ § ´  _
 @ 
  Ü î NMSEL 12    ç D
	L$Th . Z [ É Ê  9 ÀE "è
é + B  
 
w 5.22n o  %  F " Y w 
 
w 5.23     
(b)	
      
(a) 
 34
calculated ideal
0.008 0.032
0.001 0.003
 = − =  − AError A A
 
(40) 
 T « µ  Ü 1 L 5% % _ c à R
ñ ò ¬ Nh . Z [LÓ T ´ µ  - f ¶ [
 í î ( ó T½ ô M+ B  
  
 
5.6  
 Ni j ¹ õ « ¬  c X  d e h .
Z [bR ] ^O « ¬  U V W X "
Y Z [$G & |q û  h W X   
)  $%  R W X          p
q % } ~ h .  " Y T% ( è *  
, b$TZ [ ö ÷  
1.  R       $% d e  
   Tpq "  h ²  
n o   pq   Õ
(corrsepondence) 
 5.2.3!2 3  9  Ô É Ê U
V  h . Z [-Cohen « ¬  ê O
0    \convex hullah . 
¯ ° ± ²     pq ¥ ; 9
 | 
 "   l mF R ê O
0    M  $@ ¬ pq
¥ ; _ : pq  n o  pq 
  Õ # Cohen 4 ¢ a ¬ Ñ
pq ¥ ; " Cohen >  c 
pq "  ¯ °  F ø " Y Z [i
j  % & ù ú R NZ [L 5.4.4
! 3  ©pÕ 1ªbM  
I $ û e      pq "
 4 ß7@': pq    Õ  
2.  3      T m  pq C
n o    T n  pq 8 Û o
ü | 
 Cohen« ¬  ê O 0 
  h . Ô « ¤ ¥  ! 
ê> ¤  ê O 0    h . 
!  êK   - ( )O mnNh . Z [
b        M  !
 ê> ¤ ¥ (( ) ( ))O m L n L− × − \ F  L
À$ p q ` Ò 	 r s Hh ² b
5.4.4.2!aCNh . Z [ Ô ë
ÞU V W X " Y Z [L] ^O
9   c F  ¤ ¥ !  ê> Ù
Ú × 6 6× 0 1F  A F ý 0
1À  Nh . Z [!  ê¤ A
Ü ¨ Q R bå ò 5þ í¤ ¥
f x d e h .  Ó ¨  
 
 
               	 
  	 
  	 
  	 
       
 
6.1                                
N ¹ õ    Lb« ¬ ×Ü R bc
X   f x I 7   Í  6 
    L
b f x Í  ¬ $b Z [     f
gñ  Z [ ×Ù Ú   á â f   
Lz d ö  Í  ¬  TÙ Ú    f
g  
M , $T  f Í  Z [N ¹ õ 
  Í  Z [¯ ° Q R b% (k Ô «  
1.	

           ! " # $ 
2.	
  % & ' ( ) *
+ , - . $ 
L    , N ¹ õ  Ô    Í
 Z [} ~  æ  © ª  
  Í \Image RetrievalaÙ Ú º /
 ¥ ¡  w 6.1- segmentation5
feature extraction5representation  query 
processing[32][33][34] ³ N å |   
À¥  R ± ' (  d @' ø  · & '
 z d  
L /  l mSegmentation å
| À Û ß  	 " ¬  D O
À7 
 À a ±  f g 0  È  
@ ¬  î G D h ³    À Ï ÀT 
²   À   Segmentation ] ×gå
| À¥ L @ ¬  f g Lõ  z
{ 
 36
 
w 6.2d e c X   Í    w 
 
N  ã « ¬  d e   Í  Z [k
D +   l m-Ïpq   U V W X " Y Z
[Ð ÏA ½ t   ´ %  W X õ  " Ò
 w Í  Z [Ð" ¢ b 6.3 6.4!
    
 
6.3  ! " ! " ! " ! " #  $ % & ' ( )#  $ % & ' ( )#  $ % & ' ( )#  $ % & ' ( )  
/ 0 1 23 4 5 # 6 7 89 
: ; < =  ! > ? @ > A2 !
" # > ? 6 7 8> B C D E F G AHI	

      ! " #JK ! " # LM >
?$ 
N O   PQ R S   T ! " #HID
EU V W X 5 #  Y Z [ \ ]> ^ _color 
histogram based analysis`a b c d ! " #
)  ef > g  ! h i jk )l  
 ! # " #mn o p c dl" #q r T
 ! " #> ?D Es d/ Z t )9  0 1 u
j LM " #> ?6 7 > ?jl   !
" #v > g  o p $ 
w x y : ; z { |    W X  !
" #> ?b } * ~  jC   ! 9   
! " # q r _ ! #) #  w P
`J9 K ! " # o p _ ! " # K
n  > ?]`$c d9    ! %   
 9  D Eh i  b c d9 K  !  K
n     FG         
   m            
   $ 
 C   >     ! " #   i 
\  P ! " #LM > ?6 7 $ 
 
6.3.1 ! " #    i   
 )/ 0 1      ! " #  ¡ BA
 	
 )  ¢ / £ ¤ ¥  ¦ L§ L
 ¨ © ª  " #¦ «A¬ ­ ®  ¯ °#
 ± ²   ³ ´ #µ …$¶  )  )·
¸ ¹ º »  ¼ { ½   © ¾ )    !
#T#p ef ¹ B  ¿    mn 
   B  À Á ¼ { Â Ã Ä Å  q r $ 
BÆ Ç È l  LM   ! " #)#p e
f  q r É Ê   Ë Ì Í Î / 0 1 v Ï Ð
     Ñ u A 
1.       	
    
               !
" #$ 
2.  	
   % & ' ( )    
*    + ,- . $ 
>  c dw y C Ñ u }  ! " #HI>
B2Ò i  ! " #HI8P2Ó    ! " #8
C  : ;  
6.3.1.1 Ò i  ! " #HI 
Ô V Õ Ö Ñ u 1z { |   È × 
	£   ! " #   Ë  j¾ )  <
=T   " #Ø Z n \ ]¨ ©  ! #
 o p      Ù n « 6.1  v Ú l" #
   B   MFC   $¾ G  Û § Ü IN
O   MFC  \  Li ) 1996 Ô V u jT
RGB " #[ \ ]c dÝ Þ   " #ß à
 38
Intensity
Hue
Number
Number
 
E] 6.3(c)F the characteristic color in image 
z { |  TE] 6.3(b)FC [ \ ]
ò j¾  N @ Lé ï =Bl   MFC«
O P ]E] 6.4FT I# [ \ ]ò É Ê HI
 C * N @ Lé ï >  ¨ © ³ # Q R  ' ³
´  G H 	/ £ C  MFCT H #  [ \
]É Ê 	 Ü  C * N @ Lé ï >  B S
T P¯ ° G H C * MFC$ ) U  * HIj
MFC=Bc d    Ñ u  %    !
" #9  D EHI ! " V B2Ò i  ! "
#8F : FG 9 KD EHI$ 
 
6.3.1.2 Ó    ! " # 
/ : ; }  6.3.1.1 i j Ò i  ! " #
Ó   l  Lb   ! " #$Ó   Lb  
  " # \ á W X Ñ u 2 FG $Ñ u 22
 	
   % & ' ( )    *  
 + ,- . 8È ×  ! " #)    
U Y T+ ,Z ¼ ø Ñ u u [   ! " #e
f Q \ É Ê  B ! " #  ] ^ 
_<= ! " #U  j¾ T   +
, `   U U j¾ T+ , \  
s dÒ i  ! " #T x P y \ a  projection
b ä ¾ $ ! " # c d xP y \ a  projection
¨ © lT c d xP y \ a   column& row
w v  e f  ! " #  0 m$  
} l" #T  + , projection n g 
ê  )l  xP y \ a  + , 0 «"1
2 ) 1¨ © l" # > g )   + ,
<=l" #k ) ! " #$ ä h ü dW
i} j ,n ;   B 0.5 C æ Ò i " #) x
ö y  + , projection g    + , k ì 
) 0.5=} ø Ò i " # l g $ 
Õ Ö ø ] ^  _«E] 6.5F v O m
# n ¨ ©   + ,j¾ l" # projection°
# n n ¨ © l projection g  + , k ì )
0.5 o  _b`Ò i # e f ø  _  ø l
    ! " #=B ± G H v k  ³ ´
# Æ  ! " # " #q r b  : =
FG  ! " # LM > ?T ò À } p q
 {  $ 
  r P  æ e f 9  D EP9 KD E
  ! " #¹ U  o   st u ø ¾ 3 
É Ê = " #mL§  B    ! " #$ 
6.4     	 
      
Intensity 
Hue 
Number 
Number 
 40
[ P 	M (Q R   G J   
  d e ] (j Q RS T    J   
  d e ] 9w x y z m  P 	M Q R
   S T    G (   ) 
  A f g    f g  Dd e ] 9+ , ¡
 ¢ £ ¤ ¥ (  ¦ D    [ Y
M    § C ¨ ©   (ª )( « N }
~ ] ¬ ­ ([} ~ ] ® ¯ ° ± ¬ ­
   (* | ² ³ -   77.8%   9
´ µ v    * J N \ ] ¶ C · ¸ ] ¹º
»  9+ , v ¤ ¥ ( «     RX 
 Y M  } ~ ] ¬ ­ ( b DIC (
DI P 	M 2 K  G DIA ¼ ½ di(¾
    (45) 
1
2
3
4
5
6
2*
2*
2*
2*
2*
2*
                  
i
i m R
i
i m G
i
i m B
i i
i m RG
i
i m BY
i
i m WB
R Rd
G Gd
B Bd
RG RGd
BY BYd
WB WBd
σ
σ
σ
σ
σ
σ
 − −     − −      − −= =    − −      − −   − −     
d
  

  =i 1, 2, … , n,     (45) 

 iR¿ iG¿ iB¿ iRG¿ iBY¿ iWB ¨ ©
 v  0 P  v  9 i   0 >  ) w #
 mn $ 
Z ¼ ø   ¡ s P  9 i   0 k ) 
! " #x 
 di ò v   y 0 } B z n { 

 di   y 0 B  n $Z ¼ di a  ò y 0 mn
  ª c d\ /  (46) %  I a  v  y
0  |   $ 
1,...,6
1,...,6
1,...,6
1,...,6
300,  if       max( ) 0    
  0  ,   if      min ( ) 100
-300,   if     max( ) 0
and min ( ) 100 where =1,...,
i
jj
i
jj
i i
jj
i
jj
d
d
I
d
d i n
=
=
=
=
 ≤ >=  > ≤
 
(46) 
 ª )(ÀG Q R    Á(d e
]  DC 300(Â G C P Q R     
S T Á(d e ] Ã C 0 ¹-300( DC 0
-300 t C  [Ä o 4 5 Å  ` a M  
Á(J S T       ­ »   LÆ
Ç     ([ 100 |  U G    
­ È  d e ] (300,0,-300 C É Ê 'Ë Ì  
\ ] (, Í * | Î Ï Ð , Ñ  Ò Ó f i
Ô Õ 9 
#$ d e ] I   D'(Ö  J N,I
×  4.1<     ()* l Ø 4 5   

(k R    () 4 5   
 q l (
, 4  }  ­  ¤ ¥ (u v > 	
P
Ù Ú \  · ¸ ] (ª )(> 
*
| K Û  Ü Ý HIS  " M > W  º »  (
¾ 6.72 Þ (LaUt Ö  ,   
   R his  "    ß à ((b) t + , 
     .  4 5     ? @l Ø  
  ß à (á â ã  [LaUä å æ ç  
  ! " è é ê ë ì í î ï  (j c F ð
ñ [(b)  ò K > W ó ô u õ ö ÷ ø ù j
> W  º »  (v ß à c Áú û ü ý Þ 
 £ þ / A   = >  4 5     ?
@ Û 9 
 
 
 6.7(a),       R his
 "    ß à  
 
 6.7(b) + ,       .  4
5     ? @l Ø    ß à  
 #$       '(
$ C
 ]  	     (   8 -  
h i     (| v     )* h i

(   ,    	   
 42
 
| Þ   6.8VÞ (c F  p1
t Q R ci E F  ([È · C k G
H  (p2V t | p1 C I  (k C J K
 A  L  ! " (k RN C L  (2
| 8 R
  ! "  ' ( $  ¨ (P M  
½  E F  N } u ! " / $ 
Ö C ­9u v ( D  R & ¡ 
Ö([ , ð R ? @   G O
C E F  G  G H  (N ß àK âã  
P9P G H w x * | k  6.10Q
R9 
 6.10M°  Ö
b k & ¡  `  F 0  6.10 (a)¿
 I  F 0  6.10 (b) « j$ (
(a)(b)M S :   
  	 	Ö
ß à( T : V  
  ! " '2l Ø
 Öß à9á âã  & ¡ 
Ö8 R% "  ' ( $  ­9j[
 Ö( T : S : U
V # . W ö(P u   ! " j / $ 
 X 9 
 
 
 
 
 
 
6.5	 
 
 Î Ï 6.3 6.42  3 	B  (  

   > 
  * Y p q C A  A Z s [
L¹ A \ ] U(E  - A Z s [ (   
,  t A  Ö
   
? @ M( - ,  L1 norm E 8 ( 	 

*  ^ Huang R 1999 = > 	þ *
[35]9Î Ï D c  Ö E 8 6(w x | D
c 	  
   6.3(a)(b |   
= > 	6¿%$^^%$ 6 MFC 
 
  6(8 r _ `  800 a Ë b  
  h
i 
    (N   ß à¾ 6.11¿
6.12 6.139 
E    ß à(   = > 	6
6.11§ ò K C c  d c (j^$#%#$% 
6 6.12d c A e(C c  ° e(
f t u C f g 
   Ë b  ß h i j (j
- 6ò K k 67 8  l D c ¿P D
c  m h i  n 94 '+ , MFC 
  
 	ß à 6.13(-  > ß àC C c 0
Circular  
p at t e rn  
k, pixel 
probability 
0   45   
0 10 20 30 40 50 60 70 80
0
0.05
0.1
0.15
0.2
0.25
0.3
0.35
0.4
6.10(b)   correlogram 
	 
           
R e ct an g le   
p at t e rn  
k, pixel 
0 10 20 30 40 50 60 70 80
0
0.05
0.1
0.15
0.2
0.25
0.3
0.35
0.4
probability 
0   45   
6.10(a)  correlogram  	

           
 44
6( v w # $  
  D ð ? @ (P , 
K  Ú   « ½ (c Á¬   =  
  â
  ! " r s 9 
 4 '( v w  
    ? @ ( ?
@  W K R 
    Û  4   
Ö  6([ « w ÷ B
Ú  A  \ ½   c ÁLE ,  ? F j
P t 2K  G   U( > 	Öè é K
! " P # $ (     |  , Ë b  ¿
q      
  R800 ì e	r _ ` h
i   É Ê(y K ã ¡ 	$ à(- ~  ¢
* £ 2 E , ¤   ¥  r _ ` h i $ àÉ
Ê( - B  M  ¦ 9 ¤ ì  Áh i r
_ ` § ¨  © « 6 W ª « ¬ (t ­ J v ®
6 ] C Â ¯° ± v ? @ 	 ²    9 
 
 
 
 
[1] B. Zitova and J. Flusser, “Image 
registration methods: a survey,” Image 
Vision Comput., vol. 21, no. 11, pp. 
977-1000, 2003. 
[2] H.D. Cheng, X.H. Jiang, Y. Sun and J. 
Xang, “Color image segmentation: 
advances and prospects,” Pattern 
Recognit., vol. 34, no.12, pp. 2259-2281, 
2001. 
[3] H.D. Cheng, X.H. Jiang, Y. Sun and J. 
Xang, “Color image segmentation based 
on homogram thresholding and region 
merging,” Pattern Recognit., vol. 35, no.2, 
pp.373-393, 2002. 
[4] P. E. Trhanias and A. N. 
Venetsanopulos, “Color Edge 
Detection using vector order 
statistics,” IEEE Trans. On Image 
Proc, vol.2, no.2, pp.259-265, Apr. 
1993. 
 
[5] M.J. Swain. Color Indexing. PhD 
thesis, University of Rochester, 1990. 
[6] J. Matas, R. Marik and J. Kittler, “On 
Representation and Matching of 
Multi-coloured Objects,” Proc. of 
ICCV '95, pp. 726-732, June 1995. 
[7] J. Matas, R. Marik and J. Kittler, 
“Colour-based object recognition 
under spectrally non-uniform 
illumination,” Image and Vision 
Computing, vol. 13, no. 9, pp. 
663-669, Nov. 1995. 
[8] S. T. Fathima. “Data and model-driven 
selection using color regions,” Image 
Understanding Workshop 92, pp. 
705-716, Morgan Kaufmann, 1992. 
[9] H.D. Cheng, X.H. Jiang, Y. Sun and J. 
Xang, “Color image segmentation: 
advances and prospects,” Pattern 
Recognition, vol. 34, no.12, pp. 
2259-2281, 2001. 
[10] H.D. Cheng, X.H. Jiang, Y. Sun and J. 
Xang, “Color image segmentation 
based on homogram thresholding and 
region merging,” Pattern Recognition, 
vol. 35, no.2, pp. 373-393, 2002. 
[11] Phil Green and Lindsay MacDonald, 
“Colour engineering” Chichester 
Wiley, 2002. 
[12] Y.I. Ohta, T. Kanade and T. Sakai, 
“Color Information for Region 
Segmentation,” Computer Graphics 
and Image Processing, vol. 13, no. 3, 
pp. 222 – 241, July. 1980. 
[13] Vandenbroucke, N., Macaire, L., and 
Postare, J.G.: ‘Soccer player 
recognition by pixel classification in a 
hybrid color space’. Proc. SPIE - Int. 
Soc. Opt. Eng., USA, 3071, April, 
1997, pp. 23-33 
[14] Wesskamp, B., Jendral, A., and 
Bryngdahl, O.: ‘Hybrid color 
holograms’, Opt. Lett., 1996, 21, (22), 
pp. 1863-1865 
[15] P. Green and L. MacDonald, Colour 
engineering, Chichester: Wiley, 2002. 
 
[16] M. H. Perng and T.C. Chen, “Optimal 
color segmentation with an application to 
the PCB industry,” in Proc. of SPIE - Int. 
 46
vol.26, no. 1, pp. 18, Jan. 2004. 
[40] G. Corneloup, J. Moysan and I. E. 
Magnin, “BSCAN image segmentation 
by thresholding using cooccurrence 
matrix analysis,” Pattern Recognit., 
vol.29, no.2, pp. 281-296, 1996. 
[41] L. K. Soh and C. Tsatsoulis, “Texture 
Analysis of SAR Sea Ice Imagery 
Using Gray Level Co-occurrence 
Matrices,” IEEE Trans. Geosci. 
Remote Sens., vol. 37, no. 2, pp. 
780-795, 1999. 
[42] J. Shanbehzadeh, F. Mahmoudi, A. 
Sarafzadeh, A. M. E. Moghadam, Z. 
Asarzadeh, “Image indexing using edge 
orientation correlogram,” Proceedings 
of the SPIE - The International Society 
for Optical Engineering, vol. 3964, 
2000, p 102-8 
[43] ³  ´ (Vç ´ ¡ µ m 	¶  É , 
· ¸  ¶ ¹ º £ þ (2003. 
[44] » ¼ ½ (¾  ¿ À   	f g E 8 (
· ¸  ¶ ¹ º £ þ (2004. 
[45] Á ¥ Â (L     Ã E 8 ? @ (
· ¸  ¶ ¹ º £ þ (2003. 
[46] ³ Ä ( Å ¶ Æ Ð ,  É ¶ Ç 8 È
É Ê æ Ë µ m 	f g  É (¥ Ì Í Î
Ï ?  ¶ Ê     Ð ¹ º £ þ (
1997. 
[47] Ñ Ò Ó ( 
  Ô  Õ ®  Ö × ?
@ ~  ( ¥ Ì M  ¶ ¹ º £ þ (
2005. 
[48] 
 Ø Ù Ú (¶ Æ n Û D ð (¥ Ì
Ü Ý  ¶ Ê Þ ~  2( ¹ º £ þ (
1982. 
 
 
 
 
行政院國家科學委員會補助國內專家學者出席國際學術會議報告 
報 告 人 
姓   名 
 
彭明輝 
服務機構
及 職 稱
 
國立清華大學動力機械工程學系教授 
   會議時間 
      地點 
 2008 年 7 月 25～27 日 
 布拉格 Hotel Constans 
本會核定
補助文號
 國科會研究計劃補助 
 編號：NSC 95-2221-E-007-075-MY2 
會 議 名 稱 
 (中文) WCSET 學會 2008年年會（主題：International Conference on Computer Vision, 
Image and Signal Processing，CVISP 2008）
 (英文) CVISP 2008，WCSET 
發表論文題目 
 (中文) 次像素定位技術及其在自動檢測之應用 
 (英文) A sub-pixel image registration technique with applications to defect detection 
報告內容應包括下列各項： 
 
一、參加會議經過 
本次國際會議是由 World Congress on Science, Engineering and Technology（WCSET）國際組織
所主辦，會期共三天。會議主題涵蓋四大領域：（1）電腦視覺與影像分析，（2）圖形辨別、訊
號、語音與影像處理，（3）多媒體與通訊，（4）硬體系統構成、機器人及其他應用。目的之一
是向歐洲的工業界介紹學術界最新的研究進展，也讓歐洲以外的全球其他學者瞭解歐洲的產學
研究近況，彼此交流。 
我提前於七月 23 日從台灣搭荷航出發，並於七月 24 日中午到達會議所在城市布拉格。
Check in 並安置好行李之後，先去找會議所在地點 Hotel Constans，以及會議所在的演講廳，
然後再回下榻處休息。 
我的論文跨基礎研究與工業應用，論文被安排在第二議題「圖形辨別、訊號、語音與影像
處理」中報告，時間是第一天（七月 25 日）下午。因為時差問題很嚴重，我上午 10：30 左右
才到達大會地點，大會秘書長正在報告歐盟有關各種科學研究經費的補助辦法。還沒聽完，因
為實在太累，又怕下午輪到自己報告時沒精神，所以 11：10 左右就離開，先回住處休息了一
下，吃過午飯才再回會場。 
2：30 左右到達會場時，發現整個時程拖得很厲害，直到 4：00 左右才輪到我報告。不過
會場不大，出席者多半是歐陸人與亞洲人，很少 native English speaker。大家英文都不流利，所
以比較沒有語言的壓力，討論過程反而較輕鬆而親切。 
我報告的主題是次像素級的定位技術，以及它在 FPD 產業的應用。雖然在我前後報告的
幾位學者，以及在場的來賓都蠻清楚地顯示出他們對於應用研究的興趣，也能從理論上理解到
次像素級定位技術的價值，但是他們都對 FPD 產業不太瞭解，對於 FPD 產業的自動檢測問題
更難具體掌握。而兩位大陸學者所提的問題，則顯示他們不但對於 FPD 產業與自動檢測瞭解
太少，甚至於連定位技術的文獻掌握都很差。所以，雖然報告過程尚稱順利，也得到許多掌聲，
但是沒有太多高興的感覺。 
 1
 A sub-pixel image registration technique with 
applications to defect detection 
Zhen-Hui Hu, Jyh-Shong Ju and Ming-Hwei Perng 
  
Abstract—This paper presents a useful sub-pixel image 
registration method using line segments and a sub-pixel edge detector. 
In this approach, straight line segments are first extracted from gray 
images at the pixel level before applying the sub-pixel edge detector. 
Next, all sub-pixel line edges are mapped onto the 
orientation-distance parameter space to solve for line correspondence 
between images. Finally, the registration parameters with sub-pixel 
accuracy are analytically solved via two linear least-square problems. 
The present approach can be applied to various fields where fast 
registration with sub-pixel accuracy is required. To illustrate, the 
present approach is applied to the inspection of printed circuits on a 
flat panel. Numerical example shows that the present approach is 
effective and accurate when target images contain a sufficient 
number of line segments, which is true in many industrial problems. 
 
Keywords—Defect detection, Image registration, Straight line 
segment, Sub-pixel. 
I. INTRODUCTION 
MAGE registration is the process of overlaying 
two or more images of the same scene with the 
goal to determine the geometric transformation that 
aligns the test image with the reference image. It 
has become a fundamental task of image processing 
in various applications such as template-based 
automatic optical inspections (AOI), robot vision 
and image fusion.  
Concerning template-based automatic 
inspections, a computationally efficient registration 
method with a very high accuracy is becoming a 
critical factor in their success due to rapid increase 
in circuit density and the size of a flat panel. In such 
industrial applications, defects to be detected are 
becoming smaller and smaller while the inspection 
time available for the task of AOI is not increased 
proportionally. Hence there arises the need of a 
precise and fast sub-pixel image registration 
                                                 
Ming-Hwei Perng is with the Department of Power Mechanical 
Engineering, National Tsing Hua University, Hsinchu, 30043, TAIWAN, R. 
O. C. He can be reached by phone: +886-3-5742611; fax: +996-3-5722840; 
e-mail: mhperng@pme.nth.edu.tw 
Zhen-Hui Hu is with the Department of Power Mechanical Engineering, 
National Tsing Hua University, Hsinchu, 30043, TAIWAN, R. O. C. 
Jyh-Shong Ju is with the Department of Power Mechanical Engineering, 
National Tsing Hua University, Hsinchu, 30043, TAIWAN, R. O. C. 
method.  
Existing image registration techniques are 
generally classified into two categories: area-based 
and feature-based methods [17]. Area-based 
methods generally require computation of intensity 
correlation between images. Earlier Fourier-based 
schemes are only capable of matching translated 
images by means of the shift property of Fourier 
transform [10]. To account for rotation and scaling, 
Fourier-Mellin transform is adopted. Rotation and 
scaling are represented as translations in parameter 
space and estimated by phase correlation [4]. Keller 
et al. [9] use the pseudopolar estimation to 
substantially improve approximations of the polar 
and log-polar Fourier transforms of an image. In the 
above approaches, the overall complexity is 
dominated by FFT operations, and optimized FFT 
implementations are necessary for a real-time 
performance. However, as the main drawback of 
area-based methods, the computational complexity 
measured by the number of transformation grows 
rapidly as the required accuracy increases.  
In contrast, feature-based methods are 
computationally simpler and faster. Traditionally, 
the majority of feature-based registration methods 
consist of three essential steps: (1)features detection, 
(2)features matching, and (3)model estimation to 
result in the relative transformation parameters. In 
general, distinct objects such as edges, corners, line 
intersections and closed boundary regions are first 
detected as features and represented by their 
representative points, the so called control points or 
feature points [17]. The second, and the most 
critical, step is to establish the correspondence 
between two sets of feature points in the absence of 
some control points due to defect or partial 
occlusion. For instance, Stockman et al. [15] use 
line intersections as control points and determine 
the correspondence between them by means of 
cluster analysis. However, the locations of feature 
points are generally sensitive to noise and 
I 
 3
 Next, all connected paths are obtained by 
scanning the edge images using chain code 
difference [8]. The edge image is scanned from left 
to right and top to bottom. Every edge point is 
assigned a chain code difference if one or more 
8-connected neighbors [8] exist. The search 
sequence for the next edge pixel of a connected path 
is anticlockwise so that the direction of each edge 
pixel to the next pixel can be uniquely encoded 
even at branch points. If there are no further 
8-connected neighbors, current searching procedure 
for a connected path ends and we move to the pixel 
next to the last starting point for a new tracking. In 
this manner, edge pixels that belong to the same 
path can be grouped and recorded. A path length 
threshold is utilized to reject small edge segments 
and noise. 
After then, the chain code differences recorded 
in each selected path are surfed to determine a 
straight line segment. Since chain code difference 
characterizes edge direction, a train of all zero chain 
code differences manifests a straight line segment, 
and all straight line segments can be obtained by 
counting consecutive chain code difference. 
However, referring to Fig. 1, due to the 
digitalization of line edges into discrete pixels, both 
a slanted straight line segment and a temporal shift 
away should be treated as parts of a straight line 
segment.  
Please also notice that, later steps of the 
present approach can cope with missing line 
segments, hence there is no need to find all line 
segments but only a few. This property contributes 
to the robustness of the present approaches and save 
significant computational time in handling details 
such as noises, weak edges and broken line 
segments.  
In the present approach, the complexity of 
searching for connected paths is at most ( )epO N  
for an edge image with edge pixels, and that of 
extracting straight line segments is in the order of 
, where  denote the number of filtered 
connected paths. Several well-known methods in 
the literature for the extraction of straight lines 
[2,12] can also be used instead of the present 
procedure. However, the aforementioned procedure 
is preferable because of its computational 
simplicity. 
epN
( cpO n ) cpn
The resolution of an imaging device is limited 
to pixel level only. To achieve a sub-pixel accuracy, 
a Zernike moment operator [5,13] is adopted in this 
paper to pin point the sub-pixel locations of the 
edge points in the previously extracted straight line 
segments. Consider a simple 2D sub-pixel step edge 
model as those in [5,13] to parameterize every edge 
point. A window of size  pixels is employed 
to calculate the Zernike moments. The rule of 
thumb for determining the window size is that it 
should be large enough to cover the range of 
intensity changes in the acquired edges to consider 
the blurring effect of an imaging lens. Due to length 
limit, details of computation are referred to [5,13]. 
By means of a few computations, the sub-pixel 
location parameters for each edge point in the 
extracted straight line segments can be obtained.  
5 5×
Before line matching and the estimation of 
transformation parameters, all straight line segments 
with sub-pixel location accuracy are represented in 
the polar form cos sinx yθ θ ρ+ = . For a given set of 
edge points in a straight line segment, the 
parameters ,( i i )θ ρ  can be analytically derived 
through a least-square fitting [8], and consequently, 
each straight line segment is mapped onto a point 
( ),i iθ ρ  in the θ ρ−  axis, i.e., the Hough space. 
The merit of using this polar form is stated in the 
followings. 
Parallel straight line segments can be mapped 
near vertically in the Hough space with very close 
orientations, which is beneficial in establishing 
group matching between the reference and test 
images. For example, as shown in Fig. 2, all line 
segments are grouped into different sets according 
to their orientations and then group matching can be 
easily achieved under the assumption of a small 
rotation.  
Compared to the techniques based upon Hough 
transformation implementation, the characterization of line 
segments into the Hough space presented in this section is 
explicit, precise and efficient since sub-pixel accuracy is 
realized and no compromise between discrete parameter space 
and computational complexity exists in determining the point 
location in the Hough space. In the next section, the advantage 
of polar form representation will be further exploited.  
III. FINDING CORRESPONDING PAIRS OF LINE SEGMENTS 
In Sect. 2, straight line segments with sub-pixel 
accuracy are extracted and characterized into the 
polar form. Here a two-stage matching technique is 
 5
 Then,  and id jd ′  in  and  are compared 
sequentially to admit their closeness. The data pair 
 is admitted as matched if | |
D D′
( , )i jd d ′ i j Md d Tε′− ≤ , 
where MTε  determines the similarity of two real 
data. In practice, a counter can be used to count the 
number of matching pairs and to terminate the 
procedure when a specified number of matching is 
achieved. Please notice that a matched data pair 
 implies that ( , )i jd d ′ ( , )i jρ ρ′  is also matched pair 
of line segments because their relative distances to 
the baseline segments are nearly the same. As a 
result, matched line segments in  and P P′  can 
be acquired once the data matching between  
and  is completed. Table 2 is the summary of 
the proposed algorithm for line matching. 
D
D′
 
Table 2.  Algorithm for line matching 
Step 1. Determine the baseline segments bρ  and bρ ′′  from  and 
. 
P
P′
D D′Step 2. Compute the relative distance sets  and . 
Step 3. Find matched data pairs M  between  and D D′  using the 
simple procedure listed in Table 1.   
 
Moreover, because the task of line matching is 
completed when a sufficient number of lines are 
matched, the above matching procedure can 
accommodate missing line segments.  
The question remains how baseline segments are 
determined. A workable approach is presented here to find all 
candidate baselines. Let the relative distance between two 
neighboring straight line segments in  and P P′  be 
denoted as 1i ic iρ ρ+ −  and 1i ic iρ ρ+′ ′ − ′ , respectively, 
and { }| 1, 2, , 1iC c i n= − " , { }| 1, 2, , 1iC c i m′ ′ = − " . If 
the relative distance pair  are taken as nearly equal, 
i.e., 
( , )i jc c′
| |i j Bc c Tε′− ≤ , then iρ  and jρ′  can serve as a 
candidate baseline pair. So we scan the relative differences in 
 and C , and identify those pairs  with nearly 
equal relative distance by means of the same comparison 
procedure listed in Table 1, except for another matching 
constant 
C ′ ( , )i jc c′
BTε  for baseline. It should be noted that, if there are 
 candidate baseline segment pairs, then at most  
matching procedures are required in Table 2 to establish the 
correspondence between line segments in  and 
bn bn
P P′ . 
IV. ESTIMATION OF TRANSFORMATION PARAMETERS 
Once the line correspondence between the reference 
and test images is established, the present approach 
proceeds to estimate the transformation parameters 
discussed in this section.  
Under the assumption of a rigid motion, let the 
transformation parameters be the relative rotation 
angle θ∆  and the relative translation ( ),x yt t  and 
suppose that m corresponding pairs of line segments 
in total have been identified previously, including 
the collections from different matched groups. 
Moreover, let ( ),in inx y  denotes the  edge 
point of the  matched line segment in the 
reference image, 
where
nth
ith
( ), ,  1,2, , ,  1,2, ,in in ix y i m n= =" " n .  
In image reconstruction, each registered pixel 
can be obtained in a backward transformation from 
the test image using the inverse of the estimated 
mapping function. Similar ideas can be used to 
solve for the transformation parameters. Each line 
segment in the test image can be backward 
transformed into the reference image to overlay the 
counterparts by using rotation angle θ−∆  and the 
relative translation ( ),x yt t− − . In mathematical 
terms, 
( ) cos( ) ( ) sin( )x i y ix t y tθ θ iθ θ ρ′ ′ ′− − ∆ + − − ∆ =   
(1) 
Hence the edge points ( ),in inx y  in the reference 
image should satisfy (1) and the following 
least-square problem is formulated for accurate 
registration 
2
, , 1 1
min  ( )cos( ) ( )sin( )
i
x y
nm
in x i in y i it t i n
x t y t
θ
θ θθ θ ρ∆ = = ′ ′ ′⎡ ⎤− − ∆ + − − ∆ −⎣ ⎦∑∑   
(2) 
Apparently, the above minimization problem (2) is 
nonlinear in the transformation parameters θ∆  and ( ),x yt t , and it requires a computationally intensive 
optimization solution. In the following we will 
decouple the nonlinear minimization problem (2) 
into two linear parts: rotation and translation, 
respectively. Furthermore, closed-form solutions 
will be analytically derived.  
Noting from (1), the change of the orientation 
is completely originated from the relative rotation 
introduced in a rigid motion. Hence, the relative 
rotation angle θ∆  can be estimated from backward 
 7
 have been carried out and the results are given in 
Table 4, which shows that the present approach is 
reliable and accurate. The numbers within 
parentheses are for pixel-level registration, which 
are inferior to sub-pixel results. Besides, the 
computation time for extracting straight line 
segments and for completing an image registration 
in each experiment are recorded to be 0.893 seconds 
and 0.951 seconds, respectively, which shows 
extracting straight line segments occupies about 
94% of the computational cost. 
 
(a) Reference image (b) Test image 
 
(c) Matched line segments in a (d) Matched line segments in b
 
(e) Sub-pixel registration (f) Pixel level registration 
Figure 3. Comparison of defect detection between sub-pixel based 
registration and pixel level based registration.  
a & b: AOI images for registration; c & d : matched line segments; 
e & f: binary difference images for gray level threshold value 30. 
 
 
Figure 4. Synthetic image for evaluating accuracy. 
To evaluate the efficiency of the present approach for line 
segment extraction, it is compared with the Hough transform. 
Two step sizes in the parameter space of Hough transform are 
used. Besides, Fig. 3a is adopted as another example for the 
case with much more edge pixels. The results are compared in 
Table 5, which shows that our approach is much faster than 
Hough transform with fine parameter resolution in  and 
0.1 pixel. All above comparisons are based on coding in the 
MATLAB environment running on a Pentium 4-1.8GHz PC.  
0.1D
 
Table 4.  Quantitative measurement of registration accuracy of the proposed 
method (The numbers within parentheses are for pixel-level registration). 
 Max (absolute) 
deviation 
Mean (absolute) 
deviation 
Standard 
(absolute) 
deviation 
rotation angle
( Degrees) 
0.260 
(0.803) 
0.0694 
(0.227) 
0.0426 
(0.131) 
X-translation
( Pixels) 
0.888 
(1.094) 
0.203 
(0.291) 
0.170 
(0.207) 
Y-translation
( Pixels) 
0.963 
(1.516) 
0.259 
(0.503) 
0.201 
(0.328) 
 
Table 5.  Comparison of efficiency in finding straight line segments  
between our method and Hough transform method 
 The present 
result 
HT with steps 
1D / 1 pixel 
HT with steps 
0.1D / 0.1 pixel
Averaged time 
for Fig. 4 
0.893 sec 1.684 sec 46.0 sec 
Averaged time 
for Fig. 3a 
12.4 sec 2.61 sec 168.7 sec 
 
VI.  CONCLUSIONS 
A practical sub-pixel image registration method 
using line segments and sub-pixel edge detector has 
been proposed in this paper. The present approach is 
computationally efficient, and can be applied to 
various fields where fast registration with sub-pixel 
accuracy is required. Numerical example shows that 
the proposed method is accurate to register images 
and is suitable for defect detection.  
To the knowledge of the authors, the work 
presented in this paper is the first one in the 
literature which utilizes the relative distance 
between parallel line segments as matching features. 
In comparison with other point-like features or 
linear features relying on length, center and/or 
endpoints, the present approach is more reliable, 
robust and results in more precise registration. 
REFERENCES   
[1] Alhichri, H. S., Kamel, M.: Multi-resolution image registration using 
multi-class Hausdorff  fraction. Pattern Recognition Letters. 23, 
279-286 (2002). 
[2] Burns, J.B., Hanson, A.R.: Extracting straight lines. IEEE Trans. Pattern 
Anal. Mach. Intell. 4, 425–456 (1986) 
 9
