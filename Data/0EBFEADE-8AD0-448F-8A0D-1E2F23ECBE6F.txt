2EPC RFID 藥品箱管理系統之設計與實現
計畫主持人：黃慶祥
計畫參與人員：羅元鴻、涂志豪
摘要：
本論文描述如何運用嵌入式系統結合
UHF RFID 來提供良好的藥品保存環境，透過
UHF RFID Reader 讀取藥品 Tag 的資訊做為藥
品辨識系統，經由嵌入式系統提供圖形化藥品
資訊介面，系統即可在使用者拿取藥品時提供
檢查保存期限或檢查是否為個人可用藥品的
輔助，並可協助使用者定時定量的服用藥品。
經由嵌入式系統上的 Web Server ，系統
提供了遠端藥品管理的功能，管理者可以透過
網頁登入 web server，達到隨處可監控家人藥
品使用情形的目的，了解藥品的保存期限、購
買日期等資訊，也可讓醫生或藥劑師不必到患
者家中就能知道使用者用藥的情形，對於患者
藥品的使用將能提供更精確的建議。
本 RFID 藥品箱可以提供家中藥品使用上
的管理，減少家中成員因為吃到過期的藥品導
致身體受到傷害，明確的藥品資訊讓家人吃的
更加安全。
關 鍵 詞 : RFID 、 嵌 入式 系 統、 Web
service、藥品箱
Keywords: RFID, Embedded System, Web
Service, Medicine box
一、簡介：
有感於高齡化社會的來臨，讓很多老年人
必須借助藥物來維持生活品質，但老年人或病
人對於藥品資訊的記憶不靈光甚或會排斥，藥
品資訊的取得也較為不便，因此如何協助用藥
人來控制用藥與取得用藥資訊，與監控用藥人
用藥量，也是目前社會的一項新需求。
在可預見的未來，RFID 將會普遍的應用
在各式各樣的商品中，尤其是高價的藥品更可
能普遍採用，而藥品的使用知識不只老年人缺
乏，對大部份人而言也是相當缺乏的，因此本
計畫實現一個藥品箱管理系統，利用 RFID 科
技自動的提供使用者用藥的資訊，協助使用者
定時定量的服用藥品。
利用 RFID 整批讀取的功能來管理藥品
箱內的各種藥品，再透過 EPC 標準化的物件
名稱服務(ONS)、實體標記語言(PML)查詢，將
能逐一查出藥品的製造日期，使用期限等資
訊，甚至服用方式，如此這些資訊可隨時提供
給使用者。
有了製造日期，更可自動幫忙碌的人們
檢查，提醒藥品即將過期需趕快處理，若不幸
已經過期也可即時主動警告通知，避免吃到過
時的藥品‧
我們利用嵌入式 Linux 系統所具有的
Web Server 功能，實現遠端監控藥品箱的功
能，具有 RFID(Radio Frequency Identification)
與 Web Server 功能的藥品箱管理系統，可讓醫
生或藥劑師不必到患者家中，就能知道藥品箱
內有哪些藥品，也可瞭解其用藥記錄，對於患
者藥品的使用將能提供更精確的建議，也更能
瞭解患者使用藥品的情形‧
二、相關研究：
RFID 科技：
要管理家中的藥品，若還要人為的操
作，或者像在工廠中一般，需要一樣樣慢慢的
檢查貨品，那大概沒有人會來採用這樣的藥品
箱管理系統，因此如何讓此系統能夠全自動的
運作呢？我們最先想到的是貨品上的條碼，賣
場為了方便顧客結帳，也為了自己貨品管理的
方便，都會在商品上貼有條碼，因此結帳時櫃
檯人員只要用紅外線條碼機一掃瞄，就可知道
商品的價格，如此不僅可增加買家的信任，而
且商家也可以自動進行庫存管理，因此大部分
的商品從製造廠商開始製造，就有加印條碼在
商品上，方便了整個物流的管理‧
雖然條碼增加了商品管理上的方便，但
能否用在我們家中藥品箱的藥物管理上呢？
我們可以想像一下，今天我們要了解家中藥品
箱有哪些物品，我們必須打開藥品箱，一一利
用紅外線條碼機檢視物品上的條碼才能知
道，如此較之打開藥品箱直接檢視物品不僅沒
有差別，反而更加不便‧
那麼能否自動讀取條碼呢？我們這樣的
需求，正好和賣場要求快速結帳的需求有些類
似，現代的大賣場物品種類如山似海，顧客常
常都是一次購買很多的物品，因此大部份人到
大賣場買東西結帳時，應該都有排隊等候結帳
4品箱連線程式，只要有網路瀏覽器就可以了，
這樣的方便性，將更能提升人們使用此藥品箱
的意願，也真的能更進一步改善人們生活的方
式‧
三、系統架構
RFID 藥品箱的架構如下圖所示，為了讓
近端使用者與遠端使用者，所看到的圖形化人
機介面是相同，因此我們藉由網路瀏覽器來做
為使用者的操作介面，這也代表我們要在
RFID 藥品箱所安裝的 Linux 上，額外的安裝
web server，除此之外，近端使用者也是透過
家中的電腦與 RFID 藥品箱溝通，但除非有狀
況，否則使用者只要有 HF RFID 卡，就能開
啟藥箱取藥。
圖 1‧RFID 藥品箱架構圖
架構圖中顯示，使用者不管是否在家
中，要設定或監看藥品箱都要透過網路，當使
用者透過網路連到 RFID 藥品箱時，他就連到
了 web server，但 web server 並沒有能力提供
RFID 藥品箱的管理功能，我們就須要完成架
構圖上所示的 web service，誠如上一節所討論
的，為了達成 RFID 的讀取與 I/O 控制能力，
我們以 CGI的方式來實現 RFID藥品箱的管理
功能 web service。
當使用者透過網路連到 web server 時，
web server 會根據使用者的需求，叫用 web 應
用程式中的各別 CGI 程式完成相關的功能，
這些 CGI 程式為了達成管理功能，有時會使
用 RFID 驅動程式，透過 UHF RFID 讀卡機來
檢知藥品箱內到底有多少物品，或者更進一步
的檢知某個物品的詳細資訊，如它的使用期限
或出廠日期。
RFID 標籤的成本會隨著其內的記憶體
增加而跟著增加，目前廠商偏好的 EPC Global
標準，其上只有類似條碼的貨品統一編碼而
已，並沒有詳細的貨品資訊，那要如何去得知
貨品的使用期限？
目前的 EPC 標準作業程序是，當系統得
到 EPC Global編碼之後，先透過網路連到 EPC
Global 的官方網站，以便透過該網站查出該貨
品的製造廠商，接著系統再連到製造廠商的網
站，再由 EPC Global 編碼查出該貨品的詳細
資訊，例如物品種類、品名、出廠日期等，與
目前的條碼應用類似，條碼上並沒有貨品的詳
細資訊與價格，所有貨品的名稱與價格，都是
賣場要自行輸入到收銀機內的資料庫，當條碼
機掃瞄到條碼之後，再由系統到資料庫去查出
的，這也是為什麼大部分的小商店所開的發
票，只有貨品編號而沒有名稱的主要原因，因
為他們沒有人力為每一商品逐一的輸入品名。
因此架構圖中的藥品商藥品資訊資料庫
為藥品商所架設的 EPC 標準網路資料庫，藥
品箱要顯示藥品的資訊是透過上述的 EPC 標
準，到藥品商所提供的資料庫取得，由於
Wal-Mart 的支持，未來商品採用 EPC Global
的機會非常高。
目前因為並沒有適合的 EPC 網路資料
庫，我們是自己在嵌入式主機內建立藥品資料
庫，未來將針對 EPC 資料庫實現符合 EPC 規
格的網路資料庫，並由藥品箱自動透過網路存
取該 EPC 網路資料庫。
架構圖中的嵌入式系統，負責控制藥品
箱的運作，它要控制 HF RFID reader 以完成藥
品箱的門禁管制，必須持有合法的卡片才能開
啟藥品箱；它要控制 UHF RFID reader 以完成
藥品的管理，透過 tag 上的 EPC 碼，嵌入式系
統也可以到藥品商藥品資訊資料庫取得藥品
資訊；它要控制 GPRS modem 以完成事件的
通報，當有拿錯藥品事件或藥品過期，都會發
出 mail 與簡訊給藥品箱管理人；另外藥品箱
內部的藥品資料庫會記錄藥品放入的時間，藥
品取用的時間，那些人用過藥品等等。
四、系統實現
我們要實現的 RFID 藥品箱利用 UHF
RFID 藥品辨識的功能，也利用 HF RFID 完成
辨識用藥人的功能，就可達成個人化的用藥管
理，以現代科技協助解決高齡化社會的問題。
系統上的 HF RFID reader 可以用來驗證
智慧卡，使用者經由智慧卡可開啟藥品管理
箱，藥品管理箱開啟後，系統便會自動開啟
UHFRS(UHF 標籤讀取系統)掃瞄藥品是否有
缺少或增加，如此系統便可知道使用者拿的藥
品，進而主動提供藥品資訊給使用者。
系統將藥品標籤與藥品資料庫進行比
對，就可確認使用者所拿到的藥品，進而判斷
使用者所服用藥品與可服用清單是否相同，若
有不同即可提出警告，以防止使用者誤服藥
品。
6圖 7‧網頁化的藥品管理箱控制介面
圖 8‧顯示藥品使用資訊
圖 9‧顯示拿取藥品的時間記錄資訊
UHF RFID 可以進行多重讀取，因此如圖
2 所示，藥品箱內雖然只有一部 UHF RFID
reader 而且放置有 5 個 RFID tag，由圖 7 的網
路瀏覽介面就可看到藥品箱內的多種藥品，可
以讓使用者或者醫師知道藥品的存量，除此之
外若當使用者拿取藥品後，如圖 8 可自動顯示
藥品資訊，使用者要知道藥品的使用方法，也
可直接點選藥品，就可將相關的藥品顯示在網
頁上，圖 9 是在收到拿錯藥品或其他事件的
mail 通知時，可透過 PDA 上網查看拿取藥品
的時間記錄資訊，在遠地即可關心家人用藥的
情形。
很顯然的這個系統雖然是針對家庭設計
的，若在權限設定上，允許醫院的醫師或藥師
也可登入，則醫師也可登入此藥品管理箱查看
相關的用藥資料，因此也可以用在醫師協助病
患用藥或監督病患用藥上。
在未來我們將在網頁瀏覽端採 AJAX 設
計網路監控模式，藉由 AJAX 的 Callback 函式
讓網頁主動派送資訊回瀏覽端，使用者不需動
手，即可自動由網頁得知保險箱資訊，在系統
軟體元件部分，將採用更為模組化的 OSGi 技
術，把保險箱各種裝置撰寫為不同的 Bundle
服務包，透過 OSGi 平台的優勢，讓保險箱更
加具有親和力，讓使用者可以更方便得取得數
位生活的服務。
五、結論
RFID 藥品箱管理系統利用來嵌入式
Linux 系統實現，並在其上架設 Web Server，
經由家中的網路，即可以提供遠端的存取服
務，Web 網頁提供的圖形化使用者介面，不
論男女老幼皆可以順利的上網控制藥品
箱，更可以讓使用者從世界各地無國界的連
回自己的家中，查看家中藥品箱藥物的存量
與保存期限等藥品資訊。
本系統利用使用者資料庫與 Web 網頁
整合 UHF RFID 系統來實現，除了可提供遠
端使用者瞭解家中藥品資訊的服務之外，透
過藥品上的 UHF RFID可以自動辨識藥品並
建立藥品的購買日期等資訊，可將藥品箱中
的藥品管理的有條不紮，讓家人吃的更安
心。
網路醫藥箱在使用者拿取藥品的同時
能夠提供該藥的使用資訊，減少使用者錯誤
服用或過量服用的情形，同時也可將這些使
用者用藥的時間與次數登記在藥品箱中，而
這些用藥的資訊可以由醫師透過網路在遠
端查詢，藉此醫師就可協助患者用藥，這些
資訊也可提供給醫師改進藥方，讓醫病雙方
能更和諧。
六、參考文獻
1. 謝建新、游戰清、張義強、戴青雲，”RFID
理論與實務-無線射頻識別技術”，吳權昌
校訂，網奕資訊出版
2. 陳宏宇，”RFID 系統入門-無線射頻辨識
系統”，松崗出版
3. 鄭同伯著，“RFID EPC 無限射頻辨識完
全剖析”，博碩文化
4. “XScale PXA255 Evaluation Board 實驗
開發實務”華亨科技有限公司
5. 黃吉霈，”LINUX 技術手冊”，美商歐萊
禮股份有限公司台灣分公司, 第四版
6. “AWID MPR Serial Communication
Protocol”, Applied Wireless ID Corp.
7. 台北榮民總醫院藥品資料暨外觀查詢系
統 網 址
http://www7.vghtpe.gov.tw/drugsh/index.as
p
