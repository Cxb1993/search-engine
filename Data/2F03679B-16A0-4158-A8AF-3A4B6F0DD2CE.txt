2也將會直接影響消費者的購買決策與時
機，因此若我們能充分的了解消費者的偏
好結構，將有助於產品品牌的定位。而近
年來，由於電子商務技術及條碼設備的成
熟，促使在針對消費者購買習慣的資料收
集上，有了相當大的突破。在本論文中，
我們將針對此一類型的消費者資料進行模
式的建構，以便能清楚的解讀消費者真正
的品牌選擇行為及偏好。
截至目前為止，在有關建構描述消費
者品牌選擇模式的研究當中，已有相當多
成功且顯著的論文被發表。在這些成功的
研 究 裏 ， 有 許 多 的 模 型 皆 是 根 據
McFadden(1973)所提出的隨機效用模式
(Random Utility Model) 為基礎來進行推論
的。而在 McFadden 所謂的隨機效用模式
中，他除了先假設消費者在面臨「選擇」
時，其所面對每一個可選擇項目的效用函
數值皆屬於一個隨機變數外，更假設了其
效用函數值常包含了兩個部分：一為可用
觀察變數來加以解釋的靜態部分，另一則
為可觀察變數外因素所構成之隨機部分。
有關隨機效用模式在行銷或經濟學上的應
用可參考 Guadagni and Little (1983),
Gupta (1988) 與 Hauser and Shuan (1983)
的論文。通常在針對消費者購買資料進行
分析時，隨機效用模式會隨著模式本身誤
差項 的假設不同而有所差異；當 符合
extreme value 分配時(即 )，隨機效用模式
將成為 Logit 模式；當 符合 Normal 分配
時，隨機效用模式將成為 Probit 模式。
至於估計隨機效用模式參數的方法，
截至目前為止，已有許多傳統及新穎的技
術被成功的發展出來。就傳統的分析方法
而言，所謂參數估計的抽樣分配，或是參
數檢定的統計量，皆是假設在資料屬性為
隨機或者是資料乃根據某一機率模式所產
生的前提下，所建構而成的。換言之，傳
統分析方法在尚未得到樣本觀察值之前，
就已經將參數的抽樣型態假設為某一種機
率分配，而沒有真正針對實際觀察值進行
考慮。因此也造成在這樣假設下所進行的
所有推論必須架構在大樣本或是樣本趨近
於無限大的限制條件下始能成立。但不幸
的是，在面對有限或不完整樣本資訊時，
樣本數趨近於無限大的假設是相當不切實
際的。事實上，為了能有效解決這種問題，
許多的計量經濟學者曾提出許多無母數或
半母數的相關辦法
來因應。然而，這些傳統的無母數分
析方法，卻又常因著模式 Overfitting 的問
題，而造成預測效果不佳的結果。
除了上述計量經濟及無母數的分析方
法外，貝氏分析技術 (Bayesian statistics)
是另一個較受到大家廣泛應用的工具。不
同於其它的傳統分析方法，貝氏技術是強
調以樣本資料為基礎來針對欲估計參數或
擬預測數量進行其機率值的陳述。Rossi
and Allenby (2003)，Allenby and Ginter
(1995)，Rossi et al. (1996)，Talukdar、Sudhir
and Ainslie (2002)等學者便曾明確指出，運
用層級貝氏理論針對消費者之消費行為資
料進行分析時，研究者除了可以很清楚的
了解到個別消費者的消費行為外，更可以
進一步的推論出一些無法實際觀察到，卻
又影響消費者購買決策的隱藏變數(latent
variable)值。有關詳細的貝氏理論說明及抽
樣方法可參考 Smith, A.F.M., and Roberts,
G.O. (1993)，Casella, G. and George, E.
(1992)，Gelman, et al. (1995)，Chib (2003)，
Robert and Casella (1999)，Liu(2001)、
Bernardo and Smith (1994)。
在本研究中，我們除了選用隨機效用
模式的概念：針對個別消費者的消費行為
推導出其概似函數外，我們更將進一步的
利用層級貝氏模式以消費者的人口統計變
數來針對消費者的偏好異質性進行解讀。
換句話說，本研究將嘗試運用層級貝氏理
論來探討消費者品牌選擇及偏好的異質
性，並利用近年來發展相當成熟的馬可夫
鏈蒙第卡羅 (Markov Chain Monte Carlo,
MCMC)方法估計貝氏模式中各參數後驗
分配的值，此外我們更整合了分群機制及
基因演算法的技術來擴充傳統層級貝氏模
式的應用與 MCMC 抽樣的效率。為說明所
建構行銷模式的有效性，我們將針對台灣
某一大型連鎖超市的實際資料進行分析，
其資料記錄了該超市 2001 至 2002 年的會
4數是用來解釋偏好 i與人口統計變數間
的關係。換言之，我們是以結合品牌選擇
效用模式與品牌偏好解讀模式的方式來解
釋行銷變數(X)與人口統計變數(Z)間的關
係(如下式)。
品牌選擇效用模式： XY
品牌偏好解讀模式： Z
  XXZY
由於考量將消費者偏好做適當的分群
將可增加異質性分析的結果，因此除了上
述的模式外，我們也應用 Kamakura 和
Russell (1989)的機率式分群機制，在進行
參數
s估計的同時，針對消費者偏好的不
同將消費者區隔成 S 群。至於如何決定適
當的分群數量(S)，我們則是利用基因演算
法來進行最佳化的分群數量搜尋，以尋求
最佳的「分群數目」。有關區隔性偏好解
讀模式之結構可整理如下：
i
1


si
S
s
si Z
   sipi Ns  ,0
其中，
s表示不同區隔內的偏好解釋，而
i代表人口統計變數未能完全解釋異質性
偏好的部分。由於各群集間偏好異質性的
解釋是以群集的方式來呈現，且誤差項的
部分也存在著具有不同分配型態的可能，
因此我們使用了 si 來表示不同群集(s)
下個別消費者偏好未能加以解釋的變異。
3. 參數估計
在了解第二節中層級貝氏的模型架構
後，我們將進一步針對所建構模式的參數後
驗分配推導，進行說明。在本研究中，我們
將消費者 i 屬於群集 s 之情形定義為
sCZi  ， 而 其 發 生 之 機 率 表 示 為
  si sCZ  ；之後我們在樣本分配到各群
集之機率為 s的條件下，假設每一個群集
內的消費者數量是符合多項式分配
    NMNN S 。綜合上述的變數定義
及模式的結構，再加上欲估計參數的先驗
分配假設，我們可以進一步的推導出本論
文中概似函數與所有欲估計參數的後驗分
配。有關本論文中模式、各參數先驗分配
的假設及概似函數的型式可分別彙整如下。
品牌選擇效用模式：
   mallfor| ,,,,, mjikjiiji YYPkCP  
 
 
'
, ,
1
'
, ,
1
exp
exp
i j k i
M
i j m i
m
x
x






區隔性之偏好解讀模式：
i
1


si
S
s
si Z
   sipi Ns  ,0
先驗分配：
' '
0 0( ) ( ( ) , )s pq svec N vec u V    
   100 ,|  GfIW sps
   00 WODirW S 
在先驗分配上，我們假設  'svec 是屬
於維度為 1pq 的常態分配； s是屬於維
度為 pp 的 Inverted Wishart 分配；為
Ordered Dirichlet 分配。
概似函數：
        ,
1 1 1 s 1
|
iJn n S
i j i i i i s s
i j i
P C k CZ s CZ k 
   
        
 iji
J
j
n
i
kCP
i

 ,11
 sZN ssiip
n
i
,,
1


   NMN S
   10000
1
,, 

 GfIWVuN sspq
S
s
 0WODirS 
藉由樣本資訊及上述各先驗分配的假
設，我們可以利用貝氏理論推導出各參數
的後驗分配，而有關模式後驗分配的詳細
推導及估計程序可參考附錄 A 之描述。而
有關在層級貝氏模式中，各參數間的關係
架構可以整理如下：
    sk ssii
J
i
i
,,|CPRest| ji,
1j



    sss
n
s
s


,Rest| i
1i

    sssi
n
s
s


,|Rest|
1i

6優酪乳 (原味 )；而其市場佔有率分別為
0.17，0.27，0.27 與 0.29。此外，為求分析
結果的有效性資料內容的收集是以會員為
對象，並篩選出消費次數大於 5 筆之資料
為分析標地。篩選結果總共包括了消費者
人數為 133 人，購買次數為 1506 筆的交易
紀錄。而每位顧客的交易記錄當中，包含
了以下的項目：1. 人口統計變量方面：包
含了性別、職業、學歷、婚姻、年齡層以
及來店所需時間。2. 購買記錄資料方面：
購買日期、購買品項、購買數量、購買金
額以及商品折價。
由於資料庫當中的欄位包含了品牌及
其相關的促銷價格等資訊，且超市中也常
以不同的促銷方式來增加其商品的銷售，
因此本研究將以消費者購買時的價格與品
牌作為本研究的行銷變數，並探討消費者
在品牌偏好異質性上與人口統計變數間的
關係。有關篩選出資料的人口統計量與購
買記錄資料結構彙整如表 1 及表 2。根據實
證研究中所選擇的品牌個數，我們將各參
數的結構重新定義如下： i表示消費者 i的
偏好，並且為一個 14的向量，此外為了
明白表示 i中所包含的變數內容，在此我
們定義 vi , 為消費者 i 的第 v 個行銷反應
量，再者，由於我們曾針對消費者的偏好
進行分群作業，因此我們將加入了群集定
義的 i表示成 vis ,, ，其中下標符號中的 s
表示群集、 i表示消費者、v則表示所對應
的第 v個行銷變數。以相同的方式，我們可
以將、、、CZ 參數表示成 vs , 、
vs , 、 s 及 isCZ , 。
根據表 2 的內容，我們可以了解顧客 i
在第 j 次購買時點的交易資料結構，包括
了當時的行銷變數( jiX , )及顧客所購買的
品牌(
, kC ji  )。其中，行銷變數( jiX , )為
43 的矩陣，它包括了三個品牌(林鳳營、
光泉、統一；皆以 2 元變數呈現)，及 Ln(相
對價格)變數(i.e.相較於優沛蕾的價格+1)，
其中優沛蕾為本研究之基本品牌。而購買
品牌資料的呈現方式也是以 2 元變數來表
達。舉例來說，根據表 2 所彙整的資料結
構來看第 1位顧客( 1i )在第 1次的購買行
為中( 1j )，選購統一優酪乳的資料可表
示成：
3 5
1 0 0 2.485 0
0 1 0 2.639 0
0 0 1 0.000 1 
 
 
 
  
由於在層級貝氏模式中，其參數的估
計是利用 MCMC 來進行，因此我們必須先
針對各先驗分配內的參數進行初始值的設
定。在本研究中，我們先利用古典最小平
方法(Ordinal Least Square, OLS)求取模式
中的 i值。接下來再根據 OLS 估計出的
i，以基因演算法來推估分群數量(S)及各
項參數。值得注意的是在執行基因演算法
時 我 們 是 以 總 誤 差 值 最 小
1
S
s
s
min SSE

 
   (其中 sSSE 代表第 s 群的誤
差平方和)為目標，並利用每一次的基因突
變與交配，將消費者 i 歸屬於不同的群集
s， sZ i C ，再進行基因子代的衍生，以
求取全域最佳解。如此利用 OLS 並結合基
因演算法來估計 MCMC 抽樣分配中初始
值設定的最大優點在於，增加 MCMC 收斂
速度並減少抽樣時所耗費的時間成本，此
外，更可以避免人為設定群集數量的偏
誤，降低其所可能造成的誤差。
在經過應用基因演算法來搜尋最佳群
集數與 MCMC 初始設定值的作業後，我們
將分群數量設定為二。最後，綜合基因演
算法所估計出的參數與各相關參數的先驗
分配設定(表 3)，我們利用 MCMC 的方法
進行參數 i、 s、 s、、 sCZ i  的模
擬與估計，在設定模擬次數為 5 萬次的情
況下，我們發現參數在模擬至 3 萬次左右
時，其估計值已達收斂之狀態，因此我們
取最後 2 萬次參數模擬的平均結果作為模
式參數的估計值。
為了進一步驗證基因演算法能有效改
善 MCMC 的估計效率，我們以價格變數之
估計係數 4,2s  v 為對象，分別以「使用基
因演算法」及「未使用基因演算法」之分
析結果(如圖 1 及圖 2)進行說明。根據圖 1
所示，我們可以很明顯的發現價格敏感度
的反應值 4,2s  v ，在使用基因演算法後呈
8(0.007153)，因此，我們可以進一步推論「促
銷對於性別而言並無顯著的差別」。而在
職業方面，家庭主婦較喜歡統一 AB 優酪
乳的品牌；相較於家庭主婦而言，其他職
業者有較低的價格敏感度(0.141316)。
大專以上的消費者較偏好光泉晶球優
酪乳，這樣的結果可能是因為光泉的產品
訊 息 較 能 刺 激 高 學 歷 的 消 費 者
(0.526476)；另外學歷較高的消費者也具有
較高的價格敏感度(-0.1116)。已婚的消費者
對於光泉有高度的品牌偏好(1.00646)。對
於需要較長時間才能到達超市消費的顧客
（其他=0）而言，具有較高的價格敏感度，
相 對 的 也 較 容 易 受 到 促 銷 的 影 響
(0.186456)。至於年齡層方面：成年人對品
牌的選擇，以光泉晶球優酪乳的偏好最
低 ， 統 一 AB 優 酪 乳 的 偏 好 較 高
(1.539523)，且價格敏感度較低。
對於群集二的消費者來說，男性
則 較 女 性 偏 好 統 一 品 牌 的 優 酪 乳
(0.294571)，性別因素在價格敏感度
上較無太大的差異(-0.01678)。至於
在職業方面我們可以發現家庭主婦
較偏好林鳳營優酪乳(-0.39098)，而
其他職業對統一 AB 優酪乳則有較高
的偏好 (0.716399)。學歷方面則指
出，具有大專以上學歷的消費者，對
統一有正向的偏好程度(0.68789)，
且對於其它品牌的優酪乳皆有負向
的偏好，另外，群集二中具高學歷的
消 費 者 對 價 格 較 不 敏 感
(0.105868)。婚姻狀況方面，已婚者
較偏好統一 AB 優酪乳(1.63786)，對
於其他兩個品牌則有排斥的現象，婚
姻狀況在價格敏感度上由於數值很
小 (-0.02059)，所以並無太大的影
響。對於離店遠的顧客而言，折扣商
品對其有吸引力 (0.055942)。由於
在本研究之實證資料中所選定的賣
場常常會寄發一些商品目錄與折價
資訊給消費者，因此許多較遠的消費
者 可 能 因 為 資 訊 的 接 收 而 前 來 消
費 。 年 齡 層 上 成 年 人 較 偏 好 光 泉
(0.45846)，而青年人則是偏好統一
的 AB 優酪乳(-0.98631)。
另外，我們亦可從縱向方式進行觀
察，並說明其實証結果與行銷意涵。針對
林鳳營產品，我們可從人口統計變數中找
出婚姻狀況對群集一與群集二的影響最
大。對於其它品牌而言，各集群中影響最
大的人口統計變數分別為：光泉是性別(群
集一)、婚姻狀況(群集二)；統一為性別(群
集一)、婚姻狀況(群集二)；價格敏感上為
來店所需時間(群集一)、年齡層(群集二)。
這的分析結果也提供了各家廠商一個新的
行銷方向。根據表 9 中之數據，我們可以
清楚的發現到性別、婚姻狀況、來店所需
時間以及年齡層是影響品牌選擇的四個主
要因素。所以廠商應將產品定位於此基礎
上，甚至在行銷管理上也應朝這四個變數
來進行有效的加強與改進，如此除了可以
成功的抓住消費者心態外，更可以爲廠商
帶來更多的獲利。
最後我們根據區隔性之偏好解讀模式
isi
S
s
si Z 
1
    sipi Ns  ,0
的關係，透過 s與 s參數來解釋消費者在
品牌選擇時各品牌間的相關程度。此外，
我們也進一步探討品牌偏好間的相關性以
及價格敏感度的關係。相關的分析結果可
彙整如表 10 所示。
在此我們先針對相關性以及價格敏感
度的涵義進行解釋，依據群集內共變異數
相 等 的 假 設 ， 我 們 可 以 根 據
 bvsavsCov  ,, , （ ba ）進一步推論
出群集內 avs , 與 bvs , 之間的變動關
係。其中品牌間的變動程度可以探究是否
呈現替代品或互補品的交互關係，而品牌
與價格之間的相關程度則代表著該品牌偏
好的上升，是否會帶動消費者對於其他品
牌促銷活動的反應。若消費者對該品牌與
價格偏好呈現正相關時，我們可以推論該
消費者對該品牌偏好的上升將會帶動價格
偏好的上揚。值得注意的是由於價格偏好
的估計結果皆為負值，因此價格偏好的上
升將會造成消費者對於價格敏感度的降
低。亦即消費者將會直接選擇該品牌之產
品，而較不考慮其他品牌的折扣促銷。
10
本研究在後續發展上，除了可以
在層級貝氏模型中的品牌選擇效用
模 式 部 分 加 入 產 品 購 買 數 量 變 數
外，更可以導入經濟學的理論來探討
消費者的行為以增加模式的合理性
與解釋性。在 MCMC 估計方面，則可
以探討其他的人工智慧工具來加速
模擬抽樣的收斂速度。換言之，利用
人工智慧工具應用於層級貝氏模型
中，將會有更多議題可以進行更深入
的探討。
1. Allenby, Greg M. and James L. Ginter
(1995), “Using Extremes to Design
Products and Segment Markets,” Journal 
of Marketing Research, Vol. 32, 392-403.
2. Bernardo and Smith (1994), Bernardo,
Jose, Adrian F. M. Smith. 1994. Bayesian
Theory. John Wiley, New York.
3. Casella, G. and George E. (1992),
“Explaining the Gibbs sampler,”
American Statistician, Vol. 46:167–174.
4. Chib, Siddartha. (2003), Monte Carlo
methods and Bayesian computation:
Overview. S. E. Fienberg, J. B. Kadane,
eds. International Encyclopedia of the
Social and Behavioral Sciences: Statistics.
Elsevier Science, Amsterdam, The
Netherlands. In press.
5. Chib, S. and E. Greenberg. (1995),
“Understanding the Metropolis-Hastings
Algorithm,”The American Statistician 49,
327–335.
6. Gelman, Andrew, John B. Carlin, Hal S.
Stern, Donald B. Rubin. (1995), Bayesian
Data Analysis. Chapman Hall, London.
7. Guadagni, Peter M. And John D. C. Little
(1983), “A Logit Model Of Brand Choice 
Calibrated On Scanner Data,” Marketing 
Science, Vol. 2. No. 3. (Summer),
203-238.
8. Gupta, Sunil (1988), ”Impact Of Sales 
Promotions On When, What, and How
Much To Buy,” Journal of Marketing 
Research, Vol. XXV, (November),
342-355
9. Hauser, John R. and Steven M. Shugan
(1983),“Defensive Marketing Strategies,”
Marketing Science, Vol. 2 (Fall), 319-60.
10. Kamakura, Wagner A. and Gary J.
Russell (1989), “A Probabilistic Choice
Model for Market Segmentation and
Elasticity Structure,”Journal of Market
Research, Vol. 26, 379-390.
11. Liu, Jun S. (2001), Monte Carlo
Strategies in Scientiﬁc Computing.
Springer-Verlag, New York.
12. McFadden, D. (1973), Conditional Logit
Analysis of Qualitative Choice Behavior,
in: Za-rembka, P. (ed.), Frontiers in
Econometrics, Academic Press.
13. Robert, Christian P., George Casella.
(1999), Monte Carlo Statistical Methods.
Springer, New York.
14. Rossi, Peter E. and Greg M. Allenby
(2003), “Bayesian Statistics and 
Marketing”, Marketing. Science, Vol. 22,
304-328.
15. Rossi, Peter E., Robert E. McColloch and
Greg M. Alenby (1996), “The Value of 
Purchase History Data in Target
Marketing,” Marketing Science, Vol. 15, 
321-340.
16. Smith, A.F.M., and Roberts, G.O. (1993),
“Bayesian computation via the Gibbs 
sampler Z and related Markov chain
Monte Carlo methods with discussion,” 
Journal of the Royal Statistical Society B,
Vol. 55, 3-23.
17. Talukdar, Debobrata, K. Sudhir, and
Andrew Ainslie (2002), “Investing New 
Production Diffusion Across Products
and Countries,” Marketing Science, Vol.
21, 97-116.
3表 4. 部分消費者之偏好結構
消費者偏好結構( i, v ) 1v(標準差)
2v
(標準差)
3v
(標準差)
4v
(標準差)
1i 52.08136(0.49585)
50.43648
(0.60230)
53.09589
(0.52335)
-3.18126
(0.19840)
2i 55.31237(0.52159)
47.46318
(0.54354)
54.82509
(0.45725)
-3.05202
(0.22894)
表 5. 第一位消費者在促銷環境中品牌選擇的機率
促銷環境
品牌 原價 折價
1j,1iX 
變數
第一位消費者的
1i
1j,1iY   |, iji kCP 
林鳳營 75 元 10 元
光泉 75 元 5 元
統一 75 元 10 元
優沛蕾 58 元 0 元
3 4
1 0 0 1.946
0 1 0 2.485
0 0 1 1.946 
 
 
 
  
14
3.181-
096.53
436.50
081.52













4 1
29.81
12.26
30.83
0.00 
 
 
 
 
 
  4 1
0.27
0.00
0.73
0.00 
 
 
 
 
 
 
表 6. 群集內消費者數量的抽樣平均數與變異數
群一 群二
群集內消費者個數(平均數) 18.93735 114.0627
群集內消費者個數(變異數) 2.895211 2.895211
表 7. 各群集人口統計分佈資料
群一 群二
個數 % 個數 %
性別 女 15 14.2 91 85.8
男 6 22.2 21 77.8
職業 家庭主婦 9 17.3 43 82.7
工商服務業 12 14.8 69 85.2
學歷 高中以下 7 12.0 47 87.0
大專以上 14 17.7 65 82.3
婚姻狀況 未婚 1 5.3 18 94.7
已婚 20 17.5 94 82.5
來店所需時
間
超過 10 分鐘 8 17.8 37 82.2
5 至 10 分鐘 13 14.8 75 85.2
年齡層 青年 1 16.7 5 83.3
成年 20 15.7 107 84.3
5表 10. 貝氏後驗估計值
各品牌偏好及敏感度(標準差)
s 林鳳營 1v 光泉 2v 統一 3v 價格 4v
林鳳營品牌偏好 1v 1.734564(1.09587)
-2.03445
(1.26804)
1.259848
(1.20189)
-0.05625
(0.43081)
光泉品牌偏好 2v - 3.63666(1.72761)
-3.17306
(1.70228)
0.081174
(0.54003)
統一的品牌偏好 3v - - 3.331319(1.71908)
-0.10474
(0.54036)
1s
價錢敏感度 4v - - - 0.144893(0.23697)
林鳳營品牌偏好 1v 0.662857(0.67168)
0.469157
(0.62663)
-1.35482
(0.63117)
-0.00984
(0.34582)
光泉品牌偏好 2v - 1.304515(0.79939)
-2.26784
(0.81990)
-0.29478
(0.33920)
統一的品牌偏好 3v - - 4.576754(0.88267)
0.396477
(0.38343)
2s
價錢敏感度 4v - - - 0.12685(0.26711)
-1.90
-1.85
-1.80
-1.75
-1.70
-1.65
-1.60
-1.55
-1.50
1.0E+00 3.0E+02 6.0E+02 9.0E+02 1.2E+03 1.5E+03 1.8E+03
次數
Be
ta
模
擬
值
圖 1 基因演算法設定MCMC抽樣，後 2萬次 4,2s  v 估計值的收斂圖
-3.20
-3.18
-3.16
-3.14
-3.12
-3.10
-3.08
1.0E+01 3.0E+03 6.0E+03 9.0E+03 1.2E+04 1.5E+04 1.8E+04
次數
B
et
a
模
擬
值
圖 2 隨機初始值的MCMC抽樣圖，後 2萬次 4,2s  v 估計值的收斂圖
