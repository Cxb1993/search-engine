行政院國家科學委員會專題研究計畫成果報告 
WiMAX 系統上適地性服務系統之開發(II) 
Developing a Location-based Information System on WiMAX(II) 
計畫編號：NSC 96-2218-E-027-015- 
執行期限：96 年 8 月 1 日至 97 年 7 月 31 日 
主持人：劉傳銘   國立臺北科技大學 資訊工程學系 
共同主持人：劉建宏   國立臺北科技大學 資訊工程學系 
計畫參與人員： 謝耘東、張家毓、陳弘升 
 
一、摘要 
在結合行動通訊、定位系統與地理資訊系統
的無線網路上：行動適地性服務 (Mobile 
Location-based service，MLBS)的應用益趨
於多元與重要，包括了軍事、救災、醫療及
導航等方面的應用，為人類生活帶來許多便
利。本計劃延續第一年之研發成果，其目的
即是以台灣地理資訊為基礎，建置一套進階
的行動適地性服務資訊系統—『擁有資料廣
播 方 式 之 適 地 性 資 訊 服 務 系 統 』
(Location-based Information System – Using 
Data Broadcasting Approach, LocIS–DBA)。 
系統以WiMAX為無線網路平台，除加入更
多新型態的服務外，在考量WiMAX上
MBS(Multicast/Broadcast Services) 的功能
下，計畫改變原系統中點對點的服務提供模
式，利用資料廣播的方法散佈使用者所需的
資料，以達到降底系統建置成本並提高服務
查詢效率的目的。開發重點為：(1)改善原系
統模組功能、(2)開發動態最佳路徑搜尋
(Dynamic Best Path Search)、(3)群組最近k 
個相鄰者搜尋(Group k Nearest Neighbors 
Search, GkNN) 、及 (4) 以資料廣播 (Data 
Broadcasting)方式提供最短路徑搜尋。 
 
關鍵詞：道路資訊、最佳路徑、群組最近鄰
居查尋、行動適地性服務、地理資訊系統、
資料廣播 
 
 
 
二、前言 
隨著電信業3G時代來臨與全球微波存
取互通介面(Worldwide Interoperability for 
Microwave Access, WiMAX)[1]之蓬勃發
展，行動網路資料傳輸速度已大幅提升，加
以全球定位系統 (Global Position System, 
GPS)[2]裝置的普及化與小型化，適地性服
務(Location-Based Service, LBS)[3]不再是
昂貴的服務。民眾可使用GPS提供本身所在
位置，藉由行動網路傳送使用者位置，即可
即時獲取與用者位置相關的生活資訊與地
理資訊。電信服務更是以提供資訊服務為導
向，如何提供使用者多種類且豐富的資訊將
是電信業者著重的方向；對消費者而言，擁
有多種類的資訊服務將使得生活更加便利。 
LBS是透過定位系統，結合使用者位置
(User Position)與地理空間資訊(Geospatial 
Information) ， 利 用 無 線 網 路 (Wireless 
Networks)來傳送與使用者位置相關資訊的
一種服務(Service)。LBS可提供使用者相當
多種類的資訊，包括事故救援、公眾安全、
公共交通等等，因此LBS不只帶給人們相當
大的便利，也擁有相當龐大的商業價值，愈
來愈多的公司投入LBS的開發與研究工作。 
本計劃延續第一年之計劃，今年度將以
上一年度所開發之『適地性資訊服務系統』
(Location-based Information System, 
LocIS)[4]為基礎，除進一步強化系統的功能
與所提供之服務外，計畫在其中加入其他類
型的服務，例如群組最近k個相鄰者搜尋
(Group k Nearest Neighbors Search, GkNN)[5]
3.3 資料廣播 
資料廣播相關的一些議題亦在近幾年
被廣泛的探討[6][10][11][12]。它的最大優點
是只需很小的成本就可以同時間內應付大
量的使用者查詢，除此之外對於大部分使用
者都會發出相同查詢的環境而言，更能發揮
其長處。資料廣播模式(如圖二)是以伺服器
端經由廣播頻道散佈資料，用戶端可以藉由
收聽廣播頻道來獨立檢索其有興趣的資料。 
在探討資料廣播協定時會以查詢時間
或電力消耗兩個角度來衡量其效能。在查詢
所等待的時間方面是探討使用者從廣播頻
道上開始切入廣播頻道查詢到收到完整回
應所經歷的時間，這段時間稱之為查詢經歷
時間(Latency)，此查詢經歷時間可作為系統
服務品質(Quality of Service, QoS)的指標。
在衡量電力消耗方面，則是評量使用者在廣
播頻道上聽取關於自己查詢的資訊所花的
時間多寡，此聽取廣播頻道的時間稱之為聽
取時間(Tuning Time)，而其代表的意義即是
行動用戶端電力消耗的大小，聽取時間越
少，電力消耗則越少。 
在動態最佳路徑查詢服務方面，目前尚
未有相關的資料廣播協定被提出，因此我們
將嘗試開發一套以資料廣播為基礎的解決
方案，並探討在合理的查詢經歷時間之內，
以最少的聽取時間在廣播循環中下載所需
的資料。 
 
圖二、資料廣播模式。 
 
四、系統開發重點 
在第一年完成LocIS系統開發後，本年
度預計開發的重點有： 
(1) 以圖形顯示道路網資訊與查詢即時相關
路況資訊 
系統將提供使用者最新的路況資料查
詢，同時輔佐使用者來過濾不必要的路況，
並將計算結果回報予使用者，讓使用者可以
專心於行車，不必分心去聽取廣播中的交通
路況[13][14]。此外，改善後的圖形化資訊
模式，使用者可藉由查詢的資訊進一步檢視
路況詳細資料，也可以透過圖形介面來了解
本身位置與路況資訊之間的位置關係。 
(2) 群組最近 k 個相鄰者(GkNN)搜尋服務 
此種查詢是最近 k 個相鄰者搜尋的延伸
[5]，差別在於查詢點的數量有一個以上。我
先定義一個點 v到一群組Q的距離，dist(v, Q)
為所有在集合 Q 中的點到 v 之距離總合，意
即 dist(v, Q)=∑q∈Q dist(v, q)。假設給定一個
物件資料集 D 及一查詢點群 Q，群組最近 k
個相鄰者搜尋即是在物件資料集 D 中找出
距離與查詢點群 Q 最近的 k 個物件。以下為
群組最近 k 個相鄰者搜尋問題之定義： 
群組最近 k 個相鄰者搜尋(Group k Nearest 
Neighbors Search, GkNN Search)： 
給定一群點 Q 及一個整數 k，找一個集合
GkNN⊆D 且|GkNN|=k，使得任一物件 p ∈
GkNN，dist(p, Q)≦ min o∈D-GkNN dist(o, Q)。 
(3) 動態最佳路徑搜尋 
在一般的導航軟體中，做路徑規劃時通
常只會計算起點到終點之間的最短路徑，無
法考量即時路況來決定一個最佳路徑。計畫
所開發的系統除系統可監看即時路況外，並
將路況反應到路徑規劃的過程中。最後所規
劃出來的路徑不一定是最短路徑，但保證是
最通暢的路，讓使用者避開塞車之苦。為了
達到這項功能，我們向交通部全國路況資訊
中心[16][17]取得全國路況資訊，它的內容
為警廣全省七個分台與各縣市警勤單位、公
務局或建設局等利用「智慧型路況通報系
統」通報匯整而成，並在網站上以 XML[18]
格式對外發佈。本計畫利用這些資訊，動態
更新道路網中的道路的權值，並計算出當前
的最佳路徑。 
(4) 以資料廣播方式提供最短路徑查詢服務 
計劃考慮以資料廣播的方式提供最短
路徑查詢。在廣播環境之中，無論同時有多
少用戶查詢最短路徑，所花費之頻寛及計算
成 本 皆 相 同 。 有 鑑 於 它 的 高 擴 展 性
 
z LocIS-DBA伺服器端的RII子系統使用
乙太網路取得全國路況中心的資訊。 
z 如未來行動裝置有支援更新的 JVM
時，可以將連接 GPS 的 ComConnection
改由 JSR82 實作，同時 kSOAP 由
JSR172 實作，增加系統執行效率。 
5.3 開發工具 
LocIS-DBA 系統設計為解決行動裝置
的多樣化、伺服器端跨平台與減少開發成本
問題，系統採用 JAVA 為基礎開發。為考慮
未來系統之擴充性與其他系統介接問題，系
統資料交換以 Web Services 為傳送資訊方
式，交換格式採用 XML 開放格式提供未來
其它系統介接。 
 
六、系統開發成果 
6.1 地圖資訊及介面改善 
以純文字模式展現路況資訊的方式，對
於行車中的使用而言仍不甚方便。因此系統
改以圖形化介面來顯示道路資訊與路況資
訊，讓使用者能有效率的即時掌握周遭路況
資訊。圖五所示為舊有的圖形介面與本年度
計畫改善後的圖形介面。 
 
LocIS 系統 LocIS-DBA 系統 
圖五、舊有及改善後的使用者端畫面。 
  
6.2 群組最近景點查詢 
本系統所提供的群組最近景點查詢服
務可讓使用者查詢離自己與朋友間所構成
群組的最近的停車場、加油站、飯店等等的
景點。在進行這種查詢之前我們必須對空間
資料建立索引，而我們所使用的索引結構稱
為 R-tree[24]，此索引結構能有效增加地理
資料的查詢效率。R-tree 是一個類似 B-tree
的索引結構，不同於 B-tree 的是 R-tree 能處
理多維度空間上的物件索引。有了索引結構
之後系統便能以 kNN[25]演算法配合群組朋
友的位置，找出 k 個我們要查詢的群組最近
景點。 
6.3 動態路徑查詢 
系統開發動態調適性最短路徑演算法
(Dynamically Adaptive Shortest Path Search 
Algorithm, DASP)[29]，利用衛星定位與交
通部提供的即時交通資訊，能在考慮真實交
通狀況下，找到一條到達目的地的路徑。 
避開有路況的道路，能夠減少駕駛人需
要花費的時間。LocIS-DBA 系統的導航系
統，以使用者在一般道路行車作為考量，我
們以『道路長度』為其權重值。如果道路沒
有受到任何路況事件影響下，此刻的行車效
率是最佳的，因此沒有路況的道路的權重值
為最小值，亦即路段的真實路徑長為最短距
離；反之如果道路受到路況事件影響，將減
慢使用者的行車速度，此時行駛該路段的時
間將被拉長，我們將受影響的行車時間，假
想為該路段的路徑變長，亦即該路段的權值
增大，在路況事件解除以後，該路段的長度
回到真實長度，即路段權值回到最小值。 
駕駛人下查詢指令後，可以在地圖畫面
上看到一條以不同顏色標示之引導路徑，即
為本系統所計算出的最佳路徑。以圖六為
例，駕駛人的出發點為台北市忠孝東路一段
與中山南路交叉口，目的點為中華路一段與
愛國西路交叉口。當駕駛人依照引導路徑走
至(本系統預先劃分之)下一塊地圖時，引導
路徑的後半段也會隨地圖資訊一起被顯示
出來。 
 
圖六、動態路徑查詢範例(由左至右)。 
3000 Nodes
Dijkstra
DSP
A*
0
0.05
0.1
0.15
0.2
0.25
0% 10% 20% 30% 40% 50%
Traffic congestion
Ex
ec
ute
 tim
e(s
) 
10000 Nodes
Dijkstra
DSP
A*
0
0.5
1
1.5
2
0% 10% 20% 30% 40% 50%
Traffic congestion
Ex
ec
ute
 tim
e(s
) 
0% Traffic congestion
Dijkstra
DSP
A*
0
0.5
1
1.5
3 4 5 6 7 8 9 10
Number of Nodes(k)
Ex
ec
ute
 tim
e(s
) 
50% Traffic congestion
Dijkstra
DSP
A*
0
0.5
1
1.5
2
3 4 5 6 7 8 9 10
Number of Nodes(k)
Ex
ec
ute
 tim
e(s
) 
演算法能夠順利的應用於地理資料系統。實
驗描述分別如下： 
A. 以不同的邊權重值變化比例模擬
道路擁塞情況，並觀察各演算法路
徑查詢所需時間的變化。 
B. 以增加節點數量的方式模擬地圖
的複雜度，並觀察各演算法路徑查
詢所需時間的變化。 
(a) 節點數量 3,000 
(b) 節點數量 10,000 
圖八、實驗項目 A 的數據結果。 
針對實驗項目 A 其實驗數據統計，如
圖八所示。從結果可以明確證明 DASP 演算
法可以使用更少的時間成本來完成路徑查
詢的工作。 
(a) 無路況環境 
(b) 50%邊權重值變化之路況環境 
圖九、不同節點數量所需查詢時間。 
而針對實驗項目 B 其實驗數據統
計，當地圖複雜度增加時，DASP 演算
法較其他演算法能更有效的節省運算時
間，請參考圖九。 
 
7.2 資料廣播環境之效能評估 
本計劃以實驗模擬的方式測試以資料
廣播提供最短路徑查詢的效能。本實驗以台
北市地圖為基礎，測試使用者進行最短路徑
查詢時的聽取時間及查詢經歷時間。每個實
驗項目我們進行 100 次的隨機查詢，在每個
查詢之中以隨機的方式決定起點及終點。 
在實驗之中我們測試以 HGPR 或
HGPR-BI 進行最短路徑查詢時的聽取時
間、查詢經歷時間及廣播循環長度(cycle 
length)，其中 BI(Boundary Information)代表
在頻道中加入分割邊界資訊輔助使用者查
詢。我們並設定兩種封包大小做為比較，分
別為 768 bytes 及 1536 bytes。實驗結果如圖
十所示。觀察實驗結果可發現，與無邊界資
訊的環境比較起來，加入邊界資訊後可有效
減少使用者查詢時的聽取時間(約為無邊界
資訊的一半)，且邊界資訊只會稍微提高查
詢經歷時間及循環長度(約 1 到 2 個封包)。
此外，使用者可在兩個廣播循環內(約為 1.5
個廣播循環)完成最短路徑查詢。 
118.06
168.4
109
55.7
170.29
110
77.09
110.65
71
35.85
112.54
72
0
20
40
60
80
100
120
140
160
180
Tuning Time Latency Cycle Length
Pa
ck
et
s
HGPR/768 HGPR-BI/768 HGPR/1536 HGPR-BI/1536  
圖十、HGPR 及 HGPR-BI 比較圖。 
 
 
 
 
