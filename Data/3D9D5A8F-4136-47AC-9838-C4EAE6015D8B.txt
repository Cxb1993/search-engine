摘 要 
本計畫應用類神經網路來建立汽油引擎
的洩漏來源診斷系統、曲軸通風系統裂縫程
度診斷系統及燃油壓力調整器裂縫程度診斷
系統，利用遺傳演算法來得到類神經網路的
最佳結構及初始加權值。先利用洩漏來源診
斷系統來診斷洩漏來源，接著利用曲軸通風
系統或燃油壓力調整器的裂縫程度診斷系統
來偵測其裂縫程度。 
測試樣本的症狀有正常情況、曲軸通風
系統真空洩漏和燃油壓力調整器真空洩漏三
種。由結果知，以類神經網路所建立的洩漏
來源診斷系統能正確地判斷出洩漏來源。另
外，應用曲軸通風系統及燃油壓力調整器的
洩漏程度診斷系統，都可以正確的診斷出曲
軸通風系統及燃油壓力調整器的洩漏程度。
此診斷系統的建立，可做為日後判別汽油引
擎洩漏的參考依據。 
 
關鍵字:診斷、類神經網路、真空洩漏 
 
Abstract 
In this project, applying neural network to 
construct the engine’s leak source diagnostic 
system, crankshaft ventilation system 
crack-degree diagnostic system and fuel 
pressure regulator crack-degree diagnostic 
system, and using genetic algorithm to achieve 
the optimum structure of neural network and 
initial weighting values. At first, using leak 
source diagnostic system to diagnose leak 
source, then detect the crack degree using 
crankshaft ventilation system or fuel pressure 
regulator crack-degree diagnostic system. 
The testing samples have three symptoms 
there are normal condition, crankshaft 
ventilation system and fuel pressure regulator 
vacuum leaks. The results indicate that leak 
source diagnostic system constructed by the 
neural network can judge the leak source 
correctly. In another way, both crankshaft 
ventilation system and fuel pressure regulator 
crack-degree diagnostic systems can diagnose 
the crack degrees correctly. The establishment 
of diagnostic system can be used as a reference 
basis for gasoline engine leak diagnosis. 
 
Keywords：diagnosis, neural network, vacuum 
leak 
 
1. 前言 
洩漏是導致汽車引擎增加排放廢棄物，造成
操控問題或損害引擎的一項重要因素。有時
候真空洩漏會讓人以為是點火或燃料問題而
造成診斷錯誤。對於汽油噴射引擎車，真空
洩漏因傳送錯誤資訊到汽油引擎ECU及造成
燃料控制系統所控制的燃料混合物濃度錯
誤，而使引擎在過濃或過稀的狀態下運轉。
另外，燃油壓力調整器也會因真空洩漏，雖
然噴油週期正確，卻造成錯誤的燃料噴射
量。當混合氣過稀時，會使引擎不容易點火，
在怠速時常常失火(misfire)或無法點火，在加
速時產生抖動(hesitate)或失火。當混合氣過
稀使引擎失火時，會使引擎排棄物的HC濃度
變大而造成空氣污染。 
檢測引擎是否產生洩漏，在傳統方法上
是比較引擎流入的空氣流量及估測的空氣流
量之差異來判別是否產生洩漏；Nyberg [4]
利用階乘函數(power function)來估計洩漏面
積來判別引擎是否產生洩漏。本文則是應用
類神經網路來建立一汽油引擎洩漏診斷系
統，由引擎的空氣流量率、節氣門開度、進
氣歧管壓力和噴油時間等資訊來判別引擎是
否產生洩漏。 
由於類神經網路具有良好的解決最佳化
及非線性系統問題，常被用來當作學習高度
非線性動態系統的有利工具。至今類神經網
路已廣泛地使用在各個領域，尤其是在系統
鑑別及故障診斷。在陳[1]的汽油引擎之類神
2 
1. 正常模式： 
11 =*y ， ， 。 02 =*y 03 =*y
2. 曲軸通風系統洩漏： 
11 =*y ， ， 。 12 =*y 03 =*y
3. 燃油壓力調整器洩漏： 
11 =*y ， ， 。 02 =*y 13 =*y
(B) 曲軸通風系統洩漏程度之期望輸出： 
1. 正常模式： 
11 =*y ， ， ， 。 02 =*y 03 =*y 04 =*y
2. 曲軸通風系統有 5mm 裂縫洩漏： 
01 =*y ， ， ， 。 12 =*y 03 =*y 04 =*y
3. 曲軸通風系統有 10mm 裂縫洩漏： 
01 =*y ， ， ， 。 02 =*y 13 =*y 04 =*y
4. 曲軸通風系統有 15mm 裂縫洩漏： 
01 =*y ， ， ， 。 02 =*y 03 =*y 14 =*y
 (C) 燃油壓力調整器洩漏程度之期望輸出： 
1. 正常模式： 
11 =*y ， ， ， 。 02 =*y 03 =*y 04 =*y
2. 燃油壓力調整器有 5mm 裂縫洩漏： 
01 =*y ， ， ， 。 02 =*y 13 =*y 04 =*y
3. 燃油壓力調整器有 10mm 裂縫洩漏： 
01 =*y ， ， ， 。 02 =*y 13 =*y 04 =*y
4. 燃油壓力調整器有 15mm 裂縫洩漏： 
01 =*y ， ， ， 。 02 =*y 03 =*y 14 =*y
4. 最佳結構調整及學習 
由於汽油引擎的動態資料級數(order)都
不相同，為了避免級數較小的資料其重要性
被忽略掉，必須將動態資料做正規化
(normalization)處理，使其介於 0 到 1 之間，
以免影響到類神經網路訓練及鑑別的精確
度。 
本文所使用的類神經網路有四個輸入變
數，分別是空氣流量(AFS)、噴油時間(Ton)、
進氣歧管壓力(Pm)和節氣門角度(TPS)，其正
規化過程如下： 
minmax
min
AFSAFS
AFSAFSx −
−=1    (1) 
minmax
min
TonTon
TonTonx −
−=2    (2) 
minmmaxm
minmm
PP
PP
x −
−=3     (3) 
minmax
min
TPSTPS
TPSTPSx −
−=4    (4) 
 
洩漏偵測診斷系統的參數訓練學習如圖
6 所示。 
(I) 診斷系統的結構學習步驟如下：  
1. 收集引擎動態資料，建立引擎正常運轉及
不同漏氣情況下運轉的資料庫。 
2. 讀入訓練資料，並將其作正規化，如(1)
式到(4)式所示。 
3. 建立初始模糊系統及洩漏偵測診斷系統。 
4. 設定系統參數的初始值，ε，tmax，Gmax。 
5. 利用遺傳演算法的交配、突變及繁殖演算
法去產生新的結構及加權值。 
6. 由適應函數去得到一組最佳結構及加權
值，建立一新的診斷系統。 
7. 檢驗適應函數值是否低於預設值？是，則
進行類神經網路的訓練學習；否，則回到
步驟 5 繼續學習。 
(II) 類神經網路的學習步驟如下： 
1. 設定最大學習次數 ，最大容許誤差maxt
4 
而yh2和yh3的平均值皆趨近於 0.5，但是從圖
12 可以看出，前半段yh2趨近於 1，yh3趨近
於 0；然而後半段yh2趨近於 0，yh3趨近於 1；
表示曲軸通風系統先產生洩漏，之後回復正
常；燃油壓力調整器先是正常，後來產生洩
漏。 
另外，測試樣本 CkSrc_f5，其診斷結果
是燃油壓力調整器產生洩漏；測試樣本
CkSrc_n2，其診斷結果是正常，如表 1 所示。 
 
(2) 曲軸通風系統裂縫程度診斷 
曲軸通風系統裂縫程度診斷系統，經
10000的迭代學習後，均方根誤差可收歛至
0.00180。圖12是測試樣本blow_b5mm的洩漏
程度診斷輸出響應。雖然yh1平均值小於0
（-0.00012），但是趨近於0，yh3和yh4的平均
值都趨近於0，且yh2平均值趨近於1，如表2
所示，故可斷定測試樣本blow_b5mm有5mm
長的裂縫洩漏。 
另外，測試樣本blow_b10mm的診斷結
果是曲軸通風系統有10mm的裂縫洩漏，測
試樣本blow_b15mm的診斷結果是曲軸通風
系統有15mm的裂縫洩漏，如表2所示。 
 
(3) 燃油壓力調整器裂縫程度診斷 
燃油壓力調整器裂縫程度診斷系統經
10000次的迭代學習後，均方根誤差可收歛至
0.00216。 
圖13是測試樣本Reg_f5mm的洩漏程度
診斷輸出響應。雖然 yh4 平均值小於 0
（-0.00027），但是趨近於0，yh1的平均值等
於0，yh3的平均值都趨近於0，且yh2平均值
趨近於1，如表3所示，故可斷定測試樣本
Reg_f5mm有5mm的裂縫洩漏。 
圖14是測試樣本Reg_f15mm的洩漏程度
診斷輸出響應。yh1，yh2和yh3的平均值都趨
近於0，且yh4平均值趨近於1，如表3所示，
故可斷定測試樣本Reg_f15mm有15mm的裂
縫洩漏。 
另外，測試樣本Reg_f10mm的診斷結果
是燃油壓力調整器有10mm的裂縫洩漏，如
表3所示。 
6. 結論 
本計劃以 4 輸入/3 輸出或 4 輸入/4 輸
出，2 個隱藏層的類神經網路為基本架構，
來建立三個診斷系統，分別是洩漏來源診斷
系統、曲軸通風系統裂縫程度診斷系統及燃
油壓力調整器裂縫程度診斷系統，利用遺傳
演算法來分別得到三個診斷系統的類神經網
路的最佳結構及初始加權值。先利用洩漏來
源診斷系統來診斷洩漏來源，再依據診斷出
的洩漏來源，利用曲軸通風系統或燃油壓力
調整器的裂縫程度診斷系統來診斷其對應的
裂縫程度。 
在進行診斷系統的訓練學習時，須先將
訓練資料作正規化處理，利用最陡坡降法及
迭代運算來求得最佳目標值，以提高類神經
網路鑑別洩漏來源及裂縫程度的正確性。由
結果知，應用本計劃所提出的診斷系統架構
可以明確的判斷出洩漏來源及其裂縫程度。
因此，利用類神經網路及遺傳演算法來建立
洩漏偵測診斷系統為一可行的方法。 
 
7. 參考文獻 
[1] 陳聖洲，汽油引擎之類神經模糊故障診
斷，碩士論文，南台科技大學機械工程
系，台南、台灣，2003。 
[2] 陳沛仲，陳聖洲，”類神經模糊技術在汽
油引擎的故障診斷 ---空氣流量感知
器”，2004 自動控制研討會，pp. 1-6，民
國 92 年。 
[3] 陳沛仲，廖哲鴻，”應用類神經模糊技術
6 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
圖 6 洩漏偵測診斷系統的訓練學習流程 
 
 
 
     
圖 7 汽油引擎實驗設備 
 
 
0 1 2 3 4 5
x 10
4
0
0.01
0.02
0.03
0.04
0.05
0.06
0.07
0.08
R
oo
t M
ea
n 
Sq
ua
re
 E
rr
or
Learning epoch  
A 開  始 
圖 8 洩漏來源診斷系統的學習結果 
 
0 20 40 60 80 100
-5
0
5
x 10
-3
yh
1
0 20 40 60 80 100
0.995
1
1.005
yh
2
0 20 40 60 80 100
-5
0
5
x 10
-3
yh
3
data no  
圖 9 測試樣本 CkSrc_b10 診斷結果 
 
0 20 40 60 80 100
0
0.005
0.01
0.015
yh
1
0 20 40 60 80 100
-0.015
-0.01
-0.005
0
yh
2
0 20 40 60 80 100
1.0004
1.0006
1.0008
1.001
yh
3
data no  
圖 10 測試樣本 CkSrc_f15 診斷結果 
建立引擎正常及
洩漏運轉資料
庫，Gmax
建立洩漏偵測
診斷系統 
RMSE < ε 
N 
Y
Y 
視需要加入新
的訓練資料 結 束
t > tmax
N 
系統參數自我
學習及調整 
t = t + 1 
設定系統參數
的起始值，ε，
tmax，t = 0 
B 
調整系統結構
及加權值 儲存系統結
構及加權值 
遺傳演算法 
調整洩漏診斷
系統的結構 
B A 
8 
CkSrc_b15f10 -0.00004 0.49981 0.50017 先曲軸通風系統，後
燃油壓力調整器 
CkSrc_n2 0.99993 0.00013 -0.00006 正常 
 
表 2  曲軸通風系統裂縫程度診斷結果 
測試樣本 yh1平均值 yh2平均值 yh3平均值 yh4平均值 裂縫程度 
blow_b5mm -0.00012 0.99951 0.00059 0.00002 5mm 
blow_b10mm -0.00036 0.00050 0.99726 0.00228 10mm 
blow_b15mm 0.00066 -0.00061 -0.00552 1.00549 15mm 
 
表 3  燃油壓力調整器裂縫程度診斷結果 
測試樣本 yh1平均值 yh2平均值 yh3平均值 yh4平均值 裂縫程度 
Reg_f5mm 0.00000 0.99989 0.00122 -0.00027 5mm  
Reg_f10mm -0.00002 -0.00004 0.98902 0.01103 10mm  
Reg_f15mm 0.00224 -0.00001 0.01008 0.98769 15mm  
 
 
計畫成果自評： 
本計劃一開始的構想是利用類神經網
路、模糊系統及遺傳演算法來建立洩漏偵測
診斷系統，後來經過多次試驗及測試，發覺
只利用類神經網路及遺傳演算法來建立洩漏
偵測診斷系統，不僅可以降低系統的複雜度
及運算的時間，其診斷結果的正確性也較
高，因此，改用類神經網路及遺傳演算法來
建立洩漏偵測診斷系統。 
本計劃以 4 輸入/3 輸出或 4 輸入/4 輸
出，2 個隱藏層的類神經網路為基本架構，
來建立三個診斷系統，分別是洩漏來源診斷
系統、曲軸通風系統裂縫程度診斷系統及燃
油壓力調整器裂縫程度診斷系統，利用遺傳
演算法來分別得到三個診斷系統的類神經網
路的最佳結構及初始加權值。 
由表 1、表 2 及表 3 的結果知，無論是
洩漏來源的診斷結果，或是曲軸通風系統或
燃油壓力調整器的裂縫洩漏程度診斷結果都
是正確的。說明了本計劃所提出的診斷系統
架構在引擎的洩漏偵測應用上是一可行的診
斷架構。 
本研究內容和原計畫內容相符合，也依
照規劃進度來完成預期的目標。研究成果可
被應用於產業界，亦適合發表於學術期刊。
相關研究成果已發表一篇研討會論文，亦投
了一篇研討會論文，同時指導一位研究生
以此題目為碩士論文。 
10 
