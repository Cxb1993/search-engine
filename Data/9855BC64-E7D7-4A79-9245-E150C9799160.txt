1行政院國家科學委員會專題研究計畫成果報告
智慧型貝類知識檢索系統
An Intelligent Seashell Knowledge Acquisition System
計畫編號：NSC 96-2218-E-327-002
執行期限：96 年 8 月 1 日至 97 年 7 月 31 日
主持人：李嘉紘 高雄第一科技大學資訊管理系 jhlee@ccms.nkfust.edu.tw
中文摘要
近年來，隨著資訊科技的蓬勃發展及數位典藏
計劃的實行，多數的研究以內容為基礎的影像檢
索方式來搜尋資料，而這些研究多利用低階的影
像特徵包含顏色、紋理和形狀等特徵做為影像分
類的依據。本研究主要針對台灣常見的貝類提出
一個有效的分類方法。本系統建置主要目的:提供
一套即便使用者不具備專業背景知識能力，也能
快速查詢貝類知識的檢索方法。利用 MPEG-7 標
準色彩結構描述子之 HMMD 顏色特徵、紋理特徵
之模糊紋理頻譜以及形狀特徵之中心點到輪廓的
距離等方法去摘錄貝殼影像的特徵值，然後使用
統計量之方法，平均數、標準差以及熵，來取代
低階影像以直方圖做為特徵比對的方式來對貝殼
進行檢索。接著我們採用資料探勘的方法, KNN、
C4.5 決策樹、倒傳遞類神經網路以及支撐向量機
等用來進行貝殼影像的檢索。將上述的方法來進
行貝殼的分類實驗並比較各檢索的方法，實驗結
果顯示利用支撐向量機在訓練集為 10%,測試集為
90%以及訓練集與測試集各 50%下,貝類圖片的檢
索分別具有 98%及 99%較高正確率。本研究所提
出的以統計量做為特徵值來取代傳統影像特徵的
分類方式，可以節省資料儲存的空間成本和資料
索引的時間且具有不錯的檢索結果
關鍵詞: HMMD(Hue-Min-Max-Difference)、模糊紋
理 特 徵 頻 譜 (Fuzzy Texture Spectrum) 、 CCD
(Centroid-Contour Distance)、CSH(Color Structure
Histogram)、色彩結構描述子（Color Structure
Descriptor）
1. 前言
隨著資訊科技(Information Technology; IT)的蓬
勃發展及網際網路的普及，各式各樣的數位影像
取得工具，如數位相機、影像掃瞄器以及數位影
像典藏的容量也已快速的成長。有效的影像檢索
方式，例如使用者可利用網際網路的瀏覽器或是
透過其他的影像檢索工具的方式來進行影像的搜
尋等。
影像檢索的技術可概分為兩種架構，一是文字為
基(Text-based)的檢索方法來搜尋影像；另一個則
是以內容為基(Content-based)的檢索方法來搜尋影
像。文字為基的檢索(Text-based Retrieval)方法主要
是 將 圖 片 透 過 人 工 方 式 以 文 字 加 以 註 解
(Annotation)，也就是用文字來描述圖片的內容。
由使用者輸入文字來比對欲搜尋對象的圖片內
容，然後透過資料庫管理系統(DBMS)來進行影像
的檢索。這類的方法有兩種主要缺點:第一，對圖
片使用文字註解的人工方式既費時又費力，且維
護也不容易。第二，每個人對同一張圖片的見解
可能不盡相同。針對同一張的圖片，不同的人可
能會給不同的文字描述，而不同的文字描述會給
人帶來不同的影像呈現感覺。因為影像是無法完
全經由文字的描述，來替代原本的影像內容。為
3本系統主要可以概分為四個子系統，影像處理子
系統(包含影像正規化)、物件特徵比對子系統(包含
顏色、紋理及形狀等特徵擷取及比對)、貝類資料
庫建置子系統及將最相似的貝類圖片檢索結果呈
現出來的物件展示子系統等。影像正規化包含三個
部份：輸入影像去背、去除雜訊與大小正規化。在
本研究中，我們假設使用者輸入之貝類影像皆為簡
單背景(背景顏色相同)，因此可以利用由外而內掃
描方式，類似區域成長法，將貝殼物件影像切割出
來，當圖片執行去背後，邊界與物件影像上有可能
會有雜訊，我們將利用中值濾波器或是數學形態學
Openning 來作雜訊濾除。當使用者上傳圖片時，
因為使用者在拍攝圖片時，可能會因為近拍，而將
貝殼物體拍攝的過大，或是因為遠拍，而將貝殼物
體拍攝的過小，所以系統必須要將圖片做統一大小
的正規化。本研究所提出的貝類檢索系統架構流程
如圖3
圖3 貝類檢索系統流程圖
資料來源:本研究整理
2.2特徵擷取
系統採用貝殼背面特徵擷取，包含顏色(color)、
紋理(Texture)、形狀(Shape)等特徵。當使用者上傳
一張貝殼背面圖像的時候，系統會先將影像執行正
規化(主軸校正、統一影像大小及雜訊濾除)，依圖
片的相關資訊，擷取出顏色特徵(CSH 顏色直方
圖)、紋理特徵(Fuzzy Texture Spectrum)及外形的特
徵(CCD影像)等特徵值，並將這些特徵值存入資料
庫當中，方便檢索時的比對。
2.2.1顏色特徵
顏色特徵是影像檢索中最廣泛使用的特徵之
一，且在所有視覺特徵當中，也最能顯示出其不同
之處。我們採用MPEG-7 （Multimedia Content
Description Interface）標準，此即完整描述多媒體
內容之界面標準和機制，並可透過此一標準對資料
內容進行描述。在顏色特徵分析方面，採用MPEG-7
色彩結構描述子（Color Structure Descriptor, CSD）
之HMMD 顏色直方圖分析方式，每張圖像透過
HMMD的公式轉換，將圖像的顏色降階至128群，
系統會得到128個特徵值，將這128個特徵值存至資
料庫做為影像顏色之特徵。透過RGB Plane 轉換為
HMMD Plane 之公式的轉換，將每一個像素點的
RGB轉換至對應的HMMD顏色分群，再將整張圖像
中物件的HMMD顏色分群值做累加，並做數值正規
化，主要是要將累加完的數值除於物件的總像素數
值，經過此動作後，在做比對差異的計算上比較不
會有數據大小不一致的情況產生，如公式1所示。
(1)
在顏色特徵的擷取上，我們將貝類影像經由HMMD
轉換後，再透過結構元素的使用可以獲得
5特徵頻譜(FTS)可以用來分類旋轉的紋理影像的
特性。
圖 7(a-d)四種不同角度的貝殼影像
資料來源: 本研究整理
圖 8(a-d)四種不同角度相對應之貝殼模糊紋理特
徵頻譜統計直方圖
資料來源: 本研究整理
2.2.3形狀特徵
在形狀特徵的擷取過程中，必須先執行影像的切
割，將主要物件的內容獨立出來，以便進行物件形
狀特徵值的擷取。目前形狀特徵的描述方法常用的
有兩種：一是以區域為主的形狀特徵描述:此特徵最
主要是以物件的面積為主，計算物件的面積，來比
較相似的程度，例如二值化面積比對。另一是以輪
廓為主的形狀特徵描述:此種方法是以外框為主的
方法，以描述物件的輪廓來比對物件和物件的相似
程度，例如: 中心點到輪廓的距離(CCD)特徵值比
對。本研究是採用中心點到輪廓的距離(CCD)的比
對方式進行形狀特徵值擷取。其原理為先找出貝殼
的中心點位置(Center Position)，方法為Cx為每個
pixel座標x值加總除以所有pixel的數量然後乘上貝
殼影像寬度分之一：Cy為每個pixel座標y值加總除
以所有pixel的數量然後乘上貝殼影像高度分之
一，即可求得中心點位置(Cx,Cy)。如公式5。
N
x
Widthage
Cx Rpixel

 __*
_Im
1 
N
y
Heightage
Cy Rpixel

 __*
_Im
1 
(5)
找出貝殼中心點位置後，接著進行 CCD 特徵的計
算來求得主軸角度(Principle Axis)，主軸計算公式
如 6，
1 11
20 02
21
tan
2
u
u u
     
(6)
其中 11 02 20u u u  分別為
  
  
  
1
11
0 2
02
2 0
20
x y
x y
x y
u x x y y
u x x y y
u x x y y
  
  
  



計算結果即為主軸角度，以主軸角度為基準，
依順時鐘方向，每隔十度向貝殼邊緣射出取樣一
次，總共 36 條線，即得到 36 條距離，利用中心
點到輪廓的距離(CCD)描繪出貝殼大概的整體形
狀如圖 9。圖 10 為代表圖 9 中兩顆不同貝殼的中
心點到輪廓的距離(CCD)曲線圖，由圖 10 中可看
出，不同的貝殼可以由特徵 CCD 曲線來辨識出貝
殼影像的整體形狀，類似形狀的貝殼也可容易由
(CCD)曲線圖辨識出來。
7個浮點數(float point)。
3.2比對結果
本實驗一比對結果如表 1；實驗二比對結果如表 2
表 1 實驗一特徵值比對結果精確度
特徵 (方
法)
顏色特徵
(CSH)
紋 理 特
徵(FTS)
形 狀 特
徵
(CCD)
測試數/
命中數
315/
296
315/
227
315/
305
準確率 0.939682 0.7206349 0.9682540
表 2 實驗二特徵值比對結果精確度
特徵 (方
法)
顏色特徵
(CSH)
紋 理 特
徵(FTS)
形 狀 特
徵
(CCD)
測試數/
命中數
175/
166
175/
145
175/
172
準確率 0.948571 0.828571 0.982857
由實驗數據測試結果可看出實驗一、二的形狀及
顏色特徵有超過九成以上的準確率，而實驗一的
紋理特徵也有七成以上的準確率；實驗二的紋理
特徵則有八成以上的準確率。我們針對紋理特徵
進行探討發現如圖 10(左圖)(右圖)
圖 13(左) 相似的紋理特徵貝殼圖(右)
資料來源:本研究整理
實驗中發現如圖 10(左圖)貝殼與(右圖)貝殼雖不
同，但紋理特徵相類似，造成紋理分析上的辨識
錯誤，結果將圖 10 左圖貝殼誤判分到右圖中的貝
殼。顏色及形狀誤判率較低的原因，則是 35 種貝
殼資料庫之間不同種類的貝殼用來測試的形狀與
顏色特徵內容，較少顏色或形狀相類似的貝殼，
實驗結果辨識度有高達九成以上的準確率。
本系統比對結果展示介面提供使用者上傳圖片
檔案，並顯示此圖檔相關影像資訊，包含有上傳
影像圖檔寬度、高度及檔案大小等資訊。比對結
果展示介面提供使用者有較彈性的特徵權重
(Weight)選擇，讓每個使用者可以依喜好的特徵權
重值進行調整，以達到最佳的檢索結果。貝殼比
對結果輸出張數，可針對系統比對結果與原圖最
相似之圖片之張數按名次列出。顏色、紋理、形
狀的權重分配可在介面上的橫條(Bar)做選擇，權
重分配為三種特徵值加總等於 1。系統介面提供
使用者的直觀認定做適時的特徵值調整，使本系
統的比對結果更貼近符合實際使用者所需求的最
佳比對結果。系統比對結果展示介面如圖 13
圖 14 系統比對結果介面展示
資料來源:本研究整理
3.3 不同 Data Mining 分類方法的實驗與結
果
KNN分類方法的統計特徵量測
我們使用 Weka 工具裡的 KNN 分類法(K=1,歐
式距離)，Weka 工具的 GUI 如圖 15，訓練樣本分
別為 10%及 50%下的實驗結果如表 3 及 4。在使
用訓練樣本為 10%及 50%情況下，FTS 分別獲得
較高的正確率 83.3%及 90%。
910%及 50%情況下，FTS 分別獲得較高的正確率
84.6%及 92.3%
圖 18 最佳參數選擇
(recommend by libsvm-easy.py)
圖 19 SVM分類方法使用Weka之 GUI
表 9 SVM(Training set=10%,Test set=90%)
表 10 SVM(Training set=50%,Test set=50%)
實驗效能評估
依據表 3至表 10，平均的Recall rate和 Precision
rate 使用來量測貝殼分類的效能。Recall rate 和
Precision rate 之 KNN、C4.5、BPN 及 SVM 分類
方法的效能比較分別如圖 20 和 21，Recall rate 結
合 Precision rate 各種分類方法之 35 種貝殼分佈如
圖 22 至 29，平均的 Recall rate 和 Precision rate
結合三種影像特徵如圖 30 和 31
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
CSD(Traing
Set=10,Test
Set=90%)
CSD(Traing
Set=50,Test
Set=50%)
FTS(Traing
Set=10,Test
Set=90%)
FTS(Traing
Set=50,Test
Set=50%)
CCD(Traing
Set=10,Test
Set=90%)
CCD(Traing
Set=50,Test
Set=50%)
Re
ca
ll
ra
te
KNN
C4.5
BPN
SVM
圖 20 各分類方法平均的 Recall rate
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
CSD(Traing
Set=10,Test
Set=90%)
CSD(Traing
Set=50,Test
Set=50%)
FTS(Traing
Set=10,Test
Set=90%)
FTS(Traing
Set=50,Test
Set=50%)
CCD(Traing
Set=10,Test
Set=90%)
CCD(Traing
Set=50,Test
Set=50%)
Pr
ec
is
io
n
ra
te
KNN
C4.5
BPN
SVM
圖 21 各分類方法平均的 Precision rate
35 kinds of seashell for KNN
Training set=10%,Test set=90%
0
0.2
0.4
0.6
0.8
1
0 0.2 0.4 0.6 0.8 1
Recall rate
Pr
ec
is
io
n
ra
te CSD
FTS
CCD
圖 22 KNN分類法之 35種貝類分佈圖
(Training set=10%,Test set=90%)
35 kinds of seashell for KNN
Training set=50%,Test set=50%
0
0.2
0.4
0.6
0.8
1
0 0.2 0.4 0.6 0.8 1
Recall rate
Pr
ec
is
io
n
ra
te CSD
FTS
CCD
圖 23 KNN分類法之 35種貝類分佈圖
(Training set=50%,Test set=50%)
35 knids of seashell for C4.5
Training set=10%,Test set=90%
0
0.2
0.4
0.6
0.8
1
0 0.2 0.4 0.6 0.8 1
Recall rate
Pr
ec
is
io
n
ra
te
CSD
FTS
CCD
圖 24 C4.5分類法之 35種貝類分佈圖
(Training set=10%,Test set=90%)
11
圖 33 各種分類法之 F-Measure效能評估
(Training set=50%,Test set=50%)
最後我們使用統計的量測方法結合 CSD、FTS 及
CCD 特徵用來做貝殼的分類方法效能評估，實驗
結果如表 11,12 及圖 34,35。KNN、BPN 和 SVM
在使用訓練樣本為 10%情況下超過 95%的準確
度；在使用訓練樣本為 50%情況下超過 96%的準
確度
表 11 各分類方法效能比較表
(Training set=10%, Test set=90%)
表 12 各分類方法效能比較表
(Training set=50%, Test set=50%)
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
Recall rate Precision rate F-Measure
Classification MethodsTrainingset=10%, Test set=90%
KNN
C4.5
BPN
SVM
圖 34 各分類方法效能比較圖
(Training set=10%, Test set=90%)
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
Recall rate Precision rate F-Measure
Classification MethodsTrainingset=50%, Test set=50%
KNN
C4.5
BPN
SVM
圖 35 各分類方法效能比較圖
(Training set=50%, Test set=50%)
4. 結論
貝類知識無論是在教學、食用、收藏或生態研
究等各種方面的應用，都是相當廣泛的。各學齡
層兒童的戶外教學，藉由認識一些在台灣海邊或
沙灘常見的貝殼，以及分辨貝殼可以食用與否或
有毒與否等相關的資訊，都是極為重要的。但是，
在這些貝類的相關專業知識的取得上，並無一套
完整且有效的貝類查詢系統。傳統上，使用者拿
著貝殼到網站上比對並找尋與手上貝殼相關的知
識或者是翻閱參考貝類圖鑑，以國內的台灣貝類
資料庫及國外的日本貝類圖鑑網站的系統為例，
目前這兩個系統都是透過使用者自行依照外形來
判斷所要找尋的貝類資訊。因此，整個系統依照
人工分類查詢的方式進行，相對的也就會耗費不
少時間在貝類的找尋上，這些檢索方式既費時且
費力，檢索出來的結果也都往往不如使用者所預
期。
本研究建置一套符合使用者需求的互動式貝殼
檢索系統，即便使用者不具備專業知識的背景也
能輕鬆透過本系統來檢索貝類資訊。藉由本研究
所採用的顏色、紋理及形狀等特徵的擷取，依據
不同特徵，分別計算其特徵值，進行自動化的分
類，讓使用者可以很快速且精確的找尋到所要辨
識的貝類相關資訊。本系統未來發展將更進一步
的加入使用者回饋(User Feedback)的方式，提供使
用者調整特徵值的權重，使比對結果更貼近使用
者實際需求的最佳比對結果。
