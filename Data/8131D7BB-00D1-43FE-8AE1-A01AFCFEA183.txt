 1 
更?科?教?教?座?科?整?念?座?置?教?證?科?念?座?僅?更教則?測?更? 
教?則?權?座?少?座?訊?更安對?測?則?少?少?說?則?安說對?安?教測更安對?訊?點?證?更?都? 
 
座?僅?整整對?：?NSC100-2221-E-390-014 
教?更?測?座?：?100更少8安優1安碼更?101更少10安優31安碼 
安?科?少?：?測教科?置?    ?僅?少?整?對?訊?少?僅?念? 
                         Email: cychen07@nuk.edu.tw 
座?僅?教?說?少?座?：?整?安?座?：?碼?則?更?僅?科?念?安? 
              測教則?更?僅?少?整?安? 
 
少?少?：?： 少?安僅說優座? 
 安?座?僅?安?座?教?少?說?則?置?念?僅?安?僅?都?
則?少?座?訊?更安對?測?則?少?則?安說對?安?教測對?訊?點?
證?更?都?：?測?安?少?說?置?則?安?教測對?訊?點?證?更?
都?：?更?座?更?安?科?整?則?對?訊?座?座?都?科?少?少?則?
訊?則安：?更?安?念?測?則?對?訊?座?座?說?安?少?座?教?更?
座?置?更?少?安?說?科?則?座?碼?：?更?安?少?說?則?安說對?
都?座?則都更證科?安?座?碼?則?對?訊?座?：?都?安?少?說?則?
安說對?：?安?測?少?優碼教?對?訊?：?對?灣?僅?則?灣?安?：?
更?座?則?安說則?少?僅?整?更證教?點?證?僅?則?訊?則安：?更?
安?安?測?少?少?少?少?少?則?更?都?僅?：?碼?安?教?對?碼?
對?則?科優整?：? 
權?點?安?：?：?：少?說?對?訊?點?證?：?則?安說對?：?安?教測對?
訊?點?證?：? 
 
Abstract 
In this project, we propose a two 
dimensions histogram reversible data hiding 
to gain the capability and the quality of 
stego image. For the difference of adjacent 
pixels is nearly the same, two reference 
values are computed by adjacent pixels. 
Using two dimensions histogram to 
compute the statistics of reference values, 
we can get a two dimensions histogram to 
hide the security information by shifting the 
histogram. From the experiment result, our 
method has higher capacity and high quality 
of stego image than Yang et al.’s method. 
 
Keywords：?：?2 Dimensions Data Hiding, 
Histogram, Reversible Data Hiding. 
 
少?少?：： 則?念?則 念 
 安?都?少?說?對?教?科?測?少?則?則?置?：?更?安?說?
對?僅?優?對?訊?安?說?科?優?都?安?念?：?都?少?安?置?說?
座 少 少 教 更 安 說 對 僅?教都優碼教?對?訊?：?安?更?安?
更 點 更 優碼教 對 訊 都 測?置?灣?念?說?僅?安?：?更教科?
都 安 整 則 科 念 則?安說安?說?安?碼?：?置?安?安?更少則?
科 念 說 僅 座 ： 對 訊 安?安?則?更?都?少?僅?念?僅?安?
碼 少 ：?念?少?「?安?教測對?訊?點?證?更?都?「?少?僅?安?
教 優碼教 對 點?證 則 碼?對?少?：?少?安?教?念?安?優碼
教 對 訊 科 則 碼 點 座?：?念?念?都?安?整?則?則?則?
置?說?科?念?[1,2,3,4,5,6,9]：?安?教測對?訊?點?證?更?
都?則?安?座?說?訊?：?安?則?教?優碼教?對?訊?點?證?則?少?
科?念?碼?對?少?：?證?少?優碼教?對?訊?科?則?教?對?碼?
對?：?僅安則?安?更峯都?更?證對科?更?證?更證優碼教?對?訊?：?
置?更?座?教?更?碼?對?僅?教都僅?科?念?念?安?則?科?：?科?
念?念?安?則?安?安?更?安?證置念?優碼教?對?訊?說?說?則?
念?教?優碼教?對?訊?：?更?則?科?念?念?安?則?更?念?教?念?
碼?對?安?僅安則?教?優碼教?對?訊?念?安?：?對?念?對?訊?安?
安?則?安?則?：?安?教測對?訊?點?證?更?都?訊置則?則?安?
證?：?念都念?則?安?點?證?則?對?訊?僅?說?教?對?碼?對?則?
科優整?：?都?安?整?則?少?安?更?少?安說安?安?安?科?念?說?
更?念?：? 
  安?教測對?訊?點?證?更?都?僅?座?更?少?安?少?科?
少?說?安說則?：?「?則?安說對?更?都?則?「?：?「?座?座?證座
教?則?「?說?「?安?僅?僅?少?則?「?：?念?少?「?則?安說對?
更?都?則?「?則?說?說?則?證?測?：?安璇教?對?碼?對?少?整?
更證科?教?則?科優整?：?更教科?都?安?整?則?則?科?念?安說安?
[1,2,3,4,5,6,9]：? 
  2006 更少：?Ni 整?則?僅?少?座?安?測?安?則?安說
對?則?安?教測對?訊?點?證?更?都?[9]：?Ni 整 則 僅 少?
 3 
更?安?更?安?安?教?點?安?安?少?教?則?則?僅?僅?更?對?
訊?點?證?：?置?安?少?安?則?說?說?則?點?座?更教對?訊?座?
科?：?更?更?更教安?念?都?少?則?對?測?說?點?證?：?安?則?
優碼教?對?訊?念?安?安?都?點?證?則?碼?對?少?：?則?對?僅?
念?都?少?僅?更?對?測?說?點?證?：?則?念?則都更證優碼教?對?
訊?科?證?少?碼?對?少?科?安權：?念?少?點?念?說?則?測?碼?
更安對?測?則?則?對?僅?：?教?都?更證少?座?5*5 則?碼?
對?：?念?對?訊?座?安?對?2：? 
 
對?2  座?念?碼?對? 
 
置?教?教?座?安?對?安?念?對?訊?座?僅?更?對?測?說?點?
證?：?教?安?念?對?訊?座?測?安?念?念?測?則?僅?念?對?訊?
座?則?安?更?座?念?安?則?念?碼?：?教?念?安?念?則?對?測?
說?座?座?安?對?3： 
 
對?3  都?少?更?對?測?科?則?碼?對? 
       
更?安?則?安說對?都?座?對?3則 更證安?念?則?對?測?說?座?
座?：?優?安?教?念?對?4： 
 
對?4  安?念?對?測?座?則?則?安說對? 
 
安?對?4 安?則?念?都?少?教?點?科?0：?都?少?教?點?科?
-1：?都?少?對?點?科?2：?都?少?對?點?科?-3：?教?僅?
教?少?則?教?點?說?對?點?少?僅?則?對?訊?座?安?對?點?
更?都?安?對?5：? 
 
對?5  置?對?更?都?科?則?則?安說對? 
 
更?座?測?安?安?更?安?置?安?更?都?安?少?座?教?點?訊碼
權對則都都?安?則?則?僅?點?證?優碼教?對?訊?：?更?座?教?都?
優碼教?對?訊?科?(01110111)：?證?少?碼?對?科?則?則?
安說對?安?對?6：? 
 
對?6  證?少?優碼教?對?訊?科?則?則?安說對? 
 
教?證?少?碼?對?科?則?則?安說對?證?測?安?座?念?則?訊?
教?安?對?7： 
 
對?7  置?對?更?都?念?證?少?優碼教?對?訊?科?則?碼?
對? 
 
測?科?置?安?少?安?則?說?說?則?：?科?對?測?說?座?座?點?
座?科?對?訊?座?：?更?安?點?教?教?對?碼?對?安?對?8：? 
 
對?8 更?置?安?念?對?訊?整?科?則?碼?對? 
 
安?優碼教?對?訊?念?安?安?都?點?證?則?碼?對?少?：?則?安?
安?碼?安說則?對?僅?念?對?訊?座?僅?更?對?測?說?點?
證?：?則?念?則都更證優碼教?對?訊?科?點?證?則?碼?對?少?：?
更?更?更教對?訊?點?證?：? 
2 0 1 -1 -2 -3 
5 
1 
3 
1 1 1 
0 1 2 -1 -2 -3 
1 
2 
1 
0 1 2 -1 -2 -3 
1 
2 
1 
8 
8 
 5 
念：灣?3. 僅?更?更?都?：? 



<
≠>+
=
                                0,   ,1-
)1 , 1(),( 0,,   ,1
,,,
,,,,,
,
jijiji
jijijijiji
ji DyDxifP
DyDxDyDxifP
P
 
 
(4.2) 
 
念：灣?4. 更?安?更?都?則?安說更安點?證?優碼教?對?訊?I：? 










=
==<−
=<=−
===+
==>+
=>=+
=
elsePP
IDyDxifP
IDyDxifP
IDyDxifP
IDyDxifP
IDyDxifP
P
jiji
jijiji
jijiji
jijiji
jijiji
jijiji
ji
  ,
1 0, ,0   ,1
1 0, ,0   ,1
1 1, ,1   ,1
1 0, ,0   ,1
1 0, ,0   ,1
,,
,,,
,,,
,,,
,,,
,,,
,
 
(4.3) 
念：灣?5. 安?優碼教?對?訊?念?安?安?都?點?證?則?碼?對?
少?：?則?對?僅?念?都?少?僅?更?念：灣?2 念?
念：灣?4：?則?念?優碼教?對?訊?安?都?點?證?
則?碼?對?少?科?安權：? 
4.2 證置念?優碼教?對?訊? 
優?少?：?教?對?碼?對?：?優碼教?對?訊?則?科?：? 
優?安?：?座?念?碼?對?：?優碼教?對?訊?：? 
 
念：灣?1. 教?碼?對?少?更教少?座?都?少?：?念「更?安?對?
安?少?都?少?僅?更?優碼教?對?訊?則?證置念?：? 
念：灣?2. 座?說?僅?念?都?少?則都更證對?訊?少?jiDx , 說?
jiDy , ：?念?安?少?說?則?安說對?安?安?都?
座?：? 
念：灣?3. 念?安?優碼教?對?訊?：? 









=<
<=
==
=>
>=
=
1,0,0
0,1,0
2,2,1
1,0,1
0,1 ,1
,,
,,
,,
,,
,,
jiji
jiji
jiji
jiji
jiji
DyDx
DyDx
DyDx
DyDx
DyDx
I
 (4.4) 
念：灣?4. 教?更?都?對?則?對?訊?座?點?座?：? 



<+
≠>−
=
                                0,   ,1
)1 , 1(),( 0,,   ,1
,,,
,,,,,
,
jijiji
jijijijiji
ji DyDxifP
DyDxDyDxifP
P
 
   
(4.5) 
 
 
念：灣?5. 對?安?念?都?少?僅?更?念：灣?2-4：?教 則都更證
說碼念?安?念?則?優碼教?對?訊?安?念?：?更?更?更教
證置念?：? 
 
 
 少?訊?則?則?安說對?則?安?教測對?訊?點?證?更?都?
則?點?證?僅?：?念?念都則?則?安說對?少?都?少?教?點?說?都?
少?教?點?則?碼?僅?：?置?教?教?僅?少?則?安說則?安?安?更證
訊置測?少?都?少?教?點?則?教?科?：?更?都?少?教?點?念?念?
都?置?更證科?少?則?對點座?：?更?更?座?則?安說則?更?安?少?
座?教?更?座?僅?更?少?說?則?安說對?則?對?訊?點?證?：?安?
點?證?則?對?訊?僅?念都念?則?少?座?說?科?少?則?測?教?
點?(訊?整?則?少?安僅權?[2,3,7]教?則?都?教?科?0)： 整
更證教?證?僅?則?訊?則安：?安?訊優：?更?座?則?安說則?更?安?
安?更證訊置則?測?少?座訊50%則?對? ?更?都?：?對?念?教?
點?證?僅?：?教?科優整?則?安?則?：? 
 
少?少?：?： 對?灣?僅?則?說?少?則?  
 安?安?測點置?對?：?更?座?教?置?教?教?僅?少?則?安說
則?說?更?座?則?安說則?僅?更?對?灣?念?安?安?安?對?：?更?
座?念?安?少?教?少?少?科?512*512 則?碼?對?
(Lena：?Boat：?Baboon)僅?更?對?灣?：?念?座?更?
證?少?更?安?5置?僅?優?優碼都?安?則?優碼教?對?訊?僅?更?
教?對?碼?對?則?科優整?安?對?：?教?則?1 說?則?2 則 對
灣?僅?則?安?安?則?對?：?更?座?則?安說則?整?更證安?置?教?
教?僅?少?更?安?則?安?點?證?則?對?訊?僅?：?念?整?更證更?
安?則?碼?對?科優整?：?安?安?座?僅?教?更?測?僅?：?更?座?
教 安 座?僅 測 安 則?安說則?：?碼?碼?更教整?安僅念?僅?則?
則 都 少 少? 對 訊?說?都?說?對?教?科?訊?置?[10]少?
International Conference on Computer and 
Electrical Engineering 2012[11]：? 
 
則?1: 安?點?證?則?對?訊?僅?少?安?對? 
則?2: 點?證?5 置?僅?對?訊說科?則?PSNR 座?安?對? 
  
 
 
少?少?：?：    僅?整?僅 整? 
 安?座?僅?教?少?說?則?置?念?僅?安?僅?都?則?則?
安說對?安?教測對?訊?點?證?更?都?：?測?安?少?說?置?則?安?
教測對?訊?點?證?更?都?：?更?座?念?安?科?整?則?對?訊?座?
座?都?科?科?更?則?訊?則安：?座?說?安?少?座?說?科?則?教?
更?對?訊說：?教?僅?更?安?少?說?則?安說對?僅?更?都?座?念?
安?安?點?證?優碼教?對?訊?：?訊?整?對?灣?僅?則?：?更?座?
 Baboon Boat Tree 
置?教?教?僅?
少?則?安說則? 14098 62127 37796 
更?座?則?安說
則? 24686 63509 37940 
 Baboon Boat Tree 
置?教?教?僅?
少?則?安說則? 48.60 49.30 48.81 
更?座?則?安說
則? 49.50 50.49 48.97 
悉n科?經?圖5李?悉?題?科?往1席?項?項?及?如?席?悉n稿?導?這?經?權?如科悉?
測S李?!
! ! ! ! ! ! ! ! ! ! ! ! ! ! !!!!!!!!!!!!!!如稿測?：?!212!李及!2!!如辦!4!!如稿!!
席?項?導導
圖?!
OTD211－?3332－?F4:1－?125!
席?項?如?
與?!
悉?前,權?席?及?席?訊0李如圖?測?前c及?及?與?前?如與圖?如?悉測李如圖?訊?點?題?李?
這?!
如?悉n及?
席?往?如?!
測悉前?李?!
前9悉?辦稿
與?及?題?
與?!
悉?項?及?導?圖?訊?及?項2導?往2!
經?權?訊辦
項?!
! 212李及21如辦!
37 如稿李?!
! 212李及21如辦
38 如稿!
經?權?如?
點?!
席h測?!
經?權?如?
與?!
)及?如項*3123 李及悉n稿?圖?訊?與?圖?及?及?項2科?訊?經?!
)席?如項* International Conference on Computer and Electrical Engineering 2012!
項?前?導?
如項題?如?!
)及?如項*!!及?與?前?如與圖?如?悉測點?題?圖?訊?李?這?!
)席?如項* TWO DIMENSIONAL HISTOGRAM REVERSIBLE DATA HIDING 
TWO DIMENSIONAL HISTOGRAM REVERSIBLE DATA HIDING 
 HSIN-HUNG CHEN    YU-ZE JHENG  CHIEN-YUAN CHEN   GANG CHI 
{a0975511, m0995505}@mail.nuk.edu.tw, cychen07@nuk.edu.tw, a0995511@mail.nuk.edu.tw 
National University of Kaohsiung, Taiwan R.O.C. 
  
ABSTRACT 
In this paper, we utilize two dimensional (2D) histogram, instead of one dimensional 
histogram, to present reversible data hiding method. According to the properties of image 
of 2D histogram , there are near 1/2 points whose pixel values are not shifted. Therefore 
our method keeps high quality of stego-image. From the experiment result, as compared 
with Yang et al.’s method, our method has higher quality of stego-image. 
KEY WORDS 
2D Data Hiding, Histogram, Reversible Data Hiding 
1 INTRODUCTION 
According to the quickly growth of Internet, transportation of information on Internet 
has become a common behavior in recent years. To avoid the important information is 
stolen by illegal users, the techniques of security are proposed by many studies. reversible 
data hiding is one of the most popular techniques due to its simple algorithm and 
wide applications [1,2,3,4,6,7,9]. The main idea of reversible data hiding is to embed the 
secret data into a cover image. Since the stego-image generated by data hiding algorithm 
has great similarity to original image, illegal users cannot recognize whether the stego 
image is embedded important information or not. According to this characteristic, 
reversible data hiding are used in 2D-barcode, copyright, identification ….etc. 
In 2006, Ni et al. propose the first technique of reversible data hiding [7]. Assume that 
the encoder want to embed the secret data into the image using Ni et al.'s method. The 
encoder at first outputs all the numbers of pixel values of the image in histogram. Then 
the encoder embeds the secret data by shifting the histogram. At last, the encoder sends 
the stego-image and auxiliary information to the decoder. The decoder can use the 
stego-image and decoding information to extract secret data. Ni et al.'s method can keep 
high quality of stego-image because the difference between the shifted pixel value and the 
original pixel is at most one. But the capacity of Ni et al.'s method is little because the 
sum of the numbers of peak points is small in nature image. 
In 2008, Lin et al. propose a method to gain the capacity of reversible data hidingm 
[6]. Lin et al. figure out that the nearing pixel values in nature image are nearly the same. 
Lin et al. output the differences between pixel values and their last pixel values in 
histogram. Then Lin et al. embed the secret data using the histogram of differences. Lin et 
al.'s method have great capacity using the histogram of differences. But Lin et al.'s 
method is not effective for complex images since some pixel values of complex images 
are salient. 
In 2009, Yang et al. propose a method of reversible data hiding to improve the method 
of computing differences in complex image [9]. Yan et al. use all the neighboring pixel 
values to reduce the interference from salient pixel values. Yang et al. at first divide image 
into white and black segments like a chessboard and compute all the differences between 
pixel values of white segment and the avarges of  nearing pixel values of black segment 
in floor function. Then Yang et al. embed the secret data using the histogram of 
differences. Yang et al. use "Chessboard Prediction" to reduce the interference from 
salient pixel values. Since Yang et al.'s method has greater efficiency in complex image, 
their method has higher capacity than that in the presented reversible data hiding. 
In many images, the accuracy in cmputing differences will be limited in 1D reversible 
data hiding. To break through the limit of 1D reversible data hiding, we use two 
                        
Fig.2 the 2D histogram               Fig.3 the table- notation of Fig.2 
 
The encoder shifts specific pixel values, like Fig.4, to get the spaces, then we can 
embed secret data in the spaces. 
 
Fig.4 shifting pixel values to get the spaces 
The encoder checks the pixel values of the image form left to right up to down until all 
the pixel values are checked. If the x-coordinate and y-coordinate are equal to the block in 
Fig.4, the encoder shifts the pixel values if secret data is "1" and keeps the pixel values if 
secret data is "0". The embedded method is shown in  Fig.5. 
 
 Fig.5 the embedded method  
If there are remained secret data, the encoder compiles the same steps to get 2D 
histogram of  black segment and embed remained secret data in cover image. Accroding 
to Fig.4 and Fig.5, our method shifts at most half pixels values in embedded algorithm. 
So that our method has high quality of stego-image. 
The capacity of reversible data hiding depends on two peak points. Yang et al.’s 
method has great numbers of highest peak point. Our method uses 2D histogram to 
embed data. The capacity in our method depends on the highest numbers of two 
parameters. Our method has more capacity and higher quality of stego-image than that in 
Yang et al.’s method. The algorithm of our method is listed as follows. 
Embedded algorithm Extracted algorithm 
Input: original image, secret 
data. 
Output: stego-image, the 
length of secret data. 
Step 1. Divide image into 
white and black 
segments.  
Step 2. Compute all Dxi,j and 
Dyi,j  in white segment 
and output the numbers 
in 2D histogram. 
Step 3. Use  
Input: stego-image, the length 
of secret data. 
Output: original image, secret 
data. 
Step 1. Divide image into 
white and black segments. 
Step 2. Compute all Dxi,j and 
Dyi,j  in white segment 
and output the numbers in 
2D histogram. 
Step 3. Using following 
algorithm to extract secret 
REFERENCES 
[1] Bo X.; Lizhi Y.; Yongfen H.. Reversible Data Hiding Using Histogram Shifting in Small Blocks. IEEE International Conference 
on Communications [C], 2010, PP:1-6 . 
[2] Carli M. M.; Boato G.; Egiazarian K.. Reversible Watermarking via Histogram Shifting and Least Square Optimization. 
Proceedings of 12th ACM Workshop on Multimedia and Security [C], 2010, PP:147-152 . 
[3] Celik M. U.; Sharma G.; Tekalp A. M.; Saber E.. Reversible Data Hiding. IEEE Int. Conf. Image Process [C], 2002, PP:157-160 . 
[4] Chang C. C.; Wu W. C.; and Hu Y. C.. Lossless Recovery of a VQ Index Table with Embedded Secret Data. Journal of Visual 
Communication and Image Representation [J], 2007, PP:207-216 . 
[5] Kim H. J.; Sachnev V.; Shi Y. Q.; Nam J.; Choo H. G.. A Novel Difference Expansion Transform for Reversible Data Embedding. 
IEEE Transactions on Information Forensics and Security [T], 2008, PP:456-465 . 
[6] Lin C.C.; Tai W.L.; Chang C. C.. Multilevel Reversible Data Hiding Based on Histogram Modification of Difference Images. 
Pattern Recognit [J], 2008, PP:3582-3591 . 
[7] Ni Z.; Shi Y. Q.; Ansari N.; Su W.. Reversible Data Hiding. IEEE Transaction on Circuits and Systems for Video Technology [T], 
2006, PP:354-362 . 
[8] Thodi D. M.; Rodriguez J. J.. Expansion Embedding Techniques for Reversible Watermarking. IEEE Transactions on Image 
Processing [T], 2007, PP:723-730 . 
[9] Yang C.H.; Tsai M.H.; Improving Histogram-Based reversible Data Hiding by Interleaving Predictions, IET Image Processing 
[J],2010,PP:223-234 
 
100年度專題研究計畫研究成果彙整表 
計畫主持人：陳建源 計畫編號：100-2221-E-390-014- 
計畫名稱：基於權值九宮格式預測法之二維直方圖可逆式資訊隱藏技術 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 2 100% 另加一位大學生 
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100% 投稿中 
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
