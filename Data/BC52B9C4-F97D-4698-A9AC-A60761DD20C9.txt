2中文摘要
安全路口的概念是奠基在執法系統的成功，是必須有效而且正確的，近年來，車牌偵
測與辨識系統已日趨成熟，但是局限在固定式攝影機以及車輛必須行經指定路線，才能有
準確的車牌的偵測與辨識結果。而要同時對多車輛進行車牌偵測與辨識，便需要架設大量
的攝影機於指定路線上，利用單一攝影機作為取相設備，要同時追蹤車輛、辨識違規行為
以及抓取車牌…等，難以克競其功，因此本研究研擬使用雙攝影機之場景攝影機偵測出現
在監控區域之車輛，並追蹤多車輛移動，再搭配目標物攝影機(PTZ 攝影機)拍攝車輛特寫
照片，建立多機狀態的配合系統，以達到精確辨識率的效果。
本文利用平面矩陣來建立雙攝影機間的合作關係，使其能夠對應至同一目標物，並希
望透過場景攝影機與 PTZ 攝影機之間的取像，在複雜環境當中取得用來辨識的車牌字元，
透過車牌定位，來進行車牌辨識的工作，辨識工作則使用類神經網路來進行學習，並用以
辨識。
關鍵字: PTZ 主動式攝影機、車牌定位、車牌辨識、字元辨識、類神經網路
Abstract
Generally, The study of vehicle license plate recognition has been undergone for decades,
but studies for identifying for multi-target vehicles are still being greatly missed. The video
surveillance systems could be categorized into the one with only fixed cameras and the one with
active PTZ cameras. The target tracking using the fixed camera often acquires a vague target
image if the target is distant from the camera. On the contrary, target tracking using the active
PTZ cameras may obtain a clear target image but it needs the manual control.
We decide to use the mutli-cameras to focus on the same target, and recognizing license
plate with a complex background. We vehicle license plate recognition system may be divided
into three major components, namely, license plate detection, character segmentation, and
character recognition. Finally, we use Neural Network learning Progress to recognize vehicle
license plate.
Keyword: Active PTZ cameras, Vehicle License Plate Recognition, License Plate Detection,
Character Recognition, Neural Networks
4三，文獻回顧
首先介紹的部份為雙攝影機模組的關係校正研究
3.1 相機校正
相機校正主要是求得相機的內部參數或者外部參數，傳統的相機參數校正主要是
在相機拍攝之範圍內擺放校正版，利用攝影機所拍攝之多組三維與二維的點對應關
係，來求得所需要之相機參數，此方法雖然容易，但校正之步驟繁雜，每當相機改換
擺設位置，就必須重新校正，不符合本系統之需求。因此，本研究嘗試利用影像處理
的技術來自動求得本系統所需要之相機參數。而特徵點的對應問題( Correspondence
Problem )正是利用影像處理技術求相機參數所面臨的首要問題，有了準確的對應點，
便可藉由相機的投影矩陣或基本矩陣的分解而求得相機的內部參數或者外部參數。
Hsieh[1]的研究為取得兩台攝影機的影像，對影像進行邊緣偵測，有著邊緣資訊
的位置極為影像中具能量較強的位置，將齊聚強烈能量的位置當成特徵點，接著利用
兩影像中找到特徵點，兩特徵點為一組影像對應點，最後利用對應點與對應點之間的
相對距離，排除不合理的特徵點，最後剩下來的對應點可以利用影像上的水平線與垂
直線找出兩台攝影機的位移參數。李昆霖[4]利用兩台攝影機影像上選出來的對應點，
利用最小平方解來得到最佳化厚的基本矩陣，基本矩陣經過正規化後求得攝影機的內
部及外部參數。藉由兩者算得對應點的三度空間資訊。鄭智明[5]發展出一套半自動化
的雙攝影機系統，系統結合兩台攝影機的極線關係，再與攝影機的旋轉放大矩陣結合，
該研究發現，當兩台攝影機固定一起時，能夠使兩台攝影機之間的校正流程簡化，同
時除去複雜的參數計算。
3.2 雙攝影機偵測與追蹤
Lim[6] 於十字路口架設兩隻攝影機在同一根柱子上，利用距離地面12 公尺的攝
影機來監控路口並分析車輛的軌跡，如車輛有違規的行徑發生時，則利用事先校正好
的相機參數驅使距離地面5 公尺的攝影機去取得較大倍率的車輛影像，做車牌辨識。
Chung[7] 利用一環場攝影機 ( Omnidirectional Camera ) 與一PTZ 攝影機建構室內
監控環境。結合傳統的背景相減法與時間差異法來偵測環場攝影機中的移動目標物，
利用相機在世界座標的擺設位置與相機成像的原理推導出兩台攝影機間的座標轉換關
係，進而驅使PTZ攝影機去取得放大的目標物影像。謝明逢[8] 本研究設計一雙攝影機
取像裝置，藉由兩支攝影機之擺設位置，與利用特徵點共線之限制條件，設計一演算
法，求得雙攝影機影像之對應關係。無需求得目標物在三度空間之位置，也不需事先
得知攝影機的參數，直接利用影像處理的技術，自動求得系統兩台攝影機運作所需要
的參數，可對多目標物追蹤，同時可取得清晰之目標物特寫鏡頭，並利用所取得之目
標物特寫鏡頭，改進追蹤效果。郭大正[9] 以停車場監控系統搭配兩隻攝影機對停車
場移動的人或車進行偵測、追蹤、記錄等工作。一固定的場景攝影機利用背景相減法
偵測影像中的目標物，判斷目標物在場景攝影機的那個區塊(依照場景事先將場景切割
成若干個大小相等的區塊)，再透過事先建立的區塊對應轉換表，傳送給目標物攝影機
6(2).長寬比：區域長寬比越接近真實車牌的長寬比，則積分越高。
(3).密度：計算區域裡的像素數和框住區域之四邊形的像素數比，原則上車牌區域的
密度會為1，所以密度越高，積分越高。
(4).PIF：多數的取像系統都會把車牌區域設在影像的正中間，所以區域離影像邊界越
遠，積分值越高。
3.6 車牌追蹤相關論文
莊盛淵[14] 針對夜間車流影像進行研究，所處理的影像為灰階影像，進而提供一
個可供解決夜間車輛偵測的「夜間車輛偵測與追蹤模式」。只需應用到基本的切割以
及區塊標記法，可增強影像處理速度。張國鋒[13] 所提出的監視系統，有兩個主要的
部分，一個部分是動態偵測，另一個則是資料庫，可以針對多個移動物體做追蹤並且
識別。藉著找出連續影像之間的差異來偵測移動物體的出現，透過資料庫分析移動物
體的幾何特徵，藉著這些特徵之間的相似性，作為分辨移動物體的依據。
四，理論基礎
為成功達到雙攝影機協同運作，我們必須先取得兩台攝影機之間的參數，進行雙攝
影機的參數取得，接著進行微調 PTZ 攝影機，使其能夠對應到同一個物體座標點，完
成先前的準備工作。後續工作包括追蹤跟辨識工作，而車牌辨識又細分了車牌定位、
字元切割、字元辨識、最後透過類神經網路的學習跟辨識工作來達到目的。以下圖一
為流程圖。
圖一 研究流程圖
4.1 攝影機參數取得
由場景相機計算得到欲追蹤目標物的座標後，交由 PTZ 相機追蹤，在此必須經過
兩個步驟：一為目標物在場景攝影機座標轉換到可動式 PTZ 攝影機，一為在可動式
8多組的對應點，可求得更加準確的答案，假設我們給定 n 組對應點， 代入(8)可得：
(9)
簡寫(9)得
A (10)
以最小平方解可得
(11)
求得 M即可利用(3)得知兩平面 座標轉換關係。
圖二：為 PTZ 相機與場景相機共同輸入 n組對應點
在系統開始執行前，預先規劃將 PTZ 相機的固定 Pan、Tilt 和 Zoom 參數以涵蓋場
景相機所監視的的區域，參數如圖三
P1=0
T1=0
Z1=30
P2=0
T2=5
Z3=30
P3 = 0
T3 = 10
Z3 = 30
P4 = 0
T4 = 15
Z4 = 30
P5 = -5
T5 = 0
Z5 = 30
P6 = -5
T6 = 5
Z6 = 30
P7 = -5
T7 = 10
Z7 = 30
P8 = -5
T8 = 15
Z8 = 30
P9 = -10
T9 = 0
Z9 = 30
P10 = -10
T10 = 5
Z10 = 30
P11 = -10
T11 = 10
Z11 = 30
P12 = -10
T12 = 15
Z12 = 30
10
和上下方向 Tilt translation matrix(上下兩方向 MTU，MTD)，由場景相機所找到的
質心( , )、目標物左上點( , )及右下點座標( , )經(13)式將位置轉
換到 PTZ 相機：
(13-1)
(13-2)
(13-3)
(13=4)
(13-5)
為場景相機座標至 PTZ 相機座標之平面投影矩陣。轉換得到質心於 PTZ 相機影
像的座標後，就可從平面投影矩陣轉換 PTZ 相機轉動過的對應座標，以將物件質心對
準 PTZ 相機影像中心。假設一目標物於影像大小 w×h，則可由(33)、(14)得相機轉動
i 次後的座標( )，而相機轉動前( , ) 即為物件質心也就是(32-1)的
(14)
(15)
4.3 雙攝影機協同運作
雙攝影機合作追蹤的資訊共有兩個來源：一為場景攝影機，另一為目標物攝影機，
其中，在場景攝影機部分，採用目標物重疊的資訊和歷史紀錄來對物體做追蹤，並配
合卡曼濾波器( Kalman Filter )預測目標物的移動量，即預測目標物在下一張影像的
位置，且根據第三章所求得的雙攝影機運作參數，驅動 PTZ 攝影機去取得解析度較高
的畫面，同時記錄場景攝影機拍攝之目標物 ID 與目標物攝影機拍攝之特寫鏡頭影像，
建立彼此之關係，儲存於目標物資料庫中。倘若，持續追縱某一特定目標物時，則記
錄兩支攝影機拍攝之連續影像資料，並可隨時切換追蹤目標，可提供於日後的視訊檢
索。
下圖五為雙攝影機攝影與追蹤模組運作流程圖。
12
二值化影像，以利接下來的處理
(c) 標示字元及確認
濾除字元的規則如下：
物件寬度/車牌區域寬度 > thresholdmax
物件寬度/物件高度 < thresholdmin
寬度物件/高度物件 > thresholdmax
物件大小 < thresholdmin
物件密度 > thresholdmax
threshold 值則依實際車牌特性來做設定。
(d) 字元補償
過濾完字元後，可能造成部分字元欠缺，因此要進行字元補償。 首先找出物件中
極可能為字元的物件，依此物件的大小和比例等特性來濾除和此物件差距甚多的物
件，剩下來的物件即為字元物件，再以這些字元的位置和數量，來判斷出字元補償的
位置和數目。
濾除物件的規則如下：
物件寬度/標準字元寬度 >thresholdmax
物件寬度/標準字元寬度 < thresholdmin
物件高度/標準字元高度 > thresholdmax
物件高度/標準字元高度 < thresholdmin
將每個物件做兩兩的比對，如果兩物件的長度與寬度差之和小於 threshold 的話，
則兩物件各得一積分，依此方次比對完所有的組合，做後選擇積分最高的物件當標準
字元，因為他與其他各個物件大小的相似度最高。
(e)字元檢測
這個步驟主要是確認字元補償出來的字元是否有符合字元的特性，檢測的方式則是
在物件的 1/4 高、1/2 高和 3/4 高的地方，做灰階轉換計算，灰階轉換計算指的是像素
由黑變白或由白變黑，將變換的次數加總起來。就單一個字元來看，這三個高度位置
所做出來的灰階轉換計算，每一個至少都要有 2次變化以上，否則就是背景，必須將
物件刪除。
(f)字元正規化
字元正規化包括旋轉及大小轉換，歪斜的字元會造成辨識上的困難，而大小轉換是
預備為之後的類神經網路學習而需要固定其大小。
4.4.3 字元辨識
14
圖七 圖八 圖九
圖十 圖十一
圖九~圖十一 為英文字母用來學習的範例
圖七 學習階段誤差收斂
五，實際操作
16
圖十七 道路拍攝地點
圖十八 一般機車取像結果1 圖十九 一般機車取向結果2
圖二十 原倍數取像畫面 圖二十一 放大取像之結果
六，結論與未完成部份
(1) 本研究利用雙攝影機進行道路之車牌辨識與追蹤，針對場景中目標物，偵測並標記前
景物之資訊，利用這些資訊透過PTZ攝影機來取得放大倍率及清晰影像，對車牌進行偵
測與辨識。利用雙攝影機來進行取像分析，可以監控場景中容易忽略之死角，比起傳統
固定式攝影機只能針對特定規定行駛路線進行偵測，提供較佳彈性，並可對區塊進行全
時段錄影，或是針對違規行為進行拍攝錄影動作，提供證據之用。
(2) 在攝影機參數部分，本研究透過計算PTZ攝影機之移動參數，不需透過演算法較為複雜
的極限幾何來得知相機的內外部參數，而採利用設計後的攝影機架設方式，以平面投影
矩陣取得兩者間的對應關係。目前已建立起攝影機間相互關係，未來希望能實際架設於
道路拍攝，對車輛車牌進行取像及辨識工作。
(3)車牌辨識包括許多子項目，車牌定位、字元切割(二值化、反向判定、標示連通元件、
字元補償、字元檢測和正規化)，目前我們可以在固定位置取得車牌之取像，並且可進
行放大倍數來得到較佳的影像畫面。
