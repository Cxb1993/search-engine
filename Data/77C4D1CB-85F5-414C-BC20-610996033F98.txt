中文摘要 
 
利用飛航記錄器來協助飛機失事調查可能可以獲知飛航事故之可能肇事原因。而飛航記
錄器一般有兩種形式，一為座艙語音記錄器(Cockpit Voice Recorder, CVR)，一為飛航資料記錄
器(Flight Data Recorder, FDR)。座艙通話記錄器除了記錄駕駛員的通話內容外，還會把非語音
的聲音一併記錄起來，例如，螺旋槳噪音、開關撥動聲…等。當螺旋槳噪音的能量遠大於駕駛
員語音的能量時，我們很難從其中辨別出駕駛員的語音內容來調查失事的原因。因此，噪音濾
除是座艙語音記錄器之訊號處理最首要的任務。傳統的適應性噪音濾除需要兩組感應器來擷取
訊號做噪音濾除，但是有些情況下沒有第二組感測器來擷取噪音源訊號。本計畫將利用適應性
濾波器基於主要頻率合成及線性預估誤差濾波器來實現單通道噪音濾除。適應性濾波器基於主
要頻率合成主要是用來消除螺旋槳噪音；而線性預估誤差濾波器主要是用來消除語音中的餘值
噪音訊號。如此，可以清楚辨識駕駛員的語音內容以幫助調查失事原因。 
第二部分之成果為針對座艙通話紀錄器的多聲道聲音資料，用模擬的方式發展兩種利用
多聲道聲音資料來進行操作開關定位的方法，基於座艙語音記錄器設置於飛機機艙內的固定
性，第一種方式是利用預先了解的機艙內開關分布情況，預先建立起各個開關被操作時所收錄
到的聲音資料的時間差總表，再將所要定位的聲音資料拿來比對，即可比較出要定位的開關位
置；第二種方式，基於數位收錄的聲音資料所判斷出的時間差，一定會有一個取樣點以內的可
能誤差，因此推導出另一種判斷開關位置是否落在這一個合理時間帶內的定位方式。 
 
關鍵字: 座艙語音記錄器、單通道噪音濾除、適應性濾波器、主要頻率合成、線性預估誤差濾
波器、聲源定位 
一、 前言 
 
任何民用航空器不幸失事之後，民航主管機關單位、失事調查員、航空公司、罹難家屬及
社會大眾，均會期盼早日尋獲「黑盒子（Black Box）」，並解讀出航空器失事的原因。所謂俗
稱的黑盒子是指飛航資料記錄器（Flight Data Recorder、FDR）與座艙語音記錄器（Cockpit 
Voice Recorder、CVR），兩者統稱飛航記錄器。CVR/FDR 之解讀是民用航空器發生失事或重大
意外事件後失事調查中的一大工作，處理程序為失事現場搜尋黑盒子、黑盒子與飛機殘骸記
錄，以及送往失事調查單位之實驗室解讀與分析，並從中找出造成航空器失事或重大意外事件
之原因，進而提出改善飛安之具體方案。其中，座艙語音記錄器（CVR）係記錄駕駛艙與塔台
間的無線電通話內容以及駕駛艙內的聲音，例如飛行員之間的交談，警報信號或是引擎聲音。
飛航資料記錄器（FDR）則記錄各項飛航數據，例如高度、空速及航向等。近年來由於聲音訊
號分離與辨識的技術提升使得座艙語音記錄器（CVR）變成一個提供失事調查的有利工具。[1] 
 
座艙語音記錄器記錄正副駕駛員與飛行組員、正副駕駛員與地面航管人員之間通話的聲
音。事實上它記錄座艙內所有的聲音，包括：組員間通話、經由無線電與管制台人員通話的聲
音、警告的聲音（當飛機的狀態到達某種不正常的狀況，飛機上的裝置會發生不同的聲音警告
飛行員如火警、近接地面、失速… .等）、開關控制的聲音、引擎聲音及環境雜音等。其目的
為記錄失事前座艙內所有的聲音以協助事故之研判。座艙語音記錄器以記憶裝置區分有兩種，
磁帶式及固態記憶體式，因此解讀流程也略有不同。首先將磁帶從座艙語音記錄器內取出放到
磁帶機上，磁帶機將磁帶上微小電磁訊號放大轉換成一般聲音處理器可接受之訊號。基本上語
音記錄器在實驗室內，最主要的工作即是執行聲音處理。就如同錄音室一般，需要混音器整合
所有的音源、圖形等化器做適當之等化處理、鑑聽用的放大器及揚聲器。混音器與圖形等化器
之不同是對雜音的處理方式，在座艙內可能有失壓時的雜音、引擎雜音、對乘客廣播的聲音、
來自地面無線電台干擾的聲音、也可能是磁帶老舊或黑盒子運轉時所產生的雜音。 
 
為了要從一片混亂中聽到清楚的聲音，除了傳統的等化器外，實驗室必須善用頻譜分析儀
及窄頻雜音濾波器，濾除不想要的聲音。頻譜分析儀除了可看到每一瞬間頻譜的分布協助聲音
處理外，也提供磁帶機運轉速度的同步控制訊號。以上是座艙語音記錄器解讀之基本流程。對
於無裝置飛行資料記錄器之直昇機，使用音頻處理軟體即可印出每一時間對特徵頻率之分布情
形，因此聲譜分析技術可以鑑別出引擎及主要轉軸運轉的情形。進一步分析則可獲知某一飛行
狀態下之特徵頻率變化，進而了解失事之可能情況。固態記憶體式座艙語音記錄器解讀方式與
磁帶式最大不同在於，固態記憶體式之記憶裝置因其電路控制方式不同，不同的廠家製造的記
憶裝置必須裝上原廠家製造，而且可用的座艙語音記錄器，並使用也是原廠商的解讀裝備才能
加以解讀，解讀出來的訊號再加入混音器進行更進一步聲音的處理。為方便各相關調查單位使
用，聲音亦可複製在一般卡帶。 
 
對於CVR/FDR 之解讀能量與飛安之關係，依照航空器失事或意外事件發生原因可歸類為三
大因素。一、機械因素。包括：航空器之裝備或儀表損壞或功能不正常、結構疲勞與空中解體
1 
三、 文獻探討 
 
國外研究成果 
國際上較有名的失事調查單位：NTSB、BASI、TSB 等，對於FDR 之飛航數據解讀到飛行軌
跡重建與動畫製作均有十分完善的技術[4][5][6][7]。現有航空器多以慣性導航系統
（Inertial Navigation System、INS）來獲知飛行過程的軌跡，所謂慣性導航系統是以三軸
加速儀與陀螺儀組成。因為FDR 的記錄資料中會直接記錄航空器體軸座標（Body-Fixed 
Coordinate）的姿態角（包括：俯仰角、滾轉角與偏航角），但是只記錄其相應的加速度分量
（縱向、橫向與垂直機身方向）。因此，三度空間的飛行軌跡需要以數學模式進二次積分求取。
如果，飛航資料記錄器只有單軸或雙軸加速度，其飛行軌跡只能以飛行速度與航向角作一次積
分，並投影成局部平面飛行軌跡，並與高度計測得的航高組合成三度空間飛行軌跡。上述兩種
飛行軌跡重建法是目前FDR解讀過程所使用的技術，但並未針對FDR 傳感器（Transducer）誤
差、空速/各式高度計量測誤差與INS 的殘差及偏移誤差進行分析。亦即，將來為增進FDR 的
飛航資料可靠度，必須考量航空器之動態模式（Dynamic Model）與狀態估測技術來處理FDR 所
記錄的資料[2][3][4][5][6]。 
 
國內研究成果 
 
行政院飛航安全委員會調查實驗室座艙語音記錄器所記錄之座艙內組員對話與聲響為重
要調查證據。分析這些聲音時，有些無法以人耳辨別，調查實驗室採用聲音能量分布或頻譜分
析技術，以探討座艙內聲音的來源、起始時間與持續時間，以及特定警告作動（warning 
activation）情形。此技術可協助一些發生過程不明確或缺乏飛航資料記錄器之事故調查,如
聲紋辨別、動力組件失效分析、空中解體有無爆炸之估算[8]。 
 
國立成功大學航太所遙控飛機與微衛實驗室利用未知訊號分離(BSS)的方法來分離座艙通
話紀錄器所錄製的聲音，以提高聲音辨識率，同時利用了類神經網路(BP)來辨識聲音訊號，訊
號資料庫的來源亦為實際錄製於民航機中的座艙，此實驗室所提出的聲音訊號分離證實可以有
效的提高辨識率，且聲音訊號分離與辨識的技術證實可以有效提供飛航失事調查與監視航空器
之健康資訊。而鑒於飛機座艙內之聲音普遍具有位置固定之特性，若能將駕駛員語音或開關撥
動聲響等發音位置加以定位，則更有助於協助調查人員判別飛行人員於失事前關鍵時刻之操作
狀況，作為失事調查之佐證。本實驗室乃模仿生物對於聲音定位之原理，利用音源行進至不同
受音器官間所造成的時間差(Time Delay of Arrival、TDOA)，找出可能的位置，達成音源定
位之目的[7][8]。 
 
 
 
 
 
(圖二) 傳統式適應性噪音消除架構圖 
 
傳統的適應性噪音消除中，我們是需要兩組麥克風來進行錄音，但是實際上我們只能拿
到一組聲音檔來進行噪音濾除，所以傳統的適應性噪音消除是需要做一些改變來符合我們的
需求。單通道適應性噪音消除即為我們所提出的解決方案。 
 
    單通道適應性噪音消除 (Single Channel Adaptive Noise Cancellation ) 
 
 
(圖三) 單通道適應性噪音濾除架構 
 
圖三為單通道適應性噪音濾除的架構，其工作原理是先從 CVR 所錄的信號經過 
Windowing 取得完全只有噪音的部份 w(n) ，在把此噪音輸入到正弦波合成演算法做
處理，正弦波合成演算法在此最主要的目的是計算出噪音訊號中數個最主要的頻率及其
振幅和相位，並以正弦波合成的方式來產生另一組近似噪音的訊號，來當作適應性濾波
器的輸入，而適應性濾波器利用正弦波合成訊號及估測誤差 e(n) 來調整適應性濾波器
的係數，使 e(n) 的均方(mean-square)值 (即平均功率)最小。經過適應性濾波器濾波之
後的輸出信號 y 來消除 CVR 所錄的信號的背景噪音信號 d，使得最後CVR 所錄的信號
中背景噪音成分能夠被消除到最小，最佳的情況是背景噪音能夠被消除到零，但是最佳
的情況在實做上具有一定程度的不確定性，所以我們以將背景噪音消除到能夠清楚判斷
語音的內容為目標。  
 
下面針對單通道適應性噪音消除中的核心部份做詳細的說明: 
 
4 
z 最小均方(LMS)演算法 
 
LMS是最被廣泛使用的濾波器演算法，最大的特點就是簡單。運算過程只有加
法、乘法，而且它也不需要對相關函數(correlation function)做計算，更不需要複雜
的反矩陣運算(matrix inversion)，所以經常被拿來用作比較的基準。  
LMS 演算法是使輸出誤差信號的平均平方值 e2 最小化（mineralized），而其定義
為 
0,1,2,...n ,eJ(n) 2 ==  
 
目標信號的估測值與真正目標信號的差就是所謂的估測錯誤（estimation error），
而 e(n) 的定義為  
   x(n)(n)wˆ-d(n)e(n) T ⋅=  
 
而 d(n) 為期望值（desired value）。 w(n) 為時間點 n 時權重係數向量(weight 
coefficient vector)，其展開式為：  
    T1-L10 ] w...  w[ww(n) =  
x(n) 是輸入向量（input vector），其展開式為：  
 
T1)]L- x(n... 1)- x(n[x(n)x(n) +=  
 
其中 L 為濾波器階數（filter order）。所以 LMS 演算法，其著重於調控系統期望
值 x(n) 與濾波器輸出 y(n) 之差 e(n)，其演算法不斷更新修改演算中之權重係數
向量 w(n) 值，並使得 e(n) 平方最小，使誤差趨近於零。 
以下為LMS演算法之計算式： 
 
    
e(n)][x(n)w(n)1)w(n:adaptionweight -Tap
y(n)-d(n)e(n):error Estimation
x(n)(n)wˆy(n):outputFilter T
⋅+=+
=
⋅=
μ
 
 
 各參數的描述如下：  
 
   ｎ：目前時間索引值 （The current time index）  
x(n)：輸入向量（The vector of buffered input samples at step n）  
w(n)：係數向量（The vector of filter weight estimates at step n）  
y(n)：輸出資料（The filtered output at step n）  
6 
所錄音之前，都會經過空氣傳播到 CVR，因此使直昇機螺旋槳的噪音產生延遲及低通濾
波的效應，故我們把空氣視為一個具延遲效果的低通濾波器，以更符合真實情況。d(n) 
就是我們需要做噪音消除的語音資料檔案。在此所有的實驗資料的取樣頻率為 16k Hz，
同時解析度為 16bits。為了評估噪音消除的能力，我們使用 SNRin 與 SNRout 來當作噪
音消除的評估參數。以下說明這兩個參數的定義： 
∑
∑
=
=⋅= N
1n
2
N
1n
2
in
(n)y
(n)x
log10SNR
 
∑
∑
=
=⋅= N
1n
2
N
1n
2
out
x(n)]-[e(n)
(n)x
log10SNR
 
其中 x(n) 是乾淨的語音，y(n) 是直升機螺旋槳噪音而 e(n) 是經過噪音消除後語音。 
 
¾ 模擬結果一 
圖七為模擬結果一，我們從圖上可以看當 SNRin 為 0dB 時，雖然噪音存在但是
我們還是可以清楚的看到語音波形的存在，經過噪音消除之後的語音，可以發現與
乾淨語音差異不大。 
 
(圖七) 直升機螺旋槳噪音消除結果 
(a) 乾淨語音 
(b) 含有直升機螺旋槳噪音的語音 
(c) 經過噪音除後的語音 
 
¾ 模擬結果二 
圖八為模擬結果二，可以發現未經過噪音消除的語音從波形上來看很難清楚了
解語音到底存在何處，經過了噪音消除的語音可以清楚的發現他們的波形位置。 
SNRin = ０ dB 
SNRin = 1.374 dB 
 
(圖七)  機艙內麥克風配置 
 
而相較於座艙內開關配置的普遍固定性，座艙內的收音麥克風也有相對的固定關係，有
固定於座艙上方的艙頂麥克風，以及正副駕駛配帶的通話麥克風，在正副駕駛沒有太大的移
動的前提之下，我們可以先假設麥克風是位於固定的位置，由此我們發展出兩種定位的方式： 
 
 使用預先建立的TDOA表格定位 
 
使用這種方式的原因在於，各種機型本身的操作面板基本上是相同的，因此我
們可以事先或是事後對於需要定位的機型進行所有開關的聲音錄製，並且將其計算
出的抵達時間差（TDOA）製作為對應各個開關的對照表，我們就可以將此對照表用
於同種機型的聲源定位上面。 
而進行模擬的聲源及麥克風配置圖如下。 
 
(圖八)  模擬聲源及麥克風配置圖 
 
模擬進行步驟如下 
1. 從已知的聲源麥克風之間的幾何相對位置以及先行錄製的開關聲響，運
算出各個聲源到達麥克風後的位移狀況 
2. 求出錄製到的三聲道資料的抵達時間差表格 
3. 再利用所設定的位置的麥克風聲源幾何關係，以及第二次錄製的開關聲
1 2| | | |STDOA 0.5sample STDOA 0.4sample
Sound Speed s
s m s m
T
− − −− < ≤ +×
v v v v
 
因此我們即可以已知的所有開關位置一一代入驗證。 
 
 
五、 結果與討論 
 
以傳統適應性噪音消除的作法是需要兩筆資料來達成噪音消除，但是實際上我們很難有兩
筆資料可以拱我們使用，以座艙語音的特性而論，螺旋槳的噪音具有周期性及統計上的特性，
而可以簡單的多個正弦波去做合成。故我們發展的一套單通道噪音消除的技術，其原理是利用
正弦波合成演算法去製作一個參考訊號，將參考訊號輸入適應性濾波器後以消除螺旋槳的噪
音，最後輔以線性估測濾波器去消除一些噪音的殘餘。 
從模擬結果來看，可以發現 SNR 有明顯的改善，也成功的把直升機螺旋槳的噪音消除。 
由定位的模擬可知，精準的座艙內音源定位是有其可能性的。我們利用對於座艙開關還有
麥克風位置的事前資訊，發展出以對表格以及位置代入驗證這兩種獨特、簡單的演算法來定
位。以其中模擬用的幾何配置，我們得到了在44.1kHz的取樣頻率下，至少有2.5公分以下的精
準度，以理論上而言，甚至可達到0.8公分左右的精確度。 
但是若模擬的假設不存在，也就是麥克風會有移動的情況下，定位的精準度會嚴重地下
降，因此未來必須發展出將麥克風移動的可能性考量進去的擴充表格及位置驗證方式。 
未來仍需繼續進行的部分包括：一、更強健的抵達時間差估測方式，因為必須繼續將背景
噪音、聲源在機艙內傳遞所造成的變形、以及取樣頻率若是比模擬的情況更低下時，所造成的
精準度下降等情況，都考慮在內。二、對於麥克風的位置，實際上只能以概略的方式得到位置，
並且若將駕駛員的移動考量在內的話，目前的兩種方法都會因此失去定位準確度，因此對於麥
克風位置的不確定，定位的方式勢必從找出「哪一個」開關退化為找出「哪一區」的開關，對
此，將表格擴充已符合實際狀況的演算法還需要持續研究。 
未來的工作還有將目前的兩種方法利用實驗的方式來進行驗證，並且將之與目前現有的定
位方式進行比較。除了對於聲源的定位之外，對於開關種類的辨識也是對於定位會有直接幫
助，因此開關聲音的辨識也是在未來進行研究的項目之一。 
 
 
