考量溫度限制之三維晶片版面規劃與擺置系統開發 
“Development of Temperature-Constrained 3D Floorplanning and Placement System” 
計畫編號：NSC98-2221-E-216-036 
執行期間：98 年 8 月 1 日 至 99 年 7 月 31 日 
主持人：顏金泰 中華大學資訊工程學系教授 
 
一、 中文摘要 
在三維晶片擺置設計自動化中，為了滿足晶
片溫度的限制，首先根據電路的熱量評估模式，
計算每個區塊電路的產生熱量的能力，再根據所
有區塊電路的面積、區塊電路間的連接關聯性與
堆疊電路層數量，將原本區塊電路串列分割成符
合堆疊電路層數量的多個小電路串列，使得這些
小電路串列考量面積平衡使得達成體積最少化的
要求，並且考量熱源分散使得避免熱源集中產生
高溫熱點的現象。對於三維晶片上的區塊電路擺
置，熱量模式的溫度計算對於擺置結果是絕對必
要的，有了明確的溫度計算方式才能提供不同擺
置結果的溫度參考，進一步設計較有效的擺置方
法。當每個電路層內的電路區塊已知，並且提供
明確熱量模式的溫度計算，可將同一電路層內的
電路區塊利用熱量分散的目標達成熱源分散的三
維晶片電路規劃與擺置。對於三維晶片電路擺置
結果，已知適當的將空白空間平均分布在電路之
間有利將熱量的平均分配，使得電路上最高溫度
下降，因此溫度降低為導向的空白空間重新分佈
在電路層有執行的必要，但是對於熱源的導熱能
力，最重要的是滿足溫度限制的熱導轉接點擺
置，在擺置結果中的空白空間或是可容許擴充的
空間中擺置相鄰電路層的熱導轉接點將有利熱量
擴散，使得溫度降低滿足三維晶片的溫度限制。 
英文摘要 
In 3D circuit partitioning, the power density of any 
circuit block is estimated by a feasible estimation 
model. Furthermore, according to the connection 
between any pair of circuit blocks, the number of 
circuit layers, the original block-level netlist can be 
partitioned into some clusters with the consideration 
of area balance and thermal distribution. In 
thermal-driven 3D floorplanning, based on 
block-level thermal model, the circuit blocks in any 
partitioned cluster are placed on feasible locations to 
minimize the chip temperature and volume. After 3D 
floorplanning, the maximum temperature in any 
circuit layer can be further reduced by using the 
concept of the whitespace redistribution. Finally, the 
thermal vias can be inserted onto feasible locations to 
reduce the chip temperature and the number of 
thermal vias is minimized to satisfy the temperature 
constraint in thermal via placement. 
 
二、 計畫的緣由與目的 
一般三維化整合設計可實現在三維多晶片模
組設計與三維晶片設計。在三維多晶片模組設計
中，不同晶片垂直封裝設計成三維形式，雖然這
種形式是一種成功的三維化整合設計，但是不同
晶片之間的連線只能在晶片邊緣做連接，因此大
大降低三維化整合設計的連線效能優點。另外如
圖一所示，在三維晶片設計[1-6]中，多個緊密堆
疊的元件層藉由夾層隔離來形成三維化整合設
計，不同元件之間的連線則可以提供直接穿透夾
層的連接轉接點來做直接連接，晶片內的熱量藉
由穿透夾層的熱源轉接點來散熱。一般三維晶片
設計較符合三維化整合設效能與可靠度的要求，
因此將成為未來積體電路設計的主要方法，如圖
一所示，傳統線形連結與覆晶連結方式應用於晶
片的封裝連接模式。 
 
圖一 三維晶片設計 
 
假如不考慮物體熱傳導係數受溫度影響改變，則
穩定狀態下的熱擴散公式可寫成 
2( , , , ) ( , , , ) ( , , , ) 0k x y z t T x y z t p x y z t∇ + =  
因此任一個方塊的熱傳導關係下的熱擴散公式可
表示為 
1 21 2 1 2 ( , , , ) 0y i y ix i x i z i z i i
x x y y z z
T T T TT T T T T T T T p x y z t
x kA x kA y kA y kA z kA z kA
− −− − − −+ + + + + + ∆ =∂ ∂ ∂ ∂ ∂ ∂
 
， 
其中 Ti為此方塊的溫度、k 為單位體積的熱傳導係
數 、 A 為 兩 個 相 鄰 小 方 塊 的 接 觸 面 積 、
, 1 , 2 /i x i x xg g kA xδ= = 、 , 1 , 2 /i y i y yg g kA yδ= = 與
, 1 , 2 /i z i z zg g kA zδ= = 。 
對於方塊溫度的計算，可利用溫度、功率與
將方塊間的熱傳導關係之矩陣方程式表示為
G T P⋅ = ，其中 G 為熱傳導關係矩陣、T 為溫度
向量與 P 為功率向量，對於溫度的計算，已知可
使用高斯消去法來完成，已知高斯消去法的時間
複雜度為 O(n3)，因此所有方塊溫度計算的時間複
雜度為 O(n3)，其中 n 為方塊總數量。 
 
C. 熱源分散且體積最小的三維晶片電路規劃
與擺置 
對於三維晶片 K 堆電路分割結果，希望每堆
電路可以完成電路規劃與擺置，使得最後擺置結
果堆疊成三維晶片的 K 個電路層，但在擺置的目
標要求上，因為製造成本考量，希望得到最小體
積的擺置結果，另外因為三維晶片溫度的考量，
也希望得到較低溫的擺置結果，因此熱源分散的
三維晶片並達成最小體積的目標是電路規劃與擺
置的要求。 
在模擬退火(Simulated Annealing)演算法中，
對於任一電路層的擺置結果，定義三種區塊運
算：旋轉(Rotate)、交換(Swap)與移動(Move)在電
路區塊序列的循序對，分別允許單一電路區塊旋
轉方位、兩個電路區塊交換位置與移動某個電路
區塊到某個位置，一但執行運算也改變循序對所
表示的擺置結果，由新的擺置結果可以求得擺置
結果的高與寬，另外也可依據三維晶片中的區塊
層次熱模型算出所有區塊的溫度。既然每個電路
層的擺置結果可以求得擺置結果的高與寬和所有
區塊的溫度，為了達到熱源分散並達成最小體積
的目標，這個三維晶片模擬退火的規劃與擺置演
算 法 之 成 本 函 數 定 義 為 
},...,{},...,{},...,{ max,max,1max,max,1max,max,1 KKK TTMaxHHxMaxWWMax βα +
，希望能求得兼顧溫度與體積的擺置結果。如圖
四所示，三維晶片三堆電路分割結果，經過三維
晶片模擬退火的規劃與擺置演算法執行，得到兼
顧溫度與體積的擺置結果。 
 
 
B1
B2
B3
B4
B5
B6
B7
B8
B9
B10
B11
B12
B13
B14
B15
B1
B2
B3
B4
B5
B6
B7
B8
B9
B10
B11
B12
B13 
B14
B15
 
圖四 熱源分散的三維晶片電路規劃與擺置結果 
D. 溫度降低為導向的空白空間重新分佈 
在三維晶片中，倘若沒有任何熱導轉接點插
入，任何區塊電路層上下由夾層隔離，三維版面
規劃是由多個二維版面規劃堆疊而成，另外每個
電路層的擺置面積是以各電路層最大的長與寬所
形成的面積為面積，因此有大部分的電路層可能
擁有許多的空白空間可以利用。對於各層版面規
劃的結果，依據各電路層最大的長與寬為面積限
制，利用空白空間的重新分配到高溫的區塊旁
邊，進一步達成各個電路層降溫的效果，對於電
路區塊的降溫方式，採用稀釋和擴散作用的觀念
來有效插入空白空間完成空白空間的重新分配。
以墨汁擴散為例，將墨汁滴於水中，根據物理擴
散現象，濃度高的流體會向濃度低的流體擴散，
所以墨汁會向四周水擴散，墨汁的濃度同時也會
被水稀釋掉，當水量較多時，墨汁濃度越低。我
們利用同樣的觀念來思考電路區塊和空白空間的
關係，每個電路區塊各自擁有的功率密度對應於
墨汁的濃度，空白區塊就像稀釋墨汁濃度的水，
將針對最高溫區塊進行降溫動作，如圖十五所
示，只要將版面規劃外層的空白空間重新分配到
最高溫電路區塊旁邊，將電路區塊和空白空間視
為一個較大的虛擬的區塊，借由虛擬區塊較大的
面積，將原本電路區塊的功率密度稀釋降低到一
個較低的功率密度，當電路區塊功率分佈在較大
的平面面積，所產生的功率密度自然減少，溫度
也隨之可能下降。依照熱源分散且體積最小的三
維晶片電路規劃與擺置結果，如圖五所示，依照
插入空白空間完成重新分配空白空間，所有電路
區塊分散可使得二維版面規劃達到降溫的目的。 
E. 滿足溫度限制的熱導轉接點擺置 
為了降低三維晶片的溫度，導熱轉接點的插
入技術比利用空白區塊分配的降溫效果更加明
顯，導熱轉接點除了不產生熱能外，本身的熱阻
很低，容易將熱量傳導出去，是一個比空白區塊
更好的熱導體，不過導熱轉接點連接在不同相鄰
行政院國家科學委員會補助國內專家學者出席國際學術會議報告 
                                                                 98 年 9 月 29 日 
報告人姓名 顏金泰 服務機構
及職稱 
資訊工程學系 
教授 
     時間 
會議 
     地點 
98/9/8-98/9/11 
英國伯爾法斯特 
本會核定
補助文號
 
會議 
名稱 
 (中文) 2009 年第二十二屆國際電機電子工程師協會國際系統晶片會議 
 (英文) 2009 22nd IEEE International SOC Conference 
發表 
論文 
題目 
 (中文) 具有列與行繞道能力的低功率乘法器設計 
  
(英文) Low-Power Multiplier Design with Row and Column Bypassing 
報告內容應包括下列各項： 
一、參加會議經過 
9/3 由桃園國際機場搭荷蘭航空 KL0878 班機於阿姆斯特丹轉 KL1471 班機抵達英國格拉斯哥機
場，於 9/7 再由英國格拉斯哥機場搭愛爾蘭航空 EI1225 班機抵達愛爾蘭都柏林， 9/8 早上搭火
車前往伯爾法斯特。9/10 中午發表論文於發表論文於 SOCC2009-Posters Section。9/11 由伯爾法
斯特機場搭愛爾蘭航空 EI1034 班機抵達英國倫敦，9/13 搭荷蘭航空 KL1022 班機於阿姆斯特丹
轉 KL0889 班機，再由香港轉搭華航 CI0914 班機回臺灣桃園國際機場。 
 
二、與會心得 
SOCC 首次在歐洲英國伯爾法斯特舉行，對於 SOC 晶片研究，國內各大學也積極投入研究，台灣電
子工業的發展須由製造為導向轉型研究為導向來發展，才能在電子產業開創新的局面，因此投入
電子電路與系統的研究發展應為台灣電子業轉型的關鍵。 
 
三、考察參觀活動(無是項活動者省略) 
無 
 
四、建議 
國內大學研究團隊應多了解 SOC 之研究成果，政府單位應多補助經費鼓勵大學研究成果多多發表
於國際學術研討會，以提升國內研究成果。 
 
五、攜回資料名稱及內容 
SOCC 論文集與 USB 
 
六、其他 
 
 
 
 
 
98年度專題研究計畫研究成果彙整表 
計畫主持人：顏金泰 計畫編號：98-2221-E-216-036- 
計畫名稱：考量溫度限制之三維晶片版面規劃與擺置系統開發 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 1 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 2 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
 
