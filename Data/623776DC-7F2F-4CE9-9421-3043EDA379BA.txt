行政院國家科學委員會專題研究計畫成果報告 
兩階段模糊控制器設計方法 
DESIGN OF A TWO-STAGE ADAPTIVE FUZZY CONTROLLER ‡
計畫編號：NSC 94-2213-E-005-018 
執行期限：94 年 8 月 1 日至 95 年 7 月 31 日 
主持人：陶金旭  
計畫參與人員：陳慧珍，徐承佑，李國和  
 
方式所設計的控制器更能滿足性能指標，但模糊控制器
的設計卻必須與專家經驗結合，以訂定有效的模糊控制
規則(e.g., if-then 規則，而非複雜的動態模式)，方能設
計出有效的控制器，因此專家經驗的好壞就決定了糊控
制器的性能。對某些系統而言，要具備完整的經驗與知
識以正確描述其輸入輸出的關係是非常不容易，再者，
為了要能滿足其性能指標，就必須嘗試許方法去調整糊
控制器的諸多參數，這是非常耗時且又複雜的工作，因
此如能設計一套有效的模糊控制器學習法則，對於模糊
邏輯的應用將更有幫助[9]-[12]。 
摘要 
在本計畫中，我們將提出一套系統化的兩階段設計
模糊控制器的方法，它具備運算複雜度低且不需要知道
受控體準確數學模型的優點，本控制器是以比例-微分
(proportional-derivative)為基礎，再結合 if-then 規則與三
角形歸屬函數(triangular membership function)而形成的
模糊控制演算法則。在設計過程中，我們首先在限定系
統輸出曲線最大超越量的條件下，達到成本函數最小
化，以完成變數區間的選定；接著再應用自動調整模糊
控制器參數的方法來降低系統誤差，模擬結果展示了所
提方法的效用。 
Keyword: fuzzy controller, if-then rule, triangular 
membership function. 
ABSTRACT 
In this proposal, In this paper, a systematic two-stage 
design method for adaptive fuzzy controllers (TSAFC’s) is 
presented. The proposed control scheme has low 
computational complexity. Moreover, the exact 
mathematical model of the plant to be controlled is not 
required. The fuzzy controller under consideration is based 
on the proportional-derivative fuzzy control scheme and 
triangular membership functions. In the design procedure, 
the domain intervals of the input and output variables are 
selected with a heuristic approach to minimize the cost 
function under the constraint of tolerable overshoots in the 
response curve. A learning scheme is then proposed to 
automatically adjust the parameters in the fuzzy controller 
to reduce the error of the system. Simulations are included 
to demonstrate the effectiveness of the proposed method.  
1.前言與研究目的 
近年來，模糊邏輯[1]已被廣泛的研究且成功地應用
在解決控制問題的領域中[3]-[6]。模糊控制器可達到一
些傳統控制器所無法滿足的既定性能指標，它具備較佳
的強健性，能承受較大的系統動態變動[7]；同時，對於
複 雜 且 難 以 定 義 的 程 序 控 制 (complex ill-defined 
process )，模糊控制系統也比 PD 控制器有更好的性能
[8]。雖然在許多領域的應用中，模糊控制器的確比傳統
                                                 
 
為了要解決前述難題並使得模糊控制器的設計流
程變得更容易，在本計畫中，我們提出一套如圖 1 所示
的系統化方法來設計適應性模糊控制器(能自行學習模
糊控制參數) ，本計畫中的模糊控制器由模糊 if-then 法
則、三角形歸屬函數(triangular membership function) 及
中心法解模糊化 (centroid defuzzification)技術所組成
[13]，它具備運算複雜度低且不需要知道受控體準確數
學模型的優點。在選定輸入、輸出模糊變數的數目後，
整個設計過程可簡單的分成兩個步驟：首先，糊控制器
自動調整輸入及輸出模糊變數之最大最小範圍及均分
變數間的距離，以使得給定的成本函數(cost function)為
最小(限制系統輸出曲線的最大超越量)；接著調整輸出
模糊變數的參數以滿足性能指標。本計畫中，設計模糊
控制器所採用的成本函數為希望的系統輸出(desired 
system output)與真實系統輸出(actual system output)之差
量的平方，在設計時變系統(time-varying system)的模糊
控制器時，可採用線上學習的適應性模糊控制器來達到
改善系統性能的目標。 
 
Fuzzy Controller Plant
Adaptive Scheme
r
+ _ e
u y
Select working ranges and
initial values for the parameters
圖 1 適應性模糊控制系統的方塊圖。 
 1
其中模糊控制器輸入及輸出變數的歸屬函數設計成對
稱峯值且變數與變數是等間隔(如表 1 所示)，在表 1 的
模糊規則輸出變數中，其反對角線(reverse diagonal)方向
的模糊集合被設為相等，即只要 i + j = k + l，則
，更進一步，我們將輸出變數模糊集合的峯值
設計成具備下列關係 
ij klO O=
假如 i + j = k + l + 1，則  ij klo o= = c
2
]
由於 c 為一正的常數， 為模糊集合 的峯值，且模
糊輸出變數其歸屬函數的峯值在對角線上是等距離，所
以，初始模糊控制器的變數可等效成如表 2 所示的模糊
控制器，且輸入及輸出變數的歸屬函數可描述成如圖 3
的架構[14]。值得強調的是，如果將輸入變數的範圍分
割成更多的區域，則必然會增加模糊規則，但並不會影
響到初始模糊控制器的設定，這是因為任何不同輸入變
數的數目都可簡化成如表 2 所示的模糊控制器。我們也
可以觀察到等效模糊控制器的參數是相當簡單的架
構，只要簡單選擇變數區間，就完成初始模糊控制器的
設計。在以下的章節中，我們將討論如何適當決定輸入
及輸出變數的變數區間(domain interval )。 
ijo ijO
 
2.2.2.決定變數區間    
在 Driankov 書[15]中介紹兩種選擇變數區間的方
法，一為推論法(heuristic) ，另一為分析法(analytic)。
為了要用分析法去推導變數區間，通常需要有真正受控
體的數學模式協助，如果選擇不適當的數學模式，可能
會導致不好的系統輸出反應。因此在計畫中，我們採用
分析法結合對受控體了解的知識來決定變數區間 
因為系統的輸出被正規化為單位一，因此可以很合
理選擇輸入變數 e 的變數區間為[-1,1]，但選擇輸入變數
Δe 與輸出變數 u 的變數區間就比較複雜，一控制器能否
自行調整以適應不同工作環境，其中自學能力
(self-learning capability)便是決定性能的一項重要指
標，此自學能力也可節省許多手動調整控制器參數的時
間。為了要自動決定輸入變數Δe 及輸出變數的變數區
間，定義成本函數為 
2[ ] ( [ ])e n R y n= −  (3) 
並在每一時刻最小化成本函數以計算變數區間，其中 R
為參考的輸出訊號； 為在時間 n 的系統輸出。藉由
梯度下降法(gradient decent) ，我們採用下述方程式來計
算變數區間 
[ ]y n
77 77 77[ 1] [ ] [o n o n o n+ = + Δ  (4) 
在上式中， 的更新量正比於 77[ ]o nΔ
3
ib− 3
ib
pbnb
( )im x
ix
11O 77O
11o 77o
( )m u
u
(a)
44o
(b)  
1x 2x圖 3 (a)等效模糊控制器其輸入變數的歸屬函數， 及
分別代表輸入變數 e 及Δe；(b)等效模糊控制器其輸出變數
的歸屬函數。  
表 2   表 1 簡化後的模糊控制規則。 
2
77 1 1
77 77
77
[ ] [ ] [ ][ ] 2 [ ]
[ ]
[ ] [ ]         [ ]sgn
[ ]
e n y n u n Do n e n
o u n D
y n u n De n
u n D o
η η
η
⎛ ⎞∂ ∂ ∂Δ = × − =⎜ ⎟∂ ∂ − ∂⎝ ⎠
⎛ ⎞∂ ∂ −≈ ⎜ ⎟∂ − ∂⎝ ⎠
o
−
 (5) 
其中 D 為系統的延遲時間， 1η , η為正常數， 定
義如下 
sgn( )i
1,    i f   0
sgn( )
1,    i f   0
Z
Z
Z
+ ≥⎧= ⎨− <⎩  
假設一系統的輸出為 ，輸入為 ，系統的特性
,
[ ]y n [ ]u n
[ ]h n 0,1,. . . ,n = ∞，可由脈波輸入所決定，即系統輸出
可表示成脈波輸入u n 與 的迴旋積分 [ ]y n [ ] [ ]h n
0
[ ] [ ] [ ]
[ ] [ ]
[0] [ ] . . . [ 1] [ ( 1)] [ ] [ ]
 [ 1] [ ( 1)] . . . ,            0,1,. . . , .
k
y n h n u n
h k u n k
h u n h D u n D h D u n D
h D u n D n
∞
=
= ⊗
= + + − − − + −
= −
+ + − + + = ∞
∑
]D−
 (6) 
其中系統輸出 相對於輸入為 u n 的導數為  [ ]y n [
[ ] [ ] .
[ ]
y n h D
u n D
∂ =∂ −  (7) 
因此， sgn( [ ] / [ ])y n u n D∂ ∂ −  可表是成  
1,     [ ] 0[ ]sgn
1,     [ ] 0[ ]
i f h Dy n
i f h Du n D
+ ≥⎧⎛ ⎞∂ = ⎨⎜ ⎟ − <∂ −⎝ ⎠ ⎩ . (8) 
本計劃中，未知系統的延遲時間 定義為系統脈波輸入D
  e  
  pbnb 
  11O 44Onb
eΔ
  pb 44O 77O
 
 3
差，此演算法則可綜整如下 
演算法則 2： 
1). 模糊輸入及輸出變數的變數區間(domain interval)
採用演算法則 1 的學習結果。 
2). 初始化模糊輸入及輸出歸屬函數，並確認經初始
化過的模糊控制器其系統反應的一致性。 
3). 執行控制系統模擬 
3a).在每一時刻，計算控制輸出、誤差及預測誤差。 
3b).採用方程式(15)來更新 的峯值。              ijo                
4). 假如系統性能滿足或已達最大的疊代次數，停止
演算法則 2；否則跳回步驟 3，繼續執行參數調整，
使系統性能滿足需求。 
本計畫所提出的模糊控制器設計方法，包含演算法則 1
與演算法則 2，但在實際的應用上，我們是將兩演算法
則結合以獲得一完整的控制系統設計流程，它是一系統
化的設計方式，在給定初使變數區間及學習參數後，便
能產出一最小化成本函數的模糊控制器。雖然，我們也
可以預期到假如也進行調整輸入變數之歸屬函數的參
數，則可得到較佳的系統性能；但從另一角度來看，這
樣一個過程會增加模糊控制器的複雜性，也會增加運算
負擔。我們進行一些實驗觀察到，同時調整輸入及輸出
變數之歸屬函數的參數會降低收斂的速度，因此在本計
畫中所提出的模糊控制器將不調整輸入變數之歸屬函
數的參數，如果發現性能無法滿足需求，則可將輸入空
間分割成較多的模糊區域，以增加模糊控制器的可控維
度(degree of freedom) ，又因為在每一修正時刻，只有
四個 會被更新，所以因增加輸入空間分割所導致的模
糊規則數目增加，並不會增加系統的複雜性，且採用增
加輸入空間分割的方式，通常更能有效的改善系統性能
[15]。 
ijo
3.實驗 
在本計畫中，我們將所提控制方法應用至一 360 度
的倒單擺系統[16]，[17]，此系統的動態方程式表示成 
2
2
cos ( s in ) s in
sin
c pl F T g f
J l
θ ω
θ μω θ μ θ ωω μ θ
=
− − + −= +

  
其中狀態變數 θ 及 ω 分別表示角度及角速度，
( )c pl m mμ = + 且 ， 及 分別
表示車子及擺錘的質量，
/ (2( ))p c pl Lm m m= + cm pm
J  表示倒單擺重心的慣量，L
為擺錘的長度， g 為重力加速度，參數 、 及F cT pf 分
別表示驅動力量、車子水平方向模擦係數及擺錘的旋轉
摩 擦 係 數 。 模 擬 參 數 則 設 定 為 , 
, , 
1 .12cm k= g
= 20.00383863kg/mJ =0.095pm kg 0.36L m= , 
, 。 0 .5cT N= 0.000021pf =
0.005
我們希望本計畫所提控制方法能控制倒單擺在垂
直位置且沒有超越量(overshoot)發生，角速度變化量必
須在[-180, 180]範圍內。在實驗中，學習常數設定為
bη η = 0.003， 1 2o oη η= = =
) (20, 0)
，圖 4 顯示本計畫所
提的模糊控制學習方法應用至倒單擺系統的控制結
果，其中初始條件為 ( ,θ ω =
( , ) (20, 0)
且取樣速率為 0.01
杪，在圖 4 中藍實線表示倒單擺角度變化，綠虛線為角
度變化變化，實驗結果顯示本計畫所提的模糊控制學習
方法可有效控制倒單擺至垂直位置且安定時間小於 0.5
秒。為進一步測試本計畫所提控制方法的性能，我們變
化倒單擺的初始角度，從-30 度變化至+30 度間隔 10
度，倒單擺的初始角速度則固定為+15 度/每秒。圖 5顯
示控制結果，我們可以清楚看出對於所有的初始角度，
本計畫所提控制方法均可快速有效控制倒單擺至垂直
位置。 
為比較本計畫所提的控制方法，在相同的初始條件
下，我們應用 LQR(linear quadratic regulator)[18]，[19]
來控制此倒單擺系統，圖 6 顯示初始條件為
θ ω = 的控制結果，LQR 方法可控制倒單擺至
垂直位置且安定時間小於 0.7 秒。圖 7 顯示變化初始條
件且初始角速度固定為+15 度/每秒的控制結果，結果顯
示 LQR 也可在不同初始角度條件下，穩定控制此倒單
擺系統。 
4.結果與討論 
在本實驗中，我們將本計畫所提的模糊控制學習
方法與 LQR 方法應用至 360 度的倒單擺控制系統，當
比較此二種方法時，二者均可有效控制此倒單擺系
統，但本計畫所提的模糊控制學習方法有較短的收斂時
間。當變化初始條件時，本計畫所提的模糊控制學習方
法較能克服初始條件的變化(參考圖 5 及圖 7)。 
5.計畫成果自評 
在此計畫中，我們提出一套系統化的兩階段設計模
糊控制器的方法，它具備運算複雜度低且不需要知道受
控體準確數學模型的優點，本控制器是以比例-微分為基
礎，再結合 if-then 規則與三角形歸屬函數而形成的模糊
控制演算法則。在設計過程中，我們首先在限定系統輸
出曲線最大超越量的條件下，達到成本函數最小化，以
完成變數區間的選定；接著再應用自動調整模糊控制器
參數的方法來降低系統誤差，模擬結果展示了本計畫所
提方法的效用。 
未來我們除了將繼續此兩階段設計模糊控制器的
方法研究，也要將此方法應用至真實系統的控制，以進
一步驗證其實用性。 
6.參考文件 
[1] D. Dubois and H. Prade, Fuzzy Sets and Systems: Theory and 
Applications. New York:Academic Press, 1980. 
[2] L. A. Zadeh, “Fuzzy sets.” Inform. Contr. vol. 8, no. 3, pp. 
338-353, 1965. 
[3] S. Chiu, S. Chand, D. Moore, and A. Chaudhary, “Fuzzy logic for 
 5
