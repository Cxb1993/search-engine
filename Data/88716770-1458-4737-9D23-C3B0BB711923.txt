 2
理器作為主要控制晶片，以每秒 100
次的反應頻率監控整個賽格威系統，
騎乘者是否向前傾或向後傾，隨時根
據所有感測器所測得回傳的車身資訊
判斷車子應該前進或後退，迅速反應
而做出最有利的控制。如此完善的感
測器的配置，使得賽格威在平衡與行
走上均有很優良的穩定度。同一家公
司另外推出以賽格威底座為主，可載
運物品的兩輪移動運平台，稱為
“ RMP ＂ (The Segway Robotic 
Mobility Platform）[5]、[8]。在 1994
年，日本學者 Y. Ha 和 S. Yuta 發表了
一篇論文，探討能自我平衡與軌跡追
蹤的移動式倒單擺機器人 [2]，利用
Lagrange Motion Equation 求得系統狀
態方程式，控制車身整體平衡。之後
也有許多類似求得系統方程式來控制
車身行動的論文，其中最有名的是
2002 年的輪倒單擺機器人 Joe [1]，此
篇論文採用陀螺儀所得的資訊當作車
身傾斜角度與角速度，利用兩輪回授
編碼值精確得出車身目前位置與方
向，將這些資訊套入求得的狀態方程
式，控制車身前進、後退、旋轉等動
作。除此之外，在網路上，也有許多
其他類似兩輪車的相關研究成果[3]、
[9]、[11]，如大衛.安德森帶領的實驗
室完成的成品 nBot Balancing Robot 
[10]，也是由倒單擺的觀念發展出來
的。nBot 體積很小， 可以自我平衡、
行進、後退、上坡、下坡、避開障礙
物等。在感測器方面，主要藉由加速
度計(accelerometer)與陀螺儀來作為二
輪車的動態感測器，但由於陀螺儀具
有訊號飄移的現象，所以我們想辦法
克服並改善這現象，以上參考文獻，
在實質上給了我們不少的啟發與幫
助。 
 
三. 研究方法 
欲使兩輪自走車能夠自我平衡，甚至
前進、後退或轉彎，除了選用感測器，
還要進行訊號處理，才可以得到精確
的訊號，進而獲得良好的控制效果。
承接了第二年的經驗與實做，本計畫
使用傾斜器及陀螺儀分別來偵測車身
平衡角度及車身平衡角速度，再加上
兩組編碼器來量測左、右兩輪的旋轉
角度及旋轉角速度，以達到定位、定
速的效果。由於傾斜器及陀螺儀的輸
出都是類比訊號，類比訊號容易受到
外在因素的干擾，因此我們將其信號
先通過一個 A/D 的轉換 IC，轉為數位
訊號，再通過數位濾波器（Kalman 
Filter），以減低訊號干擾所造成的訊號
跳動。因為編碼器之輸出訊號為數位
訊號，無需經過特殊處理即可直接拿
來使用，但是為了方便編碼器在二輪
車使用，我們進行了編碼器的硬體改
裝。本子計劃與其它子計畫整合後的
成果略述如下。整個二輪車系統建立
在子計畫ㄧ設計製作的二輪車硬體機
構，以 Nios CPU 作為主控核心，以子
計畫三設計的控制方法加上本計劃的
感測器，信號處理及相關驅動電路，
去實現控制，最後搭配子計畫二作為
兩輪車的充電系統，把各功能整合起
來，讓二輪車的各種功能完整呈現。
以下將介紹本計畫本年度的工作成
果，包括所使用的 Nios CPU、軟式核
心的系統架構、及感測器與相關電路
的組裝，以及實地測試結果。 
 
 
 
 4
3.3 感測器與相關電路的組裝 
    由於此兩輪車的整個系統是屬於
獨立自主的（Stand-Alone），因此所有
的電子電路系統必須完全的搭載在整
個有限的車身機構上面，如圖 4 所示。
其中包含有：系統控制核心（NIOS 
Board）、車身動態感測器（傾斜器、
陀螺儀與編碼器）、系統電源電路（電
源穩壓電路與電源轉壓電路）、類比轉
數位電路（A/D Converter）、無線傳輸
模組（TG-11）、鉛蓄電池、輪圈馬達、
編碼器…等，所以在電子電路的配置
上，必須精確有效的運用車身上所剩
餘的空間。 
 
圖 4. 車身整體圖 
 
由於本兩輪車使用輪圈馬達，而輪圈
馬達並沒有編碼器（Encoder）的功能，
所以必須另外加裝編碼器，使得輪圈
馬達擁有定位的功能，進而可以量測
馬達之旋轉角度及角速度，如圖 5 所
示。鴻璿（Hontko）所生產的編碼器，
其型號為 HTR-6B，額定電壓為 5V，
解 析 度 512cpr （ Counts Per 
Revolution）。改裝後的編碼器和輪圈
馬達是由皮帶輪來相互帶動，其中，
編碼器的皮帶輪和輪圈馬達的皮帶輪
的直徑比為 3：7，因此輪圈馬達轉一
圈，可以達 1195 cpr。 
 
圖 5. 編碼器改裝圖 
 
馬達驅動電路在車身右邊平台上。驅
動一顆馬達包含了二顆 Half-Bridge 
Driver（IR21844）及四顆 MOSFET 功
率晶體（IRF530），如圖 6 所示。另外
爲了供應馬達足夠的電流，滿足馬達
的功率需求，在驅動電路輸出功率給
馬達的線路上，我們再加上 50 芯蕊的
銅線，如圖 7 銀色線路所示。 
 
 
圖 6. 驅動電路圖 
 
 
圖 7. 驅動電路背面圖 
 
 
 6
乎沒有，表示是直線行走。 
 
 
圖 13. 平地行走時車身速度 
 
 
圖 14. 平地行走時車身傾斜角 
 
 
圖 15. 平地行走時兩輪角度位置誤差 
 
行進煞車測試：本實驗一開始，兩輪
車在行走狀態，在 6 秒時（第 86 個取
樣點），遙控器下達煞車指令
( 0CV = ）， 由圖 16 可知，重心滑車會
滑到車子後端 4.5 cm 處，此時車速也
急劇回到 0 /km h ，然後由於車速減
慢，滑車往前滑回中央。並且從圖 17、
圖 18 可知，車身仍維持平衡，兩輪角
度的誤差幾乎沒有，表示兩輪車是在
煞車後並無偏離航道。 
。  
 
 
圖 16. 煞車時重心滑車位置 
 
 
圖 17. 煞車時車身速度 
 
 
圖 18. 煞車時兩輪角度位置誤差 
 
上坡測試：本實驗用遙控器下達前進
指令（ 40CV = ，約時速 2.9 公里/小
