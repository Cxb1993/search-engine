iii
計畫摘要
本計畫延續前期微飛行器(MAV)增強飛行穩定性與控制性能之分析與設計
研究，以及微飛行器強健穩定與導航導引之研究，將以三年為期程，運用嵌入
式控制器進行導航導引之理論與實務的驗證。第一年以 50 公分級 MAV 為研究
目標，第二年以 40 公分級 MAV 為研究目標，第三年以實際飛試進行 MAV 之導
航驗證，此微飛行器之零組件與酬載除了包含基本的伺服器、接收機、電池組
外，亦包含 CCD、GPS 模組、A/V 發射機及飛控電腦。由於微飛行器具有微小、
易於攜帶、難以被偵測之特性，使得在軍事用途上極具有應用價值，可為未來
高科技作戰型態的偵搜利器，亦是目前先進國家軍事科技重點發展的要項之
一。由於微飛行器之尺度小、飛行速度低，造成其飛行雷諾數低，氣動力效率
差，使得微飛行器對於外界之干擾相當敏感，且氣動力阻尼低、穩定性差、操
縱困難，因此微飛行器的設計與傳統之飛機具有很大的差異性，特別是在飛行
穩定控制與導航導引系統之設計上，因此提出本計畫以嵌入式控制器進行微飛
行器導航導引之理論與實務的驗證研究。本研究運用 V 型尾翼之微飛行器氣動
力導數建立非線性六自由度動態模式，然後進行非線性運動系統線性化，再進
行 PID 控制法則、自動駕駛儀設計、以及強健控制於微飛行器之飛控系統設計，
以增強微飛行器之穩定性提升抗干擾能力，再運用導航理論建立導引飛行器之
自動導航功能，進行嵌入式控制器進行導航導引之理論與實務的驗證，以驗證
導引律之可行性並分析其性能。如此，微飛行器可以加強其自主飛行能力，使
其具有自動駕駛能力，使操作者只要透過簡單的指令，便能使微飛行器前往執
行定點盤旋空照、即時影像傳輸、偵查等任務。
關鍵字：微飛行器、導航系統、卡爾曼濾波器、嵌入式控制器。
v目錄
誌謝 ...............................................................................................................................ii
計畫摘要 ......................................................................................................................iii
ABSTRACT ................................................................................................................ iv
目錄 ............................................................................................................................... v
附錄 .............................................................................................................................vii
表目錄 ........................................................................................................................viii
圖目錄 .......................................................................................................................... ix
符號說明 .....................................................................................................................xv
1.前言 ............................................................................................................................ 1
1.1.前言 ..................................................................................................................1
1.2.研究動機與目的 ..............................................................................................2
1.3.研究方法與步驟 ..............................................................................................8
2.飛行運動方程式 ........................................................................................................ 9
2.1.運動方程式推導 ..............................................................................................9
2.2.氣動力參數估算 ............................................................................................13
2.3.配平與模擬驗證 ............................................................................................15
3.導航系統架構建立 ..................................................................................................23
3.1.導航系統運作規劃 ........................................................................................24
3.2.載具元件裝置 ................................................................................................27
3.2.1.遙控器 ..................................................................................................27
3.2.2.伺服器 ..................................................................................................27
3.2.3.接收器 ..................................................................................................27
vii
5.2.4.自動歸航 ..............................................................................................47
5.2.5.高度追蹤 ..............................................................................................47
6.地面載具實測與飛試驗證結果 ..............................................................................50
6.1.地面載具實測模擬 ........................................................................................50
6.2.飛行載具實際飛行數據(TT-Cub) ...............................................................52
6.3.飛行載具實際飛行數據(TT-Cub) ...............................................................55
6.4.飛行載具實際飛行數據(TT-Cub) ...............................................................59
6.5.飛行載具實際飛行數據(TT-Cub) ...............................................................63
6.6.飛行載具實際飛行數據(TT-Cub) ...............................................................67
6.7.飛行載具實際飛行數據(MAV50) ................................................................71
6.8.飛行載具導航飛行數據(MAV50) ................................................................72
6.9.飛行載具實際飛行數據(MAV40) ................................................................73
6.10.飛行載具導航飛行數據(MAV40) ..............................................................76
7.結論 .......................................................................................................................... 78
參考文獻 .....................................................................................................................80
附錄
ix
圖目錄
圖 1.1 俄羅斯開發之一展 40cm ZALA 421-11，具偵察功能 .................................6
圖 1.2 美國開發戰術上 TACMAV，翼展 53 公分，有導航功能 ...........................6
圖 1.3 比利時根特大學，自製翼展 40 公分，裝有嵌入式系統.............................6
圖 1.4 美國左克索大學，翼展 90 公分，有 PD 控制..............................................6
圖 1.5 北京清華大學，製作之翼展 32 公分，裝有微處理器 .................................6
圖 2.1 MAV40 六自由度座標系統示意圖 .................................................................9
圖 2.2 MAV40 基本構型 ............................................................................................14
圖 2.3 速度 14m/s，縱向線性與非線性配平比較 .................................................17
圖 2.4 速度 14m/s，縱向線性與非線性動態模擬短週期響應比較 .....................17
圖 2.5 速度 14m/s，縱向線性與非線性動態模擬長週期響應比較 .....................18
圖 2.6 速度 14m/s，橫向線性與非線性動態模擬響應比較 .................................18
圖 2.7 速度 12m/s，縱向線性與非線性配平比較 .................................................19
圖 2.8 速度 12m/s，縱向線性與非線性動態模擬短週期響應比較 .....................19
圖 2.9 速度 12m/s，縱向線性與非線性動態模擬長週期響應比較 .....................20
圖 2.10 速度 12m/s，橫向線性與非線性動態模擬響應比較 ...............................20
圖 2.11 速度 10m/s，縱向線性與非線性配平比較 ...............................................21
圖 2.12 速度 10m/s，縱向線性與非線性動態模擬短週期響應比較 ...................21
圖 2.13 速度 10m/s，縱向線性與非線性動態模擬長週期響應比較 ...................22
圖 2.14 速度 12m/s，橫向線性與非線性動態模擬響應比較 ................................22
圖 3.1 系統架構圖 .....................................................................................................23
圖 3.2 整體系統運作概念圖 .....................................................................................24
圖 3.3 嵌入式系統設計圖 .........................................................................................25
xi
圖 6.7 馬達控制輸出百分比圖 .................................................................................53
圖 6.8 X 軸方向之陀螺儀輸出圖 ..............................................................................53
圖 6.9 Y 軸方向之陀螺儀輸出圖 ..............................................................................53
圖 6.10 Z 軸方向之陀螺儀輸出圖.............................................................................54
圖 6.11 飛航軌跡平面圖 ...........................................................................................54
圖 6.12 飛行航向圖 ...................................................................................................55
圖 6.13 飛行高度圖 ...................................................................................................55
圖 6.14 飛行速度圖 ...................................................................................................56
圖 6.15 副翼控制面角度圖 .......................................................................................56
圖 6.16 水平尾翼控制面角度圖 ...............................................................................56
圖 6.17 馬達控制輸出百分比圖 ...............................................................................56
圖 6.18 X 軸方向之加速度輸出圖 ............................................................................56
圖 6.19 Y 軸方向之加速度輸出圖 ............................................................................56
圖 6.20 Z 軸方向之陀螺儀輸出圖.............................................................................57
圖 6.21 X 軸方向之陀螺儀輸出圖 ............................................................................57
圖 6.22 Y 軸方向之陀螺儀輸出圖 ............................................................................57
圖 6.23 Z 軸方向之陀螺儀輸出圖.............................................................................57
圖 6.24 飛航軌跡平面圖 ...........................................................................................58
圖 6.25 飛行航向圖 ...................................................................................................59
圖 6.26 飛行高度圖 ...................................................................................................59
圖 6.27 飛行速度圖 ...................................................................................................60
圖 6.28 副翼控制面角度圖 .......................................................................................60
圖 6.29 水平尾翼控制面角度圖 ...............................................................................60
圖 6.30 馬達控制輸出百分比圖 ...............................................................................60
xiii
圖 6.55 水平尾翼控制面角度圖 ...............................................................................68
圖 6.56 馬達控制輸出百分比圖 ...............................................................................68
圖 6.57 X 軸方向之加速度輸出圖 ............................................................................68
圖 6.58 Y 軸方向之加速度輸出圖 ............................................................................68
圖 6.59 Z 軸方向之陀螺儀輸出圖.............................................................................69
圖 6.60 X 軸方向之陀螺儀輸出圖 ............................................................................69
圖 6.61 Y 軸方向之陀螺儀輸出圖 ............................................................................69
圖 6.62 Z 軸方向之陀螺儀輸出圖.............................................................................69
圖 6.63 飛行軌跡平面圖 ...........................................................................................70
圖 6.64 MAV50 第一次導航飛行資料總圖(Gain=0.0417) ......................................71
圖 6.65 MAV50 第二次導航飛行資料總圖(Gain=0.1251) ......................................72
圖 6.66 MAV50 第二次導航飛行平面飛行軌跡 ......................................................73
圖 6.67 MAV40 飛行航向圖 ......................................................................................74
圖 6.68 MAV40 飛行高度圖 ......................................................................................74
圖 6.69 MAV40 飛行速度圖 ......................................................................................74
圖 6.70 副翼控制面角度圖 .......................................................................................74
圖 6.71 水平尾翼控制面角度圖 ...............................................................................74
圖 6.72 馬達控制輸出百分比圖 ...............................................................................74
圖 6.73 X 軸方向之陀螺儀輸出圖 ............................................................................75
圖 6.74 Y 軸方向之陀螺儀輸出圖 ............................................................................75
圖 6.75 Z 軸方向之陀螺儀輸出圖.............................................................................75
圖 6.76 飛行軌跡平面圖 ...........................................................................................75
圖 6.77 MAV40 飛行航向圖 ......................................................................................76
圖 6.78 MAV40 飛行高度圖 ......................................................................................76
xv
符號說明
英文字母
A 狀態方程式系統矩陣
B 狀態方程式控制矩陣
C 狀態方程式觀測矩陣
CD 阻力係數
CL 升力係數
Cl 滾轉力矩係數
Cm 俯仰力矩係數
Cn 偏航力矩係數
Cy 側向力係數
c 主翼平均氣動力弦長
D 阻力
e 量測訊號之誤差值
F 作用力
g 重力加速度
H 觀測矩陣
h 高度
高度差
爬升率
Ix, Iy, Iz 機體座標軸之慣性力矩
Ixz 慣量積
J 橫向慣量參數
eh
CMDh
xvii
 攻角變化率
β 側滑角
δa 副翼角度
δe 水平尾翼角度
δf 襟翼角度
δR 方向舵角度
ζ 氣動阻尼
θ 俯仰角
ρ 空氣密度
Ψ 偏航角
ψ 滾轉角
Φ 狀態轉移矩陣
量測訊號內之雜訊
系統雜訊
系統雜訊擴建值
訊號向量
估算訊號向量
估算之量測訊號
感測器之量測訊號
量測訊號之擴建值
下標
0 零攻角
p 對滾轉率之導數
x
v
V
x
xˆ
yˆ
y
y
11. 前言
1.1. 前言
由於微飛行器為具高度運用價值之研發平台，而全系統整合涉及之微機
電、微通訊及微工程技術等，存在極大之學術理論與研製實務挑戰性，因此國
際間有許多研究機構及學術界早已積極從事相關之研究，美國「國防先進科技
研究計畫局」(Defense Advanced Research Projects Agency, DARPA)於 1997 年起
挾其豐沛之研究資源，推動微飛行器研製與驗證計畫，投入 3500 萬美元之龐大
經費，推動微飛行器研製與驗證計畫，研究重點包括低雷諾數空氣動力學、飛
行穩定控制系統、微推進系統、高功率密度能源、低功率微導航系統、微通訊
系統、微感應/探測器等，涵蓋了所有與 MAV 有關之飛行力學及其相關系統組
件之技術研究，相關的研究則參考文獻；其他包括德國、日本、中國大陸、韓
國…等亦投注相當資源進行微飛行器之開發研究。近年已有許多研究機構完成 6
英吋微飛機原型開發並成功執行飛行測試：例如，University of Florida (UF)開發
之 6 英吋彈性翼式微飛機、 MLB 公司所開發之定翼式微飛機以及
Aerovironment 公司所發展的 Black Widow 等，而 2005 年國際 MAV 比賽由韓國
Konkuk 大學之最小 12.8cm 微飛行器居冠。然而，這些 MAV 在操作時均需以地
面影像作為飛行姿態與飛機位置的參考。
在邁入實際運用上，MAV 還有很多重要的關鍵技術有待突破，例如：克服
微飛行器在空氣動力學上的障礙、這麼小的負載配平下承受足夠的裝備、自動
駕駛與自主飛行、推進系統效能的提升、電子通訊雜波干擾防治、…等等，可
見在低雷諾數氣動力探討、飛行穩定控制設計及自主導航能力等領域仍有成長
空間，值得吾人深入研究。
目前的導航系統以全球定位系統(Global Position System, GPS)為熱門，此系
3(1) 重量輕、體積小
目前的無人飛行載具當中，已逐漸往微小化趨勢，本研究第一年以 50cm 為
目標，第二年採用翼展只有 40cm 的 MAV，重量也只有在 360g，且起降也無須
輔助設備，在作戰時，很容易的就可以完成起降作業，較一般戰術上方便許多。
(2) 成本低、效益高
由於能源缺乏物價上漲，目前戰機價位加上能源使用，較一般無人飛機價
位高出太多，在加上定期需要保養、維修、以及人員的訓練費用數字上也相當
可觀，因而在成本上，無人飛行載具的應用上也越來越廣，而需求量也大為增
加。
(3) 隱藏性好、存活性高
無人飛行載具已趨向微型化，在本研究製作的迷你飛行器，已與一般鳥類
「老鷹等等」的大小逼近，相對的飛行高度越高，被敵方發現的可能性越小，
由經驗來看，大約在 100m 處，人們的眼睛就已經無法識別，必須經由儀器偵測，
若無人飛行載具的外型經過詳細設計，以及雷達反射波的干擾上，可增加更高
的隱藏效果，因而存活率較為一般戰機高出許多。
(4) 適應強、無人員安全顧慮
以台灣生育趨勢中，人命的價值，也越來越寶貴，因而無人飛行載具也越
來越受重視，經過外型設計、與飛行控制迴路設計…等，改善飛行穩定性後，
經實際飛行可知，無人飛行載具也幾乎可以在風速較大(5 m/s)的情況下飛行，因
而較一般人為飛行較為安全許多，且失事成本較低。
但在無人飛行載具中，有許多問題需要ㄧㄧ克服，其中以飛行時的不定因
素最多：飛行員操控、外界風干擾、電磁波干擾訊號接收…等，都會成為飛行
任務失敗的原因，因此本論文在無人飛行載具上加上導航系統，以嵌入式控制
器來代替人為操控，控制飛機航行方向、欲到達目的地、飛機姿態變化…等，
5式，來穩定姿態飛行，導航系統方面使用GPS、電子羅盤感測元件，使用機頭始
終指向下一航向點策略來實現。
浙江大學在2004年[9]，使用DSP撰寫導航程式，並採用GPS以及IMU感測
器，做半物理仿真實驗，該方法利用實驗中的實測數據，加上感測器誤差，來
驗證卡爾曼濾波器(Kalman Filter)在導航系統中訊號不發散，尤其在GPS接收訊
號錯誤之幾秒間，誤差較大，但在GPS訊號恢復正常後，經緯度誤差也回歸正常。
防空兵指揮學院在2006年[10]，以圖層的方式，來模擬TrackingLayer以及
GeoEvent的實機跟蹤，採用GPS、 GIS以及通訊系統，作為及時監控，並使用
PC104以及C++為開發平台，完成無人機的監控與導航。
上海大學機械工程與自動化學院在 2005年 [ 11 ]，以地面實驗，採用
Fortune(1985) 的Sweep-line計算，來構造出Voronoi地形幾何圖，再利用Dijkstra
演算法計算出起飛點到目標點之最小路徑，再以K-Trajectory算法最佳化參考路
線，驗證在Linux嵌入式系統下能夠穩定有效的運作，滿足系統路徑規畫。
淡江大學在2009年[12]，使用了GPS與INS以卡爾曼濾波器作整合，並加入了
最小平飛轉彎功率，使用1/3Hz更新率之GPS、電子羅盤、高度計、速度計以及
加速儀，完成了航電系統設計。
成功大學在2004年[13]，在無人載具上裝置了GPS、AHRS、高度計、速度計
之感測器，以PID控制方式，來達成可控制姿態，達到預期的航向與高度，以及
多導航點自主無人飛行。
虎尾科技大學在2008，2009年得到視距外導航冠軍。
元智大學在2004年[14-15]，根據Lead-Lag以及LQ等方式，設計了飛機穩定
控制，也使用PID來導航飛機，在載具上裝置了GPS、3軸加速規、電子羅盤、3
軸陀螺儀、高度計、速度計以及電子羅盤，來導航導引無人載具。
國防大學在2006年[16]，使用外積導引律，搭配PIC嵌入式系統，實際驗證
7表 1.2 中共迷你型導航機比較表
學校 控制核心 感測器 導航技術 測試方式
北 京 大
學
微處理器
陀 螺 儀 、
GPS 、 高 度
計、速度計
PID
實際飛行抓
取飛行數
據，導航部分
為模擬。
西 北 工
業大學
DSP
GPS 、 高 度
計、姿態感測
器、無線訊號
高度感測
捷聯式慣性導航 半物理仿真
北 京 工
商大學
C51
GPS、電子羅
盤
機頭始終指向下一航向
點策略
實際飛行
浙 江 大
學
PC104 MIMU、GPS Kalman filter 半物理仿真
防 空 兵
指 揮 學
院
GIS GPS TrackingayerGeoEvent
模擬
大
陸
上 海 大
學 機 械
工 程 與
自 動 化
學院
Linux-
SBS
Embedded
linux
無
採用 Fortune 的
Sweep-line 計算，來構
造出 Voronoi 圖，再利
用 Dijkstra 算出起飛點
到目標點之最小路徑，
再以 K-Trajectory 算法
最佳化參考路線。
地面模擬
表 1.3 本國迷你型導航機比較表
學校 控制核心 感測器 導航技術 測試方式
淡江大學 ARM
PIC
GPS、電子羅盤、高度
計、速度計、加速儀
Kalman filter 實際飛行
成功大學 PC-104
GPS、GYRO、速度計、
加速儀、高度計
PID 實際飛行
元智大學 PIC GPS、GYRO、速度計 PID 實際飛行
虎尾科技
大學 DSP
GPS、GYRO PID 實際飛行
國
內
國防大學 PIC
GPS、GYRO、速度計、
加速儀
PD 實際飛行
92. 飛行運動方程式
2.1. 運動方程式推導
首先假設飛機為一個剛性體(Rigid Body)，應用牛頓第二定律可以分別推導
出飛機之平移運動與旋轉運動的運動方程式，公式(2.1)稱之為力平衡運動方程式
(Force Equations)，公式(2.2)為力矩平衡運動方程式(Moment Equations)，機體參
考座標分別為 O, XB, YB, ZB如圖 2.1，分別沿著機體座標軸(XB, YB, ZB)的三個平
移運動自由度、與三個旋轉運動自由度，所對應的共六個常微分方程式，此即
稱之為六自由度運動方程式[17]。
sin ( )
cos sin ( )
cos cos ( )
x
y
z
F mg m u qw rv
F mg m v ru pw
F mg m w pv qu

 
 
   
    
    



(2.1)
2 2
( ) ( )
( ) ( )
( ) ( )
x zx y z
y zx z x
z zx x y
L I p I r pq I I qr
M I q I r p I I rp
N I r I p qr I I pq
     
     
     
 

 
(2.2)
圖2.1 MAV40 六自由度座標系統示意圖
M N
L
V
α
β
XE
ZE
YE
YB
ZB
XB
XW
11
橫向線性系統方程式則為：

























 


 



 


 




































 


 


 



 


 


 




 















r
a
z
xz
z
xz
x
xz
x
xz
r
z
xz
rp
z
xz
pv
z
xz
v
r
x
xz
rp
x
xz
pv
x
xz
v
rpv
rraa
rraa
r
L
I
I
NJL
I
I
NJ
N
I
I
LJN
I
I
LJ
Y
r
p
v
L
I
I
NJL
I
I
NJL
I
I
NJ
N
I
I
LJN
I
I
LJN
I
I
LJ
guYuY
m
D
Y
r
p
v














00
0
0010
0
0
coscostancoscos 0000000
1




(2.5)
其中J為
1
2
1 xz
x z
I
J
I I
     
  
(2.6)
或將橫向線性系統以狀態方程式表示為：
22222 uBxAx  (2.7)
上述線性非時變系統方程式，適合於迷你型飛行器，由經驗公式與推導之線
性化狀態方程式[18]，以mLTI(Linear-Time-Invariant for MAV)表示MAV40的動態
行為，將公式(2.3)~(2.7)式中各氣動導數與穩定性導數之定義如表2.1。
13
縱向:
 






























































T
e
ww
qwqwwwuwu
quu
wu
TTee
Te
Te
ZMMZMM
ZZ
XX
q
w
u
uZMMZMMZMM
uZZZ
gXX
q
w
u













00
0100
0)(
0
0
0
0






(2.8)
橫向:
 








































 















r
a
rpv
rpv
rpv
ra
ra
r
JNJN
JLJL
Y
r
p
v
JNJNJN
JLJLJL
guYYmDY
r
p
v













00
0
0010
0
0
/ 01




(2.9)
2.2. 氣動力參數估算
雖然當今的電子零件，已走向微小化，但由於迷你無人飛行器載重有限，
因此我們考量重量與零件尺寸的限制，設計一 40 公分級微飛行器作為進行導航
系統在嵌入式控制器之研究載具實現平台，基本外型為翼展 40 公分、後掠角 30
度，如圖 2.2 所示，飛行器任務目標：設計可偵查自主飛行，且具有嵌入式導航
系統控制的微飛行器，如表 2.1，根據經驗公式、飛行任務所需零件之位置配置，
估算出基本構形之物性資料，如表 2.2 所列，翼型我們選擇的是 Göettingen 329
翼型[19]，因 G329 翼型在低雷諾數時，比較穩定，但由於此飛行器翼展為 40
公分，在高速飛行下，渦流由翼面下方翻至翼面上方，力量很大，所以再升阻
比上應該有更好的曲線，再加上本研究室實際研製經驗及風洞實驗，而選擇之。
15
依據經驗公式，與本實驗室發展之模型[16、18、20]，估算出縱向與橫向氣
動力參數，如表2.3，因迷你無人飛行載具的飛行速度低，尺寸小，Re很低，所
以在表2.4中可看出氣動力參數較 LC 一般大飛機小許多，且飛機基本性能的縱向
橫向均屬於穩定型態。
表 2.4 MAV40 基本構形氣動力參數(V=14m/s)
LC DC LC  DC  LC  LqC
0.327 0.029 2.9408 0.3395 0.2395 0.8401
mC  mC  mqC eLC  emC 
縱
向
-0.1684 -0.1918 -0.6772 0.14 -0.1121
yC  lC  nC  lpC npC lrC
-0.7717 -0.205 0.2618 -0.1324 -0.0295 0.0749
nrC alC anC  ayC  rlC rnC 
橫
向
-0.2653 -0.233 0.0196 0 0 0
2.3. 配平與模擬驗證
由前一章計算完之氣動力數據後，再由經驗公式以及實驗室發展的模型，計
算飛行配平條件(Trim Condition)後，分別在速度為14(m/s)、速度為12(m/s)以及
速度為10(m/s)配平（如圖2.2、圖2.6、圖2.10）、得到配平攻角 _ 14 1.6586trim v  
(deg)、 _ 14 4.213trim v   (deg) 、 _ 14 8.1355trim v   (deg)。
再以個別速度進行縱、橫向線性非時變與非線性系統動態模擬如圖(2.4、
2.5、2.8、2.9、2.12、2.13)，實線為非線性(Nonlinear)系統，點虛線為一般傳統
之線性非時變(cLTI, Conventional Linear-Time-Invariant)系統，而虛線實驗室建立
之mini-UAV的LTI系統(mLTI, Modified Linear-Time-Invariant)。
在縱向方面，打水平尾翼向下打 5.7296(deg)的單對正弦波 (Sinusoidal
Doublet)，副翼不動，由圖(2.3、2.7、2.11)可看到縱向短週期運動，在舵面打了
零點五秒後，無人載具的速度愈大，短週期頻率愈高，而在長週期(Phugoid)運
動如圖(2.3、2.7、2.11)時，則相反，速度愈小，頻率愈低，阻尼比也愈小，分析
17
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
12.5
13
13.5
14
14.5
15
Time (sec)
V
el
oc
ity
u
(m
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
-1
-0.5
0
0.5
1
Time (sec)
V
ar
ia
tio
n
of
V
el
oc
ity
dw
(m
/s
ec
) cLTI
mLTI
Nonlinear
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
-1
-0.5
0
0.5
1
Time (sec)
P
itc
h
R
at
e
(d
eg
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
-1
-0.5
0
0.5
1
Time (sec)
V
ar
ia
tio
n
of
T
he
ta
(d
eg
)
cLTI
mLTI
Nonlinear
圖2.3 速度 14m/s，縱向線性與非線性配平比較
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
13.8
13.85
13.9
13.95
14
14.05
Time (sec)
V
el
oc
ity
u
(m
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
-1
-0.5
0
0.5
1
Time (sec)
V
ar
ia
tio
n
of
V
el
oc
ity
dw
(m
/s
ec
) cLTI
mLTI
Nonlinear
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
-60
-40
-20
0
20
40
60
Time (sec)
P
itc
h
R
at
e
(d
eg
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
-4
-2
0
2
4
6
Time (sec)
V
ar
ia
tio
n
of
T
he
ta
(d
eg
)
cLTI
mLTI
Nonlinear
圖2.4 速度 14m/s，縱向線性與非線性動態模擬短週期響應比較
19
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
11.9676
11.9676
11.9676
11.9676
11.9676
11.9676
11.9676
11.9676
Time (sec)
V
el
oc
ity
u
(m
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
-1.5
-1
-0.5
0
0.5
1
1.5
x 10
-10
Time (sec)
V
ar
ia
tio
n
of
V
el
oc
ity
dw
(m
/s
ec
) cLTI
mLTI
Nonlinear
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
-1
-0.5
0
0.5
1
1.5
x 10
-8
Time (sec)
P
itc
h
R
at
e
(d
eg
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
-4
-2
0
2
4
6
x 10
-10
Time (sec)
V
ar
ia
tio
n
of
T
he
ta
(d
eg
)
cLTI
mLTI
Nonlinear
圖2.7 速度 12m/s，縱向線性與非線性配平比較
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
11.75
11.8
11.85
11.9
11.95
12
12.05
12.1
Time (sec)
V
el
oc
ity
u
(m
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
-1
-0.5
0
0.5
1
Time (sec)
V
ar
ia
tio
n
of
V
el
oc
ity
dw
(m
/s
ec
) cLTI
mLTI
Nonlinear
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
-60
-40
-20
0
20
40
Time (sec)
P
itc
h
R
at
e
(d
eg
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
-4
-2
0
2
4
6
Time (sec)
V
ar
ia
tio
n
of
T
he
ta
(d
eg
)
cLTI
mLTI
Nonlinear
圖2.8 速度 12m/s，縱向線性與非線性動態模擬短週期響應比較
21
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
9.8994
9.8994
9.8994
9.8994
9.8994
9.8994
9.8994
Time (sec)
V
el
oc
ity
u
(m
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
-3
-2
-1
0
1
2
3
x 10
-10
Time (sec)
V
ar
ia
tio
n
of
V
el
oc
ity
dw
(m
/s
ec
) cLTI
mLTI
Nonlinear
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
-2
-1
0
1
2
3
x 10
-8
Time (sec)
P
itc
h
R
at
e
(d
eg
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5
-1
-0.5
0
0.5
1
1.5
x 10
-9
Time (sec)
V
ar
ia
tio
n
of
T
he
ta
(d
eg
)
cLTI
mLTI
Nonlinear
圖2.11 速度 10m/s，縱向線性與非線性配平比較
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
9.7
9.75
9.8
9.85
9.9
9.95
10
10.05
Time (sec)
V
el
oc
ity
u
(m
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
-0.8
-0.6
-0.4
-0.2
0
0.2
0.4
0.6
Time (sec)
V
ar
ia
tio
n
of
V
el
oc
ity
dw
(m
/s
ec
) cLTI
mLTI
Nonlinear
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
-60
-40
-20
0
20
40
Time (sec)
P
itc
h
R
at
e
(d
eg
/s
ec
)
cLTI
mLTI
Nonlinear
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
-4
-2
0
2
4
6
Time (sec)
V
ar
ia
tio
n
of
T
he
ta
(d
eg
)
cLTI
mLTI
Nonlinear
圖2.12 速度 10m/s，縱向線性與非線性動態模擬短週期響應比較
23
3. 導航系統架構建立
本研究所發展的系統為迷你無人飛行載具的嵌入式導航系統，藉由串列傳
輸方式以及類比/數位傳輸功能，將全球衛星定位系統接收器(GPS Receive
Module)以及感測器輸出值，讀入嵌入式系統內，在經過導航控制迴路，輸出至
無人飛行載具的控制面上，執行飛行任務。
本系統建構裝置有全球衛星定位系統接收器(GPS Receive Module)、GPS 天
線、嵌入式系統、感測器系統（加速度計、空速計、高度計和陀螺儀）、資料存
取裝置、遙控器、接收機、伺服馬達、電池及迷你無人飛行載具(MAV40)所構成，
圖 3.1 為整體系統架構圖。
圖3.1 系統架構圖
GPS 接收器模組
導航系統
GPS 天線
RS232轉換傳送
飛控系統
控制舵面角度
載具航高、航向控制面
感測系統飛行員操縱訊號
25
圖3.3 嵌入式系統設計圖
本團隊研發之嵌入式系統內，有兩個控制晶片(PIC 18F452)在分別運作，分
別為飛控系統晶片(Flight Control Chip, 縮寫 FCC)與導航系統晶片(Guidance and
Navigation Chip, 縮寫 GNC)，並藉由 I2C 來互相傳送資料，由導航系統晶片來
存取相關資料，計算目標點與實際距離所需控制面之角度，程式流程如圖 3.4。
PWM
GNC
(PIC18F452)
Rate Gyro X
Rate Gyro Y
Rate Gyro Z
Accelerometer X
Accelerometer Y
Accelerometer Z
Airspeed Sensor
Amplifer
And
Filter
ADC
ADC
GPS Receiver RS232 Micro-SD
Fly Control
Transmitter
Receiver
I
2
C
RS232
RC Servo 1
RC Servo 2
RC Servo 3
RC Servo 4
PWM
FCC
(PIC18F452)
27
3.2. 載具元件裝置
3.2.1.遙控器
我們採用 Futaba 出產，型號為 T9CHP 九個頻道遙控器， 傳輸模式有
PCM1024 與 FM/PPM，在我們嵌入式系統內設計上，使用到五個頻道，CH1~4
分別為操控副翼、升降舵、推力、方向舵、及 CH5 設定導航模式。
3.2.2.伺服器
由於這次製作的 MAV 翼展只有 40cm，因此負載較輕，且需使用到三顆伺
服器，所以選擇 GWS PICO 這顆伺服器，相較於其他伺服器做比較， GWS PICO
這顆伺服器重量較輕，扭力 10 oz-in，在反應速度方面 0.12 sec/60º，因此採用
GWS PICO 這顆伺服器作為搭配此飛行器。
3.2.3.接收器
ㄧ般市售的接收器中，品牌很多，在這次系統設計中，頻道方面只使用到
五個頻道，因此選用六個頻道數的 Futaba PCM 146ip 為接收機。
3.2.4.動力系統
馬達：在馬達的選擇中我們選擇推力較大的 Scorpion 2205-40，但在重量上
較諾肯 300XT 型較重，由於此飛機的翼展只有 40cm，需要較大的推力，因而選
擇此馬達。
螺旋槳：搭配馬達上使用，使馬達能達到最大的推力，因此採用
GWS/EP8040，尺寸為 75×5 槳。
電池方面：在載重的考量下，選用高分子鋰電池，型號 ST850，電壓輸出值
為 11.1V，最大瞬間電流量供應 12.5A。
29
表 3.2 數位感測器元件
GPS接收機
型號 長天 GR 211
工作電壓 4.5V~5.5V
追蹤衛星數 12個
資料更新速度 1 Hz
消耗電流 <80mA
最大高度 18000米
最大速度 515米/秒
重量 35g
圖
3.2.6.資料存取裝置
在資料存取器上，採用具備 RS232/I2C/SPI 通訊功能之存取晶片模組，存取
於 micro SD 卡上，以方便電腦讀取飛航資料，尺寸大小為 1" ×1.4"，重量約為
6g。
3.3. 載具平台裝配
由本實驗室設計之微飛行器之構型建構成 MAV40，經精心設計與改造後，
將機身擴寬至 9 cm，並裝置上蓋，將嵌入式系統等配備裝置於機身內部，載具
各配置重要單元如表 3.3 和圖 3.5。
31
4. 估算方式
在感測器的量測中，由於外界大氣的干擾很大，有陣風的干擾以及氣流的
擾動，或是電訊的干擾等不定因素，都會造成感測器訊號上的變化，而這些雜
訊必需要經過濾波後，才能知道載具原本的動作，而在導航過程中，所受到的
干擾很大，因此一般來說，最常使用到的學理有最小平方法(Least Squares Method)
和卡爾曼濾波器(Kalman Filter)，以及四元素法(Quaternions)來濾除雜訊干擾
[21]，並且估算出飛機姿態角，讓載具機體穩定，足以應付下一秒的動作行為。
4.1. 最小平方法
4.1.1.公式推導
最小平方法(Least Squares Method)是一種數學最佳化，透過最小誤差平方合
來找到最佳匹配函數(Match Function)。
系統方程式為：
1 0 0 0 0 0
0 1 0 0 0 0
0 0 1 0 0 0
( ) H( )
0 0 0 1 0 0
0 0 0 0 1 0
0 0 0 0 0 1
x
y
z
x
y
z
G
G
G
y t v t x v
A
A
A
  
  
  
  
     
  
  
  
   
    (4.1)
y 是感測器之量測訊號，H(t)為觀測矩陣，x 是訊號向量，v外界干擾之雜訊。
在量測訊號 x 內有一雜訊 x：
( ) H( , )xy t x t v     (4.2)
33
當加權矩陣為單位矩陣時：
1
ˆ H ( )H( ) H ( ) ( )T Tx t t t y t
    (4.9)
因我們在量測時為連續輸出，一秒取約兩筆的數據值，因此我們採用遞迴
的方式，來估算量測值。
設定時間為 t k t 時之新量測量為：
( 1) ( 1) ( 1)Ty k h k x v k       (4.10)
令
( 1)
( 1)
( )
y k
y k
y k
   
 

、 ( 1)H( 1)
H( )
Th k
k
k
   
 
、
( 1)
( 1)
( )
v k
V k
v k
    


，則擴建模式為：
( 1) H ( 1) ( 1)Ty k k x V k     (4.11)
令新的加權矩陣 W(t+1)由 4.8 式可知道新的估算值：
1
(ˆ 1) H ( 1) ( 1)H( 1) H ( 1) ( 1) ( 1)T Tx k k k k k k y k
         W W (4.12)
設   
1 0
( 1)
0
k
k
k
   
 
w
W
w
，以及
1
( ) H ( ) ( )H( )TP k k k k
  W 與
1
( 1) H ( 1) ( 1)H( 1)TP k k k k
      W 並且展開：
1 1( 1) ( ) ( 1) ( 1) ( 1)TP k P k h k k h k      w (4.13)
35
0 10 20 30 40 50 60
300
350
400
450
500
550
600
650
700
time
ou
tp
ut
Ax量測值
Ay量測值
Az量測值
Gx量測值
Gy量測值
Gz量測值
Ax估測值
Ay估測值
Az估測值
Gx估測值
Gy估測值
Gz估測值
圖4.1 遞迴式最小平方法驗證圖
平均值如表 4.1
表 4.1 平均值
Ax Ay Az Gx Gy Gz
539 523 651 309 311 325
協方差矩陣如表 4.2
表 4.2 誤差協方差
Ax Ay Az Gx Gy Gz
Ax 26.5204 -1.897 -0.0379 0.7399 0.3582 -0.4295
Ay -1.897 2.5577 -0.2105 0.7487 0.4377 -0.3489
Az -0.0379 -0.2105 1.4781 0.1375 0.0682 -0.1597
Gx 0.7399 0.7487 0.1375 10.6335 5.5594 -4.5224
Gy 0.3582 0.4377 0.0682 5.5594 3.2766 -2.5316
Gz -0.4295 -0.3489 -0.1597 -4.5224 -2.5316 2.654
37
令 ˆ( 1| ) cov( ( 1) ( 1| ))xP k k x k x k k     以及
ˆ( 1| 1) cov( ( 1) ( 1| 1))xP k k x k x k k       ，再由前面最小平方法求得
 ˆ ˆ ˆ( 1| 1) ( 1| ) ( 1) ( 1) ( 1| )x k k x k k K k y k y k k         (4.19)
將(4.19)、(4.16)、(4.17)帶入到 ( 1| 1)xP k k  化簡整理後：
 ( 1| 1) ( 1)H( 1) ( 1| )x xP k k I K k k P k k       (4.20)
其中   1( 1) H( 1) ( 1| ) H( 1) ( 1| )H ( 1) ( 1)T Tx xK k k P k k k P k k k R k           與
 ( ) ( ) ( )TE v k v k R k  。
4.2.2.實際量測驗證
測試方式：使用 PIC 晶片讀入陀螺儀數據以及加速度計之數值，並採用卡
曼濾波器，用 Matlab 以及 PIC 晶片將數值求出估測值。
測試結果：可看到原先位置為原點時，估測值會走到實際值的位置，估算
出實際位置，如圖 4.3。
0 10 20 30 40 50 60
0
50
100
150
200
250
300
350
time
ou
tp
ut
Gx量測值
Gx估測值
圖4.3 卡爾曼濾波器Gx軸模擬圖
39
一般化的狀態回授圖可繪為：
圖4.4 卡爾曼濾波器狀態迴授圖
則可得各方向之推估式：

2
2
ˆ ˆ0 1 0 0 0
2 0 0ˆ ˆ 1
ˆ u
ˆ 00 0 0 1ˆ
10 0 2 ˆˆ
1 0 0 0
0 1 0 0
0 0 1 0
0 0 0 1
0 0 0
ph ph
DR DR
n n
pq
n n
q
q
ppq
p
q q
x k
pp
v
v
q
vy
v
pg
U
 
 

 


                       
 
         








p
q
p
p
v
K
K
KK
K
K


 
 
 
 
 
 
  
 
 
 
 
 
 
  

(4.24)
-
+
B ∫ C
A
u
B ∫ C
A
yˆ
K
+
+
+
+
+
yx
 x
x x
41
0 1000 2000 3000 4000 5000 6000 7000 8000 9000 10000
-0.2
-0.15
-0.1
-0.05
0
0.05
0.1
Time (sec)
es
tim
at
e
(r
ad
)
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
p
es
tim
at
e
(r
ad
/s
)
estimate
p estimate
圖4.6 卡爾曼濾波器俯仰模擬圖
θ
θ
43
圖5.1 高度保持方塊流程圖
5.1.2.速度保持
在速度保持上是非常重要的，由於 MAV40 是迷你型飛行器，在不同速度
下，特性都不一樣，因此使用空速計來量測載具對氣流的相對速度，經計算過
後，將速度維持在 12 m/s 左右，改變推力大小來控制速度，速度保持方塊流程
如圖 5.2[22]。
圖5.2 速度保持方塊圖
5.1.3.姿態保持
天空上與地面大不相同，在空中有很多不同方向的風，要保持載具平直往
前，必須常常做載具修正，而人為的操作反應速度很往往跟不上變化，因此藉
由陀螺儀做迴授，以 35 Hz 的速度來做姿態修正，來保持載具姿態穩定性，姿態
保持方塊流程如圖 5.3[22]。
目前
高度
－
＋
陀螺儀增益值
升降舵
伺服器
飛控系統修正前高度
MAV
動態
θ
加速儀增益值
q
＋
參考速度
－
速度計增益值
三相無刷
伺服馬達
飛控系統 目前速度
MAV
動態
45
將變化值傳送至 FCC 控制載具控制面，來改變載具航行方向。
圖5.5 點對點導航預計圖
5.2.3.盤旋
當載具到達目標區後，或是載具返航到達回收點，因載具在降落時，如自
動降落，通常失事率是很高的，像是一般客機一樣，在降落時，需要許多儀器
的補助，以及人為的操作，因此降落是很高難度的，為了確保載具平安的降落，
因此在到達回收點後，須在天空中盤旋，再由飛行員手動降落，視為最能保證
載具平安降落，而在目標區到達後，因需偵查目標，以盤旋方式為最好拍攝畫
面，本研究使用Hopf bifurcation方程式來設計導航運算法則，方程式為(5.1)~(5.5)
[23]，其中 k kx y、 為飛機位置變化， t tx、y 為盤旋中心位置， r 為盤旋半徑，概念如
圖 5.6。
c k tx x x  (5.1)
c k ty y y  (5.2)
 2 2 21 2
1
c
c c c
xdx
y r x y
dt r
    (5.3)
 2 2 21 2
1
c
c c c
ydy
x r x y
dt r
    (5.4)
航行角
目標區域
起始點
正北
47
圖5.7 盤旋導航方式模擬圖
在圖 5.8 可看出每個方向之向量場變化，每個向量都是往圓的收斂。
-2 -1.5 -1 -0.5 0 0.5 1 1.5 2
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
longitude
la
tit
ud
e
圖5.8 盤旋向量圖
5.2.4.自動歸航
由於 MAV40 的載具不大，因此在天空中，如飛太高或太遠，幾乎看不到載
具在哪，因此，為了確保載具平安與回收性，在載具飛離開發射機訊號範圍後，
因收不到發射訊號，而會自動返航，飛向回收點。
5.2.5.高度追蹤
在進入導航系統中，高度的穩定是重要的一項，由於載具在轉彎，遇到外
界干擾，都會造成飛機的高度變化，而在追航向時，若高度變化大，會使飛機
的攻角大，造成無法轉彎的情形，本論文採用 GPS 一秒回授一次，來獲得高度
值，並將高度範圍設置在目標高度上下 25 公尺內，採用卡爾曼濾波器的姿態角
估測，並以升降舵來修正高度，來達到高度保持平飛的狀態，狀態流程圖 5.9。
49
因此如果 0hT  則 0eh  當 t，此方程式可保證高度差會收斂。將(5.6)式
代入(5.7)式中得(5.8)式
 1 0e r
h
h h h
T
    (5.8)
如此便可定義高度變化指令為(5.9)式，且可消除高度差。
r
CMD
h
h h
h
T
 (5.9)
由圖 5.10 可看出在 GPS 高度低於 10.8 公尺時，可看到卡爾曼率波器所估測之高
度，可看出有 GPS 回授後，幾乎可以穩定再前一秒高度附近，不會突然變化很
大，120 秒到 160 秒是由於手動搖晃飛機產生之姿態角，而造成估算高度快速變
化，虛線為 Matlab 程式計算值，點虛線為嵌入式系統實際計算值。
20 40 60 80 100 120 140 160
2
4
6
8
10
12
14
16
18
20
time(sec)
h(
m
)
hd matlab
hd pic
hd
圖5.10 高度追蹤模擬圖
高
度
差
hd
51
121.2658 121.2658 121.2658 121.2658 121.2658 121.2659 121.2659 121.2659 121.2659 121.2659 121.266
24.8745
24.8746
24.8747
24.8748
24.8749
24.875
24.8751
longitude (0.001 deg = 102m)
La
tit
ud
e
(0
.0
01
de
g
=
11
1m
)
圖6.1 地面載具行經路線平面圖
國防大學理工學院橄欖球場
起始區域
目標區域
53
120 140 160 180 200 220 240 260 280 300 320
0
20
40
60
80
100
Time (sec)
m
od
e
sp
ee
d G
PS
(m
/s
)
GPS speed
Pitot tube speed
圖6.4 飛行速度圖 圖6.5 副翼控制面角度圖
圖6.6 水平尾翼控制面角度圖 圖6.7 馬達控制輸出百分比圖
120 140 160 180 200 220 240 260 280 300 320
-3
-2
-1
0
1
2
3
Time (sec)
gx
(d
eg
/s
)
120 140 160 180 200 220 240 260 280 300 320
-3
-2
-1
0
1
2
3
Time (sec)
gy
(d
eg
/s
)
圖6.8 X軸方向之陀螺儀輸出圖 圖6.9 Y軸方向之陀螺儀輸出圖
δa
(deg)
120 140 160 180 200 220 240 260 280 300 320
-25
-20
-15
-10
-5
0
5
10
15
20
25
Time (sec)
PIC command
120 140 160 180 200 220 240 260 280 300 320
-25
-20
-15
-10
-5
0
5
10
15
20
25
Time (sec)
δe
(deg)
pilot command
PIC command
10
120 140 160 180 200 220 240 260 280 300 320
0
20
30
40
50
60
70
80
90
100
Time (sec)
δt
(%)
pilot command
PIC command
pilot command
55
6.3. 飛行載具實際飛行數據(TT-Cub)
測試時間：民國 98 年 4 月 30 日
測試地點：桃園國防大學理工學院（橄欖球場）
天氣：晴，風速 7 m/s 最大陣風
測試科目：速度保持、姿態保持
測試方式：待 GPS 定位後，在飛行員操控模式下，讓載具順利起飛，而後
切入飛控模式，飛機穩定後，切入導航模式，由 micro_SD 紀錄貯存飛行資料。
測試結果：資料紀錄正常， GPS 接收正常，由圖 6.18 可以看出速度均維持
在飛行員超控附近，且此次飛行姿態保持良好，在 319 秒到 482 秒時，由飛行
員手動配平飛行，在 482 秒到 595 秒時，加入飛行控制器，來幫助飛行員穩定
飛機，此時可看到圖 6.15-6.17 中，實線為加入控制器回授之飛行情形，可看出
推力輸入狀況之變化，而速度保持之情形在圖 6.14 可看出其效果，由於最大陣
風相當大，而飛行器速度在 10m/s 左右，因此也造成速度之數據散佈偏大的現
象，在 595 秒之後為卡爾曼濾波器回授控制，更加的穩定飛機飛行，且已可由
生手進行操控，此時圖 6.15-6.17 中，回授量之大小大為增加，由於風速高，所
以穩定飛機之回授控制量較大，飛航路線如圖 6.24。
400 500 600 700 800 900 1000 1100
0
50
100
150
200
250
300
350
 G
PS
(d
eg
)
Time (sec)
GPS course
400 500 600 700 800 900 1000 1100
220
230
240
250
260
270
280
290
Time (sec)
h,
h G
PS
,(
m
)
GPS elevation
圖6.12 飛行航向圖 圖6.13 飛行高度圖
57
400 500 600 700 800 900 1000 1100
-1.5
-1
-0.5
0
0.5
1
1.5
Time (sec)
A
z(
g)
400 500 600 700 800 900 1000 1100
-3
-2
-1
0
1
2
3
Time (sec)
gx
(d
eg
/s
)
圖6.20 Z軸方向之陀螺儀輸出圖 圖6.21 X軸方向之陀螺儀輸出圖
400 500 600 700 800 900 1000 1100
-3
-2
-1
0
1
2
3
Time (sec)
gy
(d
eg
/s
)
400 500 600 700 800 900 1000 1100
-3
-2
-1
0
1
2
3
Time (sec)
gz
(d
eg
/s
)
圖6.22 Y軸方向之陀螺儀輸出圖 圖6.23 Z軸方向之陀螺儀輸出圖
59
6.4. 飛行載具實際飛行數據(TT-Cub)
測試時間：民國 98 年 5 月 5 日
測試地點：桃園國防大學理工學院（橄欖球場）
天氣：晴，風速 7.6 m/s 最大陣風
測試科目：高度追蹤
測試方式：待 GPS 定位後，在飛行員操控模式下，讓載具順利起飛，而後
切入飛控模式，飛機穩定後，切入導航模式，由 micro_SD 紀錄貯存飛行資料。
測試結果：資料紀錄正常， GPS 接收正常，此次飛行姿態保持良好，在 140
秒到 240 秒時，由飛行員手動配平飛行，在 240 秒到 294 秒時，加入飛行控制
器，來幫助飛行員穩定飛機，此時可看到圖 6.28-6.30 中，實線為加上控制器回
授之飛行狀態，在風速 7.6 m/s 時，還可以穩定飛機，在 294 秒之後為卡爾曼濾
波器回授控制，更加的穩定飛機飛行，且已可由初學飛行員進行操控，由圖 6.26
可以看出此時之高度均維持在 300 公尺附近，飛航軌跡如圖 6.37。
150 200 250 300 350 400 450 500 550
0
50
100
150
200
250
300
350
 G
PS
(d
eg
)
Time (sec)
GPS course
150 200 250 300 350 400 450 500 550
220
230
240
250
260
270
280
290
300
310
320
330
Time (sec)
h,
h G
PS
,(
m
)
GPS elevation
圖6.25 飛行航向圖 圖6.26 飛行高度圖
61
150 200 250 300 350 400 450 500 550
-1.5
-1
-0.5
0
0.5
1
1.5
Time (sec)
A
z(
g)
150 200 250 300 350 400 450 500 550
-3
-2
-1
0
1
2
3
Time (sec)
gx
(d
eg
/s
)
圖6.33 Z軸方向之陀螺儀輸出圖 圖6.34 X軸方向之陀螺儀輸出圖
150 200 250 300 350 400 450 500 550
-3
-2
-1
0
1
2
3
Time (sec)
gy
(d
eg
/s
)
150 200 250 300 350 400 450 500 550
-3
-2
-1
0
1
2
3
Time (sec)
gz
(d
eg
/s
)
圖6.35 Y軸方向之陀螺儀輸出圖 圖6.36 Z軸方向之陀螺儀輸出圖
63
6.5. 飛行載具實際飛行數據(TT-Cub)
測試時間：民國 98 年 5 月 7 日
測試地點：桃園國防大學理工學院（橄欖球場）
天氣：晴，風速 1.6 m/s 最大陣風
測試科目：高度保持、航向追蹤
測試方式：待 GPS 定位後，在飛行員操控模式下，讓載具順利起飛，而後
切入飛控模式，飛機穩定後，切入導航模式，由 micro_SD 紀錄貯存飛行資料。
測試結果：資料紀錄正常， GPS 接收正常，此次飛行姿態保持良好，在 180
秒到 235 秒時，由飛行員手動配平飛行，在 235 秒到 316 秒時，加入飛行控制
器，來幫助飛行員穩定飛機，此時可看到圖 6.41-6.43 中，實線以加上控制器回
授，在風速 1.6 m/s 時，飛機飛行良好，在 316 秒之後為卡爾曼濾波器回授控制，
飛機飛行更加穩定的飛行，且已可由生手進行操控，由圖 6.39 可以看出此時之
高度均維持在 300 公尺附近，且在圖 6.42 可看到在高度保持中，虛線部份飛行
員幾乎沒有做任何高度修正值，此次高度穩定相當良好，由 6.38 可看出在 500
秒附近追往 50°方向，在 550 秒附近追往 230°方向，往返交替，飛航軌跡如圖
6.50。
200 300 400 500 600 700 800
0
50
100
150
200
250
300
350
 G
PS
(d
eg
)
Time (sec)
GPS course
200 300 400 500 600 700 800
220
230
240
250
260
270
280
290
300
310
320
330
Time (sec)
h,
h G
PS
,(
m
)
GPS elevation
圖6.38 飛行航向圖 圖6.39 飛行高度圖
65
200 300 400 500 600 700 800
-1.5
-1
-0.5
0
0.5
1
1.5
Time (sec)
A
z(
g)
200 300 400 500 600 700 800
-3
-2
-1
0
1
2
3
Time (sec)
gx
(d
eg
/s
)
圖6.46 Z軸方向之陀螺儀輸出圖 圖6.47 X軸方向之陀螺儀輸出圖
200 300 400 500 600 700 800
-3
-2
-1
0
1
2
3
Time (sec)
gy
(d
eg
/s
)
200 300 400 500 600 700 800
-3
-2
-1
0
1
2
3
Time (sec)
gz
(d
eg
/s
)
圖6.48 Y軸方向之陀螺儀輸出圖 圖6.49 Z軸方向之陀螺儀輸出圖
67
6.6. 飛行載具實際飛行數據(TT-Cub)
測試時間：民國 98 年 5 月 8 日
測試地點：桃園國防大學理工學院（橄欖球場）
天氣：晴，風速 1 m/s 最大陣風
測試科目：盤旋
測試方式：待 GPS 定位後，在飛行員操控模式下，讓載具順利起飛，而後
切入飛控模式，飛機穩定後，切入導航模式，由 micro_SD 紀錄貯存飛行資料。
測試結果：資料紀錄正常， GPS 接收正常，此次飛行姿態保持良好，在 200
秒到 281 秒時，由飛行員手動配平飛行，在 235 秒到 345 秒時，加入飛行控制
器，來幫助飛行員穩定飛機，此時可看到圖 6.54-6.56 中，實線為以加入控制器
回授，飛機飛行相當穩定飛機，在 345 秒之後為卡爾曼濾波器回授控制，由圖
6.52 可以看出此時之高度均維持在 300 公尺附近，且由圖 6.55 中可看到飛行員
再進入高度保持後，幾乎沒有做任何修定，但在盤旋部分，由於盤旋增益值過
小，以一開始的盤旋由軌跡可看出半徑很大，飛航軌跡如圖 6.63。
200 300 400 500 600 700 800 900
0
50
100
150
200
250
300
350
 G
PS
(d
eg
)
Time (sec)
GPS course
200 300 400 500 600 700 800 900
220
240
260
280
300
320
340
Time (sec)
h,
h G
PS
,(
m
)
GPS elevation
圖6.51 飛行航向圖 圖6.52 飛行高度圖
69
200 300 400 500 600 700 800 900
-1.5
-1
-0.5
0
0.5
1
1.5
Time (sec)
A
z(
g)
200 300 400 500 600 700 800 900
-3
-2
-1
0
1
2
3
Time (sec)
gx
(d
eg
/s
)
圖6.59 Z軸方向之陀螺儀輸出圖 圖6.60 X軸方向之陀螺儀輸出圖
200 300 400 500 600 700 800 900
-3
-2
-1
0
1
2
3
Time (sec)
gy
(d
eg
/s
)
200 300 400 500 600 700 800 900
-3
-2
-1
0
1
2
3
Time (sec)
gz
(d
eg
/s
)
圖6.61 Y軸方向之陀螺儀輸出圖 圖6.62 Z軸方向之陀螺儀輸出圖
71
6.7. 飛行載具實際飛行數據(MAV50)
在完成導航系統設計、製作、程式燒入與地面系統測試後，即進行實機飛
行測試，依序執行水平維持、高度追蹤與航向追蹤等三種導航操控模式，最後
三項模式合併測試，並比較二種導航増益值(Gain)調變之測試效果，經實測資料
顯示本研究之 MAV50 導航系統已可有效運作，並成功擷取飛航數據資料。由於
先前模擬顯示 MAV50 橫航向穩定性不佳，因此使用姿態儀穩定功能。首先，執
行點對點導航飛行，本次飛行航向增益設定為 0.0417，在飛行員於 140 秒時切
入導航模式(Mode 2)，由於航向增量限制器的關係，使最大的修正量亦無法使原
本就有稍往左飛的配平點修正回來，導致未朝目標點方向前進，所以於 170 秒
切入手控模式將飛機降落。導航飛行測試結果各參數如圖 6.64 所示。
50 100 150 200
-1
0
1
2
3
m
od
e
0 50 100 150 200 250
0
5
10
15
20
sp
ee
d G
PS
(m
/s
)
50 100 150 200
-20
-10
0
10
20
Time (sec)
d_
e
(d
eg
)
0 50 100 150 200 250
200
250
300
350
h,
h G
PS
,
h U
S
(m
)
0 50 100 150 200 250
-6
-4
-2
0
2
4
h 
G
PS
(m
/s
)
50 100 150 200
0
20
40
60
80
100
d_
t
(%
)
Time (sec)
50 100 150 200
-20
-10
0
10
20
d_
a
(d
eg
)
50 100 150 200
-30
-20
-10
0
10
20
30
d_
r,
d_
w
(d
eg
)
Time (sec)
50 100 150 200
-200
0
200
 G
PS
(d
eg
)
圖 6.64 MAV50 第一次導航飛行資料總圖(Gain=0.0417)
73
121.265 121.2655 121.266 121.2665 121.267 121.2675 121.268
24.8735
24.874
24.8745
24.875
24.8755
24.876
Longitude (0.001 deg = 102m)
La
tit
ud
e
(0
.0
01
de
g
=
11
1m
)
圖 6.66 MAV50 第二次導航飛行平面飛行軌跡
6.9. 飛行載具實際飛行數據(MAV40)
測試時間：民國 97 年 10 月 17 日
測試地點：桃園國防大學理工學院（橄欖球場）
天氣：晴，風速 0~0.5 m/s 東風
測試科目：手動飛行
測試方式：待 GPS 定位後，在飛行員操控模式下，讓載具順利起飛，由
micro_SD 紀錄貯存飛行資料。
測試結果：資料紀錄正常， GPS 接收正常，在航速部分僅有幾筆 GPS 數據
跳動，但不影響飛試結果，數據如圖 6.67-圖 6.75，在 195 秒以後進入飛控模式，
此實驗只採用陀螺儀回授，飛行軌跡如圖 7.76。
75
50 100 150 200 250 300
-3
-2
-1
0
1
2
3
Time (sec)
gx
(d
eg
/s
)
50 100 150 200 250 300
-3
-2
-1
0
1
2
3
Time (sec)
gy
(d
eg
/s
)
圖6.73 X軸方向之陀螺儀輸出圖 圖6.74 Y軸方向之陀螺儀輸出圖
50 100 150 200 250 300
-3
-2
-1
0
1
2
3
Time (sec)
gz
(d
eg
/s
)
121.265 121.2655 121.266 121.2665 121.267 121.2675
24.8735
24.874
24.8745
24.875
24.8755
24.876
longitude (0.001 deg = 102m)
La
tit
ud
e
(0
.0
01
de
g
=
11
1m
)
圖6.75 Z軸方向之陀螺儀輸出圖 圖6.76 飛行軌跡平面圖
77
圖6.81 水平尾翼控制面角度圖 圖6.82 馬達控制輸出百分比圖
50 100 150 200 250 300 350 400
-3
-2
-1
0
1
2
3
Time (sec)
gx
(d
eg
/s
)
50 100 150 200 250 300 350 400
-3
-2
-1
0
1
2
3
Time (sec)
gy
(d
eg
/s
)
圖6.83 X軸方向之陀螺儀輸出圖 圖6.84 Y軸方向之陀螺儀輸出圖
50 100 150 200 250 300 350 400
-3
-2
-1
0
1
2
3
Time (sec)
gz
(d
eg
/s
)
121.2645 121.265 121.2655 121.266 121.2665
24.8735
24.874
24.8745
24.875
24.8755
24.876
longitude (0.001 deg = 102m)
La
tit
ud
e
(0
.0
01
de
g
=
11
1m
)
圖6.85 Z軸方向之陀螺儀輸出圖 圖6.86 飛行軌跡平面圖
50 100 150 200 250 300 350 400
-25
-20
-15
-10
-5
0
5
10
15
20
25
Time (sec)
δe
(deg)
pilot command
PIC command
50 100 150 200 250 300 350 400
0
10
20
30
40
50
60
70
80
90
100
Time (sec)
δt
(%)
pilot command
PIC command
79
圓圈內，並計算出航向角；點對點導航，經由座標轉換，計算出航向角；盤
旋與導航，皆是採用航向追中方式達成任務，上述之四種模式已在 TT-Cub
的飛行中成功驗證，並完整擷取飛航數據資料，而地面載具，除載具不需要
高度追蹤以外，其餘功能已成功實現。
(5) 在翼展 40 公分之 MAV 中，平穩飛行之部份，已經由實驗成功並有良好之穩
定效果，但為確保載具之安全性，尚無法由生手操控，在經由多次試飛，參
數校調，目前在飛控程式發展部分，已完成姿態保持、高度保持及速度保持，
導航部分已完成高度追蹤，航向追蹤，在盤旋與點對點導航則完成規劃。
針對 MAV40 之未來發展，分別在飛控、導航以及系統上，提出了以下幾點
之改進方法：
(1) 在飛控系統上，以提升飛行穩定之功能，使迷你型載具亦能達成穩定平穩飛
行，增加抗風能力，更可由業餘操控飛機，在用途上更廣，不僅是軍用，民
間用途上，都可保有載具之壽命及任務達成的成功率提高。
(2) 導航系統方面，以多點導航，自動歸航，或與地面基地台結合，隨時更新目
標位置…等，本系統還可以繼續探討的議題。
(3) 在系統方面，以進一步重量之縮減，晶片之運算速度提升，感測器之靈敏度
提高，GPS 之更新率加快，使系統控制反應更為精準，讓翼展較小控制困難
之載具也可裝置具有點對點導航、高度保持、盤旋、多點導航以及自動歸航…
等功能之嵌入式控制器，來達成具困難且重要之飛行任務。
81
[12] 鄭玉祥，“無人飛行載具之航電系統整合”，碩士論文，淡江大學，台北，
2009。
[13] 簡佑旭，“無人飛行載具自主飛行控制之實現”，碩士論文，成功大學，
台南，2004。
[14] 楊閔傑，“小型無人自主飛行載具之嵌入式分散式架構航電系統與地面通
訊基地台之規劃與開發”，碩士論文，元智大學，桃園，2004。
[15] 黃祺欽，“應用 Lead-Lag Compensation 實現小型無人自主飛行載具之縱向
飛行控制系統”，碩士論文，元智大學，桃園，2004。
[16] 曾志浩，“微飛行器導航與導引架構實現之研究”，碩士論文，國防大學中
正理工學院，桃園大溪，2006。
[17] Nelson, R. C., Flight Stability and Automatic Control, 2nd edition, Mc
Graw-Hill, New York, 1998.
[18] 郭智賢、宋齊有、張運生, “Dynamic Modeling and Analysis of a Whole-Wing
Micro Aerial Vehicle,”AIAA Dynamics Specialists Conference, Honolulu,
Hawaii, USA, Paper Number AIAA- 2007- 2238, pp. 23-26, April 2007.
[19] 周台輝，“微飛行器之設計與研製”，碩士論文，國防大學中正理工學院，
桃園大溪，2000。
[20] 古俊傑，“飛行器強健穩定與導航之研究”，碩士論文，國防大學中正理工
學院，桃園大溪，2003。
[21] 莊智清，黃國興，電子導航，全華科技圖書股份有限公司，第二章，2001。
[22] 楊憲東，自動飛行控制原理與實務，全華科技圖書股份有限公司，第二、
三、十章，2000。
[23] Quigley, M., Griffithes, S., and Beard, R. W., “Target Acquisition, Localization,
and Surveillance using a Fixed-Wing Mini-UAV and Gimbaled Camera,”
83
之研究,” 95年度國防科技學術合作計畫成果發表會論文集，pp. A26~A31。
9. 郭智賢、張運生、古俊傑，2006 年 12 月， “微飛行器增強飛行穩定性與導
航導引之研究,” Paper No: 08_14, 2006 AASRC/CACS Aerospace Joint 
Conference, Jungli.
10. Z. Kuo, C. Soong, and Y. Chang, Nov. 2007, “Dynamic Analysis and Trim
Condition Design of a Whole-Wing Micro Air Vehicle,” Paper No. 7-007, The 16th
National Defense Conference, Long-Tan, Tao-Yuan, pp. 1-8.
11. 郭智賢等，2007 年 12 月，“微飛行器(MAV)動態分析與配平條件設計,” 2007
遙控系統技術應用研討會，龍園科學園區，龍潭，桃園，pp. 17-34。
12. 郭智賢、張運生、解雅雯，2008 年 12 月，“具導航導引功能之嵌入式控制
器之微飛行器(MAV)研究(1/3),” Paper No. 08-12, 2008 AASRC 航太學會學術
研討會, 淡水, 台灣, pp. 1-8.
13. Zeal-Sain Kuo and Julio Cesar Alfaro Escobar, Dec. 2008, “System Integrated
and Flight Stability Simulation of Micro Aerial Vehicle,” Paper No. 08-10, 2008
AASRC Annual Conference of Aeronautical and Astronautical Society of the
Republic of China, Dansui, Taiwan, pp. 1-8.
14. 郭智賢等，2008 年 12 月，“40公分級無人微型載具(MAV)之遙控技術,” 2008
遙控系統技術應用研討會，龍園科學園區，龍潭，桃園，pp. 1-22。
15. 李勝義、郭智賢、張博翔、李秉儒、林佑儒，2009 年 11 月，“數位調變架構
應用於微飛行器無線傳輸系統的研究,” Paper No. R208-1-5, The 18th National
Defense Conference, Long-Tan, Tao-Yuan, pp. 1-8.
16. 郭智賢、張運生、解雅雯，2009 年 12 月，“具導航導引功能之嵌入式控制
器之微飛行器(MAV)研究(2/3),” Paper No. S2-4, 2009 AASRC/CACS 航太學會/
民航學會聯合學術研討會, 台北南港, 台灣, pp. 1-8.
國科會補助計畫衍生研發成果推廣資料表
日期 2010年10月18日
國科會補助計畫
研發成果名稱
發明人
(創作人)
技術說明
技術移轉可行性及
預期效益
技術/產品應用範圍
產業別
計畫名稱:
計畫主持人:
計畫編號: 學門領域:
(中文)
(英文)
成果歸屬機構
(中文)
(英文)
具導航導引功能之嵌入式控制器之微飛行器(MAV)研究
郭智賢
96 -2221-E -606 -011 -MY3 航太科技
具導航導引功能之嵌入式控制器之微飛行器
Navigation and guidance system of micro aerial vehicles (MAV) using
embedded micro controller
國防大學 郭智賢
        本研究發展微飛行器導航導引技術之研究，此微飛行器之零組件與酬
載除了包含基本的伺服器、接收機、電池組外，亦包含CCD、GPS模組、A/V發射
機及飛控電腦，首先進行微飛行器氣動力導數建立非線性六自由度動態模式，
然後進行非線性運動系統線性化，再進行PID控制法則、自動駕駛儀設計、以及
強健控制於微飛行器之飛控系統設計，以增強微飛行器之穩定性提升抗干擾能
力，再運用導航理論建立導引飛行器之自動導航功能，進行非線性受控系統之
飛行路徑及飛行動態模擬。
    In this technique development, a nonlinear dynamical model for
six-degree-of-freedom (6 DOF) motion of MAVs was first constructed.
Then, linear time variant and invariant models were derived by
applying small perturbation theory and linearizing around an
equilibrium operating condition. The classical PID controllers,
robust controllers will be applied to the navigation and guidance
system, and this will to improve the flying qualities of the MAV.
其他專業、科學及技術服務業
國防工業
本技術發展之微飛行器在國防上可運用於軍事上沈悶、骯髒和危險的環境，例如：小
區域的偵察、搜索、戰場評估、核生化偵檢、目標指示等等的任務。在非軍事用途上
，MAV可運用於出入綁匪與人質之所在大樓、窄巷、進出有毒污染或輻射污染區域的
偵查。
註：本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
獲得 2009年中華航太年會學生論文獎佳作 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
