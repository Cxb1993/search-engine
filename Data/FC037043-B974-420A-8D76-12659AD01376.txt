2摘要
本計畫為設計一個安全可靠的銀行ATM預防盜領系統。當客戶使用銀行ATM提款機時，
預防盜領系統立刻進行辨識，判定客戶之臉部是否有任何的遮蔽，如果系統辨識結果為有任何
的遮蔽物，則播放警示音效，告知進入人員褪去遮蔽物，同時提醒保全人員注意是否有犯案動
機，並將其影像錄影存檔，關閉提款機禁止提領。我們依據膚色量的比例人臉區塊與人臉輪廓
是否存在，作為判斷人臉是否被遮蔽的三項條件，第一關卡先從人體外形上定位出臉部區域做
膚色量偵測，計算出人臉膚色量比例是否達到標準，作為第一階段的判斷方法﹔第二關卡運用
連通物件法結合膚色區塊，判斷出人臉是否完整﹔第三關卡使用人臉輪廓特徵，運用投影量判
斷出人臉鼻口是否遮蔽，能同時通過三關卡者則判斷為正常無遮蔽人臉;否則為人臉被遮蔽，
警告後仍不脫下遮蔽誤，則判定其有犯案企圖，並關閉ATM提領系統。實驗結果證明我們的
研究確實可以快速正確的判斷人臉是否被遮蔽，並採取必要措施。
關鍵字：特徵辨識，圖形辨認，安全系統。
4一、簡介
1.1 前言
近來詐騙集團猖獗，歹徒往往騙得被害人的提款卡後，到提款機冒領被害人的錢。雖然現
今的提款卡，必須輸入密碼才能提款，但是仍然有不少歹徒經由不當手段取得持卡者的密碼，
再偷取提款卡盜領金錢。而現今的保護措施是在自動提款機上頭架設攝影機，當發生騙案時，
再調出拍攝到的影像來查案。但是就我們時常在新聞中看到的影像，歹徒往往是帶著口罩或安
全帽，因此雖然有拍攝到歹徒的影像，卻因為人臉的特徵被遮蔽住，使得要從影像中判斷出歹
徒的容貌變得十分不易。因此如何避免提款機錢財被冒領，以保障國人的財產安全，是一個非
常值得研究的問題。眾所周知，提款機上都有燈光並有攝影機，一般歹徒冒用他人提款卡提錢
時，都會遮蔽臉部，避免臉被提款機上的攝影機拍攝到。若提款機有一機制：”若臉部無法辨
識就無法領錢”，必然能嚇阻歹徒的企圖，以保障被害人的錢財不被提領。因此我們嘗試設計
一個影像處理軟體，能辨識提款者是否在臉上有遮蔽物，若是辨識出提款者大部分的臉部被遮
蔽了，則提款機的按鍵將被鎖住，提款卡自動被收走、並警鈴大作、錄下歹徒影像，必能嚇阻
歹徒，有效遏止歹徒盜領的企圖。
1.2文獻探討
近年來使用攝影機影像辨識的應用上，有許多的研究及發展，以下將以幾個代表性的文
獻，來加以說明。在人體追蹤部份，文獻 [1] 將兩張連續的影像做相減的動作，取出會移動
物體的範圍，再判斷此移動物體為行人或車輛。文獻 [2] 提出一個使用機率去偵測和追蹤影
像中多個人臉的方法，其中為機率累積，位置、大小及姿態的預測，和兩個人臉影像結合的偵
測。文獻 [3] 的目的為追蹤人體的頭部，主要使用影像的邊緣，並依人體頭部的橢圓形狀中
的最大梯度變化，來求出頭部位置並且追蹤。文獻 [5] 使用了HSV取得初始的區域或物體，
用分割的方式將臉部的區域取出，接著使用模糊歸屬函數的方式，提供物體的形狀、方向、位
置及平均的色調。文獻 [7] 提出了一個階層式的背景相減法，此方法結合了色彩與梯度值的
偵測方法，主要使用於光線不穩定的環境，在光線突然變化的情形下，此方法仍然能夠將正確
的偵測前景物。
在人臉遮蔽方面，文獻[15] 所使用的安全帽辨識方法，為利用安全帽形狀之特徵來作
為分類的依據，使用類神經網路中的倒傳遞演算法來做為辨識的方法。論文 [16]利用了膚色
量的多寡，來判定是否有戴口罩，並加入了紅外線偵測系統，使辨識較不受到人臉膚色的不同
而影響辨識率。
在人臉偵測方面，由於人臉偵測需要某些的特徵，如膚色、形狀、臉部特徵等資訊，文
獻 [4] 用來判斷人臉的區域及移動的位置，首先萃取出人眼及嘴巴後，再利用楕圓形和HSV
色彩座標求出皮膚顏色，以此分類人的臉部去取出其位置。文獻 [6]中使用RGB色彩空間找出
複雜環境中人臉膚色區域。文獻 [8] 是利用正規化的r-g色彩空間及膚色的特徵來偵測人臉。
文獻 [9] 提出主要分量分析(principal component analysis, PCA)，使用較少維度的特徵去描述與
比對人臉。文獻 [10]是評估輸入影像跟“人臉” 與”非人臉” 兩個群集之間的距離來確認
是否為人臉。文獻 [11] 也考慮到膚色在彩度空間的聚集受到訊號強度值的影響，更完善的對
YCbCr 色彩空間做非線性的轉換，將RGB 轉到YCbCr後，在眼睛周圍會有很高的Cb 值和很
低的Cr 值，利用這兩個特性，便可偵測出眼睛的區域。文獻 [12]提出的方法取出複雜環境中
的前景影像，參考文獻 [13] 過濾出人臉膚色區域，藉由前景影像資訊完成影像分割 [14]，最
6圖2.1辨識方法之流程圖
當辨識系統經過三層篩選之後，所得到的結果為有嫌疑之後，本系統會自度啟動警報系
統，首先先將提款按鍵鎖死，並配合語音警示作用，告知提款者將口罩或全罩安全帽之物體取
下，若是提款者在警示機制情況下仍未將遮蔽物取下，本系統就會直接與銀行保全系統連線，
以達到有效嚇阻歹徒犯案的念頭。插入提款卡後，系統將會自動啟動物體偵測系統，擷取影像
並存入電腦中判定影像中的人臉範圍，透過預警監視電腦中的顯示畫面，第一步驟的影像辨識
系統1直到第三步驟的影像辨識系統3，以確認其臉部是否有遮蔽物，若辨識結果為有嫌疑則鎖
住鍵盤暫停其輸入功能，啟動警報系統，對歹徒拍照且通知警察單位。
三、影像前置處理
在人臉遮蔽辨識中，要將前景從在不同環境下的複雜背景中準確的擷取出來，是首先要
解決的問題。對於沒做任何前處理的影像，若直接對其作人臉偵測，勢必遇到兩個問題：1.
人臉的位置無法得知，2.人臉的大小亦無法判別。在這種情形下做人臉偵測，不但耗時且極有
可能因複雜的背景而影響其正確性，因此，在影像前置處理中，如何將人臉從背景中正確分離
出來，將足以影響最後分析結果的成功與否。以本計畫而言，前景即是人體頭部影像，首先在
擷取前景的方式中，最常用的即是背景相減，本計畫利用了前景與背景RGB值差異的變化來
求出主體，當背景相減後使用膚色偵測取出前景影像的膚色部份，當膚色部份取出後，影像仍
有許多的雜訊和誤差，因此需要利用侵蝕與膨脹的方法，使得雜訊儘量的降低，主體影像可正
確的顯示，以找出影像中人臉的區域，再搭配物件連通法的處理，來達到成功的人臉遮蔽辨識。
8即為我們所要掃描之區域。
(a) (b)
圖4.3 (a)嘴部搜尋範圍 (b) 搜尋規則
4.3 人臉遮蔽物判定演算法三
經過第二階段的辨識之後，我們可以將同時穿口罩，又穿戴膚色衣物或者是膚色安全帽，
具有臉部遮蔽物的嫌疑者辨識出來，但是遇到穿戴膚色遮蔽物的嫌疑者時，研究方法就會產生
誤判的可能，所以本研究又加入第三種辨識方式來提高辨識率，來計算出嘴巴周圍是否有膚色
遮蔽物的可能，人臉影像在經過灰階或二值化後，若是無遮蔽的情形，人臉中的眼睛及嘴巴之
灰階值相較於附近的點而言是較低的，再透過區域極小值的數學理論得知，當我們對輸入影像
作水平方向及垂直方向掃描時，掃描線經過眼睛及嘴巴的部分，至少會有一個區域極小值[4]
存在，如圖4.4所示。經由以上觀察，利用掃描方式找出的區域極小值，一定會包含眼睛及嘴
巴的位置資訊，因此可以將找出的區域極小值位置作為候選，再結合邊緣資訊以及人臉特徵上
的幾何限制，即可找出眼口的配對，演算法三就是以此理論為基礎，來辨識出是否有膚色口罩
等遮蔽物的情況。
圖4.4 人臉輪廓掃描判定
五、實驗步驟及結果
本計畫中的實驗分成兩個項目進行實際測試：實驗一為未戴遮蔽物之測試；實驗二為戴遮
蔽物之測試。測試畫面如圖5.1 所示，畫面一即時截取影像，畫面二為現場背景，畫面三為主
體影像，畫面四為影像辨識處理畫面，實驗結果由右下方視窗五得知結果。
10
圖5.3 花色口罩遮蔽物測試
圖5.4 面具遮蔽物測試
圖5.5 膚色遮蔽物測試
圖5.6 口罩加眼罩遮蔽物測試
六、討論與結論
經過前一節的測試後，我們在這要討論辨識失敗的原因，原因可能為光線問題，人臉的方
向問題，辨識的物體顏色和背景過於相近問題。這些原因可能都會影響辨識的成功率。我們分
別來對判斷錯誤的原因加以說明：1. 光線問題，雖然我們已經將RGB的色彩空間轉到較不受
光影響NCC的色彩空間，但光線的影響是依然存在的，在亮度過高或過低的辨識環境中，所
12
文俊教授 指導) 。
[16] 王英任, 人臉遮蔽之即時辨識系統設計與製作，碩士論文，中央大學電機工程系, 2004 年
6 月，(王文俊教授 指導) 。
[17] 黃泰祥，具備人臉追蹤與辨識功能的一個智慧型數位監視系統，碩士論文，中原大學電
子工程系， 2004年6 月，(繆紹綱教授 指導) 。
[18] 林煌山，利用膚色及區域極小值作人臉特徵是否遮蔽之偵測判斷，碩士論文，國立中央
大學電機工程學系，2003年6 月，(范國清教授 指導) 。
[19] 劉震昌，Digital Image Processing，國立暨南大學資訊工程學系上課講義，2006年1月。
計畫成果自評：
1. 閱讀影像處理的相關文獻與書籍，搜集人臉辨識相關文獻並研讀。完成。
2. 建置模擬提款系統及環境與一般提款機無異。完成。
3. 人臉辨識系統及介面完成。完成。
4. 針對提款民眾的各種情況，實際模擬演練，並改進之。完成。
5. 完成本年度的期終報告。完成。
6. 學生獲得影像處理技術的能力，及計畫報告撰寫的能力。完成。
