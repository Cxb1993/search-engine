一、 中文摘要 
智 慧 型 交 通 系 統 (intelligent 
transportation system, ITS)廣泛應用影像作即
時的行人偵測，例如交通流量管理及交通號
誌控制。隨著行人數目以及行人交錯程度的
增加，行人偵測的效能將會降低。 
本計畫以固定式攝影機拍攝，針對行人
偵測，主要判斷屬於行走，跑步以及站立的
行人影像，透過背景相減法擷取出移動的影
像，在移動影像上定位出行人的影像位置，
經影像處理取得移動物輪廓，並且利用物體
大小與移動方向預估移動向量，使用全域與
區域搜尋法及物體色彩特徵比對法，匹配影
像前後移動之繼承關係，持續追蹤軌跡。最
後抽取出行人特徵，並經由支援向量機
（Support Vector Machine, SVM）分類器進行
行人辨識。 
本計畫透過 1.移動影像偵測模組、2.目
標物追蹤模組及 3.行人辨識模組，建立一套
即時行人監控系統。實驗結果顯示，本系統
有效地提供行人較安全的交通環境。 
 
關鍵詞：智慧型交通系統、行人偵測、支援
向量機 
 
二、 Abstract 
Real-time pedestrian detection using video 
sequences has myriad applications in the 
intelligent transportation system such as traffic 
monitoring and traffic signal control. However, 
as the number of pedestrians and the amount of 
their occlusion increases, the system 
performance degrades. 
In our study, we proposed a real-time 
pedestrian detection method which can be 
employed in outdoor environments. The 
moving silhouettes of a walking figure is firstly 
detected by utilizing the technique of 
background subtraction, and the blobs 
boundaries are located with the help of head 
candidate. The trajectory of the moving person 
was generated by best-area-search and the 
people activities are analyzed by using color 
feature correlation of the objects. 
To achieve the goal of effective and 
real-time detection, we adopted the technique 
of Support Vector Machines (SVM), which 
works well especially in object prediction and 
classification. Our project obtained and 
analyzed features of the pedestrian’s behavior 
through: 1.Motion Image Detection Model, 
2.Object Tracking Model, and 3.Pedestrian 
Recognition Model. The experiment results 
demonstrate that the proposed real-time 
pedestrian detection system can deliver good 
pedestrian detection accuracy at 96%with 
detection frequency of 1.25 time per second. 
 
Keywords: Intelligent Transportation 
System, Support Vector 
Machines, Pedestrian Detection 
 
三、 研究背景 
隨著都市人口及車輛數目的急遽增加，
現代化國家大多數以汽機車為主要交通工
具，然而行人也是一個重要的交通參與者。
行人常需要穿越道路，一旦發生交通事故，
行人受到的傷害往往最為慘重。因此，行人
安全是一個很重要的議題。現今的十字路
口，大都有規劃行人穿越道以及設置行人交
通號誌，然而每個路口的交通號誌時間固
定，無法自動地去偵測目前車子的流量而彈
性調整號誌時間，對於行進速度較緩慢或行
動不便的人，不見得有足夠的時間穿越道
路。因此，具有主動偵測行人的系統變得愈
來愈重要，一旦有行人出現在道路上，系統
便可以自動地變換交通號誌或者延長交通號
誌時間，降低行人傷害。 
影像具有高搜尋範圍及價格低廉等優
點，透過影像處理的技術作為交通流量的監
控，根據取得的交通流量調整十字路口交通
號誌的切換時間，可以對交通動線作最佳化
管理，以減少交通擁擠的情況發生[1]。交通
動線之規劃常以車輛為導向，往往忽略行人
動線之考量，當駕駛人於駕駛上有所疏失或
不當行為時，便會導致車輛衝撞行人的肇事
事件。要達到交通動線的最佳化，除監控每
條道路上車輛的流量外，還必須考慮到行人
穿越道上的行人流動。由於在行人穿越道上
通行的人群會與在十字路口轉彎的車流互相
阻滯，如圖 1 所示。因此，即時地對行人穿
越道的行人作追蹤以可以提升交通管理的效
果。另外，對行人進行追蹤，可預測行人的
行進路徑，若再配合車輛的行進路徑預測，
當有行人與車輛可能發生碰撞的情形時，利
點的顏色在 k 色彩空間的值，n 是要建立背
景影像所需要的影像序列數目，median()代表
對 n 個輸入影像在 ( )vu, 點的顏色取中値。 
因考慮到擷取移動影像輪廓的完整性，
並且減少前景的殘留雜訊，我們使用以統計
為基準的背景圖建立方法。主要以一段區間
的連續影像，在同個空間位置中，計算統計
像素值出現最多次的當作是背景影像，統計
這段時間最為固定的像素值為背景，這個方
法可以取得具有統計性的歷史記錄資料。 
下圖 4 說明在訓練背景圖的計算過程，
左方的影像表示一段區間所使用的 n 張影
像，在訓練背影圖的歷史記錄裡，計算影像
中同個位置裡，不同時間的不同變化量。另
外兩個欄位1a與1b分別記錄著目前pixel(x,y)
位置的像素值，以及 pixel(x,y)位置像素值的
重覆量，即可冗餘減化量。 
 
圖 4 統計式背景圖的建立方式 
 
（2）前景物偵測 
建立好參考的背景影像後儲存在記憶
體，系統會自動擷取目前影像與背景圖比
較，偵測出移動中的影像視為前景影像，背
景相減法的公式如下： 
 
Ij(x,y)代表第 j 張影片影像的像素值，
B(x,y)為儲存的背景參考影像，將兩張影像做
相減，並且大於所設定的閥值(Tobj)則為 1，
否則為 0。影像經背景相減後的移動影像稱
為前景影像，前景影像又可再往下細分成不
同組合物，包括實際的移動目標影像或是移
動目標所產生的一些光影反射，如下說明。 
a. 移動目標影像(Move Objects)：為實際移
動物體的影像，也就是最後要分類與辨識
的輸入資料。 
b. 未移動影像(Unmoved pixels)：影像上未
移動部分。 
c. 背景模組影像(Background Model)：訓練
計算出的背景圖。 
d. 陰影像 (Shadows)：由移動目標 (Move 
Objects)所產生出的光影或反射影像，其
特性會跟隨物體成同方向移動，視為陰影
像。 
e. 雜訊或其他光線影響影像 (Noise or 
Ghost)：由背景相減法所分割出來的非移
動影像，有可能為光影的變化所引起，或
攝影機搖晃所造成的雜訊，但並未連接於
移動物體。 
（3）陰影偵測 
陰影的影像常會因為移動影像而在前景
圖擷取時一併被分割出，陰影通常與行人影
像連結在一起，往往會影響行人影像外型輪
廓，進而破壞行人判斷的正確性。為了取得
較為完整的外型，以及幫助框出正確行人位
置，陰影的去除為影像前處理的其中一項流
程。 
透過陰影偵測的方法，將移動影像中屬
於陰影的部分過濾掉。利用[22][23]之陰影移
除方法，首先將 RGB 色彩空間的值轉換成
HSV 色彩空間，觀察陰影在 HSV 色彩空間
裡顏色的色調(hue)，飽合度(saturation)和亮
度值(value)，得到以下的陰影偵測公式： 
 
Shadowk(x,y)代表第 k 張影像上所偵測
到的陰影像，將背景影像與目前偵測影像相
減，並取得它在 HSV 色彩空間裡的閥值範圍
內，視為陰影候選區；將 RGB 色彩空間影像
轉換為 HSV 色彩空間影像，其中 IkV(x,y)、
IkS(x,y)和 IkH(x,y)為在第 k 張輸入影像的
(x,y)位置上而α、β、γS 和γH 則為陰影顏色的
範圍，α與β最主要定義陰影在影像上的光線
亮度變化，在陰影偵測會先設定多組的日光
強度的參數值，根據不同的日光時間定義，
調整最適當的陰影亮度。 
 
2. 目標物追蹤模組 
目標物追蹤在辨識流程是個重要的角
色，所謂的追蹤就是在特定區域，連續時間
針對固定的目標做持續的預估與位置記錄，
並且比對前後影像形態，確認為同一移動物
體，藉此了解物體移動的動態資訊。 
本計畫利用連續相鄰的兩張影像，比對
物體間顏色的相似性來追蹤且比對目標物。 
徵值的擷取需要擷取影像上有意義屬性特徵
當作分類的依據。 
特徵抽取 
我們以行人的外型輪廓線條當作辨識特
徵，透過線條化的抽取，去除掉大部分冗餘
的像素值和獨立點，只取出重要的線條。再
將取出的線條化分成垂直線條與水平線條兩
類，利用其特性來區分行人與其他影像。 
 
五、 實驗結果 
本計畫以Microsoft Windows XP SP2作
業 系 統 為 測 試 環 境 ， CPU 使 用 AMD 
2200+1.8Ghz，記憶體為1GB，開發工具使用
Borland C++ Builder 6.0。攝影機架型號為
Sony DV DCR PCl05，設於戶外環境位置3~5
公尺高處，仰角為向下偏約20度左右，使用影 
像解析度為320*240影像大小。 
 
目標物追蹤 
我們使用的影像為：320*240灰階影像，
每0.6秒拍攝一張影像，連續使用46張影像。 
實驗證明可以利用影像的NCC係數分辨
目標物的交錯情形，如圖4及圖5。經過建立
目標物的色彩特徵（圖6），連續比對的結果
得到圖7及圖8，結果證明相同物體的相似值
較高。 
 
圖4 行人交錯連續原始影像 
 
 
圖5 移動影像的色彩資訊 
 
 
圖6 目標物的色彩特徵 
 
 
圖7 Frame 313與Frame 316遮蔽前色彩的相
似度 
 
 
圖8 Frame 316與Frame 321遮蔽後色彩影像
的相似度 
 
行人辨識 
為了比較出不同特徵屬性的辨識效率，
我們各取原始影像當作訓練樣本，以及垂直
線條影像比較其辨識結果。 
（1）收集訓練樣本： 
訓練及測試的影像資料庫，包括行人影
像資料庫（10個人，每個人各5到10張不等的
行人影像，共70張）、非行人影像資料庫（包
括車子、摩托車、及其他隨機取的影像，共
計60張。）及測試資料庫（影像共有65張，
包括了3位不同行人的影像。）三種。 
 
（2）測試集之預測結果： 
本計畫使用LIBSVM工具當作SVM的訓
練器[20]，利用預設值的SVM參數，將所有訓
練樣本資料平均分成五份，其中一份當作測
試資料，其餘四份 為訓練資料，選擇其中一
份辨識正確率最高裡的參數為設定值，最後
將訓練集訓練的成果來驗證測試集裡的資
料。 
接下來我們調整SVM的最佳參數，找尋
行，而且在偵測率與速度上均有不錯的表現。 
七、 參考文獻 
[1] L. Y. Deng, N. C. Tang, D. L. Lee, C. T. 
Wang, and M. C. Lu, “Vision Based 
Adaptive Traffic Signal Control System 
Development,” Int’l Conf. Advanced 
Information Networking and Applications, 
vol. 2, pp. 25-30, Taipei, Taiwan, 2005. 
[2] I. Haritaoglu, D.Harwood, L.S. Davis, “W4: 
real-time surveillance of people and 
theiractivities ”, IEEE Transactions on 
Pattern Analysis and Machine Intelligence, 
Vol. 22, pp.809-830, 2000. 
[3] C. R. Wren, A. Azarbayejani, T. Darrell, A. 
Pentland, “Pfinder：Real-Time Tracking of 
theHuman Body”, IEEE Transactions on 
Pattern Analysis and Machine Intelligence, 
Vol.19, No.7,pp.780-785, 1997. 
[4] R. Cutler, L. S. Davis, “Robust Real-time 
Periodic Motion Detection, Analysis, and 
Applications”, IEEE Transactions on 
Volume 22 Pattern Analysis and Machine 
telligence, Issue 8, 2000. 
[5] S. Kang, H. Byun, S. W. Lee, “Real-time 
Pedestrian Detection Using Support 
Vector Machines”, Proceedings of the 
First International Workshop on Pattern 
Recognition with Support Vector 
Machines P. 268 – 277, 2002. 
[6] F. Y. Wang, P. B. Mirchandani, and N. 
Zheng, “Advances and Trends in Research 
and Development of Intelligent 
Transportation Systems: An Introduction 
to the Special Issue,” IEEE Trans. on 
Intelligent Transportation Systems, vol. 5, 
no. 4, pp. 222-223, Dec. 2004. 
[7] Y. Hori, K. Shimizu, Y. Nakamura, and T. 
Kuroda, “A Real-Time Multi Face 
Detection Technique Using 
Positive-Negative Lines-of-Face 
Template,” Int’l Conf. Pattern 
Recognition, vol. 1, pp. 765-768, 
Cambridge, UK, 2004. 
[8] J. E. Naranjo, C. Gonzalez, J. Reviejo, R. 
Garcia, and T. Pedro, “Adaptive Fuzzy 
Control for Inter-Vehicle Gap Keeping,” 
IEEE Trans. on Intelligent Transportation 
Systems, vol. 4, no.3, pp. 132-142, Sept. 
2003. 
[9] J. H. Jean and R. Y. Wu, “Adaptive Visual 
Tracking of Moving Objects Modeled 
with Unknown Parameterized Shape 
Contour,” IEEE int’l Conf. Networking, 
Sensing and Control, vol. 1, pp. 76-81, 
Taipei, Taiwan, 2004. 
[10] D. B. Yang, H. H. Gonzalez, and L. J. 
Guibas, “Counting People in Crowds with 
a Real-Time Network of Simple Image 
Sensors,” Proc. IEEE Int’l Conf. 
Computer Vision, vol. 1, pp. 122-129, 
Nice, France, 2003. 
[11] I. Haritaoglu, D. Harwood, and L. S. Davis, 
“W4: Real-Time Surveillance of II People 
and Their Activities,” IEEE Trans. on 
Pattern Analysis and Machine Intelligence, 
vol. 22, no. 8, pp. 809-830, Aug. 2000. 
[12] S. Hongeng and R. Nevatia, “Multi-Agent 
Event Recognition,” Proc. Int’l Conf. 
Computer Vision, vol. 2, pp. 84-91, 
Vancouver, Canada, 2001. 
[13] T. Zhao and R. Nevatia, “Tracking 
Multiple Humans in Complex Situations,” 
IEEE Trans. on Pattern Analysis and 
Machine Intelligence, vol. 26, no. 9, pp.  
208-1221, Sept. 2004. 
[14] L. Zhao and C. E. Thorpe, “Stereo and 
Neural Network-Based Pedestrian 
Detection,” IEEE Trans. on Intelligent 
Transportation Systems, vol. 1, no. 3, pp. 
148-154, Sept. 2000. 
[15] F. Xu, X. Liu, and K. Fujimura, 
“Pedestrian Detection and Tracking with 
Night Vision,” IEEE Trans. on Intelligent 
Transportation Systems, vol. 6, no. 1, pp. 
63-71, March 2005. 
[16] D. Comaniciu, V. Ramesh and P. Meer, 
“Kernel-Based Object Tracking,” IEEE 
Trans. on Pattern Analysis and Machine 
Intelligence, vol. 25, no. 5, pp. 564-577, 
May 2003. 
[17] D. Koller, K. Daniilidis, and H. H. Nagel, 
“Model-Based Object Tracking with 
Monocular Image Sequences of Road 
Traffic Scenes,” Int’l Journal Computer 
Vision, vol. 10, no. 3, pp. 257-281, 1993. 
[18] T. Cham and J. M. Regh, “A Multiple 
Hypothesis Approach to Figure Tracking,” 
IEEE Conf. Computer Vision and Pattern 
Recognition, vol. 2, pp. 2239-2245, CO, 
USA, 1999. 
[19] M. Isard and A. Blake, 
“Condensation-Conditional Density 
Propagation for Visual Tracking,” Int’l 
