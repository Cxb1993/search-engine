摘要 
本計畫成功地開發了第一年計畫所擬的階層式跨
協 定控制模 型 (Hierarchical Cross-Layer Control; 
HCLC)以及軟體排程器軟體元件。本成果報告簡介
此成果包含已發表的 SCI 期刊、國際會議、全國性
競賽以及專利，定義並找到 WiMAX MAC 層 QoS 遇
到的問題，排程器的重要性，以及成功完成此排成
器的設計。方法採用軟式 HCLC 控制，並說明 
Lyapunov 穩定性原則下，各階層控制器設計應遵循
的法則。藉由此法則，除了能夠達到一般所謂的同
類別公平性之外，還能保證跨類別公平性，並保證
QoS。本計畫成果已發表論文中的實驗顯現出 HCLC
的創新性與優越性，並證明可以順利銜接第二年計
畫所擬 IEEE 802.16m 以及第三年的矽智財實現與其
電子系統層級驗證。本報告最後並說明計畫書所擬
之外的額外發現。 
 
關鍵詞：微波存取全球互通技術、跨協定控制、軟
式計算、Lyapunov 穩定性理論、矽智財、電子系統
層級驗證。 
 
Abstract 
This project successfully developed HCLC control 
model and software scheduler component for 
OFDM-based 802.16e-2005 Mobile WiMAX which 
was the original planed objective of the first year 
proposal. The technical report here introduces the solid 
project achievements and we have published them in a 
SCI journal, an international conference, and patent as 
well as awarded in a contest. The contents of the 
achievements include WiMAX MAC QoS challenge 
definition and identification, importance of good 
scheduler design, and the successful scheduler design. 
We exploit HCLC soft control in which design policies 
based on Lyapunov stability principle are applied. With 
the proposed policies, the scheduler achieves inter- and 
intra-class fairness as well as QoS guarantee. The 
published papers based on this project show that the 
HCLC is superior to the state-of-the-art cross-layer 
designs. Therefore, we have proved we are ready to 
continue the second and third years’ projects where 
IEEE 802.16m scheduler and silicon intellectual 
property (SIP) with electronic system level (ESL) 
verification are respectively proposed. We finally 
introduce the discovery beyond the originally proposed. 
 
Keywords: WiMAX, cross-layer control, soft 
computing, Lyapunov stability theory, silicon 
intellectual property, electronic system level 
verification 
 
一、前言 
本計畫規劃為三年計畫，第一年惠經審查委員提供
寶貴意見並核可後成果豐碩，目前第二年計畫也已
經核可執行中。統計第一年成果如下： 
1. SCI 期刊論文一篇[47] (IF≈0.98)：主要提出模糊
控制模型進行 WiMAX OFDMA 排程，用以分配
頻寬，並保證 QoS 以及公平性。其中控制模型包
含了三個控制器：Goal-Delay Controller, Priority 
Controller, 以及 Transmission Opportunity (TXOP) 
Controller。概念上延伸了過去執行無線網路計畫
的觀念，利用模糊控制可以讓相同優先權的連線
取得足夠且適當的頻寬，而保留了資源給低優先
權的連線。由此觀念，在該論文中，並率先提出
了所謂 intra-class 以及 inter-class fairness 的定性
以及定量的定義。 
2. 國際會議論文一篇[50]：為 ACM 在德國萊比錫舉
辦的 IWCMC 會議，為具知名度的會議。提出適
用於 VANET WAVE Technology IEEE 802.11p 
[54], IEEE 802.11e [4] HCCA 
(Earliest-Deadline-First; EDF [49]) 排程 , IEEE 
802.11e EDCA [4], 以及 WiMAX 階層式跨協定
控制(Hierarchical Cross-Layer Control; HCLC) 驗
證平台，本計畫已經將平台延伸到 WiMAX 目標
延遲(Goal Delay)動態調整的軟硬體整合實驗，包
含目標延遲控制器(Goal delay controller) [47][51] 
AMBA on-chip bus [48]包裝(wrapping)、Linux 
Driver、與 middleware。未來要延伸到 WiMAX
的 Priority Control 以及 transmission opportunity 
(TXOP) control 硬體矽智財之設計以及 ESL 驗
證。 
3. 全國性競賽獲獎[51]：參加旺宏金矽獎半導體設
計暨應用大賽，238 隊參賽隊伍中脫穎而出，榮
獲評審團銅獎。作品完成了 WLAN, WiMAX 中的
backoff 模糊控制(可用於 WLAN EDCA 以及
WiMAX: ranging 之 後 的 頻 寬 要 求 ) 、
Earliest-Deadline-First EDF，可用於 WLAN HCCA
以及 WiMAX nrtPS 的頻寬分配 (ref. WiMAX: 
[57]; hardware EDF:[49][55][56])以及 Goal Delay 
Controller 等控制矽智財的跨協定控制(HCLC)驗
證。以及AMBA on-chip bus包裝(wrapping)技術、
ASIC Conversion技術、矽智財 back-end Placement 
and Routing、各控制器矽智財 Linux 驅動程式、
Middleware 系統整合等。因 HCLC 驗證平台的的
創新性以及對於各無線網路技術來說是通用的，
因而獲獎。參與學生因為參賽獲得極佳之訓練，
並且因得獎大幅提昇了技職學生較缺乏的自信
心。 
4. 專利撰寫：HCLC 驗證平台免除了實體網路佈置
(deployment)以及各種量測設備的成本，並支援跨
協定設計以及軟硬體解決方案的 co-exploration、
11.  ACK channels for HARQ sub-bursts 
12.  Power Sleep behaviors (Listen/Active) 
13.  Idle behaviors (Paging) 
14.  Handover: Hard Handoff(HHO), Fast Base 
Station Switching (FBSS) and Macro Diversity 
Handover (MDHO) 
本計畫完成了其中 1~5 項。對於 WiMax MAC 來說，
QoS 排程是一個最困難的問題。本計劃主要克服目
標為圖一標示的 Connection-based QoS 與 Fast 
Scheduler 兩部份，並考慮上述 1-5 項因素加以研究，
而事實上這六項因素牽涉的不只是 MAC layer，因此
跨協定的設計是有必要的。 
WiMax無線網路由於不確定性和非線性，QoS
之重要性與難度更受人注目，許多學者也在這些地
方著力進行了許多研究[6]-[24][29]-[40]，這些研究實
驗模擬的效果非常地好，這些研究以大多以機率模
型、或者是以直接地數學推導來求得QoS參數，然而
本計畫發表過的文獻中[50][51]，已經揭出傳統的機
率統計模型僅能適用在某些狀況，並且無法瞭解不
同協定層之間的應該如何分工。 
 
    另外也有許多學者提出 802 系列無線網路的效
能分析模型[7][12][16][20][22][23][29]-[32]，文獻[31]
研究頻率重複使用(reuse partitioning): 將發射功率
分內圈和外圈，用以降低 cell 之間干擾；文獻[30]把
MAP redundant 資訊壓縮，提升效能。有些研究並且
把效能飽和模型用來解決允入控制(Call Admission 
Control; CAC)以及換手(handover)等問題[16]。然而，
如前面所說，如果以許多機率分布或者其任意組合
來敘述無線網路的行為是行不通的，這些理論上的
研究貢獻的確可以精確地代表無線網路在單純狀況
下的行為，但是沒有人能夠確定某一個模型是否適
用於所有可能的網路狀態，在計算理論上這是個
un-decidable 的問題。更何況當要應用這些複雜的數
學模型時，其計算複雜度對於即時嵌入式系統或者
硬體實現來說，幾乎是不可能的，舉例來說，文獻
[7][12][16][20][22][23]屬於 Credit-based 的做法，在
某個參數範圍內(例如 user m, sub-carrier k, slot t)定義
了 credits ( 或 者 稱 為 metrics) ， 想 要 找 到 使
Credit/Utility/Metric 最大化的參數，這是一個高複雜
度的搜尋問題，由於變數過多使得 Credit 定義域過
大(參數空間進行 Cartesian Product)，針對每次 packet 
以及每個 sub-channel (sub-carrier k, slot t)要去進行最
大 credit 點搜尋是很不實際的。 
    針對 OFDMA或者 Mobile WiMax許多學者嘗試
提出了跨協定(cross-layer)的設計方式[6]-[24]，意圖
解決複雜的 QoS 問題，這些文獻中使用 throughput 
distortion-based 跨協定的方法來進行 rate control，然
而在無線網路中有許多情況下 throughput 並不容易
量測，例如在以 VBR 的方式傳送影片，當 encoder
壓縮較複雜的影像畫面時便需要較大的傳輸頻寬，
然而畫面的複雜度並不容易預期，而且也有突然變
化的可能，因此頻寬需求並不容易預測，沒有頻寬
需求，就不知如何估計 distortion以進行 rate control。
另外，這些傳統方法大部分都是 MAC-PHY 兩層進
行跨協定溝通，雖有少數文獻例如[10][15]有和上層
溝通的機制，但是這些所謂跨協定大都是 heuristic 
Design，除了仍具有高計算複雜度的問題之外，因協
定層之間 Tightly-coupled，Cross-layer 仍有 scalability
與 Flexibility 的 問 題 ， 就 像 [19] 所 說 ， 在
implementation 上有其困難。 
 
三、研究方法 
A. 軟式控制與公平性 
本計畫不同於傳統文獻中的方法，本計畫擬直
接控制延遲來達到頻寬的需求，對於 TSPEC 並不只
是針對網路狀態來估計，而是針對 MAC 中 QoS 來
設計，當成是 MAC 層進行控制的 reference，以模糊
理論中的模糊規則來說就是動態的結論部，除此之
外為達到公平性，本計劃不似大多數文獻只是把各
種 traffics延遲以及躁動分別控制在TSPEC所設定的
deadline 與 jitter 以下，而是以比較 “soft”的方法把
延遲控制在“目標延遲” dg 上或下不超過的地方，
亦即： 
 d  < deadline (1) 
 dg – ε < d < dg+ε  < deadline (2) 
其中 d 表示觀察到的延遲。這樣的軟式計算作法可
以達到兩個公平性： 
• 對於低優先權的公平性(inter-class fairness)： 這
是大部分文獻沒有做到的部份，因為大多數文獻
僅重視(1)，然而(2)才會真正在高優先權在取得適
當頻寬之後，會釋放出資源，讓不具 QoS 要求的
連線均勻地共享剩下的資源，因此頻寬利用率將
會提高，藉此各連線的 jitter 也會降低。 
• 對於同優先權的公平性(intra-class fairness)：相
同的優先權具有相同的 throughput 以及 jitter：這
說，每個connection不是盡力去把自己的delay降低(頻
寬拉高)，而是盡力去取得“適當頻寬”。這樣的概念
可以保證intra-與inter-class公平性。 
 
Upper bound(t)
lower bound(t)
Goal delay(t)
deadline
HOL delay (ms)
time (ms)
 
圖三、Control for Real-Time Connections – ertPS, 
rtPS。  
 
對於 nrtPS 來說，要求的是 throughput 必須在規格
minimum reserved rate 以上，因此如下圖我們對
throughput 設計了 upper bound，讓 nrtPS 的連線不會
取得超過自己所需的太多的頻寬。同樣這樣的概念
也會釋放多餘的資源給 BE 連線。 
 
Upper 
bound
Minimum 
Reserved Rate
Throughput 
(Kb/s)
time(ms)
 
圖四、Control for non-real-time Connections – nrtPS。  
 
雖然 BE 類別的連線並沒有 QoS 的規格需求，
但是經過前述兩種較高優先權的連線釋放頻寬之後，
其餘 BE 會均勻地分享到剩下的資源，因此我們也實
驗證明了，達成 inter-class 公平性之餘也會讓 BE 連
線之間也會取得 intra-class 公平性[47]。 
 
C. Lyapunov 穩定性原則 
Lyuapunov穩定性理論在自動控制中廣被使用。在
文獻[52]-[53], 以離散時間的Lyapunov漂移為基礎
的最佳化方法，成功地應用在跨協定的設計上。當
我們要把整個控制問題分割並映射到所提出的
HCLC框架，我們必須考慮穩定性的問題。假設在
layer n，令V為Lyuapunov function的候選者： 
 ( )2( ) ( )n nV s t c t= −  (3) 
其中 t 為時間，sn(t)為觀察到的狀態，cn(t)為本層得
到的 reference command。那麼我們可以得到：  
( )
( ) ( )
( ) ( )
( ) ( )
( )
2 ( ) ( ) ( )
   2 ( ( )) ( ) ( ( ))
   2 ( ( )) ( ) ( ( ))
   2 ( ( )) ( ( ))
         ( ( ))
n n n
n n n
n n n n n n n
n n n n n n
n n n
V s t c t s t
O y t c t O y t
O P u t c t O P u t
O P u t G O P u t
O P u t
′ ≈ − ⋅∆
= − ⋅ ∆
   = − ⋅ ∆   
 = − 
 ⋅ ∆  
 
  

 
  (4) 
其中 un(t)表示本層發出的控制： Gn 表示所有上層協
定的 composition，視為本層 reference command 的提
供 者 ； Pn 為 所 有 下 層以 及 無 線 網 路 環 境 的
composition，視為本層的 plant。觀察(4)可以發現，
為了讓微分量(derivative) V’ 小於 0 來保證穩定性，
我們提出了 HCLC 在第 n 層的控制器的設計原則如
下：  
R00: IF the observed state sn(t) = (On°Pn)(un(t)) is 
decreasing AND it is smaller than the goal 
cn(t)=(Gn°O)(y(t)) THEN next control un(t+1) is to 
increase sn(t) making it positive 
R01: IF the observed state sn(t) = (On°Pn)(un(t)) is 
decreasing AND it is greater than the goal cn(t)= 
(Gn°O)(y(t)) THEN control un(t+1) is median for 
holding sn(t) 
R10: IF the observed state sn(t) = (On°Pn)(un(t)) is 
increasing AND it is smaller than the goal cn(t)= 
(Gn°O)(y(t)) THEN control un(t+1) is median for 
holding sn(t) 
R11: IF the observed state sn(t) = (On°Pn)(un(t)) is 
increasing AND it is greater than the goal cn(t)= 
(Gn°O)(y(t)) THEN next control un(t+1) is to 
decrease sn(t) making it negative 
由這四個策略性規則(policy rules)，我們很可以容易
地推導出第 n 層的 policy-based QoS 演算法。對於非
策略性規則導向的 QoS 演算法，這四條策略性則仍
是非常好用的參考，特別是應用 HCLC 框架的時候。
我們用這四條規則小心地檢查 Lyapunov 穩定性是怎
樣在實作過程中被保證的，特別是牽涉到複雜的實
現因素時，例如： sampling period, sizes of sampling 
window, limits of actuators (contention window 
parameters)…等等。HCLC 幫助系統設計者驗證他們
的跨協定設計與實作過程，用以達成如文獻 [52]-[53]
中華麗理論的目標。 
D. 電子系統層級(ESL)驗證 
ESL 驗證平台規劃在第三年，本報告雖描述第
參考文獻 
Standards and forum access: 
[1] Air Interface for Fixed and Mobile Broadband Wireless 
Access Systems Amendment 2: Physical and Medium 
Access Control Layers for Combined Fixed and Mobile 
Operation in Licensed Bands, IEEE Standard 
802.16e-2005, Feb. 2006. 
[2] Standard for Local and Metropolitan Area Networks: 
Media Access Control (MAC) Bridges - Multihop Relay 
Specification, IEEE Std 802.16j (project to amend IEEE 
Std 802.16, in development by Relay Task Group), Draft 
D1, 2007. 
[3] Air Interface for Fixed and Mobile Broadband Wireless 
Access Systems - Advanced Air Interface, IEEE Std 
802.16m, Pre-Draft, http://ieee802.org/16/tgm/. 
[4] Wireless LAN Medium Access Control (MAC) and 
Physical Layer (PHY) Specifications: Amendment 8: 
Medium Access Control (MAC) Quality of Service (QoS) 
Enhancement, IEEE Standard 802.11e, Sept. 2005. 
[5] Mobile WiMAX -- Part I: A Technical Overview and 
Performance Evaluation, Aug. 2006, 
downloadhttp://www.wimaxforum.org/technology/downl
oads/ 
 
MAC-PHY Cross-Layer for WiMax: 
[6] K. A. Noordin and G. Markarian, “Cross-Layer 
Optimization Architecture for WiMAX Systems,” IEEE 
18th International Symposium on Personal, Indoor and 
Mobile Radio Communications (PIMRC), Sept. 2007 pp. 
1-4. 
[7] X. Yang, M. Venkatachalam, and S. Mohanty, 
“Exploiting the MAC layer flexibility of WiMAX to 
systematically enhance TCP performance,” IEEE Mobile 
WiMAX Symposium, March 2007,pp. 60-65. 
[8] Hung-Hui Juan, Hsiang-Chun Huang, et. al “Cross-layer 
System Designs for Scalable Video Streaming over 
Mobile WiMAX,” IEEE Wireless Communications and 
Networking Conference (WCNC), March 2007, pp. 
1860-1864  
[9] Chenn-Jung Huang, Yi-Ta Chuang, Chih-Tai Guan; et. 
al, “A Self-Adaptive Bandwidth Reservation Scheme for 
4G Mobile WiMAX,” International Workshop on Cross 
Layer Design (IWCLD '07), Sept. 2007, pp. 55-59. 
[10] Jianfeng Wang, M.Venkatachalam, and Yuguang Fang, 
“System Architecture and Cross-Layer Optimization of 
Video Broadcast over WiMAX,” IEEE Journal on 
Selected Areas in Communications, Vol. 25, No. 4, May 
2007, pp. 712-721. 
[11] Bo Rong; Yi Qian and Hsiao-Hwa Chen, “Adaptive 
power allocation and call admission control in 
multiservice WiMAX access networks, IEEE Wireless 
Communications [see also IEEE Personal 
Communications], Vol. 14, No. 1, Feb. 2007, pp. 14-19. 
[12] Zhuo Sun, Yufen Zhou, Mugen Peng, and Wenbo Wang, 
“Dynamic Resource Allocation with Guaranteed Diverse 
QoS for WiMAX System,” Proceedings of 2006 
International Conference on Communications, Circuits 
and Systems, Vol. 2, June 2006, pp. 1347-1351. 
[13] Hung-Yu Wei, S. Ganguly, R. Izmailov, and Z. J. Haas, 
“Interference-aware IEEE 802.16 WiMax mesh 
networks, IEEE 61st Vehicular Technology Conference 
(VTC’05), Vol. 5, 2005, pp. 3102-3106. 
[14] Mehmet Safak, “Towards Cognitive Telecommunication 
Networks,” IEEE 15th Signal Processing and 
Communications Applications, June 2007, pp. 1-4. 
[15] Yi-Ting Mai, Chun-Chuan Yang, and Yu-Hsuan Lin, 
“Cross-Layer QoS Framework in the IEEE 802.16 
Network,” The 9th International Conference on 
Advanced Communication Technology (ICACT), Vol. 3, 
pp. 2090-2095. 
[16] Ling Chen, Xuejun Cai, Rute Sofia, and Zhen Huang, “A 
Cross-Layer Fast Handover Scheme For Mobile 
WiMAX,” IEEE 66th Vehicular Technology Conference, 
Sept. 30 2007-Oct. 3 2007, pp. 1578-1582. 
[17] Yang Cao, Zhimin Liu, Yi Yang, “A Centralized 
Scheduling Algorithm Based on Multi-Path Routing in 
WiMAX Mesh Network,” International Conference on 
Wireless Communications, Networking and Mobile 
Computing (WiCOM 2006), Sept. 2006, pp. 1-4. 
[18] Hung-Hui Juan, Hsiang-Chun Huang, ChingYao Huang, 
Tihao Chiang, “Cross-layer System Designs for Scalable 
Video Streaming over Mobile WiMAX,” IEEE Wireless 
Communications and Networking Conference (WCNC 
2007), March 2007, pp. 1860-1864. 
[19] L. Badia, A. Baiocchi, A. Todini, S. Merlin, S. Pupolin, 
A. Zanella, M. Zorzi, “On the impact of physical layer 
awareness on scheduling and resource allocation in 
broadband multicellular IEEE 802.16 systems,” IEEE 
Wireless Communications [see also IEEE Personal 
Communications], Vol. 14, No. 1, Feb. 2007, pp. 36-43. 
[20] Qingwen Liu; Xin Wang; G. B. Giannakis, “A 
cross-layer scheduling algorithm with QoS support in 
wireless networks,” IEEE Transactions on Vehicular 
Technology, Vol. 55, No. 3, May 2006, pp. 839-847. 
[21] Fei Xie, Kien A.Hua, Ning Jiang, “Achieving True 
Video-on-Demand Service in Multi-Hop WiMax Mesh 
Networks,” 32nd IEEE Conference on Local Computer 
Networks(LCN 2007), Oct. 2007, pp. 287-294. 
[22] Lihua Wan, Wenchao Ma, Zihua Guo, “A Cross-layer 
Packet Scheduling and Subchannel Allocation Scheme in 
802.16e OFDMA System,” IEEE Wireless 
Communications and Networking Conference (WCNC 
2007), March 2007, pp. 1865-1870. 
[23] H. Gowda, R. Lakshmaiah, M. Kaur, C. Mohanram, M. 
Singh, S. Dongre, “A slot allocation mechanism for 
diverse QoS types in OFDMA based IEEE 802.16e 
systems,” The 9th International Conference on 
Advanced Communication Technology, Vol. 1, Feb. 
2007, pp. 13 – 17. 
[24] Filin, S.A.; Moiseev, S.N.; Kondakov, M.S.; et. Al, 
“QoS-Guaranteed Cross-Layer Transmission Algorithms 
with Adaptive Frequency Subchannels Allocation in the 
IEEE 802.16 OFDMA System,” 2006 IEEE 
International Conference on Communications (ICC), 
Vol. 11, June 2006 Pp. 5103 – 5110. 
 
General Cross-layer Issues: 
[25] S. L. Kota, E. Hossain, R. Fantacci, and A. Karmouch, 
“Cross-layer protocol engineering for wireless mobile 
networks-I,” IEEE Communications Magazine, vol. 43, 
no. 12, Dec. 2005, pp. 110 – 111. 
[26] V. Srivastava, M. Motani, “Cross-layer design: a survey 
and the road ahead,” IEEE Communications Magazine, 
vol. 43, no. 12, Dec. 2005, pp. 112 – 119. 
 
IEEE 802.11e: 
[27] Wenbo He and Klara Nahrstedt, “Impact of Upper Layer 
Adaptation on End-to-end Delay Management in 
Wireless Ad Hoc Networks,” Proceedings of the Twelfth 
IEEE Real-Time and Embedded Technology and 
Applications Symposium (RTAS’06), Apr. 2006, pp. 
50-70. 
[28] A. Ksentini, M. Naimi, and A. Guéroui, “Toward an 
Improvement of H.264 Video Transmission over IEEE 
802.11e through a Cross-Layer Architecture,” IEEE 
Communications Magazine, Vol. 44, No. 1, January 
2006, pp. 107-114. 
 
Other WiMax issues: 
[29] Christian Hoymann, “Analysis and performance 
evaluation of the OFDM-based metropolitan area 
network IEEE 802.16,” Computer Networks 49 (2005), 
pp. 341–363. 
[30] Hyung Seok Kim and Sooyoung Yang, “Tiny MAP: An 
efficient MAP in IEEE 802.16/WiMAX broadband 
wireless access systems,” Computer Communications 30 
(2007) , pp.  2122–2128. 
[31] Chadi Tarhini and Tijani Chahed, “Modeling of 
streaming and elastic flow integration in OFDMA-based 
 可供推廣之研發成果資料表 
 可申請專利  □ 可技術移轉                                      日期： 年 月 日 
國科會補助計畫 
計畫名稱：WiMax 網路之階層式跨協定軟式計算模型及其電子系統層級驗證 
計畫主持人：陳朝烈 
計畫編號：NSC 97-2221-E-327-035-學門領域：資訊工程(一) 
技術/創作名稱 跨協定無線電子系統之驗證方法 Cross-Layer Wireless Electronic Systems Verifications 
發明人/創作人 陳朝烈 吳俊慶 鄭宇良 賴建豪 
技術說明 
中文：本發明屬於電子系統層級  （ESL）驗證平台，用以共同探究
（co-explore）、驗證無線多媒體網路矽智財（Silicon Intellectual Properties; SIPs）
與 跨 協 定 演 算 法 ， 以 達 到 下 列 兩 個 目 標 ： 1. 演 算 法 / 硬 體 架 構
(Algorithm/Architecture （A/A） Co-exploration)共同探究: 驗證矽智財在網路環
境下行為以及與跨協定演算法（Cross-Layer Algorithms, CLAs）合作的情形；2. 擴
充 ESL 驗證的層次(Extending ESL Verification Levels): 讓 ESL 驗證向下延伸到
實體訊號層，向上延伸到演算法與網路行為層（algorithmic behavioral and 
networking level）。突破了傳統 ESL 工具只能在交易(Transaction)以及指令集架構
(Instruction Set Architecture; ISA) 兩個 Levels 進行驗證的瓶頸。 
以上兩個目標分別由網路模擬器（例如：NS-2）以及現場可規劃邏輯閘陣
列(Field Programmable Gate Array;FPGA)來完成。其中網路模擬器提供了更接近
實際狀況的動態無線網路環境，量測時媒體存取(Media Access Control; MAC)
層、實體(Physical; PHY)層、和多媒體影音串流編碼器等矽智財的運作過程更接
近實際上無線網路的傳輸環境。本發明並以系統晶片匯流排(例如：AMBA SoC 
Bus)來連接 FPGA 與微處理器(Microcontroller)，並設計驅動程式以及中介軟體
(Middleware)來連接網路模擬器中的通訊協定，以完成階層式跨協定控制
（Hierarchical Cross-Layer Control; HCLC）的架構。讓 HCLC 演算法可以和
MAC/PHY 的真實硬體（ real hardware）矽智財可以共同驗證，系統晶片
(System-on-Chip; SoC）或 SIP 設計者很容易進行軟硬體分工、與所謂 A/A 共同
設計與探究。 
本發明免除以往驗證網路晶片需要網路佈置（deployment）的時間、設計並
實現多套對傳設備進行互通實驗、實體層射頻與類比電路的設計、無線訊號量
測設備…等等的成本。因此在 SoC 的開發過程中，大幅省下 SIPs 下線與量測的
時間與成本。 
 
附件一 
的可攜性。 
 
功效： 
• 解決了 multimedia wireless communication SIP/SoC 驗證的問題，包含： 
1. Test patterns of system behavioral and networking levels   
2. Co-exploring HW/SW design no need of: 
• Replicas of wireless communication counterparts 
• Deployment of wireless nodes 
• Motions of mobile nodes 
• Noise, fading, and uncertain dynamics generation 
• Embedded software porting: RTOS, protocol stacks, drivers 
• RF and analog front-ends circuitry 
• Expensive front-ends  equipments 
• 支援 cross-layer design 的 ESL 平台與可進行 ESL 驗證的 cross-layer 
design，用以進行 Architecture/Algorithm , HW/SW co-design  
推廣及運用的價值 
大幅降低系統晶片、矽智財設計與測試之成本，包含： 
1. 無須佈置真實動態的行動無線網路環境，包含節點與佈線成本。 
2. 無須嵌入式軟體(例如：RTOS, protocol stacks, drivers)就可以進行晶片初
步測試。 
3. 無須前端射頻與類比電路之設計與實作成本。 
4. 無須昂貴的射頻與類比電路量測設備，就可以進行數位矽智財之量測。 
 
※ 1.每項研發成果請填寫一式二份，一份隨成果報告送繳本會，一份送 貴單位
研發成果推廣單位（如技術移轉中心）。 
※ 2.本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。 
3.本表若不敷使用，請自行影印使用。  
Hindawi Publishing Corporation
EURASIP Journal on Wireless Communications and Networking
Volume 2009, Article ID 512507, 14 pages
doi:10.1155/2009/512507
Research Article
Fairness and QoS Guarantees of WiMAX OFDMA
Scheduling with Fuzzy Controls
Chao-Lieh Chen,1 Jeng-Wei Lee,2 Chi-Yuan Wu,2 and Yau-Hwang Kuo2
1 Department of Electronic Engineering, National Kaohsiung First University of Science and Technology, Kaohsiung 811, Taiwan
2 Department of Computer Science & Information Engineering, National Cheng Kung University, Tainan 701, Taiwan
Correspondence should be addressed to Chao-Lieh Chen, frederic@ieee.org
Received 1 July 2008; Revised 8 December 2008; Accepted 29 December 2008
Recommended by Ekram Hossain
A fairness and QoS guaranteed scheduling approach with fuzzy controls (FQFCs) is proposed for WiMAX OFDMA systems. The
controllers, respectively, adjust priority and transmission opportunity (TXOP) for each WiMAX connection according to QoS
requirements and service classes. The FQFC provides intra- and interclass fairness guarantees by making connections within the
same class achieve equal degree of QoS while at the same timemaking those without QoS requirements equally share the remaining
resources. Even in dynamic environments such asmobileWiMAXnetworks with time-variant traffic specifications, the FQFC fairly
guarantees delay, throughput, and jitter, which are seldom achieved at the same time by state-of-the-art solutions.
Copyright © 2009 Chao-Lieh Chen et al. This is an open access article distributed under the Creative Commons Attribution
License, which permits unrestricted use, distribution, and reproduction in any medium, provided the original work is properly
cited.
1. Introduction
IEEE 802.16 standard (WiMAX) [1, 2] is one of the
most popular standards for fixed and mobile broadband
wireless access systems to provide last mile access. Due to
various users with diverse QoS requirements and wireless
communication technologies, the resource scheduler plays
an important role to provide fairness and QoS guarantees.
As summarized in [3], a resource scheduler in wireless
multimedia networks needs to possess the following features:
efficient link utilization, delay bound, low implementation
complexity, throughput, scalability, and fairness.
For WiMAX and OFDMA systems, various scheduling
algorithms have been proposed for achieving QoS guar-
antees. For example, Liu et al. [4] proposed a priority-
based scheduler which assigns each connection a priority
updated according to QoS parameters and channel state
and then assigns time slots to connections according to the
order of priority values. The method has low implementa-
tion complexity because the scheduler simply updates the
priority of each connection per frame and allocates time
slots to the connection with the highest priority. However,
it does not consider fairness and jitter issues which are
important metrics for real-time applications. To maintain
low implementation complexity under considering fairness
and jitter, we use the priority-based scheduling scheme for
initial priority assignment and afterward, the proposed a
fairness and QoS guaranteed scheduling approach with fuzzy
controls (FQFC) mechanism takes care of the scheduling
job using fuzzy control approach. Many algorithms have
been proposed to deal with the fairness problem, and can
be briefly divided into two categories. The first category
is to reduce the resource allocation problem into an
optimization problem. Based on the optimization theory,
for example, [5, 6] have good performance on spectrum
efficiency and system utilization. They formulate the cross-
layer optimization problem to maximize the average utility
of all active users subject to certain constraints. However,
in addition to implementation complexity, these methods
still suffer some problems. To achieve optimal spectrum
efficiency, the optimization approaches may, on the other
hand, fail to provide QoS guarantees. Moreover, the relation
between traffic specifications and network state is uncer-
tain. Uncertainty and dynamics in mobile environment
make exact modeling of objective function and constraints
impossible when performing the optimization steps. In
this paper, the FQFC adopts fuzzy control technique to
deal with the modeling problem. The reason we use
EURASIP Journal on Wireless Communications and Networking 3
BE supports best-effort data streams. The QoS parameter
is request/transmission policy. In IEEE 802.16e [2], an
additional service class called extended real-time polling
service (ertPS) has superior efficiency than both UGS and
rtPS. It supports real-time variable-rate data streams, such
as VoIP with silence suppression. The QoS parameters
of ertPS are minimum reserved traffic rate, maximum
latency, request/transmission policy, and the tolerated jitter.
Hence, considering the QoS requirements of the four class
services, we calculate the reference goal as traffic specification
(TSPEC) according to these QoS parameters.
2.3. Resource Allocations in PHY Layer. IEEE 802.16 OFDMA
system defines two types of subcarrier permutations, dis-
tributed subcarrier permutation and adjacent subcarrier per-
mutation. The former permutation type includes partially
and fully used subcarriers (PUSC and FUSC) which are
pseudo-randomly selected and grouped into subchannels,
while the later includes adaptive modulation and coding
(AMC), and only adjacent subcarriers are clustered to
form subchannels. Dispersing noise and interference in
fast changing environment, the PUSC and FUSC modes
are suitable for mobile networks. For AMC mode, the
BS allocates appropriate subchannels for connections with
larger SNR to enhance system performance, and it is suitable
for fixed or low mobility environment. To support mobile
WiMAX, the FQFC scheduling and allocation are based on
distributed subcarrier permutation.
In OFDMA, the basic allocation unit is a slot that
composes of one subchannel along with an OFDMA symbol,
such that the resource allocation becomes a two-dimensional
problem. By using the distributed subcarrier permutation,
all subchannels are the so-called equally adequate for all
SSs [18], and our resource allocation is based on Raster
algorithm [18], in which the frame is filled row by row, from
left to right and from top to bottom, and efficiently reduces
the burst numbers.
2.4. Fairness. In wireless networks, the fairness definition is
not straightforward. As described in [19], a fair resource
allocation usually does not produce equal connection data
rate because the diverse connections also suffer from diverse
channel conditions, network states, and dynamics. The
dynamics result from mobility and time-variant traffic spec-
ifications (TSPECs). Moreover, WiMAX needs to provide
QoS guarantees for four classes of scheduling services.
Therefore, for fairness, it is necessary to consider QoS
guarantees for different class connections. We define two
types of fairness described as follows.
(i) Intraclass fairness: the connections within the same
class achieve equal degree of QoS.
(ii) Interclass fairness: the connections with QoS require-
ments achieve exactly their demands, and those with-
out QoS requirements equally share the remaining
resources.
Hence, our objective is to achieve both intraclass and
interclass fairness.
Actions
Controlled
process
Defuzzifier
Fuzzy controller
Fuzzy
inference
engine
Fuzzy
rule base
Conditions
e, e′
Fuzzifier
Figure 1: A general architecture of a fuzzy controller.
2.5. Fuzzy Controller. Classical controller requires model-
ing of the physical reality. This is significant in control
problems; however, it is difficult or even impossible to
construct precise mathematical models. The difficulty may
result from time-variant system behaviors, dynamics, and
uncertainty inmobile wireless communication environment.
Fuzzy controllers perform well under these circumstances.
A general fuzzy controller consists of four components: a
fuzzifier, a fuzzy rule base, a fuzzy inference engine, and a
defuzzifier. The interconnections among these components
and the controlled process are shown in Figure 1. The
fuzzifier maps crisp input into appropriate fuzzy sets to
express uncertainties. The fuzzy inference engine uses the
fuzzified measurements to evaluate the fuzzy implication
results. Finally, the defuzzifier deals with confliction of
fuzzy implications and transforms the fuzzy implication
results back to the crisp output. Two conditions are usually
monitored by the controller: error e and the derivative of the
error e′. With e and e′, the fuzzy controller issues control
actions.
3. Design of the Proposed Scheduling
Mechanism
In this section, we describe the scheduling mechanism for
multiple connections with various QoS requirements. The
FQFC scheduler assigns two variables with fuzzy inference
values for each connection with CID i, that is, the priority
Pi and the maximum number of packets TXOPi that
connection i can transmit in a frame duration. The FQFC
scheduler first initializes the two variables based on the
characteristics of connections and adjusts them, respectively,
by two fuzzy controllers to adapt to the dynamics of
system. As shown in Figure 2, the priority controller adjusts
Pi according to channel quality, QoS requirements, and
service classes. With the priority, the FQFC decides the
transmission order of connections. The TXOP controller
adapts TXOPi according to transmission rate and the queue
length difference between two contiguous transmissions of
the MAC layer.
3.1. Controller Design for ertPS & rtPS. Unlike the UGS class
having the highest priority that constant bandwidth can be
EURASIP Journal on Wireless Communications and Networking 5
1
0
µ
L M H
25 50 75
Loading (%)
(a)
1
0
µ
S M F
25 50 75
Normalized data rate (%)
(b)
1
0
µ
S M L
25 50 75
Goal delay/deadline (%)
(c)
Figure 4: Membership functions of fuzzy sets for goal delay.
With goal delay gi(t) and required jitter ji(t), we define
g
up
i (t) and g
low
i (t) as the upper and lower bounds of the
tolerable range, where g
up
i (t) = gi(t) + ji(t)/2 and g
low
i (t) =
gi(t)− ji(t)/2.
3.1.2. Priority Controller for Real Time Services. Figure 5
shows the control system including the priority controller,
the WiMAX system plant, and the delay observer. The delay
observer detects the HOL delay di(t). Then, the priority
controller compares it with the delay requirement gi(t), and
adjusts priority Pi(t). If ei(t) = di(t) − gi(t) is around zero,
the control system is stabilized around the requirement.
In our design, we denote negative, zero, and positive
forces with fuzzy singletons S, M, and L. The control actions
of these singletons at the conclusion parts of fuzzy rules are
as follows:
S: Pi(t) = Pi(t − 1)− δi(t),
M: Pi(t) = Pi(t − 1),
L: Pi(t) = Pi(t − 1) + δi(t),
where δi(t) is the priority influence of connection i in the tth
frame. The priority controller must confirm that the HOL
delay will not exceed the deadline. Hence, it adapts δi(t)
according to the time duration between goal delay and the
deadline. LetDi be the deadline,∆Di be the guard time before
the deadline, PrtPS be the maximum priority of real-time
connections, and tframe be the frame duration. Then, we have
δi(t) =
PrtPS(
Di − ∆Di − gi(t)
)
/tframe
. (2)
Rdelay
gi(t)
Error
ei(t)
Controller
Priority
Pi(t)
Plant
Odelay di(t)
Observer
Figure 5: The block diagram of the control system for HOL delay.
As we can see in (2), when the goal delay is closer to the
deadline, the adaptation force of the priority is larger. We
depict the priority initialization and controlled direction as
follows.
(a) Priority Setting. When the connection is in an initial stage
or the HOL delay is below g lowi (t), the priority controller
assigns the connection a priority according to channel
quality, QoS requirement, and service classes. For a real-time
connection i, the priority Pi(t) in the tth frame is assigned by
(3) which was proposed in [4]:
Pi(t) =


PrtPS ×
ri(t)
Rmaxi
×
1
Fi(t)
, if Fi(t) ≥ 1, ri(t) /= 0,
PrtPS, if F i(t) < 1, ri(t) /= 0,
0, if ri(t) = 0,
(3)
where PrtPS is the maximum priority of real-time connec-
tions, Rmaxi is the data rate of connection i in the highest
modulationmode, and ri(t) is the data rate of connection i in
the tth frame. ri(t)/R
max
i is the normalized data rate and the
connection with high received SNR results in higher priority.
Fi(t) is the delay requirement indicator:
Fi(t) = Di − ∆Di − di(t) + 1, (4)
where Di is the deadline, ∆Di is the guard time before
the deadline, and di(t) denotes the HOL delay. If Fi(t) ≧
1, the larger Fi(t) denotes the higher satisfaction of delay
requirement, which causes lower priority. If Fi(t) < 1, the
HOL delay has been over the guard time of deadline. The
connection should get resources immediately to avoid packet
losses. Hence, the priority is set as PrtPS. When ri(t) is zero,
the connection i is under deep fading and should not be
scheduled.
(b) Priority Controller. Let the controller action be the
priority Pi(t). One of the input ei(t) is the difference between
the actual value of the observed HOL delay di(t) and the
desired value gi(t), that is, ei(t) = di(t) − gi(t). The universe
of ei(t) is [−gi(t),Di(t) − gi(t)]. The variable ei(t) has three
linguistic values N, E, and P which represent fuzzy concepts
“Negative,” “Equal,” and “Positive,” respectively. The fuzzy
sets N, E, and P are characterized by the membership
functions shown in Figure 6.
EURASIP Journal on Wireless Communications and Networking 7
T
h
ro
u
gh
p
u
t
(K
b
/s
) Upper bound
Minimum reserved rate
Time (ms)
Figure 8: Control mechanism for nrtPS connection.
denote the number of packets in queue i in the tth frame.
The controller stores the bounded difference DCi(t) =
Qi(t)⊖Qi(t − 1) = max(Qi(t) − Qi(t − 1),−1) in the deficit
counter of connection i in the tth frame. Then, we addDCi(t)
to TXOPi(t)as follows:
TXOPi(t) = max
(
TXOPi(t − 1) +DCi(t), 0
)
. (7)
To avoid burst transmission, TXOP has an upper bound in
TXOP
up
i (t) =
⌈
di(t)− g
low
i (t)
tpi
⌉
. (8)
3.2. Controller Design for nrtPS. The nrtPS connection
supports delay-tolerant variable-rate data streams and guar-
antees minimum reserved rate. The control mechanism
for nrtPS connections can be divided into three steps: (1)
setting up minimum reserved rate and an upper bound,
(2) adjusting the priority according to average throughput
of nrtPS connections and the required jitter of real-time
connections, and (3) adjusting TXOP of nrtPS connections
according to the required jitter. Figure 8 shows the control
mechanism for nrtPS connection.
If the average throughput is lower than minimum
reserved rate, the priority controller raises the priority to
increase the throughput. Moreover, the controller needs to
prevent large jitter from over-high priority. Besides, if the
average throughput exceeds the upper bound, the controller
decreases the priority to release the resource. We depict the
controller design as follows.
3.2.1. Priority Controller. The priority controller in nrtPS
class is easier than in the real-time class. The QoS require-
ment is only to guarantee theminimum reserved rate. Hence,
we do not use fuzzy control and simply use the priority-based
scheduler for nrtPS connections. Let Ti(t) denote the average
throughput of connection i in the tth frame, and let Ri(t)
denote the instantaneous data rate of connection i in the tth
frame. The average throughput in the tth frame is usually
estimated over a time constant tc using moving average as
Ti(t+1)=


(
1−
1
tc
)
× Ti(t) +
1
tc
× Ri(t), if i = i∗,
(
1−
1
tc
)
× Ti(t), if i /= i∗,
(9)
where i∗ means connection i is scheduled in the tth frame.
For an nrtPS connection i, the priority Pi(t) in the tth
frame is defined as
Pi(t) =


PnrtPS − δi(t), if Fi(t) ≥ 1, ri(t) /= 0,
PnrtPS, if Fi(t) < 1, ri(t) /= 0,
0, if ri(t) = 0,
(10)
where δi(t) is the priority decrement, PnrtPS is the maximum
priority of nrtPS connection, and Fi(t) is the throughput
requirement indicator which is the ratio of average through-
put with respect to the minimum reserved rate Tmini
Fi(t) =
Ti(t)
Tmini
. (11)
If Fi(t) ≧ 1, the throughput requirement is satisfied, and the
controller decreases the priority to release resource. When
Fi(t) < 1 implying that the average throughput is less than
the minimum reserved rate, the connection should get more
resources immediately to achieve the requirement. Hence,
at this time, the priority is set to the maximum PnrtPS. The
priority decrement δi(t) is further defined as
δi(t) = k ×
TXOPi(t)× Lpacket
T
up
i − T
min
i
, (12)
where Lpacket is the packet length, T
up
i is the upper bound
of Ti(t) which is the maximum sustained rate in the traffic
specification, and k is a constant representing system load.
3.2.2. TXOP Setting. For nrtPS, the FQFC sets TXOPi(t)
according to the throughput upper bound T
up
i as
TXOPi(t) =
⌈
T
up
i ×
tframe
Lpacket
⌉
. (13)
3.2.3. TXOP Adaptation for Fairness. For intraclass fairness,
all nrtPS connections should have the same throughput ratio
of average throughput with respect to minimum reserved
rate. Via setting the upper bound T
up
i in (13), we control the
average throughput within the range between the minimum
reserved rate and the upper bound, and we make the
throughput ratio of all nrtPS connections the same. For
interclass fairness, the average throughput will not exceed the
upper bound. Hence, we can release more resources to the
connections without QoS requirements.
EURASIP Journal on Wireless Communications and Networking 9
(2) the connections without QoS requirements equally share
the remaining resources.
For the first fold, we introduce a requirement indicator
IR,i to show the degree of the connection close to the demands
as
IR,i = e
−k|xi−Gi|, (21)
where k is a tunable parameter which determines the
tolerable range. xi and Gi are the average state and the
QoS goal of class i, respectively. In the real-time class,
the average state is the mean loss rate, and its goal loss
rate is zero. In the nrtPS class, the QoS parameter is the
average throughput, and the goal is the minimum reserved
rate. The smaller the difference between the average state
and the QoS goal is, the larger requirement indicator is.
When the mean allocated resources for a class are away
from the requirement, no matter above or below the goal,
the requirement indicator decreases. When the allocated
resources reach the requirements exactly, not only the QoS
is guaranteed but also the remaining resources are most
preserved at the same time.
The BE class has no QoS requirement. For the second
part, we introduce Jain’s fairness index [21] as the BE fairness
index:
IBE =
(∑n
i=1Ti
)2
(
n ·
∑n
i=1T
2
i
) , (22)
where n is the number of connections without QoS require-
ments. The index equals to one indicates perfect fairness in
the class without QoS requirements. Then, we utilize the
requirement indicator IR,i and the BE fairness index IBE to
define the interclass fairness index as follows:
FI = α×
m∑
i=1
IR,iwi + β × IBE,
m∑
i=1
wi = 1,
α + β = 1.
(23)
In (23), m is the number of classes with QoS requirements,
and wi is the weighting factor of class i, which determines the
importance of the class. α and β are the weighting factors of
the classes with and without QoS requirements, respectively.
In contrast to the indices of intraclass fairness, a larger FI
value indicates better interclass fairness.
4.2. Simulation Configuration. The parameters used in this
simulation are listed in Table 1, where OFDM FFT size
represents the number of subcarriers an OFDMA symbol
composes. The packet length is 1024 bits, and the maximum
priority of each service class is PrtPS = 1.0 and PnrtPS = 0.8,
and for best effort, PBE = 0.6. The weighting factors wi, α, β
in (23) are all 0.5. Each connection uses a fixed modulation.
The FQFC allocates fixed number of time slots to UGS
connections. The FQFC adopts persistent resource allocation
[1, 22, 23] for UGS service because it has the highest
priority. We focus on the performance of real-time, nrtPS,
and BE connections. Besides, in our survey, the priority-
based scheduler was proposed only for WiMAX OFDM PHY
[4]. FQFC outperforms many state-of-the art schedulers
for WiMAX OFDM PHY. To present the improvement by
FQFC, we modify the priority-based scheduler in [4] to work
with WiMAX OFDMA PHY by using the Raster algorithm
and regard it as the priority-only scheduler. Then, FQFC
fuzzy controllers further improve the fairness and QoS
performance of the priority-only scheduler. There are four
simulation scenarios as follows.
(i) Scenario 1. We set 20 real-time connections. The
QoS requirements of real-time connection are the
loss rate, deadline, and required jitter. The traffic
rates of connections are 8 connections in 1Mbps,
10 connections in 500 kbps, and 2 connections in
250 kbps. This scenario is to verify the guarantees
of maximum latency, the tolerated jitter, and the
intraclass fairness in real-time class. It is difficult
to find out the mapping between priority and QoS
requirements. We prove that the FQFC can efficiently
control the delay.
(ii) Scenario 2. We set 10 real-time connections and
10 nrtPS connections. The QoS parameter of nrtPS
connection is the minimum reserved rate. The traffic
rates are 2 real-time connections in 1Mbps, 8 real-
time connections in 500 kbps, 5 nrtPS connections
in 1Mbps, and 5 nrtPS connections in 500 kbps.
This scenario is to verify the guarantees of minimum
reserved rate and fair resource allocation of the FQFC
scheme.
(iii) Scenario 3. We set 10 real-time connections, 10 nrtPS
connections, and 10 BE connections. BE connection
has no QoS requirement. The traffic rates are 1 real-
time connection in 1Mbps, 9 real-time connections
in 500 kbps, 3 nrtPS connections in 750 kbps, 2 nrtPS
connections in 500 kbps, 5 nrtPS connections in
1Mbps, and 10 BE connections in 100 kbps. This
scenario is to verify the fair resource allocation of
FQFC.
(iv) Scenario 4. In this scenario, we simulate the wireless
link degrades. This will cause the modulation to
change. The experiment is designed to test the
robustness of the FQFC whether it can efficiently
track the goal delay when the channel quality
degrades. The simulated network consists of 1 BS and
10 SS (numbered from 1 to 10). In the downlink,
each SS with number i (i = 1 ∼ 10) has 1 real-time,
1 nrtPS, and 1 BE connection with CID i, 10 + i,
20 + i, respectively. The connections from SS1 to
SS5 apply with QPSK modulation, and connections
from SS6 to SS7 apply with 16-QAM modulation.
All the other connections initially adopt 64-QAM
modulation. This is for simulating the different
channel conditions.
EURASIP Journal on Wireless Communications and Networking 11
0
20
40
60
80
100
120
T
im
e
(m
s)
1 2 3 4 5 6 7 8 9 10
Real-time connection CID
Delay
Jitter
Required jitter
Deadline
Figure 12: Delay and jitter performances of real-time connections
in priority-only scheduler.
by throughput indicators. Figure 14 shows that all nrtPS con-
nections with FQFC control keep their throughput indicators
almost the same about 1.15. The result means that the FQFC
guarantees minimum reserved rate. For the connections with
priority-only-based scheduler [4], the throughput indicators
of the last four nrtPS connections are higher than the others
since priority-only-based scheduler provides more resources
to the connections using high-bitratemodulation. The FQFC
focuses on making the connections of the same class achieve
the equal degree of QoS. As illustrated in Table 2, for nrtPS,
the intraclass fairness index of the FQFC is close to zero
which is much lower than the one of the priority-only
scheduler. Hence, the FQFC also guarantees the intraclass
fairness for the connections of the nrtPS class.
4.3.3. Scenario 3: Intra- and Interclass Fairness and QoS
Guarantees of All Classes. For QoS evaluation, Figures 15, 16,
and 17 show that the FQFC guarantees the delay and jitter of
real-time connections as well as guarantees the throughput
of nrtPS connections. Even for users with diverse QoS
requirements, the FQFC still provides QoS guarantees. For
BE connections, although they have no QoS requirement,
the remnant resources should be fairly allocated to all BE
connections. In Figure 18, BE connections under FQFC
control obtain throughputs and are not starved.
For intraclass fairness evaluation of the BE class, we
compare the FQFC with the priority-only scheduler regard-
ing average throughput. Figure 18 shows that the average
throughputs of all BE connections under the FQFC control
are nearly the same. The priority-only scheduler provides
more resource to the last four BE connections since they
employ higher rate modulation. Table 2 shows that the
intraclass fairness index of the FQFC is close to zero,
which is much lower than the one of the priority-only
scheduler. For every real-time connection, FQFC sets the
goal delay below the deadline for a certain distance in
0
20
40
60
80
100
120
T
im
e
(m
s)
1 2 3 4 5 6 7 8 9 10
Real-time connection CID
Delay
Jitter
Goal delay
Required jitter
Deadline
Figure 13: Delay and jitter performances of real-time connections
in FQFC.
0
0.2
0.4
0.6
0.8
1
1.2
1.4
A
ve
ra
ge
th
ro
u
gh
p
u
t/
m
in
im
u
m
re
se
rv
ed
ra
te
11 12 13 14 15 16 17 18 19 20
nrtPS CID
Priority-only
FQFC
Figure 14: Average throughput/minimum reserved rate of nrtPS
connections.
terms of the tolerable jitter. Since the goal is for prior-
ity and TXOP controllers to follow, intraclass fairness is
achieved when real-time connections have almost the same
loss rate and jitter performances based on the intraclass
fairness criteria. For nrtPS connections, the FQFC control
algorithm maintains their ratios of throughput achievement
over minimum reserved rate as close to 1 as possible.
Again, as long as BE connections can evenly share the
remained resources from real-time and nrtPS connections,
intraclass fairness of BE connections is achieved. Hence,
the FQFC guarantees the intraclass fairness for the BE
classes.
For interclass fairness evaluation, in Figure 17, the
throughput indicator of the FQFC is lower than the one of
the priority-only scheduler since the FQFC always preserves
EURASIP Journal on Wireless Communications and Networking 13
0
5
10
15
20
25
30
35
40
P
D
U
la
te
n
cy
(m
s)
0 2000 4000 6000 8000 10000
Simulation time (ms)
PDU latency
Goal delay
Deadline
Figure 19: PDU delay of real-time connection 3.
out of SS3. Figure 21 shows the average throughput of BE
connections 23 and 25. The simulation shows that
(i) when the link degradation occurs, the FQFC adjusts
the goal delay and the tolerable range according to
the updated modulation. The FQFC continues to
make the delay of real-time connection 3 fall in the
tolerable range as shown in Figure 19. Hence, the
FQFC can efficiently control the delay according to
the goal delay and the tolerable range;
(ii) the service curves of nrtPS connections 11 and 13
in Figure 20 distinguish a throughput drop from the
4.0th second to the 6.0th second, whereas FQFC
still maintains the throughput to meet the QoS
requirements. The service curves of BE connections
23 and 25 in Figure 21 also distinguish a throughput
drop from the 4.0th second to the 6.0th second.
The resources are released to guarantee the QoS of
real-time connection 7 as shown in Figure 19. For
intraclass fairness in nrtPS connections and BE con-
nections, all nrtPS connections keep almost the same
resource usage ratio. For interclass fairness, nrtPS
and BE connections release resources to guarantee
the QoS of real-time connections. Hence, the FQFC
guarantees both QoS and fairness even in case that
wireless link degrades.
5. Conclusions
A fairness and QoS guaranteed scheduling approach with
fuzzy controls FQFC algorithm is proposed for WiMAX
OFDMA systems. Different from the utility-fairness, new
fairness and QoS evaluation criteria in terms of loss rate,
jitter, and throughput are proposed for different classes.
The proposed FQFC scheme controls the delay, jitter,
and throughput QoS parameters efficiently providing both
0
200
400
600
800
1000
A
ve
ra
ge
ra
te
(k
b
p
s)
0 2000 4000 6000 8000 10000
Simulation time (ms)
nrtPS connection 11
nrtPS connection 13
Minimum reserved rate
Upper bound (maximum sustained rate)
Figure 20: Average throughput of nrtPS connections 11 and 13.
0
50
100
150
200
A
ve
ra
ge
ra
te
(k
b
p
s)
0 1 2 3 4 5 6 7 8 9 10
×103Simulation time (ms)
BE connection 23
BE connection 25
Figure 21: Average throughput of BE connections 23 and 25.
fairness and QoS guarantees. Rather than using hard com-
putation approaches such as utility-based optimizations, we
use fuzzy controller to perform scheduling and resource
allocations to resolve mapping among priority, transmission
opportunity, and QoS requirements. The proposed FQFC
scheme provides both intra- and interclass fairness guaran-
tees in addition to QoS guarantees while implementation is
with low complexity.
References
[1] IEEE Std. 802.16-2004 (Revision of IEEE Std. 802.16-2001),
“IEEE standard for local and metropolitan area networks—
part 16: air interface for fixed broadband wireless access
systems,” Revision of IEEE Std. 802.16-2001, October 2004.
EURASIP Journal on Image and Video Processing
Special Issue on
Selected Papers from MultiMedia
Modeling Conference 2009
Call for Papers
The 15th International Multimedia Modeling Conference
(MMM2009) was held January 7–9, 2009 at EURECOM,
Sophia-Antipolis, France. MMM is a leading international
conference for researchers and industry practitioners to
share their new ideas, original research results, and practical
development experiences from all multimedia-related areas.
MMM2009 is held in co-operation with the ACM Special
Interest Group on MultiMedia (ACM SIGMM). This 15th
edition of MMM marks the return of the conference to
Europe after numerous years of activity in Asia, and we
are proud to organize such a prestigious conference on the
French Riviera.
MMM2009 features a comprehensive program including
three keynote talks, six oral presentation sessions, three
poster sessions, and one demo session. The 135 submissions
included a large number of high-quality papers in multi-
media content analysis, indexing, coding, as well as appli-
cations and services. We thank our 153 Technical Program
Committee members and reviewers who spent many hours
reviewing papers and providing valuable feedbacks to the
authors. Based on the 3 or 4 (sometimes even 5) reviews per
paper, the Program Chairs decided to accept only 22 as oral
papers and 20 as poster papers. The acceptance rate of 32%
follows the MMM tradition of accepting only the papers of
the highest technical quality. Additionally, one award for the
best paper was chosen.
Before submission authors should carefully read over the
journal’s Author Guidelines, which are located at http://www
.hindawi.com/journals/ivp/guidelines.html. Prospective au-
thors should submit an electronic copy of their complete
manuscripts through the journal Manuscript Tracking Sys-
tem at http://mts.hindawi.com/, according to the following
timetable:
Manuscript Due May 1, 2009
First Round of Reviews August 1, 2009
Publication Date November 1, 2009
Lead Guest Editor
Benoit Huet, Multimedia Communications Department,
EURECOM, 2229 Route des Cretes, BP 193, 06904
Sophia-Antipolis, France; benoit.huet@eurecom.fr
Guest Editors
Alan Smeaton, Centre for Sensor Web Technologies,
Centre for Digital Video Processing and School of
Computing, Dublin City University, Glasnevin, Dublin 9,
Ireland; alan.smeaton@dcu.ie
Ketan Mayer-Patel, Department of Computer Science,
University of North Carolina at Chapel Hill, Chapel Hill,
NC 27599-3175, USA; kmp@cs.unc.edu
Yannis Avrithis, Image, Video and Multimedia Systems
Laboratory (IVML), National Technical University of
Athens, 157 73 Athens, Greece; iavr@image.ntua.gr
Hindawi Publishing Corporation
http://www.hindawi.com
International Journal of Microwave Science and Technology
Special Issue on
CMOS Application to Wireless Communications
Call for Papers
Recent advances in semiconductor process technologies have
motivated the development of fully integrated CMOS circuits
for wireless communications. Consequently, tremendous
research efforts have been directed to the design and imple-
mentation of CMOS radio-frequency integrated circuits
(RFICs). The objective of this special issue is to highlight
the up-to-date progress in the field of CMOS RF devices and
circuits.
The International Journal of Microwave Science and
Technology invites authors to submit papers for the special
issue on CMOS RF. Original papers previously unpublished
and not currently under review by another journal are
solicited for this special issue. Topics of interest include, but
are not limited to:
• CMOS and BiCMOS RF device technologies
• Small-signal circuits
• Large-signal circuits
• Mixed-signal circuits
• Millimeter-wave integrated circuits
• Signal generation circuits
• Frequency-conversion circuits
• Wide-band integrated circuits
• Cellular system IC’s and architecture
• Emerging RF applications
• Modeling and CAD
Before submission, authors should carefully read over the
journal’s Author Guidelines, which are located at http://
www.hindawi.com/journals/ijmst/guidelines.html. Prospec-
tive authors should submit an electronic copy of their
complete manuscript through the journal Manuscript Track-
ing System at http://mts.hindawi.com/, according to the
following timetable:
Manuscript Due September 1, 2009
First Round of Reviews December 1, 2009
Publication Date March 1, 2010
Lead Guest Editor
Liang-Hung Lu, Department of Electrical Engineering,
National Taiwan University, Roosevelt Road, Taipei 106,
Taiwan; lhlu@cc.ee.ntu.edu.tw
Guest Editor
Huei Wang, Department of Electrical Engineering,
National Taiwan University, Roosevelt Road, Taipei 106,
Taiwan; hueiwang@ntu.edu.tw
Hindawi Publishing Corporation
http://www.hindawi.com
considered in [3] and these impacts can be reduced by further 
utilizing cross-layer algorithms. Traditionally, in realization of a 
MAC SIP supporting the mechanism proposed in [3], one suffers 
costs and efforts as mentioned. All these additional efforts are not 
the focus of the MAC mechanism while they do take lots of time 
and costs. When talking about cross-layer optimization, 
considerable iterations of these cost-ineffective efforts are 
required to explore algorithms and architectures. In this paper, the 
proposed the HCLC ESL verification framework avoids the 
mentioned costs at the early design stage of networking SIPs by 
using the network simulator. Moreover, the HCLC model 
alleviates whole system complexity using hierarchical control and 
it provides software and hardware complexity leverage to the 
whole system. One easily verifies an SIP’s system behavior 
regarding cross-layer networking and co-explores algorithms and 
architectures through the HCLC hierarchy. 
The hardware-software-network (HSN) co-simulation was first 
proposed in [9], where the terms hardware, software, and network 
respectively corresponds to the SystemC modules, the instruction 
set simulator, and network topology constructed by NS-2. 
Different from [9], we propose real hardware FPGA prototyping 
with the NS-2 simulator such that we can gradually evolving the 
whole system toward SoC each time when mature algorithm 
realization fit well to the selected architecture. Therefore, 
hardware performances including timing and power consumptions 
are measurable before embedded software porting. Furthermore, 
for fast exploration of the design space, we map cross-layer 
algorithms and architectures into the HCLC model and we exploit 
the HCLC model to verify the real hardware SIP’s behaviors 
regarding cross-layer networking. In this way, designs including 
software protocols and MAC and PHY hardware become 
reconfigurable and true networking behavior are easily verified. 
The rest of the paper is organized as follows. Section 2 depicts the 
HCLC ESL verification framework where HCLC model and ESL 
criteria are detailed. A case study in Section 3 demonstrates how 
FPGA implementation of a MAC layer QoS SIP is verified 
according to the ESL criteria. Modifications to the initial FPGA 
implementation are made to cooperate with upper layer software 
controllers and thus to approach optimal video streaming over 
Vehicular Ad Hoc Networks (VANET). Simulations and 
evaluations of the whole HCLC system are provided in Section 4. 
Finally, we conclude contributions in Section 5. 
2. THE HCLC ESL VERIFICATION 
Figure 1 shows the framework of the proposed HCLC ESL 
verification. The HCLC layer controllers use sockets for signaling 
with NS-2. The illustrated message exchanges are in case of video 
streaming over wireless network. The sockets can be real logic 
connections for control packets transmission when the underlined 
cross-layer scheme adopts external entities [4]. The signaling 
among protocol layers includes controls and metrics. For channel 
access in 802.11e, for example, the controls can be the back-off 
window size and transmission priority adaptations while the 
metrics to observe are MAC access delay, MPDU drops, and 
collisions. FPGA prototyping is included in the framework. In 
case that H.264 SVC video codec is also implemented as FPGA 
prototype, multi-resolution streaming is also verified with HCLC 
controlled wireless networks. In this case, the HCLC incorporate 
adaptive modulation and coding (AMC) at the physical layer [2], 
allocation and scheduling at the MAC layer [10], packet 
classification and routing at the network layer, congestion and 
flow control at the transport layer, and rate control at the 
application layer where H.264 SVC is realized. 
2.1 The HCLC Model 
The hierarchy and mathematical model of the HCLC is as Figure 
2 where the individual controller at each layer regards lower 
layers including the wireless environment as a single plant and 
control from upper layers as reference command. An individual 
controller could either modified, bypass, or track the reference 
command from upper layers and then forwards to the next layer as 
the next layer’s command [1]-[2]. At a specific layer n, fn is the 
individual controller issuing control un, gn represents upper layers 
generating reference command cn, and pn represents lower layers 
including the wireless environment. The objective of the HCLC 
control is that output y tracks the input x. For example, in case of 
H.264 SVC video streaming, we wish the video encoding rate x 
equals the radio transmission rate y. That is, the 
composition ,n n np f g I=  the identity. The objectives and 
constraints of individual controllers at layers could be different 
and even dependent. At this time we adopt the multistage 
inference for conflict resolution [2]. The observers affect the 
stability of the whole system, to accurately measure system state 
(metrics) and to maintain the stability, design of observer should 
consider the maximum state changing rate and force sampling of 
the system state follow Nyquist-Shannon sampling theorem as 
state in [1]. 
2.2 HCLC ESL Verification Criteria 
To co-explore the algorithm and architecture, in addition to 
hardware performances such as timing and power consumption, 
the other criteria for selection comes directly from the metrics 
defined in each layer. We select some of the criteria for video 
streaming over VANET as follows, which are the networking 
system performance metrics that cannot be verified using 
traditional ESL tools. 
1) Streaming quality based on PSNR: This is the basic 
requirement that we wish video streaming have high quality. 
2) Intra- and inter-class fairness [10] among network connections: 
The fairness depends not only on MAC/PHY layers 
implemented in SIP but also on upper protocol layers. 
Therefore, the fairness of an SIP design cannot be measured 
without the proposed HCLC ESL framework. 
3) Adaptability to dynamic environment: Quality of wireless 
signal degrades dramatically when obstacles appear in the 
communication path. The obstacles can be buildings, road 
side trees, neighbor vehicles and so on causing different 
communication patterns [11]. Thus the channel model is also 
dynamic [12]. The adaptive channel coding and modulation at 
the PHY layer against multipath fading could fail in 
maintaining low packet error rate if single channel model is 
considered for the adaptation [2]. The adaptability of a 
MAC/PHY SIP should be enhanced by cooperating controls 
with upper layers such as packet length at the application 
layer [2], retransmission and flow control at the transport layer, 
and routing path at the network layer. 
4) Robustness to network traffic bursts: Mobile nodes 
dynamically join and leave a certain area. The loading of 
communication channels bursts due to network traffic bursts. 
An SIP at the MAC layer need to be robust enough and must 
layer. We do not perform adaptation functions such as video rate 
adaptation, routing path selection, and sending rate calibration of 
the upper layers. The network environment features a more 
complex scenario than in [3]. The simulations are extensively 
performed using the network simulator NS-2 version 2.29 to 
prove the satisfaction of the five criteria. The total channel 
bandwidth is 2 Mbps and thus the channel tends to be saturated if 
all MPEG-4 and background flows are all active. The default 
EDCA parameter values are given in the IEEE 802.11e. The 
interface queue length for all traffics is 50. The MPEG-4 encoder 
and sender is EvalVid [13] which encapsulate I, P, and B frames 
data into variable packet sizes. Therefore, the video bit rate is not 
constant. There are twice background bursts in the total 
simulation time 70 seconds. One starts at time 7th second and ends 
at 30th second and the other starts at time 40th second and ends at 
63rd second. We replace the DFLC in [1] with the real FPGA 
hardware whose architecture is shown in Figure 4 except that the 
fuzzy singletons are replaced with dynamic ones as (2) assigned 
by upper layers. This is to co-verify the hardware SIP’s system 
level behavior with the software upper layer protocols. The 
simulation results are as Table 2. The stream with HCLC control 
is marked with “(HCLC).” The (µbk, σbk)’s are the means and 
standard deviations of background flows. The evaluation is based 
on the five criteria as follows: 
1) PSNR: Using the HCLC control, the streaming quality of the 
two MPEG-4 streams based on PSNR is as good as Scenario 
0 without background traffic. Figure 8 also shows the instant 
PSNR performances using HCLC. 
2) Fairness: We study two comparing aspects. First, when both 
using HCLC shown in Table 2, the traffics of the same 
TSPEC have the same video quality no matter how different 
their background environments are. Second, Table 2 shows 
that nodes using HCLC does not degrade performance of 
other streams without HCLC. Moreover, the means and 
standard deviations (µbk, σbk) of total background throughput 
in Scenarios 0 to 2 in Table 2 where we find out that HCLC 
does not much sacrifice other background traffics and 
preserves fairness to them. At the same time, since a node 
using HCLC for streaming always allocates stable bandwidth, 
it even helps other traffics obtain stable bandwidth as shown 
in the second column of Scenario 1. 
3) Adaptability: The HCLC-controlled video streams effectively 
adjust back-off windows when video stream between node 0 
and 1, shown in Figure 6 move from a clear area into a 
crowded one with another video stream from nodes 14 to 15. 
4) Robustness to bursts: From Figure 8, the background traffics’ 
sudden bursts do not highly affect the streaming quality. 
When capacity saturated that two video streams contend for 
channel access, video streams fast recover its PSNR quality. 
5) Complexity of architecture: The conclusion fuzzy singletons 
as (2) are dynamically assigned by upper layers. Thus, we 
don’t need large amount of fuzzy sets and fuzzy rules. 
5. CONCLUSIONS 
Cross-layer support for ESL verification and vice versa ESL 
verification for cross-layer designs are both achieved, which is 
seldom seen in the state-of-the-art contributions. At early design 
stage, the HCLC ESL verification eases design of wireless 
networking SIPs by replacing embedded software with the 
network simulator. Moreover, replicas of communication 
counterparts to deploy network topology are not necessary. 
Reconfigurable FPGA prototyping hardware together with 
protocol layers are co-verified according to system level criteria 
such that algorithm and architecture are easily co-explored. 
MPEG4
UDP/IP
MAC
OFDM PHY
Rate Control
Observer
packets
controls
Cong. Win/Relay
Observer
Alloc./Sched. SIP
Observer
AMC
Observer
…
metrics
…
SNR/BER
Backoff window
mQAM/PWR
MacAccessDelay
Collisions, Drops
max Rate/Pkt Len
class/routing/TSEPC
end2end delay&
energy...
Rate distortion
FPGA(s)
NS2HCLC Sockets
 
Figure 1. The HCLC ESL Verification framework illustrating 
application of video streaming over wireless networks. 
 
Upper layers
gn
Layer n
fn
Lower layers
plant pn
Observer
on
Observers
on+1…om
Cross-layer control
x y
Cross-layer observer ...m no o 
n n np f g I= Goal:
cn
un
 
Figure 2. Hierarchy and mathematical model of the HCLC. 
 
PCB boardReplace embedded CPU;
Provide test benches
Wireless Net.
&
Protocols
(NS2)
Provide PCB link
& configurations
EDA tools 
(MATLAB 
Simulink)
MAC/PHY 
(FPGA)
MCU/DSP
 
Figure 3. The HCLC ESL verification with network simulator, 
FPGA hardware, and associated EDA tools. 
 
8–bit 
fixed-pnt
with 7-bit
fraction
max=1 Divide-by-zero
prevention
3
1
k k
k
c µ
=
∑ i
Sum Divider
7-bit fraction
7-bit frac.
7-bit frac.
4
4
4
8
8
8
12
12
12
9
L
M
S
Singletons
c1
c2
c3
3
1
k
k
µ
=
∑
3
1
3
1
k k
k
ij
k
k
c
CWmin
µ
µ
=
=
=
∑
∑
i
reset
 
Figure 4. The RTL model of the fuzzy controller for a 
category. 
 
(a) Goal and moving average of MAC access delay
(b) Background mean arrival and packet length
1000
0.5
0
0
200
Simulation time1000
 
Figure 5. Simulation of the fuzzy QoS controller hardware. 
 
Hierarchical Cross-Layer Control ESL Verification for 
Wireless Communications 
Chao-Lieh Chen 
Depart. Electronic Engineering 
National Kaohsiung First Univ. of 
Science and Technology 
Kaohsiung City, Taiwan 
+886-7-6011000 ext 2517 
frederic@ieee.org 
Wu-Liang Cheng 
Depart. Electronic Engineering 
Kun-Shan University of Technology 
Tainan County, Taiwan 
+886-6-2050262 
chengwuliang@gmail.com 
Chun-Ching Wu 
Depart. Electronic Engineering 
Kun-Shan University of Technology 
Tainan County, Taiwan 
+886-6-2050262 
s.147@yahoo.com.tw 
 
ABSTRACT 
We propose a cost-effective and efficient Electronic System Level 
(ESL) verification framework for exploration of cross-layer 
algorithms and architectures of wireless multimedia networking 
embedded systems. In the proposed ESL platform, a network 
simulator alleviates both benchmarking and deployment of 
wireless network environment when fitting a Silicon Intellectual 
Property (SIP) prototype to the Field-Programmable Gate Array 
(FPGA). We further integrate the Hierarchical Cross-Layer 
Control (HCLC) model with the ESL platform to form an efficient 
and cost-effective verification framework. With the proposed 
framework, cross-layer algorithms and system prototypes are 
easily co-verified. An IEEE 802.11p VANET case study show 
that we efficiently approach optimal collaborations between MAC 
layer QoS SIP and upper layer protocols based on the fast 
exploration of cross-layer control algorithms and architectures. 
Categories and Subject Descriptors 
B.7.2 [Integrated Circuits]: Design Aids – Simulation, 
Verification 
General Terms 
Algorithms, Measurement, Design, Experimentation, Verification. 
Keywords 
algorithm and architecture co-design, electronic system level 
verification, cross-layer design, wireless multimedia network 
1. INTRODUCTION 
Cross-Layer Designs (CLDs) [1]-[4] provides novel QoS 
improvement of wireless multimedia networks. In design of 
networking SIPs, it is essential to explore cross-layer algorithms 
and architectures to interact with upper layer software protocols. 
However, traditionally it is cost-ineffective to perform realistic 
Electronic System Level (ESL) verification for a wireless network 
Silicon Intellectual Property (SIP) due to requirements of 
deploying multiple replicas of communication counterparts, 
physical layer (PHY) circuitry such as RF and analog front-end 
implementation, and measurement equipments costs. Moreover, 
porting and debugging of embedded software including drivers, 
real-time operating systems, and protocols are also time-
consuming. Exploration of CLD algorithms and architectures 
becomes even more difficult since the solution space expands 
extremely large when considering collaboration of several 
communication protocol layers. 
Current general-purpose ESL verification tools such as [5] lack 
networking behavior verification, least of cross-layer design 
support. In this paper, we prove that without networking support 
an ESL platform fails in verification of networking SIPs such as 
an IEEE 802.11e MAC. We exploit advantages of the network 
simulator, NS-2 [14], to provide protocol stacks, test benches, and 
wireless networking environment when verifying the network 
SIPs. Moreover, we integrate the Hierarchical Cross-Layer 
Control (HCLC) model [1]-[2] with ESL verification to form an 
efficient and cost-effective framework for approaching optimal 
collaboration among video encoders, the MAC/PHY QoS 
controller, and other protocol layers. With the proposed 
framework, performance indices of video streaming over wireless 
networks are easily verified. We demonstrate how CLD algorithm 
and architecture are co-verified using the proposed framework. 
Then, based on the selected algorithm and architecture, we 
implement the MAC/PHY QoS SIP collaborated with the video 
encoder to achieve optimal streaming quality. 
The concept of algorithm and architecture (A/A) co-design for 
wireless networks was early proposed in [6]. However, related 
ESL verification platform and cross-layer supports were not 
mentioned. In [7] A/A co-design for wireless communications 
with primary criterion of energy-efficiency is proposed. After [6] 
and [7], some A/A co-design methods such as [8] for video 
encoding circuits and systems are proposed. These methods aim at 
the video compression quality rather than quality of streaming 
over wireless networks. Since one primary purpose of video 
compression is streaming over networks, the transmission 
adaptation is highly related to the video encoder. For example, 
ITU H.264 scalable video coding (SVC) proposes multi-
resolution encoding for streaming high definition videos over 
networks according to network conditions. The classification of 
encoded data for packet differentiation becomes essential. The 
authors in [3] propose a streaming method for H.264 video where 
data partitions are transmitted over different access categories. 
More important data partition goes through a queue of higher 
priority to utilize the differentiation mechanism of the Enhanced 
Distributed Channel Access (EDCA) MAC in the 802.11e. The 
impacts of intra-node and inter-node background traffics are not 
 
Permission to make digital or hard copies of all or part of this work for 
personal or classroom use is granted without fee provided that copies 
are not made or distributed for profit or commercial advantage and that 
copies bear this notice and the full citation on the first page. To copy 
otherwise, or republish, to post on servers or to redistribute to lists, 
requires prior specific permission and/or a fee. 
IWCMC’09, June 21–24, 2009, Leipzig, Germany. Copyright © 2009 
ACM 978-1-60558-569-7/09/06...$5.00 
have the efficient recovering ability from QoS degradation 
when total network traffics exceed the capacity. 
5) Complexity of architecture: The co-design of the algorithm 
and architecture is to provide optimal leverage of complexities 
between software and hardware such that both feature 
satisfactory low complexity. 
2.3 Prototyping PCB Board 
Exploring the algorithms and architectures, we adopt PCB board 
with MCU and FPGA to see how metrics are met by the selected 
architecture and control algorithms in HCLC. Moreover, for 
evolving the whole system design toward SoC, we implement 
algorithms in NS-2 and EDA tools to FPGA according to the 
selected architecture since the algorithms meet the verifications 
criteria. Then, the FPGA hardware architecture is also verified 
and reconfigured iteratively util the above critria are met. Figure 3 
shows the prototyping system including the FPGA on the PCB, 
the network simulator, and EDA tools. The EDA tools, such as 
MATLAB Simulink, provides PCB connection and 
FPGA/firmware configurations in addition to realization of HCLC 
algorithms. Before porting embedded software, the network 
simulator replaces embedded host CPU in addition to wireless 
communication scenarios. We see that all entities are connected 
via network and thus the proposed HCLC ESL verification is 
distributed which allows engineers in different places perform the 
A/A exploration. 
3. CASE STUDY -- STREAMING VIDEOS 
OVER VANET 
In this section, we demonstrate A/A co-design of a MAC layer 
QoS control SIP that support video streaming over a vehicular ad 
hoc network (VANET). To support video streaming over VANET, 
IEEE 802.11e Enhanced Distributed Channel Access (EDCA) 
wireless technology is considered which is also adopted by the 
IEEE 802.11p WAVE technology. The candidate MAC layer QoS 
control is a fuzzy controller adapting the contention window 
parameter CWmin in the EDCA function. We first consider the 
pure hardware implementation without the HCLC ESL 
verification. 
3.1 Pure FPGA Hardware Implementation 
To implement the fuzzy QoS controller, a register transfer level 
(RTL) design that fit to the FPGA prototype is as Figure 4, which 
realizes the four fuzzy rules using Mamdani implication method 
where the conclusion fuzzy sets are three singletons L, M, and S 
representing fuzzy concepts “Large,” “Medium,” and “Small” of 
the exponent u of CWmin at the conclusion part of 4-bit wide. In 
Figure 4, the input from the membership functions will not greater 
than 1 and we adopt 2-digit fraction precision, which requires 7 
bits in the fraction part, and totally 8-bit width is required for the 
three matching degree inputs. Thus, the result of multiplier-and-
add operation is 12-bit wide. Finally, the divider produces the 
exponent u of CWmin. That is, CWmin is power of the persistent 
factor (PF) and CWmin = PFu. The hardware controller issues a 
control every system clock cycle by pipelining the multipliers and 
dividers into two stages. There are totally 5 stages in the pipeline. 
To simulate the hardware architecture of the fuzzy QoS controller, 
as shown in Figure 5(b), we assume that the packet arrival and 
length of background traffics are Poisson and exponentially 
distributed respectively which are commonly used for arrival rate 
and time interval modeling. Moreover, the mean arrival and 
length burst as square and sinusoidal waves. The simulation of 
2000 packets’ MAC access delays in unit of slots is as Figure 5(a) 
using different observers of observing window size 32 packets. 
The traffic specification (TSPEC) is also dynamic. From the 
simulations, the controller fulfills TSPEC dynamics in both delay 
and jitter even the background traffic bursts. The power 
consumption is averagely saved 14% when using longer sampling 
periods for lower priority traffic categories (TCs). The optimized 
hardware architecture seems function well in wireless 
environment. However, when we perform HCLC ESL verification 
using the VANET scenario with AODV routing as Figure 6, the 
simulation results is as Figure 7. In Figure 6, nodes with gray 
circles are traffic nodes while those with black circles could be 
relay nodes depending on instant network status and ad hoc 
routing protocol. Dashed arrows are moving directions of nodes 0 
and 1. Nodes 2 to 15 are considered road-side units. To perform 
video streaming, MAC of node 0 and 14 are equipped with the 
QoS SIP. This scenario is to see how different classes of 
connections affect each other in terms of the criteria. Figure 7 
shows that the FPGA implementation of the QoS controller does 
not work as well in tracking the goal delay. One possible solution 
to this problem is to increase the amount of fuzzy sets and fuzzy 
rules. However, this also increases complexities of the fuzzy 
control algorithm and hardware architecture. 
Suppose our target in the ESL verification is a hierarchical cross-
layer controller using EDCA architecture at the MAC layer. We 
call the EDCA with cross-layer interface the EDCA-XLI. In 
addition to the EDCA function, the MAC also includes a dynamic 
fuzzy logic controller (DFLC) [1] where its reference command is 
dynamically determined by the controls of upper layers. Figure 
6(b) shows the software/hardware architecture associated with the 
HCLC control algorithms at layers that fit to the proposed ESL 
verification framework. 
3.2 HCLC Algorithms 
The upper layers controllers are implemented in the software 
protocols, which are the video rate controller at the application 
layer and the shaper at the transport/network layer [1]. When the 
network is crowded and delay caused by collision is large, to 
satisfy the video rate, the DFLC needs to scale down the backoff 
delay by adjusting CWmin lower to avoid that the total delay d 
exceeds the goal total delay. At this time the goal backoff delay dg 
is estimated by 
 
[ ] [ ][ ]  [ ][ 1]
MAC MAC
g frame
VID VID
l n l nd n k t n
r d n r
 
= − 
−  
 (1) 
where k is the gain constant for the current traffic category; lMAC[n] 
is the MPDU length and rVID is the video rate; the required time 
transmitting a frame is tframe[n]. To track the goal backoff delay dg, 
the dynamics of the singletons {S, M, L} in the fuzzy controller 
are as follows 
 
{ } { }1[ ], [ ], [ ] [ ] , [ ], [ ]g g gS n M n L n d n PF d n d n PF−= ⋅ ⋅  (2) 
To implement an algorithm in different layer, we verify it using 
the HCLC ESL framework. 
4. EVALUATION USING HCLC ESL 
FRAMEWORK 
The simulation environment settings are the same as [1]. The 
maximum MPEG-4 bit rate is 960kbps. The simulations in this 
section prove the QoS provision ability of EDCA-XLI for MAC 
(a) 
Transport Layer
EDCA
MAC Layer
MPEG4
Application Layer
Rate Control
Shaper
DFLC
CWMin
Traffic Specifications dTSPEC, ε
Goal Backoff delay dg
rvid
PHY Layer
SIP in FPGA
packets
packets
frames
 
(b) 
Figure 6. (a) Scenario and (b) HCLC streaming over VANET. 
 
1000
Goal MAC access delay of video stream 1
Goal MAC access delay of video stream 2
measured MAC access delay of video stream 1
measured MAC access delay of video stream 2
1000
5000 Simulation time
 
Figure 7. MAC access delay of two co-existing AODV-routed 
video streams. 
 
Table 2. Average PSNR comparisons. Video streams V1: 
01,V2: 1415. 
Scenario 0: Only one MPEG-4 stream without any background 
traffic. 
V1: 36.5; (µbk, σbk)=(0, 0) 
Scenario 1: Two co-existing streams V1, V2 with background traffics 
V1 (DCF) = 24.6 dB 
V2: 27.7 dB 
(µbk, σbk)= (641, 116) 
V1(DCF)  = 26.0 dB 
V2: 36.1 dB (HCLC) 
(µbk, σbk)=(632, 132) 
Scenario 2: Two co-existing streams with background traffics 
V1: 27.3 dB
 
V2: 31.2 dB 
(µbk, σbk)=(584, 118) 
V1: 36.5 dB (HCLC) 
V2: 27.2 dB 
(µbk, σbk)=(533,123) 
V1: 36.1 dB (HCLC) 
V2:
 35.6 dB (HCLC) 
(µbk, σbk)=(545,163) 
 
 0
 5
 10
 15
 20
 25
 30
 35
 40
 0  200  400  600  800  1000  1200  1400  1600  1800  2000
PS
NR
 (d
b)
frame number
EDCF-MPEG-1
EDCF-MPEG-2
 
Figure 8. Instant PSNR of two co-existent MPEG-4 streams 
when there are 5x300kbps background traffics. 
6. ACKNOWLEDGMENTS 
The authors thank the National Science Council in Taiwan for 
supporting this research, which is part of the project numbered 
NSC97-2221-E-327-035-. The authors also thank the Chip 
Implementation Center (CIC) in Taiwan for supporting related 
EDA tools. 
7. REFERENCES 
[1] Chao-Lieh Chen, “IEEE 802.11e EDCA QoS Provisioning 
with Dynamic Fuzzy Control and Cross-Layer Interface,” the 
16th International Conference on Computer Communications 
and Networks, Honolulu, Hawaii USA, Aug. 13 - 16, 2007, 
pp.766-771. 
[2] Chao-Lieh Chen, J-W Lee, S-Y Chen, Y-H Kuo, “Hierarchical 
Cross-Layer Fuzzy Control for Compromise of Multiple 
Objectives in Wireless Mobile Networks,” the 4th 
international conference on mobile technology, applications, 
and systems (ACM Mobility 2008), Sept. 2008. 
[3] A. Ksentini, M. Naimi, and A. Guéroui, “Toward an 
Improvement of H.264 Video Transmission over IEEE 
802.11e through a Cross-Layer Architecture,” IEEE 
Communications Magazine, Vol. 44, No. 1, January 2006, pp. 
107-114. 
[4] F. Foukalas, V. Gazis, and N. Alonistioti, “Cross-Layer 
Design Proposals for Wireless Mobile Networks: A Survey 
and Taxonomy,” IEEE Comm. Survey Tutorial, 1Q, 2008, pp. 
70-85. 
[5] CoWare Platform Architect - SystemC Platform Capture and 
Architecture Analysis for Platform-driven ESL Design, 
http://www.coware.com/products/platformarchitect.php.  
[6] N. Zhang, “Algorithm/Architecture Co-Design forWireless 
Communications Systems,” Ph.D. dissertation, Elect. Eng. 
Comput. Sci., Univ. California, Berkeley, 2001. 
[7] Yan Meng, “Algorithm/Architecture Design Space Co-
exploration for Energy Ef_cient Wireless Communications 
Systems,” Ph.D. dissertation, Elect. Comput. Eng., Univ. 
California, Santa Barbara, Sept. 2006. 
[8] G.-G. Lee and M.-J Wang, et. al, “Algorithm/Architecture Co-
Design of 3-D Spatio–Temporal Motion Estimation for Video 
Coding,” IEEE Trans. Multimedia, vol. 9, no. 3, Apr. 2007, pp. 
455-465. 
[9] F.Fummi, P.Gallo, S.Martini, G.Perbellini, M.Poncino, 
F.Ricciato, “A Timing-Accurate Modeling and Simulation 
Environment for Networked Embedded Systems,” 
Proceedings of ACM/IEEE Design Automation Conference 
(DAC), Los Angeles, CA, 2-6 June 2003, pp. 42-47. 
[10] Chao-Lieh Chen, Jeng-Wei Lee, Chi-Yuan Wu, Y.-H Kuo, 
“Fairness and QoS Guarantees of WiMAX OFDMA 
Scheduling with Fuzzy Controls,” Eurasip Journal on 
Wireless Communications and Networking, to appear in 2009 
[11] E. Schoch, F. Kargl, and W. M. Weber, “Communication 
Pattern in VANETs,”, IEEE Comm. Magzine, Nov. 2008, 
pp.119-125. 
[12] David W. Matolak, “Channel Modeling for Vehicle-to-
Vehicle Communications,”IEEE Communications Magazine, 
pp. 76-83, May 2008. 
[13] J. Klaueb, B. Rathke and A. Wolisz “EvalVid - A Framework 
for Video Transmission and Quality Evaluation,” Lecture 
Note in Computer Science, no. 2794, 2003, pp. 255-272. (also 
in http://www.tkn.tu-berlin.de/research/evalvid/) 
[14] The Network Simulator - NS-2, http://www.isi.edu/nsnam/ns/. 
 
