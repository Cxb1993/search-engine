 
技術研發成果說明： 
本研究計畫完成之具體成果包括： 
1. 完成微機電式加速度規與陀螺儀與相關電路之設計、製作與安裝架設，並於不同道路
進行實車行車加速度與轉向角速度之量測。並以數位訊號轉換處理技術，進行感測資
料之處理與儲存，並經設計之程式予以解析判讀，以完整呈現車輛行進間之動態行為。 
2. 完成將行車所擷取即時資訊之分析，並以此資料發展慣性導航系統技術。 
3. 完成利用卡爾曼濾波器進行 GPS 及 INS 之整合。 
4. 完成利用基因演算法結合類神經網路法則進行系統共變異量之最佳化，以獲得精確之
導航資訊。 
5. 本計畫之執行過程結合學術理論與應用實務，藉由計畫之執行，增進學校師生技術研
發之經驗與實務能力，並增加合作企業開發新產品之機會。 
 
技術特點說明： 
1. 本計畫針對車輛行進間之動態行為，運用即時感測技術與數位化資料處理方式，進行行
車資料之完整擷取與資料處理。 
2. 本計畫利用數位訊號處理之技術，藉由車輛所感測之即時訊號，進一步發展慣性導航系
統，並與全球定位系統整合以得到精確的車輛導航資訊與詳實之路徑規劃。 
3. 本計畫依據 GPS 與 INS 個別之優缺點，利用卡爾曼濾波器（Kalman filter）進行二者技
術之整合，並利用基因演算法則結合類神經網路法則，透過其學習之過程以求得系統
之最適當共變異量，以發揮最佳之整合效果。 
 
可利用之產業及可開發之產品： 
   汽車導航產品、飛行導航產品等 
 
推廣及運用的價值：如增加產值、增加附加價值或營利、增加投資/設廠、增
加就業人數………等。 
現今市面上所看到的導航產品相當多，但大多以 GPS 導航定位為主，仍未出現以整合
完成之 GPS/INS 導航系統產品。以現今台灣法律規定大客車必須加裝行車紀錄器，但
對於自小客車並沒有強制規定，但導航系統的應用反而以自小客車的使用為最大族群。
在法律上不論國內外對於行車紀錄器的強制加裝車輛已有提出需修改之呼籲，主因在於
行車紀錄器有利於交通事故的分析與判斷，因此結合行車紀錄器與 GPS/INS 整合之導
航系統產品，在未來有其一定的市場需求。 
 
 
 
系統狀態方程式為： 
)()()()1( kkkk wxAx +=+                  ( 1 )                                                
其中 為系統在 k+1 時刻下的狀態向量， 為
系統狀態轉移矩陣， 為狀態雜訊，系統狀態方程
式描述了狀態隨時間的演進變化。 
)1( +kx )(kA
)(kw
量測方程式如下表示：  
)()()()( kkkk xHZ υ+=                   ( 2 )                                     
)(kZ 為系統在 k 時刻下的量測向量， 為量測輸出
矩陣，
)(kH
)(kυ 為量測雜訊，量測方程式描述了量測量與
狀態之間的關係。 
    卡爾曼濾波器主要是在 k時刻分別預測 k+1時刻
下的系統狀態向量 x 與誤差協方差矩陣 P，方程式如
(3)、(4)所示， 為系統共變異量矩陣。 )(kQ
( ) )()(1 kkk xAx =− +                               (3)                   
( ) )()()()(1 k
T
kkkk QAPAp +=− +                        (4) 
而在 k 時刻下，預測值加入量測值進行修正及更新誤
差協方差矩陣 P 之方程式如(5)、(6)所示。其中，
為卡爾曼增益(Kalman Gain)，方程式如(7)所示：  
)(kK
][ )()()()()()( −− −+= kkkkkk xHZKxx                   (5)                             
               
    
( )
−−= kkkk PHKIP ][ )()()(                         (6)      
( ) ( )
1
)()()()()( ][ −−− += kTkkkTkkk RHPHHPK                (7)                     
其中 為量測雜訊共變異量矩陣， 為依據 k 時
間之前的量測量對 k+1 時刻系統之狀態估算， 代
表在 k 時刻對 k+1 時刻之誤差協方差矩陣估算。卡爾
曼濾波器之運算流程圖如圖 2.1 所示。 
)(kR ( )− +1kx
( )
−
+1kP
)()()01()01(        kk RQPx
系統初始條件
計算卡爾曼增益
利用量測量        更新估測值)(kZ
更新誤差協方差矩陣
誤差協方差矩陣預測
狀態預測
.....},{ )2()1()( ZZZ k =
....},{ )2()1()( xxx k =
方程式 (7)
方程式 (5)
方程式 (6)
方程式 (3)、(4)
)(kK
)(kP
)(kx( )− +1kx
( )
−
+1kp
 
圖 2.1 卡爾曼濾波器之運算流程圖 
    利用卡爾曼濾波器進行導航系統整合，必須建構完
整的系統狀態方程式與量測方程式，本次研究所建構之
系統狀態方程式為 8 式至 17 式，量測方程式為 18 式至
22 式所示。 
( ) ( )αααα sincos)()()1( ⋅⋅Δ−⋅⋅Δ+=+ ykxkk vtvtxx       (8) 
( ) ( ) ( ) ( )αααα cossin)(1 ⋅⋅Δ−⋅⋅Δ+=+ ykxkk vtvtyy       (9) 
( ) ( )( kkkx vv )θcos)(1 ⋅=+                         (10) 
( ) ( ) ( )( )kkky vv θsin1 ⋅=+                          (11) 
( ) ( ) tavv kkk Δ⋅+=+ )1(                          (12) 
( ) ( ) ( )kkk waa 11 +=+                         (13) 
                        (14) ( ) ( ) ( ) tkkkθ = θ +ω ⋅ Δ+1
( ) ( ) ( )kkk w21 +=+ ωω                           (15) 
( ) ( ) ( )kkk wbncn 3111 ⋅+⋅=+                       (16) 
( ) ( ) ( )kkk wbngcng 4221 ⋅+⋅=+                     (17) 
)1( +kxα 、 分別代表導航座標上向東與向北的方向位
置，
)1( +kyα
α 角為導航座標與載體座標的方位角誤差，α 角
可以利用 GPS 的動態訊號求出二座標系統的誤差角
度。 、 與 分別代表載體向東、向北與載體
本身的速度。 為載體的加速度，
)(kxv )(kyv )(kv
)(ka )(kθ 為載體轉向角
度， )(kω 為載體角速度。另外 與 為加速度規與
陀螺儀之隨機雜訊，而 、 、 、 為狀態
單位白色雜訊。 、 、 、 為常數， 為取樣時
間。 
)(kn )(kng
)(1 kw )(2 kw )(3 kw )(4 kw
1c 2c 1b 2b tΔ
( ) ( ) ( ) ( )kkkk 1naa υ++=                         (18) 
( ) ( ) ( ) ( )kkkk ng 2υωω ++=                         (19) 
( ) ( ) ( )kkk vv 3υ+=                          (20) 
( ) ( ) ( )kkk xx 4υαα +=                         (21) 
( ) ( ) ( )kkk yy 5υαα +=                         (22) 
量测輸入訊號分別有：載體前進方向之加速度規量
測訊號 ，陀螺儀對 Z 軸旋轉之量测訊號 )a )(k (kω ， 、
分別為 GPS 導航系統所得之向東與向北之座標位
置，及 GPS 所感測出載體之相對速度 ，而
( )kxα
( )kyα
( )kv )(1 kυ 、
)(2 kυ 、 )(3 kυ 、 )(4 kυ 為量測單位白色雜訊。 
    除需建立完整之狀態方程式與量測方程式外，還
需定義出卡爾曼濾波器的系統參數（如表 2.1），其中
Q 與 R 值的選取對濾波後的精確度有直接的影響。Q
值選取過大，表示系統動態受到很大雜訊影響，對量
測值更加依賴。R 值選取過大，表示較不信任量測
值，卡爾曼增益會變小，如此量測值修正狀態的能力
就不顯著。 
表 2.1 卡爾曼濾波器的系統參數 
( )
( )
)0.1009  0.1346  0.0892  0.1021  052.0(
)1e  1e  0.1  0.1            (
)1e  1e  0.1  0.1      089394.0  089394.0  089394.0  089394.0(
)1e  1e  0.1  0.1  0.089394  089394.0  089394.0  089394.0  089394.0  089394.0(
]00[
)10(
1
)(
8-8-
)(3
8-8-
)(2
8-8-
)(1
10101
01
21
diagR
almalmalmalmalmalmdiagQ
almalmdiagQ
diagQ
x
IP
cc
k
k
k
k
=
=
=
=
⋅⋅⋅⋅⋅⋅⋅=
=
==
×
 
表 2.1 中，c1、c2為常數， ( )01x 為初始狀態估測值， ( )01P
為初始誤差協方差矩陣，Q1(k)、Q2(k)、Q3(k)則分別為採
用固定值之系統共變異量矩陣（Q1(k)），GPS訊號正常
下，藉由類神經網路所估測出之系統共變異量矩陣
（Q2(k)）與GPS訊號脫鎖狀態下，藉由類神經網路估
測出之系統共變異量矩陣（Q3(k)）。 
    由於 為量測雜訊共變異量矩陣，組成如方程
式 23 式所示，故可事先觀察與統計感測器靜止狀態
下之輸出值並加以計算即可求出。 
)(kR
( ) ( )ααω yxvak rrrrrdiagR =                    (23) 
    為系統共變異量矩陣，組成如方程式 24 式
所示，其中加速度的系統變異量（ ）對導航後的精
)(kQ
aq
2 
算求解所得之答案可能並不相同[18]。 
圖 7-1 為基因演算法的基本演化流程圖。以下將
針對該流程圖上的名詞各別解釋。 
代數k:=0產生初始族群P(0)
將P(k)中染色體解碼成對應
參數並求出適應函數值
是否達到搜尋終止
條件
複製過程
K:=K+1 停止
Yes
適應函數
P(K+1)
交配過程
突變過程
Pc
Pm
演化
 
圖 2.3 演化流程圖 
2.4 基因演算法結合類神經網路 
事實上，類神經網路的各種樣式(Pattern)組合的
解答空間(Solution Space)巨大無比，儘管現代電腦能
力強大，也只能在相對小的網路上，以合理的時間解
出最佳化參數。基因演算法可以寬廣地應用在神經網
路的各方面，例如網路架構的決定(幾個輸入節點、
隱藏層層數與隱藏層節點數、輸出節點數等等)、節
點轉換函數選擇、連接權重、學習速率等等參數之最
佳化。因此，基因演算法可能與合理的用法，應是選
擇類神經網路局部的最佳化，例如各層(Layer)節點連
結權重值之最佳化。量測以 GA 來訓練類神經網路以
及單純利用 BP 時的績效值差異。吾人研究利用基因
演算法來訓練類神經網路的權重值以及偏權值。 
 
圖 2.4 基因演算法結合類神經網路 
2.5 尋找最佳加速度系統變異量 
載體在運動時，最為理想的情況為在經過卡爾曼濾
波器後的值能直接反應出載體的加速度不受雜訊干
擾。其中，載體在運動狀態下，其系統共變異量會有不
同的最適值，因此為了使卡爾曼濾波器能發揮最佳效
果，本研究針對載體在各種不同急跳度下分別尋找其最
佳系統共變異量，其步驟如下： 
1. 在急跳度保持一定值下相同條件下進行變加速度運
動，並將加速度規回傳之加速度資訊加以儲存，如圖
2.5 藍色線段所示。 
2. 對所紀錄之加速度資訊作線性迴歸分析，以得到加速
度對時間之近似線性函數 ，如圖 2.6 黑色實線所
示。 
)( ty
3. 透過最小平方法（方程式如 31 所示）求得加速度系
統變異量，將此變異量帶入 Kalman Filter 中，經過
濾波後之加速度訊號與近似線性函數誤差達到最
小，則此系統變異量及為最佳之加速度系統變異量，
如圖 2.5 紅色線段所示。 
( )
n
yx
E
n
i
ii
rms
∑
=
−
= 1
2
                  (31)        
xi為所量測出之加速度值，yi線性迴歸所建立之線性
函數上的點，n為取樣總點數。 
0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1
-0.25
-0.2
-0.15
-0.1
-0.05
0
0.05
0.1
0.15
0.2
0.25
時間(s)
加
速
度
(m
/s
2 )
加速度規回傳值
Kalman Filter 估測值
線性迴歸分析
 
圖 2.5 載體靜止狀態所得加速度變化量 
    本研究針對同ㄧ加速度作多次實驗的方式，將所
有實驗所得之最佳狀態系統共變異量取其平均值，用
作為類神經網路之訓練樣本，但因受測載體為車輛，
較不易取得穩定之加速度進行分析，因此僅針對加速
度為 0 與 3.36 進行分析，實驗結果如表
2.2 所示。並假設系統共變異量與加速度之關係呈線
性變化，如圖 2.4 所示。 
)/( 2sm )/( 2sm
表 2.2 加速度與最佳系統變異量 
 加速度系統變異量 
實驗次數 加速度
(m/s2) 1 2 3 4 5 平均值 
0 0.08922 0.08912 0.08854 0.09052 0.08955 0.089394
3.36 0.32645 0.2894 0.2678 0.3901 0.3417 0.32309 
 
0 1 2 3 4 5 6 7
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
加速度
加
速
度
系
統
雜
訊
變
異
量
 
4 
±60（deg/sec），工作電壓為+4.75~+5.25 伏特；GPS 模
組採用 FALCOM 所生產的 JP7-T 模組。 
 
 
圖 3.1 設備架構圖 
 
系統硬體架構流程如圖 3.2 所示，GPS 接收模組所
接收到的訊號以 RS-232 通訊傳送至筆記型電腦，INS
感測元件所接收到的訊號則是利用 National Instruments
所產之訊號擷取卡（型號為：NI USB-6210），如圖 3.3
所示，將所感測之訊號經過 A/D 轉換後傳送至筆記型
電腦，並藉由 LabVIEW 程式讀取訊號並儲存，本次研
究採用離線（off-line）方式進行，所以必需藉由
MATLAB 程式進行訊號整合分析，以便得到所要之導
航解。 
 
 
圖 3.2 整合系統硬體架構圖 
 
 
 
圖 3.3  NI USB-6210 訊號擷取卡 
 
 
4. 實驗結果與分析 
    本研究之實驗分為二種路徑進行測試，實驗載體
路線如圖 4.1、4.2 所示，本實驗以小客車為載體，導航
系統架設於車內，以便擷取二維平面運動之動態訊號，
用於二維平面之感測器包括：三軸加速度規（只取一
軸，車輛前進方向），單軸向陀螺儀（Z 軸），GPS 訊號
接收模組。動態實驗設定 INS 取樣頻率為 10Hz，GPS
取樣頻率為 1Hz，實驗路徑以 A 點為起點、B 點為終點，
依逆時鐘方向前進。實驗內容如下所示。 
1. GPS 與 INS 各自獨立進行導航之定位結果。 
2. GPS 與 INS 導航系統利用卡爾曼濾波器，進行導航
系統整合之導航定位結果。 
3. GPS 訊號脫鎖時，卡爾曼濾波器之系統共變異量，
採用固定值進行 INS 導航定位結果，與採用類神經
網路所估測出之系統共變異量，進行 INS 導航定位
結果，針對兩種不同系統共變異量所得到的導航結
果進行比較。 
 
(A)
(B)
 
圖4.1 實驗路線圖(實驗路線A)[17] 
 
出發地(A)
目的地(B)
 
圖4.2 實驗路線圖(實驗路線B)[17] 
 
 
4.1 GPS 與 INS 未整合之定位結果 
    觀察實驗結果，如圖 4.3、4.4 所示，藍色線段代表
GPS 接收模組所得到之導航定位結果，紅色線段代表
INS 無修正時，依相同路徑所求得的導航結果，結果顯
示 GPS 導航定位誤差不會隨時間的累積而增加，具有
穩定之導航能力。反觀 INS 導航定位之實驗結果，亦可
發現，在短時間內 INS 具相當精確之定位精度，但因誤
差會隨時間的累積而快速增加，故 INS 無法長時間操
作。為了改善 INS 無法長時間操作的問題，因此利用卡
6 
-200 -150 -100 -50 0 50 100 150 200 250 300
-450
-400
-350
-300
-250
-200
-150
-100
-50
0
50
East(m)
N
or
th
(m
)
 
 
GPS reckoning trajectory
KF reckoning trajectory
constant value(Q)
variables value(Q=3.7s)
 
圖 4.7 衛星脫鎖之 KF 估測結果比較圖(實驗路線 A 脱
鎖：40s） 
-300 -200 -100 0 100 200
-600
-500
-400
-300
-200
-100
0
100
200
East(m)
N
or
th
(m
)
 
 
GPS reckoning trajectory
KF reckoning trajectory
constant value(Q)
variables value(Q=4.0s)
 
圖 4.8 衛星脫鎖之 KF 估測結果比較圖(實驗路線 B 脱
鎖：120s) 
5. 結論 
    利用卡爾曼濾波器進行 GPS/INS 導航系統整合
中，系統共變異量參數值的選擇會直接影響到最終之導
航結果，因此如何決定此一參數為導航工程師之重要課
題之ㄧ。在本研究中採用開迴路分散式系統架構，並無
回授誤差修正的機制，因此對於系統共變異量之選擇顯
的格外重要，有鑑於此，本研究採用基因演算法結合類
神經網路進行系統共變異量最適值之估測，經實驗結果
可知採用基因演算法結合類神經網路所估測出之最適
值系統共變異量，在 GPS 訊號正常下，亦可以有效改
善 INS 誤差隨時間發散的問題。但在衛星訊號脫鎖狀
態下，卻可發現，過往所採用固定值之系統共變異，因
無法隨著系統狀態之改變而提供最適值給卡爾曼濾波
器中進行誤差修正，因此在脫鎖狀態下，會產生嚴重的
誤差漂移現象，但採用基因演算法結合類神經網路所估
測出之系統共變異量，會因所設定之更新週期與加速度
值之變化而提供最適當之參數值於濾波器中，進行誤差
修正，因此經實驗結果比較，採用基因演算法結合類神
經網路所估測出之最適值系統共變異量，更能有效的抑
制誤差漂移現象的發生，因此所得之導航解更加精確，
可信度更高。 
 
6. 誌謝 
本研究計畫經費承蒙國科會補助（計畫編號：
NSC-98-2622-E-131-024-CC3），作者們在此表達感
謝。 
 
7. 參考文獻 
[1] Global Positioning System Standard Positioning 
Service Signal Specification 2nd Edition, June 2, 1995 
[2] B. Barshan and H. F. Durrant-Whyte,“Inertial 
navigation system for mobile land,”IEEE 
Transactions on Robotics and Automation, Vo1. 11 
[3] 黃國興，慣性導航系統原理與應用，全華科技出版
社，2002  
[4] 李秀峰，「整合GPS與感測器於車輛定位」，國立
台灣科技大學機械工程技術研究所碩士論文，1998 
[5] 黃俊凱，「微機電感測器於地面車輛定位系統應
用」，國立台灣科技大學機械工程研究所碩士論
文，2005 
[6] 沈偉倫，「GPS/INS整合系統於即時車輛導航應
用」，國立交通大學電機與控制工程研究所碩士論
文，2003  
[7] Greg Welch, Gary Bishop, An Introduction to the 
Kalman Filter, September, 1997 
[8] E. J. Lefferts, F. L. Markley, and M. D. shuster, 
“Kalman filter for spacecraft attitude estimation,” 
Journal of Guidance, Control, and Dynamation, V01. 
5, pp.417-429 
[9] 莊志清、黃國興，電子導航，全華科技圖書，1983  
[10] R. G. Brown and P. Y. C. Hwang, Introduction to 
Random Signals and Applied Kalman Filter, 3rd 
Edition, Wiley, New York, 1997 
[11] 黃俊凱，「微機電感測器於地面車輛定位系統應
用」，國立台灣科技大學機械工程研究所碩士論文， 
2005 
[12] 梁淑芳，「導入LM法之平行到傳地演算法」，東
吳大學資訊科學系碩士論文，2006 
[13] 黃國興，慣性導航系統原理與應用，全華科技出版
社，2002 
[14] 羅華強，類神經網路－BATLAB的應用，高立出版
社，2005 
[15] 張斐章、張麗秋，類神經網路，台灣東華出版社，
2005 
[16] 惠汝生，LabVIEW 8.X圖控程式應用，全華科技出
版社， 2006 
[17] 「PaPaGo電子地圖」，研勤科技股份有限公司， 
2004 
[18]周鵬程，遺傳演算法原理與應用，全華科技出版社，
2001 
8. 計畫成果自評 
    本研究成果已達成計畫目標，成功將 GPS 與 INS
進行整合，並進行定位之最佳化。此技術開發成果將進
行專利申請及論文發表。 
8 
98年度專題研究計畫研究成果彙整表 
計畫主持人：陳宏毅 計畫編號：98-2622-E-131-024-CC3 
計畫名稱：以基因演算法則應用於精確導航定位最佳化之研究開發 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 1 50%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
 
