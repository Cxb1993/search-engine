行政院國家科學委員會專題研究計畫成果報告 
多媒體雕塑工作室－智慧型音視訊編修處理系統 
總計畫 (3/3) 
計畫編號：NSC 98-2221-E-007-079-MY3 
執行期限：2009年 8月 1日至 2012年 7月 31日 
主持人： 林嘉文 國立清華大學電機系 
共同主持人： 張寶基 
王聖智 
許秋婷 
國立中央大學通訊系 
國立交通大學電子系 
國立清華大學資工系 
 陳煥宗 國立清華大學資工系 
 
一、中文摘要 
隨著電子資訊工業的發展，人人都有可能擁有自己的
影音記錄，但是對於大多數的使用者而言，大多僅能
單純地進行音視訊資料的記錄與重播，對於視訊的畫
質與內容往往無從改變。本計畫希望能夠發展一套便
於一般使用者使用的數位視訊編輯處理系統，此系統
除了可以針對視訊資料做自動的畫質改善外，也希望
能夠具備影音編修的功能，讓使用者能很方便的編修
自己的影音資料，並為影音增加新的生命。 
本計畫藉由四項子計畫的協力合作一起通力合作、共
同開發出關鍵之基礎技術，之後透過這些基本技術的
共用分享，每個子計畫分別負責研發二到三項的核心
工具，最後再透過系統整合的過程，提供使用者可以
方便編修改造音視訊資料之智慧型處理系統。 
Abstract: 
With the advance of information technology and 3C 
technology, modern people can easily possess their own 
daily A/V records. However, for a typical user, he or 
she may know how to record and replay audio-visual 
data, but usually has difficulty modifying the media 
contents or improving the media quality with his/her 
own wish. In this project, we aim to develop a us-
er-friendly system for the rejuvenation of audio-visual 
data. This system can not only improve the quality of 
audio-visual data in an automatic way, but can also fa-
cilitate the editing of media contents in an intelligent 
and interactive manner. The construction of the intelli-
gent audio-visual rejuvenation system is supported by 
four sub-projects. All four subprojects will work in a 
closely coupled way to develop several essential tech-
niques and models. With these techniques and models, 
each subproject then focuses on the development of a 
few kernel tools. These kernel tools will finally be inte-
grated together to offer users an intelligent and friendly 
environment for the modification and editing of au-
dio-visual data. 
二、緣由與目的 
隨著電子資訊工業的發展，使得居家使用的攝影設備
變得相當普及，人人都有可能擁有自己的影音記錄。
另一方面，目前正是web2.0 多媒體蓬勃發展的世代，
多媒體資訊透過即時而通暢的網路四處分享，你、我
既是資訊的享有者，也是資訊的創造者。在多如繁星
的部落格網站上，人們透過文字、影像與視訊在網路
上盡情地記錄生活的點滴、發表個人的見解與創作；
又如在熱門的 YouTube 網站上，天天都有可觀且生
動的影音動畫上傳，與全世界共同分享個人的影音記
 3 
使其呈現較豐潤討喜的膚色) 
 數位萃取機 (可依據視訊場景內容，自動分離
萃取出屬性相仿的物件) 
以上這些工具的發展將需要投入相當多的研究人力，
因此在本計畫的進行中將藉由四項子計畫的協力合
作一起開發。此外，這些核心工具所仰賴的基礎技術
有著相當多的重疊性，因此在計畫的進行中，將採用
如圖一所示的系統結構圖。其中在基本技術部份，將
由五項子計畫通力合作、共同開發出關鍵之基礎技術
(如視訊追蹤技術、人臉老化模型等)，之後透過這些
基本技術的共用分享，每個子計畫分別負責研發二到
三項的核心工具(如數位剪刀與數位吸塵器等)，最後
再透過系統整合的過程，利用核心工具的組合運用，
提供使用者可以方便編修改造音視訊資料之智慧型
處理系統。 
子計畫一：基於機器學習之視訊內容擬真修補與強化 
應用於視訊影片編修之互動式物體發掘、追蹤及擷取
技術，以發掘和切割出影片中之視訊物件；並發展應
用於視訊填補(video inpainting) 之動態紋理背景之
線性及非線性塑模、合成及填補演算法；同時發展一
套 強 化 影 像 解 析 度 的 演 算 法  (Image Su-
per-resolution)，提高老舊照片或是解析度不足的影
像。 
圖一、智慧型視訊編修系統架構圖與計畫分工 
子計畫二：基於機器學習之視訊剪接及運鏡模擬 
本子計畫的主要目標是運用電腦視覺和機器學習理
論，開發數位膠帶和數位分鏡表兩項核心技術。「數
位膠帶」是利用影像和影片接合技術，使得接合後視
訊可以符合使用者期望的運鏡模式。「數位分鏡表」，
則是希望能讓使用者透過分鏡表，挑選並組合不同的
運鏡流程套用到自己拍攝的影片中。 
子計畫三：影像去霧技術與年齡預測技術 
第三年的主要探討單張影像去霧技術。不同於既有文
獻，這些方法均著重於保持影像的局部結構特性，因
此大幅改善影像品質。此外，在影片個人化分類方面，
我們分析適合描述人臉老化的特徵，並建立人臉影像
老化模型；這三年的研究內容主要包括：貝氏年齡預
測法，去個人因素之年齡特徵表示，以及在半監督式
的年齡預測問題中，基於年齡順序之子空間學習。綜
合以上技術，我們的方法可有效利用大量未含年齡標
籤的影像，藉此處理訓練資料中歧異性過大以及數量
不足等實際問題。 
子計畫四：視訊滌洗、偏好色調調整及場景內容分離
萃取 
我們透過機器學習的技術事先建立偏好色偵測器之
參數，另外透過主觀實驗統計偏好色調分佈情況。在
實際應用時便可利用事前訓練好之參數對輸入影像
進行偵測及調整，提昇影像品質。 
三、結果與討論 
總計畫依據第一年計畫之規劃，個別子系統間的
初步功能開發以及相對應實驗，及子系統間的介面訂
定為主，並協調各子系統間的互動關係。以下將就各
個子計畫之主要成果提出報告與討論： 
子計畫一：基於機器學習之視訊內容擬真修補與強化 
近幾年來，視訊/影像超解析度技術發展已臻成熟，
許多相關的研究報告指出，以機器學習 (Machine 
Learning) 為基礎的單張影像超解析度技術可產生優
於傳統超解析度技術的成果錯誤! 找不到參照來源。。
然而，以視訊超解析度技術來說，大多數還是採用傳
統的 Multi-frame 方式的超解析度技術。原因有二，
其一是由於視訊自然已經包含了多張禎幅 (Frame) 
的資訊，自然容易拿傳統超解析度技術處理。其二，
由於學習式的超解析度演算法往往都面臨計算複雜
度較高的問題，因此直接應用學習式超解析度技術到
每一禎幅上面未免不切實際。然而，學習式超解析度
 5 
表示越快 (單位：秒)。 
 
TS SR  
[2] 
TS SR+ 
temporal 
constraint 
DTS 
SR 
TS SR+ 
BOBMC 
DTS SR 
+ 
BOBMC 
Video 
1 
5505 7437 5533 798 817 
Video 
2 
4144 5677 4162 624 643 
Video 
3 
3430 4710 3454 507 524 
Video 
4 
4251 5891 4282 642 662 
子計畫二：基於機器學習之視訊剪接及運鏡模擬 
我們提出一項新的視訊物件切割技術，可以將兩段或
更多段影片中的共同物件切割出來。藉由分析切割出
來的共同物件之影像性質，我們可以調整影片的色調
以及運動模式，有助於多段影片之間的剪接。 
傳統影像分割演算法的分割結果通常會有分割
過小造成破碎或分割過大而難以分析的問題，如何找
出適當的分割尺寸自然為影像分割的一個重要課題。
影像共分割的概念由 Rother et al. [5] 所提出， 該方
法藉由觀察共同物件在各媒體上所呈現的特徵來定
義出感興趣的分割區域為何。此種方法除了解決影像
共分割，也可應用於其他問題。例如某張影像可利用
與影像資料庫內影像的特徵關聯性來做辨認 [6]。此
外，例如 iCoseg [7] 的系統，從一群相關影像中選取
可能感興趣的分割區域提供使用者做選擇，再進行後
續的分割作業。 
Rother et al. [5] 所提出的影像共分割演算法，是
利用共同物件所呈現的共同外觀直方圖 (common 
appearance histogram)當作全域限制條件來達到最佳
化共分割的 Markov random fields 模型。標準的
Markov random fields函數定義了共分割在影像內的
空間相關性，而全域限制條件則提供了共分割在影像
之間的相似度。隨後他們使用 trust-region graph cut
對目標函數進行最佳話，進而將共同物件分割出來。
近來影像共分割的相關研究顯現全域限制條件也可
設計成 regularization 的型式[8] 或是 reward 型式 
[9]。 
我們將物件共分割問題延伸到影片上，也就是由
兩段或更多段影片中擷取出共同的前景物件。我們提
出的演算法採用影片中 super-voxels來作為描述共同
物件的基本單位。而演算法中我們引入運動的資訊，
也就是依據 super-voxels間的相對運動來建立共同物
件的候選區域。隨後，使用共同物件的 appearance
建立高斯混合模型來描述共同特徵。實驗結果顯示，
結合各影片內的運動資訊與影片之間的共同特徵，我
們的演算法能比直接使用影像共分割或傳統影片分
割，得到更好的效果我們提出的演算法結合影片間與
影片內的資訊來擷取出較佳的共同物件分割。這樣的
機制不同於傳統的影片分割與影像共分割的方法。以
下將我們的演算法，與影片分割 [12] 以及影像共分
割 [11] 方法做比較。 
(一) 影片分割： 
我們所比較的影片分割方法為 Grundmann et al. 
[12] 所提的演算法。他們的演算法使用階層式的
graph結構去產生多種分割尺寸大小不等的結果，因
而最後需要使用者視使用情形來決定要採用哪一種
分割尺寸的結果。圖 2中第三列與第四列顯示出我們
與他們的結果。圖 2中他們的結果由我們挑選出最能
保留物件邊緣的分割尺寸作為代表。 
 
圖三. 與影像共分割方法 [11] 比較。第一行：三組
影片畫面。第二行：Joulin et al.的方法所分割的結果。
第三行：我們的演算法所分割的結果。 
(二) 影像共分割： 
如果不考慮影片各畫面於時間上的相關性，影像
共分割的方法可以由兩段影片中挑選一對一對的畫
面來實現。我們比較的對象為 Joulin et al. [11] 的演
 7 
其中 ( , )E x y 是觀察到的霧化影像， L是大氣顏
色， ( , )R x y 則是未經霧化的原始影像，而 ( , )d x y 表
示場景深度值。若以光線傳播率 ( , )a x y 化簡式(1)，
即假設霧化影像為原始影像及大氣顏色的線性組合
結果。因此，單張影像去霧的重點就在於如何準確估
算光線傳播率。過去文獻主要可分為兩類，包括對自
然影像特性或對霧氣分佈特性作出限制，其目的都在
於估計合理的 ( , )a x y 。然而現有方法所估測出的光
線傳播率圖通常過於粗糙，無法精確表示複雜場景中
的物件深度，因此間接降低去霧的效果。 
為解決此問題，我們將重點放在如何計算出最佳的光
線傳播率，直接對式(1)的霧化模型進行最佳化。首
先我們引用影像前背景分割(image matting)的概念，
假設局部區塊 w (local window)中的像素擁有同樣灰
階或色彩值 
1
R L

  ，要滿足式(1)的霧化模型即
可重新表示為一最佳化問題 
2 2( , ) ( ( [ ])) ( ) )
|| ||
j
i j i
j E i w
k k k
k
J E L
z
    
 

 
   
 
 

      (2) 
在式(2)中，最佳的 可以透過最小均方根差
(least square error)求得，將其代回式(2)，即可推導出
一個具最佳解的二次式非線性規劃 (quadratic pro-
graming)問題。 
( ) U
T
T T
k kk k
k
J   α A A α α α        (3) 
雖然我們可以求出式(3)的最佳解，然而若我們未對
光線傳播率作出任何合理限制，仍可能得到錯誤的結
果。因此我們提出光線傳播趨勢圖的概念，假設其趨
勢由大至小沿場景的垂直方向變化，直至畫面中的消
失點為止。此資訊可作為合理的最佳解下限值(lower 
bound)，另外考慮 ( , )x y 介於 0與 1之間、還原的影
像像素值必然恆正，我們重新將式(3)表示成一帶條
件限制的最佳化問題。 
2( ) + || ||
( )
s.t. max( , 1,  
T
j
j j
J
L E
h j E
L




 

   
α α Uα α
         (4) 
在式(4)中， 2|| || α 可以加強傳播率圖的平滑特性
(smoothness)，避免影像的紋理細節被誤判為霧氣造
成的影響。為求計算效率，此項亦可以 bilateral 
filtering等後處理技術代替。 
圖 1是我們的方法與其他文獻的結果比較。很明顯地，
我們提出的方法可以得到最精細的光線傳播率圖，因
此去霧後的影像即使在複雜的影像內容上也不會產
生模糊或色偏，而合理的條件限制也使得我們求出的
最佳解幾乎符合場景的深度趨勢，可以針對單張影像
達到良好的去霧結果。 
(二)  基於年齡順序之子空間學習法 
雖然在前兩年計劃中我們已提出有效的年齡預測方
法及年齡特徵表示，於實際應用上，最難克服的問題
卻是訓練資料不足。儘管我們能輕易透過網際網路搜
集大量的人臉影像，但往往無法得知其正確的年齡，
因而無法加入訓練集。換言之，這是一個半監督式學
習問題，即只有少部分資料具正確標籤(label)資訊。
因此如何有效地利用這些未標籤資料，就成為最重要
的步驟。 
有鑑於此我們提出一個基於年齡順序 (age 
ranking)的概念。雖然我們無法準確得知未標籤影像
的年齡資訊，卻能透過人為或是二元分類器(binary 
classifier)的方式輕易決定此張影像與其他人臉影像
之間的年齡大小關係。我們稱此年齡順序資訊為 soft 
label，並且將其利用於所提出的子空間學習(subspace 
learning)，產生更具鑑別性的特徵表示。首先我們假
設任兩張影像之間的年齡順序已事先決定，所欲學習
的各個子空間向量
kW ，除了須最小化特定年齡中的
係數變異性，亦應滿足小部分集合的年齡順序。為保
證方法效率，我們採用 greedy-based演算法對個別向
量獨立做最佳化而子空間向量則互為正交，以提高子
空間的表示性。此外，我們提出四種方法作為挑選子
集合的優先順序。當資料含年齡標籤時，我們可以優
先選擇年齡差異最大或最小的配對；當正確年齡未知
時，我們則首先選擇相似度最高的配對或隨機選取。 
此類問題可以適用於監督式學習或半監督式學
習，而在實驗中，未標籤的年齡資料我們則假設其年
齡順序已知，或者透過事先學習的 SVM分類器決定。
當應用於監督式學習在兩個公開的人臉年齡資料庫
中，比較現有的子空間學習法，我們提出的方法均達
到最小的預測誤差。圖 2是我們的方法應用於半監督
式學習的實驗結果。隨著未標籤資料的增加，我們的
 9 
 
圖九、遮蔽物邊界偵測與深度估算結果。(a)所提出
方法的遮蔽物邊界偵測，(b) 所提出方法的深度估算
結果，(c) [3]的遮蔽物邊界偵測，(d) [6]的深度估算
結果。 
我們所提出的第二套架構利用多重對焦的影像序列
判斷對焦與深度的關係。我們利用改變攝影機的對焦
距離，拍攝出數張不同對焦的影像，接著在影像中各
個位置判斷其所屬的正確對焦範圍，透過正確對焦的
位置重建影像深度資訊。為了提升深度重建的品質，
我們採用事後機率最大化的最佳化估測方式，結合
ML所建造的事前機率模型進行深度影像重建。這個
部分的成果我們已發表至 IEEE ICIP 2012會議[17]，
詳細的介紹請參照論文。圖十是透過多重對焦重建的
深度資訊，藉由這樣的方式我們可以將前景物與背景
物進行分離動作。未來影像編修便可以依據此深度資
訊進行影像拆解與調整編修。 
 
 
四、計畫成果自評 
各子計畫均如期完成預定的工作項目，重要的成果已
在國內外發表共兩篇[15][17]學術論文。 
 
參考文獻 
[1] J. Yang, J. Wright, T. Huang, and Y. Ma, “Image su-
per-resolution as sparse representation of raw image 
patches,” in Proceedings of IEEE International Confer-
ence on Computer Vision and Pattern Recognition, pp. 
1-8, 2008. 
[2] Y. HaCohen, R. Fattal, and D. Lischinski, “Image up-
sampling via texture hallucination,” in Proceedings of 
IEEE International Conference on Computational Pho-
tography, Cambridge MA USA, pp. 20-30, March 2010. 
[3] W. Dong, L. Zhang, G. Shi, and X. Wu, “Nonlocal 
back-projection for adaptive image enlargement,” in 
Proceedings of IEEE International Conference on Image 
Processing (ICIP), pp.349-352, 7-10 Nov. 2009 
[4] W. Dong. L. Zhang, G. Shi, and X. Wu, “Image deblur-
ring and super-resolution by adaptive sparse domain se-
lection and adaptive regularization," IEEE Transactions 
on Image Processing, vol.20, no.7, pp.1838-1857, July 
2011 
[5] C. Rother, T. P. Minka, A. Blake, and V. Kolmogorov. 
Cosegmentation of image pairs by histogram matching - 
incorporating a global constraint into mrfs. In CVPR (1), 
pages 993–1000, 2006. 
[6] C. Liu, J. Yuen, A. Torralba, J. Sivic, and W. T. Freeman. 
Sift flow: Dense correspondence across different scenes. 
In ECCV (3), pages 28–42, 2008. 
[7] D. Batra, A. Kowdle, D. Parikh, J. Luo, and T. Chen. 
icoseg: Interactive co-segmentation with intelligent 
scribble guidance. In CVPR, pages 3169–3176, 2010. 
[8] L. Mukherjee, V. Singh, and C. R. Dyer. Half-integrality 
based algorithms for cosegmentation of images. In 
CVPR, pages 2028–2035, 2009. 
[9] D. S. Hochbaum and V. Singh. An efficient algorithm for 
co-segmentation. In ICCV, pages 269–276, 2009. Dis-
criminative clustering for image  
[10] A. Joulin, F. R. Bach, and J. Ponce. co-segmentation. In 
CVPR, pages 1943–1950, 2010. 
[11] J. Carreira and C. Sminchisescu. Constrained parametric 
min-cuts for automatic object segmentation. In CVPR, 
pages 3241–3248, 2010. 
Input Images Results 
圖十、影像深度重建結果。 
國科會補助計畫衍生研發成果推廣資料表
日期:2012/12/10
國科會補助計畫
計畫名稱: 多媒体雕塑工作室－智慧型音視訊編修處理系統
計畫主持人: 林嘉文
計畫編號: 98-2221-E-007-079-MY3 學門領域: 視訊與影像分析
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
計畫主持人林嘉文擔任 IEEE Transactions on Multimedia、IEEE Transactions 
on Circuits ad Systems for Video Technology 及 IEEE Multimedia Magazine
等期刊之 Associate Editor 
計畫共同主持人許秋婷擔任 IEEE Transactions on Information Forensics & 
Security 期刊之 Associate Editor 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
