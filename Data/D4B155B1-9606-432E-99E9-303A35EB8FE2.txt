 2
行政院國家科學委員會專題研究計畫成果報告 
壓縮領域中的音樂內涵分析技術 
Content-Based Music Analysis in the Compressing Domain 
 
計畫編號：NSC 96-2221-E-216 -050 
執行期限：96 年 08 月 01 日 至 97 年 07 月 31 日 
主持人：劉志俊   中華大學資訊工程學系 
計畫參與人員：王鴻文、江慶涵、黃宏能、蕭聖峰、蔡咏昇、曾柏嘉、 
張俊堂 中華大學資訊工程學系 
 
一、中文摘要 
隨著網路的快速發展以及多媒體壓縮技
術的進步，目前有大量的多媒體資料在網際網
路上快速的傳播，所以對於多媒體資料的分類
與查詢，顯得日益重要。因此，有關多媒體資
料內涵式分析的相關研究，越來越受到學術界
的重視。其中數位音樂資料以 MP3 與 AAC 格
式最受到大眾的歡迎，但是對於 MP3 與 AAC
格式的音樂內涵式分析的研究並不常見。因
此，本計畫針對 MP3 與 AAC 格式的音樂，探
討其內涵分析的相關問題，主要研究主題分為
三個部份: AAC 電視廣告的偵測與分類、MP3
音樂的和絃分析、以及 MP3 音樂的力度分析
等三部分。 
關鍵詞：AAC, MPEG-7, AAC commercial 
segment, AAC commercial classification, 
 
二、緣由與目的 
電視廣告的視聽觀眾們隨時在改變，廣告
業主難以確定在一個廣播電視節目中，究竟有
多少人以及哪一種人在收看他們的廣告，所以
廣告業主必須盡可能地讓廣告的內容獲得最
大的效益。另一方面，普遍人們對於電視節目
所提供的廣告總是難以避免地，而廣告提供給
人們的訊息，卻不一定切合人們的需求，甚至
基於廣告的重複性，可能對人們產生置入式行
銷的行為。但是相對的來說，有一些廣告是受
到人們喜愛的、有娛樂效果的或者是實用的，
由於電視廣告所產生的影響，可以說是形形色
色複雜而多樣，無論在民生、文化、經濟、心
理或政治上。一段廣告的訊息切確地決定了人
類的思考及行為模式，其影響是深遠地。 
各種音訊類型相對於各類的電視廣告內
涵，兩者之中是否存在著關聯，這是一個十分
有趣的研究，對於廣告在許多學者的研究中，
常以對於人類心理涉入性的高低來做分析，但
卻 缺 乏 對 於 廣 告 音 訊 內 涵 的 分 析 。
AAC(Advance Audio Coding)為支援多聲道的
音訊格式，並在不良的傳輸環境下，對於低頻
寬、高音質的需求有優良的表現，是 ISO 制定
用以取代立體聲音訊格式，也是 MPEG-4 音訊
核心的標準，是現行數位電視標準中的重要音
訊格式之一。 
當廣告漸漸由傳統的類比廣播走入科技
化的數位互動後，人們對於數位化的技術有著
嚴苛的需求，如傳輸量的縮減以適應低頻寬的
不良環境、影音品質的重現和高效率的應用等
等，然而許多廣告中卻是參差著對於使用者無
用或有用的資訊，在數位電視廣播中對於這許
許多多的廣告內容，針對其音訊內涵用以系統
性地分析，獲取廣告相關有益於應用的內涵資
訊，則是本計畫的最大初衷。 
以 MP3 格式的音樂資料庫在網際網路以
及硬體 MP3 播放器中變得越來越普遍。目前
使用者對 MP3 音樂資料庫的查詢，一般都是
以文字資料(如：歌名、歌手等)關鍵字作為查
詢的依據。由於關鍵字是以人工方式建立索
引，容易因為人為的疏忽而導致錯誤，並且浪
費大量的資料輸入時間。因此，我們希望能透
過 MP3 音樂的特徵來做為查詢的依據，而最
好的特徵就是由原始音樂訊號所提供的特徵
資訊。在現有許多音樂分類(Music classification)
相關研究的方法，大部分都是利用語音辨識的
特徵值作為分類的依據，但是卻忽略了音樂本
身樂理的特性。因此，我們認為以和弦為基礎
音樂內涵式分析，利用和弦這種富含音樂性的
特徵可以提供更有效的分類以及查詢的結
果。因此，能夠自動判斷 MP3 數位音樂每個
樂音的和弦種類，變成一個十分重要的技術。 
力度(dynamics)是音樂表現與影響音樂聆
賞者心理情緒的重要因素之一。力度變化是音
樂家在演奏時的重要表現手法，目的在使音樂
展現出不同的情感。例如強的力度多數讓人感
覺激昂或緊張，而弱的力度則感覺輕鬆柔和。
 4
計算衰退的部分會得到較準確的結果。由實驗
數據我們可以得到在能量最高峰前的框架屬
於起奏的部分，在最高峰往下算 2 倍起奏框架
長度部分屬於衰退的部分。 
首先，我們將要分析的單一樂音的衰退
期，利用五個八度中同一家族的每一個樂音所
對應到的 MDCT 頻帶係數能量相加。然後比較
在 12 組樂音家族中哪一個樂音家族的能量最
高，能量最高的即是該樂音所落的家族，如圖
3 所示。接著我們再進一步分析該樂音是在同
一家族中的哪一個。若 x 為該樂音基頻所對應
的 MDCT 頻帶係數，則我們判斷在 x/2 與 x/4
基頻的位置，是否有能量出現，我們就可以決
定出該樂音屬於哪一個八度。 
 
圖 3 12 組樂音家族的能量分佈統計 
 
圖 4 音高與識別正確率 
根據[17]我們知道 MDCT 係數具有線性
的特性。因此，和弦的 MDCT 係數必定和其構
成音的 MDCT 係數有線性的關係。我們可以將
此線性關係寫成(1)式，其中 Xi 表示第 i 個構
成音的 MDCT 係數向量、Ci 表示第 i 個構成音
的加權係數。 
∑
=
=
N
i
T
iichord CXMDCT
1
      (1) 
根據 MDCT 的線性關係，我們以 C5 和弦
為例，統計其 MDCT 係數能量分佈，結果如圖
5 所示。我們可以看出 C5 和弦能量幾乎等於
{C5+E5+G5}三個組成音的能量和。因此我們
利用先前提到的單一樂音判斷方式，設定一個
適當的能量門檻值，當所對應 MDCT 係數能量
加總大於門檻值時，我們就認定該樂音為和弦
的構成音之一，再利用和弦組成的規則就可以
得到正確的和弦。 
 
圖 5 C5 和弦及其構成音{C5,E5,G5}的 MDCT
係數能量分佈 
(三) MP3 數位音樂中的力度分析 
 
圖6 力度分析系統整體架構圖 
本文所提出之力度表現自動偵測系統之
整體架構如圖 6 所示。首先，我們起音點偵測
(onset detection)技術將一首MP3音樂切分為一
連串的樂音(notes)。接著我們利用以往在樂句
分析方面所提出的方法[25]，將一連串的樂音
群組化形成一連串的樂句。由於一般樂譜的力
度符號大多是以一個小節(meter)或半個小節
為單位來標記，樂句與小節的對應關係仍需進
一步深入探討，本文以人工方式對樂句分析的
結果選取小節的邊界。 
在完成樂音與小節切分之後，我們接著計
算每個樂音的音強(intensity)。由於 MP3 音樂
的基本編碼單位為音框(frames)，而每秒鐘典型
的 44.1kHz取樣頻率的MP3音樂包括 38.28125
個音框，我們可以計算每一個樂音 n 的平均音
強 (n) 
  (2)
