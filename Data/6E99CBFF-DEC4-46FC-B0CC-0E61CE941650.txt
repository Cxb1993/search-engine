2 
中英文摘要 
本研究計畫目標在於研發服務整合平台所需的關鍵技術，以建立以無線感測網路為基礎
的社區照護 (community health care) 應用系統。無線感測網路是當前網路科技的發展前沿，
它的特點是每個感測節點都擁有獨立的通訊能力，可主動連結其他無線設備，快速完成通訊
網路的架設，應用範圍與日俱增，遠距醫療照護服務系統便是其中重要的應用領域之一。 
 
在此背景下，我們結合台北科技大學資工系網際網路實驗室在系統平台整合技術的專
長，與台大醫學系醫學資訊組在遠距醫療系統開發的專業，共同展開為期三年的『無線感測
網路架構下的廣用性社區照護服務整合平台之設計與建置』研究計畫。研究總目標在於研發
系統整合的關鍵技術，建構一個廣用性的服務平台，以發展應用於遠距照護的系統化解決方
案，使得照護需求者得以透過本系統，在無線感測網路佈建的社區範圍內，得到照護者提供
的必要照護和急難協助。具體的研究主題包括下列六大關鍵技術之研發。 
1. 無線感測網路與生理資料照護 
2. 照護服務終端閘道器技術  
3. 照護服務訊息處理技術  
4. 網路服務系統整合技術  
5. 服務導向照護系統建置  
6. 平台開發軟體工程技術  
 
我們以理論和實作並行方式，藉由資訊平台技術的創新應用，建立一個兼具廣泛性監測
和即時性支援的『廣用性社區照護服務整合平台』，實現無線感測網路應用於社區照護領域
的先導性研究。 
研究的過程中，我們分三年，環繞著六大關鍵技術進行研究與開發： 
第一年著重於系統分析與雛型應用的建立，透過軟體工程的方法，從需求的討論、功能
的確定、到系統架構的設計，完整分析系統的功能，及待突破的關鍵技術，以對整體系統有
全面性的了解。接著以軟體工程的開發方法，我們擇定一主要使用案例(Use Case)進行研究
及開發，將研發重點放在由生理感測儀器讀取後，經中介傳輸到資料呈現的關鍵性流程，從
中驗證系統的可用性，建立可運作的雛型系統。 
第二年在於系統功能強化與加強設計彈性，藉由持續的完成於第一年所分析出的系統功
能，以照護系統端相關的使用案例為主，進行研究與開發。除此之外，並加強系統的可靠度
與效能，及增加系統的設計彈性，讓後續系統擴充更加方便。 
第三年擴充了前端裝置及建立的完整照護流程，為增加使用普及度，我們擴增前端的控
制與訊息傳送裝置，加入支援的裝置類型。透過裝置類型的擴充，滿足不同使用者的需求，
以提昇整體照護系統的接收度。在滿足不同的使用需求後，進行完整的照護流程串接，將各
個不同的模組與新加入的元件加入此照護平台中。 
 
研究成果除有助提昇高需求照護群體的醫護品質外，更期望能藉由資訊、通信、與生物
科技等跨領域整合技術的突破，貢獻棉薄之力於提昇國家高附加價值新興產業的研發能力。 
4 
四、 結果.......................................................................................................................... 44 
五、 著作、專利、技術報告、或學生畢業論文 ......................................................... 47 
專利申請 ......................................................................................................................... 47 
期刊論文 ......................................................................................................................... 47 
研討會論文 ..................................................................................................................... 48 
六、 計畫成果自評 ......................................................................................................... 50 
技術發展 ......................................................................................................................... 50 
學術成果 ......................................................................................................................... 50 
產學合作 ......................................................................................................................... 50 
七、 參考文獻 ................................................................................................................. 51 
 
6 
報告內容 
一、 研究目的 
依據資策會MIC研究報告指出，未來健康照護、數位生活、綠色產業，及無線寬頻及相
關服務產業等新興產業，預估 2009 年全球市場規模約有 6,700 億美元，到了 2015 年全球市
場規模則可達到 3 兆 8,300 億美元。以 2009 年為例，台灣在健康照護與數位生活上，合計市
場規模預估可達 300 億美元的規模。未來健康照護與數位生活將成為未來開創產業發展新局
的重點發展產業。從表 1及表 2中可以了解到其未來發展潛力。 
 
表 1  新興產業未來市場潛力 
單位：億美元 
項目
年份 
無線寬頻及相
關服務產業 
數位生活 健康照護 綠色產業 
2009年 900 2,460 2,300 1,053 
2015年 9,120 16,600 5,970 6,650 
 
表 2  台灣在新興產業之產值預估 
 
項目 
年份 
無線寬頻及相關
服務產業 
數位生活 健康照護 綠色產業 
億美元 40 200 100 60 2009年 
台幣億元 1,280 6,400 3,200 1,920 
億美元 360 830 180 200 2015年 
台幣億元 11,520 26,560 5,760 6,400 
 
為因應數位化技術的發展與老年化社會的到來，經濟部於 2006 年 10 月通過的「2015 年
經濟發展願景第一階段三年衝刺計畫(2007-2009 年)」中，即將健康照護與數位生活列為未來
開創產業發展新局的重點發展產業。 
 
其中，針對於健康照護，政府預計於 2007-2009 發展銀髮族照顧服務、醫療器材、藥品、
健康食品等。例如銀髮族 U-Care 旗艦計畫，建構銀髮族健康照護體系，讓銀髮族可以在居
家或社區中(非醫院)得到尊嚴、舒適、即時、便捷之照護與生活品質。而在微小化醫療器材
開發計畫方面，將醫院的醫療器材微小化，可以方便提供個人健康管理。並將實施數位健康
產業發展計畫(遠距照護試辦計畫，Telecare)，以社區型態發展健康照護模式，同時導入資訊
化科技應用，使目前社區之醫療、社會福利資源能更有效率的應用與普及；透過資通訊科技
之應用，整合跨領域醫療照護專業服務資源，建立一個連結醫院與護理之家或養護機構之數
位健康照護服務系統，以協助提升健康照護品質。 
除此之外，由於社會總體醫療資源需求伴隨著人口結構老化而增加，國內外著名的研究
二、 文獻探討 
歐盟五國(英國、德國、荷蘭、瑞典、西班牙)於 2003 年 10 月完成一項名為「MobiHealth」
的行動式健康照護計畫，詳如圖 1所示。在此計畫中，居家端的照護需求者可利用穿戴式生
理監視感應器(monitoring terminal equipment)，透過近身網路(Body Area Network, BAN) 聯結
上 2.5G/3G廣域無線網路，將血壓、血氧濃度、ECG心電圖等生理訊號傳送至醫療院所等照
護端。藉由長期與連續性的生理資訊量測，高照護需求群體(例如老人、孕婦或是失能的慢
性疾病患者)，得以居家得到如同身處醫療院所般的周全醫護品質；同時，對於醫護提供者
而言，這項研究計畫也節省了相當的總體醫療資源，這對於老年人口比例持續增加，醫護資
源相對短缺的歐盟五國而言，具有以科技創新帶動醫療資源重分配的指標性經驗。 
  
圖 1 歐盟 MobiHealth 行動健康照護計畫 
 
在美國，聯邦機構CMS (The Centers for Medicare and Medicaid Services)連續四年贊助有
史以來最大規模的遠距醫療(Telemedicine)研究計畫--- IDEATEL 糖尿病患者居家照護計畫
(Informatics for Diabetes Education & Telemedicine)，總研究金額高達九億八千萬台幣，詳如圖 
2所示。這項計畫的照護對象是紐約州內的 1500 名糖尿病患者，他們利用家中的電腦與檢驗
設備(檢驗血糖、血壓及皮膚、腳部攝影)，定期將影響糖尿病的各項生理參數量測資料，上
傳至各醫療照護院所。然後，這些居家糖尿病患者可經由照護系統取得檢驗結果、病情分析、
治療建議、或異常警示。這個計畫檢證了大規模醫療照護服務藉由網際網路實施的可行性，
實驗結果將成為健康保險是否給付費用的參考依據之一，並提供其他州政府參考。同時，在
平台建置的安全考量上，是否滿足HIPAA法案(Health Insurance Portability and Accountability 
Act)對於認證、授權、加密、權限控管、與稽核等資料安全規範，也是本計畫的重點之一。 
8 
精靈」終端設備，在銀髮家庭、老人住宅、安養中心等地，建構起以電話固接網路為主的居
家照護系統。這套定價 3500 萬日圓的照護平台，自 2001 年 3 月 19 日年推出以來，在日本
已安裝 100 餘套，照護超過 6000 個家庭。服務項目包括病患個人資料(年齡、家族、疾病史)
管理、看護員工時安排、緊急通報對應、醫護專業諮詢等，詳如圖 4所示。 
 
圖 4 日本 NEC SUKOYAKA Net-i 居家護理支援計畫 
 
在國內研究方面，行政院於 2006 年 10 月通過的「2015 年經濟發展願景第一階段三年衝
刺計畫(2007-2009 年)」中指出，未來健康照護與數位生活將成為未來開創產業發展新局的重
點發展產業。工研院配合政府政策發表「遠距居家照護服務計畫」的推動方案，計畫整合資
訊、寬頻與無線通訊科技、醫療科技與醫療資源，積極建構完善的居家照護體系，詳如圖 5
所示。「遠距居家照護」全程計畫包括： 
1. 完成終端平台技術 (Health Watch)，開發具備共同平台與模組化特性之可穿戴式
生理監視器。 
2. 完成資訊與應用平台 (Health Base)，開發心血管疾病診斷分析應用系統。 
3. 完成示範性服務佈建，選定工研院內二個地點(中興院區醫務室,南分院)，與台
大醫院合作進行遠距居家照護示範性服務。 
 
上述計畫完成後，將實現一個端對端(End-to-End)的整合服務系統，隨時提供遠距照護服
務(Plug and Care)。 
10 
三、 研究方法 
1 系統研究子題規劃 
 研究總目標在於研發系統整合的關鍵技術，建構一個廣用性的服務平台，以發展應用於
遠距照護的系統化解決方案，使得照護需求者得以透過本系統，在無線感測網路佈建的社
區範圍內，得到照護者提供的必要照護和急難協助。具體的研究主題包括下列六大關鍵技
術之研發，系統架構詳如圖 7所示。 
 
圖 7 廣用性社區照護服務整合平台系統架構圖 
 
z 無線感測網路與生理資料照護 
 本計畫的任務之一是擔任整合計畫中網路運作平台的資訊閘道 (data 
gateway)。透過子計畫四中介軟體(middleware)提供的 API，我們設計操作介面供子
計畫一進行網路拓樸(topology)控制演算法調校，以建構高可靠度 (dependable) 和
節省能源 (energy-efficient) 的通訊基礎架構。子計畫二使用本計畫提供的 Web 介
面，讀取網路層位址格式 (addressing)、路由 (routing)、和推進 (forwarding)的相關
資料，以作為動態策略調整效能的管理介面。另外，子計畫三定位機制產生的無線
感測節點座標，集中紀錄在本計畫的資料庫系統，透過分析後供緊急照護服務使
用。這些系統整合工作的完成，使本計畫成為此無線感測網路的管理中樞。 
 
z 照護服務終端閘道器技術 
 透過無線感測網路取得使用者生理資料後，需傳送至照護系統中，以供醫護人
員進行診療及照護。在本研究計畫中，我們設計不同的服務終端閘道器，以滿足不
12 
2 關鍵技術介紹 
2.1 OSGi Platform 
OSGi 是一種標準的服務執行環境，若服務閘道器支援 OSGi，則該閘道器將提供標
準的程式執行平台，並解決與底層軟硬體連接的問題，可使服務提供者能使用標準的規
格讓服務執行於嵌入式設備之上。OSGi 承襲了 Container-managed 應用的開發模式，從
伺服器端的 J2EE Container 到行動裝置上的 MIDP Application Management Software 
(AMS) Container，Container 除了提供了應用程式執行的基本環境，還供應了許多管理
服務，其基本特性包括： 
(1) 獨立運行(Self-contained)的環境：應用程式以可移植的程式碼執行於 Container 環境
中。藉由 Container 維護應用程式的相依性與相關的資源。 
(2) 生命週期的管理：藉由實作 Callback 函數介面，建立應用程式與 Container 溝通的機
制，包含啟動、停止、更新與刪除等程序。 
(3) 應用服務執行環境：Container 提供能滿足特殊應用(如：Transaction、Security)的基
本服務。 
(4) 客制化的服務：讓應用程式能成為一項服務，這便是重複利用與模組化程式的精神
所在。 
 
圖 8  OSGi 技術架構圖 
 
 有了 OSGi 的執行平台，可專心開發執行於 OSGi 平台上的程式，稱為 Service 
Bundle。Bundle 為一小型的 Java 程式，遵照 OSGi 所訂定的介面規範。每一 Bundle 提
供不同的服務，如 Http、Logging 等。未來將透過開發並整合不同的 Bundle，使用 OSGi
平台所提供的網路、檔案存取及介面連接等服務，以完成傳送生理資料所需功能。完成
開發後，則藉由 OSGi 提供的 Life Cycle 管理和第一年遠端部署的成果，將軟體更新至
服務閘道器之上。 
 
 在 OSGi 執行平台的選擇上，將採用 Knopflerfish 與 IBM SMF 作為執行平台，執行
所需的系統功能。Knopflerfish 是由 Gatespace 所維護的開放原始碼專案，是目前通過
OSGi R4 規範的三家廠商之一。該專案可支援多種平台，如 Windows、OS2、Linux 等，
亦可支援 J2ME 的環境，例如可於撼訊的服務閘道器中執行。除此之外，該專案並針對
於 Eclipse 平台設計外掛程式，開發者可於 Eclipse 環境上安裝 OSGi 外掛程式，以加快
程式開發的速度及簡化測試的複雜度。在管理方面，使用者可透過一般的文字命令列的
方式管理 OSGi 上的應用程式，亦可透過 Knopflerfish 專有的 Desktop Bundle，以視窗的
14 
JMS API 的使用，可以建立訊息交換的基本元件，研究及建立監測代理人所需的資
料傳輸功能。 
 
2.2.2  非同步訊息交換機制設計 
 由於前端傳送裝置可能遭遇網路斷線的問題，或者社區照護平台可能會有負載
過重的情況，此訊息傳送架構須能克服相關問題，讓訊息的交換更為穩定。在 MOM
架構的設計中，我們將採用非同步的訊息交換方式，讓訊息能暫存於訊息佇列中，
待傳送裝置恢復處理能力時，再繼續後續的處理工作。針對非同步的資料傳輸方式，
將採用兩種不同的訊息交換方式，應用於不同的情況。 
 
 點對點訊息模式 
此訊息模式主要由三部份所組成，分別為訊息產生者(Producer)、訊息消費者
(Consumer)與訊息佇列(Queue)。訊息傳送者將訊息傳送到特定的訊息佇列中，再由
訊息消費者取得訊息內容。訊息佇列會暫存訊息，直到訊息消費者處理完該訊息，
或該訊息已逾有效期限，其架構如圖 11所示。 
 
圖 11  點對點模式架構圖 
  
點對點訊息模式的特點包括： 
z 每一訊息只存在一訊息處理者。 
z 訊息產生者與訊息消費者不存在時序的相依性。也就是說，訊息消費者可隨時
取得佇列內的資料，不需在訊息產生者傳送的時候進行接收。同樣的，不論訊
息消費者是否存在，訊息產生者皆可隨時將訊息傳送至佇列中。 
z 訊息消費者透過確認訊息(Acknowledges)告知訊息佇列可以移除已處理的資
料。 
此模式適用於訊息需被一個訊息消費者處理的情況。在本研究中，此訊息模式
可應用於傳送裝置更新自身狀態至社區照護平台上使用。 
 
 發佈/訂閱訊息模式 
不同於點對點訊息模式，發佈/訂閱模式主要由訊息發佈者(Publisher)、訊息訂
閱者(Subscriber)與訊息主題(Topic)所組成。訊息發佈者產生訊息，並將特定的訊息
傳送至特定的主題中儲存，由對該主題感興趣，且訂閱該主題的訂閱者取出並處
理。訊息主題會持續儲存該訊息，直到所有的訂閱者皆已取得，或該訊息已過有效
期限。 
16 
 圖 13  Hibernate API 架構 
 
2.4 SOA 建構的照護系統 
在進行相關理論研究之後，本計畫將透過軟體實作，來驗證理論的正確性。本計畫
的建置，預計採用服務導向的程式設計方式進行開發。服務導向的設計希望能組合已定
義、標準化，可重複使用的服務來達成新的功能，並能視需求快速的調整系統流程。它
的服務只能透過已發佈的介面進行存取。元件必須能夠連接到其他元件（透過通信介面）
以構成一個更大的功能。服務通常實作為功能較為全面的軟體實體，可單獨存在，並且
透過鬆散耦合的訊息通信模型來與應用程式和其他服務互動。圖 14 為服務導向架構的
參與者，包括： 
 服務：邏輯實體，為一個或多個已訂定介面的軟體功能。 
 服務提供者：實作已訂定的服務介面的實體，提供該軟體功能供他人使用。 
 服務使用者：呼叫服務提供者的軟體服務。 
 服務定位器：一種特殊類型的服務提供者，它作為一個註冊中心，允許尋找服
務提供者介面和服務位置。 
 服務代理：一種特殊類型的服務提供者，它可以將服務請求傳送到一個或多個
其他的服務提供者。 
 
圖 14  服務導向架構的參與者 
 
概念上，SOA 可分為三個部份，分別為： 
18 
上，設計系統功能。 
 
圖 15  應用程式設計層次 
 
然而，早期的 SOA 實作專案經驗發現，諸如 OOAD、EA(Enterprise Architecture，
企業架構)和 BPM(Business Process Modeling, 業務流程建模) 這樣的現有開發流程和
表示法僅僅涵蓋支援 SOA 所需的部分要求。SOA 方法在維護既有的通用軟體架構原
則（如資訊隱藏、模組化和問題切割等）的同時，還增添了新的討論議題。從建模的角
度來說，SOA 所衍生的研究，在於如何定義出良好的操作、服務和流程，以及如何系
統化的建立出實體功能。這相關的理論與方法則是本計畫的核心研究重點。 
 
圖 16展示了現有的 EA、BPM 和 OOAD 建模方法的主要應用領域。圖中的水平
軸表示軟體開發的生命週期；垂直軸表示不同抽象層或領域之間的區別。 
 
 
圖 16  BPM、EA 和 OOAD 在軟體開發的應用領域 
 
在物件導向設計中，我們說明了 OOAD 在 SOA 分析上的不同之處，除了 OOAD
以外，SOA 尚有系統框架與流程等議題。在系統框架上，諸如 Treasury 企業架構框架
（ Treasury Enterprise Architecture Framework ， TEAF ）、  特性導向的領域分析
（Feature-Oriented Domain Analysis，FODA）和 Zachman 這樣的 EA 方法都能應用於
專案架構的分析，但是並沒有解決如何找到易於重用且具有持久性功能的問題。  
 
20 
22 
機制的再使用，及照護系統的設計，與相關流程技術的運用，預計將能完成本研究子題
所需的功能。各部份相關的流程技術介紹如下： 
 
 
支援服務(Supporting Services) 
 介面映射(Interface Maps)：現有元件的介面可以在語義上匹配，但是在語法上
不匹配。對於已存在的元件和需要存取的服務更為如此。介面映射透過轉換這
些介面規格以進行呼叫。此外，可以使用物件轉換服務呼叫實際的物件參數。 
 物件映射(Object Maps)：可以使用物件映射將某種類型的系統物件轉換成另一
種類型的系統物件。可以透過多種方式使用這些映射，例如，在介面映射中將
某種類型的參數資料轉換成另一種類型。  
 物件關係(Relationships)：開發者可能需要在系統整合場景或者不同的後端系
統中存取相同的資料。保持系統物件同步的一個常見的問題就是使用不同的關
鍵字表示同一物件。物件關係服務在這些不同的系統物件之間建立關聯。通常
在將一種系統物件格式轉換成另一種格式時，從系統物件映射中存取這些關
係。 
 選擇器(Selectors)：可以使用選擇器元件動態選擇和呼叫相同介面的不同服務。 
 
服務元件(Service Components) 
 系統流程(Processes)：系統流程元件實現了與服務流程執行語言相容的流程引
擎。可以開發和部署業務流程，它支援長時間執行和短時間執行的系統流程以
及可伸縮的基礎設施中的補償模型。 
 人工任務(Human Tasks)：任何人工需要使用者的介入來完成某功能，以進行
下一步驟的動作。如可能需要使用者的決定，來確定是否需進行進一步的搜尋。 
 狀態機(State Machine)：狀態機提供流程建模的另一種方式。通過這種方式，
可以根據輸入條件和流程來改變流程的狀態，例如在取得評估資訊的一連串服
務呼叫時，可視需求變換至不同的處理模式。 
 規則(Rules)：業務規則用以將系統中的許多判斷依據等，以外部資源檔的方式
呈現，此方式的採用可讓系統的調整更具彈性。 
 
的應用和需求方面的主要風險。對於建立在原有系統基礎上的開發專案來說，初始
階段可能很短。 
z 細化階段(Elaboration Phase)：細化階段的目標是分析問題領域，建立健全的系統
架構，建立專案開發計畫，移除專案中最高風險的元素。為了達到該目的，必須在
了解整個系統的基礎上，對整體架構進行評估，包括其範圍、主要功能和性能等非
功能需求。同時為專案建立支援環境，包括建立開發範例，建立模板、準則並準備
相關工具。  
z 建置階段(Construction Phase)：在建置階段，所有剩餘的元件和應用程序功能被開
發並整合為產品，所有的功能被詳細測試。從某種意義上說，建置階段是一個製造
過程，其重點放在管理資源及控制運作以最佳化成本、進度和質量。 
z 交付階段(Construction Phase)：交付階段的重點是確保使用者能正常使用軟體。交
付階段可以跨越幾次迭代，包括為發佈做準備的產品測試，根據使用者的反應作少
量的調整。在生命週期的這一點上，使用者的回應主要集中在產品調整，設置、安
裝和可用性問題，所有主要的結構問題應該已在早期階段中完成。 
 
 
圖 18  Unified Process 架構圖 
 
在軟體的發展上，橫跨於不同的開發階段則有不同的流程，開發流程與發展階段的
關係如圖 18所示，各流程介紹如下： 
 
z 商業建模(Business Modeling)：商業建模工作流描述了如何為新的目標組織開發一
個構想，並基於這個構想在使用案例模型和商業模型中定義組織的過程，角色和責
任。  
z 需求(Requirements)：需求工作的目標是描述系統應該做什麼，並使開發人員和使
用者就這一描述達成共識。為了達到該目標，要對需要的功能和限制進行提取、組
織、文件化；最重要的是理解系統所解決問題的定義和範圍。  
z 分析和設計(Analysis & Design)：分析和設計工作將需求轉化成未來系統的設計，
為系統開發一個強建的結構並調整設計使其與實際環境相容，最佳化其效能。分析
設計的結果是一個設計模型和一個可選的分析模型。設計模型是概念上的原始碼，
24 
4 研究步驟 
本計畫除了透過六項研究子題的發展，建構完整的遠距照護平台外，在實際的發展
上，考量到各子題的相關性與整體計畫的完整性，我們更進一步將計畫分為三階段進行
建置與整合，以有步驟的建立完整系統功能。 
第一年：系統分析與雛型應用的建立 
本年度的工作重點，在於透過軟體工程的方法，從需求的討論、功能的確定、到系
統架構的設計，完整分析系統的功能，及待突破的關鍵技術，以對整體系統有全面性的
了解。接著以軟體工程的開發方法，我們擇定一主要使用案例(Use Case)進行研究及開
發，將研發重點放在由生理感測儀器讀取後，經中介傳輸到資料呈現的關鍵性流程，從
中驗證系統的可用性，建立可運作的雛型系統。 
系統需求分析 
整體的社區照護中心可從四個面向分析其功能：操作面、服務面、管理面、經營面
等，其中操作面包括：量測與上傳、接收、預判、照護、回覆；服務面包括：傳送精靈
下載、個人資料管理、個人服務管理、服務品管、超額使用通知；管理面包括：組織管
理、人員管理、系統計費、單位人員報酬分配、使用者計費、使用者繳費方式、訊息系
統、罐頭訊息；經營面則包括：結帳與報表等。 
詳細的分析資訊摘要如下： 
1) 系統架構 
1.1) 組織架構： 
 
圖 19  照護系統組織規劃 
 
1.2) 角色介紹： 
系統共分六種角色，分別為： 
1.2.1) 系統管理員：系統預設的管理員，用以新增/修改/刪除院所(Ex：敏盛
醫院)及設定院所管理員。 
1.2.2) 院所管理員：院所對應於實體世界之醫院，院所管理員管理該院所下
之單位(Ex：心臟科一診)並設定單位管理員。 
1.2.3) 單位管理員：單位對應於實體世界之醫院科別，單位管理員管理醫
生、助理及使用者。 
1.2.4) 醫師：檢視心電圖資訊，並給予適當建議。 
26 
 
圖 22  系統操作介面規劃 
 
A. 作業名稱，標識此工作頁之名稱 
B. 統計資訊，顯示此工作頁所在位置之資訊，以上圖為例，此為使用者陳佩蓉
之照護資料，因此顯示陳佩蓉之所屬院所、單位、照護醫師。並顯示陳佩蓉
已照護及未照護的心電圖數量 
 B1. 以彈跳視窗顯示該項目基本資訊 
 B2. 根據權限，顯示該角色所能檢視之列表，以上圖為例，由於登入者角色為
醫師， 
因此點選後，列出醫師能檢視之列表：使用者列表 
C. 項目查詢，針對數量較大之列表，提供搜尋功能尋找特定目標 
D. 詳細資料，點選列表之項目，提供該項目詳細資料 
D. 排序按鈕，提供資料排序能力 
5) 分頁資料，資料過多時，以分頁顯示，提高可讀性 
 
3.3) 人員/單位管理 
3.3.1) 編輯院所 
z 角色：系統管理員 
z 自管理入口登入 
z 新增：院所列表Æ新增院所 
z 修改：院所列表Æ點選該院所管理員Æ修改 
z 刪除：院所列表Æ欲刪除之院所Æ刪除 
3.3.2) 編輯單位 
z 角色：院所管理員 
z 自照護入口登入 
z 新增：單位列表Æ新增單位 
z 修改：單位列表Æ點選該單位管理員Æ修改 
28 
z 選取症狀，加快檢視速度或點選新增將已輸入之症狀及處理方式加入
症狀列表中 
z 修改優先等級，以提示助理調整回覆時間 
3.4.5) 助理回覆 
z 角色：護士、醫師 
z 自照護入口登入 
z 登入Æ照護作業Æ點選顯示為“待回覆”的 ECG 資料 或 
z 登入Æ照護作業Æ使用者列表Æ點選使用者Æ點選顯示為“待回覆”
的 ECG 資料 
z 選取快取訊息，或點選“新增訊息”，新增常用訊息 
z 確認電話號碼，助理選擇以手機簡訊通知或打電話通知 
z 點選回覆，將以簡訊通知使用者 
3.4.6) 使用者檢視 
z 角色：護士、醫師 
z 照護入口登入 
z 登入Æ照護資料列表Æ點選欲檢視的 ECG 資料 
 
生理資料感測裝置： 
在感測裝置讀取生理資訊的部份。為了使住戶能夠自在地在居住環境下生活，這些
感測器就必須設計的非常輕巧，相對的，傳輸距離便會受到限制。利用無線感測網路的
Multi-Hop Wireless Network方式可解決這樣的問題，但無線感測網路與一般的無線網路
傳輸有所差異，尤其是無線感測網路有特別的繞路拓樸(routing topologies)、自我組織 
(self-organization)。一般的生理資訊量測裝置並無法直接具備感測網路的傳輸架構，因
此，生理感測器(如讀心機)需要外接上Edge Server來賦予無線感測網路式溝通的能力，
以及提供執行TinyOS的環境。計畫選擇隨身型的心電量測器作為資料傳送的前端，結合
達楷生醫科技所研發的RMH讀心機(圖 23)作為社區照護的一個感測節點，該讀心機具
有體積小、攜帶方便的特點，使用者不受時間地點的限制，只需以手指按住接觸板，不
需導線、電極貼片及複雜的操作步驟，即可自行量測心電圖資訊。為本社區照護環境所
使用心電圖量測儀器。而Edge Server的選擇，在第一年的研究中，則以撼訊公司所發展
的服務閘道器(圖 24)為平台，進行資料的處理與傳送。 
 
 
30 
32 
供相關 API 讀取，指令如下： 
ln -s  /dev/ttyUSB0 /dev/ttyS100 
 
C. 在服務閘道器上，透過串列埠連線 API 進行讀取設計 
由於連接上 RMH 讀心機時，會在/proc/bus/usb/devices 檔案中建立相關資料，
因此我們監看該檔案，以在 RMH 裝置連接時，立即處理。 
cat devices|grep 2303|grep 067b  //將具有 2303 及 067b 的行給濾出 
將該資料轉存為另外一個檔案，以供 Java 程式感知所接入的裝置是否為 RMH
讀心機。接著設計相關的 Java 程式，以在 RMH 讀心機接上服務閘道器後，立
即進行處理。 
   fileReader = new FileReader("/etc/usbmgr/devConn"); 
   bufferreader = new BufferedReader(fileReader, 20); 
   String isConnected = bufferreader.readLine(); 
   if (isConnected.equals("yes") && orgState.equals("no")) { 
     // Do something 
   } else if (isConnected.equals("no") && orgState.equals("yes")) { 
     // Do something 
   } 
 
資料處理與傳送 
在將資料從前端感測裝置讀入後，edge servers便伴演著資料處理以及資料暫存的工
作。其中資料儲存的功能用以維護連結感測器的歷史資料。資料處理能力則是用來進行
資料整合與資料過濾的功能。此外，edge server還提供了服務平台對於資料訂閱和下達
感測設定指令的中介管道。在計畫中，我們以閘道器做為收集心電圖訊號與傳遞心電圖
訊號至服務管理系統的edge server的實體環境。在開發環境的選擇上，我們選擇了OSGi 
(Open Services Gateway Initiative)做為我們的開發環境。因為OSGi具有標準化開發程
序、服務相互共用、生命週期管理、服務導向等特性。此種開發環境使我們減少了接觸
低階的閘道環境控制的負擔，簡化系統設計的複雜度。當中的服務導向運作環境，也使
得我們能透過動態註冊的機制來減少程式碼重複出現的機會。圖 25即為ECG外掛mote
與edge server外掛mote的互動關係圖。待資料收集至edge server後，再經由網路傳輸將資
料送至照護平台。在此傳遞的過程中，服務整合平台伺服器是執行於遠端的環境上，因
此，傳輸的穩定度也是另一個要考慮的問題，也就是透過可靠性傳輸(reliable 
communication)，採用MOM架構，將資料送達至遠端的伺服器上。 
 
第二年：系統功能強化與加強設計彈性 
 第二年的研究目標，在於持續的完成於第一年所分析出的系統功能，以照護系統端
相關的使用案例為主，進行研究與開發。除此之外，並加強系統的可靠度與效能，及增
加系統的設計彈性，讓後續系統擴充更加方便。 
管理介面加強 
本年度計畫加強了管理介面上的設計。第一個部份是介面設計方法的加強，過去系
統在開發完成後，仍會有許多因為程式邏輯的改變使得頁面流程隨之變動的需求，例如
社區照護管理策略有所變化。在此情況下，若無採用較具彈性的頁面流程設計方式，則
流程的變動將會影響整個系統平台，需要重新修改並編譯程式碼才能達到系統的需求，
為此將造成開發的負擔。第二個部份是在資料庫設計方面的加強，我們以往當資料庫結
構描述(schema)有所改變時，會影響所有與之相關的功能、類別等，系統需自底層修改
至前端的照護畫面。所以，社區照護系統在設計時便考慮要以何種方式進行實作，才可
讓底層的資料庫 schema 改變時，不會影響到上層的應用程式，而只需修改設定檔案即
可修改之間的關聯，進而簡化照護系統在資料庫程式的開發複雜度。 
 
系統效能改善 
另外，持續的改善系統效能及加強系統設計的彈性亦是第二年研究重點，因應大量
感測資料來源的情況下，如何在資料送至服務平台之前，便先將不必要的資料過濾。我
們也強化了資料收集的引擎設計，以提高資料處理的效能。這部份將從訊息配送機制方
面著手，也就是將訊息快速歸納到對應的資料處理欄位當中。對於此社區照護系統而
言，其服務範圍不受限於單一醫療單位，因此在使用者之帳號與使用者所量測的心電圖
資料，其數量相當龐大。因此，若以關聯式資料庫儲存之，將遭遇從大量的資料中搜尋
資料之考驗。因此我們研究如何對資料做適當的儲存以便能以更有效率的方式來搜尋資
料。例如，醫師要調閱某個使用者之心電圖量測資料為例。如果是採用一般關連式資料
庫的儲存方式，量測的資料為了維持資料與使用者隸屬的關係，我們通常會使用一個欄
位來記錄該資料是屬於那一個使用者。如果資料是儲存於LDAP中，則將使用者節點的
DN來作為量測資料的foreign key。上述兩種作法，在實作組織管理功能時，因為人員與
單位之間的關係(如圖 26)可用樹狀圖形來表示，所以為省去利用關聯式資料庫來實作樹
狀、階層式(hierarchical)的資料結構之負擔，於是我們採用LDAP這種特殊的資料庫作為
實作結構。 
 
圖 26  醫師檢視使用者之量測資料 
34 
36 
rdn uid=Alice RDN 
dn uid=Alice,o=system,dc=ilab,dc=development, 
dc=tw,dc=ecg,dc=root 
DN 
userPassword a1234 密碼 
cn 陳敏惠 姓名 
 
表 7  LDAP ecg 量測資料資料 
ecgData (LDAP) 
屬性 值 / 範例內容 敘述 
objectClass ecgData 自訂的物件類別 
ecgID 數字(bigInt) 自訂屬性 
rdn ecgID =數字[註 1] RDN 
dn ecgID=數字,uid=Janice ,uid=Bob,ou=ntuh 
,o=system,dc=ilab,dc=development,dc=tw, 
dc=ecg,dc=root 
DN 
nurseSN 數字 自訂屬性，儲存初判的
護士序號 
「註 1」：ecgID 採用 DB2 資料庫欄位型態中的 BigInt,其範圍-9,223,372,036,854,775,808  
到 9,223,372,036,854,775,807，所以從 1 開始取自動編碼作為 ID。 
 
表 8  LDAP 群組資料(adminGroup、directorGroup、managerGroup、nurseGroup、
doctorGroup、userGroup) 
屬性 值 / 範例內容 敘述 
objectClass groupOfUniqueNames 物件類別 
dn cn=doctorGroup,dc=ecg,dc=root distinguish name 
rdn cn=doctorGroup relative distinguish 
name 
cn doctorGroup 群組名稱 
uniqueMember uid=Bob,ou=cardiacDep,o=ntuh,o=system,dc=ilab,dc=develop
ment,dc=tw,dc=ecg,dc=root 
成員 
 
 
安全性資料傳送 
要將資料傳送至伺服端，使用者端的應用程式中，需包含資料傳送的位置，使用通
訊協定、使用者名稱及密碼等資訊，為避免該資訊被有心人士所竊取，該檔案在建立時，
透過Rijndael所開發的Data Encryption Standard (DES)加密程式，以 128 位元的密碼長度
進行加密，讓使用者的資訊不被他人所竊取(如圖 27)。在本系統中，我們並將該加密程
式從C++語言轉移至Java平台。讓在伺服器端加密的檔案(Java)，能在前端使用者傳送裝
置中讀取(C++)。 
處理。 
z Service Component Layer：根據 Service Layer 內的定義，實作了該 Service 的功能，
相同介面的 Service 可擁有不同的實作，以根據需求呼叫需要的服務。在本系統中，
Component 的設計除了重新打造新的功能外，許多的元件是轉換第一年的研究成
果，以提高可重用性。 
z Process Layer：在此部份中，我們定義了系統的運作流程與商業邏輯。例如當接收
到訊息後，經過初階的處理，會啟動照護流程，經過護士的處理、醫生照護、訊息
通知、收費計價等步驟。 
z User Interface Layer：提供使用者、護士、醫生、及管理員相關的照護介面，並根
據操作內容，呼叫對應的 Process 或 Service。 
 
圖 29  服飾導向照護系統建置 
 
自動任務分派 
由於並非所有醫護人員皆持續的在線上提供服務，因此使用者與照護人員的關係不應綁
定，以避免某醫護人員因長時間未上線導致某使用者資料未受照護。因此，在本系統中，
我們設計一「自動任務分派架構」進行工作分配。如圖 30，當生理資料送入系統時，
系統將找出正在線上的照護人員，根據醫護人員的工作量，將訊息送給適當的照護人員
進行照護。當醫護人員離線時，系統會將分配給該照護人員的工作收回，重新在線上的
照護人員中找尋適當人員，以進行照護服務。 
38 
filters 對服務請求訊息執行封裝處理，並轉成標準協定的格式。當外部醫療系統接收服
務請求訊息(SOAP 格式)時，其 Input filters 對服務請求訊息執行解封裝處理。 
 
本模組中的安全封裝處理元件是提供服務安全機制的功能。安全封裝處理元件會連結
本系統的安全控管系統，取得相關認證授權資訊，並加入欲傳遞的訊息內容中，以確保
服務的請求是經過認證、授權的合法程序。在訊息格式部分，將遵循 WS-Security 的標
準，對 SOAP 訊息進行資料的加解密和對數位簽證的支援。 
 
系統管理與安全性規劃 
系統管理模組能協助管理使用者、群組、角色、許可、政策，以及應用程式存取。系
統管理模組提供了使用者授權管理，還可進行數個層級的授權管理。系統管理平台能管
理廣泛的目標資源，包括受代理伺服器所保護的資源、受網站伺服器保護的資源，以及
任何納入安全環境因素的資源。這些資源是以受保護的物件空間(Object Space)呈現，並
可由管理員或經過授權的管理員負責控管。各角色相關的系統功能列表如所示。 
 
圖 32  各角色系統功能示意圖 
 
系統管理模組負責管理使用者群組、角色以及安全策略的相關設定，其具體功能規劃
包含：(1)應用系統權限設定與維護服務 (2)使用者群組定義與維護服務 (3)人員資訊的
維護服務  
(1) 應用系統權限設定與維護服務包含：   
 新增應用系統角色（Role）要求  
此功能負責新增應用系統角色。應用系統以角色來代表某些權限，一個角色允
許對應多個功能，如社區照護入口閘道應用系統中有社區管理人員的角色，此
角色所對應的功能為何種醫護資料。角色也可對應多個群組及個人。  
40 
上述功能的實現，系統管理模組規劃以 Web 化人機介面方式開發，擬以應用伺服器作
為運作平台以執行所有 Web 元件，並以 JAVA 程式語言設計前端人機介面的互動機制，搭配
各模組系統的相關設定進行整合，其系統架構圖如圖所示。 
 
圖 33  系統管理模組架構圖 
 
多樣化照護裝置設計 
為使更多的使用者使用本照護系統，應針對不同的使用者需求進行開發。因此在本系
統中，我們設計不同的前端傳送與處理機具(Edge Server)，以增加其應用情境。然而，
各裝置的平台各異，要加支援的裝置類型，需要針對各別的平台進行設計，如此一來將
增加系統的開發與後續軟體維護的成本。因此，本系統擴充第一年的研究成果，移植
OSGi Framework 至各平台上，以增加系統的重用性。PC、PDA、Server Gateway 等，
都可在此平台下，加入社區照護平台的支援行列。 另外，伴隨 JSR232 規格的發展與實
作，在不久的將來，Mobile Phone 亦可成為社區照護平台的一員，幫助在偏遠地區及行
動性較高的使用者，進行資料的傳送。 
為提高前端 Edge Server 的重用度，我們根據其系統功能，將其分為五模組，各模組
間的關係請見： 
1) Biosignal Receiver 負責連接感測網路，取得使用者的生理資訊 
2) Signal Processor 處理由使用者端取出的生理資料，例如確認資料正確性、壓縮檔案、
轉換格式等。在本系統中，透過 getServiceReferences()取得在該裝置中支援的 Signal 
Processor 種類，透過各 Signal Processor 的整合，處理待傳送的訊息。 
3) Net Transmitter 負責訊息的傳送，各種不同傳送方法的支援，可透過實作通用傳送
介面的方式來達成。在本系統中，可透過 Socket、Http、Https、與 JMS 等方法將資
料送入照護伺服器中。 
4) Edge Controller 控制了系統的運作流程，將訊息在不同的 Module 中流通，以將資料
作最佳的處理，並根據需求，呼叫適當的模組。 
5) User Interface 負責將照護的結果、系統的狀態與相關設定顯示給使用者參考，同時
根使用者的命令，處理對應的工作。在本系統中，設計了不同的使用者界面以符合
不同的使用者需求，例如 Web 版本、或是文字模式等介面。 
42 
四、 結果 
1. 在 sensor edge server 方面，我們已完成開發環境與執行環境的佈署，並且我們已在
該環境上研發出能與心電圖機通信的整合介面、資料傳送程式。此項成果讓生理感
測資料能透過網路傳遞到遠端的社區照護管理中心，進行後續的診斷分析。 
2. 在照護設備整合介面方面，我們已完成了心電圖量測儀器與 edge server 的連線整合
介面。本研究所使用的社區照護裝置乃透過 serial-USB 連接器進行設備串接，現階
段我們業已能控制此 RS-232 訊號轉換成為 USB 的訊號介面。過程中，我們為了
控制這個連接器，嘗試了多種連通方式，最後使用了 RXTXcomm 開放原始碼來連
結序列埠。此項基礎將為先期的社區照護系統發展上提供所需的資料來源，並成為
照護設備與 mote 橋接器上讀取程式的研發基礎。同時，我們為使資料讀取介面程
式已能夠動態的偵測有無設備連結，我們也設計了一自動追蹤的執行緒服務來持續
進行掃描的工作。在照護設備整合介面方面，我們現階段所遇到的問題是面對多個
照護設備時，如何能有一致的設備控制介面，使得在抽換不同設備時，僅需更動驅
動程式以及少數的程式碼便能夠順利執行，減少額外開發的負擔。所以在下半年，
我們將繼續研發照護設備的通用讀取界面，以便能容易的銜接新的照護設備。 
 
圖 36  PDA Base 訊息傳送架構 
 
3. 在傳送與接收技術方面，我們已成功地將取得之照護資料轉送給訊息交換的模組。
本計畫目前實作了 Servlet 與 SOAP 兩種資料傳輸的通信方式。起初，我們面臨到
一般 SOAP API 無法在 edge server 上正確執行的情況。原因是雖然 SOAP 已在 J2SE
與 J2EE 領域上已有相當多的相關標準與實際的應用。不過，這些標準在 J2ME 環
境上不一定適用，因為在 J2ME 上會面臨到執行效能與資料大小的問題。更明確的
來說，這些 API 在執行記憶空間與處理的基本需求上需要調整，才能因應裝置上的
空間問題。我們在 edge server 上已利用了 JAX-RPC 與 JAXP 相容的輕量化 API 來
44 
 
照護資料統計圖表 
 
生理資訊查詢功能 
 
 
 照護建議查詢  
5. 在照護介面核心技術方面，在本計畫已利用 Hibernate 的技術，採用「物件/關聯」
的架構，分隔底層資料庫與上層 Java 程式，藉由物件對應的方式，讓 Java 類別與
底層資料庫對應。利用 Hibernate 技術來幫助管理資料庫連線等繁複的工作以簡化
與資料庫連結的複雜度、加快開發流程，並將資料庫 Schema 的改變對應用程式的
影響降到最低。 
6. 在照護設備整合介面的加強方面，我們已研發照護設備的通用讀取界面，業已使多
種社區照護感測裝置的開發模式能有所一致，運用抽象介面的方法，減少程式高度
耦合所造成的維護問題，以便能容易的銜接新的照護設備 
7. 在傳送與接收模組的加強方面，我們除了使用存取資料庫與交易控制的 API，來對
於資料紀錄(Record)作鎖定的保護，以解決資料更新錯誤的問題之外，我們成功避
免在大量的執行緒下，所引發交易逾時(Transaction Timeout)的情況發生。所以，我
們為了避免多執行緒在競爭相同的資料庫欄位的存取權限下，使得等待時間太長導
致交易逾時(Transaction Timeout)的情況發生。此外，我們亦利用存取資料庫的
API(Hibernate Framework)與執行緒同步設計的理論，研發傳送與接收模組上的資料
交易管理程式。 
46 
48 
z I.-Y. Chen and C.-C. Huang, “A Service-Oriented Agent Architecture to Support 
Telecardiology Services on Demand,” Journal of Medical and Biological Engineering, 
Vol. 25, No.2, pp. 73-79, June 2005. 【如附件二】 
Abstract： 
The system provides a solution for healthcare services management. The 
Service-Oriented Agent Architecture described in this paper is implemented on the Open 
Services Gateway Initiative (OSGi) framework. It enables healthcare service providers to 
bridge the gap between various devices’ application environment and to deploy services 
onto the runtime of end transmission gateway via health care service center. Four 
subsystems have been successfully implemented in the proposed Telecardiology System: 
Device Connection Interface, Data Transmission Interface, Service Management Center, 
and Diagnosis Subsystem. The results of this research can offer better service management 
framework for large scale of homecare service devices. 
 
研討會論文 
z Ing-Yi Chen, Chao-Chi Huang and Chen-Hsin Tsai, “The Design and Implementation of 
a Directory Based Wireless Network Operation Management System”, IEEE 
International Conference on E-Commerce Technology for Dynamic E-Business, Beijing, 
China, September 2004.  【如附件三】 
The goal of this research is to implement a Hierarchical Wireless Network Operation 
Management System based on LDAP technology. The architecture of such a management 
system is particularly beneficial in reducing the cost of ownership for any information 
system built to enable device management service and AAA service – the two major 
services required by WISPs. Two subsystems have been successfully implemented in the 
proposed Wireless Network Operation Management System: Device Management Center 
and AAA Service Center. The results of this research can enhance WISPs’ competitiveness 
significantly in today’s demanding wireless market. 
 
z I.-Y. Chen and Chen-Hsin Tsai, “Pervasive Digital Monitoring and Transmission of 
Pre-Care Patient Biostatics with an OSGi, MOM and SOA Based Remote Health Care 
System” 投稿 International Workshop on PerCare，審查中。 【如附件四】 
Abstract： 
Telemedicine applications are evolving quickly as information technologies improve. 
New requirements from users and changes in business process make it necessary to 
frequently alter applications.  Developers are responsible for redesigning the 
applications on both the user and server sides to meet the latest requirements. This is both 
time consuming and expensive.  A new approach is needed to improve the support of 
application construction and to reduce the costs involved. 
In this paper, we use OSGi as a platform, on which to combine components in order to 
form new functionalities used pervasively in different devices on the user side.  Examples 
50 
六、 計畫成果自評 
技術發展 
本計畫的發展包括前端照護工具開發、後端照護平台建置、及前後端系統整合等，技術
範圍從小型化裝置到大型系統開發，涵蓋範圍廣。具體包括：Linux 平台開發、J2ME 平台
開發、JMS 訊息傳送、DES 資料加解密、HTTPs 安全資料傳輸、OSGi 平台開發、Applet 圖
型化元件開發、LDAP 階層化管理與安全控制、SMS 手機簡訊通知、EJB 企業級元件開發、
Web Services 服務開發、Hibernate 物件化資料庫存取、SOA 系統整合架構、OOAD 與 SOAD
系統分析、Web 應用程式建置、RUP 軟體開發流程、軟體建置部署等，透過本計畫的發展，
本研究團隊獲得了相當多技術發展的深入研究。 
 
學術成果 
 透過本計畫的推行，我們完成了一專利案的申請，著重在多通道及可靠資料傳輸下的遠
距照護系統。同時，在本計畫中所發展的服務導向架構技術、可靠訊息傳輸、及 OSGi 技術
構成了本照護平台中，三個不可或缺的要素。透過該研究的發展，我們完成了三篇論文的發
表。 另外，在第二年結合 LDAP 作搜尋最佳化的研究，亦發展為建立無線網路管理平台中
的重要發展技術，並成功的完成論文的發表。目前結合三年的研究內容，我們發現不論在前
端的傳送機具或後端的照護系統，都具備服務導向發展的優勢，該理論探討的成果，目前正
撰寫為另一篇論文，為完整前後端照護系統作一完整討論。整體的學術成果發表良好。 
 
產學合作 
健康照護與數位生活是未來相當重要的新興產業，許多國內廠商皆投入相當心力，嘗試
在此領域上有所發展。透過本計畫的執行，我們促成了與達楷生醫資訊及撼訊科技公司的合
作。達楷公司以心血管/血液相關疾病所使用之居家醫療器材創新設計、製造與銷售為目標，
產品包括居家使用之隨身型心臟功能檢測器材，及血壓、血糖等量測裝置。該公司開發的微
小型個人用心電圖儀器，結合微弱訊號處理專利技術及國內資訊電子製造優勢，為全球首部
兩極式、乾式微小型心電圖儀，成為本研究計畫中重要的生理資料來源，幫助取得使用者端
的生理資訊。撼訊科技一直非常重視應用於家庭的電腦系統解決方案，注意到近年家用閘道
器的應用逐漸發展，除了準系統的技術研發外，更整合在電腦零組件多年研發技術，發展家
用閘道器共通平台。積極投入家用閘道器的核心技術研發，目前在家用閘道器的市場上具有
領導品牌的地位。該公司所發展的家用閘道器成為本計畫在拓展居家照護的重要角色。 透
過本計畫的發展，我們更進一步與撼訊科技發展為期三年的產學合作專案，發展以撼訊科技
閘道器為中心的設備管理平台及結合 SAAS 為主的 SalesForce.com 照護系統開發。整體的產
學合作成果良好。 
整體來說，本計畫的發展包含了與工業界廠商的合作。透過與廠商的合作，加快了我們
獲取相關資訊的速度，且廠商對於時程的要求及相關技術文件的要求，更讓我們了解專業化
軟體建置的要點。另外，本計畫尚整合了其他學校的技術發展，讓我們了解到彼此溝通協調
的重要性。因為往往因為溝通的不良及介面訂定不夠明確，讓合作學校間重複工作或介面不
合的情況產生，此計畫的執行，除了在學術上的發展外，團隊合作與執行方法更是我們從中
學得的重要資產。 
52 
[16] R. Wattenhofer, L. Li, P. Bahl, and Y. M. Wang, “Distributed Topology Control for Power 
Efficient Operation in Multihop Wireless Ad Hoc Networks,” IEEE INFOCOM 2001, pp. 
1388-1397, April 2001. 
[17] V. Rodoplu and T. H. Meng, “Minimum Energy Mobile Wireless Networks,” IEEE J. 
Selected Areas in Communications, 17(8):1333-1344, August 1999. 
[18] L. Li and J. Halpern, “Minimum Energy Mobile Wireless Networks Revised,” IEEE 
International Conference on Communications (ICC 2001), June 2001. 
[19] J. Bai， Y. Zhang， D. Shen， L. Wen， C. Ding， Z. Cui， F. Tian， B. Yu，B. 
Dai， J. Zhang， “A Portable ECG and Blood Pressure Telemonitoring System”， IEEE 
Engineering in Medicine and Biology， July/August 1999 
[20] Mi-Joung Choi， Hong-Taek Ju， Hyun-Jun Cha， Sook-Hyang Kim; Hong， J.W.-K. 
“An Efficient Embedded Web Server for Web-Based Network Element Management，” 
Network Operations and Management Symposium， IEEE/IFIP， 2000， pp. 187 –200. 
[21] A.L. Murphy, G.P. Picco, and G. -C. Roman. Lime, “A Middleware for Physical and Logical 
Mobility’” In Proceedings of the 21st International Conference on Distributed Computing 
Systems, pages 524-533, April 2001. 
[22] Christian Wege : Portal Server Technology; in: IEEE Internet Computing, May / June 2002, p. 
73 – 77. 
[23] Java Portlet Specification Version 1.0. JSR-000168 Portlet Specification. http ：
//jcp.org/aboutJava/communityprocess/final/jsr168/index.html 
[24] Y. Tao, "Component- vs. Application-level MVC architecture," 32nd ASEE/IEEE Frontiers 
in Education Conference, 2002, p.T2G7-T2G10 
[25] Kouichi Ono, Teruo Koyanagi, Mari Abe, Masahiro Hori: XSLT Stylesheet Generation by 
Example with WYSIWYG Editing, IEEE Computer Society January 28 - February 01, 2002. 
p. 150  
[26] Stuart Goose， Georg Schneider， Raj Tanikella，..：Toward Improving the Mobile 
Experience with Proxy Transcoding and Virtual Composite Devices for a Scalable Bluetooth 
LAN Access Solution， IEEE Mobile Data Management 2002： 169-170  
[27] Deepak Alur, John Crupi, Dan Malks “Core J2EE Patterns: Best Practices and Design 
Strategies”, Prentice Hall PTR, Jun. 2002 
[28] Yih-Farn Chen ，  Huale Huang ，  Rittwik Jana ， Sam John ，  Serban Jora ，  Amy 
Reibman ，  Bin Wei ，  “Personalized Multimedia Services Using a Mobile Service 
Platform”， Proceedings of the IEEE Wireless Communications Networking Conference， 
Florida， March 17-21， 2002. 
[29] Jun-Jang Jeng，Youssef Drissi，IBM T.J. Watson Research Center，” A Predictive Event 
Notification System for e-Commerce Environment”,The Twenty-Fourth Annual International 
Computer Software and Applications Conference ，October 25 - 28， 2000 
[30] P. Th. Eugster ， R.Guerraoui ， and J. Sventek. “Distributed asynchronous collections 
Abstractions for publish/subscribe interaction.” In 14th European Conferenceon Object 
Oriented Programming (ECOOP 2001) ， pages 252-276， June 2001. 
54 
[48] Yialelis， N. Domain-Based Security for Distributed Object Systems [dissertation]. London 
(UK)： Imperial College of Science; 1996.  
[49] Thomas KR. Team-Based Access Control (TMAC)： A Primitive for Applying Role-Based 
Access Controls in Collaborative Environments. Proceedings of the 2nd ACM workshop on 
Role-based access control. Fairfax， VA USA; 1997  
[50] Sandhu R. ”Role-Based Access Control”， Advances in Computers， Vol.46; Academic 
Press; 1998  
[51] Mavridis I， Pangalos G， Khair M. eMEDAC： Role-based Access Control Supporting 
Discretionary and Mandatory Features. Proceedings of 13th IFIP WG 11.3 Working 
Conference on Database Security; 1999; Seattle， Washington， USA. 
[52] D. Kormann and A. Rubin. ”Risk of the passport single signon protocol”. In Computer 
Networks, Elsevier Science Press, volume 33, 2000. 
[53] Barry W. Boehm, Anchoring the Software Process, IEEE Software, 13, 4, July 1996, pp. 
73-82. 
[54] Grady Booch, Ivar Jacobson, and James Rumbaugh, Unified Modeling Language 1.3, White 
paper,Rational Software Corp., 1998. 
[55] Alan W. Brown (ed.), Component-Based Software Engineering, IEEE Computer Society, Los 
Alamitos, CA, 1996, pp.140. 
[56] Ivar Jacobson, M. Griss, and P. Jonsson, Software Reuse—Architecture, Process and 
Organization for Business Success, Harlow, England, AWL, 1997. 
[57] I. Hernandez, F. Mora, M. Villegas, G. Passariello, and G. Carrault, “Real-time ECG 
transmission via Internet for nonclinical applications,” IEEE Trans. Inform. Technol. Biomed., 
vol. 5, no. 3, pp. 253 - 257, 2001 
[58] S. Guillen, M.T. Arredondo, V. Traver, J.M. Garcia, C. Fernandez, “Multimedia telehomecare 
system using standard TV set,” IEEE Trans. Inform. Technol. Biomed., vol. 49, no. 12, pp. 1431 - 
1437, 2002 
[59] I.-Y. Chen and C.-C. Huang, “A Remotely Manageable Electrocardiogram Measurement 
System for Home Healthcare using OSGI Framework,” Journal of Medical and Biological 
Engineering, Vol. 24, No.3, pp. 133-139, Sept. 2004. 
[60] Y.-H. Lin, I.-C. Jan, P.C.-I. Ko, Y.-Y. Chen, J.-M. Wong, and G.-J. Jan, “A wireless 
PDA-Based physiological monitoring system for patient transport,” IEEE Trans. Inform. 
Technol. Biomed., vol. 8, no. 4, pp. 439 - 447, Dec. 2004 
[61] Erich Gamma, Richard Helm, Ralph Johnson, John Vlissides; “Design Patterns: Elements of 
Reusable Object-Oriented Software”; Addison-Wesley 
[62] OSGi Alliance, http://www.osgi.org/markets/index.asp?section=3 
[63] IBM Service Management Framework, http://www.ibm.com/software/wireless/smf/ 
[64] Knopflerfish - Open Source OSGi, http://www.knopflerfish.org/ 
[65] JSR 232: Mobile Operational Management, http://jcp.org/en/jsr/detail?id=232 
Journal of Medical and Biological Engineering, 24(2): 69-78 
 
70 
infrastructures. Besides, Patient data is collected through a 
Body Area Network. This system provides a mechanism 
extending the local services offered by a Body Area Network 
to remote healthcare center. 
Instead of using PC system, it is an issue to provide an 
easier way for existing monitor device, which using on a PC 
based system, to link to the service center. One of commonly 
used options is to provide services to a home-based patient 
through a residential gateway. We propose a solution as a 
complete system not limited to PC-system. The main focus of 
this work is to make devices more supportive and easier to use 
by creating a common framework for controlling and 
monitoring remote devices. 
 
Methodology 
Design Choice 
In this section we describe the main architecture choices 
that allow the requirements described above to be satisfied. 
(1) Middleware Platform: To remotely deploy telehomecare 
services to home terminal which cover numerous 
operational systems, it is important to have a standard 
application platform to leverage the coupled 
environment. Because OSGI [10-13] is based open 
standard, it can be straightforward to reuse the health 
service by remotely deploying applications. The OSGi 
Service Platform provides a platform that service 
providers can use to deliver to the devices on their local 
network. Applications are known as bundles in the 
OSGi framework. Under OSGi architecture, application 
is encapsulated into a bundle which is a Java Archive 
file that contains the executable code together with all of 
its resources and a description specifying the class to 
start and stop the bundle. With the OSGI technologies, 
homecare services can be uniformly operated and 
managed by packing all these items together in a single 
JAR 
(2) Data Transportation Interface: Typically, a gateway 
serves as a coordinator. It also can act as a buffer 
between a set of devices and the service center where 
communication is through a proprietary protocol. 
However, the devices interacting with a service endpoint 
may be changed another platform in the future. It will 
take all the overhead of programming effort but get little 
of the promised flexibility, scalability in return. Thus, 
data exchange using standardized formats is needed for 
cross-platform and cross-vendor to support. It can 
address cross-platform communication issue that arises 
with Internet appliances. In the research, we use Web 
Services [14-15] technologies based on XML to provide 
an interface in whatever area they emerge in the future. 
It provides means to offer device capabilities as 
well-defined connection interface to any other platform 
with the framework. 
In the research, we adopt a standard JSR 172 
architecture [16] as a Web Services client enabling 
developers to create a service once and then deploy it 
many times to diverse clients on diverse platforms. JSR 
172 specifies standardized client-side technology to 
enable J2ME applications to consume remote services 
on typical Web Services architectures. The 
technologies ensure the interoperability of J2ME 
clients with Web services, and enable developers to 
reuse Web services components when they design these 
clients for enterprise services. 
Another issue in Data Transportation Interface 
Design is to deal with the problem of asynchronous 
communication. Reliable communication is achieved 
by persistent message queuing facilities. Thus function 
can be achieved through a MOM (message oriented 
middleware) system [17-18]. For critical message (i.e. 
the doctor's advice), a mechanism which can help 
medical service to build fully reliable transportation is 
necessary. In the research, the JMS (Java Messaging 
Service) specification is used for providing a Java API 
for implementation of asynchronous communication. 
(3) Centralized management Center: Directory is adopted as 
the enabling technology for centralized network 
operation management. It is well known that a directory 
is an object-oriented naming model that stores its 
information in a hierarchical tree structure [19-20]. 
Various network operation information in a homecare 
service provider such as home gateway profile, 
sub-organization profiles, and user information can be 
easily maintained in a directory. In addition, the 
information structure of a directory can closely reflect 
the organization structure of a homecare service 
provider. This structure makes service management 
easier since the same rules, policies and restrictions 
applied to a homecare center can be effortlessly 
replicated to the directory. 
 
Architecture of the Telemedicine System 
The Telehomecare System consists of a device connection 
interface, data transportation system, service management 
center and a service portal system. In the use case, we use a 12 
Lead Interpretive Electrocardiogram (ECG or EKG) device to 
collect, store and forward vital signs data .This device provides 
an USB interface to connect to home gateway box. This 
Telecardiology service system not only provides a way for 
prophylaxis but also propose a solution to detect an arrhythmia 
attack for patients who are receiving rehabilitation care at 
home. After ECG data collects to medical service cater, the 
portal system provides a graphic display of the electrical 
activity of the heart. 
Device connection Interface 
Compared to UPnP device architecture, an existing device 
needs developing a custom connection interface independently. 
Under the OSGI programming model, we design an 
ECGDeviceBundle for ECG device attached to the home 
gateway. Three basic components need to be implemented: 
device driver, Communications API, and access application. 
 
J. Med. Biol., Vol. 24. No. 2 2004 72 
 
Figure 4 soap message of ECG information 
 
 
Figure 5 reliable communication modules between home gateway and service center 
 
The MSCSenderBundle includes five classes (see Figure 3): 
(1) EcgWS: The Service endpoint interface (SEI) which 
defining the service methods of the locator class to call 
a Web Service.  
(2) EcgWSSoap_Stub: The stub client uses a defined 
service endpoint interface based on the WSDL 
document to get a stub for a specific Web service. 
(3) MSCSenderService: Define the service interface as a 
Java interface which exports as a OSGI service. 
(4) MSCSenderServiceImp: An Implementation class for 
the MSCSenderService interface. 
(5) MSCSenderBundle: A BundleActivator class 
implements the required OSGi life cycle methods and 
registers MSCSenderService service with the container 
upon startup. 
To standard as services in OSGI container, the 
MSCSenderBundle.java uses registerService method to 
register as a service in the container. The registerService 
requires a service interfaces name for reference and a service 
implement class. By this way, MSCSenderService exposes as 
aservice to provide transmission channel to send biological 
signal. 
To reduce network transport effort, we use a function to 
simplify the data format. When the ECG single pass through 
the function, those data also be dispatched into a web services 
channel. The channel wraps up ECG signal in a XML tag 
named “ecgRowData”. Figure 4 shows the soap message of 
ECG information. 
The other issue is how to ensure reliable communication 
paths between home gateway and service center. We use a 
lightweight MOM middleware to provide an asynchronous 
messaging service that guarantees diagnosis messages delivery. 
By integrating with the relative MOM middleware on the 
service center, the lightweight MOM can ensure the security of 
communications and guarantee delivery of usage data despite 
transient network failures and disconnected mode. When the 
doctor completes diagnosis, a notification message is 
generated and sent by application for storing diagnosis result. 
Then the message will be routed from the Server side MOM 
server to the lightweight MOM client, and finally to the 
appropriate medical application. 
The kernel of the lightweight MOM is queue manager. Its 
task is to manage queues and messages for applications. 
According to the components and functionalities, a queue 
manager can be configured into various types. On service 
center, we setup a queue to temporarily store messages for 
queue manager which pulls messages from the queues on 
home gateway platform, On home gateway, another type of 
queue is used by its queue manager to get messages from 
queues on service center. 
Figure 5 depicts the architecture of communication 
modules which consists of three main parts. The lightweight 
MOM server resides in the control center, acting as the tools 
for messaging. It uses an automated pull mechanism initiated 
by the client application to get messages sent to one of its 
queues. Two types of additional queues -- the source queue and 
the adapter queue -- are used in the pull processing. 
MSCReceiverBundle 
Listener 
 MOM Client 
Lightweight MOM Server
put 
Source 
Queue 
OSGI Framework 
Lightweight MOM Server
Adapter 
Queue 
Queue 
Manager 
Destination Queue 
Queue 
Manager 
connect 
retrieve 
BundleActivator 
MSCReceiverBundle 
put 
Get Server 
application 
…ECGDeviceBundle Data Stream Start Rece End Data Stream Total 
Bundle 
Activator
ID HR QRS SDate ECG 15s signal 
49|255|0|1|0|9|0|3|0|21|0|44|1|9|0|11... 
com.msc.send.MSCSenderService 
<soapenv: Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/ "> 
<soapenv: Body> 
         <ns1:writeEcgInfo xmlns:ns1="http://DefaultNamespace"> 
                <ecgRowData xmlns=""> 
  49|255|0|1|0|9|0|3|0|21|0|44|1|9|0|11... 
                </ecgRowData> 
        </ns1:writeEcgInfo> 
</soapenv:Body> 
MSCSenderService 
Soap_Stub 
49|255| |1| |9| |3|0|21|0|44|1|9|0|11... 
Bundle 
Activator 
 
J. Med. Biol., Vol. 24. No. 2 2004 74 
 
Figure 8 Administrator's interface of Intelligent Notification service 
 
 In this project, the diagnosis portal is the other main 
subsystem of the whole system including the modules for 
“consulting service”, "diagnosis service", that provides the 
efficient ways for doctors, patients and medical specialists to 
communicate with each other through the Internet and 
whenever the home-care patient takes the patient commands. 
The bundles load all the information stored in the ECG 
monitor and send message to the PDA screen to display the 
status of the patient. As shown in Figure 7, ECG data collected 
form patient will reflect on the user-interface. 
Furthermore, Device Management Center includes an 
Intelligent Error Alert engine which is designed to judge if the 
ECG data is abnormal. Messages can be delivered via three 
mechanisms: WAP, SMS, and mail. The Administrator's 
interface of the Intelligent Notification service is depicted in 
Figure 8. 
Conclusion & Future works 
In this research, we have presented our work on a 
Telehomecare solution for remote management for large scale 
distributed service. In addition, we have developed a bundle 
management center for delivery of new services and 
applications via the Internet. Comparing to the traditional 
Telehomecare system, the proposed system is not only more 
effective but also providing real-time remote diagnosis and 
maintenance service. 
Acknowledgments 
The authors would like to express our gratitude for the support 
of the National Science Council, Taiwan, R.O.C., under Grant 
NSC-93-2213-E-027-045-. We also thank several anonymous 
referees for their constructive reviews and comments. 
 
Reference 
[1] Istepanian, R.S.H., “Telemedicine in the United Kingdom: 
Current Status and Future Prospoects”, IEEE Transactions on 
Information Technology in Biomedicine, 3(2):158-159, 1999. 
[2] E.J. Nordal, D. Moseng, B. Kvammen, and M.L. Lochen, “A 
Comparative Study of Teleconsultations versus Face-to-Face 
Consultations,” Journal of Telemedicine and Telecare, 7(5): 
257-265, 2001.  
[3] J.J. McKee, N.E. Evans, and F.J. Owens, “Digital Transmission 
of 12-Lead Electrocardiograms and Duplex Speech in the 
Telephone Bandwidth,” Journal of Telemedicine and Telecare, 
2(1): 42-49, 1996. 
[4] Perednia, D.A. and Allen, A., “Telemedicine Technology and 
Clinical Applications,” Journal of American Medical 
Association, 273(6): 483-488, 1995.  
[5] E. Jovanov, et al, “Stress Monitoring Using a Distributed 
Wireless Intelligent Sensor System”, IEEE Engineering in 
Medicine and Biology Magazine, 22(3):49-55, 2003. 
[6] Hung, K. and Zhang, Y-T., ”Implementation of a WAP-Based 
Telemedicine System for Patient Monitoring”, in IEEE 
transactions on Information Technology in Biomedicine, 
7(2):101–107, 2003 
[7] Woodward, B., Istepanian, R. S. H., and Richard, C., “Design of 
a telemedical system using a mobile phone”, IEEE Trans. 
Information Technology in Biomedicine, 5(1):13-15, 2001 
[8] Pattichis CS, Kyriacou E, Voskarides S, Pattichis MS, 
Istepanian R, Schizas CN, ”Wireless Telemedicine Systems: An 
Overview”, IEEE Antennas & Propagation Magazine, 
44(2):143-153, 2002. 
[9] Dimitri Konstantas, Val Jones, Richard Bults and Rainer 
Herzog, ”MobiHealth _ innovative 2.5 / 3G mobile services and 
applications for healthcare”, 11th IST Mobile and Wireless 
Telecommunications, June 2002, Thessaloniki , Greece. 
[10] Open Services Gateway Initiative, "OSGI Service Platform," 
Specification Release 3.0, March 2003 
[11] H. Cervantes and R. S. Hall. “Beanome: A Component Model 
for the OSGi Framework”, Workshop on Software 
Infrastructures for Component-Based Applications on Consumer 
Devices, September 2000.  
[12] H. Cervantes and R.S. Hall. “Automating Service Dependency 
Management in a Service-Oriented Component Model”, ICSE 
CBSE6 Workshop, May 2003, Portland, United-Stated. 
[13] R. S. Hall and H. Cervantes “Gravity: Supporting Dynamically 
Available Services in Client-Side Applications”, ESEC/FSE, 
September 2003, Helsinki, Finland. 
[14] Curbera, F., Duftler, M., Khalaf, R., Nagy, W.; Mukhi, N., and 
Weerawarana, S.,”Unraveling the Web Services: an Introduction 
to SOAP, WSDL, and UDDI”, IEEE, 6(2): 86-93, 2002.  
[15] Vinoski,S., ” Web Services Interaction Models, Part 1: Current 
Practice”, IEEE Internet Computing, 6(3),89-91,2002.  
[16] Java Community Process, “JSR-00172 J2ME Web Services 
Specification," Specification Release 2.1, March 2003 
[17] Jun-Jang Jeng,Youssef Drissi,IBM T.J. Watson Research 
Center,” A Predictive Event Notification System for 
e-Commerce Environment”, The Twenty-Fourth Annual 
International Computer Software and Applications 
Conference ,October 2000, Taipei, Taiwan. 
[18] P.Pietzuch and J.Bacon,Hermes “A Distributed Event-Based 
Middleware Architecture” on DEBS'02 with IEEE ICDCS, 2002, 
Vienna. 
[19] Fabián E. Bustamante, Patrick Widener, and Karsten Schwan, 
“Scalable directory services using proactivity”, Proceedings of 
the 2002 ACM/IEEE conference on Supercomputing, November 
2002. 
[20] Park, J., Sandhu, R., and Ahn, G., “Role-based access control on 
the web.” ACM Transactions on Information and System 
Security, 4(1):37-71, February 2001
 
【附件二】 Journal of Medical and Biological Engineering, 25(2): 1
A Service-Oriented Agent Architecture to Support 
Telecardiology Services on Demand 
Ing-Yi Chen*   Chao-Chi Huang  
Department of Computer Science and Information Engineering, National Taipei University of Technology, Taipei, Taiwan, 106, ROC 
Received 6 Apr 2005; Accepted 28 Jan 2005 
 
Abstract 
The system provides a solution for healthcare services management. The Service-Oriented Agent Architecture 
described in this paper is implemented on the Open Services Gateway Initiative (OSGi) framework. It enables 
healthcare service providers to bridge the gap between various devices’ application environment and to deploy services 
onto the runtime of end transmission gateway via health care service center. Four subsystems have been successfully 
implemented in the proposed Telecardiology System: Device Connection Interface, Data Transmission Interface, 
Service Management Center, and Diagnosis Subsystem. The results of this research can offer better service 
management framework for large scale of homecare service devices. 
 
Keywords: Service oriented Architecture, Agent, Telecardiology 
Introduction  
In Section 3, the design choices of the system are illustrated 
and briefly discussed. Later, the detailed architecture and 
implementation of the Telemedicine System is presented in 
Section 4, and the result of the study is reported in Section 5. 
Finally, the conclusions and future works are discussed in 
Section 6 and Section 7. 
Telemedicine, targeted at improving the quality of life, 
has made significant advancement during recent years. There 
has been a considerable effort to investigate issues of using 
telemedicine devices with communication gateways to 
promote better life for chronically ill patients [1-8]. For 
instance, some personal computer (PC) based 
Electrocardiogram (ECG) telemonitoring systems had been 
discussed [2-3]. Besides using PC as communication gateways, 
m-Health [4] system also allows the acquisition and 
transmission of biomedical data from patient to a remote data 
center. Although telemedicine devices are gaining growing 
popularity, two questions left to be answered: how to provide 
the same interface for a variety of applications in health care 
device, and how to deal with different control models while 
building a large scale monitoring system. Instead of using 
diverse agent, it seems logical to provide a direct link to the 
service center for existing monitor devices by using on a 
common agent system.  
 
Literature Review 
In recent years, the development of the m-Health system 
has led a new way to provide access to data center via wireless 
communication. For m-Health solution, research groups have 
been working on methods to transmit physiological data to 
health care center. An investigation [5] presented the 
implementation of a GSM based cardiac system for real-time 
recent communication of physiological data. The authors 
evaluated the feasibility of WAP solution, consisting of web 
based health-care agent and central station, to provide 
out-of-hospital follow-up of cardiac patients. A study [6] 
investigated a 3G based tele-trauma system for pre-hospital 
trauma care. This study described a system that assists 
health-care centers by providing media transformations and 
data prioritization throughout the pre-hospital procedure. The 
other system focused on the different aspects of a telemedicine 
application using Bluetooth based mobile telephone as a 
biomedical signal transmission gateway for remote 
examination and medical diagnosis [7]. A research presented a 
PDA-based physiological monitoring system used in an 
m-Health application for patient transport [8]. 
In this study, we have proposed a unit runtime of 
telemedicine agents to permit the services to be managed 
remotely. Such system is derived from a system that originally 
lacks a consistent application model supporting telemedicine 
application development. A solution of centralized on demand 
management system with upgrade services was developed. 
This paper is organized as follows. In section 2, relevant 
previous works dealing with healthcare system are reviewed. 
 
* Corresponding author: Ing-Yi Chen 
Tel: +886-2-27712171 ext. 4235; Fax: +886-2-87732945 
E-mail: ichen@ntut.edu.tw Various functions within those researches are developed 
 
Running Title 
 
3
Communication 
layer 
Receiver Application Data Access 
Figure 3. Service-Oriented-Agent based Telecardiology System. 
 
To demonstrate how those components work cohesively, 
a system has been built to transmit the ECG data. At the push 
of a send button, the user's biomedical information is 
immediately sent to a healthcare center. The center accepts the 
data, parses the data, and sends the doctor a message to inform 
him or her new tasks. Then the doctor make a judgment to see 
if the user needed additional treat, and messages the users to let 
them know the diagnostic result. Through the middleware used 
on the server and the client, the system can remotely upgrade a 
client device, and troubleshoot and fix any problem 
immediately if necessary. The usefulness of Service-Oriented 
agent architecture combined with the OSGi middleware has 
thus been implemented. 
 
System Architecture 
The Telecardiology System designed not only provides a 
way for prophylaxis but also proposes a solution capable of 
detecting arrhythmia attack for patients receiving rehabilitation 
care at home. Concept and benefits of processing data in a 
corporate environment are first introduced in the following 
sections. Then a description of the OSGi agent and system 
modules involved in the Telecardiology System is given to 
provide a framework for discussing common directory 
definitions, the particularities of implementation, and the role 
that a corporate directory can play in an integrated 
environment. Finally, the architecture of the Telecardiology 
framework is discussed. Figure 3 depicts the architecture of the 
Service-Oriented-Agent based Telecardiology System. 
ECG Agents 
We used a single-lead interpretive electrocardiogram 
device to collect, store and forward vital signs data .The device 
provides an USB interface to connect to home gateway and 
person computer. Using the OSGi programming model, we 
also designed an ECGBundle for ECG device attached to the 
three transmission Device (PC, Home Gateway, and Bluetooth 
enabled PDA).  
ECG Agents on Home Gateway & PC 
The ECG monitor is based on PL2303 serial-USB adapter 
capable of converting RS-232 signal to USB signal. In order to 
control the adapter, an open-source communication API called 
RXTXcomm which is a Java communications API driver for 
Linux to access the serial port has been applied. This 
significant module provides the infrastructure for obtaining 
electrocardiogram data. 
An ECGDeviceBundle was created to implement Bundle- 
Activator class as the entry point to the bundle. The bundle 
creates and opens an ECGConn Thread service to 
automatically track ComConn.java which connects a serial 
cross link. After ECGDeviceBundle gets ECG data, it stores 
those records and passes them to service center by invoking 
two functions that provide logging service and delivering 
service. 
Bluetooth based ECG Agent 
In the Telecardiology system, a Bluetooth based ECG 
Agent has also been developed. When Bluetooth devices 
connect, they form a Piconet connection [16]. This connection 
is a dynamic network, where ECG monitors act as master 
while the PDA device is slave. In the system, the JSR-82 Java 
API has been used for Bluetooth development. Figure 4 shows 
the Bluetooth based ECG Agent Architecture. 
In PDA, a Bluetooth client which implements Discovery 
Listener interface has been developed. This interface allows an 
application to specify an event listener that will respond to 
inquiry-related events. This interface is also used for service 
searching. The method deviceDiscovered() is called each time 
a device is found during an inquiry. When the inquiry is 
completed or canceled, the inquiryCompleted() method will be 
called. For device discovery, an ECG agent application can  
 
Bluetooth 
 
OSGI 
Agent 
H
TTP
Server
HTTP 
HTTPS 
ECG 
monitor 
Servlet 
SOAP- 
Router
layer layer  layer 
ECG Data 
Parser
OrgID 
ID  
ECG 
Data 
PSW
Connection 
Objects  
Database Server 
DB Connection 
Pool 
Web 
Container 
JSF
A
uthentication /A
uthorization 
Service 
Management App 
Diagnostic App 
LDAP  
Yes 
MVC Runtime 
JMX 
controller
 layer 
JDBC  
A
pp
Server
 
Running Title 
 
5
7.55
5.94
0
1
2
3
4
5
6
7
8
Only using SQL
command 
Combine LDAP and
SQL command
Response Time(s)
 
Figure 5. Comparison of the response time of two query methods. 
 
User Interface 
For doctors, the diagnosis subsystem is the main 
subsystem for “consulting service” and "diagnosis service" that 
provides a convenient way of communication through Internet 
between doctors, patients and medical specialists. At 
implementation level, the diagnosis subsystem is based on 
Struts framework which is a Model-View-Controller (MVC) 
implementation that derives its advantages from Servlet and 
JSP tags. MVC is a design pattern to help applications to 
decouple interface from application logic and data. Using this 
solution, programmer can develop web diagnosis subsystem 
supporting component-based development for reuse and 
consistency. However, what the user really cares is an 
easy-to-use web system, not state-of-the-art technology.  The 
navigation menu bar on the web based diagnosis system is thus 
built with the usability in mind. The bar integrates the most 
related information. If a user gets interested in each item, he 
can immediately get the information form the item’s hyperlink. 
Moreover, each page can easily go back to previous pages. 
 
Result 
The Telecardiology system presented in this study is a 
service-oriented medicine agent architecture whose mission is 
to improve health care access, quality, efficiency and 
management. This system has been designed and implemented. 
The agent unit, which includes a vital-sign signals acquisition 
module, can acquire ECG data and forward ECG data to 
medical service center. The kernel of ECC agent is based on 
OSGi allowing health care service provider to deploy unique 
environment to the patient’s monitoring device for remote 
management of the ECG services. As an ECG agent sends 
biological signal to medical service center, the system invoke a 
parser to acquire detail ECG data which is then inserted into 
appropriate tables. 
In aspect of data persistence based on the LDAP 
technology, a system for enhancing ECG data query 
performance in large scale environment has been developed. In 
this study, instead of only using relational database as the data 
repository, we propose the architecture, which combines the 
advantage of LDAP and relational database to meet the 
challenge of the larger scale of ECG data. Whenever an 
application needs to query a list page which contains users’ 
ECG data, the system first looks up ECG IDs by the user ID in 
the directory through the user’s DN. After collecting ECG IDs, 
the system uses those ECG IDs to point to the relevant 
information stored in specific tables in the relational database. 
The Figure 5 shows the response time of a query list 
related task using LDAP technology. This test result is based 
on a web application environment running on the IBM 
WebSphere Application Server 5.1 platform, IBM Tivoli 
Directory Server 5.1, and IBM DB2 Universal Database 8.1. 
The WebSphere Application Server platform was chosen for its 
security features, Java enabled capability, and rich web 
application framework library. The Scenario is that a user 
logins to the system, and then views 100 ECG record belonging 
to the user. In the condition, there are 5000 ECG records in 
database; each record size is 13KB, and average page size is 
15KB. Using the relational database with LDAP technology, 
the average time to complete a test scenario is 5.94 sec 
(standard derivation is 0.48) comparing to 7.55 sec (standard 
derivation is 0.65) with SQL query commands. In this given 
example, this is nearly 20% time gap. We get the result from 40 
trials. Because the relation between users and their ECG 
records is maintained in LDAP, we can use the hierarchical tree 
to acquire all indexes of user’s ECG records in a faster manner. 
Therefore, the system can use a SQL command (EX: “Select * 
from EcgData as ecg where ecg.UserSn in (1001, 2043, 4152)”) 
to get their related information. Conversely, if we only use 
relational database SQL commands, the system needs to 
compare user names in ECG measured history in several times. 
Results from the data show that even the database enables user 
IDs as an index to enhance search performance, the 
performance of using LDAP technology is better than the 
performance of simply using SQL command to query ECG 
records. 
After ECG data get transmitted to medical service center, 
the diagnosis system provides a graphic display of the electrical 
activity of the heart. Figure 6 demonstrates the main diagnosis 
view of the care unit. Both navigation menu bar and care 
information can be found at the top. ECG waveforms are 
shown in the middle. The left area is reserved for doctor advice. 
 
Running Title 7
Dependability of Service Oriented Architectures for Pervasive 
Computing”, IEEE WORDS ,January 2003, Mexico. 
[11] H. Cervantes and R. S. Hall. “Beanome: A Component Model 
for the OSGi Framework”, Workshop on Software 
Infrastructures for Component-Based Applications on 
Consumer Devices, September 2000.  
[12] H. Cervantes and R.S. Hall. “Automating Service Dependency 
Management in a Service-Oriented Component Model”, ICSE 
CBSE6 Workshop, May 2003, Portland, United-Stated. 
[13] J. Latvakoski. and P. Pääkkönen, “Remote Interaction with 
Networked Appliances attached in a Mobile Personal Area 
Network”, IEEE International Conference on 
Communications(ICC’2003), Alaska, USA, May 2003, 
Florence, Italy. 
[14] H. Kreger, ” Java Management Extensions for application 
management”,IBM Systems Journal, 40(1) ,2001. 
[15] C. Hortnagl, ” Storage management using CIM and JMX”, 
Network Operations and Management Symposium, 2002. 
(NOMS 2002), April 2002. 
[16] P. Rigole, Y. Berbers and T. Holvoet, “Bluetooth Enabled 
Interaction in a Distributed Camera Surveillance System”, 
Proceedings of the 37th Annual Hawaii International 
Conference on System Sciences (HICSS'04) , January, 2004, 
Hawaii. 
[17] S. Vinoski , ” Web Services Interaction Models, Part 1: Current 
Practice”, IEEE Internet Computing, 6(3),89-91,2002.  
[18] Java Community Process, “JSR-00172 J2ME Web Services 
Specification," Specification Release 2.1, March 2003 
[19] F.E. Bustamante, P. Widener and K. Schwan, “Scalable 
directory services using proactivity”, Proceedings of the 2002 
ACM/IEEE conference on Supercomputing, November 2002. 
[20] J. White, D. Schmidt and A. Gokhale, “Simplifying the 
Development of Autonomic Enterprise Java Bean Applications 
via Model Driven Development”, The 2nd IEEE International 
Conference on Autonomic Computing (ICAC-05), June, 2005, 
Seattle, Washington. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
【附件三】 
Design and Implementation of a Directory Based  
Wireless Network Operation Management System 
 
 
Ing-Yi Chen, Chao-Chi Huang, Chen-Hsin Tsai 
Dept. of Computer Science and Information Engineering, Taipei University of Technology, Taiwan 
 
* Corresponding author: Ing-Yi Chen 
Tel: +886-2-27712171 ext. 4235； Fax: +886-2-87732945 
Email: ichen@ntut.edu.tw 
 
Abstract 
 
The goal of this research is to implement a 
Hierarchical Wireless Network Operation 
Management System based on LDAP technology. The 
architecture of such a management system is 
particularly beneficial in reducing the cost of 
ownership for any information system built to enable 
device management service and AAA service – the two 
major services required by WISPs. Two subsystems 
have been successfully implemented in the proposed 
Wireless Network Operation Management System: 
Device Management Center and AAA Service Center. 
The results of this research can enhance WISPs’ 
competitiveness significantly in today’s demanding 
wireless market. 
 
Key Words: PWLAN, LDAP, Wireless, Network 
Operation Management, Device Management, AAA 
Service 
 
1. Introduction 
 
Some of the most important and prominent benefits 
of wireless technology are derived from productivity 
gains. For example, mobile professionals with wireless 
notebooks can be up to 35% more productive than 
their counterparts with desktop PCs. Therefore, it is 
not surprising to recognize that as Wireless LAN 
(WLAN) becomes easier to use and costs less to install, 
more and more WLANs are being deployed to provide 
people with un-tethered access to local network. It is 
now generally believed that wireless network would 
eventually become a mainstream reality for business, 
consumers, and governments. As a result, the 
development of wireless communications has been the 
focal point of many academic and industrial researches.  
Recently, Taiwan’s local government has proposed 
the integration of the “e-Taiwan Construction Plan” 
into its “Challenge 2008 Six-Year National 
Development Plan.” The fundamental goal of the “e-
Taiwan Construction Plan” is to facilitate the 
development of wireless technology and the 
interconnection of wireless networks in Taiwan. Key 
aspects of this plan includes (1) improving the 
interconnection of wireless networks and the 
compatibility between various wireless devices such as 
mobile and Internet phones, (2) fostering the growth of 
various broadband Internet services, and (3) 
integrating the usage of mobile and wireless Internet  
To reach this goal, the following issues need to be 
addressed: 
 
(1) Protecting Wireless LAN: Two popular solutions 
available to improve WLAN security are 802.1x 
standard-based security and virtual private networks 
[1]. In 802.1x standard-based security solution, data 
between devices and access points is encrypted using 
the dynamically created Wired Equivalent Privacy 
(WEP) key [2].  
(2) AAA infrastructure: One of the business models for 
a commercial PWLAN (Public Wireless Local Area 
Network) at a hot spot is paid access. This model 
demands robust security and authentication 
technologies so that PWLAN providers can protect 
themselves from unauthorized users seeking to access 
wireless services without paying for them. This 
requires a combination of authentication, authorization, 
and accounting services, often called “AAA” [3-6]. 
(3) Building a Seamless Roaming: An issue for 
seamless roaming [7] between independent WLANs is 
how to confederate numerous WLAN service 
providers. Since each WLAN have its own trust 
relationship with its partnered service provider, efforts 
to support various service partners’ authentication 
schemes becomes a considerable challenge [8]. 
(4) Devices Management infrastructure: PWLAN are 
based on the globally accepted IEEE 802.11b [9] 
wireless LAN standard, commonly referred to as Wi-Fi. 
Compared to 2.5G and 3G networks which offer wide 
 
Figure 1 Architecture of Wireless Network Operation 
Management System 
 
4. Device Management Center 
 
Device Management Center functions as the 
centralized management environment for devices 
attached to PWLAN. The directory server, as 
mentioned earlier, is an object-oriented database 
organized in a hierarchical structure where 
organizations and organizational units can be referred 
as WISP or WISP departments. The hierarchical 
structure of the directory enables the delegation of 
administrative control. If a hierarchical relationship is 
defined in the directory, various deployment scenarios 
can be realized for centralized management.  
 
Figure 2 Relationships between directory and device 
profile table 
 
Whenever an application needs to monitor the 
gateway access in a specific WISP department, the 
device management center looks up device information 
by name in the directory through a programming 
interface. By default, each entry in the directory server 
has a “distinguished name” (DN) that uniquely 
identifies the corresponding LDAP object. In addition 
to its DN, each object in the directory server also has a 
globally unique identifier (GUID), a 128-bit number 
assigned by the directory System when the object is 
created. The GUID cannot be altered or removed. 
Unlike a DN, which can be changed, the GUID never 
changes. Thus, GUID can be a pointer to the relevant 
information stored in an external device profile table. 
Refer to Figure 2 for the relationship between device 
profile and the GUID of an organization unit. 
Figure 3 shows the high-level block diagram of 
Device Management System: 
 
Figure 3 Architecture diagram of Device Management 
Center Solution 
 
Device Management Center offers a web interface 
through an application server. Whenever network 
administrators login to the web-based management 
system, related device profiles are presented according 
to the GUIDs. Administrators can monitor, through a 
web browser, the status of any devices attached to the 
network. Such feature makes it possible for the 
network management staff to perform diagnosis via 
Internet.  
Several critical component modules exist 
underneath the web interface and are shared by all 
WISPs. One such module is the connection hub which 
serves as the foundation for Status and Health monitors. 
The connection hub supports a variety of 
communications protocols for discovering, configuring, 
and monitoring access points. 
One of the basic communication modes for network 
debugging is Ping. It is often used to detect any 
dropped packets. Although Ping can help the 
administrator to check if a specific device is 
functioning as usual, it offers no information about the 
network utilization (i.e., network loading). To report 
network utilization, Simple Network Management 
Protocol (SNMP) is often used instead. For this reason, 
SNMP is also supported in the proposed architecture 
for status information collection. On the other hand, 
since accessing device configuration and status 
information via a browser is a requirement in the 
proposed architecture, support of HTTP 
communication mode is a perquisite. Recognizing that 
(1) Using Directory to build a flexible platform on 
which outsourcing services provider can host 
management services for multiple WISPs. 
 
WLAN includes standards subject to change. A 
well-planned network operation system must deal with 
such change effectively and efficiently. In the 
proposed system, administrators can remotely examine 
the device status and update the firmware of any 
device if necessary. Significantly less time will be 
spent on identifying the cause of problems. In other 
words, effective and efficient problem resolution is 
expected from the proposed system. 
(2) Appling SNMP and Connection Adapter to 
monitor and manage large scale network of 
devices. 
 
Directory works as a virtual tree for managing 
numerous WISPs. To facilitate administering by 
friendly user interface, we development a component 
to render organization information form Directory. 
This component provides a way to view the logical 
organization structure of departments stored in the 
Directory Server. The top of the tree represents a 
WISP as depicted in Figure 6. 
 
7. Conclusions and Future Work 
 
In this research, we have presented our work on a 
directory-based hierarchical network operation 
management Center to reduce the cost of setting up an 
AAA System. In addition, we have developed a Device 
Management Center for updating the firmware of 
Access Point and examining the device status through 
a centralized management system. Compared to the 
traditional network operation center (NOC) 
environment, the proposed system not only is more 
effective but also conforms to the requirements of 
AAA service and device management service of 
WLAN network management systems. 
 
 
 Figure 6 Administrator's interface in Wireless 
Network Operation Management System 8. Acknowledgments 
  
The collected information form each WISPs is 
maintained within a central database which is valuable 
for identifying trends as well as determining activity 
peaks and valleys. The data can be viewed through a 
web-based administrative console in intervals of days, 
weeks, or months as demonstrated in Figure 7. In 
addition, logs can also be exported to programs such as 
MS-Excel and XML for additional data manipulation 
and trend visualization. 
The authors would like to express our gratitude for 
the support of the National Science Council, Taiwan, 
R.O.C., under Grant NSC-92-2622-E-027-024-CC3. 
We also thank several anonymous referees for their 
constructive reviews and comments. 
 
 
 
9. References 
  
 
[1] Yasir Zahur, T. Andrew Yang, “Wireless LAN security 
and laboratory designs”, The Journal of Computing in 
Small Colleges, 19(3): 44 - 60 , January 2004.  
 
[2] Nancy Cam-Winget, Russ Housley, David Wagner, Jesse 
Walker, “Wireless networking security: Security flaws in 
802.11 data link protocols”, Communications of the 
ACM, 46(5): 35-39 , May 2003.  
 
[3] Metz, C.,” AAA Protocols: Authentication, 
Authorization, and Accounting for the Internet”, IEEE 
Internet Computing, 3(6): 75-79, Nov.–Dec. 1999. 
 
[4] S. Farrell, J. Vollbrecht, P. Calhoun, L. Gommans, G. 
Gross, B. de Bruijn, C. de Laat, M. Holdrege, D. Spence: 
AAA Authorization Requirements; Internet Engineering 
Task Force, RFC 2906, August 2000. 
Figure 7 various monitoring consoles of Network 
Operation Management System 
【附件四】 
Pervasive Digital Monitoring and Transmission of Pre-Care Patient Biostatics 
with an OSGi, MOM and SOA Based Remote Health Care System 
 
Ing-Yi Chen, Chen-Hsin Tsai 
Department of Computer Science and Information Engineering, National Taipei University of 
Technology, Taipei, Taiwan, 106, ROC 
ichen@ntut.edu.tw, jonas@ilab.csie.ntut.edu.tw 
 
Abstract 
Telemedicine applications are evolving quickly as 
information technologies improve. New requirements 
from users and changes in business process make it 
necessary to frequently alter applications.  Developers 
are responsible for redesigning the applications on both 
the user and server sides to meet the latest requirements. 
This is both time consuming and expensive.  A new 
approach is needed to improve the support of application 
construction and to reduce the costs involved. 
In this paper, we use OSGi as a platform, on which to 
combine components in order to form new functionalities 
used pervasively in different devices on the user side.  
Examples include cell phones, PDAs, and home gateways. 
For server side applications, we divided the health care 
system into several layers and combined the services 
provided by the modules using a loosely-coupled 
mechanism - process choreography.  
When requirements or system flows of the telemedicine 
server are changed, the proposed system can adapt to 
meet the need by replacing the bundles on the edge server 
and reconfiguring the business process used in the health 
care system.  
 
Keywords: health care, telemedicine, service oriented 
architecture (SOA), message oriented middleware 
(MOM), open service gateway institute (OSGi), pervasive 
computing 
 
1. Introduction  
Telemedicine has become an important research topic 
as a result of the increasing proportion of elderly people 
in the population, and the rapid development of 
information technologies. A literature review makes it 
clear that telemedicine applications have been developed 
periodically.  A java based application was developed to 
transmit real-time Electrocardiogram (ECG) information 
from non-clinical environments, such as nursing homes, 
to medical specialists using a socket connection via a 
personal computer or PDA [1]. Guillen presented a 
telehomecare platform delivered through a standard TV 
set or home gateway. The platform monitored patient 
ECGs, heart sounds, and blood pressures in addition to 
allowing for interaction between patients and health care 
professionals by videoconference [2][3]. Moreover, a 
wireless PDA-Based physiological monitor system that 
provides a continuous acquisition of a patient’s vital signs 
when the patient is in transport within a hospital has been 
presented. Instead of a bulky monitoring system, the 
PDA-based system is small and efficient. In addition 
gathering patients' vital signs the device was capable of 
transmitting them to a care center by means of a wireless 
local area network [4].  
Additionally, the fast development of wireless and 
sensing technologies has provided pervasive or wearable 
monitors. In pervasive monitoring, vital sign sensors are 
placed throughout the patient’s living environment in 
order to monitor their daily lives. If the patients stumble 
or some emergency occurs, the system will send a 
notification to alert health care personal of the 
circumstances [5]. In wearable monitors, vital sign 
sensors are unobtrusively embedded in patients’ clothes 
for continuous monitoring without interfering with the 
patients’ usual activity [6][7].  
Improvements in wireless and mobile technologies 
have also facilitated the development of telemedicine. 
Some research has used commercial mobile phones to 
read patient’s vital signs using a Bluetooth channel and 
then transmitted the information directly to the care center 
via GPRS or a 3G network.[8] [9].  
As these systems continue evolving, two major 
research topics have emerged. First, due to the growth of 
telemedicine services, health care servers have been 
forced to change frequently. A new architecture is needed 
in to allow for easy adjustment of existing system 
functionalities or integration of new health care services 
with the existing system according to business processes.  
Second, in the telemedicine field, edge servers are 
placed on the user side and used to acquire patients’ vital 
signs and then to transmit them to a backend system. 
Once a new health service is added, the software in edge 
servers must be changed. Furthermore, different patients 
have different monitoring requirements, ranging from 
ECGs, to SPO2s, or combinations of several services. It is 
a challenge to develop various versions of software to fit 
different user’s requirements.  
In this paper, we present a health care system which 
integrates an Open Service Gateway initiative (OSGi), 
with Message Oriented Middleware (MOM), and Service 
Oriented Architecture (SOA) in order to provide a 
interface, like USB, Bluetooth or wireless, to allow for 
the extraction of the information that has been recorded.  
This system uses commercially available devices which 
measure blood pressure and ECG signals.  
 
C) Edge server 
After the devices have measured patient biostatistics, 
the information is transmitted to a health care database for 
specialists to use in providing health care services. An 
edge server is used to extract and pre-process biostatistics 
from the biosignal devices and then to transmit them to 
the backend system. To achieve the goal, the system uses 
OSGi as a platform to construct an edge server.  
 
 
Figure 2  Component diagram for edge server 
 
Figure 2 represents the components design used in the 
pre-care system. The program is divided into 5 categories 
of components. Each category implements a specific 
interface and represents a functionality.  
 
1) A Biosignal Receiver extracts signals from biosignal 
devices. Different receiver components are designed 
for specific devices according to their connection 
drivers and signal extraction logic.   
2) A Signal Processor pre-processes the signals 
extracted by biosignal receiver. For example, it 
might verify accuracy of signals, compress the data, 
or transform the signals into a format which health 
care servers can recognize. In the implementation 
phase, we used the getServiceReferences() method 
provided by bundlecontext to get all the instances 
which realized the signal processor service and 
registered in OSGi platform. All the service were 
then combined together to respond to the biosignal 
data in a sequential order.  
3) A Net Transmitter sends the vital statistics to the 
backend server. Different implementations are 
constructed according to different transmission 
protocols. Since we used MOM architecture, JMS 
APIs were used to transmit the biosignal data. 
4) An Edge Controller manages the operation logic and 
data flow of the edge server. It is the coordinator for 
gathering references to other services and for 
passing the biosignal through those different 
services. 
5) A User Interface (UI) allows people to interact with 
the information presented by the edge serve and to 
give the system commands.  Different UIs are 
designed according to user requirements.  
 
 
Figure 3  Combining components by user requirement 
 
All the components are constructed as OSGi bundles 
and are integrated dynamically through services provided 
by the bundles. Thus, the behavior of the edge server can 
be changed dynamically, even when the program is 
running, by replacing one bundle with another which 
implements the same interface. As shown in Figure 3, 
instead of building up a monolithic program, the plug and 
play characteristics of this pre-care system help build-up a 
flexible program which can be altered more easily. Health 
service providers may provide various types of programs 
running on the edge server by combining existing 
components in both design time and run time. 
 
D) Message server 
To provide reliable data transmission, a message 
server is present to hold the biosignal data received from 
the edge server. Any message sent from edge server 
includes a topic tag within it that lists the content type.  
 
Figure 4 represents the message handling mechanism. 
When the message is sent into the message server, a 
publishing event occurs.  The server keeps the message 
and sends it to all clients that subscribe to the messages 
particular topic. In this pre-care system all clients 
subscribe the topic with “durable subscriptions”, so the 
message server will keep the message until the entire 
subscription list receives the message. The health care 
server will not lose the biosignal even if it is too busy to 
handle it.  
 
Figure 4  Message handling mechanism 
 
Once a new health care service is added, a new type of 
message must be transmitted; the system can be extended 
by adding a new topic for the new service and designating 
 
Figure 6  Biosignal devices and PDA based edge server 
 
For the backend system, IBM WebSphere MQ was 
used as message queue to perform the MOM and keep 
patients’ biosignals until the health care server handles it. 
The health care server is designed and developed 
according to SOA.  
The reusable services were identified and integrated as 
processes according to our health care logic. After 
receiving a biosignal message, a process is triggered to 
perform the necessary operations and a specialist is 
assigned to provide the necessary care.  
 
Figure 7  Biosignal display of health care system 
 
5. Conclusions  
OSGi is an excellent framework for reusing 
components and building flexible applications that are 
independent from the platform. PDAs, home gateways, 
and PCs were successfully applied to perform the edge 
server functionality. Besides, OSGi for mobile devices, 
JSR 232 (Mobile Operational Management) [17], has also 
been employed by the Nokia Corporation and Motorola. 
In the near future, we should be able to reuse our health 
care bundles on mobile phones in order to operate a 
telemedicine service. The comprehensive support of the 
edge server allows the telemedicine services to be used 
pervasively for different user requirements.  
The backend system was successfully constructed with 
MOM and SOA architecture. Biosignals from the user 
side were be handled by their message topics. New 
message types can be easily integrated into the pre-care 
system. The health care logic was implemented by 
composing services as processes. As the care logic 
changes, the system can be adapted by replacing services 
or reconfiguring processes.  
 
6. Acknowledgement 
The authors would like to express our gratitude for the 
support of the National Science Council, Taiwan, R.O.C., 
under Grant NSC 95-2622-E-027 -018 -CC3. 
 
7. References 
[1] I. Hernandez, F. Mora, M. Villegas, G. Passariello, and G. Carrault, 
“Real-time ECG transmission via Internet for nonclinical 
applications,” IEEE Trans. Inform. Technol. Biomed., vol. 5, no. 3, 
pp. 253 - 257, 2001 
[2] S. Guillen, M.T. Arredondo, V. Traver, J.M. Garcia, C. Fernandez, 
“Multimedia telehomecare system using standard TV set,” IEEE Trans. 
Inform. Technol. Biomed., vol. 49, no. 12, pp. 1431 - 1437, 2002 
[3] I.-Y. Chen and C.-C. Huang, “A Remotely Manageable 
Electrocardiogram Measurement System for Home Healthcare 
using OSGI Framework,” Journal of Medical and Biological 
Engineering, Vol. 24, No.3, pp. 133-139, Sept. 2004. 
[4] Y.-H. Lin, I.-C. Jan, P.C.-I. Ko, Y.-Y. Chen, J.-M. Wong, and G.-J. 
Jan, “A wireless PDA-Based physiological monitoring system for 
patient transport,” IEEE Trans. Inform. Technol. Biomed., vol. 8, 
no. 4, pp. 439 - 447, Dec. 2004 
[5] T.L. Hayes, M. Pavel, N. Larimer, I.A. Tsay, J. Nutt, A.G. Adami, 
“Distributed Healthcare: Simultaneous Assessment of Multiple 
Individuals, ” Pervasive Computing, IEEE, vol 6, no 1, pp. 36-43, 
Jan. 2007  
[6] U. Anliker, J. A. Ward, P. Lukowicz, G. Tröster, F. Dolveck, M. Baer, 
F. Keita, E. B. Schenker, F. Catarsi, L. Coluccini, A. Belardinelli, D. 
Shklarski, M. Alon, E. Hirt, R. Schmid, and M. Vuskovic, “AMON: a 
wearable multiparameter medical monitoring and alert system,” IEEE 
Trans. Inform. Technol. Biomed., vol. 8, no. 4, pp. 415–427, Dec. 2004. 
[7] E. Wade, H. Asada, “Conductive-Fabric Garment for a Cable-Free 
Body Area Network,” Pervasive Computing, IEEE,  vol 6,  no 1,  
pp. 52 - 58, Jan. 2007  
[8] M. F. A. Rasid and B. Woodward, “Bluetooth telemedicine 
processor for multichannel biomedical signal transmission via 
mobile cellular network,” IEEE Trans. Inform. Technol. Biomed., 
vol. 9, no. 1, pp. 35 - 43, Mar. 2005 
[9] R.-C. Lee, K.-C. Chen, C.-C. Hsiao, and C.-L. Tseng, “A mobile 
care system with alert mechanism,” IEEE Trans. Inform. Technol. 
Biomed., accepted, Oct. 2006 
[10] I.-Y. Chen and C.-C. Huang, “A Service-Oriented Agent 
Architecture to Support Telecardiology Services on Demand,” 
Journal of Medical and Biological Engineering, Vol. 25, No.2, pp. 
73-79, June 2005. 
[11] A. Arsanjani, L.-J. Zhang, M. Ellis, A. Allam, K. Channabasavaiah, 
“S3: A Service-Oriented Reference Architecture,” IT Professional, 
vol. 9,  no. 3,  pp. 10 – 17, May-June 2007 
[12] Pasley, J., “How BPEL and SOA are changing Web services 
development,” Internet Computing, IEEE, 9(3):60 – 67, 2005 
[13] Erich Gamma, Richard Helm, Ralph Johnson, John Vlissides; 
“Design Patterns: Elements of Reusable Object-Oriented 
Software”; Addison-Wesley 
[14] OSGi Alliance, http://www.osgi.org/markets/index.asp?section=3 
[15] IBM Service Management Framework, 
http://www.ibm.com/software/wireless/smf/ 
[16] Knopflerfish - Open Source OSGi, http://www.knopflerfish.org/ 
[17] JSR 232: Mobile Operational Management, 
http://jcp.org/en/jsr/detail?id=232 
第 2 頁 共 30 頁 
目錄 
目錄....................................................................................................................................................... 2 
壹、系統特色............................................................................................................................... 4 
貳、系統架構............................................................................................................................... 4 
參、系統流程............................................................................................................................... 5 
肆、系統功能............................................................................................................................... 6 
一、操作面............................................................................................................................. 6 
二、服務面............................................................................................................................. 8 
三、管理面............................................................................................................................. 9 
四、經營面........................................................................................................................... 10 
伍、使用案例............................................................................................................................. 11 
一、資料傳輸....................................................................................................................... 11 
1  Use Case：ECG資料量測與上傳...................................................................... 11 
2 Use Case：接收並解析心電圖資訊.................................................................. 12 
二、組織管理....................................................................................................................... 13 
1 UseCase：新增子單位....................................................................................... 13 
2 UseCase：修改單位資料................................................................................... 13 
3 UseCase：刪除子單位....................................................................................... 14 
4 UseCase：新增護士........................................................................................... 14 
5 UseCase：新增醫師........................................................................................... 15 
6 UseCase：新增使用者....................................................................................... 16 
7 UseCase：修改醫護人員個人資料................................................................... 16 
8 UseCase：修改使用者個人資料....................................................................... 17 
9 UseCase：刪除護士........................................................................................... 18 
10 UseCase：刪除醫師......................................................................................... 18 
11 UseCase：刪除使用者..................................................................................... 18 
12 UseCase：檢視使用者資料............................................................................. 19 
三、照護服務....................................................................................................................... 19 
1 UseCase：預判ECG資訊................................................................................... 19 
2 UseCase：照護................................................................................................... 21 
3 UseCase：回覆................................................................................................... 21 
4 UseCase：檢視照護記錄................................................................................... 22 
四、計費帳務....................................................................................................................... 23 
1 UseCase：修改點數/金額比、結帳日 ............................................................. 23 
2 UseCase：瀏覽系統盈收報表........................................................................... 23 
3 UseCase：瀏覽單位盈收報表........................................................................... 24 
4 UseCase：瀏覽醫師個人報酬記錄................................................................... 24 
5 UseCase：瀏覽護士個人報酬記錄................................................................... 25 
壹、系統特色 
1. 組織：有機化的組織結構 
1.1 階層化的組織架構 
1.2 易於調整的結構設計 
1.3 自主管理的營運平台 
2. 操作：高度統合的作業環境 
2.1 整合性的操作介面 
2.2 個人化的版面配置 
3. 功能：周延完善的系統功能 
3.1 組織管理 
3.2 心臟照護 
3.3 計帳收費 
3.4 資料傳輸 
3.5 系統整合 
4. 效能：安全、便利、高效率的照護系統 
 
貳、系統架構 
 
 
第 4 頁 共 30 頁 
第 6 頁 共 30 頁 
 
肆、系統功能 
一、  操作面 
1.1 量測與上傳 
1.1.1 手機傳送方法 
1.1.1.1 量測 
使用 RMH 儀器進行量測 
1.1.1.2 同意 
點選是否同意傳送該量測資訊至營運中心 
1.1.1.3 傳送 
 傳送至照護中心 
1.1.1.4 確認 
 等候照護中心回應 
1.1.2 PC 傳送方法 
1.1.2.1 量測 
使用 RMH 儀器進行量測 
1.1.2.2 檢視 
 透過 PC 檢視量測結果 
1.1.2.3 選取 
選擇待送訊息 
1.1.2.4 傳送 
 傳送至照護中心 
1.1.2.5 確認 
 等候照護中心回應 
1.1.3 Gateway 傳送方法 
1.1.3.1 量測 
使用 RMH 儀器進行量測 
1.1.3.2 傳送 
 傳送至照護中心 
1.1.3.3 確認 
 等候照護中心回應 
1.2 接收 
1.2.1 接收 
接收使用者傳送之 ECG 資訊 
第 8 頁 共 30 頁 
二、  服務面 
2.1 傳送精靈下載 
2.1.1 提供不同版本 
2.1.1.1 不同傳送方式 
針對不同傳送方法(手機、PC、Gateway)提供不同傳送精靈 
2.1.1.2 不同傳送機型 
對於不同版本之手機、Gateway 提供不同之傳送精靈 
2.1.2 完整安裝解說 
針對不同版本之傳送精靈，提供安裝及設定說明 
2.1.3 詳細操作說明 
2.1.3.1 量測儀器 
完整詳細之解說，說明儀器使用及操作細節 
2.1.3.2 傳送精靈 
針對不同版本之傳送精靈，提供安裝及設定說明 
2.2 個人資料管理 
2.2.1 基本資料設定 
提供個人如密碼、手機、住址等基本資料之修改 
2.2.2 傳送方式選擇 
選擇系統送出診斷通知時使用之方法 
2.3 個人服務管理 
2.3.1 使用者 
2.3.1.1 照護歷程 
檢視個人量測之歷史紀錄，包括每次量測之資訊及醫生診斷結果 
2.3.1.2 加值記錄 
檢閱個人之加值記錄 
2.3.1.3 線上加值 
透過輸入卡號方式，進行點數加值 
2.3.2 醫護人員 
2.3.2.1 處理件數 
檢視個人當月之處理(預判/診斷)次數 
2.3.2.2 酬勞記錄 
檢視個人之薪資資訊 
2.4 服務品管 
2.4.1 回應時效 
醫護人員檢視回應案件之平均時間 
2.4.2 處理時效 
醫護人員檢視處理 ECG 案件之平均時間 
2.5 超額使用通知 
第 10 頁 共 30 頁 
3.4 單位人員報酬分配 
3.4.1 論件計酬 
醫師與護士之報酬模式為論件計酬，每件收取固定費用 
3.5 使用者計費 
3.5.1 依次扣點 
單位管理者可設定使用者每筆資料之處理費(以點數計算) 
3.6 使用者繳費方式 
3.6.1 預付卡 
 至零售商購買預付卡來加值 
3.7 訊息系統 
3.7.1 傳訊通道 
針對不同傳送方式，設定其屬性 Ex: e-Mail Server 
3.8 罐頭訊息 
3.8.1 現象判讀 
提供醫護人員設定常用之現象解讀結果 
3.8.2 建議處置 
提供醫護人員設定常用之建議處置的訊息 
四、  經營面 
4.1 結帳 
4.1.1 計算醫師、護士報酬金額 
4.1.2 計算單位盈收 
4.1.3 計算系統/單位拆帳金額 
4.2 報表 
4.2.1 系統收費報表 
4.2.2 醫護人員報酬列表 
4.2.3 使用者加值記錄 
4.2.4 ECG 資料報表 
 
 
 
 
 
 
1.4.7 使用者收到照護中心回應之簡訊訊息。 
 
1.5 ECG 資料量測與上傳(Gateway 上傳) 
1.5.1 開啟 RMH 裝置並量測 ECG 資料。 
1.5.2 將 RMH 裝置以 USB 連接到 Gateway，並按下 RMH 裝置上的傳送鍵。 
1.5.3 OSGi 傳輸精靈收到 ECG 資料，直接傳送至照護中心歸檔。 
1.5.4 使用者收到照護中心回應簡訊訊息。 
2 Use Case：接收並解析心電圖資訊 
2.1 對象：系統(System) 
2.2 流程： 
2.2.1 使用者使用 ECG 設備量測心電圖資訊，透過個人電腦，傳送至後端伺服器，傳送的
資訊包括帳號、密碼及心電圖資訊 
2.2.2 系統收到 ECG 資訊後，透過 ECG 處理程式，將資料解析為可解讀之資訊 
2.2.3 系統將處理後之 ECG 資料，儲存至資料庫，以供網頁顯示 
2.2.4 系統將收到訊息之事件，告知護士，啟動護士之處理流程 
第 12 頁 共 30 頁 
    
3 UseCase：刪除子單位 
3.1 對象：系統管理員(manager) 
3.2 流程： 
3.2.1 系統管理員登入。 
3.2.2 自組織總管中選擇某子單位。 
3.2.3 點選「刪除」。 
3.2.4 系統將刪除此子單位。 
 
 
 
4 UseCase：新增護士 
4.1 對象：單位管理員(manager) 
4.2 流程： 
4.2.1 單位管理員登入。 
4.2.2 點選「新增護士」，系統回應「新增護士」表單。 
4.2.3 單位管理員輸入「姓名」、「性別」、「出生年月日」、「帳號」、「密碼」、「確認密
碼」、「手機號碼」、「電話」、「電子郵件」後，按下「新增」。 
4.2.4 系統將新增此護士至此單位下。 
4.2.5 系統回應結果於頁面。 
第 14 頁 共 30 頁 
6 UseCase：新增使用者 
6.1 對象：護士 
6.2 流程： 
6.2.1 護士登入。 
6.2.2 點選「新增使用者」，系統回應「新增使用者」表單。 
6.2.3 護士輸入「姓名」、「暱稱」、「身份證字號」、「性別」、「出生年月日」、「帳號」、
「密碼」、「手機號碼」、「電話」、「電子郵件」、「地區」、「主治醫師」、「鄰近
醫院」、「宿疾」、「緊急聯絡人」、「緊急聯絡人電話」、「聯絡人關係」、「傳送
方式」後，按下「新增」。 
6.2.4 系統將新增此使用者至指定醫師下。 
6.2.5 系統回應結果於頁面。 
 
 
7 UseCase：修改醫護人員個人資料 
7.1 對象：醫師、護士 
7.2 流程： 
7.2.1 醫師或護士登入。 
7.2.2 點選「修改個人資料」，系統回應「修改個人資料」表單。 
7.2.3 管理員修改「姓名」、「密碼」、「手機號碼」、「電話」、「電子郵件」後，按下
「更新」。 
第 16 頁 共 30 頁 
9 UseCase：刪除護士 
9.1 對象：單位管理員(manager) 
9.2 流程： 
9.2.1 單位管理員登入。 
9.2.2 點選「人員列表」，系統回應「人員列表」。 
9.2.3 單位管理員選擇某護士後，按下「刪除」。 
9.2.4 系統刪除此護士。 
 
10 UseCase：刪除醫師 
10.1 對象：單位管理員(manager) 
10.2 流程： 
10.2.1 單位管理員登入。 
10.2.2 點選「人員列表」，系統回應「人員列表」。 
10.2.3 單位管理員選擇某醫師後，按下「刪除」。 
10.2.4 系統刪除此醫師。 
 
 
11 UseCase：刪除使用者 
11.1 對象：護士(Nurse) 
11.2 流程： 
11.2.1 護士登入。 
11.2.2 點選「使用者列表」，系統回應「使用者列表」。 
11.2.3 單位管理員選擇某使用者後，按下「刪除」。 
11.2.4 系統刪除此使用者。 
第 18 頁 共 30 頁 
  
1.2.3 在所擁有的資料中勾選欲預判的資料，點選「預判」按鈕，系統列出該筆資料的
詳細內容，包括使用者帳號、姓名、ECG 數據(HT、QRS、ST)、ECG 資料。 
 
1.2.4 透過所顯示的心電圖資訊，判別心電圖資料的完整性，並作初階之資料判讀。 
1.2.5 護士預判該筆記錄，透過罐頭訊息，協助填寫“現象”及“處置”。 
第 20 頁 共 30 頁 
 
3.2.2 勾選需要處理的項目，按下「回覆」按鈕。 
3.2.3 進入回覆處理頁面。依據使用者喜好設定通知方法，並填寫回覆內容。 
 
3.2.4 如果有特殊狀況，則護士以電話通知使用者，告知詳細狀況。 
3.2.5 最後按下「完成」，該筆資料處裡完成。 
4 UseCase：檢視照護記錄 
4.1 對象：使用者(User) 
4.2 流程： 
4.2.1 使用者登入。 
4.2.2 點選「照護記錄」，系統回應「照護記錄」，列出該使用者所有量測資料，最新量測資訊
置於最上方。 
4.2.3 列表資訊包括：資料編號、狀態、主治醫師、處理護士、傳送時間、回覆時間 
4.2.4 使用者點選資料編號，顯示該照護記錄的詳細資訊，包括心電圖資訊，醫生照護結果等。 
4.2.5 使用者點選確定，回到「照護記錄」頁面。 
 
第 22 頁 共 30 頁 
3 UseCase：瀏覽單位盈收報表 
3.1 對象：單位管理者(Manager) 
3.2 流程：  
3.2.1 單位管理者登入 
3.2.2 點選「帳務統計」 
3.2.3 頁面列出最新之盈收報表 
3.2.4 指定「年」、「月」後，按「查詢」。 
3.2.5 頁面列出指定日期之盈收報表，頁面如下圖所示： 
 
4 UseCase：瀏覽醫師個人報酬記錄 
4.1 對象：醫師(Doctor) 
4.2 流程： 
4.2.1 醫師登入 
4.2.2 點選「報酬記錄」 
4.2.3 頁面列出個人報酬記錄，如下圖所示： 
 
 
 
第 24 頁 共 30 頁 
值資訊置於最上方。 
7.2.3 列表資訊包括：日期、金額 
 
 
 
 
 
五、  統計分析  
1 UseCase：檢視回應及處理時效 
1.1 對象：護士、醫師 
1.2 流程： 
1.2.1 醫護人員登入。 
1.2.2 點選「服務品管」，系統回應「服務品管」頁面。 
1.2.3 醫護人員輸入統計區間，按下「確定」 
1.2.4 服務品管頁面顯示醫護人員之“回應時效”及“處理時效”供參考 
1.2.5 回應時效為由傳送至處理完成之歷時時間 
1.2.6 處理時效為由開始處理至處理完成之歷時時 
 
 
 
第 26 頁 共 30 頁 
陸、系統設計 
 
「組織管理」： 
 
 
base DN：  o=system,dc=ilab,dc=development,dc=tw,dc=ecg,dc=root 
 
LDAP 欄位設計： 
1. 單位 
屬性 值 / 範例內容 敘述 
objectClass OrganizationUnit  
ou ntuh 單位代碼 
rdn ou=ntuh RDN 
dn ou=ntuh,o=system,dc=ilab,dc=development, 
dc=tw,dc=ecg,dc=root 
DN 
ouSN 數字(bigInt) 組織序號 
description 台大醫院 單位中文名稱 
 
2. 醫師、護士 
屬性 值 / 範例內容 敘述 
objectClass inetOrgPerson  
uid Bob 使用者帳號 
rdn uid=Bob RDN 
dn uid=Bob,ou=ntuh,o=system,dc=ilab,dc=development, DN 
第 28 頁 共 30 頁 
第 30 頁 共 30 頁 
6. 群組(adminGroup、directorGroup、managerGroup、nurseGroup、doctorGroup、userGroup) 
屬性 值 / 範例內容 敘述 
objectClass groupOfUniqueNames 物件類別 
dn cn=doctorGroup,dc=ecg,dc=root distinguish name 
rdn cn=doctorGroup relative distinguish 
name 
cn doctorGroup 群組名稱 
uniqueMember uid=Bob,ou=cardiacDep,o=ntuh,o=system,dc=ilab,d
c=development,dc=tw,dc=ecg,dc=root 
成員 
 
 
