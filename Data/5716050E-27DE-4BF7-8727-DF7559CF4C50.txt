2依賴彩色影像來偵測道路，雖然道路影像不是三維
模型，但 SCARF 已可就道路位置提供控制回授。
Pomerlean[4]在 CMU 所發展的視覺導引自動駕駛
系統-- RALPH，時速可達每小時 57 英哩，且可自
主航行達 3000 英哩。
其他在以視覺系統為感測基礎的自動導引車輛
( AGV )的研究上，Lee 等[5]利用彩色 CCD 攝影機
來作為路徑與障礙物的偵測，並可計算出參考駕駛
角度。Kuang 等[6]使用基於 Hough 轉換之模糊推理
演算法來識別路徑，使自動導引車輛之即時駕控穩
定性提高。Shu 等[7]以質點濾波演算法( Particle
filtering algorithm )來計算路徑邊緣，使視覺導引的
自主式車輛可航行於道路中。Fang 等[8]所建構之
自動導引車輛是以視覺系統來偵測道路中心線，使
得該 AGV 具有智慧型路徑跟隨之功能。
在視覺追踪研究上，Woodfill 等[9]以運動為基礎
的追踪演算法，隨時傾斜移動攝影機，使移動人物
一直在移動機器人可視的範圍內。另一例追踪系統
則是由 Yamauchi 等[10]所研發以機器視覺控制機
器手臂，使之能輕托一氣球。其它機器視覺追綜系
統之應用大多以達成自動化裝配製造為目的，例如
銲接銲道之追尋，敏捷式製造系統等。
目前視覺感測技術的極致展現以應用在人形機
器人的視覺導引最受矚目，其最主要原因是自主式
步行機器人的導引動作在視覺與運動間需要有很
複雜的協調性。Cupec 等[11]以電腦視覺技術來達
成反應式適應性步伐順序，使雙足步行機器人可以
越過或繞過障礙物。
對於以主動式視覺導引上下階梯之自主性可載
人移動機器人的研究並非很多，其最大原因在於設
計可上下階梯地形之載人移物機器人已非不易，故
目前大多以習用移動機器人作為視覺導引上下階
梯的載具，例如 Xiong 等[12]強調以電腦視覺技術
(computer vision technology)來控制履帶式移動機器
人上下階梯的技術。其首先以單眼攝影機偵測一連
串的階梯邊緣，從這些階梯邊緣的位置與方向可計
算該機器人相對階梯之三維方向與位置，具此完成
自主式階梯之上下航行。Albert 等[13]則是探討雙
足步行機器人上下階梯之路徑規畫。該雙足步行機
器人之視覺系統是由兩個 CMOS 攝影機及線雷射
( line laser )所構成，經由該視覺系統可偵測階梯之
尺寸，並即時完成該機器人之智慧型路徑規畫。
Astrand 等[14] 以機器視覺導引除草機在農田之除
草。
從上述的文獻敘述，以視覺導引為基礎之自主式
移動機器人，其關鍵技術在於外部環境影像訊息的
有效取得，並可正確且忠誠地據以做為該移動機器
人之路徑規畫與運動控制，以達成所給定之工作目
標。因此，本論文以吾人所研發之機器人輪椅為載
具，基於機器視覺之導引技術，使該機器人輪椅可
以自主地上下階梯，文中將解決的問題有
(1) 如何以視覺系統偵測階梯地形及尺寸;
(2) 並且有效地提供作為該機器人輪椅上下階梯之
控制。
最後即該機器人輪椅來實現視覺系統與運動控
制間的協調以完成自主式上下階梯的目的。
三、研究報告應含的內容
1. 視覺導引之機器人輪椅架構
圖一所示為該機器人輪椅裝置CCD之系統架
構圖，其中線雷射主要是做為輔助階梯量測用。該
系統可分為兩大模組：（1）運動控制模組（2）機
器視覺模組。其流程為：首先CCD將擷取之影像，
經由PCI-1409影像擷取卡傳遞給主電腦，經由影像
處理取得圖形邊界資料及座標，規劃運動路徑後再
經電腦計算之後下命令給PCI-7344運動卡，直接驅
動機器人輪椅相關的八個馬達。本論文使用之硬體
為吾人所開發的機器人輪椅，藉由各肢節間的相對
轉動及各別獨立驅動之車輪及履帶，其動作分別由
八顆馬達控制，並利用蝸桿蝸輪對及行星齒輪將動
能傳遞到各肢節，使機器人輪椅能夠適應各種地
形。
1.1機器人輪椅之機構
該創新性的機器人輪椅設計，是藉由各肢節間
的相對轉動及獨立驅動之車輪及履帶，使該機器人
能適應各種地形。在動力傳輸部分，將馬達全部放
置在身體，透過蝸桿蝸輪對及行星齒輪將動能傳遞
到各肢節，使其輪臂體積及質量減少，以獲得更高
之穩定性。
如圖二所示，我們將輪椅器人分成七部分，其
中包括身體、右腰節、右腿節、右脛節(1)(2)、左
腰節、左腿節、左脛節(1)(2)。
由於輪椅機器人左右對稱，所以左右腿節、腰
節、脛節，功能皆為相似，分別簡述如下：
(1)身體：
現今驅動系統是由 8 個直流馬達，藉由蝸桿蝸
4個點作多次的循環消去，而留下來的寬度只有一個
像素所連成的線，稱之為細線化或骨架化。
2.5權重值尋邊法
細線化後的影像，已得到我們所需求的影像骨
架，為求得影像中交叉點的座標，首先必須針對目
前影像的骨架擷取邊界座標，尋邊順序權重值遮罩
的規則來判斷尋邊方向，權重值尋邊法的步驟如
下。
步驟一：以權重遮罩掃描整張影像。
步驟二：當中心 P 取得第一點標籤 1 像素，紀錄此
點座標。
步驟三：輸出第一點周圍八連通權重最大的座標當
作基準座標，但不予以紀錄。
步驟四：當中心 P 座標符合為基準座標時，就記錄
此點座標。
步驟五：八連通最大的座標當作基準座標，不做紀
錄。
重複以上步驟規則直到處理完整張影像，再經過程
式計算，將交叉點的影像座標表示出來，如圖六及
七所示。
2.6座標系統
進行座標轉換前，首先必須先定義世界座標系
統與攝影機座標系統。本論文座標系統，CCD攝影
機是裝置在機器人輪椅身體上方，其位置距地面有
一高度，需要做位移的校正，CCD攝影機在拍攝前
方畫面時會有一傾斜角度，這部份也需要做旋轉的
校正，座標位移與座標旋轉皆可透過矩陣的轉換而
得到。如圖八所示，我們將於機器人輪椅的左脛節
（1）與右脛節（1）中心點投影至地面上，定義為
世界座標系統原點，而攝影機座標系統則以攝影機
的鏡頭前緣為原點。此外，將於CCD正下方裝置一
線雷射，線雷射束投射在階梯上，以便CCD擷取線
雷射與階梯所形成的交叉點 1P 影像座標。就機器人
輪椅與階梯的幾何關係如圖九所示，
N r、P、C r

三向量的關係式如下：
N CN
CP R rr  
  
(1)
其中 P

為點 1P 之世界座標的位置向量，將(1)式展
開可得：
2 2
2 2
( )cos ( )sin
( )sin ( ) cos
c
x
c c N N
y z
N Nc
y z
x P
r y y P z P
y P z Pz
 
 
   
          
       

(2)
再由圖十之相機針孔成像原理，表示三維的實際空
間投影至二維影像平面的示意圖， cx、 c y 、 cz分
別是指已經做過位置校正的世界空間座標，而 ix 、
i y 是指投影到影像上的座標，F為攝影機的焦距，
兩者間的成像幾何關係如下式。
c
i
c
x
x F
z
 (3)
c
i
c
y
y F
z
 (4)
將(2)式所求得的 cx、 c y、 cz 代入(3)、(4)式可
得如下：
2 2sin ( ) cos ( )
i x
N N
y z
P
x F
y P z P 

  
(5)
2 2
2 2
cos ( ) sin ( )
sin ( ) cos ( )
N N
y zi
N N
y z
y P z P
y F
y P z P
 
 
  

  
(6)
由(6)式可求得階梯高度
2
2 2
1
( )( cos sin cos sin )
cos sin
N N
N Nz
zi i
i
F y F P
z P y
F y y
y
   
 
   

(
7)
目前系統的原點是在影像中心點座標（u，v），也
就是（320，480）像素，而一般影像資料規格，原
點是位於左上角，所以投影之後所得的影像座標必
須減去影像中心座標（320，480），才是我們真正
要求的座標位移量。再由(5)式，因攝影機是裝置在
機器人輪椅身體上方，由圖八假設在X軸方向並無
位移，所以 P

向量中的 0xP ；影像部分要拍攝
線雷射和樓梯所構成的交叉點，而線雷射裝置於攝
影機正前方，使得X軸方向影像座標 i x 始終位於影
像座標（320）像素，再減去影像中心座標X軸方向
的（320）像素，所得的座標位移量也將會是0。為
計算真實樓梯高度 2
N z ，我們將利用(7)式逐一代入
已知參數F、 i y、θ、 2
N y 、 zP ，即可求出 2
N z 。
2.7馬達的控制
因本機器人輪椅的功能比一般市面上的電動
輪椅的功能來的多，而用到的馬達也比一般市面上
的電動輪椅來的多，所以馬達的控制是本研究最為
重要的一環，因此我們選擇NI的運動控制卡來配合
資料擷取卡來經由LabView的計算直接驅動機器人
輪椅之馬達，以達到我們機器人輪椅想要的動作，
在速度的控制方面，是以脈寬調變PWM(Pulse
Width Modulation)來控制馬達的速度，其中Target
Position方塊圖為馬達位置控制之輸入，輸入信號為
脈衝信號。當開始攀爬第一階樓梯時，如圖十一
（a），以左脛節（1）為接觸地面的支點，左腰節
與左腿節以相同的旋轉速度向前旋轉以地面算起
的θ角度，直到左脛節（2）的履帶完全接觸到第一
階樓梯。經由座標演算法求出實際階梯高度
H= 2
N z ，該機器人輪椅之L值是兩脛節軸心之距離
為34cm，藉由L和H算出夾角，便可決定機器人輪
椅攀爬第一階樓梯的角度θ。然而遇到不同高度的
階梯，如圖十一（b）所示，先各別算出梯高H1 和
H2 ，經由高度差和L算出其夾角，以下圖為例，
當樓梯高度第二階低於第一階時，以左脛節（2）
為支點，左腰節與左腿節以相同旋轉速度向前旋轉
以左脛節（2）接觸到的這一台階算起的180  度
角度，直到左脛節（1）的履帶完全接觸到第二階
樓梯。
6圖七 影像交叉點座標
C
圖八 攝影機座標與世界座標示意圖
Ө
Xc
Yc
Zc
Xw
Zw
Yw
P

N
r

C
r

1P
2P
圖九 座標系統幾何示意圖
ix
i y
cx
cy
c zF
圖十 相機針孔成像原理
圖十一 攀爬階梯角度示意圖
圖十二 視覺導引攀爬直線樓梯之連續動作
圖十三 視覺導引攀爬不同高度直線樓梯之連續動
作
四、參考文獻
[1] R. Wallace, A. Stentz, C. Thorpe, H. Moravec, W.
Whitaker and T. Kanade, “First results in robot 
road-following, ”International Joint Conference on 
Artificial Intelligence (IJCAI-85), Vol. 2, CA, pp.
1089-1095.
[2] J. Crisman, “Color region tracking for vehicle 
guidance,”Active Vision, MIT Press, MA, pp.
107-120.
[3] R. Wallace, “Robot road folowing by adaptive 
color classification and shape tracking,”ICRA,
1987, pp. 258-263.
[4] D. pomerleau, “Ralph：rapidly adapting lateral
position handler, ”Proceedings of the IEEE 
Symposium on Intelligent Vehicle, 1995, pp.
506-511.
