 1 
 
一、 中文摘要 
本計畫之執行重點為(1)類神經網路晶片之實現與應用、(2)發展小型智慧型自主式車型
載具之軟硬體平台及(3)研發仿實車之智慧型代步車。在類神經模糊晶片之最佳設計將採用高
階合成的設計概念，以系統化方式實現類神經模糊網路之運算架構，結合順向模糊推論與適
應性類神經學習效能，發展出智慧型控制積體電路。首先，深入分析運算架構之資料流結構，
找出最佳化之排程和配置，並比較同步與非同步控制電路之設計方式及其效能，研發出高效
能且具強健性的類神經模糊網路積體電路。此外；本設計將類神經模糊網路實現成高彈性、
可配置且可重複使用的硬體資源，使本設計具有易於系統整合之優越性。最後利用即時硬體
迴路模擬平台將此硬體實際測試於智慧型駕車系統之控制，驗證其效能。在智慧型車型載具
方面，執行計畫之第一年，我們自行改裝一遙控模型車作為第一代智慧車之實驗平台，其以
3G 手機來監控及遙控遠端車體平台，初步實現遠端虛擬駕駛的概念，其亦具有循線、追蹤
目標物等視覺導引之自主式駕駛功能。執行計畫第二年，我們將第一代模型車換成一經改裝
過的電動代步車作為第二代智慧車之實驗平台，該車體架構不同於第一代的遙控模型車，其
為一仿實車的車體結構，其是藉由改變車體前輪轉角及後輪速度來控制車體之運動；第二代
智慧車在遠端遙控方面，延續第一代智慧車遠端虛擬駕駛的構想，並實現以無線方向盤操控
之概念，其是以三軸加速度計之訊號實現姿態估測演算法，讓使用者僅需直覺地旋轉或傾斜
該方向盤即可操控遠端載具，以取代第一代智慧車以手機按鍵操控車體移動之控制方式；在
自主式駕駛方面，以第一代智慧車視覺導引技術為基礎，實現具即時車道保持功能之智慧型
代步車。執行計畫第三年，第三代智慧車延用第二代智慧車的車體架構，並把周邊微控制硬
體電路模組化以提高系統之穩定度，且利用 CAN Bus(控制器區域網路匯流排)整合周邊微控
制電路與感知器之訊號，建構一更完善的智慧車之軟硬體實驗平台。第三代智慧車利用嵌入
式系統技術改善了第二代智慧車的遠端監控/遙控功能僅能於一般電腦上監控之限制，以實
現可攜式遠端監控與操控平台，提升該系統之便利性，並建構一三軸伺服影像平台，增加遠
端監控之可視範圍，更於車體伺服平台與遠端操控平台之嵌入式系統上開發人性化的使用者
圖形介面，以實現一可程式控制之智慧型車型載具；此外，我們於遠端操控平台螢幕上加入
影像旋轉的功能，讓使用者在轉動操控平台時，影像資訊依然可正對使用者，方便使用者的
操作；在自主式駕駛方面，加入了自動停車輔助系統，該系統包含自主式平行停車與倒車入
庫之功能。 
 
關鍵詞：智慧型車型載具、3G手機遙控、視覺導航、嵌入式系統、慣性感測之遠端遙控器、
自動路邊停車、自動倒車入庫、類神經模糊晶片、最佳電路設計。 
 
計畫執行至今，我們將研究成果已/將發表下列期刊與研討會論文，並參加全國性比賽。
其成果如下： 
期刊與研討會論文： 
1. Jeen-Shing Wang and Jhih-Wei Wu, “An Intelligent Vehicle with Posture Estimation 
based Remote Monitoring/Control and Parking Assist Function,” in preparation to 
submit to IEEE Transactions on Vehicular Technology. 
 3 
 
二、 報告內容 
(一) 前言： 
本計畫之執行重點為(1)類神經網路晶片之實現與應用、(2)發展小型智慧型自主式車型
載具之軟硬體平台及(3)研發仿實車之智慧型代步車。計畫之第一年，在類神經網路晶片方
面，設計一高效能且具強健性的類神經模糊網路積體電路運用於智慧車之軟硬體模擬平台；
在車型載具方面，本團隊自行改裝一遙控模型車作為第一代智慧車之實驗平台，此小型智慧
型自主式車型載具之軟硬體平台其以 3G 手機來監控及遙控遠端車體平台，初步實現遠端虛
擬駕駛的概念，其亦具有循線、追蹤目標物等視覺導引之自主式駕駛功能。計畫第二年，在
類神經網路晶片方面，本團隊更進一步地將類神經模糊網路晶片實現於 FPGA，並與嵌入式
系統進行軟硬體整合，應用於人類肢體行為辨識的專題中；在車型載具方面，將第一代遙控
模型車換成一經改裝過的電動代步車作為仿實車之智慧型代步車實驗平台，該車體架構不同
於第一代的遙控模型車，其為一仿實車的車體結構，其是藉由改變車體前輪轉角及後輪速度
來控制車體之運動；在第二代智慧車中具有遠端遙控及自主式駕駛功能，在遠端遙控方面，
其概念為延續第一代智慧車遠端虛擬駕駛的構想，其是以三軸加速度計之訊號實現姿態估測
演算法，讓使用者僅需直覺地旋轉或傾斜該方向盤即可操控遠端載具，來加以取代第一代智
慧車以手機按鍵操控車體移動之控制方式，實現以無線方向盤操控之概念；在自主式駕駛方
面，以第一代智慧車視覺導引技術為基礎，實現具即時車道保持功能之智慧型代步車。 
計畫第三年，主要在第二代智慧型代步車的基礎上，實現以三軸加速度計為基礎的遠端
控制/遙控系統、自動倒車輔助與自動路邊停車功能。在遠端控制/遙控系統方面，利用可攜
式之遠端控制平台，其可經由無線網路接收遠端車輛影像資訊並顯示於控制器之螢幕上，且
可經由改變遠端控制平台之姿態來控制攝影機之視線及控制遠端車子的速度與行駛方向。遠
端控制/遙控系統之概念在於讓使用者無論在何時何地皆能操控遠端載具，並且只要藉由轉
動及傾斜該可攜式控制平台並配合姿態辨識之能力，即可控制遠端載具的方向及速度，實現
具遠端監視及人性化控制的可攜式遠端遙控系統。在停車輔助系統方面有自動倒車輔助與自
動路邊停車功能，自動倒車輔助功能是利用類神經模糊控制器來學習使用者停入特殊車位之
停車操作習慣。該控制器使用雷射掃描器來擷取停車空間環境資訊並辨識出停車之參考線以
提供控制器進行定位。完成定位後，該控制器會自動將使用者順利停入該車位之操作過程，
透過類神經模糊之學習機制學習使用者之停車方式。在自動路邊停車功能方面，目前許多技
術是由國外引進，但由於國外停車空間規格與國內不同，因此往往照成無法正常運行的情
況。有鑑於此，所以使用模糊控制及基因演算法調整參數之技術實現了自動平行停車之功
能，讓車子能夠停入符合國內規格的停車空間。藉由結合以上三種技術功能，使該載具不僅
具有安全性及便利性，亦可透過遠端監控系統，使該車輛操控更具人性化。表 1.1 為本計畫
智慧型車型載具之研發過程。 
 
 
 
 
 
 5 
 
(二) 第一年執行計畫: 
 2.1 類神經模糊晶片之最佳設計 
本計畫實現雙輸入、單輸出之類神經模糊控制電路；各層神經元的數量可因不同應用需
求進行調整，類神經模糊網路之架構與各層執行之運算如圖 2.1 所示。網路內部可調整的參
數包括歸屬函數之中心點、寬度參數以及輸出端之權重值。適應性參數學習機制採用倒傳遞
參數學習演算法，更新之數學運算式如(2.1)~( 2.7)所示。本計畫將從前置運算、排程、管線
架構、配置以及低功率消耗五方面設計具最佳化之類神經模糊網路。以下將說明如何運用以
上五種策略於設計類神經模糊之前饋運算、倒傳遞學習以及控制電路。 
 
1 2
u a
b

1u 2u
y
iw
Input Layer
Membership 
Layer
Fuzzy Inference 
Layer
Output Layer
( ) 1 2        
1, 2..., ; 1, 2...,
j
i
j
i i
i jA
i
x a
x
b
i n j M
  
 
( )j
i
iA
x
ixj
ia
j
ib
1 2
1 2( ) ( ) ( )j j j
n
j nAA A
x x x    
1
1
M
j jj
M
jj
w
y




 
 
圖 2.1 類神經模糊網路架構。 
 
 
 
 
(2)
(2)
22
(3)
1 11
(3)
1 1 1
( )( )1 1 .
2 2( ) ( )
l
l
nM jM
i i ll il d dl
M nM j
i il l i
x ww
E y y
x

 
 
  
               
 
  
x
x
 (2.1) 
 
(2)(3)
(3) (3)
(3) (2) (2)
1 1 2( ) ( ).ij dl l l l i ij
l lij l ij ij ij ij
E E y y w y sign x a
a a ACC b
    
                         (2.2) 
 
(2)(3)
(3) (3)
(3) (2) (2)
1 1 1( ) ( 1).ij dl l l l
l lij l ij ij ij ij
E E y y w y
b b ACC b
    
                         (2.3) 
 (3)1( ) .d k
k k
E E y y y
w y w ACC
              (2.4) 
 ( 1) ( ) .ij ij
ij
Ea t a t
a
      (2.5) 
 ( 1) ( ) .ij ij
ij
Eb t b t
b
      (2.6) 
 7 
 
對(2.2)、(2.3)、(2.4)三項分析，將其分為數個小項，並標註標籤，如圖 2.3之wgting_buf, rule_buf, 
Inv_miu2b 等項。圖 2.3 的 wgting_buf 以及 rule_buf 在前饋電路中曾經計算過，因此在前饋
電路計算時先將此項存至記憶單元當中，待倒傳遞學習電路運算時再取出使用；圖 2.3 中的
Inv_miu2b 可由延伸部分前饋電路得到；mod_err 也在前饋電路先行計算，並分享至倒傳遞
學習電路。所有在前饋電路進行前置運算的項式，將根據其 i, j, l 存取到相對應的記憶單元，
於倒傳遞電路學習運作時再度取出使用。經過有效的前置計算分析，倒傳遞學習電路的運算
次數已大幅減少。我們運用整數線性規劃於倒傳遞學習電路之排程，其結果如圖 2.4 所示。 
(2) (2)(3)
(3) (3)
(3) (2) (2)
(3) (3)
(2)
1 1( )
1 1 2      ( ) ( )
ij ijdl
l l l
l lij l ij ij ij ij
d
l l l i ij
l l ij ij
E E y y w y
a a ACC a
y y w y sign x a
ACC b
     
  
                       
                    
 
 
(3) (3) (2)
(2)
1 1 1( ) (1 )d l l l ij
l lij ij ij
E y y w y
b ACC b
  
                       
(3)1( )d k
k
E y y
w ACC
       
mod_err wgting_buf rule_buf
buffer_a
mod_err
Inv_miu2b sflag
 
圖 2.3 前置運算分析。 
 
Backward path
*
>>
-
η
bij
bij
*
>>
-
rule_buf
η
wl
wl
err
ACC
*
-
*
ReuseRul
ReuseWgt
y
<<
>>
s
-
1 sflag
η aij
aij
*
err
ACC
-
1
sub-stage1
sub-stage2
sub-stage4
sub-stage3
sub_stage5
Inv_miu2b
Mul_1 Mul_2
Mul_2
Mul_2
Mul_2
μij(2)
 
圖 2.4 倒傳遞電路資料流。 
 
 2.1.3 前饋電路與倒傳遞學習電路之管線架構 
本計畫採用三種不同的架構於前饋電路與倒傳遞學習電路之管線架構，分別為：1)非同
步管路化：非同步管路化將原本的模組劃分為更小的數個模組，此數個模組之間以非同步溝
通的方式達成管路之架構。2)細密管線化架構：此架構中，前饋電路的三個模組皆以同步管
路化方式設計，但三個模組之間以非同步訊號溝通。倒傳遞電路以傳統的同步管路架構實
現，但由於三種參數更新電路運作次數不同，其中歸屬函數之中心點、寬度參數的電路之管
路延遲為2，輸出端之權重值之管路延遲為1。3)區域同步全域非同步管線化架構：在此架構
 9 
 
整合超音波感測器、紅外線感應器、視覺感測器、多功能微控器、3G手機等周邊硬體設備，
並利用嵌入式系統開發相關控制軟體程式。使用者可藉由手機遠端啟動載具，透過載具上之
3G手機影像傳輸，在遠端直接遙控載具之行進方向並監視即時環境狀況；同時，載具本身
亦具備循線、追蹤、避障等自主式功能。在複雜的環境中，因3G手機視訊之品質有限，使
用者可能無法藉由該視訊影像完全掌握現場狀況；此時，使用者可透過3G手機下達指令，
選擇載具之自主式功能，執行指定任務，如此可避免因不佳的視訊品質，造成錯誤的操作。 
 
 2.2.1 硬體裝置的驅動 
驅動程式流程如圖 2.6 所示。當我們在編譯 Linux 作業系統核心時，編譯的選項中我們
勾選將驅動程式的模組做動態的掛載動作，並且修改 Root File System 中開機時就會執行的
shell 檔，使得 Linux 一開機後就能馬上做驅動程式模組的掛載動作。在驅動程式的撰寫上我
們撰寫以下的函式:GPIO_init 與 GPIO_cleanup 這兩個驅動程式模組的掛載與卸載的相對應
程式，當驅動程式執行掛載的動作時作業系統會先找出 GPIO_init 的程式模組，並且依照
GPIO＿init 的要求對此驅動程式所要驅動的硬體資源向作業系統作註冊的動作同時對硬體
初始化。此外，所需要用到的外部中斷我們也是在 GPIO_init 的程式模組中向作業系統作註
冊。相反的 GPIO_cleanup 程式模組主要的動作就是在將我們在 GPIO_init 模組向作業系統所
註冊的硬體資源與外部中斷訊號資源做釋放使用權的動作。GPIO_EINT_13 為中斷服務副程
式(Interrupt Service Routine，ISR)，在模組的命名上會選用 13 主要是因為在我們所用到的外
部中斷訊號接腳對應到我們所移植的 Linux 作業系統中是第十三號的外部中斷，在此模組中
我們設計的中斷服務副程式主要的用途是決定目前的有限狀態機的狀態，每當使用者利用手
機按鍵對載具下指令時，外部的複頻訊號訊號處理模組會產生一個中斷訊號給 ARM 發展平
台中斷中央處理器的動作，然後作業系統會把中央處理器的使用權移交給中斷服務副程式執
行，此時中斷服務附程式就會依照外部的複頻訊號處理模組所送進來的複頻訊號決定狀態機
該如何動作，利用中斷服務副程式決定狀態機的狀態後再透過作業系統把原來在執行但被中
斷的應用程式的中央處理器使用權歸還，此時應用程式就可以利用中斷服務附程式所決定出
的新的狀態去執行相對應的動作。GPIO_open 提供應用程式對作業系統作要求使用權的動
作，並且作業系統會通知驅動程式準備做服務，GPIO_release 提供應用程式對硬體資源作釋
放使用權的動作，GPIO_ioctl 提供本計畫的應用程式對硬體資源裝置專屬命令(device-specific 
command)的動作，以裝置專屬命令的方式我們可以輕易的對硬體做外部資料的讀取或寫入。 
 
 11 
 
 
圖 2.7 視覺導引演算法。 
 
表 2.2 顏色於視覺感測器特性。 
特性 
顏色 
Red 
(average/deviation)
Green 
(average/deviation) 
Blue 
(average/deviation) 
Black 33 17 33 17 33 17 
Blue 44 28 88 30 123 30 
 
TC 之後的等值代表欲追蹤之顏色在紅、綠、藍色範圍的最大/小值，每個數值以及 TC
文字間以空白符號分隔，在循線以及避障下，我們對視覺感測器下達黑色的顏色追蹤：“TC 
16 50 16 50 16 50”。在追蹤的狀況下下達：“TC 16 50 16 50 16 50 ”。下達指令之後，若欲追
蹤之顏色出現在視覺感測器之視野內，視覺感測器會以一邊界框(bounding box)表示出欲追
蹤之顏色出現的方位，如圖 2.8(b)所示。接著視覺感測器回傳給 ARM 嵌入式系統此邊界框
 13 
 
進、後退、左轉與右轉命令。在載具操作方面定義三種狀態: Idle、Auto、Remote。在Idle狀
態中，主程式持續等待使用者下達指令，在Idle狀態下，車體處於閒置狀態、無任何的移動，
待按下手機鍵盤“1”之後，進入Auto模式。在Auto狀態下，繼續等待使用者下達三種自走功
能（追蹤、循線、避障）的其中一種。待控制者下達其中一種命令之後，主程式即跳至內含
此三種控制演算法之副程式。在Idle狀態下，按下“3”可進入Remote模式，在此模式下使用者
按下不同之按鍵，嵌入式系統將輸出相對應訊號驅動載具。狀態轉換之關係如圖2.9所示。 
 
 
圖 2.9 手機遙控狀態圖。 
 
(三) 第二年執行計畫: 
 3.1 類神經網路晶片之實現與應用：實現模糊基底函數辨識器於FPGA 
為了辨識出各種不同動作所產生的訊號，我們提出一個基於模糊基底函數網路為基礎的
辨識器，並將其實現於 FPGA。此辨識器的架構如圖 3.1 所示，包涵了五層。而在硬體實現
中，為了減少硬體的使用量，我們將第四層的正規化層省略不做，但亦能保有相同的辨識效
果。以下將詳述各層的運算，再簡介如何將模糊基底函數辨識器實現於 FPGA。在此架構中，
第一層的節點僅為了傳送輸入值至第二層中，u = [u1, u2, …, ur]T 是輸入向量，r 代表的是在
輸入特徵集合的元素個數，而在第二層的節點代表的是高斯函數： 
2exp( ( ) ),j
i
j
i i
jM
i
u m 
 
 
                         (3.1) 
其中， j
iM
 是高斯歸屬函數， jim 及 ji 分別是高斯歸屬函數之第 i 個輸入第 j 項的中心(平均
值)及寬度(變異數)。第三層為模糊法則的推論部分。 
每個模糊基底函數網路的輸出部份，都經過正規化的權重去反應出輸入的資訊。使用高
斯函數的一個優點是：多維的高斯隸屬函數可以被分解成許多組相對應輸入變數之一維的高
斯歸屬函數，也就是說，在一個多維的特徵空間中，每一個類別都可以視為是一個模糊基底
函數。因此，我們設定模糊基底函數的個數相當於類別的個數，而且在模糊基底函數的輸出
端向量中，每個元素都要與其他元素競爭。最後輸出結果即是元素值最大的索引，也就是辨
識結果，其可表示為： 
 arg max .jj Rf P
 
                           (3.2) 
 15 
 
 3.1.1 控制電路(Control circuit)的設計 
由於在模糊基底函數辨識器運作過程中，主要有以下幾項工作：接收辨識器的輸入、模
糊基底函數運算、模糊推論、競爭比較及輸出結果。因此控制電路以有限狀態機實現，其狀
態如圖 3.3 所示： 
 
 
圖3.3 控制電路有限狀態機。 
 
首先有限狀態機處於 S_idle 的狀態，在受到 ARM 指定要開始寫入資料時，則進入
S_wrt_input 狀態，在此狀態控制電路將記憶體寫入的控制信號致能，在此狀態中，ARM 透
過資料/地址匯流排寫入模糊基底函數辨識器的輸入以及模糊基底函數的相對應參數值（基
底函數的中心點以及寬度）。ARM 完成對模糊基底函數寫入資料後，並在控制電路進入
S_fuzzification 狀態之後，電路開始計算辨識器中第二層的數值，由於模糊基底函數計算的次
數是固定的，因此 S_fuzzification 狀態內部會驅動一個計數器，此計數器在進入 S_fuzzification
狀態之後開始運作，在執行次數達到模糊基底函數層運算的次數之後，S_fuzzification 即依序
進入 S_fuzzy_inference 以及 S_comparison 狀態，在此兩個狀態中分別執行模糊推論以及競爭
比較的運算，最後在 S_output 狀態輸出運算結果。在 ARM 端已經讀取到資料之後，狀態再
回到 S_idle。 
 
 3.1.2 資料路徑(Control circuit)的設計 
在資料路徑設計方面，如何計算三角波函數，如下所示： 
2
1 ,
j
i i
j
i
u m


 
                              (3.3) 
模糊推論層的運算全部都是乘法，因此可以用乘法器實現；競爭層則以比較器實現之。
在此介紹三角波函數的硬體實現路徑，如圖 3.4 所示。由於三角波函數計算較為複雜，因此
我們以三層的管路結構實現之。第一層計算減法以及絕對值，第二層計算除法，第三層以右
 17 
 
HCLK
Transfer
response
AHB
slave
All of input 
from outsideHADDR[31:0]
HWDATA[31:0]
HWRITE
HTRANS[1:0]
HSIZE[2:0]
HBURST[2:0]
HRESETn
HSELx HRDATA[31:0]
HREADY
HRESP[1:0]
Data
FBF
Wrapper
out_1
out_2
out_3
out_4
out_5
rdy
clk
rst
start
write
write-addr
data
 
圖3.5 AHB-Slave內部架構圖。 
 
 3.2 第二代智慧車:具遠端控制與即時車道保持之智慧型代步車 
延續第一代智慧車之研發基礎，將第一代遙控模型車換成一經改裝過的電動代步車作為
實驗平台，該車體架構不同於第一代的遙控模型車，其為一仿實車的車體結構，其是藉由改
變車體前輪轉角及後輪速度來控制車體之運動。除了硬體架構改變外，系統的核心控制平台
亦改成具有較高運算及周邊控制能力的Creator-Xscale-PXA270嵌入式發展平台，以負荷較複
雜之演算法及周邊整合之工作，該系統整合網路攝影機、雷射掃描器、慣性感測器及馬達驅
動電路等周邊設備，實現具有遠端遙控、即時車道保持及偵測避障物緊急停止功能之智慧型
代步車。圖3.6為系統架構圖。 
 19 
 
傾角來判斷無線方向盤的左右轉動角度及向前傾角。加速度訊號之演算流程如下所述：首
先，從加速度計送入電腦的資料，我們先做一次平滑處理，某一個時態的加速度值是現在時
態與前七筆時態資料的平均值，如此控制訊號就大大減少因為加速度計的雜訊而發生跳動不
穩的現象。經過平滑處理後，下一個步驟就是利用重力估測遙控器的姿態，經過計算我們得
到了速度及轉向傾角的大小後，再將所得到的角度大小映射到離散的控制訊號範圍。此外，
為了增加遙控器的穩定性，我們設了一個比重力稍大門檻值，用以避免使用者的手部搖晃所
造成的錯誤判讀。最後經由嵌入式系統中Linux的client-server網路程式把指令傳送到遠端智
慧車上，以控制其前輪之轉向及後輪的速度控制。圖3.7為三軸加速度感測計的訊號處理演
算法流程圖。 
 
 
圖3.7 三軸加速度感測計訊號處理演算法流程圖。 
 
前輪轉向控制系統包括 Microchip PIC18F4520 微控制器、馬達驅動電路、電力轉向機構
及線性位移感知器，圖 3.8 為前輪轉向控制系統之方塊圖。後輪速度控制系統則是經由調變
可變電阻，再由分壓定理轉換成輸出電壓，利用此電壓值來控制後方馬達驅動器之輸出，藉
此達到控制馬達停止、前進或後退。而為了解馬達控制狀況，我們以電源供應器去調變輸入
電壓來觀察馬達運作情況，在經過測試後我們得到主機板控制馬達驅動器之電壓輸入範圍如
表 3.1 所示。故我們可以依此表設計後輪速度控制器將 Creator-Xscale-PXA270 所輸入的八位
元資料經由數位類比轉換器的類比輸出電壓控制在這三個電壓輸入範圍，以達到控制馬達的
 21 
 
控制器方面，由於在車道保持中，欲使控制點座標座落於網路攝影機視野的中央區域。因此，
以車道辨識系統中所產生的控制點座標與視野中心座標之誤差作為模糊控制器之輸入，並且
以membership function計算輸入訊號之membership degree。最後再經由解模糊的程序決定載
具行進之方向。此外，若一開始車子太過於偏離車道線時，則須先對車子所在的位置進行校
正的動作，使得車子可以先位於兩車道線的中間位置，接著再開始利用模糊控制器來修正車
子的行進狀況，圖3.9為即時車道保持之演算法流程圖。 
 
攝影機所擷取的輸入
影像
頂-帽濾波器顏色特徵擷取濾波器
將兩張影像結果進行
“AND＂運算
篩選出車道線
計算出左右車道線的
中心點
去除誤判的中心點
最小平方法
計算出虛擬的中心線
得到控制點
觀察車子與車道線的
相對位置，是否需要
校正?
模糊控制器
校正器
校正車子前進方向
是
否
 
圖 3.9 即時車道保持演算法流程圖。 
 
(四) 第三年執行計畫: 
第三代智慧車：具遠端控制與自動停車功能之智慧型代步車 
第三代智慧車為本年度計畫的執行重點，延續了智慧型車輛的主題，將功能延伸至駕駛
人更常遇到的停車問題，並利用嵌入式系統技術改善了第二代智慧車的遠端監控/遙控功能
僅能於一般電腦上監控之限制，以實現可攜式遠端監控與操控平台，以下將詳細敘述。 
 
 4.1 研究目的： 
研究目的包含四部分，智慧型車型載具之建置、具姿態估測與即時影像傳送之遠端操控
 23 
 
SLAM)與用車輛偵測演算法，來找出該空間有多少車輛，進而定位出車輛與停車環境之關
係，由於其必須先掃描過整個環境一次，故無法有效地直接應用在倒車問題上。另外Jung [14]
利用雷射測距儀結合直角偵測(Rectangular Corner Detection)與圓角偵測(Round Corner 
Detection)來辨識車輛後方之車輛與車輛間所產生的停車空間大小，但其只偵測出停車空間
大小，來決定該空間是否可供停入，並未針對自動倒車方法做探討。 
在車輛控制之部分，車型載具運動控制為一標準的非線性控制問題，其在倒車控制上主
要分為兩大類，一為路徑規劃與追蹤[15-17]，另一為方法導向(skill-based)的控制方式，路經
規劃與控制是以利用車輛與停車空間之相對關係以產生一無碰撞路徑(Collision Free Path)，
而該無碰撞路徑必須符合車輛運動學之限制[18-20]，並針對該路徑設計非線性運動控制器，
來追蹤該曲線，進而將車輛停入停車空間中。由於路徑規劃與追蹤控制必須依賴精準的定位
才能有效的實現，故若要實現在實際的應用上，必須開發額外的演算法來解決定位不精準之
問題。 
路徑規劃的方面，Paromtchik和Laugier [21-23]提出一套路邊停車的方法於實車上，停車
空間在作倒車之前即被偵測出來，車子將遵循規劃好的正弦曲線路徑進行倒車動作，並考慮
車子於正弦曲線上的位置關係產生適當的控制指令(前輪轉向角度和車子速度)來進行相關控
制。Lee [24]等人根據車子起始倒車之位置與欲停之位置規劃出無碰撞之路徑，路徑包含兩
直線和兩圓弧軌跡，由Kanayama追蹤控制器[25]考慮車子與路徑的姿態誤差，適當的調整控
制參數來輸出車子之控制訊號。Xu [26]等人利用影像擷取停車空間，設計可避開固定障礙物
且由初始位置移動至終點位置的路徑，再計算車子於路徑上的各時段前輪應轉向的角度作為
控制訊號輸出，使車子可以依循所規劃之路徑，順利完成倒車之任務。在技術基準方面，皆
是利用模糊控制器作為路邊停車的控制器[27-30]，由車子相對於終點座標的水平和垂直位
移、車子的航向角和週遭環境資訊當作控制器的輸入，再由模糊規則庫描述駕駛者的控制行
為，藉此來控制車子前輪轉向角度和速度來完成停車動作。上述以路徑為主的停車方法，若
需要精確地控制車子追蹤路徑，受控系統將很難用數學模型表示之，亦即不易設計控制系
統。反觀以技巧基準為主的停車方法，使用了人性化的模糊控制器，在設計控制器上變得容
易許多，不需要非常複雜的數學方程描述受控系統就即可得到不錯的效果，但只根據車子與
停車點的相對姿態關係和環境資訊很難適用於大部分的停車環境上，此時若能加上一倒車路
徑作輔助將可以得到更好的結果。整合了以上兩種方法，其可規劃避免發生碰撞的倒車路徑
作輔助，並以模糊控制器為基礎，利用車子與倒車路徑的位置誤差和航向角誤差當作輸入，
再由模糊規則庫決策輸出訊號(前輪轉向角度)來達到停車之目的 [31-34]。 
而方法導向的控制方式是利用智慧型控制器來複製有經驗之駕駛者的停車技術，其不需
藉由參考路徑導引車輛停入停車空間，其是利用車輛與停車空間之相對位置與姿態角決策出
一合適的前輪轉向，常見的有模糊控制[9, 35-39]器與類神經網路控制器[40-42]，其中模糊控
制方面多以探討如何調整模糊控制器之參數，使模糊控制器更加強健，讓車輛能停入更小的
停車空間，Zhao[9]及Ryu [36]利用基因演算法(Genetic Algorithm, GA)來調整模糊控制器之歸
屬函數，以設計一強健的停車控制器，使之能停入較小的停車空間，但其調整參數之方法僅
能用電腦模擬車輛停車的方式，來更新控制器參數，由於實際車輛運動與模擬是有所差距
的，故其在實際應用上將有所缺陷，也因為此原故， Ryu在其結論之未來工作中提出，未來
會朝向利用類神經網路來學習使用者駕車習慣。而類神經網路控制器方面主要探討用什麼樣
 25 
 
 4.3.1 硬體平台與相關周邊控制電路 
硬體平台包括兩部分，一為經改裝過的電動代步車，其包括一電動輔助轉向系統與後輪
驅動系統，以驅動前輪轉向機構及後輪轉速。另一為影像伺服平台，其包括三個RC伺服馬
達，用以改變影像擷取設備之方向與視角；而相關周邊控制電路與微控制器包括周邊控制與
資訊擷取電路、周邊電路微控制器、前輪轉向驅動與控制電路，後輪速度擷取與控制電路及
影像伺服平台控制電路。其中周邊控制與資訊擷取電路用來讓主控端可利用控制區域網路
Controller Area Network (CAN) Bus介面與周邊電路作溝通，前輪轉向驅動與控制電路用來放
大控制訊號以驅動直流馬達，並實現數位比例積分控制器以控制前輪轉向角至欲控制之角
度。後輪速度擷取與控制電路用來濾除可變磁阻訊號因磁場所產生的高頻雜訊、放大低轉速
時之振幅及將訊號利用史密特觸發器轉換成方波，以利微控制器擷取後輪轉速，並利用數位
類比轉換器將主控端所傳送之數位控制訊號轉換成後輪驅動器所需的類比訊號，以控制後輪
速度。影像伺服平台控制電路，用來擷取主控端之控制訊號後，將其主換成相對應之可變波
寬的週期脈衝(PWM)訊號，以控制RC伺服馬達至所需的角度位置，下面將介紹其相關硬體
特性。 
 
 4.3.1.1 車型載具 
本計畫之車型載具改裝自Comfort標準型四輪電動代步車[43]，如圖4.2所示，為了能利
用微控制器操控方向盤，本計畫於車型載具之前輪轉向系統上加裝了Koyo公司所出品的
Column-assist型的電力輔助轉向系統[44]。該系統可經由驅動其12V 直流馬達，進而改變車
型載具的前輪轉向角。電動代步車上有一後輪轉速驅動器，其可利用控制訊號之電壓改變來
控制後輪轉速。 
 
圖 4.2 車型載具。 
 
 4.3.1.2 影像伺服平台 
影像伺服平台是由三組RC伺服馬達所組成，如圖4.3所示，其用來控制攝影機之水平、
垂直角度及180度反轉角度，其中伺服馬達為GWS/S03T STD。 
 27 
 
 4.3.1.3.3 前輪轉向驅動與控制電路 
前輪轉向驅動與控制電路主要是用來提升從微處理器所產生的PWM控制訊號之電壓及
電流，以提供足夠之功率驅動電動輔助轉向系統上的直流馬達，圖 4.4 為前輪轉向馬達驅動
電路之實體電路圖。 
 
圖 4.4 前輪轉向馬達驅動電路。 
 
 4.3.1.3.4 後輪速度擷取與控制電路 
後輪速度擷取與控制電路包含一高頻率波與低頻放大之電路、史密特觸發電路、
PIC18F458 微控制器、CAN 收發器(Transceiver)及一數位類比轉換器。圖 4.5 為後輪速度擷
取與控制實體電路圖。 
 
 
圖 4.5 後輪速度擷取與控制實體電路圖。 
 
 4.3.1.3.5 影像伺服平台控制電路 
影像伺服平台控制電路包括 PIC18F458 微控制器、CAN 收發器及一獨立 5 伏特電源，
來控制影像伺服平台上的三個伺服馬達，圖 4.6 為影像伺服平台控制電路之實體電路圖。 
 
 29 
 
 
圖 4.8 Bosch LWS3.6 轉角感知器。 
 
 4.3.2.4 可變磁阻元件 
為了獲得左右兩輪之速度，進而估算出載具之位置與姿態角，故於車型載具上之後輪軸
左右兩輪分別安裝了磁性編碼器(Electronic Encoder)及齒輪，如圖 4.9 所示。該磁性編碼器為
一可變磁阻元件(Variable Reluctance Sensor, VRS)，載具上齒輪之齒數共有四十四組凸齒及凹
齒，而一組凸齒及凹齒通過可變磁阻元件所產生的電壓變化為一完整之正弦波，所以後輪旋
轉一圈即可得到四十四組完整之正弦波訊號。 
 
 
圖 4.9 可變磁阻元件。 
 
 4.3.2.5 慣性感知模組 
慣性感知模組分為發射端與接收端兩部分，發射端包含三軸加速度計 LIS3L02AQ3、兩
軸陀螺儀 IDG-300、單軸陀螺儀 ADXRS300、C8051F330 微控制器及 RF 發射器
CRM2400ANC-T；接收端包含 C8051F206 微控制器、USB 轉 UART 橋接器 CP2102 及 RF
接收器 CRM2400ANC-R。圖 4.10(a)與 4.10(b)分別為慣性感知模組發射端與慣性感知模組接
收端。 
 31 
 
 
圖 4.11 可攜式遠端監控/遙控方塊圖。 
 
 4.4.1 無線網路即時影像傳輸 
即時影像傳輸架構是參考一於x86硬體平台底下所開發的開放式軟體spcaview[47]，其提
供網路傳輸與JPEG影像壓縮之原始碼供開發者修改。其中一個完整的網路即時影像傳輸系
統包括四個部分，伺服端(Server)、使用者端(Client)、傳輸內容(Content)及傳輸媒介(Data 
Network)。 
在伺服端的部分，其負責了影像擷取與網路資料傳輸，在使用者端部分，其負責網路資
料接收，而傳輸內容為經JPEG壓縮過的影像資料，最後在傳輸媒介上面為使用無線網路之
協定，其該協定架構下之各層分別為，實體層: 2.4 GHz的ISM頻段上的無線調頻，資料鏈結
層：802.11g，網路層: IP(IPv4)，傳輸層：TCP。 
 33 
 
出來的最小值，datainput為從三軸加速度計擷取到的原始資料，datacalibration 為經校正後之資
料。 
datacalibration = slope(center -datainput ).               (4.1) 
.
2
 Max Mincenter                        (4.2) 
2 . slope Max Min                         (4.3) 
 
 4.4.2.2 座標轉換與姿態估測 
首先，先定義出大地座標與運動座標，大地座標為固定不動的座標，運動座標為操控平
台之座標系統，其表示如圖 4.13 所式，其中 On 代表大地座標的原點，Xn、Yn 及 Zn 分別為
大地座標中三個不同之軸向，而 Ob 代表移動平台的原點，Xb、Yb 及 Zb 分別為移動平台中三
個不同之軸向。 
 
  
    
圖 4.13 姿態估測之座標系統。 
 
其姿態可由尤拉(Euler)角表示之，方向角 yaw(Ψ)、俯仰角 pitch(θ)及滾轉角 roll(Φ)，其
相對應的旋轉矩陣如(4.4)式、(4.5)式及(4.6)式所示。 
 滾轉角(roll)代表對移動物體座標 x 軸旋轉之旋轉矩陣 TΦ 
1 0 0
0 cos sin .
0 sin cos
T  
 
      
                     (4.4) 
俯仰角(pitch)代表對移動物體座標 y 軸旋轉之旋轉矩陣 Tθ 
 35 
 
該向量與方向餘弦矩陣相乘即會將移動物體座標上之量測向量轉換到大地座標上，故該量測
向量經座標轉換過後應為重力加速度向量，如(4.9)式。 
, , ,[ ] . Tb b x b y b zA a a a                  (4.9) 
. nb bG T A                         (4.10) 
由於欲求得方向角(yaw)與俯仰角(pitch)，故設滾轉角(roll(Φ))為 0，使得該旋轉矩陣 TΦ
為一 3x3 的單位矩陣，而方向餘弦矩陣如(4.11)所示。 
cos cos cos sin sin
sin cos 0 .
sin cos sin sin cos
    
 
    
      
n
bT           (4.11) 
利用旋轉矩陣的正交特性(Orthogonal Property of Rotation Matrices)，其特性為轉置過後
的方向餘弦矩陣即為方向餘弦矩陣的反矩陣，故將(4.11)式等式的左右兩邊乘上一轉置過後
的方向餘弦矩陣可得(4.12)式，將(4.10)式及(4.11)式代入(4.12)式，可得(4.13)式，將矩陣相乘
後可得(4.14)式。 
,[ ] [ ]
[ ] .


n T n n T
b b b b
n T
b b
T T A T G
A T G
                       (4.12) 
cos cos sin sin cos 0
cos sin cos sin sin 0 .
sin 0 cos
    
    
 
                
bA
g
              (4.13) 
,
,
,
sin cos
sin sin .
cos
 
 

              
b x
b y
b z
a g
a g
a g
                      (4.14) 
在得到(4.14)式後，利用反餘弦與反正切函數可得方向角 yaw(Ψ)角及俯仰角 pitch(θ)角，
如(4.15)式及(4.16)式所示。 
Ψ=tan-1(ab,y/ab,x).                         (4.15) 
θ=cos-1(ab,z/g).                          (4.16) 
 
 4.4.2.3 遠端遙控控制方法 
在擷取到方向角 yaw(Ψ)及俯仰角 pitch(θ)後即可將其轉換成控制命令，其受控平台有兩
種，一為車型載具，另一為影像伺服平台，其控制流程如圖 4.15 所示，其姿態估測所得之
方向角 yaw(Ψ)及俯仰 pitch(θ)為徑度，首先必須將此角度轉換成合適的控制命令並利用網路
傳輸出去。而在載台控制方面需要將方向角 yaw(Ψ)轉換成方向盤控制命令，將俯仰角 pitch(θ)
轉換成後輪速度控制命令，在方向盤控制命令轉換中是將估測出的-1.57 到 1.57 之徑度資料
轉成-90 到 90 之角度資料，且由於前輪方向盤最大轉動角度為-120 到 120 度，為了控制方便，
 37 
 
 
圖 4.15 遠端遙控控制流程圖。 
 
 4.5 自動倒車輔助系統 
自動倒車輔助系統分為兩部分，一為倒車空間參考線偵測，另一為類神經模糊倒車學習
控制器。於倒車空間參考線偵測中，我們使用雷射測距儀當作主要感知元件，其用來掃描車
輛後方環境障礙物資訊，經過直角轉角偵測及主要參考轉角辨識後，計算出轉角位置與參考
線角度，經座標轉換後，即可定義出車型載具與停車空間之相對關係。而於倒車控制器中，
我們使用類神經模糊控制器當作倒車決策控制器，該控制器分為兩階段，首先將使用者倒車
過程之資訊記錄起來當作訓練資料，利用這些資料經過學習演算調整類神經模糊控制器內部
之參數後，將該參數代入控制器中，最後此經訓練過後之控制器即可當作自動倒車入庫之控
制器，用來決策倒車時方向盤轉動之機制。以下將介紹車輛的運動學分析、倒車空間參考線
偵測演算法之流程及如何利用類神經模糊控制器達到具學習功能之自動倒車輔助功能。 
 
 4.5.1 倒車空間參考線偵測演算法 
倒車空間參考線偵測演算法是以雷射測距儀當作掃描 180 度停車環境之周邊感知元
件，如圖 4.16 所示，該演算法包含四個步驟，資料前處理、直角轉角偵測、主要參考轉角
辨識及倒車參考線角度計算與座標轉換。資料前處理是先擷取出倒車空間中合適的資料區
段，直角轉角偵測是用來判斷這些資料區段有多少為 L 型的線段再利用主要參考轉角辨識決
策出真正的倒車 L 型線段，倒車參考線角度計算是將該 L 型線段長邊當作倒車參考線，並
計算出該參考線之角度，利用擷取出之直角轉角點位置與參考線角度進行座標轉換，即可得
到車輛與倒車空間之相對位置，以當作車輛起始位置之定位，以下將詳細介紹倒車空間參考
線偵測演算法之運作流程。 
 39 
 
由上述辨識方法可知，其必須決定出該線段的哪個點為轉折點才能求出適當的轉角誤差
指標，其可將該線段的每個點皆當作轉折點，分別求出該線段的每個轉角誤差指標，再從其
中找出最小的轉角誤差指標，該指標即為該線段的誤差指標，而所對應到的點即為直角轉角
點[3]，但此方法將會大大提高運算複雜度，本計畫是利用觀察出雷射測距儀所掃描之一維資
料中，符合直角之線段所呈現之樣式，如圖 4.17 所示，將會發現該線段會有一局部最小值，
而將該線段轉換至二維平面上後，該最小值之點即為直角轉折點，如圖 4.18 所示，故可將
線段先經由局部最小值擷取後所得到的點當作直角轉折點，進而確立量測矩陣 A 後，即可利
用奇異值分解法(SVD)找出直角轉角誤差指標，其中該指標小於 0.1 之線段即定義為直角轉
角線段，圖 4.19 為倒車空間中符合條件之線段，其中較粗之線段為直角轉角線段。 
120 140 160 180 200 220 240
1000
1500
2000
2500
di
st
an
ce
 (m
m
)
0.5 degree
Investigated Point Detection
 
圖 4.17 一維掃描資料之轉折點。 
 41 
 
用來當作自動倒車入庫之控制器。 
圖 4.20 為一倒車過程示意圖，駕駛者在倒車時會依據車子後輪中心與停車空間座標之 x
位移與姿態角 θ來決定方向盤之轉動角度，進而停入停車空間中。此一連串之過程可利用車
型載具位置與姿態角估測和轉角感知器來記錄車體運動過程之 x 位移、姿態角 θ及方向盤角
度 Φ，擷取完後再將 x 位移及 θ姿態角做正規化，即可用來當作類神經模糊控制器之訓練資
料。 
X 位移
θ姿態角
φ方向盤轉角y
x
後輪中心
 
圖 4.20 倒車過程示意圖。 
 
 4.6 自動路邊停車 
本章節所開發之路邊停車演算法將依序使用路徑規劃和路徑追蹤的控制方法來實現路
邊停車的功能，經由可變磁阻感測器的定位方法，得到代步車在任意時刻之姿態，藉由車子
與規劃之路徑的姿態誤差關係，來控制車子平穩地追蹤路徑。 
 
 4.6.1 路邊停車流程 
步驟一:利用右前方(或左前方)超音波感測器擷取停車空間並確認停車空位是否合適，在
這裡定義停車空間長度必須大於 1.4 倍車長，停車空間深度必須大於 1.3 倍車寬，方能符合
本計畫路邊停車的基本要求。  
步驟二:若停車空間足夠，則根據此時之停車空間長度和車身右邊(或左邊)與前車距離來
規劃合適的預備倒車點，並控制車子移動到此點，預備倒車點規劃。 
步驟三: 規劃預備倒車點後，規劃無碰撞之倒車路徑。 
步驟四:規劃完倒車路徑後，以路徑追蹤之基因模糊控制器開始作倒車路徑之追蹤直到
到達預定停車點。 
 43 
 
 
圖 4. 22 超音波擺放圖。 
d
d
 
圖 4. 23 偵測停車空間演算法流程圖。 
 
 4.6.3 倒車路徑規劃 
 4.6.3.1 預備倒車點規畫 
根據停車環境的變化來決定一個合適的預備倒車點，主要根據此時停車空間長度 L 和車
身右側與前車距離 2d 來決定車子所需前進至預備倒車點的距離 Lp( 3 2P P )，如圖 4.24 所
示。 
 45 
 
2 2
1 2 .2
Lp yR R
y
         (4.27) 
其中 maxLp 和 minLp 為車子可前進之直線軌跡最大和最小的距離，其關係式為: 
2
max 1max 2max( )(2 ) ,Lp R R y y                  (4.28) 
2
min 1min 2min( )(2 ) ,Lp R R y y                   (4.29) 
且 min max[ , ]Lp Lp Lp ， 1minR 、 1maxR 、 2maxR 和 2minR 為考慮車子在倒車過程避免發生碰撞
所設的限制。由圖 4.25 和(4.25)、(4.26)和(4.27)式可知，只要知道 1R 、 2R 、 即可決定倒車
路徑，而 Lp 可決定車子由座標 P3 至預定倒車點 P2 應行駛的距離。 
minLp maxLp
y
2R
1R

H
 
圖 4.25 倒車路徑示意圖。 
 
 4.6.4 路徑追蹤之基因模糊控制器 
路徑追蹤控制器(Path Tracking Controller)為路邊停車主要控制核心，主要控制車子能夠
平穩的從預備倒車點行駛至預定之停車點，而為了讓車子能夠平滑的沿著所規劃的路徑移
動，所以利用模糊控制器作為實現路邊停車功能之主要控制器，並同時利用基因演算法來調
整模糊控制器的歸屬函數，以提升路徑追蹤之準確率。在本計畫中所使用的路徑追蹤之基因
模糊控制器為雙輸入單輸出模糊控制器。在設計模糊控制器上，首要步驟必須先行定義出模
糊控制器的輸入與輸出。所以在路徑追蹤之基因模糊控制器輸入的定義上，我們把規劃好的
倒車路徑當作成數個航點(Waypoint)的集合，相對於路徑起始點(預備停車點)與終點(預定之
停車點)，每個航點都具有自己的位置與航向角，我們利用車子在作路徑追蹤過程中，車子
本身之航向角 vehicle 與航點之期望航向角 intwaypo 之誤差  ，以及以水平軸為基準，車子與航
 47 
 
表 4.1 路徑追蹤模糊規則庫 
        
   



 
NM NS ZE PS PM 
NM ZE NS NS NM NM 
NS PS ZE NS NM NM 
ZE PM PS ZE NS NM 
PS PM PM PS ZE NS 
PM PM PM PS PS ZE 
 
雖然在控制法則上，我們可以透過駕駛者的觀點去調整，但是歸屬函數之涵蓋範圍及分
布位置卻只能以嘗試錯誤的方法不斷的試驗，測試控制結果的好壞，這樣不但花費時間而且
並也不能保證所調整出的歸屬函數為較佳解。因此，將使用基因演算法來調整歸屬函數以解
決專家知識不足的困擾。 
在作基因演算法時，第一步驟為染色體的編碼，如圖 4.28 所示，首先我們把輸入、   
以及輸出 編成染色體，而輸入 、   以及輸出 的歸屬函數分別由八個參考點(C1~C8)
來劃分為三個等腰三角形與兩個梯型之歸屬函數，並定義變數(r1~r8)與參考點之間的關聯
性，而每一變數再分別編碼成二進位制 8 位元之基因字串，故此染色體總共由 192 個基因所
組成。 
  
 
圖 4.28 歸屬函數之編碼。 
 
 49 
 
intwaypo
( , )vehicle vehiclex y
int int( , )waypo waypox y
vehicle
 
圖 4.29 車子與航點之切線距離誤差。 
故適應函數(Fitness Function)為: 
0 0
1 1 .
_ ( ) ( )
k k
Fitness Function
d error k k
 
       (4.35) 
接下來亂數產生 50 種初始族群並設定演化次數為 10000 次，以停車空間長度為 1.4 倍
車長、車身右側與前車之距離 2 20d  公分求得之預備倒車點 P2=(182.7092, 79.5)為停車環
境，並選取合適的 1 101.86R  公分、 2 137.9161R  公分和 49.64  所規劃的倒車路徑為調
整路徑追蹤模糊控制器的主要軌跡。 
圖 4.30 為調整過程中路徑追蹤之基因模糊蹤控制器每一演化世代對應之適應值，以生
物學的角度來看，適應值越大代表物種對環境的適應性越強，若以路徑追蹤控制器的角度來
看，適應值越大代表車子行駛於倒車路徑所產生的航向角誤差  與航點切線之相對距離誤
差 d_error 總和越小，且可看出，演化至約 6000 個世代時即已收斂。 
 51 
 
 
圖 4.33 調整後輸出之歸屬函數。 
 
 4.6.5 航向校正控制器 
雖然路徑追蹤控制器透過基因演算法把追蹤過程中的誤差總合修正至最小，但在抵達預
定之停車點仍會有些許的航向角誤差，在這裡將透過前進、後退的機制來達到航向角校正之
目的。航向校正控制器同樣採用了模糊控制器作為車子之控制器，不同的是它是單輸入單輸
出之控制器，輸入為航向角誤差  ，輸出同樣為前輪轉向角度。輸入和輸出以等腰三角
形歸屬函數為主，依模糊集合之程度不同，輸出入之語句變數可分為 S (Small)、M (Medium)、
L (Large)。同樣，再以駕駛者觀點為主來訂定其控制法則: 
法則一: If   is Small Then   is Small. 
法則二: If   is Medium Then  is Medium. 
法則三: If   is Large Then   is Large. 
圖 4.34 為航向校正控制器之輸入歸屬函數。 
 
圖 4.34 輸入  之歸屬函數。 
下圖為航向校正控制器之輸出歸屬函數。 
 
圖 4.35 輸出 之歸屬函數。 
 53 
 
在智慧型車型載具方面，第一年實現以3G手機遠端遙控之第一代自主式車型載具，以
視覺伺服及模糊之概念，實現具備三種視覺導引之自主式性功能。同時，整合感應器及視覺
感測器等硬體設備，並於嵌入式系統內開發硬體設備之驅動程式，完成自動駕駛模式和手機
遠端監視遙控模式等功能，讓使用者可在遠端操作及監視載具執行。第二年整合無線網路通
訊、視覺伺服、影像辨識系統、偵測障礙物緊急停止或避障系統、慣性感測遙控系統及馬達
控制系統於一仿實車的車體結構改裝的電動代步車上，提供遠端遙控、自動駕駛模式。遠端
遙控模式時，使用者可透過無線網路通訊的方式得知環境即時影像，並藉此監控智慧車的環
境狀況，接者，利用以三軸加速度感測計控制遠端智慧車的速度與行駛方向。在自動導航模
式下，利用具模糊邏輯運作機制的影像車道辨識系統計算出車道中線，使智慧車具有即時車
道保持的功能。以上兩種操作模式，提升了使用者用車的便利性，自動駕駛讓駕駛人在高速
公路上可以將駕駛權交給車子，進而省下許多寶貴的時間。另外三軸加速度計的微小體積，
縮小了無線遙控器的體積，相較於傳統遙控器，攜帶的便利性得到明顯的提升。兩種模式中
皆利用雷射掃描器量測障礙物與車體間相對應的位置以及距離，並透過嵌入式系統下達相關
控制命令以達到偵測障礙物緊急停止之功能。 
本年度為執行計畫的第三年延續了智慧型車型載具的主題，我們利用了改裝過的四輪電
動代步車來當作實驗平台，以嵌入式系統發展平台當作核心控制器，並利用 CAN Bus 整合
了週邊電路及收集各個感知元件，其包括超音波感知器、雷射掃描器、網路攝影機、前輪轉
角感知器、後輪磁阻感知元件等，以實現遠端監控系統、自動平行停車及自動倒車入庫之功
能。於遠端監控系統中，實現了一具姿態估測控制之可攜式遠端監控系統，該系統結合了三
軸加速度計、嵌入式系統平台與 Wi-Fi 無線網路，將遠端車體平台上的攝影機影像顯示於
LCD 螢幕上，並利用姿態估測演算法擷取該控制平台的傾斜角與旋轉角，讓使用者能夠經
由該變控制器的姿態來控制遠端車體平台的速度及方向亦可控制裝在攝影機上的兩軸伺服
平台。該遠端監控之核心概念是想讓使用者能隨時隨地的監控遠端車型載具，並利用感知姿
態的方式控制車體平台，以增加其操控的便利性。在自動倒車入庫系統中，該系統利用類神
經模糊控制器實現了具學習能力的自動倒車入庫系統，並使用雷射掃描器當作停車週邊環境
感知元件，該感知方法免除了傳統使用超音波掃描的限制且不會像一般使用影像辨識方法，
易受光線影響。此外，我們利用停車參考線擷取演算法當作停車空間辨識器，使用者可以自
動設定想停入的空間，只要順利停進該停車位，該系統即會學習該狀況之停車行為，下次想
要再停入相同空間，只要載入先前學習之參數即可輕鬆停入，故該系統比傳統倒車系統更加
有彈性及穩定性。在自動平行停車方面，本參賽作品利用模糊控制器來當作平行停車路徑追
蹤之控制器，並利用基因演算法將模糊控制系統參數最佳化，使用者可以利用本系統將車子
輕鬆的停入較狹小的路邊停車空間，增加停車之便利性與安全性。 
 
三、 參考文獻 
[1] S. Hutchinson, G. D. Hager, and P. I. Corke, “A tutorial on visual servo control,” IEEE Trans. 
on Robotics and Automation, vol. 12, no. 4, pp.651~670, 1996. 
[2] R. C. Luo and T.M. Chen, “Development of a multibehavior-based mobile robot for remote 
supervisory control through the Internet,” IEEE/ASME Trans. Mechatronics, vol. 5, no. 4, pp. 
 55 
 
nonholonomic vehicle-parking assistant,” IEEE Trans. Vehicular Technology, vol. 58, no. 3, 
pp. 1106-1118, 2009. 
[18] Y. Kanayama, Y. Kimura, F. Miyazaki, and T. Noguchi, “A stable tracking control method for 
an autonomous mobile robot,” in Proc. IEEE Int. Conf. on Robotics and Automation, 1990, 
pp. 384-389. 
[19] D. Lyon, “Ad-hoc and derived parking curves,” in Proc. of SPIE, 1991, pp. 39-49. 
[20] S. Fleury, P. Soueres, J.-P. Laumond, and R. Chatila, “Primitives for smoothing mobile robot 
trajectories,” IEEE Trans. Robotics and Automation, vol. 11, no. 3, pp. 441-448, 1995. 
[21] I. E. Paromtchik and C. Laugier, “Motion generation and control for parking an autonomous 
vehicle,” in Proc. IEEE Conf. on Robotics Automation, vol. 4, 1996, pp. 3117-3122. 
[22] I. E. Paromtchik and C. Laugier, “Autonomous parallel parking of a nonholonomic vehicle,” 
in Proc. IEEE Int. Conf. on Intelligent Vehicle, 1996, pp. 13-18. 
[23] I. E. Paromtchik and C. Laugier, “Automatic parallel parking and returning to traffic 
manoeuvres,” in Proc. IEEE Int. Conf. on Intelligent Robots and Systems, vol. 3, 1997, pp. 
21-23. 
[24] K. Lee, D. Kim, W. Chung, H. W. Chang, and P. Yoon, “Car parking control using a trajectory 
tracking controller,” in SCIE-ICASE Int. of Joint Conf., 2006, pp. 18-31. 
[25] Y. Kanayama, and Y. Kimura, “A stable tracking control method for a nonholonomic mobile 
robot,” in IEEE/RSJ Int. Workshop on Intelligent Robots and Systems, 1991, pp., 384-389. 
[26] J. Xu, G. Chen, and M. Xie, “Vision-guided automatic parking for smart car,” in Proc. IEEE 
Intelligent Vehicle Symp., 2000, pp. 725-730. 
[27] Y. Zhao and E. G. Collins Jr., “Robust automatic parallel parking in tight spaces via fuzzy 
logic,” Robotics and Autonomous System, vol. 51, no. 2-3, pp. 111-127, 2005. 
[28] H. Miyata, M. Phki, Y. Yokouchi, and M. Ohkita, “Control of the autonomous mobile robot 
DREAM-1 for a parallel parking,” Mathematics and Computes in Simulation, vol. 14, pp. 
129-138, 1996. 
[29] C. Bentalba, A. E. Hajjaji, and A. Rachid, “Fuzzy parking and point stabilization: application 
car dynamics model,” in Proc. of 5th IEEE Mediterranean Conf. on Control and Systems, 
1997, pp. 1-6. 
[30] W. A. Daxwanger and G. K. Schmidt, “Skill-based visual parking control using neural and 
fuzzy network,” in Proc. of IEEE Int. Conf. on System, Man, and Cybernetics, vol. 2, 1995, 
pp. 1659-1664. 
[31] K. Y. Lian, C. S. Chin, and T. S. Chiang, “Parallel parking a car-like robot using fuzzy gain 
scheduling,” in Proc. IEEE Conf. Robotics Automation, vol. 4, 1999, pp. 1686-1691. 
[32] Y.-S. Ryu, S.-Y. Oh, and S.-Y. Kim, “Robust automatic parking without odometry using and 
evolutionary fuzzy logic controller,” Int. Journal of Control, Automation and Systems, vol. 6, 
no. 3, pp. 434-443, 2008. 
[33] T.-H. S. Li and S.-J. Chang, “Autonomous fuzzy parking control of a car-like mobile robot,” 
IEEE Trans. Systems, Man, and Cybernetics, vol. 33, pp. 451-465, 2003. 
 57 
 
四、 計畫成果自評 
計畫執行至今，已有七篇研討會論文被接受，並已著手撰寫投稿兩篇期刊論文於國際期
刊；並預計將嵌入式系統實作成果投稿至國際研討會以及國際期刊論文。本研究團隊報名參
加近三年之全國大專院校嵌入式系統設計競賽，皆屢獲佳績。並且於今年度的「旺宏金矽獎」
半導體設計與應用大賽中榮獲評審團鑽石大賞 、最佳指導教授獎及最佳創意獎。本研究團
隊將持續將相關之研究成果實現於硬體並持續參加國內競賽，並發表論文於國際期刊及研討
會。 
 
2 
 
二 與會經過  
此行除了參加會議外，應大會主席邀請前往韓國首爾是數位生活館參訪。大會主席
Professor Lee Ju-Jang 是我在美國 PURDUE UNIVERSITY 攻讀博士的辦公室室友，2000
年 Professor Lee 到美國休假一年並接受我的指導教授邀請擔任訪問學者。訪問期間
由我負責接待，因此建立良好的友誼關係。由於會議時間正值暑假旅遊旺季，機票及
旅館相當昂貴且不容易訂購，透過旅行社機位預定安排，最後取得 7月 2日去程的機
位，但是回程的時間則 7月 8日。於 7月 2日抵達韓國仁川國際機場，搭乘機場巴士
(6002 號)約 1小時車程到達首爾入住新村的一家商務旅館。隔天一早即搭乘捷運與
Professor Lee 的學生 Johnny Park 見面，由他負責接待到梨花女子大學及首爾大學參
觀。一進校園，就被校園中心的建築物所吸引，其別稱是「大學谷」，因為基地位於山
谷而且建築本身也像峽谷，建築群體設計真正做到依山就勢(如下圖)，俯瞰的視覺效
果非常驚人。而且「大學谷」兩側的玻璃幕牆後面隱藏的兩棟建築，包含教室、圖書
館、劇院、商店、健身、管理用房等功能，可容納兩萬名學生，此外因玻璃幕牆所以
是室內自然光線充足加上屋頂花園設計也可降低建築物的溫度，真是實用、環保又美
觀。 
首爾大學是韓國最有名望的高等教育機構，其前身之一是1924 年成立的京城帝國大
學，簡稱城大，是日本的第 6 所帝國大學，也是朝鮮最早的國立綜合大學，在當時設
有預科、理工學部、法文學部以及醫學部。校園內充滿古風的石砌建築就好像敘述著
其悠久的歷史，校園裡到處可見綠油油的草地，其中首爾大學美術館是韓國第一座大
學院校中所成立的大學美術館，致力於現代以及當代藝術的發展關注。首爾大學 MOA
的博物館建築是由國際知名的建築師 Rem Koolhaas(庫哈斯)所設計，美術館收藏有韓
國現代藝術近五十年的發展中具有代表性意義的作品，另外，具有活力生氣的特展以
及展覽解說的節目表，也將提供來訪的參觀者，連結韓國歷史中的豐富美學遺產，以
及從各個國家所引介的當代前衛藝術作品。在兩天的參訪中，令我應象深刻的是數位
生活體驗館，館內將韓國先進的數位科技融合 IT 產業將先進科技帶入生活中，令參訪
的民眾有如進入到未來的生活中。館內的每一項技術皆有專人以英文介紹給外籍訪
客。個人認為此館不但將先進科技介紹給韓國民眾亦成功地將韓國的先進科技傳播給
外國訪客，個人感覺受益良多。 
