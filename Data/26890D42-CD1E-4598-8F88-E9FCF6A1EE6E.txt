2譜劃分成 5 個群組，總共有 14 個 528 MHz
寬的多頻帶 (Multi-Band)如圖一所示。目前
MB-OFDM 進一步訂定一種跳頻模式，如表
一所示，模式 1允許 OFDM載波在群組 1的
3 個頻帶中跳頻，MB-OFDM 也考慮在未來
開放系統於群組 2 至群組 5 的頻帶中跳頻。
由圖二說明MB-OFDM如何在多頻帶 OFDM
系統中傳輸 OFDM符號。從圖二中可看到，
在通道 1上傳輸第一個 OFDM符號，在通道
3上傳輸第二個 OFDM符號，在通道 2上傳
輸第三個 OFDM 符號，而第四個 OFDM 符
號則在通道 1上進行傳輸，然後以此類推。
圖一 MB-OFDM之頻譜規劃
表一 MB-OFDM頻譜規劃之操作模式
模式 操作頻帶 頻帶數 強制/非強制
1 群組 1 3 強制
2 群組 1～3 7 非強制
圖二 TFI-OFDM傳送方式
圖三所示為 UWB MB-OFDM 無線通訊
系統方塊圖，本計畫依 ECMA-368規格針對
UWB MB-OFDM 無線通訊系統接收端之通
道估測(Channel Estimation)技術作深入之研
究，在多載波傳輸系統裡，資料是在子載波
中以 QPSK 調變方式傳送，並構成所謂的符
元，但由於符元傳輸的過程中，經過無線通
道時會因受到通道的干擾造成失真，由圖四
所示，我們可以發現在星狀圖上，原本傳送
符元的振幅和相位皆發生了改變，這個改變
將會嚴重影響調解時的誤碼率，因此接收端
為了處理振幅和相位的改變，把訊號做正確
的解調，我們需要採用估測通道的方法。一
般而言，為了提高通訊的可信賴度，通常會
多加入一些輔助訊號來對抗雜訊、碼際間干
擾或是多重用戶干擾。本計畫之目的是研發
接收端之通道估測演算法並以 FPGA 實現通
道估測暨干擾抑制演算法結合頻域等化器，
最後配合總計畫進行 UWB MB-OFDM 全系
統整合。希望透過此系統之製作研究，能為
國內無線業界培養無線通訊技術人才，並開
發關鍵之等化器，提昇研究發展能力及產品
設計技術等。
Convolutional
Encoder
Interleaver ConstellationMapping
IFFT
Insert Pilots
Add Prefix/GI
Time-Frequency Code
Input
Data Puncturer DACScrambler
Exp(j2πfct)
Pre-Select
FilterLNA
LPF
FEQ
Remove
Pilots
COS(2πfct)
Sin(2πfct)
LPF
VGA
VGA
ADC
ADC
AGC
De-
Scrambler
De-
Puncturer
and
Viterbi
Decoder
De-
Interleaver
Cmrrier
Phase
And
Time
Tracking
Output
Data
圖三 UWB MB-OFDM無線通訊系統方塊圖
圖四 QPSK星狀圖 (a)發射訊號 (b)接收訊
號 (c)經通道補償
三、 結果與討論
3.1  UWB接收系統之通道估測方法研究
一般使用在通道估測上之演算法有：最
大似然函數估計子 (Maximum-Likelihood
Estimator，ML Estimator) [3]、最小均方差估
4料，在很多通道估測的技術運用中都有使用
到此法去化減硬體結構的複雜性。
(2)內插法(interpolation)[10]-[13]：再傳送資料
的同時加入已知且有規則性的領航信號，此
領航信號在接收端為已知，因此接收端即利
用這些領航信號來估測通道響應，利用估測
的結果來還原出發射端的信號。雖然因為加
入多餘的領航信號會浪費掉系統的功率和頻
寬，同時也造成一些訊雜比 (Signal-to-Noise
Ratio, 簡稱 SNR)的損失，但是基於性能上的
考量，內插法是較為準確的方法，而其中是
以線性內插法為大多數系統採用的方法。圖
六所示為一階線性內插法，內插法就是一種
常用的數值逼近法。內插法通常定義為根據
二個已知值估計出中間值，例如一個函數或
序列，其中最常見的形式是線性內插法。線
性內插法在二個已知數據點間畫一條直線，
新的數據點就位於這條直線上，具體位置要
根據其值與二個端點之一的接近程度確定。
通常指標符號(即已知值)以週期性插入，現假
設間隔 v 插入一指標符號，H(k)為第 k 個中
間值，故可將一階線性內插法用下列數學式
表示：
))()(()()( nHvnH
v
nk
nHkH 
圖六 一階線性內插法
3.1.2盲蔽式通道估測法
在接收信號未知的情況下，利用所收到
的符元來做通道響應的估測，此法雖沒有領
航信號造成系統的浪費，但其估測出來的響
應值有較大的誤差，而少被實作上採用。同
調偵測是估測出每個次載波通道的絕對振幅
和相位，再利用估測出的結果對訊號做最佳
的決策。為了達到這樣的目的，有下列幾個
方法：
(1)一維通道估測法 (one-dimensional channel
estimation)：與二維通道估測法不同的是，可
以將二維的內插法拆解成二個一維的內插
法，例如：可先做每個符元中領航訊號的內
插法(頻率領域)，再做每個次載波中的內插法
(時間領域)。
(2)二維通道估測法 (two-dimensional channel
estimation)：由於無線通道會對訊號同時作時
間領域及頻率領域的衰減，因此在做通道估
測時也必須同時對時間及頻率做估測，在這
個方法中，我們先去對平均散佈在次 載波
(頻率領域)及符元(時間領域)中的領航訊號
做量測，再去做二維的內插演算法即可得到
資料符元(data symbol)經過通道後的衰減情
形。
(3)直接決策通道估測法 (decision- directed
channel estimation)：為了避免使用領航訊號
時增加傳送發射的功率，造成不必要的浪
費，在此方法中我們利用一決策回授 (decision
feedback)的方式來取代使用領航訊號，即接
收端可利用先前決策出的符元來對現在接收
的符元做估測，如此一來所有的次載波都可
用來做通道估測，但此一方法會有錯誤漫延
(error propagation)的缺點。
(4)訓練符元(training symbols)通道估測法：這
是一種專門用來對封包式 (packet-type)通訊
傳輸做通道估測的方法，因為在封包式傳輸
系統中可以假設封包長度短到足以忽略其時
間領域的通道衰減，再者，因為封包式傳輸
(如無線區域網路)不容許使用一般散射領航
訊號(scattered pilot signals)所造成數個符元
的延遲，因此使用訓練符元來做通道估測。
其中使用時間領域通道估測法可將系統效能
提升較多，但所付出的代價是較複雜的運
算，即較高的成本。
差異偵測與同調偵測相反，其並非使用
絕對的通道參數，而是在時間領域或頻率領
6圖九(b) PLCP 碼框前起頭訊號形式 (針對標
準之 TFC 1和 2)
3.1.3.1頻率領域之通道估測法
因為通道估測又可分為頻率領域與時間
領域二種方法，下面將分別進行探討。在頻
率領域執行通道估測有二種方法，第一種是
利用每一個次載波上的連續資料來做通道估
測，這種方法可以適用在無線區域網路上。
第二種是利用多重路徑通道間的相關性及在
某些次載波位置上的資料來做通道估測，這
種方法是應用在正交分頻多工的廣播系統
中，如：數位影像系統(DVB)。
(一)利用連續符元之通道估測法：
針對一個 OFDM的系統而言，通常我們
可以利用起頭訊號中設定用來做通道估測的
信號，但是每個系統的要求不同所以這些通
道估測信號的大小各數亦有不同，因此在接
收端可利用將它們平均的方式來提高通道估
測的品質，這是一個簡單而有效率，同時又
可以得到通道頻率響應的方法。為了使系統
複雜度降低，我們可以將平均的動作拿到離
散傅氏轉換(Discrete Fourier Transform,DFT)
之前，如此離散傅氏轉換只要執行一次即
可，同時因為離散傅氏轉換為線性運算，因
此將平均提前不至影響其結果。如果假設有
N 個估測信號，我們可以做下面的運算來達
成目標，令 jY ,1 , ,,,2 jY , jNY , 為接收的 N 個
通道估測符元(channel estimation symbols)經
過傅氏轉換後的訊號， jX 為發送之連續符
元， jH 為通道之頻率響應， ,i jN 為通道之可
加性雜訊，可表示成下式:
, ,i j i j i jy H X N 
因此估測之通道頻率響應可表示為
)(1
)(1
)(1
)(1
*
1
,
*
1
,
2
*
1
,
*
,,2,1
j
N
i
jij
j
N
i
jijj
j
N
j
jijj
jlNjjj
XN
N
H
XN
N
XH
XNXH
N
XYYY
N
H










 
由前文可知，用來調變長符元之序列其平均
功率為 1。且由於
,i jN 互為獨立，所以相加除
以 N之變異數(variance)為原來之 N分之一，
大幅降低雜訊對通道估測的干擾。
(二) 利用領航次載波及內插法之通道估測
法：
如數位影像廣播(DVB)系統中次載波之
間隔很靠近時，可以利用其在頻率領域上之
相關性來估測通道之頻率響應。當次載波間
隔小於同調頻寬(coherence bandwidth)時，我
們可將此相鄰之次載波通道響應視為相同。
此同調頻寬通常近似於通道脈衝響應總長的
倒數：
 
max
1BWc 
以數位影像廣播系統為例，因其不需在每個
次載波上傳送連續的領航訊號而節省下許多
頻寬可以傳送資料。它使用二種不同的領航
訊號，第一種是類似無線區域網路中有規律
定時的傳送領航訊號。第二種是平均打散在
某些固定次載波中，且間歇傳送的散射領航
訊號，並且可藉由對這些領航訊號做內插法
得到別的次載波中資料符元的通道頻率響
應。我們可以使用下列幾種內插法來估測通
道情況：(1)線性內插法(linear interpolation)，
(2)二階內插法(second order interpolation)，(3)
低通內插法(low pass interpolation)，(4)條樣三
階內插法(spline cubic interpolation)，(5)時域
內插法(time domain interpolation)。
(1)現性內插法:利用一階的線性內插方式，估
8除了上述在頻率領域求通道之頻率響應之
外，還可以在時間領域求通道是脈衝響應來
得知通道衰減的情形。在時間領域做通道估
測也是在接收之 N個通道估測符元做離散傅
氏轉換之前，可表示成下式
jjj nXhy ,1,1 * 
其中 jx 可以用矩陣表示為














11
312
21
MLLL
ML
MLL
xxx
xxx
xxx
X




其中參數 M 代表可估測之最大脈衝響應長
度，參數 L 代表 IFFT 與 FFT 之點數。通道
之脈衝響應可表示為










M
M
h
h
h
h
1
1

因此，在時間領域做迴旋積(convolution)可表
示為
jjjj wXhnXhy  ,1,1 *
估測之通道脈衝響應為
)(1
)(1
)(1
)(1
1
1
1
,,2,1














N
i
i
N
i
i
N
i
i
lNjj
nX
N
h
nX
N
XhX
nHhX
N
yyyX
N
h 
再經過離散傅氏轉換可得無線通道之頻率響
應 


  hDFTH
3.1.3.3頻域與時域通道估測方法之比較
由上述我們可以知道，當通道之最大脈衝響
應長度 M小於所有次載波的數目時，使用時
間領域通道估測將可以增進系統的效能。因
為頻率領域通道估測法必須同時地對 j 個次
載波(即所有次載波)做估測，但是時間領域通
道估測法只需對通道脈衝響應的延遲數 (taps)
做估測即可。時間領域通道估測法的缺點是
需要額外的運算複雜度。由數學式
)(1
,,2,1 lNjj yyyXN
h  
中可看出，時域通道估測是執行距陣運算，
因此比頻率領域通道估測法多出了 L．M 次
的乘法運算，這些在頻域運算中是不需要
的，因此，這又是高系統效能與高成本的妥
協。
3.1.4實驗結果
我們結合總計畫所提供之 UWB 測試平台，
並將根據 IEEE 802.15.3a 所提出的通道模型
CM1~CM4 模擬 UWB 真實環境，其參數設
定見表二，並使用 MATLAB/SIMULINK 建
立出各項通道參數進行模擬分析，且規劃設
計 FPGA 實現模擬通道之硬體架構。如圖十
二所示為模擬真實環境之 CM1~CM4 通道響
應(Channel Response)。由圖十三所示可知當
信號經由通道傳送後，受到通道的干擾而造
成失真，並改變其振幅與相位，這個改變將
會嚴重影響調解時的誤碼率，為了能正確的
解調與實現簡單且低成本的通道估測，由於
QPSK 不需要對振幅做補償，因此我們採用
如圖十四所示通道估測之架構，此通道估測
之架構並未對每一個頻道中的振幅變動做補
償動作；經由通道估測做相位之補償後，其
信號為圖十五所示。
表二 UWB通道模型參數及其測量比較
rget channel characteristics SV-1 SV-2 SV-3 SV-4
Mean excess delay
(nsec)(τm)
5.05 10.38 14.18
RMS delay (nsec) (τrms) 5.28 8.03 14.28 25
NP10dB 35
NP (85%) 24 36.1 61.54
10
圖十五 相位補償後之訊號
3.1.5通道估測演算法之硬體設計
圖九顯示UWB 標準中的PLCP preamble 內
包含六個相同長度的通道估測符元 (CE0 ,
CE1 , CE2 ,…, CE5 )，在接收端可用來做通道
估測。並以平均的方式來提高估測的品質。
這是一個簡單而有效率，同時又可以得到通
道頻率響應的方法，圖十六為通道估測演算
法之硬體架構，前三個通道估測符元 (CE0 ,
CE1 , CE2 )先存入隨機存取記憶體 (Random
Access Memory, RAM)中，當計數器(Counter)
數到後三個通道估測符元(CE3 , CE4 , CE5)進
入時，將原本存在RAM中的通道估測符元取
出作平均，並將平均後的值與存在唯讀記憶
體(Read Only Memory, ROM)中的通道估測
頻域訓練序列共軛相乘，即可估測出每個頻
帶的通道頻率響應，隨後只需將估測出的通
道頻率響應經由查表的方式取出其角度存入
RAM中，再依照不同的頻帶從RAM中取出對
應的通道頻率響應補償資料符元。圖十七顯
示資料率200 Mbps 與CM1 通道下，只考量
通道影響時UWB系統的效能(以BER表示)，
當SNR大於7 dB 時達到標準所規定之效
能。圖十八顯示相同條件，模擬通道估測演
算法的效能(以MSE表示)，MSE 如預期隨著
SNR 的增加而下降。
圖十六 通道估測硬體架構圖
圖十七 UWB系統的通道估測效能
圖十八 模擬通道估測演算法的效能
3.1.6通道估測演算法之硬體模擬
本計畫先以 MATLAB 軟體驗證我們所
建立的通道估測演算法之正確性，再配合數
位資料產生器 (HP81200)與邏輯分析儀
(HP1664)，透過 Xilinx FPGA 發展板(控制/
運算核心晶片為 xc4vlx200-10ff1513)進行硬
BER
BER
