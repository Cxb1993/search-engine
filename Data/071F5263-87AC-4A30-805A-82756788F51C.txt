 1
中文摘要： 
本計畫第一年的執行將以目前的快速道
路車道偵測演算法為基礎，延伸至市區複雜道
路之車道偵測之外，更進一步開發對向車道車
頭燈偵測技術，尤其是當雙向車輛都緊臨著雙
黃線行駛時，能夠整合車道線資訊，避免因為
超越雙黃線而產生的碰撞。同時，將建立一個
嵌入式的平台，除了將相關資訊提供總計畫平
台以外，亦將提供車道偏移量以及與對向車輛
產生碰撞危險之資訊予總計畫，完成行車安全
輔助之功能。 
市區道路由於較不平整，車道中亦包含許
多文字，同時因為車輛密度高，車道線被車輛
遮蔽情形也相當嚴重，如何運用影像技術來估
測車道線成為了努力的目標。針對市區道路複
雜度分析，可分為影子遮蔽、道路中文字參
雜、路標線不完整、以及有障礙物遮蔽之情。
車道被影子覆蓋，會改變車道線的整體亮度資
訊，道路中文字參雜則是車道線邊緣偵測的嚴
重干擾源，有障礙物遮蔽車道線則是更加提高
了偵測的複雜度。 
在對向車輛車頭燈偵測部份，由於在夜間
的車輛在影像上特性，以具有光源之物件特徵
最為明顯，車輛一般會擁有成對之頭燈，在夜
間的正面道路連續影像拍攝中，這些燈光的移
動尤其明顯，因此我們可以針對此車燈特性加
以擷取分析，我們在這個研究中開發了一個以
多重門檻值為基礎的明亮物件切割技術。 
 
關鍵字：行車安全輔助、車道線偵測、車頭燈
偵測、影像偵測 
英文摘要： 
This project focuses on the development of 
real time vision processing and recognition of 
image coming from the CCD cameras installed 
in vehicles. The image information includes the 
lanes, the head and tail lights, and the road signs, 
which can provide the other subprojects to 
achieve the goals of the main project. The 
technologies developed in this project play the 
role of the driving assistant to keep the 
dangerous driving behavior off. For this issue, 
the lane, head and tail light, and the road sign 
information will be processed and transferred to 
the related subprojects to realize the scheduled 
achievements of the main project, an Intelligent 
Safety and Comfortable Driving System. 
The image detection and recognition will be 
studied year by year. The real-time head-light 
recognition will be completed and integrated 
with lane detection. The work in the second year 
will focus on the tail-light detection and the lane 
detection on the rainy day. The road sign 
detection and the adaptive lane detection study 
will be accomplished in the last year. 
前言： 
隨著工業的進步，已開發國家的人民皆擁
有個人的私人車輛，而開發中的國家也有眾多
的公共運輸車輛，隨之演變而來的問題即是行
車安全問題。大部分的事故發生皆由人為因素
所引起，而疲勞與分心則是主要的原因。雖然
瞌睡偵測、腦電波等相關研究都致力於提醒駕
駛員，但是其效果並非相當令人滿意；加上系
統的反應時間以及系統成本因素，無法全面普
及。 
近年來，搭配 CCD 攝影機而發展之高效
率影像處理技術正蓬勃發展。主要原因在於軟
體撰寫的彈性、CCD 攝影機架設的彈性、CCD
攝影機所擷取之資料多元化以及成本不高等
優勢，以汽車安全輔助配備來看，超音波雷達
在過去的汽車安全防護上，廣泛運用，然，有
效距離有限，只能協助駕駛員在倒車時，給予
距離資訊的參考。影像的應用其實也有，不過
目前僅僅侷限於影像監視的功能上，例如倒車
 3
  各項功能簡介如下: 
1. CPU 運算核心 
此方塊圖中央 DSP 核心，其整體的工作
時脈可達 600MHz，指令集架構屬於 C6000 系
列，其特殊之處為針對多媒體處理所設計的，
內建 video port 可以有效的處理即時的影像資
訊。 
 
2. Memory 容量 
本發展平台中內建 32M Bytes 以應付大
量的資料，此記憶體屬於外部記憶體，工作時
脈僅有 133MHz。另外，擁有 256K Bytes 做為
內部記憶體之使用，以及 4M Bytes 的 Flash 可
供開發完成程式燒錄之用。 
 
3. Video input/output 
整個發展平台中，周邊配置兩組視訊輸入
接孔可直接外接 CCD 或一般視訊輸入設備直
接使用，因此不需再額外作電路。在輸出方
面，尚有三組不同型態的輸出接口。本計畫採
用一般常見的 S-video 接孔作為輸出與輸入之
使用。 
 
4. GPIO 
針對警示功能的展現，本研究採用 GPIO
做為警示訊號的輸出，相較於 RS-232，GPIO
擁有直接輸出訊號功能而不需額外的電路輔
助。此平台中，雖僅擁有兩支輸入以及兩隻輸
出，對於警示之用而言相當足夠。 
 
5. JTAG 
利用 JTAG 我們可以直接做線上偵錯之
用，可以有效減低開發時間。一般的個人電腦
其性能相當優異，並且內建作業系統，無論是
在處理資料或是週邊的應用方面皆相當便
利。然而在 DSP 系統方面，除了不具備作業
系統外，其周邊功能之應用皆須程式設計師自
行規劃，也因此系統之資源分配全仰賴設計者
的規劃。 
 
2. 車道線偵測演算法： 
由於車道線偵測必須在影像座標上進
行，因此，實際的世界座標(world space)必須
先轉換成影像座標，兩個座標的關係如圖三所
示。表二為演算法中所需之參數定義說明。 
 
圖三、世界座標與影像座標轉換圖 
表二、車道線偵測演算法參數表 
u 影像平面之橫座標 
v 影像平面之縱座標 
ue  Pixel 寬度與焦距之比值
ve  Pixel 高度與焦距之比值
H 攝影機架設高度 
k, m, b 道路模型之參數 
θm  路面斜率 
W 實際道路寬度 
x, y, z 世界座標軸 
 
藉由座標轉換，我們在世界座標以及影像
座標之間，可以推導出式(1)與式(2)。為了使
道路的偵測更為穩健，我們首先將道路近似成
一個參數化的二次曲線模型，如式(3)所示，因
此道路偵測的問題變成一個決定參數(k．m．
b)的問題，一旦(k．m．b)決定之後，道路的趨
勢也隨之決定。其中參數的初始定義如式(4)
所示。 
u
xu e
y
=            (1) 
v
z Hv e
y
−=          (2) 
2x k y m y b= ⋅ + ⋅ +       (3) 
  
[ ]1 600,1 600k ∈ −  
( ) ( )tan 0.09 , tan 0.09m ⎡ ⎤∈ −⎣ ⎦     (4) 
[ ]0.35,0.35b∈ −  
 
因為我們是在影像座標中偵測標線，因
 5
 
圖六、車道邊線偵測流程 
 
我們同時估算出下列三項參數:  
 車體與白線之車道兩側距離( Ly )。 
 行進路線斜率( Lε )。 
 車道曲率( Lρ )。 
此三項參數的定義，如圖七所示， Ly 、
Lε 、以及 Lρ 則透過演算法的設計，估算輸出，
提供車輛防偏系統作警示功能的判定。其中，
Ly 、 Lε 、 Lρ 的計算位置參考點，我們設定在
車輛前方 10 公尺處。 
 
Ly
1
Lρ
V
Lε
L
fδ
行進路線斜率
車道曲率
車體偏移量
圖
七、車輛偏移參數定義 
3. 車燈辨識演算法： 
本計畫提出了一個針對夜間行車駕駛輔
助 (driver assistance) 與 車 輛 自 動 化 駕 駛
(autonomous vehicle)需求的智慧型高速夜間車
輛偵測與辨識系統。該系統透過 CCD 影像擷
取設備[9-12]，結合電腦視覺處理技術，以實
現夜間車輛偵測、相對位置與距離判定、車輛
標定與追蹤，並以此輔助駕駛獲得前方之交通
狀況資訊。這套夜間車輛偵測與辨識系統，透
過裝設在擋風玻璃後方的 CCD 視訊擷取系
統，可以精確的偵測車輛前方可視範圍內的交
通狀況，辨識對向車道來車(oncoming vehicle)
車頭燈、與本車道之前車(preceding vehicle)車
尾燈，以及判斷標定各前車與來車之相對位置
與車輛數目，以此協助駕駛判斷交通狀況，並
提供了一個良好的機制以操控車上的相關裝
置設備，如車頭燈之遠光燈(high-beams)與近
光燈(low-beams)之智慧型切換機制。 
這個演算法主要由以下之處理單元所組
成： 
1. 夜間光源物件影像切割程序 
2. 光源物件之空間標定與分類聚合處理與
分析 
3. 車燈物件標定與辨識位 
4. 車輛真實空間距離與位置判定 
5. 車輛標定追蹤 
其整體處理之流程與架構如圖八所示。首
先，我們使用一套可自動對於各種不同夜間照
明狀況，以適應性統計分析模型，對於視覺系
統擷取之影像，施以最佳化的明亮光源物件切
割與萃取程序；接下來，將所獲得之二值化明
亮物件平面之像素，進行光源物件分類標定處
理，這個物件分類標定程序，先使用連通物件
分析，以將各個夜間的光源物體之間之關連特
性進行進一步的歸類與聚合，將具有同質關連
特性之光源物件聚合並標定成各個有意義的
群組；接著，則從這些光源物件群組中，使用
一個以型態分析方法，判斷其是否具有車輛車
 7
 
 夜晚橋面彎道：在晚上狀態時，雖然燈光
有影響但是依然可以抓取到彎曲之車道線 
 
 夜晚橋面(燈光充足)：在夜晚行經有標線字
之橋面車道時，並不受到標字干擾 
 
 夜晚橋面(光線不足)：在夜晚行經有標線字
之橋面車道且路面燈光輕微不均勻時，並
不受到標字及燈光干擾  
 
    圖九為實路測試的車內狀況，DSP 系統設
置於車輛中控台上方。當系統偵測到車輛發生
車道偏離的狀況時，以聲響與燈號警示駕駛
員，避免駕駛員因為分心或是精神狀態不好而
發生意外，如圖十所示。 
 
圖九、實路測試的車內狀況 
 
圖十、車道發生偏離 
 
2. 嵌入式車道線偵測與警示系統： 
本系統所提出之系統主要包含了以下功
能與特色： 
 在本身車輛前方的可視範圍內，偵測辨識
對向車道來車(oncoming vehicle)、與同向
車道上的前行車輛(preceding vehicle)[7-8]。 
 判斷標定在前方路況中所出現各車輛與本
身車輛之距離、相對空間位置、運動方向、
與相對速度等交通資訊，以輔助駕駛正確
判斷去分析車輛前方道路之交通狀況。 
 可在各種不同的不良夜間道路照明狀態
下，皆能正確有效的標定與辨識前方路上
的來車與前行車，進而正確的提供輔助駕
駛解析車輛前方之交通狀況之資訊。 
 提供一個有效的機制，以自動操控車上的
相關裝置設備，如車頭燈之遠光燈與近光
燈之切換等。 
 其運用於車輛頭燈的遠近光燈控制上，可
以在偵測判斷前方車道的交通狀況時，自
動將車輛頭燈之遠光燈與近光燈調整至最
佳狀態，如偵測到車輛時，即切換為近光
燈，防止炫光而影響前方來車駕駛視線，
避免因為來車之遠光燈近距離照射而造成
目眩所困擾而導致之車禍危險性。 
 
本系統裝載於 Pentium IV 3.2 GHz 與 1 
GB RAM 記憶體之準系統上運作，而 CCD 影
像擷取裝置所獲得的視訊影像為 640×480 解
析度，對於每一幅由 CCD 擷取輸入之路況影
像，平均僅需使用 16 毫秒之處理時間，完全
可以滿足於每秒 30 幅輸入影像之即時視訊處
理之要求。實測結果範例如圖十一至圖十三所
示。由圖十三可發現，當前方道路上有分別有
DSP 平台 
