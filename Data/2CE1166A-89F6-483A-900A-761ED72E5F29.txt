1 
行政院國家科學委員會專題研究計畫成果報告 
藉由控制地區精煉和錯誤恢復到達更多的狀態                              
計 畫 編 號：NSC 98-2221-E-004-004- 
執 行 期 限：98 年 8 月 1 日 至 99 年 9 月 30 日 
主 持 人：趙玉 政治大學資管系 
共同主持人： 
計畫參與人員：  
一、中文摘要 
我們報告著名的FMS 的另一控制模型到達與文獻內最
好的Uzam 等等( 基於區域的理論和 reachability 
有分析受狀態爆炸問題之苦)相同的好狀態的數量。但
是有更少的控制器和控制 電弧借著以精煉一些控制
器到幾個， 在綜合的更晚的階段，與更小的控制區。 
因為控制地區 被較少擾亂，所以更多的狀態可以被達
到，借著只包括一個亞區裡一個地方⎯在任何可以達到 
的狀態一個亞區裡只有一個地方被標明的。 因此， 控
制區比補充虹吸管小，這不過，可能引起這只虹吸管
在綜合的起初時期變得未含標記。 我們發展一個正式
的理論解決兩難。但是，可以達到的狀態的數量， 比
最佳的仍然更少，在最壞例子中要求的控制器的數量
仍然可能是指數的， 新成問題的虹吸管可能被控制器
產生並且引起更多的控制器被增加。 地區理論以Uzam 
等等 能在所有方法中間達到最多狀態的數量。 我們
更進一步提議運用僵局恢復透過增加控制器(並且控
制電弧)到達與原先的未受控制的模型相同的狀態的
數量⎯類似於預防方法。 因此，它是一種靜止的方法
並且迅速地運轉。 當一只成問題的虹吸管到達臨界狀
態時，一次事件將被起動返回一個以前的狀態； 如此
從一個僵局中恢復。 與所有方法(包括Uzam 等的方法)
相比較，因此它更許可。 更進一步，沒有新成問題的
虹吸管由於增加的控制器被產生。 因此,與其他方法
( 也Uzam 等等) 比較,需要更少的控制器。 它已經適
用於一個著名的例子。 我們進一步研究發展正式的理
論並且把它延長到任意的S3PR和更錯綜複雜的RAS(例
如ES3PR，S2LSPR 和S3PMR)。 
 
關鍵詞:Petri網，僵局， 控制，虹吸管，最
佳化 
Abstract 
We reported an alternative control model of a well-known FMS 
to reach the same number of good states as that by Uzam et al. 
(based on the theory of regions and reachability analysis 
suffering from the state explosion problem) ⎯ the best in the 
literature⎯ but with fewer monitors and control arcs by refining 
some monitors into several, in the later stages of the synthesis, 
with smaller controller regions. More states can be reached since 
the controller region is less disturbed by covering only a place in 
a subregion where only one place is marked at any reachable 
marking. As a result, the controller region is smaller than the 
complementary siphon, which, however, may cause the siphon 
to become unmarked in the initial stages of the synthesis. We 
develop a formal theory to resolve the dilemma. The number of 
reachable states, however, is still fewer than the optimal one and 
the number of monitors required in the worst case may still be 
exponential since new problematic siphons may be 
generated by the monitors and cause more monitors to be 
added. The region theory by Uzam et al. can reach the 
most number of states among all approaches. We further 
employ deadlock recovery to reach the same number of 
states as the original uncontrolled model by adding 
monitors (and control arcs) similar to the prevention 
approach. Thus, it is a static approach and runs fast. When 
a problematic siphon reaches a critical state, an event will 
be initiated to return to a previous state; thus recovering 
from a deadlock. Hence it is more permissive than all 
current, including that by Uzam et al., approaches. Further, 
no new problematic siphons are generated due to added 
3 
avoid new SMS generation (and the associated control 
elements).  However, it may be that all dependent siphons 
are derived before any elementary siphon in the worst case.  
In this case, all SMS may need monitors.  Further, MIP is 
NP-hard and in the worst case, the time complexity is 
exponential and time-consuming.  Also, the number of 
good states for the well-known S
3
PR is only 15999, less 
than the best one, 21562 in [4]. Hence, it is desired to 
reduce the number of MIP iterations as many as possible 
while making it maximally permissive; i.e., maximizing the 
number of good states.   
      To do so, the original uncontrolled model should be 
disturbed as little as possible and each strict minimal 
siphons (SMS) S be allowed to reach its limit state; i.e., min 
M(S)=1.  Even though this policy may generate new SMS, 
many of them are redundant and need no control places and 
arcs. 
In an earlier paper [7], we propose to synthesize 
elementary (dependent) siphons from resource (I) circuits. 
They are also called basic (compound) siphons. Several 
basic siphons make up a compound siphon. We proposed to 
add monitors to each basic siphon built from elementary 
resource circuits [8] and find conditions for a compound 
siphon built from compound resource circuits to be already 
controlled.  We showed that if we assign monitors to basic 
siphons first, then many compound siphons (all but S15 for 
the above example discussed) are already controlled and 
need no monitors. The converse is not true; even though a 
compound siphon is controlled; all basic siphons remain 
uncontrolled and need monitors for each of them. 
We have directed output arcs of a control place related to 
a minimal siphon S to the sink transitions of S to disturb 
the original uncontrolled model as little as possible to 
maximize the number of good states.  
However, the resulting model reaches less (21363) states 
than the one (21562 in [4], but with 11 monitors and 50 
control arcs less than 19 monitors and 120 control arcs 
reported in [4]. 
However the best number (21562) of reachable states 
is still fewer than the optimal (21581). This proposal 
employs deadlock recovery to reach the same number of 
states as the original uncontrolled model by adding 
monitors (and control arcs) similar to the prevention 
approach. When a problematic siphon reaches a critical 
state, an event will be initiated to return to a previous state; 
thus recovering from a deadlock. Hence it is more 
permissive than all current, including that by Uzam et al., 
approaches. Further, it does not generate new problematic 
siphons. Thus, fewer monitors are required than other 
(also Uzam et al.) approaches. 
This work proposes to extend it to other S
3
PR and more 
complicated RAS such as ES
3
PR, S
2
LSPR, and S
3
PMR as 
well. 
三、Results 
The approach [9] improves the MIP test by adding 
monitors to each basic siphon and finding conditions for a 
compound siphon to be already controlled.  Afterwards, 
one may start the traditional MIP test. This 1) relieves the 
problem of siphon enumeration since the number of 
problematic siphons grows exponentially, 2) reduces the 
number of time-consuming mixed integer programming 
(MIP) iterations, 3) avoids the need to rearrange control 
arcs, 4) avoids the state-space explosion using 
reachability analysis, 5) reduces the number of monitors 
relative to that in [4], and 6) reaches more number of 
states than the two-stage approach [5]. 
Furthermore, we propose an approach (taking less 
computation time than the one in [4] since no reachability 
analysis is required) to reach the same number of states as 
the near optimal model in [4] for a well-known S
3
PR. This 
is achieved by refining one monitor into three with 
smaller controller regions. The same idea can be extended 
to more complicated resource allocated systems such as 
ES3PR, S2LSPR, and S3PMR as well. 
We [10] have proposed a recovery policy with the 
advantage to reach as many states as the uncontrolled 
model (never achieved before in the literature) and yet 
using fewer monitors. This approach, however, suffers 
from material loss by aborting some operation. We further 
5 
 
98年度專題研究計畫研究成果彙整表 
計畫主持人：趙玉 計畫編號：98-2221-E-004-004- 
計畫名稱：藉由控制地區精煉和錯誤恢復到達更多的狀態 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 2 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
 
