基於熱感影像之行人方位與距離量測
摘要：
本研究提出一種行人距離與方法估算的方法，藉由行人在熱感影像中的呈
像，來估算其與熱感攝影機之間的相對方位與距離。本研究分為兩個步驟：行人
區塊的偵測與方位、距離的估算。行人方位的估算是以熱感影像中行人區塊的位
置來估算，而距離則是以行人區域的大小來估算。實驗結果顯示所本研究提出的
方法可以準確的算出目標物與攝影機之間的方位，並估算出目標物與攝影機之間
的距離。本研究可應用於夜間監視系統、智慧型駕駛輔助系統、夜視型自動巡邏
機器人等。
關鍵字：行人偵測、距離估算、夜間監視
1.簡介：
電腦視覺應用於安全保全或監視系統已日益廣泛，例如目前社區、學校、社
區、大樓等處處皆可看到攝影機的存在，而相關的研究也都相當的完備[1]。然
而一般的攝影機皆需有足夠的光源方能有效的取得影像，若是攝影機所在之光源
不足，即無法有效的取得影像，而一般越是光線不足的地方則更有可能是危險的
區域，越是須要監視，因此近年來近紅外線攝影機亦普遍的被應用於監視系統
[2]。
然而近紅外線攝影機亦需要以紅外光為輔助光源且取像距離有限，所以近年
來熱感影像攝影機已經逐漸且廣泛的應用到一些安全需求比較高的區域，這種熱
感影像攝影機可藉由物體本身所散發出來的熱來取得物體的影像[3]，且有效距
離可以遠達 1000 呎以外，可用於軍事用途、夜間駕駛輔助、及需要高度警戒的
區域，在本研究中則應用於夜視型校園巡邏機器人上。
由於夜視型校園巡邏機器人需巡邏於校園各處，而在校園中各個區域的光線
不一，甚至有些地方是光線不足的，因此我們無法使用一般攝影機來取得每一個
區域清楚地影像，而影響機器人的工作，因此在本研究中，我們使用不需任何輔
助光線的熱感影像攝影機來做為取像的工具，以確保機器人可以在校園任何區域
中都可以偵測出可疑的目標物(行人)。
在前景物的擷取方面目前常用的有背景相減物(background subtraction) [4]、
連續影像相減法(temporal differencing) [5]、模型比對(model matching) [6]等方
式，由於背景相減法與連續影像相減法，一般都是在攝影機固定不動的情況下，
我們比較容易去建立背景影像，然後使用背景相減法來取得前景物。或是利用連
續兩張影像的差異來取得前景物。這對於架設於活動載具(機器人)上的攝影機所
取得的影像並不適用。
在本研究我們使用雙門檻值(Dual Thresholds)去取得前景物可能的區域[7]，
度(h)是已知的條件下，如果我們可以由影像中算出攝影機與目標物的夾角(α)則
可以得到攝影機與目標物間的距離(d)，如(1)式所示。
hαThermal
Camera
d
圖 1. 攝影機與目標物之間的距離與目標物高度關係圖
2
tan
2/

h
d  (1)
αβ
Thermal
Camera
nv
nh
圖 3. 攝影機與目標物之間的夾角關係
攝影機與目標物之間的夾角(α)與攝影機的垂直視角(β)之關係，如圖 3.所
示，而攝影機的垂直解析度 nv 與目標物在影像中所呈像的垂直像素數 nh 之關係
如(2)式所示。再根據(2)式，我們可以求得攝影機與目標物之間的夾角(α)，如(3)
式所示。
2/
2/
2
tan
2
tan
v
h
n
n

， (2)
)
2
(tantan
2
1
v
h
n
n   。 (3)
將(2)式代入(1)式，可以得到目標物與攝影機之間的距離(d)如(4)式所示，亦
即只要我們知道目標物的高度、攝影機的垂直視角、攝影機的解析度、及目標物
呈現於影像中的高度(垂直像素數)，即可求得目標物與攝影機之間的距離。
v
h
n
n
h
d


2
tan
2/
 ， (4)
此處：β為攝影機的垂直視角；
h 為目標物的高度；
nh 為目標物呈像在影像中的垂直高度(像素數)；
與攝影機之間的相對角度(αs)。
在本研究中目標物中心點的座標，是以目標物的重心(Ox,Oy)座標為主，其
中水平座標(Ox)為：

 
),(
),(
yxf
yxfx
Ox ， (7)
此處：


 
otherwise,0
),(if,1
),(
objectyxf
yxf
同理目標物之垂直座標(Oy)為

 
),(
),(
yxf
yxfy
Ox ， (8)
而計算目標物與攝影機之間的方位，只需用到目標物的水平座標(Ox)即可。目
標物中心點與影像水平中心線的偏移距離(ns)為
2/wxs nOn  ， (9)
5.實驗結果：
本研究使用之影感影像攝影機為 FLIR SR-19 遠紅外線熱感影像攝影機，取
像卡為 ADLINE-RTV24，使用軟體發展環境為 Borland C++ Builder 6.0。攝影機
之規格如表 1 所示：
Table 1. FLIR SR-19 攝影機之規格
名稱 規格
感測器解析度 320×240 像素
視野角度 36°（水平）× 27°（垂直）
電子變焦 2 倍
工作溫度範圍 -32°C 至＋55°C
電源要求 14-32VDC 或 24VAC＋／-10％
由表 1.中得知，攝影機的水平解析度 nw 為 320，垂直解析度 nv 為 240，垂
直視角βv 為 27°，水平視角βh 為 36°。
5.1 行人與目標物距離的估算
本實驗在行人身高已知的情況下，利用行人在影像中的垂直高度來計算目
標物與攝影機之間的距離，如圖 5.(a)為熱感影像攝影機所拍攝之原始影像，經
前置處理(包括二值化、closing、opening)後，可以得到圖 5.(b)之前景物，最後
由表 2.中行人與攝影機相距 7 公尺的情況下，測得的距離為 7.12 公尺，得
到最大誤差 3 公分，誤差率為-1.66%。其他測得距離誤差皆小於-1.66％，由此
我們可以看出在已知行人高度的情況下，本研究可以準確的測得行人與攝影機
之間的距離。
由於在一般條件下，我們無法得知行人真正的身高，因此在本研究中，以
台灣地區成人的平均身高做為目標物的高度(h)。在台灣男性平均身高為 171.5
公分，女性為 159.5 公分，其平均值 165.5 公分，做為本研究待測目標物之高度。
表 3. 身高 161 公分之行人量測結果
實際距離
(m)
垂直高度
(Pixel)
測得距離
(m)
誤差率
(%)
4 201 4.12 2.89%
5 159 5.20 4.05%
6 133 6.22 3.66%
7 114 7.26 3.66%
8 99 8.36 4.45%
9 88 9.40 4.45%
10 79 10.47 4.71%
表 4. 身高 177 公分之行人量測結果
實際距離
(m)
垂直高度
(Pixel)
測得距離
(m)
誤差率
(%)
4 220 3.76 -6.00%
5 176 4.70 -6.00%
6 147 5.63 -6.21%
7 127 6.51 -6.95%
8 110 7.52 -6.00%
9 98 8.44 -6.21%
10 88 9.40 -6.00%
由於以國人身高之平均值做為待測目標物之高度，雖然因行人實際身高的
不同而會導致距離估算的誤差，但此估算結果仍可做為重要的參考。如表 3.是
一個身高 161 公分行人在不同的位置所量測之結果，而表 4.則是一位身高 177
公分行人所做的量測結果。
5.2 目標物之方位量測
圖 8. 影像平面雷達的顯示結果
圖 8.下方方格部份為目標物標示區，紅色點代表目標物，所以由圖中可以
清楚看到，在攝影機左前方約 3 公尺 5°角(標示為 11°)的位置有一行人；而在
正右前方約 8 公尺 1°角(標示為 19°)也有一行人；另外在約在右前方 9 公尺 6°
角位置也有另外一個行人。而根據這些結果，在本研究之夜間校園巡邏機器人，
即可依據行人與機器人的遠近關係及方位，做必要的判斷與處理，這對於整個
校園巡邏的安全性將有所提高。
6. 結論
本研究提出一種行人方位與距離量測的方法，藉由行人在熱感影像所呈像
的位置來量測行人與攝影機之間的相對方位，並藉由影像中的行人大小來估算
行人與攝影機之間的距離。由實驗結果可以得知雖然因每位行人的身高有所不
同，而可能導致距離量測上的誤差，但量測的結果仍可做為機器人判斷前方行
人的依據，或是其他用途，如駕駛安全輔助系統之用。
參考文獻
[1] J. Rajamaki, P. Rathod, A. Ahlgren, J. Aho, M. Takari, and S. Ahlgren,
“Resilience of Cyber-physical System A Case Study of Safe School
Environment,” in 2012 European , Odense, Denmark, pp.285, 22-24 Aug. 2012.
[2] J. Ge, Y. Luo, and G. Tei “Real-Time Pedestrian Detection and Tracking at
Nighttime for Driver-Assistance Systems,” IEEE Intelligent Transportation
Systems Society (ITSS), St. Louis, Missouri, U.S.A, vol.10, pp.283-298, 3-7 Oct.
國科會補助計畫衍生研發成果推廣資料表
日期:2012/10/30
國科會補助計畫
計畫名稱: 子計畫五：夜間熱感影像之行人偵測及追蹤之研究(II)
計畫主持人: 張祥利
計畫編號: 100-2221-E-129-006- 學門領域: 智慧型控制
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
