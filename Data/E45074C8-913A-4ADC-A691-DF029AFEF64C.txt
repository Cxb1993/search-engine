 2
中英文摘要 
以下分別列出每一年所完成的研究項目的中英文摘要 
第一年：LTCC spiral inductor synthesis and optimization 
在射頻及微波頻段，電感的設計及最佳化一直都是一件非常耗時的工作，設計者需要
使用電磁軟體在尺寸及所需的電感值之間多次的試誤､調整，才能得到一個滿意的設計。 
我們提出一個使用 PEEC 為基礎的電感計算引擎，配合非線性的最佳化方法，可以快
速合成及最佳化電感。經由此軟體所計算出的感值及 Q 值於實際量測及商用電磁模擬軟體
相當一致，但只需約百分之一的時間。 
關鍵字: 電感 合成與最佳化 低溫共燒陶瓷 
 
In RF/microwave circuit design, inductor design is one of the most difficult and 
time-consuming tasks due to the tedious trial-and-error optimization process to achieve the target 
specifications. 
This report brings forward a fast and accurate spiral inductor synthesis method, which 
automatically generates physical layout of inductors according to electrical specifications. This 
method is based on the fusion of substrate-aware PEEC model with optimal nonlinear 
optimization engine. Calculated inductance and Q values show good agreement with industrial 
field solver and measurement results. 
 
Keyword: Inductor, synthesis, optimization, LTCC.  
 
第二年：Schematic extraction from layout of microwave multi-layer circuits 
本論文提出可以自多層微波電路佈局中擷取出自感，耦合電感及電容的演算法，並由
此產生電路圖。此步驟為自動化佈局對電路檢查的第一個步驟。自動化的佈局對電路檢查
器將可協助設計者找出佈局中可能的錯誤的位置。我們將此演算法應用於一個實際的帶通
濾波器，發現確實可以由佈局圖中擷取出各個元件，並得到正確的電路圖。 
關鍵字：低溫共燒陶瓷、晶片系統封裝、佈局、佈局對電路檢查 
 
As the layout in multilayer substrate such as LTCC becomes more complex, the 
verification of the final layout against the designed schematic becomes more important. This 
paper presents algorithms that can extract the inductors, coupled inductors and capacitors and 
then generate the schematic from layout of microwave multilayer circuits. This is the first 
 4
目錄 
1 前言與研究目的 .................................................................................................. 5 
2 LTCC spiral inductor synthesis and optimization .............................................. 10 
3 Schematic extraction from layout of microwave multi-layer circuits ................ 19 
4 Lump devices mapping between designer’s schematic and layout extracted 
schematic in microwave frequency .................................................................... 24 
5 結果與討論（含結論與建議） ........................................................................ 32 
6 計畫成果自評 .................................................................................................... 33 
7 已發表論文列表 ................................................................................................ 34 
 6
 
圖 2: 晶片系統封裝包含 3 維封裝、微機電元件及光電元件1 
 
而隨著晶片製程逐漸走向奈米等級，射頻的部份性能越來越好，以往需要使用到
GaAs 等較昂貴製程才能製作出來的高頻或是微波元件，CMOS 開始也有機會可以製作
出來，並能進一步與數位與類比的部份進行整合，而達到更好的性能與更低的成本。
但是由於晶片內部尺寸及矽材質本身特性的限制，一些高頻或是微波元件並不適合放
在晶片中，而較適合放在封裝的基板中。 
對於高頻或是微波電路而言，需要用到許多的被動元件，如電容、電感、電阻及傳
輸線等被動元件，除此之外還需要由這些來設計出濾波器、耦合器、多工器(diplexer)
及切換開關等元件。目前市面上已經有一些適合用來進行 RF-SoP 的多層介質材料，如
低溫共燒陶瓷 (Low Temperature Cofired Ceramics, LTCC)2，液晶高分子(Liquid Crystal 
Polymer, LCP)3或是適合在 wafer level packaging (WLP)使用的 Benzocyclobutene (BCB)4
它們基本上在微波頻段有相當低的損耗，也都能提供多層的疊合，上下層的貫通孔
(via)，提供了電路設計者更大的自由度來設計電路，以將更多的被動電路整合到封裝基
材中，也已經有不少的電路是應用這些製程來設計。由於 LTCC 相較於其他製程，可
以提供相當高的層數，同時高頻的特性也相當不錯，製作的價格上也還算合理，因此
我們以 LTCC 製程上的電路為研究對象。 
LTCC 是低溫共燒陶瓷 (Low Temperature Cofired Ceramics)，其簡要製程如圖 3 所
示，先將生陶瓷坏片攤平，打貫穿孔，並將貫穿孔填滿導體後，以網印的方式將銅或
                                                 
1 Tummala, R.R., “Moore's law meets its match (system-on-package),” IEEE Spectrum, vol. 43, no. 6, pp. 44-49-78, 
June 2006. 
2 Advanced Ceramic X Corporation webpage: http://www.acxc.com.tw/ltcc_modules1.htm 
3 M.F. Davis, S.-W. Yoon, S. Pinel, K. Lim and Joy Laskar, “Liquid crystal polymer-based integrated passive 
developmement for RF applications,” 2003 IEEE MTT-S International Microwave Symposium Dig. pp. 1155– 1158, 
June 2003. 
4 D. Linten, X. Sun, S. Thijs, M.I. Natarajan, A. Mercha, G. Carchon, P. Wambacq, T. Nakaie and S. Decoutere, 
“Low-power low-noise highly ESD robust LNA, and VCO design using above-IC inductors,” 2005 IEEE Custom 
Integrated Circuits Conference Dig., pp. 497~500, 2005 
 8
磁模擬軟體如 Agilent Momentum 或是 Ansoft HFSS 進行 2.5 維或是 3 維的電磁模擬計
算後，得到散射參數，再萃取出等效電感值，這中間需要以手動方式進行多次的微調，
才能得到正確的尺寸。由於手動方式相當耗時，即使得到合適的電感值，也未必是 Q
值最好或是尺寸最小的最佳設計。 
另外當整合更多的電路到單一個 LTCC 基版時，電路的佈局會更加複雜，錯誤的機
會也會加大。 
 
研究目的 
因此本研究計畫將有以下兩項目標，第一個是電感的空間自動合成及最佳化，第二
個是適合於多層數基板中的電路與佈局對應檢查。最後的目標均是讓設計者可以在最
短的時間得到最正確的空間佈局，以下分別說明之。 
電感的空間自動合成及最佳化 
對於電感的合成與分析，已經有一些的研究發表5,6,7，不過大部分集中在 IC 製程中
的電感的合成，在 LTCC 或是 LCP 此類的封裝基板上的研究就相對的少了很多8，由於
封裝基板的層數可以遠較 IC 製程為多，金屬線段的長寬比及厚度也與 IC 製程不同，
在 IC 製程金屬厚度在數 um 以下，會與 skin depth 相近，線寬也不會超過數十 um，然
而在封裝基板中金屬厚度在十幾 um，寬度約在 100 um 以上，skin depth 的效果就不相
同，基於以上的理由，我們認為有必要，另外發展一套適合多層封裝基板中電感的計
算程式。我們將發展一個能夠快速且準確的計算出空間中結構的電感值及 Q 值的程
式，並且發展一個最佳化的程式。當設計者知道他所需要的電感值後，可以先由經驗
或參考其他人的設計，簡單大略畫出空間佈局之後，經由電感值及 Q 值的程式計算此
一結構的電感值及 Q 值，再經由最佳化的程式來調整出最合適的大小，並得到最佳的
Q 值或是最小的體積或面積。 
多層數基板中的電路與佈局對應檢查(Layout vs. schematic check, LVS) 
當更多的元件要整合到單一個封裝機板時，空間中的設計會變得更加的複雜，設計
者也需要對空間中的佈局直接進行微調，此時設計者很有可能不小心多接了一塊金
屬，刪除了一塊金屬，多增加了一個貫穿孔或是減少了一個貫穿孔，這些都有可能使
得電路的特性完全不對，因此需要一個電路與佈局對應檢查，檢查兩者是否一致。並
可以幫助設計者找到一些原本沒有注意到，可能發生不想要的耦合或寄生元件的位
                                                 
5 Niranjan A. Talwalkar,C. Patrick Yue,and S. Simon Wong, “Analysis and synthesis of on-chip spiral inductor,”  
IEEE Trans. On Electron Devices, Vol. 52, No. 2, pp.176-182, Feb. 2005.  
6 A. Weisshaar H. Lan and Luoh, A., “Accurate closed-form expressions for the frequency-dependent line 
parameters of on-chip interconnects on lossy silicon substrate,,”  IEEE Trans. on Advanced Packaging, Vol. 25, No.2, 
pp.288-296, May 2002. 
7 A. M. Niknejad and R. G. Meyer, “Analysis, design, and optimization of spiral inductors and transformers for Si 
RF ICs,” Proc. JSSC, vol. 33, no. 10, pp. 1470–1481, Oct. 1998. 
8 S. Mukherjee, B. Mutnury, S. Dalmia, and M. Swaminathan, “Layout-level synthesis of RF inductors and filters in 
LCP substrates for Wi-Fi applications,” IEEE Trans. Microwave Theory and Tech.,, vol. 53, no. 6, part 2, pp. 
2196-2210, June 2005. 
 10
2 LTCC spiral inductor synthesis and 
optimization 
I. Introduction 
In the realm of analogue circuits, CMOS technology is one of the most popular processes. 
However, the lossy nature of silicon limits the implementation of high quality inductors in CMOS 
technology. An alternative approach could be integrating CMOS circuits with passive elements 
implemented on LTCC (low temperature co-fired ceramic) technology which has better dielectric 
properties. Although the LTCC process can deliver higher quality inductors, the design process is 
time consuming due to the lack of fast and accurate model to estimate inductors’ electrical 
characteristics. In this paper, we propose accurate partial elements equivalent circuit (PEEC) 
modeling, synthesis, and optimization algorithms in LTCC process. The important details in 
LTCC spiral inductor modeling are described and the measurement results demonstrate the 
accuracy and quality of our algorithms.  
The straightforward inductor optimization approaches are enumeration and binary search based 
upon exhaustive field solver [1] or simplified circuit model [2]. Other proposed optimization 
methods include geometry programming (GP) [3], SQP [4], mesh adaptive direct search (MADS) 
[5], and implicit space mapping (ISM) [6]. These methods are either based on CMOS inductor 
model [4-5] or posynomials (sum of monomial) formulas derived from a large CMOS inductor 
family [3], [6]. Since the conductor size and spacing on a typical LTCC process are much larger 
than those in CMOS process, the circuit models or formulas proposed in these literatures are no 
longer valid. In [7], an approach of optimizing LTCC inductors using neuron network is proposed. 
Instead of using circuit models or extracted posynomials functions, this method trains the neuron 
network from measured inductor data which is far too expensive and time-consuming. 
The rest of this paper is organized as follows: in section II, we present the background 
knowledge of inductor synthesis and our enhancements to the traditional PEEC inductor model. 
The optimization method is presented in section III The verification on calculated inductance and 
Q value by proposed method against EM field solver and measurement is given at section IV The 
optimized results of a 2.5 turn inductor are also included. Finally, we conclude this paper in 
section V. 
II. Preliminaries 
A. Basic inductor modeling 
Fig. 1 shows the layout of a 1.5 turn spiral inductor with its tuning variables of outer dimension 
(W,H), width (w) and spacing (s). In this paper, an extra variable d is introduced to realize 
inductor with non-uniform width. The actual width for each segment, wi is given as follows: 
 disegmentstotalww ii )(1 −−= − , (1) 
where i is an incremental number assigned to each segment starting from the outer ring to inner 
ones. By narrowing the line width of inner turns, the total magnetic induced currents can be 
 12
strategy where the conductors are divided into 6 segments in horizontal and vertical directions. 
This would result in a total of 36 filaments per conductor rather than 400. Therefore, the 
simulation time is greatly reduced. Instead of a fixed [w/20, w/20, 2w/5, 2w/5, w/20, w/20] ratio 
as proposed in [2], we divide conductors into  
[δ, δ, (w-δ)/2, (w-δ)/2, δ, δ] along horizontal axis and  
[δ, δ, (t-δ)/2, (t-δ)/2, δ, δ]on vertical axis. Since the skin depth is frequency dependent, the size of 
filaments close to conductor surface will decrease according to the simulation frequency and 
therefore ensures the filaments are small enough to capture the non-uniform current distributions 
at high frequencies. Fig. 3 illustrates a conductor’s cross section with our meshing strategy. 
After performing the meshing, the DC resistance for each filament is calculated and filled into 
the system matrix (3). Besides, the self and mutual inductance of filaments are calculated using 
the well known Greenhouse formulas [11] to form the complete impedance matrix, Z. 
 
Fig. 3 A conductor with non-uniform meshing. 
 
In this paper, the proposed 2 dimensions meshing strategy is verified using an industrial field 
solver [12]. In order to show the skin effect in different technology, two typical CMOS 
conductors and a typical LTCC conductor are simulated. These simulations are carried out on a 
500um long rectangular copper conductor in free space with a ground plane. The conductors’ 
dimension and extracted resistance are shown in Fig. 5. 
In Fig. 5, it is observed that the single dimension meshing method proposed in [2] is only 
accurate for small size conductors (line a and b) while the 2 dimensions meshing strategy applied 
in this paper is capable of capturing skin effect for all cases up to 10 GHz. Based on the extracted 
surface current data, we found that the vertical current distribution for thick conductor is not 
symmetrical as compared to the thinner one. Therefore, the approximation formula used in [2] 
which assumed symmetrical vertical current profile is not applicable for LTCC technology where 
thick conductors are used. 
 14
identity matrix, respectively. A is the incidence matrix for series inductors while Yg* and Yc* are 
incidence matrix from capacitances. S is a unique matrix with zero entries except for the top left 
and bottom right corner entries assigned to 1. On the right hand side, V is a matrix represents the 
unity input voltage. Is are the solved currents for each filaments, Vn are the nodal voltages, Ig are 
the currents flow through capacitors connected to ground and Ic are the currents flow in coupling 
capacitors, respectively. 
After solving the matrix, the Y parameters can be extracted from the input and output current 
with proper excitation voltage, where 
 
 ,11 VoltageExcitation
currentinputtotalY =  and (4) 
 VoltageExcitation
currentoutputtotalY −=12 . (5) 
The inductance L, quality factor Q and series resistance R can be extracted by, 
 fYimL π2/)/1( 12−= , (6) 
 )/1(/)/1( 1212 YreYimQ −−= , and (7) 
 )/1( 12YreR −= . (8) 
  
III. Inductor Optimization. 
Let W, H, n, w, s be the outer width, outer length, number of turns, conductor width and spacing, 
respectively. We have inductance 
 ),,,,( swnHWL  and  (9)  
 ),,,,(
),,,,(2),,,,(
swnHWR
swnHWLfswnHWQ ×= π .  (10) 
In [4], Yong Zhan has shown that this problem can be fit into a SQP routine. In this work, we 
integrated our simulation engine with the Matlab SQP tool box for optimization purpose. With the 
presented accurate model, a high quality inductor can be found without going through exhaustive 
field solver as proposed in ISM [6]. In section IV, we show that this method is practical and 
accurate compared to the results of enumeration method.  
IV. Experimental and Simulation Results 
A. Inductance and Q calculation 
Several inductors were fabricated on LTCC process with the geometry parameters given in 
table I. The process used a low loss substrate with loss tangent = 0.0033 and a dielectric constant, 
εr = 7.5. Metal tracks are made of silver with a thickness of 13 um. 
The fabricated inductors were measured using Agilent E8361A network analyzer and the 
measured S-parameters were calibrated. The L and Q are extracted using equation (6) and (7) and 
the results are shown in Fig. 6-7. 
Table I. Fabricated Inductors Geometries 
 16
 
(b) 
Fig. 7 Measurement and simulation results of (a) inductance and (b) quality factor for S-1200. 
 
B. Optimization results 
Our optimization method is compared to the enumeration method. The enumeration method is 
set to scan through the constrained region with 10 sample steps for each variable. Meanwhile, the 
optimization goal is to maximize the quality factor with a desired inductance value at a given 
frequency. The constraints of design parameters and targeted inductance values are listed in Table 
II. The optimized inductor parameters are verified by field solver [12] and the results are given in 
Table III. 
Table II. Design parameters constraints. 
Parameter Constraints 
Outer width, W 1000~1500um 
Outer Length, H 1000~1500um 
Width, w 100~200um 
Spacing, s 100~200um 
Parameter for 
inductor with 
decreasing width, d
0.1~2um 
Frequency 3 GHz 
Inductance (case B) 4nH 
The results in Table III show that our method is able to find the desired inductance within 6% 
error and it is much faster compare to the enumeration method. The quality factors obtained by 
our method are also better or at least equal to the enumeration method ones. Moreover, it is 
observed that the inductors with non-uniform width (larger conductor width at outer ring and 
smaller width in inner ring) have better quality factor with a little more time cost. The result in 
case B agrees with the observation in [15], where the best Q is found for inductor with decreasing 
width from outer ring to the inner rings. 
Table III. Optimization Results 
Paramete Enumeration This work  This work 
1.5 2.0 2.5 3.0 3.5 4.01.0 4.5
75
150
225
0
300
freq, GHz
Q
ua
lit
y 
fa
ct
or
simulation, Momentum
simulation, this work
measurement
 18
[7]  Rana J. Pratap, S. Sarkar, S. Pinel, J. Laskar, and Gary S. May, “Modeling and optimization of multilayer LTCC 
inductors for RF/wireless applications using neural network and genetic algorithms,” in proc. IEEE Electronic 
Components and Technology Conference, vol. 1, pp. 248-254, June 2004. 
[8]  E. Pettenpaul et al., “CAD models of lumped elements on GaAs up to 18 GHz,” IEEE Trans. Microwave. 
Theory Tech., vol. 36, no. 2, pp. 294–304, Feb. 1988. 
[9]  W. N. Kuhn and N. M. Ibrahim, “Analysis of current crowding effects in multiturn spiral inductors,” IEEE 
Trans. MTT., vol. 49, no. 1, pp. 31–38, Jan. 2001. 
[10] Ali M. Niknejad, “Analysis, Simulation and application of passive devices on conductive substrate,” PhD thesis, 
EECS UC Berkeley, 2000, pp. 90-96. 
[11] H. M. GreenHouse, “Design of planar rectangular microelectronic indutors,” IEEE Trans on Parts, Hybrids, and 
Packging, vol. php-10, No. 2, June 1974. 
[12] Advance Design System Momentum 2005, Agilent Technologies CA 94304, U.S.A. 
[13] David M. Pozar, Microwave Engineering, Wiley and Sons Inc. 2005, pp. 144-148. 
[14] R. Garg and I. J. Bahl, “Characteristics of coupled microstriplines,” IEEE transactions on Microwave Theory 
and Technology, vol. 27, No. 7, pp. 700-705, July 1979. 
[15] Heng-Ming Hsu, “Analytical formula for inductance of metal of various widths in spiral inductors,” IEEE 
Transactions on Electron Devices, Vol. 51, No. 8, pp. 1343 – 1346, Aug. 2004. 
 20
coupled inductors. The final schematic is then generated based on these identified 
components. The generated schematic can be used to verify with the schematic from designer. 
Since the undesired or un-intentional L/C can be extracted, they are very useful information 
for circuit debugging.  
The components extraction and schematic generation will be covered in Sec. II. The 
extracted schematic of a published LTCC bandpass filter will be given to demonstrate the 
capability of our algorithms. Finally, the conclusion.  
 
II. Components Extraction and Schematic Generation 
Intuitively, we can treat the layout of microwave multi-layer circuit as sets of simple 
polygons of each layer. A simple polygon is a closed polygonal curve without 
self-intersection. The idea of extraction is to decompose the given polygon into overlapping 
rectangles. Here we will use a skill in computational geometry called sweep line [8]. The 
rectangular decomposition of a sample layout is shown in Fig.1. Based on predefined 
maximum line width, these rectangles are classified into wires (width less than maximum 
line width) and rectangles. These rectangles are candidates for capacitors. An example is 
shown in Fig. 2. The vertices of all rectangles are recorded in the layout-based net-list. We 
then insert remaining components like vias, ports and ground into the layout-based net-list.  
 
Fig. 1. A sample layout in single layer (left) and its rectangular decomposition (right). 
 
Fig. 2. An rectangular decomposition and its layout-based net-list. R1, R3 and R4 are classified into wires as W1, W3 
and W4.  
 
We now will identify inductors and capacitors from the net-list. We use the AND 
operation in Boolean logic with our net-list. If any two rectangles of different metal layers 
(includes ground layer) in the net-list have overlapping region and they are not connecting to 
each other by vias, then they will be identified as a capacitor.  
 22
extracted first-pass net-list with identified capacitors, spiral inductors and mutual inductor 
are shown in Fig. 5(c). Our algorithms identified two spiral inductors, Ls11 and Ls12. The 
coupled inductor M9 consists of lines W11 at layer 2 and W15 at layer 1 is also identified. 
The final schematic is shown in Fig. 5(d), we can see this agrees well with designer’s 
schematic. 
     
 (a)  (b) 
Fig. 4. (a)The schematic and (b) layout of a LTCC bandpass filter in [10]. 
      
 (a) (b) 
M9
Layer 3
Layer 2
Layer 1
ground
Via/capacitors
Via/capacitors
Via/capacitors
 
(c) 
 
(d) 
Fig. 5. (a-b) Extracted net-list of layer 2 and 3, (c) overall extracted first-pass schematic 
 24
 
4 Lump devices mapping between 
designer’s schematic and layout extracted 
schematic in microwave frequency  
 
I. INTRODUCTION 
The integration of more functions and standards into a single unit drives the miniaturization of 
both active and passive devices. System-on-package (SoP) is proposed as an approach to achieve 
miniaturization and performance improvement [1-2]. The multilayer structure and low loss of low 
temperature cofired ceramic (LTCC) make it a good substrate and process solution for passive 
components integration in SoP. Inductors, capacitors and transmission lines can be easily 
integrated into a single substrate to eliminate the requirement of discrete surface mounted 
devices.  
For application with frequency under about 10GHz, using lump devices usually provide more 
size/area reduction than transmission lines, therefore, we will limit our discussion on circuits 
using lump devices in this paper. In circuit design phase, designers usually started with an ideal 
schematic using lump devices such as capacitors and inductors. The layout of each device is 
synthesized and then tuned in the final complete layout to get desired frequency response. 2.5D 
or 3D EM simulators such as Agilent ADS Momentum, Sonnet or Ansoft HFSS can be used to 
simulate the scattering parameters of an isolated single lump device or the whole circuit. As 
circuit is becoming more complex and more devices are integrated, the chances to make 
erroneous connection between lump devices and unintentional coupling will also increase. 
However, the overall scattering parameters may not provide sufficient information for circuit 
debugging if un-desired coupling or mis-connection occurred.  
LVS (layout versus schematic) check methodologies for digital IC design are developed for 
several years [3-5] and LVS checker is an indispensable tool for IC design. The connectivity is 
extracted from layout and verified against the schematic of designer. As the multilayer circuits 
such as in LTCC becomes more complex, the verification of the final layout against the 
designer’s schematic will become important.  
The layout versus schematic (LVS) check includes two steps. The first step is the device 
extraction and the schematic generation from layout. The second step is the verification of layout 
extracted schematic against designer supplied schematic. The algorithm for first step is proposed 
by us at [6]. As devices are extracted from layout, their geometric dimensions are known and 
their device values can be calculated. For parallel plate capacitor, its capacitance can be estimated 
by C=A /d ε . A is the area of the metal plate, ε
 
is permittivity and d is the thickness of dielectric. 
The inductance of an extracted inductor can be calculated using PEEC-based method proposed at 
 26
capacitor. We will remove them to reduce the complexity of mapping procedure. However, their 
information will still be stored and displayed after the mapping procedure. Then we combine 
parallel and serial devices to reduce the number of devices have to be mapped. These reduction 
procedures will be applied both on schematic and layout net-lists. 
 
Fig. 5 Flowchart for schematic mapping.  
 
We will give each node in the net-list a weight vector. A weight vector has four elements as, 
 
yx z
i i i
i=1 i=1 i=1
w = ( c , l , p , d )∑ ∑ ∑v  . (1) 
x is the number of adjacent capacitors. ci is the capacitance of the ith capacitor (unit: pF). y is the 
number of adjacent inductors. li is the inductance of the ith inductor (unit: nH). The z is the 
number of adjacent ports or ground. pi is the node values of ith port or ground value. A port’s 
node value is its port number and we assign 231 to ground. d is the node’s degree which is the 
number of edges connected to it. 
According to this weight vector of node, we can sort these weights by 
x
i
i=1
c∑ , y i
i=1
l∑ , z i
i=1
p∑ and d 
and make these nodes a pair if two weight vectors of two nodes between the schematic net-list 
and the layout net-list  are closed enough. 
We can consider devices which are connected to the same node as a group. Each device in a 
group should be one-to-one mapped to device in corresponding group between schematic and 
layout net-lists. It may produce multiple possible one-to-one mapping. So we generate all 
possible combinations for latter process. If there is a device can’t be one-to-one mapped to a 
device in corresponding group, we mark all devices in the two groups un-mapped. 
After group mapping, there may produce some conflict devices from one group to another 
 28
P1 1 2C1 C2
G
C4 L1
3
5
L2M1
C3 4 P2
C5
1 nH 0.35 nH
4.2 pF
0.6 pF1.3 pF
1 nH
4.2 pF
0.6 pF
L1 L2
 
(b) 
P'1 8 9C6 C11
G'
C10 L3
10
12
L4M2
C9 11 P'2
0.605 pF
4.205 pF
1.05 nH 1.05 nH
0.355 nH
1.3025 pF 0.605 pF
L4L3
 
(c) 
Fig. 6. (a) Schematic of the 2.4GHz image-reject filter in [12]. (b) Schematic net-list of (a). (c) Merged 
layout net-list of the 2.4GHz image-reject filter in [12] with one device removed. 
 
TABLE I shows the weight vector of nodes in the schematic and layout net-lists. TABLE II 
shows all possible mappings by weight vector of nodes and the TABLE III is the results of group 
mapping. We choose mapping with the minimum number of conflict devices: {C1, C6} {C2, C11} 
{C3, C9} {C4, C10} {L1, L3} {P1, P'1} {P2, P'2}. There are three devices L2, C5 and G 
un-mapped in the schematic net-list and two devices L4 and G’ un-mapped in the layout net-list. 
We put L2, C5 and G to a group in the schematic net-list and L4 and G’ to an other group in the 
layout net-list. We can now map devices between these two groups. We can now map L2 to L4 
and G to G’ from their device values. There is only one un-mapped device C5 in the schematic 
 30
TABLE IV 
Scores of nodes in the schematic net-list 
Node name Score 
1 2 
2 4 
3 3-1 
4 2 
5 4-1 
 
VI. CONCLUSION 
As compared with isomorphism problems in digital IC layout, microwave circuits have fewer 
types of device and more symmetrical circuit topology. Weight vectors and scoring policy are 
proposed at this paper to find the most similar mapping between schematic net-list and layout 
net-list. The mapping results of a sample filter show that our method can effectively find the 
missing device and its location in the schematic. 
 
Reference 
 
[1] Lim Kyutae, S. Pinel, M. Davis, A. Sutono, Chang-Ho Lee, Deukhyoun Heo, A. Obatoynbo, J. 
Laskar, E.M. Tantzeris and R. Tummala, “RF-system-on-package (SOP) for wireless 
communications,” IEEE Microwave Magazine. Vol. 3, Issue 1, pp.88-99, March 2002. 
[2] R. Tummala et al, “SOP for miniaturized mixed-signal computing, communication, and consumer 
systems of the next decade,” IEEE Trans. on Advanced Packaging. Vol. 27, Issue 2, pp.250-267, 
May 2004.  
[3] Shiu-Ping Chao, Yen-Son Huang, Lap Man Yam, "A hierarchical approach for layout versus circuit 
consistency check," 17th Conference on Design Automation, pp.269- 276, June 1980. 
[4] Todd J. Wagner, “Hierarchical layout verification,” 21st Conference on Design Automation, 
p.484-489, June 25-27, 1984. 
[5] W. Meier, “Hierarchical layout verification for submicron designs,” Proceeding of the European 
Design Automation Conference, pp. 382-386, March 1990. 
[6] Hsin-Chia Lu, Kuan-Cheng Tseng and Yung-Shuen Chang, “Schematic extraction from layout of 
microwave multi-layer circuits,” 2008 Asia Pacific Microwave Conference Technical Digest, 
Session F3, Hong Kong/Macau, China, Dec. 2008. 
[7] Tuck Boon Chan, Hsin-Chia Lu, Jun-Kuei Zeng and Charlie Chung-Ping Chen, “LTCC spiral 
inductor modeling, synthesis, and optimization,” 12th Asia and South Pacific Design Automation 
Conference ASP-DAC 2008, pp. 768–781, Jan. 2008. 
[8] D. G. Corneil and D. G. Kirkpatrick, "A theoretical analysis of various heuristics for the graph 
isomorphism problem," SIAM Journal on Computing, vol. 9, no. 2, pp. 281–297, May 1980. 
 32
5 結果與討論（含結論與建議） 
電感的自動最佳化及合成的部分： 
此部份已經完成理論與量測驗證，計算的速度僅為一般商用電磁模擬軟體的百分之
一，配合最佳化的程式，可以快速幫設計者找出最佳的設計。為了讓設計者更方便的
使用，也完成網頁介面，使用者只要透過網路，使用網頁介面，就可以使用我們的軟
體工具，方便快速的合成所需的電感。接下來會繼續將此方法延伸，進行多層的 helical 
inductor 的合成及最佳化。 
多層數基板中的電路與佈局對應檢查(Layout vs. schematic check, LVS) 
目前是以電路佈局圖中的幾何特性作為判斷電感或是電容的依據，並且能將平行線之
間的互感找出。已對一些 LTCC 中的電路，進行檢查，結果都符合預期。由於 IC 中的
on-chip 電感，其空間中的佈局與 LTCC 中的電感，並無太大的差異。且目前 IC 中的
LVS 程式，並沒有辦法很好的辨識設計者自己繪製的電感佈局，而成為 LVS 的漏洞。
我們接下來將會使用在 LTCC 製程中所發展的技術，將之應用到 on-chip 電感的檢查
上，補足目前 IC 中的 LVS 程式所缺少的部分。 
 
 
 
 34
 
7 已發表論文列表 
Journal papers: 
 [1] Hsin-Chia Lu, Tuck Boon Chan, Charlie Chung-Ping Chen, Chia-Ming Liu, 
Heng-Jui Hsing and Po-Sheng Huang, “LTCC spiral inductor synthesis and 
optimization with measurement verification,” IEEE Trans. On Advanced Packaging, 
vol. 33, no. 1, pp. 160-168, Feb. 2010.  
Conference papers:  
 [1]  Tuck Boon Chan, Hsin-Chia Lu, Jun-Kuei Zeng and Charlie Chung-Ping Chen, 
“LTCC spiral inductor modeling, synthesis, and optimization,” 12th Asia and South 
Pacific Design Automation Conference ASP-DAC 2008, pp.768-781, Seoul, Korea, 
Jan. 2008. 
 [2]  Tuck Boon Chan and Hsin-Chia Lu, “Variability-aware LTCC spiral inductor 
synthesis,” 3rd International Microsystems, Packaging, Assembly and Circuit 
Technology Conference (IMPACT) and 10th International Conference on 
Electronics Material and Packaging (EMAP), pp.291-294, Taipei, Taiwan. Oct. 
2008.  
 [3]  Hsin-Chia Lu, Kuan-Cheng Tseng and Yung-Shuen Chang, “Schematic extraction 
from layout of microwave multi-layer circuits,” 2008 Asia Pacific Microwave 
Conference Technical Digest, Session F3, Hong Kong/Macau, China, Dec. 2008.  
 [4]  Hsin-Chia Lu, Chih-Chao Chang and Jia-Wei Chen, “A dual-mode rectangular ring 
bandpass filter with transmission zeros on LTCC,” 2008 Asia Pacific Microwave 
Conference Technical Digest, Session A2-07, Hong Kong/Macau, China, Dec. 2008.  
 [5] Hsin-Chia Lu, Jhih-Kuan Wu, Chuan Pan, Chia-Wen Chiang and Huan-Chun Fu, 
“2.4 GHz low-pass filters with harmonic suppression using integrated passive device 
process,” 2009 International Symposium on VLSI Design, Automation and Testing, 
pp. 295-298, Hsin-Chu, Taiwan, April 2009.  
 [6] Hsin-Chia Lu, Guan-Ming Wu and Chuan Pan, “Coupling coefficient improvement 
for inductor coupled vertical interconnect in 3D IC die stacking,” 2009 Electronic 
Components and Technology Conference ECTC, pp.1207-1212, San Diego, U.S.A., 
May 2009. 
 [7] Hsin-Chia Lu, Tzu-Wei Chao, Tuck-Boon Chan and Yien-Tien Chou, “LTCC 
layer-to-layer mis-alignment resistant coupled inductor and bandpass filter,” 2009 
IEEE MTT-S International Microwave Symposium (IMS), pp.1613-1616, Boston, 
U.S.A., June 2009.  
160 IEEE TRANSACTIONS ON ADVANCED PACKAGING, VOL. 33, NO. 1, FEBRUARY 2010
LTCC Spiral Inductor Synthesis and Optimization
With Measurement Verification
Hsin-Chia Lu, Member, IEEE, Tuck Boon Chan, Charlie Chung-Ping Chen, Member, IEEE, Chia-Ming Liu,
Heng-Jui Hsing, and Po-Sheng Huang
Abstract—In RF/microwave circuit design, inductor design
is one of the most difficult and time-consuming tasks due to
the tedious trial-and-error optimization process to achieve the
target specifications such as inductance, quality factor and oc-
cupied space. This paper brings forward a fast spiral inductor
synthesis method, which automatically generates physical layout
of inductors according to electrical specifications. By fusion of
substrate-aware partial element equivalent circuit (PEEC) model
with nonlinear optimization engine, our modeling and synthesis
strategies have been verified with industrial field solver and mea-
surement results. Our calculation results got less than 7% error for
inductance and less than 9% for quality factor as compared to the
results from full-wave electromagnetic simulation software. This
can provide a fast and good initial inductor design for designer.
Index Terms—Inductors, modeling, optimization methods.
I. INTRODUCTION
I N the realm of analogue circuits, designing high qualityinductors—the key passive component—has been a
major concern over the past few years. Complementary
metal–oxide–semiconductor (CMOS) technology is the first
choice for radio-frequency (RF) application, because of its
advantages of low cost, mature technology, and easiness to
be integrated. However, the lossy nature of silicon limits the
implementation of high quality inductors in CMOS technology.
An alternative approach to solve this problem could be inte-
grating CMOS circuits with passive elements implemented on
packaging substrate or discrete surface mounted chip inductors.
Surface mount chip inductors can provide large inductance
with good quality factor but they take additional space on the
printed circuit board thus increase the size and weight of final
system. Embedding inductors into packaging substrate such
as low temperature co-fired ceramic (LTCC) [1] or integrated
passive device (IPD) process using benzo-cyclo-butane (BCB)
or polyimide (PI) are some attractive approaches [2]. This
approach can reduce size and weight. Although the LTCC
process can deliver higher quality inductors, the design process
Manuscript received September 06, 2008; revised June 29, 2009. First pub-
lished October 30, 2009; current version published February 26, 2010. This
work is supported in part by the National Science Council of Taiwan under the
Grant NSC 95-2219-E-002-020, NSC 96-2221-E-002-283-MY3 and in part by
the National Taiwan University under the Excellent Research Projects 95R0062-
AE00-08. This work was recommended for publication by Associate Editor
L.-T. Hwang upon evaluation of the reviewers comments.
The authors are with the Graduate Institute of Electronics Engineering and
Department of Electrical Engineering, National Taiwan University, Taipei
10617, Taiwan (e-mail: leonardo@ew.ee.ntu.edu.tw).
Color versions of one or more of the figures in this paper are available online
at http://ieeexplore.ieee.org.
Digital Object Identifier 10.1109/TADVP.2009.2028636
is time consuming due to the lack of fast and accurate model to
estimate inductors’ electrical characteristics.
The straightforward inductor optimization approaches are
enumeration and binary search based upon exhaustive field
solver [3] or simplified circuit model [4]. Other proposed op-
timization methods include geometry programming (GP) [5],
SQP [6], mesh adaptive direct search (MADS) [7], and implicit
space mapping (ISM) [8]. These methods are either based on
CMOS inductor model [6], [7] or posynomials (sum of mono-
mial) formulas derived from a large CMOS inductor family
[5], [8]. With the much larger conductor size and spacing on a
typical LTCC process, the circuit models or formulas proposed
in these literatures are no longer valid. In [9], an approach of
optimizing LTCC inductors using neuron network is proposed.
Instead of using circuit models or extracted posynomials func-
tions, this method trains the neuron network from measured
inductor data which is far too expensive and time-consuming.
To reduce the cost of fabrication and long turn around time,
[10] use simulated inductor parameters from EM simulation
instead of actual measured inductors to train the neural network
for inductor synthesis under liquid crystal polymer (LCP) as
substrate. Interpolated data from EM simulation are also used
to improve the accuracy neural networks.
Since the number of metal layers and the dielectric thickness
are fixed for a certain semi-conductor fabrication technology
nodes, library based approach is a good approach for inductor
synthesis. For LTCC process, the designer can choose his own
number of layers and dielectric thickness. It is almost impos-
sible to build a library for all combination of layer and dielectric
thickness. A rapid yet accurate inductance calculation engine is
then required for synthesis and optimization. In this paper, we
use 2-D meshing in partial element equivalent circuit (PEEC)
method [11] to handle the thicker metal in packaging substrate.
Nonlinear optimizer is then combined with the PEEC induc-
tance calculation engine to optimize the geometry dimensions
of the inductor to meet designers’ requirement. Our meshing
strategies can capture inductance, skin effects, and proximity
effects.
With the accurate and efficient inductance calculation engine,
we can exploit the powerful optimization algorithms [4]–[8].
Among these algorithms, SQP [6] is one of the most efficient
one and is much faster than enumeration algorithm. Although
geometry programming [5] could be a powerful solution but it
requires both the objective function and constraints are sum of
polynomial functions. To figure out the posynomial functions,
electrical performances such as inductance and quality factor
must be first extracted from large number of fabrication or sim-
ulation samples before the curve fitting process. As mentioned
1521-3323/$26.00 © 2010 IEEE
Authorized licensed use limited to: Hsin-Chia Lu. Downloaded on March 07,2010 at 06:17:36 EST from IEEE Xplore.  Restrictions apply. 
162 IEEE TRANSACTIONS ON ADVANCED PACKAGING, VOL. 33, NO. 1, FEBRUARY 2010
Fig. 3. Conductor with nonuniform meshing.
Fig. 4. Cross section to evaluate skin effect by simulation.
system matrix (3) the mutual inductance of filaments are also
calculated from the formulae given by Greenhouse [16]. Com-
bining the components mentioned on above, we are then able to
form the complete impedance matrix as
(1)
where is an matrix for a total of filaments, is an
matrix with only diagonal terms (because there is not mutual
resistance), and is also an matrix with the diagonal
terms represents series inductance for each filament and the off
diagonal terms are mutual inductance values.
In order to show the effect of skin depth in different tech-
nology, two typical CMOS conductors and a typical LTCC con-
ductor are simulated. These simulations are carried out on a
500- m-long rectangular copper conductor in free space with a
ground plane. The cross section of the simulation setup is shown
in Fig. 4 while the conductors’ dimension and extracted resis-
tance are shown in Fig. 5. The resistances calculated by 1-D
and 2-D meshing are compared with Agilent ADS Momentum,
which is an industrial 2.5D EM field solver [17].
In Fig. 5, it is observed that the 1-D meshing method proposed
in [4] is only accurate for small size conductors (case case )
while the two dimensions meshing strategy applied in this paper
is capable of capturing skin effect for all cases up to 10 GHz.
This phenomenon can be explained by the current density
plots in Fig. 6 for case (a) and (c) in Fig. 5. We obtain these cur-
rent density plot by using Ansoft HFSS [18] which is a 3-D EM
simulator. In Fig. 6, the current density plots show that the ver-
tical current distribution for thick conductor is not symmetrical
as compared to the thinner one. Therefore, the approximation
formula used in [4] which assumed symmetrical vertical cur-
rent profile is not applicable for LTCC technology where thick
conductors are used.
Besides the skin effect, we perform another simulation to
verify our model for proximity effect. The cross section of the
Fig. 5. Resistance of a single conductor with different width and thickness, (a)
        , (b)         , (c)         .
Fig. 6. Current density contour plots for conductor (a)     m,     m
and (b)      m,     m.
simulation setup is shown in Fig. 7, where two conductors are
separated by 100 m and are 300 m above the ground plane.
Both conductors are 13 m thick, 100 m wide, and 500 m
long. The simulation results are shown in Fig. 8 where both
extracted resistance have similar profile over a wide frequency
range.
C. Substrate Effect
In RF frequencies, the wavelength far exceeds a typical in-
ductor on LTCC substrate. Thus, we can make magneto- quasi-
static approximations. This implies that no charge accumulation
Authorized licensed use limited to: Hsin-Chia Lu. Downloaded on March 07,2010 at 06:17:36 EST from IEEE Xplore.  Restrictions apply. 
164 IEEE TRANSACTIONS ON ADVANCED PACKAGING, VOL. 33, NO. 1, FEBRUARY 2010
III. INDUCTOR OPTIMIZATION.
In the previous sections, it is shown that the and is a
function of physical parameters. Let be the outer
width, outer length, number of turns, conductor width, and
spacing, respectively. In [6], Zhan has shown that this problem
can be fit into a SQP routine. In this work, we integrated our
simulation engine with the Matlab SQP tool box for optimiza-
tion purpose. The problem is formulated as an optimization
problem as
and
(8)
Where is the quality factor, is the equality con-
straints for inductance, is the inequality constraints for
lower and upper bounds. represents the tuneable parameters
including , and .
Given a problem in the form of (8), the Lagrangian of the
problem can be defined as
(9)
In each iteration of the sequential quadratic programming,
there is a quadratic subproblem
and
(10)
By solving these subproblems, the optimum geometry param-
eters for a high quality inductor layout can be found iteratively
without going through exhaustive field solver as proposed in
ISM [8]. Also, we will show that this method is faster than enu-
meration method and as accurate as compared with measure-
ment results in Section IV. The optimization flow is shown in
Fig. 10.
IV. EXPERIMENT AND SIMULATION RESULTS
A. Inductance Calculation Engine Verification
Several inductors were fabricated on LTCC process with the
geometry parameters given in Table I. The process used a low
loss substrate with loss tangent and a dielectric con-
stant, . Metal tracks are made of silver with a thickness
of 13 m. The conductivity is from LTCC’s manufac-
turer. The dielectric thickness between top metal and ground is
184 m and is 148 m from underpass to ground.
The fabricated inductors were measured using Agilent
E8361A Network analyzer from 1 to 10 GHz. One of them is
shown in Fig. 11. The pitch on the GSG pad is 400 m. The
network analyzer is first calibrated to GSG probe tips by SOLT
(short, open, load, and thru) calibration method. The effect
Fig. 10. Optimization flow chart.
TABLE I
FABRICATED INDUCTORS GEOMETRIES
Fig. 11. Spiral inductor S-1000.
of probe pads are then removed by TRL calibration method
[21] to the reference plane also shown in Fig. 11. The and
are extracted using (6) and (7) and the results are shown in
Figs. 12–14.
The measurement results in Figs. 12–14 show that our simu-
lation results and solutions from Agilent ADS Momentum and
Ansoft HFSS have similar profile and are accurate as compared
Authorized licensed use limited to: Hsin-Chia Lu. Downloaded on March 07,2010 at 06:17:36 EST from IEEE Xplore.  Restrictions apply. 
166 IEEE TRANSACTIONS ON ADVANCED PACKAGING, VOL. 33, NO. 1, FEBRUARY 2010
Fig. 14. Measurement and simulation results of (a) quality factor and (b) in-
ductance for S-800.
TABLE II
SIMULATION RUN TIME COMPARISON FOR A SINGLE FREQUENCY
capability of our inductor calculation engine, a different dielec-
tric thickness set is selected. The dielectric thickness between
top metal and ground is 505 m and is 453 m between under-
pass and ground. The optimized inductor parameters are verified
by field solver [13] and the results are given in Table IV.
In case A we set the turns to 1.5 and 2.5 for case B. The re-
sults in Table IV show that our method is able to find the de-
sired inductance within 7% error and it is much faster com-
pare to the enumeration method. The quality factors obtained
TABLE III
DESIGN PARAMETERS CONSTRAINTS
TABLE IV
OPTIMIZATION RESULTS OF (A) CASE A AND (B) CASE B
Authorized licensed use limited to: Hsin-Chia Lu. Downloaded on March 07,2010 at 06:17:36 EST from IEEE Xplore.  Restrictions apply. 
168 IEEE TRANSACTIONS ON ADVANCED PACKAGING, VOL. 33, NO. 1, FEBRUARY 2010
Chia-Ming Liu received the B.S. degree in applied
mathematics from National Tsing Hua University,
Taiwan, in 2005. He is currently working toward
the M.S. degree in Graduate Institute of Electronics
Engineering at National Taiwan University, Taipei,
Taiwan.
Since 2007, he has been engaged in a research on
spiral inductor synthesis and optimization.
Heng-Jui Hsing received the B.S. degree in com-
puter science and information engineering from
Tunghai University, Taichung, Taiwan, in 2007.
He is currently working toward the M.S. degree
in Graduate Institute of Electronics Engineering,
National Taiwan University, Taipei, Taiwan.
Since 2007, he has been engaged in the research
on layout versus schematic for microwave circuit.
Po-Sheng Huang was born in Taichung, Taiwan,
in 1986. He received the B.S. degree in electronics
engineering from National Tsing Hua University,
Hsinchu, Taiwan, in 2008, and is currently working
toward the M.S. degree in electronics engineering at
National Taiwan University.
His research involves the design of RF packaging
and circuits.
Authorized licensed use limited to: Hsin-Chia Lu. Downloaded on March 07,2010 at 06:17:36 EST from IEEE Xplore.  Restrictions apply. 
II. Components Extraction and Schematic Generation 
Intuitively, we can treat the layout of microwave multi-layer circuit as sets of simple 
polygons of each layer. A simple polygon is a closed polygonal curve without self-
intersection. The idea of extraction is to decompose the given polygon into overlapping 
rectangles. Here we will use a skill in computational geometry called sweep line [8]. The 
rectangular decomposition of a sample layout is shown in Fig.1. Based on predefined 
maximum line width, these rectangles are classified into wires (width less than maximum line 
width) and rectangles. These rectangles are candidates for capacitors. An example is shown 
in Fig. 2. The vertices of all rectangles are recorded in the layout-based net-list. We then 
insert remaining components like vias, ports and ground into the layout-based net-list.  
We now will identify inductors and capacitors from the net-list. We use the AND 
operation in boolean logic with our net-list. If any two rectangles of different metal layers 
(includes ground layer) in the net-list have overlapping region and they are not connecting to 
each other by vias, then they will be identified as a capacitor.  
There are four basic kinds of inductor structures will be identified: corner inductors, spiral 
inductors, meander line inductors and coupled inductors, respectively. A corner inductor is 
locating on the intersectional corner of two wires, no matter the turning angle is. To identify a 
spiral inductor structure, we only need to detect the turning directions of wires and we can do 
this based on those identified corner inductors. If the turning directions are always the same 
and the sum of turning angles is greater or equal to 180°, then we can extract one spiral 
inductor from this corner inductor sequence. This detecting heuristic can also be applied on 
meander line inductor identification. If there is a corner inductor sequence which contains L–
L and R–R pairs alternately and all the turning angles are equal to 90°, then we can extract 
meander line inductor from this kind of alternate corner inductor sequences. Fig.3(a) and (b) 
show  identified spiral inductor and meander line inductor. 
If the distance between two parallel lines is smaller than a predefined distance, they are 
recognized as a candidate for coupled inductor. If the two lines in a coupled inductor are 
belong to the same spiral inductor, this coupled inductor will be removed from the list, since 
its mutual inductance will be included in the spiral inductor. The self and mutual inductance 
of spiral inductor, meander line inductor and coupled inductor can be calculated rapidly by 
inductance calculation program [9] based on PEEC. The capacitance of each identified 
capacitor can be evaluated by C=Aε/d. 
In the first-pass of identification, we will identify all candidate capacitors and corner 
inductors. We can then combine them into aggregated components such as capacitors, spiral 
inductors, and meander line inductors based on their connectivity and generate the overall 
layout-based schematic.  
III. Results 
This section gives an example highlighting the extraction methodology presented in this 
paper. We use a published 2.4GHz bandpass filter on LTCC[10] as an example. The 
designer’s schematic and layout of the 2.4Ghz bandpass filter are shown in Fig. 4(a) and (b). 
The extracted sub net-list of each layer and final schematic are given in Fig. 5. Fig. 5(a) and 
(b) show the extracted net-list of layer 2 and 3. In the net-list, “R,” “W,” “Ws,” “V,” “G,” and 
“P” denote rectangle, wire, special wire, via, ground and port respectively. The overall 
extracted first-pass net-list with identified capacitors, spiral inductors and mutual inductor are 
shown in Fig. 5(c). Our algorithms identified two spiral inductors, Ls11 and Ls12. The 
coupled inductor M9 consists of lines W11 at layer 2 and W15 at layer 1 is also identified. 
The final schematic is shown in Fig. 5(d), we can see this agrees well with designer’s 
schematic. 
IV. Conclusion 
As the design getting more complex, a design verification tools is required to ensure 
 
 (a)  (b) 
Fig. 3. (a) An identified spiral inductor and (b) meander line inductor.  
     
 (a)  (b) 
Fig. 4. (a)The schematic and (b) layout of a LTCC bandpass filter in [10].  
      
 (a) (b) 
M9
Layer 3
Layer 2
Layer 1
ground
Via/capacitors
Via/capacitors
Via/capacitors
 
(c) 
 
(d) 
Fig. 5. (a-b) Extracted net-list of layer 2 and 3, (c) overall extracted first-pass schematic with identified 
components and (d) generated layout based schematic.  
 
  
The device mapping algorithm will be covered in Sec. II. 
The mapping results of a published LTCC bandpass filter 
will be given to demonstrate the capability of our 
algorithms. Finally, the conclusion. 
II. DEVICES MAPPING  
There are two input net-lists for this mapping procedure. 
One is from the designer’s schematic, we will call it the 
schematic net-list in the following text. The other one is the 
net-list of the schematic extracted from the layout of the 
microwave circuit. We will call it the layout net-list. This 
can be extracted using the algorithm at [6]. The device 
values such as inductance and capacitance are also assumed 
to be known. The net-list is a graph containing vertexes and 
edges. There are two types of vertexes, one is a device and 
the other is a node. Take the net-list in Fig. 2(b) as an 
example, we use circles to represent nodes and squares are 
for devices. Devices can be inductors, capacitors and 
mutual inductors. An edge is placed between a device 
vertex and a node vertex whenever the corresponding node 
is connected to a terminal of the device. 
The flowchart for schematic mapping is shown in Fig. 1. 
We will describe the procedure in more details in the 
following. In the layout net-list, the method in [6] may 
identify some parasitic inductors or capacitors. So we let 
user to define the minimum inductance and capacitance 
respectively. If the inductance or capacitance of a device is 
smaller than the defined minimum inductance or 
capacitance, the inductor or capacitor is then considered as 
a parasitic inductor or capacitor. We will remove them to 
reduce the complexity of mapping procedure. However, 
their information will still be stored and displayed after the 
mapping procedure. Then we combine parallel and serial 
devices to reduce the number of devices have to be 
mapped. These reduction procedures will be applied both 
on schematic and layout net-lists. 
We will give each node in the net-list a weight vector. A 
weight vector has four elements as, 
 
yx z
i i i
i=1 i=1 i=1
w = ( c , l , p , d )
  

 . (1.) 
x is the number of adjacent capacitors. ci is the 
capacitance of the ith capacitor (unit: pF). y is the 
number of adjacent inductors. li is the inductance of 
the ith inductor (unit: nH). The z is the number of 
adjacent ports or ground. pi is the node values of ith 
port or ground value. A port’s node value is its port 
number and we assign 231 to ground. d is the node’s 
degree which is the number of edges connected to it. 
According to this weight vector of node, we can sort 
these weights by 
x
i
i=1
c

, 
y
i
i=1
l

, 
z
i
i=1
p

and d and make these 
nodes a pair if two weight vectors of two nodes between the 
schematic net-list and the layout net-list  are closed enough. 
We can consider devices which are connected to the 
same node as a group. Each device in a group should be 
one-to-one mapped to device in corresponding group 
between schematic and layout net-lists. It may produce 
multiple possible one-to-one mapping. So we generate all 
possible combinations for latter process. If there is a device 
can’t be one-to-one mapped to a device in corresponding 
group, we mark all devices in the two groups un-mapped. 
After group mapping, there may produce some conflict 
devices from one group to another group (i.e. there is one 
device in the schematic net-list, but it map to two devices in 
the layout net-list or vice versa). If a group has a conflict 
device, then we set all devices in those groups un-mapped. 
If there are devices un-mapped in the schematic or layout 
net-list so far, we will put all un-mapped devices as a group 
in the schematic and layout net-list respectively. We will 
then map these two groups by their device type (L or C), 
device values (capacitance and inductance) and their 
connectivity to mapped nodes. 
We may have many possible mappings now. We will use 
a scoring policy to find the most similar layout net-list to 
the schematic net-list mapping. Each node in the schematic 
net-list is given a score according to how well the 
corresponding node in layout net-list is mapped. At initial 
stage, scores of all nodes are set to zero. For each device 
connected to a node in the schematic net-list is mapped to 
the device connected to the corresponding node in layout 
net-list, the score of the node in schematic net-list is 
increased by one. Un-mapped device at schematic or layout 
net-list will reduce the score by one. Finally the sum of 
score of nodes represents degree of similarity between the 
schematic and layout net-list. Each possible mapping is 
scored according to the scoring policy.  
We will choose the mapping with the highest score as the 
final mapping results. Then we check whether there are 
mutual inductors in the schematic net-list. If there are 
mutual inductors in the schematic net-list, we check 
inductors that constitute the mutual inductor in the 
schematic net-list and find corresponding inductors and 
mutual inductor devices in the layout net-list with close 
device values. If there isn’t a corresponding mutual 
inductor in the layout net-list, we will report to user a 
missing mutual inductor in the layout net-list. Based on this 
mapping result, we can also report to user un-mapped 
devices in the schematic net-list or layout net-list. They can 
be found by checking any minus elements in the scoring list 
of nodes. 
III. MAPPING RESULTS OF A FILTER   
Fig. 2.(a) is the schematic of a 2.4GHz image-reject filter 
in [12]. Its corresponding schematic net-list is shown in Fig. 
Fig. 2.(b), where nodes are added. Based on the layout also 
in [12], we extracted the layout net-list as shown in Fig. 
2.(c) using our device extraction algorithm at [6]. L/C 
values are also estimated. One device in the layout net-list 
is deliberately removed to test our method. We will find 
this missing device after mapping procedure and will also 
pinpoint the location of missing device in the schematic. 
TABLE I shows the weight vector of nodes in the 
schematic and layout net-lists. TABLE II shows all possible 
mappings by weight vector of nodes and the TABLE III is 
the results of group mapping. We choose mapping with the 
minimum number of conflict devices: {C1, C6} {C2, C11} 
{C3, C9} {C4, C10} {L1, L3} {P1, P'1} {P2, P'2}. There 
are three devices L2, C5 and G un-mapped in the schematic 
net-list and two devices L4 and G’ un-mapped in the layout 
net-list. We put L2, C5 and G to a group in the schematic 
340
  
  
Fig. 1 Flowchart for schematic mapping.  
 
 
 
(a) 
 
P1 1 2C1 C2
G
C4 L1
3
5
L2M1
C3 4 P2
C5
1 nH 0.35 nH
4.2 pF
0.6 pF1.3 pF
1 nH
4.2 pF
0.6 pF
L1 L2
 
(b) 
 
P'1 8 9C6 C11
G'
C10 L3
10
12
L4M2
C9 11 P'2
0.605 pF
4.205 pF
1.05 nH 1.05 nH
0.355 nH
1.3025 pF 0.605 pF
L4L3
 
(c) 
Fig. 2. (a) Schematic of the 2.4GHz image-reject filter in [12]. (b) Schematic net-list of (a). (c) Merged layout net-list of the 2.4GHz 
image-reject filter in [12] with one device removed. 
342
 2
到較準確的校準結果。期間也有多位台灣及其他國家的研究人員前來討論，交換研
究方面的心得。 
二、與會心得 
本次會議中遇到許多來自大陸的學者，有些是在新加坡工作進行研究，也有一些是
大陸研究單位的訪問學者。同時本屆會議有相當大的比例的論文來自中國大陸，雖
然論文的品質上還有提昇的空間，但有這幾年的變化來看，進步的幅度相當的大。 
另外新加坡的國際化的程度遠高於台灣，許多新加坡的論文，其實是大陸的學生或
是研究人員在新加坡的研究機構完成的，同時新加坡政府也提供非常多的獎學金吸
引優秀的大陸學生及研究人員在新加坡就學及從事研究工作，相較於台灣最近關於
大陸學生來台灣念書的種種限制，當然在兩岸的政治環境下，與大陸與新加坡的狀
況不同，不能等同處理，但是新加坡在國際化、自由化及吸引優秀人才方面的努力，
還是有許多值的借鏡的地方。 
三、考察參觀活動(無是項活動者略) 
無是項活動 
四、建議 
無 
五、攜回資料名稱及內容 
攜回資料計有會議論文集電子檔一份。 
六、其他 
 
 
96年度專題研究計畫研究成果彙整表 
計畫主持人：盧信嘉 計畫編號：96-2221-E-002-283-MY3 
計畫名稱：奈米 IC 設計之前瞻電子設計自動化技術--子計畫七：奈米 IC 晶片系統封裝中多層封裝基
版內藏元件之設計自動化 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 4 4 100%  專利 已獲得件數 0 2 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 4 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 1 0 100% 
人次 
 
期刊論文 1 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 2 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 3 0 100%  專利 已獲得件數 1 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
 
