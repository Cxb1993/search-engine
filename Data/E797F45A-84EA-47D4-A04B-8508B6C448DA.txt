1 
 
行政院國家科學委員會專題研究計畫成果報告 
Development of Distributed Real-time Control and 
Sensing Platform for Robot Systems 
計畫編號：NSC 96-2218-E-009-018 
執行期限： 96 年 08 月 01 日至 97 年 07 月 31 日 
主持人：胡竹生   國立交通大學電機與控制工程學系(所) 
共同主持人：無   
計畫參與人員：曾勁源   國立交通大學電機與控制工程學系(所) 
 
1. 摘要 
 
 
本文提出一套在室內環境中可結合式子母
機器人系統，子機為一多功能平台，可放置各種
家庭所需之設備，而母機為一輪式機器人，經由
兩者的結合，可提供高機動性與多功能的服務。
在結合的技術面，傳統的吸塵器機器人與充電站
之間的導航系統使用紅外線感測作為依據，當兩
者間有障礙物阻擋時，紅外線感測器導航系統將
會失效。因此本系統利用聲源方向做為機器人決
定移動方向的依據，由於聲波傳遞的特性，即使
在有障礙物的情況下，依然可以有效地偵測。此
外，在移動的過程中，本系統利用光流偵測法判
斷是否遭遇障礙物或是利用 Support Vector 
Machine分類判斷與聲源之間為是否有障礙物的
阻隔；若發現前方有障礙物，則啟動避障策略，
用有效的方式繼續往目標移動。最後，當母機接
近子機時，可根據多種紅外線感測器資訊進行子
母機器人的結合，結合成功後，母機將可搭載子
機成為一自由行動之機器人。 
 
關鍵詞：子母機器人、光流偵測、SVM、聲源
判定 
 
Abstract 
This project presents combinative dual robots 
which provide high versatile and domestic service 
with distributed real-time control and sensing for 
an indoor environment. These robots combination 
allow the vacuum cleaner uses the infrared rays to 
search for the charge center. If there is a barrier 
obstruct sensor view, the infrared rays will not 
working. Therefore, we provide a sound source 
based LOS (location of sound) method to solve this 
problem. The SVM (support vector machine) and 
optical flow can provide the judgment of the 
barrier position. This project result shows that 
parent robot can dodge the barrier and combine 
with the child robot successfully. 
 
Keywords: LOS, SVM, Optical Flow 
 
2. 研究目的與參考文獻 
 
 想像您是一個家庭主婦，看著家中有這麼多
繁瑣的家事要做，如果要請個外勞語言又不通；
如果有一個貼心的機器人可以幫妳分擔一點工
作，首先它可以幫你在家裡到處吸塵，幫妳到櫃
子去拿想要拿的東西，又可以播放你想聽的音
樂，更不必擔心機器人什麼時候電力不足需要充
電，需要充電時可以自動搜尋充電站的位置並自
己移動過去充電。 
本計畫將要實現的是一個智慧型子母式服
務機器人，它分為子母兩個機器人，母機為一個
全方向移動的輪式機器人，有全方向移動的能力
使其可以在室內靈活的移動，並在上面裝有光流
定位系統，使其可以偵測行走的狀況；並且，若
是加入自動吸塵的功能將可在移動的過程中清
掃家中的地板；子機可視為一移動式充電站，當
母機四處移動並偵測到電力不足時，就開始搜尋
充電站的位置並移動過去充電；另一方面，子機
也可以是一個垃圾桶、置物櫃、或是能播放音樂
的多媒體音樂櫃，甚至可以是結合以上功能的多
用途機器人。子母機平常各有其功能，需要合體
時也可以組合成為合體機器人以充分滿足使用
者的需求。 
3 
 
3.2 光流偵測碰撞法 
 
利用頻譜裡 magnitude 最大的頻率的
phase-difference 作為行走依據並加入碰撞偵測
[11]，行走規則如下： 
1. 通知子機端發出聲音，根據
phase-difference 得到聲源相對於機器人
之角度θ，旋轉θ角後往前行進 l， ×= 5l
連續未碰撞次數 30≤l 。前行時如未碰
撞，重複 step 1。碰撞發生時，機器人往
後退 10 公分，進入 step 2。 
2. 通知子機端發出聲音，得到新的聲源對
於機器人之角度 1θ ，機器人旋轉 1θ 角，
往前行進 30=l 公分，紀錄旋轉方向α (左
或右)。前行時如發生碰撞，進入 step 3，
未碰撞，進入 step 4。 
3. 根據 step 2 紀錄之旋轉方向α ，機器人
碰撞後退後 10 公分，往α 方向旋轉 10
度，在往前行 30=l 公分。如發生碰撞，
重複 step 3，直到碰撞未發生進入 step 4。 
4. 通知子機端發出聲音，得到聲源對於機
器人之角度 2θ ，機器人旋轉 2θ 角，往前
行進 30=l 公分並紀錄旋轉方向 β 。如發
生碰撞，機器人往後退 10 公分，往β 之
反方向轉回 2θ 度，在往前行 30=l 公分，
前行過程如有碰撞，則在往 β 之反方向
旋轉 10 度在往前行，直到無碰撞發生，
然後重複 step 4。如沒發生碰撞回到 step 
1。 
本方法利用機器人偵測聲源對於機器人之
角度θ，使機器人朝聲源方向前進，前進過程如
有遇到障礙物，機器人則以嘗試碰撞的方式，走
出障礙物的阻礙。方法如上面所述。以下圖 2 表
示過程： 
碰撞行走流程圖： 
 
圖 2. 碰撞行走流程圖 
 
3.3 SVM 判定法 
 
先得到六個頻率的 time delay，接著，我們
可以進行 SVM 的分類，來辨別母機與子機之間
為 line of sight(LOS) 或 是 non-line of 
sight(NLOS)。在做 SVM 的分類之前，須先對
SVM 分類器作訓練[12-14]，訓練方法如下： 
1. 固定聲源位置，使母機與聲源間為 LOS，
使母機正對聲源、聲源位於母機左方
o30 、聲源位於母機右方 o30 ，分別錄製
30 個點，得到 90 筆 LOS 的訓練資料 
( )654321ia xxxxxx ,,,,,= 。 
2. 將障礙物放置於場地中，於母機與聲源位
置間為 NLOS 的地方，將其切割為
1110× 、邊長為 10 公分的小方格，使母機
5 
 
機門口的左右邊各放置一個紅外線感測器，當母
機從子機的左邊靠近被偵測到時，子機將通知母
機往右邊行走一個弧線，直到母機走到子機的中
間為止。此時可以確定母機在子機前面，但是不
能確定母機是否正對著子機門口。於是我們在子
機正中間加上一個光敏感測器，母機正前方放置
發光二極體，做面對門口的校正。當母機畫完弧
線以後，再往左旋轉 o40 ，然後開始往右邊旋轉
掃描光敏感測器是否有變化，如偵測到變化，即
停止旋轉。(子母機結合示意圖) 
接下來進行結合的部分。為了讓母機與子機
能夠大概的上下對齊，我們於子機中央部份佈了
一圈光敏感測器(8 個)，母機正中間放置發光二
極體，利用光的特性來做對正。如下圖所示： 
 
 
圖 5. 光敏感測器示意圖 
 
圖 6. 子母機結合流程圖 
 
4. 成果 
 
在母機與子機結合的過程中，可分為四個部
份作成果展現：聲源方位判斷，光流偵測碰撞之
避障法，以 SVM 訓練法則判斷有無障礙物法，
子母機結合過程，將在下面一一分述： 
 
4.1 聲源方位判斷 
 
本實驗為聲源(子機)相對於母機方位的判
斷，實驗環境中有一固定位置的喇叭放置於子
機，由母機要求喇叭發出一個 0.25 秒由六個頻
率(343.75、375、406.25、437.5、468.75、500Hz)
所組成的聲波，如圖 7 所示，經由母機上的雙聲
道麥克風接收後計算其相位差與大小比，取其中
大小比最大之頻率的相位差作為方位判斷的依
據。 
 
圖 7. 複頻聲音訊號 
 
4.2 無障礙物之聲源方位判斷(LOS) 
 
如圖 8 所示，於各點上母機的麥克風裝置皆
面向正 y方向，且距離子機 2 公尺，而角度以母
機座標系統為準，由左而右從 0度遞增為 180度。 
 
圖 8. 無障礙物聲源判斷 
我們分別於每一個位置計算五次相對方位
的角度，再取其平均值，得到實驗結果如表 3 表。 
表 3 聲源方位判斷比較表(1) 
母機位 相對真 平均角度 誤差 
7 
 
個頻率的相位差將會被障礙物影響，透過這個性
質我們就可以使用 SVM 做無障礙物與有障礙物
的分類。下面各表列出 SVM 訓練資料部分的
Time-Delay，分為無障礙情況下母機正對聲源、
與有障礙物情況下母機正對聲源等情形。 
 
表 5 SVM 部分訓練資料(1) 
無障礙物，正面對聲源 
343.7
5 Hz 
375 
Hz 
406.2
5 Hz 
437.5 
Hz 
468.7
5 Hz 
500 
Hz 
0.987
4 
1.905
6 
-0.610
7 
-2.621
0 
-2.392
3 
-1.055
8 
2.449
6 
4.618
6 
1.455
9 
2.017
3 
2.920
2 
-1.350
0 
-1.408
0 
3.700
6 
-0.201
8 
0.336
0 
-1.300
7 
0.069
8 
-2.033
0 
-1.657
2 
-2.329
9 
-0.983
0 
0.017
2 
-0.463
9 
表 6 SVM 部分訓練資料(2) 
有障礙物，正面對聲源 
343.7
5 Hz 
375 
Hz 
406.25 
Hz 
437.5 
Hz 
468.75 
Hz 
500 
Hz 
-8.27
80 
-1.571
0 
5.5553 0.841
4 
8.3310 2.994
9 
-7.21
28 
-7.790
8 
12.113
5 
-7.36
68 
10.411
6 
4.406
1 
-6.42
58 
-11.99
54 
-11.83
31 
-5.28
44 
-14.40
90 
-2.92
87 
-5.64
18 
-10.95
96 
-6.835
3 
1.641
0 
-8.596
9 
-4.78
80 
觀察上列各表，可以發覺在無障礙物時，六
個頻率之 Time-Delay 呈現較均勻的分佈，變動
性較小，相反的在有障礙物的情況下，
Time-Delay 呈現較不穩定的變動，其標準差比較
大，根據這個特性，就可以利用 SVM 將這兩個
不同的情況分類出來，以達到在碰撞前就已知有
無障礙物的功能。 
 
4.4 子機與母機結合動作 
 
當母機進入子機下方，位於子機的光敏感測
器會有如圖 11 (a)之變化，此時母機便利用全向
輪特有的移動方式，平移來做微調的動作，使光
敏感測器得到較為平均的受光量，如圖 11(b)。
如此可以確保子母機上下兩端中心位置已經大
約對準，接著母機便將自己的外殼升起，與子機
結合。 
1 2 3 4 5 6 7 8
20
30
40
50
60
70
80
90
100
Sensor numbr
in
te
ns
ity
ideal
sensor
 
(b) 
1 2 3 4 5 6 7 8
20
30
40
50
60
70
80
90
100
Sensor number
in
te
si
ty
ideal
sensor
 
(a) 
圖 11. 光敏感測器感測圖 
 
圖 12. 子母機結合示意圖 
 
5. 參考文獻 
 
[1] Haruhiko Niwa, Tetsuya Ogata, Kazunori Komatani, 
and Okuno G. Hiroshi, “Distance Estimation of Hidden 
Objects Based on Acoustical Holography by applying 
Acoustic Diffraction of Audible Sound,” IEEE Int. 
Conf. on Robotics and Automation, pp.423-428, 2007. 
[2] Nissanka B. Priyantha, Anit Chakraborty, and Hari 
Balakrishnan, “The Cricket Location-Support System,” 
