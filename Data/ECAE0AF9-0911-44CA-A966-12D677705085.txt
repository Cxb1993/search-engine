1 
 
目 錄 
 
 
一、前言 ................................................................... 2 
二、文獻探討 ............................................................... 3 
三、研究方法 ............................................................... 5 
1. OVERVIEW OF ERASURE CODE BASED DATA FORWARDING ....................................................... 5 
2. EC WITH AGGRESSIVE FORWARDING......................................................................................... 6 
3. THE HYBRID APPROACH: H-EC ................................................................................................ 7 
四、研究成果 ............................................................... 7 
1. A-EC IN GENERAL NETWORK SCENARIOS .................................................................................. 8 
2. A-EC IN BLACK-HOLE SCENARIOS ............................................................................................. 9 
3. EVALUATION OF H-EC SCHEME ............................................................................................... 10 
4. OVERHEAD ANALYSIS ............................................................................................................. 11 
5. DISCUSSION............................................................................................................................. 12 
五、結論 .................................................................. 13 
六、參考文獻 .............................................................. 14 
七、專題計劃執行成果 ...................................................... 16 
1. PUBLICATIONS......................................................................................................................... 16 
2. THESIS ADVISEES .................................................................................................................... 16 
3. SOURCE CODES ....................................................................................................................... 17 
八、附錄：網路模擬器評估 .................................................. 17 
1. 商業型網路模擬器 ............................................................................................................... 17 
2. 研究型網路模擬器 ............................................................................................................... 20 
3. 特殊型網路模擬器 ............................................................................................................... 23 
 
 
 
 
 
 
 
3 
coded blocks such that the original message can be successfully reconstructed with only a certain 
number of the coded blocks. More precisely, diﬀering from replication based schemes which rely 
on successful delivery of each individual data block, coding based schemes would consider a 
block successfully delivered, when the necessary number of blocks are received to reconstruct the 
original data, this can just be a small portion of the total number of the blocks transmitted. As a 
result, coding based schemes tend to be more robust than replication based schemes when the 
network connectivity is extremely poor (this is considered as the worst delay performance cases). 
However, coding based schemes are less eﬃcient when the network is well connected (this is 
considered as the very small delay performance cases), which is simply due to additional 
information embedded in the code blocks.  
 
Nevertheless, a successful routing technique in opportunistic networks must consider both 
performance and reliably. An eﬀective routing scheme that can accommodate both worst delay 
performance and very small delay performance cases remained challenging and desirable. In this 
paper, we propose a hybrid routing scheme, called H-EC, to proficiently deliver messages in 
various opportunistic network scenarios. H-EC is designed to fully combine the robustness of 
coding based routing techniques, while preserving the performance advantages of replication 
techniques. We evaluate the performance of H-EC scheme via various simulations, and the 
results show that H-EC is capable of performing aggressively (i.e., achieving very short delivery 
latency) for very small delay performance cases and remains robust for worst delay performance 
cases. Moreover, we show that the overhead of H-EC scheme is moderate (compared with EC 
and other replication based schemes) and can be further reduced by applying several overhead 
reduction strategies.  
二、文獻探討 
Routing in an opportunistic network is challenging and remains quite unique from conventional 
network routing methods. An ideal routing scheme in opportunistic networks has to provide 
reliable data delivery even when the network connectivity is intermittent or when an end-to-end 
path is temporally nonexistent. Moreover, since ‘contacts’ in an opportunistic network may 
appear arbitrarily without prior information, neither scheduled optimal routing (e.g., linear 
programming routing in DTN of scheduled contacts [15]) nor mobile relay approaches (e.g., 
Message Ferrying [29, 30]) can be applied.  
 
For opportunistic networks, replication is the most popular design choice in existing opportunistic 
routing schemes. For instance, the Epidemic Routing scheme [23] sends identical copies of a 
message simultaneously over multiple paths to mitigate the eﬀects of a single path failure, thus 
increases the possibilities of successful message delivery. However, flooding duplicate data tends 
to be very costly in terms of traﬃc overhead and energy consumption.  
 
5 
三、研究方法 
1. Overview of Erasure Code based Data Forwarding 
In this subsection, we will give a brief overview on erasure code and a forwarding scheme 
based on erasure code, which is proposed in [25].  
 
Erasure coding is a coding scheme which provides better fault-tolerance by adding redundancy 
without the overhead of strict replication, to the original data [27]. Two most popular examples 
of erasure coding algorithms are Reed-Solomon coding and Low-Density Parity-Check (LDPC) 
based coding (e.g., Gallager codes, Tornado codes, and IRA codes) [20,21]. These algorithms 
differ in the encoding/decoding efficiency, replication factor, and the minimum number of code 
blocks to reconstruct a message. The selection of the proper erasure coding algorithm is not 
within the scope of this paper, and our work is based on the generic erasure coding concept.  
 
In generic erasure coding schemes, suppose a message is of size M bytes, the replication factor 
of erasure coding is r, and the coded message is fragmented into several blocks of identical size 
b bytes, one can obtain the number of the coded blocks by N = (M ×r)/b. Moreover, this 
message can be successfully reconstructed as long as 1/r of the coded blocks are received (i.e., 
the minimal number of coded blocks for successfully reconstructing the message is N/r, which 
is equal to M/b).  
 
In [25], an erasure code based forwarding algorithm (EC) is proposed as illustrated in Fig. 1. In 
this scheme, the erasure coded blocks are equally split among n relays, and relays are only 
allowed to send messages directly to the destination (i.e., the well-known "two-hop" scenario 
as used in [6,11]). Each relay forwards the same amount of code blocks (no duplicates in each 
relay), and the number of blocks forwarded by each relay can be obtained by  
 
bn
Mr
n
N =        (1) 
 
As reported in [25], the EC scheme is capable of providing the best worst-case delay 
performance with a fixed amount of overhead. However, the drawback of EC scheme is that it 
can not provide good very small delay performance while comparing to other popular 
replication based approaches. 
 
7 
aggressive forwarding on black-hole nodes significantly degrades the overall performance of 
the message delivery. 
3. The Hybrid Approach: H-EC 
In this subsection, we propose a hybrid erasure coding based forwarding technique, which 
takes advantages of both EC and A-EC schemes in order to achieve better message delivery 
performance in both worst delay performance and very small delay performance cases. The 
proposed hybrid scheme is abbreviated as H-EC. H-EC scheme is illustrated in Fig. 3.  
 
 
Figure 3: Illustration of H-EC scheme. In this figure, two copies of four erasure coded blocks (A,B,C,D) 
are transmitted: the first copy of EC blocks (the white blocks) is sent using EC algorithm, and the 
second copy (the gray ones) is sent using A-EC algorithm in the residual contact duration. Each coded 
block is equally split into 4 sub-blocks (n=4). 
 
More precisely, in H-EC scheme, two copies of EC blocks (constructed based on the erasure 
coding and replication technique described in subsection 2.2) are transmitted by the sender. 
The first copy of EC blocks is sent similar to how the original EC scheme does (shown as the 
white blocks in Fig. 3), and the second EC block is sent using A-EC algorithm during the 
residual contact duration after sending the first EC block (shown as the gray blocks in Fig. 3). 
For general opportunistic network scenarios (i.e., without black-hole nodes), H-EC scheme is 
expected to better utilize each contact opportunity (i.e., due to A-EC features); whereas, while 
black-hole nodes are present in the network, H-EC scheme is expected to perform similarly to 
EC scheme, which provides better forwarding performance in the worst delay performance 
cases.  
 
It should also be mentioned that the traffic overhead carried by H-EC is indeed moderate. In 
fact, since only two copies of EC blocks are sent by the source, the total amount of traffic 
consumed by H-EC scheme is just twice of the EC scheme, which should be acceptable in 
most network scenarios. 
四、研究成果 
We perform a set of simulation to evaluate the delay performance of A-EC and H-EC schemes 
in two different opportunistic network scenarios. We implement EC, A-EC, and H-EC schemes 
and run simulations in the java based DTN simulator, DTNSIM [1]. Moreover, we implement a 
simple replication based EC scheme (called R-EC), which sends EC blocks using srep 
9 
On the other hand, it should also be mentioned that with a larger k value, more traffic 
overhead will be experienced with the R-EC scheme. Therefore, it is necessary to give k an 
upper bound, this bound turns out to be the maximum number of blocks that can be sent over 
during a contact duration. The performance of R-EC, as k increases, will eventually 
converged towards the performance of A-EC scheme for the very small delay performance 
cases, since R-EC becomes A-EC when it completely utilizes all residual contact 
opportunities. In Fig. 4, while only looking at the left portion of the figure (i.e., the very 
small delay cases), A-EC does achieve shorter delivery latency than EC and the R-EC 
schemes. Nonetheless, as k increases, the performance of R-EC scheme becomes closer to 
the A-EC curve, which confirms our intuition.  
 
However, while looking at the right portion of Fig. 4, one can also observe that A-EC 
scheme has a longer tail than R-EC and EC schemes. The reason is that though the 
aggressive forwarding feature yields better utilization for each contact (and thus reduce the 
delivery delay), it is also very likely to fail if the selected relays have very large latency to 
their next contact with the destination. As a result, A-EC performs much worse than the 
other schemes in worst delay performance cases.  
2. A-EC in black-hole scenarios 
In the second experiment, we evaluate A-EC scheme in the black-hole scenario, where some 
of the relay nodes are extremely uncooperative (i.e., limited battery power, limited buffer 
size, or extremely large inter-contact time with the destination). For simplicity, we use the 
same simulation parameters as the one employed in the previous subsection, except that five 
(out of 32) relays are set as uncooperative nodes with very small buffer size (the buffer size 
is two messages size). Fig. 5 depicts the simulation results.  
 
 
Figure 5: Latency distribution (CCDF) of EC, A-EC, and R-EC (k=2 and 4) schemes in black-hole 
network scenario. 
 
11 
 
In Fig. 6, the result clearly shows that, the proposed H-EC scheme always performs 
comparably to the optimal scheme in all test cases. More precisely, in very small delay 
performance cases, the performance of H-EC scheme is almost identical to the A-EC scheme; 
whereas in the worst delay performance cases, H-EC still performs closely (but slightly 
worse) to the R-EC scheme. The results indicate that, in very small delay performance cases, 
H-EC is able to take better advantages of network communication opportunities via a more 
aggressive forwarding mechanism. Moreover, in the worst delay performance cases, H-EC 
preserves the reliability of EC and R-EC scheme, and is able to yield better delivery 
performance compare to the A-EC scheme.  
 
Additionally, for black-hole scenario, Fig. 7 shows that H-EC still performs comparably to 
A-EC in very small delay performance cases. While in worst delay performance cases, 
H-EC performs closely (yet slightly better) to EC scheme (instead of R-EC scheme). It turns 
out that, while operating with uncooperative relay nodes, the aggressive forwarding feature 
of H-EC scheme does not provide advantages in data forwarding, and therefore the 
performance converges to the EC scheme and the overall delay increases. 
4. Overhead Analysis 
Here we compare routing overhead of several erasure coding and simple replication based 
routing approaches. For simplicity, the comparison results are normalized according to 
Direct Contact (DC) scheme [25]. Only optimal cases are considered for A-EC and H-EC 
schemes (i.e., the first contact duration is long enough to forward all coded blocks). We 
denote r is the replication factor of the erasure coding algorithm employed, n is the number 
of relays among which erasure code blocks are split, and k is the replication factor employed 
in the simple replication algorithm. Table 1 shows the comparison results.  
 
Table 1: Comparison of normalized routing overhead for several erasure coding and simple 
replication based routing schemes. 
Algorithms  DC srep EC A-EC R-EC H-EC 
Overall Traffic  1  k  r  r  kr  2r 
Traffic/Relay/message 1  1  r/n r  r/n  r , r/n 
 
In Table 1, the overall traffic overhead of the simple replication based routing algorithm, 
srep, is actually proportional to the replication factor k (which denotes the number of 
identical copies injected to the network). Whereas for A-EC and EC schemes, which are 
erasure coding based schemes distinguished by the aggressive forwarding option, the overall 
overhead is proportional to the replication factor r of the employed erasure coding algorithm.  
 
13 
message. For instance, [4] and [12] have proposed Explicit ACKs and Passive Cure schemes 
to alleviate traffic overhead carried by replication.  
However, it should also be mentioned that, different from the scenarios employed in [4,12], 
messages transmitted in H-EC scheme are encoded. As a result, the implementation of either 
Explicit ACK or Passive Cure scheme has to take erasure coding into account, i.e., 
acknowledging/curing the network N erasure coded blocks at a time once [N/r] of the blocks 
have been successfully delivered, where N=[(M ×r)/b]. In addition, the forwarding of 
receiver feedbacks has to be carefully controlled as well. For instance, the Time-To-Live [12], 
Kill Time [12], or Reverse Path Forwarding [9] like methods can be employed to reduce the 
traffic overhead of receiver feedbacks.  
 
5.2. Adaptive Coding and Forwarding 
 
In addition to the "healing" based strategies, one can also reduce traffic overhead and 
improve data forwarding efficiency via adaptive coding and forwarding. More precisely, by 
adaptive coding, one can adapt the replication factor, r, of the employed erasure coding 
scheme in accordance to the observed network status. When the network connectivity is very 
poor, a larger r can provide better reliability for message delivery with the price of higher 
traffic overhead; whereas when the network connectivity is decent, choosing a smaller r can 
greatly reduce the network overhead.  
 
Moreover, with adaptive forwarding, one can also adapt the traffic volume. Instead of b 
bytes in EC scheme or the maximum deliverable data size in A-EC scheme, the deliverable 
data size can be adjusted based on a probabilistic estimate to improve the packet delivery 
chances. For instance, this probabilistic estimate can be a function of the node mobility 
pattern [17], remaining battery life, available buffer space, and etc.  
 
One should also note that the online measurement (and/or monitoring) of the network is 
required for cooperating the adaptive coding and forwarding scheme, e.g., measuring the 
mobility pattern, and probing the battery life and buffer space. It turns out that additional 
computation and traffic overhead are still necessary, thus these schemes must be carefully 
used and designed in order to improve the data forwarding efficiency. 
五、結論 
An eﬀective data forwarding scheme is essential for opportunistic networks, as communication 
opportunities in such challenged networks are opportunistic and precious. In this project, we 
proposed a hybrid scheme, called H-EC, which combines the strength of erasure coding and the 
advantages of aggressive forwarding. With simulations, we evaluated the performance of H-EC, 
EC, and R-EC schemes in terms of delivery ratio and latency. The results indicated that HEC 
15 
[14] P. Hui, A. Chaintreau, J. Scott, R. Gass, J. Crowcroft, and C. Diot. Pocket switched 
networks and human mobility in conference environments. In ACM SIGCOMM Workshop on 
Delay Tolerant Networks, 2005.  
[15] S. Jain, K. Fall, and R. Patra. Routing in a delay tolerant network. In ACM SIGCOMM, 
2004.  
[16] J. LeBrun, C.-N. Chuah, and D. Ghosal. Knowledge based opportunistic forwarding in 
vehicular wireless ad hoc networks. In IEEE VTC Spring, 2005.  
[17] J. Leguay, T. Friedman, and V. Conan. Dtn routing in a mobility pattern space. In ACM 
SIGCOMM Workshop on Delay Tolerant Networks, 2005.  
[18] A. Lindgren and A. Doria. Probabilistic routing protocol for intermittently connected 
networks. Technical report, draft-lindgren-dtnrg-prophet-01.txt,. IETF Internet draft, July 
2005.  
[19] A. Lindgren, A. Doria, and O. Schelen. Probabilistic routing in intermittently connected 
networks. ACM SIGMOBILE Mobile Computing and Communications Review, 7(3):19{20, 
July 2003. 
[20] M. G. Luby, M. Mitzenmacher, M. A. Shokrollahi, and D. A. Spielman. Eﬃcient erasure 
correcting codes. IEEE Transactions on Information Theory, 47(2):569–584, February 2001.  
[21] J. S. Plank and M. G. Thomason. A practical analysis of low-density parity-check erasure 
codes for wide-area storage applications. In The International Conference on Dependable 
Systems and Networks. IEEE, June 2004.  
[22] D. Snowdon, N. Glance, and J.-L. Meunier. Pollen: using people as a communication 
medium. Elsevier Computer Networks, 35(4):429–442, February 2001.  
[23] A. Vahdat and D. Becker. Epidemic routing for partially-connected ad hoc networks. 
Technical Report CS-2000-06, Duke University, July 2000.  
[24] R. Y. Wang, S. Sobti, N. Garg, E. Ziskind, J. Lai, and A. Krishnamurthy. Turning the postal 
system into a generic digital communication mechanism. In ACM SIGCOMM, 2004.  
[25] Y. Wang, S. Jain, M. Martonosi, and K. Fall. Erasure coding based routing for opportunistic 
networks. In ACM SIGCOMM Workshop on Delay Tolerant Networks, 2005.  
[26] Y. Wang and H. Wu. Dft-msn: The delay fault tolerant mobile sensor network for pervasive 
information gathering. In IEEE Infocom, 2006.  
[27] H. Weatherspoon and J. D. Kubiatowicz. Erasure coding vs. replication: A quantitative 
comparison. In The 1st International Workshop on Peer-to-Peer Systems, March 2002.  
[28] J. Widmer and J.-Y. L. Boudec. Network coding for eﬃcient communication in extreme 
networks. In ACM SIGCOMM Workshop on Delay Tolerant Networks, 2005.  
[29] W. Zhao, M. Ammar, and E. Zegura. A message ferrying approach for data delivery in 
sparse mobile ad hoc networks. In ACM MobiHoc, 2004.  
[30] W. Zhao, M. Ammar, and E. Zegura. Controlling the mobility of multiple data transport 
ferries in a delay-tolerant network. In IEEE Infocom, 2005.  
17 
– Chia-Huei Chang, M.S., NTU, 2007 
Thesis title: "Adaptive Network Coding Based Routing in Delay-Tolerant Networks"  
– Cheng-Long Tseng, M.S., NTU, 2007 
Thesis title: "On Using Probabilistic Forwarding to Improve Data Transfer in 
Opportunistic People Networks"  
– Chen-Hung Yu, M.S., NTU, 2007 
Thesis title: "Effective Data and Video File Transfer in Opportunistic Networks"  
– Jyh-Wei Sung, M.S., NTU, 2007 
Thesis title: "Path Capacity Estimation in Time-slotted Wireless Networks"  
3. Source Codes 
– HEC codes for DTNSIM simulator. http://nrl.iis.sinica.edu.tw/DTN/download/ 
– Utility tools for mobility trace analysis. http://nrl.iis.sinica.edu.tw/DTN/download/ 
八、附錄：網路模擬器評估 
當一個新的網路機制或者是協定被提出後，我們需一些模擬程序去評估，同時驗證這些理
論，以確保未來實作這些系統時，能夠減低實作與理論上誤差所浪費的時間，同時達到原
始設計的效能。 
 
另一方面，模擬不但能對實驗的假設進行驗證，同時能夠確保實驗進行前分析的真實性。
然而，對於各種不同測試環境所遭遇到的實驗問題，我們並無法一一去實作它們；因此，
選擇一個好的網路模擬器進行來對我們實驗進行分析以及評估，是相對重要課題。 
 
以下，我們將針對目前較為著名的網路模擬工具進行評估。現行網路模擬器，主要分為三
大類：商業型模擬、研究型模擬，以及特殊功能模擬。 
 
1. 商業型網路模擬器 
a. OPNET (Optimized Network Engineering Tool) 
OPNET 主要針對網路規格(Specification)、模擬以及通訊網路效能分析提供完整的
開發環境，同時適用於各種有線網路以及與 802.11 相容的環境，並支援區域網路
(Local Area Network)至全球衛星網路(Global Satellite Network)等不同規模的通訊
網路。 
 
在這套模擬工具中，主要由三項行為模型主導：網路模型(Network Model)、節點
模型(Node Model)，以及程序模型(Process Model)。而 OPNET 允許一個通訊協定，
19 
行假設數目的限制，且具有較真實且精確的結果。 
限制：原始碼並不開放，新的模組加入困難；僅提供套件中的網路通訊協定，使
用者亦無法針對系統進行修改。 
 
c. REAL (REalistic and Large) 
此網路模擬工具原始設計用途為動態分析資料在封包交換網路中，其流向以及壅
塞情形。它提供了 30 種模組(Modules)可以模擬各種現行的流量控制協定(例如
TCP)；同時也提供了 5 種研究排程的方法(如 Fair queuing/Hierarchical Round 
Robin)。  
 
在這套模擬工具中，相對於約 30 種資料傳輸協定(Transport Protocol)，提供了近
30 種資料種類(Source Types)的選擇；這些資料來源，可以分為兩大類：流量控制
(Flow-Controlled)及無流量控制(Non-Flow-Control)的資料來源。同時 REAL 具有
JAVA 的使用者介面(Graphical User Interface)方便使用者操作。 
 
廠商：S. Keshav (Cornell University) 
支援：TCP/IP、XNS、FTP、Telnet、FIFO、FCFS、Fair Queuing、DEC congestion 
avoidance and Hierarchical Round Robin 
語言：C 與 JAVA(GUI 部分) 
優點：使用者圖形介面(GUI)可以讓使用者快速地建立起他們要模擬的環境；同時
對於欲針對不同環境而修改程式的使用者而言，REAL 提供原始碼以便使
用者增修。 
限制：某些情況下，對於時間計數(Timer)會產生無法重設的限制；對於一些普通
通訊協定，在實作中有所遺漏，同時僅利用一些程式去模擬某些通訊協定的
主要特性，而非支援所有細節項目。 
 
d. SSF (Scalable Simulation Framework) 
SSF 是一套以稱之為 Domain Modeling Language (DML)的語言描述而成，主要用
以對大規模網路提出模型的模擬工具。這套模擬軟體亦可執行於共享記憶體
(Shared Memory)、對稱多處理器(Symmetric Multiprocessor)的分散式環境中，同時
所有的處理器接經由同步循環(Synchronization Cycle)以確保可以正確且安全地執
行所有程序。 
 
SSF 支援多對一群體廣播頻道(Multicast in-channel)、一對多群體廣播頻道
(Multicast out-channel)以及多對多的頻道對照(Bus-Style Channel Mapping)，同時
SSF 亦已被證明可針對數十萬點的網路節點架構中進行模擬。 
 
廠商：Renesys Corporation 
支援：傳輸控制協定(Transmission Control Protocol, TCP)、使用者資料包通訊協定
(User Datagram Protocol, UDP)以及邊界閘道協定(Boarder Gateway Protocol, 
BGP)。 
21 
(Hypertext Transport Protocol, HTTP)、柏拉圖/指數分佈(Pareto/Exponential 
Distribution)、有線、無線網路以及單點/群體廣播(unicast/multicast)。 
語言：C++以及 OTcl 
優點：使用者可以手動或者經由寫程式進行網路模型設計，同時可以節由兩種不
同語言(C++跟 OTcl)，快速地進行系統設定及模擬。另一方面，NS-2 使用
者可以較為容易地實作出想要的通訊協定，同時亦可藉由開放原始碼，得
以進行功能擴充。 
限制： 使用者必須花較長時間才能習慣整套系統，而且並不提供大規模的網路環
境模擬(如 Internet)，加以應用程序介面(Application Programming Interface)
不夠完整，同時對於使用者移動性以及網路頻道(channel)分享並不直接支
援。 
 
b. Network Workbench 
這套網路模擬工具，包含了完整的通訊協定堆疊(Protocol Stack)；而其主要目的，
為提供學術界針對網際網路通訊協定研究之用。自 1994 年至 1998 年，已有 4 種
不同版本，同時基於網際網路架構概念，包含了五層式架構：應用層(Application 
Layer)、傳輸層(Transport Layer)、資料鏈結控制層(Datalink Control Layer)、物理
層(Physical Layer)。 
 
提供：J. Mark Pullen 
支援：網路拓蹼(Network Topology)、數位迴路載波錯誤控制(DLC error control)、
載波感測多重存取偵測碰撞(Carrier Sense Multiple Access/Collision 
Detection, CSMA/CD)、路由最佳化計算(Optimal Route Computation)、可靠
性傳輸(Reliable Transport)、群體廣播(Multicast)以及區域/廣域網路
(LAN/WAN)整合；光纖分散數據介面(Fiber Distributed Data Interface, 
FDDI)、開放式最短路徑優先(Open Shortest Path First, OSPF)、乙太網路
(Ethernet)以及傳輸控制協定(Transmission Control Protocol/ Internet Protocol, 
TCP/IP)。 
語言：C++ 
限制：通訊協定的實作上，具有高度限制。 
 
c. NetSim (MIT’s Network Simulator) 
這是一套針對離散事件的單一程序模擬工具，主要用於區域網路(Local Area 
Network)研究之用。其主要訴求有三： 
1) 讓使用者在設計網路架構及流量的實驗時，能夠更具彈性。 
2) 對於乙太網路(Ethernet)實驗的模擬過程，能夠更佳精確。 
3) 針對相關系列的執行程序，能使實驗流程更佳簡便。 
在 NetSim 中，提供了五種不同的流量分佈供使用者進行模擬，包括了指數分佈
(Exponential Distribution)、離散型均勻分佈(Uniform Distribution)、定然分佈
(Deterministic Distribution)、連續佇列分佈(Continuously Queued Distribution)以及使
用者定義離散分佈(User Defined Discrete Distribution)。 
23 
Transfer Protocol, FTP)、終端機模擬程式(Telnet)、網路負荷(Workload)。 
語言：C 
限制：對於網路傳輸層(Transport Layer)以及應用資料來源模型(Application Source 
Model)的功能非常稀少；另外僅提供非常基礎的使用者圖形介面(Graphical 
User Interface, GUI)，且因操作視窗設計不良，導致使用者對於模擬的操作
大受限制。 
 
e. PDns (Parallel/Distributed network simulator) 
這套模擬工具，由傳統網路模擬器 ns 的延伸所建構而成，同時允許眾多現存於 ns
的功能，在不需要改變太多設定的前提下，可以正常地運作在分散式的網路環境
中。 
 
PDns 的實作過程中，因有許多已經存在的 ns 模型(Models)，無須再修改而可直接
利用。PDns 的延伸模擬中，包含了一項新穎的封包路由(Packet Routing)技術，使
路由路徑決定過程中，不需要路由表(Routing Table)，因之可以節省大量的記憶體
資源。而這項技術，稱之為 Nixvector。 
 
針對路由方面，網路中的節點於模擬開始時會先建立路由表(Routing Table)，而當
模擬過程中即利用邊界閘道協定(Boarder Gateway Protocol, BGP)去蒐集動態路由
資訊(Dynamic Routing Information)去調整模擬過程中的網路拓蹼(Network 
Topology)的改變。 
 
提供： The PADS research group at Georgia Institute of Technology 
優點：可提供大規模的擬環境，同時支援網路節點擁有 IP 位置。 
 
3. 特殊型網路模擬器 
a. ATM-TN (ATM Traffic and Network simulator) 
這套模擬工具主要設計用途為觀測網路中封包詳細的行為，其包含了三種主要的
流量來源模型(Traffic Source Model)：聚合乙太網路模型(Aggragated Ethernet 
Model)、影像標準模型(MPEG Model)及全球資訊網交易模型(World Wide Web 
Transaction Model)；同時亦包含了諸如輸出緩衝(Output Buffered)、記憶體分享緩
衝(Shared Memory Buffered) 及交叉交換(Cross Bar Switch)等 ATM 交換架構的模
型。此外 ATM-TN 亦可用來模擬流通在各種的 ATM 網路上的動態多媒體資料
(Dynamic Multimedia Traffic)。 
 
ATM-TN 所使用的語言是一種稱之為 SimKit 的簡易模擬用途的程式語言，用以支
援快速且大量的順序(Sequential)以及平行(Parallel)執行程序；而平行執行的部分，
亦使用一項最佳化同步 (Optimistically Synchronized Kernel)的核心程式，稱之為
WarpKit，使之可在共享記憶體的多處理器平台(Shared Memory Multiple-Processor 
25 
合網路(Hybrid Network)功能進行擴充。在 GloMoSim 中，需提供六種輸入檔以進
行網路模擬：設定檔(Configuration File)、節點檔(Nodes File)、移動檔(Mobility 
File)、路由器檔(Routers File)、應用檔(Application File)及位元錯誤率檔
(Bit-Error-Rate File)。 
 
支援：傳輸控制協定(Transmission Control Protocol, TCP)系列、使用者資料包通訊
協定(User Datagram Protocol, UDP)、固定位元速率(Constant Bit Rate, 
CBR)、檔案傳輸協定(File Transfer Protocol, FTP)、超文件傳輸協定
(Hypertext Transport Protocol, HTTP)、IEEE 802.11 系列。 
語言：C、JAVA 
優點：設定容易，且模擬快速，同時許多通訊協定已經內建，並有完善的說明文
件。在操作介面上，動態的模擬行為，可藉由視覺操作工具(Visualization Tool)
進行觀察，並且支援大規模模擬環境。再者，GloMoSim 開放原始碼，有
利於將來進行功能的擴充。 
限制：有線網路的部分尚未包含在 GloMoSim 中，而且所提供的應用程式介面
(Application Programming Interface, API)並不完整。 
 
c. DTNSim (Delay Tolerant Network Simulator) 
DTNsim 是專門用於耐延遲網路(Delay Tolerant Networks, DTN)的模擬器，有別於
一般的網路模擬工具，此程式針對儲存再傳送(Store and Forward)的網路架構。由
於在 DTN 中，點與點間並不一定永遠存在完整的路徑，所以路由方式必須靠著網
路中的節點以先儲存，待稍後遇到其它節點再傳送的方式，將資料一步一步傳遞
出去。 
 
隨著實驗時間的前進，DTNSim 會根據每個發生的事件去作模擬。使用者只須利
用簡單的描述指令(Script)去描述欲模擬的網路，包括網路中的節點，其儲存空間
大小(Buffer Size)，以及節點間的連線關係以及路由方式；最後 DTNsim 讀入這些
參數(Parameter)後，按照事件發生順序呼叫相關物件，再將模擬的結果寫到紀錄
檔(Log)中。 
 
DTNSim 的路由(Routing)方式，主要藉由首次接觸(First Contact, FC)法以及計算期
望延遲(Expected Delay, ED)。在 FC 中，只要當兩個節點彼此在傳輸範圍內，就會
立刻傳輸資料；而 ED 則是需要先知道網路中節點間的連線情況，再根據不同的
權重(Weight)，去計算每個資料的傳送路徑。目前實作上，權重部分有根據傳遞節
點數(Hop Number)、延遲時間(Delay Time)以及佇列時間(Queuing Time)。 
 
提供：Sushant Jain at University of Washington 
支援：首次接觸(First Contact)、期望延遲(Expected Delay) 
語言：JAVA 
優點：開放原始碼，同時具有良好的說明文件(Document)，使用者可以輕易地修
改並實做新的路由演算法。模擬器以物件導向程式語言(Object Oriented 
 
出席國際會議報告 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
會議名稱：2006 ACM SIGCOMM 
會議時間：2006 年 9 月 11 日至 15 日 
會議地點：Pisa, Italy 
出席人員：中央研究院資訊科學研究所 陳伶志助研究員 
贊助單位：國科會 
計劃題目：耐延遲網路之路由解決方案 
計劃編號：NSC 95-2221-E-001-025 
在無線行動網路領域中，已有許多知名的論文發表，具有一定的學術地位，藉由
這次聆聽其演講，不但從中獲得許多新的觀念，對於個人未來的研究具有啟發作
用，更重要的是利用演講的空檔，本人與 Dr. Bahl 有簡短的討論機會，面對面地
溝通了幾項研究議題，得到不少寶貴意見，當為此行最大收獲之一。 
會議的第二天到第四天是本次 SIGCOMM 會議的主軸。37 篇論文依照其性質
被分為 11 大主題，每一主題皆至少有兩篇至四篇的論文進行發表。值得一提的
是，由於 SIGCOMM 在學術界的重要地位，本次會議有將超過 500 位來自世界
各地的學者參與，因此每一篇發表的論文，在單一 session 的會議型式中，皆必
需接受與會人士們大量的問題提問，不僅如此，本次大會更首次採用網路討論的
方式，開放所有相關研究人員，利用網際網路參與論文的討論，以確保所有論文
主題皆能被充份討論，更確保會議本身之公正、客觀、與內容之正確完整性。 
本次會議的第五天安排了兩場 Workshop，其中本人參加(並發表論文)的是
CHANTS Workshop (i.e., Workshop on Challenged Networks)。這個 Workshop 主要
是探討一個新型態的網路情境，稱為耐延遲網路(Delay Tolerant Networks)。在這
類的網路環境中，所有的網路連線皆是不可預期、斷斷續續的，因此所有傳統的
網路協定皆無法適用於此類環境當中。然而，隨著網路需求的增加，人們已逐漸
發現在許多類似的情境中，仍然存有進行網路連線的需要，而一個可靠的傳輸協
定卻仍然是充滿挑戰與缺乏的。 
這個 Workshop 今年已是第二次主辦，而我們的論文是這兩年來第一篇來自亞
洲的論文，其它收錄的論文則主要來自歐洲與美國。由於耐延遲網路的研究仍處
於新興的階段，因此利用這次參與會議的機會，除了介紹我們最新的研究成果讓
與會人士分享外，本人更努力和所有與會人士進行彼此研究經驗的分享，以及討
論未來可能的合作事宜。更重要的是，藉由這次與會，不但打進這個研究社群，
更提前知道了許多這個研究社群在未來一年內的許多研究合作計劃，以及可能的
期刊會議資訊，真可謂是本行最大的收獲。 
 
 
A Hybrid Routing Approach for Opportunistic Networks
Ling-Jyh Chen Chen-Hung Yu Tony Sun Yung-Chih Chen Hao-hua Chu
Academia Sinica National Taiwan University UCLA Academia Sinica National Taiwan University
cclljj@iis.sinica.edu.tw r94922140@ntu.edu.tw tonysun@cs.ucla.edu ycchen@iis.sinica.edu.tw haochu@ntu.edu.tw
ABSTRACT
With wireless networking technologies extending into the
fabrics of our working and operating environments, proper
handling of intermittent wireless connectivity and network
disruptions is of significance. As the sheer number of poten-
tial opportunistic application continues to surge (i.e. wire-
less sensor networks, underwater sensor networks, pocket
switched networks, transportation networks, and etc.), the
design for an effective routing scheme that considers and ac-
commodates the various intricate behaviors observed in an
opportunistic network is of interest and remained desirable.
While previous solutions use either replication or coding
techniques to address the challenges in opportunistic net-
works, the tradeoff of these two techniques only make them
ideal under certain network scenarios. In this paper, we
propose a hybrid scheme, named H-EC, to deal with a wide
variety of opportunistic network cases. H-EC is designed to
fully combine the robustness of erasure coding based routing
techniques, while preserving the performance advantages of
replication techniques. We evaluate H-EC against other sim-
ilar strategies in terms of delivery ratio and latency, and find
that H-EC offers robustness in worst-case delay performance
cases while achieving good performance in small delay per-
formance cases. We also discuss the traffic overhead issues
associated with H-EC as compared to other schemes, and
present several strategies that can potentially alleviate the
traffic overhead of H-EC schemes.
Categories and Subject Descriptors
C.2.2 [Network Protocols]: Routing protocols
General Terms
Algorithms, Performance, Theory.
Keywords
Erasure Coding, Hybrid Approach, Opportunistic Networks,
Routing.
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for profit or commercial advantage and that copies
bear this notice and the full citation on the first page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior specific
permission and/or a fee.
SIGCOMM’06 Workshops September 11-15, 2006, Pisa, Italy.
Copyright 2006 ACM 1-59593-417-0/06/0009 ...$5.00.
1. INTRODUCTION
With prevalent adaptation and usage of wireless com-
munication technologies, networking challenges evolve when
continuous network connectivity cannot be guaranteed. For
these challenged networking environments such as found in
mobile in-motion networks and dynamic wireless networks,
network connectivity are rather opportunistic in nature. Tech-
niques for making applications tolerant to disruptions and/or
high delays are essential for these opportunistic networks.
Opportunistic networks is a type of challenged networks,
where communication opportunities (contacts) are intermit-
tent, an end-to-end path between the source and the desti-
nation may have never existed, disconnection and reconnec-
tion is common, or link performance is highly variable or
extreme. Therefore, traditional MANET and Internet rout-
ing techniques can not be directly applied towards networks
in this category. With numerous emerging opportunistic
networking applications, such as wireless sensor networks
(WSN) [3, 26], underwater sensor networks (UWSN) [8],
pocket switched networks (PSN) [6, 7, 14], people networks
[10, 22, 24], transportation networks [2, 4, 16], and etc., it
remains desirable/necessary to develop an effective routing
scheme that can better accommodate the various character-
istics of opportunistic networks.
Several routing schemes have been previously proposed for
opportunistic network scenarios [4, 12, 17, 19, 23, 25, 28], all
aimed at resolving specific routing problems in opportunistic
networks. These routing schemes can be grouped into two
main categories according to their basic technical strategies,
which are replication based and coding based.
Replication based routing schemes are the most popular
design choice in existing opportunistic routing schemes. The
basic idea of replication based schemes is to inject multi-
ple identical copies of data into the network, and rely on
node mobility to disseminate the data toward the destina-
tion [23]. A message is regarded to be successfully delivered
when at least one of the multiple copies is received by the
destination. Intuitively, if the number of replica in the net-
work is sufficiently large, replication based schemes tend to
achieve the best delay performance (i.e., the shortest deliv-
ery latency) in opportunistic networks. However, the main
drawback of this type of schemes is the tremendous traffic
overhead associated with flooding data replicates. As a re-
sult, when network resources (e.g., buffer space and network
bandwidth) are limited, replication based schemes tend to
degrade performance reliability (i.e, the delivery ratio) un-
less additional overhead reduction strategies are in place to
alleviate traffic overhead [4, 12, 17, 19].
Figure 1: Illustration of the erasure coding based data forwarding algorithm (EC). In this figure, one erasure
coded block (A) is equally split among four relays (n = 4).
Figure 2: Illustration of the A-EC scheme, i.e., EC with aggressive forwarding. In this figure, four erasure
coded blocks (A,B,C,D) are transmitted, and n = 4.
2.2 Overview of Erasure Code based Data For-
warding
In this subsection, we will give a brief overview on erasure
code and a forwarding scheme based on erasure code, which
is proposed in [25].
Erasure coding is a coding scheme which provides better
fault-tolerance by adding redundancy without the overhead
of strict replication, to the original data [27]. Two most
popular examples of erasure coding algorithms are Reed-
Solomon coding and Low-Density Parity-Check (LDPC) based
coding (e.g., Gallager codes, Tornado codes, and IRA codes)
[20, 21]. These algorithms differ in the encoding/decoding
efficiency, replication factor, and the minimum number of
code blocks to reconstruct a message. The selection of the
proper erasure coding algorithm is not within the scope of
this paper, and our work is based on the generic erasure
coding concept.
In generic erasure coding schemes, suppose a message is
of size M bytes, the replication factor of erasure coding is r,
and the coded message is fragmented into several blocks of
identical size b bytes, one can obtain the number of the coded
blocks by N = M×r
b
. Moreover, this message can be suc-
cessfully reconstructed as long as 1
r
of the coded blocks are
received (i.e., the minimal number of coded blocks for suc-
cessfully reconstructing the message is N/r, which is equal
to M/b).
In [25], an erasure code based forwarding algorithm (EC)
is proposed as illustrated in Fig. 1. In this scheme, the
erasure coded blocks are equally split among n relays, and
relays are only allowed to send messages directly to the des-
tination (i.e., the well-known “two-hop” scenario as used in
[6, 11]). Each relay forwards the same amount of code blocks
(no duplicates in each relay), and the number of blocks for-
warded by each relay can be obtained by
N
n
=
Mr
bn
(1)
As reported in [25], the EC scheme is capable of providing
the best worst-case delay performance with a fixed amount
of overhead. However, the drawback of EC scheme is that
it can not provide good very small delay performance while
comparing to other popular replication based approaches.
3. EFFECTIVE ROUTING APPROACHES
FOR OPPORTUNISTIC NETWORKS
In this section, we will discuss issues of effective routing in
opportunistic networks. Ideally, an effective routing scheme
not only has to provide better delivery latency in both worst
delay performance and very small delay performance cases,
but it also needs to remain moderate without injecting too
much traffic overhead to the network. In the following sub-
sections, we first present the routing algorithm, called A-EC,
by extending EC algorithm with the aggressive forwarding
technique in subsection 3.1. We then describe our proposed
hybrid routing algorithm, called H-EC, in subsection 3.2.
3.1 EC with Aggressive Forwarding
As we have mentioned earlier, the EC scheme has at-
tracted attentions from researchers due to its abilities to
achieve better worst case delay performance in opportunis-
tic networks; whereas, in most non-worst cases, the resulting
prolonged overall delivery latency is the main drawback of
the EC scheme.
The reason for such inefficiency in the EC scheme con-
cerning non-worst delay performance cases lies in its block
allocation method. In EC scheme, the number of transmit-
ting blocks in each contact is a fixed number (i.e., Mr
bn
, in
accordance with Eq. 1) regardless of the length of each con-
tact duration. As a result, EC scheme can only effectively
utilize each network contact when the contact duration is
not much longer than the required time for sending the re-
layed data. If most network contact is much larger than the
required time, EC scheme tends to waste the residual con-
tact duration and thus results in ineffectiveness as illustrated
in Fig. 1.
Aiming at this problem, one can easily adapt the EC
scheme with an aggressive forwarding feature, which does its
best to fully utilize each contact opportunity. The adapted
scheme is called A-EC scheme, and we illustrate the scheme
in Fig. 2.
As shown in Fig. 2, the source sends as many coded blocks
as possible during each contact (totally Mr
bn
blocks, i.e., Mr
n
bytes). As a result, for very small delay performance cases,
A-EC scheme is able to better utilize the network contact
and thus expected to outperform EC scheme.
Figure 5: Latency distribution (CCDF) of EC, A-
EC, and R-EC (k=2 and 4) schemes in black-hole
network scenario.
when k=2, and within 30,000 seconds when k=4. It turns
out that the larger k is, the better delivery performance R-
EC achieves.
On the other hand, it should also be mentioned that with
a larger k value, more traffic overhead will be experienced
with the R-EC scheme. Therefore, it is necessary to give k
an upper bound, this bound turns out to be the maximum
number of blocks that can be sent over during a contact du-
ration. The performance of R-EC, as k increases, will even-
tually converged towards the performance of A-EC scheme
for the very small delay performance cases, since R-EC be-
comes A-EC when it completely utilizes all residual contact
opportunities. In Fig. 4, while only looking at the left por-
tion of the figure (i.e., the very small delay cases), A-EC
does achieve shorter delivery latency than EC and the R-
EC schemes. Nonetheless, as k increases, the performance
of R-EC scheme becomes closer to the A-EC curve, which
confirms our intuition.
However, while looking at the right portion of Fig. 4,
one can also observe that A-EC scheme has a longer tail
than R-EC and EC schemes. The reason is that though
the aggressive forwarding feature yields better utilization
for each contact (and thus reduce the delivery delay), it is
also very likely to fail if the selected relays have very large
latency to their next contact with the destination. As a
result, A-EC performs much worse than the other schemes
in worst delay performance cases.
4.2 A-EC in black-hole scenarios
In the second experiment, we evaluate A-EC scheme in
the black-hole scenario, where some of the relay nodes are
extremely uncooperative (i.e., limited battery power, lim-
ited buffer size, or extremely large inter-contact time with
the destination). For simplicity, we use the same simulation
parameters as the one employed in the previous subsection,
except that five (out of 32) relays are set as uncooperative
nodes with very small buffer size (the buffer size is two mes-
sages size). Fig. 5 depicts the simulation results.
The results are basically consistent with what is shown in
the previous subsection (Fig. 4), except that A-EC scheme
suffers from more serious overall delivery delay in the black-
Figure 6: Latency distribution (CCDF) of EC, A-
EC, R-EC (k=2) and H-EC schemes in general net-
work scenarios.
Figure 7: Latency distribution (CCDF) of EC, A-
EC, R-EC (k=2) and H-EC schemes in black-hole
network scenarios.
hole scenario, as illustrated by the heavy tail of A-EC in
Fig. 5. More precisely, in the black-hole scenario, the results
shows that around 5% of messages will not be successfully
delivered after 300,000 seconds; whereas, in the general sce-
nario, all messages are successfully delivered within 200,000
seconds. It turns out that, while black-hole nodes present,
A-EC scheme is very likely to fail in providing reliable data
delivery in opportunistic networks.
4.3 Evaluation of H-EC scheme
Here, we evaluate our proposed H-EC scheme in both gen-
eral and black-hole scenarios. The simulation parameters
(for both cases) employed here are the same as the ones em-
ployed in previous subsections. We compare the simulation
results of EC, A-EC, R-EC (with k=2, which has the same
amount of overhead as H-EC scheme), and H-EC schemes
in Fig. 6 and 7.
In Fig. 6, the result clearly shows that, the proposed
H-EC scheme always performs comparably to the optimal
scheme in all test cases. More precisely, in very small de-
network N erasure coded blocks at a time once N
r
of the
blocks have been successfully delivered, where N = M×r
b
.
In addition, the forwarding of receiver feedbacks has to be
carefully controlled as well. For instance, the Time-To-Live
[12], Kill Time [12], or Reverse Path Forwarding [9] like
methods can be employed to reduce the traffic overhead of
receiver feedbacks.
5.2.2 Adaptive Coding and Forwarding
In addition to the “healing” based strategies, one can also
reduce traffic overhead and improve data forwarding effi-
ciency via adaptive coding and forwarding. More precisely,
by adaptive coding, one can adapt the replication factor,
r, of the employed erasure coding scheme in accordance to
the observed network status. When the network connectiv-
ity is very poor, a larger r can provide better reliability for
message delivery with the price of higher traffic overhead;
whereas when the network connectivity is decent, choosing
a smaller r can greatly reduce the network overhead.
Moreover, with adaptive forwarding, one can also adapt
the traffic volume. Instead of b bytes in EC scheme or the
maximum deliverable data size in A-EC scheme, the deliv-
erable data size can be adjusted based on a probabilistic
estimate to improve the packet delivery chances. For in-
stance, this probabilistic estimate can be a function of the
node mobility pattern [17], remaining battery life, available
buffer space, and etc.
One should also note that the online measurement (and/or
monitoring) of the network is required for cooperating the
adaptive coding and forwarding scheme, e.g., measuring the
mobility pattern, and probing the battery life and buffer
space. It turns out that additional computation and traf-
fic overhead are still necessary, thus these schemes must be
carefully used and designed in order to improve the data
forwarding efficiency.
6. CONCLUSION
An effective data forwarding scheme is essential for oppor-
tunistic networks, as communication opportunities in such
challenged networks are opportunistic and precious. In this
paper, we proposed a hybrid scheme, called H-EC, which
combines the strength of erasure coding and the advantages
of aggressive forwarding. With simulations, we evaluated
the performance of H-EC, EC, and R-EC schemes in terms
of delivery ratio and latency. The results indicated that H-
EC scheme is able to perform aggressively (similar to A-EC
scheme) for very small delay performance cases and remain
robust (similar to EC and R-EC schemes) for worst-case
delay performance cases. The performance advantages are
quite remarkable when the network encompasses black-holes
nodes. We also discussed several strategies that can poten-
tially alleviate the traffic overhead carried by H-EC scheme
(and other EC based ones). The effectiveness and robustness
of H-EC render it an ideal solution that can go a long way
toward effective data forwarding in opportunistic networks.
7. REFERENCES
[1] Delay tolerant network simulator.
www.cs.washington.edu/homes/sushjain/pubs2/dtnsim.tar.gz.
[2] Umassdieselnet. http://prisms.cs.umass.edu/diesel/.
[3] The zebranet wildlife tracker.
http://www.princeton.edu/ mrm/zebranet.html.
[4] J. Burgess, B. Gallagher, D. Jensen, and B. N. Levine.
Maxprop: Routing for vehicle-based
disruption-tolerant networking. In IEEE Infocom,
2006.
[5] T. Camp, J. Boleng, and V. Davies. A survey of
mobility models for ad hoc network research. Wireless
Communication and Mobile Computing Journal,
2(5):483–502, 2002.
[6] A. Chaintreau, P. Hui, J. Crowcroft, C. Diot, R. Gass,
and J. Scott. Pocket switched networks: Real-world
mobility and its consequences for opportunistic
forwarding. Technical Report UCAM-CL-TR-617,
University of Cambridge, Computer Laboratory,
February 2005.
[7] A. Chaintreau, P. Hui, J. Crowcroft, C. Diot, R. Gass,
and J. Scott. Impact of human mobility on the design
of opportunistic forwarding algorithms. In IEEE
Infocom, 2006.
[8] J.-H. Cui, J. Kong, M. Gerla, and S. Zhou.
Challenges: Building scalable mobile underwater
wireless sensor networks for aquatic applications.
IEEE Network, Special Issue on Wireless Sensor
Networking, May 2006.
[9] Y. Dalal and R. Metcalfe. Reverse path forwarding of
broadcast packets. Communications of the ACM,
21:1040–1048, December 1978.
[10] J. A. Davis, A. H. Fagg, and B. N. Levine. Wearable
computers as packet transport mechanisms in
highly-partitioned ad-hoc networks. In IEEE Intl.
Symp. on Wearable Computers, 2001.
[11] M. Grossglauser and D. Tse. Mobility increases the
capacity of ad-hoc wireless networks. In IEEE
Infocom, 2001.
[12] K. A. Harras, K. C. Almeroth, and E. M.
Belding-Royer. Delay tolerant mobile networks
(dtmns): Controlled flooding in sparse mobile
networks. In IFIP Networking, 2005.
[13] X. Hong, M. Gerla, R. Bagrodia, and G. Pei. A group
mobility model for ad hoc wireless networks. In ACM
International Workshop on Modeling, Analysis and
Simulation of Wireless and Mobile Systems
(MSWiM), 1999.
[14] P. Hui, A. Chaintreau, J. Scott, R. Gass, J. Crowcroft,
and C. Diot. Pocket switched networks and human
mobility in conference environments. In ACM
SIGCOMM Workshop on Delay Tolerant Networks,
2005.
[15] S. Jain, K. Fall, and R. Patra. Routing in a delay
tolerant network. In ACM SIGCOMM, 2004.
[16] J. LeBrun, C.-N. Chuah, and D. Ghosal. Knowledge
based opportunistic forwarding in vehicular wireless
ad hoc networks. In IEEE VTC Spring, 2005.
[17] J. Leguay, T. Friedman, and V. Conan. Dtn routing in
a mobility pattern space. In ACM SIGCOMM
Workshop on Delay Tolerant Networks, 2005.
[18] A. Lindgren and A. Doria. Probabilistic routing
protocol for intermittently connected networks.
Technical report, draft-lindgren-dtnrg-prophet-01.txt,
IETF Internet draft, July 2005.
[19] A. Lindgren, A. Doria, and O. Schelen. Probabilistic
routing in intermittently connected networks. ACM
SIGMOBILE Mobile Computing and Communications
 
出席國際會議報告 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
會議名稱：2006 ACM SIGCOMM 
會議時間：2006 年 9 月 11 日至 15 日 
會議地點：Pisa, Italy 
出席人員：中央研究院資訊科學研究所 陳伶志助研究員 
贊助單位：國科會 
計劃題目：耐延遲網路之路由解決方案 
計劃編號：NSC 95-2221-E-001-025 
在無線行動網路領域中，已有許多知名的論文發表，具有一定的學術地位，藉由
這次聆聽其演講，不但從中獲得許多新的觀念，對於個人未來的研究具有啟發作
用，更重要的是利用演講的空檔，本人與 Dr. Bahl 有簡短的討論機會，面對面地
溝通了幾項研究議題，得到不少寶貴意見，當為此行最大收獲之一。 
會議的第二天到第四天是本次 SIGCOMM 會議的主軸。37 篇論文依照其性質
被分為 11 大主題，每一主題皆至少有兩篇至四篇的論文進行發表。值得一提的
是，由於 SIGCOMM 在學術界的重要地位，本次會議有將超過 500 位來自世界
各地的學者參與，因此每一篇發表的論文，在單一 session 的會議型式中，皆必
需接受與會人士們大量的問題提問，不僅如此，本次大會更首次採用網路討論的
方式，開放所有相關研究人員，利用網際網路參與論文的討論，以確保所有論文
主題皆能被充份討論，更確保會議本身之公正、客觀、與內容之正確完整性。 
本次會議的第五天安排了兩場 Workshop，其中本人參加(並發表論文)的是
CHANTS Workshop (i.e., Workshop on Challenged Networks)。這個 Workshop 主要
是探討一個新型態的網路情境，稱為耐延遲網路(Delay Tolerant Networks)。在這
類的網路環境中，所有的網路連線皆是不可預期、斷斷續續的，因此所有傳統的
網路協定皆無法適用於此類環境當中。然而，隨著網路需求的增加，人們已逐漸
發現在許多類似的情境中，仍然存有進行網路連線的需要，而一個可靠的傳輸協
定卻仍然是充滿挑戰與缺乏的。 
這個 Workshop 今年已是第二次主辦，而我們的論文是這兩年來第一篇來自亞
洲的論文，其它收錄的論文則主要來自歐洲與美國。由於耐延遲網路的研究仍處
於新興的階段，因此利用這次參與會議的機會，除了介紹我們最新的研究成果讓
與會人士分享外，本人更努力和所有與會人士進行彼此研究經驗的分享，以及討
論未來可能的合作事宜。更重要的是，藉由這次與會，不但打進這個研究社群，
更提前知道了許多這個研究社群在未來一年內的許多研究合作計劃，以及可能的
期刊會議資訊，真可謂是本行最大的收獲。 
 
 
A Hybrid Routing Approach for Opportunistic Networks
Ling-Jyh Chen Chen-Hung Yu Tony Sun Yung-Chih Chen Hao-hua Chu
Academia Sinica National Taiwan University UCLA Academia Sinica National Taiwan University
cclljj@iis.sinica.edu.tw r94922140@ntu.edu.tw tonysun@cs.ucla.edu ycchen@iis.sinica.edu.tw haochu@ntu.edu.tw
ABSTRACT
With wireless networking technologies extending into the
fabrics of our working and operating environments, proper
handling of intermittent wireless connectivity and network
disruptions is of significance. As the sheer number of poten-
tial opportunistic application continues to surge (i.e. wire-
less sensor networks, underwater sensor networks, pocket
switched networks, transportation networks, and etc.), the
design for an effective routing scheme that considers and ac-
commodates the various intricate behaviors observed in an
opportunistic network is of interest and remained desirable.
While previous solutions use either replication or coding
techniques to address the challenges in opportunistic net-
works, the tradeoff of these two techniques only make them
ideal under certain network scenarios. In this paper, we
propose a hybrid scheme, named H-EC, to deal with a wide
variety of opportunistic network cases. H-EC is designed to
fully combine the robustness of erasure coding based routing
techniques, while preserving the performance advantages of
replication techniques. We evaluate H-EC against other sim-
ilar strategies in terms of delivery ratio and latency, and find
that H-EC offers robustness in worst-case delay performance
cases while achieving good performance in small delay per-
formance cases. We also discuss the traffic overhead issues
associated with H-EC as compared to other schemes, and
present several strategies that can potentially alleviate the
traffic overhead of H-EC schemes.
Categories and Subject Descriptors
C.2.2 [Network Protocols]: Routing protocols
General Terms
Algorithms, Performance, Theory.
Keywords
Erasure Coding, Hybrid Approach, Opportunistic Networks,
Routing.
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for profit or commercial advantage and that copies
bear this notice and the full citation on the first page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior specific
permission and/or a fee.
SIGCOMM’06 Workshops September 11-15, 2006, Pisa, Italy.
Copyright 2006 ACM 1-59593-417-0/06/0009 ...$5.00.
1. INTRODUCTION
With prevalent adaptation and usage of wireless com-
munication technologies, networking challenges evolve when
continuous network connectivity cannot be guaranteed. For
these challenged networking environments such as found in
mobile in-motion networks and dynamic wireless networks,
network connectivity are rather opportunistic in nature. Tech-
niques for making applications tolerant to disruptions and/or
high delays are essential for these opportunistic networks.
Opportunistic networks is a type of challenged networks,
where communication opportunities (contacts) are intermit-
tent, an end-to-end path between the source and the desti-
nation may have never existed, disconnection and reconnec-
tion is common, or link performance is highly variable or
extreme. Therefore, traditional MANET and Internet rout-
ing techniques can not be directly applied towards networks
in this category. With numerous emerging opportunistic
networking applications, such as wireless sensor networks
(WSN) [3, 26], underwater sensor networks (UWSN) [8],
pocket switched networks (PSN) [6, 7, 14], people networks
[10, 22, 24], transportation networks [2, 4, 16], and etc., it
remains desirable/necessary to develop an effective routing
scheme that can better accommodate the various character-
istics of opportunistic networks.
Several routing schemes have been previously proposed for
opportunistic network scenarios [4, 12, 17, 19, 23, 25, 28], all
aimed at resolving specific routing problems in opportunistic
networks. These routing schemes can be grouped into two
main categories according to their basic technical strategies,
which are replication based and coding based.
Replication based routing schemes are the most popular
design choice in existing opportunistic routing schemes. The
basic idea of replication based schemes is to inject multi-
ple identical copies of data into the network, and rely on
node mobility to disseminate the data toward the destina-
tion [23]. A message is regarded to be successfully delivered
when at least one of the multiple copies is received by the
destination. Intuitively, if the number of replica in the net-
work is sufficiently large, replication based schemes tend to
achieve the best delay performance (i.e., the shortest deliv-
ery latency) in opportunistic networks. However, the main
drawback of this type of schemes is the tremendous traffic
overhead associated with flooding data replicates. As a re-
sult, when network resources (e.g., buffer space and network
bandwidth) are limited, replication based schemes tend to
degrade performance reliability (i.e, the delivery ratio) un-
less additional overhead reduction strategies are in place to
alleviate traffic overhead [4, 12, 17, 19].
Figure 1: Illustration of the erasure coding based data forwarding algorithm (EC). In this figure, one erasure
coded block (A) is equally split among four relays (n = 4).
Figure 2: Illustration of the A-EC scheme, i.e., EC with aggressive forwarding. In this figure, four erasure
coded blocks (A,B,C,D) are transmitted, and n = 4.
2.2 Overview of Erasure Code based Data For-
warding
In this subsection, we will give a brief overview on erasure
code and a forwarding scheme based on erasure code, which
is proposed in [25].
Erasure coding is a coding scheme which provides better
fault-tolerance by adding redundancy without the overhead
of strict replication, to the original data [27]. Two most
popular examples of erasure coding algorithms are Reed-
Solomon coding and Low-Density Parity-Check (LDPC) based
coding (e.g., Gallager codes, Tornado codes, and IRA codes)
[20, 21]. These algorithms differ in the encoding/decoding
efficiency, replication factor, and the minimum number of
code blocks to reconstruct a message. The selection of the
proper erasure coding algorithm is not within the scope of
this paper, and our work is based on the generic erasure
coding concept.
In generic erasure coding schemes, suppose a message is
of size M bytes, the replication factor of erasure coding is r,
and the coded message is fragmented into several blocks of
identical size b bytes, one can obtain the number of the coded
blocks by N = M×r
b
. Moreover, this message can be suc-
cessfully reconstructed as long as 1
r
of the coded blocks are
received (i.e., the minimal number of coded blocks for suc-
cessfully reconstructing the message is N/r, which is equal
to M/b).
In [25], an erasure code based forwarding algorithm (EC)
is proposed as illustrated in Fig. 1. In this scheme, the
erasure coded blocks are equally split among n relays, and
relays are only allowed to send messages directly to the des-
tination (i.e., the well-known “two-hop” scenario as used in
[6, 11]). Each relay forwards the same amount of code blocks
(no duplicates in each relay), and the number of blocks for-
warded by each relay can be obtained by
N
n
=
Mr
bn
(1)
As reported in [25], the EC scheme is capable of providing
the best worst-case delay performance with a fixed amount
of overhead. However, the drawback of EC scheme is that
it can not provide good very small delay performance while
comparing to other popular replication based approaches.
3. EFFECTIVE ROUTING APPROACHES
FOR OPPORTUNISTIC NETWORKS
In this section, we will discuss issues of effective routing in
opportunistic networks. Ideally, an effective routing scheme
not only has to provide better delivery latency in both worst
delay performance and very small delay performance cases,
but it also needs to remain moderate without injecting too
much traffic overhead to the network. In the following sub-
sections, we first present the routing algorithm, called A-EC,
by extending EC algorithm with the aggressive forwarding
technique in subsection 3.1. We then describe our proposed
hybrid routing algorithm, called H-EC, in subsection 3.2.
3.1 EC with Aggressive Forwarding
As we have mentioned earlier, the EC scheme has at-
tracted attentions from researchers due to its abilities to
achieve better worst case delay performance in opportunis-
tic networks; whereas, in most non-worst cases, the resulting
prolonged overall delivery latency is the main drawback of
the EC scheme.
The reason for such inefficiency in the EC scheme con-
cerning non-worst delay performance cases lies in its block
allocation method. In EC scheme, the number of transmit-
ting blocks in each contact is a fixed number (i.e., Mr
bn
, in
accordance with Eq. 1) regardless of the length of each con-
tact duration. As a result, EC scheme can only effectively
utilize each network contact when the contact duration is
not much longer than the required time for sending the re-
layed data. If most network contact is much larger than the
required time, EC scheme tends to waste the residual con-
tact duration and thus results in ineffectiveness as illustrated
in Fig. 1.
Aiming at this problem, one can easily adapt the EC
scheme with an aggressive forwarding feature, which does its
best to fully utilize each contact opportunity. The adapted
scheme is called A-EC scheme, and we illustrate the scheme
in Fig. 2.
As shown in Fig. 2, the source sends as many coded blocks
as possible during each contact (totally Mr
bn
blocks, i.e., Mr
n
bytes). As a result, for very small delay performance cases,
A-EC scheme is able to better utilize the network contact
and thus expected to outperform EC scheme.
Figure 5: Latency distribution (CCDF) of EC, A-
EC, and R-EC (k=2 and 4) schemes in black-hole
network scenario.
when k=2, and within 30,000 seconds when k=4. It turns
out that the larger k is, the better delivery performance R-
EC achieves.
On the other hand, it should also be mentioned that with
a larger k value, more traffic overhead will be experienced
with the R-EC scheme. Therefore, it is necessary to give k
an upper bound, this bound turns out to be the maximum
number of blocks that can be sent over during a contact du-
ration. The performance of R-EC, as k increases, will even-
tually converged towards the performance of A-EC scheme
for the very small delay performance cases, since R-EC be-
comes A-EC when it completely utilizes all residual contact
opportunities. In Fig. 4, while only looking at the left por-
tion of the figure (i.e., the very small delay cases), A-EC
does achieve shorter delivery latency than EC and the R-
EC schemes. Nonetheless, as k increases, the performance
of R-EC scheme becomes closer to the A-EC curve, which
confirms our intuition.
However, while looking at the right portion of Fig. 4,
one can also observe that A-EC scheme has a longer tail
than R-EC and EC schemes. The reason is that though
the aggressive forwarding feature yields better utilization
for each contact (and thus reduce the delivery delay), it is
also very likely to fail if the selected relays have very large
latency to their next contact with the destination. As a
result, A-EC performs much worse than the other schemes
in worst delay performance cases.
4.2 A-EC in black-hole scenarios
In the second experiment, we evaluate A-EC scheme in
the black-hole scenario, where some of the relay nodes are
extremely uncooperative (i.e., limited battery power, lim-
ited buffer size, or extremely large inter-contact time with
the destination). For simplicity, we use the same simulation
parameters as the one employed in the previous subsection,
except that five (out of 32) relays are set as uncooperative
nodes with very small buffer size (the buffer size is two mes-
sages size). Fig. 5 depicts the simulation results.
The results are basically consistent with what is shown in
the previous subsection (Fig. 4), except that A-EC scheme
suffers from more serious overall delivery delay in the black-
Figure 6: Latency distribution (CCDF) of EC, A-
EC, R-EC (k=2) and H-EC schemes in general net-
work scenarios.
Figure 7: Latency distribution (CCDF) of EC, A-
EC, R-EC (k=2) and H-EC schemes in black-hole
network scenarios.
hole scenario, as illustrated by the heavy tail of A-EC in
Fig. 5. More precisely, in the black-hole scenario, the results
shows that around 5% of messages will not be successfully
delivered after 300,000 seconds; whereas, in the general sce-
nario, all messages are successfully delivered within 200,000
seconds. It turns out that, while black-hole nodes present,
A-EC scheme is very likely to fail in providing reliable data
delivery in opportunistic networks.
4.3 Evaluation of H-EC scheme
Here, we evaluate our proposed H-EC scheme in both gen-
eral and black-hole scenarios. The simulation parameters
(for both cases) employed here are the same as the ones em-
ployed in previous subsections. We compare the simulation
results of EC, A-EC, R-EC (with k=2, which has the same
amount of overhead as H-EC scheme), and H-EC schemes
in Fig. 6 and 7.
In Fig. 6, the result clearly shows that, the proposed
H-EC scheme always performs comparably to the optimal
scheme in all test cases. More precisely, in very small de-
network N erasure coded blocks at a time once N
r
of the
blocks have been successfully delivered, where N = M×r
b
.
In addition, the forwarding of receiver feedbacks has to be
carefully controlled as well. For instance, the Time-To-Live
[12], Kill Time [12], or Reverse Path Forwarding [9] like
methods can be employed to reduce the traffic overhead of
receiver feedbacks.
5.2.2 Adaptive Coding and Forwarding
In addition to the “healing” based strategies, one can also
reduce traffic overhead and improve data forwarding effi-
ciency via adaptive coding and forwarding. More precisely,
by adaptive coding, one can adapt the replication factor,
r, of the employed erasure coding scheme in accordance to
the observed network status. When the network connectiv-
ity is very poor, a larger r can provide better reliability for
message delivery with the price of higher traffic overhead;
whereas when the network connectivity is decent, choosing
a smaller r can greatly reduce the network overhead.
Moreover, with adaptive forwarding, one can also adapt
the traffic volume. Instead of b bytes in EC scheme or the
maximum deliverable data size in A-EC scheme, the deliv-
erable data size can be adjusted based on a probabilistic
estimate to improve the packet delivery chances. For in-
stance, this probabilistic estimate can be a function of the
node mobility pattern [17], remaining battery life, available
buffer space, and etc.
One should also note that the online measurement (and/or
monitoring) of the network is required for cooperating the
adaptive coding and forwarding scheme, e.g., measuring the
mobility pattern, and probing the battery life and buffer
space. It turns out that additional computation and traf-
fic overhead are still necessary, thus these schemes must be
carefully used and designed in order to improve the data
forwarding efficiency.
6. CONCLUSION
An effective data forwarding scheme is essential for oppor-
tunistic networks, as communication opportunities in such
challenged networks are opportunistic and precious. In this
paper, we proposed a hybrid scheme, called H-EC, which
combines the strength of erasure coding and the advantages
of aggressive forwarding. With simulations, we evaluated
the performance of H-EC, EC, and R-EC schemes in terms
of delivery ratio and latency. The results indicated that H-
EC scheme is able to perform aggressively (similar to A-EC
scheme) for very small delay performance cases and remain
robust (similar to EC and R-EC schemes) for worst-case
delay performance cases. The performance advantages are
quite remarkable when the network encompasses black-holes
nodes. We also discussed several strategies that can poten-
tially alleviate the traffic overhead carried by H-EC scheme
(and other EC based ones). The effectiveness and robustness
of H-EC render it an ideal solution that can go a long way
toward effective data forwarding in opportunistic networks.
7. REFERENCES
[1] Delay tolerant network simulator.
www.cs.washington.edu/homes/sushjain/pubs2/dtnsim.tar.gz.
[2] Umassdieselnet. http://prisms.cs.umass.edu/diesel/.
[3] The zebranet wildlife tracker.
http://www.princeton.edu/ mrm/zebranet.html.
[4] J. Burgess, B. Gallagher, D. Jensen, and B. N. Levine.
Maxprop: Routing for vehicle-based
disruption-tolerant networking. In IEEE Infocom,
2006.
[5] T. Camp, J. Boleng, and V. Davies. A survey of
mobility models for ad hoc network research. Wireless
Communication and Mobile Computing Journal,
2(5):483–502, 2002.
[6] A. Chaintreau, P. Hui, J. Crowcroft, C. Diot, R. Gass,
and J. Scott. Pocket switched networks: Real-world
mobility and its consequences for opportunistic
forwarding. Technical Report UCAM-CL-TR-617,
University of Cambridge, Computer Laboratory,
February 2005.
[7] A. Chaintreau, P. Hui, J. Crowcroft, C. Diot, R. Gass,
and J. Scott. Impact of human mobility on the design
of opportunistic forwarding algorithms. In IEEE
Infocom, 2006.
[8] J.-H. Cui, J. Kong, M. Gerla, and S. Zhou.
Challenges: Building scalable mobile underwater
wireless sensor networks for aquatic applications.
IEEE Network, Special Issue on Wireless Sensor
Networking, May 2006.
[9] Y. Dalal and R. Metcalfe. Reverse path forwarding of
broadcast packets. Communications of the ACM,
21:1040–1048, December 1978.
[10] J. A. Davis, A. H. Fagg, and B. N. Levine. Wearable
computers as packet transport mechanisms in
highly-partitioned ad-hoc networks. In IEEE Intl.
Symp. on Wearable Computers, 2001.
[11] M. Grossglauser and D. Tse. Mobility increases the
capacity of ad-hoc wireless networks. In IEEE
Infocom, 2001.
[12] K. A. Harras, K. C. Almeroth, and E. M.
Belding-Royer. Delay tolerant mobile networks
(dtmns): Controlled flooding in sparse mobile
networks. In IFIP Networking, 2005.
[13] X. Hong, M. Gerla, R. Bagrodia, and G. Pei. A group
mobility model for ad hoc wireless networks. In ACM
International Workshop on Modeling, Analysis and
Simulation of Wireless and Mobile Systems
(MSWiM), 1999.
[14] P. Hui, A. Chaintreau, J. Scott, R. Gass, J. Crowcroft,
and C. Diot. Pocket switched networks and human
mobility in conference environments. In ACM
SIGCOMM Workshop on Delay Tolerant Networks,
2005.
[15] S. Jain, K. Fall, and R. Patra. Routing in a delay
tolerant network. In ACM SIGCOMM, 2004.
[16] J. LeBrun, C.-N. Chuah, and D. Ghosal. Knowledge
based opportunistic forwarding in vehicular wireless
ad hoc networks. In IEEE VTC Spring, 2005.
[17] J. Leguay, T. Friedman, and V. Conan. Dtn routing in
a mobility pattern space. In ACM SIGCOMM
Workshop on Delay Tolerant Networks, 2005.
[18] A. Lindgren and A. Doria. Probabilistic routing
protocol for intermittently connected networks.
Technical report, draft-lindgren-dtnrg-prophet-01.txt,
IETF Internet draft, July 2005.
[19] A. Lindgren, A. Doria, and O. Schelen. Probabilistic
routing in intermittently connected networks. ACM
SIGMOBILE Mobile Computing and Communications
