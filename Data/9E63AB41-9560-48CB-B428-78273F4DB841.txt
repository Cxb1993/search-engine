 2
二、 計畫緣由與目的 
近年來，無線網路技術的飛快進步，
使得多種應用在無線網路上蓬勃成長。而
多媒體資訊應用在無線網路上的需求，使
得原先存在的、為有線網路所設計一些機
制必須要有一些改變，才能適用於混合型
有線與無線之異質網路上(heterogeneous 
wired/wireless networks)。 
大部分已經存在的壅塞控制演算法原
本只為了有線網路的環境而設計，而往往
使用封包遺失來當成網路擁擠的指標。在
混合型有線與無線之異質網路上，將面臨
誤將無線網路因通道錯誤或訊號衰減所造
成的封包遺失，當成網路擁擠的訊息，因
而降低傳送速率，結果造成網路傳輸效能
的下降。面對這種情形，如果我們能對遺
失的封包進行分類，使得擁擠控制演算法
只在是擁擠所造成的情形下所遺失的封
包，才去降低傳送速率，進而對網路情形
做出適當的反應。 
在目前已經存在的遺失封包分類演算
法 (Packet Loss Classification Algorithm: 
PLC)，包含 Biaz 和 Vaidya [BV99] 所提出
的使用封包 inter-arrival time當成封包遺失
分類的依據。Inter-arrival time 的定義為兩
個連續收到的封包到達的時間差。
Spike-train [TTMGT00] 預先在相對的封
包單趟時間延遲 ROTT (relative one-way 
trip time) 定義兩個邊界值來進行封包分
類；以及 ZigZag [CCV02] 同樣使用 ROTT
值來做為封包分類的依據，但邊界值會隨
著 ROTT 的值的變化而改變。 
然而，上述的方法，邊界值的選取非
常重要而且常依據網路拓譜  (network 
topology) 的分布有所不同。若是待分類之
封包的 ROTT 或 inter-arrival time 落在邊界
值附近時，很難去分類為擁擠遺失或是無
線網路錯誤造成的遺失，因此，我們在[4]
中提出若封包的 ROTT 落在 gray zone，即
難以分類的區間時，使用 ROTT 的變化趨
勢是否為增加來作為判斷封包遺失是因為
擁擠還是因為無線網路錯誤所造成。我們
實作並探討不同的封包遺失分類演算法，
並評估分析實驗結果，並提出一個結合遺
失封包之分類演算法之分層視訊串流系統
架構來驗證我們所研究之封包遺失分類演
算法的正確性及在串流服務對此類演算法
的需要性。 
 
三、 問題與結果討論 
3.1  系統架構 
 
圖一、 使用 PLC 之分層串流系統架構圖 
圖一為本計畫提出之以遺失封包分類
演算法(PLC)為基礎之分層串流系統架構
圖。我們提出，對於使用遺失封包作為判
斷依據之擁擠控制演算法  (圖中  BW 
Analysis 模組)以及無線通道保護之 FEC 
模組而言，我們可以使用 PLC 作為前置處
理 (pre-processing) 而讓各模組更正確的
工作。 
而本計劃的主題，封包遺失分類演算
法 (PLC 模組)基本流程如圖二所示。當接
收端接收到封包後會更新一些演算法所需
的相關資訊，如目前最大/小的 ROTT 或是
目前最大/小的 inter-arrival time 等。接著由
 4
失時，兩個連續接收到的封包的時間差。n
為封包遺失個數。 
在我們的構想裡，點對點 (end-to-end)
的封包延遲 (packet delay) Td 可以下式表
示： 
Td= Tproc+Tprop+Ttrans+Tq 
Td 由四項延遲所組成：Tproc 為路由器 
processing delay ，主要為路由器處理封包
的傳送時所需做的重組及轉送封包等。
Tprop 為資料傳送的電磁延遲(propagation 
delay) 。Ttrans 為封包傳送所需時間，由各
個連結的傳輸速率所決定。Tq 為佇列延遲
(queuing delay)，當壅塞發生時，這一項會
變大並且可能造成封包的遺失。Tproc， 
Tprop，和 Ttrans大約是常數，因此我們可將
封包延遲 Td 作為提供網路擁擠的重要資
訊。 
承上述，以ROTT(Relative one way trip 
time)表示封包延遲，相對於壅塞的情形，
將 會 是 有 相 當 程 度 的 值 。 因 此 , 在 
[TTMGT00]中所提出的封包遺失分類演算
法使用 ROTT 值並預先設定兩個 threshold
來作為封包分類的依據，而在[CCV02]中
的演算法，threshold 隨著 ROTT 值的改變
而變化。然而這兩種方法的缺點為當
ROTT 落在 threshold 附近時，無法正確的
判斷封包遺失為擁擠或是無線網路錯誤所
造成。因此我們提出  [4] 設定兩個
threshold，當 ROTT 落在兩個 threshold 中
間時，我們定義為灰色地帶 (gray zone， 
如圖四所示) ，使用 ROTT 的趨勢變化來
做為判別的依據。 
 
圖四、PLC 灰色地帶 
其中 TGup和 TGlow定義如下式所列： 
).(
),(
minmaxmin
minmaxmin
ROTTROTTROTTTG
ROTTROTTROTTTG
low
up
−+=
−+=
β
α  
α 和 β的值由實驗定在 0.8 和 0.3。 
若 ROTT 時間大於 TGup 則為擁擠遺
失，小於 TGlow則為無線通道訊號減弱或受
破壞所造成的遺失。如果 ROTT 落在灰色
地帶，我們則以封包延遲趨勢檢測演算法
來決定遺失封包的類別。延遲趨勢檢測演
算法可由下式說明。 
).()1( 1−>⋅+⋅−= iiff DDISS γγ  
這邊我們設定 Sf如果大於 0.4，我們認
為 ROTT 呈現增加的趨勢，所以將封包遺
失判斷為擁擠遺失，小於的話，則判斷為
無線通道訊號減弱或受破壞所造成的遺
失。 
3.4 實驗結果評估 
 
圖五、網路拓譜圖 
 
圖六、設定之資料流量 
我們此次模擬所使用的網路拓譜和各
點間的連線情況如圖五所示。我們在節點
0 到節點 8 建立一連線為 cbr1，節點 1 到
節點四建立一連線為 cbr2 ，節點 5 到節點
9 建立 cbr3 的連線。而資料流量的設定則
 6
原因。若我們觀察區間 0 到 10 秒、40 到
50 秒以及 60 到 80 秒，分別可以得到 Aw
為 0.96、1。由前所述，這種分類結果事實
上也是比較有利於壅塞控制演算法以及系
統的穩定度的地方。 
我們本計劃裡並針對所發展的分類演
算法探討其在串流服務系統中的狀況分
析。我們使用如下圖的網路拓譜來進行實
驗，串流客戶端共有三點位於 node 1，node 
2 以及 node 3。這裡的串流壅塞控制演算
法是使用改良的 pathload 演算法。 
 
0
5 6
10M
10ms
512K
8 10M10ms
100ms
11M
50ms
3
2
4
256K
30ms
1M
50ms
512K
30ms
 
圖十、用於串流服務的實驗網路拓譜 
0 50 100 150
0
5
10
x 10
5
t(s)
node 1 node 2 node 3
 
圖十一、純有線網路環境中各客戶端於壅
塞控制串流系統之接收流量 
0 50 100 150
0
5
10
x 10
5
t(s)
node 1 node 2 node 3
 
圖十二、混合式網路環境中各客戶端於壅
塞控制串流系統之接收流量 
0 50 100 150
0
5
10
x 10
5
t(s)
node 1 node 2 node 3
 
圖十三、混合式網路環境中各客戶端於
ZigZag/壅塞控制串流系統之接收流量 
 
0 50 100 150
0
5
10
x 10
5
t(s)
node 1 node 2 node 3
 
圖十四、混合式網路環境中各客戶端於
Spike-train/壅塞控制串流系統之流量 
0 50 100 150
0
5
10
x 10
5
t(s)
node 1 node 2 node 3
 
圖十五、混合式網路環境中各客戶端於所
提 PLC/壅塞控制串流系統之接收流量 
從圖十一至圖十五列舉了各個所提演
算法及與其它分類演算法的比較結果。由
圖十五所提的方法表現可知，所加入的分
類演算法大幅提升壅塞控制演算法在有線
/無線的傳輸環境下各節點應有的接收流
量。 
 
四、 結果自評 
透過有線/無線網路封包分類演算法
及其對應之串流系統架構之研究，近年來
隨著WiFi及WiMAX的發展以為日漸重要
之課題。有鑑於此，發展相關之技術和培
育這一方面的研究人才已是刻不容緩之課
題。參加本計劃之研究人員，在學理上和
實務上都能受到紮實而有效的訓練，相信
對於多媒體網路研究上的發展推動將大有
助益。 
 
參考文獻 
[BV99] S. Biaz, N. Vaidya, "Discriminating Congestion Losses 
from Wireless Losses Using Inter-Arrival Times at the Receiver," 
IEEE Symposium, 24-27 March 1999, Pages:10 –17. 
[CCV02] S. Cen, P. C. Cosman and G. M. Voelker, "End-to-End 
Differentiation of Congestion and Wireless Losses," Proceedings of 
ACM Multimedia Computing and Networking 2002, San Jose, CA, 
Jan. 2002. 
