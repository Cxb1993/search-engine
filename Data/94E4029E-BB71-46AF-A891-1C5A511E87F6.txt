行政院國家科學委員會專題研究計畫成果報告 
計畫編號： NSC 93–2213–E–224–013– 
執行期限：93年08月01日至95年7月31日 
計畫主持人：9002991 鄭景俗  計畫參與人員：王佳文、游惠雯、李雅婷 
 
壹、前言 
尿毒症是腎臟功能極度衰竭引起的症
候群，病患得長期接受透析治療維持生
命。然而，治療期間因電解質不平衡及體
液累積，導致病患產生長期透析症候群，
甚至引發急性併發症而死亡。近年來，病
患對透析治療的要求由延續生命的基本層
次，提昇至生活品質的訴求。雖然透析技
術或腎臟移植技術不斷地進步，但死亡率
仍偏高，除了延續生命之外，如何提昇透
析治療水準與照護品質不容忽視。 
長期透析累積大量臨床數據，這些原
始資料顯示病患的整體狀況，藉由專家問
卷及模糊理論運用，建立血液透析品質指
標，將使醫師更了解長期血液透析病患整
體療效，提供醫護人員臨床照護參考，提
昇透析病患生活品質，以期回歸社會，對
病患而言將是一大助益。 
1980年代後，模糊論應用範圍從工程
科技延伸到醫療專業，例如：癌腫瘤辨識、
醫療診斷等；因為醫生的醫囑多為語意表
達，在其含意中都有由於界限不清而引起
的模糊性。對於血液透析臨床數據的判讀
也因人而異，難以設定一個明確的數值，
是模糊的概略範圍。檢驗數據的判讀具有
「主觀性」與「模糊性」，無法使用一般數
理方法處理。所以本研究應用模糊理論觀
念，評估預測不確定性之問題，以模糊的
觀念描述指標變數，進而量化為系統需要
的數據。 
本研究主要分為二年期，第一年為模
糊 OWA 查詢模式之建構，第二年期為血
液透析品質輔助系統之建構。 
貳、模糊理論基礎 
早期Zadeh於1965由加州大學提倡關
於模糊相關的理論(Zadeh 1965)，現今已有
許多人將它應用在許多的實際例子上，以
下就本研究會使用到的模糊集合理論、語
言變數、與模糊查詢與 OWA 等相關理論
做介紹。 
2.1模糊集合理論 
Zadeh 早期在模糊集合提出了許多定
義並引入歸屬函數(membership function)
訂出了模糊集合的特性，下列介紹三角模
糊數基本運算 (Yazici 1999；Zadeh 1965；
Zadeh 1988)。 
【定義 1】假設正三角模糊數 ),,(~ 321 aaaA =
與正三角模糊數 ),,(~ 321 bbbB = 其運算方式
如下： 
1. 加法：
A~ + B~ = ),,(),,( 321321 bbbaaa +
),,( 332211 bababa +++=                (1) 
2. 減法： 
A~ - B~ = ),,(),,( 321321 bbbaaa −             (2) 
3. 乘法： 
A~ × B~ = ),,(),,( 321321 bbbaaa ×
),,( 332211 bababa ×××=                 (3) 
4. 除法：  
A~ / B~ = ),,/(),,( 321321 bbbaaa  
)/,/,/( 132231 bababa=                 (4) 
【定義 2】若將模糊數 A~與模糊數B~取聯
集其運算方式如下： 
( )( ){ ( )iBAiBAi ufufuBA ∪∪=∪ |,  
( ) ( )( ) }UuufufMax iiBiA ∈= ,,             (5) 
【定義 3】若將模糊數 A~與模糊數B~取交
集其運算方式如下： 
( )( ){ ( )iBAiBAi ufufuBA ∩∩=∩ |,            
( ) ( )( ) }UuufufMin iiBiA ∈= ,,             (6) 
2.2 Fuzzy Query 
在本研究中查詢的語法是採用
SQL-like 方 式 ， 來 建 立 fuzzy SQL 
份研究將人工智慧的技術納入 DSS中，特
別是專家系統。這方面的相關研究，致力
於將知識的處理與決策支援系統相結合，
使得決策支援系統能夠具備更好的功能，
建構更好的問題解決程序， 
自 1960年代人工智慧開始發展，專家
系統是表現較成熟的部份，從早期工具研
發至目前的商業應用，專家系統是解決問
題有利的工具，本質上專家系統是一個以
專業知識為基礎，文字符號為推論的系統
程式，為一個模仿人類專家解決問題的系
統，在求解的過程中，除了能像專家一樣
適時地提出結論，還能夠從錯誤及失敗中
修正既有的知識，而達到學習的能力。專
家系統主要優點如下（Li Lynn Lingx，
1999）： 
1. 專家系統包含所需要的知識，有能
力來解釋它的推理過程，提供給使
用者學習的功能。 
2. 專家系統有能力勝任專家的工作，
它處理問題的速度比一個真正專家
來得更快。幾乎可以達到即時的效
果。 
3. 專家系統穩定，不會受情緒的影
響，而且會在一定時間內完成工
作，解決問題的可靠性高。 
4. 專家系統提供專業知識，所需記憶
體少，可節省成本。 
5. 專家系統可作為人員訓練，使一位
生手很快變成經驗豐富的執行者，
而且不會有經驗失傳的疑慮。 
專 家 系 統 通 常 以 法 則 庫 推 理
（Rule-based Reasoning，RBR）的方式作
為系統推理的機制。RBR需要一個建構良
好的知識領域來作為推理基礎，一般將法
則以「IF-THEN」的敘述來表達；RBR的
應用範圍很廣泛，亦被應用在醫療的相關
領域之中，包括心臟疾病的診斷、心理測
驗的分析、治療規劃等。 
2.5模糊法則產生法 
目前有兩種常用來產生模糊法則的方
法，一種方法是經由專家的幫助，也就是
詢問專家以獲得知識，再將知識轉換成模
糊法則。另外一種方法則是從訓練資料中
藉由機器學習的方式自動產生模糊法則，
在 Chen, Lee & Lee（2001）提出了一個應
用模糊相似性運算與門檻值取捨產生推論
法則用來解決分類問題，比 Yuan & Shaw
（1995）具有較高的準確率、較少的模糊
法則及較少的計算。 
參、模糊 OWA 查詢模式與血液透
析品質輔助系統 
3.1 研究架構 
第一年期的研究方法乃是採用「專家訪談
法」與「模式建構驗證法」，主要將提出一
「彈性的 OWA模糊查詢模式」，並以文獻
探討及專家訪談方式，找出血液透析療效
品質評估指標項目，且運用某區域醫院的
洗腎品質資料庫做出一套系統驗證，所發
展而成的研究模式如下圖所示：
 
圖 1彈性的 OWA模糊查詢模式 
第二年期採用「專家訪談建立規則庫」與
「雛形法架構診斷系統」。以三階段方式進
行，分別為（1）根據第一年之 OWA模糊
查詢模式產生規則庫（2）建構「血液透析
於[0,1]之間。而屬性權重主要是模糊權重
值，其值介於[0,1]，計算步驟如下：  
步驟一若查詢的指標有 n個，屬性權重模
糊數為 1~W … nW~ ，先做權重分配
(distribution)： 
∑=
=
n
i
iii WWW
1
~/~'~              (18)                                                    
步驟二再依將各指標，查詢屬性與資料庫
的屬性所計算出的相配程度
R(Match degree)，乘上分配後的屬
性權重值做整合，算出新的相配程
度值： ni WW ~R'... ~R'R n1 ×++×=   (19) 
步驟三此時 R是個模糊值，因此再將每筆
資料新的相配程度做解模糊化，求
得 明 確 值 Di ：      
Di=(a+2b+c)/4              (20) 
),1( ii DMinD =               (21) 
而模糊 OWA 計算過程只需給定情
境指標與指標個數，並了解指標的
重要性程度順序，依指標順序排列
為 nXX ...1 排序，參考式子(15)-(17)
即可算出權重值，再將查詢屬性與
資料庫的屬性所計算出的相配程度
(相似性程度值)，乘上分配後的屬
性權重值做整合，其算法如(18)-(21)
式，運算演算步驟如下： 
步驟一設定查詢指標個數 n，情境指標α      
步驟二指標依重要程度排序     
步驟三藉由(15)式，計算出最高權重w1  
步驟四將最高權重w1、指標個數 n與情境
指標α 代入(17)式，求得wn  
步驟五 將 w1與 wn代入 (15)式即可求得
ww n 12... − 。                  
步驟六再依將各指標，查詢屬性與資料庫
的屬性所計算出的相配程度 R(相
似性程度值)，乘上分配後的屬性權
重值做整合，代入式(18)算出新的
相配程度值。           
步驟七此時 R是個模糊值，因此再將每筆
資料新的相配程度做解模糊化，代
入(20-21)式，求得 Di。  
4.2血液透析品質診斷規則模式 
在第二年研究中，主要利用 Modify 
MEPA (Chen, Cheng 2006)將四個指標數
值離散化建立其歸屬函數，再計算其隸屬
程度產生規則庫之洗腎品質診斷規則模糊
法則，其步驟敘述如下： 
步驟一：計算指標的最小熵值。假設要在
指標值的區間 ]2,1[ xx 中計算點
x的熵值，表示為 )(xS 其數學式
如(14)所示： 
 
)()()()()( xSxqxSxpxS qp +=  (14)
(14)式中的 )(xS p 及 )(xSq 的計算
方式如(15)、(16)式。 )(xp 、 )(xq
的計算如(19)、(20)式所列。 
)](ln)()(ln)([)( 2211 xpxpxpxpxS p +−= (15)
)](ln)()(ln)([)( 2211 xqxqxqxqxSq +−=  (16)
而 )(xpk 、 )(xqk 的計算如同(17)、
(18)式所示，其中 k為計畫分類的類
別數。 
1)(
1)()( +
+=
xn
xnxp kk  (17) 
1)(
1)()( +
+=
xN
xNxq kk  (18) 
n
xnxp )()( =  (19) 
)(1)( xpxq −=  (20) 
質指標：Kt/V、URR、Albumin、Hct，再
利用修正的MEPA將四個指標數值離散化
建立其歸屬函數。最後運用模糊理論，建
立法則庫，提供醫護人員臨床照護參考，
對病患狀況作預先處置，達到適化透析的
境界，並開發智慧型模糊推論血液透析品
質分類輔助系統，將病患檢驗資料作品質
分類，提供醫師臨床診斷治療的預警，解
決病患隱藏的危機。本文主要的貢獻有： 
(1)建立血液透析指標之歸屬函數。 
(2)提供模糊 OWA查詢模式，協助決策人
員能更準確的判斷，可減少使用者判斷上
的主觀性，其權重方面，可依使用者來合
理動態彈性的調整其權重分配，更能明顯
的反應其結果的數值變化。 
(3) 以實際醫療血液透析資料做為實驗案
例運用，運用某區域醫院的洗腎品質資料
庫做出一套系統驗證血液透析的大量臨床
數據。 
(4)將過去三個月醫師臨床診斷資料與四
個品質指標值，事先歸類與轉換成隸屬
值，作模糊相似性運算與門檻值取捨產生
推論法則，並重複進行整個資料的學習與
測試，使其辨識率達到滿意效果。 
(5)開發智慧型模糊推論血液透析品質分
類輔助系統，將病患檢驗資料作品質分
類，提供醫師臨床診斷治療的預警，解決
病患隱藏的危機。 
在後續研究方面還有許多應用，有關
資料庫查詢或權重方面的整合改良等皆可
應用本方法，例如傳統的網路查詢的改
良，或人機介面滿意度研究及資料庫效能
的改善，使資料量更龐大時能得到更快速
的結果。 
陸、計畫成果自評 
本研究內容與計畫內容大致相符，第
一年與第二年研究目的均已達成，附錄為
第一年期與第二年期之完整報告(已發表
於國內外期刊）。 
文獻參考 
1. Chen, S. M., and Jong, W. T., "Fuzzy 
query translation for relational database 
systems", IEEE Transactions on Systems, 
Man, and Cybernetics (27:4), 1997, 
pp.714-721. 
2. Chen, Y. C., and Chen, S. M., 
“Techniques of fuzzy query processing 
for fuzzy database systems”, 
Proceedings of the Fifth Conference on 
Artificial Intelligence and Applications, 
Taipei, Taiwan, Republic of China, 
November 2000, pp.361-368. 
3. Filev Dimitar, Yager, Ronald R., “On the 
issue of obtaining OWA operator 
weights”, Fuzzy sets and systems (94), 
1998, pp. 157-169. 
4. Fuller, R., Majlender, P., “An analytic 
approach for obtaining maximal entropy 
OWA operator weights”, Fuzzy sets and 
Systems (124), 2001, pp. 53-57. 
5. Lisa, et al, "Providing kidney patients 
and their families information on diet, 
health, and kidney disease", ESRD 
Network # 12 Patient Newsletter (1:3). 
Fall 2001. 
6. Mendel Jerry M., Uncertain Rule-Based 
Fuzzy Logic Systems: Introduction and 
New Directions, Prentice Hall PTR, 
2001. 
7. Miller, G.A., "The magical number seven 
or minus two: some limits on our 
capacity of processing information", 
Psycho (63), 1968, pp.81-97. 
8. Rasmussen Dan, and Yager, Ronald R., 
“SummarySQL-A Fuzzy Tool For Data 
  
附錄A: 第一年計畫已發表於Soft computing Journal 
Wang JW, Cheng CH, and Chang JR, 2006, Flexible fuzzy OWA querying method for hemodialysis database, 
SCJ, Vol.10, No.11, pp.1031-1042(Sep)., (SCI)  
J.-W. Wang et al.
2.1 Fuzzy set theory
In 1965, Zadeh [25] proposed the theory of fuzzy sets. Today,
many people apply it to many practice samples, and receive
good results with more and more encomium. Some concepts
are summarized here [25,26,31].
Definition 1 The four fundamental operations of right tri-
angular fuzzy number are given below A˜ = (a1, a2, a3) and
B˜ = (b1, b2, b3) is defined by
A˜(+)B˜ : (a1, a2, a3)(+)(b1, b2, b3)
= (a1 + b1, a2 + b2, a3 + b3) (1)
A˜(−)B˜ : (a1, a2, a3)(−)(b1, b2, b3)
= (a1 − b3, a2 − b2, a3 − b1) (2)
A˜(×)B˜ : (a1, a2, a3)(×)(b1, b2, b3)
= (a1 × b1, a2 × b2, a3 × b3) (3)
A˜(÷)B˜ : (a1, a2, a3)(÷)(b1, b2, b3)
= (a1 ÷ b3, a2 ÷ b2, a3 ÷ b1) (4)
Definition 2 The union of the fuzzy sets A˜ and B˜ is denoted
by A˜ ∪ B˜ and is defined by
A˜ ∪ B˜ = {(ui, fA˜∪B˜ (ui)
)| fA˜∪B˜ (ui)
= Max(fA˜(ui), fB˜(ui)
)
, ui ∈ U} (5)
Definition 3 The intersection of the fuzzy sets A˜ and B˜ is
denoted by A˜ ∩ B˜ and is defined by
A˜ ∩ B˜ = {(ui, fA˜∩B˜ (ui)
)| fA˜∩B˜ (ui)
= Min(fA˜(ui), fB˜(ui)
)
, ui ∈ U} (6)
Defuzzification
Defuzzification is the procedure that generates a crisp value
out of one or more given fuzzy sets [2]. There are many de-
fuzzification methods, such as extreme value method [left
of maximum (LOM); right of maximum (ROM); center of
maximum (COM)], centroid (center of area/center of grav-
ity), mean of maxima (MOM), center of area (COA), etc.
This paper uses the centroid method (center of gravity) to
defuzzify the fuzzy sets, and the f value of Eq. (7) is the
defuzzification result.
f =
∑
g(xi) × fA˜(xi)∑
fA˜(xi)
, (7)
where A˜ is fuzzy number, fA(xi) is the A˜’s grade, g(xi) is
the weighting value, and f is the centroid of membership
function.
2.2 Linguistic variable and fuzzy term
In 1975, Zadeh [27–29] introduced the linguistic variable.
The linguistic variable usually combines with linguistic qual-
ifier, such as very, more or less. When executing fuzzy opera-
tions, we can use some operators such as fuzzy concentration
and fuzzy dilation to deal with the linguistic qualifier, and the
definitions of these operators are described below.
Definition 4 The membership function of the fuzzy proposi-
tion “U is close to P” can be defined by [3]:
f close to p (u) =
1
1 +
(
u−p
β
)2 (8)
where the larger of β, the wider of the curve and the less of β
the more narrow of the curve. Figure 1 shows the membership
function of the fuzzy proposition “U is close to p”.
Definition 5 If A˜j is a simple fuzzy term represented by a
fuzzy number in the universe of discourse U , and fA˜ as its
membership function, where fA˜j : U → [0, 1], then,
(1) The concentration rule
fveryA˜j (ui) =
(
fA˜j (ui)
)2
,∀ui ∈ U (9)
(2) The dilation rule
fmore or lessA˜j (ui) =
(
fA˜j (ui)
)1/2
,∀ui ∈ U (10)
2.3 Fuzzy Query
Fuzzy query processing techniques can allow the database
systems to deal with users’ fuzzy queries in a more flexible
and more intelligent manner [4,5,11,12,20,21,24,30].
SELECT <Attribute>
FROM <Table>
WHERE <Condition>
RTV < Threshold value>
The above basic syntax is the same with SQL-syntax, and
we define the word: RTV (Threshold value) to help the users
declare the threshold of query. The threshold can extract the
quantity of query data, or we can say that the higher the
threshold, the more fitness of output data. So, the count of
fitting data would be less if we declare threshold value higher,
where threshold value is defined between 0 and 1.
In crisp queries we can make multi-criteria searching
where we use the functions AND/OR to aggregate the predi-
cates. Normally the minimum will be used as theAND aggre-
gation and the maximum for the OR aggregation. For exam-
ple:
SELECT < Attribute 1, . . . , Attribute n>
FROM < Table >
WHERE < Attribute 1 and Attribute 2 and · · · Attribute
n>
Fig. 1 The membership function of the fuzzy proposition “U is close
to p”
J.-W. Wang et al.
Then,
Euclidean distance: ε
(
A˜, B˜
)
=
√√√√ 1
n
n∑
i=1
(
fA˜(xi) − fB˜(xi)
)2 (20)
Degree of similarity: NE
(
A˜, B˜
)
= 1−
√√√√ 1
n
n∑
i=1
(
fA˜(xi)−fB˜(xi)
)2
(21)
2.5.3 The degree of similarity of Hamming distance
(NH
(
A˜, B˜
)
) [15]
The degree of similarity of Hamming distance can also reflect
the similarity degree of two fuzzy sets.
Let A˜, B˜ are two fuzzy sets, defined as
A˜ = fA˜(X1)/X1 + fA˜(X2)/X2 + · · · + fA˜(Xn)/Xn
B˜ = fB˜(X1)/X1 + fB˜(X2)/X2 + · · · + fB˜(Xn)/Xn
Then,
Hamming distance: δ
(
A˜, B˜
)
= 1
n
n∑
i=1
∣∣µA˜(xi)
−µB˜(xi)
∣∣ (22)
Degree of similarity: NH
(
A˜, B˜
)
= 1 − 1
n
n∑
i=1
∣∣µA˜(xi)
−µB˜(xi)
∣∣ (23)
2.6 Hemodialysis indices
Hemodialysis is a form of dialysis that uses an artificial kid-
ney machine to remove excess fluids and waste products from
the bloodstream. Kt/V and URR are common indices in he-
modialysis adequacy [13]. Kt/V (pronounced Kt overV): The
“K” stands for the urea clearance in milliliters per minute,
the “t” is the dialysis time in minutes, and the “V” is the vol-
ume of distribution of urea in the body. URR stands for Urea
reduction ratio, and the URR test measures how much urea
was removed from your blood during one dialysis treatment.
The actual formula is below:
URR% = (Pre BUN − Post BUN)
Pre BUN
× 100 (24)
Pre BUN : Serum level of BUN at the beginning of HD.
Post BUN : Serum level of BUN at the end of HD.
Research shows that patients feel better and will live longer
when they receive enough dialysis. The findings all state that
when people did not receive enough dialysis, they could get
sick and die.A URR of 65 % and Kt/V of 1.2 are the minimum
values for adequate dialysis [8,10,13].
Except for above two indices, there are two other famil-
iar indices in hemodialysis adequacy where so called albumin
and Hematocrit (Hct). Diseased kidneys sometimes lose large
amounts of albumin into the urine faster than the liver can
produce it. In malnutrition there is not enough protein in the
patient’s diet for the liver to make new albumin. The normal
range of albumin concentrations in human blood is between
3.5 and 5.0 g/dL. The main functionality of Hematocrit (Hct)
is to tell us (red blood cell count and) level of anemia. A low
HCT is referred to as being anemic. The Hct is expressed as
a percentage. The normal range of Hct is 30–36% [1,16].
3 A fuzzy OWA query method for hemodiclysis database
The main objective of our paper focuses on developing a
fuzzy query system of the practical hemodialysis database for
a regional hospital in Taiwan. And we use a new fuzzy OWA
query method to evaluate fuzzy database queries about lin-
guistic or precise values, which can improve the crisp values’
constrain of traditional database. For this reason, this method
has four advantages: (1) Use fuzzy OWA query method (2)
Use actual hemodialysis database to verify our method (3)
Provide an aid opinion for doctor (4) Develop a fuzzy query
database system.
3.1 A new fuzzy OWA query model
In this section, we introduce the model (as Fig. 2) and main
steps of proposed new fuzzy OWA query method.
The main components of our model are: (1) Fuzzy query;
(2) Fuzzy weight and fuzzy OWA operator; (3) Similarity
operators. The algorithm of this research is:
Step 1. Build the fuzzy membership function of hemodialy-
sis indices. (The sub-steps are in Sect. 3.2)
Step 2. Preprocess the data of an actual fuzzy hemodialysis
database.
This step contains (1) remove the outliers, (2) scal-
ing, encoding, and selecting features of the data.
Step 3. Select fuzzy query’s weighting method.
If the user doesn’t need any weighting operator, exe-
cute Step 4. Else if the user selects the fuzzy OWA
weighting method, this step must get the situation
parameter’s value (α) from the users. (its sub-steps
are in Sect. 3.3) And, according to doctors’/experts’
experiences, we can rank the degree of important of
the indices.
Step 4. Select fuzzy query’s similarity method.
The options contain (1) None (2) Min–Max method
(3) similarity of Euclidean distance (4) Similarity of
Hamming distance (Refer to Sect. 2.5)
Step 5. If match degree is greater than RTV then this tuple
is selected.
3.2 Build the fuzzy membership function of hemodialysis
indices
In this paper, we sent 12 expert’s questionnaires (Appendix
A), 10 responses were found to be complete and usable, and
J.-W. Wang et al.
Fig. 3 Kt/V’s membership function
Step 3.2.2. Rank the degree of important of query’s attri-
bute.
Step 3.2.3. From step 3.2.1, we can get the largest weight
w1 by Eq. (17).
Step 3.2.4. From step 3.2.3, we can obtain the smallest
weight wn by Eq. (18).
Step 3.2.5. When w1 and wn are known, we can get the
other weights by Eq. (16).
Step 3.2.6. Calculate the aggregative weight of attributes
by Eq. (29).
Step 3.2.7. Use Eq. (30) to defuzzify the fuzzy aggregative
weight R˜.
Step 3.2.8. To avoid aggregative result Di > 1, we can use
Eq. (31) to get constrain solution Di > 1.
3.4 An algorithm of fuzzy query analysis
For easy computing, we build an algorithm of fuzzy query
analysis, and the flow chart is shown in Fig. 4.
Step 1. If query’s attribute include weight attribute then step2.
Else step 3.
Step 2. If weight attribute is fuzzy weight then retrieval impor-
tant degree of query attribute
Else if weight attribute is fuzzy OWA weight then
retrieval α value and query’s attribute number.
Step 3. Integrate query’s condition.
Step 4. Compute match degree of query’s attribute and record.
Step 5. If match degree is greater than threshold value then
choice and response to user
Else no responding.
Table 2 Linguistic terms of relative importance and its triangular fuzzy
numbers
Linguistic terms Triangular fuzzy numbers
Very unimportant (VUI) (0.0,0.167,0.333)
Unimportant (UI) (0.167,0.333,0.5)
Medium (M) (0.333,0.5,0.667)
Important (I) (0.5,0.667,0.833)
Very important (VI) (0.667,0.833,1.0)
4 System development and verification
This research constructs a fuzzy OWA query method and
adopts a hemodialysis database of a real region hospital to
develop a system to demonstrate. There are totally 123 pa-
tient’s dialysis data in this database. Borland C++ Builder
and SQL Server 2000 are adopted to develop this system.
Figure 5 is the screen of fuzzy OWA querying system. This
chapter can be divided into two parts, Sect. 4.1 is the dem-
onstration of actual example, and Sect. 4.2 is the comparison
of methods.
4.1 The demonstration of actual example
In order to clear the results of this research, we list several
examples of hemodialysis indicators query. Table 3 shows
some data of the real database, which were used as illustra-
tion for the examples in this paragraph. Examples 1 and 2 just
use the first five data (S001–S005), and the other examples
use the last five data (S006–S010).
Example 1 (Basic fuzzy query in crisp database)Assume that
the user’s fuzzy query statement is “Find the patient’s ID
whose Kt/V index is good”. The membership function of the
linguistic term “Good” is shown as Eq. (25). Such as S004,
J.-W. Wang et al.
we can see that µG(1.26)=0.866, in other words, the match-
ing degree of the record with respect to the user’s query is
0.866. We can say the patient’s Kt/V index is good and the
degree is 0.866.
Example 2 (Fuzzy query in fuzzy database) Assume that
record value is linguistic term (Table 4) and the user’s fuzzy
query statement is “Find the patient’s ID whose Albumin in-
dex is good”. We can use min–max method, Euclid distance,
and Hamming distance to calculate the matching degrees of
each record.
1. Min-Max Method:
(a) Assume that the membership function of the fuzzy
sets “Good” and “Medium” are shown as follows:
µGood = 01.0 + · · ·
0.25
3.9
+ 0.5
4.0
+ 0.75
4.1
+ 1
4.2
+ 1
4.3
+ 1
4.4
+ 1
4.5
+ 1
4.6
+ 1
4.7
+ 1
4.8
+ 1
4.9
+ 1
5.0
µMedium = 01 + · · · +
1
3.5
+ 0.857
3.6
+ 0.714
3.7
+0.571
3.8
+ 0.429
3.9
+ 0.286
4.0
+ 0.413
4.1
(b) Based on the Min–Max method function (19), we can
see that matching degree of the record with respect
to the user’s query is 0.0645.
2. Euclid distance ε
(
A˜, B˜
)
: Based on the Eq. (20), we can
get Euclid distance ε
(
A˜, B˜
)
=0.5172, then the matching
degree (degree of similarity) of the record with respect to
the user’s query NE
(
A˜, B˜
)
=0.4828 [by Eq. (21)].
Table 3 The selected patient’s dialysis data from this database
ID Kt/V Albumin Urea reduction Hematocrit
ratio (URR) (Hct)
S001 1.1 4.1 0.67 30
S002 1.73 4.2 0.82 30
S003 1.42 4.3 0.76 25
S004 1.26 4.5 0.72 28
S005 1.38 3.9 0.75 27
S006 1.25 3.6 0.71 32
S007 1.1 4.2 0.67 50
S008 1.33 4.3 0.74 34
S009 1.15 4.4 0.68 30
S010 1.33 4 0.74 27
Table 4 The patient’s attribute with linguistic term in database
ID Albumin
. . . . . .
S005 Medium
. . . . . .
3. Hamming distanceδ
(
A˜, B˜
)
: Based on the Eq. (22), we
can get Hamming distance δ
(
A˜, B˜
)
=0.290, and then based
on the Eq. (23), the matching degree (degree of similarity)
NH
(
A˜, B˜
)
=0.710.
Example 3 (Fuzzy query with fuzzy weight) Assume that the
user’s fuzzy query statement is “Find the patient’s ID whose
Kt/V index is good, Albumin index is good, URR is good and
Hct is good and Kt/V is VI Albumin is I URR is M Hct is
UI.” The execution steps of this query are as follows:
1. Table 3 shows the actual database table.
2. To obtain the matching degree of the record with respect
to the user’s query, such as Table 5.
3. Normalize weight of the attribute by Eq. (29).
WKt/V = (0.2223, 0.3571, 0.5999),
WAlbumin = (0.1667, 0.2859, 0.4997)
WURR = (0.1110, 0.2143, 0.4001),
WHct = (0.0557, 0.14276, 0.2999)
4. Calculate the aggregative weight of the attributes by Eq.
(30). [In Table 6 (second column)].
5. Use Eq. (31) and (32) to defuzzify the value of aggrega-
tive weight. [In Table 6 (third column)].
6. Assume the threshold value is 0.8, and then the selected
results are as Table 6 (fourth column).
Example 4 (Fuzzy query with fuzzy OWA) Assume that the
user’s fuzzy query statement is the same as Example 3, and
use fuzzy OWA to query. The execution steps are as follows:
1. The actual database table is as Table 3.
2. Obtain matching degree of the record with respect to the
user’s query (as Table 5).
3. Computing weightW1−−Wn by Eqs. (13) – (18), assume
situation parameter α is 0.5, 0.6, 0.7, 0.8, 0.9 and 1.0; the
result is Table 7.
Table 5 The matching degree of the record with respect to the user’s
query
ID Kt/V Albumin URR Hct
S006 0.8330 0.0000 1.0000 1.0000
S007 0.3330 1.0000 1.0000 0.0000
S008 1.0000 1.0000 0.5000 0.5000
S009 0.5000 1.0000 1.0000 0.6670
S010 1.0000 0.5000 0.5000 0.0000
. . . . . . . . . . . . . . .
Table 6 The results of Example 3
ID Aggregative weight Min (1, defuzzify Result
weight) (RTV=0.8)
S006 (0.3519,0.6545,1.1998) 0.7151
S007 (0.3517,0.6191,1.09958) 0.6724
S008 (0.4723,0.8215,1.4496) 0.8912 Selected
S009 (0.4629,0.7739,1.3998) 0.8526 Selected
S010 (0.3612,0.6072,1.0498) 0.6563
. . . . . . . . . . . .
J.-W. Wang et al.
Table 11 The query results of different methods
ID Crisp Fuzzy weight Fuzzy OWA
α = 0.5 α = 0.6 α = 0.7 α = 0.8 α = 0.9 α = 1
S001 0.7020** 0.6875* 0.6446* 0.5905 0.5244 0.4417 0.3333
S002 0.4164 0.4167 0.3836 0.3412 0.2821 0.1891 0.0000
S003 0.6552* 0.4750 0.5849 0.6902* 0.7889** 0.8699** 0.9000**
S004 Selected 0.8774** 0.7167** 0.7866** 0.8394** 0.8756** 0.8879** 0.8667**
S005 0.4615 0.3125 0.4155 0.5298 0.6595* 0.8097** 1.0000**
S006 Selected 0.7151** 0.7083** 0.6698* 0.6472* 0.6484* 0.6903* 0.8330**
S007 0.6724* 0.5833 0.6011* 0.5934 0.5572 0.4801 0.3330
S008 Selected 0.8912** 0.7500** 0.8098** 0.8680** 0.9243** 0.9732** 1.0000**
S009 0.8249** 0.7918** 0.7706** 0.7362** 0.6869* 0.6146* 0.5000
S010 0.6563* 0.5000 0.5901 0.6809* 0.7758** 0.8769** 1.0000**
. . . . . . . . . . . . . . . . . . . . . . . .
* Selected under RTV ≥ 0.6
** Selected under RTV ≥ 0.7
Fig. 6 The number of selected tuples for different methods under different RTV
Table 12 The number of selected tuples under different methods
RTV Crisp Fuzzy weight Fuzzy Fuzzy
OWA (α = 0.5) OWA (α = 0.9)
0.5 17 67 50 71
0.6 56 39 54
0.7 37 22 38
0.8 22 9 22
0.9 9 3 15
0.95 5 2 8
Table 13 The doctor’s diagnoses
ID Kt/V Albumin URR Hct Hemodialysis quality
S001 1.1 4.1 0.67 30 Medium
S002 1.73 4.2 0.82 30 Good
S003 1.42 4.3 0.76 25 Medium
S004 1.26 4.5 0.72 28 Good
. . . . . . . . . . . . . . .
Fig. 6. From Fig. 6, under different RTV’s values, the
fuzzy OWA method can select the number of tuples more
flexible than the other two methods by user (except for
RTV=0.6).
Table 14 The result compare with doctor by accuracy ratio (Single
index, The threshold=0.5)
Single index
K 0.557692
A 0.788462
U 0.5
H 0.403846*
* Accuracy rate <0.5
K Kt/V
U URR
A Albumin
H Hct
4.4 Evaluate the effectiveness of fuzzy OWA
In order to evaluate the effectiveness of fuzzy OWA, we com-
pare the results with doctor’s diagnoses. We query by fuzzy
weight and fuzzy OWA to obtain the tuples’ match degrees
with the index is “Good”. The tuple is selected when its match
degrees ≥ 0.5. Secondly, we compare the effectiveness of
fuzzy OWA with doctor’s diagnoses by accuracy ratio, and
the doctor’s diagnoses are shown in Table 13.
Accuracy rate = |υ ∩ ω|/|ω| (33)
J.-W. Wang et al.
() Other: (Please write the hemodialysis index item in
blank.)
 PCR:
 CR:
 TAC:
2. Please give the ranges for four hemodialysis indices by
hemodialysis adequacy.
Kt/V:
0.7—–0.8—–0.9—–1.0—–1.1—–1.2—–1.3—–1.4—–
1.5
URR:
50—–55—–60—–65—–70—–75
Albumin:
3.0—–3.5—–4.0—–4.5—–5.0
Hct:
27—–28—–29—–30—–31—–32—–33—-34—–35—–
36
Appendix B. The membership functions (MF) of the indices
Index Term Membership function
URR Good µG(x) =



x−62
5 62  x < 67
1 67  x < 73
75−x
2 73  x < 75
(B1)
Fair µF (x) =



x−55
5 55  x < 60
1 60  x < 62
67−x
5 62  x < 67
(B2)
Bad µLB(x) =
{ 60−x
5 55  x < 60
1 x < 55 (B3)
µRB(x) =
{
x−73
2 73  x  75
1 x > 75 (B4)
Albumin Good µG(x) =
{
x−3.8
0.4 3.8 < x  4.2
1 x > 4.2 (B5)
Fair µF (x) =



x−3.2
0.4 3.2  x < 3.6
1 3.6  x < 3.8
4.2−x
0.4 3.8  x < 4.2
(B6)
Bad µB(x) =
{ 3.6−x
0.4 3.2 < x < 3.6
1 x  3.2 (B7)
Hct Good µG(x) =



x−28
3 28  x < 31
1 30  x < 33
35−x
2 33  x < 35
(B8)
Fair µF (x) =



x−27
1 27  x < 28
1 28  x < 29
31−x
2 29  x < 31
(B9)
Bad µLB(x) =
{
28−x
1 27  x < 28
1 x < 27 (B10)
µRB(x) =
{
x−33
2 33  x  35
1 x > 35 (B11)
References
1. Albumin (2003) Wikipedia, the free encyclopedia. http://en2.wiki-
pedia.org/wiki/Albumin
2. Chen SJ, Hwang CL (1991) Fuzzy multiple attribute decision mak-
ing. Physica-Verlag, New York
3. Chen SM, Jong WT (1997) Fuzzy query translation for relational
database systems. IEEE Trans Syst Man Cybern 27(4):714–721
4. Chiang DA, Lin NP, Shis CC (1998) Matching strengths of answers
in fuzzy relational databases. IEEE Trans Syst Man Cybern C,Appl
Rev 28(3):476–481
5. Chen YC, Chen SM (2000) Techniques of fuzzy query processing
for fuzzy database systems. In: Proceedings of the 5th conference
on artificial intelligence and applications Taipei, Taiwan, pp 361–
368
6. Chang JR, Ho TH, Cheng CH, Chen AP (2004) Dynamic fuzzy
OWA model for group multiple criteria decision making (Accepted,
forthcoming)
7. Filev D, Yager RR (1998) On the issue of obtaining OWA operator
weights. Fuzzy Sets Syst 94:157–169
8. Fink JC, Gardner JF, Armistead NC, Turner MS, Light PD (2000)
Within-center correlation in dialysis adequacy. J Clin Epidemiol
53(1):79–85
9. Fuller R, Majlender P (2001) An analytic approach for obtaining
maximal entropy OWA operator weights. Fuzzy Sets Syst 124:53–
57
10. Gotch FA, Sargent JA (1985)A mechanistic analysis of the national
cooperative dialysis study. (NCDS) Kidney Int 28:526–534
11. Kacprzyk J (1999) Fuzzy logic for linguistic summarization of
database. In: Proceedings of the IEEE international fuzzy systems
conference, pp 22–25
12. Kacprzyk J (1999)An interactive fuzzy logic approach to linguistic
data summaries. In: Proceedings of the 18th international confer-
ence of the North American, fuzzy information processing society,
NAFIPS pp 595–599
13. Lisa, Sarah, Cathy, Kim, Jeff, Rose, Yolanda, Marilyn, Glenda
(2000) Providing kidney patients and their families information
on diet, health, and kidney disease. ESRD Network# 12 Patient
Newsletter 1(3)
14. Mesiar R, Saminger S (2004) Domination of ordered weighted
averaging operators over t-norms. Soft comput 8:562–570
15. Miller GA (1956) The magical number seven or minus two: Some
limits on our capacity of processing information. Psychol Rev
63:81–97
16. MedicineNet.com (2003), http://www.medicinenet.com/Hemato-
crit/article.htm
17. Pappis CP, Karacapilidis NI (1993) A comparative assessment of
measures of similarity of fuzzy values. Fuzzy SetS Syst 56:171–
174
18. Patient Advisory Committee (2002) Improve the quality of your
care. ESRD Nework 18(5)
19. Ross TJ (1995) Fuzzy logic with engineering applications.
McGraw-Hill, USA
20. Rasmussen D, Yager RR (1997) Summary SQL-A fuzzy tool for
data mining. Intell Data Anal 1:49–58
21. Rocacher D (2001) On the use of fuzzy numbers in flexible query-
ing. In: Proceedings of the IFSA World Congress and 20th NAFIPS
international conference, vol. 4 pp. 2440–2445
22. Yager RR (1988) Ordered weighted averaging aggregation opera-
tors in multi-criteria decision making. IEEE Trans Syst Man Cy-
bern 18:39–75
23. Yager RR (1993) Families of OWA operators. Fuzzy Sets Syst
59:125–148
24. YaziciA, Cibiceli D (1999)An access structure for similarity-based
fuzzy databases. Inform Sci 115:137–163
25. Zadeh LA (1965) Fuzzy Sets. Inform Control 8:338–353
26. Yazici A, Roy G (1999) Fuzzy database modeling. Physica-Verlag,
New York
27. Zadeh LA (1975a) The concepts of a linguistic variable and its
applications to approximate reasoning. Inform Sci 8:199–249
28. Zadeh LA (1975b) The concepts of a linguistic variable and its
applications to approximate reasoning. Inform Sci 8:301–357
29. Zadeh LA (1976) The concepts of a linguistic variable and its appli-
cations to approximate reasoning. Inform Sci 9:43–80
30. Zemankova M, Kandel A (1985) Implementing imprecision in
information systems. Inform Sci 37:107–141
31. Zadeh LA (1988) Fuzzy Logic. IEEE Comput 21(4):83–91
  1
智慧型模糊推論血液透析品質分類輔助系統 
摘要 
本研究開發「智慧型模糊推論血液透析品質分類輔助系統」，由長期收集的血液透
析檢驗數據去進行分析，分析結果顯示提出的方法對血液透析品質有分辨的能力。本文
首先依文獻去設計專家問卷，並訪談相關的專家去萃取血液透析品質指標：Kt/V、URR、
Albumin、Hct，再利用修正的MEPA將四個指標數值離散化建立其歸屬函數。最後運用
模糊理論，建立法則庫，提供醫護人員臨床照護參考，對病患狀況作預先處置，達到適
化透析的境界。 
本研究以區域醫院血液透析中心 128位長期血液透析病患，取得病患臨床檢驗數據
作驗證，使用開發之輔助系統後所得結果：當品質指標值分為兩個語意值及α=0.7 β
=0.3 時正確率為 98.30%；品質指標值分成三個語意時α=0.8 β=0.1 時正確率為
95.47%。研究中提出以區別分析與開發的系統作比較，亦顯示本系統之適用性及正確率
均優於統計方法。歸納本研究最主要之貢獻：建立血液透析品質指標隸屬函數、將過去
三個月醫師臨床診斷資料與四個品質指標值，事先歸類與轉換成隸屬值，作模糊相似性
運算與門檻值取捨產生推論法則，並重複進行整個資料的學習與測試，使其辨識率達到
滿意效果。及開發智慧型模糊推論血液透析品質分類輔助系統，將病患檢驗資料作品質
分類，提供醫師臨床診斷治療的預警，解決病患隱藏的危機。 
 
關鍵字：血液透析、品質指標、模糊推論 
 
 
Abstract 
  In this paper, we develop “Intelligent Hemodialysis Quality Classification Support System 
based on Fuzzy Inference method”. From long-term accumulated experiment values for 
dialysis, the analytic results show that the proposed method can discriminate effectively the 
dialysis quality. We design an expert questionnaire by studying the medical research, and 
interview the related experts to extract the dialysis-quality indexes, which is: Kt/V, URR, 
Albumin, and Hct. Then the membership functions of dialysis-quality indexes are established. 
Further, we use fuzzy theory to set up the rule-base to provide the useful information for the 
medical workers serving in clinical care. It will be helpful for the patient if we can predict the 
patient’s condition and take the proper treatment; we may prevent his illness getting worse 
and reach the state of the appropriate dialysis treatment. 
  In this paper, we collect 128 patients who have been accepted the long-term dialysis at a 
dialysis-center of an area-scale hospital as the study objects, and then verify their history 
clinical data diagnosed by the doctors. This paper has three contributions as follows: 
1. Establish the membership function of dialysis quality indexes. 
  3
 
 
 
貳、文獻探討 
一、模糊理論 
模糊理論是美國加州大學教授 L.A Zadeh（1965）年所提出以數學模型來描述語意
的模糊資訊方法，它是一種新的集合概念（井上洋，1999）。此理論由一般的集合擴張
概念而來，是一個為了描述模糊領域內的活動與觀測所發展的學問，我們可以將其視為
傳統的集合理論的一種推廣型式。在傳統的集合論中，論域裡的一個元素與一個集合之
間的關係，若不是「0」就是「1」的明確表示方式；而模糊邏輯就是傳統明確集合的推
廣，它允許模糊集合中的元素，對此集合的歸屬程度介於 0到 1之間的任意值。其數學
表示式如下： [ ]1,0)( →= XxAµ  
Fuzzy 理論把傳統數學從二值邏輯（binary logic）擴展到連續多值（continuous 
multi-value），利用歸屬函數（membership function）描述一個概念的特質，也就是使用
0和 1之間的數值來表示一個元素屬於某一概念的程度，這個值稱為元素對集合的歸屬
度（membership grade），也可稱為信賴度（confidence）或確定度（certainty），用來描
述某一元素χ屬於模糊集合Α~ 之程度，以 0到 1的數字來表示之，即μA(χ)=1的域內
元素χ所組成。當歸屬度為 1時，表示該元素百分之百屬於這個概念；當歸屬度為 0時，
表示該元素完全不屬於這個概念；介於兩者之間的就是完全屬於和完全不屬於之間的灰
色地帶（張詩言，1995）。其特徵簡述如下： 
1. 嘗試以人類思維的方式去簡化問題本身的複雜度。 
2. 模糊理論下的任何事，都是程度上的差異問題。 
3. 二值對多值，簡單對精確，在二值邏輯的狀態只有二個，若是介於中間狀態，則
無法精確表示，模糊邏輯可依實際需求細分成無限個。 
4. 精確度增加模糊度增加，模糊程度增加代表區分越細密，相對地精確度增加。 
二、模糊專家系統 
決策支援系統（Decision Support Systems, DSS）的觀念最早是於 1970年代初期由
美國學者 Scott Morton(1971)所提出。其主要特色是以電腦支援系統協助管理者使用資料
及模式來解決非結構性問題(Sprague and Carlson,1982），根據梁定澎教授(1999)對決策支
援系統的定義：任何可以對決策制定有幫助的系統，使決策系統可以應用到除了交易處
理之外的所有系統，都應該叫做決策支援系統。換言之，「任何支援決策制定的系統都
是決策支援系統」。隨著人工智慧的發展，近年來已有部份研究將人工智慧的技術納入
DSS中，特別是專家系統。這方面的相關研究，致力於將知識的處理與決策支援系統相
結合，使得決策支援系統能夠具備更好的功能，建構更好的問題解決程序， 
自 1960 年代人工智慧開始發展，專家系統是表現較成熟的部份，從早期工具研發
  5
體液。一種是擴散（diffusion or clearance），另一種是超過濾（ultrafil-tration）。透析治
療主要目的是清除體內尿毒素及調節水、電解質和酸鹼平衡。目前使用的血液透析系統
只能代替正常腎臟清除代謝所產生的廢物，清除過多液體，矯正酸中毒與電解質失衡，
不能執行正常腎臟的內分泌，合成或新陳代謝功能。所以，血液透析只能減輕尿毒症狀
而不能使尿毒症狀完全消失。 
 
五、適化透析（Adequate dialysis） 
長期接受血液透析治療，會有許多不平衡症候群或併發症發生，唯有改善這些併發
症，才能給病患舒適的透析治療，提昇病患生活品質。所謂「適化透析」的基本概念有
二項要求： 
1. 常態的飲食下，血中尿毒至少需降低至安全範圍。 
2. 在不引起病人不舒服的情況下，可有效的去除每次透析與透析治療之間所增加
的水分。 
就其量而言，必須有足夠去除尿毒的能力。就其質而言，必須要病人能夠接受此一
療法（Gotch and Sargent 1985）。適當的透析治療就是能使病患得到充分的復健，攝取合
理的飲食，而能自行造血，維持正常的血壓，並能預防神經病變的發生及惡化，只要病
人覺得“舒服＂那就是適當的透析（黃綺薇等 1994）。 
有關血液透析評估指標及其相關研究（如表 1），本研究整理如下： 
z Kt/V（Clearance rate per volume）透析劑量指標： 
K：Clearance of dialyzer（m/min），透析器尿素廓清率。 
t：Time（min），一次透析時間。 
V：Volume distribution of urea（liter or ml），尿素體積分佈。 
合理的透析治療至少要維持 Kt/V在 1.0以上。例如：一位體重 60公斤的病患，V
約為 60×0.58＝34.8L，如果透析器尿素廓清率為 150cc/min（在血流量為
200cc/min，透析液流量為 500cc/min之時），每次透析時間為 4.5小時，則Kt/V =0.15
×270/34.8＝1.16 
z URR（Urea reduction ratio） 尿素氮清除率： 
透析治療前後，尿素氮減少的百分率。尿素氮清除率最好能夠維持在 65-70%以上。
其計算公式如下： 
URR=（pre-dialysis BUN－post-dialysis BUN）÷pre-dialysis BUN 
z Albumin 血清白蛋白： 
代表病患的營養狀態及疾病發炎反應的程度。為影響長期存活的最重要因素之
一。血中白蛋白濃度最少須維持在 4.0g/dl以上。 
z HcT（Hematocrit）血比容： 
  7
六、醫療服務品質 
醫療品質所涵蓋的層面非常廣泛，有不少機構及學者都對醫療品質下過定義，大致
都與醫療提供者、病患及社會三方面有密切關係。然而醫療品質的定義，會隨著國情及
時勢的變化而不同，也必須配合現有的專業及有限的資源來共同達成。一般而言，醫療
機構及醫護人員比較強調臨床治療的適切性及效果，政府則著重於資源的利用和分配合
宜，病患則著眼於所經歷的醫療服務過程。 
The Joint Commission on Accreditation of Healthcare Organizations(JCAHO 1996)將醫
療服務品質定義成以下九個構面： 
1. 功效（efficacy）：提供的治療和照護是否能達到所要的結果。 
2. 適當性（appropriateness）：指所提供的治療和照護是否符合病患的臨床需求，沒
有任何不當和濫用。 
3. 可獲得性（availability）：是否能提供病患所有治療和照護。 
4. 及時性（timeliness）：在最有效益的時點，將服務提供給病患。 
5. 效果（effectiveness）：將最符合現今醫療知識的治療和照護，以最正確的方法提
供給病患。 
6. 連續性（continuity）：能夠提供病患因病程變化所需的一連串各種不同的照護服
務。 
7. 安全性（safety）：治療照護過程是否安全、醫院環境是否安全。 
8. 效率（efficiency）：在照護結果和機構內的資源分配間，是否清楚的關係，包括減
少重複及浪費的動作。 
9. 尊重和關懷（respect and caring）：病人及家屬是否參與治療決策、個人隱私及感
受是否有被尊重及注意等。 
目前為止，沒有一套科學化評估系統能準確地評估透析病患生理狀況是否良好？如
果將這些治療後的評估數值，提升為透析前品質的指標，除了能使病患達到有效、適當
的透析，更是醫療服務品質的一大進步。由文獻得知：所謂「醫療品質」，必須要能夠
瞭解病患的狀況，提供及時而正確的治療，才能真正地減輕其病痛，恢復健康與舒適。
此意義恰與本研究「品質分類輔助系統」所具備之功能與目的相符，足見本研究成果貢
獻於臨床上治療與照護之意義。 
參、研究方法 
醫生的醫囑多為語意表達，對於血液透析臨床數據的判讀也因人而異，難以設定一
個明確的數值，是模糊的概略範圍。檢驗數據的判讀具有「主觀性」與「模糊性」，無
法使用一般數理方法處理。所以本研究應用模糊理論觀念，評估預測不確定性之問題，
以模糊的觀念描述指標變數，以模糊相似性運算與門檻值取捨來產生推論法則，提供醫
師作臨床狀況分析，作適當處置。若以模糊以外其他方式無法更簡單、正確地解決此問
題。 
本研究根據文獻探討理論基礎設計專家問卷，經專家訪談萃取出影響血液透析的重
  9
列出最常使用之品質評估指標七項作為問卷選擇指標。選定台灣中、南部五家醫院(含
醫學中心、區域醫院、地區醫院、診所)的血液透析中心主治醫師為對象做問卷訪談；
訪談後，回收專家問卷 12份，有效問卷 10份，所有醫師專家在品質指標項目的選取上，
多數集中在文獻探討所得的前四項指標（Kt/V、URR、Albumin、Hct），其中只有一位
醫師勾選其它項目中之 TAC，依 10位醫師專家對指標所作之重要程度排序以加權方式
計算後，萃取出最具影響的四項品質指標為：Kt/V、URR、Albumin、Hct。 
 
 
表 2：病患抽血檢查項目原始資料 
Total 
prot 
Albu GOT GPT Alk-P Total 
Biliru
Chol Trig Hct Fe TIBC Ferritin Tran 
satur
UIBC BUN-
前 
BUN-
後 
Cr U-A Na k Cl P URR Kt/V
7.3 4.1 22 29 157 0.57 167 147 30 68 201 319 33.8 133 68.8 21.3 12.8 7.8 139 4.7 105 5.9 0.69 1.17
6.8 4.1 48 75 164 0.79 180 125 32 132 252 659 52.3 120 53.9 10.5 9.6 8.6 143 6.6 99 3.3 0.76 1.64
7.7 4.7 15 7 156 0.89 268 562 27 63 259 509 44.1 105 60.8 17.8 11.8 7.5 140 3.8 103 5.5 0.81 1.41
7.2 3.6 31 20 209 0.65 119 95 25 88 302 746 29.1 139 72.5 33.1 13.6 5.8 129 5.2 100 2.6 0.77 1.12
 
二、建立指標隸屬函數、離散化及產生模糊法則 
利用Modify MEPA (Chen, Cheng 2006)將四個指標數值離散化建立其歸屬函數，再
計算其隸屬程度產生模糊法則，其步驟敘述如下： 
步驟一：計算指標的最小熵值。假設要在指標值的區間 ]2,1[ xx 中計算點 x的熵值，表示
為 )(xS 其數學式如(1)所示： 
)()()()()( xSxqxSxpxS qp +=  (1)
        (1)式中的 )(xS p 及 )(xSq 的計算方式如(2)、(3)式。 )(xp 、 )(xq 的計算如(6)、(7)
式所列。 
)](ln)()(ln)([)( 2211 xpxpxpxpxS p +−=  (2)
)](ln)()(ln)([)( 2211 xqxqxqxqxSq +−= 。 (3)
        而 )(xpk 、 )(xqk 的計算如同(4)、(5)式所示，其中 k為計畫分類的類別數。 
1)(
1)()( +
+=
xn
xnxp kk  (4)
1)(
1)()( +
+=
xN
xNxq kk  (5)
  11
只有一條。 
步驟八：由已經產生的法則(Rule)中計算其MF(membership function value)值由MF值與
β之比較產生最後一項法則(Rule)，例如已經產生了二項法則 Rule1和 Rule2
且最後一項計劃(Plan)結果是 Z，因此最後一項法則(Rule)為 IF MF(Rule1)<β 
AND MF(Rule2)<β THEN Plan is Z。 
例舉如下： 
Rule1：IF Kt/V is Good THEN DD is Good 
Rule2：IF URR NOT Bad AND Hct is Fair THEN DD is Fair 
Rule3：IF MF(Rule1)<β AND MF(Rule2)<β THEN DD is Bad 
 
肆、系統實作與驗證評估 
本文以 Delphi為程式開發工具，建置完整的血液透析模糊系統，系統利用一般的資
料庫系統可以彈性地建置模糊法則，連結現有血液透析系統資料庫，完成血液透析品質
評估查詢系統，並以血液透析病患品質指標為例，驗證此系統執行成效。 
本系統主要特色是：指標資料可以不同資料庫的資料形態作為資料輸入來源，可以
動態編輯對應指標的分類和隸屬函數以及隸屬函數的運算，整個系統的架構如圖 2。系
統之主畫面如圖 3所示，包含各個步驟的功能元件：設定屬性群組、測試隸屬函數、計
算隸屬函數、計算 subsethood、產生模糊法則庫及血液透析品質評估。各功能元件說明
如下： 
1. 設定屬性群組：可動態編輯資料來源欄位之對應指標屬性和計劃的分類以及相關的
隸屬函數。 
2. 測試隸屬函數：評估第一步驟建立隸屬函數是否可正常運算。 
3. 計算隸屬函數：動態選擇提供計算資料來源，將資料來源的數值，透過第一步驟建
立的隸屬函數為基礎，計算來源資料為隸屬函數值將函數值及計劃分類暫存在檔案
中，作為下一步驟的計算基礎（演算步驟中之步驟一至步驟四）。 
4. 計算 Subsethood：依不同計劃分類來計算每一屬性之 Subsethood Value並將
Subsethood Value暫存在檔案中（演算步驟中之步驟五）。 
5. 產生模糊法則：利用 Subsethood Value推論法則（演算步驟中之步驟六至步驟八）。
血液透析品質評估：建立使用者評估查詢功能，利用步驟一產生的法則評估透析病
患相關指標數值，產生模糊推論法則提供醫師作臨床狀況分析，作適當處置。 
 
 
 
 
 
 
 
  13
畫分成兩個語意值。再委由醫師依檢驗數據判斷血液透析品質；將醫師判斷後之資料轉
換成檔案或資料庫表格，作為案例的資料來源。 
（一）案例一 
以來源資料提供[病患姓名]及[檢驗數據]，委由醫師依病患姓名判斷血液透析的品
質，由醫師依其專業知識及臨床經驗，將病患狀況分成五個狀況等級(很好、好、普通、
不好、很不好)來分別標示血液透析的品質。 
1. 定義語言述詞函數：將病患資料四項品質指標作為輸入的屬性將每個屬性以兩種狀
況(好、差)定義分類，計劃(醫師診斷)也以兩種狀況(好、差)定義分類，所以每一個
屬性和計劃都有二個語言述詞，亦即： Kt/V=｛差 好｝、URR=｛差 好｝、Albumin=
｛差 好｝、Hct=｛差 好｝、Plan=｛差 好｝，每個屬性都有隸屬函數將來源資料轉換
成隸屬函數值，屬性依不同狀況產生各別隸屬函數值。 
2. 評估模糊法則與制定模糊法則：模糊法則的產生有二項重要参數值α、β，α決定
屬性與計劃相似度，β為否定参數值。評估模糊法則嚐試將所有α、β的數值組合
全部驗證一遍，模糊法則經訓練資料學習產生，並測試其正確率選擇法則，經選擇
的模糊法則與文獻探討的經驗法則作相關比較，列出最佳的模糊法則，當
alpha:0.7;beta:0.3時，其正確率為 98.30%，法則內容如表下： 
alpha:0.7 ; beta:0.3 
Rule1: IF  ALBU_Good AND  URR_Good THEN GOOD 
Rule2: IF ( ALBU_Good AND  URR_Good) < 0.3 THEN BAD 
正確率:347/353=98.30% 
（二）案例二 
以來源資料提供[檢驗數據]，委由醫師依檢驗數據判斷血液透析的品質，醫師依專
業知識及臨床經驗，將病患狀況分成三個狀況等級(好、普通、不好)分別標示血液透析
品質，將醫師判斷後資料轉換成檔案或資料庫表格，作為案例的資料來源。 
1. 定義語言述詞函數：將病患資料四項品質指標作為輸入的屬性將每個屬性以三種狀
況(好、普通、差)定義分類，計劃(醫師診斷)以兩種狀況(好、差)定義分類，每一個
屬性有三個語言述詞，計劃有二個語言述詞，亦即：Kt/V=｛差 普通 好｝、URR=
｛差 普通 好｝、Albumin=｛差 普通 好｝、Hct=｛差 普通 好｝、Plan=｛差 好｝，
每個屬性都有隸屬函數，將來源資料轉換成隸屬函數值。 
2. 隸屬函數值與 Subsethood Value：屬性依不同狀況產生各別的隸屬函數值。 
3. 評估模糊法則則與制定模糊法則：模糊法則的產生有二項重要的参數值α、β，α
決定屬性與計劃相似度，β為否定参數值。評估模糊法則嚐試將所有α、β的數值
組合，全部驗證一遍，模糊法則經訓練資料學習產生，測試其正確率來選擇法則，
列出最佳的模糊法則當 alpha:0.8;beta:0.1時，其正確率為 95.47%，法則內容如下： 
alpha:0.8 ; beta:0.1 
Rule1: IF NOT ALBU_Bad AND NOT HCT_Good AND NOT URR_Good AND 
NOT KT/V_Good THEN GOOD 
Rule2: IF (NOT ALBU_Bad AND NOT HCT_Good AND NOT URR_Good AND 
NOT KT/V_Good) < 0.1 THEN BAD 
  15
Rule1: IF KT/V > 1.21 AND ALBU > 3.6 THEN GOOD 
Rule2: IF KT/V <= 1.21 AND URR <= 0.58 AND ALBU <=4.2 THEN BAD 
Rule3: IF KT/V <= 1.21 AND URR > 0.58 AND ALBU <=3.2 THEN BAD 
 
（五）模糊血液透析診斷輔助系統與統計分析之比較 
輸入病患檢驗數據後模糊血液透析診斷輔助系統，在案例一，以[病患姓名]及[檢驗
數據]，委由醫師依病患姓名判斷血液透析品質，經系統運作結果當α=0.7、β=0.3時，
正確率為98.30%；案例二，以[檢驗數據]，委由醫師依檢驗數據判斷血液透析品質，醫
師依專業知識及臨床經驗，將病患狀況分成三個狀況等級(好、普通、不好)分別標示血
液透析品質，經系統運作結果當α=0.8、β=0.1，正確率為95.47%；此兩種方法與區別
分析檢定醫師診斷正確率作比較，我們可知：以案例一為資料輸入模糊血液透析診斷輔
助系統後，結果正確率最高。此結果充分顯示系統對於醫師臨床診斷有極佳的輔助功能
及病患狀況預測正確性，亦表示系統輸出之模糊法則對透析病患臨床照護確有提供警告
的效果。 
本研究智慧型模糊推論血液透析品質分類輔助系統之理由及優點，經由以上的方法
比較後，可以歸納出以下幾點： 
1. 就適用時機而言，經由模糊血液透析診斷輔助系統推論產生的模糊法則，具有學
習能力，正確率高。 
2. 模糊法則提供血液透析品質預測模式，預告醫護人員瞭解病患透析品質，可在透
析前對病患檢驗數據作評估，做好適當處置，例如：是否延長透析時間、進行低
鈣透析或更換人工腎臟等。 
3. 統計方法只能根據檢驗數據累積，收集資料對整體血液透析中心做事後統計分
析，無法如專家系統一樣，提供模糊法則，作預測模式提供事前預警。 
4. 就以上診斷輔助系統與統計方法比較，彙整如表 5： 
 
表 5：方法比較 
 診斷輔助系統 
案例一 
診斷輔助系統 
案例二 區別分析 
辨識力 98.30 % 95.47 % 87.3 % 
優點 
1. 提供交談式介面，使用者可輕易使用。
2. 具學習進化能力，提供使用者學習的功
能。 
作整體透析病患長期透析品質
分析。 
缺點 需開發程式系統。 1. 需事先了解區別分析。 
2. 計算不易。 
適用性 具學習能力，適用不同資料。 分析透析中心整體透析品質。
臨床 
應用 
正確率高輔助功能佳。 醫師主觀判斷，會因某些因素忽
略病患症狀。 
 
  17
參考文獻 
1. 井上洋、天笠美知夫原著，陳耀茂譯，1999，模糊理論，五南圖書出版公司。 
2. 王偉彥、諸逸之、范護釋編著，1996，專家系統應用與發展工具-CLIPS，全華科技
圖書。 
3. 胡國華，1997，模糊理論在血液透析之應用：透析療效綜合指標評估出行之建立，
中原大學醫學工程研究所碩士論文。 
4. 梁定澎，1999，決策支援系統，台北，松崗電腦圖書公司。 
5. 孫宗瀛、楊英魁，1999，Fuzzy控制：理論、實作與應用，全華科技圖書。 
6. 章樂琦、曾碧萊、李蕙蓉、唐威莉、胡玉卿等，民 87，腎臟疾病 營養與膳療學，
P433-446。 
7. 張詩言，1995，Fuzzy入門—人類科學思維的新視界，全欣科技圖書，P8-9。 
8. 黃志強編著，1994，血液透析學，合記圖書出版社，P221-237。 
9. 黃綺薇、吳彥英、劉素瑛，1994，血液透析患者對秘方使用情形之調查，腎臟與透
析第 6卷 3期，228~231。 
10. 譚柱光、黃東波編著，1994，人工腎臟，力大圖書有限公司。 
11. Babb AL, Popovich RP, Christopher TG, Scribner BH. “The genesis of the square 
meter-hour hypothesis.” Trans Am Soc Artif Intern Organs, 17 1971, pp:81-91 
12. Chen TW, Huang TP, Khanna R., “The weekly removal of urea nitrogen in CAPD and 
conventional hemodialysis,” Perit Dial Int , 14(2) 1994, pp:189-90 
13. Gotch F, Sargent J, “A mechanistic analysis of the National Cooperative Dialysis Study 
(NCDS),” Kidney Int; 28 1985, pp:526-534 
14. Hynes, D.M., Stroupe, K.T., Greer, J.W., et al., “Potential Cost Savings of 
Erythropoietin Administration in End-Stage Renal Disease.” American Journal of 
Medicine 112(3) 2002,pp:169-175 
15. JCAHO, 1996 Comprehensive Accreditation Manual for Hospitals, Oakbrook Terrace, 
IL: Joint Commission on Accreditation of Healthcare Organizations; 1996 
16. Joint Commission on Accreditation for Healthcare Organizations, 1996 Accreditation 
Manual for Hospitals: Volume 1 - Standards; 1996, JCAHO: Oakbrook Terrace, IL. 
17. Jeffrey C.F., James F.G., Nancy C.A., Mary S.T., Paul D.L., ”Within-center correlation in 
dialysis adequacy,” Journal of Clinical Epidemiology, 53(1) 2000, pp:79-85 
18. Jr-Shian Chen, Ching-Hsue Cheng, “Software Diagnosis Using Fuzzified Attribute Base 
on Modified MEPA,” LNAI 4031,2006, pp:1270-1279 
19. Li Lynn Lingx, “Knowledge-Based Problem Solving： An Approach to Health 
Assessment,” Expert Systems with Application, 16(1) 1999, pp:33-42 
20. Ricka, R., Vanrenterghem, Y., & Evers, G., “Adequate self-care of dialysed patients: A 
review of the literature.＂  International Journal of Nursing Studies, 39 2002, 
