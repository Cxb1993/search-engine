英文關鍵詞： q-M/M/1/Ki, q-M/G/1/Ki, state probability 
 
 2
equivalence between both models, especially the state 
probabilities. In this research, we, therefore, intend to 
extend our previous work by analyzing the equivalent 
relationship between the q-M/M/1/Ki and q-M/G/1/Ki 
models. 
2. Model Descriptions 
We consider a multi-queue, labeled as Q1,Q2,…,Qq, 
finite-capacity system and a single server. Each queue is 
dedicated to a particular class of events or messages with 
the same priority. In this sense, various classes of 
messages are statistically multiplexed to utilize the 
network resources efficiently. Usually, messages arrive to 
Qi according to the independent Poisson process with rate 
i. Depending on the known or arbitrary distribution 
functions of the service times being used, the resulting 
model can be quite different. If the service times have an 
exponential distribution, the resulting model is 
q-M/M/1/Ki. In contrast to this, an q-M/G/1/Ki model is 
formed when the service time cannot be modeled as 
exponential, but has a known mean time and a standard 
deviation of service time. 
To facilitate our analysis, we define the state of the 
multi-queue model as a q-tuple array x=[n1,n2,…,nq] and 
0niKi, where ni denotes the number of messages in Qi 
at the current time instant and Ki is the maximum number 
of messages in that queue. With such a description, the 
state vector x clearly comprises the information on the 
occupancy of each queue. Since there are q queues in the 
model, a supplementary variable s is also included to 
describe the current queue being served. Thus, an 
alternative form of [x;s]Rq+1 can give a more compact 
representation. 
When the service times are drawn from a general 
distribution, the memoryless property of state evolution 
is lost in the M/G/1 model. To specify the state status 
conveniently, we can choose our observation times as 
those instants when a message has just completed service. 
At those points, where the Markovian property would 
hold and both the arrival process and the service process 
start over again. In contrast to [x;s], [x;s*] is then 
introduced to specially emphasize the states of the 
q-M/G/1/Ki model, when we observe the states at the 
departure instant. It should be noted that the 
corresponding state probabilities of [x;s] and [x;s*] are 
denoted as px;s and x;s*, respectively. Since [x;s] (or 
[x;s*]) is the same as [n1,n2,…,nq;s] (or [n1,n2,…,nq;s*]), 
both notations are used interchangeably unless otherwise 
indicated. In the next section, we first illustrate our 
approach to derive the closed form of the state 
probability in the q-M/M/1/Ki model. 
3. Arrival/Departure Process for the 
q-M/M/1/Ki 
The M/M/1/ system can be described by a Markov 
process with states k, where k is simply the number of 
events in the system. The basic approach to solve the 
state probability is to define the system states 
appropriately such that a state transition diagram of the 
queue may be drawn. Because of the mathematical nature 
of the exponential distribution, the probability flows in 
the state transition diagram are identified. The balance 
equations are then obtained by choosing proper closed 
boundaries and equating the flow across each such 
boundary. These balance equations are then solved along 
with the normalization condition to obtain the state 
probabilities. Once the steady state probabilities have 
been obtained, many performance parameters of interest 
may be suitably calculated. The major conclusion which 
can be drawn from the above arrival/departure process [8] 
is that the flows into a given state are equal to the flows 
out of that state. Based on this fact, it is clear that the 
flows must be conserved in the equilibrium status for any 
arbitrary state [x;s]. The extension of this idea is applied 
for the q-M/M/1/Ki model. Actually, there are four 
quantities which contribute to the flows. From the view 
point of [x;s], two of them, i.e. IAx;s and IDx;s, are due to 
the incoming flows from other states to [x;s]. The other 
two, i.e. OAx;s and ODx;s, belong to the outgoing flows 
from [x;s] to other states. Obviously, the steady-state 
balance function for [x;s] is expressed as 
(1)  
Figure 1 illustrates the state transitions entering and 
leaving [x;s], due to arrival processes and departure 
processes. 
To begin our investigation, the four quantities in Eq. 
(1) are separated into two groups, {IAx;s,OAx;s} and 
{IDx;s,ODx;s}. The first group is owing to APs and the 
second group is attributed to DPs. Since the state 
transitions in the APs are deterministic, the analysis is 
very straightforward. In other words, there is no need to 
; ; ; ;IA ID =OA ODs s s s x x x x
 4
 
(8)  
The first term in the right-hand side of Eq. (8) is the 
probability from the null state to [x;s*] while the second 
term is the probability from [x;r*] to [x;s*]. Based on the 
above formulation, the STEs for all feasible states can be 
expressed more concisely as a matrix-vector form 
(9)  
The unknown vector  ,qNR  , where Nq, is the number 
of all feasible states, is the aggregation of x;s* and the 
state transition matrix A , ,xq qN NR    consists of 
multiplications of QTP and MAP. To avoid trivial 
solution, we need any (Nq, -1) equations and the 
additional normalization condition, 
*1 , , , , ;1
1s q
i
q
n n n ss n
      , to solve Nq, unknowns. 
The goal of the second stage is intended to solve px;s, 
based on the QTP, MAP, and  in Eq. (9) to setup the 
state balance equations. In Figure 3, we illustrate the 
arrival process and departure process for the state [x;s]. 
According to the fact that the message flows must be 
conserved in the equilibrium status, it can result in the 
following equation 
(10)  
It should be noted that the superscript “EMC” in Eq. (10) 
is to emphasize that our analysis is based on the 
embedded Markov chain. The arrival process, including 
IAx;s and OAx;s, is owing to new arrival to queue, e.g. 
from [ ; ]r s
x  to [x;s] or from [x;s] to [ ; ]r s
x , and results 
in an increment of message in Qs. Likewise, the departure 
process, including EMC
;ID sx  and 
EMC
;OD sx , is attributed to 
departure from queue, e.g. from [x;r*] to [x;s] or from 
[x;s] to [ ; ]s r
x , and results in a decrement of message in 
Qs. Finally, the results of IAx;s, OAx;s, EMC;ID sx , and 
EMC
;OD sx  are summarized in Eq. (11) for reference. 
(11)  
Theorem 1 : In the q-M/G/1/Ki model, x;s* and px;s 
always satisfy the following relation 
(12)  
where s and s are the sum of all feasible state 
probabilities of x;s* and px;s. 
proof : px;s (or 
1, , , , ;s qn n n s
p   ) is the probability of ni 
messages in Qi, i, when Qs is severed. The sum of these 
probabilities 
1, , , , ;s qis n n n sn
p     is interpreted as the 
percentage of times that Qs being served in a unit time. 
As a result ss becomes the total number of messages 
that have been served for Qs. On the other hand, x;s* (or 
1, , , , ; *s qn n n s
   ) is the probability that there are ni messages 
left behind in Qi, i, at the departure instant. 
Consequently, the sum of these probabilities 
1, , , , ; *s qis n n n sn
     is also considered as the ratio of 
times that Qs is served in a unit time. Likewise, effs is 
the number of messages that have been served for Qs. In 
steady state, these two quantities, ss and effs, are 
equal to each other. This completes the proof. Q.E.D. 
Theorem 1 not only shows the relation between x;s* 
and px;s but can be applied to derive the general closed 
form of px;s. In Theorem 2, the formulae of the steady 
state probability px;s have been derived using the 
consequence derived in Theorem 1. 
Theorem 2 : In the q-M/G/1/Ki model, the state 
probability px;s can be formulated as 
(a) null state (xz=[0,0,…,0]) probability ;0Zpx  
(13)  
(b) full-loaded state (xF=[K1,K2,…,Kq]) probability ;F spx , 
s0 
(14)  
(c) arbitrary state probability px;s, s0 
(15)  
proof : (a) In the null state [xz;0], there exists only OAx;s 
and EMC
;ID sx , the balance equation is simply as 
(16)  
1
1
1 1 11
; * 0, ,0, ,0; * 0 , , , , ;
1
, , 1, , ; * , , , , ;0 0 0
1
s q
s q
s s q q s qs q
q
s r s n n n s
r
q
n n n
n l n l n l r r s l l l sl l l
r
   
  


      

    

   
x    
    
 A π π
EMC EMC
; ; ; ;IA ID =OA ODs s s s x x x x
eff ,s s s s    
eff
;0 ; * 01
1
Z Z
q
i iq i
ii
p    
 x x
1 21 1
1
; eff , , , ;( )or or ( )F qq qs s s n n n sn K n K
p p     x 
 eff ; *; ; *1 1
;
1
i s
q q
i i s i s is si i
s q
ii
p
p
     

   

   
xx x
x
;0 eff ; * 0
1 1
Z Z
q q
i i i
i i
p    
 
 x x
; ;
1
; ;
1
EMC
; eff ; *
1
EMC
; eff ; *
IA
OA =
ID
OD
r
s
q
s r s
r
q
s i s
i
q
s r r s
r
s s
p
p


  
 






   



x x
x x
x x
x x
EMC EMC
; ; ; ;I Is s s sx x x x
 6
References 
[1] Kleinrock, L., and Gail, R., Queueing Systems: 
Problems and Solutions, John Wiley and Sons, New 
York, USA, 1996. 
[2] K.E. Stecke, Machine interference: Assignment of 
machines to operators. Handbook of Industrial 
Engineering, Second Edition (1992) 1460-1494. 
[3] Y.C. Hsieh, Optimal assignment of priorities for the 
machine interference problems. Microelectron. 
Reliab. 37 (1996). 
[4] Gross, D., and Carl, M. H., 1998, Fundamentals of 
Queueing Theory, Wiley, New York, USA. 
[5] Ross, Sheldon M. and Seshadri, Sridhar (1999). 
"Hitting time in an M/G/1 queue". Journal of Applied 
Probability: 934–940. 
[6] Chen M.S., Yen H.W., A State Diagram Analysis of 
the Multi-Queue M/M/1 Model with Finite Lengths. 
Journal of the Chinese Institute of Engineers, 
2012;35(2):165–179. 
[7] Yen HW. Research and analysis of queue selection 
criterions in the multi-queue systems. PhD thesis. 
Da-Yeh University; 2011. 
[8] D. Gross, C.M. Harris, Fundamentals of queueing 
theory, Wiley, Chichester, 1985. 
[9] Liu J. Real-Time Systems. New Jersey:Prentice Hall, 
Inc.; 2000. 
[10] Baccelli F, Bremaud P. Elements of queueing theory. 
Berlin:Springer; 2000. 
 
 8
國科會補助專題研究計畫項下出席國際學術會議心得報告 
日期：100 年 10 月 5 日 
一、參加會議經過 
IEEE 電 氣 與 自 動 化 控 制 國 際 研 討 會 (EEAC 2011, 
http://www.msaiconf.org/EEAC/English/index.html)是第二屆 AIMSEC 2011 的特別分會，今年
由河南理工大學承辦，並於中國河南鄭州召開大會。該會致力於提供該領域的專家與學者一
個學術交流與建立友誼的平臺，使與會學者分享優秀論文及科研成果，共同探討電氣工程、
製造與自動化控制工程技術等領域的新理論與新應用。開幕式上，河南理工大副校長張錕教
授對與會嘉賓與學者表示熱烈歡迎與衷心感謝，並向各位來賓介紹河南理工大學的發展歷
史、辦學成果及經濟管理學科的發展概況和研究成果。張副校指出，近年來專家學者致力於
管理科學與人工智慧領域的理論與實踐研究，在管理科學與工程、資訊系統和工程優化、電
腦科學人工智慧及其應用、控制理論與應用、電子商務與教育等方面都獲得豐碩成果，希望
此次會議的召開能為與會專家學者探討管理科學和人工智慧學科的前沿、熱點問題，暢談各
自的研究成果。同時張錕教授也衷心期望參加會議的各位專家、學者對河南理工大學管理科
學與人工智慧學科的發展提出寶貴意見的意見和建議。本人有幸參與盛會並擔任開幕式
Keynote 演講(附件一)及論文 Session 主席(附件二)。本次會議受到國際學者的廣泛關注，所有
錄用的文章已由 IEEE CPS 出版論文集，會後論文將送交國際權威檢索機構，並由 EI 收錄。 
計畫編號 NSC 100-2221-E-212-006 
計畫名稱 多佇列MG1模式的分析及與多佇列MM1模式的等效性研究 
出國人員
姓名 陳木松 
服務機構
及職稱 
大葉大學電機系 
副教授 
會議時間 
100 年  8 月  8 日 
至 
100 年 8 月 10 日 
會議地點 河南鄭州 
會議名稱 
(中文) 2011 管理科學與人工智慧國際學術會議 
( 英 文 ) The 2nd International conference on Artificial Intelligence, 
Management Science and Electronic Commerce (AIMSEC 2011) 
發表論文
題目 
1. “A Novel Approach for Message Scheduling with Deadline Constraints,” 
2. “An Empirical Study of the Multi-Queue Finite Capacity M/G/1 Model,” 
3. ”The Design of a PMSM Motor Drive with Active Power Factor 
Correction,” 
 10
 
附件一 
 
 1
國科會補助專題研究計畫項下出席國際學術會議心得報告 
日期：100 年 10 月 5 日 
一、參加會議經過 
IEEE 電 氣 與 自 動 化 控 制 國 際 研 討 會 (EEAC 2011, 
http://www.msaiconf.org/EEAC/English/index.html)是第二屆 AIMSEC 2011 的特別分會，今年
由河南理工大學承辦，並於中國河南鄭州召開大會。該會致力於提供該領域的專家與學者一
個學術交流與建立友誼的平臺，使與會學者分享優秀論文及科研成果，共同探討電氣工程、
製造與自動化控制工程技術等領域的新理論與新應用。開幕式上，河南理工大副校長張錕教
授對與會嘉賓與學者表示熱烈歡迎與衷心感謝，並向各位來賓介紹河南理工大學的發展歷
史、辦學成果及經濟管理學科的發展概況和研究成果。張副校指出，近年來專家學者致力於
管理科學與人工智慧領域的理論與實踐研究，在管理科學與工程、資訊系統和工程優化、電
腦科學人工智慧及其應用、控制理論與應用、電子商務與教育等方面都獲得豐碩成果，希望
此次會議的召開能為與會專家學者探討管理科學和人工智慧學科的前沿、熱點問題，暢談各
自的研究成果。同時張錕教授也衷心期望參加會議的各位專家、學者對河南理工大學管理科
學與人工智慧學科的發展提出寶貴意見的意見和建議。本人有幸參與盛會並擔任開幕式
Keynote 演講(附件一)及論文 Session 主席(附件二)。本次會議受到國際學者的廣泛關注，所有
錄用的文章已由 IEEE CPS 出版論文集，會後論文將送交國際權威檢索機構，並由 EI 收錄。 
計畫編號 NSC 100-2221-E-212-006 
計畫名稱 多佇列M/G/1模式的分析及與多佇列M/M/1模式的等效性研究 
出國人員
姓名 陳木松 
服務機構
及職稱 
大葉大學電機系 
副教授 
會議時間 
100 年  8 月  8 日 
至 
100 年 8 月 10 日 
會議地點 河南鄭州 
會議名稱 
(中文) 2011 管理科學與人工智慧國際學術會議 
( 英 文 ) The 2nd International conference on Artificial Intelligence, 
Management Science and Electronic Commerce (AIMSEC 2011) 
發表論文
題目 
1. “A Novel Approach for Message Scheduling with Deadline Constraints,” 
2. “An Empirical Study of the Multi-Queue Finite Capacity M/G/1 Model,” 
3. ”The Design of a PMSM Motor Drive with Active Power Factor 
Correction,” 
 3
 
附件一 
 
Rights Reserved by: AIMSEC Organizing Committee
The 2nd International Workshop on Electrical Engineering
and Automation Control (EEAC 2011)
Acceptance Notification
Jun 22th, 2011
Dear Author,
Congratulations! It is our great pleasure to inform you that your paper
Paper ID: F48281
Author:Chen Mu-Song ,Ho Tze-Yee ,Hwang Chipan ,
Title:An Emprical Study of the Multi-Queue Finite Capacity M/G/1 Model
has been accepted for presentation at The International Workshop on Electrical Engineering and
Automation Control (EEAC 2011).
All accepted papers will be published by IEEE Computer Society's CPS, included in the IEEE eXplore
and indexed by Ei Compendex.
Thank you for submitting to EEAC 2011 and we look forward to meeting you at the conference. We
also hope that you will contribute your excellent work to future AIMSEC conferences.
Best regards,
AIMSEC Organizing Committee
Rights Reserved by: AIMSEC Organizing Committee  
 
 
 
The 2nd International Workshop on Electrical Engineering 
and Automation Control (EEAC 2011) 
 
Acceptance Notification 
 
Jun 22th, 2011 
 Dear Author, 
 
Congratulations! It is our great pleasure to inform you that your paper 
Paper ID: F73286 
Author: Chen Mu-Song, Chen Seng Chi, Huang Deng-Yuan  
Title: Fuzzy Approach for Message Scheduling with Deadline Constraints 
  
has been accepted for presentation at The International Workshop on Electrical Engineering and 
Automation Control (EEAC 2011). 
All accepted papers will be published by IEEE Computer Society's CPS, included in the IEEE eXplore 
and indexed by Ei Compendex.  
Thank you for submitting to EEAC 2011 and we look forward to meeting you at the conference. We 
also hope that you will contribute your excellent work to future AIMSEC conferences. 
 
 
 
 
 
Best regards, 
 
AIMSEC Organizing Committee 
 1
An Empirical Study of the Multi-Queue Finite 
Capacity M/G/1 Model 
 
 
Mu-Song Chen 
Dept. of Electrical Engineering 
Da-Yeh University 
ChangHua, Taiwan, R.O.C 
chenms@mail.dyu.edu.tw 
Tze-Yee Ho 
Dept. of Electrical Engineering 
Feng-Chia University 
Taichung, Taiwan, R.O.C 
tyho@fcu.edu.tw 
Chipan Hwang 
Dept. of Electronics 
National Changhua University 
ChangHua, Taiwan, R.O.C 
cphwang@cc.ncue.edu.tw 
 
 
Abstract—The M/G/1 model with multiple queues and finite 
capacity is very common and can be found very often in our daily 
life. Interesting measures of this model can be the waiting times 
of messages, mean queue lengths, etc. Usually, these problems are 
solved by the transformed approach to determine model 
parameters. Instead of the transformed approach, we present a 
state-space approach to decide the state probability directly, by 
solving a set of state transition equations. To justify the accuracy 
and reliability of the proposed method, our simulation results 
illustrate the root-mean-squared-error values between the 
derived state probabilities and the measured quantities from 
runtime. The small error confirms the applicability of the state-
space approach.  
Keywords- M/G/1; multi-queue; finite capacity; state-space 
approach; state probability; 
I.  INTRODUCTION 
In many queueing problems, we are dealing with finite 
buffer models. For example, in manufacturing systems, there 
are limited waiting rooms between workstations in assembly 
lines. In the hospital emergency room problem, this system 
actually has a finite size of cots for the patients. Whenever 
there are no empty cots, the common strategy is to transfer 
arriving patients to other hospitals. In telecommunication 
systems, there are only finite capacity telephone lines for 
communications. In these applications, it is crucial to compute 
the performance measures of these systems. Furthermore, the 
queueing model may also permit different classes of messages 
to have distinct priority. For instance, traffics in ATM networks 
usually have different delay requirements [1]. Examples of 
delay insensitive traffics would be mail and warning messages 
whereas real-time audio and video could be regarded as delay 
sensitive traffic. Therefore, significant messages should be 
classified separately from data messages and given a higher 
priority to guarantee deadline constraints. Therefore, important 
messages should be classified separately from data messages 
and given a higher priority to guarantee deadline constraints. 
Considering the characteristics and requirements of messages 
or traffics, it had better allocate multiple queues to 
accommodate different classes of messages to facilitate design 
problems. In this sense, the queueing model with multiple 
queues and finite buffers has attracted considerable attentions 
in relevant literatures. Nakdimon and Yechiali [2] provided 
Laplace-Stieltjes transform (LST) [3] to analyze the system 
states of infinite-capacity queues at polling instants and derived 
expressions for several performance measures. Wagner [4] 
considered a continuous queue with Markov modulated arrivals 
and obtained the moment generating function of the waiting 
times for both the priority classes. Jung and Un [5] also 
provided an analysis of a finite buffer polling system with 
exhaustive service based on virtual buffering. However, these 
papers often concerned with either one of the discussed issues, 
namely finite buffers or multi-queue models. Another common 
feature of the aforementioned papers utilized the Laplace-
Stieltjes transforms to determine model parameters. Methods 
for numerically inverting of these transforms are necessary to 
obtain the actual distributions. Although this is possible, 
algorithms for inversion, however, require the evaluation of 
transforms at many complex arguments and are 
computationally involved. Instead of the transform-based 
approach, it has been claimed in our recent works [6] that the 
state-space Markov chain approach is possible to examine the 
system states of the q-M/M/1/Ki1 model with finite capacity. In 
this paper, we are devoted to extend our previous work to 
present the design process in analyzing the q-M/G/1/Ki finite 
size model when q is 2. Unlike the transformed approaches, the 
idea behind the state-space model method is very simple and 
straightforward. Additionally, the results of the present paper 
generalize those of [6]. 
The paper is organized as follows. In section II, 
descriptions and notations of the q-M/G/1/Ki model is 
presented. Since we utilize the embedded Markov chain to 
analyze the queueing model, the message arrival probability 
(MAP) has to be calculated first to facilitate our analysis. This 
issue is discussed in section III. In section (5), we construct a 
set of state transition equations to solve all feasible state 
probabilities, based on the derived MAP and queue transition 
probability between queues. After that, experimental results 
have been conducted to demonstrate the accuracies of the 
proposed method in section V. Finally, conclusions and our 
future work are drawn in the last section. 
II. MODEL DESCRIPTIONS 
Consider a single server multi-queue system, in which the 
Poisson arrival rate i and the service rate i of Qi, 1iq, are 
                                                          
1 The notation q-M/M/1/Ki follows from [7], where q is the number of 
queues and Ki is the maximum allowable capacity of Qi. 
 3
system. The notation xZ represents the null state and 
xZ=[0,0,…,0]. Therefore 
(6)  
The first term in the right-hand side of Eq. (6) is the 
probability from [xZ;r+] to [x;s+], whereas the second term is 
the probability from [x;r+] to [x;s+]. rs denotes the queue 
transition probability from Qr to Qs. Based on the above 
formulation, the state transition equations for all possible 
states can be expressed more concisely as a matrix-vector 
form 
(7)  
The unknown vector  ,qNR   should consist of all the feasible 
states in the model and the state transition matrix 
A , ,xq qN NR    is composed of multiplications of QTP and MAP. 
To avoid trivial solution, we need any (Nq, -1) equations and 
the additional normalization condition, 
1, , , , ;1
1
s qi
q
n n n ss n
       , to solve Nq, unknowns. For 
example, any arbitrary row, e.g. kth row, of A can be replaced 
with the normalization condition such that 
(8)  
where 

T
,
th element
[0, , 1 , ,0]k
k
 I   . Accordingly, the steady state 
solution of  is solved as =(A,k)-1I,k. 
In Eq. (9), the matrix-vector form of state transition 
equations for the case of 2-M/G/1/Ki model, where K1 and K2 
are limited to 2, is illustrated for reference.  
(9)  
 
V. EXPERIMENTAL RESULTS 
In this section, the proposed procedure has been verified by 
the following experiments to demonstrate its applicability. The 
theoretical message arrival probabilities and state probabilities 
are compared with the measured quantities from run time. In 
our experiment, we consider a 2-M/G/1/Ki model with limited 
capacity, namely K1=K2=2. The used queue selection rule for 
queue selection is FCFS. In Figure 2, we first investigate 
1 2, ;l l s  against  during the service interval. The values of  
start from 0.2 to 4 with step size 0.2 and the individual queue 
load, 1 and 2, is distributed based on the ratios 2:3. The 
service times of both queues are fixed at 1 and 2. 
Each graph in Figure 2 illustrates 
1 2
(sim.)
, ;l l s  measured from 
runtime and our theoretical results 
1 2, ;l l s , respectively. 
Intuitively, the probability 0,0;s  of zero arrivals decreases 
when  or i increases (since i is fixed). On the other hand, 
1 21, ;1K K   implies that Q1 is in service and therefore the 
maximum arrivals of Q1 and Q2 can be K1-1 and K2. An 
analogous argument also holds for 
1 2, 1;2K K  . In this sense, both 
1 21, ;1K K   and 1 2, 1;2K K   are intended to increase with large  
values. We conclude here that the larger the values of , the 
larger the probabilities of 
1 21, ;1K K   and 1 2, 1;2K K  and the lower 
the probability of 0,0;s. These facts can be directly verified 
from Figure 2(a) and (g) of 0,0;s and (f) and (l) of 1 21, ;1K K   and 
1 2, 1;2K K  . The other MAPs, however, are affected by the 
number of arrived messages in each queue. For example, 0,1;2 
in (h) is influenced not only by zero arrivals (decreasing with ) 
in Q1 but the arrivals (increasing with ) in Q2. Likewise, 1,0;1 
in (d) and other probabilities can be analyzed in the similar 
way. Undoubtedly, these mutual effects can lead to Gaussian 
like curves. Importantly, all of these probabilities in each graph 
are well matched for 
1 2
(sim.)
, ;l l s  and 1 2, ;l l s . For clarity, we also 
show the root-mean-squared-error (RMSE) between them for 
reference. It is worth noting that the scale of the RMSE is in 
the order of 10-3. The very good agreement between the 
measured quantities and the theoretical values supports the 
validity of the proposed method and these consequences 
should lead to more accurate estimations of state probabilities. 
According to our simulation results, the average RMSE 
1
1
11 11
0 , , , , ;; 0, ,0, ,0;
1
, , , , ;, , 1, , ;0 0
1
s q
q
s qs s q qq
q
s n n n ss r
r
q
n n
r s l l l sn l n l n l rl l
r
   
  
 



    

    

  
x   
  
 A π π
, ,k k A π I
0 1 0,1;1 1 1 0,1;1 1 1 0,0;1 0 1 0,1;1 2 1 0,1;1 2 1 0,0;1
0 1 0,2;1 1 1 0,2;1 1 1 0,1;1 1 1 0,0;1 0 1 0,2;1 2 1 0,2;1 2 1 0,1;1
0 1 1,0;1 1 1 1,0;1 0 1 1,0;1 2 1 1,0
1 1 1 1 1 1 1 1 1 1 1 1
1 0 0 0 0 0
0 1 0 0 0
0 0 1 0 0 0
           
             
       
     
      
   


 ;1 2 1 0,0;1
0 1 1,1;1 1 1 1,1;1 1 1 1,0;1 0 1 1,1;1 2 1 1,1;1 2 1 1,0;1 2 1 0,1;1 2 1 0,0;1
0 1 1,2;1 1 1 1,2;1 1 1 1,1;1 1 1 1,0;1 0 1 1,2;1 2 1 1,2;1 2 1 1,1;1 2 1 0,2;1 2 1 0,1;1
0 2
0 0
0 0 1 0 0
0 0 1 0
 
               
                 
 

       
        



0,0;2 1 2 0,0;2 0 2 0,0;2 2 2 0,0;2
0 2 0,1;2 1 2 0,1;2 1 2 0,0;2 0 2 0,1;2 2 2 0,1;2
0 2 1,0;2 1 2 1,0;2 1 2 0,0;2 0 2 1,0;2 2 2 1,0;2 2 2 0,0;2
0 2 1,1;2 1 2 1,1;2 1 2 1,0;
0 0 0 0 1 0 0 0 0
0 0 0 1 0 0 0 0
0 0 0 1 0 0
     
         
           
     
  
    
     
  



2 1 2 0,1;2 1 2 0,0;2 0 2 1,1;2 2 2 1,1;2 2 2 0,1;2
0 2 2,0;2 1 2 2,0;2 1 2 1,0;2 0 2 2,0;2 2 2 2,0;2 2 2 1,0;2 2 2 0,0;2
0 2 2,1;2 1 2 2,1;2 1 2 2,0;2 1 2 1,1;2 1 2 1,0;2 0 2 2,1;2 2 2 2
0 0 1 0 0
0 0 0 0 1
0
         
             
             
    
      
      


0,0;1
0,1;1
0,2;1
1,0;1
1,1;1
1,2;1
0,0;2
0,1;2
1,0;2
1,1;2
2,0;2
,1;2 2 2 1,1;2 2 2 0,1;2 2,1;2
1
0
0
0
0
0
0
0
0
0
0
0 0 1











   











 
                                                         0
                   
 1
A Novel Approach for Message Scheduling 
 
 
 
 
Mu-Song Chen, Seng Chi Chen, Deng-Yuan Huang 
Dept. of Electrical Engineering 
Da-Yeh University 
ChangHua, Taiwan, R.O.C 
chenms@mail.dyu.edu.tw 
Tze-Yee Ho 
Dept. of Electrical Engineering 
Feng-Chia University 
Taichung, Taiwan, R.O.C 
tyho@fcu.edu.tw 
 
 
 
 
 
Abstract—In time critical system, message scheduling plays an 
important role to arbitrate fair service among all competing 
messages, where messages are conditioned on different timing 
constraints. There already exist many algorithms, including 
static and dynamic scheduling, to resolve these problems. In this 
paper, we extend our recent work by presenting a fuzzy 
inference system (FIS) as a message classifier for scheduling. The 
FIS with adaptation strategy of parameter adaptation and 
structure identification can always result in smaller untimely 
service ratios (USRs) and small number of fuzzy rules, especially 
when the traffic load is heavy. Moreover, the resulting FIS model 
would not remain a black box. Instead, the implicit scheduling 
knowledge can be interpreted in terms of linguistic fuzzy sets. 
The efficiency of the proposed method is further examined by 
comparing with several traditional scheduling methods. 
Simulation results confirm our claims consistently. 
Keywords- message scheduling; timing constraints; fuzzy 
inference system; untimely service ratio; 
I.  INTRODUCTION 
Real-time message systems [1] are those systems for which 
a timely response to a give task or message transaction within 
a specified timing constraint frame is critical. These 
phenomena arise in many real world applications that involve 
time critical message contents. A good example is a car’s anti-
lock break system. An anti-lock brake system is expected to 
release a vehicle’s brake and can prevent dangerous wheel 
locking in a predictably short time frame. This is especially 
important when damage or the loss of life may occur as a 
result of a system failure. To deal with these problems, several 
static and dynamic scheduling have been proposed in the 
literatures, which aim to ensure that message transactions 
comply with their deadlines. A typical static policy is cyclic 
scheduling [2], where each queued message is chosen in a 
cyclic order without priority levels. A variant of cyclic 
scheduling is the priority scheduling paradigm, where 
messages are scheduled from the head of a given queue only if 
all queues of higher priority are empty. Some algorithms use 
parameters that are determined statically such as the Rate 
Monotonic algorithm that uses the request interval of each task 
as its priority [3][4]. On the other hand, dynamic scheduling 
algorithms require a sequence of decisions to be optimally 
made at runtime. Due to its adaptive characteristics, dynamic 
scheduling policies can operate in time critical conditions. In 
[5], a number of dynamic schemes, e.g. minimum laxity 
threshold and queue length threshold, have been proposed. 
These algorithms attempt to reduce the performance 
degradation for messages with lower priorities by making 
priorities more dynamic. In [6], an adaptive weighted round 
robin was developed, in which the weight parameters are 
updated by using revenue as a target function. Another 
dynamic priority-driven strategy is the earliest-deadline first 
(EDF) [7], in which scheduling decisions of each queue can be 
altered during runtime. In practice, priorities in the EDF 
increase as deadline expiry approaches. Even though the EDF 
is known to be optimal in a large class of real-time applications 
[8], it has higher overhead and is difficult to implement since it 
requires updating the priority of messages at each arbitration. 
Although static and dynamic scheduling algorithms have 
been proposed to solve message scheduling problems, they are 
often designed without taking into account the system 
uncertainty and suffer from the time-varying characteristics of 
network. Recently, we have presented a machine learning 
strategy [9] in the design of the message scheduling controller 
for message scheduling. The message scheduling controller is 
realized by the radial basis function (RBF) network with two 
novel learning paradigms. The hybrid effects of these two 
learning schemes prevent possible causes of non-uniform 
bandwidth allocation and reduce possibilities of transmission 
failures. Consequently, the untimely service ratios of messages 
can be reduced significantly. In general, the RBF network and 
a special type of fuzzy inference system (FIS) proposed by 
Tagaki and Sugeno [10] are almost two equivalent forms of 
input/output mapping, although FIS can be treated as slightly 
more general including RBF as a result of some architectural 
options and simplifications. In this paper, we therefore 
consider to extend our current work to utilize the FIS model as 
a queue-based message scheduler, where each message has 
constraints on its waiting time. 
The rest of this paper is organized as follows. In section II, 
we first introduce the real time message transaction system 
with deadline constraints. To meet the deadline constraints, 
certain optimization strategies have been used. Instead, a FIS 
system is presented in section III for possible solution. To 
enhance the performance of the proposed FIS as the message 
scheduling controller, an adaptation strategy is then discussed 
in section IV. In section V, experimental results have been 
conducted to demonstrate the accuracies of the proposed 
 3
the node function in this layer. Each node in third layer 
calculates the ratio of the rule firing strength to the sum of 
firing strength of all rules. The fourth layer is the product of 
the normalized firing level and the individual rule output of the 
corresponding rule. Parameters in this layer are referred to as 
consequent parameters c,i. The node functions of the fifth 
layer compute the overall system outputs as the sum of all 
incoming signals. 
IV.  ADAPTATION STRATEGY OF TS FIS 
The determination of the design parameters of the FIS is of 
vital importance. Usually, several optimization algorithms can 
be applied to decide these parameters. The optimization 
process in this case is based on a decomposition of the 
parameter set and the corresponding learning is based on 
interleaving of two phases. In the first phase, the consequent 
parameters are adjusted using a least squares algorithm, 
assuming the antecedent parameters are fixed. In the second 
phase the antecedent parameters are adjusted using gradient 
descent with the fixed consequent parameters. These processes 
continue until the desired response of the FIS is achieved. The 
main benefit of the hybrid approach is that it converges much 
faster since it reduces the search space dimensions of the 
original back propagation method. 
Although the abovementioned learning strategy is 
straightforward, the required number of fuzzy rules has to be 
decided a priori by a trial-and-error procedure. Since the 
output of the TS model is obtained by combining a number of 
local models and these local models are identified for 
corresponding fuzzy subsets, the performance of the model is 
highly affected by the choice of the subsets. Prior 
determination of the optimal subsets is equivalent to decide the 
placements of fuzzy MFs. In general, the selection criterion 
with the aid of clustering techniques is possible if 
representative training data is available in advance. However, 
even if such data is available there is no guarantee that the 
number and assignment of MFs are appropriate, especially if 
the system dynamics change significantly with time. In fact, 
too small the number of MFs leads to a high bias and low 
variance estimator, whereas too many MFs yield a low bias but 
high variance estimator. Accordingly, a structure optimization 
algorithm should provide an optimal compromise between 
variance and bias of the estimation made by the parameter 
training. To circumvent this problem, methods of minimal 
resource allocation are applied in this study as a solution to 
these problems. The concept of minimal resource allocation is 
an improvement of the resource allocation network (RAN) of 
Platt [14]. RANs are simply RBFs in which recursive training 
of parameters is combined with a procedure for recursively 
adding centers and the connection weights are updated using 
stochastic gradient descent. Yingwei et al. [15] extended the 
work of [16] by including a pruning strategy to obtain a more 
parsimonious RBF network and called it minimal RAN 
(MRAN). The MRAN algorithm is a sequential learning 
algorithm for Gaussian RBF networks and assigns the number 
of hidden units automatically based on growth criteria, while at 
the same time achieving minimal network structure by pruning 
inactive hidden neurons. Due the functional equivalence 
between RBF network and the TS FIS, we therefore apply this 
concept in optimizing the FIS structure and the corresponding 
parameter adaptation. Detail descriptions regarding the input 
variables selections and the corresponding adaptation strategy 
can be referred to our technical report [17]. 
V. EXPERIMENTAL RESULTS 
To illustrate the robustness of the proposed fuzzy 
scheduling method, we conduct experiments to verify its 
effectiveness. We consider the scheduling problems with three 
queues and limited capacities. However, the generalize results 
to more than three queues are very straightforward. The 
maximum allowable queue sizes are 25, 20, and 45, 
respectively. Moreover, the deadlines of queued messages are 
100, 200, and 300. In this experiment, the traffic loads  are 
changed from 0.5 to 6. The value of  is defined as he ratio of 
message arrival rate to its service rate. For each value of , it 
simulates 5,000 messages for service. These messages can 
belong to any one of the three existing queues. The 
performances are measured by recording untimely service 
ratios as 
(8)  
where the subscript denotes the kth queue. Apparently, the 
lower the values of USR, the higher the efficiency of the 
scheduling method. In TABLE I, we first compare the USR by 
using three traditional scheduling methods, such as first-come-
first-served (FCFS) [18], round robin (RR) method [19], and 
priority (PRI) method [20]. When  is less than or equal to 1, 
the scheduling results are acceptable. However, the larger 
values of  incur increasing USRs rapidly for all queues. In 
fact, the performances of some of the queues are completely 
unacceptable. Generally speaking, these methods are incapable 
of handling high load traffics. 
In TABLE II, simulation results of EDF (USREDF) and our 
proposed method MSC_NFN (USRMSC_NFN), are recorded and 
compared for 3, 4, and 5 queues. Since the EDF is a class of 
dynamic scheduling strategy, its performance is better than the 
results as shown in TABLE I. However, USRMSC_NFN is less 
likely to increase than USREDF, especially in the case of high 
load variations. For instance, when q is 3 and  is 4, USREDF is 
nearly two times larger than USRMSC_NFN. Additionally, results 
of four and five queues are also listed. Obviously, the USRs 
increase further when both  and q become larger. Certainly, 
the higher values of USRs are inevitable in these situations. 
However, the superiority of the MSC_NFN can be found when 
 is 6. In that case, USRMSC_NFN can be reduced more than 30 
% when we compare with USREDF. Unfortunately, USREDF of 
the EDF becomes infeasible (over 72 %) in that situation. This 
phenomenon can be attributed to the robustness of the TS FIS. 
Finally, the final numbers of fuzzy rules for q=3 and =3.5 
are only three. Since we apply MRAN for rule addition and 
pruning, the statistical average of fuzzy rule numbers is 
8.531.39. It is surprising that there are only three rules left in 
the final stage after 5,000 message transactions.
# of untimely service messages in USR *100%
# of messages have been served in 
k
k
k
Q
Q

The Design of a PMSM Motor Drive with Active 
Power Factor Correction 
 
Tze-Yee Ho Mu-Song Chen Li-Yuan Chen Lung-Hsian Yang 
Dept. of Electrical 
Engineering 
Dept. of Electrical 
Engineering 
Dept. of Electrical 
Engineering 
Dept. of Electrical 
Engineering 
Feng Chia University Da-Yeh University Feng Chia University Feng Chia University 
Taichung, Taiwan ChangHua, Taiwan, Taichung, Taiwan Taichung, Taiwan 
tyho@fcu.edu.tw chenms@mail.dyu.edu.tw anddyy@gmail.com hsian0523@gmail.com 
 
Abstract—This paper presents an active power factor controller 
for a PMSM drive to improve the high input current harmonics 
created from the power diodes as well as the switching of the 
inverter. The detailed design is analyzed and implemented by a 
motor drive prototype. The experimental results verify the 
feasibility of PMSM motor drive with designed APFC controller. 
In addition, the experimental results of a PMSM drive with and 
without APFC are compared and demonstrated that the former 
owns the superior power factor correction capability more than 
the latter  
Keywords: APFC, PMSM, motor drive  
I.  INTRODUCTION 
Due to the global warming effect as well as the energy 
resources shortage, many researches and scientists have 
devoted themselves to developing new energy resources and 
techniques to increase the efficiency of electronic or 
electromechanical devices for energy savings. Thus, the 
techniques to improve the efficiency of motor drive by power 
factor correction play an important role in the energy saving 
during energy conversion. In recent decade, because of the 
highly developments of power electronics and advanced 
semiconductor devices, the adjustable speed drive such as 
Permanent Magnet Synchronous Motor (PMSM) drives, have 
been well developed and widely employed to the industrial 
and commercial applications. The ac-dc conversion of electric 
power is usually required for the PMSM motor drives, 
nevertheless, it causes many current harmonics and results in 
the poor power factor at the input ac mains, subsequently [1]. 
In general, a motor drive system needs the large electrolytic 
capacitor across the dc-bus for stabilizing the dc voltage, 
however, the large capacitor causes the current distortion as 
shown in Figure 1. There are many means explored and 
proposed to solve this severe problem [2-3]. Power factor 
correction method is a good candidate for ac to dc power 
conversion in order to reduce the line current harmonics as 
well as increase the efficiency and capacity of motor drives. In 
order to reduce the current harmonic distortions and increase 
the power factor, traditionally, LC type or π-type filters are 
commonly used for power factor correction. Although, they 
inherently exist low electromagnetic interference, simple 
configuration and low cost, utilizing the bulky inductor and 
capacitor are inevitable because of the low main line 
frequency. This paper proposes an active power factor 
correction controller for the PMSM drive, by switching the 
MOSFET to track the reference current in accordance with the 
average current mode control and further omits the utilization 
of bulky inductors and capacitors.  
VAC
VOUT
iAC
0
0
 
 (a) (b) 
Figure 1 (a)The bridge diode (b) The waveforms of VAC, iAC 
and Vout  
II. THE FUNDAMENTALS OF ACTIVE POWER FACTOR 
CORRECTION (APFC) 
The APFC consists of an energy stored element, switching 
device and control module, as shown in Figure 2, it is 
commonly installed between the power rectifier and the dc-
link bus. The main purpose of APFC is to make the input of 
the power supply look like a pure resistor. In other words, it is 
to make the input current waveform in phase with the input 
voltage waveform so that there is no phase displacement 
between them. The operation of APFC is basically based on a 
controller that can output the signal to a switching device to 
control the energy being stored or released in the reactive 
elements [4]. In such a way, the input current waveform can 
be adjusted. The magnitude and phase of the input current 
waveforms by proper control can follow that of the input 
voltage waveform as shown in Figure 3. Consequently, the 
power factor improvement can be achieved and further, the 
voltage stability can be obtained as well. Most of the APFC 
controllers are comprised with a DC to DC converter, such as 
buck, buck-boost or boost converter. Buck converter is seldom 
employed to the application of power factor correction 
because it cannot normally operate during a period of duty 
cycle due to the low input voltage. Furthermore, since the 
input current is discontinuous, it is often constrained to the 
small power applications. The buck-boost converter has 
advantage of a wide range selection for input voltage 
compared with the other two converters. Nevertheless, it 
suffers from high power ratings for the switching devices with 
the voltage drop being equal to the sum of input voltage and 
0 0 0 0
0 0 0 0
0 0 0 0
cos
cos( 120 )
cos( 120 )
an s a m a
bn s b m b
cn s c m c
e
e r e
e
V R i L i
dV R i L i
dt
V R i L i
θ
ω λ θ
θ
⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤ ⎡ ⎤⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥= +⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦ ⎣ ⎦
⎡ ⎤⎢ ⎥+ − °⎢ ⎥⎢ ⎥+ °⎣ ⎦
 (4) 
a a b b c c
e
m
e i e i e i
T ω
+ +=  (5) 
 
Figure 5 The circuit scheme of APFC 
 
Figure 6 The physical hardware 
IV. EXPERIMENTAL RESULTS 
The physical hardware is shown in Figure 6. In order to 
verify the integrity of the active power factor correction 
together with PMSM motor drive, the experimental 
measurements will proceed when motor drive run with and 
without APFC. Figure 7 shows the main line voltage 
waveform, vAC and line current waveform, iAC, when the 
APFC is not employed, as well as the output dc voltage, Vdc, 
and output dc current, idc, respectively. These waveforms in 
Figure 7 are designated by w1, w2, w3, and w4, respectively. 
It can be seen that the iAC is severe distorted. Consequently, 
this results in poor total harmonic distortion and lower power 
factor, as shown in Figure 8, whose spectrum of iAC is 
obtained through the Fast Fourier Transform function of the 
oscilloscope. In addition to the fundamental component of 60 
Hz for iAC shown in the first peak in Figure 8, the 180 Hz and 
300 Hz harmonics are represented by second and third peak, 
respectively. Figure 9 shows the output voltage ripple, Vdc. If 
the APFC is employed, the main line waveform, iAC is in 
phase with VAC waveform as shown in Figure 10 and the Vdc 
and idc both are nearly appeared to be a straight line. The 
spectrum chart of iAC shown in Figure 11 exists only the 
fundamental component of main line frequency of 60 Hz, the 
other harmonic components are attenuated below the desired 
level. The Vdc appears to be a straight line denoted by w2 in 
Figure 12. The foregoing experimental results are measured 
when the APFC controller operates under full load condition. 
The conclusion states that when the bridge rectifier is applied 
to the input power conversion stage, utilizing the APFC 
controller can effectively reduce the total harmonic distortion 
and increase the input power factor. When motor runs at the 
speed around 500 rpm and the same duty PWM for inverter, 
from the comparison of Figures 13 and 14, the iAC current with 
APFC has better waveform shape than that without APFC, 
although phase currents of PMSM under these two conditions 
have nearly resemble.  Accordingly, it is inferred that the iAC 
rms value required with APFC is less than that without APFC 
when motor runs at the same load condition. 
 
Figure 7 w1:VAC, w2:iAC, w3:Vdc, w4:idc 
 
Figure 8 The spectrum of iAC 
  
Figure 9 The w1:iAC versus w2:Vdc  
國科會補助計畫衍生研發成果推廣資料表
日期:2012/10/25
國科會補助計畫
計畫名稱: 多佇列M/G/1模式的分析及與M/M/1模式的等效性研究
計畫主持人: 陳木松
計畫編號: 100-2221-E-212-006- 學門領域: 資訊技術及系統整合
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
本計畫承蒙國科會補助經費用於研究並參與 EEAC 國際會議擔任開幕式 Keynote
演講及論文 Session 主席。 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
