20ppm，此為系統 SFO 的最糟情況，理論上
會在第 315 個 OFDM symbol，取樣偏移會
超過一個取樣點。雖然初始 CFO 是
125kHz，但是會使用 3 個 short training 
symbol 來做 CFO 粗估。模擬中將使用 400
個 OFDM symbol，針對各個 SNR 與兩個多
重路徑延遲進行模擬，每組模擬 10500 次，
來分析本演算法在各環境下的模擬結果。 
 
2.2 接收訊號模型 
考慮同步效應後，接收到的資料 可
以式(1)表示[4]： 
,k lY
( ) (1 )( )
{2 [ ] }
, ,
, ,         ,                                 (1)
s g s g
k
k N l N N l N
j
N N
k l k l k
k l k l
Y X H e
N I
η ε ηπ φ+ + ++ +=
+ +
 
其中下標k與l分別代表第k 個子載波與第l
個OFDM符元， kH 表示通道在第 k 個子載波
上的頻率響應，N為資料符元內的點數，Ng是
保護區間的點數，而 sN = N+Ng， kφ  為其它
效應所造成的固定相角偏移， ,k lN 是第 個
OFDM symbol在第 個子載波上的高斯雜
訊(均值為零且變異係數為
l
k
2
Nσ )， 為該位
置上的ICI影響量，而ε是代表CFO補償之後
的殘餘量，佔子載波間距的比例η定義為： 
,k lI
        ( ' ) /T T Tη = − ，       (2) 
其中T為傳送端的取樣週期，T ′為接收端的
取樣週期。 
 
三、估測取樣點偏移 
3.1 SFO 相角與取樣點偏移的關係 
式(1)中由 SFO 效應造成的相角項： 
, ,SFO
( )
            2 [ ],        (3)s gk l
k N l N
N
ηθ π +=  
而當 SFO 所造成取樣偏移超過一個取樣週
期時，則下式成立： 
, ,SFO , ,SFO
2 2     , or         (4)k l k l
k k
N N
π πθ θ −≥ ≤ 由此
可知，若能自接收資料的相角分離出 SFO
所造成的部分，就可以用來估測何時 SFO
造成的取樣偏移超過一個取樣點。定義 kϕ 為
第 個子載波上的相角，則得到 SFO 相關資
訊的計算式如下：  
k
1 1 2 2
,
, ,initial , ,initial 1 2
1 2
1 2
[( ) ( )]/( )
( ) ( )
2 [ ] 2 [ ]
( )
2 ,                                       (5)
l SFO
k l k k l k
s g s g
s g
k k
k N l N k N l N
N N
k k
lN N
N
θ
ϕ ϕ ϕ ϕ
η ηπ π
ηπ
= − − − −
+ +−
= −
+=
 
式(5)的做法為：取出兩個子載波上資料的相
角，各自減去其初始相角，再彼此相減消除
CFO 造成的效應，除以兩個子載波間距，即
得到 SFO 的效應。原本(4)的判別式可改為：   
, ,
2 2            or            (6)l SFO l SFON N
π πθ θ −≥ ≤  
 
3.2 內部接收機架構 
圖二為之前計畫所提之內部接收機架
構[4]，在本計劃中繼續使用，其中 input 
signal 為接收端接收到的數位訊號，其中我
們將利用架構中的 LMS 等化器係數，來做
取樣點偏移的估測。在通道緩慢變化的情形
下，同一個 OFDM 訊框中，每個子載波通
道效應不變，LMS 係數補償通道效應後，
係數開始追蹤 CFO 與 SFO 造成的相角旋轉
效應，如式(1)。 
 
3.3 LMS 等化器係數與訊號相角關係 
資料的相角失真 ,k lϕ 無法直接算出，但
根據我們去年的研究，LMS 等化器會追蹤
資料的相角，在穩態時其係數會與實際相角
偏差保持一固定的差值，因此式(5)可改寫
為： 
1 1 2 2
1 1 2 2
,
, ,initial , ,initial 1 2
, ,initial , ,initial 1 2
[( ) ( )]/( )
[( ) ( )]/( ) 
l SFO
k l k k l k
k l k k l k
k k
k k
θ
ϕ ϕ ϕ ϕ
ψ ψ ψ ψ
= − − − −
≈ − − − −
(7) 
其中
1 ,k l
ψ 為第k1個子載波上的LMS等化器係
數在第l個symbol時的相角，
2 ,k l
ψ 則為第k２個
子載波上的LMS等化器係數的相角。原本必
須要知道接收資料所受到的相角失真，才可
計算出 ，現在可利用LMS等化器係數的
相角
,l SFOθ
,k lψ ，代替 ,k lϕ 。 
 
3.4 選擇子載波 
從上可知，接收資料受到的相角失真，
可由 LMS 等化器係數的相角得知。然而，
若是在通道衰減大的子載波上，LMS 等化
 2
  
圖一、IEEE 802.11a 子載波分佈圖. 
 
 
 
 
 
圖二、OFDM 內部接收機架構. 
 4
