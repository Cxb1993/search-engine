unintentional falls. The goal of this project is to 
build a WSN healthcare and emergency response system. 
There are four sub-projects, Sub-project 1: 
Implementing the prototype WSN for heart activity 
monitoring via ZigBee node and custom-built 
electrocardiogram machine in homes. Sub-project 2: 
Assessing the techniques for detecting unintentional 
fall and using WSN localization techniques to build a 
location-awareness fall detection system. Sub-project 
3: Developing the computer-aided alarming techniques 
to reduction the false alarms on patient‘s WSN vital 
sign and building a WSN healthcare and emergency 
response center. Sub-project 4: Addressing the issues 
of providing reliable network services, incorporating 
highly-efficient routers and establishing a fault-
recovery mechanism. 
英文關鍵詞： Wireless sensing network, Electrocardiogram 
transmission, Fall detection, Emergency response 
center, Cluster tree network 
 
  
ii
?? 
???                  iv 
???                  vii 
????                 1 
????                 2 
??                  3 
????                 3 
????                 4 
??? ZigBee????????????          5 
 1.1?????????             5 
 1.2??????               9 
 1.3?????????             11 
 1.4???????? 510(k)??           11 
??? ZigBee??????????????????       15 
 2.1??????               15 
 2.2????                21 
 2.3??????               25 
???? ZigBee???????????????????????    26 
3.1 ????????Web Socket Server          26 
3.2 HTML5 Canvas??????????         27 
3.3 ??????????             28 
3.4 ????                29 
  
iv
??? 
? 1 ?????????              4 
? 2 ?????????              5 
? 3 ????????????            6 
? 4 ???????????             6 
? 5 End Device???????            7 
? 6 ZigBee?????????            8 
? 7 ???????               9 
? 8 ??????????????           9 
? 9 ????????              10 
? 10 ??????(????????? 60 BPM?)        10 
? 11 ??????(????????? 120 BPM?)        10 
? 12 ??????(VPC) (????? 1 min????? VPC??)     10 
? 13 ?????????(VT)             11 
? 14 ????/????(4 sec???)           11 
? 15 ???????????????           17 
? 16 ???????               17 
? 17 ????? SVMxyz?SVMxz? Vmax????       19 
? 18 ????????              20 
? 19 ??????               20 
? 20 ?????????              22 
? 21 Super Node????????????          22 
  
vi
? 43 SuperNode????????? 8 MHz          45 
? 44 WiMAX/WSN??????            46 
? 45 ZigBee ?WiMAX/GSM SMS?????????       46 
  
1
 
???? 
???????????????????????????????????????
???????????????????????????????????????
????????(wireless sensor network, WSN)??????????????????
???????????????????????? WSN ????????????
??????????????????????????????????WSN???
????????????????????????????????????WSN ?
??????????????????????????????????????
???????????????????????????????????????
??????(???????????)??????????????????????
???????????????????????????????????????
???????? ZigBee?????????????????????????????
??????? ZigBee?????????????????????????????
???????????????????? ZigBee??????? 
 
?????????????????????????????????? 
  
3
?? 
    ?????????????????????????????????????
???????????????????????????????????????
?????????? ?Wireless Sensor Network?WSN??????????????
???????????????????????????????????????
???????????????????????????????ZigBee ?????
???????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
????????????????? 
???? 
    ?????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
??????????????ZigBee???????????????????????
???????????????????????????????????????
?????/??????????????????????????????????
????????Super Node??????????????????????????
????????????????????????????????????????
???????????????????????????????????????
???????????? 
  
5
 
? 2 ????????? 
???? 
??? ZigBee???????????? 
1.1 ????????? 
?????????????? RF ?????????????????????
?? 3???????????????? Super Node?????MCU?MSP430 F1611?
????????????????MSP430??? 12-bit ADC???????????
?? 200 Hz??????????????????????? 4??????????
??????????????? 4 ???????????????????? Super 
Node? UART0RX???????????????????????????????
????????????? Super Node? UART1RX???????????? 4???
?????????????????Mini USB??????????????????
???????????????????????????????????? Super 
Node?Super Node???????????????????????????????
  
7
??????????????????????????????????????
Indicator???????????PID? Patient ID?????????????????
RID? Router ID????????????????????????????????
????????????Indicator?????????????? 
00?ECG????? 
01?????? 
c8???? 
0c????????Sinus Tachycardia???≥ 100?/??? 
0d????????Sinus Bradycardia???< 60?/??? 
0e????????Ventricular Premature Contraction?? 
0f???????????Short-run Ventricular Tachycardia?? 
??????????? 
 
 
? 5 End Device??????? 
? Super Node???????????????????????????? PID?
RID??? Router????? 3? 14-15????Super Node? End Device??????
?? ZigBee??????? ZigBee???????????? 6???? ZigBee???
  
9
 
 
? 7 ??????? 
 
? 8 ?????????????? 
1.2 ?????? 
?????????????????????????????????????
??????????????????????????????(FLUKE MPS450)??
???????????????????????????????????????
????????????????????????????????????????
????????????????????????????→??????→???
?????????????? 9???? 10?? 14???????????????
???????????????????????????????????????
??? ZigBee ?????????????????????????/???????
???????? 4 sec??????? 
(a)???                     (b)??? 
  
11
 
? 13 ?????????(VT)  
 
? 14 ????/????(4 sec???) 
 
1.3 ????????? 
??????????????????????????(class II)????????
??(IEC 60601-1)??????(IEC 60601-1-2)???????????????????
?(ETC)????????(??????????????????Zigbee??)????
?EN 60601-1-1???????EN 60601-1-2???????????????????
Zigbee????????????????????????????????????
????? 
1.4 ????????510(k)?? 
?????????????????????(FDA)?????????(????
????????510(k)???)??????????????????????
(Premarket Approval, ????PMA)????????????????????????
????(substantially equivalent, ????SE)???????????????????
  
13
???结????????????????则????????????????资?? 
3.组??? 
?????????组????????????????????????????
????结??/????????????????????????????????
/?????? ?????????????????????????细??????
?????????????? 
4.???结??组? 
?细??????????结??组?????????????????????
????????组???????????????规????????? 
5.?????? 
?????????????????????????????????(?)???
??????????况??残???????残??????况?? 
6.???? 
???????????????????????????????Validation??
???????????资????资??/????????????????????? 
6.1. Anycastec HK-1??????? IEC 60601???? 
6.2. Anycastec HK-1?????ME Software V&V???????????
??? IEC 62304??? 60601-1-4??????????? FDA??
????????? 
6.3. Anycastec HK-1 ????? Vital Belt????????ISO 10993?
?????? 
  
15
????????510(k)???????????????Safety????Effectiveness?
???????????510(k)????????????点? 
(1)??FDA (k)????????????????????STED????????
??Risk Evaluation Report????????????????编??????资?
纸?????Letter Size?21.5cm × 29.7cm?? 
(2)????510(k)?????????????????FDA????请资????
???????????毁?请资?????????? 
(3)?????????Certification???????Testing Report??参???????
??????? 
(4)????FDA??????????GMP??????????参?FDA 21 CFR 
820 Quality Systems Regulation ???????FDA???????GMP?????
???????????? 
???????????????????Anycastec HK-1????????????
?内???????够?FDA?????510(k) Submission??????????Anycastec 
HK-1?????Safety?????Effectiveness?????况???????????
RTX3371(K090886)????? 
 
???ZigBee?????????????????? 
2.1 ?????? 
??????????????????????22.3%?????????????
???????????????????????????????????????
???????????????????????????????????????
  
17
 
? 15 ??????????????? 
?????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
?????????16??? 
 
?16 ??????? 
?????????????????????SVMxyz (Signal Magnitude Vector)??
???????????(Th_Highxyz)???????????????????????
???????????????SVMxyz??????(1)??? 
222 zyxSVM xyz ++=       (1) 
  
19
 
? 17 ????? SVMxyz?SVMxz? Vmax???? 
?????????????????????????? 9 ??????????
???? 5???? 4??????? 62.89 ± 15.26 kg???? 167.11 ± 8.1 cm????
???????????????????????????????????????
? 28?(?? 1??)???????? 13?(?? 2??)??????????? 252??
?????????? 117?? 
?????????? 18??????(?????)??????????????
??????????????????? 18???????????????????
???????????????????????????????????????
??(???)??????????????????????????????????
?(??)????????????????????????????????????
??????????? 19?????????????????????(???)??
???????????????(Th_Highxyz)?????????????????(Thv)
???????????????????????????????????????
???????????????????????????????????????
???(Thv)??????????????????????????????????
???????????????????????????????????????
???????????(Thv)??????????????????????????
??(??)?????????????????????????(Th_Lowxyz)?????
  
21
? 73.5%? 
2.2 ???? 
????????????????????? offline path loss survey phase?real-time 
RSSI collection phase? online position calculation phase?????? 20????????
??? 
1. Offline path loss survey phase 
????????????????????????Path loss, PL????????? 
σXd
dndPLdPL +×+= )log(10)()(
0
0  (4) 
PL?d0????? d0?????????????? d0?? 1m?Xσ?????????
???????????????????????????????????????
??????????????????????? Super Node???????????
???? 21 ??????????????????? RSSI(Received Signal Strength 
Indicator)????????Class?? 
z Class I?144~255??? 0.5 m??? RSSI??? 144??????RSSI??? 144
????????????? 
z Class II ?112~143?RSSI?? 112? 255??????????????????
?????? RSSI?????? 0.5 m? 2 m??? 
z Class III?60~111??????? RSSI????? 2? 7 m??????????
????????????????? 
z Class IV?0~59???????7 m???RSSI???60????????????
??? 
  
23
?????M???? reference nodes?N? RF generators??? mobile node?????
mobile node???? RSSI????M1, …, MN????? i? reference node???? RSSI
????R1, …, RN?????????Euclidean distance??? mobile node?? i? reference 
node???????????5?? 
∑
=
−=
N
j
ijji RME
1
)(  (5) 
??????????????? E =?E1, …, EM??? mobile node? reference nodes?
????????????????? reference node? mobile node?????????
?????5???M?R?????????????????160?140???100?80? 
????? 20???????????? 0.5 m???????? 5 m????????
?????????????????????????6??? RSSI????? 
RSSI’ = A + ratio× (RSSI – B) (6) 
? 3 ?????????????????????B ??????????ratio ?
????????? RSSI?????????????????????A???? II?
III? IV?? B???????? I??? 176???????????????? 
? 3 ??????? 
 A ratio B 
Class I 176?0xB0? 0.05 144 ?0x90? 
Class II 112?0x70? 0.3 112 ?0x70? 
Class III 60 ?0x3C? 0.6 60  ?0x3C? 
Class IV 0  ?0x00? 1 0   ?0x00? 
????? RSSI?????5??????????????? ?M’1, …, M’N? ?
?R’1, …, R’N???? mobile node????????? p??????????? kw ??
?????7???????????????????? p??????????????
???8?? 
  
25
 
? 23 ?? p???????? 
2.3 ?????? 
????????????????????????????? Router ?
Coordinator ??????????????????????????????????
??? 24?????????????? Router???? Router ID?????????
????(???— 0x01)?(?????—0x02)??????? Router ????????
???????????????????????? Router ????? ID ?????
???????????????????? Router ID??????????? 
 
? 24 ??????????????? 
  
27
??????????? 
 
? 25 Web Socket Server???? 
 
 
? 26 HTML5?????????? 
3.2 HTML5 Canvas?????????? 
?????????????????????????????????????
???????????????????????????????????????
???????????? 99??????????????????????????
  
29
 
? 28 ??????? 
???????????? RFID ??????????????????????
???????????? 5 ??????????????????????????
???WOWWEE?????? ROVIO??????????? 29?????????
API??????????? TCP/IP????????????????????????
?????????????? x, y?????????WiFi??? 
 
? 29 ROVIO??????? 
3.4 ???? 
???????????????? 30???? 1???????????????
??????????????????????? Google Map API?????????
????????????? Skype ???????????????????? 2 ??
  
31
 
? 31 ??????? 
 
3.5 ???????????? 
1.????????????????? Super Node??????????????
? web service ?????????????????? 
2.??????????????????????????? 
3.????????????????????????????????????
????????????? 
4.????????????????????????????????????
????????????????????????????????????
??????????????????????? 
?????????????????????????????????????
????????? 32?????????????????????????????
???????????????????????????????????? PC ?
  
33
 
? 33 ????????? 
4.1 ?????? 
AODV?? 
AODV?????????????(Route Discovery)?????(Route Maintenance)
????????????? RREQ? RREP???????????????????
???????????????????????????????????????
RERR ????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
?????????????????????????????(Flooding)?????
RREQ??????????????? 
?????????? RREQ ?????????? RREQ ??? Source PanID ?
Source NetworkAddress?????? Destination???? IP? PanID? NetworkAddress
?????? Next Hop???????????????????? RREP??????
?????????????? RREQ???? RREQ???? 
???????? RREQ ???? RREP ?????????RREP ???????
??(Unicast)???????????????????? RREP ???? RREP ???
  
35
???? 
?????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
????????????(Reliable)???????????????????????
??????????????????????????????????(Flow Control)
??????? acknowledgement (ACK)??????????????????????
????????????????? CRC????????????????????
???????????????????????????????????????
???? 
Case 1?Transmission success 
? 36?????? ACK ?????????? Sequence Number? CRC?????
?????????????????????????? 
 
 
? 36 ????? ACK???? CRC? SN??????????? 
Case 2?Sequence Number error 
???????? Sequence Number ?????????????????????
? 
ACK2(CRC,SN) 
ACK1(CRC,SN) 
? 
PC1 
(sender) 
PC2 
(receiver)
Pktn(CRC, SN) 
Pkt1(CRC, SN) 
Pkt2(CRC, SN) 
Zigbee Zigbee 
ACKn(CRC,SN) 
  
37
 
? 38???????? ACK?????????(Case 4)? 
CRC-32 Schemes 
?????????????????????????????????????
???????????????????????????????????????
????????????????????? error control?Error control??????
?????????(ARQ)???? ARQ????? error control??????????
?????????? CRC ????????????????????? CRC ???
???????????????????????????????? CRC?????
???????? CRC ?????????????????????????? CRC
?????????????????????????????? 
4.2 ???????(CRC-32)??? ZigBee??? 
ZigBee ??????? IEEE 802.15.4 ????????????????Beacon 
frame?Data frame?Acknowledgment frame?MAC frame?Beacon frame????????
???Data frame????????????Acknowledgment frame??????????
???????????MAC frame???????MAC?????????????
?????Data frame???Data Payload? 0~25bytes???????????Data Payload
? 26~100bytes??????????CRC-32?????? Data Payload? 26~100byte?
Data frame header?????????????????CRC-32???????????
? 
ACK2(CRC,SN) 
ACK1(CRC,SN) 
No ACK 
Pkt1(CRC, SN) 
Pkt1(CRC, SN) 
Zi
? 
PC1 
(sender) 
PC2 
(receiver)
Pkt2(CRC, SN) 
Zi
  
39
      transbits32 = transbits32 >> 24;         //????? bits 
    break; 
    case TO_HIGH0_8BITS: 
      transbits32 = bits32 & 0x00FF0000; 
      transbits32 = transbits32 >> 16;         //????? bits 
    break; 
    case TO_LOW1_8BITS: 
      transbits32 = bits32 & 0x0000FF00; 
      transbits32 = transbits32 >> 8;         //????? bits 
    break; 
    case TO_LOW0_8BITS: 
      transbits32 = bits32 & 0x00FF; 
    break; 
  } 
  bits8 = (UINT8)transbits32; 
  return bits8; 
3. Message Type Set 
/*??? UINT32???? UINT8*/ 
DATAFRM.msdu[18]( fifo_buffer[29] ) = 0x01 →ACK?? 
DATAFRM.msdu[19]( fifo_buffer[30] ) = 0x01 →CRC??| 0x02 →CRC?? 
DATAFRM.msdu[20]( fifo_buffer[31] ) = Sequence Number 
DATAFRM.msdu[21]( fifo_buffer[32] ) = Packet_length  
DATAFRM.msdu[22]( fifo_buffer[33] )  
DATAFRM.msdu[23]( fifo_buffer[34] ) 
DATAFRM.msdu[24]( fifo_buffer[35] ) 
  
41
2. ????? 
    ????????????????????????????? RREQ?????
?????????????? RREP????????????????????? 40
????????????? 
 
? 40 ??????????????? 
a. ????? RREQ?????????????????????????  
b. ??????????????????????? 
c. ?????? RREQ????????? 
d. ???????????? RREQ????????? RREQ??????? 
e. ??????? RREP??????? DR??? DataReceiver???? 
f. ????? EKG_DATA??????????????? 
g. ?????????????? EKG_DATA????  
h. ???????? 
i.  ??? DATA_ACK??????????? ACK????  
j. ???????? DATA_ACK???  
k. ??????????? DATA_ACK????????????? 
  
43
???????????????????????????????????????
???????????? ACK? 
???????? RERR??????????????????????????
???????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
????????????????? hop?????? 
4. ???? 
?????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
???????????????????????????????????????
???? 
a. ?? 42(a)?????????????????????? HELLO message??
????? HELLO_ACK message?????????????? 
b. ?????????? HELLO_ACK message???????? 42(b)??????
??????????????????????????? 
c. ?????????????????????????????? 
? 42(c)?? 42(d)??? power??? pseudo code?? 42(c)?? Radius?????
????????? Power ???????????????????????????
? Level?????? 0~39? 40? Power Level? 
 
  
45
UART????????????? 
? 4 ???? RC???????????????(? 30.6????) 
??(?) ???? ???% 
30.6 47.317KHz - 
16.5 49.079KHz 3.72% 
46.6 45.699KHz -3.42% 
 
 
? 43 SuperNode????????? 8 MHz 
 
? 5 ????????? 8 MHz??????????(? 32.8????) 
??(?) ???? ???% 
17.7 46.138KHz 0.00004% 
50 46.149KHz -0.0002% 
5. ??WiMAX?? 
???? 44???????WiMAX/WSN???????????????? 4 sec 
ECG??? 800 bytes??????????????WiMAX????????????
? SMS ?????????????? SMS ???????????????????
  
47
??????? 
1. ????????????????????????:  
http://www.youtube.com/watch?v=4tkxkH7NG9o 
2. ????????????(?????????????????? ZigBee ??)?
???????? EN 60601-1-1 ??????? EN 60601-1-2 ?????????
????????? ZigBee ???????????????????????? 
3. ?????????????????????????????????????
?????????????????????????????????????
???????????????????????????????? ZigBee??
????????????????????? 
4. ??????????? API(U-NET)???????????? ZigBee ?????
????????????????????????????????????
ZigBee ??????????????????????????????????
??????????????????????? 
5. ???????????? Tunstall ????????????????Tunstall ??
????????????????????????????????????
???????????????????????????? Super Node????
??????? Tunstall????? 3-4???? Tunstall????????????
????? 200 ??????????????????????????????
????????????????????? 
6. ???????????????????????? Super Node??? EN 60601-1-1
? EN 60601-1-2???????????????? 
7. ZigBee ??????????????????????????????????
??????????? 
8. ????? Super Node?????? 4 sec??????(800 bytes)????????
??????? ZigBee ??????????????? 120 sec ????????
  
49
???? 
???? 
1. SK Chen, T Kao, CN Huang, CY Chiang, CY Lai, TH Tung, CT Chan, and PC Wang, “A 
Reliable Transmission Protocol for ZigBee-based Wireless Patient Monitoring.” IEEE 
Transactions on Information Technology in Biomedicine, 16:6-16, 2012. 
2. CN Huang and CT Chan, “ZigBee-based indoor location system by k-nearest neighbor 
algorithm with weighted RSSI.” Procedia Computer Science, 5:58-65, 2011. 
3. W Hsu, TH Lin, HH Chang, YT Chen, YJ Tseng, CH Hsiao, CT Chang, HW Chiu, PC Chen, 
and WC Chu, “Simulations and Experiments for Optimal Deployment of an RFID-based 
Location-Aware System.” Wireless Communications and Mobile Computing Wireless 
Communications and Mobile Computing, 11:679–691, 2011. 
4. SK Chen and PC Wang, “An Anycast-based Emergency Service for Healthcare Wireless 
Sensor Networks.” IEICE Transactions on Communications (Special Issue: Information and 
Communication Technology for Wellness and Medical Applications), E93-B:858-861,2010. 
5. SKChen, TY Chen and PC Wang, “Distributed Location Service with Spatial Awareness for 
Mobile Ad Hoc Networks.” IEICE Transactions on Communications, E93-B:3400-3408, 
2010. 
6. CN Huang, CY Chiang, GC Chen, SJ Hsu, WC Chu, and CT Chan, “Fall Detection System 
for Healthcare Quality Improvement in Residential Care Facilities.” Journal of Medical and 
Biological Engineering, 30:247-252. 
 
????? 
[1] CM Yang, T Kao, TL Yang and CC Wu, 2012, 01: “Performance assessment of active 
electrode applied in wearable physiological monitoring system.” IEEE-EMBS International 
Conference on Biomedical and Health Informatics (BHI2012), 5-7 Jan 2012, Shenzhen, 
China. 
  
51
[1] ??????????????????????????????2011?? 
[2] ???????? RFID???????????????2011? 7?? 
[3] ?????????????????????????????2011? 7?? 
[4] ????? RFID??????????????????????2011? 7?? 
  
53
?????????
?? 
???????????,??End-to-End ???
???????,??????????????
???? 
?? 
???? ??Anycast????????????? Anycast
???????? 
?? 
 
2. ???????????????????? 
??????? ??????? ???? ?? 
?????? 6????(?)????? 9??????? 4???? 19?? 
??????? ???? ?? 
??????? ???? ?? 
 
???
??? 
???? ?????
??(?) 
????
??? 
????
??? 
? 1? ?????????? 100,000 3 ? 
? 2? ?????????? 100,000 3 ? 
? 2? ?????????? 100,000 2 ? 
? 3? ?????????? 120,000 1 ? 
 
????? 100 ???? 
3. ??????????????????????????????????????
???????????????????????????? 500???? 
¾ ?????????????????????????????????????
?????????????????????????????????????
?????????????????????????????????????
?????????????????????????????????????
???????????????? 
¾ ???????? HTML5?Web Socket Server????????????????
  
55
2. ???????????? 
??????? 
?????????? ZigBee??????????????? 
??????? ????????????????????? 
?????NSC99-2218-E-241-001 ???????/???? 
????Web Socket Server???????? 
?????? 
????Web Socket Server for biosignal transfer 
?????? ?????? 
??? 
(???) 
??????? 
???????????????????????????????
?????????????????????????(? PC/Android 
Phone/iPhone/WM7/iPad ?)???????????????????
?????????????? PC ???????????????
???????????????????????????????
???????????????????????????????
Web Socket API?Web Socket??? HTML5???????????
???????????????????(Full-duplex)???????
?Web Socket?????????????????????????
??? Apple Safari?? Google Chrome? 
 ???? 
????In order to monitor health status of elderly at home, programs need 
to be executed on healthcare center server and home gateway. Bio-signal raw 
data transfer and information display occurred on multiple platforms such as 
server/PC/iPad/Android Phone. Programs developments for PC server are 
traditional skill for software engineer. For programs can be work on multiple 
platforms require a lot of human resource and is not feasible for small 
company. To solve this problem, we use Web Socket protocol and HTML5 
standard to transfer and display bio-signal raw data. A Web Socket Server is 
installed on home healthcare gateway and iPad/PC/Android Phone can 
access the raw data via the Web Socket protocol directly. Anyone can use 
HTML5 browser to access and display data on any platform. 
 1
??????????????????????? 
100 ? 11 ? 16? 
 
?? ?????? 
??????????????????????? (ANT2011) ????
????? (Acadia) ??????????? (Oxford Brooks) ??????
the 8th international conference on Mobile Web Information Systems (MobiWIS) ?
?????????? workshops (the International Symposium on Frontiers in 
Ambient and Mobile Systems, the 6th International Symposium on Intelligent Systems 
Techniques for Ad hoc and Wireless Sensor Networks, the 5th International Workshop 
on RFID Technology, the International Workshops on Wireless Networked Control 
Systems, AmbienT Intelligence at the service of info-mobility and Critical 
Transportation networks, the International Workshop on Emerging Technologies in 
Sensor Networks) ????????????????????? CROWNE 
PLAZA ???????????????????????????????
????????????????????? GPS ???????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
????????????????????????????????????
????????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???? NSC99?2218?E?241?001 
???? ????? ZigBee???????????????(3/3) 
????
?? ??? 
????
??? 
???? 
??????? 
??????? 
???? 
100 ?9? 19? 
? 
100 ?9?21? 
???? 
????????? 
???? 
(??)???????????????????? 
(??) The 2nd International Conference on Ambient Systems, 
Networks and Technologies (ANT-2011) 
????
?? 
ZigBee-based indoor location system by k-nearest neighbor 
algorithm with weighted RSSI 
 3
?????????????????????????????????
???????????????????????????????????
???????????????????????????????????
??????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
?????????????????????????? 11 ???????
?????????????????? tour???????????????
??????????????????????? 
??? 9? 21?????????????????? 
?? ???? 
?????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????ANT-2011???????????????
???????????????????????????????session
???????????????? 
??ANT????????????????????????20????
???????????????????????????Local Arrangements 
Chairs???Ramiro Liscano???????????????????????
??????????session chair Shivakant Mishra????????????
???????????????????G RAM Mohana Reddy??????
?????????????????? 
?????????????????????????????????
???????????????????????????????????
???????????????????????????????????
??????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
Available online at www.sciencedirect.com
1877–0509 © 2011 Published by Elsevier Ltd. Selection and/or peer-review under responsibility of Prof. Elhadi Shakshuki and Prof. Muhammad Younas.
doi:10.1016/j.procs.2011.07.010
Procedia Computer Science 5 (2011) 58–65
The 2nd International Conference on Ambient Systems, Networks and Technologies (ANT) 
ZigBee-based indoor location system by k-nearest neighbor 
algorithm with weighted RSSI 
Chih-Ning Huang, Chia-Tai Chan*
 Institute of Biomedical Engineering, National Yang-Ming University, No.155, Sec.2, Linong Street, Taipei, 112 Taiwan 
Abstract 
With the advances in information and communication technologies, wireless sensor networks has made Ambient Intelligence 
(AmI) applications possible that can monitor the situation around the persons or objects and give certain responses for their needs. 
The location awareness is an important technology for AmI applications. The advantages of ZigBee wireless sensor networks 
such as low cost, high scalability, high availability and supporting dynamic routing topology make ZigBee more suitable for 
indoor location system. In this research, we propose a ZigBEe-bAsed indoor loCatiON (ZigBEACON) system for the AmI 
applications. The proposed approach is based on the k-nearest neighbor algorithm. According to the Received Signal Strength 
Indication’s (RSSI) path loss distribution, the RSSI values are defined into four classes. The signals that belong to different
classes will be adjusted by the different ratio and will be referred to as weighted RSSI. The use of weighted RSSI can effectively 
choose the p-nearest reference nodes. Finally, the position of mobile node would be derived by calculating the coordinates of p-
nearest reference nodes. Comparing the results with that of ZigBee-based LANDMARC system, our approach has 29% 
improvement on average error distance. The approach not only improves the accuracy, but also provides less calculation 
complexity than other improvement methods of LANDMARC. The ZigBEACON approach is an adequate solution to the indoor 
location system for AmI applications. 
© 2011 Published by Elsevier Ltd. Selection and/or peer-review under responsibility of [name organizer] 
Keywords: ZigBee; indoor location system; k-nearest neighbor algorithm 
1. Introduction 
Ambient Intelligence (AmI) is an electronic environment that can monitor the situation around the persons or 
objects and give an adequate response for their needs [1]. With the advances in Information and Communication 
Technologies (ICTs), Wireless Sensor Networks (WSN) has made many AmI applications possible. Context-aware 
technology gathers the relevant context from sensor data, and then gives a certain response. Three main aspects of 
context are: where you are, who you are with, and what resources are nearby [2], so the location information is one 
of the important context information for AmI. For instance, when a person has fallen in the AmI environment, the 
wearable sensor will detect the fall event and send the alarm to the caregiver who can deliver immediately help. And 
* Corresponding author. Tel.: +886-2-2826-7371; fax:+886-2-2821-0847. 
E-mail address: ctchan@ym.edu.tw. 
© 2011 Published by Elsevier Ltd. Selection and/or peer-review under responsibility of Prof. Elhadi Shakshuki and Prof. Muhammad Younas.
60  Chih-Ning Huang and Chia-Tai Chan / Procedia Computer Science 5 (2011) 58–65
disadvantages of calculating Mahalanobis distance, such as high complexity and the learning process through 
collecting amount of RSSI values before positioning, are not suitable for the dynamic indoor environment. Some 
algorithms revised the original k-nearest reference tags of LANDMARC. Shape Constraint Approach [7] utilized a 
shape constraint factor to find the k-nearest reference tags based on the geometrical correlation properties. Others, 
such as Jiang XJ et al. [8] calibrated the tracking tag’s coordinate by proceeding the error corrections until the 
tracking tag’s coordinate was stable, and Jain S et al. [10] used a backtracking algorithm to find the optimal colonies 
that based on the spatial co-relation between reference tags. But the results would poor if the original k-nearest 
reference tags were far from the mobile object; moreover, the recursion method would increase the latency that is 
not suitable for the real time positioning. Except correcting the original k-nearest reference tags of LANDMARC, 
some researches tried to increase the accuracy by adjusting the values of original RSSI values, such as using the 
tracking tag as the criterion to get the modified signal strength [6] or averaging the values of a historical RSSI 
sequence [9]. The reduced error distance was from 0.076 m to 0.3616 m, although those adjusting method were 
simple, the improvements were less significant. 
The WSNs provide ubiquitous sensing, computing communication capability that facilitate the development of 
AmI application. More and more researchers are devoted to the study of indoor position system based on WSN like 
ZigBee. Mendalka M et al. [12] implemented the Pattern Matching (PM) localization in ZigBee wireless sensor 
networks. The concept of comparing a set of RSSI with all reference tags and measured samples is similar to 
LANDMARC methodology. But the non-real-time learning process of PM algorithm is not practical; what’s more, 
the tracking tag needs to send the series of localization beacons on localization phase that would increase the power 
consumption. 
3. Materials and Methodology 
3.1. Hardware 
The sensor, SuperNode, consists of a MSP430 microcontroller and an UZ2400 ZigBee chip. UZ2400 will 
transform the power value (dBm) into the RSSI value linearly that is from 0 to 255 [13]. The RSSI value will 
decrease when the distance increases. Then the ZigBEACON system will use the RSSI values to do positioning. The 
size of SuperNode is about 5cm (length) × 3cm (width) × 0.5cm (height). 
3.2. Methodology 
Fig. 1. The flow chart of ZigBEACON system 
In ZigBEACON system, SuperNode can be categorized according to their functions: 
x Gateway: it is connected to the computer and delivers the data from all the nodes to computer. 
x Mobile node: the one that should be known its position. It receives signals from RF generators and sends RSSI to 
computer through gateway. 
x RF generator: it sends the broadcast signal to mobile node and reference nodes. 
x Reference node: it receives signals from RF generators and sends RSSI to computer through gateway. 
62  Chih-Ning Huang and Chia-Tai Chan / Procedia Computer Science 5 (2011) 58–65
3.2.3. Online position calculation phase 
After all the RSSI values are transmitted to the computer, the mobile position will be calculated by ZigBEACON 
system. Suppose we have M fixed reference nodes, N fixed RF generators and one mobile node in AmI environment. 
We define the RSSI vector of the mobile node is M = (M1, …, MN), and the corresponding RSSI vector of the i-th 
reference node is Ri = (Ri1, …, RiN). The Euclidean distance between the mobile node and the reference node i is 
defined as 
 ¦
 
 
N
j
ijji RME
1
2 .  (2) 
The mobile node will have a Euclidean distance vector E = (E1, …, EM) that shows the similarity between the 
mobile node and all reference nodes. The smallest Ei means that the reference node i is the nearest reference node 
surrounding the mobile node. Nevertheless, as shown in Figure 2, the result calculated by Equation (2) is difficult to 
recognize the real distance, since the term (MjЁRij) is blurred. For example, (160Ё140) and (100Ё80) have the 
same result but the distance of the former is about 0.5m and the longest distance of latter would reach 5m. In order 
to solve this problem, the RSSI should be adjusted before calculating the Euclidean distance by 
 BRSSIratioARSSI u ' .  (3) 
Table 2. The values of parameters for each class 
 A ratio B 
Class I 176 (0xB0) 0.05 144 (0x90) 
Class II 112 (0x70) 0.3 112 (0x70) 
Class III 60 (0x3C) 0.6 60 (0x3C) 
Class IV 0 (0x00) 1 0 (0x00) 
Table 2 shows the parameter values of A, ratio and B according to each class from the offline path loss survey phase. 
The values of parameter B are the baseline of each class that are 144(0x90) for Class I, 112(0x70) for Class II, 
60(0x3C) for Class III and 0(0x00) for Class IV. The parameter ratio can reduce the difference when the RSSI 
values belong to the same class, and this value depends upon the distance coverage of its class. So, the values of 
ratio are 0.05, 0.3, 0.6 and 1 for Class I, II, III and IV respectively. The numbers of parameter A are equal to B for 
Class II, III and IV. But the gap between two baselines of Class I and Class II is too small, so we set the A value of 
Class I to 176(0xB0) that makes this gap is similar to the other gaps between two classes. Then we replace the 
original RSSI in Equation (2) by the wighted RSSI, M’ = (M1’, …, MN’) and Ri’ = (Ri1’, …, RiN’), to obtain the 
Euclidean distance vector. Finally, the ZigBEACON system will choose p-nearest reference nodes to calculate the 
unknown position of the mobile node by 
   ¦
 
 
p
k
kkk yxwyx
1
,, ,  (4) 
the wk means the weight of the k-th nearest reference node sorted by the E, the (xk, yk) is the coordinate of this 
reference node and the (x, y) is the estimation position of mobile node. The weight that depends on the p-nearest 
reference nodes’ Euclidean distance of the mobile node is defined as: 
¦
 
 
p
l lk
k EE
w
1
''
11 ,  (5) 
64  Chih-Ning Huang and Chia-Tai Chan / Procedia Computer Science 5 (2011) 58–65
4.2. The results of ZigBEACON system 
The ZigBEACON system is based on the k-nearest neighbor algorithm which is adopted by the famous RFID-
based LANDMARC system. To evaluate the ZigBEACON approach, we compare the results of ZigBEACON 
system with that of ZigBee-based LANDMARC system, called Z-LANDMARC latter, that accomplishes 
LANDMARC approach by SuperNode. Based on the result on optimal number of nearest reference node(s), we will 
show the comparisons at the p = 4 condition. 
4.2.1. The comparison of Euclidean distance distribution 
The Euclidean distance between the mobile node and the reference node i calculated by Equation (2) means the 
similarity of RSSI between the mobile node and the reference node i. The smaller Ei is, the nearer the reference node 
i is. If the p-nearest reference nodes are gathered together around the mobile node, the accuracy will be improved. 
Figure 5 and Figure 6 are the Euclidean distance distribution of Z-LANDMARC approach and ZigBEACON 
approach. The subtitles, (a), (b), (c) and (d) of these two figures are the results when the mobile node at position A, 
B, C and D individually as shown in Figure 3. Comparing Figure 5 with Figure 6, we can easily discover that the 
Euclidean distance distributions of ZigBEACON approach are smoother than that of Z-LANDMARC approach. 
Unlike the results of Z-LANDMARC approach that have multi-hollow distribution, the results of our proposed 
approach only have a main hollow. So the ZigBEACON approach can effectively choose the p-nearest reference 
nodes around the mobile node. For example, Figure 5 (a) has three hollows at (2.5, 0.875), (4.5, 4.875) and (8.5, 
0.875), especially (8.5, 0.875) is far from the mobile node’s position, A (1.5, 1.875), that will increase the error 
distance, but Figure 6 (a) only have two hollows, (2.5, 0.875) and (4.5, 4.875). 
Fig. 5. The Euclidean distance distribution of Z-LANMARC approach when mobile node is at (a) A (1.5, 1.875); (b) B (3.5, 1.875); (c) C (5.5, 
1.875); (d) D (7.5, 1.875). 
Fig. 6. The Euclidean distance distribution of ZigBEACON approach when mobile node is at (a) A (1.5, 1.875); (b) B (3.5, 1.875); (c) C (5.5, 
1.875); (d) D (7.5, 1.875). 
4.2.2. The comparison of error distance 
Comparing the results with that of Z-LANDMARC approach, ZigBEACON approach reduces 0.47m that is 
about 29% improvement on average error distance. The average error distance is 1.15̈́0.54m for ZigBEACON and 
1.62 ̈́0.9m for Z-LANDMARC, the maximum error distance is 1.64m for ZigBEACON and 2.99m for Z-
LANDMARC, and the minimum error distance is 0.24m for ZigBEACON and 0.52m for Z-LANDMARC. In short, 
theZigBEACON approach can improve the accuracy of indoor location significantly. 
 1
????????????????????????? 
                                     ???101? 1 ? 10 ?
???????? 
??? 12/12???????????????????????????????
????????????????????????????????????
???????? 12/13??????????????????????????
????? IEEE Digital Library?? 
 
?????? 
ICICS ??????????????????????????????
Sustainable Infocomm Systems??????????????????? Panel 
Session?????????????????????????????????
????????????????????????????????????
?????????????????????? Panel Session???????
?????????????????”Smart Device Communications/M2M: In 
???? NSC 99?2218?E?241?001 
???? ????? ZigBee???????????????(3/3) 
????
?? 
??? ??????? ?????????? 
???? 
100 ? 12? 13?? 
100 ? 12? 16? 
???? ??? 
???? 
(??) ?????????????????? 
(??) The 8th International Conference on Information, Communications 
and Signal Processing 
????
?? 
(??) ????????? 
(??) Packet Classification with Filter Categorization 
 3
????????? 
????????????????????????????????????
????????????????????????????????????
????????????????????????????????????
????????????????????????????????????
???? 
 
????????(???????) 
??????? 
 
???? 
????? 
 
??????????? 
????????: ????? ICICS ?????????? 
 
 
 
 
 
[7] and [8] are based on decision trees. Both schemes attempt
to divide the filters into multiple linear search buckets by using
the data structure of a decision tree. The cut rules of filter
categorization may either be a value [7] or a bit [8] of any
field. HyperCuts [9] adopts multidimensional cut rules. The
tuple-based algorithms store the filters with an identical prefix
length combination in a hash table [2]. The prefixes can be
concatenated to create a hash key for a hash table access.
The matching filters can be found by probing each hash table
alternately. Each hash table is also known as a tuple, and tuple
space search aims at searching for the matching filters in the
set of tuples.
The second category includes those taking a decomposable
approach. The Bit Vector (BV) algorithm performs d one-
dimensional searches to derive d lists of filters with at least
one matching field [10]. The filter list is in the form of
bit vectors, meaning that the BV algorithm is suitable for
hardware implementation. A later work, Aggregate Bit Vector
[3], has demonstrated dramatic improvement in the speed
performance of the BV algorithm. Crossproducting introduced
by Srinivasan et al. [11] uses best matching prefix lookups
and a pre-computed crossproduct table to combine the results
of individual prefix lookups in each header field. Gupta and
McKeown [12] presented Recursive Flow Classification that
does crossproducting recursively and can be viewed as a gen-
eralization of crossproducting. In each iteration, only a subset
of the inspected fields is used to generate a crossproduct table
and the unmatched entries are eliminated for storage saving.
Several tuple-based algorithms also rely on one-dimensional
searches for speed-up, such as Pruned Tuple Space Search [2]
and encoded tuple space search [13].
III. ANALYSIS OF TUPLE-BASED ALGORITHMS
In this section, we describe and analyze the search proce-
dure of the existing tuple-based algorithms to motivate our
work. Before constructing the data structure of tuple space,
we must transform the range fields of the original filters into
prefixes. As described above, the idea of tuple space is to store
filters in different hash tables according to the prefix-length
combinations. Therefore, the range fields in the original filters
must be transformed into prefixes by splitting each range into
multiple subranges, where each subrange uniquely corresponds
to one prefix [2]. Once a range is converted into more than
one prefix, the corresponding filter is duplicated as well.
A tuple stores a set of filters with specific prefix lengths,
and the resulting set of tuples is called a “tuple space” [2].
For example, the two-dimensional filters Fi = (10∗, 110∗) and
Fj = (11∗, 001∗) both belong to the tuple T2,3 of the tuple
space. When searching for T2,3, a hash key is constructed by
concatenating two bits of the source field with three bits of
the destination field.
Several algorithms have been proposed to improve the
search performance of two-dimensional tuple space. Rectangle
Search [2] attempts to eliminate a set of candidate tuples
during probing tuple T with the aid of markers and pre-
computation. Tuples above T are eliminated if the probe of
tuple T returns with a match. Otherwise, tuples to the right of
tuple T are discarded. The lower bound has been demonstrated
to be O(2W − 1) given a O(W ×W ) rectangular tuple space,
where W is the number of distinct prefix lengths. Assuming
that the number of filters is N , a rectangle search requires NW
memory space. In [14], Wang et al. presented an algorithm
to improve the required storage and the lookup speed of the
rectangle search. On the basis of the observation that the
performance of the rectangle search ties to the number of
tuples, this scheme adopts a dynamic programming scheme
to calculate the optimal set of tuples and reorganizes the
filters by using the technique of Filter Expansion. However,
the cost of pre-computation would increase exponentially
as the classifier expands and makes the scheme unsuitable
for large filter databases. Another scheme, Filter Rephrasing
[13], also reduces the number of tuples but with a different
approach. This scheme encodes filters according to the nested
level of each prefix field. Therefore, the search procedure
requires extra encoding process for each inspected field. Filter
Rephrasing does not incur storage penalty besides the data
structures for encoding; however, a newly inserted filter would
lead to data structure reconstruction in the worst case.
To support filters with more than two fields, Pruned Tuple
Space Search has been proposed to eliminate tuples that do
not match a query. For each field, the tuple lists of all prefixes
are collected in d pruning tables. Accordingly, the lookup
procedure starts by searching for the best matching entry in
each pruning tables. By intersecting the tuple lists of each field,
the tuples without matching filters are likely pruned. Since no
extra entry is required except for the pruning tables, Pruned
Tuple Space Search has very low update cost. However, the
tuple lists cannot provide precise relation between filters and
tuples. In the previous example with two filters, Fi and Fj ,
stored in T3,2, the search procedure for an incoming packet
with addresses (101, 001) would query T2,3 since the best
matching prefixes of both fields exist in T3,2. However, there is
no matching filters. The problem of false match would severely
degrade the search performance. In the worst case, no tuple is
pruned.
The existing tuple-based algorithms have their limitations.
For example, the algorithms based on Rectangle Search [2],
[13], [14] only support two-field filters. Pruned Tuple Space
Search cannot effectively bound the number of accessed tuples.
Furthermore, although Entry Pruned Tuple Search has better
search performance than Pruned Tuple Space Search, it has to
update the tuple bitmaps of all filters in the worst case while
inserting a filter with d wildcard fields. Among the existing
tuple-based algorithms, Pruned Tuple Space Search is the only
algorithm which has superior renewability [2]. Therefore, we
attempt to improve the search performance of Pruned Tuple
Space Search by using pre-computation while maintaining its
renewability in this paper.
IV. OUR SCHEME
We adopt a straightforward approach to improve the search
performance of Pruned Tuple Space Search. First, we derive
TABLE I
THE CHARACTERISTICS OF REAL FILTER DATABASES.
Filter Original Prefix Original Distinct Original
Databases Filters Filters Tuples Prefixes BV Storage
ACL1 752 1,830 75 604 1,105,320
FW1 269 869 206 174 151,206
IPC1 1,550 2,106 219 387 815,022

 
  
   
              
     ﬀ ﬁ ﬂ  ﬃ    ! "   # $ ﬂ
%
& '
( )
*
+
'
,
-
.
/
0
1
2
'
,
3
4 5  
6 7 
8 9 5 
(a) Filter Distribution

 
  
   
    
              
     ﬀ ﬁ ﬂ  ﬃ    ! "   # $ ﬂ
%
&
'
( )
*
+ '
,
-
.
/
0
1
2
'
,
3
4 5  
6 7 
8 9 5 
(b) Accumulated Filter Distribution
Fig. 1. Filter Distribution for Different Lengths of Tuple List.
of our scheme with several notable algorithms. The last stage
evaluates the scalability of our scheme.
First, we present the influence of different threshold values.
We use three real filter databases, ACL1, FW1 and IPC1, in
this experiment. The characteristics of these filter databases
including the number of filters (Original Filters), the number
of filters after transforming range fields into prefixes (Prefix
Filters), the number of tuples (Original Tuples), the number of
distinct prefixes (Distinct Prefixes), the required storage of bit
vectors for storing all filters (Original BV Storage) are listed
in Table I.
We start from illustrating filter distribution for different
tuple list lengths. Figure 1a shows that filter distribution for
different filter databases is irregular. For FW1, the tuple list
length of most filters are distributed between 100 and 150.
In addition, the maximum length of tuple list equals to the
number of tuples, which indicates that the pruning information
stored in one-dimensional data structures might be useless. The
other two databases also have long tuple lists. Therefore, the
 :    
 :   
 :  
 : 

 
  
   
              
     ﬀ ﬁ ﬂ  ﬃ    ! "   # $ ﬂ
%
& '
;
'
<
)
0
,
'
=
>
2
-
,
?
@'
-
.
A
0
2
B
'
C
2
-
,
3
D
E
A F
2
'
3
G
4 5  
6 7 
8 9 5 
Fig. 2. The Required Storage of Bit Vectors for Different Lengths of Tuple
List.
search performance of Pruned Tuple Space Search in the worst
case is inadequate.
We further show the number of the accumulated filters
whose tuple list lengths are larger than a specific value. This
evaluation also indicates the number of the categorized filters
for a given threshold value of tuple list length. In Fig. 1b,
while the number of the categorized filters in IPC1 gradually
decreases as the threshold value increases, it is not the case
for ACL1 and FW1 since most filters share few tuple list
lengths. Therefore, different threshold values would affect the
performance of our scheme severely.
Figure 2 depicts the required storage of bit vectors in
kilobytes for different threshold values. The required storage
of bit vectors is calculated by multiplying the number of filters
to the number of distinct prefixes for the categorized filters.
Our results show that the bit vector storage is proportional to
the number of filters, and, therefore, it has a curve similar to
that described in Fig. 1b.
TABLE II
STORAGE PERFORMANCE OF DIFFERENT THRESHOLD VALUES.
Filter Tuple Left Categorized Resulted
Databases Threshold Tuples Filters BV Storage
ACL1 4 35 1,349 50.06
8 49 1,045 33.17
16 74 80 0.32
32 74 1 0.00
64 75 0 0.00
128 75 0 0.00
FW1 4 0 869 18.46
8 0 869 18.46
16 0 869 18.46
32 0 869 18.46
64 7 848 16.04
128 74 451 3.74
IPC1 4 74 1,694 62.86
8 124 1,082 34.87
16 163 450 9.39
32 198 111 1.29
64 218 16 0.05
128 219 0 0.00
The storage and speed performance of our scheme for
 1
????????????????????????? 
                                     ???101 ? 1 ? 15 ?
???????? 
??????????????? 1/2? 1/5????????????Cardiovascular 
Health Informatics???????? 1/5???????????????????
1/5???????????????????????????????????
?????????????????? 1/6?????????????????
????????????????????????????????????
???????????????????? 1/7???????????????
?????????????????????? 1/7???Special STHM Forum on 
“Deployment of Telemedicine and Mobil Health”?????????????????
????????????????????????????????????
??????????????????????????????1/8?????
???? NSC 99?2218?E?241?001 
???? ????? ZigBee???????????????(3/3) 
????
?? 
?? ??????? 
?????? 
????????? 
???? 
101 ? 1 ?2?? 
101 ? 1 ?7? 
???? ????? 
???? 
(??) 2012???????????????? 
(??) IEEE-EMBS International Conference on Biomedical and Health 
Informatics (BHI 2012) 
????
?? 
(??) 1.???????????2.????????? 
(??) 1. Performance assessment of active electrode applied in wearable 
physiological monitoring system; 2. A Textile-based Capacitive 
Breath-sensing System 
 3
 
 
???? 
????? 
 
??????????? 
????????: ????? BHI 2012??????????? 
  
                       
Fig. 5 Definition of Y/X                    Fig. 6 Definition of Y/X under  
under body motion interference.         AC power lines interference. 
 
 
Fig. 1 The configuration of the wearable physiological monitoring system. 
 
 
   
Fig. 3  Active electrode circuit 
in aluminum dome. 
 
 
 
3 Subjects and environment  
Five young healthy male subjects were recruited for test 
(height: 169±6 cm, chest circumference: 84±10 cm, age: 33±
10 years). Subjects were lying on a table (90 cm high) with an 
AC power line on the floor to give stable interference. Test 
site is an ordinary office without heavy-duty electrical 
equipment or other strong electromagnetic sources. The 
temperature and relative humidity was ranged at 25.2~26.7℃ 
and 65~74%. 
III. RESULTS AND DISCUSSION 
A typical ECG obtained by the system is shown in Fig.4, 
where the P, Q, R, S can be recognized for further analysis. 
For verifying the performance of our wearable electrodes, 
physiological electrodes are also applied on the same site to 
obtain ECG. ECGs with AC power line interference and body 
motion interference were recorded, respectively. The largest 
amplitude of noise during every ten beats was denoted as X. 
The amplitude of peak-to peak was denoted as Y. As shown in 
Fig.5 and Fig.6, the purpose to take Y/X by this way is to 
determine whether the interference may cause false QRS 
detection. While X is close to Y, it will be probable easy to 
make a false detection; on the contrary, the false detection will 
not happen whenever Y  X. 
The ECGs for four kinds of activities, standing still, jogging, 
jumping and walking under no interferences are depicted in 
Fig.7. It is shown that jogging, jumping, or walking will 
interfere with the ECGs, whereas the R peaks can still be 
identified. The corresponding Y/X under AC power line and 
body motion interferences are listed in Table 1 and Table 2. It 
can be seen that the active electrode circuit can help to 
decrease the AC power line interference.  
 
                                    
under       
                                                                         Units 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
The amplitude of R peak is much larger than the AC power 
line interference; R peak detection will not be affected by this 
interference at all. While the wearer is in moving, the 
interference suddenly becomes larger. It is because the body 
motion at that instance moves the electrode away from skin 
such that the impedance becomes larger. However, the AC 
power line interference is much smaller than that of the body 
motion.  
 
Table 1 Y/X under AC power line interference 
 Standing still jogging jumping walking 
a 35.2 16.5 12.8 16.3 
b 41.9 18.0 18.5 17.3 
c 30.8 15.2 16.4 15.9 
d 34.5 19.7 18.1 19.0 
    
  a: physiological electrode, without active electrode circuit. 
b: physiological electrode, with active electrode circuit. 
c: wearable electrode, without active electrode circuit. 
d: wearable electrode, with active electrode circuit. 
 Fig. 4  8-second continuous ECG, standing still. 
  
  
          Fig.2  Schematic diagram of the 
active electrode. 
 
  
  
 
Abstract— A textile-based breath-sensing system and the testing 
results with different postures are described. Two electrodes are 
placed on a belt, loosely buckled for user comfort, to charge and 
discharge a capacitor modeled off human movement of breathing. 
For most conditions of daily activities, the system has 
demonstrated capable of providing accurate measurement of 
respiratory rates. 
I. INTRODUCTION 
reath-sensing systems are used commonly for patient 
check-up. Not only the patients in intensive care unit, but 
a majority of the public with chronicle obstructive pulmonary 
disease (COPD) or asthma under home care need to be 
monitored periodically with systems that are easy to use. 
Moreover, people without obvious health issues can also use 
breath-sensing system for preventive medicine in improving 
their physical or mental conditions. For example, the 
RespeRate® , made by InterCure and cleared by the Food and 
Drug Administration as a medical device, is a breath-sensing 
system to apply bio-feedback principle to lower blood 
pressure. Furthermore, people engaged in Yoga, Qigong, 
Lamaze, as well as wind instrument players, often practice 
abdominal breathing. These new demands of consumer health 
electronics have undoubtedly stimulated the development of 
better breathing monitors.  
In clinical operation, impedance pneumography (IP) is a 
well-developed and standard technique to measure respiratory 
rates [1]. This IP technique, using conventional patch, 
although generating reliable results, is neither comfortable nor 
wearable. Our system uses fabric/textile-based sensors to 
overcome these inconveniences [2]. In previous studies [3, 4], 
a textile-based 4-stage Breath-monitor Belt (BB) was 
designed. A simple computer game was developed along the 
BB to add fun and motivate more usage. This BB, using 
unconventional sensor design, has demonstrated capable of 
accurate detection of a user’s breathing rate. Within last year 
we have developed a computer game with two capacitive 
breath sensors, generating  analog output based on the same 
measuring principle, with one placed on the user’s chest and 
the other on the abdomen. The dual sensor placement further 
reminds the player of the importance of abdominal breathing 
[5]. What follows describe the technology and results of the 
textile-based capacitive breath-sensing system. 
 
Manuscript received October 14, 2011.  
C. M. Yang, T. L. Yang, C. C. Wu  are with 3H Technology Corp., Shenzhen, 
China, C.C. Wu is the correspondent author, phone: 86-755-22678258, 
fax:86-755-22678658, e-mail:chihchungwu@163.com N. N.Y. Chu is with 
CWLab International. T. Kao is with Department of Biomedical Engineering, 
Hungkuang University, Shalu, Taichung, 43302, Taiwan.  
II. MATERIALS AND METHOD 
The human body has been modeled as having variable 
capacitors and resistors connected in parallel [6].  As the 
human capacitor goes through charging and discharging, its 
formative breathing profile is shown in Figure 5, analogous to 
results gathered from the conventional IP. Our system 
comprises of a sensing electrode, a reference electrode, a 
10K-Ohm current limiting resistor, and a microcontroller (Fig. 
1). The sensing electrode is made of silver yarn conducting 
clothes bended in a 3D triangular shape and fixed at both sides 
(Fig. 2). Assuming the equivalent circuit of a human body is a 
combination of capacitor and resistor, where the capacitance 
and resistance are varied with body movements reflected of 
one’s breathing. Both electrodes can be modeled as capacitors 
particularly when they are in loose contact with human body. 
The charging time can range from 0.1 to 0.6 millisecond. 
 
 
Fig. 1 The system configuration 
 
  
 
          Fig. 2  The side views and photo of sensing electrode 
The charging impedance is the sum of the fixed current 
limiting resistor, the reference electrode (assumed to be fixed), 
and the sensing electrode which varies significantly according 
to the contact area and sweatness of skin. When exhaling, the 
body shrinks inward and the contact area decreases; when 
inhaling, the contact area increases. Figure 3 shows that the 
sensing electrode contacts the skin under different breathing 
conditions. The charging impedance is thus varied according 
to the magnitude of breathing movement. To measure the 
charging impedance, the microcontroller assigns logic “1” to 
A Textile-based Capacitive Breath-sensing System 
Chang-Ming Yang, *Tsair Kao, 
※
Narisa N. Y. Chu, Chih-Chung Wu, and Tzu-Lin Yang 
B 
  
level because chest and abdominal circumferences decrease as 
one stands up. This level of almost “0”, the floor signal, is a 
reflection that the skin is hardly touching either electrode. 
Nevertheless our system is still able to detect the respiratory 
rate. While lying down, both profiles again show lower 
amplitudes and somehow distorted because the signal 
becomes very faint; likewise our system is still able to obtain 
the respiratory rate as shown. 
 
 Natural Breathing Enforced Breathing 
Thor
acic 
 
 
Abdo
minal 
 
 
Fig. 7 Comparison between the capacitive electrode and the 
circumference meter, where the white curves are by 
circumference meter, and the red curves are by capacitive 
electrode. 
 
For the other extreme if we wrap the conducting clothe tightly 
to the skin and around the body limiting the body movement, 
the signal will reach the maximum possible value as the skin is 
in full contact with the sensing electrode. This condition will 
not occur as one seldom feels comfortable with such 
placement. We further observe that the human capacitance 
and resistance are quite different for each person and they can 
vary drastically even for the same person. This is because the 
impedances of the sensing and the reference electrode vary 
greatly depending on the environmental temperature, 
humidity, sweatiness, and the activity undertaking. Our 
system thus has to be reinforced with a wide measuring range 
to cover most conditions. We utilize the microcontroller’s 
16-bit digital clock/timer and analog/digital converter to take 
into account individual differences. The charging time is 
counted in a micro second per click basis and it can count 
thousands of times before buffer overflow, with a wide range 
of measurement, which is the key for handling of  the vast 
public. 
 
The full rang of Y-axis of figure 5 is 2.5 times of figure 6,  
such that the curves in figure 6 can still be seen. Generally 
speaking, the amplitudes of the curves in figure 6 is smaller 
than those of figure 5, which can be intepreted that the shirt 
gave lower tension on the shorter ribbon than the rubber band 
on the longer ribbon. By this way, the amplitude of the signals 
from the short ribbon were smaller than the longer one, and we 
can observe that the high frequency nosie in figure 6 is more 
significant than that of figure 5. Nevertheless, the respiration 
rate can be easily determined.  
 
IV. CONCLUSION 
A textile-based capacitive breath-sensing system is 
implemented with only one external resistor, one 
microcontroller, and two electrodes on one belt. This system 
is loosely hung over the body to assure comfort. By counting 
charging time with a microcontroller, the system has a 
measuring range wide enough to cover most of daily activities 
as well as catering to individual/environmental differences. 
The circuit is simple at low cost that has the potential to be 
mass produced as a popular consumer electronic device. 
The pressure between an electrode and skin is absolutely 
the key factor of the system.  Appropriate pressure gives large 
signal amplitude, but it may not be comfortable nor look good. 
However, we conclude that the shirt itself can give enough 
pressure to obtain large enough signal. 
The performance of the system is compared with an 
circumference meter and the results are positive, as expected. 
However, it is not good enough from a clinician point of view. 
In the near future we will verify the system by a spirometer. 
 
REFERENCES 
[1] AAMI TIR4:1989, Apnea monitoring by means of thoracic 
impedance pneumography 
[2] T. H. Kang, “Textile-embedded sensors for wearable 
physiological monitoring system”, PhD dissertation, 
Department Electrical Engineering, North Carolina State 
University, USA, 2006 
[3] C. M. Yang et al., “Textiles digital sensors for detecting 
breathing frequency,” International Summer School and 
Symposium on Medical Devices and Biosensors 2008, pp. 
276 – 279. 
[4] C. M. Yang et al., “Textile-based breath-sensing belt,” 
International Conference on Consumer Electronics 2010, pp. 
11-12. 
[5] C. M. Yang et al., “Breathing game by capacitive textile 
sensor”, International Games Innovation Conference 2011, in 
press. 
[6] J. Muhlsteff and O. Such, “Dry electrodes for monitoring of 
vital signs in functional textiles,” Annual Conf. Eng. in Med. 
the and Bio., 2004. 
 
 2
??????????????????????? 
??? 2011? 9? 17???????????????????????
???????????????????????????????????
???????????????9? 19?????????????? Opening
? 10:30???????????????? 10:30??????? 100????
???????????Sensing and identification in the Internet of thins Era??
??? Queen’s University ?? Hossam Hassanein?????????????
???????????????????????????????????
??????????????? Hossam??? RFID???????????
???????????????????????? 9? 20??? 9???
????????User Centered design for the mobile web??????????
Bell Canada? Diane McKerlie?????????????????????
???????????????????????????????????
???????????????????????????????????
??????????????????????????????????? 
?????????????????????????????????
???????????????? (Canadian A, Canadian B, Victoria and King 
George)??? Canadian A? Canadian B???????? ANT2011????
????Victoria ??? MobiWIS 2011 ??????King George ????
workshops??????????????????????????????
???????????????????? post ????????????
?????? session ????????? ANT ??? 59 ? paper?MobiWIS
??? 23? paper?? workshop paper?? 34??????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
?????????????????????????? 
????????????? 1:30~3:00 ????????? Emerging 
Networks and Sensing Technologies????????????????????
????????????session chair ???????????? Shivakant 
Mishra ??????????? 20~30 ?????????????????
???????????????????????????????????
20 ?????????????????????????????????
???????????????????????????????????
???????? 
 4
???????????????????????????????????
?????????????? 
?? ?? 
?????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
???????????????????????????????????
?????? 
?? ????????? 
?????? 
??????(?????????) 
????????? 
Chih-Ning Huang and Chia-Tai Chan / Procedia Computer Science 5 (2011) 58–65 59
the alarm information about where the person fell is important for caregiver that can reduce the time of finding the 
faller [3]. Nowadays, Global Position System (GPS) provides reliable outdoor location information. Unfortunately, 
the characteristic of line-of-sight transmission causes that the GPS is not workable for in-building location-based 
services. The main technologies of indoor location system include Radio Frequency IDentification (RFID), Wireless 
Local Area Network (WLAN), Bluetooth and ZigBee et al [4]. The advantages of ZigBee such as low cost, high 
scalability, high availability and supporting dynamic routing topology make ZigBee more suitable for indoor 
location system. 
In this paper, we propose a ZigBEe-bAsed indoor loCatiON (ZigBEACON) system for the AmI environment. 
The proposed approach is based on the k-nearest neighbor algorithm which is adopted by the famous RFID-based 
LANDMARC system [5]. Ideally, the path loss distribution of Received Signal Strength Indication (RSSI) conforms 
to the equation of path loss model, but the interference like multi-path delivery would affect the real RSSI’s 
distribution. According to the path loss distribution of RSSI, the RSSI values are defined into four classes. The 
original RSSI value will be adjusted on the basis of different classes that can effectively select the p-nearest 
reference nodes of mobile node by Euclidean distance. Finally, the position of mobile node would be derived by 
calculating the coordinates of p-nearest reference nodes. The ZigBEACON system not only is deployed easily but 
also improve the accuracy of indoor location system. 
The rest content of this paper is organized as follows: Section 2 will introduce the related work of existing 
LANDMARC system and some improved algorithms for LANDMRAC, and then show one example of indoor 
localization in ZigBee WSN. In Section 3, the materials and proposed methodology will be described in detail. 
Section 4 discusses the results of ZigBEACON system and compares the results with that of ZigBee-based 
LANDMARC system. Finally, the conclusions will be listed in Section 5. 
2. Related Work 
Traditionally, indoor location system used the RSSI feature to estimate the distance between two objects or 
establish fingerprinting database. Trilateration is the regular algorithm to calculate the object’s position using at least 
three known reference points. But the environment interference would affect the accuracy severely, like multi-path 
fading, temperature and humidity. In order to avoid these problems, Lionel M. Ni et al. [5] proposed LANDMARC 
system that used real-time RSSI values of fixed reference tags and tracking tag receiving by the fixed RF readers to 
calculate the Euclidian distance between reference tags and tracking tag. The real-time RSSI of all devices suffer 
from the same noise influence so the environmental factors can be accommodated. Then, the LANDMARC system 
chose the k-nearest reference tags to estimate the position of tracking tag. The weights of reference nodes depend on 
the ratio of the square Euclidian distance’s reciprocal, in other words, the shorter Euclidian distance has larger 
weight value. However, the variations of tag behavior and the dynamic indoor environment result in a biased 
estimation. 
Table 1. A comparison of the studies on improving the accuracy of LANDMARC system 
 Euclidean 
distance
Mahalanobis 
distance
Off-line 
learning 
Regional
limit 
Recursive Reduced error  
(comparing with LANDMARC) 
Zhang T et al. [6] Ϥ     0.076~0.344m 
Chen WH et al. [7] Ϥ   Ϥ  0.34m (average) 
Jiang XJ et al. [8] Ϥ    Ϥ 0.3~1m 
Hsu PW et al. [9] Ϥ     0.0871~0.3616m 
Jain S et al. [10] Ϥ   Ϥ Ϥ 0.663~1.049m 
Chen X et al. [11]  Ϥ Ϥ   0.1~0.3m 
Recently, many researches devoted to improving the accuracy of LANDMARC system [6-11] that are listed in 
the Table 1. Based on the methodology of LANDMARC system, most of those researches tried to obtain the 
diversity between reference tags and tracking tag by the Euclidean distance [6-10], but Chen X et al. [11] used the 
Mahalanobis distance to estimate the similarity between an unknown sample set and a known one. But the 
Chih-Ning Huang and Chia-Tai Chan / Procedia Computer Science 5 (2011) 58–65 61
The ZigBEACON system first surveys the RSSI values of the transmitted power and the distance between the 
sender and the receiver, and then uses the Euclidean distance to estimate the diversity of reference nodes and mobile 
node that could effectively choose the p-nearest reference nodes to calculate the mobile node’s position. The 
ZigBEACON system consists of three phases, offline path loss survey phase, real-time RSSI collection phase and 
online position calculation phase, as shown in Figure 1. 
3.2.1. Offline path loss survey phase 
The Path Loss (PL) model that means the relationship between received power and distance is formed as 
    VXddndPLdPL ¹¸
·
©¨
§ 
0
0 log10 ,  (1) 
where n = 2 for free space. The PL(d0) is the received power from the transmitter at a known close distance d0 and 
Xı denotes a zero mean Gaussian random variable that reflect the interference from indoor environment [14]. In 
reality, the real received signal power would not conform to the PL model. In the offline path loss survey phase we 
survey the PL distribution of SuperNode to increase the accuracy of positioning. Figure 2 shows the experimental 
results of RSSI propagation at the distance between 0.5m, 1m, 2m, 3m, 4m, 6m, 7m and 10m separately in the 
indoor environment. For each distance, we took 480 measurements then calculated the means and standard 
variations. We find the PL distribution presents a non-log-linear relationship between RSSI and distance. According 
to the characteristics between RSSI and distance, the RSSI can be divided into four classes: 
x Class I: the RSSI is above 144. Because RSSI value is over 144 within 0.5m transmission distances. In other 
words, the RSSI in this class means the distance between receiver and transmitter is over close.  
x Class II: the RSSI is from 112 to 143. The RSSI versus distance is near linear relationship above 112. Class II is 
the fuzzy region between Class I and Class III that the signal will be shown between 0.5m to 2m. 
x Class III: the RSSI is from 60 to 111. The RSSI in this class will be distributed at the distance from 2m to 7m. 
x Class IV: the RSSI is under 60. When the distance far from 7m and above, the RSSI values rapidly decay under 
to the RSSI value of 60. 
Fig. 2. The path loss distribution of SuperNode 
3.2.2. Real-time RSSI collection phase 
In real-time RSSI collection phase, ZigBEACON system collects the real-time RSSI, and then transmits these 
RSSI value to the computer for the next phase. First, mobile node triggers the real-time RSSI collection phase by 
sending the positioning request to gateway. Then the gateway will ask RF generators by turns to send the broadcast 
message to all reference nodes and mobile node. As soon as mobile node and reference nodes receive the broadcast 
message, they will save the value of RSSI into its memory. After all RF generators sent broadcast message, mobile 
node and reference nodes will forward the RSSI values to gateway. Finally, the location of mobile node will be 
calculated on the computer on the next phase. 
Chih-Ning Huang and Chia-Tai Chan / Procedia Computer Science 5 (2011) 58–65 63
where E’ is the modified Euclidean distance by adjusted RSSI. Equation (5) means the reference node with smallest 
Euclidean distance has largest weight. 
4. Experimental Results and Discussion 
Fig. 3. The deployment and experimental environment 
The experiment is done in a 11m (length) × 5.75m (weight) classroom. As shown in Figure 3, the gateway is at 
the middle and the 18 reference nodes are averagely fixed in the classroom between 2m. Besides, five RF generators 
are set symmetrically between reference nodes. We put mobile node at the coordinates A (1.5, 1.875), B (3.5, 1.875), 
C (5.5, 1.875) and D (7.5, 1.875) respectively. The error distance, e, can show the performance by the mobile node’s 
coordinate (x0, y0) and estimation result (x, y) is defined as 
   2020 yyxxe  .  (6) 
4.1. The number of nearest reference node(s) 
One of the key issues affecting the estimation position is to determine the optimal number p of nearest reference 
node(s) for Equation (4). Figure 4 shows the average, maximum and minimum values of error distance at four 
positions, A, B, C and D, for p is from 1 to 18, and the standard deviations are also shown on the average line. No 
matter it is average, maximum or minimum values of error distance, the smallest error distance occurs when p = 4, 
and it is worthy to note the accuracy results conforms to that of previous studies for LANDMARC methodology 
[5][9]. 
Fig. 4. The error distance v.s. p-nearest reference nodes 
Chih-Ning Huang and Chia-Tai Chan / Procedia Computer Science 5 (2011) 58–65 65
5. Conclusions 
AmI environment have been a trend for future society, and it is an electronic environment that can monitor the 
situation around the persons or objects and give an adequate response for their needs. Accurate location information 
is important for location-based service. The proposed system named ZigBEACON system uses the real time RSSI to 
calculate the mobile node’s position. The system is not only deployed easily but also improves the accuracy of 
indoor location system in the AmI environment. 
In this paper, the proposed ZigBEACON approach alleviates the influence of dynamic indoor environment that 
can effectively calculate the mobile node’s location in real time. The approach not only improves the accuracy, but 
also provides less calculation complexity than other improvement methods of LANDMARC. Comparing the results 
with that of Z-LANDMARC, the proposed methodology reduces about 0.28 to 1.57m estimation error distance and 
has 29% improvement on average error distance. The ZigBEACON approach is an adequate solution to the indoor 
location system for AmI applications. 
Reference 
[1] Emile Aarts, Reiner Wichert. Ambient intelligence. In: Hans-Jörg Bullinger (ed) Technology Guide Principles – Applications – Trends. 
Springer; 2009, pp 244-249 
[2] Schilit B, Adams N, Want R. Context-aware computing applications. Proceedings Workshop on Mobile Computing Systems and Applications;
1994, pp 85-90  
[3] Huang CN, Chiang CY, Chang JS, Chou YC, Hong YX, Hsu SJ et al. Location-aware fall detection system for medical care quality
improvement. Proceedings of the 3rd International Conference on Multimedia and Ubiquitous Engineering; 2009, pp 477-480 
[4] Liu H; Darabi H; Banerjee P; Liu J. Survey of wireless indoor positioning techniques and systems, IEEE Transactions on Systems, Man, and 
Cybernetics, Part C: Applications and Reviews; 2007, 37(6):1067-1080 
[5] Ni LM, Liu YH, Lau YC, Patil AP. LANDMARC: indoor location sensing using active RFID, In: Proceedings of the 1st IEEE International 
Conference on Pervasive Computing and Communications; 2003, pp 407-415 
[6] Zhang T, Chen ZY, Ouyang YN, Hao JY, and Xiong Z. An improved RFID-based locating algorithm by eliminating diversity of active tags 
for indoor environment. The Computer Journal; 2008, 52(8): 902-909 
[7] Chen WH, Chang HH, Lin TH, Chen PC, Chen LK, Hwang SJ et al. Dynamic indoor localization based on active RFID for healthcare
applications: a shape constraint approach, In: Proceeding of the 2nd International Conference on Biomedical Engineering and Informatics;
2009, pp 1-5 
[8] Jiang XJ, Liu Y, Wang XL. An enhanced approach of indoor location sensing using active RFID, In: Proceeding of the WASE International 
Conference on Information Engineering; 2009, pp 169-172 
[9] Hsu PW, Lin TH, Chang HH, Chen YT, Tseng YJ, Hsiao CH et al. Simulations and experiments for optimal deployment of an RFID-based
location-aware system, Wirel Commun Mob Comput; 2009, doi: 10.1002 
[10] Jain S, Sabharwal A, Chandra S. An improvised localization scheme using active RFID for accurate tracking in smart homes, In: Proceeding 
of the 12th International Conference on Computer Modelling and Simulation; 2010, pp 51-56 
[11] Chen X, Wang ZJ. Reliable indoor location sensing technuque using active RFID, In: Proceeding of the 2nd International Conference on 
Industrial Mechatronics and Automation; 2010, pp 160-163  
[12] Maciej M, Karol B, Lukasz K, Krzystof N. Pattern matching localization in ZigBee wireless sensor networks, In: Proceeding of the 18th 
International Conference on Microwave Radar and Wireless Communications; 2010, pp 1-4  
[13] UBEC Corp.(2005) UZ2400 Data sheet (RF + Baseband + Mac) DS 2400-2, pp:79  
[14] Andersen JB, Rappaport TS, Yoshida, S. Propagation measurements and models for wireless communications channels, IEEE 
Communications Magazine; Jan, 1995, 33(1): 42-49 
 2
Support of a Sustainable Future - Opportunities & Challenges”?????M2M
?????????????????????????????????????
????????????????????????????????????
?????????????M2M???????????????????????
????????????????????????????????????
????????????????????????????????????
????????????????????????M2M?????????? 
1. A device or group of devices capable of replying to requests for data contained within 
those devices or capable of transmitting data contained within those devices 
autonomously.?????????????????????? 
2. A communications link to connect the device or group of devices to a computer server 
or another device.???????????????? 
3. A software agent, process, or interface by which the data can be analyzed, reported, 
and/or acted upon.?????????????????? 
4. Software Intelligence.????????? 
?????? M2M????????????????????????????
??????????????????? M2M???????????????
????????????????????????????????????
???????????????? M2M??????????????????
????????????????????????????????????
???????????? IPv6?????????????? IPv6?????
???????????????? 
?? M2M????????????????????????????????
????????????????????????????????????
????????????????????????????????????
?????????????? M2M????????????????? 
????????????????????????????????????
????????????????????????????????????
Packet Classification with Filter Categorization
Pi-Chung Wang
Department of Computer Science and Engineering
National Chung Hsing University
Taichung, TAIWAN 402
Email: pcwang@cs.nchu.edu.tw
Abstract—In next generation networks, routers use the tech-
nique of packet classification to classify incoming packets into
multiple forwarding classes. The classification is based on pre-
defined filters which indicate the requirements of quality of ser-
vice or security handling. To achieve scalable packet classification,
numerous algorithms based on hash tables have been proposed.
These algorithms focus on reducing the number of accessed hash
tables to improve the search performance; however, their perfor-
mance improvement is mainly affected by filter characteristics.
We analyze the search procedures of hash-based algorithms and
propose a scheme of adaptive filter categorization to improve the
search performance. Our scheme stores the filters in different
data structures according to their characteristics. Therefore,
the search performance could be improved by eliminating the
worst cases in previous algorithms. Our scheme is evaluated
with filter databases of varying sizes and characteristics, and
the experimental results demonstrate that our scheme is feasible
and scalable.
I. INTRODUCTION
The problem of packet classification lies in multi-
dimensional range match. To elaborate on the problem, we
define a filter as a set of fields, which in turn corresponds
to another set of fields in the packet header. Each field
could be a variable-length prefix bit-string, a range or an
explicit value. A d-dimensional filter F is thus defined as
F = (f1, f2, . . . , fd). A filter might be any combination of
fields; the most common fields are the source IP address (SA,
32 bits), the destination IP address (DA, 32 bits), the protocol
type (8 bits) and port numbers (16 bits) of source/destination
applications in the packet header. A packet P is said to match
a particular filter F if for all i, the ith field of the header
satisfies fi. Each filter has an associated action. For example,
the filter F = (140.113.∗, ∗, UDP, 1090, ∗) specifies a filter
that addresses a flow belongs to the subnet “140.113. ∗ ” and
uses the progressive networks audio (PNA); the filter may
assign the flow’s packets with high queueing priority. Each
action is usually assigned a cost to define its priority between
the actions of the matching filters. The matching filter with
the least-cost action will be enacted to process the arriving
packets. Overall, the difficulty in packet classification is to
search for this least-cost, matching filter [1].
To tackle the problem of packet classification, a hash-based
data structure, tuple space [2], has been proposed, where each
tuple corresponds to a hash table. The idea of building tuple
space is based on the observation that the number of the
distinct field-length combinations in a filter database is usually
much smaller than the number of the filters. By storing the
filters with specific prefix lengths in a hash table, all the
matching filters can be found by probing each hash table
alternately while tracking the least-cost one [2]. Numerous
algorithms have been proposed to improve the search per-
formance of tuple space by using pre-computation; however,
the performance improvement is greatly affected by filter
characteristics. In this paper, we analyze the search procedure
of tuple-based algorithms and propose a scheme of adaptive
filter categorization to improve the search performance of a
notable tuple-based algorithm, Pruned Tuple Space Search.
With the categorization, our scheme stores filters in different
data structures to improve its search efficiency. We evaluate
the performance of our scheme with filter databases of varying
sizes and characteristics derived from twelve different types of
filter databases. The experimental results demonstrate that our
scheme is feasible and scalable.
The rest of the paper is organized as follows. Section II
addresses related work. The tuple-based algorithms are further
analyzed in Section III. Section IV presents our algorithm and
data structure. Section V explains the experimental setup and
evaluates our scheme in detail. Finally, Section VI concludes
our work.
II. RELATED WORK
We provide a brief discussion on the existing algorithms by
dividing them into two categories according to their methods
of packet classification. The algorithms of the first category
process the multidimensional filters directly; hence, packet
classification is carried out upon a single multidimensional
data structure. The algorithms of the other category decompose
the problem of multidimensional packet classification into
multiple one-dimensional cases. These algorithms start their
search procedures from performing one-dimensional searches
upon individual fields and then combine their results.
Let us begin with the algorithms of the first category
whose search procedures do not perform one-dimensional
searches. Ternary content addressable memories (TCAMs) are
specialized memories which could store entries with arbitrary
bit masks by using an extra “Don’t Care” state in each cell.
TCAMs compare search data against the stored filters and
return the address of the first matching filter. The drawbacks of
TCAMs include their smaller density, greater power dissipa-
tion and extra entries due to range-to-prefix transformation [3].
Much effort has gone into improving the power and storage
efficiency of TCAMs [4], [5], [6]. The algorithms presented in
978-1-4577-0031-6/11/$26.00 ©2011 IEEE ICICS 2011 
the longest list of the probed tuples for each filter. We cate-
gorize the filters whose tuple list is longer than the predefined
threshold value into another filter group. These categorized
filters are then stored in another data structure, which will be
explained later.
To derive the longest list of the probed tuples for each
filter, we construct a binary prefix trie for each field first.
With the prefix tries, each prefix node stores a list of tuples
containing filters that specify the corresponding prefix. Next,
for each prefix pi(F ) of filter F where 1 ≤ i ≤ d,
we generate the set of leaf nodes whose paths from these
leaf nodes to the root node include the prefix node of
pi(F ). The prefix node of pi(F ) is indicated as node(pi(F )).
Since these leaf nodes must be included in the subtrie of
the prefix node of pi(F ), we denote these leaf nodes as
subtrie leaf(node(pi(F ))). The tuple list of node(pi(F )) is
defined as TL(node(pi(F ))). However, this definition is not
enough since a value matching to pi(F ) also matches to the
sub-prefix of pi(F ). Therefore, we use the term, path(pi(F )),
to denote the set of prefix nodes including node(pi(F )) and
the nodes corresponding to the sub-prefixes of pi(F ) and
another term, TL(path(pi(F ))), to show the tuples in the
prefix nodes in path(pi(F )). For each prefix of F , we can
express all the possible tuple lists as TL(path(nodej)), where
nodej ∈ subtrie leaf(node(pi(F ))) and 1 ≤ i ≤ d. The
longest list of the probed tuples for filter F thus has the length,
max probed tuples(F ) = max(‖
d⋂
i=1
TL(path(nodej))‖),
(1)
where nodej ∈ subtrie leaf(node(pi(F ))) and 1 ≤ i ≤ d.
After calculating the number of the maximum probed tuples
for each filter, we could accurately estimate the performance of
Pruned Tuple Space Search in the worst case. Unfortunately,
this approach is not feasible in practice. Since the number of
leaf nodes in subtrie leaf(node) might equal to the number
of filters, our approach needs Nd steps to accomplish the
computation for a filter in the worst case.
To reduce the computation cost, we simplify our compu-
tation that each node, for example, nodej , stores all tuples
which are listed in the prefix nodes of the subtrie rooted at
nodej . For filter F , these tuples can be formulated as
subtrie TL(node(pi(F ))) =
⋃
TL(path(nodej)), (2)
where nodej ∈ subtrie leaf(node(pi(F ))) and 1 ≤ i ≤ d.
With the new tuple list, we could derive the number of the
maximum probed tuples as
max probed tuples(F ) = ‖
d⋂
i=1
subtrie TL(node(pi(F )))‖.
(3)
Apparently, the new approach would overestimate the num-
ber of the probed tuples since some tuples may not appear
in the same set of path(pi(F )) for a given filter F . However,
our experimental results show that this is a reasonable tradeoff
since the computation time can be significantly reduced. The
computation for generating the subtrie tuple lists for all prefix
nodes requires dNW steps and that for performing tuple list
intersection requires d2N‖TS‖ steps.
We compute the number of the maximum probed tuples
for all filters with the new approach. Then, we could use a
predefined threshold value on the number of the maximum
probed tuples to determine which filters should be removed
from tuple space to improve the search performance of Pruned
Tuple Space Search.
After categorizing the filters into different groups, we
consider the data structure for storing the filters removed
from tuple space. Since our approach of filter categorization
removes the filters matching to multiple tuples, each prefix
of these categorized filters usually overlaps with the prefixes
which are specified by many filters and leads to a long
tuple list. Therefore, the removed filters are not suitable for
tuple space search, and we need a different data structure
for storing these filters. In [15], we have presented a new
approach to improving the performance of packet classification
by storing filters with different characteristics into different
data structures. In this work, we also apply this idea to improve
the search efficiency.
Since Pruned Tuple Space Search performs d independent
one-dimensional searches before probing tuples, we consider
the use of the algorithms in the second category as discussed
earlier in Section II. These algorithms include those based on
bit vectors [3], [10] and crossproducting [12], [11]. In this
work, we use the data structures of bit vectors to improve the
performance of our scheme.
The search procedure acts as follows. First, we perform d
one-dimensional searches to derive the best matching prefix
of each field. The tuple list is extracted first, and those tuples
which appear in all tuple lists are probed for a possible filter
match. Next, the complementary data structures are accessed.
The corresponding bit vectors are accessed and intersected to
decide the matching filters.
V. PERFORMANCE EVALUATION
In this section we describe how our algorithm performs on
both real and synthetic databases in terms of its speed and
storage. We use three five-dimensional real databases in [16].
Since the largest real database contains only 1,550 filters, we
also include five-dimensional synthetic databases, which are
generated by a publicly available tool, ClassBench [17], to
test the scalability of our scheme. Each synthetic database
has different characteristics that are extracted from one of the
twelve real databases [17]. Therefore, we can investigate the
performance of packet classification under different circum-
stances or with different devices, such as ISP peering routers,
backbone core routers, enterprise edge routers and firewalls
[17]. We also use ClassBench to generate the tested packet
trace for the designated filter databases.
The performance evaluation consists of three parts. The
first part shows how the threshold value of tuple list length
affects the performance of packet classification. The second
is a performance study that compares the numerical results
TABLE III
SPEED PERFORMANCE OF DIFFERENT THRESHOLD VALUES.
Filter Tuple BV
Databases Threshold AHA WHA AMA WMA
ACL1 4 0.78 3 26.24 37
8 1.36 9 22.27 37
16 4.16 15 20.01 34
32 4.48 17 23.22 35
64 4.65 18 18.41 31
128 4.65 18 18.41 31
FW1 4 0.00 0 17.72 25
8 0.00 0 17.72 25
16 0.00 0 17.72 25
32 0.00 0 17.72 25
64 0.08 1 16.78 25
128 2.86 42 16.15 62
IPC1 4 0.31 3 21.48 40
8 1.06 7 21.49 35
16 2.51 9 21.77 33
32 3.45 13 19.04 33
64 4.62 20 19.33 34
128 6.42 24 20.25 39
different threshold values are summarized in Table II and III,
respectively. For the following results, the required storage is
measured in kilobytes. The speed performance metrics include
the numbers of hash accesses in the average case (AHA) and
the worst case (WHA), and the numbers of memory accesses
in the average case (AMA) and the worst case (WMA). When
the threshold values increase, the required storage for bit
vectors decreases since there are fewer categorized filters. If
the threshold value is smaller than the minimum length of the
tuple list, all filters are stored in tuple space (for example, the
threshold values from 4 to 32 for FW1). If the threshold value
is larger than the maximum length of tuple list, all filters are
categorized, which results in an empty tuple space. We note
that, while storing filters in bit vectors, memory accesses to
the bit vectors would dominate the overall search performance
since d bit vectors must be accessed simultaneously. When
the threshold value increases, the speed performance of our
scheme with bit vectors improves since the number of the
categorized filters decreases.
VI. CONCLUSION
In this paper, we present an algorithm of adaptive filter cate-
gorization to improve the performance of Pruned Tuple Space
Search, which has superior scalability in terms of storage
performance and supports incremental updates. However, its
search performance is unpredictable which makes it infeasible
to real-world applications. To improve the performance of
Pruned Tuple Space Search, we analyze its search procedure
and derive the length of the probed tuple list for each filter.
Then, we select and store the filters whose tuple list lengths are
larger than a predefined threshold value in a complementary
data structure, bit vectors. Our performance evaluation shows
that our scheme could benefit from the data structures of
bit vectors. The experimental results further demonstrate that
our scheme has superior performance. We believe that the
applications of next generation networks can benefit from our
algorithm to provide end users with better network experience.
ACKNOWLEDGMENT
This work was supported in part by NSC under grant 99-
2221-E-005-015 and 99-2218-E-241-001.
REFERENCES
[1] D. E. Taylor, “Survey and taxonomy of packet classification techniques,”
ACM Computing Survey, vol. 37, no. 3, pp. 238–275, 2005.
[2] V. Srinivasan, G. Varghese, and S. Suri, “Packet classification using tuple
space search,” in Proceedings of ACM SIGCOMM ’99, September 1999,
pp. 135–146.
[3] F. Baboescu and G. Varghese, “Scalable packet classification,” in Pro-
ceedings of ACM SIGCOMM ’01, August 2001, pp. 199–210.
[4] J. van Lunteren and T. Engbersen, “Fast and scalable packet classifi-
cation,” IEEE Journal on Selected Areas in Communications, vol. 21,
no. 4, pp. 560–571, May 2003.
[5] K. Lakshminarayanan, A. Rangarajan, and S. Venkatachary, “Algorithms
for advanced packet classification with ternary cams,” in SIGCOMM
’05: Proceedings of the 2005 conference on Applications, technologies,
architectures, and protocols for computer communications. New York,
NY, USA: ACM, 2005, pp. 193–204.
[6] H. Liu, “Efficient mapping of range classifier into ternary-cam,” in Hot
Interconnects X, August 2002, pp. 95–100.
[7] P. Gupta and N. McKeown, “Packet classification using hierarchical
intelligent cuttings,” in Proceedings of Hot Interconnects VII, August
1999.
[8] T. Woo, “A modular approach to packet classification: algorithms and
results,” in Proceedings of IEEE INFOCOM ’00, March 2000, pp. 1213–
1222.
[9] G. V. Sumeet Singh, Florin Baboescu and J. Wang, “Packet classification
using multidimensional cutting,” in Proceedings of ACM SIGCOMM ’03,
August 2003, pp. 213–224.
[10] T. Lakshman and D. Stidialis, “High-speed policy-based packet forward-
ing using efficient multi-dimensional range matching,” in Proceedings
of ACM SIGCOMM ’98, September 1998, pp. 203–214.
[11] V. Srinivasan, G. Varghese, S. Suri, and M. Waldvogel, “Fast and
scalable layer four switching,” in Proceedings of ACM SIGCOMM ’98,
September 1998, pp. 191–202.
[12] P. Gupta and N. McKeown, “Packet classification on multiple fields,” in
Proceedings of ACM SIGCOMM ’99, September 1999, pp. 147–160.
[13] P.-C. Wang, C.-L. Lee, C.-T. Chan, and H.-Y. Chang, “Performance im-
provement of two-dimensional packet classification by filter rephrasing,”
IEEE/ACM Transactions on Networking, vol. 15, no. 4, pp. 906–917,
2007.
[14] P.-C. Wang, C.-T. Chan, S.-C. Hu, C.-L. Lee, and W.-C. Tseng, “High-
speed packet classification for differentiated services in ngns,” IEEE
Transactions on Multimedia, vol. 6, no. 6, pp. 925–935, 2004.
[15] P.-C. Wang, “Scalable packet classification with controlled cross-
producting,” Computer Networks, vol. 53, no. 6, pp. 821–834, 2009.
[16] H. Song, “Design and evaluation of packet classification systems,” Ph.D.
dissertation, Dept. of Computer Science and Engineering, Washington
University, 2006.
[17] D. E. Taylor and J. S. Turner, “Classbench: a packet classification
benchmark,” in Proceedings of IEEE INFOCOM ’05, March 2005, pp.
2068–2079.
 2
??? 
 
?????? 
BHI 2012????????????????????????????????
??????????????Global Grand Challenge of Health Informatics??  
????????????????????????????????????
????????????????????????????????????
????????????????????????????????????
????????????????????????????????????
????????????(MISSIoN)???????????????????
????????????????????????????????????
????????????????????????????????????
????????????????????????????????????
????????????????????????????????????
?? 
 
????????(???????) 
?????????????????????????????????? 
1.????????? 
2.????????? 
3.???????????? 
???????????????????????????: 
????????????????????????????????????
????????????????????????????????????
??????????????? 
  
 
Abstract— A novel wearable physiological monitoring system is 
presented in this paper. The related signal and noise 
characteristics obtained by the system under electromagnetic 
and body motion interferences are analyzed and the 
performance of the active electrode circuit is assessed. It is 
concluded that the active electrode can eliminate the noise 
caused by electromagnetic interference significantly, but has less 
effect on body motion interference. 
I. INTRODUCTION 
CG is one of the most frequently used monitoring signals 
in health care. Traditional ECG devices need wires and 
widely used physiological electrodes with Ag/AgCl interface 
and conductive gel to get high quality signals. However, these 
wires and electrodes will make the users feel uncomfortable 
and constrain the users’ daily activities. To solve this problem, 
several textile-based ECG devices without using conductive 
gel have been proposed [1] [2]. Compared with physiological 
electrodes, dry electrodes give higher drift and impedance [3] 
and worse performance. Nevertheless, by means of several 
circuit or digital signal processing techniques [4], the dry 
electrode can still be used to record cardiac rhythms. 
Active electrode is frequently used to decrease the external 
electromagnetic interference, particularly 50 or 60 Hz 
humming from AC power lines [6]. As to a wearable 
physiological monitoring system, active electrodes can 
eliminate humming effectively. Besides, owing to the rapid 
progress of microelectronics and package technologies, active 
electrode circuit can be miniaturized as small as a button such 
that it can be easily installed on clothes with comfort, 
nice-looking, and durability against washing. 
On the other hand, the environment of the wearers with 
wearable physiological monitoring system may not be under 
good control as in hospitals. The device may be used indoor or 
outdoor with temperature and humidity variations, which 
change the impedance between the electrode and skin. 
Wearers may be in a place with high electromagnetic 
interference from AC power lines (50 or 60 Hz) or mobile 
phones (1.8 to 2.4 GHz). Besides, motion artifact caused by 
daily activities will also change the impedance between the 
wearable electrode and skin. These factors can affect the 
performance of active electrode applied in a wearable 
physiological monitoring system. The aim of this study was to 
 
Manuscript received October 14, 2011.  
C. M. Yang, T. L. Yang, C. C. Wu are with 3H Technology Corp., Shenzhen, 
China, C.C. Wu is the correspondent author, phone: 86-755-22678258, 
fax:86-755-22678658, e-mail:chihchungwu@163.com 
T. Kao is with Department of Biomedical Engineering, Hungkuang 
University, Shalu, Taichung, 43302, Taiwan.  
compare ECG signals recorded in a wearable physiological 
system with or without active electrodes in homecare. 
II. MATERIALS AND METHOD 
1 Configuration of the wearable physiological system  
In our previous study, a wearable heart function monitoring 
system for daily life was implemented for continuous 
acquisition of ECG, in which the textile-based wearable 
electrodes without conductive gel were used [7]. In the present 
study several modifications have been made. As shown in 
Fig.1, the material of the shirt is 95% cotton and 5% Lycra to 
give about 60 g force on the electrode such that the wearer 
does not feel uncomfortable. The wearable electrode is made 
up of silver yarn cloth stuffed with a foam pad of 2×4 cm2 to 
make large contact area for good skin contact. The electrode is 
placed below the armpits where less affected by body motion. 
The active electrode circuits (Fig. 2) are located near to 
wearable electrodes and their outputs are connected to the 
circuit box via conducting wires stitched on the shirt.  
The active electrode circuit is comprised of two buffer 
amplifiers to transform the high impedance of the wearable 
electrode into low impedance. The resistors and diodes are 
used to protect the buffer amplifiers from electrostatic 
discharge. For better looking, the conducting wires are 
stitched in between the front panel and the back panel where 
both panels are connected together. It is thus designed because 
we consider that the main goal of the system is to detect the 
cardiac rhythms. The active electrode circuit is implemented 
on a round printed circuit board (Fig. 3) and encapsulated and 
sealed with epoxy resin inside an aluminum dome button of 12 
mm in diameter. The whole dome is stitched closed by the 
electrode to protect the circuit board from force and water 
while washing.   
 
2 Circuit box and display program in personal computer 
The instrumentation amplifier inside the circuit box 
subtracts both inputs from electrodes to reject common-mode 
noise to pick up the ECG signals, then a 1~40 Hz fourth-order 
Butterworth band pass filter to eliminate motion artifact and 
electromagnetic interference by AC power line. A 
microcontroller then digitizes the filtered signal by an 8-bit 
analog-to-digital convector with 250 Hz sampling rate and 
transmits it via Bluetooth wireless communication module. To 
truly display both the signal and noise, no filter is 
implemented in the firmware and displaying program. 
Performance assessment of active electrode applied in 
wearable physiological monitoring system 
Chang-Ming Yang, Tsair Kao, Tzu-Lin Yang, Chih-Chung Wu 
E 
  
 
     
Fig.7 ECGs for four kinds of activities: standing still, jogging, 
jumping and walking. 
  
 
 
 
 
 
Table 2 Y/X under body motion interference 
 Standing still jogging jumping walking 
a 5.6 4.5 4.0 5.0 
b 5.0 4.5 3.2 4.9 
c 7.0 4.7 3.6 6.2 
d 5.7 6.0 4.7 5.4 
 
a: physiological electrode, without active electrode circuit. 
b: physiological electrode, with active electrode circuit. 
c: wearable electrode, without active electrode circuit. 
d: wearable electrode, with active electrode circuit. 
 
 
IV. CONCLUSION 
In our wearable physiological monitoring system, the active 
electrode circuit can decrease the AC power line interference 
but not the body motion interference. From system point of 
view, although body motion may distort the ECG signals, 
nevertheless the R peaks can still be identified. 
Considering the significant ongoing development of 
microelectronics technology, it is hopefully expected that the 
active electrode will be widely applied in wearable 
physiological monitoring systems. However, considering the 
wearers may be in an environment which is quite different 
from a hospital, we will run more comprehensive and actual 
environmental tests to verify the reliability of the active 
electrodes. 
REFERENCES 
[1] E.P Scilingo, A Gemignani, R. Paradiso, N Taccini, B Ghelarducci and D. 
De Rossi, “Performance Evaluation of Sensing Fabrics for Monitoring 
Physiological Variables.” IEEE Trans Inf Technol Biomed, 9(3):345-52, 
2005. 
[2] M. Catrysse, R Puers, C. Hertller, L. Van Langenhove, H. Van Egmond 
and D. Matthys, “Towards the integration of textile sensors in a wireless 
monitoring suit.” Sensors and Actuators A: Physical, 114(2-3): 302-311, 
2004. 
[3] R. Rich and M. R. Neuman, "Preliminary Clinical Evaluation of a 
Miniature Dry Surface Electrode for Obtaining Heart Rate of Infants." 
Twenty ninth Annual Conference on Engineering in Medicine and 
Biology, 18: 329, Boston, MA, USA, November, 1976. 
[4] M. Burke and D. Gleeson, “A Micropower Dry-Electrode ECG 
Preamplifier.” IEEE Trans Biomed Eng, 47(2):155-62, 2000.  
[5] K. Heilman and S. Porges, “Accuracy of the LifeShirt® (Vivometrics) in 
the detection of cardiac rhythms”, Biol Psychol, 75(3): 300–305, 2007. 
[6] T. Kang, “Textile-Embedded Sensors for Wearable Physiological 
Monitoring Systems,” Ph.D. dissertation, Dept. Electrical Engineering, 
North Carolina State University, 2006. 
[7] C.M. Yang, T. Kao, T.L. Yang and C.C. Wu, “A Wearable Heart 
Function Monitoring System for Daily Life.” 1st IEEE EMBS 
Unconference on Wearable & Ubiquitous Technology for Health & 
Wellness, Boston, MA, USA, August 30, 2011. 
 
  
the charging end to charge the human capacitor. When the 
voltage on the sensing electrode rises to a pre-determined 
threshold, the microcontroller switches the charging end to 
logic “0” to discharge the human capacitor. Thus the 
microcontroller can obtain continuous digital data of charging 
time, which reflects the breathing movement similar to that 
gathered from the IP. The microcontroller then outputs the 
charge time data via a Bluetooth wireless communication 
module to a computer operating with LabVIEW®  for display 
and further analysis. To obtain breathing profiles, one 
breath-sensing belt is placed on the abdomen and the other on 
the chest, as shown in Figure. 5. 
(a)                                               (b) 
      
(c) 
 
Fig.3 (a)Forced exhaling, (b)Natural breathing, (c)Forced 
inhaling 
 
At the first stage of our study, the sensing electrodes were 
installed on a flexible but not extendable ribbon belt that 
almost covered the whole body, and then a 10 cm long rubber 
band was connected to the ribbon belt to give appropriate 
tension on the belt, as shown in figure 3. However, it looked 
not so good and felt not so comfortable. Hence, we installed 
the sensing electrodes on a 15 cm long ribbon belt and then the 
belt was stitched on the shirt, which gave tension on the belt, 
as shown in figure 4 
 
          
Fig. 4 (left) electrodes installed on a shorter ribbon; 
(right) Comparing with an circumference meter 
 
 
To verify the performance of our system, we compare its 
output with a hand-made circumference meter, which is based 
on a multi-turn precision potential meter and an amplifier. The 
output of the circumference meter is transmitted to the 
microcontroller, shown in Fig.1, such that we can obtain data 
simultaneously. 
III. RESULTS AND DISCUSSION 
 Thoracic Abdominal 
Natu
ral  
 
 
Enfo
rced  
 
 
Walki
ng 
 
 
Lying 
 
 
Fig.5 Breathing curves under different conditions by longer 
ribbon 
 
 Natural Breathing Enforced Breathing 
Sitt
ing 
 
 
Wal
kin
g 
 
 
Lyi
ng 
 
 
Ru
nni
ng 
 
 
Sta
ndi
ng 
 
 
Fig.6 Abdominal breathing curves under different conditions 
by shorter ribbon  
 
The first and second rows of Figure 5 show the breathing 
profiles while sitting, where the thoracic and abdominal 
breathes are measured and displayed. The tension of the belt is 
set low as the belt lightly touches the user’s skin. When the 
user stands up to walk, as shown in the third row of Fig. 5, the 
baselines of both profiles go down to almost undetectable 
國科會補助計畫衍生研發成果推廣資料表
日期:2012/05/01
國科會補助計畫
計畫名稱: 加值化無線ZigBee醫療居家健康照護系統之整合開發(3/3)
計畫主持人: 高材
計畫編號: 99-2218-E-241-001- 學門領域: 無線感測器網路技術
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
邀請香港中文大學 The Chinese University of Hong Kong 張元亭(Yuan-Ting 
Zhang)教授，於 100 年 11 月 30 日至 100 年 12 月 03 日來台訪問。100.12.01 於
台北市舉行海峽兩岸遠距健康照護研討交流會，100.12.02 於台中市弘光科技
大學舉辦穿戴式生醫訊號量測技術研討會，推廣本計畫所研發之技術。 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
