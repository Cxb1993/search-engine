 1
需求分割之車輛路線問題啟發式解法研究 
1. 前言 
本研究探討的主題為「分割配送之車輛路線問題」(split delivery vehicle routing problem, 
SDVRP)，不同於傳統的 VRP，SDVRP 允許每個顧客的需求可分割由若干不同車輛路線予以
服務。SDVRP 由於放鬆 VRP 中「顧客需求不可分割」的條件，因此在其他條件相同下，SDVRP
必可求得較 VRP 更小或至少相同成本的解答。文獻上最先探討 SDVRP 較 VRP 節省成本效益
的是由 Dror 與 Trudeau[10]於 1989 年提出。 [3]於 2005 年證明 SDVRP 較 VRP 最多可以節省至
50%的距離成本。且 Archetti 等人[5]於 2008 年證明允許分割配送時使用的車輛數目最多可以
節省一半。圖 1 示意 SDVRP 的節省。假設各顧客需求為 10，車容量為 15。圖 1(a) 顯示 VRP
的求解結果，由於車容量限制使得每輛車只能服務一個顧客，因此完成所有服務需使用 12 輛
車。然而，SDVRP 求解時允許需求可分割配送，因此僅需要 8 台車便能夠服務完所有需求。 
 
圖 1 SDVRP 節省之示意圖：(a) VRP 求解結果以及 (b) SDVRP 求解結果 
(資料來源: Aleman 等人[1] ) 
SDVRP 容許需求的分割配送對消費者會造成不便，但對企業供應鏈或第三方物流公司的
內部物流，具有極大的節省成本之潛在效益。目前 SDVRP 之研究尚不如傳統 VRP 成熟，且
若干新近方法局限在平面直線距離的問題求解，不易直接應用於實務上的路網距離問題。因
此，進一步研究 SDVRP 求解方法，對實務之物流配送成本改善具有其重要之意義。 
2. SDVRP 啟發式求解方法之回顧 
Archetti 等人[2]於 2005 年證明 SDVRP 為 VRP 的衍生問題，在複雜度上還是屬於 NP-hard
之問題，因此其求解之方法仍以啟發式法為主，關於精確解法的相關文獻則可參考 Aleman
等人[1]發表之文章。Dror 與 Trudeau[10]於 1989 年首先提出 SDVRP 問題並以兩階段啟發式方
法求解。首先，作者以類似節省法的程序構建一個傳統的 VRP 起始路線後，接以路線間 1-0、
1-1 及路線內 Or-opt 區域搜尋法進行改善。隨後，利用其針對需求分割特性所設計之「k-split 
交換法」與「route addition」兩種改善機制加以改善求解，產生具分割配送特性的 SDVRP 解。
Archetti 等人[4]於 2006 年提出 SPILTABU 巨集啟發式方法求解 SDVRP。首先構建一個 TSP
的巨網 (giant tour)，再依車容量分割成一個沒有分割配送的 VRP 起始解。產生起始解後，再
以 k-split 交換法與 route addition 兩種區域搜尋機制[10]搭配禁制搜尋法的巨集指導原則反覆求
 3
開始
結束
SRC 起始解構建模組
Solution
VND 變動鄰域尋優模組
2-opt
Or-opt
2-opt**
Ejection-chain*
 
圖 2  SRC + VND 求解架構圖 
步驟 4. 新增路線：考慮新增一條路線 0-j-0 以及其路線成本為 RC。如果 RC < IC，則新增
一條路線 m (0-j-0)；更新 R1 = R1∪{m}，N1\{j}並且至步驟 7。否，則繼續。 
步驟 5. 插入顧客：將顧客點 j 插入路線 k 中可行且成本最小的位置，並設定 N1\{j}。  
步驟 6. 顧客點移除：檢查路線 k 是否超載；是，則先計算超載量 q，然後在路線 k 中尋找一
個顧客點 p，p 為需求量大於等於 q 且與場站距離最接近者。將顧客點 p 於路線 k 中
移走需求量 q，並更新 N1 = N1∪{p}。檢查路線 k 是否為滿載；是，則將路線 k 由 R1
集合移至 R2;否，則繼續。 
步驟 7. 停止法則：若 φ=1N , 則停止構建;最後的解則為 21 RR ∪ 。否，則回到步驟 3。 
SRC 起始解構建模組因包含 SRC_n 與 SRC_f 兩種不同的起始解，為具有「多重起點」機
制的起始解構建方法。 
VND 區域搜尋模組中所使用的啟發式區域搜尋法除包含求解傳統 VRP 問題時常見的
2-opt 與 Or-opt 兩種路線內的區域改善法外，VND 改善模組的主要特色是本研究新設計的
2-opt**與 Ejection-chain*兩種路線間交換法，分述如下：  
2-opt**區域搜尋法為傳統的 2-opt*區域搜尋法[13]的延伸。主要是應用於求解改善具時窗
限制的 VRP。Ho 與 Haugland[12]於 2004 年將 2-opt*延伸應用於求解 SDVRP。但因為 2-opt*
在設計的最初是用來改善具有時間窗限制的問題，因此在搜尋時是不考慮任何需要反轉路線
方向的鄰解 (由於反轉路線方向容易使得具時窗限制之問題產生不可行解)。不過，這樣的特
殊搜尋方式在無時窗的問題應用時是可以被放鬆的。 
本研究提出的 2-opt**區域搜尋法是屬於路線間的一種啟發式交換法，除考慮了原本 2-opt*搜
尋的鄰解外，也考慮需要反轉路線方向的鄰解。圖 3 為 2-opt**區域搜尋法示意圖。圖 3(a)為
傳統 2-opt*所考慮的交換改善方式，圖 3(b)則為 2-opt**額外考慮的交換改善方式，因此 2-opt**
會產生一個較傳統 2-opt*更大的鄰域解空間。在利用 2-opt**區域搜尋法進行搜尋改善時，若
發生鄰解中單一條路內有兩個需求量來自於同一位顧客點。本研究將選擇節省成本較多的方
式進行兩需求量的合併。 
 5
線上已有其他需求量屬於同一個顧客則插入方式為將兩需求合併；反之，則選擇最節省成本
的位置插入。Ejection-chain*區域搜尋法能夠綜合考慮多個不同的移動方式而創造出較大的搜
尋鄰域範圍，其中會包括 Aleman 等人[1]提出的 shift (1-0 exch ange), swap (1-1 exchange), shift*
以及 Ho 與 Haugland[12]提出的 relocate split 等區域搜尋法。 
VND 變動鄰域尋優模組內所使用的鄰域順序依序為：2-opt, Or-opt, 2-opt** 最後為 
Ejection-chain*。最後以兩種不同起始解改善後較佳的答案做為最後的求解結果。 
4. 求解結果與分析 
本研究是以 C#程式語言進行演算法撰寫，執行環境的 OS 為 Windows XP，CPU 為 3.01 
GHz AMD 以及 3.25 GB 的 RAM。並以兩組國際標竿題庫，共 57 題例題作為測試所提出之
SDVRP 啟發式方法的求解效果。第一個題庫是由 Chen 等人[8]所提出之 21 題測試例題。該題
庫中顧客數範圍為 8-288 個，所有車容量限制皆為 100。第二個題庫是由 Derigs 等人[9]於 2010
年所測試之 36 題 Archetti 等人[6]的題庫。該題庫中顧客數為 50-120，車容量為 140-200。搭
配 6 組不同的需求擾動上下限參數 α及 β值，可將 36 題例題分為 6 組子題庫。需求擾動的公
式為[αQ, βQ]，Q 為該例題對應之車容量。 
本研究提出之 SRC + VND 含有簡單的「多重起點」概念。在起始解構建模組分別以 SRC_n
與 SRC_f 產生兩組不同的起始解後，以 VND 進行改善。SRC_n + VND 與 SRC_f + VND 這兩
種不同的起始解求解結果的比較，就 57 個測試例題的整體平均誤差而言，分別為 3.02%與
2.77%，並無太大的差異。但再以個別例題為基準進行比較，則可發現兩種不同起始解在 57
題例題中卻有 11 題的兩種結果差距大於 1%。顯示 SRC_n + VND 與 SRC_f + VND 有相當程
度的互補效果。在運算時間方面，兩種構建方式也極為快速，平均單題的運算時間分別為 0.7
秒與 0.73 秒。有關 SRC_n 與 SRC_f 兩個不同的起始解加上 VND 求解 57 題標竿題例的完整
結果請參考附錄 A。 
鑒於本研究提出演算法的高效率與兩種起始解的互補效果，本研究以 SRC_n + VND 與
SRC_f + VND 兩者中較佳的答案做為 SRC + VND 的最後結果，運算時間的計算則為兩種不同
起點求解運算的時間總和，其結果詳見表 1。表 1 中 57 題例題的前 21 題 (SD1 - SD21) 為
Chen 等人[8]之標竿題庫，其餘 36 題為 Archetti 等人[6]的題庫例題。例題部分，n 為顧客點數。
結果部分，Z 為求解結果，Dev 則為 Z 與文獻已知最佳解的誤差率，粗體字表示突破以及求
得文獻最佳解的結果，Time (sec) 為求解運算時間。由表 1 得知，在 Chen 等人[8]題庫中，SRC 
+ VND 在例題 SD10 與 SD18 求得突破目前已知最佳解的結果，並於例題 SD1、SD3 與 SD7
求得平最佳解的結果。Derigs 等人[9]所測試之 36 題例題中，SRC + VND 在 p05 (α = 0.1, β = 0.9) 
以及 p05 (α = 0.7, β = 0.9) 兩題求得突破目前已知最佳解的結果。SRC + VND 求解兩組題庫
的平均誤差分別為 1.73%與 2.51%，而 57 題的整體平均誤差為 2.22%。57 題標竿題庫的平均
單題運算時間為 1.42 秒，且各題皆能夠在 9.35 秒內求得答案。 
由表 1 可以發現到兩個現象。首先，SRC + VND 求解顧客越多的問題效果越好，特別是
顧客點數大於 100 的例題。例如，SD14 到 SD21 題與已知最佳解的誤差僅僅只有 0.7%。而在
小於 50 點的例題，例如 SD1 到 SD9 題的平均誤差為 2.94%。除此之外，由表 1 中亦可觀察
到 SRC + VND 求解顧客需求量越大的問題效果越好。例如 Derigs 等人[9]所測試之 36 題例題
中，除了第一個子題庫外，另外的五個子題庫的顧客需求量受到參數(α, β)的影響，呈現遞增
的趨勢。在平均誤差表現上五組子題庫隨著需求的增加呈現遞減的趨勢，依序為 3.28%、
2.62%、2.02%、1.79%以及 0.98%。  
 7
5. 結論與建議 
SDVRP 是考慮容許需求分割的車輛路線問題，本研究提出三種針對需求分割特性設計的
啟發式演算法，其中包含了 SRC 起始路線構建法、2-opt**區域搜尋法與 Ejection-chain*區域
搜尋法。SRC 起始路線構建法是一套以區域搜尋為基礎，利用插入以及新增路線的方式進行
構建的啟發式方法。不論是直線或是格子路網都能夠運用 SRC 來構建一個可行的起始路線。
2-opt**延伸了 2-opt*的概念，額外考慮路線反轉的鄰域，使得搜尋時能夠考慮更大的範圍。
Ejection-chain*則考慮同一時間多點移動的連續交換方式，其中的移動包括了 Aleman 等人[1]
提出的 shift、swap 以及 shift*區域搜尋法，和 Ho 與 Haugland[12]提出的 relocate split。 
本研究利用 SRC 產生一個可行的起始解後，運用 VND 加以改善求解。在 57 題標竿題庫
中共突破 4 題文獻最佳解，另亦求得 3 題現有已知最佳解。平均單一題求解的時間僅需要 1.42
秒的 CPU 時間。由此可知，在未來 SDVRP 求解方法若能運用本研究提出的啟發式方法搭配
其他巨集啟發式策略，是極具潛力再創更佳的成果。 
 
參考文獻 
1. Aleman, R.E., X. Zhang and R.R. Hill (2010), “An adaptive memory algorithm for the split 
delivery vehicle routing problem,” Journal of Heuristics, Vol. 16, No. 3, pp. 441-473.  
2. Archetti, C., R. Mansini and M.G. Speranza (2005), “Complexity and reducibility of the skip 
delivery problem,” Transportation Science, Vol. 39, No. 2, pp. 182-187. 
3. Archetti, C., M.W.P. Savelsbergh and M.G. Speranza (2006), “Worst-case analysis for split 
delivery vehicle routing problems,” Transportation Science, Vol. 40, No. 2, pp. 226–234. 
4. Archetti, C., A. Hertz and M.G. Speranza (2006), “A tabu search algorithm for the split 
delivery vehicle routing problem,” Transportation Science, Vol. 40, No. 1, pp. 64–73. 
5. Archetti, C., M.W.P. Savelsbergh and M.G. Speranza (2008), “To split or not to split: That is 
the question,” Transportation Research Part E, Vol. 44, No. 1, pp. 114-123. 
6. Archetti, C., M.G. Speranza and M.W.P. Savelsbergh (2008), “An optimization-based heuristic 
for the split delivery vehicle routing problem,” Transportation Science, Vol. 42, No. 1, pp. 
22-31.  
7. Boudia, M., C. Prins and M. Reghioui (2007), “An effective memetic algorithm with 
population management for the split delivery vehicle routing problem,” in Bartz-Beielstein, T., 
M.J.B. Aguilera, C. Blum, B. Naujoks, A. Roli, G Rudolph. and Sampels (Eds.) M., HM, 
LNCS, Vol. 4771, Springer, Berlin, pp. 16–30. 
8. Chen, S., B. Golden and E. Wasil (2007), “The split delivery vehicle routing problem: 
Applications, algorithms, test problems, and computational results,” Networks, Vol. 49, No. 4, 
318–329.  
9. Derigs, U., B. Li and U. Vogel (2010), “Local search-based metaheuristics for the split 
delivery vehicle routing problem,” Journal of the Operational Research Society, Vol. 61, No. 9, 
pp. 1356-1364. 
10. Dror, M. and P. Trudeau (1989), “Savings by split delivery routing,” Transportation Science, 
Vol. 23, No. 2, pp. 141–145.  
 9
附表 A. 兩種起始解求解結果與比較 
例  題 已知最佳解 SRC_n + VND SRC_f + VND 
題名 n α β NV Z NV Z Dev (%) Time (sec) NV Z Dev (%) Time (sec)
SD1 8 － － 6 228.28 6 256.57 12.39 0.03 6 228.28  0.00  0.01 
SD2 16 － － 12 708.28 12 764.85 7.99 0.01 12 765.76  8.12  0.01 
SD3 16 － － 12 430.58 12 477.13 10.81 0.01 12 430.58  0.00  0.01 
SD4 24 － － 18 631.05 18 673.87 6.79 0.01 18 666.50  5.62  0.02 
SD5 32 － － 24 1390.57 24 1431.41 2.94 0.03 24 1468.31  5.59  0.02 
SD6 32 － － 24 831.21 24 867.96 4.42 0.02 24 864.94  4.06  0.03 
SD7 40 － － 30 3640.00 30 3640.00 0.00 0.04 30 3660.00  0.55  0.05 
SD8 48 － － 36 5068.28 37 5217.25 2.94 0.04 37 5237.39  3.34  0.03 
SD9 48 － － * 2059.84 36 2119.21 2.88 0.06 36 2120.51  2.95  0.04 
SD10 64 － － 48 2747.83 48 2739.60 -0.30 0.11 48 2737.95  -0.36  0.11 
SD11 80 － － 60 13280.00 61 13500.00 1.66 0.15 61 13650.29 2.79  0.16 
SD12 80 － － 60 7220.36 61 7276.24 0.77 0.29 61 7276.24  0.77  0.29 
SD13 96 － － 72 10110.58 72 10332.44 2.19 0.43 72 10332.44 2.19  0.43 
SD14 120 － － 90 10790.58 90 10959.77 1.57 0.44 90 10902.76 1.04  0.49 
SD15 144 － － 108 15152.88 108 15350.20 1.30 0.81 108 15335.39 1.20  0.86 
SD16 144 － － 108 3381.29 108 3384.75 0.10 0.61 108 3409.89  0.85  0.62 
SD17 160 － － 120 26536.06 120 27068.38 2.01 0.87 120 26979.28 1.67  0.93 
SD18 160 － － 120 14440.59 120 14403.46 -0.26 0.98 120 14388.22 -0.36  1.19 
SD19 192 － － 144 20191.19 144 20420.18 1.13 1.47 144 20206.77 0.08  1.60 
SD20 240 － － 180 39813.49 180 40366.84 1.39 2.11 180 40292.69 1.20  3.10 
SD21 288 － － 216 11271.06 216 11345.79 0.66 4.73 216 11341.68 0.63  4.62 
p01 50 － － 5 524.61  5 571.11 8.86 0.04 5 549.85  4.81 0.03
p02 75 － － 10 823.89  10 861.10 4.52 0.13 10 869.94  5.59 0.16
p03 100 － － 8 826.14  8 860.26 4.13 0.28 8 853.81  3.35 0.32
p04 150 － － 12 1028.42 12 1063.54 3.41 0.72 12 1088.46  5.84 0.93
p05 199 － － 16 1296.66 16 1420.82 9.57 1.14 16 1403.06  8.21 0.88
p11 120 － － 7 1042.12 7 1060.63 1.78 0.25 7 1203.54  15.49 0.34
p01 50 0.1 0.3 11 758.20  11 780.02 2.88 0.05 11 783.84  3.38 0.06
p02 75 0.1 0.3 16 1116.75 16 1188.09 6.39 0.09 16 1150.93  3.06 0.22
p03 100 0.1 0.3 22 1472.53 22 1539.78 4.57 0.32 22 1544.19  4.87 0.36
p04 150 0.1 0.3 32 2037.00 32 2104.66 3.32 0.80 32 2101.40  3.16 0.64
p05 199 0.1 0.3 42 2528.82 41 2649.40 4.77 0.97 41 2582.47  2.12 1.28
p11 120 0.1 0.3 26 2907.39 26 3021.02 3.91 0.45 26 3076.00  5.80 0.69
p01 50 0.1 0.5 16 1007.51 16 1051.43 4.36 0.05 16 1046.45  3.87 0.06
p02 75 0.1 0.5 24 1504.74 24 1583.01 5.20 0.15 24 1584.68  5.31 0.13
p03 100 0.1 0.5 33 2018.94 33 2039.72 1.03 0.27 33 2056.63  1.87 0.24
p04 150 0.1 0.5 49 2901.62 49 3005.84 3.59 0.50 49 2978.68  2.66 1.01
p05 199 0.1 0.5 64 3548.31 63 3640.44 2.60 1.66 63 3636.97  2.50 1.81
p11 120 0.1 0.5 41 4261.74 40 4316.38 1.28 0.46 40 4282.95  0.50 0.72
p01 50 0.1 0.9 27 1488.58 26 1560.57 4.84 0.10 26 1545.50  3.82 0.10
p02 75 0.1 0.9 41 2318.53 40 2386.75 2.94 0.22 40 2441.77  5.32 0.28
p03 100 0.1 0.9 56 3116.61 56 3198.32 2.62 0.51 56 3193.63  2.47 0.45
p04 150 0.1 0.9 84 4581.32 83 4692.92 2.44 1.14 83 4688.12  2.33 1.20
p05 199 0.1 0.9 105 5669.26 105 5665.47 -0.07 2.40 105 5668.73  -0.01 1.72
p11 120 0.1 0.9 67 6881.04 67 6924.42 0.63 0.91 67 6931.15  0.73 0.87
p01 50 0.3 0.7 26 1487.81 26 1537.11 3.31 0.09 26 1540.29  3.53 0.06
p02 75 0.3 0.7 39 2228.69 39 2307.96 3.56 0.20 39 2278.46  2.23 0.22
p03 100 0.3 0.7 53 3002.65 53 3070.34 2.25 0.38 53 3079.97  2.58 0.41
p04 150 0.3 0.7 80 4374.56 79 4447.13 1.66 1.15 79 4462.19  2.00 1.12
p05 199 0.3 0.7 104 5487.56 102 5518.25 0.56 2.51 102 5526.76  0.71 1.73
p11 120 0.3 0.7 64 6658.52 64 6705.61 0.71 0.98 64 6765.66  1.61 0.99
p01 50 0.7 0.9 41 2160.66 41 2209.76 2.27 0.16 41 2214.48  2.49 0.15
p02 75 0.7 0.9 62 3234.64 61 3289.48 1.70 0.32 61 3289.56  1.70 0.40
p03 100 0.7 0.9 82 4411.32 82 4499.79 2.01 0.59 82 4472.43  1.39 0.93
p04 150 0.7 0.9 123 6462.78 122 6483.92 0.26 1.65 122 6470.63  0.05 1.51
p05 199 0.7 0.9 161 8297.71 161 8303.25 0.07 3.77 161 8282.96  -0.18 3.29
p11 120 0.7 0.9 98 10233.37 98 10308.79 0.74 1.12 98 10293.61 0.59 1.39
Average        3.02 0.70   2.77 0.73 
 
99 年度專題研究計畫研究成果彙整表 
計畫主持人：韓復華 計畫編號：99-2221-E-009-089- 
計畫名稱：需求分割之車輛路線問題啟發式解法研究 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 2 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 16th HKSTS 
International 
Conference 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
