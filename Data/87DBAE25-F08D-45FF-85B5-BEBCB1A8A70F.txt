 2
與休閒活動中的電玩或網路遊戲製作等，
都和模型的建立有很大的關係。建立好的
模型如果要運用在動畫、電影、或虛擬實
境，則需要使模型能夠做出各種運動。目
前最常見的方法為運動擷取系統(Motion 
Capturing System)技術，被當作模擬目標
的人體運動者需先穿上特製的感應衣，再
將許多的運動感應器(Motion Sensors)架設
在感應衣上，人體在運動時，感應器會將
運動者的相關數據回傳給電腦並製作同步
之模型，其品質與流暢度皆有不錯品質，
但是運動擷取系統成本昂貴，所以使用者
大多侷限於電影業者或是研究機構。 
為了克服這樣的問題，本研究提出一
個「運用人體動態分析之代理人同步系統」，
系統設計是採用單一攝影機加上一些環境
限制條件所拍攝的視訊(Video)，製作與輸
入視訊中人體物件的運動相對應之同步模
型，使用者只需要在同步系統介面上手動
標出主要人體特徵點，系統便能夠自動追
蹤及定位這些人體特徵點，最後分析追蹤
到的特徵點再建立出對應輸入視訊中人體
物件運動之同步模型，稱為代理人。因此，
一般使用者也能夠輕鬆的建立出簡單的運
動同步代理人，而不需負擔龐大的成本。 
三、文獻探討 
本代理人同步系統目標在於建立與視
訊物件運動同步的人體模型，因此必須先
定義人體模型。參考過去的相關研究，Ju et 
al.[1] 提出硬紙板人體模型 (Cardboard 
Human Model)，將人類身體各個部位用矩
形表示，如圖1 (a)所示；Chen和Lee[2]提
出黏貼圖人體模型 (Stick-Figure Human 
Model)，把人體的關節點當作人體運動的
支點，以骨架的方式表示人類身體，如圖1 
(b)所示；Leung和Yang[3]提出二維輪廓人
體模型(2D Contour Human Model)，利用輪
廓所圍成的封閉圖形區域定義人體部位，
如圖1(c)所示。 
 
     (a)          (b)         (c) 
圖1 三種人體模型示意圖。其中，(a)為硬
紙板人體模型；(b)為黏貼圖人體模型；(c)
為二維輪廓人體模型。 
根據人體模型的定義，可以對視訊中
的物件取得相對應的人體特徵並進行追蹤。
在過去的研究中，物件的追蹤方法有很多
種 ， 包 含 核 基 礎 追 蹤 (Kernel-based 
Tracking)[4] 、 輪 廓 追 蹤 (Contour 
Tracking)[5]、區塊追蹤(Blob Tracking)[6]、
卡爾曼濾波器(Kalman Filtering) [7][8]、和
粒子濾波器(Particle Filtering)[9][10]等。其
中，以卡爾曼濾波器和粒子濾波器的方法
較為常見。 
卡爾曼濾波器是根據其發明者卡爾曼
(Rudolph E. Kalman)命名的濾波器，是一
種高效率之遞迴(Recursive)濾波器，能夠
從一連串不完全及包含雜訊的測量中，估
計動態系統的狀態，常被運用於雷達的追
蹤、計算機視覺、和動態定位系統等。Wan 
和 Van der Merwe [11] 提 出 Unscented 
Kalman Filter增加了卡爾曼濾波器在非線
性動態系統的功能。粒子濾波器為傳統卡
爾曼濾波器的一般化技術，利用點的質量
來表示機率的密度，可運用到空間狀態
(State Space)模型中，做動態系統狀態的估
計。Nummiaro et al. [12]提出以彩色模型
為基礎的粒子濾波器，藉由比對各色彩分
量的機率分佈密度，直接在彩色影像中追
蹤物件；Qu和Schonfeld[13]提出關節運動
 4
系統使用者只需要利用代理人同步系
統介面在視訊中的第一張畫格標定 2 個矩
形框，及分別標出 12 個特徵點，如圖 4
所示。頭部取紅色框的中心點當作頭部特
徵點 C0，黑色框為身體主要軀幹，系統會
在黑色框的範圍內自動找出兩個特徵點
C1 和 C8，其他的點則表示身體其他部位的
12 個特徵點(即 C2、C3、C4、…、C14 等)。 
 
圖 4 視訊人體物件範例圖。由使用者在代
理人同步系統介面上拉出兩個矩形框代表
頭部及主要軀幹並點出其他特徵點範例。 
4.2 分層特徵點追蹤 
一次追蹤所有的特徵點，從頭部開始，
做一個樹狀結構(Tree Structure)的分層式
追蹤。圖 5 為人體分層特徵點追蹤路徑示
意圖。每一次追蹤的步驟稱為一層(Level)，
而每一層包含的資訊有連接兩特徵點的路
徑、該路徑與極軸的夾角、及路徑距離 r。
分層追蹤順序可以有以下四種可能路徑： 
(1) 從頭部開始到左手腕的追蹤路徑，其
追蹤順序為C0、C1、C2、C4、C6，總
共 4 層； 
(2) 從頭部開始到右手腕的追蹤路徑，其
追蹤順序為 C0、C1、C3、C5、C7，總
共 4 層； 
(3) 從頭部開始到左腳踝的追蹤路徑，其
追蹤順序為 C0、C1、C8、C9、C11、
C13，總共 5 層； 
(4) 從頭部開始到右腳踝的追蹤路徑，其
追蹤順序為 C0、C1、C8、C10、C12、
C14，總共 5 層。 
 
圖 5 人體分層特徵點追蹤路徑示意圖。其
中，共有四種可能的追蹤路徑。 
 
每一層的追蹤路徑皆從編號較小的特
徵點開始，例如C0到C1的追蹤路徑屬於第
一層，C1到C2、C1到C3、或C1到C8的追蹤
路徑屬於第二層。系統在進行完第一層追
蹤後，才會進行第二層追蹤，以此類推，
直到四肢末端(即手腕或腳踝)，追蹤才結
束。 
4.3 特徵點定位 
圖 6 為圖 2 中特徵點定位的方塊圖。
系統先進行頭部定位(Head Localization)，
主要是搜尋頭部特徵點C0；骨架定位
(Skeleton Localization)則是利用鐘擺式特
 分佈，首先定義第 t - 1 張畫格在特徵點
的色彩影像直方圖分佈為P
C
(u
格在特徵點Cit的色彩影像直方圖分佈為
Q
Ci
t
(u)。圖 7 為色彩影像直方圖分佈的比對
範例圖，分別找到其色彩直方圖分佈
Q。其中，藍色與綠色方框中心的十字為
中心特徵點。對兩個分佈做比對的方法是
計算兩個直方圖分佈的 Bhattacharyya
數[14][15]： 
由於代理人同步系統是以離散方式描述色
彩影像直方圖分佈，所以採用以下公式
ρ的值越大，表示兩個色彩影像直方圖的分
佈情形越相近；ρ = 1 表示兩個色彩影像
直方圖分佈完全吻合。而用一個距離來當
作兩個色彩影像直方圖分佈的評估之定義
為： 
        
d 稱為 Bhattacharyya 距離。
以第 t - 1 張畫格的特徵點
在第 t 張畫格中定義搜尋區域
{Cjb | b = 0,…, k-1}，然後在搜尋區域內搜
尋 Bhattacharyya 距離最小者
定位之結果Cit。 
Frame t – 1                
圖 7 兩張畫格之色彩影像直方圖分佈比
6
Ci
t-1
i
t-1
) ，第 t 張畫
P 和
係
 
： 
 
  
 
Ci
t-1為中心，
Z = 
即為特徵點
 
Frame t 
對範例圖。其中，P 和 Q
張畫格與第 t 張畫格之直方圖分佈
 
4.3.1 頭部定位(Head Localization)
系統在進行特徵點定位
特徵點進行定位。圖 8 為頭部特徵點定位
示意圖。根據第 t - 1 張畫格
C0
t-1為中心，定義特徵點區域
代入公式(2)計算色彩影像直方圖分佈
著在第 t 張畫格之搜尋區域
9 	 9 像素)內找到 Bhattacharyya
者，即為第 t 張畫格頭部特徵點定位之結
果。 
 
圖 8 頭部特徵點定位示意圖
個方框代表一個特徵點區域
t - 1 張畫格之頭部特徵點區域
張畫格中 Bhattacharyya
第 t 張畫格頭部特徵點之定位結果
 
4.3.2 骨架定位(Skeleton Localization)
    由於人體軀幹及四肢運動的自由度非
常高，系統設計時是假設
存在，因此不考慮三維深度運動
進行骨架定位時，利用人體軀幹及四肢在
運動時，其特徵距離(如手臂長度等
的假設，將代理人的運動行為模擬成二維
平面的鐘擺運動，因此，在特徵點追蹤時
分別為第 t – 1
。  
 
時，首先對頭部
的頭部特徵點
(25 	 25 像素)
，接
(系統設定為
距離最小
 
。其中，每一
，系統根據第
，搜尋第 t
距離最小者，即為
。 
 
第一個限制條件
。系統在
)不變
，
 8
後輸入代理人各身體部位之影像，如圖 11
所示，依照其對應的特徵點路徑與極軸之
夾角，旋轉代理人各身體部位影像到相對
位置，在輸出視訊中相對畫格，依序貼入
代理人身體各部位輸入影像。系統處理視
訊中的所有影像，最後建立同步代理人視
訊結果。圖 12 為輸入影像與建立之同步代
理人影像範例圖。 
 
(a)       (b)    (c)   (d) 
 
      (e)  (f)   (g)   (h)  (i)  (j) 
圖 11 代理人身體各部位輸入影像範圖。 
其中，(a)~(j)分別對應人體的頭部、身體、 
左上臂、右上臂、左下臂、右下臂、左大 
腿、右大腿、左小腿和右小腿，各部位的 
表示顏色對應圖 3 的代理人定義。 
 
 
(a)                   (b) 
圖 12 輸入人體運動之影像與建立出的同
步代理人影像範例圖。其中，(a)為輸入之
人體物件運動影像；(b)為代理人同步後建
立出的代理人影像。 
五、研究結果與討論 
本系統展現代理人同步系統研究之結
果之實際運用結果為了減少影響系統運作
之因素，視訊資料庫的拍攝及建立，均限
制在單純背景及光源充足的環境下進行。
拍攝過程中，攝影機的鏡頭為固定位置及
方向，拍攝的人體運動也滿足本研究的假
設，使得人體的所有運動侷限於二維平面，
不包含三維深度的運動資訊。 
本代理人同步系統採用兩組視訊，分
別稱為「對稱手臂運動行為」及「非對稱
手臂運動行為」，以建立與人體運動相對應
且同步之代理人。表 1 為本系統開發環境
設備表；圖 13 與圖 14 分別為「對稱手臂
運動行為」視訊及「非對稱手臂運動行為」
視訊與其相對應的同步代理人視訊結果。
從研究結果可明顯看出，本系統在合理範
圍內可正確追蹤及定位人體特徵點。 
 
表 1 系統之設備環境表。 
 
六、計畫成果自評 
本研究提出一個「運用人體動態分析
之代理人同步系統」，系統設計主要是先
整合兩種人體模型定義出適合描述人體運
動行為的代理人，利用輸入之人體運動行
為視訊及簡易的手動標示特徵點，本系統
即可自動化進行特徵點追蹤及定位，讓一
般使用者能夠輕鬆的建立與輸入視訊中人 
體運動相同的同步代理人。 
 10
[12] K. Nummiaro, E. Koller-Meier, and L. 
Van Gool, “An adaptive color-based 
particle filter,” Image and Vision 
Computing, vol. 21, Issue 1, pp. 99-110, 
January 2003. 
[13] W. Qu and D. Schonfeld, “Real-time 
decentralized articulated motion 
analysis and object tracking from 
videos,” IEEE Trans. on Image 
Processing, vol. 16, no. 8, August 
2007. 
[14] F. Aherne, N. Thacker, and P. Rockett, 
“The Bhattacharyya metric as an 
absolute similarity measure for 
frequency coded data,” Kybernetika, 
vol. 34, no. 4, pp. 363-368, 1998. 
[15] T. Kailath, “The divergence and 
Bhattacharyya distance measures in 
signal selection,” IEEE Trans. Comm. 
Technology, vol. 15, pp. 52-60, 1967. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
無研發成果推廣資料 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次
 
其他成果 
(無法以量化表達之
成果如辦理學術活
動、獲得獎項、重要
國際合作、研究成果
國際影響力及其他
協助產業技術發展
之具體效益事項
等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
