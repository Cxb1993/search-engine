 2
習及回想等一系列動作。由於類神經網路只是針對人腦作簡化之模擬，利用數學的方式建立
模式，達到儲存、學習及回想之作用，其行為與統計之方式相當類似，因此可將其視為一種
特殊之統計模式。當一個系統之機制複雜或是模式不易建置時，如何掌握此系統之轉換機制
便相當重要。而類神經網路的最大優點即是不需事先了解系統之轉換機制，只要經過類神經
元之學習訓練即可，且其脫離了依賴統計模型，具有理論簡明、結構單純，並具有快速計算、
學習能力及容錯能力等優點。因此近來有許多類神經網路之模型被相繼提出。由於類神經網
路之理論簡明、結構單純，可用來模擬物理方程式難以描述之複雜非線性關係，因此被大量
應用在水文預測上(French et al., 1992; Lin and Chen, 2004a, b)。其中，又以倒傳遞類神經網路
(back propagation neural network, 簡稱 BPN)為最被廣泛使用之網路。 
在流量預測方面，Zhu and Fujita(1994)利用 BPN進行洪水小時流量預測，得到不錯的結
果。但其輸入處理單元個數之決定為自定的方式並無一客觀的準則，因此預測的時刻數將會
有所限制，且輸入層資料均採歷史值，故模式為一預測應用之雛形。Marina et al.(1999)以及
Komda and Makarand(2000)均曾以 BPN進行洪水位預測。國內方面，Hsu et al.(1995)利用類神
經網路與時間序列建立降雨逕流模式進行流量預測。孫(1996)以 BPN對短延時降雨-逕流過程
做一探討並對降雨及逕流作預測。陳與黃(2000)則嘗試以倒傳遞與反傳遞類神經網路於洪流
量預測並加以比較。 
雖然 BPN 被已被廣泛應用於各種領域，但 BPN 於訓練過程中卻會產生許多問題
(Wasserman, 1993)。其中，最為人詬病的缺點就是其結果容易收斂到區域最小值，此乃由於
傳統倒傳遞類神經網路之參數檢定是利用最陡坡降法(gradient steepest descent method)之觀
念，將誤差函數予以最小化求得所致。近年來，由於優選方法之發展快速，藉由電腦強大之
數值計算能力，優選法能快速且有效率地檢定模式之參數。因此，已有許多研究嘗試以優選
法來檢定類神經網路模式之參數(Yao, 1999; Falco et al., 1998; Bebis et al., 1997; Jiang et al., 
2003)。 
優選法的發展一開始的焦點主要在於單目標函數的建立(Yapo et al., 1996)，近來優選法的
研究則走向以群體演進(population-evolution)為基礎的搜尋策略(Brazil and Krajewski, 1987; 
Wang, 1991)。Duan et al.(1992)進而發展出快速且有效率之單目標優選法－洗牌複演進優選法
(Shuffled Complex Evolution Algorithm，簡稱 SCE-UA)。但從實際的應用上發現，並沒有適當
的單一目標函數在檢定模式參數後，能使模擬之逕流歷線符合觀測逕流歷線之各項重要特徵
(Chapman, 1970; Diskin and Simon, 1977; Sorooshian et al,. 1983; Yan and Haan, 1991 a, b; Yapo 
et al., 1996)。因此 Gupta(1998)提出利用多目標函數進行模式參數檢定的方法－多目標複演進
全域優選法 (The Multi-objective Complex Evolution Global Optimization Method，簡稱
MOCOM-UA)。MOCOM-UA之演算結合了 controlled random search、competitive evolution、
Pareto ranking和最新發展的多目標最陡坡降演進法(multi-objective downhill simplex search)等
四項優選策略，能快速且有效率地找出全域解(global solution)，其求解方法為平行地求出給定
之柏拉圖解之數目，不需如傳統方法求出所有目標值可能的分佈，使得演算次數大幅降低，
因而大幅縮短求解的時間。基於此方法的上述優點，本研究將嘗試以MOCOM-UA作倒傳遞
類神經網路之參數檢定，進而建立一個即時的降雨-逕流預報模式。 
 
二、研究方法 
2.1 倒傳遞類神經網路 
倒傳遞類神經網路(back propagation neural network, 簡稱 BPN)是一個多層(multi-layer)、反
饋前向式(feed-forward)且具監督學習(supervised learning)功能的網路架構。BPN基本結構可分
為三個部分，包含輸入層(input layer)、隱藏層(hidden layer)、輸出層(output layer)，如圖 1所
示。輸入層是用來接受外在環境的訊息；輸出層則用以輸出訊息給外在環境；隱藏層則是將
輸入層與輸出層各處理單元間的相互關係充份地表現出來。 
 4
功能
中，以訓練資料建構網路之架構，再以驗證資料求出具有較佳推廣能力之網路，最後
測試資料來測試網路之預測效能，亦即當網路具有較佳之衍生能力時即提早停止網路之訓
 
2.2 
tion)的近似，
而這
有更好的結果。 
傳統多目標函數之求解，通常係利用一轉換函數(transform function)
成單目標函數進行優選找出其解，下式為常用之轉換函數：
域較大之目標函數其轉換
函數
地找出全域解(global solution)，其求解方法不需如傳統方法求出所有目標值可能的分佈，而
是平行地求出給定之柏 數目，因而使其演算次數大幅降低，進此求解時間大幅縮短。 
柏拉
之求解為一求極小值的問題，當樣本θa和樣本θb比較時為顯著(dominated)，而θb為非
顯著
下之樣本群找出非
，故可進行定率之預測。 
類神經網路之網路架構會直接影響其衍生能力(generalization capability)及計算速度，所以
網路架構之決定便成為一個重要之課題。然而，至今仍然無任何特定之方法可以決定網路架
構。試誤法(trial and error method)是決定整體網路架構最廣泛被使用之方法。此外，在網路之
訓練過程中，往往對於網路之精度並無概念，無法定義容許誤差及神經元個數之上下限。基
於上述原因，交互驗證(cross-validation)方法常被用來決定隱藏層神經元之個數，此法是先將
所有資料分成訓練資料(training data)、驗證資料(validation data)以及測試資料(testing data)三部
分。其
以
練。
 
多目標複演進全域優選法 
多目標函數問題的求解亦可稱柏拉圖優選(Pareto optimality)，求解過程通常會求得多組
解，常常在從一個解移動到另一個解時，發現如此會改善某些目標函數的結果，卻使得其他
至少一個目標函數的結果變差，吾人無法從這些解判斷哪些較好、哪些較差，所以多目標函
數問題所求得的解稱之為柏拉圖解(Pareto solution)，並且都是全域解(global solu
些解的集合稱為柏拉圖解集合(Pareto set)。在柏拉圖解集合中，每個柏拉圖解的結果都一
樣好(equally good)，並且無法在可行區域中再找到比柏拉圖解
，將多目標函數轉換
 
2/122
22
2
11 ]))(())(())([( pp AFAFAFF ++++++= θθθ K                          (6) 
式中，Fi , i = 1,2,⋯,p為各別之單目標函數，Ai , i = 1,2,⋯,p為轉換常數，p為單目標函數
之個數。單目標函數本身值的大小會影響式(6)以何目標函數為考慮之重點，例如若 Ai = 0, i = 
1,2,⋯,p，則目標函數值較大之單目標函數則有較大之權重，而若值
較小，值域較小之目標函數其轉換函數較大，則所有目標函數值之權重趨於相等，所以
Ai , i = 1,2,⋯,p的大小能決定以何單目標函數為主要考慮之問題。 
為了求出多目標函數之柏拉圖解集合，傳統之求解方法得不斷改變轉換常數，求出不同轉
換常數排列所對應之目標值，再由所求之目標值集合找出柏拉圖解，求法極為繁複且耗時。
MOCOM-UA之演算結合 controlled random search、competitive evolution、Pareto ranking和多
目標最陡坡降演進法(multi-objective downhill simplex search)等四項優選策略，能快速且有效
率
拉圖解
 
圖排序法(Pareto ranking) 
多目標函數問題的求解，需同時考慮多個目標函數並求出其值，傳統排序方法已不再適用
於多目標函數值的排序，在多目標複演進全域優選法裡是利用柏拉圖排序法取代傳統排序方
法。在進行柏拉圖排序法之前，需先瞭解目標顯著性質的觀念(Multi-objective dominance)。若
目標函數
(non-dominated)，則Fi(θa)≥ Fi(θb), i = 1,2,⋯,n，式中Fi表第i個目標函數，n指目標函數之
個數。 
柏拉圖排序法先會在有s個樣本的樣本群(population)裡找出非顯著(non-dominated)之樣
本，將這些樣本編號為 1，而後暫時從樣本群移除已編號之樣本，再由剩
 
圖 2 石門水庫集水區雨量站分布圖 
     表 1  颱風事件表 
颱風名稱 西元(年) 月 日 延時(hr) 類別 
Billie(畢莉) 1976 8  8 39 訓練 
Vera(薇拉) 1977 7  27 83 訓練 
Della(黛拉) 1978 8  12 26 訓練 
Gordon(戈登) 1979 7  27 45 訓練 
Hope(賀璞) 1979 7  31 31 訓練 
Percy(珀西) 1980 9  16 88 訓練 
June(裘恩)  1981 6  19 69 訓練 
Clara(葛萊拉) 1981 9  20 34 訓練 
Andy(安迪) 1982 7  27 81 訓練 
Wynne(魏恩) 1984 6  21 85 訓練 
Val(衛奧) 1985 9 15 57 訓練 
Peggy(佩姬) 1986 7 10 28 訓練 
Dot(黛特) 1990 9 6 76 訓練 
Ellie(愛麗) 1991 8 16 85 訓練 
Nat (耐特) 1991 9 30 43 訓練 
Omar(歐馬) 1992 9 3 80 訓練 
Tim(提姆) 1994 7 9 44 訓練 
Caitlin(凱特琳) 1994 8 3 78 訓練 
Ferd(弗雷特) 1994 8 19 74 訓練 
Zane(薩恩) 1996 9 27 72 訓練 
Winnie(溫妮) 1997 8 17 113 訓練 
 6
%100
ˆ
VER
1
1 1 ×
−
=
∑
∑ ∑
=
= =
n
i
i
n
i
n
i
ii
Q
QQ
                                                 (12) 
式中， ：時間 之推估流量，iQˆ iQ ：時間 觀測流量。 
 
4. 效率係數(Coefficient of Efficiency, CE) 
∑
∑
=
=
−
−
−= n
I
i
n
i
ii
QQ
QQ
1
2
1
2
)(
)ˆ(
1CE                                                        (13) 
式中， ：時間 i之推估流量，iQ Q ：觀測流量之平均值， ：時間 i之推估流量 iQˆ
 
3.3 結果 
首先，本研究選用雨量站前三小時之雨量，以及流量站前三小時的流量作為預測颱洪流量
模式之輸入項，並應用MOCOM-UA作倒傳遞類神經網路之參數檢定，建立降雨-逕流預報模
式(稱為 ANN1 模式)，分別預測領前二小時與領前四小時時刻之訓練、驗證及測試資料之估
計結果，並將結果繪於圖 3 至圖 8。由圖 3 至圖 8 觀察可知，不論對於何種資料，對於整體
之流量趨勢皆有相當不錯之模擬預測結果。 
 
0
1000
2000
3000
4000
5000
6000
7000
0 50 100 150
Time (hr)
St
re
am
flo
w
 (m
3 /s
)
Observed
Forecasted
 
0
500
1000
1500
2000
2500
3000
0 50 100 150
Time (hr)
St
re
am
flo
w
 (m
3 /s
)
Observed
Forecasted
 
圖 3  ANN1模式於領前二小時訓練資料估計  圖 4  ANN1模式於領前二小時驗證資料估計 
     結果                                     結果 
 
 
0
500
1000
1500
2000
2500
3000
3500
0 50 100 150
Time (hr)
St
re
am
flo
w
 (m
3 /s
)
Observed
Forecasted
 
0
1000
2000
3000
4000
5000
6000
7000
0 50 100 150 200
Time (hr)
St
re
am
flo
w
 (m
3 /s
)
Observed
Forecasted
 
圖 5  ANN1模式於領前二小時測試資料估計  圖 6  ANN1模式於領前四小時訓練資料估計 
     結果                                     結果 
 8
 10
列於表 5與表 6。由表 5可得知，ANN2模式在預測領前二小時之流量上，洪峰流量到達時間
皆有延遲 1至 3小時之情形。至於洪峰流量誤差百分比，大部分之颱洪事件都大於 10%。總
流量誤差百分比之結果亦較 ANN1模式為差。此外，七場颱洪事件之效率係數除賀伯及尼爾
森兩場颱風外，其餘均低於 0.90，艾貝颱風甚至只有 0.578。至於 ANN2模式在預測領前四小
時之流量，由表 6可得知 ANN2模式在四種評鑑指標之表現上均較 ANN1模式為差。 
 
     表 5  ANN2模式於領前二小時之四種評鑑指標計算結果 
評鑑指標 編號 颱洪名稱 
ETp (hr) EQp (%) VER (%) CE 
1 賀伯(Herb) 2 -3.65 -1.88 0.971 
2 莎拉(Sarah) -1 15.52 2.38 0.856 
3 尼爾森(Nelson) 1 6.86 -0.53 0.955 
4 琳恩(Lynn) 3 -14.82 -20.84 0.627  
5 艾貝(Abby) 2 14.12 21.31 0.578 
6 寶莉(Polly) 1 15.14 5.66 0.791  
7 傑魯得(Gerald) 1 17.33 -3.47 0.754  
 
     表 6  ANN2模式於領前四小時之四種評鑑指標計算結果 
評鑑指標 編號 颱洪名稱 
ETp (hr) EQp (%) VER (%) CE 
1 賀伯(Herb) 2 -18.91 -12.23 0.875 
2 莎拉(Sarah) 1 31.37 17.85 0.325 
3 尼爾森(Nelson) 2 -25.36 -8.41 0.778 
4 琳恩(Lynn) -4 -24.58 -54.25 0.511 
5 艾貝(Abby) 4 37.47 37.11 0.413 
6 寶莉(Polly) 2 28.63 27.47 0.541 
7 傑魯得(Gerald) 3 -12.92 8.47 0.635 
 
由上述之結果可知，不論是何種指標均顯示以MOCOM-UA作參數檢定之網路模式，其
預測之品質均較傳統之最陡坡降法所架構之網路為差。探究其原因，主要是因為MOCOM-UA
之演算能快速且有效率地找出全域解，其求解方法為平行地求出給定之柏拉圖解之數目，不
需如傳統方法求出所有目標值可能的分佈，使得演算次數大幅降低，因而大幅縮短求解的時
間，且提高模式預測之精確度。 
 
四、結論與建議 
於本研究中，嘗試應用 MOCOM-UA 作倒傳遞類神經網路之參數檢定，藉以建立降雨-
逕流預報模式。由於水文系統的複雜度及多變性，使得降雨-逕流預報模式的參數具有相當程
度的不確定性，模式本身推估的逕流量也因此與實際狀況產生了誤差。為增進倒傳遞類神經
網路所建立之降雨-逕流模式在逕流預報準確度，有必要考慮最佳化模式參數，使其可充分表
現出實際的水文系統。因此本研究考慮可以滿足多種目標函數的MOCOM-UA，來對降雨-逕
流模式的參數作最佳化，由於MOCOM-UA之演算能快速且有效率地找出全域解，因此不但
大幅縮短求解的時間，且提高模式預測之精確度，因此對於實際之洪水流量預測將有相當大
之幫助。 
 
