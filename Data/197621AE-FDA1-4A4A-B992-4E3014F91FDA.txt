行政院國家科學委員會補助專題研究計畫 █ 成 果 報 告   □期中進度報告 
 
功率感知無線智慧型視訊監護系統晶片設計(I) 
 
計畫類別：□ 個別型計畫  ■ 整合型計畫 
計畫編號：NSC 99－2221－E－005－113 
執行期間： 99 年 8 月 1 日 至 100 年 10 月 31 日 
 
計畫主持人：賴永康 副教授 
共同主持人： 
計畫參與人員： 賴昱帆、林君瑋、陳盈璋、詹益昇 
 
 
成果報告類型(依經費核定清單規定繳交)：■精簡報告  □完整報告 
 
本成果報告包括以下應繳交之附件： 
□赴國外出差或研習心得報告一份 
□赴大陸地區出差或研習心得報告一份 
□出席國際學術會議心得報告及發表之論文各一份 
□國際合作研究計畫國外研究報告書一份 
 
 
處理方式：除產學合作研究計畫、提升產業技術及人才培育研究計畫、
列管計畫及下列情形者外，得立即公開查詢 
          ■涉及專利或其他智慧財產權，□一年■二年後可公開查詢 
          
執行單位： 
 
 
中   華   民   國  100  年  11  月   30  日 
 
 
 
Fig. 3. The flow chart of texture analysis algorithm. 
  
(a)                     (b) 
Fig. 4. The simulation result of texture analysis algorithm. 
(Stefan sequence)  (a) The original frame. (b) Simulation 
result. 
   
(a)            (b) 
Fig. 5. The simulation result of texture analysis algorithm. 
(Mobile sequence)  (a) The original frame. (b) Simulation 
result. 
 
 
 
Fig. 6 The range definition of regular MVs 
在基於 H.264/AVC 視訊編碼系統內建 Object 
Tracking 技術我們使用一個名為 built-in Object Tracking
的方法。基礎上的想法是，Motion Estimation 已經把大多
數的運算吸收進去。而在許多的情況下，Motion Estimation
亦為 Codec 內部運算量最大的部分。因此如何將進行
Object Tracking 的運算，內建至 Motion Estimation 內部。
在此我們希望 Codec 能夠同時具有 Object tracking 的能
力，也就是 build-in Object Tracking。為了能硬體實現，因
此許多已經提出的相關演算法如[9]並不適合我們的狀況
下使用。我們的演算法基於[10]所示，並且加上對於 VLSI
的修正。我們的假設是，移動的物體會在畫面的前後有兩
個不為零的 motion vector。也就是該畫面中的移動區域，
必須同時參考前一張以及後一張參考。 
三、 研究方法和結果 
演算法部份 
在 Fig.1, 我們提出了知覺 (Perceptual)分析模組的
H.264 編碼器，此知覺分析模組之內部結構如 Fig.2 所示模
組內的演算法包含了三個部份，橫跨了空間性與時間性的
考量，分別為材質特性分析(空間)、視覺遮罩分析(時間)、
視覺注意分析(時間)。由此三個演算法所偵測視覺敏感度
情形，來決定調整量化參數的幅度，以達到進一度壓縮的
效果。然而，由於不同的畫面型態，並非所有演算法的來
源資料皆可取得，故可取得愈充裕資料的畫面，將可進行
愈完整的分析。Fig.3 為提出之演算法的流程圖，首先將目
前的 MB 分成四個 8x8 的區塊，接著偵測第一個 8x8 區塊
的邊緣量，將其加總後與預設的第一個門檻值(TH1)比
較，若其值小於 TH1，則目前 MB 不夠複雜，之後的計算
只關係到其為平坦材質或邊緣材質的分類，接著進一步對
剩餘的 8x8 區塊個別做運算與比較，若剩餘的三個區塊，
其各邊緣強度總和皆小於 TH1，則此 MB 分類為平坦材
質，相反的，若剩餘區塊中，任一個邊緣強度總和不小於
TH1，表示 MB 為雜亂之中涵蓋平坦之處，因此將其分類
為邊緣材質。而假使第一個區塊不小於 TH1，表示此 MB
非完全平坦，之後的計算只關係到其為複雜材質或邊緣材
質的分類，接著將其與第二個預設門檻值(TH2)比較，小
於或等於 TH2，則將其分類為邊緣材質，否則進一步對剩
餘的 8x8 區塊個別做運算與比較，若剩餘區塊邊緣強度總
和皆大於 TH2，則此 MB 分類為複雜材質，否則分類為邊
緣材質。Fig.4 和 Fig.5 為測試結果，圖(a)為原始影像，圖
(b)為材質分類综合結果。 
此部份針對視覺注意作考量，一般而言，在連續的影
像中，有移動的地方通常較容易吸引我們眼睛的注意，可
是並非每種移動都會產生明顯的失真現象。我們可以將移
動分成兩類，一種是會產生形狀變化的移動，另一種則是
不會產生形狀變化，對幀間編碼而言，執行移動估計
(Motion Estimation)時，前者因為在參考畫面中不易找
到和自己相同的部份，移動估計的效果較不好，相對容易
產生明顯的失真現象，因此，這個部份對於視覺而言屬於
較敏感處，然而另一種情況因為形狀沒有變化，故移動估
計的結果較準確，可以把畫面的原始結構保持住，較不容
易產生明顯的失真，且此部分的移動較單純，相較起來屬
於視覺較不敏感之處。為了利用移動向量規律性分辨區塊
內容是否包含形狀變化，在此提出一個判斷方式，計算 MB
內每個移動向量是否皆位於同一個整數點或其附近半點
與 1/4 點像素位置，如 Fig.6 虛線範圍內，若滿足則表示
其不包含形狀變化，因整數點為實際像素，相素間有一定
的關連性，若移動向量皆位於此處，自然表示整體結構皆
維持住，而半點與 1/4 點為經由插補產生，也包含了整數
點的特性，因而若其為同一個整數點與相鄰整數內插補所
得，也列為有規律的比較範圍。 
因為畫面特性不同，並非所有的演算法皆可執行於每
個情況，因此，量化參數的調整方式將有所差異，量化參
數調整方式如下: 
第二個考量因素為邊緣偵測所須參考的像素範圍，因每個
8x8 區塊除了使用自己內部像素之外，尚須參考外部一個
像素範圍，故若要偵測一個區塊的邊緣量，則其他三個區
塊之部分像素也須取得，如此將導致來源資料傳送方式複
雜，不過，若使用了 8 點平行處理方式，左半部區塊與右
半部區塊將連接著執行，使得中間交界像素只需傳送一次
便可完成計算，增加規律性，方便硬體實作，至於上半部
區塊與下半部區塊之交界，則以重複輸入來增加規律性。
邊緣偵測硬體架構如 Fig 10. (a)(b)所示，其中 A 和 B 處為
相同暫存器。由於 Sobel 邊緣偵測方法中，包含了許多的
3個值相加，在此以Carry Save Adder(CSA)來計算 ( Fig 10. 
(d))，如此一來，原本所需的兩層加法器(8bit、9bit)延遲，
現在只需要一層加法器再加一個 1bit 全加器延遲，即可完
成。Fig 10. (a)為垂直邊緣偵測架構，因計算過程須兩列的
資料，因此，每列在 CSA 計算完後的結果先儲存於暫存器
中，等相隔一列之 CSA 結果計算完成後，再與其作相減、
取絕對值並限制範圍。水平偵測部分(Fig 10. (b))，則須等
到三列的資料皆取得後，才能得到正確的計算結果。故兩
          
   Fig. 8 材質分類模組結構圖                       Fig. 9 材質分類模組資料處理次序 
  
(a) (b) 
 
   
     (c)        (d) 
Fig 10.材質分類硬體架構 (a)垂直邊緣偵測架構 (b)水平邊緣偵測架構 (c)邊緣強度計算架構 (d)Carry Save 
Adder(CSA)。 
所示。而記憶體的安排，主要針對了以下幾個考量： 
1. 為了滿足材質分類模組的硬體架構處理方式，
目前區塊必須在一個週期內可讀出 10 個像素
值。  
2. 為了滿足視覺注意模組的殘餘值計算硬體架構
設計，目前區塊必須在一個週期內可讀出一 4x4
區塊同一列之 4 個像素值。 
3. 為了滿足視覺遮罩硬體設計，前張畫面區塊必
須在一個週期內可讀出 8x8 區塊同一列之 8 個
像素值，且又考量資料之輸入方式，故分兩塊
記憶體存放。 
由於上述的考量，因而將上半部區塊與下半部區塊交
界處像素重複儲存於兩塊記憶體中，Fig 16. (c)標示出其存
放之記憶體編號，Fig 16. (d)為對應位址，當在處理上半部
區塊時，則使用左半邊之記憶體編號與位址。處理下半部
區塊時，則使用右邊數值。如此一來，在目前區塊部份，
便可規律的讀取出材質分類架構所需的 10 點像素與視覺
注意架構所需的 4 點像素。另外視覺注意架構，因移動補
償的資料傳送方式與分割模式有關，故在此設定一位址表
格(Table 4)，供控制電路根據不同模式進行不同的讀取順
序。而因前兩個 4x4 區塊與後兩個 4x4 區塊其讀法皆一
樣，故表中只需列出中間 12 個區塊的位址。又因 4x4 區
塊內為連續讀取，故只需要記錄每個區塊的起始位址，當
一區塊完成後，再接著查詢下一個區塊的起始位址。 
晶片實作部份 
 
四、 結論 
本計劃提出了一功率感知無線智慧型視訊監護晶片
系統晶片的演算法和架構。從系統方塊圖層次，至演算法
層次之各種快速演算法之提出，再至電路架構層次對於各
子電路做最佳化處理，透過上述技術實現低功率與具功率
感知之 H.264/AVC 編碼器。此外使用橫跨了空間性與時間
性的考量，分別為材質特性分析(空間)、視覺遮罩分析(時
間)、視覺注意分析(時間)。由此三個演算法所偵測視覺敏
感度情形，來決定調整量化參數的幅度，在人眼視覺感知
具相同畫質品質下來做更進一步的視訊壓縮，如此一來便
可應用於功率感知無線智慧型視訊監護系統。 
五、 自評 
本計劃目前已將多項成果發表於國際期刊與研討會
上。此外，仍有些許於報告中所提之成果正在撰寫並預計
發表於各國際研討會與國際期刊，並預計將部分成果撰寫
為專利。以下為已發表之成果。 
Table 4. The sizes of the memory modules 
Label Memory Size(words x width) 
1 36x8 
2 36x8 
3 36x32 
4 36x32 
5 32x32 
6 32x32 
 
    
1
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17
18 19 20 21 22 23 24 25 26 27 28 29 30 31
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17
18 19 20 21 22 23 24 25 26 27 28 29 30 31
32 33 34 35
32 33 34 35
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17
18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35
3
4
2
4
3
2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3 2 3
4 1 4 1 4 1 4 1 4 1 4 1 4 1 4 1 4 1 4 1 4 1 4 1 4 1 4 1 14 1 4 1 4 1 4 1
0 1 2 3 4 5 6 7 8 9 10 1711 12 13 14 15 1618 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35
0 1 2 3 4 5 6 7 8 9 10 1711 12 13 14 15 1618 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35
(a) (b)
(c)
(d)  
Fig 16. The memory arrangement of current block and 
corresponding address addresses 
 
  
(a)                    (b) 
Fig 17. The memory arrangement of previous block and 
corresponding address addresses 
 
Fig 18.晶片佈局圖 
Table 5.硬體設計規格 
CHIP Perceptual Evaluation Module
Technology UMC 90nm 1P9M 
Core voltage 1.0 v 
Logic gate count 33878 gates 
Memory size 
Current block(5.625 kbits) 
Previous frame block(4 kbits) 
Core area 2μm  2.6835.684   
Chip area 2μm  3.16187.1619   
Power Consumption 15mW@210 MHz 
表 Y04 
行政院國家科學委員會補助國內專家學者出席國際學術會議報告 
                                                         100 年  10 月 31 日 
報告人姓名 賴永康 服務機構
及職稱 
國立中興大學電機工程系     
副教授 
     時間 
會議 
     地點 
自 100 年 1 月 9 日 至 100
年 1 月 12 日 
美國，拉斯維加斯 
本會核定
補助文號
 
會議 
名稱 
 (中文) 2011 年國際電機電子工程協會 消費性電子國際會議 
 (英文) 2011 IEEE International Symposium on Consumer Electronics 
發表 
論文 
題目 
 (中文)(1) 使用直方圖分析且以內容為基礎降低液晶顯示器背光功率及
影像對比增強之研究 
       (2)以動態校正演算法改進液晶顯示系統 
 (英文)(1) Content-Based LCD Backlight Power Reduction with Image 
Contrast Enhancement Using Histogram Analysis 
        (2) Dynamic Gamma-Correction Algorithm for Improving Color LCD 
Systems 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
附件三
 
表 Y04 
技術的快速發展之下，平面顯示器以及相關的應用已經具有薄型化、省電、
省能源、輕量化、畫質提昇、視覺效果更佳以及更符合新時代生活需求的人
機溝通媒介等優點。 
近年來，省電技術對於可攜式電子裝置有著重要的影響力，而對於行動
裝置而言，低功率為電路設計之首要課題。目前TFT LCD 已經被廣泛應用
於手持式行動裝置。總觀整體系統功率耗損，TFT LCD功率耗損占總系統功
率耗損的20%~45%，以應用系統不同而有所差異。然而，主宰TFT LCD的功
率耗損最重要的因子為TFT LCD背光的功率耗損，降低背光的電流可以降低
總體功率耗損，但是，隨之而來的缺點是明亮度和對比度的降低，使用者會
明顯發現系統的改變而失去調整電流所得到的優點。所以，如何依照當前的
影像適當的降低電流達到省電目的，及如何依照當前的影像適當的調整影像
的明亮度和對比度，讓使用者不致明顯察覺系統的改變成為當前一個值得研
究的課題。 
目前廣泛使用的有兩種調整背光的方式，其一種為利用環境光來動態調
整背光電流，另一則為利用影像資料來動態調整背光電流。簡單介紹利用環
境光來動態調整背光電流的動作原理，此系統會有光感測器用來偵測環境光
源之強弱，當環境光發生變化時，系統會依照目前光源強弱來調整背光電
流，使操作者達到眼睛舒適的環境，也達到系統省電的目的。即環境光越強
背光電流越大，環境光越弱背光電流越小。另一種則為利用影像資料來動態
調整背光電流，簡單介紹利用影像資料來動態調整背光電流的動作原理，其
方式為利用影像資料來決定背光電流大小，動態改變背光電流大小讓使用者
不致察覺系統發生變化，增加系統總體的操作時間。 
我們專注於利用影像資料來動態調整背光電流的方法，我們提出新式背
光控制演算法，及新式影像增強演算法實現我們的設計架構，來完成系統省
電及影像增強的目的。於新式背光控制演算法中，需要先對當前所需顯示的
影像來進行分析，分析的結果會得到當前影像的平均值及中間值，此時背光
控制器再依照影像的平均值及中間值，來決定背光減少電流的大小，以達到
表 Y04 
第三天（1/11）：今天的議程是Implementations and Architectures for Image/Video 
Codecs，由於這些主題非常熱門，全世界學術界與工業界均提出一些產品，然
而這些產品大部分均為未來的趨勢，另外，可重組化架構已經變得愈來愈重要。
它不僅可以減少研究和發展的時間,而且可以節省製造的費用。此外,此篇提出
的可重組化離散餘旋轉換架構能夠支援各種視訊標準如VC-1、MPEG-1/2/4和
H.264 AVC。它能夠支援四種轉換型式- 8x8、8x4、4x8和4 x4。本架構的優勢
是不需要任何的乘法器和唯讀記憶體電路,它只需要加法器和移位器電路。在數
位電路中, 乘法器和唯讀記憶體電路的面積是遠大於加法器和移位器的面積。
因此,為了能減少能量的耗損,我們實現這個可重組化架構晶片使用90奈米製
程。實驗的結果顯示晶片功率消耗只有3.4mW在100MHz的操作頻率下。實作的處
理器能夠即時處理並操作在HDTV 720P和HDTV 1080P規格。簡潔地說,此提出的
架構是規則的,低功率和可重組化,因此,它可以廣泛的應用在通用的視訊解碼
器。 
第四天（1/12）：今天為此會議最後一天議程，亦是論文發表 Session， 我
發表了使用直方圖分析且以內容為基礎降低液晶顯示器背光功率及影像對比增
強之研究，亦吸引了相當多的關注，使我獲益良多。我們專注於利用影像資料
來動態調整背光電流的方法，我們提出新式背光控制演算法，及新式影像增強
演算法實現我們的設計架構，來完成系統省電及影像增強的目的。於新式背光
控制演算法中，需要先對當前所需顯示的影像來進行分析，分析的結果會得到
當前影像的平均值及中間值，此時背光控制器再依照影像的平均值及中間值，
來決定背光減少電流的大小，以達到利用影像本身的明亮度來決定系統省電多
寡的目的，另一為採用新式影像增強演算法來增強當前影像，依照演算法得到
補償後的影像值輸出到 LCD。我們在 FPGA 上實現新式背光控制演算法，及新式
影像增強演算法，由於前人的研究在動態背光方面大部分著重於冷陰極管的控
制方式，鑒於 LED 背光有著輕薄短小且亮度夠的特性，越來越多的手持式裝置
的背光部份改由 LED 來取代的趨勢，所以，我們實驗的平台也針對 3 吋的 LCD
模組，內有三顆 LED 當模組的背光源，實驗的結果看來，不同的影像平均可以
表 Y04 
第四位，而消費電子產業，亦位居世界前茅。加上政府所建構之良好基礎環境，
科學園區之建設與經驗，電信自由化之驅動，電信國家型計劃快速推動之努力，
未來我國正可以藉由 3C 整合科技之推動與發展，延續半導體 IC 科技與資訊
產業之競爭優勢，並以此聚合資訊、通訊、以及消費性電子領域，帶動民間投
入發展 3C 整體產業，就像二十多年前半導體科技與產業之推動，未來將使我
國高科技產業發展進入另一個重要新紀元，大大提昇國家競爭力。 
國內在 3C 多媒體及顯示應用技術領域研究，近年來在政府大力推動下，有
長足進步，本次會議來自國內的論文有數十篇，分別來自國立中興大學、台師
大、台大、清華、交大、成大等大學，這些論文同時在此次大會發表，對提昇
我國信號，系統與電子研究的國際學術地位有一定的貢獻。建議政府能繼續鼓
勵及推動國內無線通訊領域之研究，繼續提昇國內信號，系統與電子研究的能
力與成果。 
此次會議之論文方向不僅有理論探討，更著重於實務應用，對學術界與工
業界甚有幫助。此一研究趨勢，將有利於產學合作。另外，由於 3C 多媒體及顯
示應用技術非常熱門，全世界學術界與工業界均提出一些方法，這使我瞭解了
目前3C多媒體及顯示應用技術信號處理的困難在於要設計一低功率硬體且能夠
執行多種演算法，只有設計一低功率、高效能的 SOC 是較為理想的解決方案。 參
加此次會議，與各國學者專家交換心得，經驗，相信對我在研究方法、過程、
成果乃至未來研究領域的擴展，助益良多，並能提升研究之品質。 
最後，我深深感謝國科會能給予筆者出席國際會議的機會，讓筆者參加此
一重要國際會議，進行國際交流。建議國內應多爭取舉辦類似大型國際會議，
讓國內學術界及產業界有更多人參與，一方面可激勵國內的信號，系統與電子
領域研究風氣，培育人才，同時可提高我國在國際上的能見度及學術地位。  
 
 (三)攜回資料名稱及內容  
參加此次研討會帶回 2011 年國際電機電子工程協會 消費性電子國際會議
論文集 Proceedings of 2011 IEEE International Symposium on Consumer 
國科會補助計畫衍生研發成果推廣資料表
日期:2011/12/13
國科會補助計畫
計畫名稱: 功率感知無線智慧型視訊監護系統晶片設計(I)
計畫主持人: 賴永康
計畫編號: 99-2221-E-005-113- 學門領域: 積體電路及系統設計
無研發成果推廣資料
Multimedia and Expo (ICME), 
pp.1-6, Jul. 2011. 
[2] Yeong-Kang Lai, Wei-Chun 
Huang and Yu-Fan 
Lai, ’’Moving-Object-Tracking 
Algorithm and Architecture 
Design Based on Motion Vector 
Analysis in H.264/AVC Video 
Encoder,’ 22th VLSI Design/CAD 
Symposium, Aug. 2011. 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
參與計畫人
力 
（外國籍） 
專任助理 0 0 100% 
人次
 
其他成果 
(無法以量化表達
之成果如辦理學
術活動、獲得獎
項、重要國際合
作、研究成果國際
影響力及其他協
助產業技術發展
之具體效益事項
等，請以文字敘述
填列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
