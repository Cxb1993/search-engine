 2 
行政院國家科學委員會專題研究計畫期中成果報告 
 
新世代智慧型全方位居家照護系統-子計畫一：適用居家照護
環境之寰宇資訊中心與使用者行為探勘模式之設計 
The design of ubiquitous information center and user's behavior mining model for 
health care services 
 
計畫編號 ：NSC 99-2221-E-027-059 
執行期限 ：99年 08月 01日至 100年 7月 31日 
主持人 ： 黃有評 教授  國立臺北科技大學 電機工程系 
共同主持人 ：  
計畫參與人員 ： 博士班 – 郭玟琳 
               碩士班 – 柯紜凱、鄭柏偉 
 
              
摘要 
本計畫的重點著重於研發居家照護系
統、中介軟體及觸控電腦介面。隨著醫療
技術的發展，人類的平均壽命逐漸提升，
使得許多國家面臨高齡化的社會結構，而
目前居家照護多半採人員看護方式，但看
護人員可能因為疲勞或其他因素無法全天
候貼身照護。因此，本研究設計一套適用
於居家環境之照護系統，其中包含(1)觸控
電腦介面設計，方便使用者透過觸控螢幕
填寫身心健康評估量表，以利醫療人員查
詢與分析使用者的情況。(2)Zigbee 無線感
測技術，主要是在網頁監測居家環境的溫
溼度紀錄、紅外線感測數據以及心電圖資
料。(3)智慧型手機端應用系統開發，提供
使用者運動管理功能的計步器，依據使用
者運動時的加速度變化頻率估算走路步伐、
行走距離。並整合 Google Maps，以網頁介
面模擬戶外實際散步時的環境。此外，本
研究以模糊推論設計跌倒偵測模組，依據
加速度值的變化，辨識使用者日常活動，
像是坐下、走路、蹲下、躺下等動作，以
及是否發生跌倒之意外狀況，並推測跌倒
方向。實驗結果顯示，計步器步伐偵測準
確率約為 92.7%；若使用者沒有發生跌倒
狀況，系統能 91.5%判斷使用者為正常情
況；若發生跌倒狀況，系統偵測準確率為
89%。由實驗結果顯示本研究所提之系統
適用於居家照護環境。 
關鍵詞：模糊推論、跌倒偵測、智慧型手
機、居家照護、無線感測網路。 
Abstract 
This project is focused on 
implementing an effective home care system, 
developing middleware and designing user 
friendly human-computer interface. With the 
development of new medical technologies, 
the average human lifespan increases and 
induces another problem of aging society 
structure. Most home care needs to hire 
nurses or assistants to take care of elderly 
people. But a nurse may feel fatigue and 
cannot look after a patient all day long. To 
tackle the problems, we present an effective 
home care system that includes: (1) 
human-computer interface design. The 
proposed system allows users to on-line fill 
out a physical and mental health 
questionnaire scale on the touch panel. The 
responded questionnaire can be further 
queried and analyzed by doctors. (2) Zigbee 
wireless sensor network. It is created to 
monitor ambient temperature, humidity, 
infrared sensed data, and ECG values. (3) 
smart phone-based systems design. This 
consists of a pedometer for estimating 
walking steps and distance. The system is 
also integrated to Google Maps as if users 
were walking in the outdoor environment. 
Besides, fuzzy inference methods are used to 
design various fuzzy models for fall 
detection. These presented fuzzy inference 
models can extract user behavior such as 
 4 
發中介軟體之目的。各感測資料間會有不
同的平台架構，因此必須透過整合式中介
軟體來做資訊的整合。即時處理傳送的資
料，在必要時做轉檔工作，在此同時，亦
需確保資料的正確性及完整性。其中在整
合回傳之資料與資料轉檔問題可能會遭遇
各回傳之資料其格式並不一致，資料讀取
間隔亦不一樣，故資料庫更新與重複性問
題，須想辦法解決。解決途徑可以透過分
析各讀取之資料格式，建立轉檔格式，並
將資料庫正規化，如圖 1 所示，以降低資
料庫更新異常並且減少重複性的資料之產
生。 
 
圖 1、資料庫正規化。 
2.2智慧型手機應用系統設計 
本研究使用 Android 作業系統之智慧
型手機來作為開發之平台，利用其內建之
感測器，蒐集並分析使用者活動時的三軸
加速度變化值，以及所在位置 GPS座標和
面向之方位角等資訊，並在智慧型手機平
台上開發應用程式及設計相關介面。 
圖 2 為本研究之硬體架構圖，使用者
將手機配戴於腰部上，計步器會擷取使用
者活動時三軸加速度變化值，計算使用者
行走步伐、距離，以及消耗之卡路里，並
傳送資訊給遠端伺服器，計算使用者虛擬
位置，整合 Google Maps 投影在牆面上，
模擬真實戶外環境。同時，手機內的跌倒
模糊偵測系統使用模糊推論法則判斷使用
者跌倒方向，若發生跌倒狀況，手機會自
動發送警報給伺服器，並透過E-mail方式，
將網路攝影機擷取的跌倒事件過程影片傳
送給醫護人員與使用者家人，醫護人員接
獲緊急通知後，可以連結網路攝影機，進
行遠端影像監控，以確保能夠即時掌握使
用者跌倒後的傷害程度及狀況。 
 
圖 2、硬體架構圖。 
2.3多點觸控平台軟體設計 
本研究之衛生教育宣導系統包括許多
模組：使用者與系統互動功能、應用資料
探勘技術分析不同使用者的觸控模式。系
統軟體主要是以 Flash CS4 平台與程式語
言 ActionScript 3.0開發[1]。 
以下循序說明系統軟體所包含的各種
不同模組功能。 
(1).影音展示模組 
影片播放：透過影片播放功能，讓使
用者透過簡短的影片內容，充分瞭解衛生
教育宣導的相關注意事項。音效播放：觀
看影片的時候，透過聲音效果解說影片內
容。 
(2).資料探勘模組 
觸控模式分析：利用關聯法則資料探
勘，分析不同使用者的觸控模式。 
(3).資料通訊模組 
    Socket [2,3]：系統透過 Socket遠端通
訊 連 線 存 取 數 據 資 料 。 透 過
ExternalInterfaceProxy 類別，Flash 能夠與
C#之間完成資料交換動作。 
(4).資料庫存取模組 
問卷結果：利用 SQLite資料庫，儲存
 6 
28,0,28,0,28,0,28,0。 
轉換後的數值為 0,X其中 X表示溫溼
度數值，單位為攝氏溫度(℃)與相對濕度
(RH)。 
心電圖感測實驗必須使用三個電極貼
片，貼在對應的位置，才能正確的顯示，
將檔案儲存後就可以交由專業的醫療人員
分析。 
步驟二：感測器資料整合 
    由上述的實驗分析與測試，可以將感
測器的功能分為環境監測與醫療兩類，環
境監測的數據可以利用程式來顯示，以一
個MOTE為接收端，另一個MOTE為感測
器接收與封包發射端，整合溫溼度、亮度、
紅外線強弱的數值。 
接收到的封包數值為[RECV (43)] <- 
7E 42 7D 5E 00 7A 7A 20 01 00 00 00 FE 
FF FE FF 21 00 00 00 1C 00 38 00 EB 02 89 
00 00 00 00 00 00 00 00 00 00 00 00 00 20 
04 7E。將資料儲存後，再把有用的資訊轉
成可讀取的資料，就能把環境資料的感測
結果整合顯示，如圖 5所示。 
 
圖 3、溫度感測實驗。 
 
圖 4、溼度感測實驗。 
 
圖 5、心電圖感測實驗。 
3.2智慧型手機應用系統設計 
步驟一：跌倒偵測模糊系統之設計 
跌倒偵測系統流程如圖 6 所示，系統
一開始利用手機內建加速度感測器擷取使
用者活動時的三軸加速度變化值，在分析
訊號之前，先做訊號前處理，包含訊號補
償平移及平滑化演算法，處理完之三軸加
速度值即可作為跌倒偵測模糊系統之輸入
訊號。 
Karantonis 等人[6]認為當使用者跌倒
時，加速度值會產生劇烈的變化量，訊號
會出現極大的峰值，因此提出使用訊號向
量強度總和(Sum Vector Magnitude，SVM)
來檢測使用者活動情況。 
使用 SVM 判別使用者是否發生跌倒
情況後，接著比較加速度 Z與加速度 Y變
化大小，選擇左右跌倒情況模糊規則庫或
前後跌倒情況模糊規則庫，再使用模糊運
算，判斷使用者是否發生跌倒意外，若無
意外發生，則系統繼續正常執行；否則系
統發出警報聲響。 
本研究利用手機內建加速度感測器
[7,8]作為跌倒偵測模糊系統的輸入訊號，
圖 7 為手機靜止狀態放置於平面時，所量
測的三軸加速度值。手機 X、Y 軸為平面
上的二維空間，當手機處於靜止狀態時，
量測的加速度值應趨近於零，而Z軸方向，
即垂直於地表方向，由於在靜止狀態時僅
受重力加速度影響，應趨近於 9.8 N/kg。但
由圖 7 可觀察出實際量測的加速度值有些
許誤差，因此，需對訊號做前處理以對其
 8 
圖 9、跌倒時加速度值變化：(a)前後跌；(b)
左右跌。 
觀察跌倒狀況發生時加速度的變化情
況，本論文針對三軸加速度值 gX, gY, gZ
分別定義三個、五個、五個模糊集合如下： 
gX={Negative (N), Moderate (M), Positive 
(P)}, 
gY={Negative Large (NL), Negative Small 
(NS), Moderate (M), Positive Small (PS), 
Positive Large (PL)}, 
gZ={Negative Large (NL), Negative Small 
(NS), Moderate (M), Positive Small (PS), 
Positive Large (PL)}. 
由於智慧型手機受限於處理器及記憶
體等硬體資源，其運算速度有限，且三角
歸屬函數運算量相對較少，因此本研究採
用三角形搭配梯形歸屬函數作為模糊推論
所需之歸屬函數。跌倒偵測模糊系統的前
件部為三軸加速度 gX, gY, gZ，其歸屬函數
設計如圖 10所示。 
 
(a) 
 
(b) 
 
(c) 
圖 10、前件部歸屬函數：(a)gX；(b)gY；
(c)gZ。 
本研究將跌倒區分為兩種類別，分別
為左右跌及前後跌兩種，其模糊集合定義
如下： 
pitch={Left (LT), Normal (NO), Right (RT)}, 
roll={Backward (BW), Normal (NO), 
Forward(FW)}. 
跌倒偵測後件部採用單值歸屬函數，
圖 11(a)為左右跌之歸屬函數，圖 11(b)為前
後跌之歸屬函數。 
  
 (a) (b) 
圖 11、後件部歸屬函數：(a)左右跌；(b)
前後跌。 
判斷左右跌倒時之模糊規則庫如表 1
所示、前後跌倒時之模糊規則庫如表 2 所
示。針對手機擷取到的每一筆加速度訊號
值，系統會比較𝑧𝑖 − 𝑧𝑖−1與𝑦𝑖 − 𝑦𝑖−1變化較
大者，來選擇相對應的模糊規則庫，再以
最大-最小合成法計算模糊規則的觸發強
度，藉以判斷跌倒的方向。 
表 1. 左右跌倒時之模糊規則庫 
 Z 
X NL NS M PS PL 
P LT LT NO RT RT 
M LT NO NO NO RT 
N LT LT NO RT RT 
表 2. 前後跌倒時之模糊規則庫 
 Y 
X 
NL NS M PS PL 
P FW FW NO BW BW 
M FW NO NO NO BW 
N FW FW NO BW BW 
步驟二：步伐偵測流程與設計 
計步器大多藉由分析使用者行走時的
加速度變化，作為估算步伐數之依據。為
了證明加速度值的變化與使用者行走兩者
確實有關聯，本研究將手機置放於使用者
腰部皮套內，量測使用者實際走路情況之
三軸加速度值，可以發現到使用者行走時，
加速度呈現週期性變化。圖 12為使用者行
走一步的步伐中加速度變化的示意圖，當
使用者跨出步伐時，瞬間加速度會變大，
而踏到地板前，瞬間加速度會趨緩。隨著
使用者繼續行走的步伐，加速度變化會呈
現類似 sin波的週期性曲線[11]。 
 
圖 12、步伐進行之加速度變化情況[11]。 
 10 
此外，分析人員能夠再度依據不同級距之
間的探勘結果，分析級距與答案之間的共
同關聯性，清楚地知道大部分的使用者發
生某種情況之後，也會產生哪一種的心理
或生理反應。在問卷結果分析方面，使用
的是關聯法則資料探勘技術之 FP-tree 及
FP-Growth演算法。 
 
圖 14、多點觸控平台軟體架構。 
 當多點觸控端的使用者填寫完問卷，
系統會透過 Socket連線方式把資料傳送至
後端資料庫之中。此時醫生或專業人員可
以登入問卷資料管理系統執行資料探勘，
輸入探勘的分數級距、最小支持度及最低
信心水準進行資料探勘，送出探勘條件後，
透過 Socket連線方式將探勘條件傳送至後
端伺服器，後端伺服器依據分數級距搜尋
問卷資料庫，再根據搜尋結果進行最小支
持度及最低信心水準之關聯法則資料探勘。
當後端伺服器運算完畢並找出常見項目集
後，系統會再度透過 Socket連線方式傳回
探勘執行結果，此時專業人員能夠更進一
步分析、比較各個級距之間的答案關聯性，
交叉比對不同分數級距之間的大部分使用
者發生某種情況之後，是否也會連帶產生
哪一種的心理或生理反應。 
步驟三：多點觸控平台硬體設計 
多點觸控平台硬體設計如圖15採用符合人
體工學設計的機台，可自由移動機台位置
與調整畫面視角，使一般的使用者能輕鬆
的操作，此外包覆觸控系統的機台也具有
保護與防盜的功能。 
 
圖 15、多點觸控平台硬體設計。 
4. 實驗結果 
4.1中介軟體 
本研究使用的中介軟體能有效整合環
境中的溫度、濕度、照度、紅外線強度及
心電圖資訊並呈現在畫面上。 
圖 16為心電圖程式使用畫面，使用者
將 RA、LA、RL三個部位的電極貼片依序
貼在左胸的三個部位，呈現出三角形的分
布，按下連結按鈕，畫面就能顯示心電圖
的波形。 
圖 17為 Zigbee心電圖接收程式，選擇
電腦端的連接埠按下 Connection 進行封包
傳輸連結，按下後按鈕會轉為 Interrupt，將
接收到的十六進制封包字串暫存後再按下
Interrupt 程式會自動將數據轉換成十進制
格式，最後提取封包中包含心電圖資訊的
字串自動繪出心電圖。 
圖 18為心電圖網頁檢視畫面。將心電
圖資料存入資料庫後，可以從網頁上檢視，
按下 view即可將資料顯示出來，按下編輯
與移除則可以修改資料名稱與移除心電圖
資料。 
圖19是利用Zigbee的環境資訊接收程
式，選擇電腦端的連接埠按下 Connection
進行封包傳輸連結，畫面中的資料表會自
動將日期、時間、溫度、濕度、照度與紅
外線強度資訊及時新增至資料表中，上方
則會顯示資料總筆數，下方的綠色區域會
 12 
 
圖 23、執行介面。 
 
圖 24、身心健康評估登入介面。 
身心健康評估主要由五種評估方式所
組成，包括：國際憂鬱症評估、貝克焦慮
評估(BAI)、匹茲堡睡眠品質評估(PSQI)、
躁症篩檢評估(ASRM)以及酒癮評估，問卷
共 54題，其中 1~9題為國際憂鬱症評估，
圖 25 為國際憂鬱症評估部分題目；10~30
題為貝克焦慮評估(BAI)，圖 26 為貝克焦
慮評估(BAI)部分題目；31~39 題為匹茲堡
睡眠品質評估(PSQI)，圖 27為匹茲堡睡眠
品質評估(PSQI)部分題目；40~44題為躁症
篩檢評估(ASRM)，圖 28 為躁症篩檢評估
(ASRM) 部分題目；45~54題為酒癮評估 ，
圖 29 為酒癮評估部分題目。圖 30 為憂鬱
症與睡眠品質分析結果；圖 31為焦慮症與
躁鬱症分析結果；圖 32為酒癮評估分析結
果。 
 
圖 25、國際憂鬱症評估部分題目。 
 
圖 26、貝克焦慮評估(BAI)部分題目。 
 
圖 27、匹茲堡睡眠品質評估(PSQI)部分題
目。 
 
圖 28、躁症篩檢評估(ASRM) 部分題目。 
 
圖 29、酒癮評估部分題目。 
 14 
表 3、正常活動實驗結果。 
實驗結果 
動作 
種類 
正
常 
跌
倒 
準確率
(%) 
走路 98 2 98 
上樓梯 95 5 95 
下樓梯 93 7 93 
站→坐 81 19 81 
坐→站 87 13 87 
蹲→站 29 1 96.7 
站→蹲 27 3 90 
坐→躺 19 1 95 
躺→坐 20 0 100 
整體辨 
識結果 
549 51 91.5 
 
表 4 為模擬使用者發生跌倒狀況時，
系統根據模糊理論推論出使用者是否發生
跌倒，以及跌倒方向。實驗過程中，依照
前、後、左、右四個方向分別進行 25次的
跌倒實驗，系統對於偵測跌倒方向之判斷
平均準確率為 89%。 
表 4、跌倒偵測實驗結果。 
動作 
實驗 種類 
結果 
前 後 左 右 
前 22 0 0 0 
後 0 21 0 1 
左 0 1 23 0 
右 1 1 0 23 
正常 2 2 2 1 
準確率(%) 88 84 92 92 89 
 
本研究使用 Android 智慧型手機平台
開發計步器程式，在 Google Market上也有
提供許多健身相關的免費應用軟體，為比
較本研究所提方法與市售軟體之優劣，特
地下載兩款計步器，在同樣的實驗環境、
行走速率及配戴位置進行測試對照，兩款
計步器軟體分別為 Pedometer Pro 及
Pedometer Pro Free。 
實驗過程中，使用者將手機配戴於腰
部位置，手機內部的 Pedometer Pro、
Pedometer Pro Free，以及本論文設計之計
步器分別計算使用者行走步伐數，實驗結
果比較如表 5所示。當使用者實際行走 100
步時，Pedometer Pro平均正確偵測到的步
伐數為 35.8步，Pedometer Pro Free為 70.9
步，本研究所設計之計步器為 92.7步。 
式 7為平均絕對值誤差率(MAPE)計算
公式，若以平均絕對值誤差率為判斷指標，
Pedometer Pro誤差率為 64.2%，Pedometer 
Pro Free為 29.1%，本論文計步器為 9.3%。
依據 Lewis 提出之預測能力等級，本論文
計步器屬於高準度之預測系統。式 8 為平
均絕對偏差(MAD)計算公式，若以平均絕
對偏差作為判斷指標，Pedometer Pro誤差
為 64.2%，Pedometer Pro Free為 29.1%，
本論文計步器為 9.3%。 
 MAPE = ∑ |yi−yi′|yini=1
n
× 100%. (7) 
 MAD = ∑ |yi−yi′|ni=1
n
. (8) 
表 5、三款計步器實驗結果及誤差率之比
較。 
ID 
本研究
計步器 
Pedometer 
Pro 
Pedometer 
Pro Free 
1 91 44 68 
2 97 40 65 
3 101 46 78 
4 99 44 76 
5 84 45 78 
6 78 35 74 
7 84 27 67 
8 95 22 67 
9 89 31 65 
10 109 24 71 
平均步伐 92.7 35.8 70.9 
MAPE(%) 9.3 64.2 29.1 
MAD 9.3 64.2 29.1 
 
5. 結論與未來展望 
本研究提出一套醫療照護系統，利用
中介軟體、智慧型手機平台與多點觸控系
統平台達成居家照護的目的。中介軟體可
將環境資訊與使用者心電圖資訊整合至資
料庫並顯示在網頁上，不僅方便醫療人員
檢視，也更容易與電子病例整合，在未來
遠端照護系統將造福更多獨居與行動不便
的病患。 
 16 
China, pp.78-83, Nov. 2010. 
[13] S. -G. Miaou, P. -H. Sung, C. -Y. Huang, 
“A customized human fall detection 
system using omni-camera images and 
personal information,” in Proc. of 
Transdisciplinary Conf. on Distributed 
Diagnosis and Home Healthcare 
(D2H2), Arlington, Virginia, USA, 
pp.39-42, Apr. 2006. 
[14] Great-circle distance, 
http://en.wikipedia.org/wiki/Great-circle
_distance。 
[15] 經 緯 度 距 離 計 算 公 式 ，
http://wywu.pixnet.net/blog/post/26533
759。
 
99 年度專題研究計畫研究成果彙整表 
計畫主持人：黃有評 計畫編號：99-2221-E-027-059- 
計畫名稱：新世代智慧型全方位居家照護系統--子計畫一：適用居家照護環境之寰宇資訊中心與使用
者行為探勘模式之設計 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
1. in Proc. of 
2011 National 
Symp. on System 
Science and 
Engineering, 
Nantou, Taiwan, 
pp.??-??, June 
17-18, 2011. (in 
Chinese) (* 
corresponding 
author) 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 2 2 100%  
博士生 1 1 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 1 100% 
已投稿 IEEE/ACM 
Trans. on 
Computational 
Biology and 
Bioinformatics，
目前在審稿中。 
研究報告/技術報告 0 0 100%  
國外 論文著作 
研討會論文 3 2 100% 
篇 
1.in Proc. of 
Int. Conf. on 
Service and 
Interactive 
Robotics, 
Taichung, 
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
