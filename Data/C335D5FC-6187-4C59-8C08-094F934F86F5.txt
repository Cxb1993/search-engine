 II 
Abstract 
 
To support mobility, most hand-held wireless devices are powered by battery that 
has only a limited amount of energy. Therefore, energy efficiency becomes one of 
most important design issues in wireless networks. However, our proposed 
mechanism is focused on power saving MAC protocol. IEEE 802.11 protocol is one 
of most deployed and popular WLAN system in the world. IEEE 802.11 standard has 
infrastructure and ad hoc network, our MAC protocols are based on the two. 
In first year, we improve the collision that PS stations compete to transmission 
PS-Poll frame in infrastructure network. PS stations can be scheduled to transmit their 
data frames in order after the ATIM window, and change the ATIM window size 
dynamically in ad hoc single-hop network. In second year, PS station schedule their 
data frames according to count the state switch times. In third year, we propose 
protocols that extend the battery lifetime of PS stations, by allowing the device to 
sleep during successive beacon intervals. 
 
Keywords：IEEE 802.11, infrastructure, ad hoc, medium access control (MAC), 
power management. 
 
 
 
 IV 
圖目錄 
圖 1. IEEE 802.11有基礎式架構省電運作模式 ......................................................... 3 
圖 2. OEES的運作模式範例 ....................................................................................... 5 
圖 3. FIFO的運作模式範例 ........................................................................................ 5 
圖 4. IEEE 802.11無基礎式架構省電運作模式 ......................................................... 6 
圖 5. 參考文獻 [44] MULTI-HOP排程運作模式範例 .................................................. 9 
圖 6. 使用 4×4大小的 GRID-BASED QUORUM運作範例 .......................................... 10 
圖 7. 在 4×4的 GRID-BASED QUORUM下，PS STATIONS的 BEACON INTERVAL不同步
的範例.................................................................................................................. 11 
圖 8. 使用 FIFO排程法則 PS STATIONS的總等待時間示意圖 ............................... 13 
圖 9. 使用 SJF排程法則 PS STATIONS的總等待時間示意圖 .................................. 13 
圖 10. AP對傳送順序的排序演算法 ........................................................................ 15 
圖 11. AP計算在這個 BEACON INTERVAL可以傳送的 PS STATONS演算法 ............. 16 
圖 12. PS STATIONS收到 BEACON FRAME後判斷傳送順序演算法 ........................... 16 
圖 13. IEEE 802.11有基礎式架構中 TIM FRAME的格式 ........................................ 17 
圖 14. 使用 SJF排程法則運作例子 ......................................................................... 17 
圖 15. 當 PS STATIONS的 LISTEN INTERVAL≠1時，使用 SJF排程法則運作例子... 19 
圖 16. 省電行動裝置因為訊號干擾、移動、沒電等問題而沒有收到 BEACON 
FRAME，造成排程錯誤的解決例子 ................................................................... 20 
圖 17. 排程通訊協定的運作例子 ............................................................................. 24 
圖 18. 以最短工作優先作排程時無法達到最省電的特例之一 ............................. 26 
圖 19. 第一種結束ATIM WINDOW的時機。當CHANNELIDLETIME >= TDIFS  + TCWMIN
時，每個行動裝置便立刻結束此時的 ATIM WINDOW。 ................................ 28 
圖 20. 第二種結束 ATIM WINDOW的時機。當 REMAININGBI < TATIM + 3TSIFS + 
TFRAMEMIN + 2TACK時，每個行動主機便立刻結束此時的 ATIM WINDOW。 .. 29 
圖 21. NEED-ATIM架構 ............................................................................................. 31 
圖 22. ATIM WINDOW傳輸封包合併示意圖 ............................................................. 32 
圖 23. ATIM FRAME會包含自己可以使用的時間，接收端收到 ATIM FRAME後會
去計算並決定傳輸起始時間並發個 ACK告知傳送端，傳送端收到
ATIM-ACK後會再發個 RACK封包告知傳送端四周鄰居已經選用的傳輸時
段.......................................................................................................................... 33 
圖 24. 無線網路裝置狀態轉換圖 ............................................................................. 34 
圖 25. (A)無線媒體目前排程狀況，(B)C傳給 D的傳輸配對放置於前面，(C) C傳
給 D的傳輸配對放置於後面 ............................................................................. 35 
圖 26. (A)C傳給 D的傳輸配對放置於前面的狀態轉換，(B)C傳給 D的傳輸配對
放置於後面的狀態轉換...................................................................................... 36 
圖 27. 網路傳輸預約圖 ............................................................................................. 37 
圖 28. (A)傳輸排在中間，需 4次狀態轉換，(B)傳輸排到後端，需 2次狀態轉換，
 VI 
圖 53. 100個 PS STATIONS的模擬網路拓樸 ............................................................. 58 
圖 54. 總傳輸配對數與產能比較圖 ......................................................................... 59 
圖 55. 總傳輸配對數與每焦耳電力成功傳輸的封包數比較圖 ............................. 59 
圖 56. 狀態轉換次數與總傳輸配對數的比較圖 ..................................................... 60 
圖 57. 狀態轉換的電力消耗與總傳輸配對數的比較圖 ......................................... 60 
圖 58. PACKET DELAY與總傳輸配對數的比較圖 ...................................................... 61 
圖 59. 100個 PS STATIONS與 100個 ACTIVE STATIONS的模擬網路拓樸 ................ 61 
圖 60. 總傳輸配對數與產能比較圖 ......................................................................... 62 
圖 61. 總傳輸配對數與每焦耳電力成功傳輸的封包數比較圖 ............................. 62 
圖 62. 平均每個 BEACON INTERVAL的電量消耗 (DATA TRAFFIC LOAD=0.1 
FRAMES/SEC/STATION)。 ....................................................................................... 64 
圖 63. 發現鄰居所需要的時間，(A) TOTAL 30 MOBILE STATIONS AND DATA TRAFFIC 
LOAD = 0.1 FRAMES/SEC/STATION，(B) TOTAL 70 MOBILE STATIONS AND DATA 
TRAFFIC LOAD = 0.1 FRAMES/SEC/STATION。 ........................................................ 64 
圖 64. 單位時間所成功接收的資料量 (BEACON INTERVAL=300 MS)....................... 65 
圖 65. 每單位焦耳的資料量 (BEACON INTERVAL=300 MS)....................................... 65 
 
 
  1 
第一章 序論 
1.1 前言 
無線通訊技術的發展目前已有相當多的研究人員投入，而其應用在全球更是
相當的普及，正式宣告了無線通訊時代的來臨。目前最常為大眾所使用之無線通
訊協定是以 IEEE 802.11 [1] 為標準所建構的無線區域網路 (wireless local area 
network, WLAN)，在各個公共場所、政府機關、企業團體、學校、一般家庭中都
可以看見 IEEE 802.11無線區域網路的建置。 
現今隨著無線網際網路上網人口增加與智慧型手機、PDA、筆記型電腦的普
及，使用者利用公眾無線區域網路無線上網的機會逐漸增加，構建一個完善的無
線區域網路環境，讓使用者可以在任何時間、任何地點擷取多元化的數位服務，
亦可創造無限商機。 
在 IEEE 802.11 的標準規範中，有兩種主要的網路架構，分別是有基礎式架
構 (infrastructure) 的無線區域網路及無基礎式架構 (ad hoc) 的無線區域網路。
有基礎式架構的無線區域網路，必須在環境中架設存取點 (access point, AP)，在
存取點所覆蓋範圍內的行動裝置皆透過存取點連接網路。而 ad hoc 無線區域網
路，是沒有基地台 (base station, BS) 或存取點設施存在的環境。Ad hoc 與
infrastructure無線區域網路的區別在於行動裝置之間的通訊方式。Ad hoc網路是
在沒有固定基礎設施 (例如 AP 或 BS) 支援的條件下進行的，系統支援動態配
置，所有網路的運作也都必須是分散式的協定。由於這類網路的組織和控制並不
依賴於某些重要的中央控制主機，所以它們允許行動裝置發生故障、離開網路或
加入網路；這也就是說每一個移動行動裝置可以根據自己的需要在整個網路內隨
意移動，而無須考慮如何維護與其它實體間的通訊。因此具備動態連接、容錯和
恢復連接等能力，這些都是這類網路得以實現的基本要求。 
公眾無線區域網路建置屬於 infrastructure 網路環境，政府或業者架設存取
點，提供使用者透過存取點連上網路，進行各項應用。Ad hoc 無線網路可以用
於不方便或需及時設置無線基礎設施的場合。隨著技術的進步和社會的發展，特
別是人們對個人通訊日益增長的需求，使得 Ad hoc 無線網路的應用範圍正逐步
擴大，其中包括商業或一般用途和軍事用途等許多領域。在商業或一般用途中，
它可用於戶外視訊會議、自然或人為災難營救過程中的資訊交換等；在軍事用途
中，它可以支持野外聯絡、獨立戰鬥群和艦隊戰鬥群通訊、無人偵察與情報傳輸
等。可以預測，這種技術在未來移動通訊的市場上將扮演非常重要的角色。 
 
1.2 研究動機與目的 
使用無線行動裝置的優點是可以不受時間、地點的限制任意的存取網路上的
資訊。行動裝置為了支援行動性，各行動裝置必須使用電池供電，但是電池的電
量有限，只能維持一定時間下的運作。因此，電量的使用效能變成了無線網路中
一個重要的設計議題。在行動裝置運作過程中又以無線網路傳輸設備所損耗的電
力佔大部分 [2]。因此改善媒體存取控制層 (media access control, MAC) 之通訊
  3 
的發射功率。這類協定雖可提升頻道的使用效率，但是依然無法節省大量電源。
無線通訊協定大致上可分類為 application layer protocols [9-11]、transport layer 
[12]、network layer [13-16] 和 medium access control (MAC) [17-23] 等。參考文
獻 [2] 中已經指出改善 MAC 層通訊協定可以明顯地減少行動主機的電源消
耗。所以，我們這個計畫亦著重在節省 IEEE 802.11無線區域網路中MAC層通
訊協定的電量消耗，改善既有的媒體存取通訊協定，期望達到電量最有效利用。 
 
2.1 第一年 
在 IEEE 802.11的標準規範中，包含了 distributed coordination function (DCF) 
和 point coordination function (PCF)。其中 DCF是分散式的機制，PCF則是集中
式的機制。它也提供了兩種不同的電源管理方案：一種是 infrastructure、另外一
種是 ad hoc mode。參考文獻 [24] 指出 DCF是建立在 carrier sense multiple access 
with collision avoidance  (CSMA/CA) 的基礎下的，由於訊框碰撞和等待傳送的
時間會導致訊框延遲的增長，也會浪費珍貴的電池電量和頻寬。針對 DCF 的缺
點，在 infrastructure和 ad hoc mode下，皆有研究人員提出相當多的改善方法。 
 
2.1.1 Infrastructure networks 
電源管理方案將時間軸分成各個等分的 beacon interval。在每一個 beacon 
interval 開始的時候，AP會發送 beacon frame，而記錄 PS stations是否有資料暫
存在 AP中的資訊 traffic indication map (TIM) frame會附在 beacon frame裡，隨
著 beacon frame廣播給在其覆蓋範圍裡所有的行動裝置，處於省電模式的行動裝
置會在每隔一段時間醒來接收 beacon frame，PS stations收到 beacon frame後會
依照 AID (association identifier, AP給 PS station的 ID) 察看 TIM，若是值為 1則
表示有資料暫存在AP中；若是值為 0則表示沒有資料暫存在AP中。當PS stations
收完 beacon frame後，若沒有資料暫存在 AP則會進入睡眠，直到下次預定醒來
時間再次醒來接收 beacon frame；若有資料暫存在 AP時，則會依照 DCF規則競
爭媒體發送 power-save poll (PS-Poll) frame給 AP，當 AP收到 PS station傳送的
PS-Poll後，會將此 PS station暫存的資料傳送給他。其運作模式如圖 1所示。 
 
AP
A
B
C
TIM
PS-Poll
PS-Poll
beacon  interval
DTIM interval
DTIM DTIMTIM TIM
PS-Poll
data data data
ACK
ACK
ACK
 
圖 1. IEEE 802.11有基礎式架構省電運作模式 
  5 
間傳送或是其他機制，此點沒有說明清楚。因為若是時間過長，其他省電行動裝
置設定的等待時間結束則會發送 PS-Poll frame，因此而造成碰撞的產生。更嚴重
的是當等待時間超過 DIFS，非省電行動裝置也會加入競爭，到時將會讓省電行
動裝置傳送更加困難。另一個重要問題是，他所採取的 FIFO的排程法則，若是
AP先收到的資料量很大，後收到的資料量較小，會使得後面的 PS stations等待
過長的時間而造成電量的浪費。另外，作者並沒有提到若是需要先傳 PS-Poll 
frame給 AP的 PS station並沒有在這個 beacon interval醒來，而 AP等不到排程
的 PS station所傳送的 PS-Poll frame，這時應該怎麼辦？因此本計畫會針對這些
問題提出改善方法。 
 
AP
1
2
SIFS
Beacon
P-ACK
beacon interval next  BI
ACK
ACK
k
P-ACK
…… ……
P-ACK
TIM
3
………
 
圖 2. OEES的運作模式範例 
 
表 1. AP中的暫存狀態，()裡數字表示所要傳送的資料量 
A (20) B (15) C (10) 
 
AP
A
B
C
C
10
B
15
A
20
beacon
PS-Poll
PS-Poll
PS-Poll
beacon  interval
Next  BI
ACK
ACK
ACK
A
B C
 
圖 3. FIFO的運作模式範例 
 
  7 
算法，終究不能完全避免已成功發送過 ATIM frame的行動裝置，在 ATIM window 
結束後與其它想送資料的行動裝置再一次競爭頻道，造成無謂的電量消耗。大部
分的排程演算法 [31-33]，是針對集中式或是 master-driven而設計的，若是依分
散式的系統而設計的排程演算法 [30] 也終究不能完全避免媒介的競爭或因
backoff所造成的資料延遲傳送。我們觀察到在 IEEE 802.11省電的 protocol中，
在 ATIM window期間，每個行動裝置都會醒來，因此在 single-hop無線 ad hoc
網路中的 ATIM window期間，行動裝置可以監聽到網路上所傳遞的每一個 ATIM 
frame，依此特性行動裝置可以計算，在 ATIM window後每一個即將被傳送的 data 
frame，需花多少工作時間 (working duration) 得以傳送完畢。根據這些現象，我
們提出了一個有效率的排程演算法，可以避免在 ATIM window後處於省電模式
的行動裝置，再次與其他行動裝置競爭傳輸媒介，且此演算法不需要其他額外的
花費 (overhead)。 
在 IEEE 802.11 的電源管理方法中，並沒有明確地規範在如何選擇適當的
ATIM window，而Woesner在 [34] 中已提出，固定的 ATIM window 並不能達
到最佳的網路產能。因此，如何選擇一個適當的 ATIM window便是另一個設計
議題；ATIM window的大小會影響電量的消耗和網路的產能，所以 ATIM window
應該依 traffic load做動態的調整，以提升網路的效能。參考文獻 [35] 設計了一
個機制，可以動態的選擇 ATIM window的大小去改善網路產能，但是這個方法
沒有考慮到網路上存在 active行動裝置時，可能會強佔頻道而使得 PS stations無
法在 ATIM window期間送出 ATIM frames，並需要較多的 overhead及限制，另
外它並不支援傳送排程。因此，我們提出一個新穎的策略，在不增加網路 overhead
的前提下，根據 traffic load去動態調整 ATIM window的大小。用此策略，處於
省電模式的行動裝置可以更進一步節省他們的電力，並且可以提升頻道的使用
率。 
 
2.2 第二年 
在 IEEE 802.11 ad hoc省電模式，無線網路裝置之間必須是 single-hop環境
下才可以正常的運作。事實上無線網路環境是 single-hop的情況實在是非常少，
多半我們所使用的都是 multi-hop的網路環境。在 multi-hop的環境下設計一套通
訊協定是一項艱鉅的任務，因為在 multi-hop 環境下無線網路裝置都只能聽到自
己鄰居的訊號，並無法像 single-hop 環境一樣有效的掌握網路環境裡全部的狀
況。而在 multi-hop ad hoc 環境下所探討的省電又有分兩種不同的情況，一種是
在非同步的環境中，一種是在同步的環境中，在非同步的環境中探討的省電方法
有 [36-38]，在同步的環境中的省電方法有 [39-40]，而我們的計畫著重於同步的
環境之下，關於同步的技術，所提出的方法有 [41-43]，因此同步的技術並不是
不可行的。 
在參考文獻 [40] 中則是有許多 multi-hop ad hoc 環境下潛在的問題沒去考
慮。這個協定主要是把 beacon interval分為 guard time、ATIM window、size-control 
  9 
TBTT
ATIM window
ATIM(1,2) data frame
TBTT
Beacon
ACK(1,2)
ACK
power save state
A
B
C
ATIM(3,4,5)
ACK(3,4,5)
D
ACK
slot 1 2 3 4 5 6 7
data frame
beacon interval (i.e. BI)
 
圖 5. 參考文獻 [44] multi-hop排程運作模式範例 
 
參考文獻 [45] 提出了 CS-ATIM protocol，認為當行動裝置無封包要傳送或
接收時，行動裝置可以不需要等待 ATIM window結束再進入睡眠模式。作者是
利用有資料要傳送的傳送端在 beacon interval一開始發送個假的封包告知四周鄰
居需要在 ATIM window醒來。而發送這個假的封包的傳送端與在 beacon interval
一開始的一小段時間內偵測到媒體是忙碌的行動裝置都必須要在 ATIM window
維持醒來的狀態，如此才能正常的在 ATIM window預約傳輸。反之若在 beacon 
interval 一開始的一段時間內未發送假的封包或是未偵測到媒體忙碌，則即可立
即進入睡眠模式。而我們的通訊協定就是利用作者的概念，把它與我們的排程省
電媒體存取控制協定結合，並加以改進，讓我們的省電媒體存取控制協定能夠有
更好的省電效果。 
 
2.3 第三年 
 在上面敘述了 IEEE 802.11基礎的省電協定，也介紹了很多省電的方法，但
是都是著重於在一個 beacon interval 中的排程方法或是使傳輸協定能夠更有效
率，這些方法仍然遵從 IEEE 802.11基礎的省電協定，規定每個 PS stations必須
在每個beacon interval都醒來至少ATIM window的時間來聽是否有資料要接收或
傳送，但是這個方法會有個缺點，由於每個 PS stations在每個 beacon interval都
需至少醒來 ATIM window的時間，若是 PS stations沒有資料要收送，則會造成
PS stations電量的浪費，因此希望 PS statons不要每個 beacon interval都醒來，以
達到電量的節省。 
 參考文獻 [46-50] 提出了 PS stations不要每個 beacon interval 都醒來的省電
運作方法。參考文獻 [48] 中，將 PS stations 分成 master 和 salve，處於 master
狀態的 PS stations要一直醒著並且當作中間者傳送其他 PS stations的資料；處於
slave 狀態的 PS stations 不需每個 beacon interval 都醒來，只需固定每隔一段
  11 
interval不同步，仍然可以在 n2個 beacon interval中有相同的 beacon interval會遇
到彼此。以圖 7為例，假設 station A的第 0個 beacon interval相對於 station B是
第 6個 beacon interval，以 4×4大小為選擇的 grid-based Quorum，station A選擇
的是第一行、第一列，station B選擇的是第四行、第四列，在 n2個 beacon interval
中，station A在第 1個 beacon interval和 station B的第 7個 beacon interval會遇到
彼此，且 station A在第 8個 beacon interval和 station B的第 14個 beacon interval
會遇到彼此。 
 
 
圖 7. 在 4×4的 grid-based Quorum下，PS stations的 beacon interval不同步的範
例 
 
使用 grid-based Quorum 的方法雖然可以使 PS stations 不需要每個 beacon 
interval都醒來，並且任意兩個 PS stations一定會在相同的 beacon interval遇到彼
此，讓傳輸可以正常的運作，但是 gird-based Quorum的方法每 n2個 beacon interval
需要醒來 2n-1個，醒來次數過多，因此本論文會保留任意兩個 PS stations一定
會在相同的 beacon interval遇到彼此的優點，針對醒來次數過多提出改善方法。 
 
 
第三章 方法 
一個好的省電通訊協定，不僅要能達到省電的目的，還要能避免資料被延遲
傳送，並且要讓單位電量所能傳輸的資料量增加。因此我們這個計畫的目的是在
IEEE 802.11無線區域網路模式下，設計出同時具有省電並兼顧傳輸效能的MAC
層通訊協定。第一年分別於有基礎式 infrastructure 架構和無基礎式 ad hoc 的
single-hop 環境下提出省電的 MAC 層通訊協定。在 infrastructure 架構下設計一
個避免碰撞且有效率的排程法則。在 ad hoc 架構下的通訊協定包含兩個主要部
  13 
station C = 10 + 12 = 22)；使用 SJF排程法則，傳送順序為 B→C→A，其運作模
式如圖 9，則 PS stations的總等待時間為 9 ms (station A + station C = 7 + 2 = 9)。
所有 PS stations的總等待時間較少，則浪費的電量也較少。 
 
表 2. 在 AP中的暫存狀態，()裡數字表示所要傳送所花費的時間 
A (10) B (2) C (5) 
 
A
10
B
5
C
2
A
B
C
 
圖 8. 使用 FIFO排程法則 PS stations的總等待時間示意圖 
 
A
10
B
5
C
2
A
B
C
 
圖 9. 使用 SJF排程法則 PS stations的總等待時間示意圖 
 
對於 AP內部暫存資料的方法，若是只採取的是 SJF排程法則，將要傳給 PS 
stations 的資料量由小到大依序排列，則會產生一個問題，資料量大的都會被排
在後面，可能使得資料量大的省電行動裝置無法接收到資料。舉例來說，假設一
個 beacon interval可以傳送的資料量大小為 50單位，在第 i個 beacon interval開
始時 AP排序後的暫存狀態如表 3所示，則在第 i個 beacon interval裡可以傳送
的 PS stations如表 4所示；如果在第 i個 beacon interval裡 AP又有收到其他需
要暫存 PS stations的資料，在第 i+1個 beacon interval開始時 AP將上個 beacon 
interval沒傳送的和新增的 PS stations排序後的暫存狀態如表 5所示，則在第 i+1
個 beacon interval裡可以傳送的 PS stations如表 6所示，此時會發生暫存資料大
的如 station D會無法進入排程傳送順序，而造成無法傳送的問題。 
 
表 3表 3.1-2 假設第 i個 beacon interval開始時 AP排序後的暫存狀態 
PS station (資料大小) A (5) B (15) C (20) D (28) 
  15 
 
Algorithm 1. The transmission scheduler 
TIM[] : the array recorded the transmission order 
buffer-queue {AID, datasize, data} : the to-be-transmitted data 
frames buffered in AP 
transmit-queue {AID, datasize, data} : the to-be-transmitted data 
frames in the current interval 
new-data {AID, datasize, data} : the new data arrivals at AP  
temp-data {AID, datasize, data} : a temp item of implementing this 
algorithm  
 
/* When the new data arrivals at AP, the AP inserts the new data into 
the buffer-queue. */ 
enqueue( buffer-queue, new-data ) 
 
/* call the algorithm 2 to get the transmit-queue which can transmit 
in the current interval */ 
transmit-queue ← NULL 
Algorithm 2( buffer-queue, transmit-queue ) 
 
/* sort elements in the transmit-queue according to datasize */ 
sorting(transmit-queue) 
 
/* give the TIM value according to the transmit-queue orderly */ 
TIM[] ← {0} 
i ← 1 
temp-data.AID ← max-val 
temp-data.datasize ← NULL 
temp-data.data ← NULL 
enqueue(transmit-queue, temp-data) 
temp-data ← dequeue(transmit-queue) 
while (temp-data.AID != max-val) 
TIM[temp-data.AID] ← i 
i ← i + 1 
enqueue(transmit-queue, temp-data) 
temp-data ← dequeue(transmit-queue) 
end while 
圖 10. AP對傳送順序的排序演算法 
  17 
 
圖 13. IEEE 802.11有基礎式架構中 TIM frame的格式 
 
表 7. 修改後的 TIM frame例子 
AID 1 2 3 4 5 6 
Partial Virtual Bitmap 0 0 2 0 1 3 
 
接下來以圖 14來說明 SJF的運作規則，假設目前有 station A、B、C的資料
暫時儲存在AP中，其資料大小和順序如表8所示。當 station A看到在beacon frame
裡的 TIM自己是 AP要傳資料的第一順位，在收到 beacon frame之後經過 SIFS
的時間，會傳送CF-PS-Poll frame給AP，而AP在收到 station A的CF-PS-Poll frame
後經過 SIFS 時間就會將 station A的資料傳送給他，此時其他 stations 可以聽到
AP 傳送資料給 station A，依照資料所需要傳送的時間設定 NAV (network 
allocation vector) 值，能夠抑制自己想要傳送的行為；station B 在收到 beacon 
frame時，可以知道自己是 AP所要傳送的第二順位，當 AP將 station A的資料
傳送完成時，station B會在經過 SIFS的時間後傳送 CF-PS-Poll frame給 AP，AP
收到 station B所傳送的 CF-PS-Poll frame時，會在 SIFS時間之後將 station B的
資料傳送給他，此時其他的 stations 也可藉由聽到 AP 正在傳送的資料來設定自
己的 NAV值，依此類推。這樣的排程法則可以避免碰撞的情況發生，藉以解決
PS stations同時競爭發送 PS-Poll給 AP而產生碰撞，因此造成等待時間過長和電
量浪費的問題。 
 
表 8. SJF運作，AP暫存狀態的例子，()裡數字表示所要傳送的資料量大小 
A (10) B (15) C (20) 
 
AP
A
B
C
A
10
B
15
C
20
SIFS
Beacon
CF-PS-Poll
CF-PS-poll
CF-PS-poll
beacon  interval
Next  BI
ACK
ACK
ACK
A → B → C
 
圖 14. 使用 SJF排程法則運作例子 
  19 
定下次醒來時間後進入睡眠；AID等於 3和 4的 PS stations收完 beacon frame後
得知在這個beacon interval的傳送順序，傳送程序與之前 listen interval＝1時相同。 
 
表 9. 當 PS stations的 listen interval≠1時，AP記錄的 TIM frame例子 
AID 1 2 3 4 
Partial Virtual Bitmap 254 0 2 1 
 
AP
1
2
3
SIFS
Beacon
CF-PS-Poll
CF-PS-Poll
beacon  interval
Next  BI
ACK
ACK
4
Beacon
Station 1 在這個 
beacon interval會
醒來接收beacon 
frame
 
圖 15. 當 PS stations的 listen interval≠1時，使用 SJF排程法則運作例子 
 
(三) Fault tolerance issues 
另外，若省電行動裝置因為訊號干擾、移動、沒電等問題，因此沒有收到
beacon frame而造成沒有獲得傳送的順序，在預定的時間就不會傳送 CF-PS-Poll
給 AP，則會造成排程的錯誤。 
針對這個問題，本計畫設計了一個解決辦法，其運作模式如圖 16所示。假
設 AP所要傳送的資料大小和順序如表 8所示，在這個 beacon interval時，station 
A因為訊號干擾而沒有收到 beacon frame，造成 AP無法收到 station A所傳送的
CF-PS-Poll訊框，因此 AP在經過 PIFS時間，去除掉 station A的順序，重新發
送一次 TIM，修改順序為 B→C，此時 station B、C收到後可以更改其順序，並
依照所獲得的順序傳送 CF-PS-Poll訊框。 
由於媒體若閒置 DIFS時間，其他行動裝置若有資料要傳送則會競爭媒體，
到時經過排序的省電行動裝置將無法按照排程傳送接收資料，因此 AP 在經過
PIFS 的時間，仍然沒有收到預定順序的省電行動裝置所傳送的 CF-PS-Poll，則
判斷此 PS station沒有收到 beacon frame，因此 AP將這個 PS station順序去除，
重新廣播更新順序後的 TIM frame。 
  21 
因此發生錯排的次數為 33 2 2
n na C a n= × × 。當有 4個人接收資料時，四人中任兩個
人 42C 發生錯排的情況與 2
na 相同，而另兩人則有 n2種情況，因此發生錯排的次數
為 4 24 2 2
n na C a n= × × 。因此當有 k個人接收資料時，其錯排次數 N為 
2 2 1
2 2
( 1) ( 1) ( 1)( 1)
2 2 4
n k n k k k
k
k k n n k k nN a C a n n n− − −− − − −= = × × = × × = ×          (2) 
 
假設有 k 個人接收 n 種資料長度時，共有 nk 個不同排序 ( 1S  , 2S  , …., 
kn
S )，設 iS 發生的機率為 iP，因此 1 2 ..... 1knP P P+ + + = ，我們可知 1S 、 2S 、.…和
kn
S 發生機率相同  (因為每種資料長度出現的機率相同)，因此 1P = 2P =….= 
kn
P = 1kn
。 
發生錯排的期望次數 N為 
N ＝ 1P ×Disorder( 1S )+ 2P ×Disorder( 2S )+….+ knP ×Disorder( knS )  
＝ 1kn
×Disorder( 1S )+
1
kn
×Disorder( 2S )+….+
1
kn
×Disorder( knS ) 
＝ 1kn
×
1
( )
kn
i
i
Disorder S
=
∑                                           (3) 
Si 發生錯排次數為 Disorder(Si)。假設有 3個人接中 3種資料長度 (1, 2, 3 bytes)，
其排序種類為 S1={1, 1, 1}、S2={1, 1, 2}、S3={1, 1, 3}、S4={1, 2, 1}、….、S26={3, 
3, 2}、S27={3, 3, 3}。因此 Disorder(S1)、Disorder(S2)、和 Disorder(S3) 其值為 0； 
Disorder(S4)=1；Disorder(S26)=2。所以
1
( )
kn
i
i
Disorder S
=
∑ 為所有排序種類發生錯排
的總次數，其值等於 N，因此將公式(2)代入公式(3)可獲得 N值。 
11 ( 1)( 1) ( 1)( 1)
4 4
k
k
k k n k k nN n
n n
−− − − −= × × = .                          (4) 
 
 平均錯排一次的電量差 ε 
平均錯排一次的電量差 ( / )l p rε = ×                                   (5) 
l (bytes) 是兩個資料發生錯排時其平均資料差，p (joule/sec)是接收資料時所需消
耗的電量，r (bytes/sec)是資料傳輸的速率。 
 假設有兩個資料大小為 12 bytes 和 5 bytes，當其發生錯排時其資料差為
12-5=7 bytes。但是每次發生錯排時其資料差大小不一定一樣，因此我們要計算
  23 
充分節省了更多的電池能量。而 active stations也因為減少了與 PS stations的競
爭所以提高了頻道的使用率。這個機制跟標準的 IEEE 802.11 的設計不同，在
IEEE 802.11 的標準中，若一個 PS station 在 ATIM window 裡接到一個 ATIM 
frame，應該保持醒著的狀態直到下一次 beacon interval的 ATIM window結束。
因此，在 ATIM window結束後所有的 stations (包含 PS stations與 active stations)
一起競爭頻道的傳輸，造成 PS stations的電能嚴重耗損。 
我們所設計的排程演算法中，必須先決定每一個 PS station在 ATIM window 
結束後傳送 data frames 的次序。為了更進一步讓整個網路上的總耗電量最低，
我們設計的演算法將以網路上每個 PS station的平均等待時間最小為最高設計原
則。這是因為最小等待時間就是最小的耗電量。根據這樣的設計原則我們提出以
下的排程演算法。 
在我們提出的排程演算法中，我們稱 data frame 的傳輸時間為 working 
duration，它被夾帶在每一個傳送出去的 ATIM frame 裡。一個 station 的 total 
working duration是一個 station的所有working duration加總，包括它在這次beacon 
interval中所有需要傳送及接收 data frames的時間。為了要縮小網路上每個 node
的平均等待時間，我們使用最短工作時間優先的方法 (shortest job first) ，所以
在 ATIM window結束之後，擁有最短 total working duration的節點，可以第一個
傳送它所暫存的或欲傳送的 data frames。這個排程傳送機制的設計為了讓 PS 
stations可以延長它們的電池生命，在完成了所有 PS stations傳送之後，剩下的
beacon interval 時間，用以讓其它的 active nodes依照 DCF程序，去競爭這個媒
介來傳送資料 frames。這個機制可以分成三個步驟，說明如下： 
 
(1) 建立傳送表 
就如同 IEEE 802.11一樣，所有 stations都是 fully connected且時間同步，所
以所有 PS stations的 beacon interval的起始時間相同。在 beacon interval開始的
時候，每一個 station會在 ATIM window期間保持醒著。若有一個 station有為網
路中任一 PS station 暫存 data frame，或是 PS station 的記憶體中有暫存的 data 
frame要送給其他的 station，他們將會在 ATIM window期間送出 ATIM frames給
他們的接收者。當接收到 ATIM frames之後，接收者會回應一個 ATIM ACKs，
即完成在 ATIM window 之後保留他們要傳送 data frame的權利。此處的 ATIM 
frame裡包含了傳送者的 ID、接收者的 ID和傳送者在 ATIM window 之後需花
多少的時間來此筆 data frame (稱之為 working duration) 給接收者，可以記做
ATIM(Sender_ID，Receiver_ID，Working_Duration)。因為無線媒介的傳播特性，
任何其他的 station都可以監聽到每一個 ATIM frame裡的資訊。 
我們利用圖 17來說明我們的方法，網路上有五個 PS stations，分別為節點 A、
B、C、D及 E，在 ATIM window 期間，只有四個 ATIM frame被成功的發送，
分別是 (A，B，10)、(A，C，20)、(B，C，30)、及 (D，E，40)，而網路上的每
一個節點，皆會建置一個如表 10 傳送表 (transmission table)。它表示節點 A 在
  25 
的新傳送表則如表 11所示。自表 11我們可以很容易地知道下一個傳送將是(B→
C)，這兩個步驟將重覆至網路上每個 station 的傳送順序都決定為止。因此以此
例而言，最終的傳送順序為(A→B)及(A→C)、(B→C)然後才是(D→E)。 
 
表 11. 傳送表 (transmission table) 
Sender_ID Receiver_ID Working_Duration 
B C 30 
D E 40 
 
(3) 傳送 PS station的 data frame 
在 ATIM window結束後，每個 station依據先前排序的結果，依次傳送 data 
frames，而每個 station可使用頻道的時間為將與 ATIM frame中定義的時間相同。
我們一樣用圖 17 來說我們的運作方式；在 ATIM window 結束之後，等待一個
SIFS的時間，station A首先將 data frames送出給 station B，待 station A與 B完成
他們的資料交換後，station A再等待一個 SIFS的時間，將 data frames送給 station 
C，當 station A完成資料傳送後便可以回到睡眠狀態；接著 station B同樣等待 SIFS
時間後，將 data frames送給 station C，結束後亦可進入睡眠狀況，最後 station D
與 E以相同的資料傳送的方式傳送 data frames及 ACK。當整個傳輸排程完成後，
剩餘的 beacon interval將可供其他網路上 active station，依 DCF程序競爭發送他
們欲傳送的 data frames。 
上述我們評估省電效能的方法是取網路上所有 stations等待時間加總最小為
原則，因為等待時間愈短，所消耗的總電量就愈低；因此我們採用最短工作優先
的演算法來作為決定傳送順序的依據。然而，有一種情況是例外的，如圖 18所
示，其計算過後之 transmission table 如表 12，表 12中的 station D及 E，在整個
transmission table 中資料交換過程中與其他的節點沒有關係，也就是當他們兩者
的資料交換完成後，便可同時進入睡眠，我們稱之為成對的資料流 (pair-flow)，
此時若讓此 pair-flow 有第一個資料傳送的權利，有機會讓整個網路的總耗電量
降低；從表 12裡，我們已知道 station Ａ、Ｂ、Ｃ、Ｄ及Ｅ的 total working during
分別為 20、30、50、35、及 35。理論上，station Ａ擁有最小旳 total working duration，
station Ａ將會成為 ATIM window之後第一個傳送資料訊框的 station；但是因為
transmission table 中存在著 station Ｄ及Ｅ的 pair-flow，此時我們若試圖將其設
定為第一個傳送者，接著我們依照步驟(b)，將 ATIM（D，E，35）刪除，此時
由於 transmission table中，station Ａ的 total working duration 最少，則Ａ成為第
二個資料訊框傳送者，則此時的傳送順序將變為 (D→E)、(A→B) 及 (A→C)、
然後才是 (B→C)，我們發現這樣排序的結果網路上各 station 等待時間加總為
35*5+(10+20)*3+30*2=325，小於將擁有最短 total working duration的 station A設
為第一個傳送者時的等待時間加總，這樣的傳送順序為 (A→B)及(A→C)、(B→
C)然後才是(D→E)，等待時間加總為(10+20)*5+30*4+35*2=340，但是，這樣的
  27 
不是閒置的狀況，導致此 station 無法將資料送出，此時我們的處理方式是先判
斷此雜訊持續的時間，若超過此 station 的預定資料傳送結束時間，則此 station
在預定資料傳送結束時間便回到睡眠狀態；若雜訊持續時間未超過預定資料傳送
結束時間，此 station則重新計算 transmission table中剩下尚未傳送的 data frames
的傳送順序，並於頻道閒置 PIFS 後將此 transmission table 夾帶於其 data frame
中送出，網路上其他 stations將依新的 transmission table依順傳送 data frames。 
另外一個可能發生的問題是，若在 ATIM window之後，有某一個或超過一
個 station未在既定的時間發送 data frame，此時我們的解決策略如下：每一個在
排程中的 station送完 data frame後不馬上進入睡眠狀態，而是持續偵測頻道；若
在 SIFS之後，原排在其後傳送 data frame的 station沒有送出資料，則將此未正
常送出 data frame的 station從 transmission table中清除，並重新計算 transmission 
table 且廣播讓其他網路上的 stations 知道，網路上其他 stations 將依新的
transmission table依順傳送 data frames，而廣播此新的 transmission table的 station
要持續監聽頻道，直到有 station按照 transmission table裡的順序傳送出 data frame
為止，否則在廣播出新的 transmission table後的 SIFS時間後還要再重覆以上的
動作；至於在 ATIM window甫結束時，則由當初發送 beacon的 station負責監聽
頻道判斷排程中的第一個 station是否有在原既定時間送出 data frame，若沒有，
則以上 error recovery 的動作將由其負責。以避免之後的排程錯亂及避免頻道不
必要的閒置情形及電量消耗。 
 
(二) 動態調整 ATIM window size 
為了讓處於省電模式下的行動設備能省下更多電，並且增加頻道的使用率，
我們改變原來 IEEE 802.11電源管理協定，將其固定的 ATIM window size，改為
可變動的，並且不事先決定它的大小，而是依據網路流量的大小動態決定 ATIM 
window size，詳細的運作程序如下。我們設定了兩個 ATIM window必須終止的
規則，並且在表 13中我們詳列了下面描述中所需的用到的變數及常數。 
 
規則一： 
在 ATIM window 期間所有的行動裝置都是醒著的，由於無線傳輸的特性，
每一個 station 可聽到網路上每一個傳送中訊框，不論頻道是閒置或忙碌，每一
個 station都有相同的頻道資訊；當網路上的 stations偵測到頻道閒置的時間達到
TDIFS + TCWmin 的時間，我們判定網路上不再有任何 stations 想要送出 ATIM 
frame，因此所有的 stations立刻節束此次的 ATIM window，並且進入傳輸排程的
階段。也就是 
if (ChannelIdleTime >= TDIFS + TCWmin)  
ATIM_WIN = (Tcurr - TBTT) + TDIFS + TCWmin 
end if 
我們以圖 19為例說明此運作規則。在 ATIM window 期間，只有 station A
  29 
如前面提到的，在一個完全連接 (fully connected) 的無線網路中，每一個網
路中的 station 可以經由監聽網路上所傳送的 ATIM frame，得知每個曾經送出
ATIM frame 的 station，在 ATIM window 結束後需要花多才時間 (我們稱之為
working duration) 來傳送 data frames；當他們每收到一個 ATIM frame，會將所需
working duration 加總，加總後的 working duration 稱之為 total working duration。
如果網路上的 stations 發現，一個 beacon interval 的時間扣除到目前為止所有
ATIM frame所花費掉的時間，再扣除 total working duration後，剩下的時間已不
足以用來傳送一個 ATIM frame加上一個最短的 data frame及 ACK時，便立刻終
止 ATIM window，待一個 SIFS的時間後，所有傳送過 ATIM frame的 stations，
依據排程後傳遞 data frame的順序，依序發送自己的 data frame。也就是當 
RemainingBI = TBTTnext – Tcurr – TSIFS - Σ(i=1 to n)(TFRAMEi + TSIFS + TACK) 
if (RemainingBI < TATIM + 3TSIFS + TFRAMEmin + 2TACK) 
ATIM_WIN= Tcurr-TBTT 
end if 
我們將以圖 20來說明此演算法的運作方式 。 
 
ACKC→B
ACKB→AACK
ACKB→C
ATIM
A
B
C
C→B
A→B
Next BI AW Period
RemainingBI
Beacon Interval (i.e. BI)
SIFS
B→C
TBTT TBTTnext
Tcurr
 
圖 20. 第二種結束 ATIM window的時機。當 RemainingBI < TATIM + 3TSIFS + 
TFRAMEmin + 2TACK時，每個行動主機便立刻結束此時的 ATIM window。 
 
在 TBTT時間，網路上的每個 station都會一起競爭發送 beacon frame，待網
路上其中一 station成功發送出 beacon frame後 (圖 20省略發送 beacon frame的
部份)，網路上的所有 stations 依照 DCF 的方式競爭發送 ATIM frmae。在圖 20
中，station A、B及 C分別成功的送出 ATIM frame給 station B、C及 B，而網路
中在傳送、接收或閒置的 stations 都會依據 ATIM frame 裡所夾帶的 working 
duration 的訊息，去計算目前所剩餘的 beacon interval (RemainingBI) 大小，當他
們聽到 station C送出來的 ATIM frame時，也發現此時的 RemainingBI已小於發
送一個 ATIM frame及最小 data frame所需的時間時，網路上的各 stations 便在
  31 
可，其它的省電裝置若不需要傳送或無資料需要接收則可直接進入休眠的狀態，
減少不必要的耗電。因此，我們藉由參考文獻[45]的概念加以修改並考慮省電裝
置傳輸給非省電裝置在此架構下所應有的行為模式，使其能更加適應於以排程為
基礎的媒體存取控制協定，如圖 21所示，就是在 ATIM window前面，加入一小
段 Need-ATIM window的時間，我們會讓所有有資料要傳送給省電裝置的或是省
電裝置有資料要傳送的都在 Need-ATIM window內發送 Need-ATIM訊號，只要
在 Need-ATIM window內有發送 Need-ATIM訊號或是有感測到無線網路媒體忙
碌的裝置即需要在 ATIM window維持醒來的狀態讓其它裝置與其作預約傳輸的
動作。 
 
TBTT
ATIM 
window
ATIM data frame
ACK
ACK
A
B
C
ATIM
ACK
D
ACK
data frame
data window
Need-
ATIM
Need-
ATIM
Need-
ATIM
RACK
RACK
 
圖 21. Need-ATIM架構 
 
在此架構之下非省電裝置不論在 Need-ATIM window 有無感測到媒體忙
碌，都必需要等待並監聽 ATIM window時間才可以做競爭媒體的動作，如此才
可掌握省電裝置在 ATIM window後預約傳輸的時段，以避免干擾到附近行動裝
置作預約傳輸動作，防止因沒聽到省電無線行動裝置預約的時段而碰撞的問題。
反之，若是省電裝置沒有發送 Need-ATIM訊號且沒有在 Need-ATIM window感
測到媒體忙碌，則在 Need-ATIM window過後即可進入睡眠狀態。 
如圖 21所示，此網路環境中 station A想要傳輸資料給 station B，station B
想要傳輸資料給 station C，則 station A 與 B 會在 Need-ATIM window 內發送
Need-ATIM frame，假設此時 station C與 A、B互為鄰居，則 station C會因碰撞
而無法聽到 station A 與 B 所發送的 Need-ATIM frame，但是 station C 可在
Need-ATIM window感測到媒體忙碌，因此仍會在 ATIM window維持醒來的狀態
以做預約傳輸之用，而 station A、B由於有在 Need-ATIM window發送 Need-ATIM 
frame，因此也會在 ATIM window 維持醒來的狀態，至於 station D 由於在
Need-ATIM window未聽到與發送任何的 Need-ATIM frame，且未感測到媒體忙
碌，因此可在 Need-ATIM window結束後即進入休眠模式。 
  33 
此外，在 ATIM window 中還有一個很重要的考量，就是根據 IEEE 802.11 ad 
hoc 省電模式規定，凡是要傳送給省電裝置的傳輸都會在 ATIM window 裡面做
競爭傳輸的動作，也就是說省電裝置想要傳輸給省電裝置、非省電裝置傳輸給省
電裝置都會在 ATIM window裡面做競爭的動作。若在 ATIM window裡面有預約
到傳輸則省電裝置會醒來整個 beacon interval並且與非省電裝置去競爭無線網路
媒體，此種做法很明顯的無法降低省電裝置競爭無線網路媒體時的碰撞率，且會
使得電力大量消耗，很多省電媒體存取控制協定都已經利用排程的方式解決掉上
述的問題，然而卻忽略掉了其實對於排程的省電媒體存取控制協定而言，當省電
裝置傳輸給非省電裝置時，省電裝置仍然無法進入 ATIM window做預約傳輸的
動作，因此仍舊會照成省電裝置電力的大量損耗。所以根據這點，我們認為其實
省電裝置想要傳輸給非省電裝置 也該在 ATIM window作競爭並給予排程。 
 
(三) 排程機制 
在排班的部分，我們的作法如圖 23所示，主要是會在 ATIM window預約傳
輸的同時把尚未預約傳輸且夠預約傳輸的時間資訊與傳輸量大小告知接收端，接
收端會拿此傳送端尚未預約傳輸的時間跟自己尚未預約傳輸的時間去做比較，並
運算狀態轉換次數去決定傳輸起始時間。決定傳輸起始時間後接收端會發送個
ATIM-ACK告知傳送端其所決定的傳輸起始時間，傳送端收到 ATIM-ACK後會
再傳送個 RACK 封包告知傳送端附近鄰居其所預約的傳輸起始時間與傳輸量大
小，如此可讓傳送端附近的鄰居知道傳送端的傳輸預約而不至於影響傳輸。而在
ATIM window結束後每個無線網路裝置會依照之前在 ATIM window裡所預約的
時間做傳輸資料的動作。 
 
TBTT
ATIM window
ATIM data frame
ACK+
ATIM
ACK
A
B
C
ATIM
ACK+
ATIM
D
ACK
data frame
data window
Need-ATIM
Need-ATIM
Need-ATIM RACK
RACK
 
圖 23. ATIM frame會包含自己可以使用的時間，接收端收到 ATIM frame後會去
計算並決定傳輸起始時間並發個 ACK告知傳送端，傳送端收到 ATIM-ACK後會
再發個 RACK封包告知傳送端四周鄰居已經選用的傳輸時段 
  35 
A→B
TBTT
ATIM window
ATIM
ACK+
ATIM
A
B
C
D
data window
Need-ATIM
Need-ATIM
Need-ATIM RACK
A→B
A→B
 
(a) 
A→B
TBTT
ATIM window
ATIM
ACK+
ATIM
A
B
C
D
data window
Need-ATIM
Need-ATIM
Need-ATIM RACK
A→B
A→B
TBTTnext
ACK+
ATIM
RACKATIM
C→D
C→D
 
(b) 
A→B
TBTT
ATIM window
ATIM
ACK+
ATIM
A
B
C
D
data window
Need-ATIM
Need-ATIM
Need-ATIM RACK
A→B
A→B
TBTTnext
ACK+
ATIM
RACKATIM
C→D
C→D
 
(c) 
圖 25. (a)無線媒體目前排程狀況，(b)C傳給 D的傳輸配對放置於前面，(c) C傳
給 D的傳輸配對放置於後面 
  37 
下所消耗的電力功率。把實際的參數帶入這個演算法，我們可以算出當閒置時間
大於多少μs時，讓省電裝置進入睡眠模式會比較划算，再把求出來的這個數值
與現有的傳輸排程表下去做比對，我們即可推測出行動裝置的狀態轉換次數，用
來作排程的依據。而當此演算法求出的值得進入睡眠的閒置時間小於 1600μs
時，我們會以 1600μs代入排程演算法，因為起碼須要 1600μs的時間才足夠讓
行動裝置從醒來切換到睡眠，並從睡眠切換到醒來狀態。 
 
在判斷排程位置方面，演算法可以分為三個步驟： 
1. 找出共同可以預約的時段 
在此步驟中，傳送端發送 ATIM封包的同時就必須把自己可以預約時段告知
給接收端，接收端收到 ATIM封包後，會去把傳送端可以預約的時段跟自己可以
預約的時段給作交集，求出傳送端與接收端都可以預約的共同時段。 
2. 計算狀態轉換次數 
利用 counter去計算行動裝置的狀態轉換次數，並依照此狀態轉換次數的多寡
來決定行動裝置的傳輸預約位置。 
在此步驟中，接收端會把這次要預約的傳輸放置於每段可以預約的共同時段
起點與終點，分別以傳送端與接收端的觀點去計算狀態轉換次數，把每個預約位
置的接收端與傳送端的狀態轉換次數分別加總，求出每個預約位置的總狀態轉換
次數 。 
3. 決定傳輸預約時段 
求出每個預約位置的總狀態轉換次數後，從中挑選出狀態轉換次數最少的位
置做為這次傳輸的預約位置。 
 
A→B
TBTT
ATIM window
ATIM
ACK+
ATIM
A
B
C
D
data window
Need-ATIM
Need-ATIM
Need-ATIM RACK
A→B
A→B
TBTTnext
ACK+
ATIM
RACKATIM
D→E
E
D→E
1600
1600
1600
1000
1000
 
圖 27. 網路傳輸預約圖 
 
  39 
接著我們必須使用演算法第 2步驟計算狀態轉換次數，由於在一段共同可以
預約的時間區段中，傳輸動作可以預約在此時間區段的起點與終點，因此我們可
以知道在此環境下，C與 D的傳輸可以以 1601μs為傳輸起點，也可以以 99201 
(100000-800+1) μs 為傳輸的起點。接收端 C 會分別以 C 與 D的觀點去計算放
置於此兩個傳輸點所需的狀態轉換次數，之所以不把傳輸排程在中間而放置於兩
端，是由於放置於中間的話，無線裝置的狀態轉換次數會如圖 28所示不會減少，
多半反而會增加狀態轉換的次數。以 D而言，若把傳輸起點設置為 1601μs，則
station C會知道 station D的傳輸預約表如表 16所示。 
 
表 16. Staton D的傳輸預約表 
起始時間 結束時間 from-to 
0 1000 D→E 
1601 2400 D→C 
 
若把表 16圖型化後，我們可以畫出的運作圖如圖 29所示，由圖 29可以看
出此時 (1001，1600) 與 (2401，100000) 兩個時段和 station D無關。 
 
A→B
TBTT
ATIM window
ATIM
ACK+
ATIM
A
B
C
D
data window
Need-ATIM
Need-ATIM
Need-ATIM RACK
A→B
A→B
TBTTnext
ACK+
ATIM
RACKATIM
D→E
E
D→E
1600
1600
1600
1000
1000
ACK+
ATIM
RACKATIM
D→C
D→C
2400
2400
2400
D→C
1600
1600
D→C
2400
 
圖 29. 網路傳輸預約圖 
 
我們也可以利用集合論的方法去求算與 station D無關的時段，假設 TD為跟
station D 有關的傳輸預約時段，Ttotal為 data window 總共可用的時間， DT 為與
station D 無關的傳輸時段，我們可以藉由 DT =Ttotal- TD求出與 D 無關的傳輸時
段，在這個例子我們所得的參數值如表 17所示。 
  41 
表 19. 與 station C無關的傳輸時間表 
起始時間 結束時間 
0 1600 
2401 100000 
 
(四) 非省電行動裝置 
在非省電行動裝置方面，為了不干擾省電行動裝置的排程。非省電行動裝置
在 ATIM window 不可作傳輸的動作，且必須聆聽周遭省電行動裝置的傳輸預
約。如此，非省電行動裝置即可掌握周遭省電行動裝置在 data window的排程位
置，進而避開省電行動裝置的排程進行傳輸。 
另外，在 multi-hop 環境的排程媒體通訊協定往往無法避免造成可傳輸空間
破碎的問題。且以 slot為預約方式的媒體存取通訊協定 [44] 最為劇烈。所謂的
可傳輸空間破碎問題主要是指可傳輸的時段由於排程而變的斷斷續續。如圖 29
所示，我們可以看到在 D傳輸給 E與 D傳輸給 C中間有一小段可供預約的時段，
在這個時段中 E 周遭的鄰居會偵測到媒體是閒置的狀態。因此會開始遞減
backoff，然而此可預約時段卻不一定足以傳送非省電行動裝置的傳輸，若在此可
供預約的時段作遞減 backoff的動作，必會增加在 D傳輸給 C後非省電行動裝置
的碰撞機率。因此，我們認為既然非省電行動裝置可以掌握所有省電行動裝置的
傳輸排程。即可知道非省電行動裝置可以傳輸的時段是否足夠作傳輸的動作。若
足以讓非省電行動裝置作傳輸的動作，則遞減 backoff。反之，則否。 
 
 
3.3 第三年 
大部分的研究方向都是著重在一個 beacon interval裡如何讓它更省電，但是
這會有一個問題，當 PS stations在這個 beacon interval並沒有資料要傳送和接收，
他在這個 beacon interval仍然要醒來，以 IEEE 802.11無基礎式架構規範為例，
PS stations在每個 beacon interval中必須醒來至少 ATIM window的時間，這會造
成 PS stations的電量浪費。因此在第三年計畫中，我們想要達到 PS stations不需
要每個 beacon interval都醒來以期能夠達到更省電的效果，而且基本的傳送與接
收功能仍然可以正常運作。 
若是 PS stations沒有要每個 beacon interval都醒來的話，首先碰到的問題是
neighbor discovery，由於 PS stations不是每個 beacon interval都會醒來，它們要
如何發現鄰居有誰，若是 PS stations彼此的狀態都不一樣，沒有在相同的 beacon 
interval 醒來的話，它們永遠不會發現彼此的存在；即使知道鄰居是誰了，它要
如何知道鄰居醒來與睡眠的狀態，進而在鄰居醒來的時間將資料傳送給它。而在
IEEE 802.11 ad hoc標準規範中，PS stations是每個 beacon interval都會醒來，PS 
stations 在每個 beacon interval 都可以發現彼此的存在，若是有資料要傳送給鄰
居，也不用特別知道鄰居醒來與睡眠的狀態，因為它每個 beacon interval都會醒
  43 
間再進入 backoff的程序。傳統的方法是 PS stations在預定的時間偵測到媒體處
於閒置的狀態，即進入 backoff 程序競爭發送 beacon frame，但每個 PS stations
的時間不一定同步，也許鄰居的資料傳送尚未完成，若是有 PS station的 backoff
時間為 0，此 PS station所發送的 beacon frame就可能與 ACK發生碰撞，因此
stations在 beacon window開始時的等待時間必須大於 SIFS但又需小於 DIFS，所
以我們選擇此時間為 PIFS，圖 32(b)為我們 beacon frame傳送的範例。 
 
 
圖 32. (a)Beacon frame傳送的程序，(b)Beacon frame傳送的範例。 
 
在接下來，我們提出了三種不同的方法來達到 PS stations不需要每個 beacon 
interval 都醒來的目的：randomized coterie-based、naive cyclic finite projective 
plane-based (CFPP-based) 和 interleaving CFPP-based protocols。 
 
Randomized coterie-based scheme 
在參考文獻[53]中所提到的 coterie system 方法可以應用在我們的省電管
理，其定義如下所示。 
若 U 為有限點的集合{u1, u2,….., uk} 且 L{L0, L1,…., Lm}為由 U 的子集合 (i.e. 
L3={u3, u9, u11})，Li⊆U。 
所謂 coterie即滿足：1. 任兩個 Li、Lj∈L，Li∩Lj≠φ  
2. 任兩個 Li、Lj∈L，   
舉例來說，U={0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12}  
L = { L0={0, 1, 2, 9}, L1={0, 3, 6, 9}, L2={0, 4, 8, 11}, L3={0, 5, 7, 12}, 
L4={3, 4, 5, 9}, L5={1, 4, 7, 10}, L6={1, 5, 6, 11}, L7={1, 3, 8, 12},  
L8={6, 7, 8, 9}, L9={2, 5, 8, 10}, L10={2, 3, 7, 11}, L11={2,4, 6, 12},  
L12 = {9, 10, 11, 12} } 
其中，Li∩Lj≠φ且 。 
  45 
U = {0, 1, 2, 3, 4, 5, 6} 
L0 ={0, 1, 2}, L1 ={0, 3, 6}, L2 ={0, 4, 5}, L3 ={1, 4, 6}, L4 ={2, 3, 4}, L5 ={2, 5, 6}, L6 
={1, 3, 5}. 
 
圖 34. Finite projective plane的例子 
 
循環有限投影平面 (cyclic finite projective plane, CFPP)： 
若 U為有限點的集合{u0, u1,…., 2n nu + }且 L為由 U的子集合 (i.e. L3={u1, u4, u6})
所構成的直線集合{L0, L1,…., 2n nL + }，當 n≧2，循環投影平面要滿足上面投影平
面所列的 6點之外，還要滿足下列的條件。 
R = n2+n+1 
對任意條線 Li={L0, L1,…., Ln}∈L 且 有一整數 h 
h⊕Li={h+Lj mod R | 對所有 Lj∈Li} 這也會是 L裡的其中一條線 
 
循環有限投影平面的條件比有限投影平面更為嚴苛，且與 FPP 集合 U裡的
個數相同時，FPP能有多組不同線 L的組合，而 CFPP只會有一組 L集合。同樣
以 7個點為例，如圖 35所示。而所謂循環的特性，舉例來說，將 L2裡的數字加
2再做 mod 7的動作，所得到的將會是 L4，如下列式子所示。 
2 + L2 = 2 + {2, 3, 5} = {2+2 mod 7, 3+2 mod 7, 5+2 mod 7} = {4, 5, 0} = L4 
 
U={0, 1, 2, 3, 4, 5, 6}    
L0={0, 1, 3}, L1={1, 2, 4}, L2={2, 3, 5}, L3={3, 4, 6}, L4={4, 5, 0}, L5={5, 6, 1}, 
L6={6, 0, 2}.  
 
圖 35. Cyclic finite projective plane的例子 
  47 
Interleaving CFPP-based 的方法更改了 beacon interval 的種類，將他分成三
種：forward half-awake beacon interval、backward half-awake beacon interval和 
fully-sleep beacon interval。Forward half-awake beacon interval如圖 38(a)所示，
backward half-awake beacon interval如圖 38(b)所示。PS station從 CFPP中選擇一
個 Li，依照所選定的 interval 為 half-awake beacon intervals，其餘為 fully-sleep 
beacon interval，而 forward和 backward則依序輪流如圖 38(c)所示。 
 
 
圖 38. 當 PS station選擇了{0, 1, 3}，(a)使用了 forward half-awake beacon interval
的情況，(b)使用了 backward half-awake beacon interval 的情況，(c) forward和
backward依序輪流的情況。 
 
 
第四章 模擬環境與結果 
4.1 第一年 
4.1.1 Infrastructure networks 
使用 Qualnet 4.0 [55] 版為模擬程式，用以驗證在有基礎式架構下所提出的
省電通訊協定效能。在此架構下的模擬實驗中，電源消耗功率依照參考文獻 
[56]，如表 20所示。 
 
表 20. 在有基礎式架構下的電源消耗功率表 
模擬參數 參數值 
閒置時的電力消耗功率 1150 mW 
傳送時的電力消耗功率 1650 mW 
接收時的電力消耗功率 1400 mW 
睡眠時的電力消耗功率 45 mW 
 
首先，利用前面 3.1.1(四)我們所推論的 FIFO與 SJF電量差的期望值與模擬
結果作比較。傳輸速率為 11Mbps，模擬時間為 5分鐘，beacon interval time is 100 
ms，假設有 1000種資料長度時 (data length=1~1000 bytes with uniform distribution, 
  49 
量。由於 802.11 是採取競爭的方式，若是產生碰撞則會造成電量的浪費，因此
每焦耳平均成功接收的資料量是最小的。而 SJF 的結果高於 FIFO，第一個原因
在於若前面傳輸的資料量較大，使用 SJF方法的總等待時間較小，因此電量的浪
費較少；第二個原因則是因為 inter arrival time變小，相對的每個 beacon interval
要傳輸的省電行動裝置個數變多，而 SJF的方法只會讓在這個 beacon interval可
以傳輸的行動裝置醒著接收資料，其他的就進入睡眠，因此消耗的電量較少，所
獲得的 energy值較高。 
由圖 41可知，在 throughput的表現差異上並不是非常大，雖然 802.11是採
取競爭的方式，但會執行選取 backoff 值來降低碰撞的機率。而在 inter arrival 
time=5時，可以看出 802.11和 SJF、FIFO有較明顯的差異，原因在於這時網路
的負載較大，每個 beacon interval裡競爭發送 PS-Poll frame的行動裝置變多，因
此 802.11產生碰撞的變大，而使得成功接收的資料量減少。 
由圖 42可看出 delay大小為 802.11＞FIFO＞SJF。SJF方法會比 FIFO方法
的 delay略小，是因為若傳送順序前面的資料量較大，造成後面的等待時間就會
較長，因此資料到達省電行動裝置就較晚，所得到的 delay值較大。而 802.11是
採取競爭的方法，若競爭失敗則會造成資料到達省電行動裝置的時間較晚，因此
delay較其他兩種方法大。 
 
 
圖 40. listen interval＝1，所有的省電行動裝置在網路上所接收每單位焦耳的資料
量 
 
  51 
一個要接收資料的 PS station在這個 beacon interval沒有醒來的情況將如何運作。 
圖 45可看出 delay大小仍然為 802.11＞FIFO＞SJF，且隨著 listen interval增
加，delay也變大，因為 PS stations醒來的間隔時間變長，相對的接收到資料的
時間也變晚。 
 
 
圖 43. 在 interarrival time＝6下，所有的省電行動裝置在網路上所接收每單位焦
耳的資料量與 listen interval的關係 
 
 
圖 44. 在 interarrival time＝6下，每一個省電行動裝置在模擬時間內單位時間所
成功接收的資料量與 listen interval的關係 
 
  53 
energy
1000
1400
1800
2200
5 4 3 2 1
inter arrive time(BIs)
b
y
te
s/
jo
u
le SJF
FIFO
802.11
 
圖 46. PS stations：active stations＝40：40，所有的省電行動裝置在網路上所接
收每單位焦耳的資料量 
 
Throughput
1500
1700
1900
2100
5 4 3 2 1
inter arrive time(BIs)
by
te
s/
se
c/
st
at
io
n
SJF
FIFO
802.11
 
圖 47. PS stations：active stations＝40：40，每一個省電行動裝置在模擬時間內
單位時間所成功接收的資料量 
 
delay
0
0.1
0.2
0.3
0.4
0.5
5 4 3 2 1
inter arrive time(BIs)
se
c/
p
ac
k
et SJF
FIFO
802.11
 
圖 48. PS stations：active stations＝40：40，省電行動裝置成功接收資料的延遲
時間 
 
 
  55 
要的閒置時間，同時也減少了行動裝置因閒置所造成的電量消耗。 
另外，圖 50則是用來比較單位時間網路中累積的資料輸出量。相同地，我
們同樣分別利用圖 50(a)及 50(b)說明網路中所有行動裝置及只針對 PS 行動裝置
作探討的結果。很明顯地，我們所提出的通訊協定還是比 IEEE 802.11的電源管
理方法有較佳的表現。這是因為在我們所設計的協定中，PS 行動裝置在 ATIM 
window後，不需要再與其他行動裝置競爭頻道，而且只要是在 ATIM window曾
經成功送出 ATIM的裝置，一定可以成功地將暫存的 data frame送給目的裝置。
因此，行動裝置在我們所設計的協定中可以避免許多不必要的閒置時間，而訊框
碰撞的機率也有會減少，且有較佳的頻道使用率。 
接著，由圖 51我們可以清楚的看出，在 ATIM window期間，IEEE 802.11
的電源管理所造成的 ATIM frame碰撞次數遠比我們所提出的省電方法多，由此
證明我們所提出的協定的確可大大減緩 ATIM frame碰撞的情形。而依據我們所
提出協定的運作方式，這樣結果是可預見的，因為在此省電的通訊協定中，ATIM 
window 會依網路上資料流量的多寡作適當地調整，但 IEEE 802.11 的 ATIM 
window卻不論網路上資料流量如何而固定不變；因此，若網路上資料流量過重，
而 ATIM window 卻過卻不足以容納那麼多的 ATIME frame 時，就會造成 ATIM 
frame 撞碰頻繁的情形。 
最後，圖 52說明了在模擬的過程中，active stations及 PS stations分別成功
送出的 data frame 個數。很清楚地可以知道，在我們所提出的協定中，不僅 PS 
stations，連 active stations都比 IEEE 802.11 有較好的表現。原因是我們所提出
的通訊協定中，對各行動裝置而言，省卻許多不必要的閒置時間，而這些時間提
供給 active stations 更多傳送訊框的機會;而排程的方法，又讓曾經傳送過 ATIM 
frame的 PS stations在 ATIM window之後一定能送出 data frame，而這些種種設
計概念正是能讓頻道使用率提升的原因。總結圖 50、圖 51及圖 52，我們可以證
實這個省電的通訊協定亦可以減少資料延遲傳送的時間，這對有 QoS 限制的資
料而言是很重要的。 
由以上的模擬實驗可證明，本計畫所提出的省電通訊協定不僅在行動裝置的
電能使用效率上，亦在 data frame的延遲時間上，較 IEEE 802.11而言有更好的
表現。 
 
  57 
 
圖 52. PS及 active stations在模擬的過程中分別送成功送出的 data frame數。 
 
 
4.2 第二年 
在此實驗中，比較我們所提出的省電通訊協定 (EES-MAC) 與參考文獻 [44] 
(Slotted) 的效能差異。模擬的參數如表 23所示，其中電源消耗功率參照參考文
獻 [56]。為了讓我們的模擬更具公平性，不同演算法所跑的網路環境拓璞與網
路的傳輸，我們的模擬都把它們設置在一樣的狀態，因此能更客觀的比較出演算
法的差異性。 
如圖 53所示，我們在 671x 620平方公尺的模擬環境中隨機佈置了 100個省
電行動裝置，模擬時間 50個 beacon interval，隨機產生在模擬時間內的傳輸配對，
藉由控制模擬時間內的總傳輸配對數來改變網路擁擠的程度。實驗結果如圖 54
所示，我們可以很清楚的看到，在產能上，我們的省電無線網路通訊協定
EES-MAC幾乎與 Slotted通訊協定具有相同的產能。雖不明顯，但在網路環境擁
擠的狀況下 EES-MAC會漸漸的與 Slotted的產能拉開。這是由於 Slotted通訊協
定在 ATIM window後的排班是以 slot為預約單位的原因，因此產能無法如預期
的增長，傳輸的數目也相對的比 EES-MAC來的少。在 EES-MAC的通訊協定中，
傳輸的排程是以時間點來預約，因此能獲得改善。而之所以差距會如此小的原因
是在於兩個通訊協定在 data window裡的傳輸都不會發生碰撞，碰撞只會發生在
ATIM window，且都是利用排程的方式來傳輸。對於都是不會在 data window發
生碰撞的排程演算法而言，是很難在產能方面獲得太大的改善。 
 
  59 
0
20000
40000
60000
80000
100 200 300 400 500 600
傳輸配對數
產
能
(B
yt
e/
Se
c)
EES-MAC Slotted
 
圖 54. 總傳輸配對數與產能比較圖 
 
圖 55由於 Slotted通訊協定固定在 beacon interval一開始，不論有無資料要
傳送或接收，都必須等待 ATIM window的時間，因此電力的消耗十分的龐大，
再加上狀態轉換差異所產生的電力消耗，所以省電行動裝置每焦耳所能成功傳輸
的封包數明顯的會比 EES-MAC還少。 
 
0
1000
2000
3000
4000
5000
100 200 300 400 500 600
傳輸配對數
每
焦
耳
電
力
成
功
傳
輸
的
封
包
(B
yt
es
/J
)
EES-MAC Slotted
 
圖 55. 總傳輸配對數與每焦耳電力成功傳輸的封包數比較圖 
 
圖 56是狀態轉換次數與總傳輸配對數的比較圖，我們可以看到行動裝置的
狀態轉換次數在一開始的狀態 EES-MAC 與 Slotted 並無太大的差別，大約都是
10000次狀態轉換，這是因為網路環境中太少傳輸所導致，而之所以狀態轉換次
數會接近在 10000次，是因為網路環境中有 100個無線網路裝置，且模擬時間為
50個 BI，而每個 BI最少都會有兩次的狀態轉換。因此整個模擬環境最起碼會有
10000 (100×50×2) 次的總狀態轉換，這是最基本的狀態轉換次數。隨著網路環境
中傳輸配對數的增加，網路越來越擁擠，排程所造成的狀態轉換次數也會越來越
多。在此情況之下 EES-MAC由於是依照狀態轉換次數來作排程的依據，因此，
網路環境的總狀態轉換次數會比 Slotted 來的少了許多。且由於狀態轉換會額外
的耗費行動裝置的電力，若能有效的減少行動裝置不必要的狀態轉換，必能減少
  61 
0
0.5
1
100 200 300 400 500 600
傳輸配對數
封
包
傳
送
延
遲
(S
ec
)
EES-MAC Slotted
 
圖 58. Packet delay與總傳輸配對數的比較圖 
 
在第二個實驗中，我們欲觀察我們所提出的媒體存取通訊協定在沒有
NeedATIM 架構下的產能與電力的消耗狀況。如圖 59 所示，我們把第一個實驗
的網路拓樸額外再加入 100個非省電無線網路裝置。 
 
 
圖 59. 100個 PS stations與 100個 active stations的模擬網路拓樸 
 
如圖 60所示，我們可以發現到在沒有 NeedATIM架構下，對於產能的影響
其實不大。EES-MAC仍舊能比 Slotted方式獲得更多的產能，且由於此實驗加入
了非省電行動裝置的傳輸，因此在能有效把傳輸空間集中的 EES-MAC中，非省
電行動裝置的傳輸成功率會遠大於 Slotted，產能也會因而拉開。 
 
  63 
1,…., 15}、Li為在 U中選取 7個。 
 
表 24. 電源消耗功率表 
模擬參數 參數值 
Unicast傳送時的電力消耗功率 420 + 1.9 x frame size (μJ) 
Unicast接收時的電力消耗功率 330 + 0.42 x frame size (μJ) 
Broadcast傳送時的電力消耗功率 250 + 1.9 x frame size (μJ) 
Broadcast接收時的電力消耗功率 56 + 0.5 x frame size (μJ) 
閒置時的電力消耗功率 808 mW 
睡眠時的電力消耗功率 27 mW 
 
表 25. 模擬參數表 
模擬參數 參數值 
Channel bit rate 2M bits/sec 
Beacon window 10 ms 
ATIM window 20 ms 
DIFS 50 μs 
PIFS 30 μs 
SIFS 10 μs 
Slot time 20 μs 
Beacon frame size 61 bytes 
ATIM frame size 28 bytes 
Data/ATIM-ACK frame size 14 bytes 
傳輸資料量 2048 bytes 
 
圖 62是改變 beacon interval大小，觀察一個 beacon interval裡平均電量消耗。
由圖可知，改變 beacon interval 的大小對於電量消耗影響不大，因為只有傳送
beacon frame和 stations的個數對於電量消耗有影響。 
圖 63 是改變 beacon interval 大小，觀察發現鄰居所需要的時間。固定 data 
traffic load=0.1 frames/sec/station，由圖可知，當 beacon interval變大，發現鄰居
所需要的時間也變大。在時間非同步的環境下，PS stations會因為 beacon frames
的碰撞和 PS stations處於睡眠狀態而沒聽到鄰居所發送的 beacon frame。而 gird 
quorum可獲得較好的結果是因為 PS stations在 16個 beacon interval裡會醒來 7
個且任兩個 PS stations在 16個可以在 2個 beacon interval遇到彼此。使用 CFPP
方法，由於 PS stations每 13個 beacon interval只會醒來 4個 beacon interval且任
意兩個 PS stations在 13個 beacon interval裡只有 1個 beacon interval會遇到彼此。 
 
  65 
 
圖 64. 單位時間所成功接收的資料量 (beacon interval=300 ms) 
 
 
圖 65. 每單位焦耳的資料量 (beacon interval=300 ms) 
 
 
 
第五章 結論 
目前最普遍使用的無線網路通訊協定為 IEEE 802.11，此協定有兩種網路架
構，有基礎式架構與無基礎式架構，而本計劃分別針對這兩種架構提出了改善的
省電媒體通訊協定。 
第一年，在有基礎式架構下針對 AP傳送暫存資料給 PS stations作排程，避
免 PS stations因為競爭媒體發送 PS poll而產生碰撞造成電量的浪費與效能的降
低，由實驗可知我們所提出的方法相較於標準規範與參考文獻[29]有較好的結
果；在無基礎式架構下，針對標準規範 fully connected (single-hop) 的環境下設計
省電媒體存取控制協定，這個協定主要有兩個貢獻：第一，為了避免在無線傳輸
的環境中，行動裝置在做資料傳送時發生不必要的 frame collision 及 backoff 
waiting time，我們利用無線傳輸廣播的特性，設計了一個新穎的傳送排程方法。
第二，為了讓 PS stations的電量能更充分地被利用，並增加頻道的使用率，同時
也增加網路的產能（throughput），我們不事先定義 ATIM window的大小，而是
  67 
參考文獻 
[1] IEEE Std 802.11-1999, Wireless LAN Medium Access Control (MAC) and 
Physical Layer (PHY) Specifications. LAN MAN Standards Committee of the 
IEEE Computer Society, IEEE, November 1999. 
[2] H. Woesner, J.-P. Ebert, M. Schlager, and A. Wolisz. “Power-Saving Mechanism 
in Emerging Standards for Wireless LANs: The MAC Level Perspective,” IEEE 
Personal Communications, Jun. 1998. 
[3] L. M. Feeney and M. Nilsson. “Investigating the Energy Consumption of a 
Wireless Network Interface in an Ad Hoc Networking Environment,” IEEE 
INFOCOM, 2001. 
[4] Mauro Marinoni, Giorgio Buttazzo, Tullio Facchinetti, Gianluca Franchino, 
“Kernel Support for Energy Management in Wireless Mobile Ad-Hoc 
Networks,” Workshop on Operating Systems Platforms for Embedded Real-Time 
applications (OSPERT), Palma de Mallorca, Spain, July, 2005. 
[5] T. Elbatt and A. Ephremides. “Joint Scheduling and Power Control for Wireless 
Ad-hoc Networks,” IEEE INFOCOM, 2002. 
[6] J. Monks, V. Bharghavan, and W. Hwu. “A Power Controlled Multiple Access 
Protocol for Wireless Packet Networks,” IEEE IFOCOM, 2001. 
[7] S.-L.Wu, Y.-C. Tseng, C.-Y. Lin, and J.-P. Sheu, “A Multi-Channel MAC 
Protocol with Power Control for Multi-Hop Mobile Ad Hoc Networks,” The 
Computer Journal, Vol. 45, No. 1, pp. 101-110, 2002.  
[8] S.-L. Wu, Y.-C. Tseng, and J.-P. Sheu, “Intelligent Medium Access for Mobile Ad 
Hoc Networks with Busy Tones and Power Control,” IEEE Journal on Selected 
Areas in Communications, Vol. 18, No. 9, pp. 1647-57, September 2000. 
[9] R. Krashinsky and H. Balakrishnan. “Minimizing Energy for Wireless Web 
Access with Bounded Slowdown,” IEEE INFOCOM, 2002. 
[10] R. Kravets and P. Krishnan. “Application-driven power management for mobile 
communication,” ACM/ URSI/ Baltzer Wireless Networks (WINER), 1999. 
[11] Y.-C. Tseng, S.-L. Wu, W.-H. Liao, and C.-M. Chao, “Location Awareness in Ad 
Hoc Wireless Mobile Networks,” IEEE Computer, pp. 46-52, June, 2001.  
[12] S. Agrawal and S. Singh, “An experimental study of TCP’s energy consumption 
over wireless link,” 4th European Personal Mobile Communications Conference, 
February 2001. 
[13] L. M. Feeney, “An Energy Consumption Model for Performance Analysis of 
Routing Protocols for Mobile Ad Hoc Networks,” ACM/ Kluwer Mobile 
Networks and Applications, Vol. 6, pp. 239–249, 2001. 
[14] J. H. Ryu and D. H. Cho, “A Power-Saving Multicast Routing Scheme in 2-tire 
Hierarchical Mobile Ad-Hoc Networks,” Proc. of IEEE Vehicular Technology 
  69 
power-saving mode and scheduler design for wireless local area networks,” IEEE 
Wireless Communications and Networking Conference, vol. 2, pp. 926 – 933, 
2006. 
[29] Hongyan Lei, Arne A. Nilsson, “A Power Management Scheme for the IEEE 
802.11 Based WLANs,” In Proceedings of IEEE IPCCC, 2005. 
[30] C.-S. Hsu, J.-P. Sheu, and Y.-C. Tseng, “Minimize Waiting Time and Conserve 
Energy by Scheduling Transmissions IEEE 802.11-based Ad Hoc Networks,” 
Int’l Conf. on telecommunications, 2003. 
[31] I. Chakraborty, A. Kashyap, A. Kumar, A. Rastogi, H. Saran, and R. Shorey, 
“MAC Scheduling Policies with Reduced Power Consumption and Bounded 
Packet Delay for Centrally Controlled TDD Wireless Networks,” IEEE 
International Conference on Communications, vol. 7, pp. 1980–1984, June 2001. 
[32] S.-C. Lo, G. Lee, and W.-T. Chen, “An Efficient Multipolling Mechanism for 
IEEE 802.11 Wireless LANs,” IEEE TRANSACTIONS ON COMPUTERS, Vol. 
52, No. 6, pp. 764–778, June 2003. 
[33] J. A. Stine and Gustavo de Veciana, “Improving Energy Efficiency of Centrally 
Controlled Wireless Data Networks,” ACM/ Baltzer Wireless Networks, Vol. 8, 
pp. 681–700, 2002. 
[34] H. Woesner, J.-P. Ebert, M. Schlager, and A. Wolisz, “Power-Saving Mechanism 
in Emerging Standards for Wireless LANs: The MAC Level Perspective,” IEEE 
Personal Communications, Vol. 5, pp. 40–48, June 1998. 
[35] E.-S. Jung and N. H. Vaidya, ”An Efficient MAC Protocol for Wireless LANs,” 
IEEE INFOCOM, Vol 3, pp. 1756-1764, June 2002. 
[36] Y.-C. Tseng, C.-S Hsu, and T.-Y Hsieh, “Power-Saving Protocol for IEEE 
802.11-Based Multi-Hop Ad Hoc Networks,” IEEE INFOCOM, 2002. 
[37] Shih-Lin Wu, Pao-Chu Tseng, Zi-Tsan Chou, “Distributed power management 
protocols formulti-hop mobile ad hoc networks,” Computer Networks, 2005. 
[38] Chih-Shun Hsu, Yu-Chee Tseng, “Cluster-Based Semi-Asynchronous 
Power-Saving Protocols for Multi-hop Ad Hoc Networks,” IEEE ICC, 2005. 
[39] Kamrok Lee, Jae Young Choi, Wook Hyun Kwon, Hong Seong Park, “An 
Energy-efficient Contention-based MAC Protocol for Wireless Ad Hoc 
Networks,” IEEE VETECS,2006. 
[40] Yuefeng Zhou, David I. Laurenson, Stephen McLaughlin, “An Effective 
Power-Saving Scheme for IEEE 802.11-Based Multi-hop Mobile Ad Hoc 
Network,” The 60th Vehicular Technology Conference (VTC), pp. 26-29, 2004. 
[41] 1999 Federal Radionavigation Plan, February 2000. Washington, DC: U.S. 
Department of Transportation and Department of Defense. Available on line 
from United States Coast Guard Navigation Center. 
  71 
IEEE 802.11 Infrastructure WLANs,” The 13th Symposium on Radio Technology 
Across The Taiwan-Straits, June 23-24, 2008. 
[59] Shih-Lin Wu, Shu-Jia Chen, “An Energy-efficient Power-saving Protocol in 
IEEE 802.11 Infrastructure WLANs,” Journal of Harbin Institute of Technology, 
Aug. 2008. 
[60] Shih-Lin Wu and Shu-Chia Chen, “An Energy-efficient MAC Protocol with 
Downlink Traffic Scheduling Strategy in IEEE 802.11 Infrastructure WLANs,” 
Journal of Systems and Software, 2011. 
[61] Shih-Lin Wu, Pao-Chu Tseng and Jhen-Yu Yang, “An Efficient Power Saving 
MAC Protocol for IEEE 802.11 Ad Hoc Wireless Networks,” Journal of 
Information Science And Engineering 23, pp. 1171-1188, 2007. 
[62] S.-L. Wu , and L. Nung, “A Scheduling Multi-Hop Power Saving Mac Protocol 
in wireless ad hoc networks,” The 12-th Mobile Computing Workshop , Taichung, 
Taiwan, Mar. 31, 2006. 
[63] Shih-Lin Wu, Pao-Chu Tseng, Zi-Tsan Chou, “Distributed power management 
protocols for multi-hop mobile ad hoc networks,” Computer Networks, pp. 63-85, 
2005. 
 
  
在 IEEE 802.11 WLAN 有基礎架構下設計一具有高效能的
省電傳輸協定
吳世琳 
Department of Computer Science and 
Information Engineering Chang Gung 
University, Kwei-Shan Toa-Yuan, 
Taiwan,R.O.C 
E-mail: slwu@mail.cgu.edu.tw 
 
摘要 
無線行動裝置為了支援行動性，必須使
用電池供電，但是電池的電量有限，只能維持
一定時間下的運作。在無線行動裝置運作過程
中無線網路卡所損耗的電力最為可觀，因此省
電最有效率的方法就是改善無線網路 MAC 層
的通訊協定。一個好的省電的通訊協定，不僅
要能達到省電的目的，還要能避免資料被延遲
傳送，並且要讓單位電量所能傳輸的資料量增
加。 
我 們 將 提 出 在 有 基 礎 式 架 構 
(Infrastructure) 下運作的省電媒體存取控制通
訊協定。改善無線行動裝置競爭發送 PS-Poll
訊框所產生的碰撞問題，利用排程的方式讓省
電效果更加的顯著，並且提升網路傳送的效
率。 
關鍵詞：省電，有基礎架構 (Infrastructure)，
媒體存取控制層 (MAC)，排程 
一、介紹 
無線通訊技術的發展及應用在全球已快
速蓬勃發展，隨著 3G 系統業者的積極佈建，
已經正式宣告了多媒體無線通訊的時代的來
臨；另外，無線網路技術的成熟及世界各國政
府的大力支持，也帶動了整個無線網路產業的
發展。 
陳婌佳 
Department of Computer Science and 
Information Engineering Chang Gung 
University, Kwei-Shan Toa-Yuan, 
Taiwan,R.O.C 
E-mail: m9429005@stmail.cgu.edu.tw 
 
 
如何讓有限的電能做最有效的利用成為
無線網路中一個相當重要的設計議題，在行動
裝置運作過程中又以無線網路卡所損耗的電
力佔大部分[3]，因此改善媒體存取控制層
(Media Access Control, MAC)通訊協定可以明
顯的減少行動裝置的電源消耗[2，4，5，6，7，
8，9，10]。在 IEEE 802.11 的標準規範[1]中，
有兩種主要的網路架構，分別是有基礎式架構 
(Infrastructure) 的無線區域網路及無基礎架構 
(Ad Hoc) 的無線區域網路，在有基礎式架構
下無線區域網路的省電方法有[2，4]，在無基
礎架構下無線區域網路的省電方法有[5，6，
7，8，9]。而本篇論文是在有基礎架構下的無
線區域網路提出改善的方法。 
在有基礎架構的無線網路中，Access 
Point 不可以隨時傳送資料 (data frames) 給處
於省電模式的行動裝置，必須先將這些 data 
frames 儲存起來而在特定的時間傳送。至於有
哪些行動裝置有 data frames 儲存在 Access 
Point 中待送則是記錄在 Traffic Indication Map 
(TIM) 中。Access Point 每次傳送 Beacon 訊
框時都會將 TIM 放入其中。處於省電模式的
行動裝置會定時的起來接收 Beacon 訊框。行
動裝置取得 TIM 後可自行研判其是否有 data 
frames 儲存在 Access Point 中。處於省電模式
的行動裝置如果發現其有 data frames 儲存在 
  
聽到後會發送 PS-Poll 訊框給 Access Point，
Access Point 再把 data frames 傳送給 node A，
並且會將 node B 為下一個所要傳送的對象的
訊息附在 data frames 裡，因此 node B 會得知
自己為下一個傳送的對象，node B 會在 Access 
Point傳完 node A的 data frames後發送 PS-Poll
訊框給 Access Point，依此類推。 
但是在這篇參考文獻中有三個問題。第
一個問題，他並沒有提到行動裝置何時傳送
PS-Poll 訊框給 Access Point，是等待 SIFS 的
時間傳送或是其他？第二個問題，他所採取的
FIFO 的排程法則，若是 Access Point 先收到的
資料量很大，後收到的資料量較小，會使得後
面的行動裝置等待過長的時間而造成電量的
浪費。第三個問題，在參考文獻[2]中並沒有提
到若是需要先傳 PS-Poll 訊框給 Access Point
的行動裝置在這個 Beacon Interval 並沒有醒
來， 而 Access Point 等不到 PS-Poll 訊框，這
時應該怎麼辦？因此我們會針對這些問題提
出改善方法。 
 
二、方法 
在有基礎式架構下，我們改善省電行動
裝置 (PS nodes) 競爭發送PS-Poll訊框而產生
碰撞，因而造成傳輸延遲的問題，我們設計一
個避免碰撞且低延遲的方法。 
我們保留參考文獻[2]中所提到的排程優
點，並且改善 FIFO 排程法則所造成的缺點，
因此我們使用的排程法則是採取最短工作優
先配置的方式 (Shortest Job First, SJF)，使用
SJF排程法則可以使 PS nodes的總等待時間最
少，達到節省 PS nodes 電量消耗的結果，以表
二為例，假設目前有 node A、node B、node C
的資料 buffer 在 Access Point 中，Access Point
傳送 data frames 給 node A 需要 10ms、Access 
Point 傳送 data frames 給 node B 需要 2ms、
Access Point 傳送 data frames 給 node C 需要
5ms，若使用 FIFO 的排程法則，傳送順序為 A
→B→C，其運作模式如圖三，則總等待時間
為 22ms (node B + node C = 10 + 12 = 22)，但
若使用 SJF 排程法則，傳送順序為 B→C→A，
其運做模式如圖四，則 PS nodes 的總等待時間
為 9ms (node A + node C = 7 + 2 = 9)；並且我
們也解決PS nodes在這個Beacon Interval沒有
醒來，需要送 PS-Poll 訊框給 Access Point 時，
卻沒有送的問題。 
 
表二. Access Point 中的 buffer 狀態，（）裡數
字表示所要傳送所花費的時間 
A  (10) B  (2) C  (5) 
 
A
10
C
5
B
2
A
B
C
圖三. 使用 FIFO 排程法則 PS nodes 的總等待
時間示意圖 
 
A
10
C
5
B
2
A
B
C
 
圖四. 使用 SJF排程法則 PS nodes的總等待時
間示意圖 
 
針對參考文獻[2]中的第一、二個問題，
對於 Access Point 內部的 buffer 方法，我們所 
  
 
 
AP
A
B
C
B
15
C
20
SIFS
TIM
CF-PS-poll
CF-PS-poll
Beacon  Interval
Next  BI
TIM
PIFS
 
圖六. 當 Access Point 所排定傳送資料的 PS node 在這個 beacon interval 沒有醒來，造成 Access 
Point 沒有在 SIFS 時收到 CF-PS-Poll 訊框的解決例子 
 
針對參考文獻[2]中的第三個問題，對於
PS nodes 在這個 Beacon Interval 沒有醒來，因
此在需要送 PS-Poll 訊框給 Access Point 時，
卻沒有送的問題，我們所提出的改善方法如
下：以上面的例子為例，其運作模式如圖六所
示，當 Access Point 在發送 TIM frame 後經過
SIFS 的時間時，若是沒有收到 node A 送來的
CF-PS-Poll 訊框，此時 Access Point 會認為
node A 在這個 Beacon Interval 並沒有醒來，因
此沒有聽到 TIM，Access Point 在傳送 TIM 後
經過 PIFS 時間時，再送一次 TIM，而這次 TIM
裡的順序會去除掉 node A，在第一次的 TIM 
frame 中所附的順序為 A→B→C，第二次傳送
的 TIM 去除掉 node A，順序改成 B→C，在收
到第二次的 TIM frame 時，node B 會看到自己
成為 Access Point 傳送資料的第一順位，node 
B 會在收到 TIM 經過 SIFS 時間後傳送
CF-PS-Poll 訊框給 Access Point，Access Point
在收到 node B 的 CF-PS-Poll 訊框後，在 SIFS
的時間後將 node B 的 data frames 傳送給他，
此時其他的 nodes 也會依照聽到的 data frames
設定 NAV 值，依此類推。 
三、分析 
在本篇論文中，我們採用數學模式來推
導和分析整個網路中行動裝置總共需要醒來
的時間。行動裝置醒著的時候雖然不送收資
料，但是無線網路卡仍然是處於 receive 的狀
態，它所消耗的電能僅略微小於 transmit 的狀
態，電力在不同狀態模式下的消耗如表四[10]
所示。在此架構之下行動裝置處於 transmit 的
狀態只有發送 CF-PS-Poll 訊框，因此行動裝置
醒來的時間和電量消耗成正相關，我們利用計
算行動裝置醒來的時間來代表耗電量的關係。 
 
表四. 電源消耗表 
Doze Idle Receive Transmit
47.4mW 739mW 901mW 1.35W 
 
假設一個封包期望的傳送時間是 E[S]，
在 Access Point 中暫存資料的行動裝置有 M
個，所需傳送的資料量大小為 Qi ( i = 1, 2,….., 
M)。 
 
A→B→C 
B→C 
表示所要傳
送的資料量 
  
四、結論 
在本篇論文中，我們設計了一個省電媒
體存取通訊協定，適用於有基礎架構下的無線
區域網路。這個協定改善了行動裝置競爭發送
PS-Poll 訊框所產生的碰撞問題，避免行動裝
置浪費不必要的電量消耗，我們使用 Shortest 
Job First (SJF) 的方法來當作我們的排程法
則，用以讓行動裝置的電量作更有效率的利
用。 
在未來工作中，我們將會使用網路效能
模擬軟體 (i.e. QualNet) 來進行排程法則的分
析，並且利用模擬結果來幫助我們修改協定達
到更佳的效能。 
五、誌謝 
本研究承國科會與經濟部補助， 
計畫編號：NSC95-2221-E-182-017 及
95-EC-17-A-19-S1-055，特此誌謝。 
六、參考文獻 
[1] LAN MAN Standards Committee of the 
IEEE Computer Society. IEEE Std 
802.11-1999, Wireless LAN Medium 
Access Control (MAC) and Physical 
Layer (PHY) Specifications. IEEE, 
November 1999. 
[2] Hongyan Lei, Arne A. Nilsson, “A Power 
Management Scheme for the IEEE 802.11 
Based WLANs,” In Proceedings of IEEE 
IPCCC 2005. 
[3] H. Woesner, J.-P. Ebert, M. Schlager, and 
A. Wolisz, “Power-Saving Mechanism in 
Emerging Standards for Wireless LANs: 
The MAC Level Perspective”. IEEE 
Personal Communications, Jun. 1998. 
[4] Jeongjoon Lee, Catherine Rosenberg, and 
Edwin K. P. Chong, “An opportunistic 
power-saving mode and scheduler design 
for wireless local area networks,” IEEE 
Wireless Communications and 
Networking Conference, vol. 2, pp. 926 – 
933, 2006. 
[5] L. M. Feeney and M. Nilsson. 
“Investigating the Energy Consumption of 
a Wireless Network Interface in an Ad 
Hoc Networking Environment”. IEEE 
INFOCOM, 2001. 
[6] C.-S. Hsu, J.-P. Sheu, and Y.-C. Tseng. 
“Minimize Waiting Time and Conserve 
Energy by Scheduling Transmissions 
IEEE 802.11-based Ad Hoc Networks”. 
Int’l Conf. on telecommunications, 2003. 
[7] E.-S. Jung and N. H. Vaidya. “An 
Efficient MAC Protocol for Wireless 
LANs”. ACM MOBICOM, September 
23-28, 2002. 
[8] Changsu Suh, Young-Bae Ko and 
Jai-Hoon Kim, "Enhanced Power Saving 
for IEEE 802.11 WLAN with Dynamic 
Slot Allocation," Lecture Notes in 
Computer Science, Accepted to the 
International Conference on Mobile 
Ad-hoc and Sensor Networks (MSN'05), 
Dec. 2005. 
[9] Yuefeng Zhou, David I. Laurenson, 
Stephen McLaughlin, “An Effective 
Power-Saving Scheme for IEEE 
802.11-Based Multi-hop Mobile Ad Hoc 
Network”, The 60th Vehicular Technology 
Conference (VTC), Los Angeles, Sep. 
26-29, 2004. 
[10] J. Dorsey and D. P. Siewiorek. “Exchange 
Power Management for Mobile Ad Hoc 
Networks”,In Proceedings of IEEE 
Infocom 2005.  
在 IEEE 802.11 有基礎式架構下設計一具有高效能的省電傳輸協定 
吳世琳，陳婌佳 
（Department of Computer Science and Information Engineering Chang Gung University, Kwei-Shan Toa-Yuan, Taiwan, 
R.O.C, slwu@mail.cgu.edu.tw；m9429005@stmail.cgu.edu.tw） 
 
摘要 
無線行動裝置為了支援行動性，必須使用電池供電，但是電池的電量有限，只能維持一定
時間下的運作。因此，電源要有效率的使用成為無線網路中一個重要的議題。我們提出的方法將
著重於媒體存取控制層的省電機制。(目的)一個好的省電的通訊協定，不僅要能達到省電的目
的，還要能避免資料被延遲傳送，並且要讓單位電量所能傳輸的資料量增加。(方法)我們在 IEEE 
802.11 無線網路有基礎式架構 (Infrastructure) 下提出一個有效率的省電媒體存取控制通訊協
定。這個協定利用排程的方法來傳送資料，減少省電行動裝置的總等待時間和競爭媒體所產生的
碰撞。(結果)經過模擬證明，我們的方法獲得較好的結果。(結論)改善碰撞問題和減少不必要的
電量消耗，讓電量作更有效率的利用。 
關鍵詞：電源管理，媒體存取控制層 (MAC)，IEEE 802.11，無線區域網路，無線網路 
 
An Energy-efficient Power-saving Protocol in IEEE 802.11 
Infrastructure WLANs 
Shih-Lin Wu，Shu-Jia Chen 
（Department of Computer Science and Information Engineering Chang Gung University, Kwei-Shan Toa-Yuan, Taiwan, 
R.O.C, slwu@mail.cgu.edu.tw；m9429005@stmail.cgu.edu.tw） 
 
Abstract 
To support mobility, most hand-held wireless devices are powered by battery that has only a 
limited amount of energy. Therefore, energy efficiency becomes one of most important design issues in 
wireless networks. Our proposed mechanism is focused on power saving MAC protocol. A 
well-designed of energy-efficient MAC protocols should be realized with both minimum energy 
consumption as well as maximum data throughput while be compatible with currently de facto 
standards. We propose an energy-efficient MAC protocol in IEEE 802.11 infrastructure WLANs. It 
uses a novel approach to schedule those to be transmitted frames for reducing the total waiting time and 
the collision of the frames. Through simulations, we demonstrate the advantages of our designed MAC 
protocol. 
Keywords：power management, medium access control (MAC), IEEE 802.11, wireless LAN (WLAN), 
wireless networks 
 
無線通訊技術的發展目前已有相當多
的研究人員投入，而其應用在全球更是相當
的普及，已經正式宣告了無線通訊的時代來
臨。如何讓有限的電能做最有效的利用成為
表一. access point 中的 buffer 狀態，（）裡數字
表示所要傳送的資料量 
A (20) B (15) C (10) 
 
圖二. 參考文獻[2] FIFO 的運作模式 
一、方法 
我們曾經在 Ad Hoc 環境下提出了一個
省電的演算法 [11]，對省電行動裝置 (PS 
node)的傳輸做排程，以減少一些不必要的
閒置時間及減少傳送中的資料發生碰撞，因
此我們沿用之前的傳輸排班機制，使用的排
程法則是採取最短工作優先配置的方式 
(shortest job first, SJF)，使用 SJF 排程法則可
以使所有 PS nodes 的總等待時間最少，達到
節省 PS nodes 電量消耗的結果。以表二為
例，假設目前有 node A、node B、node C 的
資料暫存在 access point 中，依照到達 access 
point 的時間順序為 A→B→C，若 access 
point 傳送資料給 node A 需要 10ms、access 
point 傳送資料給 node B 需要 2ms、access 
point 傳送資料給 node C 需要 5ms，使用
FIFO 的排程法則，傳送順序為 A→B→C，
其運作模式如圖三，則總等待時間為 22ms 
(node B + node C = 10 + 12 = 22)；使用 SJF
排程法則，傳送順序為 B→C→A，其運作
模式如圖四，則 PS nodes 的總等待時間為
9ms (node A + node C = 7 + 2 = 9)。 
 
表二. 在 access point 中的暫存狀態，（）裡數
字表示所要傳送所花費的時間 
A (10) B (2) C (5) 
A
10
C
5
B
2
A
B
C
 
圖三. 使用 FIFO 排程法則 PS nodes 的總等待
時間示意圖 
 
A
10
C
5
B
2
A
B
C
 
圖四. 使用 SJF 排程法則 PS nodes 的總等待時
間示意圖 
 
對於 access point 內部暫存資料的方
法，我們所採取的是 SJF 排程法則，將要傳
給 PS nodes 的資料量由小到大依序排列，但
若是只依照資料量大小排序，則會產生一個
問題，資料量大的都會被排在後面，可能使
得資料量大的省電行動裝置無法接收到資
料，因此我們加了一個優先順序的規則，若
是在 access point 在這個 Beacon Interval 結束
時，仍然有資料沒有傳送完，則將目前暫存
在 access point 中資料的優先順序加一，在
access point 將資料作排序時，先考慮優先順
序大小，接下來才是資料量的大小，對於
access point 如何排序，我們將以下列的演算
法做介紹。 
 
演算法 1. access point 對傳送順序的排序 
Queue：目前在 access point 中暫存的資料陣
列 ( 陣列裡的資訊有 priority(優先順序)、
datasize (資料大小)、id(要傳送的省電行動裝
置) ) 
newItem：access point 新接收到要傳給省電
行動裝置的資料 
 AP
A
B
C
A
10
B
15
C
20
SIFS
Beacon
CF-PS-Poll
CF-PS-poll
CF-PS-poll
Beacon  Interval
Next  BI
ACK
ACK
ACK
 
圖五. 使用 SJF 排程法則運作例子 
 
二、模擬 
使用 Qualnet 4.0 版為我們的模擬程
式，並與參考文獻[2]和 IEEE 802.11 標準作
比較。在我們的模擬實驗中，電源消耗功率
依照參考文獻[12]，模擬環境使用 1 個 access 
point、80 個省電行動裝置，省電行動裝置
在每個 Beacon Interval 都會醒來聽是否有資
料要接收，其模擬的參數如表四所示。 
 
表四. 模擬參數表 
模擬參數 參數值 
模擬時間 5 秒 
Beacon Interval 100 ms 
閒置時的電力消耗功率 1150 mw 
傳送時的電力消耗功率 1650 mw 
接收時的電力消耗功率 1400 mw 
睡眠時的電力消耗功率 45 mw 
傳輸資料量 100 ~ 2000 bytes 
 
為了使模擬單純化，我們只考慮 access 
point 傳送資料給省電行動裝置，而省電行
動裝置不會上傳資料給 access point，以避免
因為競爭而造成排程錯誤。我們以改變每個
省電行動裝置的 inter arrival time，來控制網
路的負載狀況；分別針對電量的使用效率
（bytes/joule）、每個省電行動裝置在每秒成
功接收的資料量總和（bytes/sec/node）、資
料的延遲（sec/packet）來觀察我們的方法
（SJF）與參考文獻[2]（FIFO）、IEEE 802.11
（802.11）的模擬結果。為了配合 Qualnet
的模擬程式，有使用 RTS – CTS 的傳輸方
式；讓模擬結果更佳公平，我們使用不同的
random seed，執行五次模擬而取平均。 
 圖六說明了三種方法在每焦耳的電量
消耗可以獲得成功接收的資料量。由於
802.11 是採取競爭的方式，若是產生碰撞則
會造成電量的浪費，因此平均成功接收的資
料量是最小的。而在 inter arrival time=5 時，
SJF 的方法明顯比 FIFO 好，原因在於若前
面傳輸的資料量較大，使用 SJF 方法的總等
待時間較小，因此電量的浪費較少；另一個
原因則是因為 inter arrival time 變小，相對的
每個 Beacon Interval 要傳輸的省電行動裝置
個數變多，而 SJF 的方法只會讓在這個
Beacon Interval 可以傳輸的行動裝置醒著接
收資料，其他的就進入睡眠，因此消耗的電
量較少，所獲得的 energy 值較高。 
A→B→C 表示所要傳
送的資料量 
用 Shortest Job First (SJF) 的方法來當作我
們的排程法則，用以讓行動裝置的電量作更
有效率的利用。 
 
 
圖九. 當access point所排定傳送資料的PS node在這個Beacon Interval沒有醒來，造成access point
沒有在 SIFS 時收到 CF-PS-Poll 訊框的解決方法範例 
 
五、誌謝 
本研究承國科會補助，計畫編號：
NSC69-2221-E-182-007-MY3 、
NSC96-2628-E-182-019-MY3，特此誌謝。 
 
六、參考文獻 
[1] LAN MAN Standards Committee of the 
IEEE Computer Society. IEEE Std 
802.11-1999, Wireless LAN Medium 
Access Control (MAC) and Physical 
Layer (PHY) Specifications. IEEE, 
November 1999. 
[2] Hongyan Lei, Arne A. Nilsson, “A Power 
Management Scheme for the IEEE 802.11 
Based WLANs,” In Proceedings of IEEE 
IPCCC 2005. 
[3] H. Woesner, J.-P. Ebert, M. Schlager, and 
A. Wolisz, “Power-Saving Mechanism in 
Emerging Standards for Wireless LANs: 
The MAC Level Perspective”. IEEE 
Personal Communications, Jun. 1998. 
[4] Jeongjoon Lee, Catherine Rosenberg, and 
Edwin K. P. Chong, “An opportunistic 
power-saving mode and scheduler design 
for wireless local area networks,” IEEE 
Wireless Communications and 
Networking Conference, 2006, vol. 2, pp. 
926 – 933. 
[5] Hyu-Dae Kim and Dong-Ho Cho, 
“Throughput Enhancement through 
Arranged Power-saving Mechanism in 
Wireless LAN,” In Proceedings of IEEE 
ICC, 2006. 
[6] L. M. Feeney and M. Nilsson. 
“Investigating the Energy Consumption of 
a Wireless Network Interface in an Ad 
Hoc Networking Environment”. IEEE 
INFOCOM, 2001. 
[7] C.-S. Hsu, J.-P. Sheu, and Y.-C. Tseng. 
“Minimize Waiting Time and Conserve 
Energy by Scheduling Transmissions 
IEEE 802.11-based Ad Hoc Networks”. 
Int’l Conf. on telecommunications, 2003. 
[8] E.-S. Jung and N. H. Vaidya. “An 
Efficient MAC Protocol for Wireless 
LANs”. ACM MOBICOM, September 
23-28, 2002. 
[9] Changsu Suh, Young-Bae Ko and 
Jai-Hoon Kim, "Enhanced Power Saving 
for IEEE 802.11 WLAN with Dynamic 
Slot Allocation," Lecture Notes in 
Computer Science, Accepted to the 
International Conference on Mobile 
Ad-hoc and Sensor Networks (MSN'05), 
Dec. 2005. 
[10] Yuefeng Zhou, David I. Laurenson, 
Stephen McLaughlin, “An Effective 
Power-Saving Scheme for IEEE 
802.11-Based Multi-hop Mobile Ad Hoc 
Network”, The 60th Vehicular Technology 
Conference (VTC), Los Angeles, Sep. 
26-29, 2004. 
[11] Shih-Lin Wu, Pao-Chu Tseng, Zi-Tsan 
Chou, “Distributed power management 
protocols formulti-hop mobile ad hoc 
networks”, Computer Networks 47 (2005) 
63–85. 
[12] Eun-Sun Jung, Nitin H. Vaidya,“ An 
Energy Efficient MAC Protocol for 
Wireless LANs“, IEEE INFOCOMM, 
June 2002, 1756 – 1764.  
A→B→C B→C 
表示所要傳
送的資料量 
 1 
An Energy-efficient MAC Protocol with Downlink Traffic Scheduling 
Strategy in IEEE 802.11 Infrastructure WLANs 
 
Shih-Lin Wu and Shu-Chia Chen 
 
Department of Computer Science and Information Engineering 
Chang Gung University 
259 Wen-Hwa 1st Road, Kwei-Shan Tao-Yuan 333, Taiwan, ROC 
 
 
Abstract 
To support mobility, mobile devices are powered by batteries with limited 
energy. Thus, the good design of energy efficiency becomes one of the most 
important issues in wireless networks. A well-designed energy-efficient MAC 
protocols can be realized with both minimum energy consumption as well as 
maximum data throughput and can be easily implemented in products with de facto 
standards. Based on IEEE 802.11 infrastructure WLANs, we propose an 
energy-efficient MAC protocol which employs a novel approach to schedule those 
to-be-transmitted frames for saving energy by reducing the total waiting time and the 
collisions of the frames. Fault tolerance issues are also considered in the proposed 
protocol because frames are transmitted in fading interference wireless environment. 
Through analyses and simulations, we demonstrate that our protocol presents a better 
performance than IEEE 802.11 and other protocols not only in energy efficiency but 
also in aggregate throughput and frame transmission delay. 
 
Keywords: power management, medium access control (MAC), scheduling, IEEE 
802.11, wireless LANs (WLANs), wireless networks. 
 
1. Introduction 
 
With the evolutionary advancement of wireless technologies and the proliferation 
of portable computers, the dream of “communication anytime and anywhere” 
becomes true. To support mobility, the devises are required to be powered by batteries. 
However, the finite and nonrenewable battery power of mobile devices represents one 
of the greatest limitations to wireless networks. Woesner et al [2] point out that the 
transmission in wireless networks is the primary energy consumption. Thus, how to 
design an energy-efficient device becomes one of the most important issues in 
 3 
frame transmissions are incurred.  
References [13-15] pay attention to improving the performance of IEEE 802.11 
power saving protocol for QoS applications. Although above researches present 
excellent design to increase energy efficiency in wireless LANs, all of them do not 
aim to address the weakness of IEEE protocol against the background traffic. In 
reference [16], authors observe that the energy consumption of a PS station increases 
mainly by the data rate of the background traffic generated by active stations. To solve 
this problem, authors propose a power saving protocol with scheduled and 
uninterrupted frame delivery procedure for PS stations. However, this protocol does 
not give the detailed scheduled process about how to avoid the interference from 
active stations’ traffic. Further, this protocol does not consider fairness issues [17, 18] 
among stations. 
We propose MAC power-saving protocols in infrastructure mode to eliminate the 
problem of frame collisions and to utilize an efficient scheduling transmission to 
conspicuously save the power consumption. Moreover, our design mechanisms used 
in the proposed protocol is compatible with the IEEE 802.11 standard. 
The rest of this paper is organized as follows. In section 2, we outline the power 
management schemes of IEEE 802.11 infrastructure networks. Our proposed protocol 
which schedule transmission mechanism is presented in section 3. The mathematic 
analysis on the energy consumptions of protocols is given in section 4. Section 5 gives 
extensive simulation results. The final conclusions are drawn in section 6. 
 
2. Related works 
 
IEEE 802.11 power management scheme divides the time into equal parts called 
beacon interval (BI). At the beginning of each beacon interval, the AP broadcasts a 
beacon frame including TIM frame that records whether PS stations have data frames 
buffered in the AP. The PS stations wake up to receive beacon frame periodically and 
check the TIM field according to AID (association identifier, assigned by the AP). If 
there are data frames buffered in AP, the bit of TIM would be 1; if there is no data 
frames buffered in AP, the bit of TIM value would be 0. If the PS station does not 
have data frames buffered in AP, it goes to sleep until the next awake time. If the PS 
station has data frames buffered in the AP, it sends PS-Poll frame to the AP according 
to DCF rule to contend for the media with other PS stations. When the AP receives 
the PS-Poll frame, it sends the data frames to the PS station. Fig. 1 illustrates an 
 5 
OEES is not compatible with IEEE 802.11 infrastructure and therefore cannot be 
easily implemented. 
 
AP
1
2
SIFS
Beacon
P-ACK
beacon interval next  BI
ACK
ACK
k
P-ACK
…… ……
P-ACK
TIM
3
………
 
Fig. 2. An example of OEES protocol. 
 
Reference [12] proposes a method which uses a polling scheme to avoid frame 
collisions. The transmission method is first in first out (FIFO) as shown in Fig. 3. 
Table 1 shows an example of the transmission sequence and data size buffered in the 
AP. In the beginning, the AP transmit a beacon frame to inform the first station A to 
transmit a PS-Poll frame because the first to-be-transmitted frames in buffer belong to 
A. Station A transmits a PS-Poll frame to AP after receiving beacon frame. And then 
AP transmits the data frames including the message indicated the next station B. A 
replies an ACK to AP for receiving its data frames. After a short time period, B 
transmits a PS-Poll frame to AP and then AP transmits the data frames to B. The rest 
can be deduced by analogy. 
 
Table 1. An example of the transmission sequence and data size buffered in the AP  
(The number in parentheses is data size) 
A (20) B (15) C (10) 
 
 7 
3.1 Data structure 
 
Fig. 4 represents TIM format in IEEE 802.11 infrastructure networks. The part of 
partial virtual bitmap (PVB) records whether the PS stations have data frames 
buffered in the AP. In the standard, if the AID of the PS station is 8, the 8-th bit of 
PVB records whether there is any data frames buffered in the AP for station 8. If there 
is no data frames buffered in AP, the bit will be 0. In order to achieve the mechanism 
proposed by this paper that AP has to tell the transmission sequence to PS stations, 
PVB is modified to record the transmission order of PS stations. Table 2 shows an 
example. The value of 1st byte of PVB is 0 means that station 1 has no data buffered 
in AP while the value of 3st byte of PVB is 2 indicates that station 3 has data buffered 
in AP and the transmission order is scheduled at the 2nd position.  
 
 
Fig. 4. TIM element format 
 
Table 2. An example of modified TIM frame 
AID 1 2 3 4 5 6 
Partial Virtual Bitmap 0 0 2 0 1 3 
 
 
3.2 listen interval = 1 
 
In order to reduce PS stations’ idle time, we follow the shortest job first (SJF) 
policy which minimizes the total waiting time of PS stations to reduce total power 
consumption. To illustrate the advantage of using SJF schedule, an example is given 
as shown in Fig. 5 and 6. Assume that AP currently buffers data frames for three 
stations and the order of frame arrival time at AP is A, B, and C and the transmission 
time from AP to the stations is 10, 2, and 5 ms, respectively, as shown in Table 3. If 
FIFO is applied, the transmission sequence will be A, B, and C. Fig. 5 shows the 
awakened time of stations to transmit/receive data frames. The total waiting time for 
PS stations to complete their transmissions is 22 ms (station B + station C = 10 + 12 = 
22). If we use SJF, the transmission sequence will be B, C, and A. The awakened time 
of stations to transmit/receive data frames is shown in Fig. 6. The total waiting time of 
the PS stations is 9 ms (station A + station C = 7 + 2 = 9). We know that the less wait 
time results the less energy consumption. Hence, SJF are more efficient than FIFO. 
 9 
according to the transmission time of stations. Finally Algorithm 1 performs the 
Algorithm 3 to assign TIM value for each corresponding station according to its 
transmission order in transmit-queue.  
 
 
Algorithm 1.  
TIM[] : the array recorded the transmission order 
buffer-queue {AID, datasize, data} : all of new data frames arrived 
for PS stations will be enqueued into buffer-queue in AP 
transmit-queue {AID, datasize, data} : the to-be-transmitted data 
frames in the current interval 
new-data {AID, datasize, data} : the new data arrivals at AP  
temp-data {AID, datasize, data} : a temp item of implementing this 
algorithm  
 
/* call the algorithm 2 to get the transmit-queue which allows to 
transmit in the current BI */ 
transmit-queue ← NULL 
Algorithm 2 ( buffer-queue, transmit-queue ) 
 
/* sort elements in the transmit-queue according to transmission time 
(from small to large) */ 
Bubble_Sort (transmit-queue) 
 
/* call the algorithm 3 to give the TIM value according to the 
transmit-queue orderly */ 
TIM[] ← {0} 
Algorithm 3 (TIM[]) 
 
Fig. 7. The main scheduling procedure used in AP. 
 11 
Fig. 9 shows Algorithm 4 executed by PS stations. When a PS station receives the 
beacon frame, it checks the TIM frame to see whether it is in the transmission 
sequence. If the PS station is in the sequence, it can transmit a contention-free PS-Poll 
(CF-PS-Poll) frame according to its order in the sequence. The function of CF-PS-Poll 
is almost same as the PS-Poll of IEEE 802.11 except that CF-PS-Poll frames are sent 
with contention-free manner.  
 
Algorithm 4.  
AID：the number of the AP given 
TIM：the array records the transmission order in this beacon 
transmitOrder：the order of PS station transmits CF-PS-Poll 
 
transmitOrder ← 0 
if ( TIM[AID] !=0 ) 
transmitOrder ← TIM[AID] 
Transmits CF-PS-Poll according to transmitOrder  
    Receives data frames and replies ACK 
end if 
Set the time of next awaken BI and then go to sleep mode. 
Fig. 9. PS station working procedure. 
 
 
Table 4. The transmission order (The number of parentheses is data size).  
A (10) B (15) C (20) 
 
AP
A
B
C
A
10
B
15
C
20
SIFS
Beacon
CF-PS-Poll
CF-PS-poll
CF-PS-poll
beacon  interval
Next  BI
ACK
ACK
ACK
A → B → C
 
Fig. 10. An example operation of SJF protocol.  
 
Fig. 10 is an example for illustrating the operations of SJF. Assume that there are 
data frames for three stations buffered in AP and the transmission order is A, B, and C 
as shown in Table 4. After receiving the beacon broadcasted from AP, all PS stations 
 13 
wake up in next BI if their TIM value is 255. 
Fig. 11 is an example to illustrate the operations of SJF with listen interval≠1. 
Table 5 is an example of TIM frame associated with a beacon in the current BI. By 
received TIM, the PS station with AID=1 knows that it has data frames buffered in the 
AP and can not receive data frames in the current BI because of the value 255 
recorded in TIM field. Thus it goes to sleep in this BI and wakes up in next BI. The 
actions of other stations is same as the designed protocol with interval=1. 
 
Table 5. An example of TIM frame when listen interval≠1 of the PS stations 
AID 1 2 3 4 
Partial Virtual Bitmap 255 0 2 1 
 
AP
1
2
3
SIFS
Beacon
CF-PS-Poll
CF-PS-Poll
beacon  interval
Next  BI
ACK
ACK
4
Beacon
Station 1 still has 
to wake up to 
receive beacon 
frame in this 
beacon interval
 
Fig. 11. An example operation of SJF protocol when listen interval≠1 of the PS stations.  
 
 
3.4 Fault tolerance issues 
 
In the previous section, we assume that beacons can be received correctly by all 
stations. However, this is not always true for wireless networks due to the conditions 
such as noise, co-channel interference, and mobility. If any of PS stations don’t 
receive beacon, it will not send the CF-PS-Poll frame to the AP on time. This may 
incurs the channel idle time exceeds the DIFS period which results in the contention 
from active stations. To overcome this problem, we propose a mechanism to recover 
the error. Fig. 12 is an example to illustrate the operations of the mechanism. We also 
use Table 4 as the transmission sequence and data size in the current BI. If the station 
 15 
where the term E[∆ energy] is the expected energy difference between FIFO and SJF, 
E[Disorder(FIFO)] is the expected number of disorders occurred by FIFO, andεis 
the average energy consumption of a single disorder. To acquire the expected energy 
difference E[∆ energy], we first derive the expected number of disorders occurred by 
FIFO and then the average energy consumption of a single disorder. 
 
˙ Expected number of FIFO disorders 
 
Suppose n types of frame length, i.e., 1, 2, …, n bytes, each appearing with the 
same probability (uniform distribution). Let nka  be the disorder number occurred 
when k individuals receive frames from AP. When two individuals have frames 
buffered at AP, all possible combinations resulted in disorders are {2, 1}, {3, 1}, …, 
{n, 1}, {3, 2}, {4, 2}, …, {n, 2}, ..., and {n, n-1}. Thus the disorder number is 
2
( 1)( 1) ( 2) ..... 1
2
n n na n n −= − + − + + = . When three individuals receive frames, we have 
the 32C  choices to select any two from three individuals. The disorders resulted from 
any two of three individuals are same as 
2
na , while the other one has n types of frame 
lengths. Thus the resulting total number of disorders is 33 2 2
n na C a n= × × . When four 
individuals receive frames, there are 42C  choices to select any two from four 
individuals. The disorders resulted from any two of four individuals are same as 
2
na , 
while the other two have n2 combination types of frame lengths. Thus the resulting 
total number of disorders is 4 24 2 2
n na C a n= × × . 
When k individuals receive frames, the total number of disorders N is expressed as: 
2 2 1
2 2
( 1) ( 1) ( 1)( 1)
2 2 4
n k n k k k
k
k k n n k k nN a C a n n n− − −− − − −= = × × = × × = ×          (2) 
 
Suppose k individuals and n types of frame length, for a total of nk different 
combinations, 1S  , 2S  , …., knS . Let iP  be the probability of the combination iS . 
We know that 1 2 ..... 1knP P P+ + + = . The combination 1S , 2S , … , and knS have the 
same probability (the frame length is uniform distribution) so we get 1P = 2P =….= 
kn
P = 1kn
.  
 17 
combinations. 
Among these, the length difference for 1 byte have n-1 combinations, the length 
difference for 2 bytes have n-2 combinations, …. , and the length difference for n-1 
bytes have 1 combination. 
Therefore, the average length difference of any two frames in a single disorder is 
1
1
( 1)[1 ( 1) 2 ( 2) ....... ( 1) 1]
2
( 1)[ ( )]
2
( 1)( 1) ( 1)[ ]
6 2
1
3
n
i
n nl n n n
n ni n i
n n n n n
n
−
=
−
= × − + × − + + − × ÷
−
= × − ÷
− + −
= ÷
+
=
∑
  
 
Take the result into Eq. (5), we can obtain the average energy consumption, 
1 ( / ).
3
n p rε += ×                                                            (6) 
 
• Expected energy difference between FIFO and SJF 
 
According the results of two equations, Eq. (4) and (6), the expected energy 
difference between FIFO and SJF, E[∆ energy], in Eq. (1) can be further derived. When 
k individuals receive frames and each one have the frame length from 1 to n bytes 
with uniform distribution, the expected energy difference between FIFO and SJF can 
be deduced as 
E[∆ energy] = E[Disorder (FIFO)]×ε= 
( 1)( 1)
4
k k n
n
ε− − ×  = ( 1)( 1) 1
4 3
k k n n p
n r
− − +
× × . 
(7) 
 
 
5. Simulation Results 
 
We use the Qualnet simulator [20] to verify the benefits of our power-saving 
protocol. The energy consumption model shown in Table 6 adopts the specifications 
suggested in [19]. First, the FIFO and SJF energy difference values derived by section 
4 are compared with the simulation results. The wireless transmission rate is 11 Mbps, 
beacon interval time is 100 ms, and the duration of simulation is five minutes. The 
length of frames is randomly assigned from 1 to 1000 bytes with uniform distribution. 
 19 
 
Fig. 14, 15 and 16 show the simulation results as we vary the frame interarrival 
time and let listen interval=1. In Fig. 14, the IEEE 802.11 is the worst one because the 
frames’ collisions and the backoff delay will cause the energy wastage. As to the other 
two, SJF is always superior to FIFO. The reason is that SJF lets the smallest frame 
transmits first which minimize the total waiting time and then the consumption of 
energy. Moreover, another interest scenario is the range of SJF and FIFO becomes 
wider while the frames’ interarrival time becomes smaller. This is because the less 
frames’ interarrival time, the more the number of transmitted PS stations in each BI. 
The SJF lets the PS stations which can receive data frames in current BI awake and 
the other PS stations go to sleep. Therefore, the power consumption of SJF is much 
less than FIFO. 
 Fig. 15 shows that the difference of the performance is not obvious on 
throughput before the frame interarrival time < 5. However, when the frame 
interarrival time = 5, there is an obvious difference among 802.11, SJF and FIFO. The 
reason is that the traffic load is high at this time and PS stations which compete for 
transmitting PS-Poll frame at each BI become much more. Thus, the collisions of 
802.11 become more and the successfully received data frames become less. 
 Fig. 16 shows that the sequence of the delay is 802.11 > FIFO > SJF. IEEE 
802.11 incurs the backoff delay and the retransmission delay so the delay is largest. 
The delay of SJF is less than that of FIFO because SJF lets the smallest frame 
transmits first which minimize the total waiting time.  
 
 
 
Fig. 14. Energy efficiency vs. frames’ interarrival time under listen interval = 1. 
 
 21 
However, the decreasing range of FIFO is much larger than the other two. The reason 
is that the SJF schedule can focus on the sequence of PS stations awaken in current BI. 
And 802.11 adopts the method of competition. However, FIFO does not mention how 
to do the operation when the PS station which needs to receive the data does not wake 
up in current BI.  
 From Fig. 19, we can see that the delay still remains as 802.11 > FIFO > SJF. 
Along with the increasing of listen interval, the delay becomes larger.  
 
 
 
Fig. 17. Energy efficiency vs. listen interval under frames’ interarrival time = 6. 
 
 
Fig. 18. Throughput vs. listen interval under frames’ interarrival time = 6. 
 
 23 
To demonstrate the benefit of the proposed scheduling strategy, we develop a 
mathematic analysis model to evaluate the difference of energy consumptions 
between pure FIFO and SJF. Through the mathematic analysis and extensive 
simulation results show that our power-saving MAC protocol possesses a better 
performance than pure FIFO and IEEE 802.11 not only in energy efficiency but also 
in aggregate throughput and frames’ transmission delay.  
 
 
References 
1.  IEEE Std 802.11-1999, Wireless LAN Medium Access Control (MAC) and 
Physical Layer (PHY) Specifications. LAN MAN Standards Committee of the 
IEEE Computer Society, IEEE, November 1999. 
2.  H. Woesner, J.-P. Ebert, M. Schlager, and A. Wolisz, “Power-Saving Mechanisms 
in Emerging Standards for Wireless LANs: The MAC Level Perspective,” IEEE 
Personal Communications, pp. 40-48, Jun. 1998. 
3.  L. M. Feeney, and M., Nilsson, “Investigating the Energy Consumption of a 
Wireless Network Interface in an Ad Hoc Networking Environment,” IEEE 
Infocom, pp. 1548-1557, 2001. 
4.  S.-L. Wu, P.-C. Tseng and J.-Y. Yang, “An Efficient Power Saving MAC Protocol 
for IEEE 802.11 Ad Hoc Wireless Networks,” Journal of Information Science 
and Engineering, pp. 1171-1188, 2007. 
5.  I. Chakraborty, A. Kashyap, A. Kumar, A. Rastogi, H. Saran, and R. Shorey, 
“MAC Scheduling Policies with Reduced Power Consumption and Bounded 
Packet Delay for Centrally Controlled TDD Wireless Networks,” IEEE ICC, pp. 
1980–1984, June 2001. 
6.  C.-S. Hsu, J.-P. Sheu, and Y.-C. Tseng, “Minimize Waiting Time and Conserve 
Energy by Scheduling Transmissions IEEE 802.11-based Ad Hoc Networks,” 
IEEE ICT, pp. 393–399, Feb 2003. 
7.  S.-C. Lo, G. Lee, and W.-T. Chen, “An Efficient Multipolling Mechanism for 
IEEE 802.11 Wireless LANs,” IEEE Transactions on Computers, Vol. 52, No. 6, 
pp. 764–778, June 2003. 
8.  J. Lee, C. Rosenberg, and Edwin K. P. Chong, “An opportunistic power-saving 
mode and scheduler design for wireless local area networks,” IEEE WCNC, pp. 
926–933, 2006. 
  
附
  錄
  四
 
  
SHIH-LIN WU, PAO-CHU TSENG AND JHEN-YU YANG 
 
1172 
 
Chiasserini et al. [5] proposed several sleep patterns and allows mobile nodes to pick 
their own patterns depending on their battery condition and required quality of service. 
However, this protocol needs a special hardware device, called remote activated switch 
(RAS), which can receive wakeup signals when the mobile node has fallen to sleep. An-
other work proposed by Chen et al. [4], called SPAN, employs the notion of connected 
dominated set to save power consumption. In this protocol, some nodes must act as coor-
dinators which are chosen according to their remaining battery power and number of 
neighbors. Only coordinators are needed to keep awake and other nodes can enter the 
sleep mode. These coordinators undertake the jobs of relaying frames for their neighbor-
ing nodes. Using an idea similar to SPAN, reference [20] proposed by Xu et al. provides 
a grid-based energy-saving routing protocol. With the help of the localization capability 
using GPS, a large area is partitioned into small areas called grids, in each of which only 
one node remains in the active state to relay frames for other nodes located in the same 
grid. Recently, Wu et al. [19] proposed three power management protocols to overcome 
the asynchronous problem for multi-hop mobile ad hoc networks. The proposed protocol 
consists of three key components: a scalable beacon transfer procedure for the beacon 
contention and time synchronization challenge, three randomized asynchronous power 
management schemes for neighbor maintenance challenges, and a data frame transfer 
procedure for the high energy-efficient transmissions.  
IEEE 802.11 standard [1] specifies the MAC protocol including distributed coordi-
nation function (DCF) and point coordination function (PCF). It also provides two dif-
ferent power management schemes: one for infrastructure networks and the other for ad 
hoc networks. Our energy efficient mechanism is proposed for IEEE 802.11 ad hoc 
WLANs. In IEEE 802.11 protocol, wireless nodes have two power modes: active and 
power saving (PS). The power management scheme divides time into beacon intervals. 
At the beginning of each beacon interval, power saving nodes wake up for a short time 
period, called announcement traffic indication message (ATIM) window. In the ATIM 
window, nodes exchange control frames, called ATIM frames, to inform their power 
saving counterparts to remain awake until the end of the beacon interval to receive data 
frames. After ATIM window, all nodes follow the DCF protocol to transmit their data 
frames. We know that DCF is based on the carrier sense multiple access with collision 
avoidance (CSMA/CA) which may waste scarce energy and bandwidth due to frame 
collisions and lengthen the transmission delay due to waiting backoff time.  
A lot of researches take advantage of scheduling transmissions to avoid frame colli-
sions and to save energy consumption, which are more related to our work. However, 
most scheduling algorithms [12, 13, 16] are designed for centralized or master-driven 
systems, not for distributed systems. Reference [8] uses a distributed way to design a 
scheduling scheme. However, PS nodes can not completely avoid frame collisions and 
remove backoff time delay. We observe that PS nodes operating in IEEE 802.11 power 
management protocol will wake up in an ATIM window so that each node can overhear 
all its received ATIM frames and sort the transmission order of those to-be-transmitted 
nodes according to their transmission durations. At the end of ATIM window, those 
nodes can transmit their data frames in order. Based on this idea, we propose an efficient 
scheduling protocol to prevent PS nodes from contending medium again after ATIM 
window. 
IEEE 802.11 power management scheme does not regulate how to determine the 
SHIH-LIN WU, PAO-CHU TSENG AND JHEN-YU YANG 
 
1174 
 
Fig. 1 illustrates an example of the IEEE 802.11 power management scheme. At the 
beginning of a beacon interval, nodes A, B, and C wake up. If node C receives no ATIM 
frame for it during the ATIM window period, it will go back into the doze mode.  
On node A having data frames for PS node B, it first transmits an ATIM frame to B 
during the ATIM window. Node B replies an ATIM ACK to A. After the ATIM window, 
node A and B exchange their data frames and ACKs using the DCF access procedure. All 
dozing nodes wake up again at the beginning of the next ATIM window. Since DCF is 
based on contention-based CSMA/CA mechanism, it may waste scarce battery resources 
and bandwidth due to frame collisions and lengthen the frame delay due to waiting for a 
period of backoff time. 
3. ENERGY-EFFICIENT MAC PROTOCOL 
A well-designed energy-efficient MAC protocols should be concern with higher 
data throughput and better energy savings. To realize the considerations as well as to 
have the compatibility of IEEE 802.11 power management protocol, we propose a novel 
scheme to schedule those to-be-transmitted data frames for PS nodes and an intelligent 
scheme to adjust the size of the ATIM window dynamically. Our scheme follows most of 
IEEE 802.11 regulations such as the structure of a beacon interval and the time synchro-
nization mechanism among all nodes. We describe the detail operations of the two 
mechanisms in the following two subsections separately. 
3.1 The Scheduling Transmission Mechanism 
It is clear that reducing nodes’ backoff idle time and avoiding frame collisions can 
improve energy efficiency and network throughput. We’ve found that it can be achieved 
easily by the overhearing technique using the broadcast nature of wireless medium. Thus 
just little modification of IEEE 802.11 power management protocol, we have an efficient 
scheduling mechanism for PS node transmissions. In our protocol, the duration of a 
to-be-transmitted data frame, named working duration, is piggybacked in an ATIM 
frame. The total working duration of a node is the sum of the working durations for all 
ATIM frames related to the node. To minimize the total power consumption, we have to 
minimize the total waiting time because the more wait time a node has, the more battery 
energy it wastes. To minimize total waiting time, we follow shortest job first policy ba-
sically, so the node with the shortest total working duration has the highest priority to 
transmit its buffering frames after the ATIM window. Therefore, each node can easily 
determine the first PS node transmission scheduled locally by sorting through the total 
number of working durations for all PS nodes. 
The scheduling transmission mechanism is designed for PS nodes to extend their 
battery life. After completing all scheduled transmissions, other nodes obey the normal 
DCF procedure to contend in the medium to send data frames. Moreover, we employ a 
mechanism similar to that in Ref. [9] which allows a PS node to go back to sleep when it 
completes all of its data transmissions. This is different from the IEEE standard in which 
a PS node remains awake during the entire beacon interval even if it has received its data 
frames before the end of this beacon interval. In the following presentation, we first in-
troduce the basic scheduling scheme and then give our final scheme. 
SHIH-LIN WU, PAO-CHU TSENG AND JHEN-YU YANG 
 
1176 
 
five PS nodes involved in the ATIM frames’ transmission: A, B, C, D, and E. During the 
ATIM window, only four ATIM frames are announced successfully, i.e., ATIM(A, B, 
10), ATIM(A, C, 20), ATIM(B, C, 30), and ATIM(D, E, 40). Therefore, at the end of the 
ATIM window all nodes in the network should maintain the same transmission table as 
shown in Table 1 if no transmission error has occurred. 
 
Step 2: Determine the transmission order 
(a) To determine the first transmission node, each node sums up the working durations 
for individual node in its transmission table. The node with minimum total working 
duration is the first transmission node in the current transmission table. 
(b) To determine the next transmission node, the related entries for first transmission 
node will be deleted from the transmission table. The system then goes back to step 
2(a) to determine the next transmission node. 
 
The loop of the two steps 2(a) and 2(b) is performed until the transmission order of 
all PS nodes is determined. 
To illustrate this step, we also use Fig. 2 as our example. From Table 1, A has two 
related ATIM frames, i.e., ATIM(A, B, 10) and ATIM(A, C, 20), so its total working 
duration is 10 + 20 = 30. B also has two related ATIM frames, i.e., ATIM(A, B, 10) and 
ATIM(B, C, 30), so its total working duration is 10 + 30 = 40. The calculations of other 
nodes are same as A and B. After the calculations are complete, nodes A, B, C, D, and E 
have total working durations of 30, 40, 50, 40, and 40, respectively. Therefore, node A is 
the first transmission node because it has the minimum total working duration. To deter-
mine the next transmission node, all entries related to A in the transmission table are de-
leted. Table 2 is the new transmission table. From Table 2, we can easily determine the 
next transmission nodes are B and C. The loop of the two steps is performed until the 
transmission order of all PS nodes is determined. The final transmission schedule is that 
after A finishes its transmissions, B transmits the data frame to C and then D transmits 
the data frame to E. 
Table 2. The new transmission table after the related entries of node A has been deleted. 
Sender_ID Receiver_ID Working_Duration 
B C 30 
D E 40 
 
Step 3: Transmission data frames for PS nodes 
At the end of the ATIM window, each PS node exchanges its data frames according 
to its individual order and the available time specified in the working duration. We con-
tinue the above example to explain this operation. After ATIM window and a SIFS time, 
A and B first exchange frames and A waits for a SIFS time to send the buffering frames 
to C. While completing all of its traffic, A goes to sleep. In the next transmission node B 
waits for a SIFS time and then transmits its data frames to C immediately. The next 
transmission, from node D to E, follows the same rule as B and C to exchange frames. At 
the end of the scheduling transmission time, the nodes not in the transmission table begin 
to transmit their frames following DCF regulations. 
SHIH-LIN WU, PAO-CHU TSENG AND JHEN-YU YANG 
 
1178 
 
Table 3. The new transmission table after the related entries of node A has been deleted. 
TSIFS time of short inter-frame spacing 
TDIFS time of distributed inter-frame spacing 
TACK time to transmit an ACK 
TCWmin time of min. contention window 
TFramei time to transmit ith data frame in scheduling table 
TFramemin time to transmit a min. data frame 
TATIM time to transmit an ATIM frame 
Tcurr last ATIM ACK transmission ending time 
BI Beacon Interval 
TBTT the beginning time of current BI 
TBTTnext the beginning time of next BI 
DIFS+CWmin
ACK
                              Beacon Interval (i.e. BI)
Next BI
A
B
C
Power Saving State
ACK
AW
SIFS
ATIM data frame
TBTT
Tcurr
TBTTnext
RemainingBI
For active nodes
 to contend for data
transmision.
 
Fig. 3. This figure shows the first ATIM period ending rule. If nodes sense the channel is idle for 
TDIFS + TCWmin, nodes end ATIM window immediately. 
 
Fig. 3 is an example to illustrate this rule. During ATIM window, there is only one 
ATIM frame sent from A to B. After they exchange their control frames, the channel 
becomes idle. All nodes will not end the ATIM window to enter the scheduled transmis-
sion until the idle time lasts for TDIFS + TCWmin. According to our scheduling transmission 
mechanism, A starts to send the data frame to node B, and after SIFS idle time, B replies 
an ACK to node A. After completing their transmissions, A and B can turn back to sleep 
mode. Because node C has nothing to send or receive, it goes to sleep mode at the end of 
ATIM window. The rest beacon interval is for active nodes to use. 
    
2. As mentioned in section 3.1, each node can obtain the duration of frame transmissions 
by overhearing ATIM frames in a fully connected topology and calculate the total du-
ration of all its currently receiving ATIM frames. If the total duration of the scheduled 
transmissions reaches BI limitation, i.e. there is no any data frame can be transmitted 
in the rest BI even if the shortest frame, all nodes end the current ATIM window im-
mediately and enter the scheduled transmission. That is 
 
RemainingBI = TBTTnext − Tcurr − 
1
( 2 ),
i
n
Frame SIFS ACK
i
T T T
=
+ +∑  
SHIH-LIN WU, PAO-CHU TSENG AND JHEN-YU YANG 
 
1180 
 
sec, beacon window is 0.01 sec, ATIM window is 0.02 sec, data frame is 2048 bytes, 
beacon frame is 61 bytes, ATIM frame is 28 bytes, and data/ATIM ACK frame is 14 
bytes. The ATIM window size in 802.11 and the Shortest protocol is fixed at 0.02 sec 
while in the ATIM + Shortest and ATIM protocol is variable depended on the network 
traffic load. When a data frame arrival from higher-layer to MAC sublayer at a node, the 
destination of each frame is selected randomly from all of the nodes. Each result is the 
average of 50 times and each time runs 10 seconds. The performance is evaluated using 3 
metrics: energy efficiency (bytes/Joule), throughput (bytes/sec), and average delay of 
transmitted data frames (sec). 
Since our MAC protocol is primarily designed for PS nodes, we first give a simula-
tion with the environment of pure PS nodes and compare ours with 802.11 protocols on 
various metrics. Note that the arrivals of frames at a PS node follow the Poisson distribu-
tion with mean rate 1 frames/sec. The simulation will increase PS nodes with the number 
of 20 per step. Fig. 5, Fig. 6, and Fig. 7 show the energy efficiency, throughput, and av-
erage delay for the transmitted data frames, respectively. 
• Energy efficiency: 
Fig. 5 demonstrates the advantageous position of the proposed protocols in the met-
ric of energy efficiency. By means of dynamically adjusting ATIM window size, the 
proposed protocols permit suitable number of data frames to be transmitted by PS nodes 
after the ATIM window. After that, other PS nodes can enter the sleep mode for saving 
their variably battery. We know using DCF, data frame collisions and backoff waiting 
time will be more and longer than using the scheduling transmission mechanism when 
the total PS nodes number arises. This is the reason that the energy efficient of the ATIM 
protocol is little lower than of the Shortest one as the number of PS nodes is high. The 
Shortest protocol gives PS nodes the first order to transmit data frames so saves their 
waiting time. However, under the heavy traffic load, the Shortest protocol will waste a 
little energy because it uses the fixed ATIM window that cannot be ended early even if 
everybody ensures no more frame to be transmitted. By possessing all the merits in both 
ATIM and Shortest ones, the protocol ATIM + Shortest performs the best energy effi-
ciency among all protocols. 
• Throughput: 
The throughput results are drawn in Fig. 6. Dissecting the results, all of proposed 
protocols are more outstanding throughput than 802.11. The reason is the same as the 
previous analysis. From the figure we also find a phenomenon that the throughput of 
ATIM + Shortest protocol is the best one and the ATIM protocol is the worst one. And 
the gap between the Shortest and ATIM protocol is more visible as the number of PS 
nodes becomes larger. The reason about the phenomenon is that the Shortest protocol 
offers the tremendous throughput for PS nodes by transmitting the scheduled data frames 
without any collisions and backoff delay time. However, the PS nodes in the ATIM pro-
tocol still need to wait for at least the DIFS and backoff time, and may incur collisions 
with other nodes during data transmission time. This makes the ATIM protocol limited in 
throughput performance. This means that the benefit of using the Shortest protocol will 
be better than of using the ATIM one in the environment with the large number of pure 
PS nodes. The ATIM + Shortest protocol has the highest throughput because it has the 
advantages of both adjusting ATIM window size and scheduling transmissions.  
SHIH-LIN WU, PAO-CHU TSENG AND JHEN-YU YANG 
 
1182 
 
 
 
(a)                                (b) 
Fig. 9. Energy efficiency with various PS nodes under the fixed number of active nodes at 10 in  
(a) and at 40 in (b). 
 
(a)                                (b) 
Fig. 10. Throughput with various active nodes under a fixed number of PS nodes at 10 in (a) and  
at 40 in (b). 
 
(a)                                 (b) 
Fig. 11. Throughput with various PS nodes under a fixed number of active nodes at 10 in (a) and     
at 40 in (b). 
 
and increased the number of PS nodes with the degree of 10. Simulation 3 produces Fig. 
9 (a), Fig. 11 (a), and Fig. 13 (a) while simulation 4 generates Fig. 9 (b), Fig. 11 (b), and 
Fig. 13 (b).  
SHIH-LIN WU, PAO-CHU TSENG AND JHEN-YU YANG 
 
1184 
 
 
 
(a)                                  (b) 
Fig. 12. The average ZA delay of a transmitted frame with various active nodes under a fixed 
number of PS nodes at 10 in (a) and at 40 in (b). 
 
(a)                                   (b) 
Fig. 13. The average delay of a transmitted frame with various PS nodes under a fixed number of 
active nodes at 10 in (a) and at 40 in (b). 
 
transmission duration has exceeded the RemainingBI. Allowing more PS nodes transmit-
ting ATIM frames will cause redundant competition for nodes in wireless medium during 
the RemainingBI. In this situation, the ATIM protocol could prevent nodes from redun-
dantly competing. Our proposed protocol integrates these two schemes into the excep-
tional one brings the highest throughput in the simulation results. 
• Delay: 
Since the average delay for transmitted data frames is the most important factor in 
power consumption as well as QoS degree, we have a series simulation results from Figs. 
12 to 15 to evaluate. Figs. 12 and 13 show that the protocol ATIM + Shortest is stably 
superior to the 802.11 protocol. The average delay of our protocols in Fig. 12 (a) forms a 
concave shape. To interpret the special situation, we need to divide the average delay of 
all nodes into two individual delays, i.e. PS nodes and active nodes, for further narrow 
down the reflecting causes. The average delay of the PS and active nodes are shown in 
Figs. 14 and 15 respectively. From the two figures, we can make some comments as fol-
lows. First, the Shortest protocol makes the PS nodes have the lowest average delay be-
cause it schedules the transmissions to PS nodes prior to active nodes after the ATIM 
window. 
SHIH-LIN WU, PAO-CHU TSENG AND JHEN-YU YANG 
 
1186 
 
 
0
0.005
0.01
0.015
0.02
0.025
0.03
0.035
10_10 10_20 10_30 10_40
active node number_PS node number
de
lay
 ti
me
 (s
ec
)
802
ATIM+Shortest
ATIM
Shortest
(b)
0
0.05
0.1
0.15
0.2
0.25
0.3
10_10 10_20 10_30 10_40
active node number_PS node number
de
lay
 ti
me
 (s
ec
)
802
ATIM+Shortest
ATIM
Shortest
(a)
0
0.05
0.1
0.15
0.2
0.25
0.3
0.35
0.4
0.45
0.5
40_10 40_20 40_30 40_40
active node number_PS node number
de
lay
 ti
me
 (s
ec
)
802
ATIM+Shortest
ATIM
Shortest
(c)
0
0.05
0.1
0.15
0.2
0.25
40_10 40_20 40_30 40_40
active node number_PS node number
de
lay
 ti
me
 (s
ec
)
802
ATIM+Shortest
ATIM
Shortest
(d)  
Fig. 15. The average delay for a transmitted frame from an active node with various active nodes 
under the fixed number of PS nodes at 10 in (a) and at 40 in (b) as well as with various PS 
nodes under the fixed number of active nodes at 10 in (c) and at 40 in (d). 
5. CONCLUSION 
We developed a new energy-efficient MAC protocol for WLANs. The proposed 
protocol has two main contributions. First, to avoid unnecessary frame collisions and 
backoff waiting time during data frame transmissions, we designed a novel idea but sim-
ple scheduling mechanism for nodes to transmit their frames to power saving nodes in 
order. Second, to better conserve the power of PS nodes and improve to the channel 
utilization, we developed an intelligent strategy to dynamically change the ATIM win-
dow size. The simulation results prove that our energy-efficient MAC protocols have a 
better performance than IEEE 802.11 power management protocol not only in energy 
efficiency but also in aggregate throughput.  
REFERENCES 
1. IEEE Std 802.11-1999 − IEEE Computer Society LAN MAN Standards Committee, 
Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY) Specifi-
cations, 1999.     
2. S. Agrawal and S. Singh, “An experimental study of TCP’s energy consumption 
over wireless link,” in Proceedings of the 4th European Personal Mobile Communi-
SHIH-LIN WU, PAO-CHU TSENG AND JHEN-YU YANG 
 
1188 
 
based multi-hop ad hoc networks,” in Proceedings of IEEE INFOCOM, Vol. 1, 2002, 
pp. 23-27.     
19. H. Woesner, J. P. Ebert, M. Schlager, and A. Wolisz, “Power-saving mechanism in 
emerging standards for wireless LANs: the MAC level perspective,” IEEE Personal 
Communications, Vol. 5, 1998, pp. 40-48.       
20. S. L. Wu, P. C. Tseng, and Z. T. Chou, “Distributed power management protocols  
for multi-hop mobile ad hoc networks,” Computer Networks, Vol. 47, 2005, pp. 63-85.    
21. Y. Xu, J. Heidemann, and D. Estrin, “Geography-informed energy conservation for 
ad hoc routing,” in Proceedings of the International Conference on Mobile Comput-
ing and Networking, 2001, pp. 70-84.   
22. M. Zorzi and R. R. Ramesh, “Is TCP energy efficient?” in Proceedings of IEEE 
MoMuC, 1999, pp. 198-201.      
 
Shih-Lin Wu (吳世琳) received the B.S. degree in Computer 
Science from Tamkang University, Taiwan, in June 1987 and the 
Ph.D. degree in Computer Science and Information Engineering 
from National Central University, Taiwan, in May 2001. Since 
Aug. 2001, he has been with the department of Computer Science 
and Information Engineering, Chang Gung University. Dr. Wu 
served as a Program Chair in the Mobile Computing Workshop, 
2005, as a Guest Editor for Journal of Pervasive Computing and 
Communication special issue on “Key Technologies and Applica-
tions of Wireless Sensor and Ad Hoc Networks.” His current re-  
search interests include mobile computing, wireless networks, dis-
tributed robotics, and network security. 
 
Pao-Chu Tseng (曾寶珠) received the B.S. degree in Elec-
tronic Engineering, from Chung Yuan Christian University, Tai-
wan, R.O.C., in 1998, and the M.S. degree in Chang Gung Uni-
versity, Taiwan, R.O.C., in 2004. When she was in graduate 
school, her research focuses on power saving and reliable broad-
cast in wireless environment. 
 
 
 
 
 
Jhen-Yu Yang (楊鎮宇) received the B.S. degree in Com-
puter Science from the Tamkang University, Taiwan, R.O.C., in 
2004, and the M.S. degree in Computer Science from the Chang 
Gung University (CGU), Taiwan, R.O.C. in 2006. From 2004 to 
2006, he joined the High Speed Network Lab of CGU. His re-
search interests include mobile computing and performance analy-
sis. 

-  - 1 
Scheduling Multi-Hop Power Saving Mac Protocol 
吳世琳 
長庚大學資訊工程學系 
slwu@mail.cgu.edu.tw 
 
農令辰 
長庚大學資訊工程學系研究所
larrynung@hotmail.com 
摘要 
為了支援無線網路裝置的行動性，無線
網路裝置通常會使用電池來做為供電來源，但
是電池的電量十分有限，且只能維持無線網路
裝置一定時間的運作。因此產生了許多無線網
路省電的相關議題。 
為了讓無線網路裝置能有效的利用有限
的電力並兼顧網路傳輸的效能，我們提出了一
個可以運作於Multi-Hop環境下的省電媒體存
取控制協定，利用排班的方式讓省電效果能更
加的顯著，讓無線行動裝置不但能省電更能提
升網路傳送的效率，讓無線行動裝置的實用性
與方便性大幅提升。 
關鍵詞：省電，Multi-Hop，媒體存取控制，
排班 
一、介紹 
為 了 滿足 現 代 人對 無 線 網路 Any 
TIME、Any Where的需求，無線行動裝置通常
都使用電池來供電，但是電池的電量有限，只
能維持一定時間下的運作。而在無線行動裝置
運作過程中又以無線網路卡所損耗的電力最
為可觀。因此省電最有效率的方法就是改善無
線網路MAC層的通訊協定。一個好的省電的
通訊協定，不僅要能達到省電的目的，且還要
能避免資料被延遲傳送，並且要讓單位電量所
能傳輸的資料量增加。  
在 IEEE 802.11 Ad Hoc 省電模式中
[11]，時間會被切隔成一個個的 Beacon 
Interval，在每個Beacon Interval的前面會有段
ATIM Window讓無線網路裝置與省電無線網
路裝置做預約傳輸的動作。在這段時間所有無
線網路裝置都必須保持在醒來的狀態，當省電
無線網路裝置在ATIM Window跟其他無線網
路裝置交握成功，即會在ATIM Window結束
後繼續醒著去傳送資料，反之，若在ATIM 
Window並未有無線網路裝置與省電無線網路
裝置交握，省電無線網路裝置則會進入睡眠模
式以節省電力之消耗，雖然 IEEE 802.11 Ad 
Hoc省電模式能夠節省無線網路裝置電力的耗
費，然而卻尚有許多的問題仍然存在。像是省
電無線網路裝置在ATIM Window中若完成交
握則必須在整個Beacon Interval保持醒著的狀
態，就算省電無線網路裝置已經傳輸完他所需
要傳輸的資料，仍舊不能進入睡眠模式，因此
仍有不必要的電力消耗存在。 
另外在IEEE 802.11 Ad Hoc省電模式，無
線網路裝置之間必須是Single-Hop才可以正常
的運作，然而事實上無線網路環境是
Single-Hop的情況實在是非常少，多半我們所
使 用 的都 是 Multi-Hop的 網 路環 境。 在
Multi-Hop的環境下設計一套通訊協定是一項
艱鉅的任務[4,5,6,7,9,10]，因為在Multi-Hop環
境下無線網路裝置都只能聽到自己鄰居的訊
號，並無法像Single-Hop環境一樣有效的掌握
網路環境裡全部的狀況。 
除此之外也有部分學者提出利用排班的
方式去達到讓無線網路裝置省電的媒體存取
控制協定[3,8]，此種媒體存取控制協定利用排
班的方式把傳輸做排程，排程過後的無線網路
裝置會知道何時可以傳輸資料，因此無線網路
裝置不需要在ATIM Window結束後發送RTS
與CTS封包來競爭媒體，所以可以減少控制封
包的發送量與不必要的控制封包碰撞。 
我們的方法主要是採取排班的方式，並
把上述所提到IEEE 802.11 Ad Hoc省電模式下
的問題加以改善，提出一個在Multi-Hop環境
之下運作良好的排班省電通訊協定。在我們的
通訊協定中，我們提出了利用排班的技術讓無
線網路裝置的狀態轉換次數儘可能少的概
念。因為無線網路裝置在狀態轉換時並無法做
資料傳輸的動作，而在狀態轉換中卻又需要浪
費額外的電力，因此我們把狀態轉換次數給考
慮進去，提出一個省電的排班媒體存取控制協
定，並使其能運行於複雜的Multi-Hop環境。 
二、Related Work 
參考文獻 [1]提出了一個在Multi-Hop環
境下運作的省電排班媒體存取控制通訊協
定，作者在文獻中提出了一個在Multi-Hop環
境下排班的概念，就是讓無線網路裝置在
ATIM與ATIM-ACK交握時，同時去預約ATIM 
Window結束後資料傳輸的時間位置，這是一
-  - 3 
在 ATIM Window中，我們覺得多餘的控
制封包不僅僅會浪費頻寬，也會因為不必要的
競爭與碰撞造成電力的消耗。雖然在排程為基
礎架構下的媒體存取控制協定已經減少了許
多的控制封包，然而那些控制封包多半 Paper 
是節省在 ATIM Window 結束後的資料傳輸
時段。反觀，在 ATIM Window時段卻很少考
慮到要節省控制封包以節約能源的消耗，其實
在 ATIM Window裡面所有傳輸的競爭都跟省
電裝置有關，因為在 IEEE 802.11規定在 ATIM 
Window 中，凡是有資料要傳送給省電裝置的
傳輸要求，都會在 ATIM Window做競爭的動
作。例如，省電裝置想要傳輸給省電裝置或是
非省電裝置想要傳輸給省電裝置都會在 ATIM 
Window 做競爭。因此，我們覺得 ATIM 
Window 裡面的控制封包若能有效的減少，勢
必也會對省電無線網路裝置電力的節約有所
助益。 
由於有這樣的一個考量，我們覺得當網
路環境之中有兩筆傳輸要做競爭，A裝置想要
傳輸給資料給 B裝置，且 B裝置也有資料想
要傳輸給 A裝置，在此種情況之下，當 A 裝
置發送 ATIM 封包給 B 裝置，B 裝置收到
ATIM 封包後理應會回個 ACK 封包給 A 裝
置，接著 B 裝置會再發個 ATIM 給 A 裝置去
競爭無線網路媒體，這樣的做法不僅僅需要多
傳送控制封包，且 ACK封包與 ATIM 封包之
間也會有一小段時間的媒體浪費。因此，如圖
二所示，我們覺得在 A裝置的 ATIM封包傳輸
給 B裝置後，B裝置應該把 ACK與要傳輸給
A 裝置的 ATIM 封包給合併傳送給 A 裝置，
在 A 裝置收到此合併封包後，裝置 A會發送
RACK與 ACK 的合併封包，一方面告知 A裝
置四周的鄰居所預定的傳輸，另一方面用來回
應 B 裝置的 ATIM，當然 B 裝置也會再發送
個 RACK 封包告知四周鄰居所預定的傳輸，
如此合併作法能節省控制封包一些相同的
Header，省去省電裝置傳送控制封包的次數，
因此也能節省不必要的電力耗費。 
此外，在 ATIM Window 中還有一個很
重要的考量，就是根據 IEEE 802.11 Ad Hoc省
電模式規定，凡是要傳送給省電裝置的傳輸都
會在 ATIM Window裡面做競爭傳輸的動作，
也就是說省電裝置想要傳輸給省電裝置、非省
電裝置傳輸給省電裝置都會在 ATIM Window
裡面做競爭的動作。若在 ATIM Window裡面
有預約到傳輸則省電裝置會醒來整個 Beacon 
Interval 並且與非省電裝置去競爭無線網路媒
體，此種做法很明顯的無法降低省電裝置競爭
無線網路媒體時的碰撞率，且會使得電力大量
消耗，很多省電媒體存取控制協定都已經利用
排程的方式解決掉上述的問題，然而卻忽略掉
了其實對於排程的省電媒體存取控制協定而
言，當省電裝置傳輸給非省電裝置時，省電裝
置仍然無法進入 ATIM Window做預約傳輸的
動作，因此仍舊會照成省電裝置電力的大量損
耗。所以根據這點，我們認為其實省電裝置想
要傳輸給非省電裝置 也該在 ATIM Window
作競爭並給予排程。 
 
 
圖二 ATIM Window傳輸封包合併示意圖 
 
三•三、排班機制 
我們發現在Single-Hop 環境下的排程與在
Multi-Hop環境下的排程其實有著不一樣的概
念存在，因為在Single-Hop環境之下，網路裝
置是完全連結(full connected)的，因此每個網
路裝置都聽的到彼此的訊號，在這個前提之
下，網路裝置在ATIM Window裡所維持的傳輸
配對表都是一樣的。因此我們只需要在ATIM 
Window結束時再依照全部的網路傳輸要求去
作排程的動作即可，但是反觀在Multi-Hop環
境，無線網路裝置可能無法完全聽到彼此的訊
號，因此若沿用之前在Single-Hop 的排程概
念，勢必會造成無線網路裝置之間排程不一致
的情況，如此作法只會造成網路傳輸動作無法
運作且碰撞激烈。好在這樣的問題[1]已經提出
了一個概念出來。在Multi-Hop 的環境之下排
程並不能像Single-Hop環境下一樣在ATIM 
Window結束時再依照全部的網路傳輸要求去
作排程的動作，而是應該在ATIM Window裡面
ATIM與ATIM-ACK交握的同時即預約ATIM 
Window 結束後的傳輸時間，如此即可解決排
程在Multi-Hop 環境之下排程不一致的問題。 
如圖三所示，我們的作法主要是會在
ATIM Window預約傳輸的同時把尚未預約傳
輸且夠預約傳輸的時間資訊與傳輸量大小告
知接收端，接收端會拿此尚未預約傳輸的時間
跟自己尚未預約傳輸的時間去做比較，並運算
能源消耗量去決定傳輸起始時間，決定傳輸起
始時間後接收端會發送個ATIM-ACK 告知傳
送端其所決定的傳輸起始時間，傳送端收到
ATIM-ACK 後會再傳送個RACK 封包告知傳
送端附近鄰居其所預約的傳輸起始時間與傳
輸量大小，如此可讓傳送端附近的鄰居知道傳
-  - 5 
輸給D的傳輸配對競爭成功，則我們可以如圖
五(b)所示把C傳輸給D的傳輸配對緊接著放置
在A傳輸給B的傳輸配對後面，也可以如圖五
(c)所示緊接著下一次的Beacon Interval起始點
放置。若我們如圖十一(b)所示放置於前面，且
我們假設網路前面A 傳輸給B的那段時間C點
進入休眠模式會比較省電，因此我們可以得知
在此情況之下C 點與D 點醒來與睡覺的模式
轉換如圖六(a)所示，C 點與D 點在此狀態之
下各必須作4 次的模式轉換，因此C點與D點
總共必須做八次的模式轉換，而若是讓C 傳輸
給D 的傳輸配對如圖五(b)所示緊接著下一次
的Beacon Interval起始點放置，則C點與D 點
如圖六(b)所示各只需要作2次的狀態轉換，因
此C點與D點總共只需作4 次的狀態轉換，相
較之下C傳輸給D的傳輸配對放置於下一次的
Beacon Interval起始點，所省的電力相較會比
較划算。 
根據前面的描述，我們可以很清楚的知
道只要狀態轉換次數越少，無線網路裝置就能
省去不必要的電力浪費，這樣的方法只需要知
道轉換的次數即可知道最佳的傳輸排程位
置。為了達到這個目的我們必須設計兩個演算
法，一個演算法是用來判斷是否需要轉換模
式，而另一個演算法則是要用來判斷排程的位
置。 
在判斷轉換模式方面，我們可以利用下
面演算法判斷是否無線網路裝置進入睡眠模 
式會比較省電。 
 
IF((Widle_sleep*Tidle_sleep+Wsleep(t-Tidle_sl
eep-Tsleep_idle)+Wsleep_idle*Tsleep_idle)<(W
idle*t)) 
{ 
Goto Sleep Mode 
} 
 
其中t 為間隔的時間，Widle_sleep 為從
idle 狀態轉換到sleep 狀態所消耗的電力功
率，Wsleep_idle為從sleep 狀態轉換到idle狀態
所消耗的電力功率，Tsleep_idle為從sleep狀態
轉換到 idle 狀態所消耗的轉換時間，
Tidle_sleep為從idle 狀態轉換到sleep 狀態所
消耗的轉換時間，Wsleep為sleep 狀態下所消
耗的電力功率，Widle為idle狀態下所消耗的電
力功率，把實際的參數帶入這個演算法，我們
可以算出當閒置時間大於多少μs時，讓省電
裝置進入睡眠模式會比較划算，再把求出來的
這個數值與現有的傳輸排程表下去做比對，我
們即可推測出無線網路裝置的模式轉換地次
數。 
而在判斷排程位置方面，演算法可以分
為三個步驟: 
1. 找出共同可以預約的時段 
在此步驟中，傳送端發送 ATIM 封包的
同時就必須把自己可以預約時段告知給接收
端，接收端收到 ATIM封包後，會去把傳送端
可以預約的時段跟自己可以預約的時段給作
交集，求出傳送端與接收端都可以預約的共同
時段。 
 
2. 計算狀態轉換次數 
利用 Counter 去計算無線網路裝置的狀
態轉換次數，並依照此狀態轉換次數的多寡來
決定無線網路裝置的傳輸預約位置。 
在此步驟中，接收端會把這次要預約的
傳輸放置於每段可以預約的共同時段起點與
終點，分別以傳送端與接收端的觀點去計算狀
態轉換次數，把每個預約位置的接收端與傳送
端的狀態轉換次數分別加總，求出每個預約位
置的總狀態轉換次數 。 
 
3. 決定傳輸預約時段 
求出每個預約位置的總狀態轉換次數
後，從中挑選出狀態轉換次數最少的位置做為
這次傳輸的預約位置。 
 
舉個例子來說，假設目前網路在ATIM 
Window已預約成功的狀況如下圖七所示。 
 
 
圖七 網路傳輸預約圖 
 
假設目前在 ATIM Window中，C裝置搶
到媒體正要發送 ATIM封包給 D裝置，預計檔
案傳輸大小大約需耗時 800μs，則根據演算法
第一步驟，此時 C裝置發送 ATIM封包時除了
傳輸量大小外還會附加上 C 裝置的可預約時
間表，告之接收端 D 其所可以預約的時間，
如下表一所示。 
 
起始時間 結束時間 
1601 100000 
表一 裝置 C的可預約時間表 
 
 當接收端 D收到 ATIM封包後，D裝置
會把自己的可預約時間表與 C 裝置的可預約
時間表作交集，其中 D 裝置的可預約時間表
如下表二所示。 
 
起始時間 結束時間 
-  - 7 
不必要的耗電，且維持一定水準的產能• 
 
五、未來工作 
我們知道在IEEE 802.11 Ad Hoc省電模
式中，ATIM Window裡的傳輸競爭是採用DCF
的方式，因此會有有些無線網路裝置其實只要
傳輸很短的資料卻必須要等待其它網路裝置
傳送很大量的資料，產生所謂的護衛效應。為
了解決這樣的問題，我們必須要讓擁有較短傳
輸量的資料傳輸盡可能的排程在前面，然而，
在Multi-Hop的環境之下無線網路裝置並無法
有效的察覺所有無線網路裝置的傳輸，無線網
路裝置只能掌握自己及自己周遭鄰居的傳輸
情況。在這種環境之下，無線網路裝置無法做
到有效的最小傳輸量優先的排班。因此我們提
出了一個方法，讓我們的排程能儘可能的接近
最小傳輸量優先。 
我們主要的想法是先把資料傳輸量與
Contention Window 大小分為幾個不同的等
級，把不同大小的資料傳輸量等級對應到不同
大小的Contention Window等級，讓資料傳輸量
較小的資料能獲得較小的Backoff Time，如此
即可讓資料量小的檔案越有可能先搶到媒體
傳輸，傳輸完成後立即進入休眠模式。  
我們可以利用下述演算法來挑選在
ATIM Window裡面所需要的Backoff Time大小 
 
backoff=rand( CWmin*(int)(Ld/(Ld_max/n))/n,
CWmin*(int)( Ld/(Ld_max/n)+1)/n)-----------(1) 
 
其中，(int)為強制型別轉換，可以把數值
轉換成整數，rand為亂數函數，而CWmin為
Contention Window Minimum，n為欲分割的
Contention Window等級數，Ld為此次資料傳輸
量的大小，Ld_max為最大的資料傳輸量。 
 舉個例子來說，架設網路環境中最大的
資料傳輸量不超過 512Bytes，CWmin為 32，
且 Contention Window分為 4個等級，則今天
我們想要預約傳輸一筆 100Bytes 的資料，套
用公式我們可以求得 backoff=rand(0,32/4) 
值得注意的是，在IEEE 802.11 Ad Hoc省
電模式中ATIM Window裡的預約傳輸要是失
敗，則Content Window會增大一倍，若在失敗
則不會在變大，而在我們的演算法中，為了達
到短傳輸優先的理念，若是預約傳輸失敗，我
們的方法並不會放大Content Window，而是直
接重新再挑選個Backoff• 
當然這樣的解決辦法只是我們的初步構
想，因為若是使用這樣的解法雖然可以讓某些
傳輸量小的資料預約到較為前面的時段，然而
卻仍然會有大資料預約到前面時段的現象。因
此未來我們會以此概念為基礎，希望能夠設計
出一個能完全解決的方法。 
 
六、誌謝 
本研究承國科會輔助，計畫編號 : 
NSC94-2213-B-182-005 
七、參考文獻 
[1]  IEEE Std 802.11-1999, Wireless LAN 
Medium Access Control (MAC) and 
Physical Layer (PHY) Specifications.LAN 
MAN Standards Committee of the IEEE 
Computer Society, IEEE, November 1999. 
[2]  Eun-Sun Jung and Nitin H. Vaidya, 
“Improving IEEE 802.11 Power Saving 
Support for Energy Management in Wireless 
Mobile Ad-Hoc Networks", Workshop on 
Operating Systems Platforms for Embedded 
Real-Time applications (OSPERT),Palma de 
Mallorca, Spain, July,2005. 
[3]  E.-S. Jung and N. Vaidya, “A power saving 
mac protocol for wireless networks,” 
Technical Report, UIUC, July 2002. 
[4]  M. J. Miller and N. H. Vaidya,“Improving 
Power Save Protocols Using Carrier Sensing 
and Dynamic Advertisement Window,” 
Technical Report, University of Illinois at 
Urbana-Champaign, Dec. 2004. 
[5]  Li Ning,Xu Yan,Xie Sheng-li,”A 
power-saving protocol for ad hoc networks “, 
Volume 2,  Sept. 23-26, 2005 Page(s):808 - 
811 Digital Object Identifier 
10.1109/WCNM.2005.1544175 
[6]  Changsu Suh，Young-Bae Ko and Jai-Hoon 
Kim,"Enhanced Power Saving for 
IEEE802.11 WLAN with Dynamic Slot 
Allocation", Lecture Notes in Computer 
Science,Accepted to the International 
Conference on Mobile Ad-hoc and Sensor 
Networks(MSN'05), Dec. 2005. 
[7]  Takeuchi, S.,Yamazaki, K., Sezaki, K., 
Yasuda, Y., “An improved power saving 
mechanism for MAC protocol in ad hoc 
networks,”  in Global Telecommunications 
Conference, 2004, GLOBECOM '04. IEEE 
Volume 5 on,  29 Nov.-3 Dec. 2004 
Page(s):2791 - 2796 Vol.5 
[8]  Y.C. Tseng, C.S. Hsu and T.Y. Hsieh, 
Power-saving protocols for IEEE 
802.11-based multi-hop ad hoc networks, in: 
Proc. of IEEE INFOCOM (2002). 
[9]  Shih-Lin Wu ,Pao-Chu Tseng . "An Energy 
Efficient MAC Protocol for IEEE 802.11 
WLANs," cnsr, pp.137-145, Second Annual 
Conference on Communication Networks 
and Services Research (CNSR'04), 2004. 
  
附
  錄
  七
 
  
fashion. In this case, a multi-hop scenario occurs,
where the packets sent by the source host must
be relayed by several intermediate hosts before
reaching the destination host. The applications of
the MANET are getting more and more impor-
tant, especially in the emergency, military, enter-
tainment, and outdoor business environments, in
which instant ﬁxed infrastructure or centralized
administration is diﬃcult or too expensive to in-
stall. However, the ﬁnite and non-renewable bat-
tery power of mobile stations represents one of
the greatest limitations to the utility of MANETs.
It is well known that, due to technology limita-
tions, the battery capacity will not be dramatically
promoted in the not-so-distant future. Therefore,
it is essential to investigate power saving strategies
to prolong the lifetime of both individual nodes
and the network. One way to reduce energy con-
sumption is simply to use low-power hardware
components. Another way is to adopt software-
controllable power management protocols that al-
low transceivers to be used in energy-conserving
ways. One of the most common techniques to at-
tain this goal is the discontinuous reception [18];
namely, battery power could be greatly saved by
periodically turning the radio oﬀ when not in use
since the network interface may often be idle [6].
However, in such environments, it may take longer
time to activate the link between power saving (PS)
neighbors. Deﬁnitely, a good power management
protocol ought to minimize the power consump-
tion without signiﬁcantly deteriorating the connec-
tivity or capacity of the network.
1.1. Power management protocols with time
synchronous
In the literature, several power management
protocols for wireless networks have been pro-
posed [3,8,12,16,18–20,22]. The authors in [16] pre-
sented TDMA-based birthday protocols for saving
energy during the neighbor discovery phase in sta-
tic wireless sensor networks. The IEEE 802.11
MAC (medium access control) protocol [12] spec-
iﬁes diﬀerent power saving mechanisms for use
within the infrastructure wireless LAN and the
independent basic service set (IBSS) respectively.
In an IBSS (also known as a single-hop MANET),
all stations are within each others transmission
range and time is divided into ﬁxed-sized beacon
intervals. Clock synchronization by periodic
broadcast of a beacon frame is required to ensure
that all PS stations wake up prior to each target
beacon transmission time (TBTT). If a sender in-
tends to transmit buﬀered frames to a destination
station that is in a PS mode, the sender should ﬁrst
announce a directed ad hoc traﬃc indication mes-
sage (ATIM) frame during the ATIM window, in
which all PS stations are awake. Upon receipt of
a directed ATIM frame, the PS station shall
acknowledge the ATIM frame and remain in the
awake state for the entire beacon interval. The
PS station that neither transmitted nor received a
directed ATIM frame may return to the doze state
at the end of the ATIM window. In the doze state,
the transceivers are powered down and stations are
unable to transmit or receive. Immediately follow-
ing the ATIM window, the pending buﬀered
frames should be sent using the conventional
DCF (distributed coordination function) access
procedure. Fig. 1 illustrates an example of power
management in an IEEE 802.11 ad hoc network.
The more complete and detailed explanation can
be found in [12]. The authors in [24] discussed dif-
ferent aspects of power saving addressed in IEEE
802.11 and HYPERLAN standards. They further
showed that any ﬁxed size of the ATIM window
can not perform very well in all situations. Hence
the authors in [8] proposed several energy-conserv-
ing optimization techniques, called DPSM, for
IEEE 802.11. In DPSM, each station in an IBSS
can dynamically tune its ATIM window size
according to observed network conditions. Unfor-
tunately, all the above-mentioned protocols
[8,12,16,24] are only suitable for synchronous
environments.
1.2. Challenges
When designing power management protocols
for a large-scale MANET, we will unavoidably
encounter three major challenges:
• Beacon contention: In IEEE 802.11 [12], every
station has to periodically compete with others
to broadcast its beacon at around TBTT. Due
64 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
on an accurate neighbor table. To make matters
worse, since PS stations do not stand much
chance of being detected, if some of them con-
stitute a vertex cutset, whose removal will dis-
connect the network, then the virtual network
partition problem [22] may arise.
Power management protocols (Table 1) intro-
duced in [3,18–20,22] are asynchronous. The
authors in [18] proposed the PSPA protocol for
reducing the power consumption of portable sta-
tions operating in a mobile network with a base
station support. The base station will keep on
sending page messages whenever there are buﬀered
packets. Each mobile station may control its duty
cycle relative to its current needs. The authors in
[3] assume that a sleeping station can be remotely
activated by a wake-up signal using a remote acti-
vated switch (RAS) receiver. With the aid of RAS,
stations can select diﬀerent sleep patterns to enter
various sleep states depending on their battery sta-
tus and quality of service. The authors in [19,20]
presented the STEM protocol that trades power
savings for path setup latency in wireless sensor
networks, in which all stations are equipped with
dual transceivers. Unfortunately, these asynchro-
nous protocols [3,18–20] require special hardware
support. In addition, they did not take neighbor
maintenance into consideration.
1.3. Our contributions
Currently, IEEE 802.11 compliant interface
cards are greatly popular. However, three above-
mentioned challenges pose a strong demand of
redesigning IEEE 802.11 power saving mechanism
for asynchronous MANETs, in which the clock
diﬀerence between any pair of stations ranges from
zero to any large bounded number. Accordingly,
we will make minor modiﬁcations to IEEE 802.11
so that our new protocols have the following char-
acteristics. (i) The delivery of a beacon frame is rel-
atively reliable and insensitive to the nodal density,
thus alleviating the beacon contention problem
substantially. (ii) Our protocols achieve energy
conservation and ﬂexible neighbor maintenance
in an integrated manner. Precisely, given a prede-
ﬁned number 0 6 e1, our solutions carefully ar-
range the awake/sleep patterns such that any two
PS neighbors, regardless of their clock diﬀerence,
are able to discover each other in ﬁnite timeT with
high probability 1  e. (iii) The mechanisms for
delivering data frames to PS stations can perform
high energy eﬃciency as well as good network
throughput and have no need to rely on clock syn-
chronization or any special hardware support.
More speciﬁcally, in our protocols, each PS station
piggybacks its timestamp and awake/sleep pattern
with the beacon frame. Once station X received a
beacon from PS station Y, X is capable of predict-
ing the timing of the Ys ATIM windows via their
clock diﬀerence and Ys awake/sleep pattern. By
this way, buﬀered frames destined for PS station
Y will be eventually delivered.
Recently, based on IEEE 802.11, three asyn-
chronous power saving protocols for a multi-hop
MANET have been proposed in [22], whose work
is the most relevant to ours. Compared with their
protocols, two major distinctive contributions are
described as follows. (i) While the beacon conten-
tion problem is completely ignored in [22]; in this
paper, we borrow the idea from the design of
Table 1
Comparison of power management protocols for ad hoc networks
Protocol Timing synchronization Special hardware support Beacon transmission
IEEE 802.11 [12] Yes No Not scalable
Birthday [16] Yes No Scalable
DPSM [8] Yes No Not scalable
PSPA [18] No Base station Not handled
Chiasserini et al. [3] No Remote activated switch Not handled
STEM [19,20] No Dual transceivers Not handled
Tseng et al. [22] No No Not scalable
Ours No No Scalable
66 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
type beacon interval is decided by our randomized
asynchronous power management schemes.
The rest of this section is organized as follows.
In Section 2.1, we ﬁrst review some of beacon
transmission procedures and then give our scalable
beacon transmission procedure. In Section 2.2, we
present and analyze our three randomized asyn-
chronous power management schemes. Finally,
the data frame transfer procedure is given in Sec-
tion 2.3.
2.1. Beacon transmission
2.1.1. Review of some beacon transfer procedures
Beacon frames are mainly used for clock syn-
chronization in an IEEE 802.11 ad hoc network
[12]. Therefore, all PS stations should wake up at
the beginning of a beacon interval, i.e., TBTT.
When perceiving the medium idle after TBTT,
each node contends to send a beacon with each
other. To avoid collisions among beacons, each
station calculates a random delay uniformly dis-
tributed in the range between 0 and CW (conten-
tion window) before sending out its beacon. If a
beacon arrives before the random delay timer has
expired, the pending beacon transmission should
be cancelled. Because of the cancellation of the
beacon transmission, the chance for the PS station
to announce its existence is signiﬁcantly reduced.
On the other hand, beacon frames play an impor-
tant role for neighbor maintenance in MANETs.
Periodically, a station should advertise its presence
to its neighbors by broadcasting a beacon frame.
Also, a station should maintain its up-to-date
neighbor table according to its newly received bea-
cons. Hence the authors in [22] modiﬁed the IEEE
802.11 standard so each station shall persist in
explicitly sending its beacon during the ATIM
window even others beacons have been heard.
Following this principle, we design and show the
new structure of a beacon interval in Fig. 3 to al-
low multiple beacon frames transmissions and ex-
plain how it work in the next section.
2.1.2. Scalable beacon transfer procedure
To announce its presence for neighbor mainte-
nance, every station should turn its radio on and
broadcast its beacon during the beacon window
in each fully-awake beacon interval. In IEEE
802.11 [12], after each TBTT, all stations contend-
ing for the beacon transmission immediately dive
into the random backoﬀ stage when the medium
becomes idle. However, in our implementations,
as shown in Fig. 4(a), every station should ﬁrst
wait for the duration of TIFS = PIFS (Priority
InterFrame Space) before performing the backoﬀ
procedure. The design considerations for setting
TIFS are described as follows. (i) Claim TIFS <
DIFS. Various interframe spaces including SIFS
(Short Interframe Space), PIFS, and DIFS (DCF
Interframe Space) are deﬁned in IEEE 802.11 to
provide diﬀerent priority levels for diﬀerent types
of frames. Besides, SIFS < PIFS < DIFS. We ar-
gue that beacon management frames should take
priority over normal data frames. (ii) Claim
TIFS > SIFS. Due to a busy medium, the strict
start of the beacon window may begin later than
the nominal start of the beacon window. Such a
phenomenon is called stretching and we show the
stretching event in Fig. 4(b). After TBTT, if a PS
station unaware of the NAV (network allocation
vector) set during the previous beacon interval se-
lects the zero backoﬀ time and transmits a beacon
frame immediately after the medium becomes idle,
then that beacon frame may destroy an on-going
stretching directed data frame transmission, which
(a)
(b)stretching
backoff slots time
data
ACK
SIFS PIFS
beacon  window
data
frame
beacon
frame
nominal start
TBTT
strict start
time
beacon
frame
PIFS contentionwindow
SlotTime
beacon  window
beacon
frame ...
...
Fig. 4. (a) Beacon transfer procedure. (b) An example of
beacon transmission and the stretching event.
68 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
operating in a PS mode to save a great deal of en-
ergy by periodically entering the doze state, while
also allowing PS stations a high probability of dis-
covering their neighbors in an asynchronous
MANET. Although, in the beginning of this sec-
tion, we have introduced two general types of bea-
con interval, each of these schemes has a slight
diﬀerent awake/sleep pattern for PS stations. In
other words, the structure of a beacon interval
may vary for diﬀerent schemes. Note that all sta-
tions are assumed to have the same clock rate,
although this is not true in the real world. Fortu-
nately, the solution of the problem has been pro-
posed in [10] by adjusting stations clock to the
fastest one in all stations at each beacon interval.
Besides, in all our settings, the lengths of the bea-
con window and ATIM window remain constant
in every beacon interval. The notations used to
facilitate the forthcoming presentation are listed
below:
• BI: the length of a beacon interval,
• BW: the length of a beacon window,
• AW: the length of an ATIM window,
• DW: the length of a data window,
• actW: the length of an active window.
2.2.1. Randomized coterie-based scheme
We design two types of beacon intervals for this
scheme; one is the fully-awake beacon interval, and
the other is the fully-sleep beacon interval, which
are same as our previous deﬁned in the beginning
of this section. The active window actW is deﬁned
as actW = BW + DW = BI in fully-awake beacon
interval or actW = AW in fully-awake beacon
interval.
Take Fig. 6 for example, for the PS station X,
0th, 1st, 2nd, and 9th beacon intervals are fully-
awake while the remaining beacon intervals are
fully-sleep. We can ﬁnd that, for a PS station,
the fully-awake beacon intervals take on the bur-
den of announcing its presence and detecting the
existence of neighbors. As a result, the chance
for two PS neighbors to discover each other relies
on the overlaps of their fully-awake beacon inter-
vals. With the intersection property, a coterie sys-
tem [7] is expected to be a powerful tool in
developing power management schemes. The deﬁ-
nition of a coterie [7] is formally given below.
Deﬁnition 1. Let U be the universe set of ﬁnite
objects. A collection of subsets (quorums) L ¼
fL1; . . . ; Lmg, where Li  U, is called a coterie if
and only if (i) For any two quorums Li and Lj in
0
0.15
0.3
0.45
0.6
0.75
0.9
0 20 40 60 80 100 120 140
Fig. 5. Success probability of a beacon transmission versus
number of contending stations.
B DA SB D B DB D A S A SA SA S AA SA S
0 1 2 3 4 5 6 7 8 9 10 11
12 0 1 2 3 4 5 6 7 8 9
station
 Y
station
X
time
time
Legend: beacon windowB ATIM windowA data windowD sleeping stateS
B D A SB D B DA S A S A SA S A SA SA SB D
clock difference∆Τ
Fig. 6. A snapshot of the worst case scenario for coterie-based scheme.
70 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
cases can be derived via the similar way. We deﬁne
i h  i h modR. Thus X can receive Ys
beacons within a pattern repetition interval if
and only if both hiiX and hi  hiY are fully-awake
beacon intervals, for some 0 6 i 6 R 1, where
hiiX denotes the ith beacon interval in Xs pattern
repetition interval. Let us denote by X Y the
event that X hears the beacons issued from Y
within a pattern repetition interval. And we have
Pr½X Y ¼ 1
R
k
 
R k
k
 
R
k
 
R
k
  : ð6Þ
On the other hand, Xs beacons can be received
by station Y during a pattern repetition interval if
and only if both hjiX and hj  (h + 1)iY are fully-
awake beacon intervals for some 0 6 j 6 R 1.
Let us denote by X! Y (X9 Y) the event that
Y can (cannot) receive Xs beacons during a pat-
tern repetition interval. By exploiting conditional
probabilities, P ½R; k can be expressed as
P ½R; k ¼ Pr½ðX! YÞ \ ðX YÞ
¼ Pr½X! Y j X Y 	 Pr½X Y
¼ ð1 Pr½X9Y j X YÞ 	 Pr½X Y:
ð7Þ
In what follows, we derive the probability
Pr[X9YjX Y]. The event X Y can occur in
any of
R
k
 
R
k
 
 R
k
 
R k
k
 
possible ways. Given that the event X Y has oc-
curred, we want to determine the number of possi-
ble outcomes in which the event X9Y also
happens. First, there are R
1
 
ways for station X
to arbitrarily select a fully-awake beacon interval,
say hiiX. In order to guarantee that X can hear Ys
beacons, Y must choose hi  hiY as its fully-awake
beacon interval. At this moment, X cannot select
hi + 1iX as the fully-awake beacon interval, other-
wise the event X!Y will take place. Then station
X has R 2
k  1
 
ways to choose its remaining k  1
fully-awake beacon intervals from a pattern repeti-
tion interval, excluding hiiX and hi + 1iX. We label
these k  1 beacon intervals h‘1iX, h‘2iX, . . ., h‘k1iX
respectively, as illustrated in Fig. 7. To avoid the
event X!Y, station Y is forbidden to choose
h‘1 (h + 1)iY,h‘2  (h + 1)iY, . . .,h‘k1  (h + 1)iY.
As a result, Y has only R k  1
k  1
 
ways to select its
remaining k  1 fully-awake beacon intervals.
However, we may not obviate the possibility of
counting the redundant outcomes. Thus, we have
Pr½X9Y jX Y6
R
1
 
R2
k1
 
R k1
k1
 
R
k
 
R
k
 
 R
k
 
R k
k
  :
ð8Þ
By substituting (6) and (8) in (7), we can derive
the inequality (5). h
Corollary 1. In the randomized coterie-based
scheme, if every PS station randomly selects b
ﬃﬃﬃﬃ
R
p
fully-awake beacon intervals from a pattern repeti-
tion interval R, where 1 6 b 6
ﬃﬃﬃﬃ
R
p
=2, then we have
P ½R; b
ﬃﬃﬃﬃ
R
p
P 1 ð1þ b2Þeb2 : ð9Þ
For example, P ½R; ﬃﬃﬃﬃﬃﬃﬃ3Rp P 0:801, P ½R; 2 ﬃﬃﬃﬃRp P
0:908, and P ½R; 3 ﬃﬃﬃﬃRp P 0:999.
Proof. See Appendix A. h
Fig. 7. The event that, during a pattern repetition interval, X can receive Ys beacons, while Y cannot receive Xs beacons.
72 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
[11], we can conclude that if n P 2 is a power of a
prime, then there exists a CFPP of order n. By
Theorem 3 and Deﬁnition 3, we can obtain the fol-
lowing important corollary.
Corollary 2. Let ðU ;LÞ be a CFPP of order n and
R ¼ n2 þ nþ 1. Then for any two lines Li; Lj 2L,
(i) j Li j6 d
ﬃﬃﬃﬃ
R
p e and (ii) (h1  Li) \ (h2  Lj)5 ;,
for any two integers h1 and h2.
The naive CFPP-based randomized power man-
agement scheme operates formally as follows.
When a station switches to the PS mode, it selects
a line Li randomly from L as the set of fully-
awake beacon intervals within a pattern repetition
interval R, where the parameter ðU ;LÞ is globally
maintained. The remaining beacon intervals are all
fully-sleep beacon intervals. The following theo-
rem is used to guarantee that any two stations
can meet each other in every pattern repetition
interval.
Theorem 4. The naive CFPP-based scheme guar-
antees that, assume no collisions in beacon recep-
tion, any two PS neighbors, regardless of their clock
difference, are able to discover each other in every
pattern repetition interval.
Proof. We prove this theorem by showing that,
given any two PS neighbors X and Y, at least
one Xs entire beacon window is fully covered by
Ys active windows during a pattern repetition
interval, and vice versa. We assume that X and
Y randomly select the lines Lx and Ly respectively
from the same CFPP ðU ;LÞ as the set of their
fully-awake beacon intervals within a pattern rep-
etition interval, and R ¼ n2 þ nþ 1. Without loss
of generality, we can assume that Xs clock is faster
than Ys clock by DT = h · BI + Dt, where
0 6 Dt < BI and h P 0 is an integer. In the follow-
ing derivation, we use Xs clock as a reference
clock to derive Ys clock. Note that other cases
can be derived by the similar way.
As illustrated in Fig. 8, X can receive Ys
beacons within a pattern repetition interval if and
only if both hiiX and hi  hiY are fully-awake
beacon intervals, for some 0 6 i 6 R 1. Since
Lx \ {h  Ly}5 ; (by Corollary 2), there must
exist an element i such that i 2 Lx and
i 2 {h  Ly}. This implies that both hi iX and
hi  hiY are fully-awake beacon intervals. On the
other hand, Xs beacons can be received by Y if
and only if both hjiX and hj  (h + 1)iY are fully-
awake beacon intervals, for some 0 6 j 6 R 1.
Since Lx \ {(h + 1)  Ly}5 ; (by Corollary 2),
there must exist an element j such that j 2 Lx and
j 2 {(h + 1)  Ly}. This implies that both hjiX
and hj  (h + 1)iY are fully-awake beacon
intervals. h
In what follows, we employ the interleaving
technique such that the power consumption of
the CFPP-based scheme can be further reduced.
We design three types of beacon intervals: the for-
ward half-awake beacon interval, the backward
half-awake beacon interval, and the fully-sleep
beacon interval. The structures of the half-awake
beacon intervals are deﬁned as follows:
• Each forward half-awake beacon interval starts
with a beacon window followed by an ATIM
window. After the ATIM window ﬁnishes, a
PS station may enter the doze state. Impor-
tantly, we set actW = BW + AW + DW P
BW + BI/2.
• Each backward half-awake beacon interval
starts with an ATIM window, but the active
window is terminated by a beacon window.
After the active window ends, a PS station
may enter the doze state. Importantly, we set
actW = AW + DW + BW P BW + BI/2.
The interleaving CFPP-based randomized
power management scheme operates formally as
follows. When a station switches to the PS mode,
it selects a line Li randomly from L as the set of
half-awake beacon intervals within a pattern repe-
Fig. 8. The event that stations X and Y are able to discover
each other within a pattern repetition interval.
74 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
The neighbor sensitivity of IEEE 802.11 is inﬁ-
nitely large since any two PS neighbors never dis-
cover each other when their clock diﬀerence DT
satisﬁes the inequality that h · BI + AW < DT <
(h + 1) · BI  AW, where h P 0 is an integer.
Through the formulas we derived in Table 2,
the settings (R; k) of our schemes can be ﬂexibly
tuned at design time, positioning the network at
the predictably desired operating point in the en-
ergy–delay-accuracy design space. Moreover, Ta-
ble 2 reveals that decreased radio active ratio
generally comes with a penalty of increased neigh-
bor sensitivity. The authors in [13] argue that a
good power management protocol ought to mini-
mize energy · delay metric. We further argue that,
under about the same bounded energy–delay prod-
uct, a power management protocol with a smaller
ratio active ratio is more suitable for energy-lim-
ited applications, in which the stations are subject
to hard constraints on available battery energy.
Clearly, IEEE 802.11 performs poorly in an asyn-
chronous MANET because of its intolerably large
neighbor sensitivity. Compared with the most en-
ergy-conserving scheme (grid quorum-based pro-
tocol) in [22], the interleaving CFPP-based
scheme achieves a nearly 75% reduction in radio
active ratio while keeping about the same radio ac-
tive ratio · neighbor discovery time.
2.3. Data frame transfer procedure
This section presents how a station sends a di-
rected data frame to a PS neighbor. Since the PS
station is not always active, the sending station
has to predict when the PS destination will wake
up; i.e., the timings of the receivers data windows
or ATIM windows. To attain this goal, each bea-
con frame should contain a MAC address, a time-
stamp, awake/sleep pattern number, and other
management parameters. The timestamp records
the current time of the sending station and is used
by a neighboring station to calculate their clock
diﬀerence. We know that each station has its
own line Li. Thus, only i is suﬃcient for the PS sta-
tion to convey its awake/sleep pattern. Only the
interleaving CFPP-based scheme needs one more
bit for judging whether the current pattern repeti-
tion interval is forward or backward. Table 3 sum-
marizes the timings of data windows and ATIM
windows in the proposed power management
schemes, where a, b are integers and a P 0,
1 6 b 6 R 1. We assume that the PS station se-
lects the set {‘1, . . ., ‘k} (f‘1; . . . ; ‘Rkg) as its awake
(sleep) beacon intervals in a pattern repetition
interval.
Our directed data frame transfer procedure is
similar to [12,22] and operates as follows. Assume
that station X is intending to send a data frame to
the PS neighbor Y. Once X has already received a
beacon from Y, X can correctly predict Ys awake/
sleep pattern according to Ys awake/sleep pattern
bits and their clock diﬀerence. If Ys current data
window does not expire, X can directly transmit
a data frame to Y since Y is known in active state.
Otherwise, X should buﬀer the data frame and
wait for Ys data or ATIM window of the next
beacon interval. During Ys data window, X can
send a directed data frame to Y immediately. Dur-
ing Ys ATIM window, X sends a unicast ATIM
frame to Y. Upon reception of Xs ATIM frame,
Y shall reply an ATIM-ACK and remain active
for the entire beacon interval. After Ys ATIM
window concludes, X begins to transmit the buﬀ-
ered data frame and Y has to acknowledge its re-
Table 2
Comparison of power management schemes for an asynchronous MANET
Scheme Beacon transmission ratio Radio active ratio Neighbor discovery time
IEEE 802.11 [12] p(m) AWBI 1
Grid quorum-based [22] 2
ﬃﬃﬃ
R
p 1
R
2
ﬃﬃﬃ
R
p 1
R þ 1 1ﬃﬃﬃRp
 2
AW
BI
 
R	BI
4
Randomized coterie-based kR
k
Rþ RkR AWBI
 
R	BI
2	P ½R;k
Naive CFPP-based 1ﬃﬃﬃ
R
p 1ﬃﬃﬃ
R
p þ R
ﬃﬃﬃ
R
p
R
AW
BI
 
R	BI
2
Interleaving CFPP-based 1ﬃﬃﬃ
R
p 1
2
ﬃﬃﬃ
R
p þ 1ﬃﬃﬃ
R
p BW
BI
 þ R ﬃﬃﬃRpR AWBI  R	 BI
76 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
of the same size, unicast consumes more energy
than broadcast since it requires extra cost to han-
dle RTS, CTS, and ACK frames. The system
parameter values are summarized in Table 5.
3.2. Beacon energy consumption
From Table 4, we notice that the energy cost of
beacon broadcast is relatively expensive since its
ﬁxed cost (send: 250lJ. receive: 56lJ.) is much
greater than the incremental cost of sending or
receiving (send: 1.9 · 61lJ. receive: 0.5 · 61lJ.)
In addition, the total cost of receiving beacon is
much greater than the cost of sending beacon since
the simulated network is dense. Hence we ﬁrst
evaluate the average beacon energy consumption
in a beacon interval during the entire simulation
time when using diﬀerent power management pro-
tocols. Since we focus on beacon energy consump-
tion, the arrival rate k is set to 0.1 (frames/sec/
station) the lowest data traﬃc in our simulations.
Fig. 10 presents the average beacon energy con-
sumption in a beacon interval. The results show
that, in each protocol, the average beacon energy
consumption is almost the same no matter how
BI is varied. The reason is that only the beacon
transfer procedure and the number of stations in
a beacon can aﬀect the average beacon energy con-
sumption. We further observe that, under the same
BI, the average beacon energy consumption of the
four protocols is interleaving CFPP-based ﬃ naive
CFPP-based < randomized coterie-based < grid
quorum-based. There are two factors which may
cause the above consequence: one is radio active
ratio, the other is beacon transfer procedure. Be-
cause of using our scalable beacon transfer proce-
dure, all of our protocols with diﬀerent schemes
are less than grid quorum-based. Although our
three schemes have the same beacon transfer pro-
cedure, the interleaving CFPP-based and naive
CFPP-based scheme have the lower radio active
ratio than the randomized coterie-based scheme
so the interleaving CFPP-based ﬃ naive CFPP-
based < randomized coterie-based.
3.3. Neighbor discovery time
Fig. 11 reports the neighbor discovery time ver-
sus the beacon interval length when data traﬃc
load is ﬁxed at k = 0.1 frames/sec/station. As ex-
pected, the neighbor discovery time increases as
the beacon interval enlarges. However, the grid
quorum-based protocol has smoother curves than
CFPP-based protocols. Speciﬁcally, we ﬁnd that
the neighbor discovery time of CFPP-based proto-
cols grow more suddenly and rapidly. The reasons
are as follows. In an asynchronous MANET, a PS
station may not hear neighbors beacons because
(i) beacon collisions occur, or (ii) that PS station
is sleeping when the beacon frame is being broad-
cast. However, such events occur less frequently in
the grid quorum-based protocols. This may be
Table 5
System parameters used in the simulations
Parameter Value
Channel bit rate 2Mbps
Beacon window 10ms
ATIM window 20ms
DIFS 50ls
PIFS 30ls
SIFS 10ls
Slot time 20ls
Data frame size 2048bytes
Beacon frame size 61bytes
ATIM frame size 28bytes
Data/ATIM-ACK frame size 14bytes 0
20
40
60
80
100
200 300 400 500 600
Beacon Interval (ms)
e
n
e
rg
y 
co
ns
um
pt
io
n 
in
 a
 b
ea
co
n 
in
te
rv
a
l (m
J)
naive CFPP
grid quorum
randomized coterie
interleaving CFPP
Fig. 10. Average beacon energy consumption in a beacon
interval versus diﬀerent beacon interval length (k = 0.1 frames/
sec/station).
78 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
protocol, which saturates at about k = 4 frames/
sec/station, the naive CFPP-based protocol satu-
rates at about k = 6 frames/sec/station. Also, the
naive CFPP-based protocol can deliver a through-
put almost 2.5 times than the grid quorum-based
protocol when 6 6 k 6 10. Although the grid quo-
rum-based and randomized coterie-based protocol
have the same beacon transmission ratio and
radio active ratio, the gap between their through-
put performances is quite large. This is mainly
because, in the grid quorum-based protocol,
transmitting a data frame to a PS station requires
a prior ATIM/ATIM-ACK frame exchange; how-
ever, in the randomized coterie-based protocol, if
source station perceives that the PS destination is
currently in the fully-awake beacon interval, then
it will directly issue the data frame via DCF with-
out ﬁrst performing an ATIM/ATIM-ACK frame
exchange. By this way, we can reduce a signiﬁcant
control frame overheads especially when data
load is heavy.
In addition, we also notice that the throughput
of randomized coterie-based is little better than na-
ive CFPP-based. It is because although random-
ized coterie-based protocol has to send more
beacons than CFPP-based protocols, the more
fully-awake periods also let nodes dont need to
send/receive ATIM frames before sending/receiv-
ing data frames. Therefore, they have almost the
same performance. When k > 4, interleaving
CFPP-based protocol obviously performs worse
than the randomized coterie-based and naive
CFPP-based protocol since the former consumes
some overhead in ATIM/ATIM-ACK transmis-
sions.
3.5. Energy-based throughput
The energy-based throughput is deﬁned as the
amount of successful data delivered per Joule of
energy. It is obtained by dividing the total number
of data frames successfully sent by total energy
consumption over all stations during the entire
simulation time. Using the energy-based through-
put to judge the goodness of a power management
protocol is much fairer than using the total energy
consumption since some power management pro-
tocols may consume very little energy, but also
achieve very little throughput. Fig. 14 shows the
energy-based throughput performances of diﬀer-
ent power management protocols under various
data load when beacon interval = 300ms. The ﬁg-
ure shows that all of our protocols have the better
performance and especially when the traﬃc load k
is higher than 6 frames/sec/station, the random-
ized coterie-based can outperform the grid quo-
rum-based about three times. This is because
our protocols possess the superior throughput
and the less power consumption overhead in
ATIM/ATIM-ACK traﬃc. We also notice that,
when k 6 4, the interleaving CFPP-based protocol
outperforms the naive CFPP-based protocol. This
is because when data load is slight, almost all gen-
erated data frames can be successfully delivered
both in naive and interleaving CFPP-based proto-
cols. However, in this case, the radio active
ratio of the interleaving CFPP-based protocol is
only about half that of the naive CFPP-based
protocol.
4. Conclusions
Currently, IEEE 802.11 wireless LAN cards are
greatly popular on the market. However, when
IEEE 802.11 power management protocol oper-
ates in a large-scale ad hoc wireless network, it will
face three severe challenges: beacon contention,
clock synchronization, and reliable neighbor main-
0
2
4
6
8
10
12
14
16
0.1      1 2      3 4       5      6 7       8 9 10
Data Load (frames/sec/station)
e
n
e
rg
y-
ba
se
d 
th
ro
ug
hp
ut
 (fr
am
es
/Jo
ule
)
naive CFPP
grid quorum
randomized
coterie
interleaving
CFPP
Fig. 14. Energy-based throughput versus data load (beacon
interval = 300ms).
80 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
R 2k þ 1
R k 6
R 2k þ 1þ ðk  1Þ
R k þ ðk  1Þ ¼
R k
R 1 :
Combining (A.3), Lemma A.2, and the fact that
R 2
k  1
 
R
k
  ¼ kðR kÞ
RðR 1Þ ;
we have
R
1
 
R 2
k  1
 
R k  1
k  1
 
R
k
 
R
k
 
6 k
2
R
	 R k
R 1
 kþ1
6 k
2
R
	 ek1 ððkþ1Þ=ðR1ÞÞ
6 b2e ðb2Rb2Þ=ðR1Þð Þ
¼ b2eb2 : ðA:4Þ
Consequently, (A.2) and (A.4) combined lead to
the inequality (A.1).
Appendix B. Correctness of the interleaving CFPP-
based protocol
We prove the correctness of the Interleaving
CFPP-based protocol by showing that any two
PS neighbors, X and Y, are able to discover each
other, regardless of their clock diﬀerence. We as-
sume that X and Y randomly choose two lines
Lx and Ly respectively from the same CFPP
ðU ;LÞ as the set of their half-awake beacon inter-
vals in a pattern repetition interval, and
R ¼ n2 þ nþ 1. Let actW = BI/2 + BW. Without
loss of generality, we can assume that Xs clock
is faster than Ys clock by DT = h · BI + Dt, where
0 6 Dt < BI and h P 0 is an integer. In the follow-
ing derivation, we use Xs clock as a reference
clock to derive Ys clock. We claim that at least
one Xs entire beacon window is fully covered by
one Ys active window within two consecutive pat-
tern repetition intervals, and vice versa. Note that
other cases can be derived via the similar way. The
analysis is divided into two cases.
Case 1: 0 6 Dt < BI/2. As illustrated in Fig.
15(a), X can receive Ys beacons in Ys forward pat-
tern repetition interval if and only if (i) both hiiX
and hi  hiY are half-awake beacon intervals, for
some 0 6 i 6 R 1, and (ii) the beacon window
in hi  hiY begins later than the start of the active
window in hiiX, and terminates earlier than the
end of the active window in hiiX. In other words,
t1 6 t2 and t3 6 t4. Since Lx \ {h  Ly}5 ;,
there must exist an element i such that i 2 Lx and
i 2 {h  Ly}. This implies that both hiiX and
hi  hiY are half-awake beacon intervals. Without
loss of generality, we can assume that t1 ¼ aR	
BI þ ði 1Þ 	 BI , where a P 0 is an integer.
Hence, t1 6 t1 þ Dt ¼ aR	 BI þ ði 1Þ 	 BI þ
Fig. 15. The case that 0 6 Dt < BI/2. (a) For PS station Y, one of its beacon windows in a forward pattern repetition is fully covered by
the Xs active window. (b) For PS station X, one of its beacon windows in a backward pattern repetition is fully covered by the Ys
active window.
82 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
BI þ ðj0  h 2Þ	BI þBI=2þBW þ ðh	BI þBI=
2þDdÞ¼ dR	BIþðj0 h2Þ	BIþBI=2þBWþ
DT ¼ t5.
References
[1] G. Anastasi, L. Lenzini, E. Mingozzi, HIPERLAN/1
MAC Protocol: stability and performance analysis, IEEE
Journal on Selected Areas in Communications 18 (9) (2000)
1787–1798.
[2] F. Cali, M. Conti, E. Gregori, IEEE 802.11 Protocol:
design and performance evaluation of an adaptive backoﬀ
mechanism, IEEE Journal on Selected Areas in Commu-
nications 18 (9) (2000) 1774–1786.
[3] C.F. Chiasserini, R.R. Rao, A distributed power manage-
ment policy for wireless ad hoc networks, in: IEEE
Wireless Communication and Networking Conference,
September 2000, pp. 1209–1213.
[4] Z.-T. Chou, C.-C. Hsu, F.-C. Lin, An adaptive location-
aware MAC protocol for multichannel multihop ad-hoc
networks, in: Networking 2002, Lecture Notes in Compu-
ter Science, vol. 2345, Springer, Berlin, 2002, pp. 399–410.
[5] D.-J. Deng, R.-S. Chang, A priority scheme for IEEE
802.11 DCF access method, IEICE Transactions on
Communications E82B (1) (1999) 96–102.
[6] L.M. Feeney, An energy consumption model for perform-
ance analysis of routing protocols for mobile ad hoc
networks, Mobile Networks and Applications 6 (2001)
239–249.
[7] H. Garcia-Molina, D. Barbara, How to assign votes in a
distributed system, Journal of the ACM 32 (4) (1985) 841–
860.
[8] E.-S. Jung, N. Vaidya, An energy eﬃcient MAC protocol
for wireless LANs, in: IEEE INFOCOM, 2002.
[9] Z.J. Haas, M.R. Perlman, ZRP: a hybrid framework for
routing in ad hoc networks, in: C.E. Perkins (Ed.), Ad Hoc
Networking, Addison-Wesley, Reading, MA, 2001, pp.
221–253 (Chapter 7).
[10] L. Huang, T.-H. Lai, On the scalability of IEEE 802.11 ad
hoc networks, in: ACM International Symposium on
Mobile Ad Hoc Networking and Computing (MobiHoc
2002), June 2001, pp. 173–182.
[11] M. Hall Jr., Combinatorial Theory, second ed., Wiley,
New York, 1998.
[12] LAN MAN Standards Committee of the IEEE Computer
Society, IEEE Standard 802.11-1999 Wireless LAN Med-
ium Access Control (MAC) and Physical Layer (PHY)
Speciﬁcations, IEEE, November 1999.
[13] S. Lindsey, C. Raghavendra, K.M. Sivalingam, Data
gathering algorithms in sensor networks using energy
metrics, IEEE Transactions on Parallel and Distributed
Systems 13 (9) (2002) 924–935.
[14] D. Malkhi, M. Reiter, A. Wool, R.N. Wright, Probabilistic
quorum systems, Information and Computation 170 (2)
(2001) 184–206.
[15] J. Matousˇek, J. Nesˇetrˇil, Invitation to Discrete Mathemat-
ics, Oxford University Press, New York, 1998.
[16] M.J. McGlynn, S.A. Borbash, Birthday protocols for low
energy deployment and ﬂexible neighbor discovery in ad
hoc wireless networks, in: ACM/IEEE International Con-
ference on Mobile Computing and Networking, MobiCom
2001, July 2001, pp. 137–145.
[17] K. Nakano, S. Olariu, Randomized initialization protocols
for ad hoc networks, IEEE Transactions on Parallel and
Distributed Systems 11 (7) (2000) 749–759.
[18] A.K. Salkintzis, C. Chamzas, An in-band power-saving
protocol for mobile data networks, IEEE Transactions on
Communications 46 (9) (1998) 1194–1205.
[19] C. Schurgers, V. Tsiatsis, S. Ganeriwal, M. Srivastava,
Optimizing sensor networks in the energy-latency-density
design space, IEEE Transactions on Mobile Computing 1
(1) (2002) 70–80.
[20] C. Schurgers, V. Tsiatsis, M. Srivastava, STEM: topol-
ogy management for energy eﬃcient sensor networks, in:
IEEE Aerospace Conference 2002, March 2002, pp. 10–
15.
[21] J.-P. Sheu, C.-H. Liu, S.-L. Wu, Y.-C. Tseng, A priority
MAC protocol to support real-time multimedia traﬃc in
ad hoc networks, Wireless Networks 10 (1) (2004) 61–69.
[22] Y.-C. Tseng, C.-S. Hsu, T.-Y. Hsieh, Power-saving proto-
cols for IEEE 802.11-based multi-hop ad hoc networks, in:
IEEE INFOCOM, 2002, pp. 200–209.
[23] Y.-C. Tseng, S.-Y. Ni, E.-Y. Shih, Adaptive approaches to
relieving broadcast storms in a wireless multihop mobile ad
hoc network, in: International Conference on Distributed
Computing Systems, 2001, pp. 481–488.
[24] H. Woesner, J.P. Ebert, M. Schlager, A. Wolisz, Power-
saving mechanisms in emerging standards for wireless
LANs: the MAC level perspective, IEEE Personal Com-
munications 5 (3) (1998) 40–48.
Shih-Lin Wu received the BS degree in
Computer Science from Tamkang
University, Taiwan, in June 1987 and
the PhD degree in Computer Science
and Information Engineering from
National Central University, Taiwan,
in May 2001. From August 2001 to
July 2003, he was the faculty of the
Department of Electrical Engineering,
Chang Gung University, Taiwan, as
an Assistant Professor. Since August
2003, he has been with the depart-
ment of Computer Science and
Information Engineering, Chang Gung University. His current
research interests include mobile computing, wireless net-
works, distributed robotics, and network security. He is a
member of the IEEE Communication Society and the Phi Tau
Phi Society.
84 S.-L. Wu et al. / Computer Networks 47 (2005) 63–85
 1 
國科會補助專家學者出席國際會議報告 
 
99年  7月  8日 
 
第六屆 ACM國際無線通訊與行動計算研討會  (The 6th 
International Wireless Communications and Mobile Computing 
Conference, ACM IWCMC 2010) 在法國巴黎近郊CAEN市的City 
Conference Center舉行，時間從6月28日到7月2日共計五天。會議
主辦單位包含有卡昂大學 (Université de Caen Basse-Normandie)與
ACM，協辦單位包含有卡昂市政府、飛利浦、法國電信等政府與
國際通訊大廠。會議由 IBM公司  Dr. Peter Mueller 與  Florida 大
學  Prof. Ahmed Helmy 共同主持。此國際會議是ACM組織在通訊
網路中知名且重要的會議，目前已有六屆，本次會議出席人員約
有五百人。  
會議主題包含 Broadband Wireless Access, Communication 
and Information Theory Symposium, Computer and Network Security, 
Cooperative and Cognitive Networks, Cross-Layer Optimized 
Wireless Networks, MIMO Systems, Mobile Computing, Multimedia 
over Wireless , Next Generation Mobile Networks, Vehicular 
Communication Technology, Wireless LANs and Wireless PANs 
Symposium, 及  Wireless Sensor Networks 。 會 議 包 含 有 45 
sessions，將近三百篇的論文發表。另外，會議主辦單位特別邀請
三位國際間知名學者分別舉行三場符合時宜且精采專題演講。其
中 第 一 天 的 主 題  “The Next Generation of High Performance 
Computing” 與本人的研究主題  mobile computing 相關， Invited 
 3 
時間  (packet interarrival time) 來決定PSC的參數。在模擬結果的
部份顯示出我們所提出的方法在省電效益及資源利用率方面，均
優於先前文獻中所提的方法。會議中許多學者提供了需多不同的
看法，我們已將這些寶貴的意見全部紀錄下來以便日後改善時可
以參考。  
本人此次參加會議收穫頗多，除了論文發表時獲得與會專家
學者提供的寶貴建議外，還可以聽到其他學者所發表的論文，並
且可以當場向其本人請教心中疑惑。除此之外，session 與  session
之間休息時刻，可與其他專家學者相互討論各種不同領域的議題
及未來可能合作的議題，這對我個人來說，更是一項難得的寶貴
經驗，也可以趁此機會結交國際間不同領域的優秀學者，方便日
後遇到問題時能有更多討論或諮詢的對象，並可使日後之研究更
具寬廣性與國際觀。  
本次會議攜回資料共三份。第一份為大會會議議程表 ;第二
份是研討會註冊收據 ; 第三份是本次會議 IWCMC 2010 的會議論
文集光碟片一張。其中第三份資料是研究上難得可貴的資訊，可
供我與學生做更進一步研究的參考工具。  
 
96年度專題研究計畫研究成果彙整表 
計畫主持人：吳世琳 計畫編號：96-2221-E-182-007-MY3 
計畫名稱：在 IEEE 802.11 無線網路上研發高效能省電且低延遲傳輸的媒體存取控制層協定 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 2 2 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 2 2 100%  專利 已獲得件數 1 1 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 3 3 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 1 1 100% 
人次 
 
期刊論文 4 4 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 3 3 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 1 1 100% 
人次 
 
 
