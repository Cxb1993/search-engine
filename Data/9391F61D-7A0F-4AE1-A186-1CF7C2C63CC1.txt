23. 研究結果
3.1 鎖相迴路的建模
3.1.1 z域等效模型
1
dN
vK
s
REF
O cpI
( )F s
R
1C 2
C
cV
cpI
圖 1 鎖相迴路的相位域方塊圖
圖 1 為 CPPLL 的相位域模型，其中REF為參
考時脈的相位、O 為輸出訊號之相位、Icp 為電
荷幫浦電流、Kv 為 VCO 的增益、Nd為除頻器
之除數。令 T 為參考時脈之週期。圖 1 的迴路
濾波器之轉移函數 F(s)為
 11
1
2
RC
( )
C ( )
s
F s
s s 




(1)
其中RC1C2(C1+C2)−1。利用脈衝不變轉換可
求得 z 域模型，如圖 2 所示。增益 K
IcpTKv∕2Nd 以及 H(z)表示如下[4]:
 
 
O
2 2 2 2 1
1 1 2 1 1 2 1 2
1 2
1 2 1
1 2
( ) 1
( ) : ( )
( )
RC (C C ) RC (C C ) (C C )
(2)
1
H F s
Y s
s s s
f f fa
f
a

  

      
            
  
 
z
z Z
z
z z
z
Z
其濾波器參數為:
1
0Ta e 
  ， 2 21 1 1 2RC (C C )f   , 12 1 2(C C )f T  
(3)
( )H z
KREF ( ) z
O ( ) z
( )Y z
圖 2 穩態(鎖定時)的 z 域 CPPLL 模型
圖 2 的閉迴路系統表示為
O
REF
( ) ( )
( ) 1 ( )
KH
G
KH
 
 
z z
z z
(4)
3.1.2 z域模型的精確度
當鎖相迴路在穩態時， PFD 每隔 T 產生一
個數位的脈波。這個脈波控制電荷幫浦
(charge-pump, CP)來產生幫浦電流，藉由此電
流對濾波器充放電，以改變控制電壓 Vc。因
此，相當於一個大小為 Icp 以及寬度為 tp 的電流
脈衝來驅動濾波器，如圖 3 所示。
pt 1 v
d
K
N s Oc
V
cpI
1C
R
2C
圖 3 對於有限寬度的脈波，輸出相位的響應
電流脈波造成控制電壓的改變量，從時刻 0
至 T 可表示為
 
 
1
11
1
1 1 2
1
1 2
, 0
( )
( 1) ,p
t
cp p
c tt
cp p p
I f f e f T t t t
V t
I f e e f T t t t T




 
 
    
   
(5)
PFD 每隔 T 偵測一次相位誤差(即生一個數位
脈波)，因此只需要得知在每 T 時間間隔的輸出
相位之改變量。輸出相位改變量O 為
 11
O 0
1
1 1 2
( )
( 1) ( 0.5 ) .p
Tv
c
d
tv cp T
p p p
d
K
V t dt
N
K I
f e e f t f T t T t
N



 
 
     

(6)
T
pt
cpI
T
( )cp pI t t
圖 4 (a)有限寬度的脈波，(b) 加權的脈衝
若取代有限寬度的脈波為加權的脈衝，如圖 4
所示，則輸出相位的改變量為
4圖 6 (a)由R 造成的迴路頻寬變異 (b) 由C 造成的迴路
頻寬變異。抖動峰值的設計值為 1.246。
圖 7 為同時考慮R 與C 時(已知RC)，
迴路頻寬的變異。RC 對於抖動變異的影
響比RC 來的大。電阻與電容在相同量級的
變異之下，迴路頻寬的變異主要受到R 的影
響。因此，迴路頻寬的變異隨著 a 的增加而減
小。
-0.2 -0.1 0 0.1 0.2
-0.2
-0.15
-0.1
-0.05
0
0.05
0.1
RC
 B
W
(
a,
 f
1,
 f
2)
-0.2 -0.1 0 0.1 0.2
-0.2
-0.15
-0.1
-0.05
0
0.05
0.1
0.15
0.2
RC
 B
W
(
a,
 f
1,
 f
2)
a=0.5
a=0.6
a=0.7
a=0.5
a=0.6
a=0.7
圖 7 當RC時，迴路頻寬的變異
3.2.2 抖動峰值的變異
圖 8 顯示由R 造成的抖動峰值變異(JP(a,
f1))以及由C 造成的抖動峰值變異(JP(a,
f2))。R 對於抖動峰值的影響比C 來的大。
我們可以調整極點 a，使得JP(a,f1)與JP(a,
f2)幾乎對稱於縱軸(此時JP 在原點的導數幾
乎為零)，將可得到最小的抖動峰值變異。當極
點 a 置於 0.6355，JP(a,f1)有最小值。另外，
當極點 a 置於 0.639，JP(a,f2)有最小值。
-0.2 -0.1 0 0.1 0.2
-0.04
-0.02
0
0.02
0.04
0.06
0.08
0.1
R
 J
P(
 a
,
f 1
)
-0.2 -0.1 0 0.1 0.2
-0.04
-0.03
-0.02
-0.01
0
0.01
0.02
0.03
0.04
0.05
C
 J
P(
 a
,
f 2
)
a=0.5
a=0.6
a=0.7
a=0.6355
a=0.5
a=0.6
a=0.7
a=0.639
圖 8 (a)由R 造成的抖動峰值變異 (b) 由C 造成的抖動
峰值變異。抖動峰值的設計值為 1.246。
JP(a, f1)與JP(a, f2)在原點的導數隨著
極點 a 的增加，由負變為正。在R>0，若 a 值
超過 0.635，則JP(a, f1)在R0 的導數會隨
著 a 值的增加而更大。因此，增加了抖動峰值
的變異。在R<0，若 a 值低於 0.635，則JP(a,
f1)在R0 的導數會隨著 a 值得減少而更小。
因此，也增加了抖動峰值的變異。這些現象也
出現於JP(a,f2)。
圖 9 為同時考慮R 與C 時(已知RC)，
抖動峰值的變異。抖動峰值變異在原點的導數
依然隨著極點 a 的增加，由負變為正。在RC
時，將極點 a 設為 0.6325，則抖動峰值的變異
最小。在RC 時，將極點 a 設為 0.6439，
則抖動峰值的變異最小。由於RC 對於抖動
變異的影響比RC 來的大，以較糟的情形
來考量，將極點 a 設為 0.6325。
-0.2 -0.1 0 0.1 0.2
-0.05
0
0.05
0.1
0.15
0.2
R=C
 J
P(
 a
,
f 1
,
f 2
)
-0.2 -0.1 0 0.1 0.2
-0.04
-0.03
-0.02
-0.01
0
0.01
0.02
0.03
0.04
RC
 J
P(
 a
,
f 1
,
f 2
)
a=0.5
a=0.6
a=0.7
a=0.6325
a=0.5
a=0.6
a=0.7
a=0.6439
(a) (b)
圖 9 當RC時，抖動峰值的變異
在R>0 與C>0 時，若選擇太大的 a 值(譬如
a0.7)，同時受到R 與C 的影響之下，將會使
得JP(a, f1, f2)在原點的導數變的過大。因
此，當RC0.2，抖動峰值變異超過 15%。
在R<0 與C<0 時，若選擇太小的 a 值(譬如
a0.5)，當RC0.2，抖動峰值變異超過
10%。
6Design for Third-order Charge-Pump PLL Using
Linearized Discrete-Time Model,” 2010 IEEE
Multi-conference on Systems and Control, Yokohama,
Japan, Sep. 2010, pp. 2225–2230.
[5] P. K. Hanumolu, M. Brownlee, K. Mayaram, and U. K.
Moon, “Analysis of charge-pump phase-locked loops,” 
IEEE Trans. Circuits Syst. I,Fundam. Theory Appl., vol. 51,
no. 9, pp. 1665–1674, Sep. 2004.
[6] K. Shu and E. Sanchez-Sinencio, CMOS PLL
Synthesizers: Analysis and Design. Boston, MA: Springer
Science + Business Media, Inc., 2005.
[7] D. Banerjee. (1998). PLL performance, simulation, and
design (4th ed.) [Online]. Available: www.national.com
99 年度專題研究計畫研究成果彙整表 
計畫主持人：張帆人 計畫編號：99-2221-E-002-203- 
計畫名稱：基於離散線性化模型的電荷幫浦式鎖相迴路之迴路濾波器設計 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 2 2 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
