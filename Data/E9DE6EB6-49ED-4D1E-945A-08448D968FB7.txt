differential amplifier, to divide a function. The 
segmented function is constructed by a pair of PMOS 
and NMOS. We can properly use the scale of current-
mirror and add a current source to make a second-
order polynomial form of ax2 + bx + c. 
  In this project, we design and implement chips to 
verify a large input dynamic range and a high 
accuracy result. We also compare measurement results 
with corresponding simulations. 
 
英文關鍵詞： CMOS current-mode circuit, input dynamic range, 
current-mode comparator, differential amplifier, 
segmented function, quadratic circuit, curve fitting.
 
I 
 
 
中文摘要 
    由於愈來愈多的類比電路採用 CMOS 電流模式來發展，輸入動態範圍一直都是電流模式優於
電壓模式的項目。然而為了解決更多的問題，輸入動態範圍也被要求提高，因此如何設計電路讓
輸入動態範圍提昇將是一個重要的議題。 
    本研究計畫將一函數在所要求的輸入動態範圍內採用多段曲線擬合的方法來提升精確度，也
就是説在一個固定誤差範圍內，增加輸入動態範圍。我們將預先設定範圍之函數依照曲率的不同
作分段，使用 Divide-and-Conquer (分治法)以二元樹架構來做分割。分割後的每一分段是以 Taylor
展開式的二次多項式來擬合，兼顧電路精簡化及擬合精準度。 
    控制如何分段的電路是參考差動放大器為基礎的電壓比較器，並經修改後成為電流模式比較
器，以作為分割線段的依據。每一分段的二次多項式均含有控制界面，受電流模式比較器的控制。
二次多項式電路的構成是採用 PMOS 與 NMOS 的背對背電路架構，再根據不同的 ax2 + bx + c 二次
多項式係數，改變 Mirror 比例及定電流值所形成，最後將各段之電流輸出合起來產生所要函數的
電流輸出。 
    在本研究計畫已將電路下線製作成晶片，Post-Simulation 所得結果與模擬結果及理想函數作比
較來驗證成果。 
 
關鍵詞：CMOS 電流模式電路、輸入動態範圍、電流模式比較器、差動放大器、分段函數、二次
多項式電路、曲線擬合。 
III 
 
 
目錄 
中文摘要  ……………………………………………………………………………...I 
英文摘要  …………………………………………………………………………..…II 
一、前言  ………………………………………………………………………………1 
二、研究目的  ………………………………………………………………………..1 
三、文獻探討  ………………………………………………………………………..1 
四、研究方法  …………………………………………………………………….….2 
五、結果與討論  …………………………………………………………………....16 
六、參考文獻  …………………………………………………………………..…..17 
七、計畫成果自評  ………………………………………………………………….20 
八、可供推廣之研發成果資料表  …………………………………………………21 
九、附錄  …………………………………………………………………………....21 
2 
 
及應用[15, 17, 19, 21]，但是這些應用還是受限於平方及平方根的特性。 
過去我們利用一個精簡的平方電路架構[22]作為基礎，使用二次多項式 Taylor 展開式來趨近較
複雜的函數電路，以精簡的電路實現特殊及較為複雜的功能應用[1-5]。由於 Taylor 展開式的
truncation error 及平方電路的限制，輸入電流之動態範圍在誤差的考量下無法有效及大幅的提升。 
 
四、研究方法 
對於一非線性及二次多項式函數或一複雜函數 (例如 EXP(x))，我們可以將一較大的輸入動態
範圍區間分成 n 段，每一段均使用二次多項式來表示。以下就控制分段電路之設計、二次多項式
電路設計、整合電路設計、模擬電路結果及晶片製作分別作說明。 
1、控制分段電路： 
首先介紹以差動放大器作為基礎的傳統電壓模式比較器如圖一[24]，作為電流模式控制分段電
路設計之參考。 
 
 
圖一：傳統電壓模式比較器 
 
當 Vin > Vt，可得 Vout 為邏輯 1，否則 Vout 為邏輯 0。由於採用電流模式，我們將傳統電壓模
式比較器修改成如圖二。 
 
 
4 
 
 
圖四：核心電路(平方電路) 
 
整理(21)，以 Ix 為表示式： 
2 2
X DD tp tnI [V (V | V |)] (V V )C CK K= − + − −
 
    
DD tn
2 2 2 2
DD tp tp tn[V 2V (V | V |) (V |V |) ] (V 2V V V )CC C CK K= − + + + − − +
 
   
DD tp tn
2 2 2
DD DD tp tp tn(V V 2V V 2V | V | 2V | V | 2V V V )C C CK= + − − + + −
  
  
2 2
DD tp tn DD tp tn[(V -|V |) -V ]-2 (V -|V | V )VCK K= −
                                (22) 
在(22)式中，VC 可表示成： 
DD tp tn DD tp tn X
DD tp tn DD tp tn
(V |V | V )(V |V |+V ) IV +
2(V |V | V ) 2 (V |V | V )C K
− − −
=
− − − −
 
        
DD tp tn X
DD tp tn
(V |V |+V ) I
+
2 2 (V |V | V )K
−
=
− −
                              (23) 
將(23)代入(19)與(20)式，I1 及 I2 可表示成： 
DD Tp Tn 2X
1
DD Tp Tn
V V V II K[ ]
2 2K(V V V )
− −
= +
− −
                     (24) 
   
DD Tp Tn 2X
2
DD Tp Tn
V V V II K[ ]
2 2K(V V V )
− −
= −
− −
                     (25) 
在(24)式與(25)式中，我們假設
2
VVV
V TnTpDD0
−−
= 即可將方程式改寫成： 
2 2X
1 0 2
0
II KV (1 )
4KV
= +
                               (26) 
6 
 
2 20
1 0 0
0
II I (1 ) I (1 )
4I 4
m x mx
= + = +
                          (30) 
2 20
2 0 0
0
II I (1 ) I (1 )
4I 4
m x mx
= − = −
                          (31) 
再將 I3 從(30)式做 s 倍的電流鏡，I4 也從(31)式做 s 倍的電流鏡，我們利用此兩電流對方程式
中的平方項做調整，但值得注意的是當我們平方項係數 a 值是正值時，我們會選用 I3 項電流
做為調整用，若負值則用 I4 項電流做為調整用，所以首先將 I3 從(30)式做 s 倍的電流鏡，I4
也從(31)式做 s 倍的電流鏡可得： 
2
3 0I I (1 )4
mx
s= +
                               (32) 
2
4 0I I (1 )4
mx
s= −
                               (33) 
我們也可以利用 I5 從(30)式做 r 倍的電流鏡，I6 也從(31)式做 r 倍的電流鏡來對方程式中的一
次項做調整，可得： 
2
5 0I I (1 )4
mx
r= +
                             (34) 
2
6 0I I (1 )4
mx
r= −
                             (35) 
在常數項的 IV 部分，我們是將電流乘上一個 q 值的倍率來做修正，若常數項(c) 
為正值，則使用電流源(IV1)，若常數項為負值得時候，則使用電流源(IV2)，並假設 
IV1=IV2=qI0                                (36) 
假設多項式 ax2+bx+c 中的係數 a、b、c 值皆為正值，從(32)、(34)、(35)、 
(36 及圖五可得： 
Iout=I5+Isq-I6+IV1 
    
2 2 2
0 0 0 0I (1 ) I (1 ) I (1 ) I4 4 4
mx mx mx
r s r q= + + + − − +
   
整理後可得： 
    
2
2
0I [( ) ( ) ( )]16 2
sm sm
x rm x s q= + + + +
                                     (37) 
而                         Iout=I0(ax2+bx+c)                              (38) 
比較(37)式與(38)式可得： 
2
2 2[a +b +c] [( ) ( ) ( )]
16 2
sm sm
x x x rm x s q= + + + +
 
2
a
16
sm
=
                                    (39) 
8 
 
 
 
圖七：二次多項式電路(a,b,c 係數為負正負型式) 
 
我們將圖五之二次多項式電路雛型加上控制界面如圖八，圖中Vout受前述之控制分段電路Vout
控制。假設要實現一 f(x)函數，我們將輸入範圍分為兩段，分別使用 Taylor 的二次多項式展開為
a1x
2
 + b1x + c1 及 a2x2 + b2x + c2。實現步驟以圖九來表示，圖中(A)方塊為圖二之電路；(B)(C)方塊
為圖八之電路，電流 It 為分段處的電流。 
 
 
圖八：具有控制界面之二次多項式電路 
10 
 
 
圖十：Sigmoid 電路架構之四個主要方塊圖 
 current source(圖十一)由多組電流鏡組成，在單一輸入電流下轉換提供下級所許之多個輸入
電流。 
 
圖十一：多組電流鏡電路圖 
second-order circuit(圖十二)由簡易二次多項式電路將實現之函數分成多段製作，利用分段電路
提升整體函數之準確度。 
 
圖十二：二次多項式電路圖 
 current control switch(圖十三)在一個較大輸入電流下，以定電流源控制所需分段之電流端點
進行切割，並以 inverter 特性做 I-V 轉利用換搭配不同電壓做切換控制。 
12 
 
 
圖十五：Sigmoid 函數電路圖 
 
5、晶片製作： 
 
晶片製作規格列表如下： 
電路名稱：利用多段趨近法設計高準確度 CMOS 電流模式 Sigmoid 電路 
Technology：TSMC 0.18 um CMOS Mixed Signal RF General Purpose Standard Process FSG Al         
1P6M 1.8&3.3V 
Package：18 S/B DIP 
Transistors/MOS Count：82 MOS 
Chip Size : 0.32 × 0.32   um2   
Power Dissipation：4.27 mW 
14 
 
 
電壓變動對此電路影響，應用 PSRR 做為模擬(圖十八)，此電路 PSRR 為 71.4。 
 
圖十八：PSRR 模擬圖 
 
圖十九為 pre-simulation 與 post-simulation 電路頻寬模擬圖。 
 
 
圖十九：電路頻寬模擬圖 
 
 
 
 
 
 
 
 
 
16 
 
文獻比較表如下： 
 This work Abu.,M.T. 
2006[25] 
Chun Lu 
2002 [26] 
Genov, R. 
2004[27] 
Tech. CMOS 0.18µm 0.18µm 0.5µm 0.5µm 
Vdd(V) 1.8 1.8 3.3 1.5 
Power 
Consumption(mW) 
4.283 x 10 82 
Input  range(µA) ±400 -25~0 x x 
Input  range(V) 0.38 ~ 0.9 x x 1.8~3.2 
Bandwidth(MHz) 308 x x 128 
Chip size  (mm2) 0.32x0.32 x 1.5 x 0.7 0.7 x 2 
本電路應用 TSMC 0.18μm 製程，Power 消耗相較於[26-27]低。在 Input range 以 CMOS 電流模式範
圍擴展之多段法，使輸入電流為±400μA 遠大於[25]文獻。頻寬上更可達到 308MHz，大於[27]文獻。
Chip size 為 0.32 x 0.32 小於[26-27]文獻。 
在測試晶片的階段，由於電源供應器無法提供輸入電流±400µA，因而利用輸入輸出兩個節點做
I-V 轉換，其電流範圍的電壓值在 0.38 V~ 0.9V 間，我們量測上主要使用電壓方式去量測結果。所
使用設備有電源供應器與數位式示波器，其中電源供應器提供.38 V~ 0.9 V 的輸入電壓，而數位式示
波器用來量測輸出值，若輸出端電壓量測結果為 0.7 V~ 0.83V，即可推出輸出電流是否正確。 
 
五、結果與討論 
本研究計畫之 CMOS 電流模式多分段控制二次多項式電路已發展完成，在 ICEOE 2012 國際會
議中發表兩篇 EI 論文[28][29]。在[28]中，利用電流比較器的方式做分段控制。在[29]中，則是利用
差動放大器的方式做分段控制。另外，二次多項式電路的應用也被 IEICE 期刊接受，預計於 2012
的 11 月刊登[30] 。本研究計畫之實作晶片預計於 2012 的 11 月產出。我們可以從 Post-Simulation
中看出當溫度及 VDD 固定在要求的範圍時，可以保證在 3%的相對誤差範圍內，達到高輸入動態範
圍的要求，輸入電流從-400 µA 到 400 µA，克服了一般非分段的方法之範圍限制。 
 
 
 
18 
 
[15] R.J. Wiegerink, “Analysis and synthesis of MOS translinear circuits,” Kluwer, Boston, 1993. 
[16] C.Y. Huang, C.Y. Chen, B.D. Liu, “Current-Mode Fuzzy Linguistic Hedge Circuits,” Analog 
Integr. Circuits Signal Process, 19(3), pp. 255-278, 1999. 
[17] C.A. De La Cruz-Blas, A. Lopez-Martin, A. Carlosena, “1.5-V MOS Translinear Loops with 
Improved Dynamic Range and Their Applications to Current-Mode Signal Processing,” IEEE Trans. 
Circuit Syst.-II, 50(12), pp. 918-927, 2003. 
[18] J.K. Seon, “Design and application of precise analog computational circuits,” Analog Integr. 
Circuits Signal Process, 54, pp. 55-66, 2008. 
[19] S. Menekay, R.C. Tarcan, H. Kuntman, “Noval high-precision current-mode circuits based on the 
MOS-translinear principle,” AEU Int. J. Electron. Commun., 63, pp. 992-997, 2009. 
[20] T. Rungkhum, A. Julsereewong, V. Riewruja, P. Julsereewong, “A CMOS-based Square-Rooting 
Circuit,” International Conference on Control, Automation and Systems, pp. 161-164, 2007. 
[21] W. Petchakit, A. Lorsawatsiri, W. Kiranon, C. Wongtaychathum, P. Wardkein, “Current-mode 
squaring, square-rooting and vector summation circuits,” AEU Int. J. Electron. Commun., 64, pp. 
443-449, 2010. 
[22] M. mottaghi-kashtiban, A. Khoei, K. Hadidi, “A Current-Mode, First-Order Takagi-Sugeno-Kang 
Fuzzy Logic Controller, Supporting Rational-Powered Membership Functions,” IEICE TRANS. 
Electron., E90-C(6), pp. 1258-1266 2007. 
[23] A. Motamed, C. Hwang, M. Ismail, “CMOS exponential current-to-voltage converter,” Electron. 
Lett., 33(12), pp. 998-1000, 1997. 
[24] N. Onizawa and T. Hanyu, “Robust multiple-valued current-mode circuit components based on 
adaptive reference-voltage control,” 39th International Symposium on Multiple-Valued Logic, pp. 
36-41, 2009. 
[25] M. T. Abuelma'ati and A. Shwehneh, “A Reconfigurable Satlin/Sigmoid/Gauusian/Triangular 
Basis Functions Computation Circuit,” IEEE International Conference on Computer Systems and 
Applications,pp. 232 – 239, 2006. 
[26] Chun Lu, Bingxue Shi, and Lu Chen, “A general-purpose neural network with on-chip BP 
learning,” IEEE International Symposium on Circuits and Systems, pp. 520-523, 2002. 
[27] R. Genov and G. Cauwenberghs, “Dynamic mos sigmoid array folding analog-to-digital 
conversion,” IEEE Transactions on Circuits and Systems I Regular Papers, pp. 182-186, 2004. 
[28] Kuo-Jen Lin, Chih-Jen Cheng, and Jwu-E Chen, “Multi-Point Correction Method in CMOS 
Current-Mode Function Design,” 2nd International Conference on Electronics and Optoelectronics, 
Shenyang, China, pp. 294-298, 2012. 
[29] Chih-Jen Cheng, Kuo-Jen Lin, and Jwu-E Chen, “CMOS Current-Mode Hyperbolic Tangent 
Sigmoid Function Implementation Using Multi-Segment Approximations,” 2nd International 
20 
 
七、計畫成果自評 
國科會補助專題研究計畫成果報告自評表 
請就研究內容與原計畫相符程度、達成預期目標情況、研究成果之學術或應用價
值（簡要敘述成果所代表之意義、價值、影響或進一步發展之可能性）、是否適
合在學術期刊發表或申請專利、主要發現或其他有關價值等，作一綜合評估。 
1. 請就研究內容與原計畫相符程度、達成預期目標情況作一綜合評估 
▓  達成目標 
□  未達成目標（請說明，以 100 字為限） 
□ 實驗失敗 
□ 因故實驗中斷 
□ 其他原因 
說明： 
 
2. 研究成果在學術期刊發表或申請專利等情形： 
論文：▓已發表 □未發表之文稿 □撰寫中 □無 
專利：□已獲得 □申請中 ▓無 
技轉：□已技轉 □洽談中 ▓無 
其他：（以 100 字為限） 
 
  
ICEOE2012 and OEMR2012 CONFERENCES 
SCHEDULE 
 
 
 
 
2012 2nd International Conference on Electronics and Optoelectronics  
(ICEOE 2012) 
 
2012 International Meeting on Opto-Electronics Engineering and Materials 
Research (OEMR 2012) 
 
 
 
 
 
 
 
 
 
Tianlun Regar Hotel Shenyang 
Shenyang, China 
July 27 - 28, 2012 
 
 
 OE0109 Study On Control Technology of Double-fed Motor Based On PLC and General Invert 
 Chengwu Lin, Jialin Shi and Bo Lu 
OE0110 
Research on Grid-connected Inverter Based on Current Track Control in Wind Generation 
System 
 Chengwu Lin, Qiguang Jiang and Li Ma 
OE0568 A new Coupled PDE Method for Image Processing 
 Maolin Wang, Jun Yue, Pan Huang and Chaoshuai Song 
OE0214 
Comparison of Gold and Silver Nanoparticles as Active Substrates for SERS Spectra 
Measurements on Liver Cancer Cells 
 Chen Qian,Shupeng Liu,Na Chen,Zhenyi Chen and Qianqian Geng 
OE0202 Generation of Multi-Atom W States in Microtoroidal Cavity-Atom System 
 Yu Huang 
OE0165 A Method for Lidar Data Conversion and Standardization 
 Hao Chen, Dengxin Hua, Yikun Zhang, Zhirong Zhou, Shichun Li and Li Wang 
OE0233 
The structural design of combined absorber composed by MPP and multi-layer porous 
material based on VA One 
 Xiuhua Duan, Huanqin Wang,Wenjuan Sun and Deyi Kong 
OE0537 Studying  Relative Error Formulae  of Surveying Textbooks of Chinese Colleges 
 Yonghe Deng 
OE0245 Dynamically manipulating beam with metallic nano-optic lens containing liquid crystal 
 Jicheng Wang, Xia Zhou,Jie Gao,Zhetao Xu, Lin Sun and Xiao Jin 
OE0550 
Solvothermal method preparation of nano Y2O2SEu3+ and research of luminescence 
property 
 Lu Lu and Zhilong Wang 
 
 
12：00 - 13：30 Lunch Break 
 
 Liao  
CE0273 
The  three-dimensional analysis of light scattering characters for Rayleigh particles  
on/below the wafer 
 Lei Gong, Zhensen Wu  
CE0282 Simulation of Laser Beam Scattering from Complex Targets in the Near Field 
 Jiaxuan Lin, Zhensen Wu, Xiang Su, Biao Wang 
CE0284 
The Analysis of Influencing Factors of One Dimensional Range Profiles and Surface 
Elements Imaging Method to Arbitrary Target   
 Yuan Mou, Zhensen Wu, Zhuo Chen, Hanlu Zhang 
CE0285 Scattering Properties of the Higher-Order Hermite Gaussian Beam 
 Tan Qu, Zhensen Wu, Haiying Li, Zhengjun Li 
CE0287 
Extraordinary Electromagnetic Scattering of Plane Wave by Double Negative Coated 
Sphere 
 Yan’e Shi, Zhensen Wu, Hongfei Tian, Zhengjun Li  
CE0288 
Scattering Characteristics of Complex Target from Solar Irradiance and Sky-ground 
Background Radiance in Infrared Spectrum 
 Xing Guo, Zhensen Wu, Longxiang Linghu, Yufeng Yang 
CE0289 
Scattering of Two-Dimensional Sea Surface at Low Grazing Angles with Physical Optics 
Method 
 Zhuo Chen, Zhensen Wu, Yong Zhang, Jingjing Xue, Wenhua Ye   
CE0292 The Acceleration of PO Based on CUDA 
 Xiang Su, Zhensen Wu, Jiaxuan Lin and Xiaobing Wang  
CE0293 Decomposing the Non-Gaussian Surface in Sum of Gaussian Surfaces 
 Zhangxing Qi, Zhensen Wu, Ziwen Yu, Haiying Li 
CE0294 Polarization Properties of Scattered Fields from a Chiral Sphere 
 Qingchao Shang, Zhensen Wu, Peng Zhao, Zhengjun Li 
CE0311 Phase-only Beam Optimization for GaAs Optical Waveguide Phase Array 
 Yong Zhang 
CE0314 Path loss of Non-Line-of-Sight single-scatter model  
 Tairong Wang, Lu Bai, Zhensen Wu 
CE0316 
Adaptive Interleaving Method and its Application to Free Space Optical Communications 
through Atmospheric Turbulence Channel 
 
Zhonghua Yang, Qiwen Ran, Jing Ma, Liying Tan, Shichen Wu, Qingfeng liu, Huixi 
Liao   
 
 
18：00 - 19：30 Buffet Dinner 
 
outI
M1
M2
M3
m1IxI
M4
m2I
m3I
m4I
M9
M10
M5
M6
M7
m5IxI
M8
m6I
m7I
m8I
vI m10
I
m9I
Fig. 2. Current-mode exponential circuit.
The second order polynomial for evaluating exp(x) at x = 0
is:
exp(x) ≈ 1 + x+ 1
2
x2 (8)
Assume that I0 = KV 20 and Ix = I0x. Equation (6) will be
I1 = I0(1− x
4
)2 (9)
and (7) will be
I2 = I0(1 +
x
4
)2 (10)
To realize the exp(x) by using the current-mode circuit shown
in Fig. 2, we could set the possible output (Iout) as
I0exp(x) = I0(1 + x+
1
2
x2) (11)
We can rewrite it as
I0exp(x) = 8I0(1 +
x
4
)2 − 3Ix − 7I0 (12)
or
I0
8
exp(x) = I0((1 +
x
4
)2 + x)− 11
8
Ix − 7
8
I0 (13)
where I0((1 + x4 )
2 + x) could be realized by
I0((1 +
x
4
)2 + x) = 2I0(1 +
x
4
)2 − I0(1− x
4
)2 (14)
which is the result of (Im7− Im8) as Im7 = 2I0(1+ x4 )2 and
Im8 = I0(1− x4 )2. Therefore, we could take mirrors from Im5
and Im6 to Im7 and Im8 with scale two and one, respectively.
If we take mirrors from Im1 and Im2 with scale 118 to Im9
and Im10, respectively, then we can realize
Im10 − Im9 = 11
8
Ix (15)
because
11
8
(I0(1 +
x
4
)2 − I0(1− x
4
)2) =
11
8
Ix (16)
If Iv is set to 78I0, and Iout =
I0
8 g(x) = Iug(x) ≈ Iuex, then
(13) can be rewritten as
Iout = Im7 − Im8 + Im9 − Im10 − Iv (17)
which is achieved in Fig. 2.
Pd1 Pi1
ideal
simulation
Pi2 Pd2
first correction
first correction
x
f(x)
second 
correction
second 
correction
Fig. 3. Correcting points and their corrections.
III. MULTI-POINT CORRECTION METHOD
In the previous circuit design, truncation errors are due
to the Taylor’s expansion; K-match errors are due to the
assumption of (3); nonlinear errors are due to second-order
effects such as channel length modulation, body effect, and
mobility degradation. For reducing the errors, we could take
some strategies as follows.
A. Sizing Strategy
We could tune the size of transistors which construct a
current-mode function circuit to fit a function as possible.
For example, we could size M3 and M4 in Fig. 2 to make
the same value of two Ix. We can also tune the M7 and
M8 to obtain a good result of (Im7 − Im8), which could
really match I0((1+ x4 )
2+ x). We also size the M9 and M10
to realize (15). Consequently, we can accurately realize the
Taylor’s approximation circuit for the function of I08 exp(x).
However, the input dynamic range is also limited.
B. Multi-Point Correcting Circuit
In the design stage, simulation results could show the error
figures. We could arrange some correcting points to correct
errors. Figure 3 shows the error and correction examples. As
x > Pi1 shown in Fig. 3, we could conduct Pi1 circuit to
increase the output current. As x > Pd2, we conduct Pd2
circuit to decrease the output current. As x < Pd1, we could
conduct Pd1 circuit to decrease the output current. As x < Pi2,
we conduct Pi2 circuit to increase the output current. The Pi1,
Pd2, Pd1, and Pi2 circuits are shown in Fig. 4.
Consider accuracy and the input dynamic range, we need
carefully tune the scales of current-mirrors of the correcting
circuits. By using the multi-point correcting circuits, we can
re-design the circuit shown in Fig. 2 into the circuit shown in
Fig. 5. In Fig. 5, three Pi1 circuits are used for Ix > 0 and
two Pd2 circuits and one Pi1 circuit are used for Ix < 0. The
number of correcting circuits is dependent on the accuracy and
the input dynamic range.
IV. SIMULATION RESULTS
To verify the sizing strategy and multi-point correcting
circuit, we initiate a simulation by using the 0.35 µm CMOS
TABLE I
EXPONENTIAL CIRCUIT COMPARISONS.
Liu et al. Kumngern et al. Kalenteridis et al. proposed circuit
[5] [7] [11]
CMOS technology 0.5µm 0.5µm 90nm 0.35µm
Supply voltage ±2.5V 1.5V 1.2V 2.5V
Linearity 15 dB 16.3 dB 17 dB 39.5 dB
Input dynamic range -0.5V to 0.85V −11µA to 6.3µA -0.27V to 0.1V −60µA to 128µA
Linearity error 1.35% 1 dB 0.5 dB 0.3 dB
Bandwidth 111.2 MHz 265 MHz 288 MHz
−100 −50 0 50 100
0
20
40
60
80
100
120
I
x
   (µA)
(1/
8)*
I0*
ex
p(x
)  (
µA
)
 
 
ideal
correction method
Taylor approximation
Fig. 6. Simulation results for Iout = I08 exp(x).
each correcting circuit, constructed by four transistors and one
current source, contributes 37µA. Conversely, the other side
only contributes the input range from −60µA to −28µA.
Each correcting circuit only contributes 11µA on average.
The comparisons of relative circuits are given in Table I. Our
proposed method and [7] adopt current-mode circuit, whereas
[5] and [11] design circuits with voltage-mode. In [7] and [11],
low voltage designs are with attraction. Our proposed circuit
outperforms in linearity, input dynamic range, linearity error,
and bandwidth.
V. CONCLUSION
In this paper, we propose a method to design a CMOS
current-mode function with high input dynamic range. The
sizing strategy contributes on correcting errors in the central
part of a function. The proposed correcting circuits are used to
extend the input dynamic range by decreasing errors from sev-
eral correcting points. In the design example, we successfully
implement an exponential function with a linearity of 39.5dB
for an input range from −60µA to 128µA.
ACKNOWLEDGMENT
The authors would like to thank the National Chip Im-
plementation Center (CIC) of the National Applied Research
Laboratories of Taiwan for technical support. The research is
supported by the National Science Council of Taiwan, under
Grant No. NSC100-2221-E-216-033.
−100 −50 0 50 100
−10
0
10
20
30
40
50
I
x
   (µA)
Li
ne
ar
ity
 (d
B)
 
 
ideal
correction method
Taylor approximation
Fig. 7. Linearity measurements for correction method and Taylor’s approx-
imation.
−60 −40 −20 0 20 40 60 80 100 120
−0.2
−0.1
0
0.1
0.2
0.3
0.4
0.5
I
x
   (µA)
Li
ne
ar
ity
 e
rro
r (
dB
)
 
 
correction method
Taylor approximation
Fig. 8. Linearity errors for correction method and Taylor’s approximation.
REFERENCES
[1] A. Motamed, C. Hwang, and M. Ismail, ”CMOS exponential current-to-
voltage converter,” Electron. Lett., vol. 33, pp. 9981000, 1997.
[2] C. A. De La Cruz-Blas, A. Lopez-Martin, and A. Carlosena, ” Pseudo-
exponential function for mosfets in saturation,” IEEE Trans. Circuit Syst.-
II, vol. 47, pp. 13181321, 2000.
[3] M. T. Abuelmaatti, ”Universal CMOS current-mode analog function
synthesizer,” IEEE Trans. Circuit Syst.-I, vol. 49, pp. 14681474, 2002.
[4] C. A. De La Cruz-Blas, A. Lopez-Martin, and A. Carlosena, ”1.5-v mos
translinear loops with improved dynamic range and their applications to
  
ICEOE2012 and OEMR2012 CONFERENCES 
SCHEDULE 
 
 
 
 
2012 2nd International Conference on Electronics and Optoelectronics  
(ICEOE 2012) 
 
2012 International Meeting on Opto-Electronics Engineering and Materials 
Research (OEMR 2012) 
 
 
 
 
 
 
 
 
 
Tianlun Regar Hotel Shenyang 
Shenyang, China 
July 27 - 28, 2012 
 
 
 OE0109 Study On Control Technology of Double-fed Motor Based On PLC and General Invert 
 Chengwu Lin, Jialin Shi and Bo Lu 
OE0110 
Research on Grid-connected Inverter Based on Current Track Control in Wind Generation 
System 
 Chengwu Lin, Qiguang Jiang and Li Ma 
OE0568 A new Coupled PDE Method for Image Processing 
 Maolin Wang, Jun Yue, Pan Huang and Chaoshuai Song 
OE0214 
Comparison of Gold and Silver Nanoparticles as Active Substrates for SERS Spectra 
Measurements on Liver Cancer Cells 
 Chen Qian,Shupeng Liu,Na Chen,Zhenyi Chen and Qianqian Geng 
OE0202 Generation of Multi-Atom W States in Microtoroidal Cavity-Atom System 
 Yu Huang 
OE0165 A Method for Lidar Data Conversion and Standardization 
 Hao Chen, Dengxin Hua, Yikun Zhang, Zhirong Zhou, Shichun Li and Li Wang 
OE0233 
The structural design of combined absorber composed by MPP and multi-layer porous 
material based on VA One 
 Xiuhua Duan, Huanqin Wang,Wenjuan Sun and Deyi Kong 
OE0537 Studying  Relative Error Formulae  of Surveying Textbooks of Chinese Colleges 
 Yonghe Deng 
OE0245 Dynamically manipulating beam with metallic nano-optic lens containing liquid crystal 
 Jicheng Wang, Xia Zhou,Jie Gao,Zhetao Xu, Lin Sun and Xiao Jin 
OE0550 
Solvothermal method preparation of nano Y2O2SEu3+ and research of luminescence 
property 
 Lu Lu and Zhilong Wang 
 
 
12：00 - 13：30 Lunch Break 
 
 Liao  
CE0273 
The  three-dimensional analysis of light scattering characters for Rayleigh particles  
on/below the wafer 
 Lei Gong, Zhensen Wu  
CE0282 Simulation of Laser Beam Scattering from Complex Targets in the Near Field 
 Jiaxuan Lin, Zhensen Wu, Xiang Su, Biao Wang 
CE0284 
The Analysis of Influencing Factors of One Dimensional Range Profiles and Surface 
Elements Imaging Method to Arbitrary Target   
 Yuan Mou, Zhensen Wu, Zhuo Chen, Hanlu Zhang 
CE0285 Scattering Properties of the Higher-Order Hermite Gaussian Beam 
 Tan Qu, Zhensen Wu, Haiying Li, Zhengjun Li 
CE0287 
Extraordinary Electromagnetic Scattering of Plane Wave by Double Negative Coated 
Sphere 
 Yan’e Shi, Zhensen Wu, Hongfei Tian, Zhengjun Li  
CE0288 
Scattering Characteristics of Complex Target from Solar Irradiance and Sky-ground 
Background Radiance in Infrared Spectrum 
 Xing Guo, Zhensen Wu, Longxiang Linghu, Yufeng Yang 
CE0289 
Scattering of Two-Dimensional Sea Surface at Low Grazing Angles with Physical Optics 
Method 
 Zhuo Chen, Zhensen Wu, Yong Zhang, Jingjing Xue, Wenhua Ye   
CE0292 The Acceleration of PO Based on CUDA 
 Xiang Su, Zhensen Wu, Jiaxuan Lin and Xiaobing Wang  
CE0293 Decomposing the Non-Gaussian Surface in Sum of Gaussian Surfaces 
 Zhangxing Qi, Zhensen Wu, Ziwen Yu, Haiying Li 
CE0294 Polarization Properties of Scattered Fields from a Chiral Sphere 
 Qingchao Shang, Zhensen Wu, Peng Zhao, Zhengjun Li 
CE0311 Phase-only Beam Optimization for GaAs Optical Waveguide Phase Array 
 Yong Zhang 
CE0314 Path loss of Non-Line-of-Sight single-scatter model  
 Tairong Wang, Lu Bai, Zhensen Wu 
CE0316 
Adaptive Interleaving Method and its Application to Free Space Optical Communications 
through Atmospheric Turbulence Channel 
 
Zhonghua Yang, Qiwen Ran, Jing Ma, Liying Tan, Shichen Wu, Qingfeng liu, Huixi 
Liao   
 
 
18：00 - 19：30 Buffet Dinner 
 
−3 −2 −1 0 1 2 3
−2
−1.5
−1
−0.5
0
0.5
1
1.5
2
x
ta
nh
(x)
 
 
Ideal tanh(x)
Taylor series to the term of  x3
Taylor series to the term of  x5
Taylor series to the term of  x7
multi−segment approximations
Fig. 1. Mathematical simulation results for different approximations.
M1
M2
xI 1I
2I
cV
Fig. 2. Simple current-mode quadratic circuit.
2.0, respectively. The proposed multi-segment approximation
reveals the wide input dynamic range of 5 for relative error
less than 3%. Obviously, our proposed method outperforms
the traditional methods.
III. MULTI-SEGMENT APPROXIMATION CIRCUIT
The simulation result of Fig. 1 gives the good way to imple-
ment the tanh function by using four second-order polynomial
functions. We will illustrate how to realize and control the four
segments by using CMOS current-mode circuits.
A. Quadratic Circuit
We can generate a current-mode quadratic function by using
a simple circuit shown in Fig. 2 [11]. From [12], we have two
current-mode functions:
I1 = K(
VDD − |Vtp| − Vtn
2
+
Ix
2K(VDD − |Vtp| − Vtn) )
2 (7)
I2 = K(
VDD − |Vtp| − Vtn
2
− Ix
2K(VDD − |Vtp| − Vtn) )
2 (8)
Mn1 Mn2
Mp1 Mp2
Vout1
Vref Mnb
Vx VtIx
It
Mvxp
Mvxn
Mvtp
Mvtn
Mivp
Mivn
Vout11
Fig. 3. Segment controller.
and
Vc =
VDD − |Vtp|+ Vtn
2
− Ix
2K(VDD − |Vtp| − Vtn) (9)
Obviously, I1 and I2 are the quadratic functions of Ix. As Ix
increases, Vc will decrease for observing Eq. (9). If we set
V0 =
VDD−|Vtp|−Vtn
2 , then
I1 = KV
2
0 (1 +
Ix
4KV 20
)2 (10)
I2 = KV
2
0 (1−
Ix
4KV 20
)2 (11)
If we set I0 = KV 20 and Ix = 4I0x. Equation (10) will be
I1 = I0(1 + x)
2 (12)
and (11) will be
I2 = I0(1− x)2 (13)
B. Segment Controller
We need to design a control circuit to switch the services
of Eqs. (3), (4), (5), and (6). Therefore, we could design the
segment controller shown in Fig. 3 based on a differential
amplifier. If Ix > It, we have Vx < Vt, which make Vout1
near ground (GND) and Vout11 near V DD. Conversely, if
Ix < It, we have the results of Vout1 near V DD and Vout11
near GND. For controlling four segments (s1, s2, s3, and
s4), we need to construct a four-segments controller shown in
Fig. 4. The Vout1, Vout2, and Vout3 are controlled by It1, It2,
and It3, respectively. A corresponding control table is shown
in Table I.
In Fig. 4, the s1, s2, s3, and s4 segment circuits realize the
Eqs. (3), (4), (5), and (6), respectively. The drain current of
Mep12 is the scale of I0(1 + x)2, we could size Mep12 and
tune Ib1 to make I0tanh1(x) shown in Eq. (3). The s2 segment
circuit also follows the sizing and tuning method. The s3 and
s4 segment circuits will have I0tanh3(x) and I0tanh4(x).
The I0tanh3(x) is made by AI0(1+x)2−BI0(1−x)2, where
A and B are the scale of Mep32 and Men32, respectively,
which are determined by Eq. (5) and tuned by observing the
results of simulation. The similar work should apply on the
generation of I0tanh4(x).
TABLE I
FOUR-SEGMENTS CONTROL TABLE.
Segment s1 on s2 on s3 on s4 on
(Ix < It3) (It3 ≤ Ix < It2) (It2 ≤ Ix < It1) (Ix ≥ It1)
Vout11 low low low high
Vout12 high high high low
Vout21 low low high high
Vout22 high high low low
Vout31 low high high high
Vout32 high low low low
−300 −200 −100 0 100 200 300
−40
−30
−20
−10
0
10
20
30
40
 I
x
   (µA)
I o
u
t  
(µ
A
)
 
 
ideal
multi−segment method
Fig. 5. Simulation results for current-mode tanh function.
10−1 100 101 102 103
−91
−90
−89
−88
−87
−86
−85
−84
MHz
dB
 ( m
ea
su
red
 at
 I o
u
t )
Fig. 6. Bandwidth measurement of the multi-segment approximation circuit.
The proposed multi-segment approximation circuit has been
verified with wide input dynamic range from −256µA to
240µA for relative error less than 3%, which is wider than
the Taylor’s method of expanding series to the term of x7.
Moreover, we measure −3dB bandwidth of 138MHz. The
THD measurements are less than 2.9% for large sinusoid
amplitude.
2 4 6 8 10 12 14 16 18 20
0
0.5
1
1.5
2
2.5
3
Sinusoidal amplitude I
a
   (µA)
TH
D
  (%
)
 
 
I
x
 = 30 µA
I
x
 = 130 µA
Fig. 7. THD measurement of the multi-segment approximation circuit.
ACKNOWLEDGMENT
The authors would like to thank the National Chip Im-
plementation Center (CIC) of the National Applied Research
Laboratories of Taiwan for technical support. The research is
supported by the National Science Council of Taiwan, under
Grant No. NSC100-2221-E-216-033.
REFERENCES
[1] M. Skrbek, and M. Snorek, ”Shift-add neural architecture,” Proc. 6th IEE
Int. Conference on Circuits and Systems, vol. 1, pp. 411-414, 1999.
[2] S. Marra, M. A. Iachino, and F. C. Morabito, ”High speed, programmable
implementation of a tanh-like activation function and its derivative for
digital neural networks,” Proceedings of International Joint Conference
on Neural Networks, pp. 506-511, 2007.
[3] M. Carrasco-Robles and L. Serrano, ”A novel CMOS current mode fully
differential tanh(x) implementation,” ISCAS, pp. 21582161, 2008.
[4] Y. Berg, S. Aunet, O. Naess, and M. Hovin, ”A novel low-voltage floating-
gate CMOS transconductance amplifier with sinh (tanh) shaped output
current,” The 8th IEEE International Conference on Electronics, Circuits
and Systems, vol. 3, pp. 1461-1464, 2001.
[5] C. A. De La Cruz-Blas, A. Lopez-Martin, and A. Carlosena, ”1.5-v mos
translinear loops with improved dynamic range and their applications to
current-mode signal processing,” IEEE Trans. Circuit Syst.-II, vol. 50,
pp. 918927, 2003.
[6] W. Liu, S. I. Liu, and S. K. Wei, ” CMOS differential-mode exponen-
tial voltage-to-current converter,” Analog Integrated Circuits and Signal
Processing, vol. 45, pp. 163168, 2005.
[7] M. Mottaghi kashtiban, A. Khoei, and K. Hadidi, ”A current mode, first-
order Takagi-Sugeno-Kang fuzzy logic controller, supporting rational-
powered membership functions,” IEICE Trans. Electron, vol. E90-C, pp.
12581266, 2007.
IEICE TRANS. ELECTRON., VOL.Exx–??, NO.xx XXXX 200x
1
PAPER Special Section on Electronic Displays
A CMOS Current-Mode S-Shape Correction Circuit with
Shape-Adjustable Control
Kuo-Jen LIN†,Member, Chih-Jen CHENG††, Hsin-Cheng SU†, and Jwu-E CHEN††, Nonmembers
SUMMARY A CMOS current-mode S-shape correction circuit with
shape-adjustable control is proposed for suiting different LCD panel’s char-
acteristics from different manufactures. The correction shape is divided
into three segments for easy curve-fitting using three lower order polyno-
mials. Each segment could be realized by a corresponding current-mode
circuit. The proposed circuit consists of several control points which are
designed for tuning the correction shape. The S-shape correction circuit
was fabricated using the 0.35 µm TSMC CMOS technology. The measured
input dynamic range of the circuit is from 0 µA to 220 µA. The -3 dB
bandwidth of the circuit is up to 262 MHz in a high input current region.
key words: TFT-LCD, S-shape correction, current-mode circuit, quadratic
circuit
1. Introduction
In the past decade, with the rapid increase in mobile cam-
eras, mobile phones can now capture and store still images
or moving pictures as digital files. As a result, there is a
significant difference in the color appearance when captured
images are displayed on a mobile LCD. Therefore, real-time
color-matching between mobile camera and mobile LCD in
a mobile phone needs to be considered to ensure a better im-
age quality [1], [2]. The color-correct visualizations of the
LCD displays become more and more important.
The electro-optical transfer function of an LCD display
is called S-shape curve. Previous works [3]–[6] used sev-
eral resistors and operational amplifiers to construct differ-
ent grey scale’s voltage for correcting the S-shape. In [7],
authors proposed an analog compensating S-shape circuit
which is composed of BJTs. Comparing to [3]–[6], the tech-
nology in [7] is more suitable for mobile device due to the
low circuit complexity. In [8], a new model was developed
for the S-shaped electro-optical transfer function of the LCD
device. However, due to different LCD panel’s spectral and
gamma characteristics at different manufacturers [9], one
should make different corrections. In [10], a CMOS current-
mode S-shape correction circuit with four selectable curves
was proposed to meet for four corrections. The authors
adopted a polynomial form to represent an S-shape and gen-
erated different shapes by adjusting two variables. However,
the CMOS current-mode circuit, including a multiplier, a
square circuit, and an approximation fractional-power cir-
Manuscript received January 1, 2011.
Manuscript revised January 1, 2011.
†The authors are with the Department of Electronics Engineer-
ing, Chung Hua University, Hsinchu, Taiwan
††The authors are with the Department of Electrical Engineer-
ing, National Central University, Taoyuan, Taiwan
DOI: 10.1587/transele.E0.C.1
cuit, has weaknesses in power, bandwidth, complexity, and
curvature.
In this paper, we also use the CMOS current-mode
circuits to design the S-shape correction function, because
the current-mode circuit has the advantages of higher band-
width, large dynamic range, and simplified circuitry. We di-
vide a pseudo S-shape correction curve into three segments.
Each segment has a corresponding circuit with adjustable
control points. By adjusting the control points, we can ob-
tain a suitable S-shape correction curve.
2. S-shape Correction Curves
A CRT display and an LCD display have electro-optical
transfer functions shown in Fig. 1, where the transfer func-
tion of an LCD is an S-shaped curve. As same as the
gamma correction curve shown in Fig. 1(a), Fig. 1(b) shows
an S-shape correction curve. Because different manufactur-
ers have different electro-optical characteristics, we can use
Fig. 2(a) to show some examples of different electro-optical
transfer functions. Similarly, Fig. 2(b) shows some exam-
ples of S-shape correction curves.
correction curve
s-shape curve
gamma curve
correction curve
(a) (b)
Input voltage
B
rig
ht
n
es
s
B
rig
ht
n
es
s
Input voltage
Fig. 1 (a) The electro-optical transfer function of a CRT display and its
correction curve. (b) The electro-optical transfer function of an LCD dis-
play and its correction curve.
The curves shown in Fig. 2(b) are not mathematical
functions, which are hard to describe by some polynomial
approximations. We observe that these curves rise quickly
on the high voltage part and low voltage part, but slowly on
the middle voltage part. Hence, we can certainly divide the
S-shape correction curves into three segments. Segment A,
B, and C are corresponding to the curve on high, low, and
middle voltage part, respectively. We observe that differ-
ent curves have different segment-curvatures and segment-
lengths. The curvature and length will be the important pa-
rameters for designing the circuit. Moreover, each segment
Copyright c© 200x The Institute of Electronics, Information and Communication Engineers
LIN et al.: A CMOS CURRENT-MODE S-SHAPE CORRECTION CIRCUIT WITH SHAPE-ADJUSTABLE CONTROL
3
0 50 100 150 200 250
0
20
40
60
80
100
120
140
160
180
Iin   (µA)
I sa
 
 
 
(µ
A
)
 
 
Ma3 = 10 µ m
Ma3 = 20 µ m
Ma3 = 30 µ m
Fig. 6 Different curvatures for different widths of Ma3 at Segment A.
Mi1
Iin
Vin Isb
Vout
Mi3
Mi2
Mb1
Mb2 Mb3
Ib
Imb If1
If2
Fig. 7 Curve bending circuit of Segment B.
0 50 100 150 200 250
−100
−90
−80
−70
−60
−50
−40
−30
−20
−10
0
Iin   (µA)
−
I sb
 
 
 
(µ
A
)
 
 
Mb3 = 10 µ m
Mb3 = 20 µ m
Mb3 = 30 µ m
Fig. 8 Different curvatures for different widths of Mb3 at Segment B.
mirror. When the outputs of curve bending circuits are com-
bined with the current-mirror, the curves in Fig. 6 and Fig. 8
are rotated. The linear characteristics and their rotating re-
sults are shown in Fig. 10 and Fig. 11, respectively. Fig-
ure 12 is the combined circuit of the bending circuit and the
rotating circuit, where Iout = Isa − Isb + Isc + Idc. The current
source Idc is used in DC level bias. Different size of Mc2
represents different rotation angle. The size of Mc2 is the
rotating factor.
Mi1
Iin
Vin Isc
Vout
Mi2
Mc1 Mc2Mi5
Mi6
Iin
Fig. 9 Curve rotating circuit constructed by simple current-mirrors.
0 50 100 150 200 250
0
10
20
30
40
50
60
70
80
90
Iin   (µA)
I sc
 
 
 
(µ
A
)
 
 
Mc2 = 1 µ m
Mc2 = 2 µ m
Mc2 = 3 µ m
Fig. 10 The linear characteristics of curve rotating circuit.
0 50 100 150 200 250
−40
−20
0
20
40
60
80
100
120
140
160
Iin   (µA)
I o
u
t  
 
(µ
A
)
 
 
Mc2 = 1 µ m
Mc2 = 2 µ m
Mc2 = 3 µ m
Fig. 11 Rotation results including Segment A and Segment B for differ-
ent widths of Mc3.
3.3 Curve Condensing Circuit
When we tune the width of Mi3 and Mi4 in Fig. 12, we
LIN et al.: A CMOS CURRENT-MODE S-SHAPE CORRECTION CIRCUIT WITH SHAPE-ADJUSTABLE CONTROL
5
Mi1
Iin
Vin
Iout
Vout
Mi3 Mib1
Mi2
Mx1 Mx3
Mx2 Mx4
Mb1
Mb2 Mb3 Mb4 Mbn
Vn
Ms1
Ms2 Ms3 Ms4 Msn
Mc1 Mc2 Mc3 Mcn
Ma2
Ma1 Ma3 Ma4 ManMi5
Mi6
MianMia1Mi4Mibn
Cn
C1
Fig. 15 An adjustable S-shape correction circuit with control points C1,C2, · · · ,Cn
put current level. The adjustable S-shape correction circuit
was fabricated by using the 0.35µm TSMC CMOS process.
The die photograph is shown in Fig. 17. The supply voltage
(VDD) is 3.3 V. Since the available instruments for the mea-
surement are in a voltage-mode, we use HSPICE to measure
the input voltage (Vin) for every input current in the design
stage. Then the input voltage can be applied to the inputs
of the fabricated chip. We measure and record the Vout for
the chip. Then we can obtain the Iout by comparing the Vout
in the HSPICE. Figure 18 shows the measured results. In
the experiment, we set the combination of (C1, C2, C3, C4,
C5, C6) = (0, 1, 0, 1, 0, 0) as s1, and the combination of
(1, 0, 1, 0, 1, 1) as s2, where 1 and 0 represent VDD and
GND, respectively. We observe s1 is more condensed then
s2, and s2 is less bended than s1, which prove the control
functions of (C1, C2, C3, C4, C5, C6). Therefore, if we add
more control points, we can flexibly match different S-shape
from different manufactures by using bending, shifting, ro-
tating, and condensing. Furthermore, we could overcome
the errors due to process variations by adjusting some con-
trol points. For conventional methods like [3]–[6], which
use variable resistors to adjust the S-shape considering the
functions of bending, shifting, and rotating but not includ-
ing the condensing function. Moreover, the mass resistors
in conventional methods increase the chip size. The con-
ventional methods use DACs to express the electro-optical
transfer functions [3]–[6], which are not related to the input
Fig. 17 Die photograph.
dynamic range. The resolution of DAC represents the curve
resolution of S-shape correction. In analog circuit design,
however, it is important for S-shape correction with large in-
put dynamic range which will increase the tuning resolution
of S-shape correction curve. It is observed in Fig. 18, the
input dynamic range of Iin is from 0 µA to 220 µA, which is
large in analog electro-optical transfer function for compar-
ing to the voltage-mode range from 1.35 V to 1.75 V in [7].
For observing the frequency responses, we add a small
signal 20sin2pi f0t (denoted by Isin with an unit of µA) to the
input of Iin. By changing f0 from 1 KHz to 300 MHz, we
could measure and record the AC output denoted by I f out.
As the amplitudes of I f out and Isin are denoted by A f out and
Asin, respectively, we can calculate each transfer function of
20 log( A f outAsin ). If the maximum value of 20 log(
A f out
Asin
) is set to
LIN et al.: A CMOS CURRENT-MODE S-SHAPE CORRECTION CIRCUIT WITH SHAPE-ADJUSTABLE CONTROL
7
103 104 105 106 107 108
−5
−4
−3
−2
−1
0
1
Hz
dB
 
 
Iin=25µ A
Iin=100µ A
Iin=175µ A
Fig. 19 Bandwidth measurement results for Iin being 25 µA, 100 µA, and
175 µA.
0
200
400
600
800
0 0.5 1
0
200
400
600
800
0 0.5 1
(a) (b)
Fig. 20 The measured results of S-shape correction. (a) uncorrected im-
age and its histogram. (b) S-shape corrected image and its histogram.
5. Conclusion
In this paper, we have proposed a novel S-shape correction
curve generator based on a CMOS current-mode circuit. In
particular, due to different S-shape LCD manufactures, one
can adjust the shape form by switching the values of control
points. The circuit design and simulation results have been
presented step by step. We can observe that the shape form
generation is very flexible. Furthermore, we have measured
the test data and presented its performance from the fabri-
cated chip. In the future, we could expect the reliability of
generating a shape by setting more control points for com-
pensating process variations.
Acknowledgments
The authors would like to thank the National Chip Imple-
mentation Center (CIC) of the National Applied Research
Laboratories of Taiwan for chip fabrication. The research is
supported by the National Science Council of Taiwan, under
Grant No. NSC100-2221-E-216-033.
References
[1] Sony Corporation, Colour Matching Technology: BVM-L Series
LCD Master Monitor, Sony Corporation, 2009.
[2] A. Molna´r and K. Samu, The Examinations of the LCDMonitor Pa-
rameters in Case of the RGB Basic Colour-Stimuli, XI International
PhD Workshop, pp. 190-192, 2009.
[3] P. M. Lee and H. Y. Chen, Adjustable Gamma Correction Circuit for
TFT LCD, IEEE International Symposium on Circuits and Systems,
vol. 1, pp. 780-783, 2005.
[4] M. Olivieri, R. Mancuso, and F. Riedel, A Reconfigurable, Low
Power, Temperature Compensated IC for 8-Segment Gamma Cor-
rection Curve in TFT, OLED and PDP Displays, IEEE Transactions
on Consumer Electronics, vol. 53, no. 2, pp. 720-724, 2007.
[5] C. W. Park and J. Y. Ryu, Development of a New Automatic Gamma
Control System for Mobile LCD Applications, Displays, vol. 29, pp.
393-400, 2008.
[6] D. J. R. Cristaldi, S. Pennisi, and F. Pulvirenti, Liquid Crystal Dis-
play Drivers: Techniques and Circuits, Springer, 2009.
[7] Y. Li, C. Wang, X. Lai, and X. Li, Nonlinear Compensating Circuit
for LCD Driver, 5th International Conference on ASIC, vol. 1, pp.
631-634, 2003.
[8] Y. Kwak and L. MacDonald, Characterisation of a Desktop LCD
Projector, Displays, vol. 21, issue 5, pp. 179-194, 2000.
[9] T. Florin and N. E. Mastorakis, An Overview about Monitors Colors
Rendering, WSEAS Transactions on Circuits and systems, vol. 9,
issue 1, pp.32-41, 2010.
[10] K. J. Lin, C. J. Cheng, S. F. Chiu, and J. E Chen, CMOS Current-
Mode Selectable S-Shape Correction Circuit, Proceedings of the 9th
WSEAS Int. Conference on Instrumentation, Measurement, Circuits
and Systems, China, pp. 70-75, 2010.
[11] A. Motamed, C. Hwang, and M. Ismail, CMOS Exponential
Current-to-Voltage Converter, Electron. Lett., vol. 33, no. 12, pp.
998-1000, 1997.
[12] Texas Instruments, Multi-Channel LCD Gamma Correction
Buffer-Check for Samples: BUF07703, BUF06703, BUF05703,
SBOS269CMARCH-2003REVISED, April 2010.
 
國科會補助專題研究計畫出席國際學術會議心得報告 
                               日期： 101 年 8 月   15 日 
一、參加會議經過 
    電子學與光電子學國際會議（International Conference on Electronics and 
Optoelectronics）為舉辦一次的國際學術研討會，今年為第二屆於 2012 年 7 月 27 日至 7
月 30 日在中國瀋陽舉行，會議開始第一天 (7/27)，午後 2 點進入會場前往註冊；註冊時
間至當天下午的 5 點。    
會議的第二天(7/28))主要的議程為分為上午 OEMR 2012 與下午 ICEOE 2012 會議。在
OEMR 會議討論 CCD、EMCCD 與 PLC 等議題，下午為 ICEOE 會議討論此次所發表利用
多段近似法之電流模式雙曲正切 Sigmoid 函數，每場演講後的討論正是各個學者意見互相
交流的時間，可以相互激發思慮，讓我受益良多。晚間餐參與大會舉辦的歡迎晚餐，並感
謝會議人員的盛情招待。 
計畫編號 NSC 100－2221－E－216－033－ 
計畫名稱 使用多段曲線擬合方法實現 CMOS 電流模式函數 
出國人員
姓名 鄭智仁 
服務機
構及職
稱 
中央大學電機所博士班 
會議時間 
101年 7月 27日至 
101 年 7 月 29 日 會議地
點 
中國瀋陽 
會議名稱 
(中文)電子學與光電子學國際會議(ICEOE 2012) 
(英文)International Conference on Electronics and Optoelectronics 
發表題目 
(中文)利用多段近似法之電流模式雙曲正切 Sigmoid 函數 
(英文)CMOS Current-Mode Hyperbolic Tangent Sigmoid Function 
Implementation Using Multi-Segment Approximation. 
附件四 
  
ICEOE2012 and OEMR2012 CONFERENCES 
SCHEDULE 
 
 
 
 
2012 2nd International Conference on Electronics and Optoelectronics  
(ICEOE 2012) 
 
2012 International Meeting on Opto-Electronics Engineering and Materials 
Research (OEMR 2012) 
 
 
 
 
 
 
 
 
 
Tianlun Regar Hotel Shenyang 
Shenyang, China 
July 27 - 28, 2012 
 
 
 OE0109 Study On Control Technology of Double-fed Motor Based On PLC and General Invert 
 Chengwu Lin, Jialin Shi and Bo Lu 
OE0110 
Research on Grid-connected Inverter Based on Current Track Control in Wind Generation 
System 
 Chengwu Lin, Qiguang Jiang and Li Ma 
OE0568 A new Coupled PDE Method for Image Processing 
 Maolin Wang, Jun Yue, Pan Huang and Chaoshuai Song 
OE0214 
Comparison of Gold and Silver Nanoparticles as Active Substrates for SERS Spectra 
Measurements on Liver Cancer Cells 
 Chen Qian,Shupeng Liu,Na Chen,Zhenyi Chen and Qianqian Geng 
OE0202 Generation of Multi-Atom W States in Microtoroidal Cavity-Atom System 
 Yu Huang 
OE0165 A Method for Lidar Data Conversion and Standardization 
 Hao Chen, Dengxin Hua, Yikun Zhang, Zhirong Zhou, Shichun Li and Li Wang 
OE0233 
The structural design of combined absorber composed by MPP and multi-layer porous 
material based on VA One 
 Xiuhua Duan, Huanqin Wang,Wenjuan Sun and Deyi Kong 
OE0537 Studying  Relative Error Formulae  of Surveying Textbooks of Chinese Colleges 
 Yonghe Deng 
OE0245 Dynamically manipulating beam with metallic nano-optic lens containing liquid crystal 
 Jicheng Wang, Xia Zhou,Jie Gao,Zhetao Xu, Lin Sun and Xiao Jin 
OE0550 
Solvothermal method preparation of nano Y2O2SEu3+ and research of luminescence 
property 
 Lu Lu and Zhilong Wang 
 
 
12：00 - 13：30 Lunch Break 
 
 Liao  
CE0273 
The  three-dimensional analysis of light scattering characters for Rayleigh particles  
on/below the wafer 
 Lei Gong, Zhensen Wu  
CE0282 Simulation of Laser Beam Scattering from Complex Targets in the Near Field 
 Jiaxuan Lin, Zhensen Wu, Xiang Su, Biao Wang 
CE0284 
The Analysis of Influencing Factors of One Dimensional Range Profiles and Surface 
Elements Imaging Method to Arbitrary Target   
 Yuan Mou, Zhensen Wu, Zhuo Chen, Hanlu Zhang 
CE0285 Scattering Properties of the Higher-Order Hermite Gaussian Beam 
 Tan Qu, Zhensen Wu, Haiying Li, Zhengjun Li 
CE0287 
Extraordinary Electromagnetic Scattering of Plane Wave by Double Negative Coated 
Sphere 
 Yan’e Shi, Zhensen Wu, Hongfei Tian, Zhengjun Li  
CE0288 
Scattering Characteristics of Complex Target from Solar Irradiance and Sky-ground 
Background Radiance in Infrared Spectrum 
 Xing Guo, Zhensen Wu, Longxiang Linghu, Yufeng Yang 
CE0289 
Scattering of Two-Dimensional Sea Surface at Low Grazing Angles with Physical Optics 
Method 
 Zhuo Chen, Zhensen Wu, Yong Zhang, Jingjing Xue, Wenhua Ye   
CE0292 The Acceleration of PO Based on CUDA 
 Xiang Su, Zhensen Wu, Jiaxuan Lin and Xiaobing Wang  
CE0293 Decomposing the Non-Gaussian Surface in Sum of Gaussian Surfaces 
 Zhangxing Qi, Zhensen Wu, Ziwen Yu, Haiying Li 
CE0294 Polarization Properties of Scattered Fields from a Chiral Sphere 
 Qingchao Shang, Zhensen Wu, Peng Zhao, Zhengjun Li 
CE0311 Phase-only Beam Optimization for GaAs Optical Waveguide Phase Array 
 Yong Zhang 
CE0314 Path loss of Non-Line-of-Sight single-scatter model  
 Tairong Wang, Lu Bai, Zhensen Wu 
CE0316 
Adaptive Interleaving Method and its Application to Free Space Optical Communications 
through Atmospheric Turbulence Channel 
 
Zhonghua Yang, Qiwen Ran, Jing Ma, Liying Tan, Shichen Wu, Qingfeng liu, Huixi 
Liao   
 
 
18：00 - 19：30 Buffet Dinner 
 
−3 −2 −1 0 1 2 3
−2
−1.5
−1
−0.5
0
0.5
1
1.5
2
x
ta
nh
(x)
 
 
Ideal tanh(x)
Taylor series to the term of  x3
Taylor series to the term of  x5
Taylor series to the term of  x7
multi−segment approximations
Fig. 1. Mathematical simulation results for different approximations.
M1
M2
xI 1I
2I
cV
Fig. 2. Simple current-mode quadratic circuit.
2.0, respectively. The proposed multi-segment approximation
reveals the wide input dynamic range of 5 for relative error
less than 3%. Obviously, our proposed method outperforms
the traditional methods.
III. MULTI-SEGMENT APPROXIMATION CIRCUIT
The simulation result of Fig. 1 gives the good way to imple-
ment the tanh function by using four second-order polynomial
functions. We will illustrate how to realize and control the four
segments by using CMOS current-mode circuits.
A. Quadratic Circuit
We can generate a current-mode quadratic function by using
a simple circuit shown in Fig. 2 [11]. From [12], we have two
current-mode functions:
I1 = K(
VDD − |Vtp| − Vtn
2
+
Ix
2K(VDD − |Vtp| − Vtn) )
2 (7)
I2 = K(
VDD − |Vtp| − Vtn
2
− Ix
2K(VDD − |Vtp| − Vtn) )
2 (8)
Mn1 Mn2
Mp1 Mp2
Vout1
Vref Mnb
Vx VtIx
It
Mvxp
Mvxn
Mvtp
Mvtn
Mivp
Mivn
Vout11
Fig. 3. Segment controller.
and
Vc =
VDD − |Vtp|+ Vtn
2
− Ix
2K(VDD − |Vtp| − Vtn) (9)
Obviously, I1 and I2 are the quadratic functions of Ix. As Ix
increases, Vc will decrease for observing Eq. (9). If we set
V0 =
VDD−|Vtp|−Vtn
2 , then
I1 = KV
2
0 (1 +
Ix
4KV 20
)2 (10)
I2 = KV
2
0 (1−
Ix
4KV 20
)2 (11)
If we set I0 = KV 20 and Ix = 4I0x. Equation (10) will be
I1 = I0(1 + x)
2 (12)
and (11) will be
I2 = I0(1− x)2 (13)
B. Segment Controller
We need to design a control circuit to switch the services
of Eqs. (3), (4), (5), and (6). Therefore, we could design the
segment controller shown in Fig. 3 based on a differential
amplifier. If Ix > It, we have Vx < Vt, which make Vout1
near ground (GND) and Vout11 near V DD. Conversely, if
Ix < It, we have the results of Vout1 near V DD and Vout11
near GND. For controlling four segments (s1, s2, s3, and
s4), we need to construct a four-segments controller shown in
Fig. 4. The Vout1, Vout2, and Vout3 are controlled by It1, It2,
and It3, respectively. A corresponding control table is shown
in Table I.
In Fig. 4, the s1, s2, s3, and s4 segment circuits realize the
Eqs. (3), (4), (5), and (6), respectively. The drain current of
Mep12 is the scale of I0(1 + x)2, we could size Mep12 and
tune Ib1 to make I0tanh1(x) shown in Eq. (3). The s2 segment
circuit also follows the sizing and tuning method. The s3 and
s4 segment circuits will have I0tanh3(x) and I0tanh4(x).
The I0tanh3(x) is made by AI0(1+x)2−BI0(1−x)2, where
A and B are the scale of Mep32 and Men32, respectively,
which are determined by Eq. (5) and tuned by observing the
results of simulation. The similar work should apply on the
generation of I0tanh4(x).
TABLE I
FOUR-SEGMENTS CONTROL TABLE.
Segment s1 on s2 on s3 on s4 on
(Ix < It3) (It3 ≤ Ix < It2) (It2 ≤ Ix < It1) (Ix ≥ It1)
Vout11 low low low high
Vout12 high high high low
Vout21 low low high high
Vout22 high high low low
Vout31 low high high high
Vout32 high low low low
−300 −200 −100 0 100 200 300
−40
−30
−20
−10
0
10
20
30
40
 I
x
   (µA)
I o
u
t  
(µ
A
)
 
 
ideal
multi−segment method
Fig. 5. Simulation results for current-mode tanh function.
10−1 100 101 102 103
−91
−90
−89
−88
−87
−86
−85
−84
MHz
dB
 ( m
ea
su
red
 at
 I o
u
t )
Fig. 6. Bandwidth measurement of the multi-segment approximation circuit.
The proposed multi-segment approximation circuit has been
verified with wide input dynamic range from −256µA to
240µA for relative error less than 3%, which is wider than
the Taylor’s method of expanding series to the term of x7.
Moreover, we measure −3dB bandwidth of 138MHz. The
THD measurements are less than 2.9% for large sinusoid
amplitude.
2 4 6 8 10 12 14 16 18 20
0
0.5
1
1.5
2
2.5
3
Sinusoidal amplitude I
a
   (µA)
TH
D
  (%
)
 
 
I
x
 = 30 µA
I
x
 = 130 µA
Fig. 7. THD measurement of the multi-segment approximation circuit.
ACKNOWLEDGMENT
The authors would like to thank the National Chip Im-
plementation Center (CIC) of the National Applied Research
Laboratories of Taiwan for technical support. The research is
supported by the National Science Council of Taiwan, under
Grant No. NSC100-2221-E-216-033.
REFERENCES
[1] M. Skrbek, and M. Snorek, ”Shift-add neural architecture,” Proc. 6th IEE
Int. Conference on Circuits and Systems, vol. 1, pp. 411-414, 1999.
[2] S. Marra, M. A. Iachino, and F. C. Morabito, ”High speed, programmable
implementation of a tanh-like activation function and its derivative for
digital neural networks,” Proceedings of International Joint Conference
on Neural Networks, pp. 506-511, 2007.
[3] M. Carrasco-Robles and L. Serrano, ”A novel CMOS current mode fully
differential tanh(x) implementation,” ISCAS, pp. 21582161, 2008.
[4] Y. Berg, S. Aunet, O. Naess, and M. Hovin, ”A novel low-voltage floating-
gate CMOS transconductance amplifier with sinh (tanh) shaped output
current,” The 8th IEEE International Conference on Electronics, Circuits
and Systems, vol. 3, pp. 1461-1464, 2001.
[5] C. A. De La Cruz-Blas, A. Lopez-Martin, and A. Carlosena, ”1.5-v mos
translinear loops with improved dynamic range and their applications to
current-mode signal processing,” IEEE Trans. Circuit Syst.-II, vol. 50,
pp. 918927, 2003.
[6] W. Liu, S. I. Liu, and S. K. Wei, ” CMOS differential-mode exponen-
tial voltage-to-current converter,” Analog Integrated Circuits and Signal
Processing, vol. 45, pp. 163168, 2005.
[7] M. Mottaghi kashtiban, A. Khoei, and K. Hadidi, ”A current mode, first-
order Takagi-Sugeno-Kang fuzzy logic controller, supporting rational-
powered membership functions,” IEICE Trans. Electron, vol. E90-C, pp.
12581266, 2007.
國科會補助計畫衍生研發成果推廣資料表
日期:2012/10/27
國科會補助計畫
計畫名稱: 使用多段曲線擬合方法實現CMOS電流模式函數
計畫主持人: 林國珍
計畫編號: 100-2221-E-216-033- 學門領域: 積體電路及系統設計
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
