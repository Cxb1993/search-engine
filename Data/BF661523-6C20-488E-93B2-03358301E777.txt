 i
目  錄 
 
圖目錄........................................................................................................................................... ii 
表目錄..........................................................................................................................................iii 
中文摘要....................................................................................................................................... 1 
Abstract ........................................................................................................................................ 1 
一、緣由與目的........................................................................................................................... 2 
二、文獻探討............................................................................................................................... 6 
三、研究方法............................................................................................................................... 8 
3.1 Fab design procedure: an interbay view (FDP I) ............................................................ 8 
3.1.1 Data collection ..................................................................................................... 8 
3.1.2 Determination of the required number of machines ............................................ 8 
3.1.3 Machine grouping and allocation....................................................................... 11 
3.1.3.1 Determination of the number of machine groups of each machine type 12 
3.1.3.2 Determination of the number of machines in each group ....................... 12 
3.1.3.3 Assignment of machine groups to bays .................................................. 12 
3.1.3.4 Assignment of machine groups to process routines................................ 13 
3.1.4 Determination of interbay flow matrix .............................................................. 13 
3.1.5 Determination of bay dimensions and location.................................................. 13 
3.1.6 Determination of interbay and intrabay distance matrices................................. 15 
3.1.7 Determination of the required number of imhs vehicles.................................... 18 
3.1.8 Determination of the average wafer moving distance ....................................... 19 
3.2 Fab design procedure: an intrabay view (FDP II)......................................................... 20 
3.2.1 Data collection ................................................................................................... 20 
3.2.2 Determination of machine group flow matrix.................................................... 20 
3.2.3 Determination of machine group locations within each bay.............................. 21 
3.2.4 Determination of machine group-stocker distance matrix within each bay....... 21 
3.2.5 Determination of machine group distance matrix within each bay ................... 21 
3.2.6 Determination of the required number of vehicles within each bay .................. 22 
3.2.7 Determination of the average wafer move distance at all bays.......................... 22 
3.3 A case study .................................................................................................................. 22 
3.3.1 FDP I .................................................................................................................. 22 
3.3.2 FDP II................................................................................................................. 29 
3.4 Conclusions ................................................................................................................... 32 
四、參考文獻............................................................................................................................. 32 
五、計畫成果自評..................................................................................................................... 34 
 
 iii
表目錄 
 
Table 1.  Notation list.................................................................................................................. 9 
Table 1.  Notation list (cont.) .................................................................................................... 10 
Table 2.  Four example rules of thumb for wafer fab design based on interbay flow intensity, 
facility system relationship, and average wafer moving distance............................. 19 
Table 3.  Product mix of case study .......................................................................................... 23 
Table 4.  Equipment data of case study .................................................................................... 23 
Table 5.  Experimental design used to evaluate the performance of FDP ................................ 24 
Table 6.  The resulting required number of equipment in the case study ................................. 25 
Table 7.  The resulting machine groups in the case study ........................................................ 25 
Table 8.  The resulting performance of four layout alternatives............................................... 27 
Table 9.  The resulting performance of four layout alternatives and product mixes with respect 
to average moving distance per wafer and the required number of IMHS vehicles. 28 
Table 10. Experimental design used to evaluate the performance of FDP ................................. 29 
Table 11. The resulting required number of vehicles for intrabay transportation in the case 
study .......................................................................................................................... 30 
Table 12. The resulting performance of four layout alternatives for three products with respect 
to average moving distance per wafer at all bays (km)............................................. 30 
 
 
  2
一、緣由與目的 
Wafer fab design is a strategic long-term decision.  It affects the system performance in a 
much more significant way than medium-term decisions (such as machine grouping) and short-term 
decisions (such as scheduling and dispatching) do.  A well designed fab may simplify the 
decisions in both tactical level and operational level.  In recent years, new wafer fabs for the 
manufacturing of 12-inch (also called 300 mm) wafers have been built worldwide with a typical 
investment of about US$ 3 billion for each fab.  Furthermore, new wafer fabs for the 
next-generation of 18-inch wafers are expected to be built in 2013 [ITRS 2007]. 
A wafer fabrication plant is a relatively compact factory with relatively long process flows.  It 
requires hundreds of pieces of machines belonging to scores of machine types.  Wafer fabrication 
typically requires 100-1,000 operation steps with a total cycle time of several weeks and a total 
traveling distance of 5 to 10 miles.  Circuitry is grown in layers on the top of a silicon wafer, and it 
is common for a wafer to have more than 20 layers. 
A typical wafer fab is a rectangular building with a central aisle and bay-chase structures on 
both sides of the aisle.  It is generally a process layout where machines of similar function are 
located in one function area.  As shown in Figure 1, areas for major fabrication operations include 
photolithography, etching, ion implantation, diffusion, and metal deposition/oxidation.  Wafer fabs 
may provide different functions.  Each functional area may be further divided into several bays, 
depending on the number of machines to be located in the area.  On one hand, a foundry fab 
applies a produce-to-order inventory policy and may simultaneously manufacture hundreds of types 
of application-specific IC's (ASIC's).  On the other hand, a commodity fab such as a DRAM fab 
applies a produce-to-stock inventory policy and may simultaneously produce only several types of 
products.  However, fabs of both types have a process layout leading to higher flexibility, simpler 
utility distribution system, lower equipment investment, and better equipment backup plan than a 
product layout has.   
Wafers are moved through the fab in lots typically consisting of 25 wafers stored in a pod of a 
container called a cassette.  As the total weight of the cassette and 25 pieces of 12” wafers exceeds 
the reasonable loading of an operator, Automated Material Handling Systems (AMHS) are typically 
used in 12” wafer fabs.  An interbay AMHS is located in the central aisle of the fab to provide 
interbay transportation.  Overhead shuttle (OHS) and monorail are typical interbay transportation 
systems used to move wafers between stockers.  An intrabay AMHS is located in the central aisle 
of each bay.  Intrabay transportation is served by overhead hoist transporter (OHT), 
automated-guided vehicles (AGVs), or person-guided vehicles (PGVs).  These are used to move 
wafers between production machines and stockers within each bay.  At the intersection of interbay 
AMHS and intrabay AMHS, there is a stocker that serves as a buffer and an interface between 
interbay and intrabay transportations. 
The design of wafer fabs includes layout design, handling system design, and facility system 
design.  Each design is complex and difficult within itself.  The integration of these designs has 
even higher complexity and difficulty.  Fab design is crucial to the productivity and 
competitiveness of a fab, since it affects important performance measures such as lot cycle times, 
work-in-process (WIP) levels, lot moving distances, equipment utilization, and system throughput.   
  4
Planning Designing Building Installing Production
Cost of Making Design Changes
$
 
Figure 2.  Cost of making design changes in different stages of a project [Tompkins et al. 2003] 
 
In phase I of this project (for the first year), as shown in figure 3, FDP I with an interbay 
viewpoint was proposed to conduct quick calculation to develop and evaluate initial fab design 
alternatives [Chen et al. 2007].  A series of practical formulae were presented to sequentially 
determine the following design parameters from an interbay point of view: the required number of 
machines, machine grouping and allocation, interbay flow matrix, bay dimension and location, 
interbay distance matrix, the required number of vehicles for interbay transportation, and the 
average wafer move distance.     
In phase II of this project (for the second year), as shown in figure 4, more practical formulae 
will be presented in FDP II to sequentially determine the following design parameters from an 
intrabay viewpoint: machine group flow matrix, machine group locations within each bay, machine 
group-stocker distance matrix within each bay, machine group distance matrix within each bay, the 
required number of vehicles within each bay, and the average wafer move distance at all bays.  
FDP II can be implemented sequentially after FDP I.  The proposed equations can be formulated 
by the use of spread sheet software such as Excel or be programmed by the use of programming 
languages such as C.  A case study is used to evaluate the effectiveness and efficiency of FDP II.  
Results demonstrate that FDP II can quickly calculate the required number of vehicles at each bay 
and related fab design parameters.   
 
  6
 within Each Bay  
Implementation of  
FDP’s Interbay Part
Calculation of Machine Group-
Stocker Distance Matrix
Determination of the Required 
Number of Vehicles 
Practical Limitation 
Space Requirement 
Space Available 
Modification Consideration 
Calculation of Average
Wafer Move Distance at All Bays
Calculation of  
Machine Group Flow Matrix
Determination of Machine  
Group Locations within Each Bay 
Calculation of  
Machine Group Distance Matrix
Data Collection of 
Products, Quantities, Routines, 
Machines, Vehicles 
Start 
Satisfied? 
End 
Y 
N
 within Each Bay 
within Each Bay 
within Each Bay 
 
Figure 4.  Structure of FDP II with an intrabay viewpoint 
 
二、文獻探討 
Muther (1973) proposed Systematic Layout Planning (SLP) Procedure and Apple (1977) 
proposed Plant Layout Procedure.  These are pioneer research of facility planning.  Tompkins et 
al. (2003) summarized several quantitative algorithmic approaches based on material flow 
intensities or closeness ratings.  However, these procedures and algorithms are designed for 
general facility planning.  A wafer fab differs from other manufacturing facilities in terms of long 
  8
mm wafer fab. 
 
三、研究方法 
3.1 Fab design procedure: an interbay view (FDP I) 
The proposed FDP I (see Figure 3) can be used to quickly develop and evaluate initial fab 
design alternatives, based on a series of practical formulae.  FDP I sequentially determines the 
following design parameters from an interbay point of view: the required number of machines, 
machine grouping and allocation, interbay flow matrix (expressed as a from-to chart), bay 
dimension and location, interbay distance matrix (expressed as a from-to chart), the required 
number of vehicles in interbay material handling system, and the average wafer moving distance.  
Table 1 defines the notations used in this research and the following sections will discuss the details 
of FDP I. 
With FDP I, fab designers can quickly change model parameters (e.g., product mixes and the 
number of machines) to answer “what-if” questions for actual or potential changes.  Decision 
makers can then evaluate the performance of layout alternatives and select the best one.  It is 
necessary to systematically review a broad range of possible layout scenarios, since the fab 
flexibility (e.g., with respect to product, process, quantity, technology, and expansion) is an 
important performance index of fab design.   
 
3.1.1 Data collection 
FDP I uses the following data to determine fab design parameters: products, quantities, 
routines, machines, and vehicles.  Specific data items are defined in the parameters of the 
equations presented in this paper.  It is noted that the required data may not always be available 
and, therefore, fab designers need to estimate unavailable data.  To simplify the formulae 
derivation, each product is assumed to have only a single process routine in this research.  One 
type of product with alternative routines can be treated as different types of products (by 
considering the probability of alternative routines), each with a single process routine and its 
demand can be calculated according to the probability.   
 
3.1.2 Determination of the required number of machines 
The required number of machines of each type is one of the most important design parameters 
to be determined at the beginning of a fab design.  The accuracy of this parameter significantly 
affects the fab performance, since insufficient machines result in production bottlenecks but 
excessive machines lead to a waste of machine investment.   
As shown in Equation (1), the availability of one type m machine Jm is first measured in terms 
of its mean time between failures (MTBFm), mean time to repair (MTTRm), mean time between 
preventive maintenance (MTBMm), and mean time to conduct a preventive maintenance (MTTMm).   
 
( )( )mmmm
mm
m MTTMMTBMMTTRMTBF
MTBMMTBFJ ++=
*  (1) 
 
 
 
  10
Table 1.  Notation list (cont.) 
N0  required number of IMHS vehicles 
Nm required number of type m machines 
P0 speed of IMHS 
Pi,j,m standard processing time per wafer of j-th step of a type i product at a type m 
machine; Pi,j,m is calculated by dividing the batch processing time by Zi,j,m 
Qi required number (in number of wafers) of type i products per month 
Ri,j,m average rework rate of j-th step of a type i product at a type m machine 
Si total number of steps in the production routine of a type i product 
T0 standard transfer setup time (including loading or unloading time) of one wafer at an 
IMHS vehicle at beginning or end of an interbay transfer; T0 is calculated by 
dividing a vehicle's transfer batch setup time by Z0 
Tg type of machines in group g 
Ti,j,m standard machine setup time per wafer of j-th step of a type i product at a type m 
machine; Ti,j,m is calculated by dividing the batch machine setup time by Zi,j,m 
Ui,j average scrap rate of j-th step of a type i product in steady operations 
U0 The expect utilization of one IMHS vehicle 
Um The expect utilization of one type m machine 
Vi,j bay where machine group processing j-th step of a type i product is located 
WT total width of fab 
XBb X coordinate of centroid of bay b 
YBb Y coordinate of centroid of bay b 
Yi line yield of type i products in steady operations 
Z0 transfer batch size at IMHS 
Zi,j,m batch size (in number of wafers) of j-th step of a type i product at a type m machine 
 
The required number of type m machines Nm can be calculated by Equation (2).  In the 
denominator of the right hand side (RHS) of this equation, Hm shows the amount of available 
processing time (i.e., the design capacity) of one type m machine per month.  Em indicates the 
expected performance of one type m machine, and it may decrease as the machine ages.  Cm 
denotes the design capacity buffer of one type m machine considering possible capacity loss in the 
operation.  The multiplication of Hm, Em, and Jm indicates the effective available time of one type 
m machine per month.   
 
( )( )
( )mmmm
I
i
S
j mji
mjimjimjimji
i
i
m CJEH
R
ATAP
Y
Q
N
i
−
−
+
=
∑ ∑
= =
1
11 1 ,,
,,,,,,,,
 (2) 
 
In the numerator of the right hand side of Equation (2), Pi,j,m and Ti,j,m indicate standard 
processing time and setup time per wafer of j-th step of a type i product at a type m machine, 
respectively.  These two variables are calculated by dividing the batch processing time and batch 
setup time by batch size Zi,j,m, respectively.  It is noted that a machine is occupied during machine 
setup, and a processing step can start only after the completion of the setup.  Ai,j,m denotes an 
  12
3.1.3.1 Determination of the number of machine groups of each machine type 
In a fab, key machines providing major fabrication functions are expensive, such as 
photolithography, etching, ion implantation, diffusion, and metal deposition/oxidation.  One major 
fabrication function may be supported by several types of key machines.  For example, 
photolithography is supported by coaters, steppers, scanners, and developers.  To maximize fab 
flexibility and to minimize machine investment, each type of key machine should form only one 
group, and different key machine groups supporting one major function should be located in the 
same bay.  However, for each type of key machine, when the number of machines increases due to 
capacity requirement, several groups should be formed and located in different bays since the space 
in one bay is limited.   
Non-key machines, including tube cleaners, part cleaners, and metrology instrument, are 
relatively inexpensive and relatively small.  Normally each type of tube cleaner and part cleaner 
forms only one group, and these groups are located in an isolated bay due to safety concerns.  
Each type of metrology instrument can be divided into several groups and located in different bays 
to reduce the wafer moving distance.  The grouping of metrology instrument can be determined by 
the following rule-of-thumb.  If one type of metrology instrument frequently immediately follows 
another type (say m) of machine (either key or non-key machines) in process routines, this type of 
instrument should form a group and be located in the same bay with each group of type m machines.  
Otherwise, this type of instrument can form only one group and be located in one bay.   
 
3.1.3.2 Determination of the number of machines in each group 
As calculated in Equation (5), Mg denoting the number of machines in group g can be initially 
calculated by the ratio of NTg, the number of machines of type Tg to GTg the number of groups of 
this type.  The formation of machine groups of identical size is due to the similarity of bays 
providing the same function.  The size of each group can later be adjusted according to the 
interbay flow intensity after the assignment of each machine group to a bay and the assignment of 
machine groups to process routines.   
 
g
g
T
T
g G
N
M =  (5) 
 
3.1.3.3 Assignment of machine groups to bays 
The assignment of each machine group to a bay is straightforward:  assigning one machine 
group of a type to each bay providing a related major function.  When groups of the same machine 
type are of different sizes, a large group should be assigned to a bay with a large flow intensity.   
Clustering methodology and production flow analysis (Chan and Milner 1982, Tompkins et al. 
2003) based on the concept of group technology can also be used to determine the number of 
machine groups of each machine type, the number of machines in each group, and the assignment 
of groups to bays.  For example, Direct Clustering Algorithm (Chan and Milner 1982) first list 
products and machines in rows and columns on a machine-product matrix.  An element of the 
matrix is marked “1” if the product of that element's row is processed by the machine in that 
element's column.  Ranking is conducted in each row and column by the summation of the number 
of occurrences of the “1's.”  The rows and columns of this matrix are then sorted in descending 
order by ranked values.  Finally, clustered machine cells are formed based on sequential moves of 
rows and columns to the top and left of the matrix.  Machines of a clustered cell can be located in 
a bay.   
  14
 
Photolithography 
Etching 
Diffusion 
Ion Implantation 
I MHS
A
1
I 
A
A 
A 
1
1
1 
1 
I 
I E
E 
I 
1
1 
1 
2 
1
Deposition/ 
Oxidation
A
1A 
1 
A 
1 I 
1 I 
1 
A
E
I
O
U
X
Absolutely necessary 
Especially important 
Important
Ordinary closeness 
Unimportant
Undesirable
CLOSENESSValue
1
2
Material flow
Use of similar chemical and gas
Code REASON
 
Figure 6.  An example relationship chart for wafer fab design 
 
A relationship diagram (e.g., Figure 7) can be drawn based on the relationship chart.  Bays 
with A relationships are first drawn with four connecting lines.  They are close to each other.  
The E's are then added with three connecting lines.  The bays are spaced farther apart.  The I's, 
the O's, and the U's are added sequentially.  Finally, bays with an X rating are added and the 
diagram is rearranged to a final “best fit” form.  On the basis of relationship diagram and space 
requirement of each bay, an initial layout alternative such as Figure 1 can be developed.  The 
dimension of each bay can be adjusted according to the available fab space.   
 
Photolithography Etching
Deposition/ 
Oxidation
Ion Implantation
Diffusion
IMHS
 
Figure 7.  An example relationship diagram for wafer fab design 
 
  16
[ ]
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎣
⎡
==
),(...)2,()1,(
......
),2(...)2,2()1,2(
),1(...)2,1()1,1(
),(
intintint
intintint
intintint
intint
BBdBdBd
Bddd
Bddd
d
rarara
rarara
rarara
rara
　　　　　
　　　　
　　
　
　　　
βαD  (9) 
 
The interbay distance dinter(α, β) and intrabay distance dintra(α, β) can be separately calculated 
using Equations (10) to (18) and Equations (11), (14), (17) and (19) to (21) when the flow direction 
of the IMHS is uni-directional and bi-directional, respectively.  In the following discussion, only 
clockwise direction is considered for the uni-directional case.  In the same manner, another set of 
equations similar to Equations (10) to (18) can be formulated for the case of counterclockwise 
direction.  When IMHS’s flow direction is clockwise, six conditions considering the relative 
locations of the starting bay and the destination bay can be separately taken into account.  
Furthermore, when IMHS’s flow direction is bi-directional, the distance between any pair of bays is 
the shorter between the clockwise distance and the counterclockwise distance.   
 
Case 1: clockwise flow direction of IMHS (with six conditions) 
 
Condition 1: α and β are both located in the north area, and α is at the east of β  
 
 
( ) ( ) αββαβα XBXBWTHMXBXBWTWTHMdinter −++=+−++= 222,  (10) 
  
 
( ) HNdintra =βα ,  (11) 
 
Condition 2: α and β are both located in the north area, and α is at the west of β  
 
 
( ) αββα XBXBdinter −=,  (12) 
 
 
( ) HNdintra =βα , , same as Equation (11).  
 
Condition 3: α and β are both located in the south area, and α is at the east of β  
 
 
( ) βαβα XBXBdinter −=,  (13) 
  
 
( ) HSdintra =βα ,  (14) 
 
Condition 4: α and β are both located in the south area, and α is at the west of β  
 
  18
 
 
 
( )
22
, HSHNdintra +=βα , same as Equation (17).   
 
3.1.7 Determination of the required number of imhs vehicles 
Similar to the availability Jm in Equation (1) for type m machine, the availability of one IMHS 
vehicle J0 is measured by Equation (22) in terms of its mean time between failures (MTBF0), mean 
time to repair (MTTR0), mean time between preventive maintenance (MTBM0), and mean time to 
conduct a preventive maintenance (MTTM0).   
 
( )( )0000
00
0
*
MTTMMTBMMTTRMTBF
MTBMMTBFJ ++=  (22) 
 
The required number of IMHS vehicles N0 can be calculated by Equation (23).  Neither 
vehicle congestion nor deadlock is taken into account here.  In the denominator of the two terms of 
the RHS of equation (23), H0 shows the amount of available transportation time (i.e., the design 
capacity) of one IMHS vehicle per month.  E0 shows the expected performance of an IMHS 
vehicle expressed as a percentage of standard time (including loaded and unloaded move time and 
transfer batch setup time), and E0 may decrease as the vehicle ages.  C0 denotes the design 
capacity buffer of one IMHS vehicle considering possible capacity loss in the transportation 
operation.  The multiplication of H0, E0, and J0 indicates the effective available time of one IMHS 
vehicle per month.  In the denominator of the first term of the RHS, Z0, P0, and B0 represent 
IMHS’s transfer batch size, speed, and effectiveness of move, respectively.   
 
( ) ( )
( )
( )( ) ( )
( )0000
1 1
0
0000000
1 1
0 1
,2,
1
,,
CJEH
CTf
CJEHBPZ
df
N
B BB B
inter
−+−=
∑∑∑∑
= == = α βα β
βαβαβαβα
 (23) 
 
The numerator of the first term of the RHS of equation (23) calculates the total interbay 
transportation distance of all wafers by summing up the multiplication of f(α, β) and dinter(α, β).  
dinter(α, β) equals zero by definition when α equals β.  This leads to a zero travel distance when 
starting bay α is equal to destination bay β.  The numerator of the second term calculates the total 
transfer setup time.  T0 is multiplied by a factor of two to indicate the summation of two standard 
transfer setup times at the beginning and at the end of each interbay transfer.  An indicator variable 
C(α, β) is used here to set a vehicle's transfer setup time to zero when starting bay α is equal to 
destination bay β, since interbay transportation only happens when starting bay is different from 
destination bay.   
The expected average utilization of IMHS vehicles can be calculated by Equation (24).   
 
( )
⎡ ⎤0
00
0
1
N
CNU −=  (24) 
 
  20
3.2 Fab design procedure: an intrabay view (FDP II) 
The proposed FDP II (see figure 4) can be used to quickly develop and evaluate initial fab 
design alternatives, based on a series of practical formulae.  FDP II sequentially determines the 
following design parameters from an intrabay point of view: machine group flow matrix, machine 
group locations within each bay, machine group-stocker distance matrix within each bay, machine 
group distance matrix within each bay, the required number of vehicles within each bay, and the 
average wafer move distance at all bays.   
With FDP II, fab designers can quickly change model parameters (e.g., product mixes and the 
process routines) to answer “what-if” questions for actual or potential changes.  Decision makers 
can then evaluate the performance of layout alternatives and select the best one.  It is necessary to 
systematically review a broad range of possible layout scenarios, since the fab flexibility (e.g., with 
respect to product, process, quantity, technology, and expansion) is an important performance index 
of fab design.   
 
3.2.1 Data collection 
FDP II uses the following data to determine fab design parameters: products, quantities, 
routines, machines, and vehicles.  Specific data items are defined in the parameters of the 
equations presented in this research.  It is noted that the required data may not always be available 
and, therefore, fab designers need to estimate unavailable data.  To simplify the formulae 
derivation, each product is assumed to have only a single process routine in this research.  In 
application, one type of product with alternative routines can be treated as different types of 
products (by considering the probability of alternative routines), each with a single process routine 
and its demand can be calculated according to the probability.   
 
3.2.2 Determination of machine group flow matrix 
The machine group flow matrix defined in this paper shows the flow intensity between each 
pair of machine groups.  Theoretically, machine group flow matrix can define the flow intensity 
between each pair of machines.  However, in the stage of wafer fab design, operational decisions 
such as dynamic order assignment and dispatching are not taken into account.  Therefore, a wafer 
is considered to be processed by any machine of a machine group, rather than by a certain machine.   
Machine group flow matrix can be generated by Equations (27) and (28).  ( )h,gf  represents 
the flow intensity from machine group g to machine group h per month.  Qi represents the required 
number of wafers of type i products per month.  Si represents the total number of steps in the 
production routine of a type i product, while I represents the total number of product types.  Ga,b(g, 
h) denotes an indicator variable that equals 1 if starting machine group a is g and destination 
machine group b is h; equals 0 otherwise.  Mi,j indicates the machine group processing a type i 
product's j-th step.  G denotes the total number of machine groups.  The machine group flow 
matrix F will later be used in conjunction with the intrabay distance matrix to determine the 
required number of vehicles within each bay and estimate the average moving distance of a wafer.   
 
( ) ( )∑ ∑
=
−
= +
=
I
1i
1S
1j
M,Mi
i
1j,ij,i
h,gGQh,gf  (27) 
  22
bays that g and h belong to. 
 
[ ])h,g(dintraintra =D
⎥⎥
⎥⎥
⎦
⎤
⎢⎢
⎢⎢
⎣
⎡
=
)G,G(d    ...     )2,G(d       )1,G(d
......
)G,2(d     ...     )2,2(d        )1,2(d
)G,1(d     ...     )2,1(d         )1,1(d
intraintraintra
intraintraintra
intraintraintra
     (31) 
 
3.2.6 Determination of the required number of vehicles within each bay 
As the weight of 12” wafers and their carriers [front-opening unified pods (FOUPs)] exceeds 
the limit of human operators due to the concerns of ergonomics and efficiency, AMHS is typically 
used in both interbay and intrabay transportation.  As a result, it is important to accurately 
calculate the required number of vehicles in the design phase, as it is more difficult to flexibly 
adjust the number of vehicles of AMHS than the number of human operators.  FDP I and FDP II 
calculate the required number of vehicles for interbay and intrabay transportation, respectively.  
These are important design parameters to be determined at the beginning of a fab design.  The 
accuracy of these parameters significantly affects the fab performance, since insufficient vehicles 
result in transportation bottlenecks but excessive vehicles lead to a waste of investment.   
The required number of intrabay vehicles within each bay can be calculated by taking into 
account the move time between machine groups and between machine group and stocker, and the 
transfer setup time at both machine and stocker.  Neither vehicle congestion nor deadlock is taken 
into account here.   
 
3.2.7 Determination of the average wafer move distance at all bays 
The average move distance of wafer type i at all bays can be measured by Equation (32) on the 
basis of machine group flow matrix and machine group distance matrix within each bay.  
Furthermore, the average wafer move distance across different wafer types at all bays in a fab can 
be calculated by Equation (33).   
 
( ) ( )∑−
=
+=
1S
1j
1j,ij,iintraC
i
M,MdiTD  (32) 
 
( )
∑
∑
=
== I
i
i
I
i
Ci
C
Q
iTDQ
TD
1
1  (33) 
 
3.3 A case study 
Data from real foundry fabs are collected and used to evaluate the performance of FDP I and 
FDP II.   
 
3.3.1 FDP I 
a. Product:  Three typical products are considered in this paper.  Product types A, B, and C have 
17 layers (230 steps), 17 layers (234 steps), and 15 layers (195 steps), respectively.  The 
demands of 30,000 wafers per month with four product mix scenarios of various Qi (shown in 
  24
Microsoft Visual Basic and Excel VBA (Visual Basic for Application) are used to develop 
FDP and to evaluate its performance.  The experimental design includes three factors listed in 
Table 5 – product mix, bay location policy (Adjacent and Non-Adjacent), and bay combination 
policy (Individual and Combined).  The policies regarding to bay location and bay combination 
can be controlled by fab designers, while product mix reflects the variation in demand.   
 
Table 5.  Experimental design used to evaluate the performance of FDP 
Factor Level 
 1:1:1 
 2:1:1 
1:2:1 
 Product Mix 
 1:1:2 
 Adjacent: bays with the same function are adjacent to each other   Bay Location 
Policy  Non-Adjacent: bays with the same function are non-adjacent to each other 
 Individual: bays form individual bays  Bay Combination 
Policy   Combined: bays are combined into one bay 
 
In this case study, FDP I can efficiently and effectively calculate the required number of 
machines using Equation (2) and the results are shown in Table 6.  Table 7 shows the results of 
machine groups.  Fourteen bays are formed for different functions including diffusion, etching, ion 
implantation, photolithography, and thin film.  The metrology equipment is allocated in several 
bays.  As demonstrated in Figure 8, the initial layout (with Adjacent and Individual bays) can be 
developed based on the relationship chart and relationship diagram of SLP.  The suggested 
rules-of-thumb in Table 2 can be used to improve initial layout.  An example resulting interbay 
flow matrix (in terms of the number of lots per month with the product mix of 1: 1: 1) is shown in 
Figure 9.  Figure 10 demonstrates the initial layout alternatives with different bay location and 
combination policies.   
 
 
 
 
 
 
 
 
 
 
 
 
 
  26
A B C D E F G H I J K L M N
A 0 150 30 0 0 0 0 30 30 30 0 0 0 50
B 60 0 30 60 0 0 30 0 0 30 0 0 0 0
C 90 30 0 0 160 0 110 0 0 0 0 50 0 0
D 0 0 0 0 30 0 0 0 0 60 40 0 70 50
E 90 30 90 0 0 0 0 0 0 290 50 0 50 20
F 0 0 0 0 120 0 0 0 0 0 0 0 0 0
G 0 0 90 0 80 60 0 130 0 0 0 0 0 0
H 0 0 110 0 20 0 0 0 0 0 0 0 0 0
I 0 0 30 0 210 0 0 0 0 0 0 0 0 0
J 30 0 0 0 0 30 220 0 210 0 0 50 0 30
K 0 0 60 0 0 0 0 0 0 50 0 0 60 0
L 0 0 0 90 0 0 0 0 0 0 0 0 10 0
M 20 0 0 30 0 30 0 0 0 80 30 0 0 0
N 0 0 0 70 0 0 0 0 0 30 50 0 0 0  
Figure 9.  Example interbay flow matrix (in terms of the number of thousand wafers per month 
with the product mix of 1: 1: 1) of initial layout  
 
 (a)                        (b)                      (c) 
BJ
FE G HM N
L K C AD
 IMHS
 
JI
F
E G H
MN
L
K CB AD
 IMHS
J
F
EG
H M NL
KC
BA D
 IMHS
 
Figure 10. Layout alternatives with (a) Adjacent and Combined; (b) Non-Adjacent and Individual; 
(c) Non-Adjacent and Combined bay location and combination policies  
 
The interbay moving distance, intrabay moving distance, total moving distance of each wafer 
type, and average wafer moving distance of three wafer types in the layout alternatives with 
different bay location and combination policies are shown in Table 8, when the flow direction of 
the IMHS is uni-directional and bi-directional, respectively.  As expected, bi-directional IMHS has 
shorter wafer moving distance than uni-directional IMHS.  However, bi-directional IMHS requires 
a more complex control mechanism than uni-directional IMHS does to avoid potential traffic 
problems such as deadlock.  The moving distance of products A, B, and C is proportional to the 
number of operation steps.  Concerning the four product mixes, the total moving distance and the 
required number of IMHS vehicles are shown in Table 9 and Figure 11.  Among the four 
alternatives, FDP using a combination of Non-Adjacent and Combined bay location and 
combination policy yields the best performance across four different product mix scenarios in terms 
of the total moving distance and the required number of IMHS vehicles.   
 
 
 
 
 
  28
Table 9.  The resulting performance of four layout alternatives and product mixes with respect to 
average moving distance per wafer and the required number of IMHS vehicles  
Average moving distance (km)  Required number of IMHS vehiclesProduct 
mix Alternative uni-directional bi-directional uni-directional bi-directional 
Adjacent + 
Individual 14.5 9.9 10 6 
Adjacent + 
Combined 13.6 9.2 9 6 
Non-Adjacent + 
Individual 13.1 9.0 9 5 
1:1:1 
Non-Adjacent + 
Combined 11.8 8.6 8 5 
Adjacent + 
Individual 14.7 10.0 10 6 
Adjacent + 
Combined 13.7 9.3 9 6 
Non-Adjacent + 
Individual 13.2 9.1 9 5 
2:1:1 
Non-Adjacent + 
Combined 11.9 8.7 8 5 
Adjacent + 
Individual 18.0 12.3 10 6 
Adjacent + 
Combined 16.8 11.4 9 6 
Non-Adjacent + 
Individual 16.2 11.1 9 5 
1:2:1 
Non-Adjacent + 
Combined 14.6 10.7 8 5 
Adjacent + 
Individual 14.1 9.6 9 6 
Adjacent + 
Combined 13.1 8.9 9 5 
Non-Adjacent + 
Individual 12.6 8.7 8 5 
1:1:2 
Non-Adjacent + 
Combined 11.4 8.3 7 5 
 
8000
10000
12000
14000
16000
18000
20000
22000
24000
1:1:1 2:1:1 1:2:1 1:1:2
Product mix
To
ta
l m
ov
in
g 
di
st
an
ce
 (k
m
) UD + Adjacent + Individual
UD + Adjacent + Combined
UD + NonAdjacent + Individual
UD + NonAdjacent + Combined
BD + Adjacent + Individual
BD + Adjacent + Combined
BD + NonAdjacent + Individual
BD + NonAdjacent + Combined
 
Figure 11. Comparison of four layout alternatives with respect to the total lot moving distance (UD 
and BD indicate uni-directional and bi-directional flow of IMHS, respectively) 
 
 
  30
 
Figure 12. Layout alternative with machine location and side selection policies of stocker+machine 
and two-sided 
 
Table 11. The resulting required number of vehicles for intrabay transportation in the case study 
Product Mix Machine Location 
Policy Side Selection Policy 1:1:1 2:1:1 1:2:1 1:1:2 
Single-Sided 19 19 19 19 
Stocker 
Two-Sided 17 17 17 17 
Single-Sided 19 18 19 18 
Stocker+Machine 
Two-Sided 17 17 17 17 
 
Table 12. The resulting performance of four layout alternatives for three products with respect to 
average moving distance per wafer at all bays (km) 
Machine Location 
Policy Side Selection Policy Product A Product B Product C 
Single-Sided 6.162 6.341 5.255 
Stocker 
Two-Sided 5.035 5.225 4.380 
Single-Sided 6.097 6.276 5.240 
Stocker+Machine 
Two-Sided 4.756 4.920 4.131 
 
  32
FDP II provides a solid base for rapid modeling and evaluation of wafer fab designs.  In 
response to the speedy changes in IC products, technologies, and equipment, FDP II can help fab 
designers to quickly study the forest first and then detailed simulation can be used to examine the 
trees later.  Even though the accuracy of parameters estimated by FDP II is lower than that by 
simulation, getting a rough answer now is worth more than knowing an accurate answer few weeks 
later.  FDP II was partially implemented in the design and evaluation of two wafer fabs.  
Preliminary results showed that this approach can efficiently and effectively evaluate design 
alternatives and can help fab designers to identify the “best” fab designs in reasonably short time.   
 
3.4 Conclusions 
As suggested by Nadler (1965), it is important, at least initially, to divorce one's thinking from 
“what has been” and to focus on “what can be.”  The proposed FDP (including FDP I and FDP II) 
suggests a practical quantitative procedure to help fab designers to quickly develop and evaluate 
“what-can-be” design alternatives.  FDP I can generate important fab design parameters such as 
the required numbers of machines and IMHS vehicles.  It can also develop an interbay flow matrix 
and a distance matrix.  Initial fab layout can be generated accordingly and the average wafer 
transportation distance can be calculated.  FDP II can calculate the required numbers of vehicles 
for intrabay transportation.  FDP II can also develop flow matrix of machine groups as well as 
distance matrices of machine group-stocker and machine groups within each bay.  A case study 
referred to real foundry fabs is used to evaluate the efficiency and effectiveness of FDP.  Results 
demonstrate that FDP can correctly calculate and estimate the required design parameters in a 
reasonably short time.  By the use of FDP I and FDP II, fab designers can evaluate design 
alternatives and conduct what-if analysis in the initial phase of fab design, from the viewpoint of 
interbay and intrabay, respectively.   
 
四、參考文獻 
[1]  Agrawal, G. K. and Heragu, S. S., 2006, A survey of automated material handling systems in 
300-mm semiconductor fabs, IEEE Transactions on Semiconductor Manufacturing, 19(1), 
112-120. 
[2]  Apple, J. M., 1977, Plant Layout and Material Handling, 3rd edn (John Wiley). 
[3]  Baudin, M., Mehrotra, V., Tullis, B. Yeaman, D., and Hughes, R. A., 1992, From spreadsheets 
to simulations: a comparison of analysis methods for IC manufacturing performance, in 
Proceedings of 1992 IEEE/SEMI Int. Semiconductor Manufacturing Science Symposium, 
94-99. 
[4]  Burman, D. Y., Gurrola-Gal, F. J., Nozari, A., Sathaye, S., and Sitarik, J. P., 1986, 
Performance analysis techniques for IC manufacturing lines, AT&T Technical Journal, 65(4), 
46-57. 
[5]  Cardarelli, G. and Pelagagge, P. J., 1995, Simulation tool for design and management 
optimization of automated interbay material handling and storage systems for large wafer fab, 
IEEE Transactions on Semiconductor Manufacturing, 8(1), 44-49.   
[6]  Castillo, I. and Peters, B. A., 2004, Integrating design and production planning considerations 
in multi-bay manufacturing facility layout, European Journal of Operational Research, 157, 
671-687. 
[7]  Chan, H. M. and Milner, D. A., 1982, Direct clustering algorithm for group formation in 
cellular manufacturing, Journal of Manufacturing Systems, 1(1), 65-74.   
[8]  Chen, J. C., Chien, C. C., Tseng, H. H., Wang, C. C. and Chang, T. C., 1997, A systematic 
  34
[27]  Tompkins, J. A., White, J. A., Bozer, Y. A. and Tanchoco, J. M. A., 2003, Facilities Planning, 
third edition.   
[28]  Tyan, J. C., Du, T. C., Chen, J. C. and Chang, I. H., 2004, Multiple response optimization in a 
fully automated fab: an integrated tool and vehicle dispatching strategy, Computers and 
Industrial Engineering, 46(1), 121-139. 
[29]  Yang, T. and Peters, B. A., 1997, A spine layout design method for semiconductor fabrication 
facilities containing automated material-handling systems, International Journal of Operations 
& Production Management, 17(5), 490-501. 
[30]  Yang, T., Rajasekharan, M., and Peters, B. A., 1999, Semiconductor fabrication facility design 
using a hybrid search methodology, Computers & Industrial Engineering, 36, 565-583. 
 
五、計畫成果自評 
1.研究內容與原計畫相符程度 
 相符 
2.達成預期目標情況 
 預期目標均達成 
3.研究成果之學術或應用價值 
可於未來產品世代改變時，協助晶圓製造廠規劃者有效率且有效用地規劃初始晶圓製造
廠佈置方案，並可供學術界進行更深入之研究及提供具相關特性產業之應用參考。 
4.是否適合在學術期刊發表或申請專利 
適合於學術期刊發表，且本計劃第一年之成果已為 SCI 期刊所接受如下： 
Chen, J. C., Dai, R. D., and Chen, C. W., 2007, A practical fab design procedure for wafer 
fabrication plants, International Journal of Production Research (To Appear). 
 
  
本屆會議有四場 Plenary Session，分別為 
z Dr. James M. Tien, Rensselaer Polytechnic Institute 
“Introducing A Calculus for Services Innovation” 
z Dr. Daniel S. Yeung, President-Elect of the IEEE Systems, Man and Cybernetics 
(SMC) Society 
“Bankruptcy Prediction Using Multiple Intelligent Agent System via a Localized 
Generalization Error Apporach” 
z Dr. Suresh P. Sethi, University of Texas at Dallas 
“A review of Stackelberg Differential Game Models in Supply Chain 
Management” 
z Dr. Wei Zhang, Tianjin University 
“The Introduction of Financial Service in China: An Overview at the Beginning 
of the New Century” 
 
大會共分 18 個主題進行，分別為 
1. Service Strategy and Service Innovation 
2. Service Systems and Service Management in Industries 
3. Supply Chain and Logistics Management 
4. Economic Analysis of Service Systems 
5. Service Information Systems: Designing, Implementing and Adoption 
6. Artificial Intelligence for Services 
7. Customer Behavior Analysis and Customer Relationship Management 
8. E-commerce, Web Service and Online Auctions 
9. Discovery of Pattern Using Semantic Modeling for Service Systems 
10. Empirical Studies on Service Systems 
11. Services in Logistics and Transportation 
12. Data Mining: Algorithms and Applications 
13. Service Quality Management and Service Performance Evaluation 
14. Decisions and Performance in Service Systems 
15. Supply Chain Coordination 
16. Risk Management for Service Systems 
17. Service Operations Management 
18. Decision Techniques and Simulation 
 
此會議被接受之論文兼顧工業應用與學術研究，尤其強調學術與應用之整合。
此次本人所報告之論文為  “時窗限制下之車輛途程問題研究 (Solving Vehicle 
Routing Problem with Time Window Constraints)”。 我國半導體製造已在世界上佔了
重要的地位，有完整之供應鏈，服務品質之重要性亦與日俱增。 
 
 Solving Vehicle Routing Problem with Time Window Constraints 
 
J. C. Chen 1, C. S. Chiang 2, B. B. Chen 3, and C. W. Chen 1 
1 Department of Industrial Engineering, Chung-Yuan University, Chung-Li, Taiwan, R.O.C. 
2Department of Computer and Information Science, Soochow University, Taipei, Taiwan, R.O.C. 
3 Sunplus Technology Co., Ltd., Hsinchu Science Park, Taiwan, R.O.C. 
jamesc@cycu.edu.tw 
 
ABSTRACT 
This paper proposes a heuristic, Tabu-Disturbance Algorithm (TDA), to efficiently and effectively solve Vehicle 
Routing Problem with Time Window Constraints (VRPTW).  TDA integrates Tabu Search (TS) and Noising Method 
(NM).  TS is one of the most popular generic heuristics in solving VRPHTW in recent years and NM is a 
combinatorial optimization meta-heuristic.  The first objective is to determine the route that minimizes the total vehicle 
travel distances.  This leads to a quick response to satisfy customer demands.  The second objective is to find the 
minimum required number of vehicles.  This can reduce the transportation cost.  TDA results in good solution quality 
by the evaluation of Solomon’s benchmark instances.  Comparing with the optimal solution of the partial instances 
obtained by Desrochers et al. (1992), the average deviation of distance is about 1.0% and the average deviation of 
number of vehicles is about 2.4%, compared to the known “best” solutions. 
 
Keywords: vehicle routing problem, time window, tabu-disturbance algorithm, tabu search, noising method 
 
1. INTRODUCTION 
 
The efficiency of logistics becomes critical in the supply 
chain due to short product life cycles and customers’ 
quick response requirements.  In addition to increasing 
sales and decreasing manufacturing cost, increasing 
efficiency of logistics is also considered as the third 
source of profit.  To quickly respond to customer 
demands, logistics providers can increase the number of 
vehicles, so customers’ waiting time can be reduced.  
However, the transportation cost increases proportionally 
to the size of the fleet of vehicles.  Hence, how to 
dynamically develop economic transportation routes for 
each vehicle serving a group of customers with different 
demands and decrease the total transportation cost while 
satisfying customers’ needs becomes important.  This 
problem is complex and can not be effectively and 
efficiently resolved based on experience.  Furthermore, 
the problem becomes even more complex when 
customers ask for a delivery time window and applies a 
penalty for early and late shipment.   
 
Classic VRP determines a set of routes that minimizes 
the total travel distance or the required number of 
vehicles, originating and terminating at the same depot, 
for a fleet of vehicles which serves a set of customers 
with known demands or supplies.  Each customer can 
be served only once and all customers must be assigned 
to vehicles such that restrictions on vehicles capacity are 
met.  In addition, the demand of each customer cannot 
be split. 
 
Vehicle Routing Problem with Time Window constraints 
(VRPTW) adds complexity of allowable delivery times, 
or time window constraints, stemming from the fact that 
customers request earliest and latest service times.  
VRPTW has been an intensive research and can be used 
to model many real-world problems.  Excellent surveys 
are available in papers by Bodin et al. (1983), Solomon 
(1987), and Desrochers et al. (1992). 
 
VRPTW can be further divided into two classes known 
as hard time window constraints and soft time window 
constraints.  Hard time window constraints strictly 
request customers’ delivery time falling between earliest 
and latest time constraints with no violation.  When a 
vehicle arrives at a customer location before its earliest 
service time, the vehicle must wait to start a service until 
the earliest service time.  However, the vehicle can 
against customers’ time window constraints in VRPTW 
with soft time window constraints.  If the vehicle 
arrives early or late, a penalty for earliness or lateness is 
incurred, separately.  VRP with hard time window 
constraints can be treated as a special case of VRP with 
soft time window constraints by setting a huge penalty 
for both earliness and lateness.  
 
This paper proposes Tabu-Disturbance Algorithm (TDA), 
to efficiently and effectively solve Vehicle Routing 
Problem with Time Window Constraints (VRPTW).  
TDA integrates Tabu Search (TS) and Noising Method 
(NM).  The first objective is to determine the route that 
minimizes the total vehicle travel distances, and the 
second objective is to find the minimum required number 
of vehicles.  This is because, in practice, providing a 
quick response service (i.e., short travel distance) to 
increase customer satisfaction level is more important 
than the transportation cost (i.e., small number of 
vehicles) in this application research. 
 
This paper is organized as follows.  This section gives 
an introduction to this research.  The next section 
reviews relevant literature.  Section 3 describes detailed 
procedure of TDA.  Next, Sections 4 and 5 present 
  
Assuming the service time at a customer i can begin at 
time bi, within a time window defined by the earliest 
time ei and the latest time li.  If a vehicle travels directly 
from customer i to customer j, the earliest service time bj 
of customer j can be calculated by equation (1), where si 
denotes the service time of customer i and tij is the direct 
travel time between customer i and j. 
 
}tsb,e{ Maxb ijiijj ++=    (1) 
 
The cost of direct travel from customer i to customer j is 
also considered by equation (2), where 1ρ  and 2ρ  
denote the weights of travel and temporal costs, and dij is 
the direct travel distance from customer i to customer j.  
The nearest neighbor heuristic is applied in this research 
by calculating cij of all customers. 
 ( )ij2ij1ij bbdc −+= ρρ     (2) 
 
3.2 Local Search Improvement Phase 
 
After obtaining an initial feasible solution, the local 
search improvement phase with vehicles reduction and 
neighborhood search procedures are proposed to improve 
the initial feasible solution.  Vehicles reduction 
procedure is used to perturb a route and insert all the 
customers in the route to the other routes to reduce the 
required number of vehicles.   
 
Neighborhood search improvement procedure applies 
branch exchange methods and node exchange methods to 
efficiently improve the solution and it includes 
inter-route and intra-route improvement modules.  
Swap exchange is applied in the inter-route improvement 
module and swap exchange, 1-0 exchange (λ-exchange), 
and 2-opt* approaches are applied in the intra-route 
improvement module, respectively.   
 
3.3 Disturbed Search Improvement Phase 
 
In the disturbed search improvement phase, a hybrid 
algorithm of TS and NM is used to improve the initial 
solution.  The framework is similar to TS, but it adds 
the concepts of NM.  When the best feasible solution is 
not superior to present optimum, it will start to noise the 
cost.   
 
Figure 2 shows the cost curve of NM.  The new curve 
will increase the possibility of jumping out of local 
minimum traps and reach high solution quality at a short 
time.  During the searching, if the new solution is better 
than the current solution and is not in the Tabu list, it 
becomes the current solution and the Tabu list is updated.  
If the solution is not better than the current solution, the 
noise is brought up.  The noise creates perturbation 
using decreasing noise rates in trials of iterations.  The 
search stops when the termination criteria are met.  
 
 
Figure 2. The cost curve of NM 
 
4. COMPUTATIONAL RESULTS 
 
TDA was coded in Visual Basic 6.0.  Benchmark 
problems found in Solomon (1987) are used to test the 
performance of TDA.  In these problems, customer 
locations are distributed within a [0, 100]2 square.  Six 
different sets of problems are defined, namely C1, C2, 
R1, R2, RC1, and RC2.  In the problems of types C and 
R, customers are clustered and uniformly distributed, 
respectively.  Customers are mixed with type C and 
type R in the type RC.  Furthermore, the time window 
is narrow at the central depot for the problems of type 1, 
while the time window is wide for the problems of type 
2.   
 
On the basis of a systemic evaluation of these benchmark 
instances, TDA results in good solution quality.  The 
average deviation of distance is less than 3% and the 
average deviation of number of vehicles is about 9.5%, 
compared to the known “best” solutions.  
 
Desrochers et al. (1992) obtained the optimal solutions 
for R101, R102, C101, C102, C106, C107, and C108.  
As shown in Table 2, the average deviation of distance is 
about 1% and the average deviation of number of 
vehicles is about 2.4%, compared to the known “best” 
solutions. 
 
Table2. TDA compared to optimal solutions 
Optimal Solution TDA 
Problem 
Distance Number of Vehicles Distance 
Number of 
Vehicles
R101 1,604.5 18 1,656.5 20 
R102 1,434.0 17 1,473.6 18 
C101 827.3 10 829.0 10 
C102 827.3 10 829.5 10 
C106 827.3 10 829.0 10 
C107 827.3 10 829.0 10 
C108 827.3 10 829.0 10 
Deviation from optimality:  1.00% 2.43% 
