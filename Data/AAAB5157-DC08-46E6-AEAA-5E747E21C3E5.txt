路外停車場三種服務付費系統之IC電子票證。台北智慧卡公司成立於2000年3月， 
主要股東為台北市政府、台北大眾捷運公司、台北銀行、13家台北市縣公車業者、
神通電腦公司、世華銀行、台新銀行及世華租賃公司、中國信託銀行、三商電腦、
中華顧問工程司、三門科技等業者。 
    悠遊卡之應用範圍主要包括三大類， 分述如下： 
1.台北大眾捷運系統：含目前捷運網路之淡水線、新店線、中和線、木柵線、
板南線等共64 個車站以及所屬部份停車場12 座。 
2.台北市、縣公車：可使用於台北市聯營公車全部路線與部份台北縣縣轄公
車之路線。 
3.台北市公有路外停車場： 台北市公有路外停車場共37 處。 
    根據台北智慧卡公司之規劃， 悠遊卡未來應用範圍將逐步擴展至台北縣市
所有停車場、基隆市公車、路邊停車、繳停車費與罰單以及計程車等，進一步將
規劃應用至台鐵、高鐵與高速公路電子收費（ETC）等系統。而在非交通方面發
展計畫， 則期望應用於員工識別證、學校學生證、門禁系統以及小額消費等用
途。 
    在系統技術方面，悠遊卡係採菲利浦公司之Mifare卡，所需設備大致區分為
系統前檯設備、後檯清算設備、金融加值設備等三類。其中系統前檯設備包括各
系統中央處理電腦、各站處理電腦以及卡片讀寫設備； 後檯清算設備包括中央
清算系統、發卡系統及安全控管系統；金融加值設備則包括自動加值設備及人工
加值設備。 
    至於系統架構方面， 以清算中心為整體網路為核心， 連接到各個次系統， 
包括捷運網路次系統、公車網路次系統、停管網路次系統、人工加值網路次系統、
自動加值網路次系統以及市政府資訊查詢系統等， 系統架構圖如圖3.5所示。[1] 
 
圖1 
所必須要件。NFC device內將儲存使用者個人身分資訊、金鑰、NFC應用程式、
及交易得到的電子票證等資料。而無論是使用各項 NFC服務，亦或是其他智慧
卡所用之應用系統(如悠遊卡)，交易時大部份的資料或身分憑據皆須使用到 NFC 
device做為驗證對象。 
 
POS(Point of Service) 
為提供 NFC應用服務的主要設備，由廠商所有。廠商可根據欲提供的 NFC服務
建置特定 POS，並設定交易時採用的安全協議，使用者便可透過 NFC device存
取該項服務。一般而言，POS只會處理較不敏感的操作，在進行使用者身分識別，
或是其餘重要命令控制時，POS則會向後端主要伺服器發送請求，並將伺服器返
回的指令回傳給使用者，此時的 POS是扮演雙方交易的中介角色。 
 
IDP (Identity Provider) 
在 OpenID機制中做為身分認證服務提供者，用於識別使用者身分的重要要件，
同時也是授權使用者進行資源存取與否的關鍵角色。使用者得先在 IDP中進行
註冊才可使用相關的 NFC應用服務，NFC服務提供商得先將使用者提交的身分
資訊交由 IDP做身分識別，唯有識別通過者才可得到交易授權許可。 
 
  本研究重點將著重於使用者購票流程中，在說明系統流程之前，NFC系統架
構有些部屬規則需先了解。 
(一) 在此規畫的 NFC環境部屬中，IDP與 POS機台的數量可以為複數以上。以
NI代表 IDP機台數量，NP代表 POS機台數量 
𝑁𝐼, 𝑁𝑃  ∈  ℛ  
(二) 每個 POS可對應到多個 IDP，IDP也可服務多個 POS。關係是 N對 N 
(三) 每一台 IDP 的地理位置、硬體設備與使用者資料量均不相同，因此傳輸、
服務時間也會有所差異。使用者到達 POS的間隔時間為𝑇𝐴。 
𝑇𝐴                
(四) 每一台 POS 地理位置同樣可分散於各地，每個地點使用者的使用狀況不同
(如台北交易次數可能比屏東多)。須注意，一台 POS一次只能供一位使用者
使用 
 
NFC系統運作流程與時間參數如下，數字流程對應圖 1 
1. 首先使用者使用NFC device向POS建立連線，提供NFC device的(Product ID: 
PID) 供取票時對應。 
 與 POS 連線時間𝑇𝐶.𝐶𝑃具有 Uniform 分佈，𝑇𝐶.𝐶𝑃𝑚𝑖𝑛為最短連線時間，
𝑇𝐶.𝐶𝑃𝑚𝑎𝑥為最長連線時間。𝑇𝐶.𝐶𝑃會因輕量級驗證機制的複雜程度而有所
變化。 
𝑇𝐶.𝐶𝑃 𝑢  𝑓 𝑟𝑚 𝑇𝐶.𝐶𝑃𝑚𝑖𝑛 , 𝑇𝐶.𝐶𝑃𝑚𝑎𝑥  
安全模組時間評估 
VPN 
    VPN是一種在網際網路上達到私人網路的通訊方法，其大多會使用加密機
制以確保雙方通訊資料不被竊聽。在本 NFC架構中為 POS與 IDP連線時採用的
協定，會影響𝑇𝐶.𝑃𝐼指標的時間分佈。該安全模組的選項分為有加密的 VPN通道
與無加密的 VPN通道，並以實測方式取得兩者的通訊時間。 
 
圖 3 
 
    圖 3為 VPN有加密與無加密連線的實際量測時間，x軸為連線時間。經分
析觀察後預估兩者的時間分佈情形如下。 
加密 VPN：  𝑇𝐶.𝑃𝐼   𝑟𝑚   15,3  
無加密 VPN：𝑇𝐶.𝑃𝐼   𝑟𝑚   6,3  
 
輕量級驗證機制 
    為使用在RFID通訊所採用的加密機制，由於RFID的TAG所蘊含運算量低，
故無法使用太過複雜加密協定，輕量級驗證機制可被當作一般常用安全協定的簡
易版。在本NFC架構中為NFC device與POS溝通中所使用，影響時間參數𝑇𝐶.𝐶𝑃。
安全模組選項可分成 2種等級，低安全性輕量級驗證機制與高安全性輕量級驗證
機制，以實測取得數據。 
 圖 5 
    圖 5為隱私協商三項政策的時間分佈，預估時間參數如下 
無隱私協商政策：    𝑇𝑃𝑁 𝑢  𝑓 𝑟𝑚 0,0  
部分隱私協商政策：  𝑇𝑃𝑁 𝑢  𝑓 𝑟𝑚 5,15  
高度隱私協商政策：  𝑇𝑃𝑁 𝑢  𝑓 𝑟𝑚 20,50  
 
IDP存取驗證 
此為 OpenID中驗證使用者身分的伺服器，在 POS接收到使用者資料後需提交至
IPD確認使用者身分，取得的資料將做為下一步進行OAuth存取資源時授權 token
的取得。本研究依照存取資源的重要程度將其區分為三類安全等級，輕度驗證、
中度驗證、高度驗證，時間指標𝑇𝐴𝑈𝑇𝐻會依三種等級的安全複雜度不同而產生變
化。下圖以實測及推導方式取得時間分佈。 
 
 
使用部分較高的安全模組/政策，是用於一般服務。高安全等級架構則是用於高
額金錢交易或敏感個人資訊使用，包含最高安全機制，其安全性是三者之中最好
的。 
    在對這三種安全等級架構做時間評估之前，首先要對各個安全模組作時間分
析，以釐清各個安全模組對效能的影響程度。本研究所提供的四項安全模組/政
策其執行的運行時間對於 NFC系統整體效能影響皆有所不同，以下將以本計畫
開發的 NFC效能評估系統做模擬分析。 
    實驗方式為將完全不使用安全模組的 NFC架構做為對照組，實驗組則是納
入各個安全模組的 NFC架構，以此來觀察每一安全模組導入後對整體運作效能
的影響。對照組的各個時間參數為 
𝑁𝐼 = 1 
𝑁𝑃 = 100 
                    10  
𝑇𝐶.𝐶𝑃 𝑢  𝑓 𝑟𝑚 1,2  
𝑇𝑃𝑁 𝑢  𝑓 𝑟𝑚 0,0  
𝑇𝐶.𝑃𝐼   𝑟𝑚   6,3  
𝑇𝐴𝑈𝑇𝐻 𝑢  𝑓 𝑟𝑚 1,5  
𝑇𝐴𝑃𝑈𝑅𝐶𝐻 𝑢  𝑓 𝑟𝑚 1,5  
    將上述的各個時間參數填入效能評估系統中(如圖 7)以進行模擬。 
 
圖 7 
 
    反覆模擬 100次後，計算 NFC系統整體運行時間 System Time的最小值、
最大值與平均值，再逐一代換安全模組對應的時間參數，取得每一模組導入後的
運行狀況。表 2為詳細實驗結果。 
 低安全等級架構 中安全等級架構 高安全等級架構 
𝑇𝐶.𝐶𝑃 𝑢  𝑓 𝑟𝑚 3,4  𝑢  𝑓 𝑟𝑚 4.5,6.5  𝑢  𝑓 𝑟𝑚 4.5,6.5  
𝑇𝑃𝑁 𝑢  𝑓 𝑟𝑚 0,0  𝑢  𝑓 𝑟𝑚 5,15  𝑢  𝑓 𝑟𝑚 20,50  
𝑇𝐶.𝑃𝐼   𝑟𝑚   6,3    𝑟𝑚   15,3    𝑟𝑚   15,3  
𝑇𝐴𝑈𝑇𝐻 𝑢  𝑓 𝑟𝑚 1,5  𝑢  𝑓 𝑟𝑚 5,15  𝑢  𝑓 𝑟𝑚 15,35  
𝑇𝐴𝑃𝑈𝑅𝐶𝐻 𝑢  𝑓 𝑟𝑚 1,5  𝑢  𝑓 𝑟𝑚 1,5  𝑢  𝑓 𝑟𝑚 1,5  
Max System Time 19.66234 52.61691 103.17190 
Min System Time 19.79433 53.05291 104.44671 
Mean System Time 19.718444 52.89831 103.70754 
單位(秒) 
表 3 
    從表 3可看到每個安全等級對系統的整體運行時間差異，高安全等級架構雖
能有效降低各種風險的發生，但相對也得花費大量時間做為代價。對時間影響最
多的安全模組為高度隱私協商模組，造成此結果的原因可能是使用的 NFC服務
需要較為敏感或完整的個人資訊，使用者需經過多次確認才能提交，例如銀行轉
帳、信用卡交易等，這也成為影響系統運行的最主要因素。 
 
使用者來客率增量評估 
    NFC在規劃系統架構時，除了安全性的選擇之外，使用者人數、IDP負荷量、
以及 POS數量也是須考量的要素。若使用者人數過多、而服務的 POS過少，會
造成使用者大排長龍、等待時間過久，會讓使用者使用服務意願下降。要如何對
NFC系統架構做完整規劃將是接下來討論的議題。 
    以模擬實驗分析，現在預設一 NFC服務運作狀況，其該服務使用中安全等
級架構，有 20台 POS可以使用，平均每台 POS使用者來客率為 60人/天，IPD
數量為 1台。以每次增量使用者來客率 5的方式模擬來客率逐步增加後對系統的
運行時間，以及使用者等待時間和隊伍排隊狀況的影響。詳細參數為 
𝑁𝐼 = 1 
𝑁𝑃 = 20 
  𝑐𝑟 𝑚     = 5 
                    60  
𝑇𝐶.𝐶𝑃 𝑢  𝑓 𝑟𝑚 4.5,6.5  
𝑇𝑃𝑁 𝑢  𝑓 𝑟𝑚 5,15  
𝑇𝐶.𝑃𝐼   𝑟𝑚   15,3  
𝑇𝐴𝑈𝑇𝐻 𝑢  𝑓 𝑟𝑚 5,15  
𝑇𝐴𝑃𝑈𝑅𝐶𝐻 𝑢  𝑓 𝑟𝑚 1,5  
𝑁𝑃 = 50 
  𝑐𝑟 𝑚     = 2 
                    24  
𝑇𝐶.𝐶𝑃 𝑢  𝑓 𝑟𝑚 3,4  
𝑇𝑃𝑁 𝑢  𝑓 𝑟𝑚 5,15  
𝑇𝐶.𝑃𝐼   𝑟𝑚   15,3  
𝑇𝐴𝑈𝑇𝐻 𝑢  𝑓 𝑟𝑚 1,5  
𝑇𝐴𝑃𝑈𝑅𝐶𝐻 𝑢  𝑓 𝑟𝑚 1,5  
 
 
 
圖 9 
    從以上結果可看到，各項指標已有顯著降低，縱使到來客率顛峰時刻，平均
使用者等待時間只有短短的 10秒。 
Arrival 24 26 28 30 32 
MIN 0.0426 0.0499 0.0615 0.0739 00854 
MAX 0.0437 0.0519 0.0626 0.0742 0.0859 
MEAN 0.0435 0.0518 0.0625 0.0741 0.0858 
Arrival 24 26 28 30 32 
MIN 6.4079 6.9273 7.9372 8.8689 9.6277 
MAX 6.5505 7.1738 8.0046 8.8850 9.6335 
MEAN 6.5295 7.1832 8.0080 8.8814 9.6378 
Arrival 24 26 28 30 32 
MIN 44.3575 44.9203 45.9198 46.8519 47.6184 
MAX 44.5216 45.2203 46.0052 46.8831 47.6366 
MEAN 44.5110 45.1838 46.0085 46.8752 47.6415 
國科會補助計畫衍生研發成果推廣資料表
日期:2011/05/31
國科會補助計畫
計畫名稱: 子計畫五:安全保護機制之效能評估(1/3)
計畫主持人: 楊維寧
計畫編號: 99-2218-E-011-015- 學門領域: 資訊
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
