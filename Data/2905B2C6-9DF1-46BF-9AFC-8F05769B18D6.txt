 1
低功率折疊式快閃式類比數位轉換器之設計(I) 
Low power folded flash analog-to-digital converter (I) 
計畫編號：NSC 99-2221-E-006-223 
執行期限：99 年 8 月 1 日至 100 年 10 月 31 日 
主持人：賴源泰 國立成功大學電機工程學系 
一、中文摘要 
高效能的類比數位轉換器介面電路
在混合式訊號處理電路中扮演了重要且
不可或缺的角色。隨著製程與無線通訊技
術的進步，越來越多的電路可整合在同一
個晶片當中，造成現今可攜式的電子設
備，如手機、PDA…等，朝多功能的目標
發展。針對超高速轉換速度、中低解析度
的電路應用，如含 DVD 讀取通道、多準位
接收器、通道等化器或乙太網路…等，快
閃式類比數位轉換器是最主要的架構選
擇。然而，這種架構在提供高轉換速率的
同時，卻也帶來硬體消耗與功率消耗隨解
析度成指數化上升的問題。 
在本計畫中我們將提出一個新式的
低功率折疊式快閃式類比數位轉換器架
構。利用折疊的方式簡化轉換器中解碼器
的電路複雜度，降低解碼器端帶來的功率
消耗與電路延遲。此外，在這個折疊式的
新架構中，我們提出了一個降低整體功率
消耗的方法。我們將比較器的操作分為三
個模式，分別為動作、預備、關閉模式，
在一次的類比數位轉換過程中，再利用分
段選擇的概念，將在轉換時需要工作的比
較器開啟，相鄰的比較器預備，其餘的關
閉，以降低整體的功率消耗並維持高速的
轉換速度。我們利用 TSMC 0.18um 製程進
行晶片實做，達成的類比數位轉換器規格
為 6-bit，1G 取樣頻率，20 mW 的功率消
耗 
關鍵詞: 折疊式，快閃式，類比數位轉換
器。 
Abstract 
High performance analog-to-digital 
converters (ADC) are key components of 
mixed-signal integrated circuits. Recently, 
for the growing development of the process 
technology and handheld wireless terminals, 
more and more circuits can be integrated 
into a single chip. Consequently, 
multi-functionality is the objective in many 
mobile electrical devices such as cell-phone, 
PDA… etc. In the applications of high 
conversion speed and low power 
consumption, for example, DVD read 
channel, multi-level receiver, channel 
equalizer and ethernet, flash 
analog-to-digital converter architecture is 
the main choice. Although this kind of 
converter can offer ultra-high conversion 
speed, the hardware cost and power 
consumption grow exponentially with the 
resolution of ADC 
In this project we propose a novel low 
power, folded, flash analog-to-digital 
converter. We propose a folded technique to 
lower the circuit complexity of the decoder 
such that the power consumption and time 
術，如平均化技術[3，5-6]，自動歸零技
術[7]，校準技術[8]…等，來降低比較器
輸入抵補電壓之間的差異造成的泡沫錯
誤(Bubble Error)，設計複雜度的增加相
對的也增加了功率的消耗。泡沫錯誤是一
個不可預期且無法避免的錯誤，理想上，
溫度計碼中位元與位元間只會有一個0到
1 的轉換，但在實際的情況裡，溫度計碼
中有時出現超過一次 0到 1轉換，這樣的
結果會導致在解碼器端出現嚴重錯誤。泡
沫錯誤發生的原因主要是在兩個相鄰的
比較器，他們比較器本身的電位偏移量差
異大於一個最低有效位元，而偏移的發生
來自於比較器的亞穩態、雜訊，電路間的
串音(crosstalk)現象、有限的頻寬和採
樣時間的不確定性等等[3]。隨著製程微
小化與轉換速度的提升，這種偏移現象所
造成的影響會越來越嚴重[4]。為降低泡
沫錯誤造成的影響，除了提高比較器的效
能方式外，在解碼器端設計一個能免除泡
沫錯誤的解碼器也是另一種提高轉換效
能的方法[9-17]。 
在解碼器架構中最常被使用的架構
為二進位記憶體陣列，如圖 2(a)所示。簡
易性、規律性及低硬體成本是這個架構的
特色，缺點是它會造成較長的電路延遲與
較大的功率消耗。此外，二進位記憶體陣
列對於泡沫錯誤容錯度低。舉例說明，在
解碼前，溫度計碼先透過轉換偵測邏輯閘
轉換成 1-of-n 碼，例如: 00…010…00，
這個 1-of-n 碼中的 1 代表溫度計碼中 1
轉換為 0 的位置，接著這個 1-of-n 碼中
的 1會啟動記憶體陣列中的一行，完成二
進位的解碼動作。然而，若有泡沫錯誤存
在，記憶體陣列中可能會有兩行以上的開
關被啟動執行解碼，因而得到極大的誤
差。解決這個問題方法，一個是利用其中
兩輸入反向的三輸入的及閘取代原本的
轉換偵測邏輯閘，這個方法可改正兩個以
下的泡沫所產生的錯誤。然而如要移除其
他型態的泡沫錯誤，就需要更複雜的轉換
偵測電路。另一種解決方法是在解碼時，
用格雷碼取代二進位碼，如圖 2(b)所示。
利用格雷碼相鄰的兩組碼只有一個位元
的變化這種特性來減少泡沫錯誤，然而，
在一般應用的情況，需要再加一個將格雷
碼轉換為二進位碼的解碼器，由於這種解
碼器通常都是串列架構，會造成相當大的
時間延遲。 
 
圖 2(a) 二進位記憶體解碼器架構 
 
 
圖 2(b) 葛雷碼記憶體解碼器架構 
 
除了記憶體陣列式的架構，有些解碼器
是由組合邏輯電路所組成。因為不需要唯
讀記憶體預先充電期間，在操作速度上會
 3
 
圖 4(a) 劉式解碼器架構 
 
 
圖 4(b) 多工器解碼器架構 
 
降低快閃式類比數位轉換器的功率消耗
的方法有許多種，一般而言，利用新穎的
製程，使供應的電壓下降進而降低整體功
率消耗是其中之一。由於供應電壓下降，
而電晶體的臨界電壓卻沒有跟著等比例
的下降，造成可操作的輸入電壓範圍被縮
減，因此如何使各個子電路，如比較器，
能夠在這樣的情況下提供足夠的電壓增
益以及比較速度成為主要的研究課題。此
外有些研究是針對整體電路架構的改良
來降低功率消耗，在[18]介紹了一種新式
的快閃式類比數位轉換器的架構，圖 5所
示為一四位元的改良式架構圖。這個架構
的運作方式類似於二進位搜尋法，先將類
比輸入訊號V
V
in與 8Vref/16 做比較，比較的
結果即為最高位元的輸出結果，利用這個
輸出結果來決定次高位元值為輸入與
4Vref/16 比較或與 12Vref/16 做比較的結
果，最後再利用這兩個高位元的輸出結果
來控制低位元在比較時要與那個範圍的
參考電壓作比較，再透過一解碼器來得到
低位元的解碼值。相較於傳統的快閃式類
比數位轉換器架構，這個四位元的轉換器
僅使用了 6個比較器，節省了相當大的功
率消耗及面積。這個架構的缺點在於 1).
運作速度下降。由於整個運作模式轉變為
類似二步驟式的類比數位轉換器，低位元
的轉換必須等待高位元的比較結果得出
後才能進行，因此速度至少減低了一半以
上。2).雜訊的影響。由於提供參考電壓
點必須相當的準確才能維持轉換器的效
能，而這個架構中，有些參考電壓必須通
過多工器再輸入到比較器輸入端，造成參
考電壓點準位的偏移。在文獻[19]中，一
個低功率的架構被提出。這個架構是利用
一個反向器來作為開啟上半部比較器或
是下半部比較器的決定電路。一旦反向器
輸出為正，則溫度計碼轉態區應落於上半
部，因此以上半部比較器的輸出結果來做
解碼，而下半部的比較器，由於輸出結果
並不影響解碼結果，因此可以將其關閉降
低消耗功率，反之亦然。這個架構雖然可
降低將近一半的功率消耗，但由於需要兩
次的比較時間，轉換器的操作速度仍然會
被犧牲。在[20]中結合了[18]與[19]的設
計概念，將比較器串列分成了四等分，利
用比較器與 ref/2、Vref/4 及 3Vref/4 比較的
結果，產成高次位元的解碼值，並且再再
利用高次位元值，決定使用哪個部分的比
較器列的輸出來進行低位元的解碼。同樣
的，在降低功率消耗的同時依然犧牲了速
度上的優勢。 
 5
根據下式 
0 1 1 1
0 1 1 1 12 2 2 2 2 2
k -
k -z = b b b b b b
  
  
 
          1
1)
    (1) 
將z當作被除數，且
      (2) 
著來看由z轉換得到的溫度計碼 
 
為z=(d×q)+r，我們得到 
 . 
也因此得到下列式子， 
(5) 
根據式(5)的結果，我們可以得到 
            (6) 
            (7) 
將(3)及(4)代入(6)及 (7)可以得到 
p
u
0 1 1 0 1 ( )
0 1 1 1 12 2 2 2 ( 2 2 2
k
kb b b b b b
  
  
 
           =
LBs UBs( ) (2 ( ))= v z v z
 
d=2λ當作除數，q及r
跟別表示商及餘數，根據除法關係我們可
以得到下列關係式 
z=(d×q)+r     
vUBs(z)=q             (3) 
vLBs(z)=r            (4) 
 
接
1)1)12((1)12()12(
1)1(1
110
1210
  
  
   
  
   




 





ddd
dqqdqd
d
kkk
k
uuu
uuu
uuu
uuuz
 





因
  0 if    1 dqiu 

otherwise    0
r
i








k
dssdsd
sq
qsr
qs
uuu
2    if0
if
0
1)1(1 
d if
qu
i
id 


1
1
k2
ru
d
j
jqd 


1
0
 



k
i
idu zv
2
1
1UBs )(
          (8) 



1
0
LBs )(
d
j
jqdu zv
          (9) 
因為r值必須小於d值，則 必須為0。
(9)可重新表示如下: 
1)1(  dqu



2
0
LBs )(
d
j
jqdu zv
          (10) 
根據(8)式，我們可以利用溫度計碼中
來進行產生較高位元的
二進位碼。另一方面，因為在每一次類比
訊號轉換成數位訊號時，在低位元的解碼
部分所使用的輸入值是來自於不同的比
較器輸出值，因此要直接利用式(10)來設
計低位元的解碼電路是有困難的。若要使
用(10)來設計低位元的解碼電路，必須先
確定位元 u
12121
 ..., , ,  kuuu dd
12 ku
12 kp
12 ku
12 ku
qd, uqd+1, …, uqd+d-2的所在位
置。為了執行計算q值的動作，我們利用
一個選擇電路來決定溫度計碼中uqd, 
uqd+1, …, uqd+d-2的位元值。考慮下列(5)
式 中 的 位 元  ud-1, u2d-1, …, uqd-1, 
u(q+1)d-1, …, 。令 0, p1, pq, …, 
為溫度計碼中 d-1, u2d-1, …, uqd-1, 
u(q+1)d-1, …, 對應的 1-of-n碼，因為
ud-1, u2d-1, …, uqd-1值為 1 且u(q+1)d-1, …, 
值為 0，我們得到pq=1 而其他的值都
為 0。因此(10)可改寫為下: 
 








 
12
0
2
0
LBs )(
k
i
d
j
jidi up zv
 
 7
 
圖 9 可切換式高速比較器 
 
在本研究中，我們將提出一個方法來降低
整體的電路功率消耗。根據輸出在解碼器
中扮演的角色，在新架構中比較器被區分
為兩個部分，一部份的比較器是用來做高
位元的解碼，一部份則用來做低位元的解
碼。而這些用來做低位元解碼的比較器被
建構成矩陣的形式，在每次的類比數位訊
號轉換時，只有其中一行的比較器輸出會
被選擇、輸入到低位元解碼器做解碼。換
言之，在進行低位元的類比數位轉換時，
僅有一組比較器的輸出是被需要的，而其
他的比較器在這次的解碼過程中是沒有
作用的。我們利用這種電路上的特性，來
進行比較器開關的選擇。在我們的設計當
中，輸出用來做高位元解碼的比較器是要
持續運作的，而根據高位元解碼的結果，
將開啟陣列當中的一行比較器進行比較
與低位元的解碼。但是在這樣的運作過程
中，用來做低位元解碼的比較器必須等待
高位元的結果得到後才能在進行比較與
解碼的動作，這個類似二階段比較的過程
會使轉換器速度降低，為了維持轉換器的
速度，我們提出一個新的方法來改善。由
於類比訊號是連續性的訊號，我們假設用
來做類比數位轉換的類比輸入電壓，兩兩
之間是某種程度接近的，也就是說我們預
測下一筆數位輸出值會接近該筆輸出
值。在這樣的假設底下，我們將陣列當中
的比較器分為三種型態分別為動作型態
(Active mode) 、 預 備 型 態 (Standby 
mode)、以及關閉型態(Idle mode)。在運
作時，若某一行的比較器在動作型態，其
相鄰的行中的比較器則定義為預備型
態，其餘的比較器則處於關閉型態。如圖
10(a)所示，第一行的比較器為動作型
態，第二行則為預備型態，其餘則是關閉
型態，若進入圖 10(b)的情況裡，第二行
的比較器轉換為動作型態，第一與第三行
的比較器切換為預備型態，其餘的比較器
則保持關閉。 
 
(a) 
 
(b) 
圖 10 折疊式快閃式類比數位轉換器動作
情況 
 
四、實驗結果 
(1) Hardware cost 分析 
我們將我們所提出的 folding 方法運用在
flash ADC 的解碼器(decoder)上面。從表 1
可以看出，當我們使用 6-bit 與 8-bit flash 
 9
  
表 3. Flash ADC 效能列表 
 
五、論文發表 
　由實 法可
性很高，而相關的成果已經發表於: 
1) Tzu-Chiang Tai and Yen-Tai Lai
圖 12.  Dynamic Performance of the
Converter. 
如上圖 12 所示，為我們使用 folding 方法
設計出 6-bit Flash ADC 所得到動態響應。 
我們所設計的 folding Flash ADC 的晶片
圖顯示於圖 13。 
 
圖 13.  Layout a 6-bit flash ADC. 
的
驗結果可知，我們所提出的方
行
, "A 
 Algorithm with 
A 
i
Performance Oriented
Consideration on Communication Cost for 
Dynamically Reconfigurable FPG
Partitioning," ACM Transactions on 
Reconfigurable Technology and Systems. 
vol. 4, no. 2, 16:1- 16:18, 2010 
2) Y. -T. La
表三為我們所設計的 6-bit Flash ADC
效能列表。 
 
 
circuit,” 
International Journal of Circuit Theory and 
and H. -Y. Lin, “A low 
distortion CMOS continuous-time 
common-mode feedback 
Applications, 2010 (Accepted) 
3) Y. -T. Lai and C. N. Yeh, “A folding 
technique for reducing circuit complexity of 
flash ADC decoders,” Analog Integrated 
Circuits and Signal Processing, vol. 63, no. 
2, pp. 339-348, May 2010 
4) Y. -T. Lai C.-C. Kao, T.-C. Tai, and 
 11
出席國際學術會議心得報告 
                                                             
計畫編號 NSC 99-2221-E-006-223 
計畫名稱 低功率折疊式快閃式類比數位轉換器之設計(I) 
出國人員姓名 
服務機關及職稱 
國立成功大學電機系賴源泰教授 
會議時間地點 美國 Stanford Memorial Auditorium 2011/ 8/ 17~19 
會議名稱 A Symposium on High Performance Chips 23 
發表論文題目  無，僅報名 Tutorial 
 
一、 參加會議經過 
A Symposium on High Performance Chips 23 於 2011 年 8 月 17-19 在美國加
州 Stanford Memorial Auditorium 舉行。由於該會議有相當多知名科技大廠派人
演講，如 Intel 和微軟，因此本人雖然沒有投稿論文，但仍註冊報名，想到場了
解目前業界狀況。 
本次會議一共三天，包含兩個 Tutorial 以及兩個 Keynote 演說，另外還有
9 個不同領域的議程。 
 
二、 與會心得 
  本會議的所著重的領域大致有九個，分別為： 
1. ManyCore  
2. Security 
3. Memory & FPGA 
4. DSP 
5. Miscellaneous 
6. Networking 
7. Server 
8. Video 
9. Desktop CPU 
國科會補助計畫衍生研發成果推廣資料表
日期:2011/10/24
國科會補助計畫
計畫名稱: 低功率折疊式快閃式類比數位轉換器之設計(I)
計畫主持人: 賴源泰
計畫編號: 99-2221-E-006-223- 學門領域: 積體電路及系統設計
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
