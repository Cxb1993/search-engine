2 2 2( ) ( ) ( ) ( ), , ,I p I I I I I I Ik L k a k b kL a b      
( , ) ( )D p k I p I k 
(Parametric Curve)即稱為梯度向量流可變形輪廓
(Gradient Vector Flow Deformable Contour)，
( , )s tt 為曲線 ( )s 對於時間 t的偏導數， [0,1]s 。
為了定義梯度向量流力場，必須先將整個影
像的邊界圖(Edge Map)計算出，我們將邊界圖定
義為 ( , )f x y ，其越靠近邊界會具有越大的值，
例如可以用
2( , )I x y
或
2( ( , )* ( , ))G x y I x y
等過去常拿來作為外部能的負值當作邊界圖
( ( , )I x y 表示影像強度值， ( , )G x y 是一二維的高
斯函數 (Guassian Function)， 是標準偏差
(Standard Deviation)，是梯度操作子)。假如要
分割的影像為單純的線條圖(Line Drawing)，邊界
圖 則 可 以 簡 單 的 定 義 為 ( , )I x y 或
( , )* ( , )G x y I x y 。
邊界圖通常有兩個性質：
(1).邊界圖的梯度 ( )f 擁有指向邊界的向量。
(2).這些向量在鄰近邊界的地方有較大的值，若
在影像強度值為常數的區域，則邊界圖的梯度趨
近零。
因為第一個特性，當動態輪廓靠近邊界時，
會收斂到一個靠近邊界的穩定狀態；而第二個特
性會造成上面所提到動態輪廓模型的第一個缺
點，也就是起始輪廓必須很靠近真實邊界。
然後梯度向量流動態輪廓利用一種疊代
(Iterative)擴散的技巧，將邊界圖延伸至沒有影像
強度值為常數的區域，而這個擴散的過程也會造
成指向凹處的向量，也就可以克服傳統動態輪廓
模型捕捉範圍以及無法進入凹處的問題。下圖為
GVF的實驗結果：
(a)原始圖 (b)疊代過程圖
(c)梯度圖
圖二、利用GVF來做影像的切割。
3.2 葉片形狀的抽取使用修改式KMCC
Nikolaos等人所提出的KMCC方法，主要是
利用顏色距離和空間距離相加的差異，來將一張
影像區分為多個不同區域 ( )k ，然而KMCC演算
法並不適合於我們所需處理的case，主要的原因
在於我們所取樣的樹葉影像，只含有樹葉及背景
兩部分 ( 2)k ，而且背景通常包圍葉片(我們照相
時通常把主角擺在照片中央)，由於葉片中心與
背景中心座標實在太近，所以KMCC演算法中的
空間距離
p Sk 這一項值就失去作用了。我們希
望能修改KMCC演算法，只考慮顏色距離，且
( 2)k (樹葉及背景)，並且加上彩色空間的選擇以
及修正雜訊的方法，以符合我們所處理的case，
來達到正確的樹葉影像切割，所提出之修改方法
步驟如下：
輸入：一張樹葉的彩色影像(將影像RGB顏色系
統轉成CIE-L*a*b*顏色系統)
Step1：將整張影像長、寬二十分之一的點當作背
景的顏色中心(圖3-a)，將整張影像長、寬
二分之一的點當作樹葉的顏色中心(圖
3-b)。
Step2：執行K-Mean演算法，針對影像中每一點
p，重新計算至各群中心的距離，但是當
考慮點 p 是否屬於第 1k群(背景)或第
2k 群(樹葉)時，所參考距離計算條件如
下：
表示顏色距離，計算新的
各群中心。
Step3：重複執行Step2，直到收斂。
Step4：將Step3最後收斂的結果，以整張影像的
中心點向下延伸至樹葉的邊緣(即第一個
白點的部分)，來做chain-code[5]將樹葉的
邊緣找出來，如圖4。
Step5：利用region grow的方法，以整張影像的中
心點來成長，最後以chain code的樹葉邊
緣停止成長(目的是要將一些雜訊去除
掉)，來完成整張樹葉影像的切割。
圖三、利用修改式KMCC實作葉片形狀的擷取
3.3 Feature Extraction葉片特徵的擷取
很鈍：130o以上。
葉尖計算公式如下：

x
N
ba
ba
angle /)
||]*|
*
cos( 

百合 水黃皮 福木
(43.09) (66.54) (165.54)
圖七、以葉尖角度為特徵
特徵五：葉緣平滑
平滑：葉緣看似一條曲線，沒有任何曲折。
不平滑：葉緣稍有曲折，但不是有規則的鋸齒。
鋸齒：葉緣呈現鋸齒狀，且俱有規則性。
分裂狀：葉緣呈分裂狀(非撕裂)，類似複葉，但
每一子葉沒有葉梗。
圖八、葉片葉緣的差異
各種形狀的葉子。福木:平滑；孔雀木:不平滑；
燈籠花:鋸齒；洛神花:分裂狀。
本研究亦利用CCD技術來觀察葉子的葉
緣，首先，計算主軸角度(principle axis)
再以主軸角度作基準，順時鐘方向，每10度取一
點，共取36個點。其中x及y的增量公式如下：
本研究發現，取36個點在鋸齒(燈籠花，圖
11)及分裂狀(洛神花，圖 12)兩部份，其特微無
法由CCD曲線上表現或觀察出來。燈籠花是屬於
鋸齒狀的葉子，但在它的CCD曲線看起來卻和福
木的CCD曲線(圖 9)相似，無法表現出葉緣有鋸
齒的特微。洛神花在取點時，產生橫跨兩個葉子
的情況，故無法取得正確的CCD曲線圖，也因此
無法充分表現出洛神花為分裂狀葉子的特微。再
思索將取的角度變小(取的點數增加)，亦無法改
變此等現象。
圖九、以CCD為葉緣特徵
其他特徵：Curvature Scale Space
MPEG-7 Contour Shape Descriptor 使用的
是 CSS(Curvature Scale Space) [23]的方法，此種
方法是屬於邊緣性質 (contour-based)的形狀描
述，此種方法首先先把形狀以緣線表示，然後對
邊緣線取 Nsamples 個點，每點的距離相同，接
著把每個點的 x跟 y分別以 Vector來儲存，得到
Vector x存 x座標的點，Vector y存 y座標的點，
然後對 Vector x及 Vector y做 low-pass filter，以
高斯平滑化 Gaussian filter (0.25,0.5,0.25) (把變
異性比較大的區域進行平滑化，並且記錄曲率變
化時正負曲率交界的點(point)，如此不斷進行平
滑化，直到輪廓線上不再出現正負變化的曲率。
藉此可以分辨出葉片輪廓的不同，進行平滑次數
愈多則代表輪廓變化較大，如羽裂狀、齒狀。愈
少者則代表輪廓變化少，如全緣。)為 kernel 做
convolution 直到形狀的邊綠輪廓變成 convex 為
止。
所謂的變成 convex的意思，這裡的定義是
3600
)cos(
)sin(



i
iy
ix


肆、實驗結果與討論
4.1 樹葉影像切割實驗
所提出方法與GVF實作樹葉影像切割的結
果如下圖。
原圖 所提方法 GVF
圖十二、所提方法和GVF來做影像切割結果比較
實驗結果顯示，在樹葉圖鑑或是拍攝圖，本研究
所提出修改KMCC方法優於GVF方法，在200張
樹葉影像中，我們以視覺判斷，切割錯誤的影像
只有6張錯誤，正確率達97%。
4.2 葉片特徵資料庫與Ontology之建置
我們利用了80種不同校園植物的影像，每種分別
拍攝葉片影15張，以10張為資料庫供影像查尋之
用，在利用其餘5張做為影像測試。所建置的資
料庫如下圖所示。
圖十三、樹葉資料庫
同時我們以葉片的形狀，建構相對應的影像
ontology如下圖所示，
F=[ F1 F2 F3 F4 F5 ]
Low Level feature descriptor vector
圖十四、葉片形狀 ontology 的描述
另外我們已一般植物的生長型態與外觀形狀參
考植物相關書籍來建立相對應的部份植物
ontology(小葉桑)如下；
