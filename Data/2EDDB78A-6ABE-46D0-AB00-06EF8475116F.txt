  i
中文摘要 
 
關鍵詞：射頻識別, 資料庫, 網路, 監控, 追蹤  
 
RFID 近年來使用量逐漸增加，無論是在學術界研究或是產業方面。從門禁
管制、寵物辨識、圖書館防竊管理、商場防盜等等，都有很大的應用空間。然而，
目前現有的 RFID 系統大多是針對個別需求量身訂做，且沒有一套完整的系統對
傳回的資訊做更進一步的處理。我們期望將 RFID 做更進一步的應用，尤其是在
日趨複雜的人員管制及物流管理方面。RFID(Radio Frequency Identification)最早
的構想在 1948 年被提出，即利用無線電波來傳送識別資料，達到身分識別的目
的。RFID 最基本的結構為 reader 以及 tag。Tag 內部具有晶片可儲存大量資訊，
可透過 reader 對 tag 做讀取或覆寫的工作，而且 reader 與 tag 的收訊範圍可依照
需求調整，從數十公分到數十公尺皆可，應用層面因此更為廣泛。在本計畫中，
我們達成下列系統功能：(1)被動式物件管制(2)主動式物件管制(3)主動式物件追
蹤(4)可靠度機制的建立。本整合型計畫分成五個子計畫執行，子計畫一為影像
辨識系統，用來輔助 RFID 系統的辨識能力；子計畫二為 reader 的技術研發；子
計畫三負責將多個 reader 的資訊利用網路溝通協定傳送給 server 處理；子計畫四
則為此整合型計畫的主腦，將網路蒐集的資料做判別，決定系統的反應；子計畫
五則為 tag 的技術研發。今年影像部分的功能已經如期完成全部的目標：臉部偵
測、單監視器臉部追蹤、多監視器人臉追蹤、臉部辨識、臉部資料庫建立、資訊
網路架設、與 RFID 主系統連結。在讀取器之研製上，除了完成天線、發射機、
接收機、電路板佈局等之外，並完成一個小型的 WEB 伺服器，以 HTTP 協定及
網頁技術建立一個網路平台環境，可使得遠端主機連線至此伺服器，取得內存資
訊。RFID 的網路架構方面，我們完成系統網路平台原型之研發與建構及系統資
訊平台與網路監控技術之研發，包括 RFID 中介軟體(Savant)、ONS Server、Data 
Base Server 等與網路間的傳輸規格。此外，我們對實體關係模式(ER model)與資
料正規化作一探討，利用這兩種方法來規劃我們的資料庫，並且探討控制協調之
機制，用數值分析模擬出結果。射頻辨識標籤研究方面，數位防碰撞系統電路採
用的是”Slotted Random Aloha ”的防碰撞演算法，此系統電路不僅加強了射頻辨
識標籤的完整功能，更提高了標籤的辨識速率，並且降低了標籤碰撞的錯誤率，
及減少了標籤的功率消耗。 
  iii
3.1.3.1.1  讀取器對電子標籤的通訊編碼方式……………………...…………….31 
3.1.3.1.2  電子標籤對讀取器的通訊編碼方式…………………………………..33 
3.1.3.2  資料完整性及錯誤偵測…………………………….…………………33 
3.1.3.2.1  資料正確性的檢驗-Checksum…………………………….…………….34 
3.1.3.2.2  防碰撞技術(Anticollision)………………………………………………36 
3.1.3.3  信號調變與解調…………………………………………………………39 
3.2  RFID 讀取器前端系統硬體架構……..............................................41 
3.2.1  天線(Antenna)………………………………………………………………..41 
3.2.2  環形器(Circulator/Directional Coupler)…………………………….……….43 
3.2.3  IQ 正交解調改善接收訊號準確度的分析………………………………….44 
3.2.4  發射機設計………………………………………………………………….45 
3.2.4.1  鎖相迴路頻率合成器……………………………………………………45 
3.2.4.2  功率放大器……………………………………………………………….46 
3.2.5  接收機設計………………………………………………………………….47 
3.2.5.1  接收機架構…………………………………………………………….48 
3.2.5.2  低雜訊放大器……………………………………………………………49 
3.2.5.3  混波器…………………………………………………...…………………50 
3.2.6  PCB 版佈局……………………………………………………….………….51 
3.2.6.1  元件佈局………………………………………………..………………….52 
3.2.6.2  地線佈局……………………………………………………………….53 
3.2.6.3  電源線佈局………………………...........................………………..54 
3.3  後端 WEB 伺服器設計.................................................................55 
3.3.1  系統使用協定及解析.....................................................................55 
3.3.1.1  資料鏈階層(Data Link Layer)………………………………….………….55 
3.3.1.2 網路層(Network Layer)………………………………………..……………56 
3.3.1.3  傳輸層(Transport Layer)……………………………………..……………56 
3.3.1.4  應用層(Application Layer)………………………………………………57 
3.3.2  TCP/IP 的協定........................................................................57 
3.3.2.1  連線服務…………………………………………………………………...58 
3.3.2.1.1  IP(Internet Protocol)網際網路協定……………………………..……….58 
3.3.2.1.2  ICMP(Internet Control Message Protocol)網路控制訊息協定………..58 
3.3.2.1.3  ARP(Address Resolution Protocol)位址解析協定………………………59 
3.3.2.2  傳輸服務………………………………………………………………….60 
3.3.2.2.1  UDP(User Datagram Protocol)使用者資料段協定……………………60 
3.3.2.2  TCP(Transmission Control Protocol)傳輸控制協定……………………61 
3.3.2.3  應用服務………………………………………………………………….63 
3.3.2.3.1  HTTP(Hypertext Transfer Protocol)超文件傳輸協定…………………..63 
3.3.3  韌體與網路程式設計………………………………………………………65 
  v
5.2.4  Boyce/Codd正規化…………………………………………………………113 
5.3 系統規劃與設計.............................................................................114 
5.4  協調控制……………………………………………………………………..117 
5.4.1  協調控制之問題描述…………………………………………………….117 
5.4.2  理論分析……………………………………………………………………120 
5.4.3  數值模擬結果………………………………………………………………126 
5.5  模擬實驗環境與結果………………………………………………………...130 
5.5.1  資料模式效能評比…………………………………………………………130 
5.5.2  協調控制與資料庫…………………………………………………………133 
 
第六章 電子標籤系統晶片之研發.......................................................138 
6.1 RFID Tag 規格訂定與研究流程..................................... .............138 
6.2 RFID 系統操作原理說明.................... ........................ ................145 
6.2.1  RFID 系統傳送方式………………………………………………………145 
6.2.2  被動式 UHF RFID 標籤操作原理簡介……………………………………145 
6.2.3  Backscatter…………………………………………………………………146 
6.2.4  RFID Anti-collision Algorithm 原理說明…………………………………147 
6.2.4.1  Binart Tree Algorithm…………………………………………………147 
6.2.4.2  Slotted Random Algorithm………………………………………………148 
6.3 RFID TAG 軟體與硬體驗證 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .149 
6.3.1  RFID Tag 軟體驗證………………………………………………………150 
6.3.1.1  Alien Reader………………………………………………………………150 
6.3.1.1.1  Q=0……………………………………………………………………151 
6.3.1.1.2  Q=1……………………………………………………………………155 
6.3.1.2  AWID Reader……………………………………………………………160 
6.3.2  RFID Tag 硬體驗證………………………………………………………164 
6.3.2.1  使用 FPGA 晶片…………………………………………………………164 
6.3.2.1.1  有線測試………………………………………………………………164 
6.3.2.1.2  無線測試………………………………………………………………166 
6.3.2.2  IC 積體化…………………………………………………………………169 
 
第七章 成果自評................................................................................171 
7.1  實驗環境模擬……………………………………………………………...…171 
7.2  實驗模擬結果………………………………………………………………174 
參考資料............................................................................................180 
  2
全性。在評估市面上現有的 RFID 系統之後，我們加入了資料庫及影像這兩個元
素來修正以往的舊式系統，此亦為本計畫之核心及決策機制。 
 
1.2 研究計畫之目的及方法 
在科技日益進步，人群交流日趨頻繁的今日，物品管理機制的建立越來越重
要。本計畫的目的為建立一套完整的 RFID 系統，能提供完整的物流管理機制，
並有嚴密的安全防護，同時，還有完善的介面能夠更簡易的操作這套系統。此系
統主要的功能有： 
a. 被動式物件管制 
舊式的物流管制通常較為制式，例如生產線的品質管制。當貨物在進行品質
管制時，通常都是利用條碼進行辨認。但條碼的 Sensor 只能透過雷射讀取條碼
值，一旦貨物放置不妥，就無法進行下一步的動作，不過當運用 RFID 的技術時，
先前的問題就可獲得改善。除了可正確的獲得物品資訊外，並具備有包含資料收
集、資料整合、即時警訊等功能。除此之外，RFID 系統可同時針對大量的物品
進行辨識的工作。當我們給予各別物品的 Tag 不同 ID Code 時，Reader 可以同
時接收這些訊息再送入資料庫做比對，比起舊式的物流管理系統，來得更為迅速
有效。 
 
b. 主動式物件管制 
人員管制在日益繁忙的社會是越來越重要了，舉凡公司機於保密原則，公共
場合因為公共安全，或是醫院組織為了健康之虞所需做的管制措施等。例如一般
公司的門禁系統，很多都是採用刷卡制度，但是，刷卡制度漏洞不少。有的也許
採用指紋或是網膜辨識，不過這些機制仍然是可以仿造的。我們在此提出以 RFID 
為基礎的人員管制機制，希望除了可以達到人員控管的目的之外，並保有高度的
安全性。這個部份的內涵包括：RFID 的使用。影像辨識的應用在做人員辨識的
時候，先透過 RFID 進行 ID Code 的認證，再經由影像處理技術補捉人臉的影
像，與資料庫內部的資料進行比對，兩者皆符合時，表示認證通過，該員可以准
許進入。在此，我們運用了 RFID 的優點，並配合影像處理結合資料庫的應用。
如此雙重的驗證動作，提供了更高的安全機制。而且，當同時進行多位人員的辨
識時，將產生大量的資訊。將這些資訊存在資料庫中，加以處理成可實際應用的
數據，並建立一個高效能的完整資料庫，還能夠提供與支援不同需求的應用與研
究、分析。 
 
c. 主動式物件追蹤 
除了上述的人員管制功能之外，利用 RFID 透過即時監控系統，就可以順利
的進行人員的監控。例如醫院內部的病患管理，在醫院的出入口及走道等地方設
置 Reader，當病患移動位置時，Reader 就可以感應到由 Tag 所送回的資訊。將
  4
 
圖 1.2 各子計劃間關聯性示意圖 
 
1.3 報告架構 
在報告的第一章中，我們首先對研究背景與目的做一介紹。RFID 系統與影
像處理技術整合將在第二章中做介紹。第三章中我們將對讀取器之研製暨建立讀
取器與電子標籤之傳輸系統的研究成果作一說明。第四章為系統平台網路整合與
性能監控技術之研發成果。第五章為資料庫設計及決策機制之分析與建構。第六
章為電子標籤系統晶片之研發。最後一章為研究成果自評。 
 
  6
2.1.1 Haar-like Feature 
     Haar-like 特徵最早是由 Viola[8]提出，此特徵矩形因為類似小波轉換
(wavelet transform)中的 Haar 小波函數的結構而得名。一般的特徵選取，通常會
找出影像中變化劇烈的部分，例如物體的邊緣或線段，並且將特徵結合基礎知識
作為物體的代表。圖 2.2 列出選取不同型態的 Haar-like 特徵的樣板原型) 
 
 
 
 
(a) (b) (c) 
圖 2.2 不同型態的 Haar-like 特徵樣板 (a)邊緣特徵 (b)線段特徵 
(c)中央特徵。 
 
矩形特徵樣板除了讓選取特徵的方式簡化許多，最重要的是可以降低特徵值計算
的複雜度。因為矩形樣板的特性，特徵值的計算可以用積分影像(integral image)
的概念快速的得到。積分影像 I% 在(x, y)座標的值是由 x 左側與 y 上側的所有像素
值的加總，可以由下式表示 
 
  
' , '
( , ) ( ', ')
x x y y
I x y I x y
≤ ≤
= ∑% ,        (1) 
 
其中 I% (x, y)表示積分影像，I(x, y)表示原始影像。根據積分的概念，積分影像可
以由下式疊代計算而成 
 
        
( , ) ( , ) ( , 1)
                ( 1, ) ( 1, 1),
I x y I x y I x y
I x y I x y
= + − +
− − − −
% %
% %       (2) 
 
其中定義 
 
 ( , 1) ( 1, ) 0,I x I y− = − =% %       (3) 
 
因此積分影像 I% 可以由原始影像的左上角至右下角，經過一次的疊代計算便得
到。此時，基於矩形特徵樣板的特徵值，同樣的利用積分的概念便可以計算得到。
圖 2.3 為矩形樣板計算加總值的示意圖，可以發現只要知道矩形樣板的左上角與
右下角兩點座標值，矩形樣板的加總值由下式所表示: 
 
  8
       ( , ) ( , ) ( 1, 1) ( 2, )r r rI x y I x y I x y I x y= + − + − −% % % % ,    (9) 
 
經過這兩個步驟，便可以得到旋轉的積分影像。並且利用作為計算旋轉的矩形特
徵值。 
 
 利用 Haar-like 特徵所組成一個人臉影像分類器，有以下三個優點：減少偵
測人臉影像的複雜度、能偵測不同尺寸的人臉影像、以及接近即時(real-time)處
理的人臉偵測速度。在計算的複雜度方面，由於人臉影像有許多變化，諸如臉龐
輪廓、五官形狀與分佈位置等等，這些因素導致偵測人臉的計算量會相當的龐
大。過去有許多人臉偵測的方法，但是繁雜的演算法與影像資料的處理，使得人
臉偵測的結果往往無法兼顧正確性與處理速度。使用 Haar-like 特徵的好處，就
是把人臉影像比對的過程轉換為特徵比對，避免直接對影像做比對與搜尋的處
理。同時，特徵的計算由積分影像完成，不僅將特徵值的計算用簡單的加減法完
成，特徵值也只跟特徵矩形的端點位置有關，能加速在不同尺度下的特徵值計
算。這些特徵值經過訓練後，可以將人臉特徵組成一個強健的分類器，產生更正
確的人臉偵測結果。 
 
2.1.2 AdaBoost 
AdaBoost 由 Freund 等人[10]提出，是一種藉由許多弱分類器的線性組合，
而整合成一個強分類器的演算法。對整個特徵空間來說，每一個特徵可以決定是
否為目標物，也就是一個弱分類器。AdaBoost 演算法可以用下式表示 
 
 
1
( ) ( )
T
t t
t
f x h xα
=
= ∑ ,      (10) 
 
其中 ( )th x 是弱分類器， tα 是權重值，T 為弱分類器的各數。經過學習並調整權重
後的強分類器為 
 
 ( )( ) sign ( )H x f x= ,      (11) 
 
只要輸入特徵 x 便可以決定是否為目標物。 
 
相較於 Freund 等人[10]提出的 AdaBoost 演算法，Schapire 等[11]進一步的討
論如何針對 Adaboost 設計弱分類器的連續可信度輸出，進而改變選擇 ( )th x 的方
式，使得收斂速度更快。為了與 Freund 等[10]的 AdaBoost 有所區別，將 Schapire
等[11]改進後的 boost 演算法稱為連續 AdaBoost 演算法。連續 AdaBoost 的演算
法是給定訓練樣本集合 S = {(x1, y1),…,(xm, ym)}與弱分類器空間 Hˆ ，其中樣本總
數 m， i X∈x 為樣本向量，yi = ±1 為類別標籤。首先初始化樣本分佈機率 
  10
 
AdaBoost 是一個藉由重寫權重值，將弱分類器組成強分類器的學習方式。
儘管 AdaBoost 有著不錯的分類效果，但是當特徵數量越多，分類的準確度與複
雜度也隨之提高。為了使人臉偵測有更好的強健性與加快分類的速度，接下來將
介紹串接式分類器(cascade of classifiers)的概念，利用數個強分類器層層相接，完
成人臉偵測的工作。 
 
2.1.3 串接式分類器(Cascade of Classifiers) 
Viola 等人[8]針對人臉偵測問題提出了一種串接式檢測器，在本計畫的人臉
偵測部分，也採用這樣的架構。傳統單一分類器的作法，是輸入一個欲分類的特
徵，經過分類器後判定是否為目標物。架構雖然簡單，但是當特徵數量大或是分
佈情況複雜時，分類器的效能便會下降。串接式分類器可以透過數個分類器的串
聯，改善上述的問題，圖 2.4 表示了串接式分類器的架構。 
 
 
圖 2.4 N 層串接式人臉分類器的架構。 
 
在訓練分類器的時候，設定一個通過的門檻值 rh = 99.9%，使得大部分可能
的人臉影像能通過該分類器，同時，設定一個剔除非人臉特徵的剔除率 rf = 50%。
在整個串接式分類器中，前面的幾層分類器利用少數的弱分類器剔除大部分非人
臉的特徵，到了越後層的分類器，結合的弱分類器越多，也能判別出越正確的人
臉。根據整個分類器架構，當串接式分類器由 N 個分類器組成時，可以預期整
體的分類命中率(hitrate) hitR 為 
 
 Nhit hR r= ,      (19) 
 
而分類誤判率(false alarm) falseR 為 
人臉 
偵測視窗 
被分類為非人臉 
被分類為
人臉 
… 
rh rh rh rh rh
1−rf 1−rf 1−rf 1−rf 1−rf 
1 2 3 N−1 N 
  12
在室內監視環境中，監視多人臉影像同樣的是個相當大的挑戰。原因不外乎
是照明或光源的變化，與監視影像粗糙的影像品質，這些都會使得精確地追蹤人
臉影像變成一項困難的任務。另一個增加追蹤困難度的因素，是欲追蹤物（人員）
通常是走向攝影鏡頭，與一般要追蹤平行於影像平面運動的物體不同。後者因為
平行於影像平面運動，物體的尺寸不會有劇烈的改變。但是，人員經過走廊走向
攝影機，會使人臉影像在監視影像中有較大的變化性。當人臉距離攝影機遠的時
候，人臉影像會呈現較小的尺寸；反之，當距離鏡頭越近，人臉影像的尺寸會快
速地增加。因此，追蹤物的尺寸的改變，也增加了追蹤的困難度。 
要解決上述的問題，這裡提出一個兩階段的追蹤方法，來實現追蹤多人臉的
流程。整個追蹤流程如圖 2.5 所示，追蹤器包含兩個追蹤階段，每個追蹤階段使
用不同的特徵來表示物體（人臉影像）。第一個是色彩特徵(color feature)，利用
人臉膚色影像的特性來表示。第二個是材質特徵(texture feature)，用來表示該人
臉影像的組成特性。被追蹤的人臉影像，在第一階段用顏色特徵找出欲追蹤的候
選區域；第二階段使用材質特徵，在候選區域中找到準確的位置。 
 
圖 2.5 兩階段的多人臉追蹤流程圖。 
 
色彩特徵是經由色彩直方分佈圖(histogram)分析而得到的。為了避免亮度變
化對顏色所產生的影響，必須將 RGB 色彩空間的人臉影像轉換到 YCbCr 色彩空
間，並剔除 Y (luminance)成分的資訊。把 Cb 跟 Cr 兩個成分的色彩各亮化為 64
個色彩數後，顏色特徵向量 CF 可以表示為一個 1×128 的向量 
 
 Cb Cri iCF H H= ⎡ ⎤⎣ ⎦ ,      (21) 
 
抽取人臉影像的特徵 
階段 I 
找出追蹤候選區域 
階段 II 
決定精確的人臉位置 
色彩特徵, CF
材質特徵, TF
 
  14
其中 CFS 表示搜尋視窗中的色彩特徵，CFT表示樣板影像的色彩特徵。 
 
 追蹤的第二個階段，就是在候選區域中比對影像的材質特徵，也就是計算
DCT 轉換後係數的相似度。這裡使用相關係數(correlation coefficient)的計算來定
義樣板影像跟搜尋影像的相似程度 
 
          
2 2 2 2( ) ( ) ( ) ( )c
S T S T
S T T TS R
n TF TF TF TF
r
n TF TF n TF TF∈
−=
− −
∑ ∑ ∑
∑ ∑ ∑ ∑ , (26) 
 
其中 TFS 表示搜尋視窗中的材質特徵，TFT表示樣板影像的材質特徵。最後，決
定一個被追蹤的人臉影像的位置，可以利用下式來得到 
          { }
( , )
arg max ( , ) | ( , )
c
TF
x y R
L r x y r x y θ
∈
= > ,      (27) 
式子中的 TFθ 為一個決定的門檻值，L 是追蹤到的影像的位置。然而，當 L 為空集
合時，表示沒有任何影像材質特徵的相似度大於所設定的門檻值 TFθ ，這時候便
視為追蹤的影像不存在或追蹤失敗。 
 
 經由上述兩階段的追蹤流程，可以在監視影像中成功的追蹤多人臉影像。但
是對於多攝影機之間的追蹤，仍然無法正確的掌握。接下來便要說明，如何將目
前追蹤到的人臉資訊，傳遞給下一支相關連的攝影機並進行追蹤。 
 
2.2.2 多攝影機環境中的追蹤 
在多支攝影機環境中，追蹤人臉影像的工作會被延伸到在兩支以上攝影機的
監視範圍之間，或是由兩支以上的攝影機共同完成追蹤的工作。通常根據攝影機
的架設位置，可以將需要互相合作追蹤的攝影機歸為兩大類：監視視野有重疊與
監視視野沒有重疊兩種。監視視野有重疊的情況下，攝影機之間的追蹤工作能以
合作方式完成。換句話說，被追蹤的物體有機會同時出現在這些攝影機的監視影
像中。另一種情況則是監視視野沒有重疊的情況，這時候攝影機之間只有位置上
的關連性。例如說，被追蹤的物體即將離開目前的監視影像，但是根據架設的位
置與環境限制可以知道，該物體有可能會出現在另一支攝影機的監視畫面中。 
 
 在本計畫的監視系統中，由於監視的環境是出入口為主，因此大部分攝影機
之間的關係屬於監視畫面沒有重疊的情況。而畫面有重疊的攝影機之間，也因為
彼此距離遙遠，能夠在影像中被追蹤的物體，會以非常小的尺寸出現在另一個監
視影像中，無法進行特徵的比對與追蹤。因此，為了維持被追蹤人臉影像之間的
一致性，採用一個狀態分配器(status dispatcher, SD)跟追蹤狀態描述子(tracking 
  16
 
2.3 人臉辨識 
利用樣板比對的人臉辨識理論當中，基本上可分為三個步驟：特徵抽取，降
低維度，相似度比對。在特徵抽取的部份，有小波轉換(wavelet)[13,14]、餘弦轉
換(DCT, discrete cosine transform)[15,16]等等方法。小波轉換(wavelet)近年來常用
在影像壓縮、邊緣抽取、特徵檢測及紋理(texture)分析等問題上，小波轉換會將
資訊依其重要性的不同而保留在不同的頻帶中，低頻部份可以保留大部分人所能
觀察到的資訊，而高頻部份則是儲存細微的變化。在小波轉換中，最常被拿來做
為人臉辨識的是賈柏小波函數(Gabor wavelet)。整體來說，利用 Gabor wavelet 除
了可以同時提供一維或二維空間及頻域的資訊之外，它可以提供人臉上的特徵抽
取，尤其是利用 2D 的賈柏小波函數(Gabor wavelet)，其最大的特徵就是可獲得
不同的縮放比率(scale)和旋轉角度(orientation)的資訊，因此許多研究論文中都採
用賈柏小波函數(Gabor wavelet)作為一個抽取臉部特徵的工具。 
 
2.3.1 賈柏小波函數 
在面對人臉辨識問題時，由於在空間域中的人臉影像資料容易受到光源差異
等等的影響，因此頻率域的應用是一個常見而好用的方法。賈柏小波函數是基於
多通道的濾波原理，早期應用在處理人類視覺系統上的視覺資訊，是一個同時具
有空間與頻域特性的函數，由於它在空間的縮放及旋轉角度上有著不錯的特性，
因此它很快的被大家廣泛的應用在紋理如皮膚、材料、指紋、臉部表情等的分析
上。由於這樣的特性，我們可以藉此找出臉部最顯著的區域特徵，以作為臉部辨
識的依據。 
 
一個二維的賈柏小波函數可以看成是具有特殊頻率與方向的正弦函數和高斯
函數所構成，而賈柏小波函數的公式如下： 
           
2
2( )2 2
2
2
2
( ) [ ]
( , )
( cos , sin )
2 , ,  0,1,2,3,  0,1,2,3
8
T
T
T
T z z ik z
T
z e e e
z x y
k k
k v
κ κ σ
σκ
ν μ ν μ
ν
ν μ
κ κψ σ
κ ϕ ϕ
πϕ μ μ
− −
+−
= −
=
=
= = = =
   (29) 
其中 ( , )z x y= 為影像座標，參數 v 和 μ分別代表空間縮放及旋轉角度，在不同的 v
和 μ中的賈柏濾波器(Gabor filter)會有所不同。如下圖 2.7 所示。 
原本一張 64×64 (1×4096)的影像經過 4 個縮放及 4 個旋轉的 Gabor filter 後，
一個特徵向量將會是 1×65536，由於這樣的資料量過大，我們可以先將做完 Gabor 
filter 後的特徵向量做降低取樣的動作，降低取樣使為原本的 1/4，再去掉邊界，
  18
 
經過主要成分分析的轉換，我們可將原本資料量為 3600N × 轉變成 N P× ，而
所使用的主要特徵向量的多少，則試資料量的大小而定，使用主要成分分析的好
處在於可以將資料量降低，以便於比對及辨識的工作。 
 
2.3.3 支援向量機器(SVM：support vector machine) 
支援向量機器是一種建立在統計學習理論基礎上的機器學習 (machine 
learning)方法，透過學習演算法，它可以自動尋找對分類較有幫助的支援向量
(support vector)，藉此加大組與組之間的差距，因此這種方法有較好的分類準確
率。如同主要成分分析一樣，透過了核(kernel)的使用，可將原始空間的向量映
射到高維度特徵空間中，藉此獲得最佳的分類超平面(hyperplane)，以解決原本空
間不可分離的問題，因此，它被廣泛被運用在分類的問題上。藉此，我們就可以
利用支援向量機器達成一個較好的分類方式，以提高人臉的辨識率。 
 
2.4 系統架設與實驗結果 
本章節將對於本計畫所研發的人員影像監控系統的架設與實驗結果，做一個
詳盡的說明。整個實驗的結果包含說明實驗設備與系統的架設規劃，以及對三個
子部分：人臉偵測、人臉追蹤跟人臉辨識個別的實驗結果，還有測試整個系統的
表現，以及跟 RFID 主系統連線整合的情況。在討論的部分，會針對本系統的表
現作一個簡單的結論。 
 
2.4.1 人員影像監控系統的架設環境 
本計畫所研發的人員影像監視系統包含了硬體與軟體兩個部分。在硬體方
面，主要有數支監控出入口的監視攝影機，與實現人員監控演算法的計算處理平
台。實驗的環境，選擇國立交通大學工程五館八樓的 T 字形環境進行實驗，分為
兩個區段的走廊共計四個出入點的監控。每個出入點配置兩支攝影機，負責監控
進入與離開兩個方向，監視的環境與攝影機配置如圖 2.8 所示。 
 
實現演算法的計算處理平台，由兩部 Pentium®-IV 3.4GHz 的 PC 來負責。八
支攝影機透過網路連線至電腦，每台電腦分別處理四支攝影機的資訊。兩台電腦
之間也由網路連接，共同完成多攝影機的監控追蹤處理。軟體部分，本監控系統
的開發與執行環境使用 Windows XP 作業系統，利用 Borland C++ Builder 開發監
控軟體，實現本系統的人員管制功能。圖 2.9 為本監控系統的軟體執行介面，每
一台電腦可以直接監控四支攝影機，而軟體也具備網路連線的功能，可以跟另外
一台電腦上的監控軟體互相合作。 
  20
 
圖 2.10 影像監控系統的架構圖。 
 
2.4.2 實驗結果 
本系統在前述的架構與環境下，進行人員進出管制的實驗。由於室內環境的
光線影響相當大，因此實驗的進行也需要顧及不同時間下，環境光源改變造成的
干擾，以便確保所研發的系統有足夠的穩健性。實驗的進行分為三個部分：人臉
偵測、人臉追蹤與人臉辨識。人臉偵測的實驗，目標是能夠對所有攝影機所監視
的影像中，正確偵測到經過的人臉影像。人臉追蹤的部分，則是分成單攝影機與
多攝影機兩種狀況，加上單人與多人追蹤組合成四種實驗模式。人臉辨識則是辨
識所偵測到的人臉，是否能正確識別。要評估系統的效能與正確率，首先定義正
確率 Rc為: 
 tpc
total
R
Ω= Ω ,      (32) 
其中 tpΩ 表示正確偵測、正確追蹤或是正確辨識的人臉數量， totalΩ 為在所有影像中
所出現的人臉數量。另外需要定義 Type I (false positive)與 Type II (true negative)
錯誤率 Rfp, Rtn 為: 
 
,
,
fp
fp
neg
tn
tn
pos
R
R
Ω= Ω
Ω= Ω
      (33) 
其中 Rfp 表示影像中沒有人臉影像卻有被檢測出人臉，或是沒有追蹤目標物卻持
續追蹤的錯誤率。 fpΩ 表示出現誤判為有的總數， negΩ 表示總共沒有人臉影像的數
量，或是不需要追蹤的影像張數。而 Rtn 表示影像中有人臉卻沒有被檢測出來，
或是有追蹤目標物卻追蹤失敗的錯誤率。 tnΩ 表示出現誤判為沒有的總數， posΩ 表
示總共需要檢測出有人臉影像的數量，或是需要追蹤的影像張數。 
  22
第三章 
讀取器之研製暨建立讀取器與電子標籤之傳輸系統 
射頻辨識利用無線電波（radio waves）的發射，來達到自動化辨識的功能，
是一種非接觸式的技術。藉由讀取器(interrogator or reader)發射訊號，欲辨識物
體上電子標籤（tag or transponder）的解讀，並送回讀取器所需要的資訊來達到
物體的自動化辨識。一個射頻辨識系統主要由以下兩個部分所組成： 
z 電子標籤(tag)：又稱為詢答機(transponder)，用來放置於想要辨識的物體或
人員上，接收讀取器發射的能量與信號，解調出內部的命令，再以另一頻率
送回此標籤的電子產品碼(Electronic Product Code，EPC)等一連串的數位識
別資料。一個電子標籤主要由耦合元件（天線）、無線射頻(RF)電路及微晶
片所組成。 
z 讀取器(reader)：用來傳送資訊給電子標籤和接收電子標籤所回傳的資訊。
一個典型的讀取器包含了一個 RF 模組（傳送器和接收器），一個控制單元
和耦合元件。除此之外，大部分的讀取器也包含了一個額外的介面（如：
RS 232、USB、WLAN 等）可和其他系統（如：個人電腦等）相連結，使
得它們可把接收到的資訊傳到其他的系統並進行分析與處理。而讀取器除了
負責與電子標籤之間的能量供給與通訊外，尚需肩負資料的安全性
(security)、可靠性(reliability)，以及處理資料碰撞(collision)的問題。 
 
電子標籤上電源供應（battery）的有無，我們可以將射頻辨識系統分成兩大類： 
z 主動式射頻辨識（active RFID）系統：電子標籤上附有電源，故自己本身就
可以提供微晶片操作和儲存資料所需要的電源。 
z 被動式射頻辨識（passive RFID）系統：電子標籤上不附有電源，所以電子
標籤必須在讀取器詢問的範圍之內，才能被驅動。藉由耦合元件，被動式射
頻辨識系統可以靠著讀取器所傳過來的電波來得到電源和資料。 
 
RFID 系統具有多樣性的特色，我們可以從各種不同的特徵來分類它。如：
電子標籤上攜帶資訊的位元數，電子標籤上記憶體的類型，各種不同的操作原理
程序、讀問機回應讀取器的方法及頻率，不同的頻率範圍等。而電子標籤也可以
擁有各式各樣不同的外型，必須依照應用來決定；它的外型也會影響到電子標籤
上天線的設計。在傳輸通訊的層面上，射頻辨識系統的設計也需要選擇不同的資
料編碼（encoding）與調變（modulation）技術，不同檢驗資料正確性和避免碰
撞的技術，不同確保安全性的技術方法等。 
 
  24
3.1 RFID 通訊協定及系統規格、參數決定 
3.1.1 第二代超高頻 RFID 標準規範 
國際上主要有兩個射頻辨識系統的標準技術：EPC 和 ISO。EPC 電子產品碼
系統源自麻省理工學院 Auto ID Center，現由 EAN 和 UCC 所共同成立的國際組
織－EPCglobal inc.接掌。而 ISO 之射頻辨識系統標準制定則是由 JTC1 主導。而
目前射頻辨識系統在 UHF 的頻帶範圍內所依循的標準，其中兩種為 ISO 組織中
的 ISO 18000-6 群組，另外其他則是 EPC global 所主導。本計畫則遵循 EPC Class1 
Generation 2 技術標準。 
 
第二代規範相當詳細地描述了電子標籤與讀取器應當如何通信，規範中定義
相關系統的物理與邏輯需求，以提供被動-反向散射(Passive-Backscatter)、讀取器
優先溝通(Interrogator-Talks-First, ITF)、射頻識別(RFID)系統，在 860 MHz～
960MHz 頻段操作使用，其溝通模式為半雙工，讀取器可具備 DSB-ASK、
SSB-ASK 或 PR-ASK 調變功能。電子標籤反向散射需採用 ASK 或 PSK 調變功
能。由 Tag 供應商選定調變格式。讀取器必須具備解調變這兩種調變方式。資料
傳輸率 80Kbps、160Kbps、320Kbps 和 640Kbps，比起第一代 70Kbps~149Kbps，
速率往上提升。並支援長達 256 位元的電子產品碼(EPC)，第一代至多為 96 位元。
並且可支援密集讀取器模式，有助於標籤在多讀取器近距離使用情況下正常工
作。 
3.1.2 超高頻 RFID 操作原理 
3.1.2.1 主動式射頻辨識系統與被動式射頻辨識系統 
電子標籤本身電源供應的有無，可以將射頻辨識系統分成主動式與被動式兩
大類。主動式射頻辨識系統和被動式射頻辨識系統的比較如下表： 
表 3.1 主動式射頻辨識系統與被動式射頻辨識系統 
 主動式射頻辨識系統 被動式射頻辨識系統 
電源裝置 內建（電池） 無 
電子標籤電源的獲取 持續的 只有在讀取器的讀取範圍
內才能獲得 
記憶體類型 典型為可讀且可寫 唯讀 
  26
(4). 資料儲存能力：主動式射頻辨識系統由於本身附有電源，擁有較大的功率可
以提供較大的記憶體電路來使用，再加上其電源供應是持續性的，使得我們
可以使用需持續供應電源的記憶體類型（一旦沒有電源，上面的資料將會消
失），也可以作較精準的資料操作。典型地，主動式射頻辨識系統的記憶體
容量通常為 128kbytes，而被動式射頻辨識系統的記憶體容量通常是 128bytes
或更小。 
 
另外值得注意的是，由於被動式射頻辨識系統需要讀取器持續傳送較高的功
率來驅動電子標籤，導致當鄰近有其他系統在相同頻帶下工作時，會被其干擾影
響。 而主動式射頻辨識系統，由於不需讀取器傳送大的功率，以及可以在較低
的工作週率（duty cycle）下工作，故可以和其他低功率短距離的系統並存。故
在綜合的應用上，我們必須為被動式射頻辨識系統專門安排一個頻帶，避免其和
其他系統互相的影響干擾。 
 
雖然主動式射頻辨識系統擁有許多的優點，但由於其價格明顯高於被動式射
頻辨識系統，導致目前的應用仍以低成本的被動式射頻辨識系統為主。在需要較
高安全性或快速移動物體上的應用等，則適合採用主動式射頻辨識系統。隨著應
用的不同與成本的考量，選取適當的射頻辨識系統來達到所預期的表現。而在某
些應用，甚至需要同時採用主動式和被動式射頻辨識系統，才能得到一個最佳的
解決方法。 
 
 現在主動式射頻辨識系統的標準仍在開發中，而 EPC Class 1 Generation 2 則
是定義 HUF 頻段被動式射頻辨識系統的最新標準(January 2005)，也是本計畫所
依循之標準。 
 
3.1.2.2 電子標籤操作原理 
電子標籤在不同頻段下，與 Reader 感應耦合的方式也不同，有感應式耦合、
封閉式耦合、電耦合、電磁反向散射耦合。在 UHF 頻段下，Reader 和 Tag 間的
感應是為電磁反向散射耦合的方式(Electromagnetic Backscatter Coupling)，此耦合
方式，讀取範圍可以達到 1 公尺以上，通常在 UHF（868MHz in Europe、915MHz 
in USA）和 microwave（2.5GHz 和 5.8GHz）上操作，由於具有更高的操作頻率(更
短的波長)，因此比一般感應偶合系統(HF)有更短的天線構造和更佳的能量傳輸
效能。 
 
下圖 3.1 所示是一個長距離系統之電磁反向散射耦合 Tag 的操作原理，相當
於雷達（radar）技術的操作原理。當物體的大小是大約比電磁波波長的一半要來
的大時，電磁波將會被其反射，反射的效率與物體的截面反射有關。當物體和電
  28
 
圖 3.2  讀取器操作原理 
 
在資料通訊過程中，主電腦(Host)與 Reader 之間有其通訊協定，Reader 與
Tag 間亦有其通訊協定以達到資料互傳目的。Reader 與主電腦相溝通的介面，可
以是有線方式的 RS232、RS485、RS422 介面，或者是無線方式的藍芽、GPS 介
面;Reader 與 Tag 間則靠無接觸之 RF 無線電波磁場感應作溝通，以進行資料寫入
或讀取操作。依 EPC C1 G2 標準，其 Reader 跟 Tag 之間訊號收發的操作類型程
序為半雙工模式，如圖 3.3HDX(Half Duplex)所示。 
 
 
圖 3.3 全雙工與半雙工和序列程序 
（downlink：從Reader到Tag的資料傳輸。uplink：從Tag到Reader的資料傳輸） 
 
 
  30
控制收發模組與收發天線發射 RF 無線電波能量以進行對 Tag 的讀取或寫入
資料動作。 
(2). 射頻模組(Radio Frequency Module) 
 此為一發射與接收電磁波之 RF 收發機(Transceiver)的收發模組，其中收發機
內的發射機(Transmitter)與接收機(Receiver)之功能如下： 
z 發射機功能 
發射較強之 RF 電磁波，用以提供被動式 Tag 所需之電源，以及使用 ASK
調變方式將資料寫入 Tag 內。 
z 接收機功能 
接收 Tag 所傳回之已調變數位信號(資料)，此調變的信號可以是移幅鍵控
(ASK)或移相鍵控(PSK)。 
(3). 收發天線 
發射 RF 無線電波能量之收發天線，在 HF 頻段，通常內建在 Reader 機殼內，
在 UHF 頻段，因讀取距離較長，所以收發天線會單獨存在。 
(4). 電源 
 提供各模組電路板所需之電源，其中又以發射 RF 無線電波能量之射頻模組
與收發天線最耗電。 
 
3.1.3  RFID 通訊協定及系統規格、參數決定 
通訊協定主要包括二資料通訊裝置之間的交握操作程序，以及所使用的通訊
線傳輸規則; 交握程序決定了資料互傳之步驟與正確傳輸之確認;RFID 通訊線傳
輸則包括全雙工、半雙工及序列程序的操作方式。而資料在調變傳輸之前，為了
跟傳輸通道特性相匹配，降低外部環境的干擾影響，讓接收端能以最大的機率正
確還原本來的資料，因而產生了各種資料編碼技術，也就是所謂的基頻
（baseband）編碼。所以原始的數位訊號在傳輸之前，發射端會先對其做編碼的
動作，接收端最後再對其做解碼的動作。 
 
 而發射機(transmitter)在傳送訊號到通道之前，會先與一高頻載波（carrier）
做調變，讓調變後的訊號能在通道中傳播的更遠、更能抵抗雜訊的干擾。之後，
接收機(receiver)再做解調變的動作，將訊號與載波分離。 
 
  32
須在詢問命令之前，並代表整個登錄環程(inventory round)的開頭。往後接下來的
訊息則使用訊框同步作為開頭。 
 
 
圖 3.6 Reader to Tag 的前導及訊框同步 
 
編碼上，位元 0 佔用一個 Tari 時間，而位元 1 佔用 1.5~2Tari 的時間，但實
際上，則需依靠 Reader 所發出的前導碼，來判斷 Tag 接受的數據佔用時間長度。。
而一個前導需包含：固定長度的起始定界符(delimiter)、數據 0 的符號、R=>T
校準(RTcal)符號、T=>R 校準(TRcal)符號。 
z RTcal：Reader 必須設定 RTcal 的長度等於位元 0 加上位元 1 符號的時間長
度。Tag 則必須能量測 RTcal 的長度，並且計算二分之一 RTcal 的時間定義
為 pivot，當 Tag 解譯之後 Reader 傳過來的數據，Tari 時間短於 pivot 的為位
元 0，長於 pivot 的為位元 1。Tag 解譯大於 4 個 RTcal 長度的符號為無用資
料。在改變 RTcal 之前，Reader 須傳送至少 8 RTcal 長的連續波。 
z TRcal：Reader 藉由使用前導的 TRcal 及分時比(DR)定義 Tag 反向散射回的
連結頻率(其 FM0 數據速率或是 Miller 次載波的頻率)，方程式(1)說明反向
散射連結頻率、TRcal 跟 DR 之間的關係。Tag 則需量測 TRcal 的長度，計
算出 LF，並校準 T=>R 的連結速率等於 LF。Reader 在任何一次的登入環程
中使用的 RTcal 跟 TRcal 必須符合方程式(2)的限制。 
                            calTR/DRLF =                        (1) 
calcalcal RT3TRRT1.1 ×≤≤×              (2) 
訊框同步比前導少了 TRcal，其他皆相同。對一個登入環程的持續期間來說，
  34
3.1.3.2.1 資料正確性的檢驗-Checksum 
在資料傳輸過程中，難免會受到雜訊的干擾，導致資料的不正確性，為了偵
測出資料的正確性與否，我們需要利用某種 checksum 的技術來偵測錯誤的發
生，以保持資料的正確性。常用的幾種 checksum 程序如下： 
(1). 同位元檢查（Parity checking）：每一位元組（byte）的資料，多附加一個同
位位元。同位位元不算，當設定奇同位，當有奇數個位元為 1 時，則同位位
元被設定為 0;偶數個位元為 1 時，同位位元設定為 1。而偶同位，則是當有
偶數個位元為 1 時，同位位元被設定為 0;奇數個位元為 1，同位位元設定為
1。這種方法是非常簡單易行且受歡迎的，不過它只能用來發現奇數個位元
產生錯誤的情況，而當有偶數個位元產生錯誤時，它將無法發現。 
 
(2). 縱向冗餘檢查（longitudinal redundancy check，LRC）程序：也就是所謂的
XOR checksum，它可以被快速並簡單的執行。它是將一個資料區塊的每一
個位元組相對應位置位元做 XOR 的動作，產生出一位元組的值（LRC），將
其附加於資料區塊之後並傳輸之；之後接收端會將資料區塊的每一位元組
（包括 LRC 值）做 XOR 的動作，若結果非 0，則表示有傳輸錯誤的發生。
LRCs 雖然可以被快速而簡單的計算，但多個錯誤發生時，也可能互相取消，
導致無法偵測，而產生一個不可信賴的結果。 
 
(3). 循環冗餘檢查（cyclic redundancy check，CRC）程序：簡單來說，它的操作
是先選擇一個多項式作為除數，將一個資料區塊當作被除數，進行除法之
後，得到的餘數值（CRC），將被附加於資料區塊之後；之後接收端會將資
料區塊加上 CRC，對同一個多項式做除法的動作，若餘數非 0，則表示傳輸
過程中，有錯誤發生。CRC 程序是一種值得信賴的錯誤偵測法，不過它的
計算和執行則比前面兩種方法較為複雜。 
 
EPC C1 G2 標準中使用 CRC-5 及 CCITT-16 CRC 做為錯誤偵測的方法。
Reader 對 Tag 傳送詢問(Query)命令時，使用 CRC-5 讓 Tag 做檢查;傳送選擇及存
取命令時，使用CRC-16程序讓Tag解碼檢查。而Tag所有回傳的訊息皆以CRC-16
程序編碼，Reader 則要負責解碼以偵測是否有錯誤發生。 
 
  36
因此 CCITT-16 需要一個 16 位元的訊框檢驗序列(FCS)，其做法為 k 位元資
料向上提升 16 位元，原 16 位元之位置補上 0，會產生一個新的(k+16)位元序列，
再將其除以 17 位元的 CRC 產生多項式，如上表定義之 X16 + X12 + X5 + X0 (X0 = 
1)，其二進位表示為 10001000000100001，產生之餘數即為訊框檢驗序列
(FCS)=CRC 碼。而最後傳出的訊號即為向上提升 16 位元的 k 位元資料+16 位元
CRC 碼=(k+16)位元訊框。當接收機接受此 k+16 位元資料，再次除以 P(x)，相除
後的餘數為 0，則表示資料傳輸無誤。其除法器的硬體電路實現可由移位暫存器
及 XOR 加法器所組成。 
 
EPC C1 G2 所使用的 CCITT-16 乃參考 ISO/IEC 13239 標準，如表 3.4 所示，
此編碼使用數位邏輯分析的步驟是先載入一個內容為 FFFFh 之 16-bit 移位暫存
器，稱之為「CRC」暫存器，然後將串列訊息(被除數)一次一個位元的輸入移位
暫存器。先輸入的是最高有效位元(MSB)，從高到底至最低有效位元(LSB)，當
串列訊息所有位元傳送出去，此時反置 CRC 暫存器內的數值，其為訊框檢驗序
列(FCS)。解碼亦是先載入內容為 FFFFh 之 16-bit 移位暫存器，然後接收串列訊
息，最高有效位元(MSB)先接收，最後接收的為 CRC 碼，當串列訊息已接受完
畢，此時留在暫存器內的數值若等於 1D0Fh，則可通過，代表此為正確訊息。 
 
 
圖 3.9  RFID Reader 的 CCITT-16 CRC 產生器結構 
 
3.1.3.2.2 防碰撞技術(Anti-collision) 
RFID系統為了能夠一次讀取多個標籤，Reader必須能夠知道同時有多個Tag
是被驅動的，但是當 Tag 在同時間將訊號傳回給 Reader 時，將造成彼此間的干
擾，使得讀取器無法獲得正確的資料，造成所謂的碰撞(collision)問題。克服的方
法通常是在資料傳輸上進行所謂的多工操作，允許數個使用者同時共用同一通
道，或是同一通道接收來自不同的資料源，常見的多工型態如下： 
z 分間多工(Space-Division Multiplexing，SDM) 
每一個時間者使用各自的線路當通道，因此每一位使用者可同時使用相同的
頻率。其有各自的傳輸線路、發射器和接收器，因此任何一位使用者的任何
  38
Tags 在每一會議層須固定一個獨立的登入旗標，四會議層中任一個都有兩個登入
旗標值，定義為 A 跟 B，在每次的登入環程的開始，Reader 在四會議層中之一
選擇登入 A 或是 B Tag，而在其中之一會議層中，Tag 參與其登入環程時，其他
層的 Tag 是不能使用也不能修改其登入旗標值的。被給定的會議層中， Tag 提
供分別獨立的登入旗標值，其他 Tag 來源在會議層被共享。 
 
會議層允許 Tag 對每個不同的 Reader 連結至分別獨立的登入旗標值。當
Reader 獨立區隔出一個 Tag 之後，Reader 便會發出一個命令，使得 Tag 在其會議
層中反轉其登入旗標值。(如 A->B 或是 B->A)。接下來的例子解釋兩個 Reader
如何使用會議層和登入旗標去區隔跟完全的登入一 Tag 群而不會發生衝突。  
 
z Reader 1 啟動，那麼 
¾ 它開始一個登入循環，並區隔出 S2 會議層中的 A Tags 並反轉成 B。 
¾ Reader 1 關閉。 
z Reader 2 啟動，那麼 
¾ 它開始一個登入循環，並區隔出 S3 會議層中的 B Tags 並反轉成 A。 
¾ Reader 2 關閉。 
 
 
圖 3.10  會議層圖解 
 
這個程序不斷的重覆，直到 Reader 1 已經將會議層 2 中所有的 Tags 反轉成
B，然後它把會議層中的 Tags 從 B 反轉回 A 並登入。同樣的，Reader 2 把會議
層 3 中所有的 Tags 反轉成 A，從 A 反轉回 B, 然後登入其 Tags。藉著多步程序，
每個 Reader 可以在它的範圍內獨立地登入所有 Tags，而不須理會它們的登入旗
標的初始狀態，Tag 啟動時應以如下的方式登入旗標 
  40
(3). PSK（phase-shift keying）調變：傳送端使用載波相位的改變來傳送資料。
而 binary PSK 是最簡單常見的一種，利用兩種不同的相位（0 度、180 度）
來表示基帶編碼後的訊號。使用 PSK 也提供了不錯的噪音容忍度，適度地
簡化了讀取器的設計，並且跟 FSK 相比起來有更快的資料傳輸率， 
 
 
圖 3.11  不同的調變技術(a)100%ASK (b)binary FSK (c)binary PSK 
 
 EPC C1 G2 規範了 Reader 對 Tag 的通訊調變方式為雙旁波帶-移幅鍵控
(DSB-ASK)、單旁波帶-移幅鍵控(SSB-ASK)及反相移幅鍵控(PR-ASK)，如圖 3.12
所示，其中 ASK 調變深度最小為 80%，最大 100%，一般為 90%。如表 3.5 所示。 
 
 
圖 3.12  ASK 調變波封 
 
  42
 
圖 3.13  電磁場輻射場型(Radiation Patterns) 
 
 超高頻 Reader 使用的天線以電信法所規定的增益範圍內，在結構允許的大
小、欲設計讀取範圍內作自由的選擇。對於 13.56 MHz，UHF，及 2.45 GHz 之
RFID，其天線的原理有所不同。13.56 MHz 主要靠的是電磁感應，感應距離較近;
而 UHF 及 2.45 GHz 則是利用天線共振所產生之電磁波，由 Tag 之天線接收，故
其有高指向性，讀取距離較遠。由於為了使超高頻 Reader 能夠讀取較寬廣範圍
距離的 Tag，所以我們使用圓形極化波的天線。天線的極化是指輻射波電磁場向
量的極化方向，通常天線的極化包括直線(垂直或水平)、圓形(右旋圓形極化
RHCP 與右旋圓形極化 LHCP)、及橢圓極化。 
 
 圓形極化波如圖 3.14 所示，其電場分量大小相等且彼此相位差為 90 度，可
以讀取 y 及 z 兩個方向，直線極化僅能讀取單方向，因此圓形極化天線會比直線
極化天線擁有較佳的讀取場形，且對於某些使用直線極化天線的 Tag，若無法確
定其擺放位置，則 Reader 使用圓形極化天線會是較佳的。不過讀取距離會比直
線極化天線稍近一些。 
 
圖 3.14   圓形極化波 
 
 
  44
 
圖 3.16  環行器運行方向 
 
3.2.3  IQ 正交解調改善接收訊號準確度的分析 
在 RFID 的信號傳輸上，接收是比傳送更重要的課題，因為電子標籤反向散
射傳回的訊號非常微弱，即使經過特定的調變及編碼方式，仍然會受雜訊及失真
的影響。因此本計畫亦著重接收機應選擇何種的解調方式會使效能較好。由於多
數的雜訊干擾影響的是振幅，因此在尋求較佳的抗雜訊能力上，會選擇搭配解調
相位的方式。 
 
其中 IQ正交解調可將RF訊號分為同相(in-phase)與正交(quadrature)的 I/Q兩
個基頻訊號，I 為 A*Cos(ψ)，Q 為 A*Sin(ψ)。此兩訊號因為彼此正交，所以不
會互相干擾。此兩訊號進入類比-數位轉換器編碼之後，處於 I 與 Q 兩狀態間的
信號 S(t)=Accos(2pfct+ψ(t))，會隨原訊號相位和振幅而改變，藉由二維的相量比
較，其判別訊號的準確性比單純判別一維的振幅大小要來的高。因此這種的數位
調變方式具有高可靠度及對雜訊有較高的免疫性。 
 
 
圖 3.17 I/Q Demodulator 
 
 
  46
3.2.4.2 功率放大器 
 功率放大器(以下簡稱 PA)的主要功用為把所要發射出去的訊號的功率做一
個提升，如此訊號被送到天線時才有足夠的能量發送到 tag。功率放大器與一般
放大器最大的分別在於正常操作時的效率，一般來說，PA 的效率為輸出功率除
以電源功率，由於耗電及熱效應的問題，PA 必須盡可能在有限的功率消耗下，
使用大信號操作，以提供大功率輸出，相對於一般放大器，雖然電流消耗低，但
正常操作下輸出的功率也低，如此效率便遠低於 PA 了。PA 的基本特性列表如表
3.6。 
表 3.6  功率放大器基本特性 
 
   
目前 PA 的分類以輸出輸入電壓的關係來看的話可分為線性 PA 跟非線性
PA。線性 PA 包含在電子學中所學過的 A 類、B 類及 AB 類三種，而非線性放大
器則有 C 類、D 類、E 類及 F 類。而在本次計畫中，預計採用 E 類 PA，故以下
將對其簡短的介紹。如圖 3.19，包含一個並聯 NMOS 的電容 Cs，及一組串聯的
諧振電感 Ldc、Ls，還有一個負載電阻 RL。至於 NMOS 則是拿來當作開關(Switch)
使用。首先當 NMOS 導通時，電流流過 NMOS，電晶體上的電壓降到最低。而
當 NMOS 關閉時，電流轉流向其負載。注意我們須盡量使 NMOS 在導通期間，
跨於其汲極(Drain)與源極(Source)之間的電壓達到最低，因為在 NMOS 切換過程
中，暫態功率消耗主要是來自 NMOS 上的電壓跟切換電流相乘所產生的，故減
小導通電壓對減低暫態功率有很大的幫助。圖 3.19 為 E 類功率放大器最理想的
操作狀態，在電晶體切換瞬間，暫態功率消耗達到最小。在計畫中預計使用的 E
類 PA 即是希望能達到下圖 3.20 所展現的操作情形。因為 E 類 PA 有著較大輸出
振幅，其輸出電流最大可達 1.7A，輸出電壓最大甚至可以超過 Vdd，可以提供
相當大的輸出功率，所以很適合拿來當作 Reader 中 RF 訊號功率的放大器。 
 
  48
成的接收機產生非線性的效應，一般交互調變失真產生多是發生於接收
機同時收到相同射頻帶但不同頻道的信號時，通過接收機的非線性效應
而產生許多諧波，萬一不幸有諧波的頻率與所接收的頻道相同，則會干
擾到收到的信號，要解決此問題，除了提高接收機電路的線性度，規劃
接收機中頻頻率，避免產生的諧波落到接收的頻帶中也是很重要的。 
 
9 選擇性(Selectivity)：需能從強烈干擾性雜訊中偵測需要的低電位訊號，
有關的干擾可能是同頻道、頻帶內或頻帶外的雜訊。許多訊號會同時進
入接收器的前端，但只有一種訊號是需要的，因此其他訊號必須全部加
以抑制，令其減弱不會影響或損害所需的訊號強度，否則位元錯誤率便
會上升，強烈的干擾也會減低 LNA 的靈敏度。 
 
3.2.5.1  接收機架架構 
目前在射頻接收機的設計架構上，我們採用低中頻接收機的架構，因超外差
式接收機結構較複雜且適合較高的頻帶，如此內部設計的方式越有助於降低鏡像
頻率的干擾。而直接轉換式雖然結構簡單，但是容易有直流補償(DC offset)及 LO
洩漏的問題。低中頻的做法是將接收到的訊號降至很低的中頻位置，多為訊號頻
道寬的數倍，如此一來，就可以利用帶通濾波器將頻道內的信號取出，且移除掉
直流電壓的漂移。另外為了克服鏡像頻率，乃透過電路技巧使其鏡像頻率混波後
的訊號相位旋轉，進而產生相消的效果。其架構如圖 3.21 所示： 
 
圖 3.21  低中頻接收機架構 
 
圖 3.21 是接收器的類比和混合訊號零件，類比前端包含射頻自動增益控制
器（RF AGC）、低雜訊放大器（LNA）、射頻混波器、可程式增益放大器（PGA）
和類比數位轉換器。射頻混波器提供兩組輸出，隨後則是複雜的鏡像拒斥（image 
rejection）處理作業。 
 
  50
RFV
SL
gL
dL
LC
SR
outV
BC
1M
2M
1GV
2GV
1GR
2GR
DDV
GL
1C D
L
inZ
 
圖 3.22  低雜訊放大器 
 
( ) s
gs
m
gs
gsin LC
g
sC
LLsZ 11 +++=  
Ω=≈ 50sT Lω     其中
gs
m
T C
g 1=ω  為電晶體電流的單位增益頻寬 
    操作頻率 MHz
CLL
f
gsgs
o 925)(2
1 ≈+= π  
 
3.2.5.3  混波器 
接收的 RF 訊號，經過 LNA 的放大後，需再經由混波器降至基頻。混波器
的電路如下圖 3.23，其中 BIASV 提供此電路的偏壓電流，RF 訊號透過一個 DC 
blocking 電容 BC 被接在電晶體 1M 的閘極。首先電晶體 1M 將 RF 訊號的電壓訊
號轉換成電流訊號，然後在電流 domain 做相乘的動作。在這個混波器中， LOV 必
須被選的夠大，使得電晶體
32 MM、 能夠完全地交互切換流經 1M 的電流，因此，
流經 1M 的電流，等效上來說被乘上一個方波，而此方波的頻率就是等於共振頻
率 OL :  [ ]{ }tIItti RFRFBIASLOout ωω coscossgn)( +=  
 
因為一個方波由 fundamental 的奇數個 harmonics 所組成，所以此方波乘上
( )tII RFRFBIAS ωcos+ 會在輸出端的頻譜上產生許多不想要的頻譜部份，因此我們
會在混波器的下ㄧ級接上濾波器，以過濾掉不想要的頻譜。 
 
  52
玻纖環氧基板即可達到所需的技術要求，其材質為環氧樹酯及玻璃纖維，介電系
數 Er =4.1~4.6。 
 
在佈局之前，先了解所謂的電磁干擾(Electromagnetic Interference，EMI)，
其來源包括微處理器、開關電路、靜電放電、發射器、暫態電源元件、電源以及
閃電。在一個微處理器為基礎的電路板內，數位時序電路通常是寬頻帶雜訊的最
大產生者，這所謂的寬頻帶即指分佈於整個頻譜的雜訊。隨著快速半導體以及更
快的邊緣變化率的增加，這些電路可能產生高達 300 MHz 的諧波干擾，這些高
頻諧波應予以遮蔽或濾除。我們需要了解雜訊如何傳輸有助於辨識電路內部的電
磁干擾問題，雜訊的發生必需要有來源(source)、耦合路徑(coupling path)以及易
感染的接收器(susceptible receptor)，若是三者之一被排除於系統之外或被減少，
干擾才會消失或降低。 
 
基本上所有的電子電路都會發射 EMI 同時又受到 EMI 的干擾，因此電子裝
置的設計，應該既不受外在 EMI 干擾源的影響，本身也不應成為 EMI 的干擾源，
此一設計理念即為電磁相容性(Electromagnetic Compatibility, EMC)。大多數電子
設備的 EMI 是藉由傳導性方式接收，少數則來自無線電頻率之輻射接收。在數
位電路中，最臨限(most critical)的信號通常最易受到 EMI 的干擾，例如重置、中
斷以及控制線路信號。在類比電路中，類比低階放大器、信號轉換器、補償電路
等，則對雜訊干擾最為敏感。電磁干擾的防治主要可歸納為兩種不同的型式：降
低電磁干擾的散佈與提高電磁干擾的免疫能力。經由適當的系統設計可以抑制電
磁干擾的散佈；如果問題仍然持續，就得研究不同方式的遮蔽去包住發射體。電
路對雜訊的敏感性可藉由電路設計的加強以及使用遮蔽物來降低電路對電磁干
擾敏感性。 
 
3.2.6.1  元件佈局 
PCB 佈局之前應先注意將元件放置在適當的位置，一方面需考慮電路板外
部接線端子的位置，另一方面也需考慮不同性質的電路應予以適當的區隔。不良
的元件擺置將使得 EMI 雜訊很高。所以較佳的設計中，低階類比、高速數位以
及雜訊電路(繼電器、高電流開關等等) 應加以分隔以降低子系統間的耦合。當
放置元件時，應同時考慮子系統電路間的內部電路繞線，元件間的擺置影響元件
間相連接的線路問題，若放的不好，會將彼此間的走線拉的很長，而使得雜訊更
有可能經由線路進路系統，若能夠將走線設計的很短，EMI 的影響將會減少，此
在數位電路中的時序及震盪電路特別重要。為了去除 EMI 的潛在問題，應該系
統化的檢查元件放置與線路佈局，返覆檢視及修正佈線一直到確定所有的 EMI
風險降低到最低為止，簡而言之，事先的防範是降低 EMI 干擾問題的首要原則。 
 
  54
 
圖 4.26 佈線的較佳角度 
 
3.2.6.3  電源線佈局 
PCB 的地線佈局完成之後，接下來就是電源線的佈局。若空間許可，電源
線應與地線平行，但從實際觀點而言，此點未必可行。電源線的雜訊通常可藉由
適當的電源濾波電容與解耦電容將之濾除，所以應先考慮地線的佈局，再考慮電
源線的佈局，在佈完接地線及電源線後，就是訊號線的佈局，訊號線的佈局以最
敏感的系統線路最先考慮，並去除電路間的耦合路徑，此外還要注意到在印刷電
路板的正面與反面的電源線與接地線盡量避免有重疉的現象，以免產生電源線與
接地線之間有電容的產生。如圖 4.27 所示： 
 
 
圖 4.27  佈線差異造成的電容效應 
 
 
  56
型的「實體層」與「資料鏈結層」。實體層處理的資訊為位元串流(Bit Stream)，
依不同的傳輸型式，以不同的編碼方式將資料送出，而接收端也以相對應速率接
收並解碼。資料鏈結層則為點對點的協定，負責確保兩端點間資料傳輸的正確
性。也就是說，實體層負責傳遞資料，資料鏈結層負責檢查資料。 
 
 實體層需規定在何種傳輸媒介，使用何種編解碼方式、傳輸頻寬、工作時脈、
電壓高低、相位轉換等細節，資料鏈結層則把守第一關的資料的偵錯工作，確保
傳送及接收雙方的資料正確性，並定義媒體存取控制的方法。 
 
3.3.1.2  網路層(Network Layer) 
此層處理整個網路中封包的移動，如封包的路由 (Routing) 、定址
(Addressing)。通常網路依其涵蓋範圍的大小可分為區域網路(LAN)、都會網路
(MAN)及廣域網路(WAN)，若發送封包與接受封包的網路不屬於同一個區域網路
(LAN)時，就需要網路層協助封包做傳送路徑的選擇。而最佳路徑的選擇除了考
慮兩點間參與路由節點數之外，還需要考慮線路品質、可靠度、使用率、頻寬、
成本等因素。此外每個網路裝置需有其獨立的位址或名稱，以便每個裝置彼此間
能互相搜尋以發送資料，至於位址與名稱的分配及定義就是由網路層所決定的。 
 
網路層對應到 OSI 七層模型為同名的「網路層」，由 IP(Internet Protocol)、
ICMP(Internet Protocol Message Protocol)以及 IGMP(Internet Group Management 
Protocol)所組成。 
 
3.3.1.3  傳輸層(Transport Layer) 
傳輸層的主要工作是為其上的應用層提供兩端(End-to-End)的資料傳輸功
能，其中有兩個不同的傳輸協定。一者為UDP，僅負責將資料段(datagram)由一
端主機送到另一端主機，但不保證資料收送一定成功，其可靠度需由應用層加
入；另一者協定為TCP，提供兩主機間可靠的資料流傳輸，其傳輸方式是先將資
料切割成多段適當大小的資料，給予編號，以利接收端重組。此協定同時包含了
流量控制、偵錯處理的機制。因此採用TCP協定通訊的資料在收發上較為可靠。 
 
網路層對應到 OSI七層模型為同名的「傳輸層」，主要負責兩個應用程式之
間的通訊，包括  TCP(Transmission Control Protocol)與  UDP(User Datagram 
Protocol)通訊協定，TCP 屬於連接導向(Connection oriented)的通訊協定，提供可
靠性 (Reliable)的傳輸服務，UDP 屬於非連接導向(Connectionless)的通訊協定，
提供非可靠性 (Unreliable)的傳輸服務。 
 
  58
成多個訊框傳送。而訊框標頭(PR、SD)及檢查碼(FCS)，則由網路控制器產生，
若控制器一但檢測到有效的訊框標頭(PR、SD)，則開始接收資料。 
 
3.3.2.1  連線服務 
運作於網路最底層，指示資料如何自一台主機經由網路連線媒介傳遞到另
一台主機。連線服務並不保證資料能以正確的順序抵目的地，甚至無法保證資
料能到達目的地。其中包含下列數種協定，分述如下： 
 
3.3.2.1.1  IP(Internet Protocol) 網際網路協定： 
 IP 的主要目的是為了提供通訊子網之間的連接，以形成可傳輸資料的網際
網路，主要有下列幾個功能： 
z 定址(Addressing)：為了使資料能在不同類型、不同的傳輸介質及不同的電腦
系統間有效地傳輸，通信協定必須定制一套通用的定址方法來辨別網際網路
中的每一台主機。理想的標定格式必須能提供足夠的跨網資訊且不佔太多的
儲存空間，目前通用的IP都是以IPv4(48位元)為標準。由於網路的發達，所以
現有的IP數量將面臨不足的問題，IPv6將是解決這個問題的下一代協定。 
 
z 封包的切割(Fragmentation)和再組合(Reassemble)：由於在封包傳送過程中可
能會跨越不同架構的實體網路，而每一實體網路都有定義的最大封包大小的
限制(Maximum Transfer Unit, 簡稱 MTU)，所以在傳送的過程中有時必需將
封包切割成數個較小的個體才能將它繼續往目的地傳送。所有封包的切割與
再組合是屬於連線服務中 IP 的工作。 
 
z 路由(Routing)：IP可以幫助資料封包尋找、解決傳送的路徑，負責決定一個
封包要經由怎麼樣的路線才能到達目地的。 
 
下表3.9是一個IP標頭的規格，除非有特別的選項存在，一般正常的標頭大
小是20個位元組。 
 
表 3.9 IP 標頭欄位規格 
版本 
(4-bit) 
標頭長度 
(4-bit) 
服務類型 
(8-bit) 
總長度 
(16-bit) 
認證碼 
(16-bit) 
旗標 
(3-bit) 
區段位移點 
(13-bit) 
存活時間 
(8-bit) 
協定 
(8-bit) 
標頭錯誤檢查碼 
(16-bit) 
來源 IP 位址(32-bit) 
  60
它就會在網路上廣播一個 ARP request 封包來詢問 B 的實際位址，主機在 B 收到
此一訊息之後就會回送一個 ARP reply 封包給 A，上面有它自己的硬體位址資
料。如此，A 就可知道 B 的實際位址了。 
 
但是若使用者在每次傳送資料時都要做一次 ARP 的廣播詢問，則會對區域
網路造成負擔，因此網路上的每一部主機在自己的快取空間或記憶體中都會維護
一份 ARP table，儲存一些近期所記錄的位址轉換資訊，主機在傳送資料之前，
先在 ARP table 中查詢是否有其所需資訊，如此可以減少大量 ARP request 封
包的數量，以提高資料傳輸的效率。不過 ARP table 的容量有限，無法將所有主
機的硬體位址包括進來，因此其管理和維護必須依系統的特性及需要，找尋一個
最佳的策略。下圖 3.29 是 ARP 的封包格式。  
 
 
 
圖 3.29  ARP 的封包欄位格式 
 
3.3.2.2  傳輸服務 
運作於網路中間層，可增強上述的連線服務，以提供完整可靠的通訊品質。
TCP/IP在傳輸服務中，有TCP及UDP兩種協定，各具有連接導向與非連接導向性
質，分述如下： 
 
3.3.2.2.1  UDP(User Datagram Protocol) 使用者資料段協定： 
UDP是一個簡易、資料段導向的傳輸層協定，UDP從應用程式接收訊息之
後，加上來源及目的埠號、檢查碼後，把此UDP的資料段送到IP封裝，IP會盡可
能的遞送UDP資料段，但不保證會到達目的地  
 
UDP在運作時採用了一個重要的概念—通訊端點位址(Port)。雖然 IP是識別
不同主機的唯一標記，但我們若僅使用一個 IP位址，在某些環境下並不足以明
確地指定資料接收端的身分，這是因為每個主機可能有多個使用者同時使用，而
每個使用者又可能會同時產生好幾個作業程序(Process)。因此若在每一使用者啟
動一個網路應用軟體時便指定一個 Port號碼給它，如此就可以真正明確地區分發
  62
z 全雙工式通訊(Full Duplex)：封包一旦扺達正確的IP位址，TCP就開始在發送
端和接收端的電腦上，為正被傳送的資料建立起對話(Dialog)，而兩端可以
分別進行資料 的收發。由於此全雙工的特性，使得確認回覆的工作可以輕
易地達成。 
z 資料流(Stream)：TCP是以資料流型的傳輸型態來傳送資料，即資料像流水
般有次序地從本端主機流向遠方主機，而遠端主機則依序自資料流中讀取資
料，將它傳給應用程式去處理。但當某些資料必須優先處理時，接收端就會
進入緊急狀態(Urgent Mode)，開始接收緊急資料(Urgent Data)。每個 TCP 封
包可攜帶一長串的資料，而不是一個位元、一個位元地傳送。 
 
 有了TCP，資料傳輸的可靠性由它來處理即可，上層的應用程式只要把要傳
送的資料透過介面丟給TCP匯流排，而不必煩惱資料如何正確無誤地傳送到接收
端。應用程式當然還是可以直接利用IP在自己的程式裡控制資料傳輸的可靠性，
但這樣做會造成上層應用程式的負擔，程式也較不容易維護。基於網路上分層處
理及程式設計模組化的觀念，最好還是透過TCP來做可靠性的資料傳輸。下表3.12
是TCP的封包格式。 
 
表 3.12  TCP 封包欄位規格 
來源端埠號 
(16-bit) 
目的端埠號 
 (16-bit) 
發送序號 
(32-bit) 
確認序號 
(32-bit) 
標頭 
長度 
(4-bit) 
保留 
(6-bit)
U 
R 
G 
A 
C 
K 
P 
S 
H 
P
S
T
S
Y
N
F
I
N
窗口長度(window size) 
(16-bit) 
檢查碼 
(16-bit) 
緊急指標 
(16-bit) 
選項 
(Variable Length) 
資料 
(Variable Length) 
來源端埠號： 16 位的來源埠號欄位包含了來源端應用連接的埠值。來源埠號與來
源 IP 位址一起用於標識資料段的返回位址。 
目的端埠號：16 位元的目的埠號欄位定義了傳輸目的的應用連接的埠，這實際上
是資料接收端主機上的應用程式的位址。 
發送序號： 32 位元的發送序號指出段中首位元組資料的序號，該序號值由接收端
主機使用，用於重組段中的資料，以獲取一個完整的資料。該序號能夠解決 TCP
所要求的有序接收遇到的問題。 
確認序號： 32 位元的接收序號僅當 ACK 旗標設置時有意義。其中的值表示下一
個期望接收的第一個資料位元組的序號。這個欄位用於對所收到的資料段的確
  64
件, 以下簡述其行為模式。 
 
 為了取得 Web 文件，網頁瀏覽器會開啟連到伺服器80埠號的TCP連線，接
著利用HTTP送出一個”請求(request)”的要求，而伺服器則送出”回應(response)”，
請求及回應僅為一行或幾行文字，每一行以換行(Newline)字元結尾。若請求成
功，則資訊會透過此TCP連線送出，並在傳送完成後關閉。在實作中，HTTP指
令稱為方法，本論文使用get方法，應用如下： 
 
z 請求(Request)： 
在最簡單的格式下，請求由文字列所組成，它包含大寫關鍵字”GET”、檔案
名稱、協定識別字，以及換行字元。 
GET /index.htm HTTP/1.0<CR><LF> 
在GET方法之後的是可選用的標頭，包含有關瀏覽器的進一步詳細規格，例
如組態以及它能接受的文件格式。 
GET /index.htm HTTP/1.0 
Connection：Keep-Alive 
User-Agent：Mozilla/4.5 [en] (win95; I ) 
Pragma：no-cache 
Host：10.1.1.11 
Accept：image/gif, image/jpeg, image/png, */* 
Accept-Encoding：gzip 
Accept-Language：en 
Accept-Charset：iso-8859-1,*,utf-8 
標頭的結尾是由一行空白行來標示(也就是歸位和換位)。 
 標頭項目包括一個區分大小寫的標頭名稱，其後是接著一個冒號、一個
空白字元，以及一個標頭數值。上面的範例提供參考。 
 
z 回應(Response)： 
伺服器會以包含HTTP版本號碼、狀態碼和描述的回應列(response line)來回
應，例如：HTTP/1.0 200 OK。或者如右的錯誤訊息：HTTP/1.0 404 Not 
Found。 
伺服器接著會送出格式類似於請求標頭的選用標頭資訊。下面的回應來自於
廣泛使用的Apache伺服器。 
HTTP/1.0 200 OK 
Last-modified：Mon, 10 Apr 2000 09：01：53 GMT 
Server：Apache/1.1.1 
Context-type：text/html 
Context-length：1783 
  66
 
圖 3.31 主程式流程 
 
3.3.4  網路應用程式 
目前大部分作業系統的網路應用程式，都是承襲自 BSD(Berkeley Software 
Distribution)的架構，雖然其可完成全部的 TCP/IP 協定，但是其程式碼較為龐大，
複雜度也較高，耗費較高的資源，不適合用於 8 位元微控制器系統，本計畫目的
也非要求大量的資料傳輸或是負責極為重要的可靠性傳輸，因此在網路應用程式
上，採取較精簡的方式，但仍然支援 TCP 協定中資料重發的功能。 
 
下圖 3.32 是本計畫在乙太網路訊框解析的簡單流程： 
  68
應用程式被呼叫時，將設置全域變數uip_conn去指向當前連接的uip_conn結
構以區分不同的服務 。一個典型的應用是檢查uip_conn->lport (當地TCP埠號)去
決定那個服務連接應該提供。例如，如果值uip_conn->lport等於80，應用程式可
以決定啟動一個HTTP服務，值是23是啟動TELNET服務。 
 
3.3.4.1  程式系統介面 
uip_init(),uip_input(),和uip_periodic()3個C函數組成uIP。從系統的立場看，uIP
由uip_init()函數用於初始化uIP堆疊和在系統啟動期間呼叫。當網路控制器讀取
一個IP封包到緩衝區時，呼叫函數uip_input()。週期性運行是呼叫uip_periodic()，
代表的是一秒一次。呼叫uIP函數是系統的職責。 
 
z uIP/設備驅動介面 
當設備驅動讀取一個輸入封包在封包緩衝區裡(uip_buf)，系統應該呼叫uip_input()
函數。函數將會處理這個封包，有事件發生時會呼叫應用程式。當uip_input()返
回，一個輸出包放在封包緩衝區裡。封包的大小由全域變數uip_len約束。如果
uip_len是0，則沒有封包要發送。 
 
z uIP/週期計時介面 
週期計時是用於驅動所有uIP內部時脈事件，例如封包重發。當週期計時激發，
每一個TCP連接應該呼叫uIP函數uip_periodic()。連接編號傳遞是作為引數給
uip_periodic()函數的。類似於uip_input()函數，當uip_periodic()函數返回，輸出的
IP封包要放在封包緩衝區。 
 
3.3.4.2  程式應用介面 
z 接收資料 
如果測試函數uip_newdata()值為1,遠端連接的主機有發送新資料。uip_appdata指
標指向實際資料。資料的大小通過uIP函數uip_datalen()獲得。在資料不是被緩衝
後，應用程式必須立刻啟動。 
 
z 發送資料 
應用程式通過使用uip_send()發送資料。uip_send()函數採用兩個參數；一個指標
指向發送資料和資料的長度。在一個時間裏應用程式只能在連接中發送一塊資
料。因此不可以在每個應用程式啟用中呼叫uip_send()超過一次；只有上一次呼
叫的資料已被發出後才可以。呼叫uip_send()以後會改變某些全域變數，在應用
函數返回前它不能再被呼叫。 
 
  70
 下表 3.14 整理了系統主要使用的函式： 
 
表 3.14  uIP 主要函式整理 
系統介面  
uip_init() 
uip_input() 
uip_periodic() 
初始化uIP 
處理輸入封包 
處理週期計時事件 
應用程式介面  
uip_listen() 
uip_connect() 
uip_send() 
uip_datalen() 
uip_close() 
uip_abort() 
uip_stop() 
uip_stopped() 
uip_restart() 
開始監聽埠 
連接到遠端主機 
在當前連接發送資料 
輸入資料的大小 
關閉當前連接 
中止當前連接 
停止當前連接 
查找連接是否停止 
重新啟動當前連接 
測試函數  
uip_newdata() 
uip_acked() 
uip_connected() 
uip_closed() 
uip_aborted() 
uip_timeou() 
uip_rexmit 
uip_poll() 
遠端主機已經發出資料 
確認回應發出的資料 
當前連接剛連上 
當前連接剛關閉 
當前連接剛中止 
當前連接剛超時 
數據重發 
應用程式迴圈運行 
其他  
uip_mss() 
uip_ipaddr() 
htons(),ntohs() 
獲得當前連接的最大的段大小 
將IP位址結構封裝 
在主機和網路之間轉換位元組次序 
 
3.3.4.3  網路協定實現 
本計畫實現了四個基本協定，ARP、IP、ICMP 和 TCP，分別解說如下： 
z 位址解析協定(ARP) 
ARP協定映射了IP位址和乙太網路MAC物理實體位址，它在乙太網路上的TCP/IP
操作是需要的。ARP在uIP裏實現的是包含一個IP到MAC位址的映射。當一個IP
  72
一方完成它的資料發送任務後就能發送一個FIN來終止這個方向連接。當一端收
到一個FIN，它必須通知應用層另一端幾經終止了那個方向的資料傳送。發送FIN
通常是應用層進行關閉的結果。收到一個FIN只意味著在這一方向上沒有資料流
程動。其TCP的連線與終止進行如圖3.33及3.34所示： 
 
圖 3.33  TCP 連線示意圖 
 
 
圖 3.34 TCP 連線終止示意圖   
 
在uIP，每個TCP連接的完全態包含當地和遠端的TCP埠編號，遠端主機的IP
位址，重發時間值，上一段重發的編號，和連接的資料段的最大尺寸。除此之外，
每個連接也可以保持一些應用狀態。三個序列號是，期望接收的下一個位元組的
序列號，上一發送段第一位元組的序列號，下一發送位元組的序列號。連接的狀
態由uip_conn結構表現，可以在下述程式碼看到。一個uip_conn結構陣列用於在
  74
當應用函數返回，TCP檢查應用程式是否還有資料要發。如果有，一個TCP/IP
封包會形成在封包緩衝區裡。 
 
(3)輸出處理： 
輸出處理過程比輸入處理較直接簡單得多。基本上，所有TCP和IP頭欄位由
uip_conn 結構裏的值充滿，計算TCP和IP的校驗和。當uip_process()函數返回，
封包通過網路設備驅動發送出去。 
 
(4)重新發送： 
當uIP通過periodic_timer被呼叫時，重新發送就開始進入運作(周期計時介
面 )。連接裡有些特殊的資料 (如資料發送出去但仍沒有確認回應的 )通過
UIP_OUTSTANDING位元在uip_conn 結構裏的TCP狀態標誌變數旗標。那個連
接，時間變數減少。當時間到達零，上一段必須重發和呼叫應用函數去做真正的
重發。如果一個特殊段重發編號超出一個可設置的界限，連接會結束和發一個
RST段到遠端連接結束，呼叫應用函數去通知它連接超時。 
 
(5)重置TCP 
TCP規格要求如果TCP頭裏的序號和確認回應序號在當前連接的接收視窗
失去了，有RST (重置)旗標設置的封包必須斷開連接。為了減少代碼的大小，本
論文不嚴格遵守這個規定。相反，如果一個有RST標誌設置的封包在連接裏到
達，連接會消滅那些不重要的序號和確認回應號值。 
 
下圖 3.35 是 TCP 可能具有的狀態。狀態之間的箭頭表示可能發生的狀態變
遷，箭頭旁邊寫上的文字是引起這種變遷的原因以及發生狀態變遷後又出現什麼
動作。粗箭頭表示客戶進程的正常變遷，虛線粗箭頭表示伺服器進程的正常變
遷，細線箭頭表示非典型變遷。主要觀察的是兩種粗箭頭表示的狀態變化過程。 
 
  76
第四章 系統平台網路整合與性能監控技術之研發 
4.1 系統網路通訊協定與界面技術之研發 
4.1.1 系統架構與概述 
RFID 系統網路架構之目標是建立全球一致的物件識別環境，未來所有和物
件相關的資料都將透過網際網路，在世界各地移動。RFID 網路系統都必須快速
並有效的執行資料存取和搜索。因此，針對建構全球網際網路基礎上的 RFID
網路系統，設計了 Savant 管理系統、ONS 及定義 PML 語彙，來管理日趨複雜
的資料存取問題。 
 
在 RFID 網路架構下，讀取器讀取標籤資料後，透過讀取器與 Savant 連線，
EPC 便進入資料處理的程序。首先，經由 RFID 中介軟體 (Savant)，此部份專
門處理由一或多個讀取器傳入的 EPC 資料。主要是過濾、收集、處理標籤資料，
並依據所處理完之資料轉送至 ONS。ONS 會轉譯 EPC 為統一資源定址格式 
(Uniform Reference Locators，URLs)，該 URL 存有物件資料。另外，ONS 提供
一個全球查詢服務，透過查詢能找到遠端資料庫，以便物件有效管理與追蹤。
PML (Physical Markup Language)的目的在於提供一個包裝 EPC資料的標準商品
格式，除了有一致的資料分類方式外，還可收集產品本身的相關資訊，和產品
流程的相關資訊。如圖 4.1 所示，為 EPC 標準架構下的 RFID 系統網路架構。 
 
 
 
圖 4.1 EPC 標準架構下的 RFID 系統網路架構圖 
 
根據 EPC 標準之 RFID 系統網路架構延伸至資訊平台與網路監控之功能，
將其系統軟硬體建構出如圖 4.2 之架構。 
 
  78
 
圖 4.2、系統功能與界面圖 
 
表 4.1 RFID Savant 系統架構規格 
界面設計 系統規格 相關元件 軟硬體需求 主要功能 
電子標籤
界面 
TCP/IP 通訊協定。 
EPC 標準資料編碼
格式。 
XML 封包資料格
式。 
AWID 讀取器、
TCP/IP 網路界
面。 
Linux、C++、
AWID 讀取器。 
提供對讀取器控
制之功能。 
處理讀取器回傳
之資料。 
TCP/IP
網路界面 
TCP/IP 通訊協定。 電子標籤界面、
ONS 界面、資料
庫界面。 
Linux、C++。 提供各子系統連
上網際網路之功
能。 
ONS 界
面 
TCP/IP 通訊協定。 
ONS 資料封包格式。
BIND 指令語法。 
物件名稱伺服器
(ONS)、TCP/IP
網路界面。 
Linux、BIND、
C++。 
提供將 EPC 轉換
為 URN 資料格
式之功能。 
提供搜尋遠端資
料庫位址之功
能。 
資料庫界
面 
TCP/IP 通訊協定。 
XML 封包資料格
式。 
TCP/IP 網路界
面、資料庫平
台。 
Linux、C++、
BCB。 
提供將 EPC 轉換
為 XML 資料格
式之功能。 
提供聯結遠端資
料庫之功能。 
 
4.1.3  系統設計與實現 
4.1.3.1  Tag Interfaces 
根據上一節系統功能與界面之探討，接下來將設計及實現個個界面。首先
是電子標籤界面，本系統是採用 ISO-16000-TypeB 標籤與 APPLIED WIRELESS 
ID ( AWID ) 讀取器，操作在超高頻之頻寬內。此標籤內含記憶體 20Bytes，如
  80
例，圖 4.6 為系統型態韌體版本讀取命令；圖 4.7 為標籤型態之 UID 讀取命令。 
 
 
圖 4.6 系統型態韌體版本讀取命令 
 
From To Command ACK/Response
Host Reader 12 11 0E 00 00 00
00 00 00 00 00 00
00 00 2B F0 xx xx
00 or FF
0D 11 0E 01 A8 E5 8F 80 B8 40 
09 xx xx
Command 12 11 0E 00 00 00 00 00 00 00 00 00 00 00 2B F0 xx xx
12 18
11
0E UID
xx xx 12 11 0E 00 00 00 00 00 00 00 00 00 00 00 2B F0
ACK 00
FF
Response 0D 11 0E 01 A8 E5 8F 80 B8 40 09 xx xx
0D 13
11
0E UID
01 A8 E5 8F 80 B8 40 09
xx xx 0D 11 0E 01 A8 E5 8F 80 B8 40 09
 
圖 4.7 標籤型態之 UID 讀取命令 
 
 
 
 
  82
 
圖 4.8、DNS 階層式架構圖 
 
 
圖 4.9、ONS 階層式架構圖 
 
(2) 授權： 
在次強調，為了易於管理網路上的資源，透過『授權』給下層子網(Sub 
Domain)的方法，能夠減輕各主機間的工作量，讓搜尋上更有效率。 
 
(3) ZONE： 
此部分實際用於軟體設定上，主要功能是在『解析』，把網址轉為位址(稱為正
向解析)或把位址轉為網址(稱為反向解析)。下圖為 ONS Zone file 的相關設定(以
BIND 軟體設定)，ONS 根目錄為 ONS Root，下層的 Name Server 為
0614141.sgtin.id.onsepc.com，在此名稱伺服器設定了 EPC 解析的方式。 
 
  84
Object.Manager.Type.id.onsepc.com，其中 Object 為 EPC Object Number；Manage
為 EPC Manage Number；Type 是依據 EPC 標頭碼(Header)來訂定。 
ONS 客戶端遵循下面明確的程序去對 ONS 發送詢問。 
(a) 當讀取器讀取標籤 EPC 後會先經由 Savant 將 EPC 轉換為標準的網
路資料格式。例如，urn:epc:id:type:0614141.0000024.400。 
(b) 為了能對 ONS 詢問，須將網路資料格式轉換為網域名稱格式，此
轉換的程序為移除 urn:epc: ，(範例中保留
id:sgtin:0614141.0000024.400)。 
(i) 移除 Serial Number，(範例中保留 id:sgtin:0614141.0000024)。 
(ii) 以(.)符號取代(:)符號，(轉換為 id.sgtin.0614141.0000024)。 
(iii) 將編排順序反向排列，(為 0000024.0614141.sgtin.id)。 
(iv) 最後加上.onsepc.com.形成 ONS 標準詢問格式
(0000024.0614141.sgtin.id.onsepc.com.)。 
(c) 最後透過 Savant 將 ONS 標準詢問格式發送至 ONS 找尋其相對應
之遠端伺服器位址。 
 
完成資料轉換後，接著透過 TCP 網路界面將 ONS 資料發送至 ONS 伺服器，
由 ONS 伺服器找尋與資料相對應的遠端資料庫位址，最後再經由資料庫界面將
EPC 資料完整寫入資料庫內。 
 
4.1.3.3.3  DNS&ONS 實作： 
我們使用 BIND 這套工具軟體在 Linux OS 下建構 DNS 與 ONS，以下是實
作上的程序： 
DNS 建構：在 Linux 下屬於 BIND 的檔案有： 
(1) /etc/named.conf：如圖 4.12，該設定檔設定 DNS 的 ZONE，負責制定、
管理其下層的物件名稱伺服器，目的是將網路上的主機做『階層化』的
工作，實際解析之功能主要在其所指定的系統檔案內，如
named.sgtin.id.onsepc 設定檔主要提供網域名稱為 sgtin.id.onsepc.com.之
正向解析功能。因此，該設定檔主要是階層化其下層之名稱伺服器，為
ONS 系統主要的核心。 
 
  86
 
圖 4.14、本機設定檔 
 
(4) /var/named/named.127.0.0  ；同上，但是是作反解設定，自行設定非原
本就有。 
(5) /var/named/named.正解檔案  ；正解的相關設定，自行設定非原本就
有。例如 named.sgtin.id.onsepc：圖 4.15 表示 ONS 正解的設定，負責設
定網域名稱與位址的對應關係。 
 
 
圖 4.15 網域名稱之正解設定 
 
(6) /var/named/named.反解檔案  ；反解的相關設定，自行設定非原本就
有。例如 named.140.126.20：圖 4.16 為 ONS 反解的設定，負責設定位
址與網域名稱的對應關係。 
 
  88
建立 Socket，在設計中使用了 Socket( )函數，目的在指定該硬體或軟體通訊協
定的類型與通道的建立。完成通訊協定後，再來就是兩者間的通訊，此時還有
一個極重大的問題，就是主從關係。例如以標籤界面而言，讀取器隨時等待
Savant 所下達之指令，邏輯上 Savant 就是客戶端，讀取器相對的就是伺服端；
對 ONS 界面而言，ONS 也隨時都等待 Savant 對 ONS 的詢問，邏輯上 Savant
也是客戶端，ONS 則是伺服端。 
 
當角色關係建立完成，接著提供有效的通道供軟、硬體作資料的傳輸。通
道的實現來自於埠(Port)的概念，若網路位址相當於住址，埠就相當於門，門沒
開啟人員就無法進出。所以埠扮演網路應用行程之間的大門。 
 
下圖 4.18 為各界面利用網路界面系統來達到資料傳輸之執行流程。 
 
圖 4.18 TCP 網路界面系統執行流程 
  90
用戶端之應用介面開發為極其重要之一環，正確讀取相關之產品資料、
追蹤產品之狀態，以及遠端遙控讀取器等功能開發，都可讓廠商無須親
臨現場，都可掌控產品之狀態。 
(4) PML Server(EPC IS)：為提供整個系統所有資料之資訊平台，包含 RFID 
Middleware 以及 Application 之所有查詢、新增以及更新介面之資料均
紀錄在此資訊平台中。 
 
4.2.2  系統功能與界面 
在系統資訊平台與網路監控技術中，其系統功能與界面如下： 
(1) PML Server (EPC IS)之建構 
(a) EPC Definition 
(2) Web Server： 
(a) Dynamic Display and Tracking 
(b) Network Monitoring for Reader (Remote IE：使用者) 
(3) Information Center: Middleware 
(a) Management Interface: Supervisor 
(b) Database Interface 
(c) Reader Interface: Loader, Data transformation and transmission for Tag 
EPC, Reader control 
 
結合以上功能界面進而完成人員追蹤與管制系統之實現。 
表 4.2 為根據資訊平台與網路監控技術所規劃出之系統規格與界面設計標
準。其所使用設計界面之軟體為 BCB(Borland C++ Builder)，架設 Web Server 之
伺服器為 IIS(Internet Information Service) Server，以及資料庫之建構是使用 SQL 
Server。 
 
表 4.2 系統架構規格與界面設計 
界 面 設
計 
系統規格 相關元件 軟 硬 體 需
求 
主要功能 
讀取器 
界面 
TCP/IP 通訊協定 
EPC 資料編碼格式 
XML 封包資料格式
AWID 讀取器 
資料庫界面 
BCB 
AWID 讀取器 
與讀取器溝通
並處理讀取器
回傳之資料 
資料庫 
界面 
TCP/IP 通訊協定 
XML 封包資料格式
SQL 指令語法 
讀取器界面 
系統資訊平台(PML 
Server) 
 
BCB 
SQL Server 
接收儲存讀並
驗證取器界面
傳送之資料 
管理 
界面 
SQL 指令語法 系統資訊平台(PML 
Server) 
BCB 
SQL Server 
管理與應用資
料庫中所有系
統資訊 
資 料 追 XML 資料格式 
SQL 指令語法 
Web Server 
系統資訊平台(PML 
IIS 
SQL Server 
遠端管理與應
用資料庫中所
  92
號已非常足夠，因此這三種版本對系統都可行，可依照管理者之管理方便而選
用。 
 
表 4.4、EPC-64 之三種版本 
EPC-64 特色 
EPC-64 Ⅰ 1. 特別適用於生產大量單一產品的製造商 
2. 可發號給兩億製造商，超過現今 EAN.CCC 會員數的兩倍 
3. 可涵蓋每家公司 13 萬種商品，超過 UPC 
EPC-64 Ⅱ 1. 提供產品辨識給大量且價格敏感度高的消費性產品商 
2. 140 兆各品項可擁有單一編號 
EPC-64 Ⅲ 1. 該版本在三者中擁有最多的 Domain Manager 
2. 適用於小公司、服務業和組織機構 
3. 賦予超過 6500 個公司單一編號 
4. 鼓勵更多、不同企業的使用者 
 
4.2.3.2  XML 之資料傳輸 
PML(Product Markup Language)是由 Auto-ID 中心設計發展之語言，目的在
於提供一個共通和標準的方法來描述實體流程和環境。PML 主要是以 XML 為
基礎，因此依 PML schema 所包裝的訊息，可在網路上任何兩個支援 XML 訊息
傳遞的系統裡傳遞。 
 
XML 之作用，事實上如同 HTML 一般，用來統一包裝資料，以便資料傳
遞時，能以有一致的資料分類方式，方便系統查詢、或統計。例如定義讀取器
類別時，應包含有讀取器 ID、地點等屬性，或規定標籤關於尺寸的屬性名稱等。 
 
XML 所描述的資料主要是著重於獨立於垂直產業之外，盡量是可用於各應
用系統的元素，例如位置、物品的移動、產品成本、價格和所有者等。具體來
說，XML 便可用於遠端監測和控制物品因應實體環境的變化，例如：可記錄到
讀取器 Y 偵測到的標籤 X，目前正位於甲板 Z；遙測時，測量環境溫度，藉此
淘汰不新鮮物品或執行其他有效的控制。其他還包括收集產品相關資訊：如物
品基本資料；或收集流程相關資訊，例如配送時程控制。結合監控、統計這些
資料，系統可以變化出許多應用。 
 
然而如何在網路上建構支援 XML 訊息傳遞的系統，須包含有一 Web Server
以及資料庫，在此 Web Server 為 Microsoft 作業系統中的 IIS(Internet Information 
Services )，資料庫為 SQL Server，因此資料庫有支援 XML 資料格式定義，然
而其動作流程如圖 4.21 所示，SQLXML 就是 XML 與資料庫間之溝通橋樑，
  94
4.2.3.3  網路監控之通訊協定 
透過網路，針對讀取器進行遠端監控時，需要有一通訊協定與聯接讀取器
之介面進行溝通，因此在此使用 CGI(Common Gateway Interface)，與控制讀取
器之介面溝通。 
 
CGI 規定了 Http server 和 CGI 程式之間傳遞參數和結果的方法，如圖 4.23
所示，顯示 CGI 與伺服器以及瀏覽器之間的關係流程，若是瀏覽者瀏覽 CGI
程式之網頁，伺服器則會將直接傳給 CGI 應用程式，藉由 CGI 處理資料，回傳
輸出資料給伺服器，藉由伺服器再傳至瀏覽器上，以供瀏覽者資料處理後之結
果，例如：瀏覽者在某一網頁中，要申請使用者帳號，而此帳號申請網頁由 CGI
程式寫成，則伺服器會判斷此網頁為 CGI 程式，而傳送至 CGI 應用端，藉由
CGI 程式處理資料，擷取出所需資料，儲存至資料庫中，更進一步藉由伺服器
回傳資料處理完畢之資訊至瀏覽器上。 
 
因此若要進行遠端遙控讀取器時，必須透過 CGI 通訊協定，擷取出網頁中
要傳送之控制指令，傳輸至連結讀取器之控制介面中，藉由此控制介面辨識控
制指令，進而控制讀取器之狀態。 
 
 
圖 4.23、CGI、伺服器與瀏覽器之流程 
  96
資料庫界面
Socket
網路
界面
程式
解XML資料
封包
伺服端
資料庫
接收讀取器界面
傳送之
XML資料封包
 
圖 4.26 資料庫界面之功能 
 
資料庫界面利用 Socket網路界面程式伺服端與讀取器界面之 Socket網路界
面程式用戶端連接，而接收經由讀取器界面中之資料處理界面傳送而來的 XML
資料封包，並且解其資料封包，將 XML 資料格式轉換成資料內容，並根據其
內容對應資料庫中資料表之欄位而存入資料庫，且可能增加未包含在 XML 資
料封包中的資料，例如存入時間，如圖 4.26 為資料庫界面之功能。 
 
(3) 管理界面 
資料庫為系統的資訊平台，提供整個本報告之系統架構的全部資訊做適當
之儲存、管理與應用。因此在 RFID 中介軟體界面需要有管理界面，以提供使
用者可以藉由管理界面，而獲取系統之相關資訊，所以管理界面提供管理資料
庫之基本功能： 
(a) 資料定義：管理界面需管理系統運作時，而儲存至資訊平台中的所有資
料項，因此須明確定義其資料表中欄位的資料型別或是資料條件限制等
等，以防止使用者在輸入資料時，發生錯誤還儲存至資料庫中，而造成
資料庫之負擔。 
(b) 資料處理：管理界面需提供使用者對資料庫的存取能力，如新增、查詢、
刪除等基本功能。 
(c) 資料安全：管理界面要需要有保護系統資訊安全的機制，因此需設定使
用者的帳號、密碼及權限，讓不同的使用者只有存取該授權範圍內的資
料，以防止機密資料外洩，或是資料庫遭受任何有意、無意的破壞。 
(d) 資料備份：必須製作系統中之資訊平台的資料備份，以防止資料庫不幸
意外毀損時，還可以還原至備分資料時的內容，以減少資料的損失，也
避免浪費時間。 
 
 
 
 
 
  98
圖 4.28 瀏覽器、伺服器與資料庫關係圖 
 
(2) 遠端監控界面 
遠端監控界面與讀取器界面中的讀取器控制界面觀念相同，只是遠端監控
界面需要由用戶端之瀏覽器，透過伺服器(Web Server)，藉由 CGI 界面與應用軟
體溝通，在此的應用軟體即為讀取器，圖 4.29 為遠端監控界面之運作流程。 
 
圖 4.29 遠端監控界面運作流程 
 
在此 CGI 界面之功能可分為三項，擷取資料、傳送資料以及顯示資料： 
(a) 擷取資料：將使用者由用戶端瀏覽器之點選的讀取器控制指令擷取出
來，辨識指令內容，為啟動或是停止讀取器偵測電子標籤，以利用 CGI
語言編寫控制指令。 
(b) 傳送資料：由於讀取器接收控制指令為 Socket 網路界面之伺服端，因此
在 CGI 界面中，需使用 CGI 語言撰寫 Socket 網路界面的用戶端，而傳
送對讀取器的控制命令，或是接收由讀取器回傳之結果。 
(c) 顯示資料：利用 Socket 網路界面的用戶端接收讀取器回傳之資料，並將
此資料轉換為 MIME 文件，藉由伺服器，以 HTML 格式顯示在用戶端
瀏覽器中，讓使用者得知訊息。 
  100
從簡易的 Client 端與 Server 端測試，近而進行 RFID 中介軟體與讀取器之
整合測試，即為 RFID 中介軟體界面中的讀取器控制界面，藉由 Socket 網路界
面程式之用戶端，與讀取器之伺服端溝通，對讀取器下達控制指令，並接收其
偵測電子標籤之資訊；再將其資訊封裝成 XML 資料封包，藉由另一個 Socket
網路界面程式之用戶端，傳送至 RFID 中介軟體之資料庫管理界面之伺服端，
此為讀取器控制界面之功能，圖 4.32 即為讀取器控制界面，運作控制讀取器以
及資料處理之功能。 
 
 
圖 4.32 RFID 中介軟體與讀取器界面 
 
圖 4.32 中包含有兩個連線，一個是與讀取器的 Socket 網路界面程式之伺服
端的連線，而另一個是與資料庫管理界面的 Socket 網路界面程式之伺服端的連
線；讀取器控制指令為可對讀取器之狀態下達的控制指令包含啟動、關閉讀取
器以及讀取記憶體資訊；而讀取器回傳之資料則為接收讀取器偵測之電子標籤
的資訊，包含 UID 與記憶體之資訊，並擷取有用之資料顯示於其中。 
 
(2) RFID 中介軟體與資料庫之整合測試，則是整合 RFID 中介軟體中所有功能
界面，並透過使用者登入/登出之界面管理 RFID 中介軟體的安全性，圖 4.33
則為 RFID 中介軟體所有功能界面流程圖，其所包含之功能界面有： 
  102
 
 
圖 4.34、遠端遙控讀取器之網頁 
 
(4) 網頁與資料庫之整合測試 
網頁與資料庫之整合測試，為利用網頁管理與應用資料庫中之資訊，且利
用其 XML 資料格式傳送其資訊；網頁中有管理與應用資料庫之界面，透過此
頁面，將此頁面中之已知或是需填寫之資訊完成，且傳送給網路伺服器，透過
伺服器與資料庫溝通，資料將其條件符合之資料以 XML 資料格式回傳給伺服
器，伺服器透過 XLST 文件將 XML 文件中資料擷取出來，並重新排版，以 HTML
資料格式輸出至瀏覽器給予使用者得知。圖 4.35 為網頁查詢資料庫之界面，在
網頁中輸入要查詢之資料條件，透過伺服器與傳送給資料庫，資料庫將其資料
XML 資料格式回傳，並以 HTML 格式顯示於網頁上。 
  104
 
圖 4.36 空間佈置圖 
 
 
圖 4.37 讀取器高度示意圖 
 
在實驗室中的監控系統功能方面，如圖 4.38 所示，在圖中，資料庫主要儲
存經由 Middleware 處理後之資訊和儲存、管理 Tag ID 所需資料；Web Server
是讓瀏覽者可透過網路，顯示資料庫追蹤監控的資訊並且可以透過網路對讀取
器做遠端監控；RFID Middleware 具有 Data filter 功用其主要是將電子標籤資料
  106
 
圖 4.40 監控系統實測畫面 
 
 
圖 4.41 監控界面人員位置 
 
4.3.3  系統整合與測試 
本節將說明完整系統之整合與測試，如圖 4.42 所示，為本子計畫之完整系
統架構。該架構中，本地端主機負責控制 Savant，Savant 接收本地端主機命令
後，並對讀取器發佈命令，當讀取器完成動作後，隨及回傳資料給 Savant，Savant
再依所接收資料完成相對應之資料處理。若所接收到之資料為 UID 或讀取器狀
態之訊息，則回傳至本地端；若資料為 EPC 則轉換為 URL 與 XML，並依據
URL 訊息至 ONS 搜尋與想對應之遠端資料庫位址，最後將資料以 XML 傳送至
遠端資料庫。由於 Savant 在系統中，因其功能而扮演極重要之角色，是系統之
核心。以下將說明在完整系統整合與測試之情形。 
  108
送；電子標籤界面之實現，使得 Savant 能夠成功地對讀取器發佈命令；ONS 界
面之實現，讓 Savant 能將 URL 透過對 ONS 搜尋，得到資料庫位址；資料庫界
面之實現，把 XML 傳送至資料庫。 
 
 
圖 4.43 Savant Middleware 控制平台 
 
系統之整合與測試，則是將上述之各個子系統全部整合成一完整系統，透
過 Savant Middleware 連接讀取器與網際網路，接收並過濾讀取器之所偵測之電
子標籤上儲存的 EPC 資訊，並藉由網際網路與 ONS Server 溝通，將此 EPC 資
訊對應其資料傳送所在地之位址，進而根據此位址將相關資料以 XML 資料格
式傳送至資料庫中儲存，以作適當之管理與應用。利用 Information Center 的界
面設計與功能開發，來管理與應用資料庫中系統所有資訊；以及透過網頁的呈
現來完成 Internet Browser 的動態網頁的顯示與遠端監控功能。 
 
Internet Browser 透過網際網路以管理與應用資料庫中所有系統資訊，並且
遠端監控讀取之狀態，圖 4.44 為 Internet Browser 所有組成之網頁界面，包含有： 
(1) 網頁首頁：整合與管理所有 Internet Browser 的界面。 
(2) 使用者登入/界面：以提供 Internet Browser 的安全性，避免資料庫中系
統資訊遭受蓄意破壞；並有系統使用者權限設定，以區分為一般使用者
或是系統管理員。 
(3) 功能頁面：為選取所需要之功能頁面。 
  110
第五章 資料庫設計及決策機制之分析與建構 
 
建立資料庫系統的第一步就是要分析欲處理的資料有哪些，以及資料與資料
之間的關係為何。Entity-Relationship Data Model，簡稱 E-R Model，是一種圖形
化的表示工具，利用圖形符號來表示系統需求和處理流程，或是表示實體上每一
個實體之間的關係，能夠讓我們對資料與資料之間的關係做出精確的描述
[95][96]。 
 
關聯式資料庫是將許多表格依其關係及屬性作出關聯，讓每張資料表格彼此
都有相依相存的關係。當資料筆數少、表格數極少時，對小型關聯式資料庫並不
會顯得太過複雜。然而，當資料量相當龐大時，正確的資料庫設計除了可以讓以
後資料維護更加容易之外，資料庫的效能和彈性會更好。 
 
資料的正規化可以將關聯式資料庫的內容簡化，但仍可以保持正常的結果，
同時又能讓資料庫效能提升，而效能也必須視正規化的程度來定論。 
 
5.1  實體關係模式 
在實體關係模式中，主要包含兩大主要觀念：實體 (Entity)與關係
(Relationship)。所謂實體係指能由數個“(屬性，值)對”來描述的東西。例如小銘
這個人，可用(Name=小銘，School=國立交通大學電控系)這幾個“(屬性，值)對”
來描述。我們可以用任意的“(屬性，值)對”來描述一個實體，但為了便於歸納與
認知，通常我們會將這些東西加以分類，這些分類後的類別就是所謂的 Entity 
Type。同一類的東西可用一個名字來代表，它們都具有相同的屬性(Attributes)。
同一類東西所組成的集合稱為 Entity Set 或 Extension。Entity 的 Attribute 根據其
可能的值，可以有以下的分類： 
 
a. 簡單屬性：例如 Age 這個屬性值的範圍為大於 0 的整數。 
b. 多值屬性：指這個屬性有多個值，例如一間實驗室的研究方向可能分成
三組，影像處理、資料庫系統與電力電子等。 
c. 複合屬性：指這個屬性可細分為多個子屬性，如地址又可分為街道，縣
市，郵遞區號，國家等部份。 
d. 衍生屬性：指這個屬性的值是由其它屬性計算出來的，本身並不存在。
例如學校這個 Entity Type 可以有學生人數這個屬性，但這個屬性的值是
由學生這個 Entity 目前的 Entity Set 內的實體數目所決定。因此可以把學
生人數這個屬性視為衍生屬性。 
 
  112
正，就會發生不一致的狀況。因此，避免資料重複是相當重要的[96][97]。 
 
然而，在消除了大部分的資料重覆問題之後，往往卻衍生出另一個問題：資
料查詢速度緩慢！正規化會將資料表由一個細分成數張表格，若要找出其中的一
筆資料，則需要串連相關表格，而“串連相關表格”這個動作將直接影響系統效
率，造成查詢速度變慢；相對的要新增資料、修改或刪除資料時，也要找出相關
表格而予以新增、修改或刪除，更要確保交易時，資料是全部新增/修改/刪除成
功，只要有一個表格動作執行失敗，則須回至安全點的狀態中。這時可以“選擇
性”將某些必要的欄位做反正規化(Denormalization)，以期達到提高查詢的速度，
但前提必須在不造成資料庫系統錯亂的原則下進行。 
 
正規化主要分成五個步驟，1~5NF，其中 BCNF 位在 3NF 和 4NF 之間。圖
5.1 所示為各階段正規化的主要功能。 
a. 第一正規化(First Normal Form，簡稱 1NF。由 E. F. Codd 提出) 
b. 第二正規化(Second Normal Form，簡稱 2NF。由 E. F. Codd 提出) 
c. 第三正規化(Third Normal Form，簡稱 3NF。由 E. F. Codd 提出) 
d. Boyce/Codd正規化(Boyce/Codd Normal Form，簡稱 BCNF。由R. F. Boyce 
與 E. F. Codd 共同提出) 
e. 第四正規化(Fourth Normal Form，簡稱 4NF。由 R. Fagin 提出) 
f. 第五正規化(Fifth Normal Form，簡稱 5NF。由 R. Fagin 提出) 
 
 
圖 5.1 各階段正規化主要功能 
 
 
 
1NF 刪除重複群組
2NF 刪除依賴性
3NF 刪除遞移依賴性 
BCNF 刪除功能依賴性異
4NF 刪除多值依賴性 
5NF 刪除關聯依賴性 
  114
是由兩個欄位組成，就需要考慮其中的欄位和別的欄位是否有相依關係，需再進
一步拆解表格。 
 
若資料表的主鍵由多個欄位組成, 則資料表只要符合以下條件, 我們就說這
個資料表符合 Boyce-Codd 正規化的形式： 
a. 符合 2NF 的格式 
b. 各欄位與主鍵沒有間接相依的關係 
c. 主鍵中的各欄位不可以相依於其他非主鍵的欄位 
 
第四正規化可刪除多值依賴性，讓每一個關聯不會有任何非瑣碎多值的相關
存在。1NF 會讓表格變成一筆一筆相依賴的資料，而 4NF 禁止一個屬性欄位中
有兩個或更多的多值相依賴其中。BCNF 到 4NF 會移除任何兩個屬性的 Primary 
Key 成為兩個新的獨立上層實體。第五正規化消除關係表內的欄位關係所形成的
循環。5NF 在真實世界很少出現，從另一個角度來說，應該是很難設計成 5NF。
正規化的工作有時不必做得非常徹底，因為過多的資料表可能會降低系統執行的
效能。 
 
5.3  系統規劃與設計 
介紹過 ER model 與正規化後，接下來就要利用這兩種方法來規劃我們的資
料庫系統。本子計畫在整個 RFID 總計畫中扮演著決策中心的角色，主要任務將
判讀 reader 及 camera 所接收進來的資訊，經由後級伺服器的運算處理，解讀其
所代表的資訊，並決定系統的反應。分析系統功能之後，我們歸納系統將包含以
下實體：實驗室、人員、Reader、Tag、Camera，以及關係：就讀、代表、感應、
人臉訓練、人臉擷取、人員辨識。 
 
 我們以實驗室這個實體作例子，它的主要屬性有：實驗室的編號、名稱、主
持人姓名、聯絡電話，通訊地址、實驗室研究方向以及實驗室人數。實驗室名稱、
聯絡電話與通訊地址又可以細分下去，為複合屬性。實驗室人數為衍生屬性，會
隨著人員資料筆數的改變而影響到屬性值。實驗室的實體模型如圖 5.2 所示。表
5.1 為根據圖 5.2 所建立的實驗室基本資料表，從表中我們可以看到，每間實驗
室將給與一個編號就像學生的學號一樣，因為沒有任何一間實驗室會有相同的編
號，所以將編號當作資料表的主鍵用以作為區分資料錄。 
 
  116
 
圖 5.3 ER-model of System 
 
表 5.2 人員就讀實驗室資料 
 
 
表 5.3 人員與標籤對照資料 
 
 
表 5.4 閱讀器讀取標籤資料 
 
 
  118
假設至目標的預定路徑為 tr ，此為軌跡 ( )tp 所定義，即 ( ) tT =p r 。我們主要的
目標為驅動代理人群體沿著此路徑達到目標，同時，使代理人發展和保持某些想
要的隊列。在本篇報告中，我們提出了兩種設計方法，每一種設計皆使用虛擬領
導者幫助代理人追蹤預期路徑。 
 
F1: Specified formation (N virtual leaders) 
假設有 N 個虛擬領導者 idr ，i = 1,…,N，每個代理人有一個領導者。這些虛
擬領導者的軌跡為 ( ) it +p b ，其中， 2i R∈b ，i = 1,…,N，N 為常數向量。我們預先
定義 ib 為預期的隊列。 
 
圖 5.4 四種預期的隊列規格 
 
圖 5.4 為四種可能的預期隊列。實點表示代理人，而任意兩個以實線相連接
的代理人之關係為相互的鄰居。圖 5.4(a)為 N = 4 的代理人群體之正方形結構，
圖 5.4(b)、(c)和(d)分別為 N = 6 的例子，所有的鄰居代理人之間為等距離。在每
一個圖裡，任意兩個鄰居之間的距離為預期距離 d，且同時為感測半徑。在每一
個圖裡，我們將預期結構的幾何中心當為原點。我們也可以在需要轉換或旋轉的
時候，藉由改變 , 1,...,i i N=b 的值實行結構轉換和旋轉。注意， ib  的改變不能造成
不連續，因為放鬆週期(relaxation period)可被此改變所允許。在此種設計中， ib 必
須滿足以下兩種條件： 
1) 1
1 ( ) 0
N
i
i
t
N =
=∑b
 
2) 如果代理人 i 和 j 為鄰居，則 j i d− =b b  
在(5.1)中， iν 考慮下列兩部分 
  120
0 j i d< − <r r ，則 0g < ，表驅使代理人 i 離開代理人 j。藉由當 ijr 趨近於零時，
( )ijg r 趨近於無限大，代理人碰撞的問題可被避免。 
 
F2: Developed formation (one virtual leader) 
在此設計中，假設只有一個虛擬領導者 0r 存在，其軌跡由 ( )tp 所給，即
0 ( ) ( )t t=r p 。除了(5.3)被(5.5)取代外，方程式(3.1)~(3.4)再次被使用， 
                         
0
0
0
( )
i
i i
A i i
i i
fν −= − −
r r
r r
r r                     (5.5) 
方程式(5.5)表此設計無預先規劃的預期架構，在 iAν 的影響下，所以的代理人趨
向擠壓至虛擬代理人的位置 0r ，然而，各鄰居之間的距離被 iRν 所控制，以致於
最終將發展成一個平衡的架構。 
在以上敘述的兩種設計中，鄰居代理人之間的作用力只有排斥力，藉由我們
的控制設計，每一個代理人不會吸引遠離他的鄰居，此在[99]-[104]中，會被每
位代理人藉由其與鄰居之間的吸引力所達成。除此之外，在[99]-[104]中，被鄰
居之間吸引力所解決的內聚問題，在我們的設計中，可直接被代理人和虛擬領導
者之間的吸引力所解決。因此，我們的設計比之前學者的設計更有效率，且不會
失去群體的內聚力。 
 
5.4.2  理論分析 
 F1: Specified formation (N virtual leaders) 
由式(5.1)~(5.4)，可得 
                ( )
( ) ( )
i
i i id i di i j i ji
j N t
f g
∈
= − + −∑r r r n r r n&
                   (5.6) 
其中， ( ) /di id i id i= − −n r r r r  且 ( ) /ji j i j i= − −n r r r r 。令 i i id= −r r r% ，則式(5.6)可改寫
成 
               
( ) ( )
i
i i i i j i ji ij id
j N
f g
∈
= − + − + −∑r r n r r b n r&% % % % % % &
                 (5.7) 
其中， /i di i i= − =n n r r% % % 、 ji j i= −b b b 且 ( ) /ij j i ji j i ji= − + − +n r r b r r b% % % % % 。考慮下列兩種狀
況分析。 
  122
且唯若 0=r&% 。利用 LaSalle 理論，可得式(5.9)的每一個解都會漸進收斂至其平衡
點。 
 
Remark 5.1：系統(5.9)可能會有除了 ∗r% 之外的平衡點，但從大量的數值模擬和許
多特別狀況的分析，顯示其它的平衡點為不穩定。在未來的研究裡，將深入探討
這個問題。 
Remark 5.2： 從式(5.10)和(5.11)可觀察到代理人群體的移動會最小化 1( )V r% 以達
到其全域最小值 ∗r% ，且式(5.9)的其他平衡點為 1( )V r% 的鞍點(saddle point)。 
 
雖然在定理 5.1 中，f 必須為線性函數，然而，從我們的模擬結果尚未找到
不適用的例子，例如在 5.3.3 節中，以 ( ) 20.02( )f = +z z z 的模擬結果證實控制法
則仍然是可行的。 
從以上的分析，可將代理人群體在狀況 5.1 中的移動一般化成以下三步驟： 
Step 5.1：在吸引力和排斥力的影響下，每一個代理人以 ( )i tr 軌跡漸進收斂至軌跡
( )id t +r α的方式移動。 
Step 5.2：一旦 ( ) ( )i idt t= +r r α，對 i∀ 被達成，可得 ( ) ( ) ,   i idt t i= = ∀r r q& & ，且結盟的問
題會被解決，而代理人隊列也會達到預期的架構，所以，在此步驟中，代理人群
體在與虛擬領導者相同的速度下以預期的隊列移動直到 t T= ，此時 ( ) tt =p r 。 
Step 5.3：對 t T≥ 時， = ⇒ =0 0q α ，可得 ( )i t it → +r r b ，代理人最後會以預期隊列
停在目標附近。 
 
狀況 5.2：預期路徑 ( )tp 一般為平滑的曲線，定義 ( ) (t)t =p q& ，所以 ( )id t=r q& 且虛擬
領導者速度在移動期間會平滑的改變。 
定理 5.2：考慮在 ( )id t=r q& 且 ( )f k=z z 條件下的系統(5.7)，其中，k 為正數。令
0 1 2, , ,...t t t 為遞增的時間序列，假設在每一個時間區間 1[ , ],  {1,..., }j jt t j m− ∈ 裡， ( )tq 的
  124
A A 
(a) (b)  
圖 5.6  (a) 為圍繞在 A 附近的鏈結隊列；(b) 為圍繞在 A 附近的半鏈結隊列。 
 
從以上數學式，可得 F2 設計的系統動態方程式為 
                
0 0
( )
( ) ( )
i
i i i i i j i ji
j N t
f g
∈
= − + −∑r r r n r r n&
                   (5.12) 
其中， 0 0 0( ) /i i i= − −n r r r r 。 
 
定理 5.3： 系統(3.12)的任何平衡點 ∗r 結構，一定是圍繞在 0r 附近的方法二隊列。 
證明： 對一個平衡點 ∗r 的每個 i∗r 滿足下列條件 
              
( ) 0
0
( )
i
j ii
i t i j i
i j ij N
r r
f g r r
r r∈
−−− = − − ≠− −∑ 0r rr r r r
              (5.13) 
除了在 0r 的代理人滿足下列式子外(假設至多有一個這樣的代理人)： 
               
( ) 0
0
( )
i
j ii
i t i j i
i j ij N
r r
f g r r
r r∈
−−− = − − =− −∑ 0r rr r r r
             (5.14) 
藉由函數 g 的形式，條件 D1 會被保證滿足，由於式(5.13)和(5.14)的關係，條件
D2 可以被滿足。對任何平衡點 ∗r ，可得 
                    
0
0
01 1
( )  
N N
i
i i i
ii i
f
= =
−= − =−∑ ∑ 0r  rr r  r r  r&
                    (5.15) 
由於排斥力是成對出現的，我們假設一旦群體達到 ∗r 的結構，在虛擬領導者
0 0 0( , )
Tx y=r 和代理人 i ，  i∀ 之間的吸引力變為成對的力，此意味著代理人 i 也
施加一大小相等但方向相反的力 0( )if −r r 在虛擬領導者上。藉此，由於式(5.15)
  126
5.4.3  數值模擬結果 
以上所提出的兩種控制設計被應用在有 N 個代理人群體上，在每一個模擬
裡，代理人的初始條件由 N 個隨機初始位置(平均分佈在 50 x 50 的範圍內)，和
初始速度為零所訂；感測半徑為 20d = 。模擬的目的是使代理人群體跟隨虛擬領
導者往目標 tr 前進。在每一個結果圖裡，實點或星點表代理人，十字表目標位置。 
 
−100 −50 0 50
−80
−60
−40
−20
0
20
40
60
a)  t = 0
−100 −50 0 50
−80
−60
−40
−20
0
20
40
60
b)  t = 5
−100 −50 0 50
−80
−60
−40
−20
0
20
40
60
c)  t = 10
−100 −50 0 50
−80
−60
−40
−20
0
20
40
60
d)  t = 12
−100 −50 0 50
−80
−60
−40
−20
0
20
40
60
e)  t = 15
−100 −50 0 50
−80
−60
−40
−20
0
20
40
60
f)  t = 30
 
圖 5.7  6 個代理人跟隨虛擬領導者至目標且在 t = 10s 時從一個隊列架構旋轉
至另外一個。 
 
在第一個模擬裡，有 6N = 個代理人和 N 個虛擬代理人(F5.1 設計)。目標位
於 ( 80, 60)T− − ，預期路徑為從 (0) ( (0)) /sum N=p r 開始的直線，虛擬領導人的速度為
常數向量，在此模擬的函數 f 為線性，我們預先定義 ib 使得在移動過程中，代
理人隊列會在時間區間 [8 ,12 ]s s 裡由圖 5.4(c)旋轉至(d)。圖 5.7 為此模擬的結果，
在每一個圖裡的圓圈表此圖形時刻的預期路徑。圖 5.7(a)表每一個代理人的初始
  128
 
0 5 10 15 20 25 30
0
5
10
15
20
25
30
35
40
45
50
t  
圖 5.9 代理人在第一次模擬中的速度 
 
0 20 40 60 80 100 120
0
50
100
150
200
250
 
圖 5.10 6 個代理人在第二次模擬的軌跡(預期路徑為點虛線所示)，標記為群體
位置在 t = 0、t= 15、t = 30 和 t = 50 時的狀況 
 
  130
5.5  模擬實驗環境與結果 
5.5.1  資料模式效能評比 
我們之所以選擇 Entity-Relationship（E-R） Model 來規劃系統的資料庫，主
要是在我們的系統裡，E-R Model 的效能比其他的方法好。以下我們就選擇
Object-Based Model 來與 E-R Model 比較。我們從 30,000 筆資料裡，分別使用兩
種方法來查詢我們資料庫裡的資料。圖 5.13-5.15 分別是使用 Object-Based Model
的資料庫查詢結果、查詢分析、查詢資料統計；圖 5.16-5.18 分別是使用的資料
庫查詢結果、查詢分析、查詢資料統計。 
 
 
圖 5.13 使用 Object-Based Model 查詢結果 
 
  132
 
圖 5.16 使用 E-R Model 查詢結果 
 
 
圖 5.17 使用 E-R Model 查詢分析 
 
  134
過大時能先分成數個單位，方便傳遞，並將傳輸後的數據包還原重組成正確順
序。網際協定（Internet Protocol)，相對於 TCP 司內部運作之職，IP 卻是真正傳
送間的行動者，當此方電腦將傳送的訊息送出後 TCP 便開始運作先發的流程，
譬如轉換成數據包等等，並且將傳送之目的地，彼方電腦或系統的位址(IP 
Address)告知給 IP，IP 便需負責帶領著數據包到達正確目的地；Internet 所連接
的任何節點或使用者皆擁有單獨的位址，這個位址便成為 IP 協定在傳輸運作上
唯一的行動準則和到達依據；IP 協定主要是負責個別數據包傳送路徑之選擇，
但需負責選擇傳輸路徑、行徑之閘門 (Gateway/Router)、中際系統(Intermediate 
System)等，縱然是再複雜的環境，務須達到正確的目的地 
 
TCP/IP 協定不僅成功的連接了不同網路，而且很多應用程式和概念也是完
全以 TCP/IP 協定為基礎發展出來，得以讓不同的廠商能夠忽略硬體結構開發出
共同的應用程式，例如今天應用廣泛的 WWW、E-MAIL、FTP、DNS 服務等等。
TCP/IP 有兩種技術功能： 
 
‧非連接導向分封交換傳送方式(Connectionless Packet Delivery Service)：
TCP/IP 是根據信息中所含的位址資料來進行資料傳送，它不能保證每個獨
立路由的封包都能可靠和依序送達目的地。在每一個連線過程中，線路都不
是被獨佔的，而是直接映對到硬體位址上，因此特別有效。更重要的是，此
種封包交換方式的傳送，使得 TCP/IP 能適應各種不同的網路硬體。 
 
‧可靠性分割訊息傳送方式(Reliable Stream Transport Service)：封包交換無
法確保每一個封包的可靠性，所以我們需要通訊軟體來自動偵測和修復傳送
過程中可能出現的錯誤和處理不良的封包。這種服務就是用來確保電腦之間
能夠建立連接和傳送大量資料。這服務的關鍵技術是將資料進行切割，然後
編號傳送，接著透過接收方的確認(acknowledgement)來保證資料的完整性。 
 
我們為什麼要選用 TCP/IP 做為我們網路的通訊協定？因為具有以下的特
點： 
 ‧獨立性的網路技術(Network Technology Independence) 
傳輸技術不受各種不同電腦系統的限制，將訊息以切割後的數據包
(Datagram)型式傳送至目的地。 
‧廣泛性網路連接(Universal Interconnection) 
電腦系統傳送訊息的依據僅是雙方的位址就可傳輸，若需連接不同的網路
系統、電腦設備，或是需要經由中際系統轉接，則用繞徑(Routing)方式，
仍舊能擔負傳送任務。 
 ‧點與點之間傳送(End-to-End Acknowledge) 
運作點對點的傳送方式，雙方無需位於同一系統，無需理會封包交換過程
  136
‧01：DBSync 
  當今天伺服端收到的 Command 為 01 時，則代表伺服端將和客戶端進行資料
間的交互作用，互相提供資料給對方來補足資料的不足。 
‧02：即時 
  當今天伺服端收到的 Command 為 02 時，則顯示客戶端將要傳送必須儲存於
伺服端的資料。而傳送過來的資料分類，則必須靠接下來的 Sub-Command 來
分類。 
在 Command 之後的 2 Bytes 為 Sub-Command，只針對 Command 為 02。其
中 
 
（1）第一個 Byte 可分為 3 種： 
‧01：ID + IPCam 
當客戶端的監視器偵測到一個人的面貌，透過比對程式在資料庫中找到這個
人的相關資料，則這個人為存在於資料庫有紀錄的人員，只需將他在資料中
的 ID 和捕捉到他的監視器號碼傳送回伺服端即可 
‧02：Special ID + IPCam + 64*64*3 
當客戶端的監視器偵測到一個人的面貌，透過程式的比對無法在資料庫中找
到這個人的相關資訊，則我們將此人視為陌生人；客戶端這時會給予此人一
Special ID，此 ID 專為辨識陌生人，並將捕捉到他的監視器號碼和他的影像
傳送到伺服端。 
‧03：Hello 
我們想知道客戶端程式的狀況，到底是還在運作還是已經停止運作，所以我
們要求客戶端必須要在一定時間內發送 Hello 訊息至伺服端，讓我們可以知
道客戶端程式目前的情況 
 
（2）第二個 Byte 可分為 4 種： 
00：Hello 
01：User ID 
02：Tag ID 
03：Special ID 
為 Sub-Command 的第一個 Byte 作更精確的確認。 
 
（3）接下來的四個 Bytes 為傳送的 ID，再下去二 Bytes 為 IPCam，接著後面則
是影像。 
 
客戶端可以根據偵測到的資訊，配合我們定義的格式，將資訊藉由此格式傳送
到資料庫的伺服端。 
 
  138
第六章 電子標籤系統晶片之研發 
 
本章主要針對無線射頻辨識標籤（RFID）的數位防碰撞技術作完整地描述
並加入無線射頻的前端電路加以驗證，並且對數位防碰撞部份進行晶片設計。此
系統適用於 “Slotted Random” 的防碰撞演算方法。無線辨識標籤電路中最為推
薦的功能有「利用亂數系統的分時多工功能」及「資料連線頻率可調選的功能」
因此，此新穎式的系統電路不僅加強了射頻辨識標籤的完整功能，更提高了標籤
的辨識速率，並且增加了降低標籤碰撞的錯誤率，及減少了標籤的功率消耗的可
能性。本篇論文中，研發電路所採用的模擬軟體為︰ALTERA QUARTUSⅡ，及
所採用的 FPGA 晶片為︰ ALTERA Cyclone II EP2C5T144C7。最後將數位電路
和天線及射頻前端電路做整合並成功地和 Alien Reader ALR-9780 做連結。量測
結果與所參考的國際通用標準（EPC Class-1 Generation-2 UHF RFID Protocol 
[105]）成功地互相驗證。IC 設計部份則是使用 SMIC 0.18 um 製程。 
 
6.1  RFID Tag 規格訂定與研究流程 
RFID Tag 整體系統規格訂定流程如下(如圖 6.1 所示): 
(1) 比較 RFID Standard，以 EPC Radio-Frequency Identity Protocols Class-1 
Generation-2 UHF RFID Protocol for Communications at 860MHz-960MHz 
Version 1.09 為主，ISO18000-6 為輔，暫定 RFID Tag 整體系統規格。 
(2) 比較 RFID 電路研發公司所公開的 data_sheet，補足之前暫定 RFID Tag
整體系統規格所遺漏的部份，而 data_sheet 以 Philips 和 ITRI 為主，因為
此兩大企業都為 EPC-global 的成員，皆遵循 EPC Standard。 
 
 
圖6.1 RFID Tag整體系統規格訂定流程圖 
 
  140
表 6.3 RFID Tag Provisional Specification 
 
 
表 6.4 Philips & ITRI RFID Tag Comparison -1 
 
 
 
 
 
 
 
 
 
  142
表 6.7 RFID Tag Specification-2 
 
 
RFID 數位防碰撞系統電路研究流程(如圖 6.2 所示)︰ 
(1) 收集 RFID Tag 相關資料，包含各式線上資料庫提供的 Paper、RFID 相
關公司所公開的 Data Sheet、 EPC 與 ISO 的 Standard[105-110]、學術論
文、研討會資料等等。 
(2) 根據研究流程（1）所收集到的資料，訂定 RFID Tag 所有相關規格，包
含射頻前端電路、數位防碰撞系統電路、記憶體等等。 
(3) 分析 RFID Standard，以 EPC Radio-Frequency Identity Protocols Class-1 
Generation-2 UHF RFID Protocol for Communications at 860MHz-960MHz 
Version 1.09 [105]為主，ISO18000-6[106]為輔，分析完畢後，再回至研究
流程（2），檢驗 RFID-Tag 所有相關規格，是否有全然合乎 EPC Class-1 
Generation-2 UHF RFID Protocol。 
(4) 以EPC Radio-Frequency Identity Protocols Class-1 Generation-2 UHF RFID 
Protocol for Communications at 860MHz-960MHz Version 1.09 為主，訂立
RFID Anti-collision Algorithm。 
(5) 根據研究流程（4）所訂立的 RFID Anti-collision Algorithm，分析出所需
的 RFID-Tag Anti-collision State Diagram。 
(6) 根據研究流程（5）所訂立的 RFID-Tag Anti-collision State Diagram，分析、
切割出「RFID 數位防碰撞系統電路」所需的子電路，再加以整併出整體
  144
Start
收集RFID-Tag相關資料
（包含 Paper, Data Sheet, Standard, 學術論文, 
研討會資料）
訂定RFID-Tag 相關規格
( 包含 RF Front-end, Anti-collision, Memory )
訂定RFID-Tag Anti-collision State 
Diagram
訂定RFID Anti-collision Algorithm
分析RFID Standard
( 包含 EPC  C1 G2 UHF RFID Protocol ＆
ISO18000-6 )
訂定RFID-Tag Anti-collision 
System Circuit
VHDL RTL Simulation
FPGA Timing Simulation
FPGA Verification
Logic Synthesis
Verilog Gate Level Simulation
Post Transistor Level Simulation
Place and Route
Tape Out
 
圖 6.2 RFID Tag 電路研究流程 
  146
 
圖6.4 被動式標籤架構圖 
6.2.3  Backscatter 
數位訊號處理系統輸出的“0”與“1”訊號，會控制標籤內部電晶體的開啟與關
閉，隨著電晶體的開與關，將使標籤的天線對讀取端所發出的信號，做訊號的反
射或吸收，此機制稱之為回散射調變（Backscatter Modulation）。如圖6.5與圖6.
所示[107]︰ 
 
 
圖6.5 Backscatter示意圖 
 
 
圖6.6 電阻與電容回散射調變模式 
 
  148
 
圖6.8 Binary Tree Algorithm的State Diagram 
 
6.2.4.2  Slotted Random Algorithm 
而我們所採用的「Slotted Random」Anti-collision Algorithm 則是利用分時多
工的概念，完成 RFID 之間的防碰撞，之前我們有提到 RFID 碰撞的主要來源有
二，一是當一台 Reader 進行讀取時，有兩個或兩個以上 Tag 同時廣播回覆信號，
造成信號的碰撞，而使 Reader 誤判；二是同一 Tag 在兩台或兩台以上 Reader 的
讀取範圍內，Tag 同時收到多筆 command，而使 Tag 產生誤判。 
 
為了防範第一種碰撞的情形，當每台 Reader 開始要在自己的讀取範圍內讀
取多個 Tag 時，Reader 讓每個 Tag 隨機產生亂數，之後讓亂數倒數，先倒數為 0
的 Tag 率先回傳確認碼回 Reader，Reader 確認無誤後，在通知 Tag 回傳其 ID 
Code，所以利用分時多工的概念預防第一種碰撞情形。 
 
對於第二種碰撞的情形，則是利用「Session」概念[105]，就是當每台 Reader
要在自己的讀取範圍內讀取多個 Tag 時，每台 Reader 給予自己獨取範圍內的 Tag
不同的 session 碼，使的 Tag 藉以 session 碼區分要回覆哪一台 Reader。 
 
除此之外，「Slotted Random」Anti-collision Algorithm 更多了「Flag」的概念
[105]，「Flag」有 2 種數值，A 和 B，比方一開始是將整群 Tag 設為 Flag-A，已
被 Reader 讀取過 ID code 的 Tag 就將其 Flag 反轉為 Flag-B，也就是說已經被讀
過的 Tag 要等到下一個 round，才會再次被讀取，利用此技術可大幅減少信號碰
  150
 
圖 6.10 RFID Tag 數位防碰撞系統電路組成方塊圖 
 
6.3.1  RFID Tag 軟體驗證 
    RFID Tag 軟體驗證方面主要分成兩大部份進行︰ 
（1）依據 Alien Reader ALR-9780 所送出的命令與資料為主，規格為 EPC 
Radio-Frequency Identity Protocols Class-1 Generation-2 UHF RFID Protocol for 
Communications at 860MHz-960MHz Version 1.09。 
（2）依據 AWID Reader MPR-2010 BN 所送出的命令與資料為主，規格為
ISO18000-6。 
 
6.3.1.1  Alien Reader 
    Alien Reader 與 Tag 溝通的過程中並沒有發送 Select 命令，而是在充電時間
過後即發送 Query 命令，因此在我們的測試 pattern 中依據 Alien Reader 所發送命
令的順序進行模擬。此外 Alien Reader 的設定介面中還可設定 Q 參數的多寡，所
以在以下的測試中再細分為 Q = 0 與 Q = 1 兩種狀態。 
 
    另外在 Tag 中並沒有將 EPC Code 存在記憶體中而是使用外部輸入的方式，
此種方式可隨時修改 EPC Code 方便測試，但在電路中需增加一個 CRC-16 的編
碼電路以隨時進行 EPC Code 的編碼。 
 
  152
依據圖 6.11 Link timing 中 Single Tag Reply 動作流程來觀察模擬結果。 
（1）Query Command 
    如圖 6.13 所示，可以得出 Query 命令中的資料如下︰ 
A. DR︰1 => DR = 64 / 3。 
B. M︰01 => M = 2。 
C. TRext︰1 => Use pilot tone。 
D. Sel︰00 => All。 
E. Session︰00 => S0。 
F. Target︰0 => A。 
G. Q︰0000 => 0。 
H. CRC-5︰01101。 
 
圖 6.13 Alien Reader Q = 0 => Query Command 
 
（2）RN16 Reply 
    在 Tag 接收到 Query 命令後，首先會將 PIE 解碼為標準“0”與“1”的資料然後
觸發 cmd_enable。此時 Tag 會觸發 dcrc5 來確認 CRC-5 是否正確，正確則觸發
crc5_s。接下來觸發 sci_enable，在這部份一開始先觸發 fs_enable，此時會依據
TRcal 與 DR 計算出回傳頻率；再觸發 RN15_enable_s 依據 Q 參數產生一筆亂數，
在此因為 Q 為“0000”所以亂數產生為“0”，亂數產生後會觸發 RN15_enable_f。因
為現在已產生出一筆亂數，接下來就要把亂數放在 slot 中所以觸發 Slot_enable，
因為亂數為“0”所以緊接著會觸發 SlotZero_enable。再來要產生一筆 16 bits 的亂
數進行回傳，因此觸發 RN16_enable_s 得到一筆 16 bits 的亂數後，觸發
RN16_enable_f。最後根據 Reader 要求的回傳形式為 Miller-modulated subcarrier
  154
 
圖 6.15 Alien Reader Q = 0 => ACK Command 
 
（4）EPC Code Reply 
 
圖 6.16 Alien Reader Q = 0 => EPC Code Reply 
 
在這個步驟中一樣將 PIE 解碼為標準“0”與“1”的資料然後觸發 cmd_enable。
此時會確認命令的種類，然後觸發 sci_enable，Tag 依據此時收到的 16 bits 資料
與之前回傳的 RN16 資料進行比對若比對正確則觸發 miller_enable 將 EPC Code
  156
 
圖 6.18 Alien Reader Q = 1 => Query Command 
 
（2）Tag to Handle 
此時 Tag 接收到 Query 命令後，首先會將 PIE 解碼為標準“0”與“1”的資料然
後觸發 cmd_enable。此時 Tag 會觸發 dcrc5 來確認 CRC-5 是否正確，正確則觸發
crc5_s。接著觸發 sci_enable，在這部份的動作，首先觸發 fs_enable 此時會依據
TRcal 與 DR 計算出回傳頻率；再觸發 RN15_enable_s 依據 Q 參數產生一筆亂數，
在此因為 Q 為 “0001” 所以亂數產生為 “0” 或 “1” ，亂數產生後會觸發
RN15_enable_f。因為現在已產生出一筆亂數，接下來就要把亂數放在 slot 中，
所以觸發 Slot_enable，Tag 會判斷 slot 中的數值是否為“0”，此次測試不為“0”的
狀況。因此 Tag 會觸發 sci_finish 完成此次溝通。如圖 6.19 所示。 
  158
（4）RN16 Reply 
    在 Tag 接收到 QueryRep 命令後，首先會將 PIE 解碼為標準“0”與“1”的資料
然後觸發 cmd_enable。此時會確認命令的種類，然後觸發 sci_enable。在這部份
的動作，第一先觸發 Sub_enable 將 slot 內的值進行減“1”的動作，slot 內部數值
改變因此觸發 Slot_enable 。因為亂數減 “1” 後為 “0” 所以緊接著會觸發
SlotZero_enable。接下來要產生一筆 16 bits 的亂數進行回傳，因此觸發
RN16_enable_s 得到一筆 16 bits 的亂數後，觸發 RN16_enable_f。最後根據 Reader
要求的回傳形式為 Miller-modulated subcarrier 所以觸發 miller_enable，將 RN16
使用 Miller-modulated subcarrier 的形式進行回傳，並且依據 TRext 此參數的要求
回傳時使用長的 Preamble。在完成回傳後 All_finish 會自行 disable 清除 Tag 內暫
存器的資料。如圖 6.21 所示。 
 
圖 6.21 Alien Reader Q = 1 => RN16 Reply 
 
（5）ACK Command 
  160
在這個步驟中一樣將 PIE 解碼為標準“0”與“1”的資料然後觸發 cmd_enable。
此時會確認命令的種類，然後觸發 sci_enable，Tag 依據此時收到的 16 bits 資料
與之前回傳的 RN16 資料進行比對若比對正確則觸發 miller_enable 將 EPC Code
資料包含 16 bits 的 CRC 確認碼回傳給 Reader，完成回傳後 All_finish 會自行
disable 清除 Tag 內暫存器的資料。此時即完成一次 Single Tag Reply 的動作。如
圖 6.23 所示。 
 
6.3.1.2  AWID Reader 
AWID Reader 與 Tag 溝通的過程中一樣沒有發送 Select 命令，而是在充電時
間過後即發送 Query 命令，因此在我們的測試 pattern 中依據 AWID Reader 所發
送命令的順序進行模擬。 
 
    另外在 Tag 中並沒有將 EPC Code 存在記憶體中而是使用外部輸入的方式，
此種方式可隨時修改 EPC Code 方便測試，但在電路中需增加一個 CRC-16 的編
碼電路以隨時進行 EPC Code 的編碼。 
 
 
圖 6.24 AWID Reader 
 
從 Query 命令所使用的 Preamble 中量測 Tari 得到的訊號可知 Reader => Tag
的 Data Rate 為 40 kbps。而 Tag => Reader 的 Data Rate 根據 TRcal 與 Query 命令
中 DR 此參數可知為 40 kbps。 
 
    依據圖 6.11 Link timing 中 Single Tag Reply 動作流程來觀察模擬結果。 
（1）Query Command 
  162
所以觸發 fm0_enable，將 RN16 使用 FM0 baseband 的形式進行回傳，並且依據
TRext 此參數的要求回傳時使用長的 Preamble。在完成回傳後 All_finish 會自行
disable 清除 Tag 內暫存器的資料。如圖 6.26 所示。 
 
圖 6.26 AWID Reader Q = 0 => RN16 Reply 
 
（3）ACK Command 
    接著 Reader 依據 RN16 回傳的資料，將其解碼後重新利用 ACK 命令傳送給
Tag，此時在 ACK 命令前使用 Frame-Sync 資料。如圖 6.27 所示。 
  164
 
圖 6.28 AWID Reader Q = 0 => EPC Code Reply 
 
6.3.2  RFID Tag 硬體驗證 
RFID Tag 硬體驗證方面一樣分成兩大部份進行︰ 
（1）使用 FPGA 晶片 ALTERA Cyclone II EP2C5T144C7 進行測試。 
（2）利用 SMIC 0.18 um 製程進行 IC 積體化後進行測試。 
 
6.3.2.1 使用 FPGA 晶片 
6.3.2.1.1 有線測試 
首先先進行有線的測試，電腦端控制Alien Reader發射訊號經過衰減器與
RFID標籤做連線，將Tx、Rx訊號與邏輯分析儀做連接，由邏輯分析儀（HP 
16700A）分析讀卡機與標籤的通訊協定與操作方式。最後在驗證電腦螢幕上由
Alien提供的程式是否有顯示FPGA發送出來的EPC碼。EPC碼可以由開關設定，
如圖6.29所示。  
  166
    如圖 6.31 則是使用示波器（Tektronix TDS 3032）所量測到的結果，其結果
跟使用邏輯分析儀量測到的相同。 
 
圖 6.31 示波器 Tektronix TDS 3032 量測結果 
 
6.3.2.1.2 無線測試 
    在無限測試方面則是利用離散元件設計 RF frond-end 電路，合併 FPGA IC
成為 board level RFID TAG，與 Alien Reader ALR-9780 UHF RFID Reader 進行溝
通驗證。如圖 6.32 所示。 
  168
 
圖 6.34 Anti-collision Test 
 
 
圖 6.35 可讀取距離 
 
  170
 
圖 6.37 64 Pins LCC 接腳圖 
 
    IC 量測方面則是將圖 6.32 中 PCB 板裡面的 FPGA IC 以及 FPGA download 
cable 移除，換上自行設計的 RFID Tag IC 即可進行量測。至於接腳的考量上，在
IC 佈局時皆已符合圖 6.32 的擺放方式。 
 
 
 
 
 
 
 
 
 
 
 
 
  172
 
圖 7.1 第一年計畫之實驗環境 
 
圖 7.2 為第一年完成的平台功能，系統啟動後，攝影機會動態地儲存背景影
像。一旦有人員進入實驗室，系統便會將攝影機所拍攝到的影像進行處理、擷取
人臉，以便更進一步的供人臉辨識使用。而人員進出的 RFID 資料則會透過圖
7.2(b)的介面程式儲存至資料庫當中，系統管理者也可以透過程式來查詢人員的
門禁紀錄。詳細的敘述如下： 
（1）（a）部份主要是利用 RFID Reader 讀取資料，再將資料透過網路傳送給資
料庫做處理。 
（2）（b）部份是在實驗室門口架設 IPCam，將進入的人員做辯識，並將辯識結
果及圖片透過網路傳送給資料庫儲存。 
 
（a）                              （b） 
圖 7.2 第一年程式介面 
  
  174
 
圖 7.4 第二年程式介面 
 
7.2 實驗模擬結果 
本計劃主要是採用 Borland 公司，所開發的 C++ Builder 6.0 版來做為系統的
主程式開發。主要是因為 BCB 據有不錯的視覺化程式及具有動態連結庫(DLL)、
繪圖、物件、資料庫應用、VCL 元件及影像處理，在偵錯方面也有強大的功能。
另外，資料庫方面我們是利用 Microsoft SQL Server 2000，在使用者資料庫下先
建立我們系統所需要的資料表，資料庫中的資料是有系統地組織我們定義的元
件。資料庫的架構是為了提供日後主程式，連結資料庫所使用的。因此整個資料
庫設計及決策機制之分析與建構是根據前面幾個章節而設計的，圖 7.5-7.7 為整
個系統的主要介面。圖 7.5 可以即時更新整個系統的資料庫，且可以即時呈現出
任何一個 IP Camera 的所辯識出來的影像及記錄時間；還有任何一個 Reader 所讀
到的 Tag 資料，包含 Tag 所代表的人、號碼、Tag number 及記錄時間。圖 7.6 是
資料庫的查詢介面，使用者可以輸入想查尋的人、ID、IPCam 及 Reader。圖 7.7
可以隨時知道 Reader 是否有保持連線，讓我們可以隨時知道 Reader 是否有問題。 
 
  176
 
圖 7.7 Reader On/Off 狀態 
 
如圖 7.8-7.10 所示，如果我們想查詢某人/ID 何時進入，可以選擇某個時間
來查詢，也可以查詢某台 Reader/IPCam 在何時有哪些人進入。 
 
 
圖 7.8 使用者查詢介面 
  178
 
圖 7.11 以 ID 查詢的結果 
 
 
圖 7.12 以 name 查詢的結果 
  180
參考文獻 
 
[1] S.-Y. Chien, Y.-W. Huang, B.-Y. Hsieh, S.-Y. Ma, and L.-G.. Chen, “Fast video 
segmentation algorithm with shadow cancellation, global motion compensation, 
and adaptive threshold techniques,” IEEE Trans. Multimedia, vol. 4, issue. 5, pp. 
732-748, Oct. 2004. 
[2] Y. Hori, K. Shimizu, Y. Nakamura, and T. Kuroda, “A real-time multi face 
detection technique using positive-negative lines-of-face template,” Proc. of the 
17th Intl. Conf. on ICPR 2004, vol. 1, pp. 765-768, 2004. 
[3] H. Suzuki and M. Minami, “Real-time multiple face detection of pedestrian using 
hybrid GA,” Proc. of the 7th Int. IEEE Conf. on Intelligent Transportation 
Systems, pp. 708-713, 2004. 
[4] R. Xiao, M.-J. Li, and H.-J. Zhang, “Robust multipose face detection in images,” 
IEEE Trans. on Circuits and Systems for Video Technology, vol. 14, no. 1, pp. 
31-41, 2004. 
[5] Z.-F. Liu, Z.-S. You, A. K. Jain, and Y.-Q. Wang, “Face detection and facial 
feature extraction in color image,” Proc. of 5th Int. Conf. on ICCIMA 2003, pp. 
126-130, 2003. 
[6] S.-H. Huang and S.-H. Lai, “Real-time face detection in color video,” Proc. of 
10th Int. Multimedia Modelling Conf., pp. 338-345, 2004. 
[7] D. Chai and K. N. Ngan, “Locating facial region of a head-and-shoulders color 
image,” Proc. of 3rd IEEE Int. Conf. on Automatic Face and Gesture Recognition, 
pp. 124 – 129, 1998.  
[8] P. Viola and M. Jones, “Rapid object detection using a boosted cascade of simple 
features,” IEEE Conf. on Computer Vision and Pattern Recognition, Kauai, 
Hawaii, 2001. 
[9] R. Lienhart and J. Maydt, “An extended set of Haar-like features for rapid object 
detection,” Proc. of Int. Conf. on Image Processing, vol. 1, pp. 900-903, 2002. 
[10] Y. Freund and R. E. Schapire, “Experiments with a new boosting algorithm,” 
Proc. of the 13th Conf. on Machine Learning, Bari, Italy, pp. 148-156, 1996. 
[11] R. E. Schapire and Y. Singer, “Improved boosting algorithms using 
confidence-rated predictions,” Machine Learning, vol. 37, no. 3, pp. 297-336, 
1999. 
[12] T. Sim, S. Baker, and M. Bsat, “The CMU Pose, Illumination, and Expression 
(PIE) Database,” Proc. of the 5th Int. Conf. on Automatic Face and Gesture 
Recognition, 2002. 
[13] R. M. Mutelo, W. L. Woo, and S.S, Dlay, “Two Dimensional Orthogonal 
  182
[30] Hind, D.J. “Radio Frequency Identification and tracking systems in Hazardous 
areas”, Electrical Safety in Hazardous Environments, 1994., Fifth International 
Conference on , 19-21 Apr 1994, Page(s): 215 –227. 
[31] Raza, N. and Bradshaw, V. and Hague, M. “Applications of RFID technology “, 
RFID Technology (Ref. No. 1999/123), IEE Colloquium on , 25 Oct. 1999 Page(s): 
1/1 -1/5. 
[32] Engels, D.W. and Sarma, S.E. ”The reader collision problem “, Systems, Man 
and Cybernetics, 2002 IEEE International Conference on , Volume: 3 , 6-9 Oct. 
2002 ,Page(s): 6 pp. vol.3. 
[33] Rao, K.V.S. “An overview of backscattered radio frequency identification system 
(RFID)“, Microwave Conference, 1999 Asia Pacific , Volume: 3 , 30 Nov.-3 Dec. 
1999 ,Page(s): 746 -749 vol.3 
[34] Kossel, M. and Benedickter, H. and Baechtold, W. “An active tagging system 
using circular polarization modulation”, Microwave Symposium Digest, 1999 
IEEE MTT-S International , Volume: 4 , 13-19 June 1999, Page(s): 1595 -1598 
vol.4. 
[35] Robertson, I.D. and Blewett, M. and Amin, J. and Butt, I. and Donnelly, F. and 
Harwood, P. and Woolven, A. “A simple radio-frequency system for asset tracking 
within buildings”, RFID Technology (Ref. No. 1999/123), IEE Colloquium on , 25 
Oct. 1999 ,Page(s): 6/1 -6/6. 
[36] Sarma, S. and Brock, D. and Engels, D. “Radio frequency identification and the 
electronic product code”, Micro, IEEE , Volume: 21 Issue: 6 , Nov.-Dec. 
2001 ,Page(s): 50 –54. 
[37] 國立台北科技大學電腦通訊與控制研究所,田柏冠 “電能與資料傳輸技術
 於設頻鑑別系統之應用” 民國 91 年 6 月. 
[38] Koen L.R.Metens,Michiel S.J. Steyaert,”A 700-MHz 1-W Fully Differential 
CMOS Class-E Power Amplifier” IEEE journal of solid-state 
circuits,Vol.37,No2,February 2002 pp.137~141. 
[39] NATHAN O.OKAL,ALAN D.SOKAL,”Class E – A New Class of  
High-Efficiency Tuned Single-Ended Switching Power Amplifiers” IEEE journal 
of solid-state circuits,Vol.sc-10,No.3,JUNE.1975 pp.168~176. 
[40] 元智大學電機工程研究所,楊承翰,”以 0.35um CMOS 積體電路技術設計
13.56Mhz 無線射頻身分識別系統讀卡機”民國 91 年 7 月. 
[41] 國立成功大學電機工程學系,顏呈機,”2.4GHz ISM 頻帶收發機射頻前端
CMOS RFIC 及使用二極體線性器 CMOS PA 之研製”,民國 91 年 6 月. 
[42] 國立中正大學電機工程研究所,吳宗和,”5.2GHz 無線區域網路之射頻模組模
擬、組製與整合測試”,民國 91 年 7 月. 
[43] 國立中央大學電機工程研究所,溫清華,”CMOS 無線通訊接收端模組之設計
  184
[65] TAG Data Standards ：EPCglobal, “EPC Tag Data Standards Version 1.1 Rev.1.24,” 
EPCglobal Standard Specification, April 2004 
[66] TAG Data Standards ：EPCglobal, “EPC Tag Data Standards Version 1.1 Rev.1.27,” 
EPCglobal Standard Specification, 10 MAY 2004 
[67] W.Richard Stevens，林慶德編譯， UNIX 網路程式設計：網路應用程式設計
介面：Socket 與 XTI ，台灣培生教育，2002。 
[68] Paul Albitz and Cricket Liu 著 , 蔣大偉 編譯 , “DNS and BIND” 
[69] Paul and Cricket 著 , 林修平 and 謝崇耀 編譯 , “DNS/BIND 網路管理” 
[70] “EPC 射 頻 識 別 系 統 ” ， 中 華 民 國 商 品 條 碼 策 進 會 ：
http://www.eantaiwan.org.tw. 
[71] 陳長念, XML 與資料庫 Web 應用實務, 上奇科技, 2003. 
[72] Randal L. Schwartz & Tom Christiansen Foreword by Larry Wall，Perl 學習手
冊，歐萊禮，1999. 
[73] Auto-ID Center, “PML Core specification 1.0,” Sept. 2003. 
[74] 洪錦魁，Borland C++ 入門與應用徹底剖析，文魁資訊，1998。 
[75] Linux vbird:http://linux.vbird.org/ 
[76] “AWID MPR TCP/TP Interface Datasheet,” AWID. 
[77] 蕭文龍, 林松儒, TCP/IP 最佳入門實用書, 碁峯資訊, 2003. 
[78] 邱彥博, 林浩豐, CGI 徹底研究, 文魁資訊, 1998. 
[79] 陳建勳，XML 入門與實務經典，上奇科技，2002。 
[80] 謝銘錕, 無線射頻辨識系統讀取器網路界面技術之研發, 中華大學電機工程
學系碩士班論文, July, 2005。 
[81] C-C Song, M-K Hsieh, and D-C Liaw, “Implementation of the Reader’s 
Networking Interface for RFID Systems,” Proc. 2005 CACS automatic Control 
Conference, 2005. 
[82] C.-C. Song, M.-K. Hsieh, S.-W. Chen, and D.-C. Liaw, “Networking Analysis 
and Implementation of Reader Interface for RFID Systems,” Proc. Chung Hua 
Journal of Science and Engineering, Vol. 4, No. 4, pp. 47-52, 2006. 
[83] C.-C. Song, P.-C. Wang, H.-R. Tang, and D.-C. Liaw, “Design and 
Implementation of Savant Middleware on RFID Network,” Proc. 2006 CACS 
Automatic Control Conference, Tamsui, Taiwan, pp. 270-275, November 10-11, 
2006. 
[84] C.-C. Song, Y.-C Chang, Y.-S. Hung, and D.-C. Liaw, “Study and 
Implementation of a Prototyping System Platform for RFID Network,”Proc. 2007 
National Symposium on System Science and Engineering, Taipei, Taiwan, pp. 1-6, 
June 21-22, 2007. 
[85] 新華電腦，Embedded uClinux 在 PreSOCes 上實作，全華科技，2004。 
[86] http://www.rfid.com.tw/rfid.htm 
[87] http://www.g-ident.com/profil.htm 
[88] http://www.aimglobal.org/technologies/datacom/datacomcase.htm 
[89] http://www.ti.com/tiris/docs/news/in_the_news/2002/10-29-02.shtml 
