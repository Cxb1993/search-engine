phrase extraction problems. 
Many approaches are proposed to solve the L4IR 
problem. In this project, we aim to investigate the 
effectiveness of features of the L4IR problem. In our 
previous researches, we used evolutionary computation 
method to generate ranking functions. We found that 
the performance of generating a good ranking function 
is significantly affected by features. We also found 
that the number of features has bearing on 
performance as well. 
In this project we aim to manipulate the features to 
improve both the quality of generation stage and the 
execution stage of ranking function. An evolutionary 
computation approach is proposed to replace poor 
features by a composition of themselves with other 
features. A feature selection mechanism is proposed 
as well to reduce the number of features. While the 
fitness value of using current feature set falls into 
local optimum, new features generated by current 
feature set will be added. MAP and NDCG will be used 
in the fitness function. We believe that the output 
could achieve excellent performance in the ranking 
function generation problem. 
 
英文關鍵詞： ranking function, document processing, information 
retrieval, genetic programming, evolutionary 
computation 
 
II 
 
中文摘要 
應用於資訊擷取之排名函數學習(L4IR: Learning to rank for information retrieval)在目前屬於新興研究領
域，研究內容除了資訊擷取之外，尚包含了機器學習、軟式計算與人工智慧等領域。排名函數除了可
以應用在搜尋引擎之外，也可以應用在機器翻譯(machine translation)、問答系統(question answering 
system)與關鍵詞擷取(key phrase extraction)等問題上。 
使用者的搜尋條件在分析之後，在龐大的文件資料庫中，需要一種精準且具有效率的方法來找尋相關
文件。排名函數可以在短時間中判斷文件是否相關，並可依相關程度進行文件排序，將與搜尋條件最
具相關性之文件優先列出。 
目前已有許多探討學習排名函數的演算法相關研究，在這個計劃中，我們將探討資料集合的特徵(feature)
問題，由特徵的變化來改善排名函數的學習效率，並取得更好的排名函數。我們在過去的研究中，使
用演化式計算來產生排名函數。雖然演化式計算具有相當的效率與準確率，但是基於原資料特徵值的
排名函數產生方法，若原特徵值的代表性不足，或是特徵數目太少，對最後的產出結果往往有不良的
影響。我們將利用演化式計算的運作機制，利用多種不同的相關度評估函數，我們可以觀察資料在不
同面相的獨特性質，在排名函式產生前即可判斷特徵的優劣，將較不重要的特徵以新的特徵取代，演
化結束後再來產生排名函數。 
  
1 
 
報告內容 
前言 
用於資訊擷取之排名學習法(Learning to rank for information retrieval，L4IR)是一個新興的研究領
域，主要是利用統計或機器學習方法(Machine Learning)來學習出適當的排名函數，再依此函數值來判
定文件的相關程度，進而做為文件排序的基礎。面對使用者所提出的查詢輸入，研究人員傳統上都專
注於「如何計算相關性，並從大量文件的資料庫中擷取出相關資料」。傳統的資料擷取技術利用了文件
的特性，例如字詞頻率、單字詞性與字詞位置等等，計算文件與使用者之查詢的相關性程度。此類研
究常用於網頁搜尋引擎(web search engine)，當我們從網路上以取得網頁文件並以斷詞切字進行分析處
理後，將形成一個龐大的文件資料庫。網頁搜尋引擎的相關研究，就是在此龐大的資料庫中，探討如
何以使用者所下的查詢，快速計算出各文件與此查詢的相關性。隨著資訊擷取技術的進步，從基本的
「有相關」與「無相關」，到進階的相關性評估值，目前所努力的方向不只是找出相關的文件，而是要
排序出相關文件的先後順序。排名函數問題除了可以應用在網頁搜尋引擎之外，也可應用在機器翻譯
系統；排名函數之輸入值為來源單字與目標語言單字庫，經由函數的計算結果來判定與此來源單字最
貼切之翻譯為何。其它例如關鍵詞擷取(key phrase extraction)也是排名函數問題的一種應用。 
相關研究 
演化式計算是機器學習領域的一個分支，它模擬了現實世界中生物的演化機制，將可能解集合
為一個族群，每個可能解稱之為個體。經由模擬生物演化的方式諸如交配與突變，個體將藉由這些方
式產生新的個體(稱為子代)，而原族群中的所有個體則由子代們所取代，此一過程稱之為一個世代。在
經過一定數量的世代後，族群中的個體表現將會比原族群的個體要來得優秀，當滿足停止條件，例如
世代數己滿足或是個體表現己超越門檻值，則演化動作即可中止，並輸出最佳個體，做為此問題的解。
典型的 Learning to rank for information retrieval流程如圖一所示。 
 
Ranking function f 
Feature extractor 
Labeler 
Learning algorithm 
vectors 
Instances  
with  
judgments 
Training corpus 
( )
( )
( )
( )
( )
( )
1 1
1 2
1 | |
| | 1
| | 2
| | | |
,
,
,
,
,
,
D
Q
Q
Q D
q d
q d
q d
q d
q d
q d

















 
3 
 
考慮|Q|個不同的查詢，則這些查詢的平均精確度則可由Mean Average Precision (MAP) 來求得： 
MAP = 
( )
| |
| |
 w.r.t. 
| |
@  w.r.t. 
| |
iQ
iQ n
AP q Q
Q
P n rel n q Q
Q
∈
=
× ∈
∑
∑ ∑
。 
另一個常用的評估方式為 Normalized Discount Cumulative Gain (NDCG) [Jarvelin 2002]，第 n個位置的
NDCG表示為 NDCG@n： 
NDCG@n = 
( )
( )1 2
2 1
log 1
r j
n
m j
Z
j=
−
+∑ ， 
其中 Zm是用於一般化的常數，目的是讓最佳的 NDCG值正好為 1，此數值可由 DCG＠n的最大值之倒
數求得；而 r(j)是文件 dj的相關度判定量化值(gain)。 
排名函數學習法可以概略分為下列三種：point-wise、pair-wise與 list-wise [Cao 2007]。這三種領域分述
如下： 
Point-wise 
在 Point-wise的方法中，每一筆訓練資料都與一個數值或排名順序相關，這類的學習法嘗試去找出
一個模型，以類似於分類的方法，讓訓練資料代入此模型後，可以趨近於預期的數值或排名，這
種類型的典型方法是 PRank [Crammer 2002]、MCRank [Ping Li 2006]與 SVM[Nallapati 2004]等。 
Pair-wise 
在 Pair-wise類別的方法中，一筆訓練資料是一對物件(pair of objects)的相對關係。這類的方法考量
的是這一對物件彼此的排名關係為何。因此，所學習出一個模型會將一對物件分類為「正確排名」
或「不正確的排名」兩種。所有的文件可以兩兩成對互相比較彼此的排名，進而得出完整的文件
排名列表。此類方法大多使用機器學習的演算法，如 Ranking SVM [Herbrich 1999; Herbrich 2000]、
RankBoost [Freund 2003]與 RankNet [Burges 2005]等。 
List-wise 
在 List-wise的方法中，不只是考慮一對物件，而是考慮全部物件的排名清單，企圖產生可以直接
產生排名清單的模型或文件與其排名的關係，以排名函數問題的含意來看，這種方法所得出的結
果是最理想的，然而也是最難以實作的，如 RankGP [Yeh 2007]、ListNet[Cao 2007]、Lambda 
Rank[Burges 2006]、RankMLE [Xia 2008]與 SoftRank[Taylor 2008]。 
我們在 2007年的 SIGIR中發表了 RankGP [Yeh 2007]，這是以單族群基因規劃法做為工具，用
以產生排名函數，在該研究中，我們以實驗證明了基因規劃法的確可以產生效能優異的排名函數，並
且將實驗結果與 BM25、Rank SVM與 RankBoost等方法進行比較，RankGP的平均MAP與平均 NDCG
在大部份的情況下都得到了很好的結果。然而，RankGP的缺點是演化所需要的時間較長，因此，受時
間資源的限制，我們限定演化的排名函數為線性函數。基於 RankGP在線性函數的優秀表現，在 99年
度的國科會計劃中，我們所提出的計劃內容為使用多層式基因規劃法實做非線性排名函數以求得更好
的結果，目前實驗過程尚稱順利。 
在我們進行排名函數問題時，發現到特徵對資料的影響非常大。以Microsoft Research Center所
釋出的 LETOR 4.0資料集合為例[Liu 2007]，一筆資料包含了此文件與 query的相關度、query id、46
種不同的特徵與註解。46種特徵如表 一所示。由表 一可知，每個特徵都是經由某種演算法計算後所
獲得，因為文件的來源為網頁，因此各演算法分別以網頁的 body、anchor、title、URL與 whole document
5 
 
演化式計算的主要分支為基因演算法 Genetic algorithm [Goldberg 1989]與基因規劃法 Genetic 
programming [Koza 1992; Fogel 1995; Koza 1994; Koza 1996; Banzhaf 1998; Koza 1999; Koza 2003]。因為
單族群基因規劃法受限於個體多樣性不足等問題，研究人員開始探討多族群基因規劃法的可能性[Fogel 
1995; Oussaidene 1997; Brameier 1999; Fernández 2000; Brameier 2001; Fernández 2003]。我們從 2007年
時開始發表相關研究成果[Lin 2005; Lin 2007; Lin 2008]，我們除了應用多族群的概念，更導入類神經網
路的多層式架構，此成果即為多層式基因規劃法(Layered Architecture multi-population genetic 
programming, LAGEP)。 
LAGEP考量到傳統基因規劃法的缺點，使用多個族群來增加個體的多樣性，並納入類神經網路
的架構，將族群以「層」為單位組織起來，每一層可視為一個多族群基因規劃法的模型，而每一層執
行之後，因為每個族群的輸出為一個函數，因此每一層將產生一個函數集合，將每一筆訓練樣本代入
此函數集合後，所得到的函數值集合將用來取代原特徵值，建構出新的訓練樣本。新訓練樣本的特徵
值即為原特徵值的轉換或映射，而經由一連串的轉換之後，訓練樣本的合適度將會提高許多；LAGEP
的架構如圖二所示。 
 
表 二：與 URL相關之特徵彼此之相關係數 
 4 14 33 34 35 36 
4  0.963504 0.937719 0.699507 0.67503 0.697638 
14 0.963504  0.977334 0.769126 0.762121 0.763884 
33 0.937719 0.977334  0.800158 0.779181 0.792922 
34 0.699507 0.769126 0.800158  0.954995 0.974871 
35 0.67503 0.762121 0.779181 0.954995  0.943851 
36 0.697638 0.763884 0.792922 0.974871 0.943851  
實驗與分析 
我們將合適度函數(fitness function)與得分函數(score function)設計如下： 
( )
( )
1
1
@ 1
fitness =  for 
score  fitness +
@ 1
 for validation set
m
m
NDCG m m
T
NDCG m m
λ
λ
λ
λ
λ
λ
=
=
× − +
=
× − +
∑
∑
 
得分函數是將合適度函數的值，加上此個體於驗證資料集合(validation set)的表現，以避免 overfitting
的產生。其中， λ的用意在於強調排名較為優先之資料的重要性，例如，λ=5時，則我們所得到的合適
度函數值為 
( ) ( ) ( )
( ) ( )
@1 5 1 1 @ 2 5 2 1 @ 2 5 3 1
5 5 5
@ 4 5 4 1 @5 5 5 1
5 5
@1 5 @ 2 4 @ 2 3 @ 4 2 @5 1
5 5 5 5 5
NDCG NDCG NDCG
NDCG NDCG
NDCG NDCG NDCG NDCG NDCG
× − + × − + × − +
+ +
× − + × − +
+ +
× × × × ×
= + + + +
 
7 
 
crossover rate 90% 
mutation rate 10% 
λ  10 
 
圖 三: RankMGP 於 training set 與 Testing set的成果 
 
圖 四: RankMGP各種配置下的平均表現 
0.465  
0.470  
0.475  
0.480  
0.485  
0.490  
0.495  
0.500  
0.505  
0.510  
0.515  
0.520  
MAP NDCG 
Training Testing 
0.425  
0.430  
0.435  
0.440  
0.445  
0.450  
0.455  
0.460  
0.465  
0.470  
0.475  
0.480  
0.485  
0.490  
0.495  
0.500  
0.505  
0.510  
0.515  
0.520  
0.525  
0.530  
0.535  
0.540  
0.545  
0.550  
MAP NDCG 
Training Testing 
9 
 
我們的研究成果除了增加基因規劃法於排名函數問題之能見度，也將利用產生出來的特徵做為改良
Information Retrieval相關研究的基礎。如此一來，除了排名函數問題的相關研究之外，也可以在其它
不同領域做出貢獻。 
本計畫所得出之試驗結果可提供網頁資訊擷取相關研究者使用，亦可將本計畫所提出之完整演
算法應用在搜尋引擎、圖書資訊管理系統、機器翻譯、機器問答系統與機器對話等領域。特徵套用入
排名函數所需要的時間非常短，在必要時再以新的訓練資料進行重新學習即可，在大部份的情況下，
可以減少使用者的等待時間與搜尋時間，有效提高生產力與工作效率。本研究計劃所發展之程式碼以
開放原始碼方式散佈於網際網路上，使相關研究人員或有興趣之使用者可自行修改與應用。而隨著使
用本計劃程式碼的研究人員增加，此計劃之成果的影響力也將隨之增加。 
 
表 五 ：LETOR的 10個最重要特徵 
排序 特徵代碼 涵義 
1 29 BM25 of title 
2 31 LMIR.DIR of title 
3 30 LMIR.ABS of title 
4 46 Number of child page 
5 32 LMIR.JM of title 
6 1 TF(Term frequency) of body 
7 6 IDF(Inverse document frequency) of body 
8 13 TF*IDF of title 
9 35 LMIR.DIR of URL 
10 41 PageRank 
  
11 
 
[Nallapati 2004] Nallapati R., Discriminative models for information retrieval, SIGIR 2004, pp. 64-71, 2004 
[Robertson 1997] Robertson, S. E., Overview of the Okapi projects. Journal of Documentation, vol. 53, no. 1, 
pp. 3-7. 1997 
[Schölkopf 2002] Schölkopf B. and Smola A. J., Learninig with Kernels, Cambridge, MA, USA: MIT Press, 
2002 
[Tsai 2007] Tsai M., Liu T., Qin T., Chen H. and Ma W., FRank: a ranking method with fidelity loss. In 
Proceedings of the 30th Annual international ACM SIGIR Conference on Research and Development 
in information Retrieval (Amsterdam, The Netherlands, July 23 - 27, 2007), pp. 383-390, 2007 
[Taylor 2008] Taylor M., Guiver J., Stephen R. and Minka T., SoftRank: optimizing non-smooth rank 
metrics, In Proceedings of the international conference on Web search and web data mining (WSDM 
'08), pp. 77-86. 2008 
[Vapnik 1995] Vapnik V., The nature of statistical learning theory, New York, NY, USA: Springer-Verlag, 
1995 
[Xia 2008] Xia F., Liu T.Y., Wang J., Zhang W., Li H., Listwise Approach to Learning to Rank – Theory and 
Algorithm, in proceedings of ICML 2008, pp. 1192-1199, 2008 
[Yeh 2007] Yeh J. Y., Lin J.Y., Ke H.R. and Yang W.P., Learning to Rank for Information Retrieval Using 
Genetic Programming, SIGIR workshop on learning to rank for information retrieval (LR4IR-2007), 
Amsterdam, Netherlands, July 27, 2007. 
 
  
3 
 
 
清雲科技大學教師出席國際會議心得報告 
單位名稱 資訊工程系 職稱 兼任研究助理 姓名 劉朝中 
會議名稱 IEEE International Conference on Computational Intelligence and Cybernetics  
舉辦時間 2012/7 /12-14,  地點 Bali, INDONESIA 主辦單位 
IEEE  
INDONESIA  
SECTION  
這次參加IEEE Indonesia section於峇里島(Bali)所舉辦的研討會： IEEE 
International Conference on         Computational Intelligence and 
Cybernetics ，參加這次會議的學者來自世界各地，台灣也有許多大學參
加，例如政治大學與義守大學等等。而這次參加所報告的題目為: Learning 
to Rank for Information Retrieval Using Layered Multi-Population 
Genetic Programming；原本主辦單位將不同領域分在不同的會議廳進行，
不過當天將部分領域合併為同一間會議廳，也因此聽到了其他領域的最新
研究成果。雖然對於這些領域還很陌生，不過也因此了解其他領域所研究
的問題，更重要的是，聽到了不同的研究方法與新的理論，不只為自己增
廣見聞，累積更多知識，也為未來的研究多了新的思考方向。 
 
 
 
 
 
 
 
 
 
 
 
撰寫人簽名  單位主管簽名  
 
 
100 年度專題研究計畫研究成果彙整表 
計畫主持人：林忠億 計畫編號：100-2221-E-231-022- 
計畫名稱：處理特徵以解決排名函數問題 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備註（質化說明：
如 數 個 計 畫 共 同
成果、成果列為該
期 刊 之 封 面 故
事...等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
1. Jung-Yi Lin, 
Jen-Yuan 
Yeh, ’’Evolving 
Nonlinear Ranking 
Functions Using 
Genetic 
Programming’’, 
2011 Advanced 
Management 
Information 
Technologies and 
Applications 
Conference (2011 
AMITAC), Nov. 24, 
2011, HsinChu, 
Taiwan. (Best paper 
award) 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 1 1 100% 健行科技大學資訊工程系碩士班劉朝中 
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 1 100%  
研究報告/技術報告 0 0 100%  
國外 論文著作 
研討會論文 3 3 100% 
篇 
1, Jung Yi Lin, Ming 
Chih Tung, Chia Hui 
Chang, Chao Chung 
Liu, Ju Fu 
Peng, ’’Position 
Correction on 
2012, Bali, 
Indonesia, 
pp.45-49 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
其他成果 
(無法以量化表達之
成果如辦理學術活
動、獲得獎項、重要
國際合作、研究成果
國際影響力及其他協
助產業技術發展之具
體效益事項等，請以
文字敘述填列。) 
1. 訓練學生劉朝中使用 LINUX 建置系統, 該生參與紅帽 LINUX 競賽, 獲得台灣
區亞軍, 並代表台灣赴中國北京參與決賽. 
2. 多位國外研究人員向本人洽詢使用本計畫所採用之 RankMGP 系統原始碼. 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
