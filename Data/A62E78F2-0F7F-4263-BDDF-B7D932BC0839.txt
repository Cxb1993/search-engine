II 
中文摘要 
隨著行動運算的普及與社群網路的發展，相關的各式各樣應用也開始出現，位置分享
服務是其中一項非常廣泛且受到歡迎的服務之一，例如：Google Latitude 服務。該服務使
得智慧型手機使用者可以隨時回到自己的位置至伺服器上，而使用者的朋友可以透過該服
務的 web 介面去觀看使用者所在位置，並進行下一步應用。然而使用者的位置隱私卻受到
了極大的威脅。如何在不失去位置隱私性前提下，建立一個具有安全性位置資訊分享機制
是個值得探討與解決的問題。 
本年的研究中，我們設計一個安全位置分享應用，並在該應用上探討相關安全性，同
時我們並將其實作於現在熱門的智慧型手機平台上(Google Android 平台)。在設計此應用
時，我們首先針對位置分享協定的隱私問題與行動運算裝置的金鑰部署機制開始研究；位
置分享服務並不一定僅限定在手機網路之中，在車用網路(VANet)、無線感測網路(WSN)、
或傳統無線網路(WiFi)都是可應用的範圍。至於金鑰部暑早在過去已有眾多研究對此進行探
討，但大多數的研究中，皆不是針對行動運算裝置網路進行討論，蓋因智慧型手機是近年
來才開始興盛，因此本研究將對於智慧型手機上的金鑰部暑機制進行研究。針對位址隱私
性(Location privacy)所產生的問題，我們透過研究隱私保存的機制與協定(Privacy-Preserving 
schemes)，設計既能達到便利性也可以提供隱私性的位置分享機制。最後我們希望完成一
個可以利用在日常情境的位置分享應用。透過該安全位置分享服務的研究，我們期望研究
成果對目前的社群網路能夠造成影響。 
 
關鍵字：位置分享機制、隱私保存機制與協定、金鑰部署機制 
IV 
目錄 
1. 研究目的..................................................................................................................................... 1 
2. 文獻探討..................................................................................................................................... 2 
2.1 Location sharing service .................................................................................................... 2 
2.2 Sensor Location sharing protocol and mechanism............................................................. 2 
3. 研究成果..................................................................................................................................... 4 
3.1 密碼元件子系統............................................................................................................... 4 
3.2 網路服務子系統介紹....................................................................................................... 5 
3.3 簡訊系統元件................................................................................................................... 6 
3.4 使用者介面元件與使用者情境說明............................................................................... 7 
4. 參考文獻................................................................................................................................... 12 
5. 計劃成果自評........................................................................................................................... 14 
6. 附件一....................................................................................................................................... 15 
1 
1. 研究目的 
現今的社群網路隨著網路的普及，及使用者的接受之下，已經越來越多人在使用這一
類的服務，而其它相關的應用也開始被使用者使用，其中位置分享服務就是一項被廣泛利
用的服務，位置分享服務從字面上來看，就是使用者將現階段的位置回報給伺服器，從而
取得相應的服務，以 Google Latitude 服務為例，使用者透過行動裝置上的 GPS 定位系統，
將其所在位置經由行動網路回報給伺服器，伺服器將其紀錄並給與改使用者有社群關係的
朋友查詢，同時此資訊亦可結合其它相關的服務，利如結合 Google Map 得知現在附近有那
些商家。然而此類服務之中，多半使用者必須強迫信任伺服器，才能得以使用此服務，根
據先前的研究[1]，多數使用者都覺得 location-sharing 服務有很大的用處(平均 3.75, 1-5)，相
對的他們也覺得具有威脅性(平均 3.2, 1-5)。目前的解法可以簡單的分為兩類，第一種是混
淆使用者的位置資訊，即使用者並不將精確的位置資訊傳送給伺服器；另一種則是使用者
自行定制存取管理政策，只有擁有存取權利的合法使用者才能夠存取該位置資訊。第一種
可以完全避免伺服器得知精確資訊，可是代價是降低應用性以與網路傳輸量等缺點。第二
種則須要強迫信任伺服器不會濫用使用者的地理位置座標，同時使用者的存取權限設定不
一定是完善的。此兩種皆有其優缺點，所以本研究的目的就是如何在不失去位置隱私的前
提下，建立一安全位置分享服務系統，同時探討相關的位置資訊隱私的議題，同時本研究
亦可以推廣至無線感測網路(WSN)或車用網路(VANet)之上。 
 
3 
authorized-anonymous-ID-based scheme，這種技術稱為 blind signature 利用匿名的 ID 取代真
實 ID，也就是對 locaiton privacy 做 personal control。另外，對於 server 端因為有可能被駭
客所攻擊，因此也不給予信任，這個匿名的 ID 是經過一把 KEY 加密過後來做 PACKET 
AUTHORIZE，另外利用此把 KEY 產生 message authorized code 達到 access control，此種方
法相較於一般使用者無法對自己 location 做控制(傳送 ip 或 mac address)，達到 location 
privacy。在此 scheme 內，首先 mobile user 要對無線網路基礎建設的管理者申請一個匿名
id，利用此 id 連上 access point，並做認證已達到 access control。要做到 personal control，
此 paper 將 protocol 分為 registration protocol 和 controlled connection protocol，而匿名 id 的
產生主要建立在 PKI 上以及對隨機變數做 HASH 和加密，對於此 WORK 上的 FUTURE 在
於異質網路上的應用與加深理論和安全性的分析。 
有鑑於 LBS 的發展，存在許多 privacy 和 security problem 如 location tracking service，
或是例如在 LBS roaming 上的 interoperability problem，因此[8]發展出一套 web service 
architecture to protect the location information，設計出一套 LBS 上的 policy authority 和 LBS 
Broker 去解決認證上的問題，此方法克服了在不同 LBS platform 上不同的環境問題，此外
在這個 model 上還提供了 key 的管理方法。另外因為 SSL 只提供了資料在 SERVER 和
CLIENT 端上的加密傳輸，對於資料的儲存上並無幫助，因此在 LBS Broker 中提供了 XML 
Signature 和 XML Encryption for web 上的服務，最後做出了一個 simulation，可以算出在安
全性 LBS 上的 USER 佔總 USER 的比例。 
 
5 
最後，此子系統仍還有改進的空間。如引進 ID-Based 公開金鑰密碼系統[16]，直接使
用 ID 為 Public Key 並計算出 Private Key。這會讓系統的金鑰管理更加的容易與方便，但必
須克服計算量相當大的問題。另外，引進 Server-aided Secret Computation[17]，將加解密的
運算工作切割一部分給伺服器來做，而伺服器卻無法從此獲得有用資訊。如此將可大量地
減輕手機運算上的負擔。 
 
3.2 網路服務子系統介紹 
主要提供的功能是將Client(活動發起人以及活動參與者)和 Server端之間不同階段的通
訊連線中的訊息封裝成特殊的資料格式，做為通訊連線之用。Server 做為此項應用的中介
者，負責處理簡訊發送和手機之間的 TCP 連線，以及收集受邀者的相關資訊。因此必須面
對許多來自 Client 端的大量連線。為了能處理這類問題，我們採用了輕量化連線管理機制：
透過 Thread 來減輕 Server 處理連線的負擔。此外，由於網路服務子系統處理的角色不單只
是一般的對等 Client，而是大量一(活動發起者)對多(活動受邀者)的連線服務，因此會產生
time synchronization 的問題，而我們的做法是利用 Data Structure 的概念，來達成 time 
synchronization 的一致性。詳細解決辦法將於後面詳述。 
現在我們以網路服務子系統的內部觀點來說明系統運作的詳細流程和步驟，並以圖例
方式來佐以說明(Figure 2)：1.Client 端活動發起人向 Server 端發送邀請活動的訊息。2.Server
端透過安裝在其上的 GSM Modem 以簡訊(SMS)方式通知 Client 端的受邀者。3.Client 端受
邀者收到活動簡訊後觸發手機上活動邀請的 UI，並向 Server 端發送確認訊息以表明是否要
參加此活動。若受邀者超過系統時間未回應則 Timeout，預設為不參加。4.Server 端將訊息
傳回給 Client 端活動發起人並從中得知有多少 Client 端受邀者要參加、不參加以及未回應
此項活動邀請，並從封包中得知受邀者相關訊息。5.Client 端活動發起人向 Server 端發送確
認訊息決定是否要舉辦這次的活動。6.Client 端參加者收到活動是否舉辦的訊息，整體流程
完成。 
 
Figure 2：網路服務子系統的連線流程及服務運作架構 
 
特色: 
輕量化連線(Thread)管理來增進效率，以及利用 Data Structure 達成 time 
synchronization：從 Client 端連進 Server 的所有連線，皆以 Thread 來進行。由於 Server 需
要處理大量連線，因此利用 Thread 減輕 Server 的負擔，並在適當時機回收，不僅可以節省
系統資源、事半功倍，更能將資源做最佳化的運用。此外利用 Data Structure 的概念，我們
將每組活動歸類形成對等的 Cluster，來使得連線之間彼此不互相干擾，以達成 time 
synchronization 的一致性。 
利用 GSM Modem 解決受邀者未使用 3G 網卡或不在 Wi-Fi 的連線範圍內的問題：由於
手機沒有 Public IP，所以我們無法主動與某一台手機建立 TCP Tunnel，為了解決這個問題，
7 
系統之特殊簡訊收至手機中的簡訊信箱，為避免簡訊信箱雜亂造成使用者困擾，因此
InterfaceSmstoDB 元件另外提供將收件匣中的特殊簡訊刪除之功能。 
SmsDbadapter 元件主要功能是將簡訊存入 Database 中，並且負責讀取、儲存與刪除之
動作。Database 中記錄的欄位依序為活動日期、時間、舉辦地點之座標、發送者姓名、發
送者電話、傳送者姓名、傳送者電話、活動標題。 
此外本系統暫時僅支援英文語言，因為簡訊內容若是中文、英文以及數字混雜，字數
限制約 70 個字，若純英文與數字，字數限制約為 160 字。由於本系統傳送之基本字數已超
過 70 字，為不讓傳送內容被拆為兩封簡訊，本系統選擇使用純英文與數字，使簡訊擁有較
大的字數。本計畫實作中所採用的 android 系統收到中文簡訊後所顯示的中文字皆為亂碼，
因此本系統在第一階段暫不支援英文之外的語言。 
由於手機缺乏 IP，必須透過簡訊來觸發接收端之簡訊子系統來建立之後的連線，因此
簡訊子系統扮演傳送端與接收端之間建立第一步連線的重要角色。因為簡訊字數問題以及
Android 系統編碼問題，本系統暫時僅支援英文語言，未來將改善此限制，達到多種語言的
支援。 
 
3.4 使用者介面元件與使用者情境說明 
此操作介面子系統在 FindFriend 系統內負責與使用者溝通的責任，以圖形化介面以及
觸碰介面的方式，方便使用者操作，並幫助使用者決定系統所需的輸入資訊。此子系統以
友善、直覺為原則而設計，儘量符合使用者的操作習慣。 
 
Figure 3：簡易流程圖 
 
整個系統流程如 Figure 3 所示。有一使用者手持一含有此系統之手機，一開始會進入
Step 1 (活動發起階段，(1a))，Step 1 為活動發起人發起活動的步驟。在 Step 1 內，活動發
起人可以決定發起活動事件的時間、地點(1b)、聯絡人(1c)等資訊。待活動發起人決定好活
動事件的時間、地點、聯絡人等資訊，按下「傳送」鈕後，會傳送此活動事件之資料給所
屬網路介面子系統的 Server，其中的「地點」資訊會以密碼元件子系統加密過後呈現，Server
並不知道實際受邀地點。之後 Server 根據活動發起人所傳送過來的資料上的聯絡人清單，
發送簡訊(簡訊子系統)給相對應的受邀者，進入了 Step 2(受邀者決定階段，(1e))。Step 2 為
受邀者們決定是否參加此活動的階段，其中「地點」資訊會以密碼元件子系統解密，受邀
者們得以在操作介面子系統上看到實際地點。當受邀者們決定之後，會經由所屬網路介面
子系統的 Server 回傳給活動發起人，也就是進入了 Step 3(發起人決定階段，(1f))。在 Step 3
9 
 
Figure 5：(a)Google Map。(b)複選聯絡人。(c)使用者設定完畢送出訊息。 
 
在聯絡人的部分：「複選聯絡人」(Figure 5(b))，此為操作介面子系統內的通訊錄元件，
可以複選所想要邀請的聯絡人們，只要在名字上面輕點一下，即可勾選所想要邀請的聯絡
人，再按一下即可取消所選；如果在通訊錄中找不到所想要邀請的聯絡人的話，可以按下
手機上的「menu」鍵，會出現「電話簿」選項，點一下電話簿，就會有新增聯絡人資料的
選項，可以自由地新增、刪除、修改、查詢聯絡人。使用通訊錄元件決定好所想要邀請的
聯絡人們 Ccf、Lavillus 後，可以在操作介面子系統主畫面(Figure 4(a))回顧一下哪邊需要修
改，如不需修改，可直接按下「傳送」鈕，並等待所想要邀請的聯絡人們的回應。 
如果活動發起人決定好了之後又覺得需要修改的話，只要按下「清除」鈕，就可以把
螢幕上的訊息清除，此為操作介面子系統內的輔助元件之一；或者是按下手機上的「menu」
鍵，裡面也可以選擇「清除」。如果是要清除第一次使用所跳出的對話框裡的自己的名字和
電話的話，請按「清除發起人」。在按下「電話簿」按鈕時，會跳出聯絡人清單，方便新增
/刪除/查詢/修改聯絡人。在 Event Name、時間、地點、聯絡人都決定好之後，這項活動事
件就決定好了，然後可以按下「傳送」鈕(Figure 5(c))，將資料傳至 Server，Server 再根據
發起人的聯絡人清單，發送簡訊給相對應的聯絡人。 
之後聯絡人 Client 端(以下稱為受邀者)會接收到簡訊，上面記載著活動事件的發起人、
名稱、時間、地點，其中地點會解密過後以網路地圖方式呈現，而不是以經緯度的方式出
現在畫面上，方便受邀者一眼就知道在何處舉行此項活動，使用者根據訊息可以選擇「參
加」或「不參加」此項活動(Figure 6(a)(b))；如果受邀者沒有在 60 秒之內回應，系統就會
視此受邀者為逾時未回應者。如果此受邀者已逾時了但此受邀者仍要參加此活動，程式在
倒數計時結束時，會顯示出一個對話框，受邀者可以選擇「回電話」、「回簡訊」給發起人，
表達想要參加此活動的意願，或是直接按下「不參加」不參加此項活動。 
在受邀者決定好了之後，會經由 Server 回傳給發起者；發起者由 Server 統計得知參加
者、不參加者、未回應者。然後發起者根據以上資訊再決定要不要舉辦這項活動。(Figure 6(c)) 
參加的人就會從發起人經由 Server 接收到確認訊息，包含 Event No.、事件名稱以及是
否舉行，參加的 Client 端可以確認最後的活動訊息；不參加者就不會收到最後的活動訊息。 
11 
動事件逾時。活動事件在逾時後，提供一介面方便受邀者回應活動發起人，受邀者可以以
直接回電話或是回簡訊的方式告知活動發起人想要參加的意願；如果受邀者不想參加，亦
有不參加的選項可以選擇。此項設計的目的在於，當活動事件逾時後，並不會直接將受邀
者預設成不參加，而會將受邀者視為未回應者，逾時後仍可參加此活動事件，充分考慮到
使用者的使用情境。 
此操作介面子系統最主要負責與使用者溝通的角色，此篇文章一開始說明此子系統在
整個系統內的目的和功能。接著以搭配流程圖的方式說明此子系統和網路介面子系統、密
碼元件子系統、簡訊子系統互動的關係。然後舉例說明子系統運作的流程，同時介紹子系
統內各元件的目的、功能與操作方法。最後介紹此子系統直覺易用的特色並考慮到使用者
的使用情境及方便性，不讓使用者輸入錯誤或格式不恰當的資料，或遺漏輸入資料，快速
且準確地達成操作此子系統的目的。 
13 
[14] B. Hoh, M. Gruteser, H. Xiong, A. Alrabady, “Preserving privacy in gps traces via 
uncertainty-aware path cloaking”, CCS ’07, pp. 161-171, 2007. 
[15] M. Gruteser, D. Grunwald, “Enhancing location privacy in wireless LAN through disposable 
interface identifiers: a quantitative analysis”, Mobile Networks and Applications, vol. 10, no. 
3, pp. 315-325, 2005. 
[16] D. Boneh, M. Franklin, “Identity-based encryption from the weil pairing”, CRYPTO ’01, pp. 
213-229, 2001. 
[17] C. H. Lin, C. C. Chang, “A server-aided computation protocol for rsa enciphering 
algorithm”, International Journal of Computer Mathematics, vol.53 no. 3-4, pp. 149-155, 
1994. 
[18] E. Okamoto, K. Tanka, “Key distribution system based on identification information”, IEEE 
Journal on Selected Areas in Communications, vol.7, no.4, pp. 481-485, 1989 
15 
6. 附件一 
國科會補助專題研究計畫項下國際合作研究計畫國外研究
報告 
                                     日期：99 年 
6 月 3 日 
一、國際合作研究過程 
申請人於 2010 年 4 月 30 日至 5 月 28 日，拜訪新加坡南洋理工大學王華雄教授，進行
國際合作研究計畫交流與學術探討，針對計畫之研究進行學術探討。 
本次研究探討主要包括以下方向： 
1. 針對金鑰佈署與 Privacy preserving system 提供安全模型設計方法提出建議並協助修正
其安全模型。 
2. 提供運算加速演算法改良其設計之協定。 
3. 在系統實作前，提供演算法分析部份。 
4. 針對設計協定，指導並協助安全分析。 
 
二、研究成果 
1. 詳細定義出適用於本計畫在金鑰管理方面之需求，如計算量低、需要第三方伺服等。 
2. 根據需求設計出一符合本計畫之金鑰管理系統。 
 
三、建議 
這次的國際合作研究計畫的交流讓我感受良多，除了學術方面的收穫外，亦從國外的
學術環境中體會良多，這次拜訪除了合作的計畫外，也見識到國外與本國關於計畫執行的
不同面，同時也看到一流大學的不同，並從與學校中的學生交流中，了解到優秀大學與本
國學生間的差別，同時亦感受到一流大學與本校差異。 
 
四、其他 
 
計畫編
號 NSC98－2218－E－007－014－ 
計畫名
稱 
社群及行動安全技術之研究與應用--子計畫四：社群網路中基於
行動裝置上之安全位置分享服務與應用 
出國人
員姓名 何秉哲 
服務機
構及職
稱 
國立清華大學資訊工程系 
合作國
家 新加坡 
合作機
構 
Division of Mathematical 
Sciences School of Physical & 
Mathematical Sciences 
Nanyang Technological 
University 
出國時
間 
99 年 4 月 30 日
至 
99 年 5 月 28 日 
出國地
點 新加坡 
無衍生研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
在本年度的研究計畫中，我們探討了大量有關位置私密性(location privacy)
的文獻，並且研究了各種位置分享服務系統，除了系統本身的應用性外，我們
亦針對這些系統的安全漏洞進行深入研究與探討，並且提出一個安全的位置分
享服務系統，並將其實作於 Google Android 平台進行實際操作實驗。對此我
們在本年度也花了大量的人力在研究 Google Android 平台，並且根據平台的
特性與位置分享服務本身的功能性，設計出本年度的成果，安全的位置分享服
務系統。藉由實際操作系統，來印證上述之研究探討之結論，同時，為了增進
服務本身的價值性，我們希望未來能夠進一步增加服務的功能性，同時試著結
合其它現有的服務或是平台，進一步使我們的服務能夠更加完善，故我們預計
在明年提出相關計畫題目，並且參考本年度計畫之結論，進行相關的研究項目，
並試著將該服務朝向市場化的方向努力。 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
