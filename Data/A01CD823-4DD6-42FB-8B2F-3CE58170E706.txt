 2
行政院國家科學委員會專題研究計畫成果報告 
結合倒傳遞類神經網路及支撐向量機建構雙向迴焊製程診斷與績效評估機
制 
Integrating neural networks and support vector machines for reflow 
soldering process diagnosis and control 
 
計畫編號：NSC 95-2221-E-366-011 
執行期限：95 年 08 月 01 日  至  96 年 07 月 31 日 
主持人：蔡聰男 樹德科技大學運籌管理系 
計畫參與人員：潘柳吟、黃薏如 樹德科技大學運籌管理系 
 
一、中文摘要 
 
迴焊 (Reflow soldering)為電子組裝
(Electronic assembly)之主要製程，用以生
產 3C 電子產品，且迴焊製程品質良窳為
影響電子產品良率主要因素，不良迴焊製
程行為控制與製程了解度不佳將導致諸
多焊接缺點、重工、及有效生產時間損
失。設定焊溫度曲線(Reflow temperature 
profile, RTP)為複雜且費時得工作，製程工
作者通常運用試誤法(Trial and error)以求
得產出適當焊性品質之 RTP，再者許多研
究通常運用複雜數學模式以模擬 RTP 之
產出，但卻因工程師需要進階數學背景而
無法於實務上導入應用。本研究運用類神
經網路與支撐向量機 (Support vector 
machine, SVM)以發展雙向迴焊製程診斷
與控制系統，其中運用實驗設計以了解製
程行為與作為建構非線性製程效應模型
之數據，繼而運用此實驗數據作為 ANN
與 SVM 建構製程模型。此系統包括(1) 正
向製程診斷控制機制：運用 ANN 模型預
測輸出之 RTP，並採 AHP 所導出之多屬
性評核準則評估迴焊參數之適用性。(2) 
反向製程控制機制：運用 SVM 模型推導
出適用於新舊產品之迴焊溫度參數。經由
實務應用評估並獲得良好績效，足以全面
應用於大量生產之電子組裝作業上。 
 
關鍵詞：表面黏著技術、階層分析法、類
神經網路、迴焊製程、支撐向量機 
 
ABSTRACT 
Reflow soldering is the principal 
process to attach surface mounted 
components (SMCs) onto a printed circuit 
board (PCB) for fabricating a variety of 
modern electronics products. Reflow 
soldering operation is widely recognized as 
one of the sources of soldering defect in 
SMA. Poor understanding of reflow 
soldering behavior can result in wasted 
troubleshooting time, countless soldering 
defects, considerable reworks, and wastes. 
Obtaining an appropriate reflow temperature 
profile (RTP) using mathematical model is 
difficult for empirical implementation since 
the advanced mathematics is required as an 
apriori for engineers. In practice, many 
engineers usually employ a trial-and-error 
approach to search a RTP until achieving an 
acceptable soldering quality level, and thus, 
the heating parameter searching process 
becomes a time-consuming and a 
non-productive task. 
This study integrates artificial neural 
network (ANN) and support vector machine 
(SVM) to diagnose and control the reflow 
soldering process in a closed-loop scheme. 
A 38-4 experimental design was firstly 
conducted and utilized to investigate the 
nonlinear relationships of reflow soldering 
through the multiple regression analysis. 
The experimental data then served as a 
training data set for formulating the 
forward-flow and reverse-flow behaviors of 
reflow soldering using ANN and SVM 
 4
which implements the structural risk 
minimization (SRM) principle rather 
employing the empirical risk minimization 
(ERM) to minimize an upper bound on the 
generalization error instead of minimizing 
the training error commonly used in 
statistical learning [6]. In addition, the SVM 
use a convex optimization scheme that 
ensures the local minimization is the unique 
minimization. Recently, SVM has 
confirmed performance in the fields of 
learning, pattern recognition [7], text 
classification [8], prediction [9], and 
bioinformatics [10]. 
Reflow soldering operation exhibits 
nonlinear behavior and is widely recognized 
as one of the sources of soldering defect in 
SMA. Poor understanding of reflow 
soldering behavior can result in wasted 
troubleshooting time, countless soldering 
defects, considerable reworks, and wastes. 
Obtaining an appropriate reflow temperature 
profile (RTP) using mathematical model is 
difficult for empirical implementation since 
the advanced mathematics is required as an 
apriori for engineers. In practice, many 
engineers usually employ a trial-and-error 
approach to search a RTP until achieving an 
acceptable soldering quality level, and thus, 
the heating parameter searching process 
becomes a time-consuming and a 
non-productive task. An anonymous 
American electronics manufacturer in 
Taiwan (the subject company is referred as 
company V here) that produces a variety of 
automation transaction portfolios, including 
smartcard readers, credit card readers and 
transaction security systems. The plant has 
six independent SMT assembly lines. 
According to the production report 
generated by company V, revealed the 
reflow soldering setup time and 
troubleshooting time was averagely 55.5 
hours/per month, represents up to 2.6% of 
total production time, and companied with 
significant quality losses. 
The ANN and SVM techniques are 
dominant in nonlinear mapping and error 
generalization that are superior to 
conventional multiple linear regression 
technique for solving the prediction 
problems, especially for MIMO instances 
[6]. ANN and SVM modeling approaches 
are applicable to formulate the forward-flow 
and reverse-flow process of reflow 
soldering accurately. 
Figure. 1 shows the development flow 
for this proposed reflow soldering diagnosis 
and control system. A fractional factorial 
experimental design of 38-4 (=81 runs) was 
conducted and followed by the multiple 
regression analysis to confirm the 
interoperability and reliability of the 
experimental data set. A preliminary study 
was then conducted to identify the 
feasibility and prediction accuracy of ANN 
and SVM in the modeling of forward-flow 
and reverse-flow of reflow soldering 
process by using random samples collected 
from production lines. The experimental 
data set then served as training exemplars 
for both the ANN and SVM modeling. The 
proposed system consists of two modules, 
(1) the forward-flow module was used to 
predict the important output elements of an 
RTP. Additionally, an MCDM paradigm was 
devised using AHP analysis to evaluate the 
performance of the predicted RTP. (2) the 
reverse-flow module was facilitated to 
advise near-optimal heating parameters 
based on the inputs of specific production 
requirements. Finally, the proposed system 
was tested and validated empirically via 
SPC data. 
 
Figure. 1 The development flow of the 
proposed system 
 6
appropriate kernel functions are crucial to 
obtaining high model accuracy and 
efficiency for SVM modeling [12]. To 
design an SVM, the parameter set should be 
optimized, particularly selections of the 
penalty parameter (C) and kernel function 
parameter (γ) are sensitive to RBF function. 
A designer must choose a kernel function, 
set the kernel function parameter, and 
determine the other parameters listed in 
Table. A3 for SVM modeling. 
 
Experimental data
(Random selection) 
BPN modeling SVM modeling
Training data set (80%)
Testing data set (20%) 
Model optimization
Model generation
Design of experiment
Empirical model
evaluation  
Figure. 2 Data training and model 
generation 
Exhausting
rate
Preheating
slope 
Input layer Hidden layer Output layer
Conveyor
speed
PCB gap
Heater #1
temperature
Peak 
temperature 
Soaking
temperature
Ramp-up 
slope 
T1
T2 
T3
T4 
PCB density
Heater #2
temperature
Heater #3
temperature
Heater #4
temperature
Error feedback
 
Figure. 3 The optimized topology of 
BPN  
The right part of Figure. 2 shows the 
SVM modeling process in this study, 80% 
of experimental data (reverse-flow, 
outputs-to-inputs) act as training data and 
the remaining 20% is utilized for model 
cross-verification. An L18 experimental 
design is applied to test various kernel 
functions and parameters when optimizing 
the modeling process. The MAPE, 
classification rate (CR) and mean square 
error (M) are indicators of performance. 
Evaluation results are summarized in Table. 
A4. For test set No. 1, prediction errors 
(average MAPE values) for air-exhausting 
rate and PCB gap are 13% and 15%, 
respectively. The MAPEs for the other items 
are all <10%. Classification accuracy is 
evaluated by using the LIBSVM’s indicator, 
and the temperature of heater #2 only has a 
72.5% of accuracy rate; however, all other 
items are >81.25%. These evaluation results 
good prediction accuracy for the 
reverse-flow module and can adequately 
determine the heating parameters according 
to specific production requirements. 
 
3.3 Empirical Evaluations 
 
In evaluating the forward-flow module, 
30 boards were randomly selected from the 
production lines at company V. Prediction 
accuracy was evaluated via the MAPE 
indicator. Table. 1 shows a summary of 
evaluation results for forward-flow module. 
The average MAPEs for the 30 boards are 
all <10%, indicating a high prediction 
accuracy rate obtained by this forward-flow 
module. 
 
Table. 1 Empirical evaluations for 
forward-flow module 
Outputs Average MAPE 
Peak temperature 6.3% 
Preheating slope 5.4% 
Soaking temperature 3.5% 
Ramp-up slope 7.3% 
T1 3.3% 
T2 3.9% 
T3 5.6% 
T4 7.1% 
 
 
 8
[8] T. Joachims, Text categorization with 
support vector machines, Proc. of 
European conference on machine 
learning (ECML), Chemintz, DE, 
(1998) 137–142. 
[9] K.J. Kim, Financial time series 
forecasting using support vector 
machines, Neurocomputing. 
(2003)307-319. 
[10] G.X. Yu, G. Ostrouchov, A. Geist, N.F. 
Samatova, An SVMbased algorithm 
for identification of 
photosynthesis-specific genome 
features, Second IEEE computer 
society bioinformatics conference, CA, 
USA, (2003) 235–243. 
[11] V.N. Vapnik, Statistical learning theory, 
NY:Wiley, 1998. 
[12] C.-C., Chang, C.-J., Lin, LIBSVM: A 
library for support vector machines, 
Technical Report, Department of 
Computer Science and Information 
Engineering, National Taiwan 
University, 2005. Available at 
http://www.csie.ntu.edu.tw/~cjlin/papers
/libsvm.pdf. 
 
 
 10
Table A3 The model, kernel functions, and parameters used in LIBSVM 
SVM Parameters 
 
Reflowing inputs 
Models Kernel functions 
Parameter 
(d) 
Parameter 
(g) 
Parameter 
(γ) 
Parameter 
(c) 
Parameter 
(n) 
Parameter 
(e) 
PCB density NU-SVC Linear 1.56430 0.90606 0 344.19200 0.16444 0.26393 
Exhausting rate NU-SVR Sigmoid 5.33919 9.80788E-02 1.07001 474.88141 0.59072 0.37426 
PCB gap NU-SVC Linear 2.85135 0.53432 0 648.04582 0.18843 0.28131 
Conveyor speed NU-SVR RBF 3 0.0625 0 1 0.5 0.001 
Heater #1 temperature NU-SVC RBF 0.77490 0.24544 0 859.63325 0.5 0.45175 
Heater #2 temperature C-SVC Sigmoid 1.01596 0.29125 1.00426 948.69165 0.5 0.38848 
Heater #3 temperature C-SVC Sigmoid 0.79870 0.24501 2.29791 277.59437 0.5 8.086E-02 
Heater #4 temperature C-SVC Sigmoid 2.18033 0.03939 1.02685 170.23591859 0.5 0.63139 
Table A4 SVM model testing results (LIBSVM) 
Test set #1 Test set #2 Test set #3 Testing sets 
 
 
Reflowing outputs 
MAPE LIBSVM Indicator MAPE 
LIBSVM 
Indicator MAPE 
LIBSVM  
Indicator 
PCB density 3% 93.75% C 26% 68.75% C 33% 62.5% C 
Exhausting rate 13% 0.609375 M 19% 0.921875 M 40% 1.64063 M 
PCB gap 15% 81.25% C 290% 43.75% C 478% 31.25% C 
Conveyor speed 3% 0.000657247 M 3% 0.00054376 M 2% 0.000285511 M 
Heater #1 temperature 3% 81.25% C 6% 68.75% C 3% 81.5% C 
Heater #2 temperature 3% 72.5% C 8% 37.5% C 7% 31.25% C 
Heater #3 temperature 0% 100% C 4% 68.75% C 6% 56.25% C 
Heater #4 temperature 1% 87.5% C 2% 81.25% C 1% 87.5% C 
Legends: “C” denotes the accuracy of classification; “M” represents mean squared error (MSE)  
 
 
