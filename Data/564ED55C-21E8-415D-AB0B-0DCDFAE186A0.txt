一.報告內容 
 
1.前言 
近年來 FTTx (Fiber to the x)因使用者在寬頻傳輸(Broadband Transmission)的需求量日益遽增，
因此特別受到青睞並且正快速的發展當中，隨著 EPON 技術的規模應用和晶片成本的不斷降低，以
及光纖鋪設規模的不斷地擴大，使得 EPON 技術將很快成為 FTTx 的主要接取模式之一。因為它是
一種低成本的傳輸，可以節省光纖和光設備的費用，而且可以實現寬帶數據業務與有線電視(CATV)
業務的共網傳送。全球許多國家在 FTTH 的研究與投入不遺餘力，然而在接取網路端仍存在著關鍵
性的“第一英哩(Ethernet in the First Mile, EFM)”之瓶頸問題。 
FTTx 技術主要用於接取網路光纖化，範圍從區域電信機房局端設備到用戶終端設備，重要之
局端設備為包括光線路終端(Optical Line Terminal; OLT)、用戶終端設備為光網路單元(Optical 
Network Unit; ONU)或光網路終端(Optical Network Terminal; ONT)。根據光纖到用戶的距離來分類，
其中現在歐美、日本等許多先進國家相當熱門的光纖到家(Fiber-to-the-Home, FTTH)特別受到重視，
也是被視為最終的接取網路解決方案。 
EPON 所採取的是一種點到多點(Point-to-MultiPoint)的網路架構，EPON 係由光線路終端 OLT、
光分歧/結合器(Splitter/Combiner)和 ONUs 等所組成，採用樹形拓撲架構，光纖由 OLT 拉出後，經過
一段距離到達 Splitter，Splitter 的主要目的是在於將光路分支，依照系統需求和技術能力把光路徑
(Optical Path)由一路變成 8 路、16 路或是 32 路，目前最高可到 64 路，再由分支的光路徑接入 ONU
端。 
頻譜振幅編碼(Spectral-Amplitude-Coding, SAC)技術於 Coded-WDM (a CDM)系統的運用。光頻
譜振幅編碼(SAC)系統的優點在於每筆資料是在光頻譜(Optical Spectrum)上編碼，所以並不必考慮到
每個 ONU 在個別時槽上的分配。若在同一時間裡有多個 ONU 一起傳送資料到 OLT 端並不會發生
碰撞的問題，使得光接取網路更適合用來解決 Burst 信號之收送。並且頻幅編解碼(SAC)是基於光碼
的低值 correlation 的優越性來決定，而非完全依賴波長的精準度，故可克服 WDM-PON 的缺點，達
到 cost-efficiency 的效果。而且各光指配碼是以疊加、混合的方式傳輸，且可在任意時刻指定一個光
指配碼(signature address code)給某個特定 ONU，因此在資料的傳輸上要比傳統的 TDM-PON 與
WDM-PON 更具安全性。 
藉由陣列波導光柵(Arrayed-Waveguide Grating, AWG)既有的循環(cyclic periodic properties)與自
由頻譜間距(Free Spectral Range, FSR)的特性，使之當作頻譜振幅編、解碼器裝置，主要是基於頻域
上的光波長碼型(coding pattern)來達到較優的 correlation 特性，而並非在時域上的光波長配置。故我
們接收端檢測需要求 chip 週期同步而容許傳送非同步的位元(bit)信號。將這樣的非同步光頻譜編解
碼裝置運用於 Coded WDM-PON 的架構，可消除多重存取干擾(Multiple- Access Interference, MAI)之
問題。 
然而，如 T.H. Shake 在先前的論文中提到，相較於分時多工和分波多工而言，光分碼多工系統
雖說是一安全度相當高的多工系統，但此多工方式依然潛藏著被有心人士竊取或竄改的危機，造成
通訊網路使用者不同程度的傷害，特所以為了防止在接取網路上因安全的漏洞而造成有心人士的惡
意竊取資料與攻擊，須對網路上的安全隱私做相當程度的考量及規劃。就如先前提到，EPON 所採
取的是一種點到多點(Point-to-Multipoint)的網路架構，EPON 係由光線路終端 OLT、光分歧/結合器
(Splitter/Combiner)和 ONUs 等所組成，採用樹形拓撲架構，透過光纖將 OLT 和 ONU 做連結，EPON
之下行所採用的機制是: OLT 經由 Splitter 使用分時多工(Time-Division Multiplexing)的技術將所有的
訊框以廣播(Broadcast)的方式發送給每一個 ONU。因此在信號傳送過程中並不需要類似路由器
(Router)的網路設備，簡化了網路的複雜性，及減少佈建之成本，但卻有一重大缺點就是資料的安全
性(Security)低容易被有心人竊取(Eavesdropping)資料。 
ㄧ般來說，為了確保 EPON 的安全性，網路管理者必須要能夠保證用戶(subscriber)的隱私權並
且提供某些機制去控制用戶對於網路的存取權。傳統的 EPON 下行是以廣播的方式將全部的訊息
(Frame)傳送給每一個 ONU，所以竊聽者便將此特性當成一個網路漏洞來竊取資料，竊聽者可以在任
何一個 ONU 端來竊聽所有或是某幾個特定 ONU 的內部資料，甚至在訊息傳輸到 ONU 的途中即可
從光纖竊取所要的資料，以往安全性在 EPON 裡是相當弱勢的一項問題，雖有文獻提及它的重要性，
但卻沒有實際強而有力的機制來增加 EPON 的安全性，尤其對於現在網路安全的觀念日趨重要，
 
2(a) 
 
2(b) 
圖 2、 在具有相同的各個通道(channel)能量分佈[2, 2, 2, 0, 0, 2, 0]之下 
           (a).當陣列光纖光柵前端各 ONU 傳送位元信號為(1, 0, 1, 0, 0, 0, 0), 與 
        (b).當陣列光纖光柵前端各 ONU 傳送位元信號為(0, 0, 0, 0, 1, 0, 1).  
 
舉現例來說，在 MC 矩陣的第 P 列就是表示可程式化編碼器的第 P 個輸出埠的輸出值，然而
MC矩陣的第 q 行是表示第 q 個 ONU 從可程式化編碼器的第 q 的輸入埠輸入後，在可程式化編碼器
的第 q 個輸出通道得到的指配碼。並且根據控制暫存器的內容來控制光選擇器，例如當控制暫存器
的內容為一個位元”1”時，則所對應控制的一個光選擇器便呈現打開(On)的狀態，相反地，當控制暫
存器的內容為一個位元”0”時，則所對應控制的一個光選擇器便呈現打開(Off)的狀態，如此ㄧ來可直
接改變每個 ONU 所使用的指配碼 Ui而達到可程式化編碼的機制。 
 
表 1、所有可變異碼 Ui下，其位移控制暫存器內含 SC與 
AWG 輸出埠波長分配矩陣 MC之對應表 
 
 
如表 1 所示，當有七個 ONU 的資料在可變異性頻譜振幅光分碼多工網路中傳送時，S 是表示
為控制暫存器的控制狀態序列，也就是控制暫存器的內容。此內容將可控制光選擇器(controller 
register)和光開關(optical switch)，來達到可程式化編碼的效果。M 是表示在每一種控制暫存器的控
制狀態下，所對應到編碼後的輸出碼矩陣。換句話說，控制暫存器的狀態將會出現七種狀態{Si, i =1 
to 7}分別對應到可程式化編碼器編碼後的輸出碼矩陣{Mi, i =1 to 7}。且此控制暫存器的初始狀態
用本計畫擁有大量的展時與群組跳頻碼族，可將 M 個不同的指配碼分配給相同的 ONU，此處指配
碼代表 log2M 位元。因此，每個 ONU 使用者可從 M 個碼中隨機地挑選一個指配碼用來傳送資訊，
以克服傳統 OOK 傳輸所造成資訊被卻竊取的危機。 
本計畫中藉由擴增為巨大的碼族與主動變換序碼的協定與機制，使私密性指標產生相乘的效果
以強化光纖網路的安全性。同時我們也將提出各 ONU 主動變換光位址指配碼的確切時機。例如：使
用資訊理論上亂度熵(entropy)的觀念，我們將監控各波長使用的模式(model)。藉由統計各波長使用
的分配情形中AWG輸出埠碼矩陣, M來推論可調控光展時/群組跳頻(Programmable TS/WGH)二維分
碼多工系統其最危急與最脆弱的時機，以啟動主動變換各 ONU 光位址指配碼的機制。 
 
1. 可調控光展時/群組跳頻(Programmable TS/WGH)二維碼組態 
本計畫主要採取可調控光展時/群組跳頻 (Programmable TS/WGH)二維分碼多工技術實現於乙
太被動光纖網路(EPON)。以下簡稱為 Programmable TS/WGH 架構。本計畫的上、下行網路的整合
如圖 4 所示。基於被動光纖網路中來自於 ONU 與各別使用者之間的距離互有不同，以及 ONU 端的
使用者有分別群聚的現象。我們將所有使用者區分為不同群組(ONU group)，並且各個群組分別擁有
相同的使用者。此群組觀念恰可對應至 AWG Router 的循環自由頻譜間距的特性，符合 FTTH 使用
者所屬地理上群組(社區或建物)的分佈情況。  
 
我們使用陣列波導光柵路由器(AWG router)既有循環(cyclic periodic)自由頻間距(Free Spectral 
Range, FSR)的特性。以 TS/WGH 的編碼並結合最大長度序碼(Maximal-Length Sequence, M-sequence)
技術作為每一個 ONU 之特定位址序碼 (signature address code)。以圖 4 為例，我們可在具有中央集
縮的 OLT 部份，使用一個共享式的陣列波導光柵路由器(AWG router)，以達到精簡建置成本的目的。
且在傳送端陣列波導光柵路由器之前，我們同時整合我們先前的研究而提出的可調控光 TS/WGH 二
維分碼多工系統之變換使用碼(Signature address code)機制。另在 ONU 的接收端部份，主要由匹配
(match)於 OLT 發射端光位址序碼 (signature address code)的一對互補式陣列波導光柵解碼器
(AWG-based decoder)、控制暫存器(control register)、平衡光檢測器(photo-detector)與決策單元(decision 
unit)所組成。經由上述將最大長度序碼運用於陣列波導光柵編、解碼器，使得本計畫之可調控光展
時/群組跳頻(Programmable TS/WGH)二維分碼多工方法更易於實現在 FTTH 架構上以減低建置成本
與提高網路系統的私密性。 
 
 
圖 4、可調控光展時/群組跳頻二維分碼多工技術的光纖到府網路(雙向組態)。 
 
以下行網路為例，來自於不同使用者(ONU)的位元信號，在經由可調式濾波器濾出之波段中，
以 ON-OFF 調變方式使用共享的 N×N 陣列波導光柵路由器，同時透過置於陣列波導光柵路由器後之
控制暫存器，控制陣列波導光柵與光結合器之間拉線方式，進行的最大長度序碼的編碼。當 OLT 各
自以唯一的序碼從陣列波導光柵編碼器輸出埠送出，再經由 optical combiner 混合於單一光纖傳輸通
道中。在 ONU 的接收端部份，需使用相同於 OLT 發射端的控制暫存器，且控制暫存器狀態必需和
OLT 發射端暫存器狀態相匹配，不同的是在發射端的控制暫存器是置於陣列波導光柵路由器之後，
長度序碼長 N 經旋轉(cyclic shifting)可得到 N 個碼字(codeword)。換言之，h = {1, 2, ..., N}。另指標 i
代表該 M-sequence 碼的第 i 個細元(chip)。 
 
表 3、二維展時和自由頻譜間距群組跳躍碼(TS/WGH code pattern) 
 
 
此處，延續 M-sequence 碼的特徵，第 j 個最大長度序碼的碼型 Mj(i) (j = 1, 2, ..., N)可被視為將
M0(i)經旋轉 j 個步驟後衍生變化而得到(Mj(i) = Tj-1 M0(i))。以最大長度序碼長 N=7 為例，M0(i)=(1, 1, 
1, 0, 0, 1, 0)經過兩次旋轉後可得 M2(i) = (1, 0, 1, 1, 1, 0, 0)，假設波段落在第一個自由頻譜間距群組
內，則 M0(i)即為(λ1, λ2, λ3, 0, 0, λ6, 0)而 M2(i)為(λ1, 0, λ3, λ4, λ5 , 0, 0)，波段落在第二個自由頻譜間距
群組內，則 M0(i)即為(λ8, λ9, λ10, 0, 0, λ13, 0)而 M2(i)為(λ8, 0, λ10, λ11, λ12 , 0, 0)。在第一區間內的最大
長度序碼與波長分佈對應如表 4。 
表 4、最大長度序碼與波長分佈對應表。(第一個 FSR 區間內) 
 
最後，我們建構一組碼族(code family)即展時碼型之 PS=5，跳頻碼型之 PG=5 且最大長度序碼長
N=7 來組成完整的三維碼型如表 5 所示。由表 5 中可以得知，全部三維碼型的個數(即 ONU 之系統
容量)為 PS×(PG-1)×N，在此例子中，三維碼型的個數為 5×4×7=140。此外，為了更清楚的解釋，我們
以三維立體圖方式表示出 S0G1M0，如圖 5 所示。 
 
表 5、 運用 TS/WGH code 技術於光纖到府的編碼家族。 
當最大長度序碼長度為 N=7。 
 
 
圖 7、Fine AWG router 實現最大長度序列(M-sequence)運作機制 
 
(1) 利用 Fine AWG router 來實現最大長度序列(M-sequence)： 
為了更清楚描述圖6中7×7 Fine AWG的工作原理，以下試以3×3 Fine AWG的簡易例子來說明該
Fine AWG元件的運作機制。如圖7所示，Fine AWG根據自由頻譜間距(FSR interval) 來產生最大長度
序列碼的碼型。因為AWG既有的循環特性(cyclic property)，當Fine AWG router輸入端連接成最大長
度序列碼時，Fine AWG可以產生不同的最大長度序碼碼型。如圖7所示，最大長度序碼碼長等於3為
例，當暫存器(electrical controller shift-register)控制輸入端連接為M0(1,0,1)時，經由3×3 Fine AWG輸
出的頻譜，M0, M1 及 M2出現於不同的FSR interval。 
 
(2) Coarse AWGs 及 delay lines 實現 TS/WGH 碼族： 
Coarse AWG routers 以及一連串 delay lines 裝置在 fine AWG routers 的後端，以實現 TS/WGH 碼
族。在圖 8中，各個 coarse AWG routers 分割 Fine AWG 各個 output 產生在不同自由頻譜間距內的最
大長度序碼。接著，一連串的 delay lines 用來實現展時碼型，依據碼型連接 coarse AWG 的輸出端與
delay line 的輸入端，則可產生 TS/WGH 碼族。 
 
在圖 8中，當暫存器(electrical controller shift-register)控制輸入端連接為 M0(1,0,1)時，第一個自
由頻譜間距內所出現的 M0、M1、M2 會出現在三個 coarse AWG 的第一個輸出端，同理可知，第二個
自由頻譜間距區間所出現的 M0、M1、M2 和第三個自由頻譜間距區間所出現的 M0、M1、M2會依序出現
在每個 coarse AWG 的第二和第三個輸出端。接著，藉由展時碼型 S0.S1.S2 連結各組的 delay lines，再
結合之前藉由 fine AWG 和 coarse AWG 所產生在不同自由頻譜間距區間內不同的最大長度序碼，如
此可創造出如同表 5 的 TS/WH 碼族 
 
 
圖 8、Coarse AWGs 及 delay lines 實現 TS/WGH 碼族的架構 
 
圖 6所示，我們將不同 TS/WGH 碼型但具相同最大長度序碼碼型的 ONU 使用者，由相同的 Fine 
AWG 輸出埠進入 Coarse AWG，加上控制暫存器，光開關和光延遲線的作用，可以產生不同的最大
的整數次方，使用者從 M 個指配碼中隨機挑選一個來傳送資訊，且每個指配碼代表 log2 M 位元，則
我們稱之為多維度調變(Multidimensional Modulation)技術。換句話說，假設如此系統架構下有 K 個
使用者(active user)，在接收端必需在此 K 個指配碼中解出正確的資訊，因此系統的錯誤率將與之前
二位元條件下是相等的。不過這樣的調變方式有兩項主要優勢： 
(1)在相同的系統條件下(相同系統容量、可用頻寬)，每個使用者的位元速率為傳統二位元下的
log2 M 倍，即有較高的系統頻譜效率。 
(2)每個指配碼代表著 log2 M 位元，可避免傳統 OOK 傳輸的不安全性。 
 
接下來說明多維度調變的基本原理。假設系統中有 K 個同時使用者(active user)，而碼空間(code 
space)定義為 ，且尚未被使用的碼數目 C-K>>1。若我們能夠平均地分配每個使用者 M
個指配碼，即
},...,{ 1 CssC ≡
⎥⎦
⎥⎢⎣
⎢=
K
CM 且 C mod(K)=0，因此每個使用者將擁有一組指配碼集合，c 。
藉由良好系統設計分配之下，M 為 2 的整數次方，也就是使用者傳送的每個指配碼代表著
},...., )(( iMs
log2
{ )(1
) ii s≡
M 位
元，位元速率為傳統二位元下的 log2 M 倍。在一個符號週期，使用者由 的碼集合之中隨機挑選一
個指配碼型傳送，所以系統將會有 K 個指配碼型同時傳送；而在接收端，我們利用平衡檢測器解調
出傳送的指配碼型。 
)(ic
 
我們利用本計劃架構做簡單舉例，在此 TS/WGH 編碼並結合最大長度序碼(M-sequence)架構
下，碼空間為 G×(G-1)×N。假設 G=5，N=7，且系統同時使用者 K=35，則我們每個使用者將分配
M=4 個指配碼，且每個指配碼代表 log2 M =2 位元，如表 6 所示。  
 
表 6、多維度調變與傳統二位元傳輸模式之比較表  
 
在硬體的實現方面，基於本計劃所提出的系統架構，我們在每個使用者端增加符碼轉換器
(serial-to-parallel and M-symbol converter)，以達成傳送 M-ary 位元的目的；且在接收端每個使用者也
增設 M-1 對應之解碼器，即匹配(match)於 OLT 發射端光位址序碼的一對互補式陣列波導光柵解碼
器、平衡光檢測器(photo-detector)與決策單元(decision unit)所組成，即可實現多維度調變技術之硬體
架構。 
 
4.結果與討論（含結論與建議） 
 
可調控光展時/群組跳頻(Programmable TS/WGH)二維分碼多工系統的私密性指標的探討與分析 
 
為了比較傳統上各式被動光纖網路(PON)的私密性，我們將尋求可調控光展時 /群組跳頻
(Programmable TS/WGH)二維分碼多工系統的私密性指標(私密度)。本計畫我們將針對不同的位移控
制暫存器 7, 15, 31, 63, 127 等長度，延續上揭私密性保護機制的數學探討與分析。我們站在竊聽者
的立場來分析，在不同的使用者的個數(the number of simultaneous active ONUs)下，將其正確破解、
判解所欲偵測 ONU 傳送位元信號 1 或 0 的機率 Pc = 1/(N× CKN)勾畫出來。接著，我們將定義一個
私密度的指標(degree of confidentiality, DOC)，進行衡量各種傳統被動光纖網路的私密性。此私密度
元信號 1 或 0。我們將探討竊聽者更複雜的攻擊方式與探討更強健的私密性保護機制。誠如圖 2 E1 
= [2, 2, 2, 0, 0, 2, 0]簡易例子所示，其代表 C27=21 種組合中的兩種情況。由數學分析可印證：即使
竊聽者知曉 E2 = [0, 2, 2, 2, 0, 0, 2]而推論目前陣列光纖光柵前端存在兩個 ONU 傳送位元信號 1。但
卻無法逆向推論出辨識那兩個 ONU 傳送位元信號 1。 
 
二.參考文獻 
 
[1] C. T. Lin, J. Chen, P. C. Peng, C. F. Peng, W. R. Peng, B. S. Chiou, and S. Chi, “Hybrid optical 
access network integrating fiber-to-the-home and radio-over-fiber systems,” IEEE Photon. Technol. 
Lett., vol. 19, no. 8, pp. 610–612, Apr. 15, 2007. 
[2]   Maode Ma, Yongqing Zhu, Tee Hiang Cheng, “A Systematic Scheme for Multiple Access in 
Ethernet Passive Optical Access Networks,” IEEE J. Lightwave Technol., vol. 23, no. 11, pp. 
3671-3682, Nov. 2005.  
[3]   Paul E. Green, Jr., ”Fiber to the Home: The Next Big Broadband Thing,” IEEE Communications 
Magazine, 42(9), pp. 100-106, Sep. 2004.  
[4]   G. Kramer, B. Mukherjee, and G.Pesavento, “Ethernet PON (ePON): Design and Analysis of an 
Optical Access Network,” Phot. Net. Commun., vol. 3, no. 3, pp. 307-319, July 2001.  
[5]  K.S. Kim, “On the evolution of PON-based FTTH solutions,” (Invited Paper) Information Sciences, 
vol. 149/1-2, pp. 21--30, Jan. 2003.  
[6]   S. Kim, “Cyclic optical encoders/decoders for compact optical CDMA network,” IEEE Photon. 
Technol. Lett., vol. 12, pp. 428-430, Apr. 2000. 
[7] K. Yu, J. Shin, and N. Park, “Wavelength-Time spreading optical CDMA system using wavelength 
multiplexers and mirrored fiber delay lines,” IEEE Photon. Technol. Lett., vol. 12, pp. 1278–1280, 
Sept. 2000. 
[8] T.H. Shake, “Security performance of optical CDMA against eavesdropping,” IEEE J. Lightwave 
Technol., vol. 23, pp. 655-670, Feb. 2005.  
[9]  T.H. Shake, “Confidentiality performance of Spectral-Phase-Encoded optical CDMA,” IEEE J. 
Lightwave Technol., vol. 23, no. 4, pp. 1652-1663, Apr. 2005.  
[10] Y.T Chang, C.C. Sue, J.F. Huang, “Robust Design for Reconfigurable Coder/Decoders to Protect 
Against Eavesdropping in Spectral Amplitude Coding Optical CDMA Networks,” IEEE J. 
Lightwave Technol. vol. 25, no. 8, pp. 1931-1948, Aug. 2007. 
 
三.計畫成果自評 
 
1.技術研發成果說明： 
本計畫運用光纖波導陣列固有的循環與自由頻譜間距(Free Spectral Range, FSR)特性，我們建構一
個可調控光展時/群組跳頻(Programmable TS/WGH)二維分碼多工技術於被動式光接取網路。藉由更大
的碼族(code family, code space)以提高網路系統的私密性與更多ONU共享AWG Router的數目使得被動
式光纖到府網路更具私密性。再者，我們將探討定性與定量私密度指標分析。同時探討可調控光展時
/群組跳頻(Programmable TS/WGH)二維分碼多工系統變更使用者序碼(Signature address code)的觸發的
機制與協定。更進一步，利用新穎的多維度調變(Multidimensional Modulation)技術，將單一ONU賦予
多個不同的指配碼(codeword)以加強系統私密性暨達到較高的系統頻譜效率。其運作機制主要在於：
運用本計畫擁有大量的展時與群組跳頻碼族，可將M個不同的指配碼分配給相同的ONU，此處指配碼
代表log2M位元。因此，每個ONU使用者可從M個碼中隨機地挑選一個指配碼用來傳送資訊，以克服
傳統OOK傳輸所造成資訊被卻竊取的危機。 
 
本計畫中藉由擴增為巨大的碼族與主動變換序碼的協定與機制，使私密性指標產生相乘的效果以
強化光纖網路的安全性。同時我們也將提出各ONU主動變換光位址指配碼的確切時機。例如：使用資
訊理論上亂度熵(entropy)的觀念，我們將監控各波長使用的模式(model)。藉由統計各波長使用的分配
情形中AWG輸出埠碼矩陣, M來推論可調控光展時/群組跳頻(Programmable TS/WGH)二維分碼多工系
統其最危急與最脆弱的時機，以啟動主動變換各ONU光位址指配碼的機制。使得網路隱私權受到更多
的保護。其它加值服務包括:不同組合的群播、差異性服務(Differential Service)，以及實現虛擬私有網
[9]張耀堂，蘇銓清，黃振發; ”在頻譜振幅光分碼多工網路中設計一個可防止竊聽且具穩健特性的可重
組態編解碼器,” 榕園-成大研發快訊(BANYAN-Research Express@NCKU), vol. 2-03, Nov. 16, 2007. 
[10] 黃振發、張耀堂、周立偉“編碼化分波多工技術於以太光接取網路之運作”光學工程季刊99 期，
pp. 18-25，10 月，2007. 
 
 
 
Ms. No.: OFT-09-93 
Title: A New Shared AWG-based OCDMA Scheme Implemented with Time-Spreading and 
Wavelength-Group-Hopping Embedded M-sequence Code 
Corresponding Author: Assistant Professor Yao-Tang Tang Chang 
Authors: Jen-Fa  Huang, Ph.D; Hsu-Chih  Cheng, Ph.D; Chuen-Ching Wang, Ph.D 
 
 
Dear Assistant Professor Chang, 
 
Thank you for submitting your manuscript to Optical Fiber Technology. I am pleased to inform you that your 
paper is acceptable for publication, provided minor revisions are made. The reviewers have made 
suggestions which I feel would improve your manuscript, and I encourage you to consider these comments 
and make an appropriate revision of your manuscript. The reviewers' comments are below. 
 
Please submit your revision online within 4 weeks by logging onto the Elsevier Editorial System for Optical 
Fiber Technology: 
http://ees.elsevier.com/oft/ 
Your username is: ytchangdgt 
 
The manuscript record can be found in the "Submissions Needing Revision" menu. 
 
When submitting your revised paper, please include a separate document uploaded as "Response to Reviews" 
that carefully addresses the issues raised in the below comments, point by point. You should also include a 
suitable rebuttal to any specific request for change that has not been made. 
 
To facilitate the electronic publication of your manuscript (should it be accepted), we request that your 
manuscript text, tables and figure legend be submitted in an editable format (Word, WordPerfect, or LaTex 
only), and all figures uploaded individually as TIF or EPS files. 
 
Thank you, and we look forward to receiving your revised manuscript. 
 
With kind regards, 
 
Stefan Wabnitz 
Deputy Editor 
Optical Fiber Technology 
 
Elsevier 
525 B Street, Suite 1900 
San Diego, CA 92101-4495 
USA 
Phone:  (619) 699-6297 
國際會議論文目錄(International Conference Papers List) 
 
[1] Chuen-Ching Wang; Ming-Jun Chi; Yao-Tang Chang, "New Watermarking Algorithm with Coding 
Efficiency Improvement and Authentication in Video Surveillance," The Fifth International Conference on 
Intelligent Information Hiding and Multimedia Signal Processing 2009 (IIH-MSP 2009), pp. 1253 – 1257, 
Sep 12-14, 2009, Kyoto, Japan.(NSC 97-2218-E-244-003-) 
[2]Jen-Fa Huang, Yao-Tang Chang and Kuan-Ju Wang, "Confidential Enhancement with Programmable 
Spectral Phase Coding over Fiber-to-the-Home Access Network," Proceedings of the IASTED International 
Conference Wireless and Optical Communications (WOC 2009) July 6 - 8, 2009 Banff, Canada. 
[3]Yao-Tang Chang, Jen-Fa Huang, Li-Wei Chou and Kuan-Ju Wang, “Waveguide-Grating-Routers-based 
Realization of Time Spreading and Wavelength Group Hopping over Fiber-to-the-Home Networks,” IEEE 
International Conference on Communications (IEEE ICC 2009), Dresden Germany, June 14-18, 2009.(NSC 
97-2218-E-244-003-) 
[4]Jen-Fa Huang, Philippe Gallion, and Yao-Tang Chang, “Fiber to the Home over Coded-WDM Scheme of 
Passive Optical Networks,” ICT Cooperation and Networking between France and Asia (ICT-Asia), the 6th 
Regional Seminar, Asian Institute of Technology, , February 11-12, 2009, Bangkok, Thailand. 
[5]Chuen Ching Wang; Yao-Tang Chang and Ming Jun Chi, “A Fragile Watermarking with Authentication 
and Post-Compression for Digital Camera,” The 3rd International Conference on Innovative Computing 
Information and Control, 2008(ICICIC 2008), June 18-20, 2008, Dalian, China. 
[6]Jen-Fa Huang, Philippe Gallion, Yao-Tang Chang, and Li-Wei Chou, “Confidentiality Enhancement with 
AWG-Based Optical CDMA Codecs over FTTx Network Access,” Wireless and Optical Communications 
(WOC 2008), #621-074, Delta Hotel Quebec, Quebec City, Canada, May 26-28, 2008. 
[2]Jen-Fa Huang, Yao-Tang Chang, and Li-Wei Chou,“Reconfigurable Time-Spreading and 
Wavelength-Group-Hopping Implemented over Fiber-to-the-Home Network,” Taiwan-Japan Joint 
Conference on Communications Technology, National Center for High-Performance Computing, Hsin-Chu, 
Taiwan, November 8-9, 2007. 
[7] Jen-Fa Huang, Yao-Tang Chang, Li-Wei Chou, and Kai-Chun Hsu, “FTTx Confidential Enhancement 
with Reconfigurable Time-Spreading and Wavelength-Group-Hopping,” CLEO/Pacific Rim 2007, WD1-5, 
p1217, Seoul, Republic of Korea, August 26-31, 2007. 
[8] Yao-Tang Chang, Jen-Fa Huang, Kai-Chun Hsu, and Li-Wei Chou, “Time- Spreading and Wavelength 
Group-Hopping Implemented over Fiber-to-the-Home Networks,” International Conference on 
Communications, Circuits and Systems (ICCCAS 2007),Fukuoka, Japan, July 10-13, 2007. 
[9]Jen-Fa Huang, Yao-Tang Chang, Chuan-Ching Sue and Deng-Sheng Wang,“ Reconfigurable Coded 
WDM with Arrayed-Waveguide-Gratings to Enhance Confidentiality on Fiber-to-the-Home Networks,” 2006 
Asia-Pacific Conference on Communications (APCC 2006), pp.185(5), Busan, Korea, August 31-September 
1,2006. 
[10] Jen-Fa Huang, Yao-Tang Chang, Chuan-Ching Sue, and Che-Chih Hsu, “Hybrid WDM and Optical 
CDMA implemented with M-sequence Coded Waveguide Gratings over Fiber-to-the-Home Network,” 
OBC#04_01_08, pp. 1860-1864, International Conference on Communications, Circuits and Systems 
(ICCCAS 2006), Guilin, China, June 25-28, 2006. 
[11] Jen-Fa Huang and Yao-Tang Chang, “Incoherent Hybrid Spectral Polarization and Amplitude Coding 
Implemented with Specified Orthogonal Ternary Code over Balanced Photo-Detectors,” the 4th Annual 
Communication Networks and Services Research Conference (CNSR 2006), pp. 42-49, Moncton, New 
Brunswick, Canada, May 23-25, 2006. 
[12] Chuan-Ching Sue; Chao-Yang Lee; Jen-Fa Huang; Yao-Tang Chang and Deng-Sheng Wang, “A Robust 
Design of Reconfigurable Encoder and Decoder Against Un-authorized Users in Optical CDMA Networks,’ 
TENCON 2005 IEEE Region 10 , Nov 21-24, Melbourne, Australia. 
[13] Yao-Tang Chang and Jen-Fa Huang , “Incoherent Hybrid Spectral Amplitude and Polarization Coding 
Implemented over Differential Photo-detectors,” The IASTED international conference on Optical 
Communication System and Networks (OCSN2005), Banff, Canada, July, 19-21, 2005. 
可供推廣之研發成果資料表 
■ 可申請專利  □ 可技術移轉                                      日期：99年01月15日 
國科會補助計畫 
計畫名稱：建構於陣列波導光柵的可調控光展時群組跳頻二維碼以
         提昇光纖到府網路之私密性 
計畫主持人：張耀堂 
計畫編號：NSC  97－2218－E－224－03－  
學門領域：光纖通訊與波導光學學門 
技術/創作名稱 可調控光展時群組跳頻二維碼以提昇光纖到府網路之私密性 
發明人/創作人 張耀堂 
技術說明 
中文： 
為 實 現 寬 頻 接 取 網 路 暨 改 善 分 時 多 工 (Time-division 
multiplexing, TDM)與分波多工(Wavelength-division multiplexing, 
WDM)被動光纖網路(Passive Optical Network, PON)的靈活性、擴充
性、私密性。本計畫將運用陣列波導光柵(Arrayed-waveguide grating, 
AWG)既有的循環與自由頻譜間距(FSR)的特性以提供多使用者共
享的架構。首先，我們擴展先前一維可變異性頻域編解碼技術，本
計 畫 將 建 構 一 套 可 調 控 光 展 時 / 群 組 跳 頻 (Programmable 
time-spreading/wavelength-group-hopping, TS/WGH)二維分碼多工
技術統技術於光纖到府網路。此架構提供大量的展時與群組跳頻碼
型，暨結合可調控振幅頻譜編碼的分碼多工系統。使得私密性的安
全指標產生相乘的效果。因此竊聽者將無法掌握被攻擊現狀所使用
的光位址指配碼，即使竊聽者採用暴力猜測法  (brute-force 
attacking)也無法得逞。甚而，我們將探討一套基於解算最小的加權
均衡度的演算法與系統預期告警時間的一套動態權變光位址指配
碼(active codeword modification policy) 的策略，更能有效提高通訊
網路的私密性，提供使用者一個高速且安全的通訊環境。 
 
更進一步，我們提出新穎的多維度調變  (Multidimensional 
Modulation)技術以增進頻寬效率與實現變換指配碼機制，本計畫將
採用單一ONU(optical network unit)而賦予多個不同的指配碼
(codeword)以加強系統私密性暨達到較高的系統頻譜效率。其運作
機制主要在於：運用前揭大量的展時與群組跳頻碼族，將M個不同
的指配碼分配給相同的ONU，此處指配碼代表 log2M位元。因此，
每個ONU使用者可從 M個碼中隨機地挑選一個指配碼用來傳送資
訊，以克服傳統OOK傳輸所造成資訊被卻竊取的危機。 
 
推廣及運用的價值 
為 實 現 寬 頻 接 取 網 路 暨 改 善 分 時 多 工 (Time-division 
multiplexing, TDM)與分波多工(Wavelength-division multiplexing,
WDM)被動光纖網路(Passive Optical Network, PON)的靈活性、擴充
性、私密性。本計畫將運用陣列波導光柵(Arrayed-waveguide grating, 
AWG)既有的循環與自由頻譜間距(FSR)的特性以提供多使用者共
享的架構。為擴展先前一維可變異性頻域編解碼技術，本計畫首先
將建構一套可調控光展時/群組跳頻(Programmable time–spreading 
/wavelength-group-hopping, TS/WGH)二維分碼多工技術統技術於
光纖到府網路。此架構提供大量的展時與群組跳頻碼型，暨結合可
調控振幅頻譜編碼的分碼多工系統。使得私密性的安全指標產生相
乘的效果。因此竊聽者將無法掌握被攻擊現狀所使用的光位址指配
碼，即使竊聽者採用暴力猜測法 (brute-force attacking)也無法得
逞。甚而，我們將探討一套基於解算最小的加權均衡度的演算法與
系統預期告警時間的一套動態權變光位址指配碼(active codeword 
modification policy) 的策略，更能有效提高通訊網路的私密性，提
供使用者一個高速且安全的通訊環境。 
 
更進一步，將採用單一 ONU(optical network unit)而賦予多個不
同的指配碼(codeword)以加強系統私密性暨達到較高的系統頻譜效
率。其運作機制主要在於：運用前揭大量的展時與群組跳頻碼族，
將 M 個不同的指配碼分配給相同的 ONU，此處指配碼代表 log2M
位元。因此，每個 ONU 使用者可從 M 個碼中隨機地挑選一個指
配碼用來傳送資訊，以克服傳統 OOK 傳輸所造成資訊被卻竊取的
危機。如此一來，使得竊聽者因架構的碼族(code space family)更為
繁複，以及使用者可大為降低傳送信號的能量使被動式光纖到府網
路更具靈活性、擴充性、私密性。 
 
※ 1.每項研發成果請填寫一式二份，一份隨成果報告送繳本會，一份送 貴單位研發成果推
廣單位（如技術移轉中心）。 
※ 2.本項研發成果若尚未申請專利，請勿揭露可申請專利之主要內容。 
※ 3.本表若不敷使用，請自行影印使用。 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
研究論文中應用於 Video Surveillance 的可能性感到興趣，並詢問相關技術。個人也感受到與有榮焉。
由於會議上除了解 Watermarking 技術的最新發展趨勢與動向外，也啟發新的觀念與方法。回國之後，
也擬將此行的心得與啟發匯入已投稿至 opt2009 的「A New Data-Hiding Technology Enhanced 
Confidentiality Implemented with Multi-Code Keying OCDMA Schemes」論文中。 
 
3. 發表論文摘要 
 
This paper proposes a fragile watermarking algorithm named compression watermarking algorithm 
(CWA) which provides compression and authentication functions to apply in MJPEG of video surveillance 
system. The watermark information is embedded into every 8×8 block in the coefficient domain in encoding 
process and extracted watermark from each 8×8 block in the coefficient domain in decoding process. 
Simulation results show that the PSNR of embedded video is lower than non-embedded video, however, the 
loss of quality is hardly discernible. Furthermore, the results show that the scheme improves the coding 
efficiency and therefore reduces both the transmission time and the storage capacity. 
 
4. 心得 
 
本次會議是個人主要擬探討更進一步延伸「光纖到府網路之私密性」的研究主軸，並結合資料隱
藏(data hiding)的方法與技術以將目前的論文「A New Data-Hiding Technology Enhanced Confidentiality 
Implemented with Multi-Code Keying OCDMA Schemes」作出更專業與完整的論述。決定前往以口頭方
式發表論文。為維護我國在國際會議上優質的形像，臨行前的準備工夫更是馬虎不得。尤其，為了清
晰地闡述研究心得，對於報告的流程與內容更是積極的準備，自我期許國際會議上有正常的表現。因
此口頭發表論文之前，總覺得自己似乎承受過多的精神壓力。幸運的是，「一切都非常順暢，沒有造
成任何的困擾」。 
 
此次會議的地點位於日本京都，京都為日本的舊都，隨著物換星移其政經的重要性以為東京與橫
濱所取代。然而，對於日本全國人對於文物景觀的保存與呵護卻使京都地區充滿濃郁的人文氣息與發
思古之幽情。果不其然，回國之後，看到一篇神戶港(京都外港)的藝術景觀被日本國人票選為超越橫
濱港(東京外港)的報導。真的是審美的想像是有志一同。對於日本安排國際會議的細緻，在京都與來
自世界各地的科技人員齊聚一堂，交換彼此的研究心得，並於晚餐前漫步並探訪臨近的風土人情，真
是一場「科技與文化環保」的饗宴。 
 
在四天的研討會期當中，個人對相關領域之各個議程，抱持著學習觀摩之態度，並和作者在技術
層面做深入討論。此次議題對於筆者相關「光分碼多工系統安全機制」的理論與實際運用的整合具有
莫大的幫助。因此筆者充滿興奮暨圓滿地完成 2009 IIHMSP 的論文發表，同時也擴展了專業新知、技
術發展、及新研究方法之瞭解。發表論文的過程中，與會人士針對發表內容的相關主題也給予諸多的
肯定與建言。對於更進一步的細節，我們也在較為輕鬆的茶敘場合裡交換與分享彼此的研究成果。藉
由此次國際會議，除了感受到與會人士的熱情與真誠外，更加覺得學術上與「世界接軌、國際互動」
的重要性。 
 
此行另一收獲是使筆者深深覺得：文化保存與歷史感結合的重要性。過去一部「末代武士」的美
國影片也反應出日本的歷史發展過程中同樣出現「中學為體、西學為用」的情結。隱約記得該影片描
述：一個美國軍官因緣際會處於日本政經維新時期。當時日本武士的功能漸趨式微，但仍有些忠心愛
國之士背負傳統武士的精神，堅持生活在「菊花與劍」的使命感。此行看到京都用心保存其歷史軌跡，
更覺我們應不宜將我們過往發生的文物肆意遺忘。對於日本京都的高物價，筆者益發覺得在臺灣舉辦
國際會議的可愛與優越條件。另外，個人亦安排前往京都大學參觀與交流，輕巧精緻的校園卻也泛發
出濃濃的學術氣息。 
 
5. 建議事項 
 
  每每參加如此國際會議總受益良多，希冀能多鼓勵國內學者參與，培養國際觀念跟展示國內學術
 
圖三、2009/9/14細心的聆聽論文發表一隅(Session C04-07 IIH-MSP-2009-IS36-07) 
 
 
圖四、2009/9/14 造訪日本京都大學 
 
efficiency is improved. Figure 2 illustrates the basic 
concepts of the proposed watermark insertion and 
watermark extraction. 
 
 
 
Figure 2.Schematic illustration of proposed watermark insertion and 
watermark extraction procedure. 
 
Several compression standards for image and video 
generally employ DCT-based coding approaches. The CWA 
operates at the 8× 8 DCT quantized-block layer. Figure 3 
illustrates the two domains in which a quantized DCT-block 
can be represented. The first domain in the block-layer is the 
coefficient domain, containing 8× 8 integer entries, where 
each entry denotes the corresponding quantized DCT 
coefficient. In general, many of these entries have a value of 
zero; particularly those which correspond to spatial high 
frequencies. In the run-length domain, the non-zero AC 
coefficients are re-ordered in a zigzag scanning form and are 
subsequently represented by a tuple (run, level), where the 
run is equal to the number of zeros preceding a certain 
coefficient and the level is equal to the value of the 
coefficient. In the codeword domain, the (run, length) tuples 
are represented by variable-length codewords (VLCs). The 
codewords for a single DCT-block are terminated by an end 
of block (EOB) marker. 
 
56 12 0 0 0 0 0 0
7 4 2 0 0 0 0 0
3 1 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
Zig-Zag Scan
×
 
Figure 3.A quantized DCT-block presented by the two 
domains. 
A. Watermark embedding procedure 
The CWA scheme proposed in this study is designed 
in the coefficient domain using the DCT-based standard. 
Given a quantized block q, the objective of CWA is to insert 
a watermark bit ϖ  at a specific location within the block. 
The watermark embedding procedure commences by 
applying a run-length selection strategy to determine the 
specific DCT-coefficient in q at which to embed the 
watermarked bit, ϖ . The run-length selection strategy 
takes into account the requirements for size reduction, 
perceptual transparency and sensitivity to tampering attack 
by specifically choosing the final non-zero coefficient in q 
(as identified in a zigzag scan) as the location at which to 
embed the watermarkϖ .  Let ϕ  denote the selected DCT-
coefficient. In embedding the watermark, ϕ  is modulated 
to ϕ  in accordance with Eq. (1), resulting in a watermarked 
block, q . 
 
ϕ = ⎩⎨
⎧
=Λ⊕
=Λ⊕−
1)(     
0)()1)((
Eif
Eifsign
ϖϕ
ϖϕϕ
          (1)   
 
                                                        
where sign(ϕ ) indicates the sign of ϕ , i.e. positive or 
negative, and ϕ  denotes the absolute value ofϕ ; Λ  is the 
number of odd value coefficients in q, and E ( Λ ) = ( Λ +1) 
mod 2. 
As discussed above, CWA employs a run-length 
selection strategy to select an appropriate location at which 
to embed the watermark information. The run-length 
selection strategy is specifically chosen here in order to 
satisfy the requirement for size reduction. From Eq. (1), it 
can be inferred that the number of run-length symbols is 
likely to reduce following the watermarking process since 
when a watermark is embedded in a block, there exists a 
finite possibility that the value of the final non-zero DCT 
coefficient will be modified to “0”. Therefore the CWA can 
be improves the coding efficiency after a watermark is 
embedded in a DCT-block. 
 
B. Watermark extracting procedure 
In CWA, the watermark is extracted simply by counting 
the total number of odd-value quantized coefficients in each 
block of each frame in a MJPEG sequence. The number of 
extracted watermark bits is equal to the total number of 
8 × 8 DCT-blocks in the each frame of the MJPEG 
sequence. The process of authenticating a watermarked 
sequence involves extracting the embedded watermark,W , 
and then comparing this watermark with the registered 
original watermark, W. In CWA, the watermark is extracted 
in accordance with Eq. (2) 
⎩⎨
⎧
=
=
=
0)(1
1)(0
BEif
BEif
W                                     (2) 
where B, and W  denote the number of odd value 
coefficients and the extracted watermark bits from DCT-
block, respectively; E (B) = (B+1) mod 2. 
1254
Authorized licensed use limited to: National Cheng Kung University. Downloaded on January 12, 2010 at 05:21 from IEEE Xplore.  Restrictions apply. 
 
Fig 7.The CRI of the six standard video sequences. 
 
TableⅡ. Comparison of Average CRI and PSNR degradation. 
 Compression Ratio 
Improvement (CRI) 
PSNR 
degradation 
Akiyo 2.89 % 0.46 dB 
Bus 2.95 % 0.45 dB 
Foreman 3.75 % 0.35 dB 
Mobile 2.01 % 0.34 dB 
Stefan 2.23 % 0.43 dB 
Tempete 2.54 % 0.30 dB 
 
IV. ATTACK TEST 
To evaluate the ability of the proposed scheme to detect 
and localize changes in the video content, various attacking 
tests were performed, as described in the following 
paragraphs. 
 
A. Noise Attack 
To evaluate the capability of CWA to detect noise 
attacks, simulations were performed in which a 
watermarked video was transmitted over a noisy channel 
simulated using a Gaussian random noise generator. Figure 
8 shows the watermarks extracted from video attacked by 
interference noise. The watermark is noticeably damaged, 
indicating the ability of CWA to detect noise attacks in 
error-prone transmission systems. 
 
 
 
Fig 8.Extracted watermark from video attacked by interference noise. 
 
B. Tampering Attack  
Figure 9 presents a watermarked “Akiyo” video in 
which the television of the second frame in a video has been 
replaced by a calendar. The watermark extracted from the 
corresponding region is noticeably damaged. Hence, it is 
apparent that the CWA is highly sensitive to tampering 
modification. 
 
 
 
Fig 9.Extracted watermark from video tampered. 
 
C. Replacement Attack 
To evaluate the ability of the proposed scheme to detect 
the replacement of frames in the video content by two 
frames from another video sequence, two frames in 
“Foreman” was replaced with two frames from “Tempete” 
and the watermarks of each frame were then extracted. As 
shown in Figure 10, the watermarks extracted from the 
video were characterized by random noise, thereby 
confirming the ability of the scheme to detect replaced 
frames. 
 
 
Fig 10.Extracted watermark from video attacked by replacement. 
 
V. CONCLUSION 
Experiments show that the proposed watermarking 
algorithm approximately has 0.5dB in degradation. It is 
shown that the proposed algorithm not only detects the 
integrity of video with authentication but also increases the 
coding efficiency with receivable video quality degradation.  
 
REFERENCES 
[1] Dung Trung Vo and Truong Quang Nguyen, “Quality 
Enhancement for Motion JPEG Using Temporal 
Redundancies,” IEEE Transactions on circuits and systems for 
video technology, Vol. 18,  Issue 5,  May 2008, pp.609- 619. 
[2] Ping Wah Wong and N. Memon, “Secret and Public Key 
Image Watermarking Schemes for Image Authentication and 
Ownership Verification,” IEEE Transactions on Image 
Processing, Vol. 10, No. 10, Oct. 2001, pp.1593-1601. 
1256
Authorized licensed use limited to: National Cheng Kung University. Downloaded on January 12, 2010 at 05:21 from IEEE Xplore.  Restrictions apply. 
Department of Electrical Engineering, NCUE
1
New Watermarking Algorithm with Coding 
Efficiency Improvement and Authentication 
in Video Surveillance 
Chuen-Ching Wang, Ming-Jyun Chih and *Yao-Tang Chang
National Changhua University of Education, Changhua, Taiwan
*Kao-Yuan University, Taiwan
ccwang@cc.ncue.edu.tw
*ytdgt@cc.kyu.edu.tw
Department of Electrical Engineering, NCUE
zFragile watermarking
indicate modifications of the content
Introduction
Department of Electrical Engineering, NCUE
Motivation
To provide an authentication for the 
MJPEG video sequence, we propose a new 
fragile watermarking that can provide :
9Authentication
9Post-compression
Department of Electrical Engineering, NCUE
Proposed Watermark Embedding
DCT
TRMem
DCT
Frequency
Transform
(FT)
Bit Rate Control 
(BRC)
Coefficient
Quantization(QT)
Divider
QTMem
Data
Stream 
Generator
(DSG)
MJPEG
Stream
Variable Length 
Encoder       
(RLE)&(HUFF)
Run Length 
Encoder
Huffman
Coder
HTMem
Zig-Zag
Scan
Video 
frame
Running 
series of 
frames
Watermarking
Embedding
Department of Electrical Engineering, NCUE
Proposed Watermark Extraction
MJPEG
Stream
 Data
Stream 
Parser
(JSP)
Variable Length 
Decoder       
(RLD)&(HUFF)
Run Length 
Decoder
Huffman
Decoder
HTMem
Coefficient
Dequantization
(DT)
Multiplier
QTMem
iDCT
TRMem
iDCT
Inverse
Frequency
Transform
(IFT)
Zig-Zag
Scan
Running 
series of 
frames
Decompressed
Video frame
Watermark
Extracting
Department of Electrical Engineering, NCUE
Coding Efficiency after Watermarking
8  8
DCT Block
×
Wb = 0
0
Wb = 1
1
Zig-Zag Scanning：
(7,0,0,4,0,0,0,7,0,0,0,0,0,0,0,0,0,1,0…0)
<R,L> Runlength coding：
<0,7><2,4><3,7><9,1><EOB>
<R,L length><L>：
<0,3><111>b<2,3><100>b<3,3><111>b<9,1>< 
1>b<EOB>
AC Huffuman
 
coding：
<100,111><1111110111,100><111111110101,1 
11><111111001,1><1010>
0
10bits Reduced
Department of Electrical Engineering, NCUE
PSNR(Peak Signal Noise Ratio)
∑∑
= =
′−×=
×=
M
i
N
j
jixjix
NM
MSE
MSE
dBPSNR
1 1
2
2
)],(),([)1(
255log10)(
Simulation Results
Department of Electrical Engineering, NCUE
Simulation Results: PSNR
Department of Electrical Engineering, NCUE
Compression Ratio Improvement
CRI
100%
S
 -SSCRI
N
WN ×=
Department of Electrical Engineering, NCUE
Noise
Recompression
Simulation Results: Attack
Department of Electrical Engineering, NCUE
Conclusion
Not only Authentication 
But also Coding Efficiency
 Waveguide-Grating-Routers-based Realization of Time-Spreading and  
Wavelength-Group-Hopping over Fiber-to-the-Home Networks 
 
*Yao-Tang Chang, **Jen-Fa Huang, **Li-Wei Chou and **Kuan-Ju Wang 
*Department of Electro-Optical Science and Engineering, 
                             Kao Yuan University, Taiwan, ROCVERSITY 
** Department of Electrical Engineering,  
 National Cheng Kung University, Taiwan, ROC.  
Tel: (886-6)-2757575 ext. 62370, Fax: (886-6)-2345482,  
E-mail: huajf@ee.ncku.edu.tw 
 
Abstract—Exploiting the inherent cyclic and periodic free-
spectral-range (FSR) properties of arrayed-waveguide grating 
(AWG) routers, the time-spreading and free-spectral-range 
(FSR) group hopping code, which is embedded by maximum 
length sequences (called TS/GH embedded M-sequence code) is 
configured over a fiber-to-the-home (FTTH) network. For 
constructing the proposed code, we use the same prime code for 
generating the time code (time-spreading code) and the spectral 
domain code (group hopping code). Therefore it is referred to 
as a two-dimensional (2-D) optical code. Importantly, for the 
proposed broadband light source (BLS), the total number of 
available wavelengths is partitioned into G different groups 
according to the length of the M-sequence code. Every group is 
referred to as a hopping pattern and characterized by the FSR 
interval of the AWG router. Improving the prime-hop code 
(PHC) and the modified prime-hop code (MPHC) with 
cascading one additional AWG router, the cardinality of the 
proposed scheme is significantly increased by a factor of 15  
under the optimum arrangement for a group hopping number 
of G=7. Moreover, the correlation property and bit error rate 
(BER) of proposed scheme is evaluated and the result reveals 
an improvement of the BER compared to MPHC and PHC. 
 
I. INTRODUCTION  
 
The two-dimensional (2-D) time spreading and 
wavelength hopping (i.e., TS/WH) code implemented by 
fiber Bragg’s grating (FBG) and delay line configuration has 
attracted much attention in the local area network research 
community [1]. We extend our previous work 1-D SAC-
OCDMA scheme with M-sequence scheme [2,3], the 
proposed scheme use a 2-D optical code-division multiple-
access network scheme by cascading one additional arrayed 
waveguide grating based (AWG-based) encoder/decoder. A 
better BER performance compared to conventional TS/WH 
scheme (i.e. prime-hop code) [4,5] is demonstrated.  
In the current study, we utilize the original binary prime 
sequence (0,1) pattern in both time and spectral domain to 
generate the 2-D optical CDMA. In order to increase the 
number of ONUs by sharing only one additional AWG 
router, the available wavelengths Δν of a broadband light 
source (BLS) is partitioned into G groups based on the 
wavelength number N of the M-sequence code (i.e., 
Δν=G×N). Subsequently, the free spectral range of the AWG 
router is taken as the hopping interval (afterwards called 
FSR group hopping). The major difference between 
conventional wavelength hopping and proposed FSR group 
hopping scheme is, that in the latter for one chip the 
wavelengths of a whole group is changed and in the former 
only one wavelength. 
Moreover, since the FSR interval is occupying multiple 
wavelengths, the specified M-sequence is embedded into the 
above mentioned TS/GH pattern and creates the so called 
TS/GH embedded M-sequence scheme. 
Hence, for confidential and cardinality perspective, the 
proposed schemes provide a more promising solution for 
fiber-to-the-home (FTTH) access networks than 
conventional TDM, WDM [6,7], and 1-D SAC-OCDMA 
scheme with M-sequence [2,3]. 
The remainder of this paper is organized as follows. In 
section II, the proposed optical TS/GH code is demonstrated 
in time and spectral domain. In section III, the proposed 
TS/GH code is implemented by a fine AWG router, coarse 
AWG routers and a series of delay lines are configured over 
a FTTH network. Furthermore, we evaluate the correlation 
property of the proposed TS/GH scheme and derive the 
system performance in terms of bit error rate (BER). Finally, 
Section IV presents some brief conclusions and future works. 
 
II. DESIGN OF TS/GH EMBEDDED M-SEQUENCES  
 
The proposed code is integrated by time and spectral 
(wavelength) domain and therefore is referred to as a two-
dimensional (2-D) optical code. In the current study, the 
popular prime code sequence is used both as time spreading 
and wavelength group hopping pattern. 
Firstly, in the time spreading domain, the original prime 
code sequence is constructed using finite field (Galois field) 
arithmetic. Elements of a prime sequence can be obtained by 
multiplying each element in the Galois field GF(p) = 
{0,1, …, p-1} by a preset number chosen from GF(p). Hence, 
there are p prime sequences Ai = ( ai,0, ai,1, …, ai,j, …, ai,(p-1) ) 
constructed by the element  
 
ai,j = (i, j)mod(p)                                       (1) 
 
where (i, j) represents the product of i and j. i, j are all in 
GF(p). Afterwards, we define that the number of groups G is 
corresponding to the prime number p in a conventional 
prime code [4,5].  
We then map these prime sequences to binary time 
This full text paper was peer reviewed at the direction of IEEE Communications Society subject matter experts for publication in the IEEE ICC 2009 proceedings
978-1-4244-3435-0/09/$25.00 ©2009 IEEE
Authorized licensed use limited to: National Cheng Kung University. Downloaded on January 14, 2010 at 04:23 from IEEE Xplore.  Restrictions apply. 
TABLE II. 
THE ILLUSTRATIVE EXAMPLE FOR S0Hg1M0 AND S1Hg1M0 CODE 
 
 
TABLE III. 
PROPOSED TS/GH CODE FAMILY. (G = 3, AND M-SEQUENCE CODE LENGTH N  
= 3) 
 
 
III. THE PROPOSED AWG ENCODER/DECODER   
 
In previous papers, 1-D M-sequence AWG-based codecs 
were used in FTTH network [2,3]. In current design, the 
transmitter of the TS/GH embedded M-sequence scheme 
shown in Fig. 2 consist of a fine AWG router, coarse AWG 
routers, and a series of delay lines. 
Here, as a simple example, we consider a network with 
G=3 for the spreading/hopping sequence and N=3 for the M-
sequence code length. The proposed code family shown in 
Table III is configured as shown in the following paragraphs. 
 
 
Fig. 2. The implementation of proposed encoder. 
 
A. M-sequence implemented by the fine AWG router 
 
The fine AWG is used to create M-sequence code 
patterns in accordance with the FSR interval. Since the 
AWG is characterized by an inherent cyclic property, the 
fine AWG is shared by different M-sequence code patterns 
while the input ports of the fine AWG router are activated 
according to a M-sequence. As shown in Fig. 4, the output 
spectrums of the fine AWG appear in M0, M1 and M2 
including the different FSR intervals at output port #1, 2 and 
3, respectively while the input ports of the fine AWG router 
are activated according to the M-sequence (1, 0, 1).   
 
 
Fig. 4. M-sequence implemented by the fine AWG router 
  
B. TS/WH implemented by coarse AWGs and delay lines 
 
Coarse AWG routers and a series of delay lines are 
connected to the output of the fine AWG router to implement 
a 2-D OCDMA function.  
In our proposed scheme, coarse AWG routers separate 
the different wavelength groups in the spectral domain to 
provide the different FSR group of BLS broadband light 
source with a M-sequence code pattern.  
A series of delay lines are designed as a prime-code 
pattern to implement a time-spreading (TS) pattern in time 
domain. Hence, in a properly wired arrangement between the 
output ports of the coarse AWG and the input ports of the 
delay line, the 2-D TS/WH code family is generated. 
As shown in Fig. 5, three 1×3 coarse AWG are used to 
select the multiple wavelengths following the characteristics 
of the FSR. Here, the FSR #1 which includes M0 to M2 
appear in the output port #1 of each coarse AWG. In the 
same way, FSR #2 and FSR #3 which include M0 to M2 
appear in the output ports #2 and #3 of each coarse AWG, 
respectively. That is, one coarse AWG router can be shared 
by G×(G-1) ONUs. 
Subsequently, a series of delay lines generates the prime-
code pattern S0 = (1, 0, 0, 1, 0, 0, 1, 0, 0) shown in the first 
row of Table III. Hence, the proposed TS/GH code family 
(S0Hg1M0) is created as ( 10M , 0, 0, 20M , 0, 0, 30M , 0, 0) while 
the different wavelength groups of the light source are 
properly wired and then impinge into a series of S0. Hence, 
the code family SxHgyMz of G×(G-1)×N ONUs is composed 
by the time-spreading pattern Sx, the wavelength hopping 
This full text paper was peer reviewed at the direction of IEEE Communications Society subject matter experts for publication in the IEEE ICC 2009 proceedings
Authorized licensed use limited to: National Cheng Kung University. Downloaded on January 14, 2010 at 04:23 from IEEE Xplore.  Restrictions apply. 
