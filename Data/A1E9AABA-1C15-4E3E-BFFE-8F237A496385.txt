 1
基植於音樂編曲理論之智慧型 DJ 
摘要 
我們常在一般場合中，體驗到音樂對於氣氛的影響。尤其，透過專業的音樂DJ可以營造出
令人印象深刻的氣氛。這些專業的音樂DJ根據情境，選取出適合的多首音樂，並將音樂做適當
的排列，配合音量與節奏的調整，產生令人印象深刻的背景音樂。我們可以將這產生的音樂視
為音樂中『組曲編曲』的過程。 
在音樂組曲創作中，編曲家常將多首音樂段落重新排列，並且在音樂段落之間加入間奏，
形成一首獨特風貌的音樂組曲。組曲的編曲重點在於音樂段落的編排順序及段落之間的連結。
因此，本研究結合資料探勘技術及音樂編曲理論，將多首音樂重新改編成一首組曲。系統首先
將分析音樂特徵。接著將每首音樂分段，接著找出每首音樂的代表段落，最後重新編排每首音
樂代表段落的順序並在組曲中音樂段落連結間加入Cross-Fade與間奏。 
此外，為了達到組曲中音樂段落連接的流暢性，我們以模型訓練的方式產生間奏。首先，
系統從訓練資料做旋律發展、和弦進程和節奏模型訓練，接著在組曲編曲時，分析組曲中音樂
段落的動機發展及節奏，使得組曲編曲後的間奏能讓音樂段落連接更為流暢且完整。 
本研究以流行音樂鋼琴伴奏曲為測試資料。我們分別邀請三十四位受過音樂訓練與未受音
樂訓練的測試者，針對本研究所提出的鋼琴伴奏節奏辨識、代表段落萃取、段落順序編排及間
奏產生，評估其效果。實驗結果顯示，本研究所提出的順序編排與間奏產生技術，在組曲的流
暢感上有不錯的效果。 
1. 概論 
『音樂編曲』是將既有歌曲做重新改寫及編排，使歌曲變得更為出色，以加深聽者印象、
增加樂曲層次感且強化歌曲整體性。編曲的重點在於突顯歌曲傳達的意念與感覺，卻仍保有歌
曲的原創性。音樂編曲並不限於流行音樂，古典、民謠、饒舌、爵士、電影配樂也都有編曲的
作品。在流行音樂中，羅大佑的『我所不能了解的事』是有名的重新編曲。古典音樂中，著名
的卡農就有數十種不同編曲風格的版本。而1996 年亞特蘭大奧運主題曲『反璞歸真』則是改
編自馬蘭地區阿美族人郭英男的『老人飲酒歌』。由此可知，同樣的詞曲者，不同的編曲者，
 3
間奏。最後在組曲編曲步驟中，將 Cross-fade 和間奏加入前後的段落間。 
 
圖 1：架構流程圖。 
2.1 代表段落分析 
首先，我們先對每首音樂作分段：分析音樂結構並從中找出代表段落。在音樂結構分析階
段，我們利用之前所研發的音樂分段技術，根據音樂主題分析音樂結構[1]。我們利用資料探
勘技術中的重複樣式探勘(Repeating Pattern Mining)由音樂中分析音樂的動機(Motif)，進而根據
音樂動機找出音樂的主題(Theme)，以主題為單位來分析音樂結構。音樂結構分析後產生多個
段落後，我們挑選動機重覆次數總和最高的段落來當作此音樂的代表段落。此改根據我們的觀
察：如果音樂段落中的原型動機與各種變型動機之重覆次數越高，則代表此段落越具代表性。 
2.2  線性排列(Linear Arrangement) 
找出代表性段落後，系統計算每對段落間的距離(相異度)。我們以三種面向來分析：歌曲
速度、調性與動機。 
(1) 歌曲速度距離：歌曲速度為歌曲中一分鐘的節拍數。我們的計算方式如公式 1 所示。其中
 5
2.3  模型訓練(Model Training) 
不同代表段落間必須適當地加入間奏，使得組曲編曲後的音樂段落連結更為流暢且完整。
因此，模型訓練的主要目的在針對音樂構成的基本要素形成三種模型訓練的面向：旋律、和弦
進程及節奏模型。 
 在旋律發展模型方面，我們記錄主旋律音程差的相鄰機率。我們以表格的形式來記錄。音
樂主旋律的音程差為整數，而且在流行樂中的音程差大多不超過 10[13][13]。因此在本研究的
旋律發展模型中，主旋律相鄰的音程差介於-10 至+10 之間。 
在和弦進程方面，本研究參考過去的和弦辨識研究[4][7][9][12]，重新提出一個更適合音
樂的和弦種類及和弦辨識方法。每一種調性的和弦種類有 24 種，而且和弦辨識單位以小節為
單位，其中在小節中和弦出現的分數計算如公式 5 所示。 
)( NMPScore               (5) 
公式 3.5 之說明： 
(1) )(*)( mmP notedurationnoteweightP  ，小節音 mnote 在和弦音 cnote 之分數總和。 
其中 )( mP noteweight 為 mnote 之權重： 



(5,2,2,3)seventh)fifth,third,(root,
(6,2,4) fifth)third,(root,
七和弦
三和弦 ； 
其中 )( mnoteduration 為 mnote 之音長。 
(2) )(*)( mmM notedurationnoteweightM  ，小節音 mnote 不在和弦音 cnote 之分數總和。 
其中 )( mM noteweight 為權重且值為 1；其中 )( mnoteduration 為 mnote 之音長。 
(3) )( cN noteweightN  ，和弦音 cnote 不在小節音 mnote 之分數總和。 
其中 )( cN noteweight 為權重且值為 1。 
當小節中各和弦出現的機率計算得出後，我們用 Pickens [10]等人所採用的 HMM-1st-order 方式
訓練相鄰兩和弦的和弦進程關係模型。 
在節奏模型方面，我們提出了針對複音的鋼琴音樂做節奏的辨識方法，它主要的精神是以
小節為單位辨識每小節可能之節奏，接著從整首音樂的小節中挑選出現最多次的節奏，當做此
音樂的節奏。在節奏模型訓練裡，我們分別針對調式做不同的模型訓練，而且每個調式的節奏
模型共有二類：1.伴奏節奏模型，2.伴奏節奏與旋律節奏的關聯性模型。在第一類中，我們針
 7
),( 
1
),( 
1),,( j
B
k
AB
k
AB
i
A
j
B
k
AB
i
A RRDISTANCEEDITRRDISTANCEEDIT
RRRSimilarity    (8) 
第三步驟，計算所有可能伴奏節奏與前後兩音樂段落所有伴奏節奏的節奏密度。節奏密度
為節奏中所有音符的音長總和。計算方式如公式 9 所示，其中 tnote 為節奏的第 t 個音符，n
為節奏的音符數。 



n
t
t durationsnoteDRhythm
1
 'ensity                            (9) 
第四步驟，決定
x
ABR 與
y
ABR 做為間奏的伴奏節奏。本研究參考樂理中的定義[13]，設定間
奏的伴奏節奏密度層次分為低、中、高，其中節奏密度低、中、高的伴奏節奏決定分別為
1Rhythm Density4、10Rhythm Density16 與 40Rhythm Density64。所以本系統自動挑
選出
x
ABR 與
y
ABR 的間奏伴奏節奏，而且是 ),,(
j
B
k
AB
i
A RRRSimilarity 較高及 Rhythm Density
較接近前後兩音樂段落。 
(2) 旋律節奏：我們利用剛剛產生的間奏伴奏節奏 xABR 與 yABR 作為間奏旋律節奏的挑選基準。
第一步驟，找出所有可能的旋律節奏。首先對音樂片段 A 與音樂片段 B 做旋律節奏辨識，
接著根據伴奏節奏 xABR 與 yABR ，從伴奏節奏與旋律節奏的關聯模型中，挑選與音樂片段 A
及音樂片段 B 不同的旋律節奏做為間奏的旋律節奏。第二步驟，計算所有可能伴奏節奏與
前後兩音樂段落所有伴奏節奏的相似度。計算方式與間奏伴奏節奏的第二步驟相同。第三
步驟，決定 xABMR 與 yABMR 做為間奏的旋律節奏。我們挑選 ),,( jBMkABMiAM RRRSimilarity 最
高的兩個當作間奏的旋律節奏。 
3.3 產生和弦 
(1) 和弦序列產生：根據間奏的節數、調性及和弦進程模型，我們可以利用圖 2 之演算法產生
適當的和弦序列。在和弦序列產生階段，我們先隨機產生數個和弦序列，接著去計算每一個和
弦序列分數，最後取其中分數最高的序列 
 
 
 9
gangqinpu. com)收集了 70 首 MIDI 格式的流行音樂鋼琴曲。我們邀請 34 位測試評估系統編曲
的效果，其中有十七位受過音樂訓練。評估的效果包括音樂片段的代表性、音樂段落線性排列
的順暢度、間奏的伴奏密度對組曲編曲的影響。 
音樂名稱 具代表性 沒感覺 不具代表性 
世界末日(周杰倫) 94.1％ 2.9％ 2.9％ 
天黑黑(孫燕姿) 85.3％ 8.8％ 5.9％ 
愛情(莫文蔚) 73.5％ 20.6％ 5.9％ 
孤單北半球(梁靜茹) 82.4％ 5.9％ 11.8％ 
剪愛(張惠妹) 79.4％ 14.7％ 5.9％ 
歐若拉(張韶涵) 79.4％ 8.8％ 11.8％ 
My Memory(張信哲) 61.8％ 29.4％ 8.8％ 
櫻花紛飛時(中島美嘉) 82.4％ 14.7％ 2.9％ 
天堂(光良) 88.2％ 2.9％ 8.8％ 
我的驕傲(容祖兒) 70.6％ 29.4％ 0％ 
表 1：音樂片段的代表性比例。 
 自然 沒有感覺 不自然
專家 41.2％ 5.9％ 52.9％ 
非專家 82.4％ 0％ 17.6％ 
平均 61.8％ 2.95％ 35.25％
表 2：組曲中音樂段落順序編排的流暢程度。 
編曲前 編曲後 
 自然 沒有感覺 不自然 自然 沒有感覺 不自然 
專家 35.3％ 5.9％ 58.8％ 47％ 23.5％ 29.4％ 
非專家 41.2％ 0％ 58.8％ 88.2％ 5.9％ 5.9％ 
平均 38.25％ 2.95％ 58.8％ 67.6％ 14.7％ 17.65％ 
表 3：組曲編曲前與編曲後的流暢程度。 
在音樂片段的代表性實驗中，我們準備了 10 首音樂的代表片段讓測試者辨識是否具代表性。
表 2 是評估結果。除了 My Memory 偏低之外，其他皆有 70%以上的測試者評估為具代表性。
但 My Momery 只有 8.8%的測試者評估為不具代表性。因此，以動機重覆次數總和的分析方式
來決定音樂片段的代表性有不錯的效果。表三則是從中我們可以發現在實驗三的音樂段落線性
排列實驗中，我們準備了一首線性排列後的編號 1 的組曲讓測試者判斷音樂片段的順序編排是
否自然。圖 3 是編號 1 的組曲中音樂段落順序編排的流暢程度實驗結果。在實驗四組曲編曲的
實驗中，我們準備了一首經由系統編曲後有三種不同間奏節奏密度的組曲，分別測驗組曲中各
 11
計畫成果自評 
 就研究內容與原計畫相符程度、達成預期目標情況 
本研究計畫主要在研究結合資料探勘技術及音樂編曲理論，將多首音樂重新改編成一首
組曲。我們首先將分析音樂特徵。接著將每首音樂分段，接著找出每首音樂的代表段落，最後
重新編排每首音樂代表段落的順序並在組曲中音樂段落連結間加入 Cross-Fade 與間奏。此外，
為了達到組曲中音樂段落連接的流暢性，我們以模型訓練的方式產生間奏。首先，系統從訓練
資料做旋律發展、和弦進程和節奏模型訓練，接著在組曲編曲時，分析組曲中音樂段落的動機
發展及節奏，使得組曲編曲後的間奏能讓音樂段落連接更為流暢且完整。 
本研究以流行音樂鋼琴伴奏曲為測試資料。我們分別邀請三十四位受過音樂訓練與未受
音樂訓練的測試者，針對本研究所提出的方法，評估其效果。實驗結果顯示，本研究所提出的
方法在音樂片段的代表性、線性排列的順暢度、間奏的產生技術，都有不錯的效果。因此，無
論是研究內容或研究目標，幾乎與原計畫相符。 
 
 研究成果之學術或應用價值 
本計畫的研究成果，在學術價值方面，我們除了提出代表段落分析及線性排列的方法，我
們也提出模型訓練的方式來產生間奏。我們提出由訓練資料中學習探勘旋律發展、和弦進程和
節奏模型，使得組曲編曲後的間奏能讓音樂段落連接更為流暢且完整。 
在應用價值方面，我們常在一般場合中，體驗到音樂對於氣氛的影響。專業的音樂 DJ 可
以營造出令人印象深刻的氣氛。本研究所開發的系統除了可以廣泛地應用在這些場合，也可以
帶動美感與資訊科技的結合。本計畫中音樂的技術及應用，將有助於台灣發展與音樂藝術有關
的數位內容技術與美學經濟。 
  
 是否適合在學術期刊發表或申請專利 
本計畫的研究成果除了 2 篇碩士論文之外，部分研究成果已經發表在 Workshop on Digital 
Archive Technologies, IEEE International Conference on Multimedia and Expo. 我們也正在整理研
究結果，準備投稿到國際學術期刊。 
 
 主要發現或其他有關價值 
本計畫在音樂片段的代表性實驗中，驗證以動機重覆次數總和的分析方式來決定音樂片段
的代表性有不錯的效果。表三則是從中我們可以發現在實驗三的音樂段落線性排列實驗中，我
們準備了一首線性排列後的編號 1 的組曲讓測試者判斷音樂片段的順序編排是否自然。圖 3 是
編號 1 的組曲中音樂段落順序編排的流暢程度實驗結果。在間奏彈奏技巧方面，間奏密度會影
響各音樂片段連結的自然性與完整性。 
Opportunities, 由 UIUC 的 Professor J. S. Downie、Indiana Univ. Bloomington 的
Prof. D. Byrd 及 Univ. of London 的 Prof. T. Crawford，對十年來 MIR 的發展作回
顧與前瞻。其中提到了多項 MIR 未來的挑戰，包括考慮更多 Potential Users、
Multiple Features 的 Hybrid Matching、考慮更多不同特質與文化的音樂、整合的
MIR 系統等。另一場的 Keynote Talk, Wind Instrument-Playing Humanoid Robots
非常有趣，由 Waseda Univ.的 Prof. A. Takanishi 介紹他們所開發的會吹奏長笛的
機器人 WF(Waseda Flutist)。因為日本面臨高齡化社會的來臨，因此研究開發人
性化的機器人。這機器人的長笛吹奏令人驚艷，尤其還模擬人類吹氣時的聲帶
運作，手指的姿勢也非常靈活。Youtube 上有此系列機器人相關的影片介紹
(http://www.youtube.com/watch?v=lYDW2A5-Cbw)。 
今年的論文與往年相較最特別的大概就是近幾年來因為 Web 2.0 的興起，透
過音樂網站的 Social Tags 之相關議題，這個 Session 討論非常熱烈。尤其，由
CMU, UIUC, Columbia 的團隊發表的 Evaluation of Algorithms using Games: The 
Case of Music Tagging，其實驗中對於音樂的 Social Tagging 一些怪異的現象，
引起大家會心的笑聲。此外，今年的 ISMIR 特別還有 Lyrics, Folk Songs, 
Sociology and Ethnomusicology 的 Sessions。 
這次會議還特別舉辦 f(MIR) Workshop on the Future of MIR。在 f(MIR)的
Workshop 上有五篇論文發表，f(MIR)雖由學生主辦，但沒有限制作者是學生身
分。其中有趣的論文包括探討何謂有意義的 Music Retrieval、如何 Real Time 的
推薦 Live Music。此外則是延續前幾年的 MIREX。今年的 MIREX 延續過去包
括 Genre Classification, Artist Identification, Query by Singing/Humming,Tapping, 
Onset Detection 等 26 個 Task。今年也增加了諸如音樂 Social Tags 新的 Data Set。
清大張智星教授也有參與 Query By Singing/Humming。  
大會在會後分別安排參觀 10/31, 11/2 於京都、東京舉行的日本國內的音樂相
關會議 CrestMuse Workshop、SIGMUS Symposium。CrestMuse 示日本最大的音
樂研究計畫，SIGMUS 則是日本國內最大的音樂資訊會議。 
