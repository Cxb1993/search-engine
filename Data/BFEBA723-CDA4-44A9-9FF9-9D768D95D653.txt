 行政院國家科學委員會專題研究計畫成果報告 
計畫名稱：資訊家電控制平台軟體元件(II) 
計畫編號：NSC  95-2218-E-366 -001 
執行期限：95 年 8月 1 日至 96 年 7月 31 日 
主持人：洪盟峰   樹德科技大學資訊工程系 
計畫參與人員：張博超、蘇倍豪、杜婉玲 
 
 
摘要 
本計劃提出利用行動裝置、網際網路、資料庫與序列控制等技術架構出遠
端家電控制平台並在此平台上開發所需之軟體元件包括介面程式、資料表、以
及家電控制程式。藉此，使用者在家中可以利用手持式裝置查詢、設定家電設
備。並可依個人權限來管理家電設備。在家電網路部份是利用所開發的伺服器
透過 RS-232 介面來連接包括電燈、電風扇等不同家電設備來提供開關兩階控
制或是馬達轉速的連續控制。實驗結果顯示所開發的軟體元件的確可以有效且
即時地控制設備。體現數位家庭的便利性，不同於前年計畫之處，主要是利用
UPNP 技術開發可應用於一般家電用途的軟體模組。可以支援設備自動搜尋、
自我調整組態以及服務自動管理等目標。目前此一家電控制平台是由手機、伺
服器與家電網路構成。另外由於三項軟體元件個別由不同成員開發，為了有效
管理軟體開發流程，必須建立一個協同環境來讓開發成員經歷不同的開發階
段，也可以讓開發成員進行整合與測試。同時也讓計畫的歷程有完整的紀錄。 
關鍵詞：資訊家電控制、萬用隨插即用、家電網路、行動設備、設備管理 
1. 簡介 
近年來，數位家庭生活的議題吸
引不少人員投入研究如何利用新式的
電子、資訊技術來改善人們居家生活
的品質。讓家庭用戶可以方便地享用
資訊、娛樂、學習、醫療、購物等服
務。例如，據資策會 ACI-FIND 在 2005
年所調查可知，臺灣地區寬頻用戶多
達 413 萬戶。另外根據 IDC 研究報告
顯示,全球資訊家電產值,將從 2002 的
340 億美元,成長到 2007 將達 920 億，
據資策會 MIC 估計，2007 年將超過
1200 億美元。近三年台灣數位家電
（Information Appliance, IA）產值大幅
以三位數的比率成長是 6 大硬體產業
中表現最好的。台灣 IA 總產值至 2005
年已超過 64 億美元，佔全球市場的
34.9％，是台灣繼資訊產品後，另一新
興市場，也顯見數位家電技術日益重
要。隨著網路技術的進步、嵌入式系
統技術的成熟與手持設備的普及化已
經讓傳統的家電展現不同的風貌。也
讓遠端家電監控的硬體環境漸趨成
熟。所欠缺的只是軟體元件的不足窘
境。 
 
數位家庭數已經是逐漸實現的夢
家庭閘道
家電網路 
RS232/RS485 作為通訊介面。 
 
 
 
 
 
 
 
圖一  家電控制平台示意圖 
手 
持 
設 
備 
 
 
 
 
 
 
圖二 家電控制平台中，管理員代理、閘道器代理與設備代理間的互動關係 
 
 
 
 
 
 
 
 
 
 
圖三 系統軟體架構 
 
 
UPnP(Universal Plug and Play)是
一種支援分散式(distributed)、開放網
路 (open networks)的家庭網路 (Home 
Networking)標準 [1]，它可以充分利用
網路資源的自動探測及控制，簡化電
腦、家用電器及其它網路設備的
連。除此之外，UPnP 技術與作業系
平台、程式開發語言、以及網路傳
媒介是獨立的(independent)；亦即
說，不需要特定的作業系統或開發
言才能實作 UPnP 的技術。它以現存的
網 路 架 構 標 準 為 基 準 ， 像 是
HTTP(Hypertext Protocol) 及
TCP(Transmission Control Protocol)，並
以 XML(Extensible Markup Language)
為主要的傳輸控制語言。而透過家
Manager 
Agent 
Gateway 
Agent 
Device 
Agent 
家庭內部 
Database 
Manager Gateway  Device  
資訊家電控制平台 
(Framework) 
Commu RS232 UPNP 
資訊家電設備互 作
統
輸
是
語
用網路做為傳輸並具有服務發現探索
(service d 術並不只有
UPnP 網路
等技術，如iscovery) 的技
技術，尚有 Havi, Bonjour
表一所示。 
器的接受使用者的要求來設定家電設
備以及記錄家電狀態便於回應使用
者。 
 
圖四  UPNP Protocol Stack 
而且，使用者控制端與家電的受控端
大都由不同的軟硬體平台所構成，所
以閘道器必須能整合這樣的異質環
境，在控制端與受控體之間介接指令
與資料。保持家電狀態與使用者指令
歷程記錄亦非常重要！他將有助於系
統的管理與維護。上述這些功能都必
須依賴資料庫系統來實現。資料庫將
記錄來自使用者的指令與來自家電設
備的狀態，所以使用者可以從資料庫
擷取家電設備的最新狀態，家電設備
則可以依據資料庫的內容更新來決定
如何設定本身的狀態。除了指令與資
料介接之外，用戶登錄、管理與認證
功能也必須由資料庫支援。所以如何
設計一個高效能、高可靠度的資料庫
系統來管理使用者、使用者設備、家
電設備之間的關係，也是本項計畫的
重點。我們所使用的資料庫基本結構
如圖五所示。圖五為目前此一系統所
使用的資料表包含使用者資料表、控
制資料表、狀態資料表與設備資料
表。使用者資料表用來描述使用者的
身分識別與權限管理。控制資料表則
定義家電設備的識別、類別以及所對
應的家電網路位址。狀態資料表表示
設備狀態、啟閉時間等。設備資料表
則是儲存有關設備控制權限、設備名
稱等資料。 
 
識別(number) tinyint 4bit
位置(address) varchar 40bit
ICP位址(ICPaddress) varchar 40bit
類別(class) tinyint 2bit
控制動作(control) tinyint 1bit
名稱(IAname) varchar 40bit
資料表(data)
識別(number) tinyint 4bit
狀態(state) tinyint 1bit
啟動時間(startime) datetime
停止時間(stoptime) datetime
狀態表(state)
識別(number) tinyint 4bit
受控設備(IAdevice) varchar 40bit
設備表(device)
ia
 
圖五 相關資料表 
 
在家電網路部份，我們使用 ICP
模組作為連接家電設備的基礎網路。
在此一基礎網路上，有主控電腦控制
模組與受控家電三項設備。主控電腦
是以 RS232/485，連接控制模組。在單
一網路上可最多連接 256 個模組。最
遠距離可逹 1.2 公里，而控制模組可以
提供數位開關接點或類比開關輸出來
支援不同的家電操作模式。包括設定
開關時間的預時操作，二段式的開關
動作與無段式的開關動作。此外，我
們實作出一個 Device Agent，來進行家
電管理的工作。這個 Device Agent 將
週期性的掃瞄閘道器內的家電資料表
讀取最新的使用者指令紀錄產生家電
指令來更新家電狀能。在目前的雛形
系統上，使用者可以透過手機上的
UPNP 模組檢視受控家電的狀能，並可
以即時設定家電狀態，讓使用者方便
 
 
 
 
(a) 
 
 
(b) 
 
 
(c) 
 
圖七 測試範例. 
4.結論 
本文主要的內容有二，首先我們
提出可以利用手持式設備如手機進行
家電控制架構。此一架構是以家庭閘
道器透過 UPNP 機制來連接手機指令
與家電網路來達到家電狀態查詢、設
定與監控等功能。其次，有關在多人
軟體開發環境中，極受重視的版本流
程管理也在此加以介紹，並以家電控
制平台開發為例說明版本流程管理的
典型作法，包含觀念說明、工具架構
與實際經驗。相信此類流程管理的使
用將可以有效軟體開發的效率與品
質。 
參考文獻 
[1] UPNP Forum, http://www.upnp.org. 
[2] W. Y. Chen, “Emerging Home 
Digital Networking Needs,”, Proc. 
of the 4th Int'l Workshop on 
Community Networking,” pp.7-12, 
Spet. 1997. 
[3] Y. H. Kuo and M. F. Horng, “Era 
of Digital life,” Quarterly of 
Electrical Engineering, Chinese 
Institute of Electrical Engineering, 
pp. 16-21, Dec. 2004 
[4] Y. H. Kuo and M. F. Horng, 
“Digital Appliances and Life,” 
Science Development, National 
Science Council, Sept. 2004. 
[5] IC手持式裝置http://www.ic手持式
裝置s.com.tw  
[6] WinCVS, http://www.wincvs.org 
[7] “最新 UNIX 系統學習手冊＂ 蘇倍
慶著 松崗電腦圖書資料股份有限公
司 
[8]  “GUN Manuals Online” 
http://www.gnu.org/manual/ 
[9] 網路應用程式設計介面 sockets 與
xti＂ 林德慶譯 培生教育出版集團 
[10] “Linux C/C++網路程式設計＂ 顧
思捷、陳錦輝著  金禾資訊股份有限
公司 
[11] “MSDN”,http://msdn.microsoft.com/d
efault.aspx 
