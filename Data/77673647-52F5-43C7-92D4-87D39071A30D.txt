 2 
用於直接驅動與位置控制，及工廠自動化等工業應用上。然而，因其非線性數學模型，使得
在激磁運轉時產生大的轉矩漣波，而造成振動與噪音問題，使得SRM 被應用在高性能伺服控
制，或高精準度工具機之位置控制上受到限制。針對SRM 產生的轉矩漣波，本計畫提出一具
適應性激磁參數調控，配合自我學習演算法，來自動調整相激磁導通角與截止角，以產生最
佳的相激磁電流波形，改善馬達轉矩漣波和能量轉換效率。小腦模型控制器(CMAC)具有控制
法則簡單易於實現，且可簡化控制系統複雜性，以達到線上即時調控增益參數的目的，對於
非線性系統之控制，具有優越之快速學習收斂速度及類化能力，故可縮短調控時間與減少記
憶體需求。為使系統有良好的啟動特性與暫態響應，一最佳激磁導通角搜尋法則配合模糊速
度控制器，在滿足不同轉速之電流響應需求下，有效的改善SRM 啟動不良問題，並可達最佳
效率激磁之目的。dSPACE之DS1104 控制器被用來模擬和實現本控制策略，並應用於健身器
材上，在不同的速度與負載下，對一四相8/6 極開關式磁阻馬達作測試，實驗結果皆驗証了
適應性激磁參數調控方法可大大改善輸出的轉矩漣波與整個驅動系統效率。 
人才培育成果說明： 
對於參與本計畫之人員除了可充分瞭解切換磁阻馬達之原理與特性外，並可認識如何設
計與實現一套以DSP 為基礎全數位化控制之磁阻馬達驅動系統之軟、硬體架構，最重要的是
參與本計畫之人員已具設計與實現切換磁阻馬達驅動器之能力。此外，對於各種控制方法之
原理與分析，控制器之設計與實現，自動化量測系統之靈敏度 (sensitivity)、不確定性
(uncertainty)、與控制器暫態和穩態響應之分析，以及驅動系統之動態性能，亦可有進一步之
認識。 
技術研發成果說明： 
1. 完成一套 DSP全數位化控制電路，軟、硬體皆為可程式，應用上會相當有彈性。 
2. 完成一套切換磁阻馬達數學模式化系統。 
3. 建立切換磁阻馬達Matlab模型，以供模擬用。 
4. 完成一套整合模糊邏輯與小腦模型控制器控制之高性能切換磁阻馬達驅動系統，並用作
為高安全性、高舒適度與高可靠度之下一代健身器材之驅動器。 
5. 本方法可提供學術界或業界作為設計磁阻馬達驅動器參考用。 
技術特點說明： 
針對應用於健身設備之切換式磁阻馬達驅動系統之轉矩漣波與驅動效能作改善並探討其
驅動性能與舒適度之改善方法。安全性與舒適度為室內健身器材之基本功能要求，加上即時
(real time)監控運動人之身生理狀況，並藉同步的即時動態調整參數，才能達到最舒適化與高
品質的健身效果。 
可利用之產業及可開發之產品： 
包含人因資料與健康體適能間的轉換資料庫，及新一代技術的即時智慧型健身器材，以
成為下一代高階健身設備開發的主流，符合中高齡使用者的需求。 
推廣及運用的價值：如增加產值、增加附加價值或營利、增加投資/設廠、增加就業人數…等。 
備註：精簡報告係可供國科會立即公開之資料，並以四至十頁為原則，如有圖片或照片請以
附加檔案上傳，若涉及智財權、技術移轉案及專利申請而需保密之資料，請勿揭露。 
 4 
的換相導通角度 θon與截止角度 θoff，而達到較低的轉矩
漣波。以下針對模糊控速度制器的設計、CMAC控制器
的設計、以及控制硬體架構作說明，最後由實驗結果來
驗證所提出的調控策略之可行性與操控性能。 
 
二、 模糊控制器的設計 
本計畫將模糊控制器應用在 SRM 的速度控制上，
以期望能改善速度響應與速度誤差[4], [5]。透過 SRM
單相等效電路的分析可得到產生的電磁轉矩為： 
21 ( , )
2e
dL iT i
d
q
q
=                (1) 
其中 Te為轉矩、i 為相電流、L 為相繞組電感以及轉子
位置 θ。由(1)式可知道，轉矩和電流平方成正比。一般
SRM的速度控制器都是用 PI控制器完成，為增加轉速
之響應速度，本計畫以模糊控制器來實現。由於模糊控
制器的輸入為速度誤差與速度誤差微分，而輸出為電流
命令的變化量，故以下即針對速度誤差與速度誤差微分
的變化量作詳細的分析，以便在設計時當參考。圖 1所
示為速度命令與速度誤差以及誤差變化量關係，由圖中
分析可得：轉速誤差為零並且誤差變化率為負值時間點
為 t1、t5以及 t9，轉速誤差為零並且誤差變化率為正值
時間點為 t3、t7以及 t11，轉速誤差為正值最大並且誤差
變化率為零值時間點為 t4、t8，轉速誤差為負值最大並
且誤差變化率為零值時間點為 t2、t6以及 t10，轉速誤差
為正值並且誤差變化率為負值時間點為 t0 ~ t1、t4 ~ t5以
及 t8 ~ t9，轉速誤差為負值並且誤差變化率為負值時間
點為 t1 ~ t2、t5 ~ t6以及 t9 ~ t10，轉速誤差為負值並且誤
差變化率為正值時間點為 t2 ~ t3、t6 ~ t7以及 t10 ~ t11，轉
速誤差為正值並且誤差變化率為正值時間點為 t3 ~ t4、t7 
~ t8。經由以上的分析，並且加強速度上升時間的改善、
超越量抑制的改善、穩態加速性的改善等分析後，而得
模糊邏輯控制規則，如表 1所示。其中模糊控制器的語
意部份，分割為七個語意狀態，也就是最多可以有 49
個規則，但本論文只使用 19條規則。 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
有了規則表之後，再來就是要定義輸出入域的範
圍。經由實際 PD控制運作可以預先假設速度誤差可定
義在 100 rpm到-100 rpm之間，並且為了增加在零點附
近的靈敏度，故在速度誤差之各語意論域間距上採用非
等間距的方式。而速度的誤差變化量因與取樣時間有
關，在此是使用 6.4 kHz的取樣時間做運算，故誤差變
化量須經過比率放大之後再進入模糊控制器的
/ ( )d dt error 論域，定義在-5.1到 5.1之間的範圍。另外
在輸出域的範圍定義為每次取樣電流可變化的最大範
圍，在此設定在-9A 到 9A 之間，且實際的電流命令輸
出可表示為 
* * *[ ] [ 1]c c ni n i n F= - +               (2) 
其中：i*c[n]為實際的電流輸出命令，i*c [n-1]為上次實際
的電流輸出命令，F*n 為此次模糊控制推論出的電流命
令變化量。各論域的歸屬函數定義如圖 2所示。 
整個模糊控制的工作可分為下列三個步驟來完
成： 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
1. 首先模糊控制器會將明確的速度誤差以及誤差變化
量依據模糊規則庫做模糊化的動作。 
2. 經由模糊推論依據規則庫推論出相對應的輸出電流
命令變化量之各語意歸屬值。 
表 1. SRM之模糊速度控制器規則 
Current
derror/dt
PB
PM
PS
ZE
NS
NM
NB
error
NB NM NS ZE PS PM PB
NM
NB NM
PM
ZE
NS
PB
PM
PS
ZE
NS
NM
NB
PS
ZE
NM
PM PB
PM
圖 2. 歸屬函數 
ZE PS PM PBNSNMNB
-100 -50 -10 0 10 50 100
error
ZE PS PM PBNSNMNB
ZE PS PM PBNSNMNB
0 1.7 3.4 5.1-1.7-3.4-5.1
0 3 6 9-3-6-9
derror/dt
Current
圖 1. 速度命令、誤差、與誤差變化量 
 6 
的輸入狀態。由 SRM 單相等效電路，其端電壓方程式
可表示成 
( , )( ) ( ) d iv t Ri t
dt
l q
= +              (4) 
其中，v(t)為輸入電壓，R為繞組內阻，i為相電流，λ( i,θ)
為磁通鏈。一般內阻很小，又因 tq w= × ，則(4)式可近
似成 
( ) L iv t w
q
D
@
D
                    (5) 
由式子(4)可得到導通角度的估算為 
1
u
on c
dc
L
i
DV
w
q q= - +                (6) 
其中 Lu為電感最小值，也就是轉子與定子不重合位置之
感值，ic為電流命令，D為責任比，Vdc為直流匯流排電
壓。由式子(6)可概略的計算在不同速度下，激磁導通角
度需提前多少角度，方能讓 SRM 之轉速能順利的達到
速度命令，並以此當成 CMAC 記憶單元之初始狀態。
當轉子速度達到速度命令時，因電流會隨轉子之速度與
負載而改變，所以微調之學習參數使用直流匯流排上的
電流大小之變化量，當作調整導通激磁角度提前或延後
的依據。當電流變化量小於零時則提前一個變化量角
度，否則延後一個變化量角度，當電流變化量之絕對值
小於設定容許範圍時，則停止 CMAC 更新導通角度，
如此可在滿足轉速要求下，最小化激磁時之能量轉換迴
圈(Energy conversion loop)，達最效率激磁之目的。 
 
3.3 轉矩漣波改善 
在實際控制 SRM 激磁電流時，由於繞組電感關係
而使電流無法瞬間的上升或下降，並且激磁電流也很難
維持在一固定值，因此必須透過電流控制器才能達到近
似於一固定的電流。圖 6 所示為一四相 8/6 極 SRM 之
四相電流與轉矩輸出之關係圖，由於在換相的過程中電
流無法瞬間的降為零，且在另一銜接相的電流也無法瞬
間的達到電流命令值，因此在換相的過程中會產生較大 
 
 
 
 
 
 
 
 
 
 
 
 
的轉矩漣波[6], [7]。另外每相激磁電流因電流控制器無
法控制在一固定的電流值，所以在激磁的過程中也會產
生較小的轉矩漣波。調控 SRM 截止激磁角度則會影響
轉矩漣波之大小。本研究採用估測的方式，利用轉子位
置與相電流，依據 SRM 廠商提供的轉子慣量與實際調
整的摩擦系數而求得當時的瞬間輸出轉矩。輸出轉矩中
間值可由轉矩最大值 Tmax與轉矩最小值 Tmin求得為 
max min
2men
T T
T
+
=                (7) 
作數位控制時，由式子(7)再取前後兩點平均而得輸出轉
矩平均值為 
[ ] [ 1]
2
men men
ave
T k T k
T
+ -
=            (8) 
其中 k為系統目前的狀態，k-1為系統前次一狀態，再
由式子(8)得轉矩漣波之大小 
rip ave eT T T= -                     (9) 
其中：Trip為轉矩漣波；Te為轉矩估測值。 
最後再將(8)式當作 CMAC 之狀態輸入，並且以每
0.1 Nt-m 等間隔設為一狀態輸入，當截止激磁角度
CMAC之狀態輸入學習參數。最後再依據轉矩漣波之大
小調整截止激磁角度，當轉矩漣波越大時，則提前越大
之截止角度，但若過度提前截止角度，則轉子速度會下
降，此時需延後一個截止激磁角度讓轉速回到速度誤差
可容許之範圍，當轉矩漣波小於某設定範圍時，則停止
CMAC之學習更新，而整個調控的要求是在轉速達到轉
速命令時才能作調控。 
四、 控制系統硬體架構 
本計畫主要的目的是降低開關式磁阻馬達轉矩漣
波、增加其適應能力甚至提高其效能，而此適應能力主
要是針對不同馬達或環境的變化，以及不同負載及不同
轉速命令下作探討。，其輸入速度命令 ω*與實際轉速的
回授，得到轉速誤差以及誤差變化量，當作模糊控制器
的輸入變數，而模糊控制器的輸出為電流命令。之後再
由此電流命令與實際的電流回授之誤差透過電流控制
器去控制不對稱半橋電路之上臂切換元件之功率轉換
裝置。在初始速度當速度誤差小於所設定的範圍，且轉
速命令大於一設定值時才會致能(Enable)角度調整系統
(Angle Regulate System)且由其中一組 CMAC做截止角
度的調整，而另一組做導通角度之調整。在截止激磁角
度方面，由實際的電流與當時之轉子位置利用查表的估
測方式，產生當時的轉矩輸出，經由運算後得到轉矩均
值，當 CMAC的狀態輸入，而轉矩漣波作為 CMAC之 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
學習調整依據，另外在實際調整截止激磁角度 θoff時，
若調整不當會使轉子速度降低。因此須將截止激磁角度
往回調整直到轉速回到可容許的誤差範圍，最後由
CMAC 的輸出重新調整截止激磁角度 θoff。而導通激磁
圖 6. 相電流與輸出轉矩 
圖 7控制系統架構方塊圖 
 8 
0 1 2 3 4 5 6 7 8 9 10
0
200
400
600
800
1000
1200
1400
1600
1800
2000
2200
Times [s]
S
pe
ed
 [r
pm
]
Actual
Command
5 5.001 5.002 5.003 5.004 5.005 5.006 5.007 5.008 5.009 5.01
0
5
10
15
20
25
30
35
40
Times [s]
C
ur
re
nt
 [A
]
Phase A
Phase B
Phase C
Phase D
0 1 2 3 4 5 6 7 8 9 10
0
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
2
2.2
Times [s]
To
rq
ue
 [N
t-m
]
6 6.5 7 7.5 8 8.5 9 9.5 10
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.4
Times [s]
To
rq
ue
 R
ip
pl
e 
[N
t-m
]
圖 10. w*=2000rpm, 0.8Nm只調 θon之響應 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
0 1 2 3 4 5 6 7 8 9 10
0
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
2
2.2
Times [s]
To
rq
ue
 [N
t-m
]
0 1 2 3 4 5 6 7 8 9 10
0
50
100
150
200
250
300
350
400
450
500
550
Times [s]
S
pe
ed
 [r
pm
]
Actual
Command
5 5.005 5.01 5.015 5.02 5.025 5.03 5.035 5.04
0
5
10
15
20
25
30
35
40
45
50
Times [s]
C
ur
re
nt
 [A
]
Phase A
Phase B
Phase C
Phase D
3 4 5 6 7 8 9 10
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.4
Times [s]
To
rq
ue
 R
ip
pl
e 
[N
t-m
]
圖 11. w*=500rpm, 1.8Nm調控 θonm與 θoff之響
應 
0 1 2 3 4 5 6 7 8 9 10
0
200
400
600
800
1000
1200
1400
1600
1800
2000
2200
Times [s]
S
pe
ed
 [r
pm
]
Actual
Command
5 5.001 5.002 5.003 5.004 5.005 5.006 5.007 5.008 5.009 5.01
0
5
10
15
20
25
30
35
40
45
50
Times [s]
C
ur
re
nt
 [A
]
Phase A
Phase B
Phase C
Phase D
0 1 2 3 4 5 6 7 8 9 10
0
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
Times [s]
T
or
qu
e 
[N
t-m
]
7 7.5 8 8.5 9 9.5 10
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.4
Times [s]
To
rq
ue
 R
ip
pl
e 
[N
t-m
]
圖 12. w*=2000rpm, 0.8Nm調控 θonm與 θoff之響應 
 
0 1 2 3 4 5 6 7 8 9 10
0
200
400
600
800
1000
1200
1400
1600
1800
2000
2200
Times [s]
S
pe
ed
 [r
pm
]
Actual
Command
5 5.001 5.002 5.003 5.004 5.005 5.006 5.007 5.008 5.009 5.01
0
5
10
15
20
25
30
Times [s]
C
ur
re
nt
 [A
]
Phase A
Phase B
Phase C
Phase D
0 1 2 3 4 5 6 7 8 9 10
0
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
Times [s]
To
rq
ue
 [N
t-m
]
3 4 5 6 7 8 9 10
-0.5
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.4
0.5
Times [s]
To
rq
ue
 R
ip
pl
e 
[N
t-m
]
圖 13. w*=2000rpm, 無載啟動，穩態加載 0.8N-m 
調控 θonm與 θoff之響應 
 
