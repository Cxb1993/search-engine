1行政院國家科學委員會專題研究計畫成果報告
分散式感測網路上前置密匙之研究
The Study of Key Pre-distribution for Wireless Sensor Networks
計畫編號：NSC 94－2213－E011－059
執行期限：94 年 8 月 1 日至 95 年 10 月 30 日
主持人：陳郁堂 台灣科技大學電子系
計畫參與人員：林忠志 王聖志 台灣科技大學電子系
周明文 劉宜學 台灣科技大學電子系
一、中文摘要
在分散式感測網路 (Distributed Sensor Networks)
中，受限於資源限制，金鑰管理(key management)
變成一個重要的新課題。礙於有限電源供應及儲存
裝置，公開金鑰加密或置入所有的密鑰對，並不適
用於感測網路。最近，隨機式前置金鑰分配
(probabilistic key pre-distribution)被認為是可行的方
式，感測器從一個極大的密鑰池(key pool)內，隨機
選出部份密鑰做為其金鑰環(key ring)，當佈署於環
境的同時，藉由部份的密鑰與鄰近的節點做安全性
溝通。當感測網路遭受攻擊時，不安全的密鑰必須
移除。我們藉由數學分析及實驗分析，發現在 5%
的節點遭受攻擊後，分散式感測網路的安全機置已
經失去效用。然而以往隨機式前置金鑰分配的相關
研究，無法針對此問題提供有效解決方案。本計畫
將發展一個蛇型前置密鑰演算法 (snake key
pre-distribution)，有效的來解決這個問題。感測器
從一個二維的密鑰表(two-dimensional key table)，以
蛇型方式選出部份密鑰，藉由密鑰在二維空間的相
依性，我們能正確且快速的對系統所發出的新密鑰
進行解密。即使密鑰池的數量級達到數萬，我們仍
可控制感測器解密的複雜度在 )1(O ; 我們並利用
感測器散佈的相關資訊，降低儲存裝置需求。為驗
證蛇型前置密鑰演算法的效能，我們藉由數學分析
並利用電腦模擬進行測試
關鍵詞：分散式感測網路
Abstract
Key management is a challenge issue in Distributed
Sensor Networks (DSN) due to ad hoc nature and
resource limitations. Many existing encryption
schemes such as public-key cryptography are not
suitable for resource-limited sensor networks.
Recently, the probabilistic key pre-distribution scheme
provides an option to address this issue. However, key
recovery has not been supported. Based on our
observation, probabilistic key pre-distribution scheme
cannot operate normally even when 5% of sensors are
compromised. In this project, we propose a novel
snake key pre-distribution scheme with key recovery
capability. First, we spread a huge key pool on a
two-dimensional key table. Each key in the key table
preserves relative information for key encrypting keys
(KEKs). When a key is compromised, we can use a
suitable KEK in the key table to encrypt a
new-generated key message. Furthermore, we take
advantage of deployment locality in key
pre-distribution to further increase local connectivity
ratio. Sensors located in the close region select keys
from a subset of the key table. To evaluate the
performance of the proposed snake key
pre-distribution scheme, we conduct intensive
computer simulations, and the results of simulation are
presented.
Key Words—key management, encryption, sensor
networks
二、緣由與目的
Recent advances in wireless communications
and electronics have enabled the development of
low-cost, low-power, multifunctional sensor
nodes that are small in size and communicate
un-tethered in short distances. These tiny sensor
nodes, which consist of sensing, data processing,
and communicating components, leverage the
idea of sensor networks. In typical application
scenarios, sensor nodes are spread randomly over
the deployment region. Each of these sensor
nodes has the capabilities to collect data and
route data back to the base station, which is
connected to an outer network.
Security is an important issue for wireless
sensor networks, especially for deployment in
hostile environments. Encryption is an important
approach to provide secure communication in
wireless sensor networks. However, the
characteristics of wireless sensor networks are
quite different from those of traditional Internet.
For example, Smart Dust sensors are 8 bit
microprocessors with only 8KB instruction flash
and lack support for many arithmetic instructions
such as multiplication or rotate / shift instruction.
After loading TinyOS, only 4500 bytes memory
are available for security [1]. Therefore,
asymmetric cryptographic mechanisms such as
3support key recovery within limited resource
sensor networks. The research has three
underlying objectives:
 Develop a novel key pre-distribution
scheme, which can support key recovery
mechanism when sensors are compromised.
 Use the deployment information to raise
local connectivity between neighboring
nodes, and reduce key storage requirements
for each sensor.
 Propose a function to estimate coverage
area when sensors are randomly deploy into
environment under specific sensor’s
amount, key ring, and key pool to fit the
secure DSN.
三、 研究方法及成果
In this section, we expand on
Eschenauer-Gligor’s probabilistic key 
pre-distribution scheme [2] and consider the
problem of key recovery after compromised keys
have been revoked. In the proposed key
management scheme, key distribution consists of
three phases: snake key pre-distribution,
shared-key discovery, and path-key
establishment. In key pre-distribution, each
sensor chooses subset of keys from a large key
pool to install into its memory. The last two
phases are similar to random key management
scheme in [2].
I. SNAKE KEY PRE-DISTRIBUTION
Efficient construction of key encrypting keys
is an important issue to support key recovery
capability in key pre-distribution. In snake key
pre-distribution, we use the relative location in a
two-dimensional key space to construct key
encrypting keys. First, we spread all keys on a
two-dimensional key table. Then, each sensor
selects a subset of keys from the key table,
similar to snakes crawling on a board. Therefore,
adjacent keys in the key table can be served as
the key encrypting keys. The details of the snake
key pre-distribution scheme can be divided into
the following three steps:
1) Two-dimensional Key Table Construction:
We spread a huge key pool on the
two-dimensional key table. First, keys are
sequentially put on the table from left to right
and from top to bottom. Then, for each key on
the table, we randomly pick another key on the
table and swap their positions with each other.
After all keys have been swapped, keys are
randomly distributed over the two-dimensional
key table.
2) Key Table Partition Based on Deployment
Information: In sensor deployment, all sensors
are pre-arranged into a sequence of smaller
groups and dropped out sequentially. Sensors
that are dropped next to each other have a better
chance to be close to each other in the m
deployment environment. This spatial relation
between sensors derived prior to deployment is
caled”deployment information” [6]. We use 
deployment information in the snake key
pre-distribution to increase local connectivity
and reduce storage requirements. Hence, the
two-dimensional table is further divided into
several overlapping sub-tables and each sub-table
corresponds to a deployment group.
Without loss generality, deployment
environment is divided into four areas.
Simultaneously, sensors are divided into four
groups:”up-left”, “up-right”,”down-left”, and 
“down-right”. Each group of sensors corresponds 
to a key sub-table. For example, sensors in
up-right group correspond to the sub-table with
row index from 0 to 1S and column index
from  S1 to 1S , whereis the subset
factor of key pool size Sand  0<α< 1. The value 
of α has the effects on the security level, local 
connectivity ratio and storage requirements.
Smaler α provides higher local connectivity and 
smaller storage requirements, but lower security
level. Table 2 lists range of each sub-table.
Table 2 Range of Key Sub-table
Sensors’ 
Group
Row-Range Column-Rang
e
Up-Left  1,0 S  1,0 S
Up-Right  1,0 S   1,1  SS
Down-Left   1,1  SS  1,0 S
Down-Rig
ht
  1,1  SS   1,1  SS
3) Snake Key Selection: For each sensor,
selection subset of keys from the
two-dimensional key tables is similar to multiple
snakes crawling on the two-dimensional key
sub-table. Four adjacent keys in the
two-dimensional key table are used to construct
key-encrypting keys. Whenever any key is
compromised, we can generate a new key and
send the new key message in the encrypted form
by using one of the corresponding key encrypting
keys.
The major concerns in designing key selection
are to increase local connectivity ratio and key
recovery ratio. In order to raise the local
5II. KEY RECOVERY
The major issue in key recovery is to choose
the proper key-encrypting keys such that sensor
nodes can decrypt the encrypted key message
correctly and efficiently. In snake key
pre-distribution, we take advantage of the
relative information in the two-dimensional key
table to construct key encrypting keys (KEKs).
Hence, key recovery procedure can operate
efficiently, even when a huge key pool is used.
Once sensor nodes are compromised, the base
station can revokes those unsafe keys from each
sensor’s key ring. When number of compromised 
sensors reaches the threshold, the base station
activates the key recovery procedure, which
regenerates new secret keys to replace the
compromised ones in the encrypted form by
proper key-encrypting keys.
A. Revocation
Whenever sensor nodes are compromised, the
base station first broadcast a revocation message
with a list of revoked key identifiers. After
receiving the revoked key identifiers, each sensor
node verifies and removes the revoked keys from
its key ring.
B Recovery
1) Generate New Secret Keys: The base station
regenerates new secret keys for those
compromised ones.
2) Encrypt New Key Message: it is a challenge
issue to choose proper key to encrypt new key
message, especially when the key table is huge.
Let two sensors have common keys to build a
secure communication link. Once a sensor is
captured, the other sensor can revoke the
compromised key(s), which intersects with a key
segment of the compromised sensors on the
two-dimensional key table. Hence, the base
station can use those key-encrypting keys of the
intersections to encrypt new secret keys.
In the snake key pre-distribution scheme, each
key has four adjacent keys, called key encrypting
keys on the two-dimensional key table. If two of
them have been revoked, the rest of two are
possibly in other sensors’ key rings if they crawl 
cross the intersections. Hence, regular sensors
can decrypt correctly and efficiently using those
key-encrypting keys. If the compromised key
locates on the head or the tail of key segment or
on the boundary of the sub-table, we have three
adjacent keys to encrypt the new key message.
The format of the new key message can be
represented as follows:
Message= (Keyid, Eadj(New_Key))
, where Keyid is the compromised
key identifier, adj is the adjacent key of
the compromised, and New_Key is
regenerated key.
3) Decrypt with Proper Keys: After receiving the
message, the sensor first verifies Keyid with its
recently revoked keys. If they are matched, try to
decrypt it with adjacent keys on the key ring and
stores it. Without disclosing the encrypted Keyid
Eadj(), it takes O(S) to decrypt a message.
“Snake Algorithm” degrades the complexity 
from O(S) to O(1) (at most two times). For
attackers, even they can eavesdrop the messages,
it still takes too much time to decrypt one new
key message.
4) Rebuild Shared Keys and Path Keys: After
decrypting those new key messages, the sensors
now have recovered those compromised keys.
Al they have to do is folow the “Shared-Key
Discovery” and “Path-Key Establishment” 
phases again. For any pair of sensors, if they can
build direct link before, they will have
opportunities to rebuild link again. DSN will be
still workable than before. When sensors are
compromised, it is unnecessary for DSN start up
recovery mechanism frequently. If compromised
sensors are exceeding a threshold value, DSN
can then start to recover those compromised keys.
Even we try to recover those compromised keys,
there are still part of keys cannot be recovered. If
adjacent of compromised keys are still
compromised on key table, those keys will be
lost and failed. Moreover, the payment of
recovery mechanism depends on new key
messages amount.
III SIMULATION RESULTS
In this section, we evaluate the performance
of the proposed snake key pre-distribution by
simulation and compare it with the random key
management [2]. The performance metrics for
the snake key pre-distribution are the resilience
against node capture, communication overhead,
local connectivity probability, storage
requirements and number of hops in path-key
establishment. Since pages are limited, only parts
of simulation results are presented in this project.
A. Resilience against Node Capture,
Figure 2 depicts the percentage of
compromised sensors vs. local connectivity.
As compromised sensors increase, the local
connectivity for key pre-distribution schemes
decreases. However, the snake key
7D. Local Connectivity and Storage Comparison
After deploying sensors, we compute their
local connectivity, the ration of building shared
key links with its neighbors. We deploy them
into an area of approximate 40 neighbors. Figure
6 gives an example of key pool S= 10000 (subset
factor 
10
8 ,
10
7 , 1, and 1 without dividing
key ring), sensors 1000N , mr 40 and different
size of key ring. We can see that if subset
factor=
10
7 , the snake key pre-distribution can
save almost 12.5% of storage than random key
management [2]. Snake key pre-distribution
without key table partition, with subset
factor 1 , has lower connectivity probability.
Also, snake key pre-distribution without dividing
key ring into segments has lower connectivity
probability.
Local Connectivity Random vs. Snake
S=10000 key ring=k section(k')=10 N=1000
0
5
10
15
20
25
30
35
40
45
50
55
60
0 10 20 30 40 50 60 70 80 90
Key-Ring size(k)
L
oc
al
C
on
ne
ct
iv
ity
(%
)
Random
Snake α= 8/10
Snake α= 7/10
Snake α= 1
Snake α= 1, without dividing key ring
Figure 6: Local connectivity
IV Conclusions
In this project, we presented a novel snake key
pre-distribution scheme with key recovery
mechanism when compromising. Using
deployment information to raise sensor’s local
connectivity in neighborhood and reduces
storage requirements. Moreover, Our approach is
also scalable and flexible: trade-offs can be made
between sensor-memory and key pool. Sensors
not only deploy into square environment, circle,
rectangle or other shape is still workable. When
sensors were compromised, the results indicate
that our scheme makes DSN still workable than
previous approach. More than 90% of sensors are
connected and have secure channels with their
neighbors.
REFERENCES
[1] D.W Carman, P. S. Kruus and B. J. Matt,
“Constraints and Approaches for Distributed
Sensor Security”, NAI Labs Technical Report
#00-010, September, 2000
[2] L.Eschenauer and V. D. Gligor,“A
Key-Management Scheme for Distributed
Sensor Networks,”in Proceeding of ACM
CCS, pp.41-47, 2002
[3] A. Perrig, R. Szewczyk, V. Wen, D. Cullar,
and J. D. Tygar,“Spins: Security Protocols
for Sensor Networks,”in Proceeding of
MOBICOM, pp.189-199, 2001
[4] Wenliang Du, Jing Deng, Yunghsiang S.
Han, Shigang Chen, and Pramod K. Varshney,
“A Key Management Scheme for Wireless
Sensor Networks Using Deployment
Knowledge”, in Proceeding of INFOCOM,
Mar 2004.
[5] H. Chan, A. Perrig, and D. Song.“Random
Key Pre-distribution Schemes for Sensor
Networks”, in Proceeding of IEEE
Symposium of Privacy and Security , 2003
[6] Donggang Liu, and Peng Ning“Establishing
Pairwise Keys in Distributed Sensor
Networks”in Proceeding of ACM CCS,
pp.52-61, 2003
出席國際會議報告
陳郁堂 台灣科技大學電子系
IMA 2006 國際網際網路多媒體系統
與應用會議
1.參與會議經過
IASTED IMA 2006 國際網際網路與多媒體
系 統 與 應 用 會 議 (2006 IASTED
International conference on Internet and
Multimedia and Applications)於 2006 年 8
月 14 日至 16 日假美國夏威夷州的壇香
山市舉行，同地點另有IASTED International
conference on Signal and Image Processing
2006, IASTED International conference on
Intelligent System and Control 2006,
IASTED International conference on
Robotics and Control 2006,一起舉行共吸
引來自全球與美國研究人員與產業界與
會，此次會議包含下列議題;多媒體系統、
網際網路、共同合作系統、遠距教學 視訊
影像、 型態辨識 。本次會議 14 日上午
Keynote Speech ，由 Microsoft China
Research 副總裁 IEEE Fellow Ya-Qin
Zhang 博士，以”Ubiquitous Mobile
Computing in Digital Life” 為題發表
演講 Ya-Qin Zhang 博士勾勒出未來行動
計算的遠景， 當無線網路技術演進，由
2G/2.5G 到 3G 與 All IP network ，行動計
算產業正處於轉型階段。人類首次能在微
小嵌入式系統中，同時具有行動計算、多
媒體功能、人工智慧高效能 CPU 與高速網
路的功能，將造就出許多新型態的服務，
也對人類未來的數位生活，產生革命性的
影響。嵌入式系統、多媒體、 行動計算技
術的結合，確實成為產業重要趨勢。15 日
上午由來 UCLA 電腦系 Sahai 教授,以
(Cryptographic Techniques for
Security and Privacy) 給 Tutorial，內
容 檢 視 cutting-edge cryptographic
techniques, 包 含 Zero-Knowledge
Proofs, Identity-based Encryption, 到
Secure Private Computation Sahai 教授
非常年輕，2000 年從 MIT 畢業，但反應非
常靈活。15 日下午由來 UCSD 電腦系
Dubnow 教授,以 (Computer Audition) 給
Tutorial，主要介紹 computer Audiiton 2
的研究議題，特別在 Semantic Gap between
human and machine level。內容包含 (1)
PERFORMANCE ENHANCEMENT AND SERVICE DIFFERENTIATION
FOR LIVE VIDEO AND AUDIO OVER IEEE 802.11e NETWORK
Yie-Tarng Chen Lu-Bing Hsu
Department of Electronic Engineering
National Taiwan University of Science and Technology
Taipei, Taiwan
ytchen@mail.ntust.edu.tw
ABSTRACT
In recent years, high-speed wirelesses LANs are widely
deployed in airports, stations, hotels and street corners.
Transmitting video and audio over wireless LANs
becomes an important trend. Hence, service
differentiation and throughput enhancement become
important issues in multimedia wireless LANs. In this
paper, we extend Distributed Coordinated Function (DCF)
in IEEE 802.11e to provide alternatives for service
differentiation, and improve throughput for live video and
audio over error-prone wireless LAN. Backoff procedure
becomes a performance bottleneck for Media Access
Control (MAC) protocol in IEEE 802.11. Hence, we
propose an adaptive two-stage backoff counter to reduce
the overheads in blocking backoff counter. Furthermore,
we explore the proactive frame drop policy to eliminate
unnecessary retransmissions of video and audio frames
under poor channel conditions. To investigate the
performance of the proposed schemes, we run intensive
computer simulation using ns-2, and compare
performance with EDCF in IEEE 802.11e in terms of
throughput and delay.
.
KEY WORDS
Wireless LAN, medium access control, and multimedia
1. Introduction
In recent years, high-speed wirelesses LANs, such as
IEEE 802.11a and IEEE 802.11g, have been widely
deployed in airports, stations, hotels and street corners.
The data rate of high-speed wireless LANs can reach up
to 54 Mbps, which enable to support bandwidth
requirements for transmitting streaming video, and
streaming audio over wireless LANs. Hence, transmitting
streaming video, and streaming audio over Wireless
LANs will become an important trend in the future.
Quality of Service (QoS) is important for transmitting
streaming video, and streaming audio over Wireless
LANs. Throughput, end-to-end delay, delay jitter, and
loss rate should satisfy the requirements of streaming
video and streaming audio. However, Distributed
Coordination Function (DCF), a major media access
control (MAC) protocol in IEEE 802.11, does not support
quality of service. Recently, IEEE 802.11e draft is
released to provide service differentiation over Wireless
LANs, However, tuning parameters for IEEEE 802.11e is
still an open issue. Handling dynamic network conditions
is not considered in IEEE 802.11e draft. Also, throughput
in EDCF, a contention-based MAC in 802.11e, degrades
significantly under heavy network loads. Hence,
developing a new media access control protocol to
enhance IEEE 802.11e is an important issue.
To design an efficient medium access control protocol,
we must reduce overheads in DCF, which include (1)
collision and retransmission, and (2) waiting time.
Waiting time contains DCF inter-frame spacing (DIFS),
backoff interval, and deferring access of backoff timer.
Previous researches applied adaptive contention window
scheme to reduce overheads in the backoff interval.
However, the problem of deferring access of backoff
timer has not been addressed. In this paper, we extend
existing IEEE 802.11e media access control to enhance
performance for live video and audio.
We propose an adaptive two-stage backoff scheme to
reduce the overhead in deferring backoff timer. We
divide the backoff interval into non-blocking stage and
blocking stage. The ratio of the blocking stage in two-
stage backoff timer is dynamically adjusted based on
network loads.
We propose a cross-layer transmission control to
handle dynamic network conditions. When the
network under bad network condition or heavy
network loads, the proactive packet drop policy
eliminates unnecessary video and audio frame
retransmissions.
We devise new service differentiation mechanism for
802.11e networks. New service differentiation
parameters, blocking ratio in two-stage backoff counter,
and drop thresholds in transmission control can be
assigned to different traffic class.
The rest of this paper is organized as follows. Section 2
introduces media access control in IEEE 802.11 and
related work. Section 3 presents the adaptive two-stage
backoff scheme and transmission control scheme. Section
4 shows simulation results. We conclude in Section 5.
2. IEEE 802.11 Media Access Control (MAC)
and Related Work
Distributed Coordination Function (DCF), a mandatory
contention-based Media Access Control (MAC) protocol
where αdenote the smoothing factor in the range of [0,1],
and i refers to the i-th measuring period. Average
successful rate is an index for network conditions.
3.1.3 Transmission Control Policy at Error-prone Channel
The major idea behind the transmission control rule is to
drop frames under bad network conditions or heavy
network loads instead of deferring frame transmission.
The proposed scheme can increase both throughput and
loss rate, which is feasible for live video and audio. When
an active station senses the channel busy, it can enter the
backoff stage only if the station has high average
successful rate (rave.), small channel busy rate (rbusy ), and
low frame error rate (rerr ). Frames that are transmitted
under bad channel conditions or high network load can
cause corrupted or collision, such that the frame requires
to retransmit. Hence, a frame under high frame error rate
(rerr ) or high busy rate (rbusy ) is not allowed to enter the
backoff stage. Therefore, the transmission control rule can
be stated as follows.
if ( rbusy > Tbusy OR rerr > Terr ) then drop the frame
else if ( ravg < Ts) then drop the frame
else enter two-stage backoff procedure.
where Tbusy : the threshold of channel busy rate,
Terr : the threshold of error rate, and
Ts :the threshold of successfuk rate, and
0 < Tbusy , Terr, ,Ts < 1.
3.2 Adaptive Two-stage Backoff Counter
The goal of adaptive two-stage backoff scheme is to
reduce the overhead in freezing backoff counter. In
CSMA/CA, all backoff timers remain frozen when the
channel is sensed busy. This approach can avoid collision
but introduce extra overhead in deferring backoff timer.
On the other hand, in CSMA/CD, all backoff timers
continue to count down even when the channel is sensed
busy. Overhead in the deferring backoff timer disappears
at the expense of collisions. To enhance performance in
DCF, it is important to achieve balance between overhead
in deferring backoff and frame collision under different
network loads. Hence, in the proposed adaptive two-stage
backoff scheme, not all stations must freeze backoff timer
when the channel becomes busy. Only stations with small
backoff timer must freeze their timers, but the stations
with large backoff timer can continue to count down. The
proposed scheme can reduce overhead in deferring access
of backoff timer by overlapping packet transmission and
backoff procedure in different stations, but overhead in
Figure 1: two-stage back-off counter
packet collisions may increase if a large number of
stations have small backoff values. Consequently, the
number of stations with small backoff timer must be
limited.
Adaptive two-stage backoff scheme divides the backoff
interval into two stages: non-blocking stage and blocking
stage. When an active station senses channel busy, the
station chooses a random backoff value, and divides it
into non-blocking backoff value and blocking backoff
value. First, count down the non-blocking backoff value
without considering the channel status. When the non-
blocking backoff counter reaches zero, the station
continues to count down the blocking backoff value, but
its value becomes frozen, if the channel is sensed busy.
The ratio between non-blocking stage and blocking
stage are tuned for different network loads. We use
average successful transmission rate to estimate network
load. To filter out transient channel condition, the average
successful transmission rate is calculated by using
exponential weighted moving average of previous
successful rate
ri ave ← (1-w) * r
i
ave + w * r
i
suc
where ri ave : average successful transmission rate.
ri suc : current successful transmission rate.
Then, the initial value of the non-blocking stage is
calculated by
jjjb bkIth ,
where bkj : a random backoff value.
Afterwards, the length of non-blocking stage can be
adjusted adaptively by the packet transmission successful
rate as
i
avejjjb rbkIth , ,
3.3 Service Differentiation Mechanism
We devise to differentiate the channel access probability
among different traffic classes. The differentiation in
priority between different traffic classes is realized by
setting different values for channel access parameters.
The following are important parameters:
Ratio between blocking stage and non-blocking stage
in two-stage backoff counter
Drop thresholds in channel transmission control.
In two-stage backoff counter, the idea is to reduce the
deferring backoff counter for the higher traffic class. For
higher priority traffic station, we assign longer non-
blocking backoff stage.
In transmission control unit, drop thresholds such as
Tbusy, Terr and Ts are assigned according to the traffic
priority. The higher priority traffic can be assigned larger
threshold while lower priority traffic is assigned smaller
threshold. Hence, high priority traffic has higher
probability to win the channel.
In summary, the proposed new medium access control
protocol operates as follows.
1 When an active station, which has data to transmit,
senses the channel idle, it transmits the frame after a
short interval, called Distributed Inter-frame Space
(DIFS).
Stage1
From TC
Stage2 RTS/CTS/DATA/ACK
bk = rand[CW] bk = 0
Non-blocking
stage
Blocking stage RTS/CTS frame exchange
(optional) and DATA/ACK
frame exchange
Non-blocking
length
Blocking
length
and legacy EDCF with various active flows under fixed
BER.
Simulations with various channel’s BER
We have total 45 active flows are generated to connect
and link to base station. There are 3 different types of
traffic applications are generated, ON-OFF audio, CBR
video and FTP data which described in Section 3.1. The
ratio of these three types traffic is 1:1:1, it means each
type of traffics is given 15 active flows. The values of
channel BER which we simulated are 0, 5x10-5 and 1x10-4,
respectively.
(1) Throughput
Figure 2 and Figure 3 show that M-EDCF achieves 7.5%
to 10% more aggregate throughput compared with EDCF.
Figure 4 and Figure 5 show that M-EDCF achieve 8% to
23% more video traffic throughput compared with EDCF.
However, audio traffic does not make a significant
improvement, because the high-speed network bandwidth
(54 Mbps) is large enough to guarantee audio acquired
about 29kbps bandwidth. The improvement of M-EDCF
under uniform error channel is not outstanding, because
Ove ra l l Channe l Throughput
M-EDCF vs. EDCF
0
5000
10000
15000
20000
0 0.00005 0.0001
BER
Th
ro
ug
hp
ut
(k
bp
s)
M-EDCF
EDCF
Figure 2 Overall channel throughput for M-EDCF
and standard EDCF under channel error and error-
free condition.
Overa l l Channe l Throughput Improvement
M-EDCF vs. EDCF
0
2
4
6
8
10
12
0 0.00005 0.0001
BER
Im
pr
ov
em
en
tP
er
ce
nt
ag
e(
%
)
M-EDCF
Improvement
Figure 3 Overall channel throughput improvement
for M-EDCF and standard EDCF under channel error
and error-free condition
the transmission control unit does not work under uniform
error channel condition.
Throughput of the Audio and Video t ra ffic s
M-EDCF vs. EDCF
0
5000
10000
15000
20000
0 0.00005 0.0001
BER
Th
ro
ug
hp
ut
(k
bp
s)
M-EDCF
EDCF
M-EDCF
EDCF
Figure 4 Total audio and video traffics throughput for
M-EDCF and standard EDCF under channel error
and error-free condition
Audio and Vide o Tra ffic s Throughput
Improvement
M-EDCF vs. EDCF
-5
0
5
10
15
20
25
0 0.00005 0.0001
BER
Im
pr
ov
em
en
t
Pe
rc
en
ta
ge
(%
)
Audio
Video
Figure 5 Total audio and video traffics throughput
improvement for M-EDCF and standard EDCF under
channel error and error-free condition
(2) Mean Delay
Aud i o T raffi cs Mean Del ay
M-EDCF vs. EDCF
1.96
1.98
2.00
2.02
2.04
2.06
2.08
0 0.00005 0.0001
BER
D
el
ay
(m
s)
M-EDCF
EDCF
Figure 6 Audio Traffic mean delay for M-EDCF and
standard EDCF under channel error and error-free
condition
Figure 6 ~ Figure 7 show the mean delay for audio and
video traffic. Audio and video traffics in M-EDCF
出席國際學術會議心得報告
計畫編號 NSC-94-2213-E011-059
計畫名稱 分散式感測網路上前置密匙之研究
出國人員姓名
服務機關及職稱
陳郁堂台灣科技大學電子系副教授
會議時間地點 2006 年 8 月 14 日至 16 日假美國夏威夷州的壇香山市
會議名稱 IASTED IMA 2006 國際網際網路與多媒體系統與應用會議(2006 IASTEDInternational conference on Internet and Multimedia and Applications)
發表論文題目 Performance Enhancement and Service Differentiation for Live Video andAudio over IEEE 802.11e Networks
music representation: parameter and
non-parameter representation, filter banks,
ARMA models, SDFF-sound description
language (2) combine symbolic and
signaling processing such as problem of
score alignment using dynamic
programming, acoustic likelihood
2.與會心得
15 日 下 午 筆 者 所 發 表 論 文 主 題 為
“Performance Enhancement and Service
Differentiation for Live Video and
Audio over IEEE 802.11e Networks”
最近幾年，高速無線區域網路開始被廣泛
架設及應用在機場，車站，飯店和街角。
未來在無線區域網路所支援之多媒體的應
用漸漸變為可行。提供差異性服務及提升
輸出量在多媒體無線網路的領域是為重要
的研究議題。本論文延伸 IEEE 802.11e
原 有 的 分 散 式 存 取 控 制 模 式
(Distribution Coordination Function,
DCF)，針對多媒體視訊及語音服務，在有
干擾及錯誤發生(error-prone)的無線環
境下提供差異性服務及輸出量之提升。我
們提出 two-stage backoff counter 來減
少 backoff counter 被凍結(freeze)的負
荷(overhead)。此外，我們提出封包傳送
前的丟棄策略(drop policy)以減少視訊
及語音服務在無線環境不良時做不必要的
重傳封包之動作。我們利用二維馬可夫鍊
(two-dimensional markov chain)來分析
two-stage backoff 演算法之效能。除此
之外，我們透過 ns-2 電腦模擬來評估我們
所提出的演算法之網路效能。相較於原來
的 802.11e，我們所提出的方法在多媒體
的輸出量、延遲時間及差異性服務上可以
達到更好的效能。
本次與會有不少日本學者與公司，在
本研討會，以應用型研究居多，展示不少
prototype，令人印象深刻。
3 建議與結論
這次 IASTED IMA 2006 國際網際網路多媒
體系統與應用會議中，可感受到嵌入式系
統、多媒體、 行動計算技術的結合，確實
成為產業重要趨勢。其次，大陸學者在電
腦學術領域影響力與日俱增，許多大陸學
者獲得博士學位後，進入美國企業與頂尖
學府， Microsoft China Research 副總
裁 IEEE Fellow Ya-Qin Zhang 就是個例
子，也有不少從大陸與會清華交大學者，
這也顯示大陸的高等教育不斷進步。反觀
台灣學子，留美寥寥可數，在國內全職博
士生人數不足，成為台灣學術邁向國際的
隱憂。
in IEEE 802.11, uses carrier sense multiple access with
collision avoidance (CSMA/CA) mechanism to regulate
access wireless channel. When a sending station senses
the channel idle for a fixed period, called Distributed
Inter-frame Space (DIFS), it transmits the packet. If the
channel is sensed busy, the station chooses a random
backoff value from a predefined range, called Contention
Window (CW), and count down this value when channel
is sensed idle. If the channel is sensed busy in the middle
of the decrement, the count down value remains frozen
and resumes after the channel is sensed idle again. When
the backoff value reaches zero, the station transmits
packet, and waits for an acknowledgement (ACK). If the
acknowledgement is not received, the sending station
enters the backoff procedure with random value chosen
from a larger interval to retransmit the packet.
Based on legacy DCF, Enhanced DCF (EDCF), a
contention-based MAC in IEEE 802.11e, assigns different
Arbitration Inter-Frame Spaces (AIFS), Contention
Window (CW) and persistent factor (PF) to different
Traffic Categories (TCs) to provide service differentiation.
Basically, the smaller AIFS and shorter CW are assigned
to higher priority TCs. Higher priority TCs can share
shorter channel access delay and higher channel capacity.
In last decade, media access control for wireless LANs
is an active research issue. However, only close
researches on EDCF in IEEE 802.11e are presented as
follows. Two-level protection with guaranteed mechanism
for audio and video traffics have been proposed for
Distributed Admission Control (DAC) for EDCF [3]. The
QAP has to measure the wireless channel resource and
assigns the transmission budget for each ACs according to
their priorities via a beacon. The QoS-enhanced station
(QSTA) maintains the variables that recorded the
individual information of transmission budget utilization
for itself. The QAP needs to maintain the total resources
utilization information and updates information
periodically to reassign the resources for each ACs. Slow
Decrease (SD) [4], and Adaptive EDCF (AEDCF) [5]
extend the basic 802.11e EDCF scheme by dynamically
varying the contention window of each active class of
service. Xue Yang [6] proposes a novel packet scheduling
with busy tone in addition to the data channel, which
pipelines the contention resolution stage and packet
transmission stage. Adaptive Fair EDCF (AFEDCF) [7]
adapts the contention window and the back off
mechanism to improve node performance. The scheme
uses an adaptive fast backoff mechanism to speed up the
backoff countdown when the channel is idle.
3 Adatptive Two-stage Backoff Scheme
We extend 802.11e MAC protocol to increase system
throughput, handle dynamic network conditions and
provide new service differentiation mechanism. The
architecture of the new MAC includes a transmission
control unit to handle dynamic network conditions , a
two-stage backoff mechanism to reduce overheads in
defer backoff timer, and new service differentiation
mechanism.
3.1 Transmission Control Unit
The goal of transmission control is to address the problem
of dynamic network conditions and reduce unnecessary
re-transmission under bad channel condition. When an
active station senses channel busy, it performs
transmission control based on wireless channel condition
(WCC) and previous transmission experience (STE). If
the new frame is accepted by the transmission control, it
enters the two-stage backoff stages. Otherwise, the frame
is dropped or backlogged.
3.1.1 Wireless Channel Condition
We use channel busy rate and successful frame
transmission rate to represent wireless channel conditions.
Each active station estimates these parameters before the
packet transmits.
(1) Channel Busy Rate
In DCF/EDCF operation, each station can use the Clear
Channel Assessment (CCA) or Network Allocation
Vector (NAV) functions to detect the channel status. Each
station records the period to monitor the channel
condition (Tsense,) and the period of the channel sensed
busy ( Tbusy.). Hence, we estimate the channel busy rate as:
sense
busy
busy T
T
r 
Channel busy rate is used as an index of network loads.
(2) Frame Error Rate
We use the frame error rate, rerr to indicate channel
conditions. Each station records total number of error
frames caused by channel bit error (Perr )and total number
of transmitting frames during the period (Ptran). The
packet error rate can be calculated as :
tran
err
err P
P
r 
3.1.2 Station Transmission Experience (STE)
We consider the previous transmission experience of each
station before transmitting the packets. In this scheme,
each station estimates the current successful rate, rcur.
First, each service class in the station monitors network
interface and records the number of ACKs (Nack) and total
number of transmissions during the period (Nsent).
Supposing that each successful transmission can be
confirmed by the ACK from the destination station, the
number of ACKs is equal to the number of successful
transmissions during that period. Hence, the current
successful rates within the i-th period r’cur can be
calculated as
i
sent
i
ACKi
cur
N
N
r 
We use the exponential weighted moving average
function to obtain the average successful rate, rave :
i
cur
i
ave
i
ave rrr   )1(1 
2 If the channel is sensed busy, the station performs
transmission control. If it fails, drop frame or defer
transmitting, otherwise, enter two-stage backoff .
3 The station chooses a random backoff value, and
divides it into non-blocking backoff value and
blocking backoff value. Then, count down the non-
blocking backoff value without considering the
channel status.
4 When the non-blocking backoff counter reaches zero,
the station continues to count down the blocking
backoff value. However, the blocking backoff
counter value becomes frozen, if the channel is
sensed busy.
5 When the blocking backoff value reaches zero, the
station transmits the frame, and waits for an
acknowledgement.
6 If the acknowledgement is not received, the
transmitting station resme the two-stage backoff in
step 3, with random value chosen from a larger
interval, and starts all over again to resend the frame.
4. Simulation
In this section, we use NS-2 simulator to simulate our
model in various condition. We based on TKN 802.11e
EDCF model [9] and made some modifications. We have
implemented the transmission control and two-stage
backoff algorithms in NS-2 simulator. In our simulation,
we compared the performance of our proposal with the
standard EDCF scheme.
4.1 Simulation Environments
We use three different types of traffic to generate three
different requirement applications. The multimedia traffic
such as audio and video is delay-sensitive and the video
traffics require more bandwidth than the others. We can
see the description of traffic types in our simulations
model is shown in Table 1. The audio traffic is highest
priority and the ftp data traffic is lowest priority.
Table 1 The description of traffic types
Class Application Arrival
Period
(ms)
Packet
Size
(bytes)
Sending
Rate
(Kbps)
1 Audio 20 160 64
2 CBR
MPEG4
Video
2 800 3200
3 FTP 12 1500 1000
Traffic Types Descriptions
We use a two-state Markov process with talk-spurt (ON)
and silence state (OFF) to model the characteristic of a
typical phone conversation. The time period of these two
states are given as exponentially distributed with 0.4s
(burst time) and 0.6s (idle time), respectively. The
sending rate of silence state is 0 Kbps, and in talk-spurt
state, the sending rate is given as 64Kbps. Each packet
inter-arrival time is 20ms, and the packet size is given as
160bytes.
Table 2. MAC parameters for EDCF and our Model
Audio Video Data
Slot time (μs) 20 20 20
SIFS (μs) 10 10 10
AIFS (μs) 40 40 40
Propagation
delay (μs)
2 2 2
CWmin (slot) 31 15 63
CWmax (slot) 511 255 1023
Retry Limit 7 7 7
Persistence
Factor
2 2 2
Channel Data
Rate
54Mbps 54Mbps 54Mbps
Channel Bit
Error Rate
5x10-5 5x10-5 5x10-5
Table .3 Additional MAC parameters for our Model
Audio Video Data
Channel Busy
Threshold
0.9 0.8 0.6
Channel Error
Threshold
0.9 0.8 0.6
Successful Rate
Threshold
0.1 0.2 0.4
Blocking
Threshold
0.5 0.4 1.0
We simulate the high load constants bit rate (CBR)
with high quality MPEG-4 video traffic. The sending rate
of CBR MPEG-4 is given 3.2Mbps, and the inter-arrival
time is 2ms. The packet size of MPEG-4 video traffic is
given 800bytes. Both the audio and video traffic are
delay-sensitive and packet loss-tolerated, besides, the
protocol which used by them is UDP.
We use FTP application as our background data. The FTP
is generated above the TCP protocol, it is reliable and
connection oriented traffic. The sending rate of FTP is
given 1Mbps, the packet size and the packets inter-arrival
time are given 1500bytes and 12ms, respectively. The
characteristic of this background data traffic is delay-
tolerated.
The MAC parameters used in our simulations model
are shown in Table 2 and Table 3. We assigned the
shortest of CW length for video traffic, because video
traffics require more bandwidth. Furthermore, the
bandwidth of audio traffics will be guaranteed and will
not be crucified. In Table3,
4.2 Simulation Results
First, we simulated the performance of our model (M-
EDCF) and legacy EDCF with various channel bit error
rate. Then, we simulated the performance of M-EDCF
