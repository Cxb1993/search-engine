 2
ADC 及 DAC 之整合型可測試性設計研究 
“The Researches on Integrated Design-for-Testability of ADCs and DACs” 
計畫編號： NSC 97-2221-E-006 -255 
執行期間：97 年 8 月 1 日 至 98 年 7 月 31 日 
主持人：溫昀哲 成功大學航太工程系三等技術師兼助理教授 
 
一、中文摘要 
類比 -數位轉換器 (Analog-Digital Converter, 
ADC) 與 數 位 - 類 比 轉 換 器 (Digital-Analog 
Converter, DAC)為混合訊號晶片中重要元
件，在晶片內建之測試架構時，大多數由 DAC
來產生測試 ADC 時之類比測試訊號，此訊號
屬步階式，每一步階之電壓或電流值是固定
的，非一連續上升或下降之可變訊號，無法使
分析待測参數值達高解析度。本論文提出使用
改良式可產生高線性步階斜坡訊號 (Step 
Ramp Signal, SRS)之砲路設計及可同時測試
ADC 與 DAC 之整合型內建式自我測試
(Built-In Self-Test, BIST)架構，用以測試 ADC
與 DAC 之靜態參數，包括偏移誤差(Offset 
Error)、增益誤差(Gain Error)、整體非線性誤
差(Integral Non-linearity, INL)及差分非線性誤
差(Differential Non-linearity, DNL)。改良式步
階斜坡訊號產生器是將系統時脈 (System 
Clock)之頻率、工作週期(Duty Cycle)與振幅調
變後之訊號，經由積分器積分產生，系統時脈
同時用來驅動參考計數器，如此 SRS 與參考
計數器之數位輸出值可正確對應，即由數位輸
出值可精確估算出 SRS 電壓值。測試 ADC 時
以 SRS 為測試訊號，分析 ADC 之數位輸出與
參考計數器輸出值，即可測試 ADC 之靜態參
數值是否位於可接受範圍值內。測試 DAC 時
之測試訊號，由數位測試訊號產生器(Digital 
Test Pattern Generator, DTPG)產生，SRS 則成
為與 DAC 類比輸出比對之参考訊號，分析
DTPG 與參考計數器輸出值，可計算出 DAC
之靜態參數值。此 ADC 與 DAC 之整合型測
試架構之優點包括:共同使用一個測試與参考
訊號及測試結果分析電路 (Test Response 
Analyzer)、分析電路數位化、佔用晶片面積小
及測試時間短。 
 
英文摘要 
Analog-Digital Converter (ADC) and 
Digital-Analog Converter (DAC) are the most 
important components in mixed signal chips. For 
Build-In Self-Test designs, the DAC is uses as 
an analog signal generator to produce test signal 
for testing ADCs. This signal with steady 
voltage or current within each signal step can not 
meet for high resolution analyses of the 
parameters. This project proposes an integrated 
Built-In Self-Test Structure (BIST) shared for 
testing static parameters of ADCs and DACs. 
Static parameters include Offset Error, Gain 
Error, Integral Non-linearity (INL), and 
Differential Non-linearity (DNL). An improved 
analog signal (called Step Ramp Signal, SRS) is 
introduced. It is generated by an integrator with 
an input of regulated signal from adjusting the 
frequency, duty cycle and amplitude of system 
clock signal, The SRS can correctly match with 
a reference counter. This means that voltages of 
SRS can be accurately estimated by the 
counter’s output codes. For testing ADCs, SRS 
is applied as a test signal. The static parameters 
of ADCs can be extracted via analyzing the 
 4
技術來測試混合訊號系統中類比與RF元件性
能之測試方法[4]，此方法之測試硬體電路包
括測試訊號產生器與測試結果量測分析電
路。它將晶片原有電路進行重組，形成特定待
測電路與訊號產生電路。此方法優點為:簡化
硬體的需求、降低測試時、且不需使用昂貴的
自動化測試設備。缺點為需要有經較長時間運
算處理，來分析測試參數。Chang 提出一使用
Delta-Sigma Modulation 之內建訊號產生器
[5]，可適用於測試 ADC 之靜態參數 INL 及
DNL 與 動 態 參 數 包 括 Signal-to-Noise 
Ratio(SNR), Harmonic Distortion and 
Inter-Modulation distortion，它使用線性斜坡訊
號當測試訊號及使用統計方法來分析參數。測
試 DAC 靜態參數時，測試訊號與 DAC 輸出
分別連接至比較器之正及負輸入端，當上升之
斜坡訊號高於 DAC output 時，比較器輸出
high，而驅動控制電路產生 high 的 Trans 訊
號，然後 ADC 並輸出上數+1 之數位訊號至
DAC，使 DAC 輸出高一階之類比訊號，分析
DAC 兩個相鄰輸出間之對應 counter 數，即可
分析 DAC 之 INL 及 DNL 值。 
 
因 ADC 之輸入與輸出訊號型態分別為類比與
數位，DAC 訊號型態則與 ADC 正好相反。進
行元件測試時，需提供一高精確度測試訊號源
輸入待測元件，再由元件輸出訊號來分析出待
測參數值。若使用統計方法分析，需收集大量
輸出資料，故其輸入訊號屬於週期性。另一種
輸入訊號為非週期性訊號，如上升或下降斜坡
訊號。再將待測元件之輸出值與參考值進行比
對，分析分析出待測參數值。本研究團隊已研
發完成應用於測試 ADC 之步階斜坡訊號
(SRS)，此訊號可正確對應至計數器。本計畫
針對 SRS 產生器進行改良，以降低積分器電
容漏電效應之影響，以提高訊號解析度。並將
SRS 訊號也用來當作測試 DAC 時與 DAC 類
比輸出比對之參考訊號及完成一可共用於測
測 ADC 與 DAC 之 BIST 測試架構。 
 
三、研究方法及成果 
 
(一) 研究方法 
 
1. DAC 與 DAC 之輸入與輸出訊號特性 
研發 DAC 與 ADC 之測試方法，需針對待測
元件之輸出與輸入訊號之特性與轉移函數作
深入了解。DAC 之輸入端為數位訊號，輸出
端為類比訊號，ADC 則為正好反相。在研測
試架構中，需供給一個測試訊號至待測元件輸
入端，及一個與待測元件輸出訊號比對用之參
考訊號(Reference Signal)。測試訊號與參考訊
號應用於 DAC 為數位與類比訊號，使用於
ADC 時則為類比與數位訊號。 
 
2.  DAC 與 ADC 並用測試架構之條件 
設計可共用於 DAC 與 ADC 之測試架構，最
好能共用同一組(由類比與數位訊號組成)測試
源，類比訊號可用於測試 ADC 時，輸入 ADC
之測試訊號及測試 DAC 時與輸出值比對之參
考訊號，測試源中之數位訊號則當作與 ADC
數位輸出值比對之參考訊號及 DAC 之測試訊
號。此測試源含之類比與數位訊號必須能正確
對應(Correct response)，即兩者間可經由任可
一方，計算推估另一方對應值。 
 
3. 待測參數 
本計畫針對 DAC 與 ADC 之靜態參數(Offset 
Error, Gain Error , Integral Non-linearity (INL), 
Differential Non-linearity (DNL))研發測試架
構，以下以 DAC 為列來說明參數之定義: 
 
我們以 2-bit DAC 為例，來說明待測參數之定
義。假設 DAC 輸出訊號之電壓範圍為
-VR~+VR，則一 n-bit DAC 理想上相隣兩個輸
入 碼 相 對 於 輸 出 端 之 電 壓
 6
計 數 器 為 例 ， 其 輸 出 值 以
(Cn+m-1Cn+m-2,..Cm-1, …C0, C4C3..C0)表示，n 為
ADC 之解析度，m 為將 SRS 斜坡段電壓以數
位數字來表示時之解析度，m 值愈大，可表示
的解析度愈高，本例中每一斜坡段電壓為
)1( LSBV ，m=3 位元(C2C1C0)，C2=0 表示 SRS
電壓位於斜圾段，C2=1 則位於水平段，C1C0
用來表示斜圾段與水平段之數位化值解析
度，本例中使用 5-bit(n=2, m=3) 計數器，可表
示之電壓解析度為 )4/1( LSBV ，如圖二中所
示。在圖下端顯示出, 將計數器之初始值設為
5，來簡化測試分析電路之設計。 
 
 
0
1.25
2.5
3.75
5
3.75
1.25
2.5
0 1 2 32-bit
00
01
10
11
Digital
Output
Analog
Input
ADC Output
Step-ramp
Signal
Transfer
Curve of
2-bit ADC
5-bit 120
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
0
1
2
35
6
75-bit
Counter output
with initial
value 5
Counter
Output
8
9
10
11
12
13 4  
圖二  SRS 電壓與計數器輸出值之對應關係 
 
 
圖三 ADC 自我測試架構 
分析 INL 祗需比對 2-bit(D1D0)ADC 輸出值與
計數器之 2 位最高權重位元(Cn+m-1Cn+m-2, C4C3)
比對，如果相同，代表 ADCkINL 位於可接受
-1/2LSB~+1/2LSB 範圍， ADCkINL ， ADCoffsetV t, ADCgainV  
測試通過。INL 測試分析電路主要由 XOR 閘組
成，電路非常簡易。 ADCKKDNL 1, + 值則經由比對前一
次與本次 3 位最低權重位元(Cm-1..C0, C2C1C0)
值，即可偵測 DNL 值是否位於可接受
-1/2LSB~+1/2LSB 範圍內。ADC 之 BIST 測試架構
如圖三所示。 
 
(二)研發成果 
 
1.提升 SRS 訊號之精確度 
圖 四 為 差 動 運 算 轉 導 放 大 器  (Differential 
Operational Transconductive Amplifier, DOTA)與電
容器組成的積分器電路，圖中 v2與 v1分別連接至
RLK 訊號與對地電位。積分器輸出之步階斜坡訊
號與電路參數之關係可以下列方程式表示。 
dt
C
iV
T
out
out
srp ∫= 0   
iout=kn(VB-Vss)(v2-v1)=gm(v2-v1)= i2-i1 
其中 gm=Kn(VB -Vss)為積分器之電導(Conductance), 
Kn=unCox (W/L) , VB 是調整用偏壓，W/L 為電晶體
寬 長 比 ， un 為 電 子 流 動 率 (Mobility of the 
Electrons). 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
圖四 積分器電路 
 
在已發表之文獻中，ADC 測試架構中，若使
用連續上升斜坡(Up Ramp)與下降(Down Ramp) 
斜坡訊號，連續長時間積分，因電容漏電效應影
響到精確度，故線性度較低，且因連續積分要設
計補償電容漏電效應之電路較為困難。 
 
 
Vss
M14 M16
M13
M2M4M3M1
i1
VB
i2
M15
i1
i2
M11
M12
M10
M9
M7
M8M6
M5
Vdd
v2
Cout
Vsrp
iout=i2-i1
v1
 8
DAC
gainV ，在 DAC 類比輸出端轉態，Vcmp 產生脈
波時，可以經由比對 DAC 之 n-bit 計數器之數
位 測 試 訊 號 產 生 器 (Digital Test Pattern 
Generator, DTPG)輸出(Dn-1..D0)與 n+m-bit 參
考計數之 n 個最大有效位元(Cn+m-1~Cm),如果
相同，則參數值位於-1/2LSB~+1/2LSB 之間，
DAC
kINL , 
DAC
offsetV , 及 DACgainV 通過測試，我們以 2-bit 
DTPT 與 5-bit(n=2,m=3)參考計數器為例來說
明，如圖九所示，當 D1D0=C4C3 時，通過測試。 
 
 
圖九 INL 測試分析方法 
 
DAC
KKDNL 1, + 參數，則經由分析 n+m-bit 計數器 m
個最小有效位元(Cm-1~C0)之前一次與目前發
生轉態時之輸出值, 即可計算出是否位於有
效可接受之範圍-1/2LSB~+1/2LSB 內。 
 
 
圖十 DACDNL 2,1 測試分析方法 
 
如圖十所示，當前一次轉態 5-bit 計數器位於
01011~01111 間，目前 DAC 輸入端由 1Æ210
而輸出端類比轉態相對應於 5-bit 計數器位於
01000~01001 時則 DACDNL 2,1 ≤ 1/2LSB，圖十中
以 符號表示 DNL 值小於 1/2LSB，測試未通
過。 符號表示 DNL 值大於 1/2LSB，測試
未通過。圖十一則為以 X-Y 圗示表示 DACDNL 2,1
分析通過與未通過測試之示意圖。 
 
11
00
0
11
01
0
11
00
1
11
01
1
11
10
0
11
10
1
11
11
0
11
11
1
DACDNL 2,1
D
AC
IN
L 1
Pa
ss
DACINL2  
圖十一 以 X-Y 圗示表示 DACDNL 2,1 分析方法 
 
當 DACINL1 通過測試，且 DAC 發生突轉上升時
相對於 5-bit 計數器值為 01000(2)，本次 DACINL2
通過測試，且 DAC 發生突轉上升之相對應
5-bit 計數器值若位於 1810~2310 則 DACDNL 2.1 之
值大於 1/2LSB，未通過 DNL 測試，同理若前
一次突轉上升發生於 1010時則DAC輸出 DACV2  
時對應於計數器 1610 時，則 DACDNL 2.1 之值小於
1/2LSB，DNL 測試未通過。 
 
5. DAC 自我測試架構 
基於 SRS訊號與 n+m-bit 參考計數器建立正確
對應關係及 2005 年發表 ADC BIST 測試架
構，在使用同一組測試源及測試結果分析電路
之前提下，依據圖七之 DAC 測試架構方塊圖， 
並將主要功能之方塊加以展開，本計畫研發之
自我 DAC 測試架構，如圖十二所示。 
 
 10
表二 改善後之精確度提升率 
 
 
 
 
 
 
8. 測試電路實現 
 
(1) INL 計算分析電路 
 
 
圖十七 INL Gate Level 電路圖 
 
 
圖十八 INL 電路 Layout 圖 
 
以16-bit(D15..D0) DAC及19-bit(C18..C0)計數器
為例來說明，INL 測試經由比對 D15..D0 及
C18..C3 是否相同，來判斷 INL 值是否位於可接
受範圍-1/2LSB~+1/2LSB 間，如果相同則通過
INL 測試，反之，則 INL 未通過。圖十八為 INL
測試電路 Gate Level 線路圖，圖二十為 Layout
圖，晶片面積為 38um*93um，圖二十一為 DNL
測試 Gate Level 線路圖，圖二十一為 Layout
圖，晶片面積為 38um*123um。 
 
 
圖十九 DNL Gate Level 電路圖 
 
 
圖二十 DNL 電路 Layout 圖 
 
四、結論與討論 
 
本論文中提出以步階斜坡訊號(SRS)及可精確
與 SRS對應之 n+m-bit計數器為測試訊號源之
DAC 與 ADC 整合測試架構。SRS 除當作 ADC
之測試訊號，在測試 DAC 時則為與類比輸出
比對之參考訊號。因 SRS 電壓值可精確對應
至 n+m-bit 計數器，分析計數輸出值即可計算
參數值是否位於可接受範圍內。此 DAC 與
ADC 整合型測試架構中，共同使用測試訊號
源與測試結果分析電路，且不需使用額外接
腳，由外部提供 SRS 產生器輸入端電源，而
是將系統時脈訊號調變後當輸入電源。為了提
升 SRS 之線性度，將原表連接對地電位之差
動式積分器之 V2 輸入端，改以輸入 SRS 訊號
回授，再調變後之訊號，以補償水平段之漏電
效應，提升 SRS 訊號精確度，改善前與改善
後相比較，可提升 10%精確度。計畫中並針對
-0.000248~
-0.000268
0.000125~
0.000132
Vi-ng(k)-Vr-ng(k)Vi-ng(k)-Vr-ng(k)
-0.000425~
-0.000383
0.000139~
0.000161
ImprovedUnimproved Improved
Rate
42%~
30%
10%~
18%
 12
可供推廣之研發成果資料表 
;可申請專利  ;可技術移轉                                      日期：98 年 09 月 25 日 
國科會補助計畫 
計畫名稱：ADC 及 DAC 之整合型可測試性設計研究 
計畫主持人： 溫昀哲        
計畫編號：NSC 97-2221-E-006 -255             
學門領域：積體電路及系統設計 
技術/創作名稱 可使用於 ADC 及 DAC 之整合型自我測試架構 
發明人/創作人 溫昀哲 
技術說明 
一種使用步階斜坡訊號(Step Ramp Signal, SRS)，可同時測試 ADC
與 DAC 之整合型內建式自我測試(Built-In Self-Test, BIST)架構，用
以測試 ADC 與 DAC 之靜態參數，包括偏移誤差(Offset Error)、增
益誤差(Gain Error)、整體非線性誤差(Integral Non-linearity, INL)及
差分非線性誤差(Differential Non-linearity, DNL)。步階斜坡訊號產
生器是將系統時脈(System Clock)之頻率、工作週期(Duty Cycle)與
振幅調變後之訊號，經由積分器積分產生，系統時脈同時用來驅動
參考計數器，如此 SRS 與參考計數器之數位輸出值可正確對應，
即由數位輸出值可精確估算出 SRS 電壓值。測試 ADC 時以 SRS
為測試訊號，分析 ADC 之數位輸出與參考計數器輸出值，即可測
試 ADC 之靜態參數值是否位於可接受範圍值內。測試 DAC 時之
測試訊號，由數位測試訊號產生器(Digital Test Pattern Generator, 
DTPG)產生，SRS 則成為與 DAC 類比輸出比對之参考訊號，分析
DTPG 與參考計數器輸出值，可計算出 DAC 之靜態參數值。此 ADC
與DAC之整合型測試架構之優點包括:共同使用一個測試與参考訊
號及測試結果分析電路(Test Response Analyzer)、分析電路數位
化、佔用晶片面積小及測試時間短。 
 1
出  國  結  案  報  告  書 
 
參加 12th IEEE International Symposium on Design 
and Diagnostics of Electronic Circuits and Systems 
 
 
 
 
 
出 差 人：  溫  昀  哲     
出 國 期 間：98 年 4 月 11 日~4 月 22 日 
 
 
 
 
 
 
 
 
 
中 華 民 國 98 年 5 月 04 日 
          
 3
摘要 
 
IEEE International Symposium on Design and Diagnostics of Electronic Circuits and 
Systems(DDECS)今年為第12屆，DDECS為電子電路與系統之設計、測試與診斷領域之研發與
實務應用成果研究會，本年度之主要主題包括: ASIC/FPGA Design,  System-on-a-Chip (SoC), 
Bio-Inspired Hardware, Analog and Mixed-Signal Circuits, RF Circuit Design and Test, Design 
Verification/Validation, ATE Hardware and Software, Formal Methods in System Design, Built-in 
Self-Test (BIST), Hardware/Software Co-Design, Design for Testability and Diagnosis, IP-based 
Design, Defect/Fault Tolerance and Reliability, Memory and Processor Test, Reconfigurable 
Computing, MEMS Testing, Cost-Aware test, Power-Aware test等，本次投稿論文屬Design for 
Testability and Diagnosis主題，論文名稱為Test Scheme for Switched-Capacitor Circuits by Digital 
Analyses。 
 
以下簡述論文之重點內容與主要成果。交換電容(Switched Capacitor, SC)電路具有精確頻率
反應(Accurate Frequency Response)，高線性度(High linearity)與高動態範圍(High Dynamic 
Range)之特性，常被使用於積體電路設計上，而 SC 電路之轉換函數與電容比率值具相關性，
依電容比率值之變異量，可以測得電路之性能。本論文中提出一可精確量測交換電容電路電
容比率值方法，它使用一步階斜坡訊號(Step-Ramp Signal, SRS)當作測試訊號源，此訊號是由
一系統時脈(System Clock Pulse)經頻率、工作週期(Duty Cycle)及振幅(Amplitude)等調變後，
成為一調變時脈訊號(Regulated Clock Signal, RCS)，再連接積分器來積分產生，系統時脈同時
當作參考計數器之時脈訊號，如此可使 SRS 正確的與計數器同步對應。測試時將 SRS 輸入
SC 待測電路，輸出值經由一已知增益值的前置放大器放大，使得放大器之輸出值大於輸入待
測電路之電壓值，兩者電壓差值對應至一組計數器輸出值，經計算後可求出電容比率值。此
測試分析與計算電路可以數位電路來實現，所需晶片面積小，不需使用儀器，即可直接讀取
比率值。積分器由轉導放大器與電容器組成，具有高線性度，此架構適合以內建式自我測試
架構來實現。經 Spice 軟體模擬後，證明 SRS 之斜坡段電壓精確度位於±0.043%0 內。 
  
 5
案包括: 
1. 重組性電路(Reconfigurable circuit)。 
2. 彈性化設計(resilient circuit)以提高可靠度，可彈性調整以適應性能退化。 
 
4 月 16 日 Invited Talk 介紹可自適性調整之計算與通訊系統未來研究方向 
因 CMOS 技術進步，使電路性能有很大提升，內建自我測試架構及自適性調校變成必備需求，
目前電路被設計成可工作於最差狀態(Worst Case)的邊際，通訊系統中所含之解調器、訊號處
理器電路與演算法必須能適用於最差電路工作條件下，故設計與測試工程師，必須以
Aggressive Back-end Algorithms 來設計終端產品(End Application)。處理此問題唯一方法為，
設計可適合於工作環境及製造流程條件之電路及相關訊號處理演算法，因工作環境及製造流
程具有多變性，故需使各元件之電路具有可以提供自適性調整的功能，且具備省電、可最大
量產化與高可靠度之特性，此自適性(Self-Adaption)電路， 包含內建式自我測試和調整機制
電路，電路設計之重點與主要癥結(Key issue)在於如何之選定複雜電路系統之評估參數，及測
試、診斷與調校技術之研發。此技術在無需依賴外部儀器支援下，進行自適性調校。因各元
件電路參數彼此相互影響，自適性調校時需能正確分析各參數之重要性，必須作正確取捨依
據。演講者介紹三個例子: 
1. Intelligent Network Security System 
2. Distributed Swarm Robots 
3. Autonomous Vehicles 
此例子之自適性設計在於，自適性調整範圍包括工作環境、程序、溫度、電路性能退化
(degradation)等，系統中主要自適性調整之電路包括 LNA, Mixer, VCO, PA, DAC, ADC 等 
 
4 月 17 日之 Invited Talk 題目為 Challenges for Test and Design for Test， 討論因 IC 速度太
快，測試所需樣本數太多，ATE 測試速度太慢，測試設備與研究成本太高所面臨之問題。雖
然測試技術與設備進步，可稍微降低一些測試成本與改善測試效率，但是這些有關測試之上
述問題的陳述仍繼續維持著，主要原因是改進了測試效率，可能改變了設計的策略，策略的
改變可能及增加測試複雜度與設備的投資成本，造成 IC 成本與測試間之 Gap 仍然存在。另一
方面 ATE 設備價值昂貴，無法隨著測試策略更新而改變，無可避免的 IC 速度與複雜度增加，
仍需面對維持與使用舊一代 ATE 系統之速度無法匹配、IC 接腳增多與因晶片中類比電路元件
增加，ATE 分析軟體無法配合更新之技術問題。故在測試方面，面對 IC 複雜度增加與測試
 7
作者使用雙組 CPU，採將測試結果彼此相互比對策略，能有效偵測 CPU 的 Faults，此方
法能確保其中之一個 CPU 故障，系統仍使繼續安全工作。此方法缺點為雙 CPU 可能產生
共同的 faults，此 fault 同時影響到兩個 CPU，但確無法被偵測出來。在測試方法中，共
用同一訊號或資源測試(電路)，也有相關問題發生，無法偵測出共同的 Faults。實際上，
晶片中增設另一組電源供應是被禁止的，所以作者提出在共用同一電源系統(Shared Power)
與雙 CPU 架構中之有效測試方法，以偵測出共同 Faults。本論文完成將一個電源供應加入
Fault 後，來引起一些效應(Common Cause Effects)之實驗研究，實驗 Power 產生 Fault 後，
對 CPU 產生之效應有那些，當使用一般常見故障施加於 Power 後，在 Critical Path 會引起
時間之振盪(Timing Violations)，在兩個實例中相同 CPU 均有產生共同 Fault，利用此方法，
可以 Power 產生之 Faults 用於測試雙 CPU，無法由比對 CPU 間之輸出而發現之 Faults(因
兩者之輸出完全相同)，而找出 Power 訊號的 Faults。 
 
4. Effective BIST for Crosstalk Faults in Interconnects 
 
論文主要討論單晶片系統中 At-speed Testing of Crosstalk Faults，利用時脈(Test-per-Clock)測試
方法，來偵測 Crosstalk Faults，作者使用 2n 暫存器組成之 Linear Feedback Shift Register, 及
利用 Primitive Polynomial 來產生 Test Pattern，以測試 n 網路組成之互連網路，發現 Crosstalk 
Phenomenon 在 Gigahertz 電路之長距離互連線路(Interconnect)，大部份 Faults 常發生於正或負
(Glitch) 產生時。但是少部份 Crosstalk Fault 仍無法被偵測出來，分析原因為，在設計電路時
無法將製程變動因素及 Physical Defects 列入考慮，所以有關 Cross talk fault 測試方法之研究，
仍必須大家共同努力。 
 
另外，本人也廖加此研討會機會與與會學者交換類比電路設計與測試技術發展趨勢看法。
為了提昇類比與混合訊號電路之品質，在設計電路時就必須考慮如何測試 SOC 中所包含之元
件，應在設計階段即加入可測試之設計，針對每一個類比元件提出測試的解決方案，這此元
件主要包括：ADC, DAC, Filter, PPL, Mixer, VCO 電路等，總之，參加本次會議完成具體事頂
說明如下: 
 
1. 向參加會議學者專家說明本論文主要貢獻與成果。 
2. 與參與會議學者專家討論類比與混合訊號電路測試最新研發成果。 
 9
四、心得與建議 
 
最常使用於混合訊號單晶片中之電路元件為類比-數位轉換器(ADC)與數位-類比 (DAC)， 
Filter, PPL, Mixer, VCO 等此元件性能決定了整個晶片品質。故如何以最有效，最經濟與最省
時方法來驗証上述元件的性能, 是一個很重要的研究主題。未來將依參與此會議學者所提出
問題，繼續更深入來探討此元件之測試技術，希望研發更有效率測試方法。 
 
全文完 
 11
example, the voltages (0~0.125v) at the first cycle locates 
within the codes 0~710 of 5-bit counter. Four codes of 0~310 
and 4~710 are respectively placed on the ramp and flat pieces. 
The codes of 8~1510 are associated with the second cycle of 
0.125~0.25v with 0.125v voltage range. 
 
 
Figure 1. Circuit blocks of the step-ramp signal generator 
 
 SystemClock
Pulse
SLK
RLK
Frquency Regulation
Duty Cycle Regulation
Amplitude Regulation
Vsrp
Integration
 
Figure2. Output waveforms of circuit blocks in Figure 1 
 
 
Figure 3. The step-ramp signal and corresponded 5-bit counter output 
codes 
III. Measurement Method  
A. Representing SRS with Counter Output Codes 
The 5-bit counter output code can be represented by 
C4C3C2C1C0. The correspondent relationship between the SRS 
and 5-bit counter codes in binary is shown in Table 1. The 
most significant bits of C4C3 (n=2) of 5-bit codes specify 
distinct cycles. 00xxx2 represents the first cycle, while 01xxx2 
is for the second cycle. C2 bit in C2C1C0 (m=3) bits represents 
the distinct pieces at the cycle, C2=0 for the ramp piece and 
C2=1 for the flat piece. For example, xx0xx2 and xx1xx2 
specify the codes locating on ramp and flat pieces, 
respectively. The ramp piece and flat piece are divided into 
four sub-pieces identified by C1C0 (xxx00~xxx112) of m-1 
least significant bits. 
The voltage range of the first cycle is from 0 to 0.125v at the 
ramp piece matched with the codes 00000~000112 while 
constant voltage 0.125v at the flat piece is corresponded to 
00100~001112. At the ramp piece, a code represents 
0.125V/4= 0.03125V voltage range. For example, xxx002 
represents the first sub-piece of the ramp pieces and a quarter 
(0.03125v) of full voltage range of 0.125v, while xxx102 
denotes the third sub-piece and three quarters (75%) voltage 
range 0.09375v. 
 
TABLE 1. THE SUMMARY OF CORRESPONDENCES BETWEEN THE SRS AND 
COUNTER OUTPUT CODES IN FIGURE 3 
 
 
 
For example, if the voltage 0.125v at the first flat piece is 
inputted to the CUT, the output voltage of the preamplifier is 
0.39v which locates on the first sub-piece of the fourth ramp 
piece. Integration interval contains 3 full ramp pieces and one 
sub-piece. The voltage 0.39v closely equals the voltage 
(0.125v*3) of three full ramp pieces plus the voltage (0.125v* 
1/4) of a quarter of full ramp piece. We can represent 0.39v as 
3.25 (3+1/4) *0.125v. Similarly, The voltage of the SRS can 
be precisely estimated by the reference counter codes. The 
more the bits of the counter is designed, the higher resolution 
of the SRS is obtained. 
 
B. Calculation Block Diagram of Capacitance Ratio 
As shown in Figure 4, the integrator generates the SRS, 
Vsrp, which correctly corresponds to the n+m-bit reference 
counter. The stable voltage at the flat piece is sampled as a 
test stimulus, Vins, inputted to the CUT. When the gain of the 
CUT is larger than 1, the output voltage (Votest) of the CUT is 
larger than Vins. The ratios (gains, Gij=Ci/Cj) of reconfigured 
SC simple circuits can be obtained through analyzing the 
counter output codes matched with the voltage range from Vins 
to Votest. Votest is determined by a comparator (Comp1) through 
the comparison between Vsrp and Votest. In this structure, the 
ratios (gain, Gij) are only related to the counter output codes. 
 
When the ratio, Gij, of the CUT is less than 1, a 
preamplifier is placed behind the CUT. The gain, Gain, of the 
preamplifier is decided according to the magnitude of Gij to 
meet the criterion of Gij * Gain >1. The minimal magnitude of 
Gain is 2 (discussed in later Section). If Votest is certainly larger 
than Vins, long integration time and high test cost will occur. 
Large magnitude of Gij * Gain is limited. 
 
 13
 
Figure 8. The example of ratio calculation 
 
If the Voam in Figure 8 becomes 0.21v, the corresponded 
counter code is 010102. After removing C2 bit and adding 
fraction point between C3 and C1 bits, the number converts to 
01.102. 01.102  plus 00.012  equals 01.112. Gtotal= Gij*Gain 
becomes  01.112=1.7510. After left shifting fraction point of 
Gtotal 3 bit, the ratio Gij =0.001112=0.2187510 is gotten. The 
real value of Gij is 0.21v/0.125v*8=0.2110. The deviation 
exists between real value of 0.2110 and measured value 
0.2187510. This problem can be overcome by increasing the 
bit number of the counter and Gain value to represent Gij with 
higher resolution. 
 
In the following, the algorithm for ratio calculation is 
described.  
 
1. Sample the SRS at the first sub-piece of the first flat 
piece and input to the CUT; 
2. Set k=1; 
3. Set the gain (Gain) of the preamplifier to Gain=2k; 
4. If Voam > Vins, goes to step 5. otherwise, set k=k+1 and 
goes to step 3; 
5. If the voltage of the SRS equals Voam. Recording the 
corresponded reference n+m-bit (Cn+m-1…CmCm-1Cm-2..C0) 
counter output code and k; 
6. Remove Cm-1 bit to become Cn+m-1…CmCm-2..C0 and insert 
fraction point between Cm andCm-2; 
7. Left shift the fraction point k bits, the ratio Gij is obtained.  
 
V. Simulation Results 
For the demonstrations of the accuracy of the step-ramp stimulus and 
the correct correspondence between the step-ramp stimulus and the 
counter, the Ispice simulation is done. We assume the SC circuit is 
operated on 3.3V and the sample frequency of 0.25MHz is designed 
for test mode. An external system clock pulse with the frequency of 
4MHz is supplied to the test structure. It passes through the Control 
Circuit for the regulations of frequency, duty cycle and amplitude to 
become the regulated clock signal with the frequency and amplitude 
of 0.25MHz and 29.23mV.  
. The capacitance of the capacitor at the integrator is 
10pF. The preamplifier is designed to have maximum gains of 
256, so 256 cycles of RCS are integrated. Each cycle contains 
a ramp piece and flat piece. Figure 9 is the expansion view of 
1~4th cycles, while Figure 10 displays the expansion view of 
253~256 cycles. Table 3 gives the summary of the voltages at 
the flat pieces of 1~4 and 253~256 cycles. The differences 
between the simulation results and ideal voltages are analyzed. 
The accuracy is within 0.027~0.036%. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Figure 9. The expansion view of 1~4 cycles. 
 
 
 
 
 
 
 
 
 
 
 
Figure 10. The expansion view of 253~256 cycles. 
 
TABLE II. THE COMPARISON BETWEEN IDEAL VOLTAGES AND SIMULATION 
RESULTS OF THE SRS  
 
 
 
 
 
 
 
 
 
VI. Conclusions 
Based on a novel step-ramp test stimulus, a method for 
measuring the capacitance ratios of capacitor circuits is 
introduced in this paper. A system clock pulse is used to trig a 
counter and regulated its frequency, duty cycle and amplitude 
as an input of integrator which outputs the step-ramp stimulus 
(SRS). The correct synchronization between SRS and the 
counter output codes is achieved.  On the other hand, 
Extended various duty cycles in different time intervals for 
integrations generates diversely fewer voltages to compensate 
capacitor leakage at the integrator. This specific design 
effectively improves the accuracy of the set-ramp signal. 
Without fine calibrations, the represented resolutions of the 
step-ramp stimulus can be easily increased by the more bit 
number design of the reference counter. The higher 
represented resolution is designed, the higher resolution of the 
2.00u 6.00u 10.0u 14.0u 18.0u
time in seconds
0
10.0m
20.0m
30.0m
40.0m
SR
S 
in
 v
ol
ts
9.37514m
18.74372m
28.12538m
37.50051m
SR
S 
in
 v
ol
ts
1 9.37514m         9.27514m              0                        
2 18.74372m       18.75028m       0.00656m     0.035%    
3        28.12538m       28.12542m       0.01010m     0.035%    
4 37.50051m       37.50056m       0.01015m     0.027%    
No.         Simu.                Idea                diff.        Accuracy
253 2.46637        2.467104        0.00077     0.031%
254 2.47608        2.476855        0.00077     0.031%
255     2.48579        2.486607        0.00082     0.033%
256     2.49546        2.496358       0.00089       0.036%
1
1.014m
1.018m
1.022m
1.026m
1.030m
time in seconds
2.460
2.470
2.480
2.490
2.500
SR
S
in
 v
ol
ts
2.46637
2.47608
2.48579
2.49546
SR
S
in
 v
ol
ts
