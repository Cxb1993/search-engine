開發完成之監控與故障診斷法則，建構完成一套低
成本且容易裝設之嵌入式的冷凍空調設備之故障
診斷系統。 
 
三、研究方法 
建立其故障診斷系統，必須運用資料探勘進行各
項數據分析，並彙整各參考數據完成故障診斷模型，
再套用至故障診斷系統。而此分析過程可統稱為資料
庫之資識發掘（Knowledge Discovery in Database，簡稱
KDD）。此過程分為六大步驟：資料收集、資料前置處
理、資料倉儲建立、資料探勘、樣式評估與結果展示
[3]，如圖 1： 
 
       
圖 1 知識發掘過程示意圖 
 
其中，知識發掘過程中的資料探勘代表著應用資
料分類法進行資料分析。本研究建立模型之理論基礎
來自於決策樹與 k-平均法兩種資料分類法，然而兩者
法則之間的概念並不相同，以下進行決策樹與 k-平均
法的介紹： 
1. 決策樹（Decision Tree）[3-6]： 
監督式學習法（supervised classification）的代表之
一，此分類法利用已知的結果，建立分類架構。其分
類的順序是以資訊理論測量，判斷適當分類屬性進行
二分法分類，如圖 2 所示。 
 
圖 2 決策樹樹狀結構 
 
本計畫採用決策樹 C5.0（ID3）建立模型，其分類
原理係以資訊獲利（information gain）來進行對屬性的
測量。而分類的觀念即是資訊量越大，亂度越大，亦
無法呈現較肯定的分類結果；資訊量越小，亂度越小，
則可呈現較肯定的分類結果。下式(1)為資訊獲利公式： 
 
( ) ( ) ( )
( )
( ) ( )
2 2
1
,                                                      (1)
log log , if , 0
,
0, if ,  only one=0                                       
,
v
i i
i
Gain A I p n E A
p p n n p n
p n p n p n p nI p n
p n
p nE A I p n
p n
=
= −

− − ≠
+ + + += 


+
=
+
∑
其中,
 
 
1
 postitive instance ,
negative instance ,  ;
              
              
              , ...,
              
              
v
i
P
N
A
X
X X
p X n X
p X
=
=
=
=
=
= =
=
　   　　
， 正例;
反例
某種屬性;
屬性測試前的樣本集合;
屬性測試後的樣本子集合;
中正例的個數; 中反例的個數;
中正例的
其中
in X= 。個數; 中反例的個數
 
 
由式(1)可知，資訊獲利的定義為資訊獲利等於「測
試前的資訊量」減去「測試後的資訊量」，分類屬性的
選擇就是選擇測試後資訊量越小的屬性或是資訊獲利
最大的屬性為主。 
 
2. k-平均法（k-means Method）[3-4]： 
非監督式學習法（unsupervised classification）代表
之一，進行分類不需考慮分類結果。其優點是不需大
量的輸出節點，可大幅減少計算的複雜度，而缺點則
執行分類時，卻常因初始的群集中心點的選取不同，
影響其分類效能，降低分類可靠度。 
式(2)為 k-平均法距離總偏移值公式，假設資料集
合中有 n 個資料點，目的是要將 n 個資料點分配成 k
個互不交集的群集，企圖使每個資料點距離它所屬的
群集中心的距離偏移值都是相同。 
2
1
;                                                 (2)i
i
k
x S
i i
i x S i
x
E x m m
S
∈
= ∈
= − =
∑
∑∑
r
 
 
   
      
         | |
i i
i i
E
x
m S
S S
=
=
=
=
，
　　　
　　
其中 距離總偏移值;
一個資料點;
群集 的質量中心;
群集 中所涵蓋的資料點數量。
 
圖 3 為 k-平均法執行分類的步驟，按照順序 1~6
敘述之，此範例取五筆資料點，並設置 k 分群值為 2。 
 
 
此模型優勢在於感測器的數量大幅減少，其缺點
在於診斷的依據為定數。若環境溫度改變，則影響診
斷的正確性。因此，模型必須使用其優點，改善其缺
點。 
 
3. 修改資料擷取平台： 
重新規劃資料擷取平台，使用 4 組溫度感測晶片
（TMP275）與霍爾元件（LA-150P）搭配可程式系統
晶片（Programmable System on Chip, PSoC）建立系統，
並以串列通訊（RS-232）傳送數據至電腦端儲存，如
圖 8。 
 
 
圖 9 嵌入式資料擷取平台 
 
4. 資料分析： 
以修改的資料擷取平台，重新擷取故障資料並且
新增更多故障項目。將故障增加嚴重性的分別與複合
性故障的類別，如圖 9 所示。 
 
 
圖 9 k-Mean 多項狀態之溫度數據化簡表 
然而，由圖 10 得知單項故障與複合性故障的分
別，無法輕易分類出其差別。因此，將感測器各項溫
度數據分開進行資料分析，察看其各狀態之差別，如
圖 11、12。 
 
 
圖 11 壓縮機出口溫度對照圖 
 
 
圖 12 壓縮機入口溫度對照圖 
 
根據壓縮機出口溫度對照圖，明顯可看出冷氣機
冷媒洩漏時，壓縮機出口溫度是不斷提高的，且其餘
狀態則與冷氣機正常無分別；而從壓縮機入口溫度對
照圖，可看出抽風口阻塞、蒸發器阻塞、蒸發器嚴重
阻塞（同種類型），其壓縮機入口溫度則不斷降低；冷
卻水阻塞均以出入口水溫差值，約 4～5 度左右，是一
種經驗值。 
 
5. 建立故障診斷模型： 
因單一感測項目即可判斷其單一故障，本研究稱
之為特徵因子，再將其因子進行排列網狀組合，完成
網狀式故障診斷模型的建立。其中，特徵因子必須利
用分界值作為正確與錯誤的評斷點，如圖 13 所示。 
 
 
圖 13 網狀故障診斷模型 
另外，此模型的網狀架構可將各單一故障進行組
合，成為複合性故障狀態，並且擴充容易。而特徵因
子的分界值，可設立環境溫度感測器，判斷其冷氣機
與環境狀態進行調整，增加故障診斷的準確性，如圖
14。 
 圖 18 蒸發器與冷卻水阻塞之診斷主頁（壓縮機出口溫
度） 
 
 
圖 22 蒸發器與冷卻水阻塞之嵌入式系統圖 
 
五、 結論 
本計畫提出冷凍與空調故障診斷系統建構的方
法，以決策樹發現過去常用來判定冷氣機是否故障的
壓力感測器，可由溫度感測器取代之，並瞭解若要建
立診斷系統只需在壓縮機出入口、冷卻水出入口、吸
風口與電源端設置溫度感測器即可。另外，找出冷氣
機故障的特徵，建立出可微調型的故障診斷模型，僅
需自動微調即可適應其他相同類型的空調設備。將診
斷模型完全撰寫至可程式系統晶片（PSoC）搭配溫度
感測器（TMP275），使用一台電腦同時讀取多台診斷
系統，達到低成本、高效率、可擴充、可通用。 
[參考文獻] 
 
[1] 顏義和, “冷凍設備之網際網路監控與維護系統研
製 ” , 國 立 虎 尾 科 技 大 學 , 計 畫 編 號 ：
94-2622-E-150-023-CC3, 2005. 
[2] 賴威宇、顏義和、陳俊任（2008）, “資料探勘運
用於冷凍空調故障診斷系統”, 第二十九屆電力研
討會. 
[3] 曾新穆、李建億（2003）, “資料探勘”, （譯自
Richard J. Roiger & Michael W. Geatz, Data Mining）, 
臺灣培生教育出版. 
[4] 陳文華（1999）, “資料探挖-找出隱藏在資料庫中
的寶藏”, 資訊傳真周刊, 256 期, 1997 年 8 月, 
pp.24. 
[5] U.Fayyad, G.Piatetsky-Shapiro, and P. Smyth, “From 
Data Mining to Knowledge Discovery In Database,” AI 
Magazine, vol.17, pp.37-54, 1996. 
[6] L.Brieman, J.Friedman, R. Olshen, and C. Stone, 
“Classification and Regression Trees,” Wadsworth 
International Group, Monterey, CA, 1984. 
 
98年度專題研究計畫研究成果彙整表 
計畫主持人：顏義和 計畫編號：98-2622-E-150-066-CC3 
計畫名稱：嵌入式冷凍空調故障診斷系統之研製 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 1 1 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 1 1 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
 
