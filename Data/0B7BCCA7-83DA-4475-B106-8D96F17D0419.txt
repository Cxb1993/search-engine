摘要 
智慧型運輸系統(ITS)是近年一項備受矚目的重要議題，其藉由應用車輛無
線網路，提供即時的資訊而達到增進運輸系統的安全，效率與舒適性。然而舊有
的 IEEE 802.11 系列標準已不適用於車輛無線網路此一新興的網路型態，因此
IEEE 訂定了 802.11p/1609 標準，使其能符合智慧型運輸系統的相關應用。由於
智慧型運輸系統與車用無線網路在商業發展及學術研究上的巨大潛力，有越來越
多團隊投入此一研究領域。但目前市場上並沒有任何產品可供實驗進行研究，因
此開發一個能模擬此類網路的軟體網路模擬器是非常重要的。 
 
本計畫第一年度已完整實作 IEEE 802.11a/p 於 NCTUns 上，第二年度則成功
實作 IEEE 1609 於 NCTUns 上，並與第一年的結果整合為一套完整的車用無線網
路模擬系統，在第三年度我們成功開發了道路車流的模擬，並與前兩年所開發的
網路模擬結合，使得 NCTUns 模擬器兼具網路與車流路網模擬的功能，之後我
們在這個平台上陸續做了智慧型紅綠燈控制以及縮短緊急救護車輛到達事故現
場時間的研究，都有很不錯的研究成果，藉由這些研究的產出，我們證實了
NCTUns 網路與車流模擬器已經足夠進行 ITS 的相關研究。 
 
  
成車流的舒緩。這一系列的相關研究將對智慧型運輸系統這領域上有巨大的貢
獻。 
3.道路網路設計實作與成果 
 在我們開發的道路網路中，我們新增了三個新的元件，如圖 1所示，從左而
右分別是道路、十字路口、擴充道路。 
 
 
圖 1.道路元件 
 
我們用這三個元件建構了一個路網範例，如圖 2所示。 
 
圖 2.道路建構範例 
 
等道路路網建構完成後，在模擬開始前，我們會先將這個路網以特定的資料結構
儲存成.sim 檔，之後模擬引擎再從.sim檔中把檔案讀取出來進行模擬。 
 
 接下來我們介紹一下路網.sim檔的資料結構，在 NCTUns的模擬引擎中路網
的結構與 GUI中的分類不同，在模擬引擎中的一條道路是由許多塊區塊所組成的，
我們將路網分類的資料整理成表 1。 
 
表 1.路網組成元件 
路網組成元件 說明 
Road Block 
路網組成的最小元件，由四個點座標形成的一個四
方形。 
Lane Block 許多的 Road Block 會形成一條 Lane，Lane 裡面會
道路 
十字路口 
擴充道路 
 
 
 表 3 是 Lane 的資料結構，RoadBlockID 是一個 vector 串貣構成這條 Lane
的所有 RoadBlock。 
 
表 4.Road Edge的資料結構 
 
 
 表 4 是 Edge 的資料結構，EID 代表的是這條 Edge 的唯一 ID，NumOfLane
是這指這條 Edge 由幾條 Lane 組成，NumOfNode 是指這條 Edge 與幾個十字路口
連接，*NID 指向一個 Intersection 陣列，陣列大小與 NumOfNode 相同，L_Number
指的是左線道的數量，R_Number 指的是右線道的數量，length 是指這條 Edge
的長度，*lane 指向一個 RoadLane 陣列，陣列大小與 NumOfLane 相同。 
 
表 5.Intersection 的資料結構 
 
 
 表 5 是 Intersection 的資料結構，Nid 代表的是這個 Intersection 的唯一 ID，
NumOfEdges 指的是這個 Intersection 連接的 Edge 數，*EID 指向一個 RoadEdge
陣列，陣列大小與 NumOfEdges 相同，*direction 與*EID 相同，指的是每條 Edge
的方向。 
 
Intersection 
int Nid; 
int NumOfEdges; 
int *EID; 
double *direction; 
 
RoadEdge 
int EID; 
int NumOfLane; 
int NumOfNode; 
int *NID; 
int L_Number; 
int R_Number; 
double length; 
RoadLane *lane; 
RoadLane 
vector<RoadBlock> RoadBlockID; 
4. 真實世界車流運動行為設計實作與成果 
在車流的開發上，我們新增了兩種不同種類的車子，如圖 5所示，由左而右
分別是，Agent Mode 的車子以及 Module Mode 的車子。 
 
 
圖 5.車輛元件 
 
 這兩種不同種類的車子是為了不同的用途而設計的，Agent Mode 的車子在
模擬進行的時候，模擬引擎會 fork 出新的程序去控制這輛車子的行為，而我們
可以在這類型的車輛上運行應用程式，來達到車輛間的互動或訊息的傳遞。而
Module Mode的車子是由模擬引擎統一控管的車子，其目的是以較少的資源運作
大量的車子來擔任背景車流，這類型的車輛可以進行數千台的車輛行為模擬。 
 
 以上兩種車輛除了控制角色不同之外，其餘的行為是大同小異。我們可以為
車輛配置車子的性能，車輛的性能有最大車速、最大加速度以及最大減速度，而
這些性能會寫在 Car Profile 裡面，然後我們可以隨機或指定分配每台車輛所擁
有的 Car Profile，其設定如圖 6所示。 
 
 
圖 6.Car Profile 的設定 
 
 設定完車輛的性能後，車輛就會依據這些性能模擬車輛的運動行為，在前方
沒車的時候會依照最大加速度來加速、前方有車輛或遇到紅燈的時候，會減速，
 在我們模擬器的設定中，可以為三種不同熱門程度的 Landmark 設定不同的
權重，之後隨機分配車輛與 Landmark 的對應時，就會依照權重隨機分配一定比
例的車輛到所屬的 Landmark，之後這些車就會朝向所指定的 Landmark 前進，當
然也可以為某幾台車輛指定配置其所屬的 Landmark，如圖 8所示。 
 
接下來我們來看佈署 Landmark 對車流的行進路線能有什麼樣的影響，首先
我們先測詴不使用 Landmark，然後讓車輛到達路口就隨機轉彎，模擬 400 秒後
看車輛的分佈情形，以及我們另外佈置 Landmark 的兩個案例，同樣模擬 400 秒
後，看車輛的分佈情形有哪些差異。 
 
圖 9.100台車輛初始佈署情形 
 
看圖 9，這個地圖是使用台北市文山區路網的其中一個小片段，地圖大小是
700 公尺乘 700 公尺，我們在上面隨機分佈了 100 輛車，目前我們還沒有放置
Landmark，所以車輛到達路口是隨機轉彎，圖 10是模擬 400秒後的結果。 
 
圖 13.4 Landmark模擬 400秒後的結果 圖 14.10 Landmark模擬 400 秒後的結果 
 
5.後續研究 - 智慧型交通號誌燈控制 
 在開發出路網以及真實的車流模型後，我們就藉由這平台陸續做了一些研究，
其中一篇是智慧型交通號誌燈控制的研究。 
 
5.1 摘要 
在現今各大城市中，壅塞的交通一直是亟欲解決的問題，而隨著資訊產
業的快速發展，智慧型交通運輸的研究漸趨熱門，其中交通號誌燈的控制是
智慧型交通運輸中重要的一環。交通號誌燈控制的研究分為兩個種類，一種
是固定時間式的交通號誌燈控制，也就是事先幫每個交通號誌燈安排好紅綠
燈的循環周期，藉此達到疏通交通阻塞的目的。而另一種是變動時間式的交
通號誌燈控制，藉由動態的評估車況來配給紅綠燈的時間，以應付隨時變化
的交通狀況。 
 
在本論文的研究中，我們選擇研究變動時間式的交通號誌控制，我們會
設計不同的車流拓樸 (traffic pattern)、不同的時間間隔、以及不同的車
流資訊蒐集程度，來深入的研究變動時間式的交通號誌控制演算法的運作情
形，並觀察演算法在不同情境下的運作情形，然後提出改善的建議，透過模
擬案例實驗證實，我們的改良確實有效。 
 
5.2 智慧型控制演算法改良 
我們將智慧型交通號誌燈的演算法實做到 NCTUns 模擬器，並且研究各
種拓樸的模擬數據後，我們發現原有的智慧型交通號誌控制演算法有幾個部
分還可以繼續改良。分別說明如下： 
 
5.2.1固定時間的探查車況改成動態時間 
在原本的演算法中會每隔一個固定的時間間隔去探查現在道路的車況
如何，然後視車況配置紅燈與綠燈，因為是固定的時間間隔，所以每次配置
完紅綠燈後，必頇等待下一次的車況探查才有可能改變紅綠燈，但車流的狀
況並不對等，並且差異很大，如果某條路上只有少數一兩台車要通過，卻配
置給他 20~30秒的綠燈時間，此時如果另外一條道路上有車輛到來，會增加
額外的等候時間。 
 
所以在我們改良的演算法中，我們並不把探查車況的時間固定住，我們
會先評估道路上是否有衝突的車流在競爭紅綠燈，如果只有單向的車流，那
我們可以給予一段比較長的綠燈時間，然後等候下一次探查車況的時間，如
應的綠燈時間，讓這一批車通過十字路口後，馬上把綠燈還給主要幹道的大
批車流，如此一來可以在顧及公平性的同時又不至於拖慢多數車輛的行車時
間。 
5.3模擬設計與結果分析 
 由於篇幅的關係，我們這邊會提到論文中的兩個模擬案例，分別是模擬案例
C以及模擬案例 D，以下將詳細介紹。 
 
5.3.1模擬設計 C 
模擬設計 C 是為了比較我們改良過後的演算法與原設計演算法在效能上的
差異，關於模擬設計 C 的設計目的與說明請見表 6與表 7： 
 
表 6.模擬設計 C的設計目的與說明 
模擬設計編號 C 
設計目的 
為了比較我們改良過後的演算法與原設計演算法在
效能上的差異。 
模擬設計說明 
我們改良的演算法是使用動態時間間隔，與原本設計
的固定時間間隔的演算法有設計上的差異，我們想知
道這兩種演算法對於行車延遲的改善有多少的效果。 
 
表 7.模擬設計 C的模擬參數 
組別 演算法 
時間間隔  
(最短綠燈時間) 
車流資
訊蒐集 
車流拓樸 
0 
不使用智慧型
控制演算法 
每 40 秒變換一次燈號 100 % 
拓樸
A,B,C 
1 
原智慧型控制
演算法 
每 15 秒評估一次車況 100 % 
拓樸
A,B,C 
2 
改良後智慧型
控制演算法 
動態時間評估車況 100 % 
拓樸
A,B,C 
 
5.3.2模擬設計 D 
模擬設計 D 是想研究，在車流資訊蒐集不完整的情況下，依照車況來變動
交通號誌燈的演算法是否能正常運作，以及運作的效能如何，關於模擬設計 D
的設計說明與目的請見表 8與表 9： 
 
表 8.模擬設計 D的設計目的與說明 
模擬設計編號 D 
設計目的 研究在車流資訊蒐集不完整的情況下，依照車況來變
所以整體的效能表現上很難提升，不過我們可以提升演算法的公平性，在圖 17
中我們可以看到，改良過的演算法能有效的減少被犧牲車輛的延遲時間，因而提
升演算法的公平性，所以在公平性的表現上，改良過的演算法的確比較好。 
 
圖 17.210 台車的車輛平均花費時間  圖 18.210台車的車輛延遲時間總和 
 
5.3.4模擬設計 D之結果分析 
 在模擬設計 D中，我們希望比較原始演算法以及改良過的演算法在車流資訊
蒐集不齊全的情況下的效能表現。由圖 19圖 19中可知，原始演算法在車輛資訊
低於 40%的環境下，效能表現會急速下降，到了只剩 20%的環境時，甚至比不使
用演算法的交通號誌控制還差，但我們改良過的演算法，卻能夠在車輛資訊只掌
握 20%的環境下，還保有一定程度的運作效能，這是因為我們改良過的演算法是
根據車輛的數量配給秒數，所以當車輛資訊掌握不足的時候，我們會低估現有的
車輛數而給予較少的綠燈時間，但也因此可以快速的進入下一次的判定，所以如
果判斷錯誤，就能很快的在下一次的判定中修正回來。 
 
 
圖 19.70台車的車輛平均花費時間   圖 20.210台車的車輛平均花費時間 
 
5.4結論 
在這個資訊產業迅速發展的時代，智慧型交通運輸系統也迅速發展，智
慧型的交通號誌燈控制也是相當重要的一環，交通號誌控制又分為固定時間
式的交通號誌控制與動態時間式的交通號誌控制。 
 
在本論文中，我們選擇動態時間式的交通號誌控制進行深入的研究與分
6.後續研究 - 利用IEEE802.11p/1609技術來縮短緊急車輛
到達事故地點的時間 
在開發出路網以及真實的車流模型後，我們就藉由這平台做的另外一項研究
是利用 IEEE802.11p/1609 技術來縮短緊急車輛到達事故地點的時間，以下將詳
細介紹。 
 
6.1摘要 
 事故救援對拯救生命和緊急救護是一個重要的論題。事故救援中的一項議題
就是如何縮短緊急車輛 (例如救護車、消防車、警車) 到達事故現場的時間使得
救護作業可以順利的進行。舉例來說，救護車應盡快地到達車禍現場，如此一來
傷患才能盡早地被照顧到。然而，在大都市的區域裡，塞車可能使得緊急車輛難
以快速地到達事故現場。這是因為在道路上的車輛有時會難以讓出道路讓緊急車
輛經過。在這個情況下，由於無法預期的塞車，拯救傷患或消滅火災的寶貴時間
將會被浪費掉而造成無法挽回的悲劇。  
 
為了解決上述的問題，在此篇論文中，我們提出一種基於IEEE 802.11p/1609
無線技術的交通控管機制來控制車流狀況和交通號誌來縮短緊急車輛到達事故
現場的時間。在所提出的機制裡，行控中心用來監控道路上的車流情況並提供交
通資訊給緊急車輛。行控中心會動態地改變道路上的交通號誌來幫助緊急車輛能
快速地到達事故現場。  
 
我們的模擬結果顯示，在我們所研究的案例中，我們所提出的機制能夠將緊
急車輛到達事故現場的時間大幅地縮短 30%至 50%。 
 
6.2機制的設計與實作 
 我們提出的車流控制機制，利用了三種功能，(1)移動路徑安排(2)疏散車輛
的訊息傳遞(3)動態交通號誌燈的控制，來達到讓緊急救護車輛快速且順暢的到
達事故現場。 
 
(1)移動路徑安排 
交通控制中心會安排緊急救護車輛到達事故現場的移動路徑，這種移動路徑
必頇是最短時間的路徑，以避免緊急救護車輛花費較多時間才到達事故現場，最
短時間路徑是使用 A*演算法找出來的。A*演算法是最好的搜尋演算法，該演算
法可以找到從源頭到目的地的最小成本路徑。產生最短時間路徑的程序如下所
述。 
1. 當萬芳醫院收到一個事故地點的緊急意外救護，他會跟交通控制中心報告
圖 21.疏散車輛訊息傳遞的範例 
 
 
如圖 21 所示，緊急救護車輛(編號 7)會透過 WSM 定期廣播疏散車輛的訊息，
訊息裡面包括緊急救護車輛的 ID跟位置。十字路口的 RSU(編號 4)收到 WSM的訊
息後會把訊息轉送到交通控制中心(編號 5)，當交通控制中心收到訊息後，它會
找出緊急救護車輛現在以及之後會經過的道路編號，然後將這些訊息傳送到十字
路口的 RSU(編號 3)，之後 RSU 會將疏散車輛的訊息廣播給周圍的車輛(編號
8,9,10,11)，當車輛(編號 8~11)收到廣播的 WSM 訊息後他們會保留道路給緊急
救護車輛，讓緊急救護車輛可以快速通過。 
 
(3)動態交通號誌燈的控制 
交通號誌燈由交通號誌控制中心控制，緊急救護車輛會定期廣播紅綠燈燈號
請求、車輛 ID 以及所在位置的 WSM 訊息，當 RSU 收到訊息後會將此訊息傳送到
交通控制中心，它會將此訊息轉送到交通號誌控制中心，當交通號誌控制中心收
到紅綠燈燈號的請求，它會將緊急救護車輛前方需要疏散的車輛所在的十字路口
的燈號轉成綠燈，讓需要疏散的車輛能順利通行，以避免緊急救護車輛被阻塞在
車陣後。 
 
6.3機制的設計 
我們設計的交通控制機制是為了要減少緊急救護車輛到達事故現場的時間，
如之前所描述的，交通控制機制有三種主要的功能(1)移動路徑的安排(2)疏散車
輛的訊息傳遞(3)動態交通號誌燈的控制。我們設計了數種不同的機制來進行評
估，以確認每種機制對於緊急救護車輛到達事故現場的時間有什麼樣的影響，如
下表所示。 
 
 機制 A 機制 B 機制 C 機制 D 
移動路徑的安排 ˇ ˇ ˇ ˇ 
疏散車輛的訊息傳遞  ˇ  ˇ 
動態交通號誌燈的控制   ˇ ˇ 
 
機制 A：這個交通控制的機制只有提供移動路徑的規劃，緊急救護車輛會走
最短時間的路徑去事故現場。這個機制的效能是用來衡量其他機制效能的基礎指
標。 
機制 B：這個交通控制機制提供了移動路徑規畫與疏散車輛訊息傳遞，透過
機制 B與機制 A的比較，能幫我們分析疏散車輛訊息傳遞所帶來的影響。 
機制 C：這個交通控制機制提供了移動路徑規劃與動態交通號誌燈控制，透
過機制 C與機制 A的比較，能幫我們分析動態交通號誌燈控制所帶來的影響。 
 
圖 23.NCTUns上萬芳醫院附近的街道圖 
在圖 23 中，S 代表是緊急救護車輛的貣始位置萬芳醫院，而 A5 與 B5 是距
離源頭 S有 25個十字路口遠的事故地點，模擬的參數如表 10所示，對每一條路
徑，我們會每隔 5、10、15、20 個十字路口會設定一個終點 A1 到 A5 以及 B1 到
B5。我們也會設定不同的紅綠燈周期，有 30 秒、60 秒以及 90 秒，以分析不同
的紅綠燈周期對於各種交通控制機制的影響，在表 11 中我們會評估兩條不同的
路徑，路徑 1以及路徑 2，去觀察不同的路徑對於各個機制效能的影響，在表 12
中，我們展示了不同的車輛間距 10、20、30(公尺/車輛/lane)。 
 
表 10.模擬情境參數設定 
參數 設定 
訊息長度(bytes) < 1400 
網路種類 IEEE 802.11p/1609 WSMP 
源頭 萬芳醫院 
模擬時間 源頭到目的地 
網路與路網模擬器 NCTUns 
地形尺寸 2000*1500 
車輛數 1500~4000 
路寬(公尺) 3 
車子佔的道路表面積(公尺 2/車輛) 30,60,90 
終點 
(從源頭開始算經過幾個十字路口) 
5,10,15,20,25 
紅綠燈周期(秒) 30,60,90 
 
6.5模擬結果 
我們使用 ATRP (arrival time reduction percentage)來當作衡量的指標，
以機制 A當成基準來衡量其他機制在不同的交通環境、路徑、交通號誌燈的周期
下效能的表現如何。ATRP 的值越大代表這個機制的效能越好，關於 ATRP 的定義
如下。 
假設在機制 A底下，緊急救護車輛到達事故現場所花費的時間為 X秒，在機
制 B、C、D底下需要花費 Y秒，則 ATRP的值為： 
ATRP(%) = 
   
 
 * 100% 
為了方便，表 13 為這篇論文中所使用的縮詞： 
 
表 13.原句與縮詞的對照 
原句 縮詞 
Arrival Time Reduction Percentage ATRP 
Traffic Lights Period TLP 
Average Vehicle Separation Distance AVSD 
 
如下圖所示，ATRP 的結果顯示，在 TLP 是 30秒的環境下，效能表現是機制
A < 機制 B < 機制 C < 機制 D，原因如下。 
 
一般來說，機制 B、C、D的效能比機制 A好，這是因為疏散車輛的訊息傳遞
以及動態交通號誌燈的控制這兩種方法都能有效的縮減緊急救護車輛到達事故
現場的時間。而結果顯示機制 C的效能表現比機制 B要來的好，則代表動態交通
號誌燈控制比疏散車輛的訊息傳遞更能疏散緊急救護車輛前方壅塞的車潮，因此
效能表現比較優異，而機制 D的效能最佳是因為，動態交通號誌燈的控制以及疏
散車輛的訊息傳遞同時使用時，能有效的清除緊急救護車輛前方的壅塞。 
 
如圖 24圖 24圖 26中所示，當 AVSD的值增加時，各個機制的效能卻降低了，
這是因為當 AVSD的值比較大時，代表緊急救護車輛前方的車輛數比較少，因此
也比較少有車會阻擋緊急救護車輛的通行，因此在機制 A底下，緊急救護車輛到
達事故現場的時間就會比較少。可以比較圖 26圖 28圖 28，就能清楚看見當 AVSD
減少時，緊急救護車輛在機制 A底下，到達事故現場的時間確實會增加，而機制
A運作下的時間減少會導致機制 B、C、D的 ATRP值的下降。 
 
圖 30.在路徑 2各機制的到達時間     圖 31.在路徑 2各機制的 ATRP值 
 
當 TLP增加時，因為綠燈時間變長，所以在機制 A中緊急救護車輛可以一次
通過更多的十字路口，因此可以比較快速的到達事故現場，而在機制 D 中，TLP
的增加幾乎不影響其效能，這是因為機制 D能控制交通號誌燈而且能保留車道給
緊急救護車輛。如圖所示，在機制 A運作下緊急救護車輛到達事故現場的時間會
隨著 TLP 增加而增加。同樣也可以看到在機制 D的運作下，隨著 TLP 的增加緊急
救護車輛到達事故現場的時間幾乎沒什麼變化。所以如圖所示，在機制 D底下的
ATRP會隨著 TLP的增加而減少。 
 
 
圖 32.機制 A在 TLP變動的環境下的到達時間 
 
 
圖 33.機制 D在 TLP變動的環境下的到達時間 
7.研究成果自評 
計畫第三年預期完成的工作項目條列如下： 
 
(1)道路網路的模擬 
(2)符合真實世界車流運動行為的車輛行為模擬 
 
經過我們設計與實作，我們已經順利的把道路網路以及車流的運動行為順利
開發完成，同時為了提升模擬的真實度，我們在道路網路方面增加了可以引進真
實世界路網 shapefile 格式的功能，因此可以把現實世界中的地圖直接讀入模擬
器中進行模擬。而在車流的運動行為，我們不只建構了車輛的前進與停止，更是
實做了 Landmark-based 這個特別的機制，讓車流可以依照我們的需求運作，並
且讓車流的行進更符合真實世界的運作。 
 
在我們開發完預定的工作項目後，我們便在這個平台上著手進行研究，如同
我們計畫當初所提到的，會進行紅綠燈的智慧型控制的研究，以及車輛間封包的
傳遞以達到緊急救護功能的研究。 
 
在紅綠燈的智慧型控制研究中，我們改良過的智慧型紅綠燈控制演算法的效
能比貣原本的智慧型控制演算法，在效能、公平性以及抗資訊流失的各方面都有
更優良的表現。 
 
而在緊急救護的議題中，我們提出的三個機制，經過交叉實驗比對後，我們
發現綜合路徑規畫、疏散車輛訊息的傳遞以及動態交通號誌燈的控制，這三項功
能的機制，能大幅縮短緊急救護車輛到達事故現場的時間，在分秒必爭的救護中，
能大大提高救護性命的效率。 
 
經過我們在這平台上的研究，已經證實這個平台的可用性，的確在道路網路
以及封包網路的模擬中，都能提供研究者做各式各樣的研究。我們對於這計畫的
研究成果完成度給予高度的評價。 
 
 
 
 
 
 
 
 
國科會補助計畫衍生研發成果推廣資料表
日期:2011/09/21
國科會補助計畫
計畫名稱: 開發一個高品質的IEEE 802.11p 及IEEE 1609 車輛無線網路模擬系統
計畫主持人: 王協源
計畫編號: 97-2221-E-009-065-MY3 學門領域: 系統模式化及模擬
無研發成果推廣資料
其他成果 
(無法以量化表達之成
果如辦理學術活動、獲
得獎項、重要國際合
作、研究成果國際影響
力及其他協助產業技
術發展之具體效益事
項等，請以文字敘述填
列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
