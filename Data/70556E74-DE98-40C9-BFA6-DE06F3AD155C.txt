all invest more and more resources in this area. 
There are three major issues to construct smart 
living space, including efficient acquisition of 
trustworthy context information, context-aware 
service automation, and management and coordination 
of equipments in the smart living space. The so-
called context information includes environment type 
context information and user type context 
information. The latter further consists of 
physiological information and mental information. 
Service automation denotes the automatic supply of 
wanted and necessary services to users by evaluating 
and reasoning the context information. The 
coordination and management of service equipments in 
smart home living space denotes the optimal 
allocation of service equipments according to users’ 
location and service quality requirement from users. 
    This project developed a context-aware service 
automation platform and related technologies to 
support the construction of smart home living space. 
It is based on the achievements of digital home 
technology research by the executive team of this 
project in the past years. To implement this 
platform, we developed the solutions of five key 
technologies: context information discovery and 
composition, trustworthy context management and 
reasoning, user-centric ubiquitous service discovery 
and composition, service-oriented resource allocation 
and scheduling, context-aware service validation & 
emulation。 
    The key technologies mentioned above just become 
hot research topics in pervasive computing and 
context-aware computing now. Besides, integrated 
solutions have not yet been proposed in the world. 
Based on rich experiences on the study of digital 
home technology, the research team of this project 
has proposed a complete and innovative solution and 
implemented the desired context-aware service 
automation platform for smart home living space. 
 
英文關鍵詞： Smart Home Living Space, Context-aware Service 
1 
 
目錄 
研究計畫中英文摘要 ..................................................................................................................................... 2 
一、 前言 ....................................................................................................................................................... 4 
二、 研究目的 ............................................................................................................................................... 6 
三、 文獻探討 ............................................................................................................................................... 8 
四、 研究方法 ............................................................................................................................................. 25 
一、 情境資訊之探勘與整合技術 ................................................................................................... 25 
二、 可信賴情境資訊管理與推理 ................................................................................................... 27 
三、 使用者為中心之普及服務發現與合成 ................................................................................... 28 
四、 服務導向資源分配與規劃 ....................................................................................................... 31 
五、 情境感知服務驗證 ................................................................................................................... 32 
五、 結果與討論 ......................................................................................................................................... 35 
 
  
3 
 
 
（二） 計畫英文摘要。（五百字以內） 
Key Words: Smart Home Living Space, Context-aware Service Automation Middleware, Trustworthy 
Context Information Reasoning, Context Information Mining and Fusion, Context-aware 
Service Validation 
 
 Building smart home living space by integrating ICT and other technologies has been a hot research 
area. Therefore, government agencies, academy and industry all invest more and more resources in this 
area. There are three major issues to construct smart living space, including efficient acquisition of 
trustworthy context information, context-aware service automation, and management and coordination of 
equipments in the smart living space. The so-called context information includes environment type 
context information and user type context information. The latter further consists of physiological 
information and mental information. Service automation denotes the automatic supply of wanted and 
necessary services to users by evaluating and reasoning the context information. The coordination and 
management of service equipments in smart home living space denotes the optimal allocation of service 
equipments according to users’ location and service quality requirement from users. 
 This project developed a context-aware service automation platform and related technologies to 
support the construction of smart home living space. It is based on the achievements of digital home 
technology research by the executive team of this project in the past years. To implement this platform, 
we developed the solutions of five key technologies: context information discovery and composition, 
trustworthy context management and reasoning, user-centric ubiquitous service discovery and 
composition, service-oriented resource allocation and scheduling, context-aware service validation & 
emulation。 
 The key technologies mentioned above just become hot research topics in pervasive computing and 
context-aware computing now. Besides, integrated solutions have not yet been proposed in the world. 
Based on rich experiences on the study of digital home technology, the research team of this project has 
proposed a complete and innovative solution and implemented the desired context-aware service 
automation platform for smart home living space. 
5 
 
可偵知使用者的位置及個人資訊，因此大量的情境資訊在 u 化聚合網路中傳遞，其可靠性為重要議
題。另外，由於多種異質服務同時在網路環境中執行，感測網路必須能依不同需求及網路狀況彈性
處理情境資訊之蒐集及彙整（acquisition、extraction、filtering、fusion 等）等工作。 
從上述 u-Taiwan 計畫的內涵觀之，我們有必要進行數位匯流網路、感知網路、創新科技化服務、
安全信賴等核心技術之研發，並且進行技術整合，提供整體解決方案，以促成 ubiquitous network 
society 目標的實現。本計畫即是針對 u-Taiwan 計畫的核心概念，並以建構情境感知之智慧家庭生活
空間為技術應用方向，契合 u-Taiwan 願景與目標。 
本計畫為了實現智慧家庭生活空間之情境感知服務自動化技術的研發，定義了五個核心研究議
題分別為：情境資訊探勘與整合(Context Information Discovery and Composition) 、可信賴情境資訊
管理與推理（Trustworthy Context Management and Reasoning）、使用者為中心之普及服務發現與合成
（ User-centric Ubiquitous Service Discovery and Composition ）、服務導向資源分配與規劃
（Service-oriented Resource Allocation and Scheduling）、以及情境感知服務驗證（Context-aware Service 
Validation & Emulation）技術。最後藉由上述五個研究議題順利達成本計畫之研究目的。 
 
  
7 
 
行之前就可以事先偵測出情境感知服務的可達性，如此一來將降低情境感知服務在執行過
程中浪費的時間。 
 
  
9 
 
力需求，還能給予醫生更全面的資訊，讓醫生在診斷時更容易找出病因、提出最佳的治療
方式，並且提供使用者無所不在的服務，以及更友善的居住環境。 
2. 國內外相關研究情況：最早將行為辨識應用到情境感知運算的是 Intel 西雅圖實驗室的一個
計畫：「Human Activity Recognition」。與此相關的文獻中，最具代表性的就是由 Philipose, 
Fishkin, Perkowitz等人於2004年所發表的「Inferring activities from interactions with objects」，
其中使用了無線頻譜身份識別(RFID)收集物體的資訊，並且運用了資料探勘的技術，從網
路上擷取出行為與物體之間的關聯性，並且套用到隱藏式馬可夫模型(Hidden Markov 
Model)，以偵測到的物體種類，推論出當下的行為，這篇文章開啟了一個方向，點出了無
線頻譜身份識別(RFID)應用在行為辨識上的可行性。接下來的研究中，2005 年 Smith1, Jiang, 
Roy 等人改進無線頻譜身份識別(RFID)的裝置，使其能偵測物體的晃動。同樣在 2005 年，
Wyatt, Philipose 和 Choudhury 則是對資料探勘的部份更深入的探討，提出更自動化方式來
挖掘物體與行為之間的關聯性。此外，也有人使用不同的方式來實現行為辨識，最常見的
有使用攝影機、麥克風、或是加速度偵測器，其中的優缺點則在下面的研究方法和原因中
討論。至於國內的研究部份，台灣大學的許永真老師與其學生在 2006 年於 AAAI Workshop
發表了一篇論文，將物體資訊建立成樹狀的模型，並加入時間與地點的資訊。 
3. 重要參考文獻： 
1. Weihua Song, Phoha, V.V., Xin Xu, “An adaptive recommendation trust model in multiagent 
system”, in Proceedings of the IEEE/WIC/ACM International Conference on Intelligent 
Agent Technology (IAT’04), 2004, pp. 462-465. 
2. Carbo, J., Molina, J.M., Davila, J., “A BDI agent architecture for reasoning about 
reputation”, in Proceedings of the IEEE International Conference on Systems, Man, and 
Cybernetics, vol. 2, 2001, pp. 817-822. 
3. Li Xiong and Ling Liu, “PeerTrust: supporting reputation-based trust for peer-to-peer 
electronic communities”, in Proceedings of the IEEE Transactions on Knowledge and Data 
Engineering, vol. 16, issue 7, 2004, pp. 843-857. 
4. Ping Wang and Zili Zhang, “A computation trust model with trust network in multi-agent 
11 
 
及感測裝置之硬體限制，因此推論所得的情境資訊充滿著不確定性，所以當發展情境感知
服務系統收到了不正確的情境資訊將導致情境感知服務系統無法做出適當的判斷，進而產
生不可預期的情況。因此，如何有效並正確的收集情境資訊與篩選不可靠的情境資訊成為
發展情境感知服務系統的一個重要課題。而情境感知服務系統除了必須要根據情境資訊給
予使用者不同反應，還必須依據使用者所在位置，自動搜尋可以使用的裝置，依據網路資
源的現況與裝置狀態挑選可以用來完成任務的硬體裝置或軟體元件，來完成使用者的需求。
在智慧型生活環境裡，一個可靠的情境感知服務系統必須要能夠適應環境狀態的改變，盡
其所能完成使用者的需求，所以情境感知服務系統若要執行順利的話，必須同時擁有感測
裝置提供的可信賴情境資訊和具備優良執行品質的服務提供裝置。然而，感測裝置可能受
外在環境的影響，導致感測的訊息產生錯誤或是遺漏，所以情境感知服務系統利用不確定
的資訊來決定回應使用者要求的方法，就會產生不可預期的執行結果。另一方面，即使情
境感知應用程式可以正確的得知環境的狀態，但如果沒有品質良好的執行裝置也無法提供
給使用者完善的情境感知服務。在智慧型生活環境裡，一個可靠的情境感知服務必須要能
夠適應環境狀態的改變，盡其所能完成使用者的需求，所以情境感知服務若要執行順利的
話，必須同時擁有感測裝置提供的可信賴情境資訊和具備優良執行品質的服務提供裝置。
然而，感測裝置可能受外在環境的影響，導致感測的訊息產生錯誤或是遺漏，所以當情境
感知應用程式利用不確定的資訊來決定回應使用者要求的方法，就會產生不可預期的執行
結果，因此如何提供可靠的情境感知資訊變成情境感知服務在執行過程中非常重要的環節。
情境感知服務是以人為服務的對象，因此，如果可以藉由找出人與週遭環境情境感知資訊
的關聯性，系統就可以利用情境感知資訊來找出人的週期性行為與事先預測可能會產生的
情境感知資訊，如此一來，便可以協助情境感知服務提前做出適當的服務決策，而不會因
為收到的情境感知資訊過時而影響情境感知服務的服務品質。 
2. 國內外相關研究情況：一般而言，信賴機制的用途很廣泛，可以適用在買賣交易、網路檔
案分享或軟體元件評估等用途上。以下是關於 Trustworthiness Evaluation Model 應用在各個
領域上，以及提出獨特的演算法來衡量。Trust 這個名詞的概念由 Diego Gambetta 提出的
定義可以清楚瞭解，Trust 這個名詞強調的是個人主觀的觀點對信任者的相信程度，Trust 
13 
 
可以決定要交易的對象。 
(4) Mui, Mohtashemi, and Halberstadt computational：在這個架構中他提出 Trust、Reputation 
還有 Reciprocity 間的相互關係，在這個 model 可以反映在網路交易上出如果賣家的
聲望(Reputation)越高，那麼就會獲得其他買家更高的信任度，有較高的信任度就會獲
得較多的交易，因而獲得更多利益。根據 Trust Model 衍生出來還有 Recommendation 
System 和 Reputation System 的相關研究。而其主要目的都是希望能夠透過推薦機制
(Recommendation System)或者聲望機制(Reputation System)來提升可靠度。因此在這個
系統中我們希望利用這樣的機制來協助達到提供系統偵測軟、硬體元件的正確性。
Weihua Song et al 設計一個信賴機制在 P2P 網路分享的環境上，其作法是先由服務要
求者先向鄰近的點以遞迴的方式送出檔案要求，然後有條件地篩選出那些曾經與檔案
提供者有過互動的點當成推薦者。接著建立一個類神經網路用以推薦者的推薦訊息當
作訓練資料，最後輸出一個推薦者所推薦的檔案提供者(file provider)當作可以被服務
要求者信賴的檔案提供者。Li Xiong et al.設計一個信賴機制在P2P電子商務的環境上，
此信賴機制包含了四個元件來分工合作：1.Trust Data 元件是負責儲存每個人曾經與賣
家交易的信賴資訊。2.Feedback Submission 元件是負責回應別人要求指定賣家的推薦
資訊。3. Data Locator 元件是負責找到正確的人蒐集他曾經與賣家交易或者回應給要求
推薦資訊的人。4.Trust Evaluation 元件是負責計算賣家信賴值，其定義在電子商務上
要計算一個信賴需要考量五大因素，每一個因素對每一筆商務交易都具有或多或少的
影響，因此每一個因素都會被賦予一個權重值來代表對商務交易的影響程度。目前信
賴模型、推薦機制以及信用評等機制(Trust Model & Reputation System)最常被使用於電
子商務(E-commerce)中用於買方、賣方信用度的衡量以及 Peer-to-Peer Network 中用於
判斷服務提供者的可靠度上。主要原因不外乎下例特性：(1)系統元件不受中央統一管
理(2)系統元件無法確保一定能夠正常運作，系統元件可能隨時加入或者離開整個系統，
整個系統的狀態一直在改變(3)系統元件的執行效能無法被評估。 
3. 重要參考文獻： 
1. G. T., XH W., HK P., DQ Z., “An Ontology-based Context Model in Intelligent 
15 
 
統最重要的功能。而在此系統中，服務之產生乃依據三種不同的資訊：環境狀態資訊、使
用者之行為模式以及服務裝置之狀態與網路拓樸。而通常完善的服務需要藉由多個服務裝
置設備來合力完成。因此，如何在使用者所存在的空間中，依據當時服務裝置之狀態與網
路拓樸，進而有效的整合服務裝置而實現最好品質的服務是一個重要的議題。 
表一、Comparison of ubiquitous service discovery approaches 
 Approach Multicast/ Broadcast Protocol 
Complexity 
Network Type Network Scale
SLP, Jini, UPnP Centralized Yes/No Low Fixed Small 
Salutation Protocol Centralized No/No Low Fixed Small 
[A.3.10] Distributed Yes/No Medium Mobile Medium 
[A.3.11] Distributed No/No Medium Mobile Medium 
[A.3.12] Distributed No/Yes High Mobile Large 
2. 國內外相關研究情況：現存的 ubiquitous service discovery 方法主要可以區分為集中式與分
散式兩種。集中式的方法，如Service Location Protocol (SLP)、Jini、IBM的 salutation protocol、
以及微軟的 Universal Plug and Play (UPnP)等，其主要架構都包含一個 Service Broker (SB)
可以讓Service Providers (SPs) (即提供各種 system services的裝置)註冊其提供的服務與狀態。
然後，Service Requesters (SRs) (即使用者要求的 ubiquitous services) 可以向 SB 詢問滿足其
需求的裝置。集中式的優點是可以對裝置做最佳的配置，然而在大型網路中定期更新網路
狀態可能會對網路造成非常大的負載。因此，有一些分散式的方法被提出來應用在 MANETs
上。Lee et al.提出的 peer-to-peer 網路模型讓每個裝置都可以成為 SB，但是缺點是會有許多
重複的註冊資料。為了減少重複的註冊資料，kozat et al.提出了由一組選出來的 SBs 組成虛
擬骨幹網路，然而此方法並不適用於高移動性的網路。近來，也有一些類似 MANET on 
demand 路由協定的被動式方法可以讓 SRs 在需要的時候直接對鄰近的 SPs 發出需求。我們
將上述方法的比較列於表一。 
就我們所知，目前 ubiquitous service composition 的方法多以分散式為主。Basu et al.所
提出的 Dynamic Task-based Anycasting (DTA)是一個適合 MANETs 的方法。在 DTA 中，
17 
 
為裝置上的資源與網路上的頻寬是由多個 ubiquitous services 所共享的，因此本計畫所探討
的裝置選擇問題也不例外。服務排程的主要目的是做小化所有無法被即時服務的 ubiquitous 
services 所等待的時間，而在具資源的限制條件下此問題也是一個 NP-complete 的問題。因
此，本計畫提出的 MMKP 演算法將搭配服務排程機制降低無法及時被服務的使用者所等待
的時間。 
3. 重要參考文獻： 
1. M. Bohlen, J. Gabian, D. Pfeifer, and J.T. Rinker, “Prototypes in Pervasive computing”, 
IEEE Pervasive Computing, 4(4), pp. 78-80, 2005. 
2. P.-C. Huang, K.-R. Lee, W.-T. Su, M.-F. Horng, C.-C. Lin, Y.-H. Kuo, and Y.-T. Chen, 
“Control Component Development of Information Appliances on Networks”, Journal of 
Information Science and Engineering, 22(4), pp. 771-784, 2006. 
3. S. Sivavakeesar, O. F. Gonzalez, and G. Pavlou, “Service Discovery Strategies in 
Ubiquitous Communication Environments”, IEEE Communication Magazine, 44(9), pp. 
106-113, 2006. 
4. M. Novaes, P. Westerink, and C. Codella, “Orthogonal Layered Multicast: Improving the 
Multicast Transmission of Multimedia Streams at Multiple Data Rates”, in Proc. of Int. Conf. 
on Communications, 4, pp. 2563-2567, 2002. 
5. Microsoft, “LLTD: Link Layer Topology Discovery Protocol”, Windows Rally Specification, 
2006. 
6. P. Basu, “A task based approach for modeling distributed applications on mobile ad hoc 
networks”, Ph.D. dissertation, Boston University, Boston, MA, 2003. 
7. J. Verzades, E. Guttman, C. Perkins, and S. Kaplan, “Service Location Protocol, Version 2”, 
IETF RFC 2608, 1999. 
8. C. Lee, A. Helal, N. Desai, V. Verma, and B. Arslan, “Konark: A System and Protocols for 
Device Independent, Peer-to-Peer Discovery and Delivery of Mobile Services”, IEEE Trans. 
on Sys., Man, and Cybernetics, 33(6), pp. 682-696, 2003. 
19 
 
四、多使用者與多服務導向資源分配與規劃（Multi-users and service-oriented resource allocation and 
scheduling） 
1. 背景、目的與重要性：當情境感知服務系統支援多個情境感知服務且同時執行時，如果沒
有適當的方法去偵測並解決資源衝突的問題，將會產生想不到的情況產生。服務衝突的情
況可分為三類：第一種服務的衝突的產生，起因於使用者 a 跟使用者 b 嘗試跟同一個裝置
要求他提供不同類型的服務，例如:使用者a跟使用者b同時要求電視播放不同的電視頻道，
此時就會產生服務的衝突。第二種服務衝突的產生，起因於兩個不同 media service 同時服
務使用者 a，在同一個空間對使用者而言，兩個 media service 的相互影響會導致服務的衝
突。例如:使用者 a 要求 TV 服務的同時又要求 Music 的服務，如果此時系統沒有解決 services
的衝突，聲音的相互影響將大大降低服務品質。第三種服務衝突的產生，起因於兩個使用
者在同一個空間中同時要求 media services 的服務，例如:在同一空間中，當使用者 a 要求
TV 的服務，同時使用者 b 要求 music 的服務，此時彼此間服務的干擾，將引發彼此服務的
衝突。目前提供的情境感知服務系統大多強調如何可以讓單一的情境感知服務可以得到最
佳的執行結果，但以整個系統觀點而言，對單一使用者最好的情況確有可能損及另外一個
人的權益，因此，如何定義出情境感知服務執行的 policy，用以妥協系統內所有使用者的
權益變成這個研究最重要的課題，如果能夠解決這樣的問題，將可以讓多個情境感知服務
更能夠真實執行於現實的生活環境中，並能妥協使用者與使用者間的權益，共同創造彼此
間的最大利益，解決資源衝突的問題。此外，在情境感知服務系統的發展過程中，如何根
據使用者所處環境的情境資訊提供使用者適當的服務，也是發展情境感知服務系統的重要
課題，例如:當使用者看電視節目時，情境感知服務系統發覺室內光線不足，此系統將自動
偵測室內的發光裝置調整室內光線直到室內光線滿足使用者看電視的環境狀態，因此如何
透過情境資訊來找尋找合適的服務設備或軟體元件是發展情境感知服務系統會遭遇到的問
題。而當多個情境感知服務同時執行時，因為資源有限的狀態下必定會產生彼此資源競爭
的問題，比如：兩個人同時要求 TV 播放不同的電視節目，此時必定無法滿足其中一個使
用者，因此，如何解決情境感知服務的衝突，也是發展情境感知服務系統會遭遇的問題。 
2. 國內外相關研究情況：針對此議題，MMKP 依然被應用在許多實際的應用上。S. Alam 即
21 
 
1. 背景、目的與重要性：情境感知服務是否可以正常執行，取決於是否周遭環境的資源是否
可以滿足使用者的需求，因此，如果可以在情境感知服務執行之前就可以事先偵測出情境
感知服務的可達性，如此一來將降低情境感知服務在執行過程中浪費的時間。 
2. 國內外相關研究情況：根據 Aalst et al.的調查，目前用來表達服務組合的流程語言已有十餘
種，大多數是以 XML 為基礎語法並結合工作流概念，提供服務整合者利用，由於服務組
合的流程語言並沒有統一的標準，因此以提供執行引擎的流程語言較為普及。Alast 曾比較
近年來常用的流程語言，例如 WSFL、XLange、BPEL4WS、BPML 等，依據工作流程管
理聯盟(WfMC)對流程結構的基本需求，比較六大類共計二十種樣板(patterns)，其結果顯示
沒有任一種流程語言可以達到全部項目，例如較突出的 BPEL4WS 也僅達到 14 項，但調
查結果也顯示各種流程語言均達到基本流程結構的需求，例如循序、合併等。目前服務組
合的另一項研究則是建置服務組合的流程整合開發平台，例如 Benatallah et al.[A2-6]建立名
為 Self-Serv 的專案，該平台是以服務入口的概念，利用圖形介面提供使用者建置流程的整
合平台；VanderMeer et al.的研究，曾建立名為 FUSION 的系統，但僅以點對點為基礎的服
務協同模型；Casati and Shan 建立名為 eFlow 的專案，該研究嚐試以適性化的角度，從事
動態的網路服務組合；Chandrasekaran et al.則建立名為 SCET 的專案，以 IBM WSFL 為流
程語言建立服務組合模型，並模擬服務組合執行的效能分析及建立回覆機制。上述的研究
均以建置整合開發平台為標的，提供流程執行後的效能分析，但未提供服務組合在非功能
性問題的驗證。在工作流程的研究中，為了能夠定義流程的設計並進行後續的模擬分析，
常藉由塑模工具來表達流程的結構設計，其中又以狀態圖(State-chart)和 Petri Net 最常見，
而它們也被許多研究用來塑模服務組合，以下分別就這兩種塑模工具在網路服務組合上的
應用進行探討。 
(1) 以狀態圖塑模服務組合：狀態圖是傳統的塑模工具，以工作流程的應用而言，它是由
狀態(State)和控制權移轉(Transition)所構成，除擁有定義的語法外並且包含流程結構樣
板，因此可用來呈現服務的組合。例如 Zeng et al.[30]使用狀態圖來塑模網路服務的組
合問題，其中狀態並分為基礎(Basic)和混合(Compound)兩類，基礎狀態表示單一的網
路服務，混合狀態則代表多個網路服務以 OR(包含多個選擇性執行的服務狀態圖)及
23 
 
4. R. Scctt Cost, Ye Chen, Tim Finin, Yannis Labrou and Yun Peng, “Using Colored Petri Nets 
for Conversation Modeling”, Lecture Notes in Computer Science, Vol. 1916 , Issues in 
Agent Communication, pages 178 - 192, Springer - Verlag , 2000. 
5. Boualem Benatallah, Marlon Dumas, Quan Z. Sheng and Anne H.H Ngu, “Declarative 
Composition and Pear-to-Pear Provisioning of Dynamic Web Services”, in proceeding of the 
18th international Conference on Data Engineering(ICDE’02), IEEE Computer Society, 
2002. 
6. Yü-Liang Ch'i and Chih-Wei Li, “A Validating Approach for Evaluating Reliability of Web 
Services Compositions” Journal of Information, Technology and Society, Vol. 5, No. 2, 
2005. 
7. Allan Cheng, Javier Esparza and Jens Palsberg, “Complexity Results for 1-safe Nets”, 
Foundations of software technology and theoretical computer science, volume 761 of 
Lecture Notes in Computer Science, pages 326—337, Springer-Verlag, Berlin, 1993. 
8. Design/CPN,2006,Available: http://www.daimi.au.dk/designCPN/ 
9. Finite state machine, Available:  http://www.nist.gov/dads/ 
HTML/finiteStateMachine.html 
10. Eric Garcia, Julien Henriet and Jean-Christophe Lapayre, “Modeling the Chameleon Using 
a Colored-Petri Net: Proof and Validation”, Technical Report, LIFC, 2005. 
11. Jade - Java Agent DEvelopment Framework, Available: http://jade.tilab.com/ 
12. Rachid Hamadi and Boualem Benatallah, “A Petri Net-based Model for Web Service 
Composition”, in Proceedings of the 14th Australasian Database Conference, vol. 17, 
Australian Computer Society, Inc, Adelaide Australia, 2003, pp 191 - 200. 
13. Kevin Mcleish, Introduction to Petri Net, Available: 
http://www.cse.fau.edu/~maria/COURSES/CEN4010-SE/C10/10-7.html 
14. Srini Narayanan and Sheila A. Mcllraith, “Simulation, Verification and Automated 
Composition of Web Services”, in Proceedings of the 11st international conference on 
World Wide Web, SESSION: Semantic Web Services (WWW’02), ACM Press, Honolulu, 
25 
 
四、 研究方法 
一、情境資訊之探勘與整合技術 
在本計畫的情境資訊之探勘與整合技術需於前兩年完成，因為其技術將提供後續之使用者為中
心之普及服務發現與合成做進一步的研究，情境資訊之探勘與整合技術主要是以使用者行為辨識的
目的，其中最重要的資訊就是使用者所接觸到的物體，所以勢必要先做到物體的偵測，而物體偵測
主要有以下三種方式：電腦視覺、主動式感應器、以及被動式 RFID。 
在第一年中，我們先對情境感知服務自動化平台之系統構想可行的情境，根據情境所進行的內
容對應到可能需收集的情境資訊，如此才可以有系統性的收集所需要之資訊，情境資訊包含有很多
種類，大致上可分為人、事、時、地、物五種，但系統不可能對於每項資訊做收集，所以勢必先分
析出可靠且有助於系統之資訊，過濾不必要的訊息或雜訊，讓我們能更準確的得知使用者的需求與
狀態，以提供更適當的服務，在情境資訊之探勘與整合技術中，可分為兩部分來探討，第一年我們
完成了情境資訊分析，並根據所需之情境搭配硬體設備做規劃，而情境資訊之整合，我們先分析出
各種不同種類的資訊內容與格式，整合系統平台與情境感知服務環境及網路。 
在第二年中，配合系統平台之開發，此技術之架構與實作評估以大致建立完成，本研究目的在
於強化情境感測資訊的正確性與完整性。其解決方法必須使用多重異質情境之感測裝置，將這些資
訊進行融合，找出多重異質情境感測資訊之資訊強度與關連性，進而推論出較為完整和正確又可做
為決策分析的關鍵複合式情境資訊。 
為了達成上述目標，本計劃之研究內容需針對下列技術議題，提供解決方案： 
    本計畫落實於 Java Agent Development Environment (JADE)平台，此平台是一個軟體開發的框架，
可以有許多個 agent 同時執行，達到互相溝通、合作與協商等動作。系統運作流程之資料收集分為
二個區塊，一為擷取使用者控制遙控器觀看電視時的動作資料，另一為收集使用者觀看電視時的臉
部表情，將此資料經由前處理後回傳至辨識系統並將資訊回傳至推論資料庫。  
27 
 
時，這樣就會造成系統的判斷錯誤，因此為了避免有這種雜訊情況的，必須把更多筆資料加進來一
起做判斷，可是若只把所有歐氏距離中最小的兩筆資料拿來做考慮的話，如果其中有一筆資料還是
雜訊，則系統就無法分辨出哪一筆才是正確的資料；又假設是三筆資料一起做判斷的話，或許這樣
可以提高判斷的正確率，但是雜訊的問題依然還是存在的；當然也可以拿比對資料庫裡的所有資料
都拿來一起做判斷，但是這樣又會產生過度調適(overfitting)的問題，所以要把多少筆資料一起加進
來做考慮也是一個值得探討的議題。在這個部分的解決方法是先拿比對資料庫以外的數筆資料來進
行測試，找出大概要跟多少筆資料一起做判斷才能推薦出正確的答案，再拿這個數據當作最終系統
要拿多少筆資料一起做判斷的依據。 
在第三年中，由於情境資訊探勘與整合之實作、效能測試與評估已在第二年大致建置完成，所
以此技術所蒐集之資訊，提供使用者為中心之普及服務發現與合成做研究，並根據實驗與評估的結
果，做進一步地校正與修改。 
 
二、可信賴情境資訊管理與推理 
本計畫將感測裝置提供的資訊內容依情境感知應用程式分成兩大種類，並藉由分析感測資
訊提供給情境感知應用程式更好的感測資訊的品質。本計畫將感測裝置接收到的資訊分類，不
同的資訊將透過不同的資料分析方式來達到上述的計畫目的。 
感測資訊分成: 
 連續情境感知資訊: 
以時間先後順序型態出現之一連串觀測值集合，也就是對某種動態系統隨時間連續觀測所
得到之觀測值集合且兩個觀測值之間必存在一個有意義的觀測值，透過時間序列中的頻域
(Frequency domain)分析法及時域(Time domain)分析法來衡量資料的可靠度與預測下一個
時間點的感測資訊。 
 離散情境感知資訊:  
找出週期而規律的的離散感測資訊目的在於找出離散感測資訊間的關聯性，透過情境感知
資訊就可以透過週期性規則預測情境感知資訊，建構 Context Graph 後，利用情境感知資訊出現
的頻率，先刪除不必要的 Context Graph 的節點，用以降低計算的資料量。將得到的循序數列加
29 
 
 
圖四、An example of ubiquitous service 
 
A: 服務模組之建置(建構Service Profile模型用以描述ubiquitous service的結構、特性、及需求) 
此處，我們將 ubiquitous service 模型稱為 Service Profile(SP)。我們將 SP 模組以圖型理論之
方式呈現，GሺV, Eሻ即是整個 ubiquitous service 系統，一個 vertex 代表一個 system service，而 edge
就代表 system services 之間的聯結與資訊傳遞，如圖五所示。以此種模型呈現，不但能夠了解整個
服務內部的架構、每項服務在其中的重要性等等，假設使用者可能在某些需求上需要做調整，我們
也能夠快速的了解該從何著手調整。 
is1 is2
is3
is4
it1
it2
it3
 
圖五、 An example of Service Profile (SP). 
 
31 
 
ubiquitous service discovery 中選擇適當的裝置來執行使用者所要求的 ubiquitous services 需要考
量上述資訊，其架構如圖六。 
進而我們提出一個 adaptive QoS utility function 可以考量不同的 QoS 因子並且讓使用者可以自
訂權重值以滿足其要求。並利用裝置( QLu )與網路資源( DQu )所能滿足的服務品質來進行衡量，如下目
標函式。 
DQQL uuu  )1(   
 
圖六、Ubiquitous service discovery and composition 
 
 
 
四、服務導向資源分配與規劃 
除了服務品質問題之外，由於裝置資源與網路頻寬是有限且共享的，所以還必須考慮到資源管
理與服務排程等問題。然而，在多使用者的環境下而且在裝置資源與網路頻寬的，要同時提升所有
requested ubiquitous services 的服務品質是一個相當困難的問題。此問題的本質很類似著名的
MMKP 問題，說明如下： 
Maximize 
 
n
i
c
j
ijij
i
xu
1 1
 
subject to 
 

n
i
c
j
kijijk
i
kRxr
1 1
 ,  
33 
 
 
圖七、Multi-Modal Personal Agent 
如上圖七，從 Multi-Modal Personal Agent 基礎研發出主要區分成四個主要組成元件包含: 
Personal Agent Generator、Service Profile Selection、Event Trigger 和 Conflict Resolution 
Mechanism。 
Personal Agent Generator 元件藉由 Context Manager 紀錄的 User Profile 來產生 Personal 
Agent，系統中的 Personal Agent 用來接收使用者的需求並根據使用者的 User Profile 轉換成系統
需求傳送到 Service Profile. 
Event Trigger元件用來將環境狀態轉換成Service Profile的觸發條件，Service Profile Selection
元件中必須定義 Service Profile 的觸發條件，當 Personal Agent 根據使用這些需求選擇 Service 
Profile 時，必須將 Service Profile 的觸發條件的需求傳送到 Event Trigger 中，當環境狀態滿足
Service Profile 的觸發條件時，Event Trigger 將會把觸發條件傳送給適當的 Service Profile 進而產
生服務使用者的 context-aware service. 
Service Profile Selection 元件接收 Personal Agent Generator 轉換過後的系統需求用來挑選適
當的 Service Profile，當 Service Profile 中的觸發條件成立時就會觸發執行適當的 context-aware 
service。 
Conflict Resolution Mechanism 元件當多個 service profile 的觸發條件滿足時，會觸發 service 
35 
 
五、 結果與討論 
本研究開發情境感知服務自動化中介軟體平台雛型系統以及情境感知服務驗證工具雛型系統。
透過 Context-Aware Service Validation 演算法建立 Service Profile 模型用以描述 ubiquitous services 的
結構、特性及需求。而 Service Discovery 機制之演算法與 Service Composition 機制之演算法能用自
動化的方式挖掘物體行為之間的關聯性，並記錄物體所處的時間、所在地點、以及接觸的物體，將
以上資訊建構樣式與行為之間關係的樹狀結構模型用以描述該物體的特性。除了物體資訊的蒐集之
外，必須有一套完整的過濾與篩選機制，依照網路整體現況挑選所需資源給予不同的服務，因此本
研究提出了用戶行為的樣式(pattern)與比對演算法、行為樣式與行為關聯性之演算法、行為辨識之
演算法。有了上述的演算法我們可以提供使用者"需求"、"需要"的服務，透過情境資訊可靠度模組
之建制以及管理機機制建立，配合情境感知資訊之類別模組以及情境感知資訊分析之演算法，此系
統考慮了三種不同的資訊：環境狀態資訊、使用者之行為模式以及服務裝置之狀態與網路拓樸。而
通常完善的服務需要藉由多個服務裝置設備來合力完成。當情境感知服務系統支援多個情境感知服
務且同時執行時，如果沒有適當的方法去偵測並解決資源衝突的問題，將會產生意想不到的情況產
生。因此，本研究建構 Ubiquitous Network 模型用以描述 ubiquitous network 的網路拓樸與狀態，並
透過多用戶異質服務發現與合成之衝突評估、多用戶異質服務發現與合成之效能評估等技術來解決
資源衝突的問題。最後本系統利用情境感知資訊推論之演算法與情境感知資訊預測之演算法的推論
與預測結果對使用者提出的需求做出決策達到多用戶異質服務之資源管理、配置、規劃。 
在學術論文發表方面，本研究已發表了學術論文國際期刊 4 篇、國內期刊 1 篇、國際會議 7 篇，
申請了 2 個美國專利及 4 個國內專利。因與資策會進行與計畫部分相關主題之合作，專利部分與資
策會共同申請。在對產業貢獻方面，本計畫技術成果可彌補國內缺乏 digital life middleware 研發之
空隙。在 context-aware service automation 相關技術成果方面，對我國發展 ICT 平台事業，尤其是
健康照護、數位生活與智慧生活空間等產業有潛在的效益，尤其是對提昇我國在 middleware 技術
的水平將有顯著之貢獻。在我國發展智慧家電、數位娛樂、數位家庭方面，有效而可靠的情境資訊
管理與推理技術對相關產業有潛在的效益。 
近年來政府與產業界注重雲端運算、與智慧型手持裝置的發展，智慧型手持裝置將加速情境感
之與雲端運算的發展。而手持裝置大部分的時間處於閒置的狀態。如何有效利用這些閒置的資源協
國科會補助專題研究計畫項下出席國際學術會議心得報告 
                                 日期：100 年 5 月 30 日 
一、參加會議經過 
ICACT(International Conference on Advanced Communication Technology)
自 1999 年起由 IEEE Communications Society 主辦,每年會議均被 EI 所收錄，
是網路通訊領域的知名會議之一。今年會議在韓國鳳凰渡假村舉行，領域涵蓋
Wireless Communication Technique 、  Mobile Communication 、 Network 
Security、Digital Home Network、Optical Network、Information Security、
出國人員
姓名 
李振維 
服務機構
及職稱 
國立成功大學資訊工訊學系博士
生 
會議時間 
100年 02月 12日至
100 年 02 月 17 日 
會議地點 韓國首爾 
會議名稱 
(中文) 國際先進通訊技術學術研討會 
(英文) International Conference on Advanced Communication 
Technology (ICACT) 
發表論文
題目 
(中文) 在車載網路中使用協力訊息蒐集機制之混和式流量感知路
由協定 
(英文) A Hybrid Traffic Geographic Routing with Cooperative 
Traffic Information Collection Scheme in VANET 
方面之 Power Saving 有其了解。 
2 月 16 日(第四天) 
早上是我的論文報告，感謝 session Chair, Rajendra Prasad Mahaja 與
參與者對我發表的論文在實作上的問題提出意見。聽取來自來自於各個國家學
者的報告(台灣、韓國、印度、日本等)，對於在 VANET 上的網路路由、安全性、
容錯機制等方法上有其了解，將有助於我今後的研究。 
二、與會心得 
ICACT 是網路通訊領域的知名會議之一，每年都會吸引了相當多的學者專家
參與。很感謝國科會能提供補助，讓我能夠參加此次在韓國首爾舉辦的會議，
與來自各國的學者專家討論，並且聽了不少的演講，真的獲益良多。 
三、考察參觀活動(無是項活動者略) 
四、建議 
建議國內研究生應多出國參加會議，跟各國的研究者討論，並從中吸取研
究的經驗，可增進在研究上的能量和廣度。此外，到國外參加會議，更可以體
外不同的國情生活，對於國內研究生來講是很難得的經驗。 
五、攜回資料名稱及內容 
一會議手冊與一論文集光碟。 
六、其他 
無 
 
local maximum to which the packet is routed. But the routing 
path may not be optimal because it is along the anchor path. 
GPCR is also a position-based routing but without the access 
to static street map. In GPCR, coordinators are first elected at 
each junction based on the neighbouring information it has. 
During data transmission, relay nodes adopt the greedy 
forwarding strategy between two adjacent junctions and prefer 
the coordinators to other nodes as its next hop. Apparently the 
above protocols do not consider the real-time traffic status 
while choosing routing paths, which may result in higher 
probability of disconnection or congestion during data 
transmission. And similarly to GSR, GPCR neglects the case 
of low traffic density as well. 
Several other VANET routing protocols have been 
proposed that considers real-time traffic information. For 
example; GyTAR (improved Greedy Traffic Aware Routing 
Protocol) [10] and SADV (Static-Node Assisted Adaptive 
Routing Protocol) [11]. GyTAR is an intersection-based 
routing protocol which utilizes both the real-time road traffic 
information and the static map information to perform routing 
decisions at street intersections. Once a relay node is in the 
area of the junction, it collects the real-time road traffic 
information from its neighbouring junctions in order to select 
the next forwarding junction. However, GyTAR only acquires 
the traffic information from its one hop neighbours, such 
information could result in insufficient data when performing 
routing decisions in the rapid changing V2V environments. 
SADV is another example that utilizes the predictable 
mobility from collecting the real-time information by 
deploying static nodes at each junction to assist with packet 
delivery in VANET under low node densities. The static node 
in SADV enable packets to wait at a junction until path with 
the best delivery ratio becomes available, this could prevent 
packets from being delivered through detoured paths, but the 
packet delivery delay depends on the vehicle density on the 
road. Therefore, as the consequences of SADV characteristics, 
the cost for deploying static nodes at each junction becomes 
an issue, and the results of routing performance may be 
affected by the sensitive of the node density. 
This paper proposes a novel routing protocol called Hybrid 
Traffic-Aware Routing Protocol (HTAR) which is able to 
monitor the real-time traffic status of adjacent roads without 
deploying static nodes and considers both road traffics and 
network traffics simultaneously. HTAR also disseminates the 
results determined from hybrid traffic information to other 
nodes in order to assist with the selection of a more robust and 
efficient routing path. 
The remainder of the paper is organized as follows: In 
Section 2, we introduce the proposed HTAR and its routing 
design; Section 3 presents the performance evaluations of 
HTAR by using NS2 simulator; lastly, we conclude our work 
in Section 4. 
II. A HYBRID TRAFFIC-AWARE ROUTING PROTOCOL 
A. Assumptions 
First, HTAR assumes that all nodes in the network are 
equipped with wireless communication devices with the 
transmission ranges. Any two nodes are able to communicate 
with each other if they are aware of each other’s existence. 
Second, HTAR assumes that each node is equipped with GPS 
device, which enable them to acquire its own position. Third, 
HTAR assumes that the source already knows the current 
position of the destination before transmission by using the 
location service. Finally, HTAR assumes that all nodes are 
aware of the street-level information of the area where they 
are currently positioned. The street-level information should 
contain: (1) each road’s ID and its length (2) each junction’s 
ID, range and its position (3) the relationship of road 
connectivity. 
B. Basic Concepts of HTAR 
1)  Neighbour Information 
In HTAR, nodes are required to periodically broadcast 
“hello” messages to their neighbours in order to update their 
current information. From the updated information, nodes are 
able to select the next suitable hop for data transmission. 
Figure 1. shows the packet format of the hello message. The 
two fields of “Position” represent the current x and y 
coordinate of the node. The second filed, “Road ID” 
represents the identity of a road or the junction that a node is 
currently positioned. “At Junction” defines whether the node 
is in the area of the junction or not. The last field is adjustable 
according to the value of “At Junction”. For example, if the 
value of “At Junction” is true, “Time to Leave Junction 
(TTLJ)” is included in the next field instead of Channel Load. 
On the contrary, if the value of “Channel Load” is true, then 
the value of “At Junction” will be false. “Channel Load” here 
represents the ratio of channel busy time and “Time to Leave 
Junction” stands for the remaining period of time for a node to 
leave a junction. Once the node receives the “hello” message, 
it stores the information of this message in its neighbour 
information table as shown in Figure 2. . 
 
Hello Message 
Position(x) Position(y) Road 
ID 
At Junction 
(True/False)  
TTLJ(True)/ 
Channel 
Load(False)  
Figure 1.  Packet format of a hello message 
Neighbor Information Table  
Node 
ID  
Position
(x)  
Position
(y)  
Road 
ID  
At 
Junction  
TTLJ/ 
Channel 
Load  
Time 
Stamp 
2  1234.56 4567.89 1234  False  0.5  10.0  
6  1200.12 4500.23 :0001  True  35.0  15.0  
Figure 2.  Table format of neighbor information table 
2)  Routing Process in HTAR 
Like GSR and A-STAR, HTAR uses the shortest path 
algorithm to compute its routing paths. In the routing process, 
the junctions are defined as vertices and the roads are 
described as the edges between two vertices. Each edge has its 
own weight. Given two vertices, HTAR is able to find the 
routing path with the lowest association weights. Besides, 
HTAR is a real-time traffic-aware protocol, so the weights it 
weight determination (C) Road weight information 
dissemination. 
 
(A) Traffic Information Collection 
There are two types of traffic information that HTAR is 
going to collect. The first type is the information on the road 
traffic density. We regard the node density as the road density 
and use it to verify the network connectivity of the road. The 
second type is the network traffic congestion information. In 
this type, HTAR uses the channel load as the criterion for 
judging whether the network traffic in this road is congested 
or not. 
For the purpose of collecting the real-time traffic 
information from adjacent roads, the Junc-Tracker delivers a 
Traffic Information Collection (TIC) packet to each adjacent 
Junc-Tracker. In the beginning of information collection, as 
shown in Figure 4, HTAR has divided a road, which is 
between two successive junctions, into several segments by 
doubling the wireless transmission range and then delivers a 
TIC packet. The number of segments (Nseg) is defined as 
follows: 
                 


tx
seg R
LN
2
              (3) 
where L is the length of the road and Rtx is the wireless 
transmission range. 
 
Figure 4.  An example of the road partition. 
During the information collection, the TIC packet tries to 
reach or be nearby the central point in each segment. Hence, 
each relay node attempts to choose the nearest node to the 
central point from its neighbour information table. Once the 
receiving node finds that it is the nearest node to the central 
point in this segment, it includes the node density and the 
channel load of this segment into the received TIC packet. 
Then, this TIC packet is forwarded again to the next segment 
until there is no next hop to forward this TIC packet or the 
designated Junc-Tracker has receive it. If the designated Junc-
Tracker receives the TIC packet, it duplicates this packet and 
sends it back to the source Junc-Tracker. After receiving the 
TIC packet, the Junc-Tracker analyses the traffic information 
included to determine the up-to-date weight of this road. 
Figure 5.  shows the packet format of the TIC packet. The 
two fields of “Junction ID” represent the source junction and 
the destination junction of this packet respectively. “Time 
Stamp” means the propagation time of the TIC packet. 
“Segment ID” is used to distinguish the segments in the same 
road. The fields of “Number of Nodes” and “Channel Load” 
represent the number of nodes and the channel loading in a 
segment of the road.  
 
Traffic Information Collection(TIC) Packet 
Junction ID
(Source) 
Junction ID 
(Destination) 
Time Stamp 
Segment ID Number of Nodes Channel Load 
Figure 5.  Packet format of a TIC packet. 
Road Density Traffic Information 
As the node that is nearest to the central point receives the 
TIC packet, it first calculates the number of neighbours 
without any junction node in its neighbour information table 
and includes this value (NBi) into the corresponding field of 
“Number of Nodes” according to the segment it is currently at. 
Figure 6. shows the example of the TIC packet received by the 
designated Junc-Tracker. Each entry is filled with the traffic 
information at each segment in the road. 
 
Example of a TIC Packet 
A B 10.3 
0 3 0.111 
1 5 0.222 
2 6 0.333 
Figure 6.  An example of the TIC packet received by the Junc-Tracker 
Network Traffic Congestion Information 
As mentioned before, nodes on the road must broadcast 
“hello” messages with the field of “Channel Load”. Once a 
node enters the road, it starts to monitor the channel, trace the 
channel busy time and calculate the channel loading. The 
calculation of channel loading only happens at the time of 
broadcasting “hello” messages, and the value of channel 
loading is determined as follows: 
          )(/)( nTnTCL measurebusyn             (4) 
where CLn is the channel load monitored by node n, Tbusy(n) is 
the channel busy time traced by node n and Tmeasure(n) is the 
total measured time of node n. In order to enable each node to 
monitor the segment it is currently positioned, these three 
values will be rested once the node moves into a new segment. 
Every time when the node that is nearest to the central point 
receives the TIC packet, it chooses the highest value of 
“Channel Load” from its neighbour information table and 
includes this value into the TIC packet. The channel load of 
the segment i (CLi) is defined as follows: 
               nNni
CLCL

 max             (5) 
where N is the set of neighbour nodes. 
(B) Road Weight Determination 
HTAR adopts Dijkstra’s algorithm as its shortest path 
algorithm and the weight of each road can be dynamically 
adjusted according to the collected traffic information. Once 
receiving the filled TIC packet, the Junc-Tracker determines 
the weight of the road (Wroad) as follows: 
Normally, the possibility of transmission disconnection is 
decreased when the number of nodes increases. However, the 
more nodes, the more network congestion might occur, 
especially for making all pairs transmit through the same 
roads. Figure 11 represents the average throughput and 
delivery ratio of the connections which incur network 
congestion in their transmission path. It shows that HTAR still 
has a much better performance than the other two protocols in 
the scenario. It is because HTAR can modify its routing paths 
when it comes to detecting roads with network congestion. On 
the other hands, GyTAR and GSR perform poorly and their 
results are much smoother than those from random pairs. 
Their performances are affected by the network congestion 
because they cannot detect such congestion in advance. Figure 
12 shows the effects when the max hop number road weight 
information is disseminated. In the case of lower node density, 
the road weight information dissemination with higher hop 
number provides Junc-Tracker with more information to avoid 
network segment.  In the case of high node density, the 
probability of network segment decreases so the hop number 
of the dissemination has lesser effects on delivery ratio. Hence, 
in the network with high node density, Junc-Tracker can select 
low hop numbers to reduce the overhead of the road weight 
information dissemination.  
 
IV. CONCLUSIONS  
In this paper, we proposed a novel routing protocol called 
HTAR which utilizes the cooperative traffic information 
collection scheme to collect two types of up-to-date traffic 
information from each road. The first type is the node density 
and the second type is the channel load. By using the hybrid 
traffic information, HTAR is able to determine the robust 
routing paths. We also propose a functional node called Junc-
Tracker. The Junc-Trackers are responsible for collecting the 
traffic information and disseminating the determined weight 
information to neighbour nodes and adjacent Junc-Trackers. 
By doing this, other nodes can select more robust and efficient 
paths during transmission. In order to reduce the cost on 
setting Junc-Trackers, we also propose a mechanism for the 
selection of Junc-Trackers. Simulation results show that 
proposed HTAR has significantly outperformed both GSR and 
GyTAR in terms of delivery ratios and transmission 
throughputs under different scenarios.  
0
2
4
6
8
10
12
14
16
200 250 300 350 400
Th
ro
ug
hp
ut
(M
bi
ts
/s
)
Number of Nodes
HTAR GyTAR GSR
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
200 250 300 350 400
De
liv
er
y R
at
io
Number of Nodes
HTAR GyTAR GSR
 
Figure 10.  Average packet delivery ratio and transmission throughput of all 
connection pairs under different number of nodes. 
 
0
2
4
6
8
10
12
14
200 250 300 350 400
Th
ro
ug
hp
ut
(M
bi
ts
/s
)
Number of Nodes
HTAR GyTAR GSR
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
200 250 300 350 400
De
liv
er
y R
at
io
Number of Nodes
HTAR GyTAR GSR
 
Figure 11.  Average packet delivery ratio and transmission throughput of all 
connection pairs under congested pairs. 
0.5
0.55
0.6
0.65
0.7
0.75
0.8
0.85
0.9
1 2 3 4 5
200
250
300
350
400
 
Figure 12.  Delivery ratio vs. number of hops that road weight information is 
disseminated. 
ACKNOWLEDGEMENT 
The authors would like to thank the National Science 
Council in Taiwan R.O.C for supporting this research, which 
is part of the project numbered NSC98-2221-E-006-222-MY3. 
REFERENCES 
[1] DSRC (Dedicated Short-Range Communications), http://www. 
standards.its.dot.gov/Documents/advisories/dsrc_advisory.htm  
[2]  VICS, http://www.vics.or.jp/ 
[3]  California Path, http://www-path.eecs.berkeley.edu/ 
[4]  Car2Car Communication Consortium, http://www.car-2-car.org/ 
[5]  C. E. Perkins and E. M. Royer, "Ad-hoc On-Demand Distance Vector 
Routing," Proceedings of the 2nd IEEE Workshop on Mobile 
Computer Systems and Applications, pp. 90-100, Feb. 1999. 
[6] B. Karp and H. T. Kung, “GPSR: greedy perimeter stateless routing for 
wireless networks,” Proceedings of the 6th Annual international 
Conference on Mobile Computing and Networking, pp. 243-254, Aug. 
2000. 
[7] C. Lochert et al., “A routing strategy for vehicular ad hoc networks in 
city environments,” IEEE Intelligent Vehicles Symposium Proceedings, 
pp.156-161, June 2003. 
[8] B. Seet et al., “A-STAR: A Mobile Ad Hoc Routing Strategy for 
Metropolis Vehicular Communications,” Third International IFIP-TC6 
Networking Conference, pp. 989-999, May 2004. 
[9] C. Lochert et al., “Geographic Routing in City Scenarios,” ACM 
SIGMOBILE Mobile Computing and Communication Review, vol. 9, 
issue 1, pp. 69-72, Jan. 2005. 
[10] M. Jerbi et al., “An Improved Vehicular Ad Hoc Routing Protocol for 
City Environments,” IEEE International Conference on 
Communications, pp.  3972-3979, June 2007. 
[11] Y. Ding, C. Wang and L. Xiao, “A Static-Node Assisted Adaptive 
Routing Protocol in Vehicular Networks,” Proceedings of the Fourth 
ACM International Workshop on Vehicular Ad Hoc Networks, pp. 59-
68, Sep. 2007. 
[12] TraNS, http://trans.epfl.ch/ 
[13] TIGER Map, http://www.census.gov/geo/www/tiger/ 
 
results show that our FEC mechanisms not only avoid most of 
burst errors but also save bandwidth by selecting appropriate 
amount of redundancy. 
This paper is organized as follows: In Section II, we 
describe the problem of FEC mechanisms based on the 
average quality metric and propose a metric for short-term 
quality. In section III, adaptive FEC mechanisms with the 
short-term quality metric are proposed for various wireless 
error models. In Section IV, we simulate proposed 
mechanisms and compare them with some traditional FEC 
mechanisms. Finally, we conclude in Section V. 
II. PROBLEM FORMULATION 
High PER seriously degrades media quality in multimedia 
applications and adaptive FEC mechanisms aim to alleviate 
the influence of packet errors. Conventionally, the typical 
steps of FEC schemes are as follows [2][5][7][8]: 
 
Step1: The transmitter collects feedback information from a 
receiver by ACK or RTCP packets [11]. 
Step2: The transmitter uses one of Maximum Likelihood 
Estimator (MLE) and Exponential Weighted Moving Average 
(EWMA) algorithms to smooth the observed PER. 
Step3: Finally, the transmitter selects an appropriate FEC 
solution (i.e. n and k) to maximize the media quality or 
achieve a target PER calculated by the predefined recovery 
error function. 
 
However, the estimated error rate cannot represent the 
random and dynamic error behavior explicitly. Figure 1 shows 
the dynamics of PER before and after FEC recovery in the 
case of Gaussian noise channel [12] with PER = 0.1 and target 
PER = 0.05. Although the average PER is within expected 
range, the PER during some short period is worse than user-
tolerance though FEC is used. The voice quality even gets 
worse when packet error behavior approximates Gilbert Error 
Model or higher order Markov chain [13]. Hence, adaptive 
FEC mechanisms must take the dynamics of error rate into 
account. For the goal, we first define a new quality metric, 
called as SQ, to represent the media quality of T seconds or N 
packets. The value of T or N depends on human psychology. 
The existing voice quality measurement process [14] selects 
the standard 8-second samples or 400 20ms-packets for the 
quality estimation. ITU-R recommends limiting the duration 
of image sequences for subjective assessment to less than 10s 
[15]. For simplicity, we ignore the dependence of media 
quality called recency effects described in [16]; it means that 
SQ is independent of each other. 
Based on SQ, we model the dynamics of packet errors by 
the probability that short-term quality SQ is worse than user- 
satisfactory quality Qt, denoted as Pr{SQ < Qt
[17]
}. For voice, 
according to , the codec types, PER and end-to-end delay 
primarily affect voice quality. For image and video, the 
reconstructed video quality distortion is obtained as the sum of 
the codec distortion and network error distortion. Codec 
distortion is the distortion due to video compression. It is the 
function of source rate. Network error distortion is a function 
of the packet error rate. In this paper, we focus on the effects 
of packet errors on media quality. We assume that the codec 
and delay impairment for media quality is constant. It is 
reasonable when we use the constant codec rate and limit the 
maximum number n of FEC candidates to avoid excessive 
end-to-end delay. Hence, the objective of FEC recovery can 
be translated to Pr{pi < Pt} where pi is the observed PER in 
each N-packets after FEC recovery and Pt is a target error rate 
derived from Qt. In this paper, we call Pr{pi  < Pt} SQ 
violation probability. The target error rate depends on the 
user’s expectation. Codecs with concealment techniques 
conceals some degrees of packet errors but fail when PER is 
larger than a threshold PERmax [2] . Therefore, the Pt must be 
smaller than PERmax
[11]
. If the used codec does not support 
concealment techniques, the existing voice quality 
measurement, such as E-Model , can be also used to 
obtain Pt. For video, the distortion matrix consisting of the 
reconstruction distortion values for video frames is used to 
acquire a proper value of Pt [18][19]. I, B and P frames have 
various levels of significance so FEC algorithms should assign 
different Pt [20] for unequal error protection . 
0
0.02
0.04
0.06
0.08
0.1
0.12
0.14
0.16
0 1 2 3 4 5 6 7 8 9 10
Before Recovery After Recovery
time (s)
Pa
ck
et
Er
ro
r R
at
e
 
Figure 1. The dynamics of error behavior. 
 
For adaptive FEC mechanisms, forcing the SQ violation 
probability close to zero will cost a large portion of bandwidth. 
By the fact that a user is also able to bear some degree of SQ 
violation probability, we define the objective function for 
adaptive FEC mechanisms as Pr{pi < Pt α} < , where α  is a 
user-defined threshold. The smaller value of α is, the higher 
media quality user obtains. We do not discuss the relation 
between the threshold and media quality because there should 
be more psychological experiment involved to verify. 
However, with no doubt, lower PER leads to better media 
quality. 
III. AN EFFICIENT ADAPTIVE FEC ALGORITHM 
FOR SHORT-TERM QUALITY CONTROL 
In this section, we present an adaptive FEC mechanism 
which adopts the proposed SQ to derive an appropriate FEC 
solution with respect to various error models and to achieve 
the user satisfactory quality. 
A. Wireless Error Models 
The variation of PER depends on the network 
characteristics. There have been many researches devoted to 
model the characteristics of wireless channel [12]-[13]. 
Specifically, they modeled the packet error behavior by 
Pr{0i-1 ),( nmR|1}. Then we denote the probability  that m-1 
packet errors in the following n-1 packets and it can be 
computed by recurrence. Thus, 
nm
nm
inmRig
nG
nmR mn
i
≤≤
≥=



−−= ∑+−
=
 2for 
1 and 1for         
),1()(
                         )(
),( 1
1
 (7) 
where 
 
otherwise    
1   if
)1(
             1
)( 2
=


−= −
i
pq
iG i  (8) 
 
otherwise    
1   if
)1(
         1
)( 2
=


−
−= −
i
ppq
q
ig i  (9) 
Based on ),( nmR , we have the probability pa
 
 that a packet 
is recovered by Reed Solomon FEC by 
∑
=



 −+==
k
i
RECa iPqp
p
k
qpknfp
1
2 )(
1),,,(  (10) 
with 
 ∑ ∑−
=
−−
=
+−−+=
kn
l
li
m
BREC inmlRimRPiP
1
)1,1min(
0
)1,(),1()(  (11) 
where )/( qppPB += and )(iPREC  represents the probability 
that the i-th packet is lost but recovered by using the Reed-
Solomon FEC RS(n,k). For a renewal error process, since the 
FEC blocks are independent and identically distributed, we 
regard each FEC block as a Bernoulli random variable with 
probability pa
 
. In this paper, FEC parity data is piggybacked 
into consequent packets; it means N/k FEC blocks are in N 
packets. Therefore, N packets in Gilbert Error Model translate 
to N/k FEC blocks in Bernoulli Error Model. Based on (5), we 
obtain 
)/(
)1(ˆ
kN
ppzpp aaaN
−+< α  (12) 
We summarize the FEC mechanism for Gilbert Error 
Model in Figure 4 which has the similar idea as Figure 3. 
 
D. Error Control for Unknown Error Model 
In an unknown error model, a receiver records short-term 
PER pi
iWiWi ppp ˆ....,ˆ,ˆ 21 +−+−
 and LS of the N packets by a sliding window of size 
W. Suppose that the past W short-term PERs in the sliding 
window is and its sorted version is simply 
denoted as WPPP ,...,, 21 , where WPPP ≤≤≤ ...21 . The 
probability that short-term PER, Npˆ , is not greater than P
r
WrPpPPF rN
r ,...,2,1),ˆ()( =≤=
 
can be obtained by 
 (13) 
We assume that the order statistics is uniform distributed 
and the expectation of F(Pr
 
)  
Wr
W
rPFE r ,...,2,1,
1
))(( =+=   (14) 
 
 
Figure 4. Adaptive FEC mechanism for Gilbert Error Model. 
 
 
Figure 5. Adaptive FEC mechanism for unknown error model. 
 
Then, given a threshold α , the order index is obtained by 
 )1)(1(ˆ α−+= Wr . However, due to the lack of the error 
relation between packets, it is impossible to find the close 
form of the recovery PER. Hence, we use a heuristic method 
to find an appropriate FEC solution. If the r-th order statistics 
in sliding window is selected, the loss sequence in the r-th 
order statistics, LSr, is used to select the FEC solutions which 
can alleviate the PER of LSr within target PER, Pt
Figure 5
. We 
summarize the FEC mechanism for unknown error model in 
. 
By using a larger window size W, it is possible to estimate 
the PER more accurately. However, it causes the window-
based estimator responds more slowly to the dynamics of 
network errors. Hence, the determination of W is subject to 
trade-off between accuracy and response time. 
 
IV. SIMULATION RESULTS 
Input: a FEC solution table Γ 
When gathering the LS of N packets, do 
1. Record the new LS1  
2. n1 = the number of lost packets in LS1  
3. p1 = n1/N and insert p1 into the sliding 
window of size W. 
4. Select the r-th order statistics pr and its loss 
sequence LSr 
5. S = NULL 
6. For each (nj, kj) in Γ 
LSr′ = LS recovered from LSr by (nj, kj) 
n1′= the number of lost packets in LSr′ 
pa = n1′/N 
if (pa < Pt) 
    S = S ∪ (nj, kj) 
7. Find the set T which nj / kj is minimum in S 
8. Select (n, k) which n is minimum in T 
9. Select the codec i which ri*n/k < R 
Input: a FEC solution table Γ 
When gathering the LS of N packets, do 
1. Estimate Gilbert parameter pˆ  and qˆ  
2. S = NULL 
3. For each (nj, kj) in Γ 
)ˆ,ˆ,,(2 qpknfp jja =  
)//()1(ˆ kNppzpp aaaN −+= α  
if ( Npˆ  < Pt) 
S = S ∪(nj, kj) 
4. Find the set T which nj / kj is minimum in S 
5. Select (n, k) which n is minimum in T 
6. Select the codec i which ri*n/k < R 
FEC solution no. than AFEC-SQ (B) and AFEC-SQ (G). The 
main reason is that “AFEC-SQ (order stat. in B or G)” 
dynamically adjusts FEC solution no. when the observed error 
rate in sliding window is lower. AFEC-SQ (B or G) selects the 
FEC solution based on the parameters of error models 
observed by the average algorithm but it obtains lower SQ 
violation as shown in Figure 8. This effect comes from the 
dynamic adjustment of AFEC-SQ with order statistics by the 
observation of sliding window and can be alleviated by using 
the EWMA algorithm for AFEC-SQ (B). 
0
0.05
0.1
0.15
0.2
0.25
0.3
0.35
0.4
0.45
0.5
0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 0.5
AFEC-SQ (B) AFEC-SQ (G)
AFEC-SQ (order stat. in B) AFEC-SQ (order stat. in G)
α
M
ax
 SQ
 V
io
la
tio
n 
Pr
. (
α)
 
Figure 9. AFEC-SQ in various alpha values. 
0
0.2
0.4
0.6
0.8
1
1.2
AFEC-Optimal AFEC-SQ (B)
AFEC-SQ (G) AFEC-SQ (order stat.  
AFEC-SQ (order stat. in G)
  
ba
nd
w
id
th
 u
til
iza
tio
n
 
Figure 10. Bandwidth utilization for various mechanisms. 
V. CONCLUSIONS 
The dynamics of packet error rate results in unstable quality. 
In this paper, we propose a new quality measurement 
approach to evaluate the effect of unstable media quality and 
AFEC-SQ to select an appropriate FEC solution to alleviate 
the uncertainty. In the simulation results, the proposed AFEC-
SQ meets the objective function very well and SQ estimates 
short-term quality more accurately than average in the AFEC-
Avg. AFEC-SQ also occupies less bandwidth than AFEC-
Optimal while providing near the same quality. 
ACKNOWLEDGEMENT 
The authors would like to thank the National Science 
Council in Taiwan R.O.C for supporting this research, which 
is part of the project numbered NSC98-2221-E-006-222-MY3. 
 
REFERENCES 
[1] “Options for Repair of Streaming Media,” RFC 2354, June 1998. 
[2]  J.-C. Bolot, A. Vega Garcia, “The Case for FEC-Based Error 
Control for Packet Audio in the Internet,” ACM Multimedia 
Systems, 1997. 
[3] A. Nafaa, L. Murphy, and T. Taleb, “Forward Error Correction 
Strategies for Media Streaming over Wireless Networks,” IEEE 
Communications Magazine, December 2007, pp.72-79. 
[4] A. Basalamah and T. Sato, “A Comparison of Packet-Level and 
Byte-Level Reliable FEC Multicast Protocols for WLANs,” 
IEEE GLOBECOM, November, 2007, pp. 4702-4707. 
[5] J. Cai, Q. Zhang, W. Zhu, and C. W. Chen, “An FEC-based 
error control scheme for wireless MPEG-4 video transmission,” 
IEEE Wireless Communications and Network Conference 
(WCNC), 2000,  pp. 1243-1247. 
[6] J. Feng, C. Xuefen, P. Li, W. Yining, L. Guan, “Adaptive FEC 
Algorithm Based on Prediction of Video Quality and Bandwidth 
Utilization Ratio,” Intl’ Conf. on Advanced Information 
Networking and Applications, May, 2009, pp. 182-188. 
[7] A. Moid and A. O. Fapojuwo, “Heuristics for Jointly 
Optimizing FEC and ARQ for Video Streaming over IEEE 
802.11 WLAN,” IEEE Wireless Communications and Network 
Conference (WCNC), April, 2008, pp. 2141-2146. 
[8] C. Boutremans and J.-Y. Le Boudec, “Adaptive Joint Playout 
Buffer and FEC Adjustment for Internet Telephony,” in Proc. 
IEEE INFOCOM, April 2003, vol.1, pp. 652-662. 
[9] “The E-Model, a computational model for use in transmission 
planning,” ITU-T Recommendation G.107, May 2000.  
[10] S. Floyd, M. Handley, J. Padhye, and J. Widmer, “Equation-
based Congestion Control for Unicast Applications”, in Proc. 
ACM SIGCOMM, May 2000, pp. 43-46. 
[11] H. Schulzrinne, S. Casner, R. Frederick and V. Jacobson, "RTP: 
A Transport Protocol for Real-Time Applications", RFC 1889, 
January 1996. 
[12] C.-L. Chen, C.-Y. Yu, C.-C. Su, M.-F. Horng, and Y.-H. Kuo, 
“Packet Length Adaptation for Energy-Proportional Routing in 
Clustered Sensor Networks,” The 2nd IFIP Intl’ Symposium on 
Network Centric Ubiquitous Systems (NCUS), 2006, pp. 32-42. 
[13] H. Sanneck and G. Carle, “A Framework Model for Packet Loss 
Metrics based on Loss Run Length,” Proc. SPIE/ACM SIGMM 
MMCN, January, 2000, pp.177-187. 
[14] “ITU-T coded-speech database”, ITU-T Recommendation P. 
Suppl 23, February 1998. 
[15] CCIR Recommendation 500-3, “Method for the Subjective 
Assessment of the Quality of Telvision Pictures,” 
Recommendations and Reports of the CCIR, 1986, XVIth 
Plenary Assembly, Vol. 6, Part 1. 
[16] A. D. Clark, “Modeling the Effects of Burst Packet Loss and 
Recency on Subjective Voice Quality”, in Proc. Of IP 
Telephony Workshop, March 2001, pp. 123-127. 
[17] R. G. Cole and J. H. Rosenbluth, “Voice Over IP Performance 
Monitoring”, in Proc. SIGCOMM, April 2001, vol. 31, pp. 9-24. 
[18] W. Tu, W. Kellerer, and E. Steinbach, “Rate-Distortion 
Optimized Video Frame Dropping on Active Network Nodes,” 
Packet Video Workshop, December, 2004. 
[19] D. Tian, X. Li, G. A.-Regib Y. Altunbasak, and J. R. Jackson, 
“Optimal Packet Scheduling for Wireless Video Streaming with 
Error-Prone Feedback,” IEEE Wireless Communications and 
Network Conference (WCNC), March, 2004, pp. 1287-1292. 
[20] T. Manimekalai, Dr. M. Meenakshi, and J. Abitha, “A Cross 
Layer Design Strategy for Video Transmission with Unequal 
Error Protection,” Wireless and Optical Communications 
Networks (WOCH), April, 2009, pp. 1-5. 
[21]  “Network Simulator,” Avail. from http://www.isi.edu/nsnam. 
 
97 年度專題研究計畫研究成果彙整表 
計畫主持人：郭耀煌 計畫編號：97-2221-E-006-144-MY3 
計畫名稱：實現智慧家庭生活空間之情境感知服務自動化技術研發 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際
已達成數)
本計畫
實際貢
獻百分
比 
單位 
備註（質化說明：如
數 個 計 畫 共 同 成
果、成果列為該期刊
之封面故事...等）
期刊論文 1 1 100% 
針對本計畫執行成果,
在系統建置與行為模式
分析技術上已發表之國
內期刊論文共一篇: 
1.  Meng-Hsuan Fu, 
Kuan-Rong Lee, 
Ming-Chyi Pai, 
Yau-Hwang Kuo, ’
Development of 
TV-Based Elderly 
LOHAS Living Space 
System with 
Innovation Network 
Services,’ IPPR 中
華民國影像處理與圖形
識別學會「影像與識別」
季刊，ISSN 2074-6903, 
vol. 16, no 1, Mar. 
2010. 
研究報告/技術報告 0 0 100%  
國內 論文著作 
研討會論文 2 2 100% 
篇 
針對本計畫在執行成
果,在情境資訊之探勘
與整合技術,可信賴情
境資訊管理與推理,使
用者為中心之普及服務
發現與合成,服務導向
資源分配與規劃, 以及
情境感知服務驗證等相
關議題之研究已發表國
內會議論文二篇: 
1. Meng-Hsuan Fu, 
Yau-Hwang Kuo, 
Kuan-Rong Lee and 
已獲得件數 0 0 100%  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 24 15 100% 
本計畫參與人力碩士生
為 
第一年 12 人次 
第二年 5人次 
第三年 6人次 
皆已達預期達成數 
博士生 24 15 100% 
本計畫參與人力博士生
為 
第一年 6人次 
第二年 4人次 
第三年 5人次 
皆已達預期達成數 
博士後研究員 0 0 100%  
參與計畫人力 
（本國籍） 
專任助理 3 3 100% 
人次 
本計畫參與人力專任助
理為 
第一年 1人次 
第二年 1人次 
第三年 1人次 
皆已達預期達成數 
國外 論文著作 期刊論文 4 4 100% 篇 針對本計畫執行成果,
在系統建置與行為模式
分析技術上已發表之國
際期刊論文共四篇: 
1. Po-Cheng Huang, 
Sz-Shian Lee, 
Yaw-Huang Kuo and 
Kuan-Rong Lee, ’A 
Flexible Sequence 
Alignment Approach on 
Pattern Mining and 
Matching for Human 
Activity 
Recognition,’ 
Elsevier Expert 
用者為中心之普及服務
發現與合成,服務導向
資源分配與規劃, 以及
情境感知服務驗證等相
關議題之研究已發表國
際會議論文五篇: 
1. Kuan-Rong Lee, 
Meng-Hsuan Fu and 
Yau-Hwang Kuo, ’A 
Hierarchical 
Scheduling Strategy 
for The Composition 
Services 
Architecture Based on 
Cloud Computing,’ 
2nd International 
Conference on Next 
Generation 
Information 
Technology (ICNIT 
2011), Korea, Jun. 
21-23, 2011. (EI) 
2. Hsieh-Wei Chen, 
Kuan-Rong Lee, 
Hsun-Hui Huang and 
Yaw-Huang 
Kuo, ’Unsupervised 
Subjectivity-Lexicon
Generation Based on 
Vector Space Model 
for 
Multi-Dimensional 
Opinion Analysis in 
Blogosphere,’ 2010 
International 
Conference on 
Intelligent 
Computing 
(ICIC2010), China, 
Aug. 18-21, 2010. 
(EI) 
3. Wei-Tsung Su, 
Yen-Chieh Tseng, 
Yau-Hwang Kuo and 
Kuan-Rong Lee, ’A 
Multi-Objective 
Utility-based 
Approach for 
Service-Oriented 
博士生 0 0 100%  
博士後研究員 0 0 100%  
（外國籍） 
專任助理 0 0 100%  
其他成果 
(無法以量化表達之
成果如辦理學術活
動、獲得獎項、重要
國際合作、研究成果
國際影響力及其他協
助產業技術發展之具
體效益事項等，請以
文字敘述填列。) 
無 
 成果項目 量化 名稱或內容性質簡述 
測驗工具(含質性與量性) 0  
課程/模組 0  
電腦及網路系統或工具 0  
教材 0  
舉辦之活動/競賽 0  
研討會/工作坊 0  
電子報、網站 0  
科 
教 
處 
計 
畫 
加 
填 
項 
目 計畫成果推廣之參與（閱聽）人數 0  
 
