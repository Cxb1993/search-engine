2 
 
A. 瞭解視訊的結構與處理 
此研究計畫的實驗視訊資料，以 AVI 格式為主。從各種環境下收集的大量視訊，
可讓研究參與者，以人眼實際觀察不同環境的特性與差異性，並構思相關處理演算法。
系統開發實做時，將以 Visual Studio 2005 為開發環境，利用 C#語法，如何讀出 AVI
檔、如何播放 AVI 檔、如何另存 AVI 檔開始。逐步從 AVI 檔案中，將各視訊流(stream)，
與其中的各畫面影像擷取出來，進而開發相關的影像處理模組，以達成此研究計畫之
各階段性任務。 
B. 實際開發電腦視覺為基礎之智慧型運輸系統的交通數據收集 
雖然建構理想的智慧型運輸系統需要整合很多不同領域之軟硬體技術，參與此次
計畫之研究人員與合作企業員工，均可在需求訪談、實際視訊畫面觀察、技術分析探
討、規格制訂與模組規劃、程式設計與開發、系統整合暨測試修正、實際應用及後續
需求討論等一系列之產學合作過程，學習並實際開發且導入電腦視覺技術，應用於各
式交通數據之收集與分析。 
技術研發成果說明： 
本系統的研發目的乃是希望透過多攝影機分別拍攝交叉路口的不同道路(如圖 1所
示)，擷取各時間點之視訊畫面，並統計自[來源區域]行駛至[目的區域]的車輛數目。欲
判定兩區域畫面之車輛物體是否為相同車輛，並進行數量之統計，必須將相關步驟分
成[訓練階段]與[測試階段]兩大類： 
 
A. 訓練階段之背景模型訓練 
本研究模擬各攝影機固定裝設於路口高架上，以斜角俯視方式拍攝交叉路口
不同道路區域。拍攝所得之連續視訊畫面，除了攝影機有時出現些微的晃動之外，
背景畫面尚稱穩定；因此，可利用簡易且效果良好的背景相減方法，進行各畫面
之前景像素判定，以偵測可能的車輛物體。欲採用背景相減法偵測前景物體，必
須先建立拍攝環境的背景模型。本系統針對各攝影機拍攝之不同道路區域視訊，
分別從一段學習用之視訊中，不需特別挑選，擷取出數量夠多之畫面影像(B1, B2, …, 
BN)。然後，針對每一張畫面影像 Bi均統計相同位置(x, y)之像素顏色 PixVal((x,y),i)的分
圖 1. 以多攝影機拍攝交叉路口各道路區域 
4 
 
能與絕非。其中，可能的車道像素是否改列為[確定]等級，則視確定車道像素之數
量與緊密程度而彈性調控。對於調控後之確定車道像素區域，先利用 Sobel 運算
方法找出所有邊緣點(boundary pixels)，再透過霍夫轉換(Hough transform)找到可
通過數量夠多邊緣點的直線位置，並以車道邊線成組、以及寬度變化比例特性，
確定各車道之位置(如圖 3 所示)。 
 
雖然透過畫面像素之色彩變動分析，可針對常有車輛行駛、且循序前進之道
路，自動判定車道位置；然而，車輛往往行駛於車道中間區域，或者某些路段車
輛較稀少，利用前述分析方式，不易找到明顯之車道邊界。因此，對於拍攝環境
之道路，若車道間具有明顯的分隔線，本研究再利用偵測並組合分隔線的方式，
在背景畫面中，找出車道位置。利用此兩種方式，進行車道區域的判定，可提升
精確度，並擴大應用範圍。 
 
在台灣，常見的車道分隔線為白色與黃色兩種，本研究在訓練階段先從多張
畫面中框選各種車道分隔線影像，用以統計兩色分隔線的色彩分布情況，並訂定
適當分布範圍。然後，針對經過訓練所得之背景影像，先找出所有可能的車道分
隔線像素，經過簡單擴張運算(dilation)後，得到較完整的車道分隔線，並將相近
的分隔線(雙黃線、雙白線等)合併。再利用細線化技術(thinning)，將寬度不一的
分隔線正規化成單一像素寬度；最後，同樣利用霍夫轉換(Hough transform)得到
車道分隔區域 (如圖 4 所示) 。 
圖 4. 車道區域偵測(a)道路畫面(b)車道分隔線像素(c)分隔線細線化(d)霍夫轉換結果
(a) (b) (c) (d) 
圖 3. 車道區域偵測(a)道路畫面(b)車道像素判定(c)邊緣點偵測(d)霍夫轉換結果 
(a) (b) (c) (d) 
6 
 
從物體邊緣往內找到第一個邊緣點出現的位置，將所有距離累加起來，即是 PBA
特徵值。然而，車輛物體的各方向外型均應視為重要特徵，不應只考慮整體的背
景面積，而是各方向的背景面積均可視為外型特徵的一種。首先，將車輛物體分
別依水平與垂直方向，各切成兩等份；並分別以物體邊界由上往下、由下往上、
由左往右、由右往左方式，計算並記錄上、下、左、右各區域的背景面積特徵(如
圖 6 所示)。 
 
E. 測試階段之車輛特徵比對 
由於本計畫所開發的系統，乃是利用數台固定式攝影機分別拍攝交叉路口的
不同道路，分別從各視訊畫面中擷取出車輛物體後，希望利用特徵比對方式，找
出[來源區域]與[目的區域]中是否出現相同車輛，以累計轉向之車輛數目。然而，
即使是同一部車輛，在不同角度的拍攝下，外型特徵也會有所不同；本研究特別
針對車輛位置與車輛外型兩項特徵，分別進行特徵值的轉換，可大幅改善特徵值
的一致性，以加強比對的準確度。 
 
針對車輛位置的特徵轉換，本研究先在[來源區域]與[目的區域]定義出兩條基
準線，包括前方基準線Linef與後方基準線Lineb (如圖7所示)；正常情況下，在[來
源區域]行進之車輛，距離Linef越近，那麼行駛至[目的區域]時，必然會距離Linef
越近。利用此特性，本系統以前方基準線Linef為基礎，計算每個車輛物體Oi之中
心位置CenPos(Oi)到Linef之距離Dist(CenPos(Oi), Linef)，並與兩基準線距離
Dist(Linef, Lineb)相除，計算距離比例DistRat(Oi)(如公式6)，當作該車輛物體位置
Linef 
Lineb 
Lineb 
Linef
(a) (b) 
圖 7. 基準線定義(a)來源區域(b)目的區域 
圖 6. 車輛物體之周圍背景面積(PBA)特徵抽取 
8 
 
內，擷取之[來源區域]畫面Frmori_t-p, …, Frmdes_t-q中，出現過的車輛物體Carori_1, …, 
Carori_n，進行車輛特徵比對。若可找出相似度夠高的對應組合，則可判定Cardes_i
是由[來源區域]行駛至[目的區域]的車輛，並予以累計。依照車輛特徵之穩定性、
區隔性與重要性，本研究將特徵比對順序定為：車輛位置特徵Æ車輛外形特徵Æ
車輛顏色特徵；一旦重要特徵的相似度不高，即判定非屬相同車輛，不再進行後
續特徵的比對。 
 
首先，各畫面車輛物體位置轉換為與基準線的距離比例特徵後，即可對來自
[來源區域]與[目的區域]的兩車輛物體進行比對；然而，由於本研究採用時間差比
對機制，[目的區域]中的某部車輛Cardes_i(擷取自時間t的畫面)可能需與多張時間範
圍內的[來源區域]車輛物體進行比對，時間差異不同也會導致距離比例的相似度有
所不同。因此，對於[來源區域]的車輛物體Carori_j，本研究將考慮該畫面擷取的時
間點r與時間範圍[p, q]的比例，計算出的車輛位置差異會依照比例做調整，以符合
車輛的移動特性。 
車輛外形特徵比對必須與事先建置好的外形特徵群集進行比對。首先，把目
前[目的區域]畫面偵測到的車輛物體Cardes_i，計算其外形特徵並與事先訓練所得的
各分群的特徵值(Featclr1, Featclr2,…, Featclrk)進行比對，找到最相近的群組clrt；並
將時間差異範圍內，[來源區域]出現過的車輛物體Carori_1, …, Carori_n，分別與事
Carori={CarA1, CarA2, CarA3, CarA4, CarA5,..., CarAn} 
clr3 
 
B21 
B22 
． 
． 
B2n2 
Cargoal={CarB1, CarB2, CarB3, CarB4, CarB5,..., CarBn}
clr1 
 
B11 
B12 
 ． 
 ． 
B1n1 
clr2 
 
B21 
B22 
． 
． 
B2n2 
clrk 
 
Bk1 
Bk2 
． 
． 
Bknk 
…… 
clr1 
 
A11 
A12 
 ． 
 ． 
A1n1 
clr2 
 
A21 
A22 
． 
． 
A2n2 
clr3 
 
A21 
A22 
． 
． 
A2n2 
clrk 
 
Ak1 
Ak2 
． 
． 
Aknk 
…… 
圖 9. 車輛外形特徵分群流程 
收集並抽取
車輛特徵 
目的區域車輛
特徵分群 
來源區域車輛
特徵對應分群 
10 
 
推廣及運用的價值：如增加產值、增加附加價值或營利、增加投資/設廠、增
加就業人數………等。 
本產學合作計畫以合作企業（亞聯工程顧問公司）的需求為主，開發具技術
研發與實際應用特性的系統。需求標的之「交叉路口轉向車流量統計」，目前是聘
用臨時人員站在其中一個目的路口，以肉眼觀察並以手按計數器方式，統計從來
源路口轉向至此目的路口的車輛數目。然而，若必須根據不同車輛種類各別統計，
以及各目的路口均需多個專人進行統計，始可得到各式車輛種類從來源路口轉向
至各目的路口的數量。長時間的人眼注視以及手動累計，往往因疲累或偷懶習性，
使得轉向車流統計耗時且不易精確。 
本計畫透過影像分析技術，從視訊畫面中擷取車輛物體並判定車輛類型，並
抽取適當的特徵向量後，即可利用時間差異範圍內，將[來源區域]的車輛物體與[目
的區域內]的車輛物體，進行特徵向量的比對，進行車輛匹配，統計從[來源區域]
轉向至各[目的區域]的各類車輛數目，達到合作企業希望可省時省力且精確度和穩
定度均可接受的需求。 
本研究以實用的角度，將影像分析技術應用於智慧型運輸系統中的道路資訊
收集，讓企業可善用學校之研究人力資源，以產學合作方式，提高產、教、學、
研各方面的互動與彼此支援。此計畫之技術研究與系統開發，以視訊攝影機為畫
面擷取設備、自行開發智慧型之電腦視覺技術核心、並以交通運輸建設所需之道
路資訊蒐集為應用，不管對資訊軟體人才培養、學術研究、產業界甚或是國家交
通建設之發展，均有顯著的貢獻。 
 
※ 備註：依規定，精簡報告係可供國科會立即公開之資料，並以 4 至 10 頁為原則，如有圖片或照片請以附
加檔案上傳，如因涉及專利、技術移轉案或其他智慧財產權、影響公序良俗或政治社會安定等，
而不宜對外公開者，請勿將其列入精簡報告；原則上本會將公開精簡報告，完整報告原則上不
予公開。 
98年度專題研究計畫研究成果彙整表 
計畫主持人：曾逸鴻 計畫編號：98-2622-E-212-009-CC3 
計畫名稱：應用影像分析技術於路口轉向車流量之調查 
量化 
成果項目 實際已達成
數（被接受
或已發表）
預期總達成
數(含實際已
達成數) 
本計畫實
際貢獻百
分比 
單位 
備 註 （ 質 化 說
明：如數個計畫
共同成果、成果
列 為 該 期 刊 之
封 面 故 事 ...
等） 
期刊論文 0 0 100%  
研究報告/技術報告 1 1 100%  
研討會論文 3 3 100% 
篇 
 
論文著作 
專書 0 0 100%   
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 5 5 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國內 
參與計畫人力 
（本國籍） 
專任助理 0 0 100% 
人次 
 
期刊論文 0 0 100%  
研究報告/技術報告 0 0 100%  
研討會論文 0 0 100% 
篇 
 
論文著作 
專書 0 0 100% 章/本  
申請中件數 0 0 100%  專利 已獲得件數 0 0 100% 件  
件數 0 0 100% 件  
技術移轉 
權利金 0 0 100% 千元  
碩士生 0 0 100%  
博士生 0 0 100%  
博士後研究員 0 0 100%  
國外 
參與計畫人力 
（外國籍） 
專任助理 0 0 100% 
人次 
 
 
