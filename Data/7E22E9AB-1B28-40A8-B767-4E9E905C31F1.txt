 2
汽車上安全氣囊之加速度量測器，精密
機械微幫浦及自動化設備之流量計等。
在計畫中，用作流體量測的半圓柱形電
容型感測器由前計畫提出，討論了計算
半圓柱形的電容型感測器電容的數值分
析和方法。此外介面電路執行流體量測
的電路功能，也在前計畫中完成；HSPICE
模擬驗證了介面電路的相關函數，這些
模擬結果成功證實半圓柱形的電容型感
測器使用於流體量測的可行性。接下來
進行此電容式介面的嵌入式系統開發，
其特點在設計了一個自動選定量測範圍
(Auto Ranging)的電路，計畫中採取範
圍由0.01 Hz ~ 50 MHz，自動選頻的電
路由比較器選擇出閘門時間最短，且誤
差在1%範圍內的計數值輸出，其改善了
傳統計頻器必需手調閘門時間以提升精
準度；再加入電容-頻率轉換以及軟體程
式的編程，可同時應用在電容式微小感
測器的量測。 
此電容式介面的嵌入式系統使用Altera 
DE2 發展板做為硬體平台，以Verilog 
硬體描述語言與高度整合性的SoPC 
Builder 實現嵌入式之頻率偵測，本獨
立系統平台可達到體積小型化及低成本
等要求，將可運用於脈衝頻率量測及多
種電容式感測器量測系統。 
 
三 研究成果 
 
本計劃所採用的計頻方法為直接
計頻法，首先我們要有一個已知頻率的
時脈做為“基準時脈＂，在此我們使用
DE2 開發板上的震盪器所產生的時脈
（50 MHz）作為基準時脈 f0，設從電容-
頻率轉換介面電路所產生的待測時脈為
fx，使用兩個 32 位元的計數器同時在一
段等長的時間內計算基準時脈及待測時
脈的脈衝數，我們稱這段時間為“閘門
時間＂（gate time），當閘門時間開始
時，兩計數器同時開始計數基準時脈及
待測時脈的脈衝數，當閘門時間停止
時，同時停止兩個計數器的計算動作，
直到下一個閘門時間來臨才再次致能計
數器；將計數器計算所得的值送到緩衝
端並將計數器清除為 0，假設緩衝端所
得的基準時脈脈衝數為 N0，待測時脈脈
衝數為 Nx，則我們可由式（3.1）推斷出
待測時脈的頻率，計頻電路的架構如圖
3.1 所示 
0
0
N
Nff xx
×=                    
（3.1） 
 
 
圖 3.1 計頻電路架構 
 
 
以Altera Quartus II設計一簡單計頻電
路如圖3.2所示，其輸入基準時脈f0為50 
MHz，待測時脈為25 MHz，經過編譯電路
正確，觀察其時序模擬波形如圖3.3所
示，可得基準時脈f0計數所得的脈衝數
N0為74，待測時脈fx計數所得的脈衝數Nx
為37，則利用式（3.1）如我們所預期，
可得知fx = 25 MHz。 
 
 4
量測電路的架構如圖 3.5 所示。 
 
圖 3.5 脈波寬度量測電路架構 
結合上節所述架構即可得到整個完整的
頻率脈衝計數電路，其最高頻率偵測受
限於 Altera DE2 開發板時脈，可達
50MHz，最低頻則受限於 32 位元計數器
的最大計數量可量測至 0.01Hz，誤差皆
小於 1%，由 Altera Quartus II 編呈的
電路如圖 3.6 所示，輸入為 Altera DE2
發展板上的時脈及電容-頻率轉換介面
電路的輸出頻率，輸出則為這兩時脈的
計數值。 
 
圖 3.6 頻率計算電路 
 
最後欲執行的量測部份，將結合感測器
的電容-頻率轉換，計頻電路以及SoPC 
嵌入式系統整合連結之後，即可實現具
頻率計算功能及電容式感測器量測的嵌
入式系統。擬以Altera Quartus II及
SoPC 開發系統編程完整電路如圖3.7所
示。 
 
VC
C
C
LO
C
K
_5
0
IN
PU
T
VC
C
G
P
IO
_0
[3
]
IN
PU
T
do
w
n 
co
un
te
r
cl
oc
k
q[
19
..0
]
di
v2
0
in
st
do
w
n 
co
un
te
r
cl
oc
k
q[
23
..0
]
di
v2
4
in
st
1
do
w
n 
co
un
te
r
cl
oc
k
q[
26
..0
]
di
v2
7
in
st
2
CL
RN
D
PR
N
Q
D
FF in
st
4 CL
RN
D
PR
N
Q
D
FF in
st
5 CL
RN
D
PR
N
Q
D
FF in
st
6
N
O
T
in
st
7
N
O
T
in
st
8
N
O
T
in
st
9
up
 c
ou
nt
er
cl
oc
k
cn
t_
en
aclr
q[
31
..0
]
cy
cl
ec
ou
nt
er
in
st
10
up
 c
ou
nt
er
cl
oc
k
cn
t_
en
aclr
q[
31
..0
]
cy
cl
ec
ou
nt
er
in
st
11
up
 c
ou
nt
er
cl
oc
k
cn
t_
en
aclr
q[
31
..0
]
cy
cl
ec
ou
nt
er
in
st
12
up
 c
ou
nt
er
cl
oc
k
cn
t_
en
aclr
q[
31
..0
]
cy
cl
ec
ou
nt
er
in
st
13
up
 c
ou
nt
er
cl
oc
k
cn
t_
en
aclr
q[
31
..0
]
cy
cl
ec
ou
nt
er
in
st
14
up
 c
ou
nt
er
cl
oc
k
cn
t_
en
aclr
q[
31
..0
]
cy
cl
ec
ou
nt
er
in
st
15
up
 c
ou
nt
er
cl
oc
k
cn
t_
en
aclr
q[
31
..0
]
cy
cl
ec
ou
nt
er
in
st
16
N
O
T
in
st
17
ga
te
C
lk
50
M
da
ta
[3
1.
.0
]
Q
[3
1.
.0
]
bu
ffe
r2
in
st
18 ga
te
C
lk
50
M
da
ta
[3
1.
.0
]
Q
[3
1.
.0
]
bu
ffe
r2
in
st
19 ga
te
C
lk
50
M
da
ta
[3
1.
.0
]
Q
[3
1.
.0
]
bu
ffe
r2
in
st
20 ga
te
C
lk
50
M
da
ta
[3
1.
.0
]
Q
[3
1.
.0
]
bu
ffe
r2
in
st
21 ga
te
C
lk
50
M
da
ta
[3
1.
.0
]
Q
[3
1.
.0
]
bu
ffe
r2
in
st
22 ga
te
C
lk
50
M
da
ta
[3
1.
.0
]
Q
[3
1.
.0
]
bu
ffe
r2
in
st
23 ga
te
C
lk
50
M
da
ta
[3
1.
.0
]
Q
[3
1.
.0
]
bu
ffe
r2
in
st
24
m
cy
cl
e1
[3
1.
.0
]
m
cy
cl
e2
[3
1.
.0
]
m
cy
cl
e3
[3
1.
.0
]
cc
yc
le
1[
31
..0
]
cc
yc
le
2[
31
..0
]
cc
yc
le
3[
31
..0
]
cc
yc
le
4[
31
..0
]
C
lo
ck
xc
lk
co
un
t[
31
..
0]
cl
kc
ou
nt
[3
1.
.0
]
se
le
ct
in
st
25
LO
G
IC
A
L 
le
ft
 s
hi
ft
da
ta
[3
1.
.0
]
di
st
an
ce
re
su
lt[
31
..0
]
sh
ift
le
ft
in
st
26
VCC
xc
lk
co
un
t[
31
..
0]
O
U
TP
U
T
cl
kc
ou
nt
[3
1.
.0
]
O
U
TP
U
T
a[
19
..
0]
b[
23
..
0]
c[26..0]
a[
19
]
b[
23
]
c[
26
]
 6
 
圖 3.8 20 kHz～10 MHz 量測誤差分佈 
 
圖 3.9 20 Hz～10 kHz 量測誤差分佈 
本研究採用電容式壓力感測器來驗證此
電容式感測器介面嵌入式系統，其壓力
輸入範圍在 1 psi～11 psi，電容-頻率
轉換介面電路輸出的頻率範圍為 1.03 
kHz～5.19 kHz。氣壓輸入裝置方面使用
空壓機（圖 3.10）配合壓力控制器，空
壓機提供可提供 1 psi～86 psi 的氣
壓，壓力控制器則負責調節輸出精確的
壓力值（1 psi～30 psi），可在其壓力
表上讀出。整個壓力量測系統的架構如
圖 3.11 所示。 
 
 
圖 3.10  空壓機 
 
 
圖 3.11  壓力量測系統架構圖 
 
 
四 結論與展望 
 
   我們提出了一個新型的半圓柱形的
電容型感測器。由模擬結果已證實,實現
此半圓柱形的電容式感測器可行，其輸
出的電容變化量與輸入流量成反比。並
完成一整合為崁入式系統，其結合感測
器、介面電路與微處理器的embedded 
MEMS system，達成這個微小化電容感測
