 中文摘要 
本研究建立偵測土石流移動之無線感應器網路系統，首先發展多點跳躍網路傳輸架構以
解決感應器埋設於土石中之訊號降低問題，再採用二維加速規設備，以慣性導航理論(inertia 
navigation system, INS)建立自主定位系統；同時透過訊號強度接收試驗(receiving signal 
strength intensity, RSSI)以迴歸公式及類神經網路，建立被動定位系統，兩種方法將可用來偵
測土石移動。同時為解決現場無通訊系統及供電系統之問題，採用低耗電的無線感測器網路
銜接感測器，並發展太陽能充放電控制器，配合太陽能電版，提供前端設備穩定的電力；而
中繼接收站則以嵌入式設備配合GPRS Modem，進行設備之即時儲存、接收及傳輸之用。整
個系統係以統一塑模理論(unified modeling language, UML)進行即時系統整合，將感應器、接
收站及基地台整合，將訊號透過無線網路傳輸至基地台，由資料庫儲存並提供網路存取，發
展後的系統可應用於監測於危險崩塌地土石移動情況以提供決策人員之參考。 
關鍵字：多點跳躍、無線感測網路、土石流、統一塑模理論 
英文摘要 
This study establishes a wireless sensor network to monitor the movement of debris flow. The 
mulit-hop transportation method is developed to solve the wireless message loss problem when 
sensor is located under the ground. The independent location system (ILS) is created by using 
two-dimensional acceleration equipment and the inertia navigation system (INS). The passive 
location system (PLS) is also generated by using receiving signal strength intensity (RSSI) of mote, 
regression method and artificial neuron network (ANN).  ILS and PLS is combined to monitor the 
debris flow.  The low power equipments including wireless sensor network (WSN) and embed 
system is adopted to reduce the power requirement. Solar cell and charge control system are 
developed to support the power for the field.  All the system is developed by real-time unified 
modeling language (RTUML) to arrange the system, which includes sensors, mid-station and base 
station, so as to transport the message to base station. Database management system (DBMS) and 
JAVA language are used to bear the data, and provide the network environment real-time monitoring. 
This system can supply the requirement of real-time remote monitoring of debris flow (RTRMDF). 
Keywords: multi-hop, wireless sensor network, debris flow, unified modeling language 
ㄧ、前言及研究目的 
根據『水土保持技術規範』(中華民國九十二年八月十五日修正)第 69 條『土石流指泥、
砂、礫及巨石等物質與水之混合物，以重力作用為主，水流作用為輔之流動體。』其特性是
衝力大，具直進性，且土石流之外型與一般常見之混凝土砂漿極為相似，因此又被喻為『天
然預拌混凝土』。若土石流發生於條件具備的山區野溪時，其對人類社會和自然環境即造成危
害。相較於一般的河川水流，土石流的顆粒濃度較高，流速較快且來勢兇猛，沖蝕力強且破
壞力大，很難預知其發生之準確時間，由土石砂礫和流量的混合至崩落，歷時很短，其過程
從幾分鐘到幾小時不等。根據統計，台灣地區從民國 70 年至民國 89 年，這 19 年來因土石
流災害造成之死亡人數約 200 人；而在日本 1967 至 1987 年 20 年間更有 1,257 人死於土石
流災害。在土石流發生之區域常常將房舍淹沒，橋梁沖毀，交通中斷，造成人民生命財產嚴
 2. 無線定位理論相關研究 
無線感應器網路主要定位理論係由一小部份已知位置之感應器，去推求其餘未知之感應
器位置，屬被動定位系統，常用方法包括四種： 
A. 收訊角度法(Angle of Arrival，AOA) 
利用天線偵測接收行動裝置訊號的角度進行有效的定位。 
B. 收訊時間差 (Time of Arrival/Time Difference of Arrival， TOA/TDoA)  
利用訊息在接收端與傳送端間傳送所花費的時間差求出兩者的相對距離。 
C. 時間差與收訊角度混合法  (HyBrid Angle and Time of Arrival) 
結合上述兩種作法，配合時間差以及 AP 收到訊號的角度對所在位置做定位。 
D. 訊號強度法  (Received Signal Strength Approach，RSS)  
利用行動裝置偵測不同位置所收到訊號強弱的方式，進一步做到定位的功能。 
Neal(2003)採用Cramér–Rao bound (CRB)及maximum-likelihood estimators (MLEs)去進
行無線感應器網路定位，並以室內及室外試驗比較RSS及TOA兩種方法織測量結果，圖1為室
外試驗比較結果，點1、4、13及16為參考點，誤差約在1至2m之間。 
 
圖1 真實位置(y＃T)與估算位置(▼＃E)之比較圖 
 
Qicai et al.(2005) 發展了一種解析解去模擬多點跳越(multihop)無線感應器網路下之相對位置
估算，並以試驗驗證得知誤差結果。量測時若參考點固定(range-based)，則通常會可以得到較
精確的點位估算，但若參考點亦隨之移動(range-free)，則估算之結果會較不準確，Ssu et 
al.(2005)採用range-free方式估算點位，移動參考點均配備GPS定期回傳其位置，演算結果相當
準確。而Santosh & Pathima(2006) 將定位法依實施面積(Area of Deployment)、使用參數如
SS(Signal strength)、Look up table、估算技術(Estimation technique)、定位實體(Localizing entity)
及安全性(Security)進行分類，並將各學者定位誤差與方法進行比較。 
  
圖 2 加拿大卡加立大學空間資訊工程學系研發的測量車 VISAT 
三、研究方法與設備 
1. 自主定位系統 
本研究採用慣性導航系統理論，來推導三維自主定位系統理論，再進行土石流流速試驗，
説明如下： 
令 i 座標系統為原點於 O 之慣性系統，其中 1i
r
、 1i
r
、 1i
r
為相互垂直的單位向量，空間中
任一點 P，當座標為 ),,( 321 ppp 可以由 O 到 P 的位置向量 r
r描述如下： 
→→→→ ++= 332211 ipipipr  (1) 
其速度向量為 
→→→→ ++= 332211 ipipipv &&&  (2) 
其加速度向量為 
→→→ ++= 332211 ipipipa &&&&&&r  (3) 
再考慮 j 座標系統為原點於 jO 之慣性系統，其中
→
1j 、
→
2j 、
→
3j 為相互垂直的單位向量，若 ρr
為由 jO 到 P 之向量，而R
r
為由 O 到 jO 之向量，則可推得 
ρrrr += Rr  (4) 
三個向量關係如圖 3。 
 ( )ρωωρωρωρρ &rrrr&r&rr&&rr ××+×+×+= jjdtd 22
2
 (9) 
其中 332211 jjjj
r&&r&&r&&&&r ρρρρ ++= ，可再推得運動力學的加速度方程式為 
( )ρωωρωρωρρ &rrrr&r&rr&&r&r&&rr ××+×+×+++= jjjRdt rd 22
2
 (10) 
式中R&&
r
表平移加速度，亦為由 i座標系統看 j 座標系統移動加速度， ρω r&r × 為角速度影響量， jρ&&r
代表 j
r
座標系統原點到P 點的加速度， ( )ρωω &rrr ×× 為離心加速度， jρω &rr ×2 為柯式加速度。 
本研究擬透過所研發之感應器獲取加速度方程式之R&&
r
、 jρ&&r 及ωr 代入(10 式，積分後推得運動
力學的速度方程式(8)式，再積分可推得實際位移。 
2. 被動定位系統 
圖 4 為人工神經 (artificial neuron)之模型，包含四個基本元素：  
(1)由許多輸入之突觸(synapse) ix 所形成的聯接鏈結(connecting links)，每一個鏈結之權重為
jiw 。 
(2)ㄧ個加法器(adder)∑ 以加總所有突觸乘以權重之和，圖 6 描述的是人工神經元之線性組
合。 
(3)ㄧ個行為函數(activation function) f  來控制輸出振幅(amplitude)，以得到神經元輸出 ky 。 
(4) ㄧ個外部應用偏差(externally applied bias) jb 以增加或降低淨輸入。 
對於加法器，有數個輸入 ix ，i= 1,…, m，每一個輸入皆乘以對應的權重 jiw ， j 為人工神經
元網路(Artificial Neuron Network, ANN)對應的下標，在自然神經系統時，權重可用來模擬生
物突觸，而 jiiwx 乘積之和為 
jjmmjjj bwx...wxwxnet ++++= 2211  (11a) 
設 jj bw =0  及預設輸入 10 =x , 可推得 
∑
=
=++++=
m
i
jiijmmjjjj wxwx...wxwxwxnet
1
221100  (11b) 
或可表成向量內積如下： 
WXnet j ⋅=  (12) 
式中 { }mx,...,x,x,xX 210= ； { }jmjjj w,...,w,w,wW 210= 。 
 a.  
b.  

c.  
d.GPRS
   
   

g.    
   
   
  
  
e.    
 
   
 
圖5 整體資料傳輸架構 
 
(a) MPR410（Mote Processor Radio） 
  
(b)Gateway MIB510 
圖6無線感測器網路設備 
 
  
(a) I-7188 實體圖       (b) I-7016D 實體圖    (c) GPRS Modem 
圖 7 中繼站嵌入式設備 
 表2 網格架構各層R值 
層名 R 值 
RAG 10 m 
GND 7 m 
UG1 2 m 
2. 自主定位系統 
A.試驗設備與配置 
試驗目的為測試二維加速規所計算之位移與真實位移誤差，採用加速度量測系統為
Crossbow 公司硬體，包括之 MTS310 感測板，內含 microphone、sounder、light、 temperature、
2-axis accelerometer and magnetometer，其中二維加速規採用 Analog Devices 之 ADXL202JE
加速規，如圖 7 所示，將設備直接與 mote 相接，透過無線網路回傳至 Gateway。 
 
圖10 MTS310 sensor board 
B. 試驗結果 
本研究將上述設備進行實際試驗，首先定義距離誤差 errd 如下： 
%
d
dd
d
r
ra
err 100×−=  (15) 
上式中 ad 為量測加速規轉換位移(cm)， rd 為實際位移(cm)，透過 CCD 攝影機之即時拍
攝定位，獲取如表 3 之試驗成果，四次試驗之誤差分別為 0.80%、6.94%、-14.29%及 10.61%，
顯示誤差仍大，究其原因可能係因為加速度擷取間隔時間過長，每秒間之加速度變化量為
非線性關係，因此需修改程式以縮短加速度擷取間隔時間，以便進行第二階段之斜面試驗。 
表3 預備試驗比較 
量測加速規轉換位移(cm) ad  時間(sec) 實際位移(cm) rd  
No.1 No.2 No.3 No.4 
1 25 58.8 39.2 29.4 19.6 
2 140 127.4 107.8 127.4 117.6 
3 275 230.3 240.1 230.3 245 
4 350 352.8 377.3 323.4 357.7 
 用較方便。 
0 0.9 1.8 2.7 3.6 4.5
X direction (m)
0
0.9
1.8
2.7
3.6
4.5
Y
 d
ire
ct
io
n 
(m
)
Gateway
Known mote
Predicted Mote
Regression
ANN
Gateway No.1
Gateway No.2 Gateway No.3
Gateway No.4
Mote 1
Mote 16
 
圖 12 預測點與實際點比較 
同時本研究控制面積限制於長 4.5m 之方陣，未來可將面積擴大，同時距離小於 1.5m
時，訊號強度異常，不適合用來預測距離。 
 
4. 現場配置設計 
本系統包括現場前端銜接感測器之mote，包括mote端充放電控制器，及中繼站控制器
設定，以便應用於現地無電力供應之環境，說明如下： 
A. mote 端控制器設計 
太陽能充電控制器主要是保證太陽能電池的電量轉充到蓄電池，同時又能控制蓄電池的
放電，圖 13 為控制箱內部圖的接線說明資料，包含電源控制箱內的線路配置與配置監測儀
器的電源，由上而下依序編號 1~6，說明如下： 
編號 1、編號 2 和編號 8：接地線功能。 
編號 3：提供 Mote 電力。 
編號 4：提供感測計電力。 
編號 5：為電池電壓顯示，傳回訊號值乘 10 等於實際電壓。 
編號 6：具備兩種供電方式，可直接將連接的蓄電池電力傳送給 Mote 使用;或是太陽能電池
的電量轉充到蓄電池，再從蓄電池輸出給 Mote 使用。 
編號 7：太陽能板接線，將從太陽能板接收的電力回傳到控制箱。 
  
圖 15 嵌入式系統示意圖 
(六)基地台接收 
本研究使用 Visual Basic 程式設計 Socket 監聽程式，提供給客戶端下達指令給遠端
I-7188EX，且接收由 GPRS Modem 傳送出的封包資料，並儲存於 Oracle 資料庫中。使用
Oracle 建立資料庫，設計如圖 16 為資料庫二階正規化後之實體關聯模型(Entity Relation 
Diagram, ERD)，並使用 JSP(JavaServer Pages)建構查詢監測資料網站。 目前已建立霧社水
庫下游崩塌地監測系統。 
 
 圖 16 ERD 實體關聯模型 
五、結論 
本研究建立一套以無線感測器網路、嵌入式設備、太陽能供電系統進行坡地土石流移
動監測系統，監測設備包括地下水位計、雨量計、二維加速度規，並建立自主定位系統及
被動定位系統，以進行土石移動偵測。研究發現自主式太陽能與無線感網路整合運用是可
行的，不僅低耗電量、穩定性高以及可廣泛的佈署監測節點；且只需由中繼站將各節點監
測資料接收，透過GPRS Modem即可將監測資料儲存於遠端Oracle資料庫中，達到資料於永
久性儲存，即可建構完成一個值得推廣與應用的即時環境監測系統。 
參考文獻 
1. Chang J. H. (2004), “Maximum Lifetime Routing in Wireless Sensor Networks,” Ieee/Acm 
Transactions On Networking, vol. 12, no. 4, 609-619. 
t
i t
