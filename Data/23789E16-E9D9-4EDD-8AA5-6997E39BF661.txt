 2
計畫中文摘要 
 
關鍵詞： 電腦象棋、象棋知識庫、自動化棋局整理分析、智慧型電腦輔助學習、資料
探勘，智慧型代理人 
 
本計畫內容為高等電腦象棋知識庫之設計、建構與應用，目標為利用我們現有的工
具，包括棋力接近七段的象棋程式、包含數十萬棋局的開局資料庫以及下棋網站的發展
經驗等等，來建立一套智慧型系統，以管理電腦對局及系統式教學，並利用網路伺服器
管理資料庫，並提供大眾化的棋局資料庫及教學系統。 
本計劃預計以三年的時間完成，首先將設計棋局分析及管理系統，包括打譜工具、
棋譜分類管理系統和資料庫管理系統。第二年將設計自動在網路上擷取棋局的代理人，
並且可以針對全局及殘局經由歸納、分析、推論等人工智慧方法，整理出具有相關性的
棋局資料，並進行正確著法的分析工作。而在第三年將進而設計智慧型電腦輔助學習系
統，製作互動性良好、便利性高的人機介面，呈現系統化的棋局資料，讓使用者以循序
漸進，由淺入深的方式學習象棋，使學習的過程更加生動有趣。 
這個高等電腦象棋知識庫完成之後，不但可以提供大眾化的棋局資料庫及教學系
統，讓人們可以學習象棋，而在發展過程中，也將發展新的資料探勘、資料庫處理，智
慧型電腦輔助學習及電腦對局等理論，預計可有四篇以上的論文發表。最後這個知識庫
更可幫助電腦象棋的發展，讓電腦象棋的棋力更上一層樓。 
 4
行政院國家科學委員會專題研究計畫期中精簡報告 
高等象棋知識庫之設計建構與應用(I) 
計畫編號：94-2213-E-309-005- 
 
執行期限：  94 年 08 月 01 日至 95 年 07 月 31 日 
 
共同主持人：許舜欽 
計畫主持人：顏士淨 
 
執行機構及單位名稱 
 
長榮大學資訊管理學系 
國立東華大學資訊工程系與研究所 
 
 
一、前言 
 
開局是電腦象棋非常重要的一
環，但是目前的開局資料庫，只能倚賴
開局樹來分析開局棋步[陳 1998]，事實
上，棋譜中還包含著許多其他有用的資
訊，如對局者的棋力、所思考的時間和
局後的檢討內容等等，這些都是應該考
慮的，因此，僅僅倚賴開局樹的架構是
不夠的，尤其是在現今的象棋程式棋力
已經接近大師水準時，一個更高等的象
棋知識庫，將可幫助象棋程式的棋力百
尺竿頭，更近一步。 
本計畫為三年的計畫，第一年預計
可在執行時間內完成研究打譜工具與
棋譜分類管理系統、資料庫管理系統及
使用者管理系統，完成預定的目標。 
 
二、研究目的 
棋力的高低，通常取決於細算的能
力，普通人下棋，通常推算不到六手。
高段棋士的算度雖然較為深遠，但是最
多也只能向前推算到十多個著手。然而
在開局階段，紅黑雙方要把棋子調動到
重要的位置，為中局的攻防作戰奠定基
礎，至少也要在十個著手之後，陣形才
能初見眉目，然後再經過四、五個回合
的開展，才能形成基本定型。在這十多
個回合當中，如果任何一方下出緩著或
是劣著，就極易受制於對方而處於劣
勢。但是僅僅依靠幾個著手的推算，卻
是很難看出緩著或劣著的存在。從電腦
對局的理論而言，我們可以說是因為水
平效應的緣故，使得利用搜尋方式的推
論系統，無法應付在開局階段所面臨的
問題。( Ye and Marsland 1992) 
為了在中局戰鬥開始之前，能夠避
免掉進對方所佈設的陷阱，或是為了布
陣爭先，以取得有利的形勢，幾百年
來，象棋專家們就不斷地在對局樹上反
覆推演各種可能的變化。他們評估著手
的利弊得失，然後去蕪存菁，把雙方較
佳的攻擊與防禦方式，分類歸納，集結
成譜，以供後人作為研習的典範。 
 6
功能，更利用電腦網路，擷取象棋高手
的對局記錄，加速學習的效果。 
在本計畫中將以三年的時間來研製本
計畫內容為高等電腦象棋知識庫之設
計、建構與應用，目標為利用我們的研
究成果，包括棋力七段的象棋程式、包
含數十萬棋局的開局資料庫以及下棋
網站的發展經驗等等，來建立一套智慧
型象棋知識庫系統，以管理電腦對局及
系統式教學，並利用網路伺服器管理資
料庫，並提供大眾化的棋局資料庫及教
學系統，這個高等電腦象棋知識庫不但
可以提供人們學習及研究象棋，另一方
面，一個內容充實，結構完整的象棋知
識庫也將是發展電腦象棋的最大利
器，將可幫助發展大師級的象棋程式，
這將是本計劃的目的。 
完成此計畫後，預計將會有以下貢
獻：首先下棋為一種公認高智慧的行
為，而象棋更被認為是對局遊戲中，非
常困難的一個問題，我們以資訊技術的
方法來解決開局的問題，這在人工智慧
上有相當大的意義。 
 
三、研究方法與成果 
本計畫執行期間為三年，在第一年
中，將完成：打譜工具與棋譜分類管理
系統、資料庫管理系統及使用者管理系
統。 
打譜工具與棋譜分類管理系統，它
們具有打譜軟體的基本功能，即製譜、
打譜、變著處理，並有棋譜分類管理功
能，可使棋友更容易的把收藏的棋局有
系統的整理出來。 
資料庫為伺服器所管理的部分，存
放棋局資料，使用者可進行棋局資料的
新增、刪除、修改、查詢等操作。查詢
的功能具有輔助介面來幫助棋友找到
自己所需的棋局。 
使用者管理的功能，包含進行登
入、登出系統、建立棋譜、查詢其他人
所建立之棋譜等，每位使用者皆能尋找
到系統中的所有棋局 
 
3.1 象棋棋局的資料結構 
首先研究象棋棋局的資料結構表
示方式，根據分獲第六、七、十、十一
屆電腦象棋奧林匹克賽銀牌程式「象棋
世家」的棋譜格式分析如下： 
z RNAME：String * 32，記錄紅方
的棋手姓名 
z BNAME:String * 32，記錄黑方的
棋手姓名 
z Result:String * 8，記錄棋局的結
果 
z GameDate:String * 10，棋局進行
的日期 
z Start:String * 128，開始各棋子的
座標，一般為空字串代表開始盤
面 
z Move:String * 900，記錄棋步訊
息，共記錄 450 步，其中開始及
結束各一個字元代替 
z LR：bool，左右互換，為了進行
棋局的標準化，一律由右方開
始，而若實際為左方開始，我們
會以此位元進行記錄 
z New：bool，若為真表示是新局
為 1，若為中盤或殘局則為 0 
z TurnRed：bool，若一開始為紅方
開始為 1，黑方開始則為 0 
z Event：String * 32，記錄比賽的
名稱 
z Round：String * 8，記錄比賽的
輪次 
z ECO：String * 4，存放棋手的等
 8
學習的對象，將該盤面下的紅優、黑
優、均勢的機率都算出來，以(機率) * 
(下出的棋局數)最高的視為「正確步」 
優點：能夠隨著棋局的增加促進棋力的
進步。 
缺點：勝率高的步不見得為正確步，很
可能是多數人選擇這樣走，即流行佈
局，但勝負卻是由錯誤的著法所決定。 
 
3.2.6 開局的管理 
主要的目標在於： 
1.可將平穩的變化，攻殺的佈局分別存
在不同的棋譜檔內。 
2.可將大師與一般棋手所下的棋局分
開。 
3.可根據對手的棋風做出開局選擇的校
調，符合人類下棋知己知彼的構思。 
 
3.2.7 象棋世家的開局引擎  
「象棋世家」的開局引擎採用資料庫的
型式，獨特的「插卡式」的設計，可讓
程式採用不同的開局風格及「頭腦」，
其組成架構如下： 
象棋世家開局架構 
long 盤面索引 hash 值 1; 
long 盤面索引 hash 值 2; 
int 該盤面走法起始點; 
int 該盤面走法目標點; 
long 該盤面走法紅優數; 
long 該盤面走法均勢數; 
long 該盤面走法黑優數; 
 
程式先將盤面轉成hash值1及hash
值 2，利用 SQL 將盤面走法找出，計算
出其使用率、紅好率、均勢率、黑好率，
做為判斷的依據。比如說剛開始有三步
棋最好，其分析如下： 
 
著手
選擇 
總數 使用
率 
紅好
率 
均勢
率 
黑好
率 
炮二
平五 
49097 65% 42% 18% 40%
兵三
進一 
10101 13% 42% 20% 38%
相三
進五 
7244 10% 41% 24% 35%
 
執紅棋時以總數*(紅好率+均勢率
/2)做為權數，使用亂數決定，在局勢多
的時後，其開局選擇，會接近 
49097*(42+18/2):10101*(42+20/2):7244
*(41+24/2)。若該著的總數低於「總數
最多步的著法」總數的的 1/5，則不列
入考慮。另外在考慮分歧盤面時，除開
局的第一、二手外三選一外，其他步為
二選一。另外對於某些人類高手已知的
必優或必劣盤面，以殺手著法的方式，
強迫程式去走該步。避免掉因亂數，造
成正確的步未走的情形。 
 
3.2.8 殺手局 
象棋中充滿著所謂的定式，一般而
言，某些盤面經過大量的對局驗證，有
了定論，是必勝、必敗、必和，只要雙
方均無錯漏，就必然會導向最後的勝、
負、和結果。利用程式來這些「殺手盤
面」，電腦很容易就能發揮強大的記憶
功能，成效遠大於搜尋及審局所能達到
的效果。這也是電腦象棋中，最容易吸
收到人類高手思維的一種方式。 
 
3.3 資料庫管理 
資料庫為伺服器所管理的部分，存
放棋局資料，使用者可進行棋局資料的
新增、刪除、修改、查詢等操作。查詢
的功能具有輔助介面來幫助棋友找到
 10
LANGUAGE，系統是依照 
LANGUAGE 的值，來設定與轉換語
系，LANGUAGE 這個特殊的欄位必須
放在〈HEAD〉段落最上方，其餘各式
的欄位可以任意的擺放之。  
並非所有的標籤都必須要擺放上
去，本研究能容忍某些標籤不存在，對
於 新標籤或者本研究無法判別的標
別，本研究的做法是忽略不處理，並不
會發出錯誤訊息。  
目前可以在〈HEAD〉這個段落可
以識別的標籤，列表如下：  
標籤關鍵字 意義 系統預設值 備註  
LANGUAGE 本文件語系 BIG5 註 1  
TITLE 標題      
POSITION 初始化盤面   註 2  
NEWUPSHOW 覆盤結果   註 3  
UPSHOW 實戰結局   註 4  
RESULT 實戰結束方法   註 5  
RED 紅方名稱 Red    
REDLEVEL 紅方段位      
REDSCORE 紅方等級分 1500    
BLACK 黑方名稱 Black    
BLACKLEVEL 黑方段位      
BLACKSCORE 黑方等級分 1500    
DATE 對弈日期      
EVENT 比賽名稱      
PLACE 對弈地點      
TIMESET 時間設定      
REDTIME 紅方總用時   註 6  
BLACKTIME 黑方總用時   註 6  
HANDS 總步數      
MIRROR 是否有映射處理過 FALSE 
註 7  
KEYIN 輸入本譜人員      
 
註一： 本欄位可以用的數據有 BIG5 跟
GB 兩種。  
如果有使用本標籤，本標籤在 HEAD 段
落內，必須最先使用，否則 系統有可
能出現不可預期的錯誤。 
  
註二： 本字串如果空白，系統將假設
本局為全局模式，如果是殘局，字串是
由 33 個字元組成，其設定方法後面會
說明。 
註三：覆盤結果為人類大師在棋局下完
後所進行分析研究所得的結論，相較於
棋局的實戰結局，我們更重視這個覆盤
結果。 
註四：實戰結局：記錄實戰雙方的勝負
結果。 
註五：實戰結束方法：一般有超時、求
和、認負、判和、判負……等等。 
註六：這部份由於人類的競賽，計時鐘
尚未電腦化，但在網路對弈，可以忠實
的記錄棋局所花的時間 
註七：棋盤有左右映射的關係，為了方
便查詢，我們一律以動棋盤右邊的子為
棋局開始的狀態，對於棋譜是左方開始
的，以這裡做為表示，在呈現時再進行
還原的動作。 
 
3.4.3〈MOVES〉段落 
目前的記譜方式是使用弈天網的
記譜形式，其中分支走法或者註解都擺
在〈MEMO〉 段落，該地方只有單純
的行棋記錄。  
一個最簡單的行棋記錄如下所示 
〈MOVES〉 
7C-4C 7J-6H 7A-6C 8J-7J 8A-7A 6G-6F 
7A-7G 1J-2H 1A-2C 
〈/MEMO〉 
由上面的例子可知，行棋記錄只單
純的由一連串棋步組成，棋步與棋步之
間是用空白隔開，且沒有加入任何字元
 12
傳，透過以 Soap 的方式由 client 端呼叫
Web-Service，透過網路服務進行棋局上
傳下載。 
 第二種是直接於頁面上，將 clinet
端內的棋局訊息，貼上於各對應的欄
位，或是將網路上查詢的結果，貼至
clinet 端的訊息交換窗口，以內定的轉
換程序，將棋譜儲存至 clinet 端的資料
庫內。 
 
 
 
四、結果及討論 
本計畫執行期間為三年，第一年預
計進度如下： 
4.1（2005 年 8 月至 2005 年 10 月）象
棋棋局的資料結構表示方式 
4.2（2005 年 11 月至 2006 年 1 月）研
究棋譜分類系統的建立方式 
4.3（2006 年 2 月至 2006 年 5 月）研究
資料庫管理系統 
4.4（2006 年 6 月至 2006 年 7 月）研究
使用者管理系統 
 
我們已將順利完成這四個步驟，這些都
將有助於完成本三年期的計畫的目標。 
 
五、計畫期中成果自評 
 
此計畫目前進度與原申請計畫的
內容相符，這個高等電腦象棋知識庫完
成之後，不但可以提供大眾化的棋局資
料庫及教學系統，讓人們可以學習象
棋，而在發展過程中，也將發展新的資
料探勘、資料庫處理，智慧型電腦輔助
學習及電腦對局等理論，預計可有四篇
以上的論文發表。最後這個知識庫更可
幫助電腦象棋的發展，讓電腦象棋的棋
力更上一層樓。 
另一方面，計畫的內容中，目前已
經有三篇論文正在準備發表中，確實達
到預期的進度。 
 
參考文獻 
 
1. 陳志昌，1998，電腦象棋開局知
識庫系統之設計與製作，台灣大
學資訊工程研究所碩士論文，
1998。 
2. 陳志昌、許舜欽，2001，電腦象
棋開局資料庫網路查詢應用系統
之研製”，第六屆人工智慧與應用
研討會論文集，2001年11月16
日，高雄，pages 588-592。 
3. 陳志昌、徐明煒、顏士淨，2002，
“Othello 開局資料庫系統之研
製,"  第七屆人工智慧與應用研
討會，2002年11月15日，台中，
台灣。 
4. 陳再興，1995，“電腦象棋停著殺
之研究”，元智工學院電機與資訊
工程研究所，碩士論文。 
5. 許舜欽, 1990a，電腦西洋棋和電
腦象棋的回顧與前瞻, 電腦學刊, 
第二卷, 第二期, 頁1─8, 1990。 
6. 許舜欽, 1990b，電腦象棋程式的
設計與製作, 電腦學刊, 第二卷, 
第四期, pp.1-11, 1990。 
7. 許舜欽, 1991，電腦對局的搜尋
技巧 , 台大工程學刊 , 第51期 , 
pp.17-31, 1991。 
8. 許舜欽、曹國明, 1991，電腦象
棋開局知識庫系統之研製, 台灣
大學工程學刊, 第五十三期, 頁
75─86, 1991。 
9. 許舜欽、林益興、1991，電腦象
棋的盲點解析, 電腦學刊, 第三
卷, 第四期, pp.1-6、1991  
10. 曹國明，1988，智慧型中國象棋
程式的設計和製作，國立台灣大
學資訊工程學研究所，碩士論
文，1988。 
